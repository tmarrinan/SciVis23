import{m as iv,_ as av,i as ov,c as Lh,a as co,w as sv,v as lv,n as Ph,t as Jf,q as Eh,o as Ch,p as uv,d as cv,l as fv,H as hv,__tla as pv}from"./HttpGetPlugin-4b7ddb7c.js";Promise.all([(()=>{try{return pv}catch{}})()]).then(async()=>{var Oh={exports:{}};(function(wo,Ua){(function(ql,vl){wo.exports=vl()})(self,function(){return function(){var ql={98847:function($,U,t){var M=t(71828),E={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var i in E){var S=i.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");M.addStyleRule(S,E[i])}},98222:function($,U,t){$.exports=t(82887)},27206:function($,U,t){$.exports=t(60822)},59893:function($,U,t){$.exports=t(23381)},5224:function($,U,t){$.exports=t(83832)},59509:function($,U,t){$.exports=t(72201)},75557:function($,U,t){$.exports=t(91815)},40338:function($,U,t){$.exports=t(21462)},35080:function($,U,t){$.exports=t(51319)},61396:function($,U,t){$.exports=t(57516)},40549:function($,U,t){$.exports=t(98128)},49866:function($,U,t){$.exports=t(99442)},36089:function($,U,t){$.exports=t(93740)},19548:function($,U,t){$.exports=t(8729)},35831:function($,U,t){$.exports=t(93814)},61039:function($,U,t){$.exports=t(14382)},97040:function($,U,t){$.exports=t(51759)},77986:function($,U,t){$.exports=t(10421)},24296:function($,U,t){$.exports=t(43102)},58872:function($,U,t){$.exports=t(92165)},29626:function($,U,t){$.exports=t(3325)},65591:function($,U,t){$.exports=t(36071)},69738:function($,U,t){$.exports=t(43905)},92650:function($,U,t){$.exports=t(35902)},35630:function($,U,t){$.exports=t(69816)},73434:function($,U,t){$.exports=t(94507)},27909:function($,U,t){var M=t(19548);M.register([t(27206),t(5224),t(58872),t(65591),t(69738),t(92650),t(49866),t(25743),t(6197),t(97040),t(85461),t(73434),t(54201),t(81299),t(47645),t(35630),t(77986),t(83043),t(93005),t(96881),t(4534),t(50581),t(40549),t(77900),t(47582),t(35080),t(21641),t(17280),t(5861),t(29626),t(10021),t(65317),t(96268),t(61396),t(35831),t(16122),t(46163),t(40344),t(40338),t(48131),t(36089),t(55334),t(75557),t(19440),t(99488),t(59893),t(97393),t(98222),t(61039),t(24296),t(66398),t(59509)]),$.exports=M},46163:function($,U,t){$.exports=t(15154)},96881:function($,U,t){$.exports=t(64943)},50581:function($,U,t){$.exports=t(21164)},55334:function($,U,t){$.exports=t(54186)},65317:function($,U,t){$.exports=t(94873)},10021:function($,U,t){$.exports=t(67618)},54201:function($,U,t){$.exports=t(58810)},5861:function($,U,t){$.exports=t(20593)},16122:function($,U,t){$.exports=t(29396)},83043:function($,U,t){$.exports=t(13551)},48131:function($,U,t){$.exports=t(46858)},47582:function($,U,t){$.exports=t(17988)},21641:function($,U,t){$.exports=t(68868)},96268:function($,U,t){$.exports=t(20467)},19440:function($,U,t){$.exports=t(91271)},99488:function($,U,t){$.exports=t(21461)},97393:function($,U,t){$.exports=t(85956)},25743:function($,U,t){$.exports=t(52979)},66398:function($,U,t){$.exports=t(32275)},17280:function($,U,t){$.exports=t(6419)},77900:function($,U,t){$.exports=t(61510)},81299:function($,U,t){$.exports=t(87619)},93005:function($,U,t){$.exports=t(93601)},40344:function($,U,t){$.exports=t(96595)},47645:function($,U,t){$.exports=t(70954)},6197:function($,U,t){$.exports=t(47462)},4534:function($,U,t){$.exports=t(17659)},85461:function($,U,t){$.exports=t(19990)},82884:function($){$.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},50215:function($,U,t){var M=t(82884),E=t(41940),i=t(85555),S=t(44467).templatedArray;t(24695),$.exports=S("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:E({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",i.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",i.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:E({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},3749:function($,U,t){var M=t(71828),E=t(89298),i=t(92605).draw;$.exports=function(g){var v=g._fullLayout,e=M.filterVisible(v.annotations);if(e.length&&g._fullData.length)return M.syncOrAsync([i,S],g)};function S(g){var v=g._fullLayout;M.filterVisible(v.annotations).forEach(function(e){var r=E.getFromId(g,e.xref),f=E.getFromId(g,e.yref),n=E.getRefType(e.xref),a=E.getRefType(e.yref);e._extremes={},n==="range"&&A(e,r),a==="range"&&A(e,f)})}function A(g,v){var e=v._id,r=e.charAt(0),f=g[r],n=g["a"+r],a=g[r+"ref"],o=g["a"+r+"ref"],h=g["_"+r+"padplus"],y=g["_"+r+"padminus"],p={x:1,y:-1}[r]*g[r+"shift"],x=3*g.arrowsize*g.arrowwidth||0,s=x+p,u=x-p,c=3*g.startarrowsize*g.arrowwidth||0,T=c+p,k=c-p,_;if(o===a){var b=E.findExtremes(v,[v.r2c(f)],{ppadplus:s,ppadminus:u}),P=E.findExtremes(v,[v.r2c(n)],{ppadplus:Math.max(h,T),ppadminus:Math.max(y,k)});_={min:[b.min[0],P.min[0]],max:[b.max[0],P.max[0]]}}else T=n?T+n:T,k=n?k-n:k,_=E.findExtremes(v,[v.r2c(f)],{ppadplus:Math.max(h,s,T),ppadminus:Math.max(y,u,k)});g._extremes[e]=_}},44317:function($,U,t){var M=t(71828),E=t(73972),i=t(44467).arrayEditor;$.exports={hasClickToShow:S,onClick:A};function S(e,r){var f=g(e,r);return f.on.length>0||f.explicitOff.length>0}function A(e,r){var f=g(e,r),n=f.on,a=f.off.concat(f.explicitOff),o={},h=e._fullLayout.annotations,y,p;if(n.length||a.length){for(y=0;y<n.length;y++)p=i(e.layout,"annotations",h[n[y]]),p.modifyItem("visible",!0),M.extendFlat(o,p.getUpdateObj());for(y=0;y<a.length;y++)p=i(e.layout,"annotations",h[a[y]]),p.modifyItem("visible",!1),M.extendFlat(o,p.getUpdateObj());return E.call("update",e,{},o)}}function g(e,r){var f=e._fullLayout.annotations,n=[],a=[],o=[],h=(r||[]).length,y,p,x,s,u,c,T,k;for(y=0;y<f.length;y++)if(x=f[y],s=x.clicktoshow,s){for(p=0;p<h;p++)if(u=r[p],c=u.xaxis,T=u.yaxis,c._id===x.xref&&T._id===x.yref&&c.d2r(u.x)===v(x._xclick,c)&&T.d2r(u.y)===v(x._yclick,T)){x.visible?s==="onout"?k=a:k=o:k=n,k.push(y);break}p===h&&x.visible&&s==="onout"&&a.push(y)}return{on:n,off:a,explicitOff:o}}function v(e,r){return r.type==="log"?r.l2r(e):r.d2r(e)}},25625:function($,U,t){var M=t(71828),E=t(7901);$.exports=function(i,S,A,g){g("opacity");var v=g("bgcolor"),e=g("bordercolor"),r=E.opacity(e);g("borderpad");var f=g("borderwidth"),n=g("showarrow");g("text",n?" ":A._dfltTitle.annotation),g("textangle"),M.coerceFont(g,"font",A.font),g("width"),g("align");var a=g("height");if(a&&g("valign"),n){var o=g("arrowside"),h,y;o.indexOf("end")!==-1&&(h=g("arrowhead"),y=g("arrowsize")),o.indexOf("start")!==-1&&(g("startarrowhead",h),g("startarrowsize",y)),g("arrowcolor",r?S.bordercolor:E.defaultLine),g("arrowwidth",(r&&f||1)*2),g("standoff"),g("startstandoff")}var p=g("hovertext"),x=A.hoverlabel||{};if(p){var s=g("hoverlabel.bgcolor",x.bgcolor||(E.opacity(v)?E.rgb(v):E.defaultLine)),u=g("hoverlabel.bordercolor",x.bordercolor||E.contrast(s));M.coerceFont(g,"hoverlabel.font",{family:x.font.family,size:x.font.size,color:x.font.color||u})}g("captureevents",!!p)}},94128:function($,U,t){var M=t(92770),E=t(58163);$.exports=function(i,S,A,g){S=S||{};var v=A==="log"&&S.type==="linear",e=A==="linear"&&S.type==="log";if(!(v||e))return;var r=i._fullLayout.annotations,f=S._id.charAt(0),n,a;function o(y){var p=n[y],x=null;v?x=E(p,S.range):x=Math.pow(10,p),M(x)||(x=null),g(a+y,x)}for(var h=0;h<r.length;h++)n=r[h],a="annotations["+h+"].",n[f+"ref"]===S._id&&o(f),n["a"+f+"ref"]===S._id&&o("a"+f)}},84046:function($,U,t){var M=t(71828),E=t(89298),i=t(85501),S=t(25625),A=t(50215);$.exports=function(v,e){i(v,e,{name:"annotations",handleItemDefaults:g})};function g(v,e,r){function f(l,d){return M.coerce(v,e,A,l,d)}var n=f("visible"),a=f("clicktoshow");if(n||a){S(v,e,r,f);for(var o=e.showarrow,h=["x","y"],y=[-10,-30],p={_fullLayout:r},x=0;x<2;x++){var s=h[x],u=E.coerceRef(v,e,p,s,"","paper");if(u!=="paper"){var c=E.getFromId(p,u);c._annIndices.push(e._index)}if(E.coercePosition(e,p,f,u,s,.5),o){var T="a"+s,k=E.coerceRef(v,e,p,T,"pixel",["pixel","paper"]);k!=="pixel"&&k!==u&&(k=e[T]="pixel");var _=k==="pixel"?y[x]:.4;E.coercePosition(e,p,f,k,T,_)}f(s+"anchor"),f(s+"shift")}if(M.noneOrAll(v,e,["x","y"]),o&&M.noneOrAll(v,e,["ax","ay"]),a){var b=f("xclick"),P=f("yclick");e._xclick=b===void 0?e.x:E.cleanPosition(b,p,e.xref),e._yclick=P===void 0?e.y:E.cleanPosition(P,p,e.yref)}}}},92605:function($,U,t){var M=t(39898),E=t(73972),i=t(74875),S=t(71828),A=S.strTranslate,g=t(89298),v=t(7901),e=t(91424),r=t(30211),f=t(63893),n=t(6964),a=t(28569),o=t(44467).arrayEditor,h=t(13011);$.exports={draw:y,drawOne:p,drawRaw:s};function y(u){var c=u._fullLayout;c._infolayer.selectAll(".annotation").remove();for(var T=0;T<c.annotations.length;T++)c.annotations[T].visible&&p(u,T);return i.previousPromises(u)}function p(u,c){var T=u._fullLayout,k=T.annotations[c]||{},_=g.getFromId(u,k.xref),b=g.getFromId(u,k.yref);_&&_.setScale(),b&&b.setScale(),s(u,k,c,!1,_,b)}function x(u,c,T,k,_){var b=_[T],P=_[T+"ref"],l=T.indexOf("y")!==-1,d=g.getRefType(P)==="domain",L=l?k.h:k.w;return u?d?b+(l?-c:c)/u._length:u.p2r(u.r2p(b)+c):b+(l?-c:c)/L}function s(u,c,T,k,_,b){var P=u._fullLayout,l=u._fullLayout._size,d=u._context.edits,L,w;k?(L="annotation-"+k,w=k+".annotations"):(L="annotation",w="annotations");var I=o(u.layout,w,c),z=I.modifyBase,B=I.modifyItem,O=I.getUpdateObj;P._infolayer.selectAll("."+L+'[data-index="'+T+'"]').remove();var R="clip"+P._uid+"_ann"+T;if(!c._input||c.visible===!1){M.selectAll("#"+R).remove();return}var C={x:{},y:{}},F=+c.textangle||0,N=P._infolayer.append("g").classed(L,!0).attr("data-index",String(T)).style("opacity",c.opacity),V=N.append("g").classed("annotation-text-g",!0),K=d[c.showarrow?"annotationTail":"annotationPosition"],Q=c.captureevents||d.annotationText||K;function at(pt){var yt={index:T,annotation:c._input,fullAnnotation:c,event:pt};return k&&(yt.subplotId=k),yt}var it=V.append("g").style("pointer-events",Q?"all":null).call(n,"pointer").on("click",function(){u._dragging=!1,u.emit("plotly_clickannotation",at(M.event))});c.hovertext&&it.on("mouseover",function(){var pt=c.hoverlabel,yt=pt.font,xt=this.getBoundingClientRect(),Ft=u.getBoundingClientRect();r.loneHover({x0:xt.left-Ft.left,x1:xt.right-Ft.left,y:(xt.top+xt.bottom)/2-Ft.top,text:c.hovertext,color:pt.bgcolor,borderColor:pt.bordercolor,fontFamily:yt.family,fontSize:yt.size,fontColor:yt.color},{container:P._hoverlayer.node(),outerContainer:P._paper.node(),gd:u})}).on("mouseout",function(){r.loneUnhover(P._hoverlayer.node())});var q=c.borderwidth,W=c.borderpad,Z=q+W,G=it.append("rect").attr("class","bg").style("stroke-width",q+"px").call(v.stroke,c.bordercolor).call(v.fill,c.bgcolor),et=c.width||c.height,nt=P._topclips.selectAll("#"+R).data(et?[0]:[]);nt.enter().append("clipPath").classed("annclip",!0).attr("id",R).append("rect"),nt.exit().remove();var X=c.font,Y=P._meta?S.templateString(c.text,P._meta):c.text,ot=it.append("text").classed("annotation-text",!0).text(Y);function rt(pt){return pt.call(e.font,X).attr({"text-anchor":{left:"start",right:"end"}[c.align]||"middle"}),f.convertToTspans(pt,u,ht),pt}function ht(){var pt=ot.selectAll("a");if(pt.size()===1&&pt.text()===ot.text()){var yt=it.insert("a",":first-child").attr({"xlink:xlink:href":pt.attr("xlink:href"),"xlink:xlink:show":pt.attr("xlink:show")}).style({cursor:"pointer"});yt.node().appendChild(G.node())}var xt=it.select(".annotation-text-math-group"),Ft=!xt.empty(),Et=e.bBox((Ft?xt:ot).node()),mt=Et.width,gt=Et.height,wt=c.width||mt,Pt=c.height||gt,Bt=Math.round(wt+2*Z),kt=Math.round(Pt+2*Z);function jt(_r,tr){return tr==="auto"&&(_r<.3333333333333333?tr="left":_r>.6666666666666666?tr="right":tr="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[tr]}for(var Ht=!1,Vt=["x","y"],ee=0;ee<Vt.length;ee++){var te=Vt[ee],ae=c[te+"ref"]||te,le=c["a"+te+"ref"],ce={x:_,y:b}[te],pe=(F+(te==="x"?0:-90))*Math.PI/180,we=Bt*Math.cos(pe),ve=kt*Math.sin(pe),Mt=Math.abs(we)+Math.abs(ve),It=c[te+"anchor"],Rt=c[te+"shift"]*(te==="x"?1:-1),zt=C[te],Tt,ft,ut,vt,St,Ot=g.getRefType(ae);if(ce&&Ot!=="domain"){var Xt=ce.r2fraction(c[te]);(Xt<0||Xt>1)&&(le===ae?(Xt=ce.r2fraction(c["a"+te]),(Xt<0||Xt>1)&&(Ht=!0)):Ht=!0),Tt=ce._offset+ce.r2p(c[te]),vt=.5}else{var $t=Ot==="domain";te==="x"?(ut=c[te],Tt=$t?ce._offset+ce._length*ut:Tt=l.l+l.w*ut):(ut=1-c[te],Tt=$t?ce._offset+ce._length*ut:Tt=l.t+l.h*ut),vt=c.showarrow?.5:ut}if(c.showarrow){zt.head=Tt;var de=c["a"+te];if(St=we*jt(.5,c.xanchor)-ve*jt(.5,c.yanchor),le===ae){var Me=g.getRefType(le);Me==="domain"?(te==="y"&&(de=1-de),zt.tail=ce._offset+ce._length*de):Me==="paper"?te==="y"?(de=1-de,zt.tail=l.t+l.h*de):zt.tail=l.l+l.w*de:zt.tail=ce._offset+ce.r2p(de),ft=St}else zt.tail=Tt+de,ft=St+de;zt.text=zt.tail+St;var Fe=P[te==="x"?"width":"height"];if(ae==="paper"&&(zt.head=S.constrain(zt.head,1,Fe-1)),le==="pixel"){var De=-Math.max(zt.tail-3,zt.text),Ae=Math.min(zt.tail+3,zt.text)-Fe;De>0?(zt.tail+=De,zt.text+=De):Ae>0&&(zt.tail-=Ae,zt.text-=Ae)}zt.tail+=Rt,zt.head+=Rt}else St=Mt*jt(vt,It),ft=St,zt.text=Tt+St;zt.text+=Rt,St+=Rt,ft+=Rt,c["_"+te+"padplus"]=Mt/2+ft,c["_"+te+"padminus"]=Mt/2-ft,c["_"+te+"size"]=Mt,c["_"+te+"shift"]=St}if(Ht){it.remove();return}var Ve=0,Qe=0;if(c.align!=="left"&&(Ve=(wt-mt)*(c.align==="center"?.5:1)),c.valign!=="top"&&(Qe=(Pt-gt)*(c.valign==="middle"?.5:1)),Ft)xt.select("svg").attr({x:Z+Ve-1,y:Z+Qe}).call(e.setClipUrl,et?R:null,u);else{var Sr=Z+Qe-Et.top,he=Z+Ve-Et.left;ot.call(f.positionText,he,Sr).call(e.setClipUrl,et?R:null,u)}nt.select("rect").call(e.setRect,Z,Z,wt,Pt),G.call(e.setRect,q/2,q/2,Bt-q,kt-q),it.call(e.setTranslate,Math.round(C.x.text-Bt/2),Math.round(C.y.text-kt/2)),V.attr({transform:"rotate("+F+","+C.x.text+","+C.y.text+")"});var je=function(_r,tr){N.selectAll(".annotation-arrow-g").remove();var Gt=C.x.head,re=C.y.head,fe=C.x.tail+_r,ye=C.y.tail+tr,Le=C.x.text+_r,_e=C.y.text+tr,Ce=S.rotationXYMatrix(F,Le,_e),ze=S.apply2DTransform(Ce),We=S.apply2DTransform2(Ce),qe=+G.attr("width"),ir=+G.attr("height"),xr=Le-.5*qe,Dt=xr+qe,Ut=_e-.5*ir,Te=Ut+ir,Se=[[xr,Ut,xr,Te],[xr,Te,Dt,Te],[Dt,Te,Dt,Ut],[Dt,Ut,xr,Ut]].map(We);if(!Se.reduce(function(Pr,rn){return Pr^!!S.segmentsIntersect(Gt,re,Gt+1e6,re+1e6,rn[0],rn[1],rn[2],rn[3])},!1)){Se.forEach(function(Pr){var rn=S.segmentsIntersect(fe,ye,Gt,re,Pr[0],Pr[1],Pr[2],Pr[3]);rn&&(fe=rn.x,ye=rn.y)});var Be=c.arrowwidth,Je=c.arrowcolor,$e=c.arrowside,Xe=N.append("g").style({opacity:v.opacity(Je)}).classed("annotation-arrow-g",!0),Oe=Xe.append("path").attr("d","M"+fe+","+ye+"L"+Gt+","+re).style("stroke-width",Be+"px").call(v.stroke,v.rgb(Je));if(h(Oe,$e,c),d.annotationPosition&&Oe.node().parentNode&&!k){var ar=Gt,cr=re;if(c.standoff){var sr=Math.sqrt(Math.pow(Gt-fe,2)+Math.pow(re-ye,2));ar+=c.standoff*(fe-Gt)/sr,cr+=c.standoff*(ye-re)/sr}var lr=Xe.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(fe-ar)+","+(ye-cr),transform:A(ar,cr)}).style("stroke-width",Be+6+"px").call(v.stroke,"rgba(0,0,0,0)").call(v.fill,"rgba(0,0,0,0)"),Or,Ir;a.init({element:lr.node(),gd:u,prepFn:function(){var Pr=e.getTranslate(it);Or=Pr.x,Ir=Pr.y,_&&_.autorange&&z(_._name+".autorange",!0),b&&b.autorange&&z(b._name+".autorange",!0)},moveFn:function(Pr,rn){var Zr=ze(Or,Ir),yn=Zr[0]+Pr,Tn=Zr[1]+rn;it.call(e.setTranslate,yn,Tn),B("x",x(_,Pr,"x",l,c)),B("y",x(b,rn,"y",l,c)),c.axref===c.xref&&B("ax",x(_,Pr,"ax",l,c)),c.ayref===c.yref&&B("ay",x(b,rn,"ay",l,c)),Xe.attr("transform",A(Pr,rn)),V.attr({transform:"rotate("+F+","+yn+","+Tn+")"})},doneFn:function(){E.call("_guiRelayout",u,O());var Pr=document.querySelector(".js-notes-box-panel");Pr&&Pr.redraw(Pr.selectedObj)}})}}};if(c.showarrow&&je(0,0),K){var Re;a.init({element:it.node(),gd:u,prepFn:function(){Re=V.attr("transform")},moveFn:function(_r,tr){var Gt="pointer";if(c.showarrow)c.axref===c.xref?B("ax",x(_,_r,"ax",l,c)):B("ax",c.ax+_r),c.ayref===c.yref?B("ay",x(b,tr,"ay",l.w,c)):B("ay",c.ay+tr),je(_r,tr);else{if(k)return;var re,fe;if(_)re=x(_,_r,"x",l,c);else{var ye=c._xsize/l.w,Le=c.x+(c._xshift-c.xshift)/l.w-ye/2;re=a.align(Le+_r/l.w,ye,0,1,c.xanchor)}if(b)fe=x(b,tr,"y",l,c);else{var _e=c._ysize/l.h,Ce=c.y-(c._yshift+c.yshift)/l.h-_e/2;fe=a.align(Ce-tr/l.h,_e,0,1,c.yanchor)}B("x",re),B("y",fe),(!_||!b)&&(Gt=a.getCursor(_?.5:re,b?.5:fe,c.xanchor,c.yanchor))}V.attr({transform:A(_r,tr)+Re}),n(it,Gt)},clickFn:function(_r,tr){c.captureevents&&u.emit("plotly_clickannotation",at(tr))},doneFn:function(){n(it),E.call("_guiRelayout",u,O());var _r=document.querySelector(".js-notes-box-panel");_r&&_r.redraw(_r.selectedObj)}})}}d.annotationText?ot.call(f.makeEditable,{delegate:it,gd:u}).call(rt).on("edit",function(pt){c.text=pt,this.call(rt),B("text",pt),_&&_.autorange&&z(_._name+".autorange",!0),b&&b.autorange&&z(b._name+".autorange",!0),E.call("_guiRelayout",u,O())}):ot.call(rt)}},13011:function($,U,t){var M=t(39898),E=t(7901),i=t(82884),S=t(71828),A=S.strScale,g=S.strRotate,v=S.strTranslate;$.exports=function(e,r,f){var n=e.node(),a=i[f.arrowhead||0],o=i[f.startarrowhead||0],h=(f.arrowwidth||1)*(f.arrowsize||1),y=(f.arrowwidth||1)*(f.startarrowsize||1),p=r.indexOf("start")>=0,x=r.indexOf("end")>=0,s=a.backoff*h+f.standoff,u=o.backoff*y+f.startstandoff,c,T,k,_;if(n.nodeName==="line"){c={x:+e.attr("x1"),y:+e.attr("y1")},T={x:+e.attr("x2"),y:+e.attr("y2")};var b=c.x-T.x,P=c.y-T.y;if(k=Math.atan2(P,b),_=k+Math.PI,s&&u&&s+u>Math.sqrt(b*b+P*P)){N();return}if(s){if(s*s>b*b+P*P){N();return}var l=s*Math.cos(k),d=s*Math.sin(k);T.x+=l,T.y+=d,e.attr({x2:T.x,y2:T.y})}if(u){if(u*u>b*b+P*P){N();return}var L=u*Math.cos(k),w=u*Math.sin(k);c.x-=L,c.y-=w,e.attr({x1:c.x,y1:c.y})}}else if(n.nodeName==="path"){var I=n.getTotalLength(),z="";if(I<s+u){N();return}var B=n.getPointAtLength(0),O=n.getPointAtLength(.1);k=Math.atan2(B.y-O.y,B.x-O.x),c=n.getPointAtLength(Math.min(u,I)),z="0px,"+u+"px,";var R=n.getPointAtLength(I),C=n.getPointAtLength(I-.1);_=Math.atan2(R.y-C.y,R.x-C.x),T=n.getPointAtLength(Math.max(0,I-s));var F=z?u+s:s;z+=I-F+"px,"+I+"px",e.style("stroke-dasharray",z)}function N(){e.style("stroke-dasharray","0px,100px")}function V(K,Q,at,it){K.path&&(K.noRotate&&(at=0),M.select(n.parentNode).append("path").attr({class:e.attr("class"),d:K.path,transform:v(Q.x,Q.y)+g(at*180/Math.PI)+A(it)}).style({fill:E.rgb(f.arrowcolor),"stroke-width":0}))}p&&V(o,c,k,y),x&&V(a,T,_,h)}},32745:function($,U,t){var M=t(92605),E=t(44317);$.exports={moduleType:"component",name:"annotations",layoutAttributes:t(50215),supplyLayoutDefaults:t(84046),includeBasePlot:t(76325)("annotations"),calcAutorange:t(3749),draw:M.draw,drawOne:M.drawOne,drawRaw:M.drawRaw,hasClickToShow:E.hasClickToShow,onClick:E.onClick,convertCoords:t(94128)}},26997:function($,U,t){var M=t(50215),E=t(30962).overrideAll,i=t(44467).templatedArray;$.exports=E(i("annotation",{visible:M.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:M.xanchor,xshift:M.xshift,yanchor:M.yanchor,yshift:M.yshift,text:M.text,textangle:M.textangle,font:M.font,width:M.width,height:M.height,opacity:M.opacity,align:M.align,valign:M.valign,bgcolor:M.bgcolor,bordercolor:M.bordercolor,borderpad:M.borderpad,borderwidth:M.borderwidth,showarrow:M.showarrow,arrowcolor:M.arrowcolor,arrowhead:M.arrowhead,startarrowhead:M.startarrowhead,arrowside:M.arrowside,arrowsize:M.arrowsize,startarrowsize:M.startarrowsize,arrowwidth:M.arrowwidth,standoff:M.standoff,startstandoff:M.startstandoff,hovertext:M.hovertext,hoverlabel:M.hoverlabel,captureevents:M.captureevents}),"calc","from-root")},5485:function($,U,t){var M=t(71828),E=t(89298);$.exports=function(S){for(var A=S.fullSceneLayout,g=A.annotations,v=0;v<g.length;v++)i(g[v],S);S.fullLayout._infolayer.selectAll(".annotation-"+S.id).remove()};function i(S,A){var g=A.fullSceneLayout,v=g.domain,e=A.fullLayout._size,r={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};S._xa={},M.extendFlat(S._xa,r),E.setConvert(S._xa),S._xa._offset=e.l+v.x[0]*e.w,S._xa.l2p=function(){return .5*(1+S._pdata[0]/S._pdata[3])*e.w*(v.x[1]-v.x[0])},S._ya={},M.extendFlat(S._ya,r),E.setConvert(S._ya),S._ya._offset=e.t+(1-v.y[1])*e.h,S._ya.l2p=function(){return .5*(1-S._pdata[1]/S._pdata[3])*e.h*(v.y[1]-v.y[0])}}},20226:function($,U,t){var M=t(71828),E=t(89298),i=t(85501),S=t(25625),A=t(26997);$.exports=function(v,e,r){i(v,e,{name:"annotations",handleItemDefaults:g,fullLayout:r.fullLayout})};function g(v,e,r,f){function n(h,y){return M.coerce(v,e,A,h,y)}function a(h){var y=h+"axis",p={_fullLayout:{}};return p._fullLayout[y]=r[y],E.coercePosition(e,p,n,h,h,.5)}var o=n("visible");o&&(S(v,e,f.fullLayout,n),a("x"),a("y"),a("z"),M.noneOrAll(v,e,["x","y","z"]),e.xref="x",e.yref="y",e.zref="z",n("xanchor"),n("yanchor"),n("xshift"),n("yshift"),e.showarrow&&(e.axref="pixel",e.ayref="pixel",n("ax",-10),n("ay",-30),M.noneOrAll(v,e,["ax","ay"])))}},82188:function($,U,t){var M=t(92605).drawRaw,E=t(63538),i=["x","y","z"];$.exports=function(S){for(var A=S.fullSceneLayout,g=S.dataScale,v=A.annotations,e=0;e<v.length;e++){for(var r=v[e],f=!1,n=0;n<3;n++){var a=i[n],o=r[a],h=A[a+"axis"],y=h.r2fraction(o);if(y<0||y>1){f=!0;break}}f?S.fullLayout._infolayer.select(".annotation-"+S.id+'[data-index="'+e+'"]').remove():(r._pdata=E(S.glplot.cameraParams,[A.xaxis.r2l(r.x)*g[0],A.yaxis.r2l(r.y)*g[1],A.zaxis.r2l(r.z)*g[2]]),M(S.graphDiv,r,e,S.id,r._xa,r._ya))}}},2468:function($,U,t){var M=t(73972),E=t(71828);$.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:t(26997)}}},layoutAttributes:t(26997),handleDefaults:t(20226),includeBasePlot:i,convert:t(5485),draw:t(82188)};function i(S,A){var g=M.subplotsRegistry.gl3d;if(g)for(var v=g.attrRegex,e=Object.keys(S),r=0;r<e.length;r++){var f=e[r];v.test(f)&&(S[f].annotations||[]).length&&(E.pushUnique(A._basePlotModules,g),E.pushUnique(A._subplots.gl3d,f))}}},7561:function($,U,t){$.exports=t(63489),t(94338),t(3961),t(38751),t(86825),t(37715),t(99384),t(43805),t(88874),t(83290),t(29108),t(55422),t(94320),t(31320),t(51367),t(21457)},72201:function($,U,t){var M=t(7561),E=t(71828),i=t(50606),S=i.EPOCHJD,A=i.ONEDAY,g={valType:"enumerated",values:E.sortObjectKeys(M.calendars),editType:"calc",dflt:"gregorian"},v=function(_,b,P,l){var d={};return d[P]=g,E.coerce(_,b,d,P,l)},e=function(_,b,P,l){for(var d=0;d<P.length;d++)v(_,b,P[d]+"calendar",l.calendar)},r={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},f={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},n={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},a="##",o={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:a,w:a,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function h(_,b,P){for(var l=Math.floor((b+.05)/A)+S,d=p(P).fromJD(l),L=0,w,I,z,B,O;(L=_.indexOf("%",L))!==-1;)w=_.charAt(L+1),w==="0"||w==="-"||w==="_"?(z=3,I=_.charAt(L+2),w==="_"&&(w="-")):(I=w,w="0",z=2),B=o[I],B?(B===a?O=a:O=d.formatDate(B[w]),_=_.substr(0,L)+O+_.substr(L+z),L+=O.length):L+=z;return _}var y={};function p(_){var b=y[_];return b||(b=y[_]=M.instance(_),b)}function x(_){return E.extendFlat({},g,{description:_})}function s(_){return"Sets the calendar system to use with `"+_+"` date data."}var u={xcalendar:x(s("x"))},c=E.extendFlat({},u,{ycalendar:x(s("y"))}),T=E.extendFlat({},c,{zcalendar:x(s("z"))}),k=x(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));$.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:c,bar:c,box:c,heatmap:c,contour:c,histogram:c,histogram2d:c,histogram2dcontour:c,scatter3d:T,surface:T,mesh3d:T,scattergl:c,ohlc:u,candlestick:u},layout:{calendar:x(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:k},yaxis:{calendar:k},scene:{xaxis:{calendar:k},yaxis:{calendar:k},zaxis:{calendar:k}},polar:{radialaxis:{calendar:k}}},transforms:{filter:{valuecalendar:x(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:x(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:g,handleDefaults:v,handleTraceDefaults:e,CANONICAL_SUNDAY:f,CANONICAL_TICK:r,DFLTRANGE:n,getCal:p,worldCalFmt:h}},22399:function($,U){U.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],U.defaultLine="#444",U.lightLine="#eee",U.background="#fff",U.borderLine="#BEC8D9",U.lightFraction=90.9090909090909},7901:function($,U,t){var M=t(84267),E=t(92770),i=t(73627).isTypedArray,S=$.exports={},A=t(22399);S.defaults=A.defaults;var g=S.defaultLine=A.defaultLine;S.lightLine=A.lightLine;var v=S.background=A.background;S.tinyRGB=function(r){var f=r.toRgb();return"rgb("+Math.round(f.r)+", "+Math.round(f.g)+", "+Math.round(f.b)+")"},S.rgb=function(r){return S.tinyRGB(M(r))},S.opacity=function(r){return r?M(r).getAlpha():0},S.addOpacity=function(r,f){var n=M(r).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+f+")"},S.combine=function(r,f){var n=M(r).toRgb();if(n.a===1)return M(r).toRgbString();var a=M(f||v).toRgb(),o=a.a===1?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a},h={r:o.r*(1-n.a)+n.r*n.a,g:o.g*(1-n.a)+n.g*n.a,b:o.b*(1-n.a)+n.b*n.a};return M(h).toRgbString()},S.contrast=function(r,f,n){var a=M(r);a.getAlpha()!==1&&(a=M(S.combine(r,v)));var o=a.isDark()?f?a.lighten(f):v:n?a.darken(n):g;return o.toString()},S.stroke=function(r,f){var n=M(f);r.style({stroke:S.tinyRGB(n),"stroke-opacity":n.getAlpha()})},S.fill=function(r,f){var n=M(f);r.style({fill:S.tinyRGB(n),"fill-opacity":n.getAlpha()})},S.clean=function(r){if(!(!r||typeof r!="object")){var f=Object.keys(r),n,a,o,h;for(n=0;n<f.length;n++)if(o=f[n],h=r[o],o.substr(o.length-5)==="color")if(Array.isArray(h))for(a=0;a<h.length;a++)h[a]=e(h[a]);else r[o]=e(h);else if(o.substr(o.length-10)==="colorscale"&&Array.isArray(h))for(a=0;a<h.length;a++)Array.isArray(h[a])&&(h[a][1]=e(h[a][1]));else if(Array.isArray(h)){var y=h[0];if(!Array.isArray(y)&&y&&typeof y=="object")for(a=0;a<h.length;a++)S.clean(h[a])}else h&&typeof h=="object"&&!i(h)&&S.clean(h)}};function e(r){if(E(r)||typeof r!="string")return r;var f=r.trim();if(f.substr(0,3)!=="rgb")return r;var n=f.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return r;var a=n[1].trim().split(/\s*[\s,]\s*/),o=f.charAt(3)==="a"&&a.length===4;if(!o&&a.length!==3)return r;for(var h=0;h<a.length;h++){if(!a[h].length||(a[h]=Number(a[h]),!(a[h]>=0)))return r;if(h===3)a[h]>1&&(a[h]=1);else if(a[h]>=1)return r}var y=Math.round(a[0]*255)+", "+Math.round(a[1]*255)+", "+Math.round(a[2]*255);return o?"rgba("+y+", "+a[3]+")":"rgb("+y+")"}},63583:function($,U,t){var M=t(13838),E=t(41940),i=t(1426).extendFlat,S=t(30962).overrideAll;$.exports=S({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:M.linecolor,outlinewidth:M.linewidth,bordercolor:M.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:M.minor.tickmode,nticks:M.nticks,tick0:M.tick0,dtick:M.dtick,tickvals:M.tickvals,ticktext:M.ticktext,ticks:i({},M.ticks,{dflt:""}),ticklabeloverflow:i({},M.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:M.ticklen,tickwidth:M.tickwidth,tickcolor:M.tickcolor,ticklabelstep:M.ticklabelstep,showticklabels:M.showticklabels,labelalias:M.labelalias,tickfont:E({}),tickangle:M.tickangle,tickformat:M.tickformat,tickformatstops:M.tickformatstops,tickprefix:M.tickprefix,showtickprefix:M.showtickprefix,ticksuffix:M.ticksuffix,showticksuffix:M.showticksuffix,separatethousands:M.separatethousands,exponentformat:M.exponentformat,minexponent:M.minexponent,showexponent:M.showexponent,title:{text:{valType:"string"},font:E({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:E({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},30939:function($){$.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},62499:function($,U,t){var M=t(71828),E=t(44467),i=t(26218),S=t(38701),A=t(96115),g=t(89426),v=t(63583);$.exports=function(e,r,f){var n=E.newContainer(r,"colorbar"),a=e.colorbar||{};function o(R,C){return M.coerce(a,n,v,R,C)}var h=f.margin||{t:0,b:0,l:0,r:0},y=f.width-h.l-h.r,p=f.height-h.t-h.b,x=o("orientation"),s=x==="v",u=o("thicknessmode");o("thickness",u==="fraction"?30/(s?y:p):30);var c=o("lenmode");o("len",c==="fraction"?1:s?p:y);var T=o("yref"),k=o("xref"),_=T==="paper",b=k==="paper",P,l,d,L="left";s?(d="middle",L=b?"left":"right",P=b?1.02:1,l=.5):(d=_?"bottom":"top",L="center",P=.5,l=_?1.02:1),M.coerce(a,n,{x:{valType:"number",min:b?-2:0,max:b?3:1,dflt:P}},"x"),M.coerce(a,n,{y:{valType:"number",min:_?-2:0,max:_?3:1,dflt:l}},"y"),o("xanchor",L),o("xpad"),o("yanchor",d),o("ypad"),M.noneOrAll(a,n,["x","y"]),o("outlinecolor"),o("outlinewidth"),o("bordercolor"),o("borderwidth"),o("bgcolor");var w=M.coerce(a,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:s?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");o("ticklabeloverflow",w.indexOf("inside")!==-1?"hide past domain":"hide past div"),i(a,n,o,"linear");var I=f.font,z={outerTicks:!1,font:I};w.indexOf("inside")!==-1&&(z.bgColor="black"),g(a,n,o,"linear",z),A(a,n,o,"linear",z),S(a,n,o,"linear",z),o("title.text",f._dfltTitle.colorbar);var B=n.showticklabels?n.tickfont:I,O=M.extendFlat({},B,{color:I.color,size:M.bigFont(B.size)});M.coerceFont(o,"title.font",O),o("title.side",s?"top":"right")}},98981:function($,U,t){var M=t(39898),E=t(84267),i=t(74875),S=t(73972),A=t(89298),g=t(28569),v=t(71828),e=v.strTranslate,r=t(1426).extendFlat,f=t(6964),n=t(91424),a=t(7901),o=t(92998),h=t(63893),y=t(52075).flipScale,p=t(71453),x=t(52830),s=t(13838),u=t(18783),c=u.LINE_SPACING,T=u.FROM_TL,k=u.FROM_BR,_=t(30939).cn;function b(I){var z=I._fullLayout,B=z._infolayer.selectAll("g."+_.colorbar).data(P(I),function(O){return O._id});B.enter().append("g").attr("class",function(O){return O._id}).classed(_.colorbar,!0),B.each(function(O){var R=M.select(this);v.ensureSingle(R,"rect",_.cbbg),v.ensureSingle(R,"g",_.cbfills),v.ensureSingle(R,"g",_.cblines),v.ensureSingle(R,"g",_.cbaxis,function(F){F.classed(_.crisp,!0)}),v.ensureSingle(R,"g",_.cbtitleunshift,function(F){F.append("g").classed(_.cbtitle,!0)}),v.ensureSingle(R,"rect",_.cboutline);var C=l(R,O,I);C&&C.then&&(I._promises||[]).push(C),I._context.edits.colorbarPosition&&d(R,O,I)}),B.exit().each(function(O){i.autoMargin(I,O._id)}).remove(),B.order()}function P(I){var z=I._fullLayout,B=I.calcdata,O=[],R,C,F,N;function V(X){return r(X,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function K(){typeof N.calc=="function"?N.calc(I,F,R):(R._fillgradient=C.reversescale?y(C.colorscale):C.colorscale,R._zrange=[C[N.min],C[N.max]])}for(var Q=0;Q<B.length;Q++){var at=B[Q];if(F=at[0].trace,!!F._module){var it=F._module.colorbar;if(F.visible===!0&&it)for(var q=Array.isArray(it),W=q?it:[it],Z=0;Z<W.length;Z++){N=W[Z];var G=N.container;C=G?F[G]:F,C&&C.showscale&&(R=V(C.colorbar),R._id="cb"+F.uid+(q&&G?"-"+G:""),R._traceIndex=F.index,R._propPrefix=(G?G+".":"")+"colorbar.",R._meta=F._meta,K(),O.push(R))}}}for(var et in z._colorAxes)if(C=z[et],C.showscale){var nt=z._colorAxes[et];R=V(C.colorbar),R._id="cb"+et,R._propPrefix=et+".colorbar.",R._meta=z._meta,N={min:"cmin",max:"cmax"},nt[0]!=="heatmap"&&(F=nt[1],N.calc=F._module.colorbar.calc),K(),O.push(R)}return O}function l(I,z,B){var O=z.orientation==="v",R=z.len,C=z.lenmode,F=z.thickness,N=z.thicknessmode,V=z.outlinewidth,K=z.borderwidth,Q=z.bgcolor,at=z.xanchor,it=z.yanchor,q=z.xpad,W=z.ypad,Z=z.x,G=O?z.y:1-z.y,et=z.yref==="paper",nt=z.xref==="paper",X=B._fullLayout,Y=X._size,ot=z._fillcolor,rt=z._line,ht=z.title,pt=ht.side,yt=z._zrange||M.extent((typeof ot=="function"?ot:rt.color).domain()),xt=typeof rt.color=="function"?rt.color:function(){return rt.color},Ft=typeof ot=="function"?ot:function(){return ot},Et=z._levels,mt=L(B,z,yt),gt=mt.fill,wt=mt.line,Pt=Math.round(F*(N==="fraction"?O?Y.w:Y.h:1)),Bt=Pt/(O?Y.w:Y.h),kt=Math.round(R*(C==="fraction"?O?Y.h:Y.w:1)),jt=kt/(O?Y.h:Y.w),Ht=nt?Y.w:B._fullLayout.width,Vt=et?Y.h:B._fullLayout.height,ee=Math.round(O?Z*Ht+q:G*Vt+W),te={center:.5,right:1}[at]||0,ae={top:1,middle:.5}[it]||0,le=O?Z-te*Bt:G-ae*Bt,ce=O?G-ae*jt:Z-te*jt,pe=Math.round(O?Vt*(1-ce):Ht*ce);z._lenFrac=jt,z._thickFrac=Bt,z._uFrac=le,z._vFrac=ce;var we=z._axis=w(B,z,yt);we.position=Bt+(O?Z+q/Y.w:G+W/Y.h);var ve=["top","bottom"].indexOf(pt)!==-1;if(O&&ve&&(we.title.side=pt,we.titlex=Z+q/Y.w,we.titley=ce+(ht.side==="top"?jt-W/Y.h:W/Y.h)),!O&&!ve&&(we.title.side=pt,we.titley=G+W/Y.h,we.titlex=ce+q/Y.w),rt.color&&z.tickmode==="auto"){we.tickmode="linear",we.tick0=Et.start;var Mt=Et.size,It=v.constrain(kt/50,4,15)+1,Rt=(yt[1]-yt[0])/((z.nticks||It)*Mt);if(Rt>1){var zt=Math.pow(10,Math.floor(Math.log(Rt)/Math.LN10));Mt*=zt*v.roundUp(Rt/zt,[2,5,10]),(Math.abs(Et.start)/Et.size+1e-6)%1<2e-6&&(we.tick0=0)}we.dtick=Mt}we.domain=O?[ce+W/Y.h,ce+jt-W/Y.h]:[ce+q/Y.w,ce+jt-q/Y.w],we.setScale(),I.attr("transform",e(Math.round(Y.l),Math.round(Y.t)));var Tt=I.select("."+_.cbtitleunshift).attr("transform",e(-Math.round(Y.l),-Math.round(Y.t))),ft=we.ticklabelposition,ut=we.title.font.size,vt=I.select("."+_.cbaxis),St,Ot=0,Xt=0;function $t(Ae,Ve){var Qe={propContainer:we,propName:z._propPrefix+"title",traceIndex:z._traceIndex,_meta:z._meta,placeholder:X._dfltTitle.colorbar,containerGroup:I.select("."+_.cbtitle)},Sr=Ae.charAt(0)==="h"?Ae.substr(1):"h"+Ae;I.selectAll("."+Sr+",."+Sr+"-math-group").remove(),o.draw(B,Ae,r(Qe,Ve||{}))}function de(){if(O&&ve||!O&&!ve){var Ae,Ve;pt==="top"&&(Ae=q+Y.l+Ht*Z,Ve=W+Y.t+Vt*(1-ce-jt)+3+ut*.75),pt==="bottom"&&(Ae=q+Y.l+Ht*Z,Ve=W+Y.t+Vt*(1-ce)-3-ut*.25),pt==="right"&&(Ve=W+Y.t+Vt*G+3+ut*.75,Ae=q+Y.l+Ht*ce),$t(we._id+"title",{attributes:{x:Ae,y:Ve,"text-anchor":O?"start":"middle"}})}}function Me(){if(O&&!ve||!O&&ve){var Ae=we.position||0,Ve=we._offset+we._length/2,Qe,Sr;if(pt==="right")Sr=Ve,Qe=Y.l+Ht*Ae+10+ut*(we.showticklabels?1:.5);else if(Qe=Ve,pt==="bottom"&&(Sr=Y.t+Vt*Ae+10+(ft.indexOf("inside")===-1?we.tickfont.size:0)+(we.ticks!=="intside"&&z.ticklen||0)),pt==="top"){var he=ht.text.split("<br>").length;Sr=Y.t+Vt*Ae+10-Pt-c*ut*he}$t((O?"h":"v")+we._id+"title",{avoid:{selection:M.select(B).selectAll("g."+we._id+"tick"),side:pt,offsetTop:O?0:Y.t,offsetLeft:O?Y.l:0,maxShift:O?X.width:X.height},attributes:{x:Qe,y:Sr,"text-anchor":"middle"},transform:{rotate:O?-90:0,offset:0}})}}function Fe(){if(!O&&!ve||O&&ve){var Ae=I.select("."+_.cbtitle),Ve=Ae.select("text"),Qe=[-V/2,V/2],Sr=Ae.select(".h"+we._id+"title-math-group").node(),he=15.6;Ve.node()&&(he=parseInt(Ve.node().style.fontSize,10)*c);var je;if(Sr?(je=n.bBox(Sr),Xt=je.width,Ot=je.height,Ot>he&&(Qe[1]-=(Ot-he)/2)):Ve.node()&&!Ve.classed(_.jsPlaceholder)&&(je=n.bBox(Ve.node()),Xt=je.width,Ot=je.height),O){if(Ot){if(Ot+=5,pt==="top")we.domain[1]-=Ot/Y.h,Qe[1]*=-1;else{we.domain[0]+=Ot/Y.h;var Re=h.lineCount(Ve);Qe[1]+=(1-Re)*he}Ae.attr("transform",e(Qe[0],Qe[1])),we.setScale()}}else Xt&&(pt==="right"&&(we.domain[0]+=(Xt+ut/2)/Y.w),Ae.attr("transform",e(Qe[0],Qe[1])),we.setScale())}I.selectAll("."+_.cbfills+",."+_.cblines).attr("transform",O?e(0,Math.round(Y.h*(1-we.domain[1]))):e(Math.round(Y.w*we.domain[0]),0)),vt.attr("transform",O?e(0,Math.round(-Y.t)):e(Math.round(-Y.l),0));var _r=I.select("."+_.cbfills).selectAll("rect."+_.cbfill).attr("style","").data(gt);_r.enter().append("rect").classed(_.cbfill,!0).attr("style",""),_r.exit().remove();var tr=yt.map(we.c2p).map(Math.round).sort(function(Le,_e){return Le-_e});_r.each(function(Le,_e){var Ce=[_e===0?yt[0]:(gt[_e]+gt[_e-1])/2,_e===gt.length-1?yt[1]:(gt[_e]+gt[_e+1])/2].map(we.c2p).map(Math.round);O&&(Ce[1]=v.constrain(Ce[1]+(Ce[1]>Ce[0])?1:-1,tr[0],tr[1]));var ze=M.select(this).attr(O?"x":"y",ee).attr(O?"y":"x",M.min(Ce)).attr(O?"width":"height",Math.max(Pt,2)).attr(O?"height":"width",Math.max(M.max(Ce)-M.min(Ce),2));if(z._fillgradient)n.gradient(ze,B,z._id,O?"vertical":"horizontalreversed",z._fillgradient,"fill");else{var We=Ft(Le).replace("e-","");ze.attr("fill",E(We).toHexString())}});var Gt=I.select("."+_.cblines).selectAll("path."+_.cbline).data(rt.color&&rt.width?wt:[]);Gt.enter().append("path").classed(_.cbline,!0),Gt.exit().remove(),Gt.each(function(Le){var _e=ee,Ce=Math.round(we.c2p(Le))+rt.width/2%1;M.select(this).attr("d","M"+(O?_e+","+Ce:Ce+","+_e)+(O?"h":"v")+Pt).call(n.lineGroupStyle,rt.width,xt(Le),rt.dash)}),vt.selectAll("g."+we._id+"tick,path").remove();var re=ee+Pt+(V||0)/2-(z.ticks==="outside"?1:0),fe=A.calcTicks(we),ye=A.getTickSigns(we)[2];return A.drawTicks(B,we,{vals:we.ticks==="inside"?A.clipEnds(we,fe):fe,layer:vt,path:A.makeTickPath(we,re,ye),transFn:A.makeTransTickFn(we)}),A.drawLabels(B,we,{vals:fe,layer:vt,transFn:A.makeTransTickLabelFn(we),labelFns:A.makeLabelFns(we,re)})}function De(){var Ae,Ve=Pt+V/2;ft.indexOf("inside")===-1&&(Ae=n.bBox(vt.node()),Ve+=O?Ae.width:Ae.height),St=Tt.select("text");var Qe=0,Sr=O&&pt==="top",he=!O&&pt==="right",je=0;if(St.node()&&!St.classed(_.jsPlaceholder)){var Re,_r=Tt.select(".h"+we._id+"title-math-group").node();_r&&(O&&ve||!O&&!ve)?(Ae=n.bBox(_r),Qe=Ae.width,Re=Ae.height):(Ae=n.bBox(Tt.node()),Qe=Ae.right-Y.l-(O?ee:pe),Re=Ae.bottom-Y.t-(O?pe:ee),!O&&pt==="top"&&(Ve+=Ae.height,je=Ae.height)),he&&(St.attr("transform",e(Qe/2+ut/2,0)),Qe*=2),Ve=Math.max(Ve,O?Qe:Re)}var tr=(O?q:W)*2+Ve+K+V/2,Gt=0;!O&&ht.text&&it==="bottom"&&G<=0&&(Gt=tr/2,tr+=Gt,je+=Gt),X._hColorbarMoveTitle=Gt,X._hColorbarMoveCBTitle=je;var re=K+V,fe=(O?ee:pe)-re/2-(O?q:0),ye=(O?pe:ee)-(O?kt:W+je-Gt);I.select("."+_.cbbg).attr("x",fe).attr("y",ye).attr(O?"width":"height",Math.max(tr-Gt,2)).attr(O?"height":"width",Math.max(kt+re,2)).call(a.fill,Q).call(a.stroke,z.bordercolor).style("stroke-width",K);var Le=he?Math.max(Qe-10,0):0;I.selectAll("."+_.cboutline).attr("x",(O?ee:pe+q)+Le).attr("y",(O?pe+W-kt:ee)+(Sr?Ot:0)).attr(O?"width":"height",Math.max(Pt,2)).attr(O?"height":"width",Math.max(kt-(O?2*W+Ot:2*q+Le),2)).call(a.stroke,z.outlinecolor).style({fill:"none","stroke-width":V});var _e=O?te*tr:0,Ce=O?0:(1-ae)*tr-je;if(_e=nt?Y.l-_e:-_e,Ce=et?Y.t-Ce:-Ce,I.attr("transform",e(_e,Ce)),!O&&(K||E(Q).getAlpha()&&!E.equals(X.paper_bgcolor,Q))){var ze=vt.selectAll("text"),We=ze[0].length,qe=I.select("."+_.cbbg).node(),ir=n.bBox(qe),xr=n.getTranslate(I),Dt=2;ze.each(function(cr,sr){var lr=0,Or=We-1;if(sr===lr||sr===Or){var Ir=n.bBox(this),Pr=n.getTranslate(this),rn;if(sr===Or){var Zr=Ir.right+Pr.x,yn=ir.right+xr.x+pe-K-Dt+Z;rn=yn-Zr,rn>0&&(rn=0)}else if(sr===lr){var Tn=Ir.left+Pr.x,hr=ir.left+xr.x+pe+K+Dt;rn=hr-Tn,rn<0&&(rn=0)}rn&&(We<3?this.setAttribute("transform","translate("+rn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Ut={},Te=T[at],Se=k[at],Be=T[it],Je=k[it],$e=tr-Pt;O?(C==="pixels"?(Ut.y=G,Ut.t=kt*Be,Ut.b=kt*Je):(Ut.t=Ut.b=0,Ut.yt=G+R*Be,Ut.yb=G-R*Je),N==="pixels"?(Ut.x=Z,Ut.l=tr*Te,Ut.r=tr*Se):(Ut.l=$e*Te,Ut.r=$e*Se,Ut.xl=Z-F*Te,Ut.xr=Z+F*Se)):(C==="pixels"?(Ut.x=Z,Ut.l=kt*Te,Ut.r=kt*Se):(Ut.l=Ut.r=0,Ut.xl=Z+R*Te,Ut.xr=Z-R*Se),N==="pixels"?(Ut.y=1-G,Ut.t=tr*Be,Ut.b=tr*Je):(Ut.t=$e*Be,Ut.b=$e*Je,Ut.yt=G-F*Be,Ut.yb=G+F*Je));var Xe=z.y<.5?"b":"t",Oe=z.x<.5?"l":"r";B._fullLayout._reservedMargin[z._id]={};var ar={r:X.width-fe-_e,l:fe+Ut.r,b:X.height-ye-Ce,t:ye+Ut.b};nt&&et?i.autoMargin(B,z._id,Ut):nt?B._fullLayout._reservedMargin[z._id][Xe]=ar[Xe]:et||O?B._fullLayout._reservedMargin[z._id][Oe]=ar[Oe]:B._fullLayout._reservedMargin[z._id][Xe]=ar[Xe]}return v.syncOrAsync([i.previousPromises,de,Fe,Me,i.previousPromises,De],B)}function d(I,z,B){var O=z.orientation==="v",R=B._fullLayout,C=R._size,F,N,V;g.init({element:I.node(),gd:B,prepFn:function(){F=I.attr("transform"),f(I)},moveFn:function(K,Q){I.attr("transform",F+e(K,Q)),N=g.align((O?z._uFrac:z._vFrac)+K/C.w,O?z._thickFrac:z._lenFrac,0,1,z.xanchor),V=g.align((O?z._vFrac:1-z._uFrac)-Q/C.h,O?z._lenFrac:z._thickFrac,0,1,z.yanchor);var at=g.getCursor(N,V,z.xanchor,z.yanchor);f(I,at)},doneFn:function(){if(f(I),N!==void 0&&V!==void 0){var K={};K[z._propPrefix+"x"]=N,K[z._propPrefix+"y"]=V,z._traceIndex!==void 0?S.call("_guiRestyle",B,K,z._traceIndex):S.call("_guiRelayout",B,K)}}})}function L(I,z,B){var O=z._levels,R=[],C=[],F,N,V=O.end+O.size/100,K=O.size,Q=1.001*B[0]-.001*B[1],at=1.001*B[1]-.001*B[0];for(N=0;N<1e5&&(F=O.start+N*K,!(K>0?F>=V:F<=V));N++)F>Q&&F<at&&R.push(F);if(z._fillgradient)C=[0];else if(typeof z._fillcolor=="function"){var it=z._filllevels;if(it)for(V=it.end+it.size/100,K=it.size,N=0;N<1e5&&(F=it.start+N*K,!(K>0?F>=V:F<=V));N++)F>B[0]&&F<B[1]&&C.push(F);else C=R.map(function(q){return q-O.size/2}),C.push(C[C.length-1]+O.size)}else z._fillcolor&&typeof z._fillcolor=="string"&&(C=[0]);return O.size<0&&(R.reverse(),C.reverse()),{line:R,fill:C}}function w(I,z,B){var O=I._fullLayout,R=z.orientation==="v",C={type:"linear",range:B,tickmode:z.tickmode,nticks:z.nticks,tick0:z.tick0,dtick:z.dtick,tickvals:z.tickvals,ticktext:z.ticktext,ticks:z.ticks,ticklen:z.ticklen,tickwidth:z.tickwidth,tickcolor:z.tickcolor,showticklabels:z.showticklabels,labelalias:z.labelalias,ticklabelposition:z.ticklabelposition,ticklabeloverflow:z.ticklabeloverflow,ticklabelstep:z.ticklabelstep,tickfont:z.tickfont,tickangle:z.tickangle,tickformat:z.tickformat,exponentformat:z.exponentformat,minexponent:z.minexponent,separatethousands:z.separatethousands,showexponent:z.showexponent,showtickprefix:z.showtickprefix,tickprefix:z.tickprefix,showticksuffix:z.showticksuffix,ticksuffix:z.ticksuffix,title:z.title,showline:!0,anchor:"free",side:R?"right":"bottom",position:1},F=R?"y":"x",N={type:"linear",_id:F+z._id},V={letter:F,font:O.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:O.calendar};function K(Q,at){return v.coerce(C,N,s,Q,at)}return p(C,N,K,V,O),x(C,N,K,V),N}$.exports={draw:b}},76228:function($,U,t){var M=t(71828);$.exports=function(E){return M.isPlainObject(E.colorbar)}},12311:function($,U,t){$.exports={moduleType:"component",name:"colorbar",attributes:t(63583),supplyDefaults:t(62499),draw:t(98981).draw,hasColorbar:t(76228)}},50693:function($,U,t){var M=t(63583),E=t(30587).counter,i=t(78607),S=t(63282).scales;i(S),$.exports=function(A,g){A=A||"",g=g||{};var v=g.cLetter||"c";"onlyIfNumerical"in g&&g.onlyIfNumerical;var e="noScale"in g?g.noScale:A==="marker.line",r="showScaleDflt"in g?g.showScaleDflt:v==="z",f=typeof g.colorscaleDflt=="string"?S[g.colorscaleDflt]:null,n=g.editTypeOverride||"",a;"colorAttr"in g?(a=g.colorAttr,g.colorAttr):a={z:"z",c:"color"}[v];var o=v+"auto",h=v+"min",y=v+"max",p=v+"mid",x={};x[h]=x[y]=void 0;var s={};s[o]=!1;var u={};return a==="color"&&(u.color={valType:"color",arrayOk:!0,editType:n||"style"},g.anim&&(u.color.anim=!0)),u[o]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:x},u[h]={valType:"number",dflt:null,editType:n||"plot",impliedEdits:s},u[y]={valType:"number",dflt:null,editType:n||"plot",impliedEdits:s},u[p]={valType:"number",dflt:null,editType:"calc",impliedEdits:x},u.colorscale={valType:"colorscale",editType:"calc",dflt:f,impliedEdits:{autocolorscale:!1}},u.autocolorscale={valType:"boolean",dflt:g.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},u.reversescale={valType:"boolean",dflt:!1,editType:"plot"},e||(u.showscale={valType:"boolean",dflt:r,editType:"calc"},u.colorbar=M),g.noColorAxis||(u.coloraxis={valType:"subplotid",regex:E("coloraxis"),dflt:null,editType:"calc"}),u}},78803:function($,U,t){var M=t(92770),E=t(71828),i=t(52075).extractOpts;$.exports=function(S,A,g){var v=S._fullLayout,e=g.vals,r=g.containerStr,f=r?E.nestedProperty(A,r).get():A,n=i(f),a=n.auto!==!1,o=n.min,h=n.max,y=n.mid,p=function(){return E.aggNums(Math.min,null,e)},x=function(){return E.aggNums(Math.max,null,e)};if(o===void 0?o=p():a&&(f._colorAx&&M(o)?o=Math.min(o,p()):o=p()),h===void 0?h=x():a&&(f._colorAx&&M(h)?h=Math.max(h,x()):h=x()),a&&y!==void 0&&(h-y>y-o?o=y-(h-y):h-y<y-o&&(h=y+(y-o))),o===h&&(o-=.5,h+=.5),n._sync("min",o),n._sync("max",h),n.autocolorscale){var s;o*h<0?s=v.colorscale.diverging:o>=0?s=v.colorscale.sequential:s=v.colorscale.sequentialminus,n._sync("colorscale",s)}}},33046:function($,U,t){var M=t(71828),E=t(52075).hasColorscale,i=t(52075).extractOpts;$.exports=function(S,A){function g(o,h){var y=o["_"+h];y!==void 0&&(o[h]=y)}function v(o,h){var y=h.container?M.nestedProperty(o,h.container).get():o;if(y)if(y.coloraxis)y._colorAx=A[y.coloraxis];else{var p=i(y),x=p.auto;(x||p.min===void 0)&&g(y,h.min),(x||p.max===void 0)&&g(y,h.max),p.autocolorscale&&g(y,"colorscale")}}for(var e=0;e<S.length;e++){var r=S[e],f=r._module.colorbar;if(f)if(Array.isArray(f))for(var n=0;n<f.length;n++)v(r,f[n]);else v(r,f);E(r,"marker.line")&&v(r,{container:"marker.line",min:"cmin",max:"cmax"})}for(var a in A._colorAxes)v(A[a],{min:"cmin",max:"cmax"})}},1586:function($,U,t){var M=t(92770),E=t(71828),i=t(76228),S=t(62499),A=t(63282).isValid,g=t(73972).traceIs;function v(e,r){var f=r.slice(0,r.length-1);return r?E.nestedProperty(e,f).get()||{}:e}$.exports=function e(r,f,n,a,o){var h=o.prefix,y=o.cLetter,p="_module"in f,x=v(r,h),s=v(f,h),u=v(f._template||{},h)||{},c=function(){return delete r.coloraxis,delete f.coloraxis,e(r,f,n,a,o)};if(p){var T=n._colorAxes||{},k=a(h+"coloraxis");if(k){var _=g(f,"contour")&&E.nestedProperty(f,"contours.coloring").get()||"heatmap",b=T[k];b?(b[2].push(c),b[0]!==_&&(b[0]=!1,E.warn(["Ignoring coloraxis:",k,"setting","as it is linked to incompatible colorscales."].join(" ")))):T[k]=[_,f,[c]];return}}var P=x[y+"min"],l=x[y+"max"],d=M(P)&&M(l)&&P<l,L=a(h+y+"auto",!d);L?a(h+y+"mid"):(a(h+y+"min"),a(h+y+"max"));var w=x.colorscale,I=u.colorscale,z;if(w!==void 0&&(z=!A(w)),I!==void 0&&(z=!A(I)),a(h+"autocolorscale",z),a(h+"colorscale"),a(h+"reversescale"),h!=="marker.line."){var B;h&&p&&(B=i(x));var O=a(h+"showscale",B);O&&(h&&u&&(s._template=u),S(x,s,n))}}},52075:function($,U,t){var M=t(39898),E=t(84267),i=t(92770),S=t(71828),A=t(7901),g=t(63282).isValid;function v(p,x,s){var u=x?S.nestedProperty(p,x).get()||{}:p,c=u[s||"color"],T=!1;if(S.isArrayOrTypedArray(c)){for(var k=0;k<c.length;k++)if(i(c[k])){T=!0;break}}return S.isPlainObject(u)&&(T||u.showscale===!0||i(u.cmin)&&i(u.cmax)||g(u.colorscale)||S.isPlainObject(u.colorbar))}var e=["showscale","autocolorscale","colorscale","reversescale","colorbar"],r=["min","max","mid","auto"];function f(p){var x=p._colorAx,s=x||p,u={},c,T,k;for(T=0;T<e.length;T++)k=e[T],u[k]=s[k];if(x)for(c="c",T=0;T<r.length;T++)k=r[T],u[k]=s["c"+k];else{var _;for(T=0;T<r.length;T++){if(k=r[T],_="c"+k,_ in s){u[k]=s[_];continue}_="z"+k,_ in s&&(u[k]=s[_])}c=_.charAt(0)}return u._sync=function(b,P){var l=r.indexOf(b)!==-1?c+b:b;s[l]=s["_"+l]=P},u}function n(p){for(var x=f(p),s=x.min,u=x.max,c=x.reversescale?a(x.colorscale):x.colorscale,T=c.length,k=new Array(T),_=new Array(T),b=0;b<T;b++){var P=c[b];k[b]=s+P[0]*(u-s),_[b]=P[1]}return{domain:k,range:_}}function a(p){for(var x=p.length,s=new Array(x),u=x-1,c=0;u>=0;u--,c++){var T=p[u];s[c]=[1-T[0],T[1]]}return s}function o(p,x){x=x||{};for(var s=p.domain,u=p.range,c=u.length,T=new Array(c),k=0;k<c;k++){var _=E(u[k]).toRgb();T[k]=[_.r,_.g,_.b,_.a]}var b=M.scale.linear().domain(s).range(T).clamp(!0),P=x.noNumericCheck,l=x.returnArray,d;return P&&l?d=b:P?d=function(L){return y(b(L))}:l?d=function(L){return i(L)?b(L):E(L).isValid()?L:A.defaultLine}:d=function(L){return i(L)?y(b(L)):E(L).isValid()?L:A.defaultLine},d.domain=b.domain,d.range=function(){return u},d}function h(p,x){return o(n(p),x)}function y(p){var x={r:p[0],g:p[1],b:p[2],a:p[3]};return E(x).toRgbString()}$.exports={hasColorscale:v,extractOpts:f,extractScale:n,flipScale:a,makeColorScaleFunc:o,makeColorScaleFuncFromTrace:h}},21081:function($,U,t){var M=t(63282),E=t(52075);$.exports={moduleType:"component",name:"colorscale",attributes:t(50693),layoutAttributes:t(72673),supplyLayoutDefaults:t(30959),handleDefaults:t(1586),crossTraceDefaults:t(33046),calc:t(78803),scales:M.scales,defaultScale:M.defaultScale,getScale:M.get,isValidScale:M.isValid,hasColorscale:E.hasColorscale,extractOpts:E.extractOpts,extractScale:E.extractScale,flipScale:E.flipScale,makeColorScaleFunc:E.makeColorScaleFunc,makeColorScaleFuncFromTrace:E.makeColorScaleFuncFromTrace}},72673:function($,U,t){var M=t(1426).extendFlat,E=t(50693),i=t(63282).scales;$.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:i.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:i.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:i.RdBu,editType:"calc"}},coloraxis:M({_isSubplotObj:!0,editType:"calc"},E("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},30959:function($,U,t){var M=t(71828),E=t(44467),i=t(72673),S=t(1586);$.exports=function(A,g){function v(y,p){return M.coerce(A,g,i,y,p)}v("colorscale.sequential"),v("colorscale.sequentialminus"),v("colorscale.diverging");var e=g._colorAxes,r,f;function n(y,p){return M.coerce(r,f,i.coloraxis,y,p)}for(var a in e){var o=e[a];if(o[0])r=A[a]||{},f=E.newContainer(g,a,"coloraxis"),f._name=a,S(r,f,g,n,{prefix:"",cLetter:"c"});else{for(var h=0;h<o[2].length;h++)o[2][h]();delete g._colorAxes[a]}}}},63282:function($,U,t){var M=t(84267),E={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764703,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882352,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},i=E.RdBu;function S(v,e){if(e||(e=i),!v)return e;function r(){try{v=E[v]||JSON.parse(v)}catch{v=e}}return typeof v=="string"&&(r(),typeof v=="string"&&r()),A(v)?v:e}function A(v){var e=0;if(!Array.isArray(v)||v.length<2||!v[0]||!v[v.length-1]||+v[0][0]!=0||+v[v.length-1][0]!=1)return!1;for(var r=0;r<v.length;r++){var f=v[r];if(f.length!==2||+f[0]<e||!M(f[1]).isValid())return!1;e=+f[0]}return!0}function g(v){return E[v]!==void 0?!0:A(v)}$.exports={scales:E,defaultScale:i,get:S,isValid:g}},92807:function($){$.exports=function(U,t,M,E,i){var S=(U-M)/(E-M),A=S+t/(E-M),g=(S+A)/2;return i==="left"||i==="bottom"?S:i==="center"||i==="middle"?g:i==="right"||i==="top"?A:S<.6666666666666666-g?S:A>1.3333333333333333-g?A:g}},70461:function($,U,t){var M=t(71828),E=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];$.exports=function(i,S,A,g){return A==="left"?i=0:A==="center"?i=1:A==="right"?i=2:i=M.constrain(Math.floor(i*3),0,2),g==="bottom"?S=0:g==="middle"?S=1:g==="top"?S=2:S=M.constrain(Math.floor(S*3),0,2),E[S][i]}},64505:function($,U){U.selectMode=function(t){return t==="lasso"||t==="select"},U.drawMode=function(t){return t==="drawclosedpath"||t==="drawopenpath"||t==="drawline"||t==="drawrect"||t==="drawcircle"},U.openMode=function(t){return t==="drawline"||t==="drawopenpath"},U.rectMode=function(t){return t==="select"||t==="drawline"||t==="drawrect"||t==="drawcircle"},U.freeMode=function(t){return t==="lasso"||t==="drawclosedpath"||t==="drawopenpath"},U.selectingOrDrawing=function(t){return U.freeMode(t)||U.rectMode(t)}},28569:function($,U,t){var M=t(48956),E=t(57035),i=t(38520),S=t(71828).removeElement,A=t(85555),g=$.exports={};g.align=t(92807),g.getCursor=t(70461);var v=t(26041);g.unhover=v.wrapped,g.unhoverRaw=v.raw,g.init=function(f){var n=f.gd,a=1,o=n._context.doubleClickDelay,h=f.element,y,p,x,s,u,c,T,k;n._mouseDownTime||(n._mouseDownTime=0),h.style.pointerEvents="all",h.onmousedown=P,i?(h._ontouchstart&&h.removeEventListener("touchstart",h._ontouchstart),h._ontouchstart=P,h.addEventListener("touchstart",P,{passive:!1})):h.ontouchstart=P;function _(L,w,I){return Math.abs(L)<I&&(L=0),Math.abs(w)<I&&(w=0),[L,w]}var b=f.clampFn||_;function P(L){n._dragged=!1,n._dragging=!0;var w=r(L);y=w[0],p=w[1],T=L.target,c=L,k=L.buttons===2||L.ctrlKey,typeof L.clientX>"u"&&typeof L.clientY>"u"&&(L.clientX=y,L.clientY=p),x=new Date().getTime(),x-n._mouseDownTime<o?a+=1:(a=1,n._mouseDownTime=x),f.prepFn&&f.prepFn(L,y,p),E&&!k?(u=e(),u.style.cursor=window.getComputedStyle(h).cursor):E||(u=document,s=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(h).cursor),document.addEventListener("mouseup",d),document.addEventListener("touchend",d),f.dragmode!==!1&&(L.preventDefault(),document.addEventListener("mousemove",l),document.addEventListener("touchmove",l,{passive:!1}))}function l(L){L.preventDefault();var w=r(L),I=f.minDrag||A.MINDRAG,z=b(w[0]-y,w[1]-p,I),B=z[0],O=z[1];(B||O)&&(n._dragged=!0,g.unhover(n,L)),n._dragged&&f.moveFn&&!k&&(n._dragdata={element:h,dx:B,dy:O},f.moveFn(B,O))}function d(L){if(delete n._dragdata,f.dragmode!==!1&&(L.preventDefault(),document.removeEventListener("mousemove",l),document.removeEventListener("touchmove",l)),document.removeEventListener("mouseup",d),document.removeEventListener("touchend",d),E?S(u):s&&(u.documentElement.style.cursor=s,s=null),!n._dragging){n._dragged=!1;return}if(n._dragging=!1,new Date().getTime()-n._mouseDownTime>o&&(a=Math.max(a-1,1)),n._dragged)f.doneFn&&f.doneFn();else if(f.clickFn&&f.clickFn(a,c),!k){var w;try{w=new MouseEvent("click",L)}catch{var I=r(L);w=document.createEvent("MouseEvents"),w.initMouseEvent("click",L.bubbles,L.cancelable,L.view,L.detail,L.screenX,L.screenY,I[0],I[1],L.ctrlKey,L.altKey,L.shiftKey,L.metaKey,L.button,L.relatedTarget)}T.dispatchEvent(w)}n._dragging=!1,n._dragged=!1}};function e(){var f=document.createElement("div");f.className="dragcover";var n=f.style;return n.position="fixed",n.left=0,n.right=0,n.top=0,n.bottom=0,n.zIndex=999999999,n.background="none",document.body.appendChild(f),f}g.coverSlip=e;function r(f){return M(f.changedTouches?f.changedTouches[0]:f,document.body)}},26041:function($,U,t){var M=t(11086),E=t(79990),i=t(24401).getGraphDiv,S=t(26675),A=$.exports={};A.wrapped=function(g,v,e){g=i(g),g._fullLayout&&E.clear(g._fullLayout._uid+S.HOVERID),A.raw(g,v,e)},A.raw=function(g,v){var e=g._fullLayout,r=g._hoverdata;v||(v={}),!(v.target&&!g._dragged&&M.triggerHandler(g,"plotly_beforehover",v)===!1)&&(e._hoverlayer.selectAll("g").remove(),e._hoverlayer.selectAll("line").remove(),e._hoverlayer.selectAll("circle").remove(),g._hoverdata=void 0,v.target&&r&&g.emit("plotly_unhover",{event:v,points:r}))}},79952:function($,U){U.P={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},U.u={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},91424:function($,U,t){var M=t(39898),E=t(71828),i=E.numberFormat,S=t(92770),A=t(84267),g=t(73972),v=t(7901),e=t(21081),r=E.strTranslate,f=t(63893),n=t(77922),a=t(18783),o=a.LINE_SPACING,h=t(37822).DESELECTDIM,y=t(34098),p=t(39984),x=t(23469).appendArrayPointValue,s=$.exports={};s.font=function(mt,gt,wt,Pt){E.isPlainObject(gt)&&(Pt=gt.color,wt=gt.size,gt=gt.family),gt&&mt.style("font-family",gt),wt+1&&mt.style("font-size",wt+"px"),Pt&&mt.call(v.fill,Pt)},s.setPosition=function(mt,gt,wt){mt.attr("x",gt).attr("y",wt)},s.setSize=function(mt,gt,wt){mt.attr("width",gt).attr("height",wt)},s.setRect=function(mt,gt,wt,Pt,Bt){mt.call(s.setPosition,gt,wt).call(s.setSize,Pt,Bt)},s.translatePoint=function(mt,gt,wt,Pt){var Bt=wt.c2p(mt.x),kt=Pt.c2p(mt.y);if(S(Bt)&&S(kt)&&gt.node())gt.node().nodeName==="text"?gt.attr("x",Bt).attr("y",kt):gt.attr("transform",r(Bt,kt));else return!1;return!0},s.translatePoints=function(mt,gt,wt){mt.each(function(Pt){var Bt=M.select(this);s.translatePoint(Pt,Bt,gt,wt)})},s.hideOutsideRangePoint=function(mt,gt,wt,Pt,Bt,kt){gt.attr("display",wt.isPtWithinRange(mt,Bt)&&Pt.isPtWithinRange(mt,kt)?null:"none")},s.hideOutsideRangePoints=function(mt,gt){if(gt._hasClipOnAxisFalse){var wt=gt.xaxis,Pt=gt.yaxis;mt.each(function(Bt){var kt=Bt[0].trace,jt=kt.xcalendar,Ht=kt.ycalendar,Vt=g.traceIs(kt,"bar-like")?".bartext":".point,.textpoint";mt.selectAll(Vt).each(function(ee){s.hideOutsideRangePoint(ee,M.select(this),wt,Pt,jt,Ht)})})}},s.crispRound=function(mt,gt,wt){return!gt||!S(gt)?wt||0:mt._context.staticPlot?gt:gt<1?1:Math.round(gt)},s.singleLineStyle=function(mt,gt,wt,Pt,Bt){gt.style("fill","none");var kt=(((mt||[])[0]||{}).trace||{}).line||{},jt=wt||kt.width||0,Ht=Bt||kt.dash||"";v.stroke(gt,Pt||kt.color),s.dashLine(gt,Ht,jt)},s.lineGroupStyle=function(mt,gt,wt,Pt){mt.style("fill","none").each(function(Bt){var kt=(((Bt||[])[0]||{}).trace||{}).line||{},jt=gt||kt.width||0,Ht=Pt||kt.dash||"";M.select(this).call(v.stroke,wt||kt.color).call(s.dashLine,Ht,jt)})},s.dashLine=function(mt,gt,wt){wt=+wt||0,gt=s.dashStyle(gt,wt),mt.style({"stroke-dasharray":gt,"stroke-width":wt+"px"})},s.dashStyle=function(mt,gt){gt=+gt||1;var wt=Math.max(gt,3);return mt==="solid"?mt="":mt==="dot"?mt=wt+"px,"+wt+"px":mt==="dash"?mt=3*wt+"px,"+3*wt+"px":mt==="longdash"?mt=5*wt+"px,"+5*wt+"px":mt==="dashdot"?mt=3*wt+"px,"+wt+"px,"+wt+"px,"+wt+"px":mt==="longdashdot"&&(mt=5*wt+"px,"+2*wt+"px,"+wt+"px,"+2*wt+"px"),mt};function u(mt,gt,wt){var Pt=gt.fillpattern,Bt=Pt&&s.getPatternAttr(Pt.shape,0,"");if(Bt){var kt=s.getPatternAttr(Pt.bgcolor,0,null),jt=s.getPatternAttr(Pt.fgcolor,0,null),Ht=Pt.fgopacity,Vt=s.getPatternAttr(Pt.size,0,8),ee=s.getPatternAttr(Pt.solidity,0,.3),te=gt.uid;s.pattern(mt,"point",wt,te,Bt,Vt,ee,void 0,Pt.fillmode,kt,jt,Ht)}else gt.fillcolor&&mt.call(v.fill,gt.fillcolor)}s.singleFillStyle=function(mt,gt){var wt=M.select(mt.node()),Pt=wt.data(),Bt=((Pt[0]||[])[0]||{}).trace||{};u(mt,Bt,gt)},s.fillGroupStyle=function(mt,gt){mt.style("stroke-width",0).each(function(wt){var Pt=M.select(this);wt[0].trace&&u(Pt,wt[0].trace,gt)})};var c=t(90998);s.symbolNames=[],s.symbolFuncs=[],s.symbolBackOffs=[],s.symbolNeedLines={},s.symbolNoDot={},s.symbolNoFill={},s.symbolList=[],Object.keys(c).forEach(function(mt){var gt=c[mt],wt=gt.n;s.symbolList.push(wt,String(wt),mt,wt+100,String(wt+100),mt+"-open"),s.symbolNames[wt]=mt,s.symbolFuncs[wt]=gt.f,s.symbolBackOffs[wt]=gt.backoff||0,gt.needLine&&(s.symbolNeedLines[wt]=!0),gt.noDot?s.symbolNoDot[wt]=!0:s.symbolList.push(wt+200,String(wt+200),mt+"-dot",wt+300,String(wt+300),mt+"-open-dot"),gt.noFill&&(s.symbolNoFill[wt]=!0)});var T=s.symbolNames.length,k="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";s.symbolNumber=function(mt){if(S(mt))mt=+mt;else if(typeof mt=="string"){var gt=0;mt.indexOf("-open")>0&&(gt=100,mt=mt.replace("-open","")),mt.indexOf("-dot")>0&&(gt+=200,mt=mt.replace("-dot","")),mt=s.symbolNames.indexOf(mt),mt>=0&&(mt+=gt)}return mt%100>=T||mt>=400?0:Math.floor(Math.max(mt,0))};function _(mt,gt,wt,Pt){var Bt=mt%100;return s.symbolFuncs[Bt](gt,wt,Pt)+(mt>=200?k:"")}var b={x1:1,x2:0,y1:0,y2:0},P={x1:0,x2:0,y1:1,y2:0},l=i("~f"),d={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:b},horizontalreversed:{node:"linearGradient",attrs:b,reversed:!0},vertical:{node:"linearGradient",attrs:P},verticalreversed:{node:"linearGradient",attrs:P,reversed:!0}};s.gradient=function(mt,gt,wt,Pt,Bt,kt){for(var jt=Bt.length,Ht=d[Pt],Vt=new Array(jt),ee=0;ee<jt;ee++)Ht.reversed?Vt[jt-1-ee]=[l((1-Bt[ee][0])*100),Bt[ee][1]]:Vt[ee]=[l(Bt[ee][0]*100),Bt[ee][1]];var te=gt._fullLayout,ae="g"+te._uid+"-"+wt,le=te._defs.select(".gradients").selectAll("#"+ae).data([Pt+Vt.join(";")],E.identity);le.exit().remove(),le.enter().append(Ht.node).each(function(){var ce=M.select(this);Ht.attrs&&ce.attr(Ht.attrs),ce.attr("id",ae);var pe=ce.selectAll("stop").data(Vt);pe.exit().remove(),pe.enter().append("stop"),pe.each(function(we){var ve=A(we[1]);M.select(this).attr({offset:we[0]+"%","stop-color":v.tinyRGB(ve),"stop-opacity":ve.getAlpha()})})}),mt.style(kt,W(ae,gt)).style(kt+"-opacity",null),mt.classed("gradient_filled",!0)},s.pattern=function(mt,gt,wt,Pt,Bt,kt,jt,Ht,Vt,ee,te,ae){var le=gt==="legend";Ht&&(Vt==="overlay"?(ee=Ht,te=v.contrast(ee)):(ee=void 0,te=Ht));var ce=wt._fullLayout,pe="p"+ce._uid+"-"+Pt,we,ve,Mt=function(de,Me,Fe,De,Ae){return De+(Ae-De)*(de-Me)/(Fe-Me)},It,Rt,zt,Tt,ft={},ut=A(te),vt=v.tinyRGB(ut),St=ut.getAlpha(),Ot=ae*St;switch(Bt){case"/":we=kt*Math.sqrt(2),ve=kt*Math.sqrt(2),It="M-"+we/4+","+ve/4+"l"+we/2+",-"+ve/2+"M0,"+ve+"L"+we+",0M"+we/4*3+","+ve/4*5+"l"+we/2+",-"+ve/2,Rt=jt*kt,Tt="path",ft={d:It,opacity:Ot,stroke:vt,"stroke-width":Rt+"px"};break;case"\\":we=kt*Math.sqrt(2),ve=kt*Math.sqrt(2),It="M"+we/4*3+",-"+ve/4+"l"+we/2+","+ve/2+"M0,0L"+we+","+ve+"M-"+we/4+","+ve/4*3+"l"+we/2+","+ve/2,Rt=jt*kt,Tt="path",ft={d:It,opacity:Ot,stroke:vt,"stroke-width":Rt+"px"};break;case"x":we=kt*Math.sqrt(2),ve=kt*Math.sqrt(2),It="M-"+we/4+","+ve/4+"l"+we/2+",-"+ve/2+"M0,"+ve+"L"+we+",0M"+we/4*3+","+ve/4*5+"l"+we/2+",-"+ve/2+"M"+we/4*3+",-"+ve/4+"l"+we/2+","+ve/2+"M0,0L"+we+","+ve+"M-"+we/4+","+ve/4*3+"l"+we/2+","+ve/2,Rt=kt-kt*Math.sqrt(1-jt),Tt="path",ft={d:It,opacity:Ot,stroke:vt,"stroke-width":Rt+"px"};break;case"|":we=kt,ve=kt,Tt="path",It="M"+we/2+",0L"+we/2+","+ve,Rt=jt*kt,Tt="path",ft={d:It,opacity:Ot,stroke:vt,"stroke-width":Rt+"px"};break;case"-":we=kt,ve=kt,Tt="path",It="M0,"+ve/2+"L"+we+","+ve/2,Rt=jt*kt,Tt="path",ft={d:It,opacity:Ot,stroke:vt,"stroke-width":Rt+"px"};break;case"+":we=kt,ve=kt,Tt="path",It="M"+we/2+",0L"+we/2+","+ve+"M0,"+ve/2+"L"+we+","+ve/2,Rt=kt-kt*Math.sqrt(1-jt),Tt="path",ft={d:It,opacity:Ot,stroke:vt,"stroke-width":Rt+"px"};break;case".":we=kt,ve=kt,jt<Math.PI/4?zt=Math.sqrt(jt*kt*kt/Math.PI):zt=Mt(jt,Math.PI/4,1,kt/2,kt/Math.sqrt(2)),Tt="circle",ft={cx:we/2,cy:ve/2,r:zt,opacity:Ot,fill:vt};break}var Xt=[Bt||"noSh",ee||"noBg",te||"noFg",kt,jt].join(";"),$t=ce._defs.select(".patterns").selectAll("#"+pe).data([Xt],E.identity);$t.exit().remove(),$t.enter().append("pattern").each(function(){var de=M.select(this);if(de.attr({id:pe,width:we+"px",height:ve+"px",patternUnits:"userSpaceOnUse",patternTransform:le?"scale(0.8)":""}),ee){var Me=A(ee),Fe=v.tinyRGB(Me),De=Me.getAlpha(),Ae=de.selectAll("rect").data([0]);Ae.exit().remove(),Ae.enter().append("rect").attr({width:we+"px",height:ve+"px",fill:Fe,"fill-opacity":De})}var Ve=de.selectAll(Tt).data([0]);Ve.exit().remove(),Ve.enter().append(Tt).attr(ft)}),mt.style("fill",W(pe,wt)).style("fill-opacity",null),mt.classed("pattern_filled",!0)},s.initGradients=function(mt){var gt=mt._fullLayout,wt=E.ensureSingle(gt._defs,"g","gradients");wt.selectAll("linearGradient,radialGradient").remove(),M.select(mt).selectAll(".gradient_filled").classed("gradient_filled",!1)},s.initPatterns=function(mt){var gt=mt._fullLayout,wt=E.ensureSingle(gt._defs,"g","patterns");wt.selectAll("pattern").remove(),M.select(mt).selectAll(".pattern_filled").classed("pattern_filled",!1)},s.getPatternAttr=function(mt,gt,wt){return mt&&E.isArrayOrTypedArray(mt)?gt<mt.length?mt[gt]:wt:mt},s.pointStyle=function(mt,gt,wt,Pt){if(mt.size()){var Bt=s.makePointStyleFns(gt);mt.each(function(kt){s.singlePointStyle(kt,M.select(this),gt,Bt,wt,Pt)})}},s.singlePointStyle=function(mt,gt,wt,Pt,Bt,kt){var jt=wt.marker,Ht=jt.line;if(kt&&kt.i>=0&&mt.i===void 0&&(mt.i=kt.i),gt.style("opacity",Pt.selectedOpacityFn?Pt.selectedOpacityFn(mt):mt.mo===void 0?jt.opacity:mt.mo),Pt.ms2mrc){var Vt;mt.ms==="various"||jt.size==="various"?Vt=3:Vt=Pt.ms2mrc(mt.ms),mt.mrc=Vt,Pt.selectedSizeFn&&(Vt=mt.mrc=Pt.selectedSizeFn(mt));var ee=s.symbolNumber(mt.mx||jt.symbol)||0;mt.om=ee%200>=100;var te=Et(mt,wt),ae=et(mt,wt);gt.attr("d",_(ee,Vt,te,ae))}var le=!1,ce,pe,we;if(mt.so)we=Ht.outlierwidth,pe=Ht.outliercolor,ce=jt.outliercolor;else{var ve=(Ht||{}).width;we=(mt.mlw+1||ve+1||(mt.trace?(mt.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in mt?pe=mt.mlcc=Pt.lineScale(mt.mlc):E.isArrayOrTypedArray(Ht.color)?pe=v.defaultLine:pe=Ht.color,E.isArrayOrTypedArray(jt.color)&&(ce=v.defaultLine,le=!0),"mc"in mt?ce=mt.mcc=Pt.markerScale(mt.mc):ce=jt.color||jt.colors||"rgba(0,0,0,0)",Pt.selectedColorFn&&(ce=Pt.selectedColorFn(mt))}if(mt.om)gt.call(v.stroke,ce).style({"stroke-width":(we||1)+"px",fill:"none"});else{gt.style("stroke-width",(mt.isBlank?0:we)+"px");var Mt=jt.gradient,It=mt.mgt;It?le=!0:It=Mt&&Mt.type,E.isArrayOrTypedArray(It)&&(It=It[0],d[It]||(It=0));var Rt=jt.pattern,zt=Rt&&s.getPatternAttr(Rt.shape,mt.i,"");if(It&&It!=="none"){var Tt=mt.mgc;Tt?le=!0:Tt=Mt.color;var ft=wt.uid;le&&(ft+="-"+mt.i),s.gradient(gt,Bt,ft,It,[[0,Tt],[1,ce]],"fill")}else if(zt){var ut=!1,vt=Rt.fgcolor;!vt&&kt&&kt.color&&(vt=kt.color,ut=!0);var St=s.getPatternAttr(vt,mt.i,kt&&kt.color||null),Ot=s.getPatternAttr(Rt.bgcolor,mt.i,null),Xt=Rt.fgopacity,$t=s.getPatternAttr(Rt.size,mt.i,8),de=s.getPatternAttr(Rt.solidity,mt.i,.3);ut=ut||mt.mcc||E.isArrayOrTypedArray(Rt.shape)||E.isArrayOrTypedArray(Rt.bgcolor)||E.isArrayOrTypedArray(Rt.fgcolor)||E.isArrayOrTypedArray(Rt.size)||E.isArrayOrTypedArray(Rt.solidity);var Me=wt.uid;ut&&(Me+="-"+mt.i),s.pattern(gt,"point",Bt,Me,zt,$t,de,mt.mcc,Rt.fillmode,Ot,St,Xt)}else E.isArrayOrTypedArray(ce)?v.fill(gt,ce[mt.i]):v.fill(gt,ce);we&&v.stroke(gt,pe)}},s.makePointStyleFns=function(mt){var gt={},wt=mt.marker;return gt.markerScale=s.tryColorscale(wt,""),gt.lineScale=s.tryColorscale(wt,"line"),g.traceIs(mt,"symbols")&&(gt.ms2mrc=y.isBubble(mt)?p(mt):function(){return(wt.size||6)/2}),mt.selectedpoints&&E.extendFlat(gt,s.makeSelectedPointStyleFns(mt)),gt},s.makeSelectedPointStyleFns=function(mt){var gt={},wt=mt.selected||{},Pt=mt.unselected||{},Bt=mt.marker||{},kt=wt.marker||{},jt=Pt.marker||{},Ht=Bt.opacity,Vt=kt.opacity,ee=jt.opacity,te=Vt!==void 0,ae=ee!==void 0;(E.isArrayOrTypedArray(Ht)||te||ae)&&(gt.selectedOpacityFn=function(zt){var Tt=zt.mo===void 0?Bt.opacity:zt.mo;return zt.selected?te?Vt:Tt:ae?ee:h*Tt});var le=Bt.color,ce=kt.color,pe=jt.color;(ce||pe)&&(gt.selectedColorFn=function(zt){var Tt=zt.mcc||le;return zt.selected?ce||Tt:pe||Tt});var we=Bt.size,ve=kt.size,Mt=jt.size,It=ve!==void 0,Rt=Mt!==void 0;return g.traceIs(mt,"symbols")&&(It||Rt)&&(gt.selectedSizeFn=function(zt){var Tt=zt.mrc||we/2;return zt.selected?It?ve/2:Tt:Rt?Mt/2:Tt}),gt},s.makeSelectedTextStyleFns=function(mt){var gt={},wt=mt.selected||{},Pt=mt.unselected||{},Bt=mt.textfont||{},kt=wt.textfont||{},jt=Pt.textfont||{},Ht=Bt.color,Vt=kt.color,ee=jt.color;return gt.selectedTextColorFn=function(te){var ae=te.tc||Ht;return te.selected?Vt||ae:ee||(Vt?ae:v.addOpacity(ae,h))},gt},s.selectedPointStyle=function(mt,gt){if(!(!mt.size()||!gt.selectedpoints)){var wt=s.makeSelectedPointStyleFns(gt),Pt=gt.marker||{},Bt=[];wt.selectedOpacityFn&&Bt.push(function(kt,jt){kt.style("opacity",wt.selectedOpacityFn(jt))}),wt.selectedColorFn&&Bt.push(function(kt,jt){v.fill(kt,wt.selectedColorFn(jt))}),wt.selectedSizeFn&&Bt.push(function(kt,jt){var Ht=jt.mx||Pt.symbol||0,Vt=wt.selectedSizeFn(jt);kt.attr("d",_(s.symbolNumber(Ht),Vt,Et(jt,gt),et(jt,gt))),jt.mrc2=Vt}),Bt.length&&mt.each(function(kt){for(var jt=M.select(this),Ht=0;Ht<Bt.length;Ht++)Bt[Ht](jt,kt)})}},s.tryColorscale=function(mt,gt){var wt=gt?E.nestedProperty(mt,gt).get():mt;if(wt){var Pt=wt.color;if((wt.colorscale||wt._colorAx)&&E.isArrayOrTypedArray(Pt))return e.makeColorScaleFuncFromTrace(wt)}return E.identity};var L={start:1,end:-1,middle:0,bottom:1,top:-1};function w(mt,gt,wt,Pt,Bt){var kt=M.select(mt.node().parentNode),jt=gt.indexOf("top")!==-1?"top":gt.indexOf("bottom")!==-1?"bottom":"middle",Ht=gt.indexOf("left")!==-1?"end":gt.indexOf("right")!==-1?"start":"middle",Vt=Pt?Pt/.8+1:0,ee=(f.lineCount(mt)-1)*o+1,te=L[Ht]*Vt,ae=wt*.75+L[jt]*Vt+(L[jt]-1)*ee*wt/2;mt.attr("text-anchor",Ht),Bt||kt.attr("transform",r(te,ae))}function I(mt,gt){var wt=mt.ts||gt.textfont.size;return S(wt)&&wt>0?wt:0}s.textPointStyle=function(mt,gt,wt){if(mt.size()){var Pt;if(gt.selectedpoints){var Bt=s.makeSelectedTextStyleFns(gt);Pt=Bt.selectedTextColorFn}var kt=gt.texttemplate,jt=wt._fullLayout;mt.each(function(Ht){var Vt=M.select(this),ee=kt?E.extractOption(Ht,gt,"txt","texttemplate"):E.extractOption(Ht,gt,"tx","text");if(!ee&&ee!==0){Vt.remove();return}if(kt){var te=gt._module.formatLabels,ae=te?te(Ht,gt,jt):{},le={};x(le,gt,Ht.i);var ce=gt._meta||{};ee=E.texttemplateString(ee,ae,jt._d3locale,le,Ht,ce)}var pe=Ht.tp||gt.textposition,we=I(Ht,gt),ve=Pt?Pt(Ht):Ht.tc||gt.textfont.color;Vt.call(s.font,Ht.tf||gt.textfont.family,we,ve).text(ee).call(f.convertToTspans,wt).call(w,pe,we,Ht.mrc)})}},s.selectedTextStyle=function(mt,gt){if(!(!mt.size()||!gt.selectedpoints)){var wt=s.makeSelectedTextStyleFns(gt);mt.each(function(Pt){var Bt=M.select(this),kt=wt.selectedTextColorFn(Pt),jt=Pt.tp||gt.textposition,Ht=I(Pt,gt);v.fill(Bt,kt);var Vt=g.traceIs(gt,"bar-like");w(Bt,jt,Ht,Pt.mrc2||Pt.mrc,Vt)})}};var z=.5;s.smoothopen=function(mt,gt){if(mt.length<3)return"M"+mt.join("L");var wt="M"+mt[0],Pt=[],Bt;for(Bt=1;Bt<mt.length-1;Bt++)Pt.push(N(mt[Bt-1],mt[Bt],mt[Bt+1],gt));for(wt+="Q"+Pt[0][0]+" "+mt[1],Bt=2;Bt<mt.length-1;Bt++)wt+="C"+Pt[Bt-2][1]+" "+Pt[Bt-1][0]+" "+mt[Bt];return wt+="Q"+Pt[mt.length-3][1]+" "+mt[mt.length-1],wt},s.smoothclosed=function(mt,gt){if(mt.length<3)return"M"+mt.join("L")+"Z";var wt="M"+mt[0],Pt=mt.length-1,Bt=[N(mt[Pt],mt[0],mt[1],gt)],kt;for(kt=1;kt<Pt;kt++)Bt.push(N(mt[kt-1],mt[kt],mt[kt+1],gt));for(Bt.push(N(mt[Pt-1],mt[Pt],mt[0],gt)),kt=1;kt<=Pt;kt++)wt+="C"+Bt[kt-1][1]+" "+Bt[kt][0]+" "+mt[kt];return wt+="C"+Bt[Pt][1]+" "+Bt[0][0]+" "+mt[0]+"Z",wt};var B,O;function R(mt,gt,wt){return wt&&(mt=Q(mt)),gt?F(mt[1]):C(mt[0])}function C(mt){var gt=M.round(mt,2);return B=gt,gt}function F(mt){var gt=M.round(mt,2);return O=gt,gt}function N(mt,gt,wt,Pt){var Bt=mt[0]-gt[0],kt=mt[1]-gt[1],jt=wt[0]-gt[0],Ht=wt[1]-gt[1],Vt=Math.pow(Bt*Bt+kt*kt,z/2),ee=Math.pow(jt*jt+Ht*Ht,z/2),te=(ee*ee*Bt-Vt*Vt*jt)*Pt,ae=(ee*ee*kt-Vt*Vt*Ht)*Pt,le=3*ee*(Vt+ee),ce=3*Vt*(Vt+ee);return[[C(gt[0]+(le&&te/le)),F(gt[1]+(le&&ae/le))],[C(gt[0]-(ce&&te/ce)),F(gt[1]-(ce&&ae/ce))]]}var V={hv:function(mt,gt,wt){return"H"+C(gt[0])+"V"+R(gt,1,wt)},vh:function(mt,gt,wt){return"V"+F(gt[1])+"H"+R(gt,0,wt)},hvh:function(mt,gt,wt){return"H"+C((mt[0]+gt[0])/2)+"V"+F(gt[1])+"H"+R(gt,0,wt)},vhv:function(mt,gt,wt){return"V"+F((mt[1]+gt[1])/2)+"H"+C(gt[0])+"V"+R(gt,1,wt)}},K=function(mt,gt,wt){return"L"+R(gt,0,wt)+","+R(gt,1,wt)};s.steps=function(mt){var gt=V[mt]||K;return function(wt){for(var Pt="M"+C(wt[0][0])+","+F(wt[0][1]),Bt=wt.length,kt=1;kt<Bt;kt++)Pt+=gt(wt[kt-1],wt[kt],kt===Bt-1);return Pt}};function Q(mt,gt){var wt=mt.backoff,Pt=mt.trace,Bt=mt.d,kt=mt.i;if(wt&&Pt&&Pt.marker&&Pt.marker.angle%360===0&&Pt.line&&Pt.line.shape!=="spline"){var jt=E.isArrayOrTypedArray(wt),Ht=mt,Vt=gt?gt[0]:B||0,ee=gt?gt[1]:O||0,te=Ht[0],ae=Ht[1],le=te-Vt,ce=ae-ee,pe=Math.atan2(ce,le),we=jt?wt[kt]:wt;if(we==="auto"){var ve=Ht.i;Pt.type==="scatter"&&ve--;var Mt=Ht.marker,It=Mt.symbol;E.isArrayOrTypedArray(It)&&(It=It[ve]);var Rt=Mt.size;E.isArrayOrTypedArray(Rt)&&(Rt=Rt[ve]),we=Mt?s.symbolBackOffs[s.symbolNumber(It)]*Rt:0,we+=s.getMarkerStandoff(Bt[ve],Pt)||0}var zt=te-we*Math.cos(pe),Tt=ae-we*Math.sin(pe);(zt<=te&&zt>=Vt||zt>=te&&zt<=Vt)&&(Tt<=ae&&Tt>=ee||Tt>=ae&&Tt<=ee)&&(mt=[zt,Tt])}return mt}s.applyBackoff=Q,s.makeTester=function(){var mt=E.ensureSingleById(M.select("body"),"svg","js-plotly-tester",function(wt){wt.attr(n.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),gt=E.ensureSingle(mt,"path","js-reference-point",function(wt){wt.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});s.tester=mt,s.testref=gt},s.savedBBoxes={};var at=0,it=1e4;s.bBox=function(mt,gt,wt){wt||(wt=q(mt));var Pt;if(wt){if(Pt=s.savedBBoxes[wt],Pt)return E.extendFlat({},Pt)}else if(mt.childNodes.length===1){var Bt=mt.childNodes[0];if(wt=q(Bt),wt){var kt=+Bt.getAttribute("x")||0,jt=+Bt.getAttribute("y")||0,Ht=Bt.getAttribute("transform");if(!Ht){var Vt=s.bBox(Bt,!1,wt);return kt&&(Vt.left+=kt,Vt.right+=kt),jt&&(Vt.top+=jt,Vt.bottom+=jt),Vt}if(wt+="~"+kt+"~"+jt+"~"+Ht,Pt=s.savedBBoxes[wt],Pt)return E.extendFlat({},Pt)}}var ee,te;gt?ee=mt:(te=s.tester.node(),ee=mt.cloneNode(!0),te.appendChild(ee)),M.select(ee).attr("transform",null).call(f.positionText,0,0);var ae=ee.getBoundingClientRect(),le=s.testref.node().getBoundingClientRect();gt||te.removeChild(ee);var ce={height:ae.height,width:ae.width,left:ae.left-le.left,top:ae.top-le.top,right:ae.right-le.left,bottom:ae.bottom-le.top};return at>=it&&(s.savedBBoxes={},at=0),wt&&(s.savedBBoxes[wt]=ce),at++,E.extendFlat({},ce)};function q(mt){var gt=mt.getAttribute("data-unformatted");if(gt!==null)return gt+mt.getAttribute("data-math")+mt.getAttribute("text-anchor")+mt.getAttribute("style")}s.setClipUrl=function(mt,gt,wt){mt.attr("clip-path",W(gt,wt))};function W(mt,gt){if(!mt)return null;var wt=gt._context,Pt=wt._exportedPlot?"":wt._baseUrl||"";return Pt?"url('"+Pt+"#"+mt+"')":"url(#"+mt+")"}s.getTranslate=function(mt){var gt=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,wt=mt.attr?"attr":"getAttribute",Pt=mt[wt]("transform")||"",Bt=Pt.replace(gt,function(kt,jt,Ht){return[jt,Ht].join(" ")}).split(" ");return{x:+Bt[0]||0,y:+Bt[1]||0}},s.setTranslate=function(mt,gt,wt){var Pt=/(\btranslate\(.*?\);?)/,Bt=mt.attr?"attr":"getAttribute",kt=mt.attr?"attr":"setAttribute",jt=mt[Bt]("transform")||"";return gt=gt||0,wt=wt||0,jt=jt.replace(Pt,"").trim(),jt+=r(gt,wt),jt=jt.trim(),mt[kt]("transform",jt),jt},s.getScale=function(mt){var gt=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,wt=mt.attr?"attr":"getAttribute",Pt=mt[wt]("transform")||"",Bt=Pt.replace(gt,function(kt,jt,Ht){return[jt,Ht].join(" ")}).split(" ");return{x:+Bt[0]||1,y:+Bt[1]||1}},s.setScale=function(mt,gt,wt){var Pt=/(\bscale\(.*?\);?)/,Bt=mt.attr?"attr":"getAttribute",kt=mt.attr?"attr":"setAttribute",jt=mt[Bt]("transform")||"";return gt=gt||1,wt=wt||1,jt=jt.replace(Pt,"").trim(),jt+="scale("+gt+","+wt+")",jt=jt.trim(),mt[kt]("transform",jt),jt};var Z=/\s*sc.*/;s.setPointGroupScale=function(mt,gt,wt){if(gt=gt||1,wt=wt||1,!!mt){var Pt=gt===1&&wt===1?"":"scale("+gt+","+wt+")";mt.each(function(){var Bt=(this.getAttribute("transform")||"").replace(Z,"");Bt+=Pt,Bt=Bt.trim(),this.setAttribute("transform",Bt)})}};var G=/translate\([^)]*\)\s*$/;s.setTextPointsScale=function(mt,gt,wt){mt&&mt.each(function(){var Pt,Bt=M.select(this),kt=Bt.select("text");if(kt.node()){var jt=parseFloat(kt.attr("x")||0),Ht=parseFloat(kt.attr("y")||0),Vt=(Bt.attr("transform")||"").match(G);gt===1&&wt===1?Pt=[]:Pt=[r(jt,Ht),"scale("+gt+","+wt+")",r(-jt,-Ht)],Vt&&Pt.push(Vt),Bt.attr("transform",Pt.join(""))}})};function et(mt,gt){var wt;return mt&&(wt=mt.mf),wt===void 0&&(wt=gt.marker&&gt.marker.standoff||0),!gt._geo&&!gt._xA?-wt:wt}s.getMarkerStandoff=et;var nt=Math.atan2,X=Math.cos,Y=Math.sin;function ot(mt,gt){var wt=gt[0],Pt=gt[1];return[wt*X(mt)-Pt*Y(mt),wt*Y(mt)+Pt*X(mt)]}var rt,ht,pt,yt,xt,Ft;function Et(mt,gt){var wt=mt.ma;wt===void 0&&(wt=gt.marker.angle||0);var Pt,Bt,kt=gt.marker.angleref;if(kt==="previous"||kt==="north"){if(gt._geo){var jt=gt._geo.project(mt.lonlat);Pt=jt[0],Bt=jt[1]}else{var Ht=gt._xA,Vt=gt._yA;if(Ht&&Vt)Pt=Ht.c2p(mt.x),Bt=Vt.c2p(mt.y);else return 90}if(gt._geo){var ee=mt.lonlat[0],te=mt.lonlat[1],ae=gt._geo.project([ee,te+1e-5]),le=gt._geo.project([ee+1e-5,te]),ce=nt(le[1]-Bt,le[0]-Pt),pe=nt(ae[1]-Bt,ae[0]-Pt),we;if(kt==="north")we=wt/180*Math.PI;else if(kt==="previous"){var ve=ee/180*Math.PI,Mt=te/180*Math.PI,It=rt/180*Math.PI,Rt=ht/180*Math.PI,zt=It-ve,Tt=X(Rt)*Y(zt),ft=Y(Rt)*X(Mt)-X(Rt)*Y(Mt)*X(zt);we=-nt(Tt,ft)-Math.PI,rt=ee,ht=te}var ut=ot(ce,[X(we),0]),vt=ot(pe,[Y(we),0]);wt=nt(ut[1]+vt[1],ut[0]+vt[0])/Math.PI*180,kt==="previous"&&!(Ft===gt.uid&&mt.i===xt+1)&&(wt=null)}if(kt==="previous"&&!gt._geo)if(Ft===gt.uid&&mt.i===xt+1&&S(Pt)&&S(Bt)){var St=Pt-pt,Ot=Bt-yt,Xt=gt.line&&gt.line.shape||"",$t=Xt.slice(Xt.length-1);$t==="h"&&(Ot=0),$t==="v"&&(St=0),wt+=nt(Ot,St)/Math.PI*180+90}else wt=null}return pt=Pt,yt=Bt,xt=mt.i,Ft=gt.uid,wt}s.getMarkerAngle=Et},90998:function($,U,t){var M=t(95616),E=t(39898).round,i="M0,0Z",S=Math.sqrt(2),A=Math.sqrt(3),g=Math.PI,v=Math.cos,e=Math.sin;$.exports={circle:{n:0,f:function(y,p,x){if(r(p))return i;var s=E(y,2),u="M"+s+",0A"+s+","+s+" 0 1,1 0,-"+s+"A"+s+","+s+" 0 0,1 "+s+",0Z";return x?h(p,x,u):u}},square:{n:1,f:function(y,p,x){if(r(p))return i;var s=E(y,2);return h(p,x,"M"+s+","+s+"H-"+s+"V-"+s+"H"+s+"Z")}},diamond:{n:2,f:function(y,p,x){if(r(p))return i;var s=E(y*1.3,2);return h(p,x,"M"+s+",0L0,"+s+"L-"+s+",0L0,-"+s+"Z")}},cross:{n:3,f:function(y,p,x){if(r(p))return i;var s=E(y*.4,2),u=E(y*1.2,2);return h(p,x,"M"+u+","+s+"H"+s+"V"+u+"H-"+s+"V"+s+"H-"+u+"V-"+s+"H-"+s+"V-"+u+"H"+s+"V-"+s+"H"+u+"Z")}},x:{n:4,f:function(y,p,x){if(r(p))return i;var s=E(y*.8/S,2),u="l"+s+","+s,c="l"+s+",-"+s,T="l-"+s+",-"+s,k="l-"+s+","+s;return h(p,x,"M0,"+s+u+c+T+c+T+k+T+k+u+k+u+"Z")}},"triangle-up":{n:5,f:function(y,p,x){if(r(p))return i;var s=E(y*2/A,2),u=E(y/2,2),c=E(y,2);return h(p,x,"M-"+s+","+u+"H"+s+"L0,-"+c+"Z")}},"triangle-down":{n:6,f:function(y,p,x){if(r(p))return i;var s=E(y*2/A,2),u=E(y/2,2),c=E(y,2);return h(p,x,"M-"+s+",-"+u+"H"+s+"L0,"+c+"Z")}},"triangle-left":{n:7,f:function(y,p,x){if(r(p))return i;var s=E(y*2/A,2),u=E(y/2,2),c=E(y,2);return h(p,x,"M"+u+",-"+s+"V"+s+"L-"+c+",0Z")}},"triangle-right":{n:8,f:function(y,p,x){if(r(p))return i;var s=E(y*2/A,2),u=E(y/2,2),c=E(y,2);return h(p,x,"M-"+u+",-"+s+"V"+s+"L"+c+",0Z")}},"triangle-ne":{n:9,f:function(y,p,x){if(r(p))return i;var s=E(y*.6,2),u=E(y*1.2,2);return h(p,x,"M-"+u+",-"+s+"H"+s+"V"+u+"Z")}},"triangle-se":{n:10,f:function(y,p,x){if(r(p))return i;var s=E(y*.6,2),u=E(y*1.2,2);return h(p,x,"M"+s+",-"+u+"V"+s+"H-"+u+"Z")}},"triangle-sw":{n:11,f:function(y,p,x){if(r(p))return i;var s=E(y*.6,2),u=E(y*1.2,2);return h(p,x,"M"+u+","+s+"H-"+s+"V-"+u+"Z")}},"triangle-nw":{n:12,f:function(y,p,x){if(r(p))return i;var s=E(y*.6,2),u=E(y*1.2,2);return h(p,x,"M-"+s+","+u+"V-"+s+"H"+u+"Z")}},pentagon:{n:13,f:function(y,p,x){if(r(p))return i;var s=E(y*.951,2),u=E(y*.588,2),c=E(-y,2),T=E(y*-.309,2),k=E(y*.809,2);return h(p,x,"M"+s+","+T+"L"+u+","+k+"H-"+u+"L-"+s+","+T+"L0,"+c+"Z")}},hexagon:{n:14,f:function(y,p,x){if(r(p))return i;var s=E(y,2),u=E(y/2,2),c=E(y*A/2,2);return h(p,x,"M"+c+",-"+u+"V"+u+"L0,"+s+"L-"+c+","+u+"V-"+u+"L0,-"+s+"Z")}},hexagon2:{n:15,f:function(y,p,x){if(r(p))return i;var s=E(y,2),u=E(y/2,2),c=E(y*A/2,2);return h(p,x,"M-"+u+","+c+"H"+u+"L"+s+",0L"+u+",-"+c+"H-"+u+"L-"+s+",0Z")}},octagon:{n:16,f:function(y,p,x){if(r(p))return i;var s=E(y*.924,2),u=E(y*.383,2);return h(p,x,"M-"+u+",-"+s+"H"+u+"L"+s+",-"+u+"V"+u+"L"+u+","+s+"H-"+u+"L-"+s+","+u+"V-"+u+"Z")}},star:{n:17,f:function(y,p,x){if(r(p))return i;var s=y*1.4,u=E(s*.225,2),c=E(s*.951,2),T=E(s*.363,2),k=E(s*.588,2),_=E(-s,2),b=E(s*-.309,2),P=E(s*.118,2),l=E(s*.809,2),d=E(s*.382,2);return h(p,x,"M"+u+","+b+"H"+c+"L"+T+","+P+"L"+k+","+l+"L0,"+d+"L-"+k+","+l+"L-"+T+","+P+"L-"+c+","+b+"H-"+u+"L0,"+_+"Z")}},hexagram:{n:18,f:function(y,p,x){if(r(p))return i;var s=E(y*.66,2),u=E(y*.38,2),c=E(y*.76,2);return h(p,x,"M-"+c+",0l-"+u+",-"+s+"h"+c+"l"+u+",-"+s+"l"+u+","+s+"h"+c+"l-"+u+","+s+"l"+u+","+s+"h-"+c+"l-"+u+","+s+"l-"+u+",-"+s+"h-"+c+"Z")}},"star-triangle-up":{n:19,f:function(y,p,x){if(r(p))return i;var s=E(y*A*.8,2),u=E(y*.8,2),c=E(y*1.6,2),T=E(y*4,2),k="A "+T+","+T+" 0 0 1 ";return h(p,x,"M-"+s+","+u+k+s+","+u+k+"0,-"+c+k+"-"+s+","+u+"Z")}},"star-triangle-down":{n:20,f:function(y,p,x){if(r(p))return i;var s=E(y*A*.8,2),u=E(y*.8,2),c=E(y*1.6,2),T=E(y*4,2),k="A "+T+","+T+" 0 0 1 ";return h(p,x,"M"+s+",-"+u+k+"-"+s+",-"+u+k+"0,"+c+k+s+",-"+u+"Z")}},"star-square":{n:21,f:function(y,p,x){if(r(p))return i;var s=E(y*1.1,2),u=E(y*2,2),c="A "+u+","+u+" 0 0 1 ";return h(p,x,"M-"+s+",-"+s+c+"-"+s+","+s+c+s+","+s+c+s+",-"+s+c+"-"+s+",-"+s+"Z")}},"star-diamond":{n:22,f:function(y,p,x){if(r(p))return i;var s=E(y*1.4,2),u=E(y*1.9,2),c="A "+u+","+u+" 0 0 1 ";return h(p,x,"M-"+s+",0"+c+"0,"+s+c+s+",0"+c+"0,-"+s+c+"-"+s+",0Z")}},"diamond-tall":{n:23,f:function(y,p,x){if(r(p))return i;var s=E(y*.7,2),u=E(y*1.4,2);return h(p,x,"M0,"+u+"L"+s+",0L0,-"+u+"L-"+s+",0Z")}},"diamond-wide":{n:24,f:function(y,p,x){if(r(p))return i;var s=E(y*1.4,2),u=E(y*.7,2);return h(p,x,"M0,"+u+"L"+s+",0L0,-"+u+"L-"+s+",0Z")}},hourglass:{n:25,f:function(y,p,x){if(r(p))return i;var s=E(y,2);return h(p,x,"M"+s+","+s+"H-"+s+"L"+s+",-"+s+"H-"+s+"Z")},noDot:!0},bowtie:{n:26,f:function(y,p,x){if(r(p))return i;var s=E(y,2);return h(p,x,"M"+s+","+s+"V-"+s+"L-"+s+","+s+"V-"+s+"Z")},noDot:!0},"circle-cross":{n:27,f:function(y,p,x){if(r(p))return i;var s=E(y,2);return h(p,x,"M0,"+s+"V-"+s+"M"+s+",0H-"+s+"M"+s+",0A"+s+","+s+" 0 1,1 0,-"+s+"A"+s+","+s+" 0 0,1 "+s+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(y,p,x){if(r(p))return i;var s=E(y,2),u=E(y/S,2);return h(p,x,"M"+u+","+u+"L-"+u+",-"+u+"M"+u+",-"+u+"L-"+u+","+u+"M"+s+",0A"+s+","+s+" 0 1,1 0,-"+s+"A"+s+","+s+" 0 0,1 "+s+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(y,p,x){if(r(p))return i;var s=E(y,2);return h(p,x,"M0,"+s+"V-"+s+"M"+s+",0H-"+s+"M"+s+","+s+"H-"+s+"V-"+s+"H"+s+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(y,p,x){if(r(p))return i;var s=E(y,2);return h(p,x,"M"+s+","+s+"L-"+s+",-"+s+"M"+s+",-"+s+"L-"+s+","+s+"M"+s+","+s+"H-"+s+"V-"+s+"H"+s+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(y,p,x){if(r(p))return i;var s=E(y*1.3,2);return h(p,x,"M"+s+",0L0,"+s+"L-"+s+",0L0,-"+s+"ZM0,-"+s+"V"+s+"M-"+s+",0H"+s)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(y,p,x){if(r(p))return i;var s=E(y*1.3,2),u=E(y*.65,2);return h(p,x,"M"+s+",0L0,"+s+"L-"+s+",0L0,-"+s+"ZM-"+u+",-"+u+"L"+u+","+u+"M-"+u+","+u+"L"+u+",-"+u)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(y,p,x){if(r(p))return i;var s=E(y*1.4,2);return h(p,x,"M0,"+s+"V-"+s+"M"+s+",0H-"+s)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(y,p,x){if(r(p))return i;var s=E(y,2);return h(p,x,"M"+s+","+s+"L-"+s+",-"+s+"M"+s+",-"+s+"L-"+s+","+s)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(y,p,x){if(r(p))return i;var s=E(y*1.2,2),u=E(y*.85,2);return h(p,x,"M0,"+s+"V-"+s+"M"+s+",0H-"+s+"M"+u+","+u+"L-"+u+",-"+u+"M"+u+",-"+u+"L-"+u+","+u)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(y,p,x){if(r(p))return i;var s=E(y/2,2),u=E(y,2);return h(p,x,"M"+s+","+u+"V-"+u+"M"+(s-u)+",-"+u+"V"+u+"M"+u+","+s+"H-"+u+"M-"+u+","+(s-u)+"H"+u)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(y,p,x){if(r(p))return i;var s=E(y*1.2,2),u=E(y*1.6,2),c=E(y*.8,2);return h(p,x,"M-"+s+","+c+"L0,0M"+s+","+c+"L0,0M0,-"+u+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(y,p,x){if(r(p))return i;var s=E(y*1.2,2),u=E(y*1.6,2),c=E(y*.8,2);return h(p,x,"M-"+s+",-"+c+"L0,0M"+s+",-"+c+"L0,0M0,"+u+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(y,p,x){if(r(p))return i;var s=E(y*1.2,2),u=E(y*1.6,2),c=E(y*.8,2);return h(p,x,"M"+c+","+s+"L0,0M"+c+",-"+s+"L0,0M-"+u+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(y,p,x){if(r(p))return i;var s=E(y*1.2,2),u=E(y*1.6,2),c=E(y*.8,2);return h(p,x,"M-"+c+","+s+"L0,0M-"+c+",-"+s+"L0,0M"+u+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(y,p,x){if(r(p))return i;var s=E(y*1.4,2);return h(p,x,"M"+s+",0H-"+s)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(y,p,x){if(r(p))return i;var s=E(y*1.4,2);return h(p,x,"M0,"+s+"V-"+s)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(y,p,x){if(r(p))return i;var s=E(y,2);return h(p,x,"M"+s+",-"+s+"L-"+s+","+s)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(y,p,x){if(r(p))return i;var s=E(y,2);return h(p,x,"M"+s+","+s+"L-"+s+",-"+s)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(y,p,x){if(r(p))return i;var s=E(y,2),u=E(y*2,2);return h(p,x,"M0,0L-"+s+","+u+"H"+s+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(y,p,x){if(r(p))return i;var s=E(y,2),u=E(y*2,2);return h(p,x,"M0,0L-"+s+",-"+u+"H"+s+"Z")},noDot:!0},"arrow-left":{n:47,f:function(y,p,x){if(r(p))return i;var s=E(y*2,2),u=E(y,2);return h(p,x,"M0,0L"+s+",-"+u+"V"+u+"Z")},noDot:!0},"arrow-right":{n:48,f:function(y,p,x){if(r(p))return i;var s=E(y*2,2),u=E(y,2);return h(p,x,"M0,0L-"+s+",-"+u+"V"+u+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(y,p,x){if(r(p))return i;var s=E(y,2),u=E(y*2,2);return h(p,x,"M-"+s+",0H"+s+"M0,0L-"+s+","+u+"H"+s+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(y,p,x){if(r(p))return i;var s=E(y,2),u=E(y*2,2);return h(p,x,"M-"+s+",0H"+s+"M0,0L-"+s+",-"+u+"H"+s+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(y,p,x){if(r(p))return i;var s=E(y*2,2),u=E(y,2);return h(p,x,"M0,-"+u+"V"+u+"M0,0L"+s+",-"+u+"V"+u+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(y,p,x){if(r(p))return i;var s=E(y*2,2),u=E(y,2);return h(p,x,"M0,-"+u+"V"+u+"M0,0L-"+s+",-"+u+"V"+u+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(y,p,x){if(r(p))return i;var s=g/2.5,u=2*y*v(s),c=2*y*e(s);return h(p,x,"M0,0L"+-u+","+c+"L"+u+","+c+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(y,p,x){if(r(p))return i;var s=g/4,u=2*y*v(s),c=2*y*e(s);return h(p,x,"M0,0L"+-u+","+c+"A "+2*y+","+2*y+" 0 0 1 "+u+","+c+"Z")},backoff:.4,noDot:!0}};function r(y){return y===null}var f,n,a,o;function h(y,p,x){if((!y||y%360===0)&&!p)return x;if(a===y&&o===p&&f===x)return n;a=y,o=p,f=x;function s(z,B){var O=v(z),R=e(z),C=B[0],F=B[1]+(p||0);return[C*O-F*R,C*R+F*O]}for(var u=y/180*g,c=0,T=0,k=M(x),_="",b=0;b<k.length;b++){var P=k[b],l=P[0],d=c,L=T;if(l==="M"||l==="L")c=+P[1],T=+P[2];else if(l==="m"||l==="l")c+=+P[1],T+=+P[2];else if(l==="H")c=+P[1];else if(l==="h")c+=+P[1];else if(l==="V")T=+P[1];else if(l==="v")T+=+P[1];else if(l==="A"){c=+P[1],T=+P[2];var w=s(u,[+P[6],+P[7]]);P[6]=w[0],P[7]=w[1],P[3]=+P[3]+y}(l==="H"||l==="V")&&(l="L"),(l==="h"||l==="v")&&(l="l"),(l==="m"||l==="l")&&(c-=d,T-=L);var I=s(u,[c,T]);(l==="H"||l==="V")&&(l="L"),(l==="M"||l==="L"||l==="m"||l==="l")&&(P[1]=I[0],P[2]=I[1]),P[0]=l,_+=P[0]+P.slice(1).join(",")}return n=_,_}},25673:function($){$.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},84532:function($,U,t){var M=t(92770),E=t(73972),i=t(89298),S=t(71828),A=t(45827);$.exports=function(v){for(var e=v.calcdata,r=0;r<e.length;r++){var f=e[r],n=f[0].trace;if(n.visible===!0&&E.traceIs(n,"errorBarsOK")){var a=i.getFromId(v,n.xaxis),o=i.getFromId(v,n.yaxis);g(f,n,a,"x"),g(f,n,o,"y")}}};function g(v,e,r,f){var n=e["error_"+f]||{},a=n.visible&&["linear","log"].indexOf(r.type)!==-1,o=[];if(a){for(var h=A(n),y=0;y<v.length;y++){var p=v[y],x=p.i;if(x===void 0)x=y;else if(x===null)continue;var s=p[f];if(M(r.c2l(s))){var u=h(s,x);if(M(u[0])&&M(u[1])){var c=p[f+"s"]=s-u[0],T=p[f+"h"]=s+u[1];o.push(c,T)}}}var k=r._id,_=e._extremes[k],b=i.findExtremes(r,o,S.extendFlat({tozero:_.opts.tozero},{padded:!0}));_.min=_.min.concat(b.min),_.max=_.max.concat(b.max)}}},45827:function($){$.exports=function(t){var M=t.type,E=t.symmetric;if(M==="data"){var i=t.array||[];if(E)return function(v,e){var r=+i[e];return[r,r]};var S=t.arrayminus||[];return function(v,e){var r=+i[e],f=+S[e];return!isNaN(r)||!isNaN(f)?[f||0,r||0]:[NaN,NaN]}}else{var A=U(M,t.value),g=U(M,t.valueminus);return E||t.valueminus===void 0?function(v){var e=A(v);return[e,e]}:function(v){return[g(v),A(v)]}}};function U(t,M){if(t==="percent")return function(E){return Math.abs(E*M/100)};if(t==="constant")return function(){return Math.abs(M)};if(t==="sqrt")return function(E){return Math.sqrt(Math.abs(E))}}},97587:function($,U,t){var M=t(92770),E=t(73972),i=t(71828),S=t(44467),A=t(25673);$.exports=function(g,v,e,r){var f="error_"+r.axis,n=S.newContainer(v,f),a=g[f]||{};function o(c,T){return i.coerce(a,n,A,c,T)}var h=a.array!==void 0||a.value!==void 0||a.type==="sqrt",y=o("visible",h);if(y!==!1){var p=o("type","array"in a?"data":"percent"),x=!0;p!=="sqrt"&&(x=o("symmetric",!((p==="data"?"arrayminus":"valueminus")in a))),p==="data"?(o("array"),o("traceref"),x||(o("arrayminus"),o("tracerefminus"))):(p==="percent"||p==="constant")&&(o("value"),x||o("valueminus"));var s="copy_"+r.inherit+"style";if(r.inherit){var u=v["error_"+r.inherit];(u||{}).visible&&o(s,!(a.color||M(a.thickness)||M(a.width)))}(!r.inherit||!n[s])&&(o("color",e),o("thickness"),o("width",E.traceIs(v,"gl3d")?0:4))}}},37369:function($,U,t){var M=t(71828),E=t(30962).overrideAll,i=t(25673),S={error_x:M.extendFlat({},i),error_y:M.extendFlat({},i)};delete S.error_x.copy_zstyle,delete S.error_y.copy_zstyle,delete S.error_y.copy_ystyle;var A={error_x:M.extendFlat({},i),error_y:M.extendFlat({},i),error_z:M.extendFlat({},i)};delete A.error_x.copy_ystyle,delete A.error_y.copy_ystyle,delete A.error_z.copy_ystyle,delete A.error_z.copy_zstyle,$.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:S,bar:S,histogram:S,scatter3d:E(A,"calc","nested"),scattergl:E(S,"calc","nested")}},supplyDefaults:t(97587),calc:t(84532),makeComputeError:t(45827),plot:t(19398),style:t(62662),hoverInfo:g};function g(v,e,r){(e.error_y||{}).visible&&(r.yerr=v.yh-v.y,e.error_y.symmetric||(r.yerrneg=v.y-v.ys)),(e.error_x||{}).visible&&(r.xerr=v.xh-v.x,e.error_x.symmetric||(r.xerrneg=v.x-v.xs))}},19398:function($,U,t){var M=t(39898),E=t(92770),i=t(91424),S=t(34098);$.exports=function(g,v,e,r){var f,n=e.xaxis,a=e.yaxis,o=r&&r.duration>0,h=g._context.staticPlot;v.each(function(y){var p=y[0].trace,x=p.error_x||{},s=p.error_y||{},u;p.ids&&(u=function(_){return _.id});var c=S.hasMarkers(p)&&p.marker.maxdisplayed>0;!s.visible&&!x.visible&&(y=[]);var T=M.select(this).selectAll("g.errorbar").data(y,u);if(T.exit().remove(),!!y.length){x.visible||T.selectAll("path.xerror").remove(),s.visible||T.selectAll("path.yerror").remove(),T.style("opacity",1);var k=T.enter().append("g").classed("errorbar",!0);o&&k.style("opacity",0).transition().duration(r.duration).style("opacity",1),i.setClipUrl(T,e.layerClipId,g),T.each(function(_){var b=M.select(this),P=A(_,n,a);if(!(c&&!_.vis)){var l,d=b.select("path.yerror");if(s.visible&&E(P.x)&&E(P.yh)&&E(P.ys)){var L=s.width;l="M"+(P.x-L)+","+P.yh+"h"+2*L+"m-"+L+",0V"+P.ys,P.noYS||(l+="m-"+L+",0h"+2*L),f=!d.size(),f?d=b.append("path").style("vector-effect",h?"none":"non-scaling-stroke").classed("yerror",!0):o&&(d=d.transition().duration(r.duration).ease(r.easing)),d.attr("d",l)}else d.remove();var w=b.select("path.xerror");if(x.visible&&E(P.y)&&E(P.xh)&&E(P.xs)){var I=(x.copy_ystyle?s:x).width;l="M"+P.xh+","+(P.y-I)+"v"+2*I+"m0,-"+I+"H"+P.xs,P.noXS||(l+="m0,-"+I+"v"+2*I),f=!w.size(),f?w=b.append("path").style("vector-effect",h?"none":"non-scaling-stroke").classed("xerror",!0):o&&(w=w.transition().duration(r.duration).ease(r.easing)),w.attr("d",l)}else w.remove()}})}})};function A(g,v,e){var r={x:v.c2p(g.x),y:e.c2p(g.y)};return g.yh!==void 0&&(r.yh=e.c2p(g.yh),r.ys=e.c2p(g.ys),E(r.ys)||(r.noYS=!0,r.ys=e.c2p(g.ys,!0))),g.xh!==void 0&&(r.xh=v.c2p(g.xh),r.xs=v.c2p(g.xs),E(r.xs)||(r.noXS=!0,r.xs=v.c2p(g.xs,!0))),r}},62662:function($,U,t){var M=t(39898),E=t(7901);$.exports=function(i){i.each(function(S){var A=S[0].trace,g=A.error_y||{},v=A.error_x||{},e=M.select(this);e.selectAll("path.yerror").style("stroke-width",g.thickness+"px").call(E.stroke,g.color),v.copy_ystyle&&(v=g),e.selectAll("path.xerror").style("stroke-width",v.thickness+"px").call(E.stroke,v.color)})}},77914:function($,U,t){var M=t(41940),E=t(528).hoverlabel,i=t(1426).extendFlat;$.exports={hoverlabel:{bgcolor:i({},E.bgcolor,{arrayOk:!0}),bordercolor:i({},E.bordercolor,{arrayOk:!0}),font:M({arrayOk:!0,editType:"none"}),align:i({},E.align,{arrayOk:!0}),namelength:i({},E.namelength,{arrayOk:!0}),editType:"none"}}},30732:function($,U,t){var M=t(71828),E=t(73972);$.exports=function(S){var A=S.calcdata,g=S._fullLayout;function v(a){return function(o){return M.coerceHoverinfo({hoverinfo:o},{_module:a._module},g)}}for(var e=0;e<A.length;e++){var r=A[e],f=r[0].trace;if(!E.traceIs(f,"pie-like")){var n=E.traceIs(f,"2dMap")?i:M.fillArray;n(f.hoverinfo,r,"hi",v(f)),f.hovertemplate&&n(f.hovertemplate,r,"ht"),f.hoverlabel&&(n(f.hoverlabel.bgcolor,r,"hbg"),n(f.hoverlabel.bordercolor,r,"hbc"),n(f.hoverlabel.font.size,r,"hts"),n(f.hoverlabel.font.color,r,"htc"),n(f.hoverlabel.font.family,r,"htf"),n(f.hoverlabel.namelength,r,"hnl"),n(f.hoverlabel.align,r,"hta"))}}};function i(S,A,g,v){v=v||M.identity,Array.isArray(S)&&(A[0][g]=v(S))}},75914:function($,U,t){var M=t(73972),E=t(88335).hover;$.exports=function(i,S,A){var g=M.getComponentMethod("annotations","onClick")(i,i._hoverdata);A!==void 0&&E(i,S,A,!0);function v(){i.emit("plotly_click",{points:i._hoverdata,event:S})}i._hoverdata&&S&&S.target&&(g&&g.then?g.then(v):v(),S.stopImmediatePropagation&&S.stopImmediatePropagation())}},26675:function($){$.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},54268:function($,U,t){var M=t(71828),E=t(77914),i=t(38048);$.exports=function(S,A,g,v){function e(f,n){return M.coerce(S,A,E,f,n)}var r=M.extendFlat({},v.hoverlabel);A.hovertemplate&&(r.namelength=-1),i(S,A,e,r)}},23469:function($,U,t){var M=t(71828);U.getSubplot=function(v){return v.subplot||v.xaxis+v.yaxis||v.geo},U.isTraceInSubplots=function(v,e){if(v.type==="splom"){for(var r=v.xaxes||[],f=v.yaxes||[],n=0;n<r.length;n++)for(var a=0;a<f.length;a++)if(e.indexOf(r[n]+f[a])!==-1)return!0;return!1}return e.indexOf(U.getSubplot(v))!==-1},U.flat=function(v,e){for(var r=new Array(v.length),f=0;f<v.length;f++)r[f]=e;return r},U.p2c=function(v,e){for(var r=new Array(v.length),f=0;f<v.length;f++)r[f]=v[f].p2c(e);return r},U.getDistanceFunction=function(v,e,r,f){return v==="closest"?f||U.quadrature(e,r):v.charAt(0)==="x"?e:r},U.getClosest=function(v,e,r){if(r.index!==!1)r.index>=0&&r.index<v.length?r.distance=0:r.index=!1;else for(var f=0;f<v.length;f++){var n=e(v[f]);n<=r.distance&&(r.index=f,r.distance=n)}return r},U.inbox=function(v,e,r){return v*e<0||v===0?r:1/0},U.quadrature=function(v,e){return function(r){var f=v(r),n=e(r);return Math.sqrt(f*f+n*n)}},U.makeEventData=function(v,e,r){var f="index"in v?v.index:v.pointNumber,n={data:e._input,fullData:e,curveNumber:e.index,pointNumber:f};if(e._indexToPoints){var a=e._indexToPoints[f];a.length===1?n.pointIndex=a[0]:n.pointIndices=a}else n.pointIndex=f;return e._module.eventData?n=e._module.eventData(n,v,e,r,f):("xVal"in v?n.x=v.xVal:"x"in v&&(n.x=v.x),"yVal"in v?n.y=v.yVal:"y"in v&&(n.y=v.y),v.xa&&(n.xaxis=v.xa),v.ya&&(n.yaxis=v.ya),v.zLabelVal!==void 0&&(n.z=v.zLabelVal)),U.appendArrayPointValue(n,e,f),n},U.appendArrayPointValue=function(v,e,r){var f=e._arrayAttrs;if(f)for(var n=0;n<f.length;n++){var a=f[n],o=i(a);if(v[o]===void 0){var h=M.nestedProperty(e,a).get(),y=S(h,r);y!==void 0&&(v[o]=y)}}},U.appendArrayMultiPointValues=function(v,e,r){var f=e._arrayAttrs;if(f)for(var n=0;n<f.length;n++){var a=f[n],o=i(a);if(v[o]===void 0){for(var h=M.nestedProperty(e,a).get(),y=new Array(r.length),p=0;p<r.length;p++)y[p]=S(h,r[p]);v[o]=y}}};var E={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function i(v){return E[v]||v}function S(v,e){if(Array.isArray(e)){if(Array.isArray(v)&&Array.isArray(v[e[0]]))return v[e[0]][e[1]]}else return v[e]}var A={x:!0,y:!0},g={"x unified":!0,"y unified":!0};U.isUnifiedHover=function(v){return typeof v!="string"?!1:!!g[v]},U.isXYhover=function(v){return typeof v!="string"?!1:!!A[v]}},88335:function($,U,t){var M=t(39898),E=t(92770),i=t(84267),S=t(71828),A=S.strTranslate,g=S.strRotate,v=t(11086),e=t(63893),r=t(39918),f=t(91424),n=t(7901),a=t(28569),o=t(89298),h=t(73972),y=t(23469),p=t(26675),x=t(99017),s=t(43969),u=p.YANGLE,c=Math.PI*u/180,T=1/Math.sin(c),k=Math.cos(c),_=Math.sin(c),b=p.HOVERARROWSIZE,P=p.HOVERTEXTPAD,l={box:!0,ohlc:!0,violin:!0,candlestick:!0},d={scatter:!0,scattergl:!0,splom:!0};U.hover=function(et,nt,X,Y){et=S.getGraphDiv(et);var ot=nt.target;S.throttle(et._fullLayout._uid+p.HOVERID,p.HOVERMINTIME,function(){L(et,nt,X,Y,ot)})},U.loneHover=function(et,nt){var X=!0;Array.isArray(et)||(X=!1,et=[et]);var Y=nt.gd,ot=W(Y),rt=Z(Y),ht=et.map(function(Pt){var Bt=Pt._x0||Pt.x0||Pt.x||0,kt=Pt._x1||Pt.x1||Pt.x||0,jt=Pt._y0||Pt.y0||Pt.y||0,Ht=Pt._y1||Pt.y1||Pt.y||0,Vt=Pt.eventData;if(Vt){var ee=Math.min(Bt,kt),te=Math.max(Bt,kt),ae=Math.min(jt,Ht),le=Math.max(jt,Ht),ce=Pt.trace;if(h.traceIs(ce,"gl3d")){var pe=Y._fullLayout[ce.scene]._scene.container,we=pe.offsetLeft,ve=pe.offsetTop;ee+=we,te+=we,ae+=ve,le+=ve}Vt.bbox={x0:ee+rt,x1:te+rt,y0:ae+ot,y1:le+ot},nt.inOut_bbox&&nt.inOut_bbox.push(Vt.bbox)}else Vt=!1;return{color:Pt.color||n.defaultLine,x0:Pt.x0||Pt.x||0,x1:Pt.x1||Pt.x||0,y0:Pt.y0||Pt.y||0,y1:Pt.y1||Pt.y||0,xLabel:Pt.xLabel,yLabel:Pt.yLabel,zLabel:Pt.zLabel,text:Pt.text,name:Pt.name,idealAlign:Pt.idealAlign,borderColor:Pt.borderColor,fontFamily:Pt.fontFamily,fontSize:Pt.fontSize,fontColor:Pt.fontColor,nameLength:Pt.nameLength,textAlign:Pt.textAlign,trace:Pt.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:Pt.hovertemplate||!1,hovertemplateLabels:Pt.hovertemplateLabels||!1,eventData:Vt}}),pt=!1,yt=z(ht,{gd:Y,hovermode:"closest",rotateLabels:pt,bgColor:nt.bgColor||n.background,container:M.select(nt.container),outerContainer:nt.outerContainer||nt.container}),xt=yt.hoverLabels,Ft=5,Et=0,mt=0;xt.sort(function(Pt,Bt){return Pt.y0-Bt.y0}).each(function(Pt,Bt){var kt=Pt.y0-Pt.by/2;kt-Ft<Et?Pt.offset=Et-kt+Ft:Pt.offset=0,Et=kt+Pt.by+Pt.offset,Bt===nt.anchorIndex&&(mt=Pt.offset)}).each(function(Pt){Pt.offset-=mt});var gt=Y._fullLayout._invScaleX,wt=Y._fullLayout._invScaleY;return F(xt,pt,gt,wt),X?xt:xt.node()};function L(et,nt,X,Y,ot){X||(X="xy");var rt=Array.isArray(X)?X:[X],ht=et._fullLayout,pt=ht._plots||[],yt=pt[X],xt=ht._has("cartesian");if(yt){var Ft=yt.overlays.map(function(dr){return dr.id});rt=rt.concat(Ft)}for(var Et=rt.length,mt=new Array(Et),gt=new Array(Et),wt=!1,Pt=0;Pt<Et;Pt++){var Bt=rt[Pt];if(pt[Bt])wt=!0,mt[Pt]=pt[Bt].xaxis,gt[Pt]=pt[Bt].yaxis;else if(ht[Bt]&&ht[Bt]._subplot){var kt=ht[Bt]._subplot;mt[Pt]=kt.xaxis,gt[Pt]=kt.yaxis}else{S.warn("Unrecognized subplot: "+Bt);return}}var jt=nt.hovermode||ht.hovermode;if(jt&&!wt&&(jt="closest"),["x","y","closest","x unified","y unified"].indexOf(jt)===-1||!et.calcdata||et.querySelector(".zoombox")||et._dragging)return a.unhoverRaw(et,nt);var Ht=ht.hoverdistance;Ht===-1&&(Ht=1/0);var Vt=ht.spikedistance;Vt===-1&&(Vt=1/0);var ee=[],te=[],ae,le,ce,pe,we,ve,Mt,It,Rt,zt,Tt,ft,ut,vt={hLinePoint:null,vLinePoint:null},St=!1;if(Array.isArray(nt))for(jt="array",ce=0;ce<nt.length;ce++)we=et.calcdata[nt[ce].curveNumber||0],we&&(ve=we[0].trace,we[0].trace.hoverinfo!=="skip"&&(te.push(we),ve.orientation==="h"&&(St=!0)));else{for(pe=0;pe<et.calcdata.length;pe++)we=et.calcdata[pe],ve=we[0].trace,ve.hoverinfo!=="skip"&&y.isTraceInSubplots(ve,rt)&&(te.push(we),ve.orientation==="h"&&(St=!0));var Ot=!ot,Xt,$t;if(Ot)"xpx"in nt?Xt=nt.xpx:Xt=mt[0]._length/2,"ypx"in nt?$t=nt.ypx:$t=gt[0]._length/2;else{if(v.triggerHandler(et,"plotly_beforehover",nt)===!1)return;var de=ot.getBoundingClientRect();Xt=nt.clientX-de.left,$t=nt.clientY-de.top,ht._calcInverseTransform(et);var Me=S.apply3DTransform(ht._invTransform)(Xt,$t);if(Xt=Me[0],$t=Me[1],Xt<0||Xt>mt[0]._length||$t<0||$t>gt[0]._length)return a.unhoverRaw(et,nt)}if(nt.pointerX=Xt+mt[0]._offset,nt.pointerY=$t+gt[0]._offset,"xval"in nt?ae=y.flat(rt,nt.xval):ae=y.p2c(mt,Xt),"yval"in nt?le=y.flat(rt,nt.yval):le=y.p2c(gt,$t),!E(ae[0])||!E(le[0]))return S.warn("Fx.hover failed",nt,et),a.unhoverRaw(et,nt)}var Fe=1/0;function De(dr,Lr){for(pe=0;pe<te.length;pe++)if(we=te[pe],!(!we||!we[0]||!we[0].trace)&&(ve=we[0].trace,!(ve.visible!==!0||ve._length===0)&&["carpet","contourcarpet"].indexOf(ve._module.name)===-1)){if(ve.type==="splom"?(It=0,Mt=rt[It]):(Mt=y.getSubplot(ve),It=rt.indexOf(Mt)),Rt=jt,y.isUnifiedHover(Rt)&&(Rt=Rt.charAt(0)),ft={cd:we,trace:ve,xa:mt[It],ya:gt[It],maxHoverDistance:Ht,maxSpikeDistance:Vt,index:!1,distance:Math.min(Fe,Ht),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:n.defaultLine,name:ve.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ht[Mt]&&(ft.subplot=ht[Mt]._subplot),ht._splomScenes&&ht._splomScenes[ve.uid]&&(ft.scene=ht._splomScenes[ve.uid]),ut=ee.length,Rt==="array"){var Cr=nt[pe];"pointNumber"in Cr?(ft.index=Cr.pointNumber,Rt="closest"):(Rt="","xval"in Cr&&(zt=Cr.xval,Rt="x"),"yval"in Cr&&(Tt=Cr.yval,Rt=Rt?"closest":"y"))}else dr!==void 0&&Lr!==void 0?(zt=dr,Tt=Lr):(zt=ae[It],Tt=le[It]);if(Ht!==0)if(ve._module&&ve._module.hoverPoints){var Hr=ve._module.hoverPoints(ft,zt,Tt,Rt,{finiteRange:!0,hoverLayer:ht._hoverlayer});if(Hr)for(var sn,Yr=0;Yr<Hr.length;Yr++)sn=Hr[Yr],E(sn.x0)&&E(sn.y0)&&ee.push(N(sn,jt))}else S.log("Unrecognized trace type in hover:",ve);if(jt==="closest"&&ee.length>ut&&(ee.splice(0,ut),Fe=ee[0].distance),xt&&Vt!==0&&ee.length===0){ft.distance=Vt,ft.index=!1;var xn=ve._module.hoverPoints(ft,zt,Tt,"closest",{hoverLayer:ht._hoverlayer});if(xn&&(xn=xn.filter(function(Hn){return Hn.spikeDistance<=Vt})),xn&&xn.length){var wn,Un=xn.filter(function(Hn){return Hn.xa.showspikes&&Hn.xa.spikesnap!=="hovered data"});if(Un.length){var qn=Un[0];E(qn.x0)&&E(qn.y0)&&(wn=Ve(qn),(!vt.vLinePoint||vt.vLinePoint.spikeDistance>wn.spikeDistance)&&(vt.vLinePoint=wn))}var ei=xn.filter(function(Hn){return Hn.ya.showspikes&&Hn.ya.spikesnap!=="hovered data"});if(ei.length){var Gn=ei[0];E(Gn.x0)&&E(Gn.y0)&&(wn=Ve(Gn),(!vt.hLinePoint||vt.hLinePoint.spikeDistance>wn.spikeDistance)&&(vt.hLinePoint=wn))}}}}}De();function Ae(dr,Lr,Cr){for(var Hr=null,sn=1/0,Yr,xn=0;xn<dr.length;xn++)Yr=dr[xn].spikeDistance,Cr&&xn===0&&(Yr=-1/0),Yr<=sn&&Yr<=Lr&&(Hr=dr[xn],sn=Yr);return Hr}function Ve(dr){return dr?{xa:dr.xa,ya:dr.ya,x:dr.xSpike!==void 0?dr.xSpike:(dr.x0+dr.x1)/2,y:dr.ySpike!==void 0?dr.ySpike:(dr.y0+dr.y1)/2,distance:dr.distance,spikeDistance:dr.spikeDistance,curveNumber:dr.trace.index,color:dr.color,pointNumber:dr.index}:null}var Qe={fullLayout:ht,container:ht._hoverlayer,event:nt},Sr=et._spikepoints,he={vLinePoint:vt.vLinePoint,hLinePoint:vt.hLinePoint};et._spikepoints=he;var je=function(){ee.sort(function(dr,Lr){return dr.distance-Lr.distance}),ee=it(ee,jt)};je();var Re=jt.charAt(0),_r=(Re==="x"||Re==="y")&&ee[0]&&d[ee[0].trace.type];if(xt&&Vt!==0&&ee.length!==0){var tr=ee.filter(function(dr){return dr.ya.showspikes}),Gt=Ae(tr,Vt,_r);vt.hLinePoint=Ve(Gt);var re=ee.filter(function(dr){return dr.xa.showspikes}),fe=Ae(re,Vt,_r);vt.vLinePoint=Ve(fe)}if(ee.length===0){var ye=a.unhoverRaw(et,nt);return xt&&(vt.hLinePoint!==null||vt.vLinePoint!==null)&&Q(Sr)&&V(et,vt,Qe),ye}if(xt&&Q(Sr)&&V(et,vt,Qe),y.isXYhover(Rt)&&ee[0].length!==0&&ee[0].trace.type!=="splom"){var Le=ee[0];l[Le.trace.type]?ee=ee.filter(function(dr){return dr.trace.index===Le.trace.index}):ee=[Le];var _e=ee.length,Ce=q("x",Le,ht),ze=q("y",Le,ht);De(Ce,ze);var We=[],qe={},ir=0,xr=function(dr){var Lr=l[dr.trace.type]?w(dr):dr.trace.index;if(!qe[Lr])ir++,qe[Lr]=ir,We.push(dr);else{var Cr=qe[Lr]-1,Hr=We[Cr];Cr>0&&Math.abs(dr.distance)<Math.abs(Hr.distance)&&(We[Cr]=dr)}},Dt;for(Dt=0;Dt<_e;Dt++)xr(ee[Dt]);for(Dt=ee.length-1;Dt>_e-1;Dt--)xr(ee[Dt]);ee=We,je()}var Ut=et._hoverdata,Te=[],Se=W(et),Be=Z(et);for(ce=0;ce<ee.length;ce++){var Je=ee[ce],$e=y.makeEventData(Je,Je.trace,Je.cd);if(Je.hovertemplate!==!1){var Xe=!1;Je.cd[Je.index]&&Je.cd[Je.index].ht&&(Xe=Je.cd[Je.index].ht),Je.hovertemplate=Xe||Je.trace.hovertemplate||!1}if(Je.xa&&Je.ya){var Oe=Je.x0+Je.xa._offset,ar=Je.x1+Je.xa._offset,cr=Je.y0+Je.ya._offset,sr=Je.y1+Je.ya._offset,lr=Math.min(Oe,ar),Or=Math.max(Oe,ar),Ir=Math.min(cr,sr),Pr=Math.max(cr,sr);$e.bbox={x0:lr+Be,x1:Or+Be,y0:Ir+Se,y1:Pr+Se}}Je.eventData=[$e],Te.push($e)}et._hoverdata=Te;var rn=jt==="y"&&(te.length>1||ee.length>1)||jt==="closest"&&St&&ee.length>1,Zr=n.combine(ht.plot_bgcolor||n.background,ht.paper_bgcolor),yn=z(ee,{gd:et,hovermode:jt,rotateLabels:rn,bgColor:Zr,container:ht._hoverlayer,outerContainer:ht._paper.node(),commonLabelOpts:ht.hoverlabel,hoverdistance:ht.hoverdistance}),Tn=yn.hoverLabels;if(y.isUnifiedHover(jt)||(O(Tn,rn,ht,yn.commonLabelBoundingBox),F(Tn,rn,ht._invScaleX,ht._invScaleY)),ot&&ot.tagName){var hr=h.getComponentMethod("annotations","hasClickToShow")(et,Te);r(M.select(ot),hr?"pointer":"")}!ot||Y||!K(et,nt,Ut)||(Ut&&et.emit("plotly_unhover",{event:nt,points:Ut}),et.emit("plotly_hover",{event:nt,points:et._hoverdata,xaxes:mt,yaxes:gt,xvals:ae,yvals:le}))}function w(et){return[et.trace.index,et.index,et.x0,et.y0,et.name,et.attr,et.xa?et.xa._id:"",et.ya?et.ya._id:""].join(",")}var I=/<extra>([\s\S]*)<\/extra>/;function z(et,nt){var X=nt.gd,Y=X._fullLayout,ot=nt.hovermode,rt=nt.rotateLabels,ht=nt.bgColor,pt=nt.container,yt=nt.outerContainer,xt=nt.commonLabelOpts||{};if(et.length===0)return[[]];var Ft=nt.fontFamily||p.HOVERFONT,Et=nt.fontSize||p.HOVERFONTSIZE,mt=et[0],gt=mt.xa,wt=mt.ya,Pt=ot.charAt(0),Bt=Pt+"Label",kt=mt[Bt];if(kt===void 0&&gt.type==="multicategory")for(var jt=0;jt<et.length&&(kt=et[jt][Bt],kt===void 0);jt++);var Ht=G(X,yt),Vt=Ht.top,ee=Ht.width,te=Ht.height,ae=kt!==void 0&&mt.distance<=nt.hoverdistance&&(ot==="x"||ot==="y");if(ae){var le=!0,ce,pe;for(ce=0;ce<et.length;ce++)if(le&&et[ce].zLabel===void 0&&(le=!1),pe=et[ce].hoverinfo||et[ce].trace.hoverinfo,pe){var we=Array.isArray(pe)?pe:pe.split("+");if(we.indexOf("all")===-1&&we.indexOf(ot)===-1){ae=!1;break}}le&&(ae=!1)}var ve=pt.selectAll("g.axistext").data(ae?[0]:[]);ve.enter().append("g").classed("axistext",!0),ve.exit().remove();var Mt={minX:0,maxX:0,minY:0,maxY:0};if(ve.each(function(){var _e=M.select(this),Ce=S.ensureSingle(_e,"path","",function(Ir){Ir.style({"stroke-width":"1px"})}),ze=S.ensureSingle(_e,"text","",function(Ir){Ir.attr("data-notex",1)}),We=xt.bgcolor||n.defaultLine,qe=xt.bordercolor||n.contrast(We),ir=n.contrast(We),xr={family:xt.font.family||Ft,size:xt.font.size||Et,color:xt.font.color||ir};Ce.style({fill:We,stroke:qe}),ze.text(kt).call(f.font,xr).call(e.positionText,0,0).call(e.convertToTspans,X),_e.attr("transform","");var Dt=G(X,ze.node()),Ut,Te;if(ot==="x"){var Se=gt.side==="top"?"-":"";ze.attr("text-anchor","middle").call(e.positionText,0,gt.side==="top"?Vt-Dt.bottom-b-P:Vt-Dt.top+b+P),Ut=gt._offset+(mt.x0+mt.x1)/2,Te=wt._offset+(gt.side==="top"?0:wt._length);var Be=Dt.width/2+P;Ut<Be?(Ut=Be,Ce.attr("d","M-"+(Be-b)+",0L-"+(Be-b*2)+","+Se+b+"H"+Be+"v"+Se+(P*2+Dt.height)+"H-"+Be+"V"+Se+b+"Z")):Ut>Y.width-Be?(Ut=Y.width-Be,Ce.attr("d","M"+(Be-b)+",0L"+Be+","+Se+b+"v"+Se+(P*2+Dt.height)+"H-"+Be+"V"+Se+b+"H"+(Be-b*2)+"Z")):Ce.attr("d","M0,0L"+b+","+Se+b+"H"+Be+"v"+Se+(P*2+Dt.height)+"H-"+Be+"V"+Se+b+"H-"+b+"Z"),Mt.minX=Ut-Be,Mt.maxX=Ut+Be,gt.side==="top"?(Mt.minY=Te-(P*2+Dt.height),Mt.maxY=Te-P):(Mt.minY=Te+P,Mt.maxY=Te+(P*2+Dt.height))}else{var Je,$e,Xe;wt.side==="right"?(Je="start",$e=1,Xe="",Ut=gt._offset+gt._length):(Je="end",$e=-1,Xe="-",Ut=gt._offset),Te=wt._offset+(mt.y0+mt.y1)/2,ze.attr("text-anchor",Je),Ce.attr("d","M0,0L"+Xe+b+","+b+"V"+(P+Dt.height/2)+"h"+Xe+(P*2+Dt.width)+"V-"+(P+Dt.height/2)+"H"+Xe+b+"V-"+b+"Z"),Mt.minY=Te-(P+Dt.height/2),Mt.maxY=Te+(P+Dt.height/2),wt.side==="right"?(Mt.minX=Ut+b,Mt.maxX=Ut+b+(P*2+Dt.width)):(Mt.minX=Ut-b-(P*2+Dt.width),Mt.maxX=Ut-b);var Oe=Dt.height/2,ar=Vt-Dt.top-Oe,cr="clip"+Y._uid+"commonlabel"+wt._id,sr;if(Ut<Dt.width+2*P+b){sr="M-"+(b+P)+"-"+Oe+"h-"+(Dt.width-P)+"V"+Oe+"h"+(Dt.width-P)+"Z";var lr=Dt.width-Ut+P;e.positionText(ze,lr,ar),Je==="end"&&ze.selectAll("tspan").each(function(){var Ir=M.select(this),Pr=f.tester.append("text").text(Ir.text()).call(f.font,xr),rn=G(X,Pr.node());Math.round(rn.width)<Math.round(Dt.width)&&Ir.attr("x",lr-rn.width),Pr.remove()})}else e.positionText(ze,$e*(P+b),ar),sr=null;var Or=Y._topclips.selectAll("#"+cr).data(sr?[0]:[]);Or.enter().append("clipPath").attr("id",cr).append("path"),Or.exit().remove(),Or.select("path").attr("d",sr),f.setClipUrl(ze,sr?cr:null,X)}_e.attr("transform",A(Ut,Te))}),y.isUnifiedHover(ot)){pt.selectAll("g.hovertext").remove();var It=et.filter(function(_e){return _e.hoverinfo!=="none"});if(It.length===0)return[];var Rt=Y.hoverlabel,zt=Rt.font,Tt={showlegend:!0,legend:{title:{text:kt,font:zt},font:zt,bgcolor:Rt.bgcolor,bordercolor:Rt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:Y.legend?Y.legend.traceorder:void 0,orientation:"v"}},ft={font:zt};x(Tt,ft,X._fullData);var ut=ft.legend;ut.entries=[];for(var vt=0;vt<It.length;vt++){var St=It[vt];if(St.hoverinfo!=="none"){var Ot=B(St,!0,ot,Y,kt),Xt=Ot[0],$t=Ot[1];St.name=$t,$t!==""?St.text=$t+" : "+Xt:St.text=Xt;var de=St.cd[St.index];de&&(de.mc&&(St.mc=de.mc),de.mcc&&(St.mc=de.mcc),de.mlc&&(St.mlc=de.mlc),de.mlcc&&(St.mlc=de.mlcc),de.mlw&&(St.mlw=de.mlw),de.mrc&&(St.mrc=de.mrc),de.dir&&(St.dir=de.dir)),St._distinct=!0,ut.entries.push([St])}}ut.entries.sort(function(_e,Ce){return _e[0].trace.index-Ce[0].trace.index}),ut.layer=pt,ut._inHover=!0,ut._groupTitleFont=Rt.grouptitlefont,s(X,ut);var Me=pt.select("g.legend"),Fe=G(X,Me.node()),De=Fe.width+2*P,Ae=Fe.height+2*P,Ve=It[0],Qe=(Ve.x0+Ve.x1)/2,Sr=(Ve.y0+Ve.y1)/2,he=!(h.traceIs(Ve.trace,"bar-like")||h.traceIs(Ve.trace,"box-violin")),je,Re;Pt==="y"?he?(Re=Sr-P,je=Sr+P):(Re=Math.min.apply(null,It.map(function(_e){return Math.min(_e.y0,_e.y1)})),je=Math.max.apply(null,It.map(function(_e){return Math.max(_e.y0,_e.y1)}))):Re=je=S.mean(It.map(function(_e){return(_e.y0+_e.y1)/2}))-Ae/2;var _r,tr;Pt==="x"?he?(_r=Qe+P,tr=Qe-P):(_r=Math.max.apply(null,It.map(function(_e){return Math.max(_e.x0,_e.x1)})),tr=Math.min.apply(null,It.map(function(_e){return Math.min(_e.x0,_e.x1)}))):_r=tr=S.mean(It.map(function(_e){return(_e.x0+_e.x1)/2}))-De/2;var Gt=gt._offset,re=wt._offset;je+=re,_r+=Gt,tr+=Gt-De,Re+=re-Ae;var fe,ye;return _r+De<ee&&_r>=0?fe=_r:tr+De<ee&&tr>=0?fe=tr:Gt+De<ee?fe=Gt:_r-Qe<Qe-tr+De?fe=ee-De:fe=0,fe+=P,je+Ae<te&&je>=0?ye=je:Re+Ae<te&&Re>=0?ye=Re:re+Ae<te?ye=re:je-Sr<Sr-Re+Ae?ye=te-Ae:ye=0,ye+=P,Me.attr("transform",A(fe-1,ye-1)),Me}var Le=pt.selectAll("g.hovertext").data(et,function(_e){return w(_e)});return Le.enter().append("g").classed("hovertext",!0).each(function(){var _e=M.select(this);_e.append("rect").call(n.fill,n.addOpacity(ht,.8)),_e.append("text").classed("name",!0),_e.append("path").style("stroke-width","1px"),_e.append("text").classed("nums",!0).call(f.font,Ft,Et)}),Le.exit().remove(),Le.each(function(_e){var Ce=M.select(this).attr("transform",""),ze=_e.color;Array.isArray(ze)&&(ze=ze[_e.eventData[0].pointNumber]);var We=_e.bgcolor||ze,qe=n.combine(n.opacity(We)?We:n.defaultLine,ht),ir=n.combine(n.opacity(ze)?ze:n.defaultLine,ht),xr=_e.borderColor||n.contrast(qe),Dt=B(_e,ae,ot,Y,kt,Ce),Ut=Dt[0],Te=Dt[1],Se=Ce.select("text.nums").call(f.font,_e.fontFamily||Ft,_e.fontSize||Et,_e.fontColor||xr).text(Ut).attr("data-notex",1).call(e.positionText,0,0).call(e.convertToTspans,X),Be=Ce.select("text.name"),Je=0,$e=0;if(Te&&Te!==Ut){Be.call(f.font,_e.fontFamily||Ft,_e.fontSize||Et,ir).text(Te).attr("data-notex",1).call(e.positionText,0,0).call(e.convertToTspans,X);var Xe=G(X,Be.node());Je=Xe.width+2*P,$e=Xe.height+2*P}else Be.remove(),Ce.select("rect").remove();Ce.select("path").style({fill:qe,stroke:xr});var Oe=_e.xa._offset+(_e.x0+_e.x1)/2,ar=_e.ya._offset+(_e.y0+_e.y1)/2,cr=Math.abs(_e.x1-_e.x0),sr=Math.abs(_e.y1-_e.y0),lr=G(X,Se.node()),Or=lr.width/Y._invScaleX,Ir=lr.height/Y._invScaleY;_e.ty0=(Vt-lr.top)/Y._invScaleY,_e.bx=Or+2*P,_e.by=Math.max(Ir+2*P,$e),_e.anchor="start",_e.txwidth=Or,_e.tx2width=Je,_e.offset=0;var Pr=(Or+b+P+Je)*Y._invScaleX,rn,Zr;if(rt)_e.pos=Oe,rn=ar+sr/2+Pr<=te,Zr=ar-sr/2-Pr>=0,(_e.idealAlign==="top"||!rn)&&Zr?(ar-=sr/2,_e.anchor="end"):rn?(ar+=sr/2,_e.anchor="start"):_e.anchor="middle",_e.crossPos=ar;else{if(_e.pos=ar,rn=Oe+cr/2+Pr<=ee,Zr=Oe-cr/2-Pr>=0,(_e.idealAlign==="left"||!rn)&&Zr)Oe-=cr/2,_e.anchor="end";else if(rn)Oe+=cr/2,_e.anchor="start";else{_e.anchor="middle";var yn=Pr/2,Tn=Oe+yn-ee,hr=Oe-yn;Tn>0&&(Oe-=Tn),hr<0&&(Oe+=-hr)}_e.crossPos=Oe}Se.attr("text-anchor",_e.anchor),Je&&Be.attr("text-anchor",_e.anchor),Ce.attr("transform",A(Oe,ar)+(rt?g(u):""))}),{hoverLabels:Le,commonLabelBoundingBox:Mt}}function B(et,nt,X,Y,ot,rt){var ht="",pt="";et.nameOverride!==void 0&&(et.name=et.nameOverride),et.name&&(et.trace._meta&&(et.name=S.templateString(et.name,et.trace._meta)),ht=at(et.name,et.nameLength));var yt=X.charAt(0),xt=yt==="x"?"y":"x";et.zLabel!==void 0?(et.xLabel!==void 0&&(pt+="x: "+et.xLabel+"<br>"),et.yLabel!==void 0&&(pt+="y: "+et.yLabel+"<br>"),et.trace.type!=="choropleth"&&et.trace.type!=="choroplethmapbox"&&(pt+=(pt?"z: ":"")+et.zLabel)):nt&&et[yt+"Label"]===ot?pt=et[xt+"Label"]||"":et.xLabel===void 0?et.yLabel!==void 0&&et.trace.type!=="scattercarpet"&&(pt=et.yLabel):et.yLabel===void 0?pt=et.xLabel:pt="("+et.xLabel+", "+et.yLabel+")",(et.text||et.text===0)&&!Array.isArray(et.text)&&(pt+=(pt?"<br>":"")+et.text),et.extraText!==void 0&&(pt+=(pt?"<br>":"")+et.extraText),rt&&pt===""&&!et.hovertemplate&&(ht===""&&rt.remove(),pt=ht);var Ft=et.hovertemplate||!1;if(Ft){var Et=et.hovertemplateLabels||et;et[yt+"Label"]!==ot&&(Et[yt+"other"]=Et[yt+"Val"],Et[yt+"otherLabel"]=Et[yt+"Label"]),pt=S.hovertemplateString(Ft,Et,Y._d3locale,et.eventData[0]||{},et.trace._meta),pt=pt.replace(I,function(mt,gt){return ht=at(gt,et.nameLength),""})}return[pt,ht]}function O(et,nt,X,Y){var ot=nt?"xa":"ya",rt=nt?"ya":"xa",ht=0,pt=1,yt=et.size(),xt=new Array(yt),Ft=0,Et=Y.minX,mt=Y.maxX,gt=Y.minY,wt=Y.maxY,Pt=function(zt){return zt*X._invScaleX},Bt=function(zt){return zt*X._invScaleY};et.each(function(zt){var Tt=zt[ot],ft=zt[rt],ut=Tt._id.charAt(0)==="x",vt=Tt.range;Ft===0&&vt&&vt[0]>vt[1]!==ut&&(pt=-1);var St=0,Ot=ut?X.width:X.height;if(X.hovermode==="x"||X.hovermode==="y"){var Xt=R(zt,nt),$t=zt.anchor,de=$t==="end"?-1:1,Me,Fe;if($t==="middle")Me=zt.crossPos+(ut?Bt(Xt.y-zt.by/2):Pt(zt.bx/2+zt.tx2width/2)),Fe=Me+(ut?Bt(zt.by):Pt(zt.bx));else if(ut)Me=zt.crossPos+Bt(b+Xt.y)-Bt(zt.by/2-b),Fe=Me+Bt(zt.by);else{var De=Pt(de*b+Xt.x),Ae=De+Pt(de*zt.bx);Me=zt.crossPos+Math.min(De,Ae),Fe=zt.crossPos+Math.max(De,Ae)}ut?gt!==void 0&&wt!==void 0&&Math.min(Fe,wt)-Math.max(Me,gt)>1&&(ft.side==="left"?(St=ft._mainLinePosition,Ot=X.width):Ot=ft._mainLinePosition):Et!==void 0&&mt!==void 0&&Math.min(Fe,mt)-Math.max(Me,Et)>1&&(ft.side==="top"?(St=ft._mainLinePosition,Ot=X.height):Ot=ft._mainLinePosition)}xt[Ft++]=[{datum:zt,traceIndex:zt.trace.index,dp:0,pos:zt.pos,posref:zt.posref,size:zt.by*(ut?T:1)/2,pmin:St,pmax:Ot}]}),xt.sort(function(zt,Tt){return zt[0].posref-Tt[0].posref||pt*(Tt[0].traceIndex-zt[0].traceIndex)});var kt,jt,Ht,Vt,ee,te,ae;function le(zt){var Tt=zt[0],ft=zt[zt.length-1];if(jt=Tt.pmin-Tt.pos-Tt.dp+Tt.size,Ht=ft.pos+ft.dp+ft.size-Tt.pmax,jt>.01){for(ee=zt.length-1;ee>=0;ee--)zt[ee].dp+=jt;kt=!1}if(!(Ht<.01)){if(jt<-.01){for(ee=zt.length-1;ee>=0;ee--)zt[ee].dp-=Ht;kt=!1}if(kt){var ut=0;for(Vt=0;Vt<zt.length;Vt++)te=zt[Vt],te.pos+te.dp+te.size>Tt.pmax&&ut++;for(Vt=zt.length-1;Vt>=0&&!(ut<=0);Vt--)te=zt[Vt],te.pos>Tt.pmax-1&&(te.del=!0,ut--);for(Vt=0;Vt<zt.length&&!(ut<=0);Vt++)if(te=zt[Vt],te.pos<Tt.pmin+1)for(te.del=!0,ut--,Ht=te.size*2,ee=zt.length-1;ee>=0;ee--)zt[ee].dp-=Ht;for(Vt=zt.length-1;Vt>=0&&!(ut<=0);Vt--)te=zt[Vt],te.pos+te.dp+te.size>Tt.pmax&&(te.del=!0,ut--)}}}for(;!kt&&ht<=yt;){for(ht++,kt=!0,Vt=0;Vt<xt.length-1;){var ce=xt[Vt],pe=xt[Vt+1],we=ce[ce.length-1],ve=pe[0];if(jt=we.pos+we.dp+we.size-ve.pos-ve.dp+ve.size,jt>.01&&we.pmin===ve.pmin&&we.pmax===ve.pmax){for(ee=pe.length-1;ee>=0;ee--)pe[ee].dp+=jt;for(ce.push.apply(ce,pe),xt.splice(Vt+1,1),ae=0,ee=ce.length-1;ee>=0;ee--)ae+=ce[ee].dp;for(Ht=ae/ce.length,ee=ce.length-1;ee>=0;ee--)ce[ee].dp-=Ht;kt=!1}else Vt++}xt.forEach(le)}for(Vt=xt.length-1;Vt>=0;Vt--){var Mt=xt[Vt];for(ee=Mt.length-1;ee>=0;ee--){var It=Mt[ee],Rt=It.datum;Rt.offset=It.dp,Rt.del=It.del}}}function R(et,nt){var X=0,Y=et.offset;return nt&&(Y*=-_,X=et.offset*k),{x:X,y:Y}}function C(et){var nt={start:1,end:-1,middle:0}[et.anchor],X=nt*(b+P),Y=X+nt*(et.txwidth+P),ot=et.anchor==="middle";return ot&&(X-=et.tx2width/2,Y+=et.txwidth/2+P),{alignShift:nt,textShiftX:X,text2ShiftX:Y}}function F(et,nt,X,Y){var ot=function(ht){return ht*X},rt=function(ht){return ht*Y};et.each(function(ht){var pt=M.select(this);if(ht.del)return pt.remove();var yt=pt.select("text.nums"),xt=ht.anchor,Ft=xt==="end"?-1:1,Et=C(ht),mt=R(ht,nt),gt=mt.x,wt=mt.y,Pt=xt==="middle";pt.select("path").attr("d",Pt?"M-"+ot(ht.bx/2+ht.tx2width/2)+","+rt(wt-ht.by/2)+"h"+ot(ht.bx)+"v"+rt(ht.by)+"h-"+ot(ht.bx)+"Z":"M0,0L"+ot(Ft*b+gt)+","+rt(b+wt)+"v"+rt(ht.by/2-b)+"h"+ot(Ft*ht.bx)+"v-"+rt(ht.by)+"H"+ot(Ft*b+gt)+"V"+rt(wt-b)+"Z");var Bt=gt+Et.textShiftX,kt=wt+ht.ty0-ht.by/2+P,jt=ht.textAlign||"auto";jt!=="auto"&&(jt==="left"&&xt!=="start"?(yt.attr("text-anchor","start"),Bt=Pt?-ht.bx/2-ht.tx2width/2+P:-ht.bx-P):jt==="right"&&xt!=="end"&&(yt.attr("text-anchor","end"),Bt=Pt?ht.bx/2-ht.tx2width/2-P:ht.bx+P)),yt.call(e.positionText,ot(Bt),rt(kt)),ht.tx2width&&(pt.select("text.name").call(e.positionText,ot(Et.text2ShiftX+Et.alignShift*P+gt),rt(wt+ht.ty0-ht.by/2+P)),pt.select("rect").call(f.setRect,ot(Et.text2ShiftX+(Et.alignShift-1)*ht.tx2width/2+gt),rt(wt-ht.by/2-1),ot(ht.tx2width),rt(ht.by+2)))})}function N(et,nt){var X=et.index,Y=et.trace||{},ot=et.cd[0],rt=et.cd[X]||{};function ht(mt){return mt||E(mt)&&mt===0}var pt=Array.isArray(X)?function(mt,gt){var wt=S.castOption(ot,X,mt);return ht(wt)?wt:S.extractOption({},Y,"",gt)}:function(mt,gt){return S.extractOption(rt,Y,mt,gt)};function yt(mt,gt,wt){var Pt=pt(gt,wt);ht(Pt)&&(et[mt]=Pt)}if(yt("hoverinfo","hi","hoverinfo"),yt("bgcolor","hbg","hoverlabel.bgcolor"),yt("borderColor","hbc","hoverlabel.bordercolor"),yt("fontFamily","htf","hoverlabel.font.family"),yt("fontSize","hts","hoverlabel.font.size"),yt("fontColor","htc","hoverlabel.font.color"),yt("nameLength","hnl","hoverlabel.namelength"),yt("textAlign","hta","hoverlabel.align"),et.posref=nt==="y"||nt==="closest"&&Y.orientation==="h"?et.xa._offset+(et.x0+et.x1)/2:et.ya._offset+(et.y0+et.y1)/2,et.x0=S.constrain(et.x0,0,et.xa._length),et.x1=S.constrain(et.x1,0,et.xa._length),et.y0=S.constrain(et.y0,0,et.ya._length),et.y1=S.constrain(et.y1,0,et.ya._length),et.xLabelVal!==void 0&&(et.xLabel="xLabel"in et?et.xLabel:o.hoverLabelText(et.xa,et.xLabelVal,Y.xhoverformat),et.xVal=et.xa.c2d(et.xLabelVal)),et.yLabelVal!==void 0&&(et.yLabel="yLabel"in et?et.yLabel:o.hoverLabelText(et.ya,et.yLabelVal,Y.yhoverformat),et.yVal=et.ya.c2d(et.yLabelVal)),et.zLabelVal!==void 0&&et.zLabel===void 0&&(et.zLabel=String(et.zLabelVal)),!isNaN(et.xerr)&&!(et.xa.type==="log"&&et.xerr<=0)){var xt=o.tickText(et.xa,et.xa.c2l(et.xerr),"hover").text;et.xerrneg!==void 0?et.xLabel+=" +"+xt+" / -"+o.tickText(et.xa,et.xa.c2l(et.xerrneg),"hover").text:et.xLabel+=" \xB1 "+xt,nt==="x"&&(et.distance+=1)}if(!isNaN(et.yerr)&&!(et.ya.type==="log"&&et.yerr<=0)){var Ft=o.tickText(et.ya,et.ya.c2l(et.yerr),"hover").text;et.yerrneg!==void 0?et.yLabel+=" +"+Ft+" / -"+o.tickText(et.ya,et.ya.c2l(et.yerrneg),"hover").text:et.yLabel+=" \xB1 "+Ft,nt==="y"&&(et.distance+=1)}var Et=et.hoverinfo||et.trace.hoverinfo;return Et&&Et!=="all"&&(Et=Array.isArray(Et)?Et:Et.split("+"),Et.indexOf("x")===-1&&(et.xLabel=void 0),Et.indexOf("y")===-1&&(et.yLabel=void 0),Et.indexOf("z")===-1&&(et.zLabel=void 0),Et.indexOf("text")===-1&&(et.text=void 0),Et.indexOf("name")===-1&&(et.name=void 0)),et}function V(et,nt,X){var Y=X.container,ot=X.fullLayout,rt=ot._size,ht=X.event,pt=!!nt.hLinePoint,yt=!!nt.vLinePoint,xt,Ft;if(Y.selectAll(".spikeline").remove(),!!(yt||pt)){var Et=n.combine(ot.plot_bgcolor,ot.paper_bgcolor);if(pt){var mt=nt.hLinePoint,gt,wt;xt=mt&&mt.xa,Ft=mt&&mt.ya;var Pt=Ft.spikesnap;Pt==="cursor"?(gt=ht.pointerX,wt=ht.pointerY):(gt=xt._offset+mt.x,wt=Ft._offset+mt.y);var Bt=i.readability(mt.color,Et)<1.5?n.contrast(Et):mt.color,kt=Ft.spikemode,jt=Ft.spikethickness,Ht=Ft.spikecolor||Bt,Vt=o.getPxPosition(et,Ft),ee,te;if(kt.indexOf("toaxis")!==-1||kt.indexOf("across")!==-1){if(kt.indexOf("toaxis")!==-1&&(ee=Vt,te=gt),kt.indexOf("across")!==-1){var ae=Ft._counterDomainMin,le=Ft._counterDomainMax;Ft.anchor==="free"&&(ae=Math.min(ae,Ft.position),le=Math.max(le,Ft.position)),ee=rt.l+ae*rt.w,te=rt.l+le*rt.w}Y.insert("line",":first-child").attr({x1:ee,x2:te,y1:wt,y2:wt,"stroke-width":jt,stroke:Ht,"stroke-dasharray":f.dashStyle(Ft.spikedash,jt)}).classed("spikeline",!0).classed("crisp",!0),Y.insert("line",":first-child").attr({x1:ee,x2:te,y1:wt,y2:wt,"stroke-width":jt+2,stroke:Et}).classed("spikeline",!0).classed("crisp",!0)}kt.indexOf("marker")!==-1&&Y.insert("circle",":first-child").attr({cx:Vt+(Ft.side!=="right"?jt:-jt),cy:wt,r:jt,fill:Ht}).classed("spikeline",!0)}if(yt){var ce=nt.vLinePoint,pe,we;xt=ce&&ce.xa,Ft=ce&&ce.ya;var ve=xt.spikesnap;ve==="cursor"?(pe=ht.pointerX,we=ht.pointerY):(pe=xt._offset+ce.x,we=Ft._offset+ce.y);var Mt=i.readability(ce.color,Et)<1.5?n.contrast(Et):ce.color,It=xt.spikemode,Rt=xt.spikethickness,zt=xt.spikecolor||Mt,Tt=o.getPxPosition(et,xt),ft,ut;if(It.indexOf("toaxis")!==-1||It.indexOf("across")!==-1){if(It.indexOf("toaxis")!==-1&&(ft=Tt,ut=we),It.indexOf("across")!==-1){var vt=xt._counterDomainMin,St=xt._counterDomainMax;xt.anchor==="free"&&(vt=Math.min(vt,xt.position),St=Math.max(St,xt.position)),ft=rt.t+(1-St)*rt.h,ut=rt.t+(1-vt)*rt.h}Y.insert("line",":first-child").attr({x1:pe,x2:pe,y1:ft,y2:ut,"stroke-width":Rt,stroke:zt,"stroke-dasharray":f.dashStyle(xt.spikedash,Rt)}).classed("spikeline",!0).classed("crisp",!0),Y.insert("line",":first-child").attr({x1:pe,x2:pe,y1:ft,y2:ut,"stroke-width":Rt+2,stroke:Et}).classed("spikeline",!0).classed("crisp",!0)}It.indexOf("marker")!==-1&&Y.insert("circle",":first-child").attr({cx:pe,cy:Tt-(xt.side!=="top"?Rt:-Rt),r:Rt,fill:zt}).classed("spikeline",!0)}}}function K(et,nt,X){if(!X||X.length!==et._hoverdata.length)return!0;for(var Y=X.length-1;Y>=0;Y--){var ot=X[Y],rt=et._hoverdata[Y];if(ot.curveNumber!==rt.curveNumber||String(ot.pointNumber)!==String(rt.pointNumber)||String(ot.pointNumbers)!==String(rt.pointNumbers))return!0}return!1}function Q(et,nt){return!nt||nt.vLinePoint!==et._spikepoints.vLinePoint||nt.hLinePoint!==et._spikepoints.hLinePoint}function at(et,nt){return e.plainText(et||"",{len:nt,allowedTags:["br","sub","sup","b","i","em"]})}function it(et,nt){for(var X=nt.charAt(0),Y=[],ot=[],rt=[],ht=0;ht<et.length;ht++){var pt=et[ht];h.traceIs(pt.trace,"bar-like")||h.traceIs(pt.trace,"box-violin")?rt.push(pt):pt.trace[X+"period"]?ot.push(pt):Y.push(pt)}return Y.concat(ot).concat(rt)}function q(et,nt,X){var Y=nt[et+"a"],ot=nt[et+"Val"],rt=nt.cd[0];if(Y.type==="category"||Y.type==="multicategory")ot=Y._categoriesMap[ot];else if(Y.type==="date"){var ht=nt.trace[et+"periodalignment"];if(ht){var pt=nt.cd[nt.index],yt=pt[et+"Start"];yt===void 0&&(yt=pt[et]);var xt=pt[et+"End"];xt===void 0&&(xt=pt[et]);var Ft=xt-yt;ht==="end"?ot+=Ft:ht==="middle"&&(ot+=Ft/2)}ot=Y.d2c(ot)}return rt&&rt.t&&rt.t.posLetter===Y._id&&(X.boxmode==="group"||X.violinmode==="group")&&(ot+=rt.t.dPos),ot}function W(et){return et.offsetTop+et.clientTop}function Z(et){return et.offsetLeft+et.clientLeft}function G(et,nt){var X=et._fullLayout,Y=nt.getBoundingClientRect(),ot=Y.left,rt=Y.top,ht=ot+Y.width,pt=rt+Y.height,yt=S.apply3DTransform(X._invTransform)(ot,rt),xt=S.apply3DTransform(X._invTransform)(ht,pt),Ft=yt[0],Et=yt[1],mt=xt[0],gt=xt[1];return{x:Ft,y:Et,width:mt-Ft,height:gt-Et,top:Math.min(Et,gt),left:Math.min(Ft,mt),right:Math.max(Ft,mt),bottom:Math.max(Et,gt)}}},38048:function($,U,t){var M=t(71828),E=t(7901),i=t(23469).isUnifiedHover;$.exports=function(S,A,g,v){v=v||{};var e=A.legend;function r(f){v.font[f]||(v.font[f]=e?A.legend.font[f]:A.font[f])}A&&i(A.hovermode)&&(v.font||(v.font={}),r("size"),r("family"),r("color"),e?(v.bgcolor||(v.bgcolor=E.combine(A.legend.bgcolor,A.paper_bgcolor)),v.bordercolor||(v.bordercolor=A.legend.bordercolor)):v.bgcolor||(v.bgcolor=A.paper_bgcolor)),g("hoverlabel.bgcolor",v.bgcolor),g("hoverlabel.bordercolor",v.bordercolor),g("hoverlabel.namelength",v.namelength),M.coerceFont(g,"hoverlabel.font",v.font),g("hoverlabel.align",v.align)}},98212:function($,U,t){var M=t(71828),E=t(528);$.exports=function(i,S){function A(g,v){return S[g]!==void 0?S[g]:M.coerce(i,S,E,g,v)}return A("clickmode"),A("hovermode")}},30211:function($,U,t){var M=t(39898),E=t(71828),i=t(28569),S=t(23469),A=t(528),g=t(88335);$.exports={moduleType:"component",name:"fx",constants:t(26675),schema:{layout:A},attributes:t(77914),layoutAttributes:A,supplyLayoutGlobalDefaults:t(22774),supplyDefaults:t(54268),supplyLayoutDefaults:t(34938),calc:t(30732),getDistanceFunction:S.getDistanceFunction,getClosest:S.getClosest,inbox:S.inbox,quadrature:S.quadrature,appendArrayPointValue:S.appendArrayPointValue,castHoverOption:e,castHoverinfo:r,hover:g.hover,unhover:i.unhover,loneHover:g.loneHover,loneUnhover:v,click:t(75914)};function v(f){var n=E.isD3Selection(f)?f:M.select(f);n.selectAll("g.hovertext").remove(),n.selectAll(".spikeline").remove()}function e(f,n,a){return E.castOption(f,n,"hoverlabel."+a)}function r(f,n,a){function o(h){return E.coerceHoverinfo({hoverinfo:h},{_module:f._module},n)}return E.castOption(f,a,"hoverinfo",o)}},528:function($,U,t){var M=t(26675),E=t(41940),i=E({editType:"none"});i.family.dflt=M.HOVERFONT,i.size.dflt=M.HOVERFONTSIZE,$.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:i,grouptitlefont:E({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},34938:function($,U,t){var M=t(71828),E=t(528),i=t(98212),S=t(38048);$.exports=function(A,g){function v(o,h){return M.coerce(A,g,E,o,h)}var e=i(A,g);e&&(v("hoverdistance"),v("spikedistance"));var r=v("dragmode");r==="select"&&v("selectdirection");var f=g._has("mapbox"),n=g._has("geo"),a=g._basePlotModules.length;g.dragmode==="zoom"&&((f||n)&&a===1||f&&n&&a===2)&&(g.dragmode="pan"),S(A,g,v),M.coerceFont(v,"hoverlabel.grouptitlefont",g.hoverlabel.font)}},22774:function($,U,t){var M=t(71828),E=t(38048),i=t(528);$.exports=function(S,A){function g(v,e){return M.coerce(S,A,i,v,e)}E(S,A,g)}},83312:function($,U,t){var M=t(71828),E=t(30587).counter,i=t(27670).Y,S=t(85555).idRegex,A=t(44467),g={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[E("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[S.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[S.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:i({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function v(a,o,h){var y=o[h+"axes"],p=Object.keys((a._splomAxes||{})[h]||{});if(Array.isArray(y))return y;if(p.length)return p}function e(a,o){var h=a.grid||{},y=v(o,h,"x"),p=v(o,h,"y");if(!a.grid&&!y&&!p)return;var x=Array.isArray(h.subplots)&&Array.isArray(h.subplots[0]),s=Array.isArray(y),u=Array.isArray(p),c=s&&y!==h.xaxes&&u&&p!==h.yaxes,T,k;x?(T=h.subplots.length,k=h.subplots[0].length):(u&&(T=p.length),s&&(k=y.length));var _=A.newContainer(o,"grid");function b(R,C){return M.coerce(h,_,g,R,C)}var P=b("rows",T),l=b("columns",k);if(!(P*l>1)){delete o.grid;return}if(!x&&!s&&!u){var d=b("pattern")==="independent";d&&(x=!0)}_._hasSubplotGrid=x;var L=b("roworder"),w=L==="top to bottom",I=x?.2:.1,z=x?.3:.1,B,O;c&&o._splomGridDflt&&(B=o._splomGridDflt.xside,O=o._splomGridDflt.yside),_._domains={x:r("x",b,I,B,l),y:r("y",b,z,O,P,w)}}function r(a,o,h,y,p,x){var s=o(a+"gap",h),u=o("domain."+a);o(a+"side",y);for(var c=new Array(p),T=u[0],k=(u[1]-T)/(p-s),_=k*(1-s),b=0;b<p;b++){var P=T+k*b;c[x?p-1-b:b]=[P,P+_]}return c}function f(a,o){var h=o.grid;if(!(!h||!h._domains)){var y=a.grid||{},p=o._subplots,x=h._hasSubplotGrid,s=h.rows,u=h.columns,c=h.pattern==="independent",T,k,_,b,P,l,d,L=h._axisMap={};if(x){var w=y.subplots||[];l=h.subplots=new Array(s);var I=1;for(T=0;T<s;T++){var z=l[T]=new Array(u),B=w[T]||[];for(k=0;k<u;k++)if(c?(P=I===1?"xy":"x"+I+"y"+I,I++):P=B[k],z[k]="",p.cartesian.indexOf(P)!==-1){if(d=P.indexOf("y"),_=P.slice(0,d),b=P.slice(d),L[_]!==void 0&&L[_]!==k||L[b]!==void 0&&L[b]!==T)continue;z[k]=P,L[_]=k,L[b]=T}}}else{var O=v(o,y,"x"),R=v(o,y,"y");h.xaxes=n(O,p.xaxis,u,L,"x"),h.yaxes=n(R,p.yaxis,s,L,"y")}var C=h._anchors={},F=h.roworder==="top to bottom";for(var N in L){var V=N.charAt(0),K=h[V+"side"],Q,at,it;if(K.length<8)C[N]="free";else if(V==="x"){if(K.charAt(0)==="t"===F?(Q=0,at=1,it=s):(Q=s-1,at=-1,it=-1),x){var q=L[N];for(T=Q;T!==it;T+=at)if(P=l[T][q],!!P&&(d=P.indexOf("y"),P.slice(0,d)===N)){C[N]=P.slice(d);break}}else for(T=Q;T!==it;T+=at)if(b=h.yaxes[T],p.cartesian.indexOf(N+b)!==-1){C[N]=b;break}}else if(K.charAt(0)==="l"?(Q=0,at=1,it=u):(Q=u-1,at=-1,it=-1),x){var W=L[N];for(T=Q;T!==it;T+=at)if(P=l[W][T],!!P&&(d=P.indexOf("y"),P.slice(d)===N)){C[N]=P.slice(0,d);break}}else for(T=Q;T!==it;T+=at)if(_=h.xaxes[T],p.cartesian.indexOf(_+N)!==-1){C[N]=_;break}}}}function n(a,o,h,y,p){var x=new Array(h),s;function u(c,T){o.indexOf(T)!==-1&&y[T]===void 0?(x[c]=T,y[T]=c):x[c]=""}if(Array.isArray(a))for(s=0;s<h;s++)u(s,a[s]);else for(u(0,p),s=1;s<h;s++)u(s,p+(s+1));return x}$.exports={moduleType:"component",name:"grid",schema:{layout:{grid:g}},layoutAttributes:g,sizeDefaults:e,contentDefaults:f}},69819:function($,U,t){var M=t(85555),E=t(44467).templatedArray;t(24695),$.exports=E("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",M.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",M.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},75378:function($,U,t){var M=t(92770),E=t(58163);$.exports=function(i,S,A,g){S=S||{};var v=A==="log"&&S.type==="linear",e=A==="linear"&&S.type==="log";if(v||e){for(var r=i._fullLayout.images,f=S._id.charAt(0),n,a,o=0;o<r.length;o++)if(n=r[o],a="images["+o+"].",n[f+"ref"]===S._id){var h=n[f],y=n["size"+f],p=null,x=null;if(v){p=E(h,S.range);var s=y/Math.pow(10,p)/2;x=2*Math.log(s+Math.sqrt(1+s*s))/Math.LN10}else p=Math.pow(10,h),x=p*(Math.pow(10,y/2)-Math.pow(10,-y/2));M(p)?M(x)||(x=null):(p=null,x=null),g(a+f,p),g(a+"size"+f,x)}}}},81603:function($,U,t){var M=t(71828),E=t(89298),i=t(85501),S=t(69819),A="images";$.exports=function(v,e){var r={name:A,handleItemDefaults:g};i(v,e,r)};function g(v,e,r){function f(u,c){return M.coerce(v,e,S,u,c)}var n=f("source"),a=f("visible",!!n);if(!a)return e;f("layer"),f("xanchor"),f("yanchor"),f("sizex"),f("sizey"),f("sizing"),f("opacity");for(var o={_fullLayout:r},h=["x","y"],y=0;y<2;y++){var p=h[y],x=E.coerceRef(v,e,o,p,"paper",void 0);if(x!=="paper"){var s=E.getFromId(o,x);s._imgIndices.push(e._index)}E.coercePosition(e,o,f,x,p,0)}return e}},80750:function($,U,t){var M=t(39898),E=t(91424),i=t(89298),S=t(41675),A=t(77922);$.exports=function(g){var v=g._fullLayout,e=[],r={},f=[],n,a;for(a=0;a<v.images.length;a++){var o=v.images[a];if(o.visible)if(o.layer==="below"&&o.xref!=="paper"&&o.yref!=="paper"){n=S.ref2id(o.xref)+S.ref2id(o.yref);var h=v._plots[n];if(!h){f.push(o);continue}h.mainplot&&(n=h.mainplot.id),r[n]||(r[n]=[]),r[n].push(o)}else o.layer==="above"?e.push(o):f.push(o)}var y={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function p(_){var b=M.select(this);if(this._imgSrc!==_.source)if(b.attr("xmlns",A.svg),_.source&&_.source.slice(0,5)==="data:")b.attr("xlink:href",_.source),this._imgSrc=_.source;else{var P=new Promise((function(l){var d=new Image;this.img=d,d.setAttribute("crossOrigin","anonymous"),d.onerror=L,d.onload=function(){var w=document.createElement("canvas");w.width=this.width,w.height=this.height;var I=w.getContext("2d",{willReadFrequently:!0});I.drawImage(this,0,0);var z=w.toDataURL("image/png");b.attr("xlink:href",z),l()},b.on("error",L),d.src=_.source,this._imgSrc=_.source;function L(){b.remove(),l()}}).bind(this));g._promises.push(P)}}function x(_){var b=M.select(this),P=i.getFromId(g,_.xref),l=i.getFromId(g,_.yref),d=i.getRefType(_.xref)==="domain",L=i.getRefType(_.yref)==="domain",w=v._size,I,z;P!==void 0?I=typeof _.xref=="string"&&d?P._length*_.sizex:Math.abs(P.l2p(_.sizex)-P.l2p(0)):I=_.sizex*w.w,l!==void 0?z=typeof _.yref=="string"&&L?l._length*_.sizey:Math.abs(l.l2p(_.sizey)-l.l2p(0)):z=_.sizey*w.h;var B=I*y.x[_.xanchor].offset,O=z*y.y[_.yanchor].offset,R=y.x[_.xanchor].sizing+y.y[_.yanchor].sizing,C,F;switch(P!==void 0?C=typeof _.xref=="string"&&d?P._length*_.x+P._offset:P.r2p(_.x)+P._offset:C=_.x*w.w+w.l,C+=B,l!==void 0?F=typeof _.yref=="string"&&L?l._length*(1-_.y)+l._offset:l.r2p(_.y)+l._offset:F=w.h-_.y*w.h+w.t,F+=O,_.sizing){case"fill":R+=" slice";break;case"stretch":R="none";break}b.attr({x:C,y:F,width:I,height:z,preserveAspectRatio:R,opacity:_.opacity});var N=P&&i.getRefType(_.xref)!=="domain"?P._id:"",V=l&&i.getRefType(_.yref)!=="domain"?l._id:"",K=N+V;E.setClipUrl(b,K?"clip"+v._uid+K:null,g)}var s=v._imageLowerLayer.selectAll("image").data(f),u=v._imageUpperLayer.selectAll("image").data(e);s.enter().append("image"),u.enter().append("image"),s.exit().remove(),u.exit().remove(),s.each(function(_){p.bind(this)(_),x.bind(this)(_)}),u.each(function(_){p.bind(this)(_),x.bind(this)(_)});var c=Object.keys(v._plots);for(a=0;a<c.length;a++){n=c[a];var T=v._plots[n];if(T.imagelayer){var k=T.imagelayer.selectAll("image").data(r[n]||[]);k.enter().append("image"),k.exit().remove(),k.each(function(_){p.bind(this)(_),x.bind(this)(_)})}}}},68804:function($,U,t){$.exports={moduleType:"component",name:"images",layoutAttributes:t(69819),supplyLayoutDefaults:t(81603),includeBasePlot:t(76325)("images"),draw:t(80750),convertCoords:t(75378)}},33030:function($,U,t){var M=t(41940),E=t(22399);$.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:E.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:M({editType:"legend"}),grouptitlefont:M({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:M({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},14928:function($){$.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},99017:function($,U,t){var M=t(73972),E=t(71828),i=t(44467),S=t(9012),A=t(33030),g=t(10820),v=t(10130);function e(r,f,n,a){var o=f[r]||{},h=i.newContainer(n,r);function y(it,q){return E.coerce(o,h,A,it,q)}var p=E.coerceFont(y,"font",n.font);y("bgcolor",n.paper_bgcolor),y("bordercolor");var x=y("visible");if(x){for(var s,u=function(it,q){var W=s._input,Z=s;return E.coerce(W,Z,S,it,q)},c=n.font||{},T=E.coerceFont(y,"grouptitlefont",E.extendFlat({},c,{size:Math.round(c.size*1.1)})),k=0,_=!1,b="normal",P=(n.shapes||[]).filter(function(it){return it.showlegend}),l=a.concat(P).filter(function(it){return r===(it.legend||"legend")}),d=0;d<l.length;d++)if(s=l[d],!!s.visible){var L=s._isShape;(s.showlegend||s._dfltShowLegend&&!(s._module&&s._module.attributes&&s._module.attributes.showlegend&&s._module.attributes.showlegend.dflt===!1))&&(k++,s.showlegend&&(_=!0,(!L&&M.traceIs(s,"pie-like")||s._input.showlegend===!0)&&k++),E.coerceFont(u,"legendgrouptitle.font",T)),(!L&&M.traceIs(s,"bar")&&n.barmode==="stack"||["tonextx","tonexty"].indexOf(s.fill)!==-1)&&(b=v.isGrouped({traceorder:b})?"grouped+reversed":"reversed"),s.legendgroup!==void 0&&s.legendgroup!==""&&(b=v.isReversed({traceorder:b})?"reversed+grouped":"grouped")}var w=E.coerce(f,n,g,"showlegend",_&&k>(r==="legend"?1:0));if(w===!1&&(n[r]=void 0),!(w===!1&&!o.uirevision)&&(y("uirevision",n.uirevision),w!==!1)){y("borderwidth");var I=y("orientation"),z=y("yref"),B=y("xref"),O=I==="h",R=z==="paper",C=B==="paper",F,N,V,K="left";O?(F=0,M.getComponentMethod("rangeslider","isVisible")(f.xaxis)?R?(N=1.1,V="bottom"):(N=1,V="top"):R?(N=-.1,V="top"):(N=0,V="bottom")):(N=1,V="auto",C?F=1.02:(F=1,K="right")),E.coerce(o,h,{x:{valType:"number",editType:"legend",min:C?-2:0,max:C?3:1,dflt:F}},"x"),E.coerce(o,h,{y:{valType:"number",editType:"legend",min:R?-2:0,max:R?3:1,dflt:N}},"y"),y("traceorder",b),v.isGrouped(n[r])&&y("tracegroupgap"),y("entrywidth"),y("entrywidthmode"),y("itemsizing"),y("itemwidth"),y("itemclick"),y("itemdoubleclick"),y("groupclick"),y("xanchor",K),y("yanchor",V),y("valign"),E.noneOrAll(o,h,["x","y"]);var Q=y("title.text");if(Q){y("title.side",O?"left":"top");var at=E.extendFlat({},p,{size:E.bigFont(p.size)});E.coerceFont(y,"title.font",at)}}}}$.exports=function(r,f,n){var a,o=n.slice(),h=f.shapes;if(h)for(a=0;a<h.length;a++){var y=h[a];if(y.showlegend){var p={_input:y._input,visible:y.visible,showlegend:y.showlegend,legend:y.legend};o.push(p)}}var x=["legend"];for(a=0;a<o.length;a++)E.pushUnique(x,o[a].legend);for(f._legends=[],a=0;a<x.length;a++){var s=x[a];e(s,r,f,o),f[s]&&f[s].visible&&(f[s]._id=s),f._legends.push(s)}}},43969:function($,U,t){var M=t(39898),E=t(71828),i=t(74875),S=t(73972),A=t(11086),g=t(28569),v=t(91424),e=t(7901),r=t(63893),f=t(85167),n=t(14928),a=t(18783),o=a.LINE_SPACING,h=a.FROM_TL,y=a.FROM_BR,p=t(82424),x=t(53630),s=t(10130),u=1,c=/^legend[0-9]*$/;$.exports=function(C,F){if(F)T(C,F);else{var N=C._fullLayout,V=N._legends,K=N._infolayer.selectAll('[class^="legend"]');K.each(function(){var q=M.select(this),W=q.attr("class"),Z=W.split(" ")[0];Z.match(c)&&V.indexOf(Z)===-1&&q.remove()});for(var Q=0;Q<V.length;Q++){var at=V[Q],it=C._fullLayout[at];T(C,it)}}};function T(C,F){var N=F||{},V=C._fullLayout,K=R(N),Q,at,it=N._inHover;if(it?(at=N.layer,Q="hover"):(at=V._infolayer,Q=K),!!at){Q+=V._uid,C._legendMouseDownTime||(C._legendMouseDownTime=0);var q;if(it){if(!N.entries)return;q=p(N.entries,N)}else{for(var W=(C.calcdata||[]).slice(),Z=V.shapes,G=0;G<Z.length;G++){var et=Z[G];if(et.showlegend){var nt={_isShape:!0,_fullInput:et,index:et._index,name:et.name||et.label.text||"shape "+et._index,legend:et.legend,legendgroup:et.legendgroup,legendgrouptitle:et.legendgrouptitle,legendrank:et.legendrank,legendwidth:et.legendwidth,showlegend:et.showlegend,visible:et.visible,opacity:et.opacity,mode:et.type==="line"?"lines":"markers",line:et.line,marker:{line:et.line,color:et.fillcolor,size:12,symbol:et.type==="rect"?"square":et.type==="circle"?"circle":"hexagon2"}};W.push([{trace:nt}])}}if(!W.length)return;q=V.showlegend&&p(W,N,V._legends.length>1)}var X=V.hiddenlabels||[];if(!it&&(!V.showlegend||!q.length))return at.selectAll("."+K).remove(),V._topdefs.select("#"+Q).remove(),i.autoMargin(C,K);var Y=E.ensureSingle(at,"g",K,function(mt){it||mt.attr("pointer-events","all")}),ot=E.ensureSingleById(V._topdefs,"clipPath",Q,function(mt){mt.append("rect")}),rt=E.ensureSingle(Y,"rect","bg",function(mt){mt.attr("shape-rendering","crispEdges")});rt.call(e.stroke,N.bordercolor).call(e.fill,N.bgcolor).style("stroke-width",N.borderwidth+"px");var ht=E.ensureSingle(Y,"g","scrollbox"),pt=N.title;if(N._titleWidth=0,N._titleHeight=0,pt.text){var yt=E.ensureSingle(ht,"text",K+"titletext");yt.attr("text-anchor","start").call(v.font,pt.font).text(pt.text),d(yt,ht,C,N,u)}else ht.selectAll("."+K+"titletext").remove();var xt=E.ensureSingle(Y,"rect","scrollbar",function(mt){mt.attr(n.scrollBarEnterAttrs).call(e.fill,n.scrollBarColor)}),Ft=ht.selectAll("g.groups").data(q);Ft.enter().append("g").attr("class","groups"),Ft.exit().remove();var Et=Ft.selectAll("g.traces").data(E.identity);Et.enter().append("g").attr("class","traces"),Et.exit().remove(),Et.style("opacity",function(mt){var gt=mt[0].trace;return S.traceIs(gt,"pie-like")?X.indexOf(mt[0].label)!==-1?.5:1:gt.visible==="legendonly"?.5:1}).each(function(){M.select(this).call(b,C,N)}).call(x,C,N).each(function(){it||M.select(this).call(l,C,K)}),E.syncOrAsync([i.previousPromises,function(){return I(C,Ft,Et,N)},function(){var mt=V._size,gt=N.borderwidth,wt=N.xref==="paper",Pt=N.yref==="paper";if(!it){var Bt,kt;wt?Bt=mt.l+mt.w*N.x-h[B(N)]*N._width:Bt=V.width*N.x-h[B(N)]*N._width,Pt?kt=mt.t+mt.h*(1-N.y)-h[O(N)]*N._effHeight:kt=V.height*(1-N.y)-h[O(N)]*N._effHeight;var jt=z(C,K,Bt,kt);if(jt)return;if(V.margin.autoexpand){var Ht=Bt,Vt=kt;Bt=wt?E.constrain(Bt,0,V.width-N._width):Ht,kt=Pt?E.constrain(kt,0,V.height-N._effHeight):Vt,Bt!==Ht&&E.log("Constrain "+K+".x to make legend fit inside graph"),kt!==Vt&&E.log("Constrain "+K+".y to make legend fit inside graph")}v.setTranslate(Y,Bt,kt)}if(xt.on(".drag",null),Y.on("wheel",null),it||N._height<=N._maxHeight||C._context.staticPlot){var ee=N._effHeight;it&&(ee=N._height),rt.attr({width:N._width-gt,height:ee-gt,x:gt/2,y:gt/2}),v.setTranslate(ht,0,0),ot.select("rect").attr({width:N._width-2*gt,height:ee-2*gt,x:gt,y:gt}),v.setClipUrl(ht,Q,C),v.setRect(xt,0,0,0,0),delete N._scrollY}else{var te=Math.max(n.scrollBarMinHeight,N._effHeight*N._effHeight/N._height),ae=N._effHeight-te-2*n.scrollBarMargin,le=N._height-N._effHeight,ce=ae/le,pe=Math.min(N._scrollY||0,le);rt.attr({width:N._width-2*gt+n.scrollBarWidth+n.scrollBarMargin,height:N._effHeight-gt,x:gt/2,y:gt/2}),ot.select("rect").attr({width:N._width-2*gt+n.scrollBarWidth+n.scrollBarMargin,height:N._effHeight-2*gt,x:gt,y:gt+pe}),v.setClipUrl(ht,Q,C),ft(pe,te,ce),Y.on("wheel",function(){pe=E.constrain(N._scrollY+M.event.deltaY/ae*le,0,le),ft(pe,te,ce),pe!==0&&pe!==le&&M.event.preventDefault()});var we,ve,Mt,It=function(Xt,$t,de){var Me=(de-$t)/ce+Xt;return E.constrain(Me,0,le)},Rt=function(Xt,$t,de){var Me=($t-de)/ce+Xt;return E.constrain(Me,0,le)},zt=M.behavior.drag().on("dragstart",function(){var Xt=M.event.sourceEvent;Xt.type==="touchstart"?we=Xt.changedTouches[0].clientY:we=Xt.clientY,Mt=pe}).on("drag",function(){var Xt=M.event.sourceEvent;Xt.buttons===2||Xt.ctrlKey||(Xt.type==="touchmove"?ve=Xt.changedTouches[0].clientY:ve=Xt.clientY,pe=It(Mt,we,ve),ft(pe,te,ce))});xt.call(zt);var Tt=M.behavior.drag().on("dragstart",function(){var Xt=M.event.sourceEvent;Xt.type==="touchstart"&&(we=Xt.changedTouches[0].clientY,Mt=pe)}).on("drag",function(){var Xt=M.event.sourceEvent;Xt.type==="touchmove"&&(ve=Xt.changedTouches[0].clientY,pe=Rt(Mt,we,ve),ft(pe,te,ce))});ht.call(Tt)}function ft(Xt,$t,de){N._scrollY=C._fullLayout[K]._scrollY=Xt,v.setTranslate(ht,0,-Xt),v.setRect(xt,N._width,n.scrollBarMargin+Xt*de,n.scrollBarWidth,$t),ot.select("rect").attr("y",gt+Xt)}if(C._context.edits.legendPosition){var ut,vt,St,Ot;Y.classed("cursor-move",!0),g.init({element:Y.node(),gd:C,prepFn:function(){var Xt=v.getTranslate(Y);St=Xt.x,Ot=Xt.y},moveFn:function(Xt,$t){var de=St+Xt,Me=Ot+$t;v.setTranslate(Y,de,Me),ut=g.align(de,N._width,mt.l,mt.l+mt.w,N.xanchor),vt=g.align(Me+N._height,-N._height,mt.t+mt.h,mt.t,N.yanchor)},doneFn:function(){if(ut!==void 0&&vt!==void 0){var Xt={};Xt[K+".x"]=ut,Xt[K+".y"]=vt,S.call("_guiRelayout",C,Xt)}},clickFn:function(Xt,$t){var de=at.selectAll("g.traces").filter(function(){var Me=this.getBoundingClientRect();return $t.clientX>=Me.left&&$t.clientX<=Me.right&&$t.clientY>=Me.top&&$t.clientY<=Me.bottom});de.size()>0&&_(C,Y,de,Xt,$t)}})}}],C)}}function k(C,F,N){var V=C[0],K=V.width,Q=F.entrywidthmode,at=V.trace.legendwidth||F.entrywidth;return Q==="fraction"?F._maxWidth*at:N+(at||K)}function _(C,F,N,V,K){var Q=N.data()[0][0].trace,at={event:K,node:N.node(),curveNumber:Q.index,expandedIndex:Q._expandedIndex,data:C.data,layout:C.layout,frames:C._transitionData._frames,config:C._context,fullData:C._fullData,fullLayout:C._fullLayout};Q._group&&(at.group=Q._group),S.traceIs(Q,"pie-like")&&(at.label=N.datum()[0].label);var it=A.triggerHandler(C,"plotly_legendclick",at);if(it!==!1){if(V===1)F._clickTimeout=setTimeout(function(){C._fullLayout&&f(N,C,V)},C._context.doubleClickDelay);else if(V===2){F._clickTimeout&&clearTimeout(F._clickTimeout),C._legendMouseDownTime=0;var q=A.triggerHandler(C,"plotly_legenddoubleclick",at);q!==!1&&f(N,C,V)}}}function b(C,F,N){var V=R(N),K=C.data()[0][0],Q=K.trace,at=S.traceIs(Q,"pie-like"),it=!N._inHover&&F._context.edits.legendText&&!at,q=N._maxNameLength,W,Z;K.groupTitle?(W=K.groupTitle.text,Z=K.groupTitle.font):(Z=N.font,N.entries?W=K.text:(W=at?K.label:Q.name,Q._meta&&(W=E.templateString(W,Q._meta))));var G=E.ensureSingle(C,"text",V+"text");G.attr("text-anchor","start").call(v.font,Z).text(it?P(W,q):W);var et=N.itemwidth+n.itemGap*2;r.positionText(G,et,0),it?G.call(r.makeEditable,{gd:F,text:W}).call(d,C,F,N).on("edit",function(nt){this.text(P(nt,q)).call(d,C,F,N);var X=K.trace._fullInput||{},Y={};if(S.hasTransform(X,"groupby")){var ot=S.getTransformIndices(X,"groupby"),rt=ot[ot.length-1],ht=E.keyedContainer(X,"transforms["+rt+"].styles","target","value.name");ht.set(K.trace._group,nt),Y=ht.constructUpdate()}else Y.name=nt;return X._isShape?S.call("_guiRelayout",F,"shapes["+Q.index+"].name",Y.name):S.call("_guiRestyle",F,Y,Q.index)}):d(G,C,F,N)}function P(C,F){var N=Math.max(4,F);if(C&&C.trim().length>=N/2)return C;C=C||"";for(var V=N-C.length;V>0;V--)C+=" ";return C}function l(C,F,N){var V=F._context.doubleClickDelay,K,Q=1,at=E.ensureSingle(C,"rect",N+"toggle",function(it){F._context.staticPlot||it.style("cursor","pointer").attr("pointer-events","all"),it.call(e.fill,"rgba(0,0,0,0)")});F._context.staticPlot||(at.on("mousedown",function(){K=new Date().getTime(),K-F._legendMouseDownTime<V?Q+=1:(Q=1,F._legendMouseDownTime=K)}),at.on("mouseup",function(){if(!(F._dragged||F._editing)){var it=F._fullLayout[N];new Date().getTime()-F._legendMouseDownTime>V&&(Q=Math.max(Q-1,1)),_(F,it,C,Q,M.event)}}))}function d(C,F,N,V,K){V._inHover&&C.attr("data-notex",!0),r.convertToTspans(C,N,function(){L(F,N,V,K)})}function L(C,F,N,V){var K=C.data()[0][0];if(!N._inHover&&K&&!K.trace.showlegend){C.remove();return}var Q=C.select("g[class*=math-group]"),at=Q.node(),it=R(N);N||(N=F._fullLayout[it]);var q=N.borderwidth,W;V===u?W=N.title.font:K.groupTitle?W=K.groupTitle.font:W=N.font;var Z=W.size*o,G,et;if(at){var nt=v.bBox(at);G=nt.height,et=nt.width,V===u?v.setTranslate(Q,q,q+G*.75):v.setTranslate(Q,0,G*.25)}else{var X="."+it+(V===u?"title":"")+"text",Y=C.select(X),ot=r.lineCount(Y),rt=Y.node();if(G=Z*ot,et=rt?v.bBox(rt).width:0,V===u)N.title.side==="left"&&(et+=n.itemGap*2),r.positionText(Y,q+n.titlePad,q+Z);else{var ht=n.itemGap*2+N.itemwidth;K.groupTitle&&(ht=n.itemGap,et-=N.itemwidth),r.positionText(Y,ht,-Z*((ot-1)/2-.3))}}V===u?(N._titleWidth=et,N._titleHeight=G):(K.lineHeight=Z,K.height=Math.max(G,16)+3,K.width=et)}function w(C){var F=0,N=0,V=C.title.side;return V&&(V.indexOf("left")!==-1&&(F=C._titleWidth),V.indexOf("top")!==-1&&(N=C._titleHeight)),[F,N]}function I(C,F,N,V){var K=C._fullLayout,Q=R(V);V||(V=K[Q]);var at=K._size,it=s.isVertical(V),q=s.isGrouped(V),W=V.entrywidthmode==="fraction",Z=V.borderwidth,G=2*Z,et=n.itemGap,nt=V.itemwidth+et*2,X=2*(Z+et),Y=O(V),ot=V.y<0||V.y===0&&Y==="top",rt=V.y>1||V.y===1&&Y==="bottom",ht=V.tracegroupgap,pt={};V._maxHeight=Math.max(ot||rt?K.height/2:at.h,30);var yt=0;V._width=0,V._height=0;var xt=w(V);if(it)N.each(function(Mt){var It=Mt[0].height;v.setTranslate(this,Z+xt[0],Z+xt[1]+V._height+It/2+et),V._height+=It,V._width=Math.max(V._width,Mt[0].width)}),yt=nt+V._width,V._width+=et+nt+G,V._height+=X,q&&(F.each(function(Mt,It){v.setTranslate(this,0,It*V.tracegroupgap)}),V._height+=(V._lgroupsLength-1)*V.tracegroupgap);else{var Ft=B(V),Et=V.x<0||V.x===0&&Ft==="right",mt=V.x>1||V.x===1&&Ft==="left",gt=rt||ot,wt=K.width/2;V._maxWidth=Math.max(Et?gt&&Ft==="left"?at.l+at.w:wt:mt?gt&&Ft==="right"?at.r+at.w:wt:at.w,2*nt);var Pt=0,Bt=0;N.each(function(Mt){var It=k(Mt,V,nt);Pt=Math.max(Pt,It),Bt+=It}),yt=null;var kt=0;if(q){var jt=0,Ht=0,Vt=0;F.each(function(){var Mt=0,It=0;M.select(this).selectAll("g.traces").each(function(zt){var Tt=k(zt,V,nt),ft=zt[0].height;v.setTranslate(this,xt[0],xt[1]+Z+et+ft/2+It),It+=ft,Mt=Math.max(Mt,Tt),pt[zt[0].trace.legendgroup]=Mt});var Rt=Mt+et;Ht>0&&Rt+Z+Ht>V._maxWidth?(kt=Math.max(kt,Ht),Ht=0,Vt+=jt+ht,jt=It):jt=Math.max(jt,It),v.setTranslate(this,Ht,Vt),Ht+=Rt}),V._width=Math.max(kt,Ht)+Z,V._height=Vt+jt+X}else{var ee=N.size(),te=Bt+G+(ee-1)*et<V._maxWidth,ae=0,le=0,ce=0,pe=0;N.each(function(Mt){var It=Mt[0].height,Rt=k(Mt,V,nt),zt=te?Rt:Pt;W||(zt+=et),zt+Z+le-et>=V._maxWidth&&(kt=Math.max(kt,pe),le=0,ce+=ae,V._height+=ae,ae=0),v.setTranslate(this,xt[0]+Z+le,xt[1]+Z+ce+It/2+et),pe=le+Rt+et,le+=zt,ae=Math.max(ae,It)}),te?(V._width=le+G,V._height=ae+X):(V._width=Math.max(kt,pe)+G,V._height+=ae+X)}}V._width=Math.ceil(Math.max(V._width+xt[0],V._titleWidth+2*(Z+n.titlePad))),V._height=Math.ceil(Math.max(V._height+xt[1],V._titleHeight+2*(Z+n.itemGap))),V._effHeight=Math.min(V._height,V._maxHeight);var we=C._context.edits,ve=we.legendText||we.legendPosition;N.each(function(Mt){var It=M.select(this).select("."+Q+"toggle"),Rt=Mt[0].height,zt=Mt[0].trace.legendgroup,Tt=k(Mt,V,nt);q&&zt!==""&&(Tt=pt[zt]);var ft=ve?nt:yt||Tt;!it&&!W&&(ft+=et/2),v.setRect(It,0,-Rt/2,ft,Rt)})}function z(C,F,N,V){var K=C._fullLayout,Q=K[F],at=B(Q),it=O(Q),q=Q.xref==="paper",W=Q.yref==="paper";C._fullLayout._reservedMargin[F]={};var Z=Q.y<.5?"b":"t",G=Q.x<.5?"l":"r",et={r:K.width-N,l:N+Q._width,b:K.height-V,t:V+Q._effHeight};if(q&&W)return i.autoMargin(C,F,{x:Q.x,y:Q.y,l:Q._width*h[at],r:Q._width*y[at],b:Q._effHeight*y[it],t:Q._effHeight*h[it]});q?C._fullLayout._reservedMargin[F][Z]=et[Z]:W||Q.orientation==="v"?C._fullLayout._reservedMargin[F][G]=et[G]:C._fullLayout._reservedMargin[F][Z]=et[Z]}function B(C){return E.isRightAnchor(C)?"right":E.isCenterAnchor(C)?"center":"left"}function O(C){return E.isBottomAnchor(C)?"bottom":E.isMiddleAnchor(C)?"middle":"top"}function R(C){return C._id||"legend"}},82424:function($,U,t){var M=t(73972),E=t(10130);$.exports=function(i,S,A){var g=S._inHover,v=E.isGrouped(S),e=E.isReversed(S),r={},f=[],n=!1,a={},o=0,h=0,y,p;function x(C,F,N){if(S.visible!==!1&&!(A&&C!==S._id))if(F===""||!E.isGrouped(S)){var V="~~i"+o;f.push(V),r[V]=[N],o++}else f.indexOf(F)===-1?(f.push(F),n=!0,r[F]=[N]):r[F].push(N)}for(y=0;y<i.length;y++){var s=i[y],u=s[0],c=u.trace,T=c.legend,k=c.legendgroup;if(!(!g&&(!c.visible||!c.showlegend)))if(M.traceIs(c,"pie-like"))for(a[k]||(a[k]={}),p=0;p<s.length;p++){var _=s[p].label;a[k][_]||(x(T,k,{label:_,color:s[p].color,i:s[p].i,trace:c,pts:s[p].pts}),a[k][_]=!0,h=Math.max(h,(_||"").length))}else x(T,k,u),h=Math.max(h,(c.name||"").length)}if(!f.length)return[];var b=!n||!v,P=[];for(y=0;y<f.length;y++){var l=r[f[y]];b?P.push(l[0]):P.push(l)}for(b&&(P=[P]),y=0;y<P.length;y++){var d=1/0;for(p=0;p<P[y].length;p++){var L=P[y][p].trace.legendrank;d>L&&(d=L)}P[y][0]._groupMinRank=d,P[y][0]._preGroupSort=y}var w=function(C,F){return C[0]._groupMinRank-F[0]._groupMinRank||C[0]._preGroupSort-F[0]._preGroupSort},I=function(C,F){return C.trace.legendrank-F.trace.legendrank||C._preSort-F._preSort};for(P.forEach(function(C,F){C[0]._preGroupSort=F}),P.sort(w),y=0;y<P.length;y++){P[y].forEach(function(C,F){C._preSort=F}),P[y].sort(I);var z=P[y][0].trace,B=null;for(p=0;p<P[y].length;p++){var O=P[y][p].trace.legendgrouptitle;if(O&&O.text){B=O,g&&(O.font=S._groupTitleFont);break}}if(e&&P[y].reverse(),B){var R=!1;for(p=0;p<P[y].length;p++)if(M.traceIs(P[y][p].trace,"pie-like")){R=!0;break}P[y].unshift({i:-1,groupTitle:B,noClick:R,trace:{showlegend:z.showlegend,legendgroup:z.legendgroup,visible:S.groupclick==="toggleitem"?!0:z.visible}})}for(p=0;p<P[y].length;p++)P[y][p]=[P[y][p]]}return S._lgroupsLength=P.length,S._maxNameLength=h,P}},85167:function($,U,t){var M=t(73972),E=t(71828),i=E.pushUnique,S=!0;$.exports=function(A,g,v){var e=g._fullLayout;if(g._dragged||g._editing)return;var r=e.legend.itemclick,f=e.legend.itemdoubleclick,n=e.legend.groupclick;v===1&&r==="toggle"&&f==="toggleothers"&&S&&g.data&&g._context.showTips&&E.notifier(E._(g,"Double-click on legend to isolate one trace"),"long"),S=!1;var a;if(v===1?a=r:v===2&&(a=f),!a)return;var o=n==="togglegroup",h=e.hiddenlabels?e.hiddenlabels.slice():[],y=A.data()[0][0];if(y.groupTitle&&y.noClick)return;var p=g._fullData,x=(e.shapes||[]).filter(function(wt){return wt.showlegend}),s=p.concat(x),u=y.trace;u._isShape&&(u=u._fullInput);var c=u.legendgroup,T,k,_,b,P,l,d={},L=[],w=[],I=[];function z(wt,Pt){var Bt=L.indexOf(wt),kt=d.visible;return kt||(kt=d.visible=[]),L.indexOf(wt)===-1&&(L.push(wt),Bt=L.length-1),kt[Bt]=Pt,Bt}var B=(e.shapes||[]).map(function(wt){return wt._input}),O=!1;function R(wt,Pt){B[wt].visible=Pt,O=!0}function C(wt,Pt){if(!(y.groupTitle&&!o)){var Bt=wt._fullInput||wt,kt=Bt._isShape,jt=Bt.index;if(jt===void 0&&(jt=Bt._index),M.hasTransform(Bt,"groupby")){var Ht=w[jt];if(!Ht){var Vt=M.getTransformIndices(Bt,"groupby"),ee=Vt[Vt.length-1];Ht=E.keyedContainer(Bt,"transforms["+ee+"].styles","target","value.visible"),w[jt]=Ht}var te=Ht.get(wt._group);te===void 0&&(te=!0),te!==!1&&Ht.set(wt._group,Pt),I[jt]=z(jt,Bt.visible!==!1)}else{var ae=Bt.visible===!1?!1:Pt;kt?R(jt,ae):z(jt,ae)}}}var F=u.legend,N=u._fullInput,V=N&&N._isShape;if(!V&&M.traceIs(u,"pie-like")){var K=y.label,Q=h.indexOf(K);if(a==="toggle")Q===-1?h.push(K):h.splice(Q,1);else if(a==="toggleothers"){var at=Q!==-1,it=[];for(T=0;T<g.calcdata.length;T++){var q=g.calcdata[T];for(k=0;k<q.length;k++){var W=q[k],Z=W.label;F===q[0].trace.legend&&K!==Z&&(h.indexOf(Z)===-1&&(at=!0),i(h,Z),it.push(Z))}}if(!at)for(var G=0;G<it.length;G++){var et=h.indexOf(it[G]);et!==-1&&h.splice(et,1)}}M.call("_guiRelayout",g,"hiddenlabels",h)}else{var nt=c&&c.length,X=[],Y;if(nt)for(T=0;T<s.length;T++)Y=s[T],Y.visible&&Y.legendgroup===c&&X.push(T);if(a==="toggle"){var ot;switch(u.visible){case!0:ot="legendonly";break;case!1:ot=!1;break;case"legendonly":ot=!0;break}if(nt)if(o)for(T=0;T<s.length;T++){var rt=s[T];rt.visible!==!1&&rt.legendgroup===c&&C(rt,ot)}else C(u,ot);else C(u,ot)}else if(a==="toggleothers"){var ht,pt,yt,xt,Ft,Et=!0;for(T=0;T<s.length;T++)if(Ft=s[T],ht=Ft===u,yt=Ft.showlegend!==!0,!(ht||yt)&&(pt=nt&&Ft.legendgroup===c,!pt&&Ft.legend===F&&Ft.visible===!0&&!M.traceIs(Ft,"notLegendIsolatable"))){Et=!1;break}for(T=0;T<s.length;T++)if(Ft=s[T],!(Ft.visible===!1||Ft.legend!==F)&&!M.traceIs(Ft,"notLegendIsolatable"))switch(u.visible){case"legendonly":C(Ft,!0);break;case!0:xt=Et?!0:"legendonly",ht=Ft===u,yt=Ft.showlegend!==!0&&!Ft.legendgroup,pt=ht||nt&&Ft.legendgroup===c,C(Ft,pt||yt?!0:xt);break}}for(T=0;T<w.length;T++)if(_=w[T],!!_){var mt=_.constructUpdate(),gt=Object.keys(mt);for(k=0;k<gt.length;k++)b=gt[k],l=d[b]=d[b]||[],l[I[T]]=mt[b]}for(P=Object.keys(d),T=0;T<P.length;T++)for(b=P[T],k=0;k<L.length;k++)d[b].hasOwnProperty(k)||(d[b][k]=void 0);O?M.call("_guiUpdate",g,d,{shapes:B},L):M.call("_guiRestyle",g,d,L)}}},10130:function($,U){U.isGrouped=function(t){return(t.traceorder||"").indexOf("grouped")!==-1},U.isVertical=function(t){return t.orientation!=="h"},U.isReversed=function(t){return(t.traceorder||"").indexOf("reversed")!==-1}},2199:function($,U,t){$.exports={moduleType:"component",name:"legend",layoutAttributes:t(33030),supplyLayoutDefaults:t(99017),draw:t(43969),style:t(53630)}},53630:function($,U,t){var M=t(39898),E=t(73972),i=t(71828),S=i.strTranslate,A=t(91424),g=t(7901),v=t(52075).extractOpts,e=t(34098),r=t(63463),f=t(53581).castOption,n=t(14928),a=12,o=5,h=2,y=10,p=5;$.exports=function(c,T,k){var _=T._fullLayout;k||(k=_.legend);var b=k.itemsizing==="constant",P=k.itemwidth,l=(P+n.itemGap*2)/2,d=S(l,0),L=function(it,q,W,Z){var G;if(it+1)G=it;else if(q&&q.width>0)G=q.width;else return 0;return b?Z:Math.min(G,W)};c.each(function(it){var q=M.select(this),W=i.ensureSingle(q,"g","layers");W.style("opacity",it[0].trace.opacity);var Z=k.valign,G=it[0].lineHeight,et=it[0].height;if(Z==="middle"||!G||!et)W.attr("transform",null);else{var nt={top:1,bottom:-1}[Z],X=nt*(.5*(G-et+3));W.attr("transform",S(0,X))}var Y=W.selectAll("g.legendfill").data([it]);Y.enter().append("g").classed("legendfill",!0);var ot=W.selectAll("g.legendlines").data([it]);ot.enter().append("g").classed("legendlines",!0);var rt=W.selectAll("g.legendsymbols").data([it]);rt.enter().append("g").classed("legendsymbols",!0),rt.selectAll("g.legendpoints").data([it]).enter().append("g").classed("legendpoints",!0)}).each(at).each(z).each(O).each(B).each(C).each(K).each(V).each(w).each(I).each(F).each(N);function w(it){var q=s(it),W=q.showFill,Z=q.showLine,G=q.showGradientLine,et=q.showGradientFill,nt=q.anyFill,X=q.anyLine,Y=it[0],ot=Y.trace,rt,ht,pt=v(ot),yt=pt.colorscale,xt=pt.reversescale,Ft=function(kt){if(kt.size())if(W)A.fillGroupStyle(kt,T);else{var jt="legendfill-"+ot.uid;A.gradient(kt,T,jt,x(xt),yt,"fill")}},Et=function(kt){if(kt.size()){var jt="legendline-"+ot.uid;A.lineGroupStyle(kt),A.gradient(kt,T,jt,x(xt),yt,"stroke")}},mt=e.hasMarkers(ot)||!nt?"M5,0":X?"M5,-2":"M5,-3",gt=M.select(this),wt=gt.select(".legendfill").selectAll("path").data(W||et?[it]:[]);if(wt.enter().append("path").classed("js-fill",!0),wt.exit().remove(),wt.attr("d",mt+"h"+P+"v6h-"+P+"z").call(Ft),Z||G){var Pt=L(void 0,ot.line,y,o);ht=i.minExtend(ot,{line:{width:Pt}}),rt=[i.minExtend(Y,{trace:ht})]}var Bt=gt.select(".legendlines").selectAll("path").data(Z||G?[rt]:[]);Bt.enter().append("path").classed("js-line",!0),Bt.exit().remove(),Bt.attr("d",mt+(G?"l"+P+",0.0001":"h"+P)).call(Z?A.lineGroupStyle:Et)}function I(it){var q=s(it),W=q.anyFill,Z=q.anyLine,G=q.showLine,et=q.showMarker,nt=it[0],X=nt.trace,Y=!et&&!Z&&!W&&e.hasText(X),ot,rt;function ht(wt,Pt,Bt,kt){var jt=i.nestedProperty(X,wt).get(),Ht=i.isArrayOrTypedArray(jt)&&Pt?Pt(jt):jt;if(b&&Ht&&kt!==void 0&&(Ht=kt),Bt){if(Ht<Bt[0])return Bt[0];if(Ht>Bt[1])return Bt[1]}return Ht}function pt(wt){return nt._distinct&&nt.index&&wt[nt.index]?wt[nt.index]:wt[0]}if(et||Y||G){var yt={},xt={};if(et){yt.mc=ht("marker.color",pt),yt.mx=ht("marker.symbol",pt),yt.mo=ht("marker.opacity",i.mean,[.2,1]),yt.mlc=ht("marker.line.color",pt),yt.mlw=ht("marker.line.width",i.mean,[0,5],h),xt.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var Ft=ht("marker.size",i.mean,[2,16],a);yt.ms=Ft,xt.marker.size=Ft}G&&(xt.line={width:ht("line.width",pt,[0,10],o)}),Y&&(yt.tx="Aa",yt.tp=ht("textposition",pt),yt.ts=10,yt.tc=ht("textfont.color",pt),yt.tf=ht("textfont.family",pt)),ot=[i.minExtend(nt,yt)],rt=i.minExtend(X,xt),rt.selectedpoints=null,rt.texttemplate=null}var Et=M.select(this).select("g.legendpoints"),mt=Et.selectAll("path.scatterpts").data(et?ot:[]);mt.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",d),mt.exit().remove(),mt.call(A.pointStyle,rt,T),et&&(ot[0].mrc=3);var gt=Et.selectAll("g.pointtext").data(Y?ot:[]);gt.enter().append("g").classed("pointtext",!0).append("text").attr("transform",d),gt.exit().remove(),gt.selectAll("text").call(A.textPointStyle,rt,T)}function z(it){var q=it[0].trace,W=q.type==="waterfall";if(it[0]._distinct&&W){var Z=it[0].trace[it[0].dir].marker;return it[0].mc=Z.color,it[0].mlw=Z.line.width,it[0].mlc=Z.line.color,R(it,this,"waterfall")}var G=[];q.visible&&W&&(G=it[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var et=M.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(G);et.enter().append("path").classed("legendwaterfall",!0).attr("transform",d).style("stroke-miterlimit",1),et.exit().remove(),et.each(function(nt){var X=M.select(this),Y=q[nt[0]].marker,ot=L(void 0,Y.line,p,h);X.attr("d",nt[1]).style("stroke-width",ot+"px").call(g.fill,Y.color),ot&&X.call(g.stroke,Y.line.color)})}function B(it){R(it,this)}function O(it){R(it,this,"funnel")}function R(it,q,W){var Z=it[0].trace,G=Z.marker||{},et=G.line||{},nt=W?Z.visible&&Z.type===W:E.traceIs(Z,"bar"),X=M.select(q).select("g.legendpoints").selectAll("path.legend"+W).data(nt?[it]:[]);X.enter().append("path").classed("legend"+W,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",d),X.exit().remove(),X.each(function(Y){var ot=M.select(this),rt=Y[0],ht=L(rt.mlw,G.line,p,h);ot.style("stroke-width",ht+"px");var pt=rt.mcc;if(!k._inHover&&"mc"in rt){var yt=v(G),xt=yt.mid;xt===void 0&&(xt=(yt.max+yt.min)/2),pt=A.tryColorscale(G,"")(xt)}var Ft=pt||rt.mc||G.color,Et=G.pattern,mt=Et&&A.getPatternAttr(Et.shape,0,"");if(mt){var gt=A.getPatternAttr(Et.bgcolor,0,null),wt=A.getPatternAttr(Et.fgcolor,0,null),Pt=Et.fgopacity,Bt=u(Et.size,8,10),kt=u(Et.solidity,.5,1),jt="legend-"+Z.uid;ot.call(A.pattern,"legend",T,jt,mt,Bt,kt,pt,Et.fillmode,gt,wt,Pt)}else ot.call(g.fill,Ft);ht&&g.stroke(ot,rt.mlc||et.color)})}function C(it){var q=it[0].trace,W=M.select(this).select("g.legendpoints").selectAll("path.legendbox").data(q.visible&&E.traceIs(q,"box-violin")?[it]:[]);W.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",d),W.exit().remove(),W.each(function(){var Z=M.select(this);if((q.boxpoints==="all"||q.points==="all")&&g.opacity(q.fillcolor)===0&&g.opacity((q.line||{}).color)===0){var G=i.minExtend(q,{marker:{size:b?a:i.constrain(q.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});W.call(A.pointStyle,G,T)}else{var et=L(void 0,q.line,p,h);Z.style("stroke-width",et+"px").call(g.fill,q.fillcolor),et&&g.stroke(Z,q.line.color)}})}function F(it){var q=it[0].trace,W=M.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(q.visible&&q.type==="candlestick"?[it,it]:[]);W.enter().append("path").classed("legendcandle",!0).attr("d",function(Z,G){return G?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",d).style("stroke-miterlimit",1),W.exit().remove(),W.each(function(Z,G){var et=M.select(this),nt=q[G?"increasing":"decreasing"],X=L(void 0,nt.line,p,h);et.style("stroke-width",X+"px").call(g.fill,nt.fillcolor),X&&g.stroke(et,nt.line.color)})}function N(it){var q=it[0].trace,W=M.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(q.visible&&q.type==="ohlc"?[it,it]:[]);W.enter().append("path").classed("legendohlc",!0).attr("d",function(Z,G){return G?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",d).style("stroke-miterlimit",1),W.exit().remove(),W.each(function(Z,G){var et=M.select(this),nt=q[G?"increasing":"decreasing"],X=L(void 0,nt.line,p,h);et.style("fill","none").call(A.dashLine,nt.line.dash,X),X&&g.stroke(et,nt.line.color)})}function V(it){Q(it,this,"pie")}function K(it){Q(it,this,"funnelarea")}function Q(it,q,W){var Z=it[0],G=Z.trace,et=W?G.visible&&G.type===W:E.traceIs(G,W),nt=M.select(q).select("g.legendpoints").selectAll("path.legend"+W).data(et?[it]:[]);if(nt.enter().append("path").classed("legend"+W,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",d),nt.exit().remove(),nt.size()){var X=G.marker||{},Y=L(f(X.line.width,Z.pts),X.line,p,h),ot="pieLike",rt=i.minExtend(G,{marker:{line:{width:Y}}},ot),ht=i.minExtend(Z,{trace:rt},ot);r(nt,ht,rt,T)}}function at(it){var q=it[0].trace,W,Z=[];if(q.visible)switch(q.type){case"histogram2d":case"heatmap":Z=[["M-15,-2V4H15V-2Z"]],W=!0;break;case"choropleth":case"choroplethmapbox":Z=[["M-6,-6V6H6V-6Z"]],W=!0;break;case"densitymapbox":Z=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],W="radial";break;case"cone":Z=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],W=!1;break;case"streamtube":Z=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],W=!1;break;case"surface":Z=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],W=!0;break;case"mesh3d":Z=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],W=!1;break;case"volume":Z=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],W=!0;break;case"isosurface":Z=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],W=!1;break}var G=M.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(Z);G.enter().append("path").classed("legend3dandfriends",!0).attr("transform",d).style("stroke-miterlimit",1),G.exit().remove(),G.each(function(et,nt){var X=M.select(this),Y=v(q),ot=Y.colorscale,rt=Y.reversescale,ht=function(Ft){if(Ft.size()){var Et="legendfill-"+q.uid;A.gradient(Ft,T,Et,x(rt,W==="radial"),ot,"fill")}},pt;if(ot){if(!W){var yt=ot.length;pt=nt===0?ot[rt?yt-1:0][1]:nt===1?ot[rt?0:yt-1][1]:ot[Math.floor((yt-1)/2)][1]}}else{var xt=q.vertexcolor||q.facecolor||q.color;pt=i.isArrayOrTypedArray(xt)?xt[nt]||xt[0]:xt}X.attr("d",et[0]),pt?X.call(g.fill,pt):X.call(ht)})}};function x(c,T){var k=T?"radial":"horizontal";return k+(c?"":"reversed")}function s(c){var T=c[0].trace,k=T.contours,_=e.hasLines(T),b=e.hasMarkers(T),P=T.visible&&T.fill&&T.fill!=="none",l=!1,d=!1;if(k){var L=k.coloring;L==="lines"?l=!0:_=L==="none"||L==="heatmap"||k.showlines,k.type==="constraint"?P=k._operation!=="=":(L==="fill"||L==="heatmap")&&(d=!0)}return{showMarker:b,showLine:_,showFill:P,showGradientLine:l,showGradientFill:d,anyLine:_||l,anyFill:P||d}}function u(c,T,k){return c&&i.isArrayOrTypedArray(c)?T:c>k?k:c}},42068:function($,U,t){t(93348),$.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},26023:function($,U,t){var M=t(73972),E=t(74875),i=t(41675),S=t(24255),A=t(34031).eraseActiveShape,g=t(71828),v=g._,e=$.exports={};e.toImage={name:"toImage",title:function(c){var T=c._context.toImageButtonOptions||{},k=T.format||"png";return k==="png"?v(c,"Download plot as a png"):v(c,"Download plot")},icon:S.camera,click:function(c){var T=c._context.toImageButtonOptions,k={format:T.format||"png"};g.notifier(v(c,"Taking snapshot - this may take a few seconds"),"long"),k.format!=="svg"&&g.isIE()&&(g.notifier(v(c,"IE only supports svg.  Changing format to svg."),"long"),k.format="svg"),["filename","width","height","scale"].forEach(function(_){_ in T&&(k[_]=T[_])}),M.call("downloadImage",c,k).then(function(_){g.notifier(v(c,"Snapshot succeeded")+" - "+_,"long")}).catch(function(){g.notifier(v(c,"Sorry, there was a problem downloading your snapshot!"),"long")})}},e.sendDataToCloud={name:"sendDataToCloud",title:function(c){return v(c,"Edit in Chart Studio")},icon:S.disk,click:function(c){E.sendDataToCloud(c)}},e.editInChartStudio={name:"editInChartStudio",title:function(c){return v(c,"Edit in Chart Studio")},icon:S.pencil,click:function(c){E.sendDataToCloud(c)}},e.zoom2d={name:"zoom2d",_cat:"zoom",title:function(c){return v(c,"Zoom")},attr:"dragmode",val:"zoom",icon:S.zoombox,click:r},e.pan2d={name:"pan2d",_cat:"pan",title:function(c){return v(c,"Pan")},attr:"dragmode",val:"pan",icon:S.pan,click:r},e.select2d={name:"select2d",_cat:"select",title:function(c){return v(c,"Box Select")},attr:"dragmode",val:"select",icon:S.selectbox,click:r},e.lasso2d={name:"lasso2d",_cat:"lasso",title:function(c){return v(c,"Lasso Select")},attr:"dragmode",val:"lasso",icon:S.lasso,click:r},e.drawclosedpath={name:"drawclosedpath",title:function(c){return v(c,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:S.drawclosedpath,click:r},e.drawopenpath={name:"drawopenpath",title:function(c){return v(c,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:S.drawopenpath,click:r},e.drawline={name:"drawline",title:function(c){return v(c,"Draw line")},attr:"dragmode",val:"drawline",icon:S.drawline,click:r},e.drawrect={name:"drawrect",title:function(c){return v(c,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:S.drawrect,click:r},e.drawcircle={name:"drawcircle",title:function(c){return v(c,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:S.drawcircle,click:r},e.eraseshape={name:"eraseshape",title:function(c){return v(c,"Erase active shape")},icon:S.eraseshape,click:A},e.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(c){return v(c,"Zoom in")},attr:"zoom",val:"in",icon:S.zoom_plus,click:r},e.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(c){return v(c,"Zoom out")},attr:"zoom",val:"out",icon:S.zoom_minus,click:r},e.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(c){return v(c,"Autoscale")},attr:"zoom",val:"auto",icon:S.autoscale,click:r},e.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(c){return v(c,"Reset axes")},attr:"zoom",val:"reset",icon:S.home,click:r},e.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(c){return v(c,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:S.tooltip_basic,gravity:"ne",click:r},e.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(c){return v(c,"Compare data on hover")},attr:"hovermode",val:function(c){return c._fullLayout._isHoriz?"y":"x"},icon:S.tooltip_compare,gravity:"ne",click:r};function r(c,T){var k=T.currentTarget,_=k.getAttribute("data-attr"),b=k.getAttribute("data-val")||!0,P=c._fullLayout,l={},d=i.list(c,null,!0),L=P._cartesianSpikesEnabled,w,I;if(_==="zoom"){var z=b==="in"?.5:2,B=(1+z)/2,O=(1-z)/2,R;for(I=0;I<d.length;I++)if(w=d[I],!w.fixedrange)if(R=w._name,b==="auto")l[R+".autorange"]=!0;else if(b==="reset"){if(w._rangeInitial===void 0)l[R+".autorange"]=!0;else{var C=w._rangeInitial.slice();l[R+".range[0]"]=C[0],l[R+".range[1]"]=C[1]}w._showSpikeInitial!==void 0&&(l[R+".showspikes"]=w._showSpikeInitial,L==="on"&&!w._showSpikeInitial&&(L="off"))}else{var F=[w.r2l(w.range[0]),w.r2l(w.range[1])],N=[B*F[0]+O*F[1],B*F[1]+O*F[0]];l[R+".range[0]"]=w.l2r(N[0]),l[R+".range[1]"]=w.l2r(N[1])}}else _==="hovermode"&&(b==="x"||b==="y")&&(b=P._isHoriz?"y":"x",k.setAttribute("data-val",b)),l[_]=b;P._cartesianSpikesEnabled=L,M.call("_guiRelayout",c,l)}e.zoom3d={name:"zoom3d",_cat:"zoom",title:function(c){return v(c,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:S.zoombox,click:f},e.pan3d={name:"pan3d",_cat:"pan",title:function(c){return v(c,"Pan")},attr:"scene.dragmode",val:"pan",icon:S.pan,click:f},e.orbitRotation={name:"orbitRotation",title:function(c){return v(c,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:S["3d_rotate"],click:f},e.tableRotation={name:"tableRotation",title:function(c){return v(c,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:S["z-axis"],click:f};function f(c,T){for(var k=T.currentTarget,_=k.getAttribute("data-attr"),b=k.getAttribute("data-val")||!0,P=c._fullLayout._subplots.gl3d||[],l={},d=_.split("."),L=0;L<P.length;L++)l[P[L]+"."+d[1]]=b;var w=b==="pan"?b:"zoom";l.dragmode=w,M.call("_guiRelayout",c,l)}e.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(c){return v(c,"Reset camera to default")},attr:"resetDefault",icon:S.home,click:n},e.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(c){return v(c,"Reset camera to last save")},attr:"resetLastSave",icon:S.movie,click:n};function n(c,T){for(var k=T.currentTarget,_=k.getAttribute("data-attr"),b=_==="resetLastSave",P=_==="resetDefault",l=c._fullLayout,d=l._subplots.gl3d||[],L={},w=0;w<d.length;w++){var I=d[w],z=I+".camera",B=I+".aspectratio",O=I+".aspectmode",R=l[I]._scene,C;b?(L[z+".up"]=R.viewInitial.up,L[z+".eye"]=R.viewInitial.eye,L[z+".center"]=R.viewInitial.center,C=!0):P&&(L[z+".up"]=null,L[z+".eye"]=null,L[z+".center"]=null,C=!0),C&&(L[B+".x"]=R.viewInitial.aspectratio.x,L[B+".y"]=R.viewInitial.aspectratio.y,L[B+".z"]=R.viewInitial.aspectratio.z,L[O]=R.viewInitial.aspectmode)}M.call("_guiRelayout",c,L)}e.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(c){return v(c,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:S.tooltip_basic,gravity:"ne",click:o};function a(c,T){var k=T.currentTarget,_=k._previousVal,b=c._fullLayout,P=b._subplots.gl3d||[],l=["xaxis","yaxis","zaxis"],d={},L={};if(_)L=_,k._previousVal=null;else{for(var w=0;w<P.length;w++){var I=P[w],z=b[I],B=I+".hovermode";d[B]=z.hovermode,L[B]=!1;for(var O=0;O<3;O++){var R=l[O],C=I+"."+R+".showspikes";L[C]=!1,d[C]=z[R].showspikes}}k._previousVal=d}return L}function o(c,T){var k=a(c,T);M.call("_guiRelayout",c,k)}e.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(c){return v(c,"Zoom in")},attr:"zoom",val:"in",icon:S.zoom_plus,click:h},e.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(c){return v(c,"Zoom out")},attr:"zoom",val:"out",icon:S.zoom_minus,click:h},e.resetGeo={name:"resetGeo",_cat:"reset",title:function(c){return v(c,"Reset")},attr:"reset",val:null,icon:S.autoscale,click:h},e.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(c){return v(c,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:S.tooltip_basic,gravity:"ne",click:p};function h(c,T){for(var k=T.currentTarget,_=k.getAttribute("data-attr"),b=k.getAttribute("data-val")||!0,P=c._fullLayout,l=P._subplots.geo||[],d=0;d<l.length;d++){var L=l[d],w=P[L];if(_==="zoom"){var I=w.projection.scale,z=b==="in"?2*I:.5*I;M.call("_guiRelayout",c,L+".projection.scale",z)}}_==="reset"&&u(c,"geo")}e.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(c){return v(c,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:S.tooltip_basic,gravity:"ne",click:p},e.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(c){return v(c,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:S.tooltip_basic,gravity:"ne",click:p};function y(c){var T=c._fullLayout;return T.hovermode?!1:T._has("cartesian")?T._isHoriz?"y":"x":"closest"}function p(c){var T=y(c);M.call("_guiRelayout",c,"hovermode",T)}e.resetViewSankey={name:"resetSankeyGroup",title:function(c){return v(c,"Reset view")},icon:S.home,click:function(c){for(var T={"node.groups":[],"node.x":[],"node.y":[]},k=0;k<c._fullData.length;k++){var _=c._fullData[k]._viewInitial;T["node.groups"].push(_.node.groups.slice()),T["node.x"].push(_.node.x.slice()),T["node.y"].push(_.node.y.slice())}M.call("restyle",c,T)}},e.toggleHover={name:"toggleHover",title:function(c){return v(c,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:S.tooltip_basic,gravity:"ne",click:function(c,T){var k=a(c,T);k.hovermode=y(c),M.call("_guiRelayout",c,k)}},e.resetViews={name:"resetViews",title:function(c){return v(c,"Reset views")},icon:S.home,click:function(c,T){var k=T.currentTarget;k.setAttribute("data-attr","zoom"),k.setAttribute("data-val","reset"),r(c,T),k.setAttribute("data-attr","resetLastSave"),n(c,T),u(c,"geo"),u(c,"mapbox")}},e.toggleSpikelines={name:"toggleSpikelines",title:function(c){return v(c,"Toggle Spike Lines")},icon:S.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(c){var T=c._fullLayout,k=T._cartesianSpikesEnabled;T._cartesianSpikesEnabled=k==="on"?"off":"on",M.call("_guiRelayout",c,x(c))}};function x(c){for(var T=c._fullLayout,k=T._cartesianSpikesEnabled==="on",_=i.list(c,null,!0),b={},P=0;P<_.length;P++){var l=_[P];b[l._name+".showspikes"]=k?!0:l._showSpikeInitial}return b}e.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(c){return v(c,"Reset view")},attr:"reset",icon:S.home,click:function(c){u(c,"mapbox")}},e.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(c){return v(c,"Zoom in")},attr:"zoom",val:"in",icon:S.zoom_plus,click:s},e.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(c){return v(c,"Zoom out")},attr:"zoom",val:"out",icon:S.zoom_minus,click:s};function s(c,T){for(var k=T.currentTarget,_=k.getAttribute("data-val"),b=c._fullLayout,P=b._subplots.mapbox||[],l=1.05,d={},L=0;L<P.length;L++){var w=P[L],I=b[w].zoom,z=_==="in"?l*I:I/l;d[w+".zoom"]=z}M.call("_guiRelayout",c,d)}function u(c,T){for(var k=c._fullLayout,_=k._subplots[T]||[],b={},P=0;P<_.length;P++)for(var l=_[P],d=k[l]._subplot,L=d.viewInitial,w=Object.keys(L),I=0;I<w.length;I++){var z=w[I];b[l+"."+z]=L[z]}M.call("_guiRelayout",c,b)}},93348:function($,U,t){var M=t(26023),E=Object.keys(M),i=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],S=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(i),A=[],g=function(v){if(S.indexOf(v._cat||v.name)===-1){var e=v.name,r=(v._cat||v.name).toLowerCase();A.indexOf(e)===-1&&A.push(e),A.indexOf(r)===-1&&A.push(r)}};E.forEach(function(v){g(M[v])}),A.sort(),$.exports={DRAW_MODES:i,backButtons:S,foreButtons:A}},35750:function($,U,t){var M=t(71828),E=t(7901),i=t(44467),S=t(42068);$.exports=function(A,g){var v=A.modebar||{},e=i.newContainer(g,"modebar");function r(n,a){return M.coerce(v,e,S,n,a)}r("orientation"),r("bgcolor",E.addOpacity(g.paper_bgcolor,.5));var f=E.contrast(E.rgb(g.modebar.bgcolor));r("color",E.addOpacity(f,.3)),r("activecolor",E.addOpacity(f,.7)),r("uirevision",g.uirevision),r("add"),r("remove")}},64168:function($,U,t){$.exports={moduleType:"component",name:"modebar",layoutAttributes:t(42068),supplyLayoutDefaults:t(35750),manage:t(14192)}},14192:function($,U,t){var M=t(41675),E=t(34098),i=t(73972),S=t(23469).isUnifiedHover,A=t(37676),g=t(26023),v=t(93348).DRAW_MODES,e=t(71828).extendDeep;$.exports=function(y){var p=y._fullLayout,x=y._context,s=p._modeBar;if(!x.displayModeBar&&!x.watermark){s&&(s.destroy(),delete p._modeBar);return}if(!Array.isArray(x.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(x.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var u=x.modeBarButtons,c;Array.isArray(u)&&u.length?c=h(u):!x.displayModeBar&&x.watermark?c=[]:c=r(y),s?s.update(y,c):p._modeBar=A(y,c)};function r(y){var p=y._fullLayout,x=y._fullData,s=y._context;function u(X,Y){if(typeof Y=="string"){if(Y.toLowerCase()===X.toLowerCase())return!0}else{var ot=Y.name,rt=Y._cat||Y.name;if(ot===X||rt===X.toLowerCase())return!0}return!1}var c=p.modebar.add;typeof c=="string"&&(c=[c]);var T=p.modebar.remove;typeof T=="string"&&(T=[T]);var k=s.modeBarButtonsToAdd.concat(c.filter(function(X){for(var Y=0;Y<s.modeBarButtonsToRemove.length;Y++)if(u(X,s.modeBarButtonsToRemove[Y]))return!1;return!0})),_=s.modeBarButtonsToRemove.concat(T.filter(function(X){for(var Y=0;Y<s.modeBarButtonsToAdd.length;Y++)if(u(X,s.modeBarButtonsToAdd[Y]))return!1;return!0})),b=p._has("cartesian"),P=p._has("gl3d"),l=p._has("geo"),d=p._has("pie"),L=p._has("funnelarea"),w=p._has("gl2d"),I=p._has("ternary"),z=p._has("mapbox"),B=p._has("polar"),O=p._has("smith"),R=p._has("sankey"),C=f(p),F=S(p.hovermode),N=[];function V(X){if(X.length){for(var Y=[],ot=0;ot<X.length;ot++){for(var rt=X[ot],ht=g[rt],pt=ht.name.toLowerCase(),yt=(ht._cat||ht.name).toLowerCase(),xt=!1,Ft=0;Ft<_.length;Ft++){var Et=_[Ft].toLowerCase();if(Et===pt||Et===yt){xt=!0;break}}xt||Y.push(g[rt])}N.push(Y)}}var K=["toImage"];s.showEditInChartStudio?K.push("editInChartStudio"):s.showSendToCloud&&K.push("sendDataToCloud"),V(K);var Q=[],at=[],it=[],q=[];(b||w||d||L||I)+l+P+z+B+O>1?(at=["toggleHover"],it=["resetViews"]):l?(Q=["zoomInGeo","zoomOutGeo"],at=["hoverClosestGeo"],it=["resetGeo"]):P?(at=["hoverClosest3d"],it=["resetCameraDefault3d","resetCameraLastSave3d"]):z?(Q=["zoomInMapbox","zoomOutMapbox"],at=["toggleHover"],it=["resetViewMapbox"]):w?at=["hoverClosestGl2d"]:d?at=["hoverClosestPie"]:R?(at=["hoverClosestCartesian","hoverCompareCartesian"],it=["resetViewSankey"]):at=["toggleHover"],b&&(at=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(a(x)||F)&&(at=[]),(b||w)&&!C&&(Q=["zoomIn2d","zoomOut2d","autoScale2d"],it[0]!=="resetViews"&&(it=["resetScale2d"])),P?q=["zoom3d","pan3d","orbitRotation","tableRotation"]:(b||w)&&!C||I?q=["zoom2d","pan2d"]:z||l?q=["pan2d"]:B&&(q=["zoom2d"]),n(x)&&q.push("select2d","lasso2d");var W=[],Z=function(X){W.indexOf(X)===-1&&at.indexOf(X)!==-1&&W.push(X)};if(Array.isArray(k)){for(var G=[],et=0;et<k.length;et++){var nt=k[et];typeof nt=="string"?(nt=nt.toLowerCase(),v.indexOf(nt)!==-1?(p._has("mapbox")||p._has("cartesian"))&&q.push(nt):nt==="togglespikelines"?Z("toggleSpikelines"):nt==="togglehover"?Z("toggleHover"):nt==="hovercompare"?Z("hoverCompareCartesian"):nt==="hoverclosest"?(Z("hoverClosestCartesian"),Z("hoverClosestGeo"),Z("hoverClosest3d"),Z("hoverClosestGl2d"),Z("hoverClosestPie")):nt==="v1hovermode"&&(Z("toggleHover"),Z("hoverClosestCartesian"),Z("hoverCompareCartesian"),Z("hoverClosestGeo"),Z("hoverClosest3d"),Z("hoverClosestGl2d"),Z("hoverClosestPie"))):G.push(nt)}k=G}return V(q),V(Q.concat(it)),V(W),o(N,k)}function f(y){for(var p=M.list({_fullLayout:y},null,!0),x=0;x<p.length;x++)if(!p[x].fixedrange)return!1;return!0}function n(y){for(var p=!1,x=0;x<y.length&&!p;x++){var s=y[x];!s._module||!s._module.selectPoints||(i.traceIs(s,"scatter-like")?(E.hasMarkers(s)||E.hasText(s))&&(p=!0):i.traceIs(s,"box-violin")?(s.boxpoints==="all"||s.points==="all")&&(p=!0):p=!0)}return p}function a(y){for(var p=0;p<y.length;p++)if(!i.traceIs(y[p],"noHover"))return!1;return!0}function o(y,p){if(p.length)if(Array.isArray(p[0]))for(var x=0;x<p.length;x++)y.push(p[x]);else y.push(p);return y}function h(y){for(var p=e([],y),x=0;x<p.length;x++)for(var s=p[x],u=0;u<s.length;u++){var c=s[u];if(typeof c=="string")if(g[c]!==void 0)p[x][u]=g[c];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return p}},37676:function($,U,t){var M=t(39898),E=t(92770),i=t(71828),S=t(24255),A=t(11506).version,g=new DOMParser;function v(n){this.container=n.container,this.element=document.createElement("div"),this.update(n.graphInfo,n.buttons),this.container.appendChild(this.element)}var e=v.prototype;e.update=function(n,a){this.graphInfo=n;var o=this.graphInfo._context,h=this.graphInfo._fullLayout,y="modebar-"+h._uid;this.element.setAttribute("id",y),this._uid=y,this.element.className="modebar",o.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),h.modebar.orientation==="v"&&(this.element.className+=" vertical",a=a.reverse());var p=h.modebar,x=o.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";i.deleteRelatedStyleRule(y),i.addRelatedStyleRule(y,x+"#"+y+" .modebar-group","background-color: "+p.bgcolor),i.addRelatedStyleRule(y,"#"+y+" .modebar-btn .icon path","fill: "+p.color),i.addRelatedStyleRule(y,"#"+y+" .modebar-btn:hover .icon path","fill: "+p.activecolor),i.addRelatedStyleRule(y,"#"+y+" .modebar-btn.active .icon path","fill: "+p.activecolor);var s=!this.hasButtons(a),u=this.hasLogo!==o.displaylogo,c=this.locale!==o.locale;if(this.locale=o.locale,(s||u||c)&&(this.removeAllButtons(),this.updateButtons(a),o.watermark||o.displaylogo)){var T=this.getLogo();o.watermark&&(T.className=T.className+" watermark"),h.modebar.orientation==="v"?this.element.insertBefore(T,this.element.childNodes[0]):this.element.appendChild(T),this.hasLogo=!0}this.updateActiveButton()},e.updateButtons=function(n){var a=this;this.buttons=n,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(o){var h=a.createGroup();o.forEach(function(y){var p=y.name;if(!p)throw new Error("must provide button 'name' in button config");if(a.buttonsNames.indexOf(p)!==-1)throw new Error("button name '"+p+"' is taken");a.buttonsNames.push(p);var x=a.createButton(y);a.buttonElements.push(x),h.appendChild(x)}),a.element.appendChild(h)})},e.createGroup=function(){var n=document.createElement("div");return n.className="modebar-group",n},e.createButton=function(n){var a=this,o=document.createElement("a");o.setAttribute("rel","tooltip"),o.className="modebar-btn";var h=n.title;h===void 0?h=n.name:typeof h=="function"&&(h=h(this.graphInfo)),(h||h===0)&&o.setAttribute("data-title",h),n.attr!==void 0&&o.setAttribute("data-attr",n.attr);var y=n.val;y!==void 0&&(typeof y=="function"&&(y=y(this.graphInfo)),o.setAttribute("data-val",y));var p=n.click;if(typeof p!="function")throw new Error("must provide button 'click' function in button config");o.addEventListener("click",function(s){n.click(a.graphInfo,s),a.updateActiveButton(s.currentTarget)}),o.setAttribute("data-toggle",n.toggle||!1),n.toggle&&M.select(o).classed("active",!0);var x=n.icon;return typeof x=="function"?o.appendChild(x()):o.appendChild(this.createIcon(x||S.question)),o.setAttribute("data-gravity",n.gravity||"n"),o},e.createIcon=function(n){var a=E(n.height)?Number(n.height):n.ascent-n.descent,o="http://www.w3.org/2000/svg",h;if(n.path){h=document.createElementNS(o,"svg"),h.setAttribute("viewBox",[0,0,n.width,a].join(" ")),h.setAttribute("class","icon");var y=document.createElementNS(o,"path");y.setAttribute("d",n.path),n.transform?y.setAttribute("transform",n.transform):n.ascent!==void 0&&y.setAttribute("transform","matrix(1 0 0 -1 0 "+n.ascent+")"),h.appendChild(y)}if(n.svg){var p=g.parseFromString(n.svg,"application/xml");h=p.childNodes[0]}return h.setAttribute("height","1em"),h.setAttribute("width","1em"),h},e.updateActiveButton=function(n){var a=this.graphInfo._fullLayout,o=n!==void 0?n.getAttribute("data-attr"):null;this.buttonElements.forEach(function(h){var y=h.getAttribute("data-val")||!0,p=h.getAttribute("data-attr"),x=h.getAttribute("data-toggle")==="true",s=M.select(h);if(x)p===o&&s.classed("active",!s.classed("active"));else{var u=p===null?p:i.nestedProperty(a,p).get();s.classed("active",u===y)}})},e.hasButtons=function(n){var a=this.buttons;if(!a||n.length!==a.length)return!1;for(var o=0;o<n.length;++o){if(n[o].length!==a[o].length)return!1;for(var h=0;h<n[o].length;h++)if(n[o][h].name!==a[o][h].name)return!1}return!0};function r(n){return n+" (v"+A+")"}e.getLogo=function(){var n=this.createGroup(),a=document.createElement("a");return a.href="https://plotly.com/",a.target="_blank",a.setAttribute("data-title",r(i._(this.graphInfo,"Produced with Plotly.js"))),a.className="modebar-btn plotlyjsicon modebar-btn--logo",a.appendChild(this.createIcon(S.newplotlylogo)),n.appendChild(a),n},e.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},e.destroy=function(){i.removeElement(this.container.querySelector(".modebar")),i.deleteRelatedStyleRule(this._uid)};function f(n,a){var o=n._fullLayout,h=new v({graphInfo:n,container:o._modebardiv.node(),buttons:a});return o._privateplot&&M.select(h.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),h}$.exports=f},37113:function($,U,t){var M=t(41940),E=t(22399),i=t(44467).templatedArray,S=i("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});$.exports={visible:{valType:"boolean",editType:"plot"},buttons:S,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:M({editType:"plot"}),bgcolor:{valType:"color",dflt:E.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:E.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},89573:function($){$.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},28674:function($,U,t){var M=t(71828),E=t(7901),i=t(44467),S=t(85501),A=t(37113),g=t(89573);$.exports=function(r,f,n,a,o){var h=r.rangeselector||{},y=i.newContainer(f,"rangeselector");function p(T,k){return M.coerce(h,y,A,T,k)}var x=S(h,y,{name:"buttons",handleItemDefaults:v,calendar:o}),s=p("visible",x.length>0);if(s){var u=e(f,n,a);p("x",u[0]),p("y",u[1]),M.noneOrAll(r,f,["x","y"]),p("xanchor"),p("yanchor"),M.coerceFont(p,"font",n.font);var c=p("bgcolor");p("activecolor",E.contrast(c,g.lightAmount,g.darkAmount)),p("bordercolor"),p("borderwidth")}};function v(r,f,n,a){var o=a.calendar;function h(x,s){return M.coerce(r,f,A.buttons,x,s)}var y=h("visible");if(y){var p=h("step");p!=="all"&&(o&&o!=="gregorian"&&(p==="month"||p==="year")?f.stepmode="backward":h("stepmode"),h("count")),h("label")}}function e(r,f,n){for(var a=n.filter(function(p){return f[p].anchor===r._id}),o=0,h=0;h<a.length;h++){var y=f[a[h]].domain;y&&(o=Math.max(y[1],o))}return[r.domain[0],o+g.yPad]}},21598:function($,U,t){var M=t(39898),E=t(73972),i=t(74875),S=t(7901),A=t(91424),g=t(71828),v=g.strTranslate,e=t(63893),r=t(41675),f=t(18783),n=f.LINE_SPACING,a=f.FROM_TL,o=f.FROM_BR,h=t(89573),y=t(70565);$.exports=function(b){var P=b._fullLayout,l=P._infolayer.selectAll(".rangeselector").data(p(b),x);l.enter().append("g").classed("rangeselector",!0),l.exit().remove(),l.style({cursor:"pointer","pointer-events":"all"}),l.each(function(d){var L=M.select(this),w=d,I=w.rangeselector,z=L.selectAll("g.button").data(g.filterVisible(I.buttons));z.enter().append("g").classed("button",!0),z.exit().remove(),z.each(function(B){var O=M.select(this),R=y(w,B);B._isActive=s(w,B,R),O.call(u,I,B),O.call(T,I,B,b),O.on("click",function(){b._dragged||E.call("_guiRelayout",b,R)}),O.on("mouseover",function(){B._isHovered=!0,O.call(u,I,B)}),O.on("mouseout",function(){B._isHovered=!1,O.call(u,I,B)})}),_(b,z,I,w._name,L)})};function p(b){for(var P=r.list(b,"x",!0),l=[],d=0;d<P.length;d++){var L=P[d];L.rangeselector&&L.rangeselector.visible&&l.push(L)}return l}function x(b){return b._id}function s(b,P,l){if(P.step==="all")return b.autorange===!0;var d=Object.keys(l);return b.range[0]===l[d[0]]&&b.range[1]===l[d[1]]}function u(b,P,l){var d=g.ensureSingle(b,"rect","selector-rect",function(L){L.attr("shape-rendering","crispEdges")});d.attr({rx:h.rx,ry:h.ry}),d.call(S.stroke,P.bordercolor).call(S.fill,c(P,l)).style("stroke-width",P.borderwidth+"px")}function c(b,P){return P._isActive||P._isHovered?b.activecolor:b.bgcolor}function T(b,P,l,d){function L(I){e.convertToTspans(I,d)}var w=g.ensureSingle(b,"text","selector-text",function(I){I.attr("text-anchor","middle")});w.call(A.font,P.font).text(k(l,d._fullLayout._meta)).call(L)}function k(b,P){return b.label?P?g.templateString(b.label,P):b.label:b.step==="all"?"all":b.count+b.step.charAt(0)}function _(b,P,l,d,L){var w=0,I=0,z=l.borderwidth;P.each(function(){var N=M.select(this),V=N.select(".selector-text"),K=l.font.size*n,Q=Math.max(K*e.lineCount(V),16)+3;I=Math.max(I,Q)}),P.each(function(){var N=M.select(this),V=N.select(".selector-rect"),K=N.select(".selector-text"),Q=K.node()&&A.bBox(K.node()).width,at=l.font.size*n,it=e.lineCount(K),q=Math.max(Q+10,h.minButtonWidth);N.attr("transform",v(z+w,z)),V.attr({x:0,y:0,width:q,height:I}),e.positionText(K,q/2,I/2-(it-1)*at/2+3),w+=q+5});var B=b._fullLayout._size,O=B.l+B.w*l.x,R=B.t+B.h*(1-l.y),C="left";g.isRightAnchor(l)&&(O-=w,C="right"),g.isCenterAnchor(l)&&(O-=w/2,C="center");var F="top";g.isBottomAnchor(l)&&(R-=I,F="bottom"),g.isMiddleAnchor(l)&&(R-=I/2,F="middle"),w=Math.ceil(w),I=Math.ceil(I),O=Math.round(O),R=Math.round(R),i.autoMargin(b,d+"-range-selector",{x:l.x,y:l.y,l:w*a[C],r:w*o[C],b:I*o[F],t:I*a[F]}),L.attr("transform",v(O,R))}},70565:function($,U,t){var M=t(81041),E=t(71828).titleCase;$.exports=function(S,A){var g=S._name,v={};if(A.step==="all")v[g+".autorange"]=!0;else{var e=i(S,A);v[g+".range[0]"]=e[0],v[g+".range[1]"]=e[1]}return v};function i(S,A){var g=S.range,v=new Date(S.r2l(g[1])),e=A.step,r=M["utc"+E(e)],f=A.count,n;switch(A.stepmode){case"backward":n=S.l2r(+r.offset(v,-f));break;case"todate":var a=r.offset(v,-f);n=S.l2r(+r.ceil(a));break}var o=g[1];return[n,o]}},97218:function($,U,t){$.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:t(37113)}}},layoutAttributes:t(37113),handleDefaults:t(28674),draw:t(21598)}},75148:function($,U,t){var M=t(22399);$.exports={bgcolor:{valType:"color",dflt:M.background,editType:"plot"},bordercolor:{valType:"color",dflt:M.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},88443:function($,U,t){var M=t(41675).list,E=t(71739).getAutoRange,i=t(73251);$.exports=function(S){for(var A=M(S,"x",!0),g=0;g<A.length;g++){var v=A[g],e=v[i.name];e&&e.visible&&e.autorange&&(e._input.autorange=!0,e._input.range=e.range=E(S,v))}}},73251:function($){$.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},26377:function($,U,t){var M=t(71828),E=t(44467),i=t(41675),S=t(75148),A=t(47850);$.exports=function(g,v,e){var r=g[e],f=v[e];if(!(r.rangeslider||v._requestRangeslider[f._id]))return;M.isPlainObject(r.rangeslider)||(r.rangeslider={});var n=r.rangeslider,a=E.newContainer(f,"rangeslider");function o(l,d){return M.coerce(n,a,S,l,d)}var h,y;function p(l,d){return M.coerce(h,y,A,l,d)}var x=o("visible");if(x){o("bgcolor",v.plot_bgcolor),o("bordercolor"),o("borderwidth"),o("thickness"),o("autorange",!f.isValidRange(n.range)),o("range");var s=v._subplots;if(s)for(var u=s.cartesian.filter(function(l){return l.substr(0,l.indexOf("y"))===i.name2id(e)}).map(function(l){return l.substr(l.indexOf("y"),l.length)}),c=M.simpleMap(u,i.id2name),T=0;T<c.length;T++){var k=c[T];h=n[k]||{},y=E.newContainer(a,k,"yaxis");var _=v[k],b;h.range&&_.isValidRange(h.range)&&(b="fixed");var P=p("rangemode",b);P!=="match"&&p("range",_.range.slice())}a._input=n}}},72413:function($,U,t){var M=t(39898),E=t(73972),i=t(74875),S=t(71828),A=S.strTranslate,g=t(91424),v=t(7901),e=t(92998),r=t(93612),f=t(41675),n=t(28569),a=t(6964),o=t(73251);$.exports=function(b){for(var P=b._fullLayout,l=P._rangeSliderData,d=0;d<l.length;d++){var L=l[d][o.name];L._clipId=L._id+"-"+P._uid}function w(z){return z._name}var I=P._infolayer.selectAll("g."+o.containerClassName).data(l,w);I.exit().each(function(z){var B=z[o.name];P._topdefs.select("#"+B._clipId).remove()}).remove(),l.length!==0&&(I.enter().append("g").classed(o.containerClassName,!0).attr("pointer-events","all"),I.each(function(z){var B=M.select(this),O=z[o.name],R=P[f.id2name(z.anchor)],C=O[f.id2name(z.anchor)];if(O.range){var F=S.simpleMap(O.range,z.r2l),N=S.simpleMap(z.range,z.r2l),V;N[0]<N[1]?V=[Math.min(F[0],N[0]),Math.max(F[1],N[1])]:V=[Math.max(F[0],N[0]),Math.min(F[1],N[1])],O.range=O._input.range=S.simpleMap(V,z.l2r)}z.cleanRange("rangeslider.range");var K=P._size,Q=z.domain;O._width=K.w*(Q[1]-Q[0]);var at=Math.round(K.l+K.w*Q[0]),it=Math.round(K.t+K.h*(1-z._counterDomainMin)+(z.side==="bottom"?z._depth:0)+O._offsetShift+o.extraPad);B.attr("transform",A(at,it)),O._rl=S.simpleMap(O.range,z.r2l);var q=O._rl[0],W=O._rl[1],Z=W-q;if(O.p2d=function(yt){return yt/O._width*Z+q},O.d2p=function(yt){return(yt-q)/Z*O._width},z.rangebreaks){var G=z.locateBreaks(q,W);if(G.length){var et,nt,X=0;for(et=0;et<G.length;et++)nt=G[et],X+=nt.max-nt.min;var Y=O._width/(W-q-X),ot=[-Y*q];for(et=0;et<G.length;et++)nt=G[et],ot.push(ot[ot.length-1]-Y*(nt.max-nt.min));for(O.d2p=function(yt){for(var xt=ot[0],Ft=0;Ft<G.length;Ft++){var Et=G[Ft];if(yt>=Et.max)xt=ot[Ft+1];else if(yt<Et.min)break}return xt+Y*yt},et=0;et<G.length;et++)nt=G[et],nt.pmin=O.d2p(nt.min),nt.pmax=O.d2p(nt.max);O.p2d=function(yt){for(var xt=ot[0],Ft=0;Ft<G.length;Ft++){var Et=G[Ft];if(yt>=Et.pmax)xt=ot[Ft+1];else if(yt<Et.pmin)break}return(yt-xt)/Y}}}if(C.rangemode!=="match"){var rt=R.r2l(C.range[0]),ht=R.r2l(C.range[1]),pt=ht-rt;O.d2pOppAxis=function(yt){return(yt-rt)/pt*O._height}}B.call(x,b,z,O).call(s,b,z,O).call(u,b,z,O).call(T,b,z,O,C).call(k,b,z,O).call(_,b,z,O),h(B,b,z,O),p(B,b,z,O,R,C),z.side==="bottom"&&e.draw(b,z._id+"title",{propContainer:z,propName:z._name+".title",placeholder:P._dfltTitle.x,attributes:{x:z._offset+z._length/2,y:it+O._height+O._offsetShift+10+1.5*z.title.font.size,"text-anchor":"middle"}})}))};function h(b,P,l,d){if(P._context.staticPlot)return;var L=b.select("rect."+o.slideBoxClassName).node(),w=b.select("rect."+o.grabAreaMinClassName).node(),I=b.select("rect."+o.grabAreaMaxClassName).node();function z(){var B=M.event,O=B.target,R=B.clientX||B.touches[0].clientX,C=R-b.node().getBoundingClientRect().left,F=d.d2p(l._rl[0]),N=d.d2p(l._rl[1]),V=n.coverSlip();this.addEventListener("touchmove",K),this.addEventListener("touchend",Q),V.addEventListener("mousemove",K),V.addEventListener("mouseup",Q);function K(at){var it=at.clientX||at.touches[0].clientX,q=+it-R,W,Z,G;switch(O){case L:if(G="ew-resize",F+q>l._length||N+q<0)return;W=F+q,Z=N+q;break;case w:if(G="col-resize",F+q>l._length)return;W=F+q,Z=N;break;case I:if(G="col-resize",N+q<0)return;W=F,Z=N+q;break;default:G="ew-resize",W=C,Z=C+q;break}if(Z<W){var et=Z;Z=W,W=et}d._pixelMin=W,d._pixelMax=Z,a(M.select(V),G),y(b,P,l,d)}function Q(){V.removeEventListener("mousemove",K),V.removeEventListener("mouseup",Q),this.removeEventListener("touchmove",K),this.removeEventListener("touchend",Q),S.removeElement(V)}}b.on("mousedown",z),b.on("touchstart",z)}function y(b,P,l,d){function L(z){return l.l2r(S.constrain(z,d._rl[0],d._rl[1]))}var w=L(d.p2d(d._pixelMin)),I=L(d.p2d(d._pixelMax));window.requestAnimationFrame(function(){E.call("_guiRelayout",P,l._name+".range",[w,I])})}function p(b,P,l,d,L,w){var I=o.handleWidth/2;function z(at){return S.constrain(at,0,d._width)}function B(at){return S.constrain(at,0,d._height)}function O(at){return S.constrain(at,-I,d._width+I)}var R=z(d.d2p(l._rl[0])),C=z(d.d2p(l._rl[1]));if(b.select("rect."+o.slideBoxClassName).attr("x",R).attr("width",C-R),b.select("rect."+o.maskMinClassName).attr("width",R),b.select("rect."+o.maskMaxClassName).attr("x",C).attr("width",d._width-C),w.rangemode!=="match"){var F=d._height-B(d.d2pOppAxis(L._rl[1])),N=d._height-B(d.d2pOppAxis(L._rl[0]));b.select("rect."+o.maskMinOppAxisClassName).attr("x",R).attr("height",F).attr("width",C-R),b.select("rect."+o.maskMaxOppAxisClassName).attr("x",R).attr("y",N).attr("height",d._height-N).attr("width",C-R),b.select("rect."+o.slideBoxClassName).attr("y",F).attr("height",N-F)}var V=.5,K=Math.round(O(R-I))-V,Q=Math.round(O(C-I))+V;b.select("g."+o.grabberMinClassName).attr("transform",A(K,V)),b.select("g."+o.grabberMaxClassName).attr("transform",A(Q,V))}function x(b,P,l,d){var L=S.ensureSingle(b,"rect",o.bgClassName,function(B){B.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),w=d.borderwidth%2===0?d.borderwidth:d.borderwidth-1,I=-d._offsetShift,z=g.crispRound(P,d.borderwidth);L.attr({width:d._width+w,height:d._height+w,transform:A(I,I),"stroke-width":z}).call(v.stroke,d.bordercolor).call(v.fill,d.bgcolor)}function s(b,P,l,d){var L=P._fullLayout,w=S.ensureSingleById(L._topdefs,"clipPath",d._clipId,function(I){I.append("rect").attr({x:0,y:0})});w.select("rect").attr({width:d._width,height:d._height})}function u(b,P,l,d){var L=P.calcdata,w=b.selectAll("g."+o.rangePlotClassName).data(l._subplotsWith,S.identity);w.enter().append("g").attr("class",function(z){return o.rangePlotClassName+" "+z}).call(g.setClipUrl,d._clipId,P),w.order(),w.exit().remove();var I;w.each(function(z,B){var O=M.select(this),R=B===0,C=f.getFromId(P,z,"y"),F=C._name,N=d[F],V={data:[],layout:{xaxis:{type:l.type,domain:[0,1],range:d.range.slice(),calendar:l.calendar},width:d._width,height:d._height,margin:{t:0,b:0,l:0,r:0}},_context:P._context};l.rangebreaks&&(V.layout.xaxis.rangebreaks=l.rangebreaks),V.layout[F]={type:C.type,domain:[0,1],range:N.rangemode!=="match"?N.range.slice():C.range.slice(),calendar:C.calendar},C.rangebreaks&&(V.layout[F].rangebreaks=C.rangebreaks),i.supplyDefaults(V);var K=V._fullLayout.xaxis,Q=V._fullLayout[F];K.clearCalc(),K.setScale(),Q.clearCalc(),Q.setScale();var at={id:z,plotgroup:O,xaxis:K,yaxis:Q,isRangePlot:!0};R?I=at:(at.mainplot="xy",at.mainplotinfo=I),r.rangePlot(P,at,c(L,z))})}function c(b,P){for(var l=[],d=0;d<b.length;d++){var L=b[d],w=L[0].trace;w.xaxis+w.yaxis===P&&l.push(L)}return l}function T(b,P,l,d,L){var w=S.ensureSingle(b,"rect",o.maskMinClassName,function(O){O.attr({x:0,y:0,"shape-rendering":"crispEdges"})});w.attr("height",d._height).call(v.fill,o.maskColor);var I=S.ensureSingle(b,"rect",o.maskMaxClassName,function(O){O.attr({y:0,"shape-rendering":"crispEdges"})});if(I.attr("height",d._height).call(v.fill,o.maskColor),L.rangemode!=="match"){var z=S.ensureSingle(b,"rect",o.maskMinOppAxisClassName,function(O){O.attr({y:0,"shape-rendering":"crispEdges"})});z.attr("width",d._width).call(v.fill,o.maskOppAxisColor);var B=S.ensureSingle(b,"rect",o.maskMaxOppAxisClassName,function(O){O.attr({y:0,"shape-rendering":"crispEdges"})});B.attr("width",d._width).style("border-top",o.maskOppBorder).call(v.fill,o.maskOppAxisColor)}}function k(b,P,l,d){if(!P._context.staticPlot){var L=S.ensureSingle(b,"rect",o.slideBoxClassName,function(w){w.attr({y:0,cursor:o.slideBoxCursor,"shape-rendering":"crispEdges"})});L.attr({height:d._height,fill:o.slideBoxFill})}}function _(b,P,l,d){var L=S.ensureSingle(b,"g",o.grabberMinClassName),w=S.ensureSingle(b,"g",o.grabberMaxClassName),I={x:0,width:o.handleWidth,rx:o.handleRadius,fill:v.background,stroke:v.defaultLine,"stroke-width":o.handleStrokeWidth,"shape-rendering":"crispEdges"},z={y:Math.round(d._height/4),height:Math.round(d._height/2)},B=S.ensureSingle(L,"rect",o.handleMinClassName,function(N){N.attr(I)});B.attr(z);var O=S.ensureSingle(w,"rect",o.handleMaxClassName,function(N){N.attr(I)});O.attr(z);var R={width:o.grabAreaWidth,x:0,y:0,fill:o.grabAreaFill,cursor:P._context.staticPlot?void 0:o.grabAreaCursor},C=S.ensureSingle(L,"rect",o.grabAreaMinClassName,function(N){N.attr(R)});C.attr("height",d._height);var F=S.ensureSingle(w,"rect",o.grabAreaMaxClassName,function(N){N.attr(R)});F.attr("height",d._height)}},549:function($,U,t){var M=t(41675),E=t(63893),i=t(73251),S=t(18783).LINE_SPACING,A=i.name;function g(v){var e=v&&v[A];return e&&e.visible}U.isVisible=g,U.makeData=function(v){var e=M.list({_fullLayout:v},"x",!0),r=v.margin,f=[];if(!v._has("gl2d"))for(var n=0;n<e.length;n++){var a=e[n];if(g(a)){f.push(a);var o=a[A];o._id=A+a._id,o._height=(v.height-r.b-r.t)*o.thickness,o._offsetShift=Math.floor(o.borderwidth/2)}}v._rangeSliderData=f},U.autoMarginOpts=function(v,e){var r=v._fullLayout,f=e[A],n=e._id.charAt(0),a=0,o=0;if(e.side==="bottom"&&(a=e._depth,e.title.text!==r._dfltTitle[n])){o=1.5*e.title.font.size+10+f._offsetShift;var h=(e.title.text.match(E.BR_TAG_ALL)||[]).length;o+=h*e.title.font.size*S}return{x:0,y:e._counterDomainMin,l:0,r:0,t:0,b:f._height+a+Math.max(r.margin.b,o),pad:i.extraPad+f._offsetShift*2}}},13137:function($,U,t){var M=t(71828),E=t(75148),i=t(47850),S=t(549);$.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:M.extendFlat({},E,{yaxis:i})}}},layoutAttributes:t(75148),handleDefaults:t(26377),calcAutorange:t(88443),draw:t(72413),isVisible:S.isVisible,makeData:S.makeData,autoMarginOpts:S.autoMarginOpts}},47850:function($){$.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},8389:function($,U,t){var M=t(50215),E=t(82196).line,i=t(79952).P,S=t(1426).extendFlat,A=t(30962).overrideAll,g=t(44467).templatedArray;t(24695),$.exports=A(g("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:S({},M.xref,{}),yref:S({},M.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:E.color,width:S({},E.width,{min:1,dflt:1}),dash:S({},i,{dflt:"dot"})}}),"arraydraw","from-root")},34122:function($){$.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},59402:function($,U,t){var M=t(71828),E=t(89298),i=t(85501),S=t(8389),A=t(30477);$.exports=function(v,e){i(v,e,{name:"selections",handleItemDefaults:g});for(var r=e.selections,f=0;f<r.length;f++){var n=r[f];n&&n.path===void 0&&(n.x0===void 0||n.x1===void 0||n.y0===void 0||n.y1===void 0)&&(e.selections[f]=null)}};function g(v,e,r){function f(w,I){return M.coerce(v,e,S,w,I)}var n=f("path"),a=n?"path":"rect",o=f("type",a),h=o!=="path";h&&delete e.path,f("opacity"),f("line.color"),f("line.width"),f("line.dash");for(var y=["x","y"],p=0;p<2;p++){var x=y[p],s={_fullLayout:r},u,c,T,k=E.coerceRef(v,e,s,x);if(u=E.getFromId(s,k),u._selectionIndices.push(e._index),T=A.rangeToShapePosition(u),c=A.shapePositionToRange(u),h){var _=x+"0",b=x+"1",P=v[_],l=v[b];v[_]=c(v[_],!0),v[b]=c(v[b],!0),E.coercePosition(e,s,f,k,_),E.coercePosition(e,s,f,k,b);var d=e[_],L=e[b];d!==void 0&&L!==void 0&&(e[_]=T(d),e[b]=T(L),v[_]=P,v[b]=l)}}h&&M.noneOrAll(v,e,["x0","x1","y0","y1"])}},32485:function($,U,t){var M=t(60165).readPaths,E=t(42359),i=t(51873).clearOutlineControllers,S=t(7901),A=t(91424),g=t(44467).arrayEditor,v=t(30477),e=v.getPathString;$.exports={draw:r,drawOne:n,activateLastSelection:h};function r(p){var x=p._fullLayout;i(p),x._selectionLayer.selectAll("path").remove();for(var s in x._plots){var u=x._plots[s].selectionLayer;u&&u.selectAll("path").remove()}for(var c=0;c<x.selections.length;c++)n(p,c)}function f(p){return p._context.editSelection}function n(p,x){p._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+x+'"]').remove();var s=v.makeSelectionsOptionsAndPlotinfo(p,x),u=s.options,c=s.plotinfo;if(!u._input)return;T(p._fullLayout._selectionLayer);function T(k){var _=e(p,u),b={"data-index":x,"fill-rule":"evenodd",d:_},P=u.opacity,l="rgba(0,0,0,0)",d=u.line.color||S.contrast(p._fullLayout.plot_bgcolor),L=u.line.width,w=u.line.dash;L||(L=5,w="solid");var I=f(p)&&p._fullLayout._activeSelectionIndex===x;I&&(l=p._fullLayout.activeselection.fillcolor,P=p._fullLayout.activeselection.opacity);for(var z=[],B=1;B>=0;B--){var O=k.append("path").attr(b).style("opacity",B?.1:P).call(S.stroke,d).call(S.fill,l).call(A.dashLine,B?"solid":w,B?4+L:L);if(a(O,p,u),I){var R=g(p.layout,"selections",u);O.style({cursor:"move"});var C={element:O.node(),plotinfo:c,gd:p,editHelpers:R,isActiveSelection:!0},F=M(_,p);E(F,O,C)}else O.style("pointer-events",B?"all":"none");z[B]=O}var N=z[0],V=z[1];V.node().addEventListener("click",function(){return o(p,N)})}}function a(p,x,s){var u=s.xref+s.yref;A.setClipUrl(p,"clip"+x._fullLayout._uid+u,x)}function o(p,x){if(f(p)){var s=x.node(),u=+s.getAttribute("data-index");if(u>=0){if(u===p._fullLayout._activeSelectionIndex){y(p);return}p._fullLayout._activeSelectionIndex=u,p._fullLayout._deactivateSelection=y,r(p)}}}function h(p){if(f(p)){var x=p._fullLayout.selections.length-1;p._fullLayout._activeSelectionIndex=x,p._fullLayout._deactivateSelection=y,r(p)}}function y(p){if(f(p)){var x=p._fullLayout._activeSelectionIndex;x>=0&&(i(p),delete p._fullLayout._activeSelectionIndex,r(p))}}},53777:function($,U,t){var M=t(79952).P,E=t(1426).extendFlat;$.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:E({},M,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},90849:function($){$.exports=function(U,t,M){M("newselection.mode");var E=M("newselection.line.width");E&&(M("newselection.line.color"),M("newselection.line.dash")),M("activeselection.fillcolor"),M("activeselection.opacity")}},35855:function($,U,t){var M=t(64505),E=M.selectMode,i=t(51873),S=i.clearOutline,A=t(60165),g=A.readPaths,v=A.writePaths,e=A.fixDatesForPaths;$.exports=function(r,f){if(r.length){var n=r[0][0];if(n){var a=n.getAttribute("d"),o=f.gd,h=o._fullLayout.newselection,y=f.plotinfo,p=y.xaxis,x=y.yaxis,s=f.isActiveSelection,u=f.dragmode,c=(o.layout||{}).selections||[];if(!E(u)&&s!==void 0){var T=o._fullLayout._activeSelectionIndex;if(T<c.length)switch(o._fullLayout.selections[T].type){case"rect":u="select";break;case"path":u="lasso";break}}var k=g(a,o,y,s),_={xref:p._id,yref:x._id,opacity:h.opacity,line:{color:h.line.color,width:h.line.width,dash:h.line.dash}},b;k.length===1&&(b=k[0]),b&&b.length===5&&u==="select"?(_.type="rect",_.x0=b[0][1],_.y0=b[0][2],_.x1=b[2][1],_.y1=b[2][2]):(_.type="path",p&&x&&e(k,p,x),_.path=v(k),b=null),S(o);for(var P=f.editHelpers,l=(P||{}).modifyItem,d=[],L=0;L<c.length;L++){var w=o._fullLayout.selections[L];if(!w){d[L]=w;continue}if(d[L]=w._input,s!==void 0&&L===o._fullLayout._activeSelectionIndex){var I=_;switch(w.type){case"rect":l("x0",I.x0),l("x1",I.x1),l("y0",I.y0),l("y1",I.y1);break;case"path":l("path",I.path);break}}}return s===void 0?(d.push(_),d):P?P.getUpdateObj():{}}}}},75549:function($,U,t){var M=t(71828).strTranslate;function E(g,v){switch(g.type){case"log":return g.p2d(v);case"date":return g.p2r(v,0,g.calendar);default:return g.p2r(v)}}function i(g,v){switch(g.type){case"log":return g.d2p(v);case"date":return g.r2p(v,0,g.calendar);default:return g.r2p(v)}}function S(g){var v=g._id.charAt(0)==="y"?1:0;return function(e){return E(g,e[v])}}function A(g){return M(g.xaxis._offset,g.yaxis._offset)}$.exports={p2r:E,r2p:i,axValue:S,getTransform:A}},47322:function($,U,t){var M=t(32485),E=t(3937);$.exports={moduleType:"component",name:"selections",layoutAttributes:t(8389),supplyLayoutDefaults:t(59402),supplyDrawNewSelectionDefaults:t(90849),includeBasePlot:t(76325)("selections"),draw:M.draw,drawOne:M.drawOne,reselect:E.reselect,prepSelect:E.prepSelect,clearOutline:E.clearOutline,clearSelectionsCache:E.clearSelectionsCache,selectOnClick:E.selectOnClick}},3937:function($,U,t){var M=t(52142),E=t(38258),i=t(73972),S=t(91424).dashStyle,A=t(7901),g=t(30211),v=t(23469).makeEventData,e=t(64505),r=e.freeMode,f=e.rectMode,n=e.drawMode,a=e.openMode,o=e.selectMode,h=t(30477),y=t(21459),p=t(42359),x=t(51873).clearOutline,s=t(60165),u=s.handleEllipse,c=s.readPaths,T=t(90551).newShapes,k=t(35855),_=t(32485).activateLastSelection,b=t(71828),P=b.sorterAsc,l=t(61082),d=t(79990),L=t(41675).getFromId,w=t(33306),I=t(61549).redrawReglTraces,z=t(34122),B=z.MINSELECT,O=l.filter,R=l.tester,C=t(75549),F=C.p2r,N=C.axValue,V=C.getTransform;function K(zt){return zt.subplot!==void 0}function Q(zt,Tt,ft,ut,vt){var St=!K(ut),Ot=r(vt),Xt=f(vt),$t=a(vt),de=n(vt),Me=o(vt),Fe=vt==="drawline",De=vt==="drawcircle",Ae=Fe||De,Ve=ut.gd,Qe=Ve._fullLayout,Sr=Me&&Qe.newselection.mode==="immediate"&&St,he=Qe._zoomlayer,je=ut.element.getBoundingClientRect(),Re=ut.plotinfo,_r=V(Re),tr=Tt-je.left,Gt=ft-je.top;Qe._calcInverseTransform(Ve);var re=b.apply3DTransform(Qe._invTransform)(tr,Gt);tr=re[0],Gt=re[1];var fe=Qe._invScaleX,ye=Qe._invScaleY,Le=tr,_e=Gt,Ce="M"+tr+","+Gt,ze=ut.xaxes[0],We=ut.yaxes[0],qe=ze._length,ir=We._length,xr=zt.altKey&&!(n(vt)&&$t),Dt,Ut,Te,Se,Be,Je,$e;G(zt,Ve,ut),Ot&&(Dt=O([[tr,Gt]],z.BENDPX));var Xe=he.selectAll("path.select-outline-"+Re.id).data([1]),Oe=de?Qe.newshape:Qe.newselection;de&&(ut.hasText=Oe.label.text||Oe.label.texttemplate);var ar=de&&!$t?Oe.fillcolor:"rgba(0,0,0,0)",cr=Oe.line.color||(St?A.contrast(Ve._fullLayout.plot_bgcolor):"#7f7f7f");Xe.enter().append("path").attr("class","select-outline select-outline-"+Re.id).style({opacity:de?Oe.opacity/2:1,"stroke-dasharray":S(Oe.line.dash,Oe.line.width),"stroke-width":Oe.line.width+"px","shape-rendering":"crispEdges"}).call(A.stroke,cr).call(A.fill,ar).attr("fill-rule","evenodd").classed("cursor-move",!!de).attr("transform",_r).attr("d",Ce+"Z");var sr=he.append("path").attr("class","zoombox-corners").style({fill:A.background,stroke:A.defaultLine,"stroke-width":1}).attr("transform",_r).attr("d","M0,0Z");if(de&&ut.hasText){var lr=he.select(".label-temp");lr.empty()&&(lr=he.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var Or=Qe._uid+z.SELECTID,Ir=[],Pr=ot(Ve,ut.xaxes,ut.yaxes,ut.subplot);Sr&&!zt.shiftKey&&(ut._clearSubplotSelections=function(){if(St){var Zr=ze._id,yn=We._id;Vt(Ve,Zr,yn,Pr);for(var Tn=(Ve.layout||{}).selections||[],hr=[],dr=!1,Lr=0;Lr<Tn.length;Lr++){var Cr=Qe.selections[Lr];Cr.xref!==Zr||Cr.yref!==yn?hr.push(Tn[Lr]):dr=!0}dr&&(Ve._fullLayout._noEmitSelectedAtStart=!0,i.call("_guiRelayout",Ve,{selections:hr}))}});var rn=ve(ut);ut.moveFn=function(Zr,yn){ut._clearSubplotSelections&&(ut._clearSubplotSelections(),ut._clearSubplotSelections=void 0),Le=Math.max(0,Math.min(qe,fe*Zr+tr)),_e=Math.max(0,Math.min(ir,ye*yn+Gt));var Tn=Math.abs(Le-tr),hr=Math.abs(_e-Gt);if(Xt){var dr,Lr,Cr;if(Me){var Hr=Qe.selectdirection;switch(Hr==="any"?hr<Math.min(Tn*.6,B)?dr="h":Tn<Math.min(hr*.6,B)?dr="v":dr="d":dr=Hr,dr){case"h":Lr=De?ir/2:0,Cr=ir;break;case"v":Lr=De?qe/2:0,Cr=qe;break}}if(de)switch(Qe.newshape.drawdirection){case"vertical":dr="h",Lr=De?ir/2:0,Cr=ir;break;case"horizontal":dr="v",Lr=De?qe/2:0,Cr=qe;break;case"ortho":Tn<hr?(dr="h",Lr=Gt,Cr=_e):(dr="v",Lr=tr,Cr=Le);break;default:dr="d"}dr==="h"?(Se=Ae?u(De,[Le,Lr],[Le,Cr]):[[tr,Lr],[tr,Cr],[Le,Cr],[Le,Lr]],Se.xmin=Ae?Le:Math.min(tr,Le),Se.xmax=Ae?Le:Math.max(tr,Le),Se.ymin=Math.min(Lr,Cr),Se.ymax=Math.max(Lr,Cr),sr.attr("d","M"+Se.xmin+","+(Gt-B)+"h-4v"+2*B+"h4ZM"+(Se.xmax-1)+","+(Gt-B)+"h4v"+2*B+"h-4Z")):dr==="v"?(Se=Ae?u(De,[Lr,_e],[Cr,_e]):[[Lr,Gt],[Lr,_e],[Cr,_e],[Cr,Gt]],Se.xmin=Math.min(Lr,Cr),Se.xmax=Math.max(Lr,Cr),Se.ymin=Ae?_e:Math.min(Gt,_e),Se.ymax=Ae?_e:Math.max(Gt,_e),sr.attr("d","M"+(tr-B)+","+Se.ymin+"v-4h"+2*B+"v4ZM"+(tr-B)+","+(Se.ymax-1)+"v4h"+2*B+"v-4Z")):dr==="d"&&(Se=Ae?u(De,[tr,Gt],[Le,_e]):[[tr,Gt],[tr,_e],[Le,_e],[Le,Gt]],Se.xmin=Math.min(tr,Le),Se.xmax=Math.max(tr,Le),Se.ymin=Math.min(Gt,_e),Se.ymax=Math.max(Gt,_e),sr.attr("d","M0,0Z"))}else Ot&&(Dt.addPt([Le,_e]),Se=Dt.filtered);if(ut.selectionDefs&&ut.selectionDefs.length?(Te=gt(ut.mergedPolygons,Se,xr),Se.subtract=xr,Ut=Z(ut.selectionDefs.concat([Se]))):(Te=[Se],Ut=R(Se)),p(Pt(Te,$t),Xe,ut),Me){var sn=kt(Ve,!1),Yr=sn.eventData?sn.eventData.points.slice():[];sn=kt(Ve,!1,Ut,Pr,ut),Ut=sn.selectionTesters,$e=sn.eventData;var xn;Dt?xn=Dt.filtered:xn=ce(Te),d.throttle(Or,z.SELECTDELAY,function(){Ir=Bt(Ut,Pr);for(var wn=Ir.slice(),Un=0;Un<Yr.length;Un++){for(var qn=Yr[Un],ei=!1,Gn=0;Gn<wn.length;Gn++)if(wn[Gn].curveNumber===qn.curveNumber&&wn[Gn].pointNumber===qn.pointNumber){ei=!0;break}ei||wn.push(qn)}wn.length&&($e||($e={}),$e.points=wn),rn($e,xn),Mt(Ve,$e)})}},ut.clickFn=function(Zr,yn){if(sr.remove(),Ve._fullLayout._activeShapeIndex>=0){Ve._fullLayout._deactivateShape(Ve);return}if(!de){var Tn=Qe.clickmode;d.done(Or).then(function(){if(d.clear(Or),Zr===2){for(Xe.remove(),Be=0;Be<Pr.length;Be++)Je=Pr[Be],Je._module.selectPoints(Je,!1);if(Et(Ve,Pr),X(ut),Rt(Ve),Pr.length){var hr=Pr[0].xaxis,dr=Pr[0].yaxis;if(hr&&dr){for(var Lr=[],Cr=Ve._fullLayout.selections,Hr=0;Hr<Cr.length;Hr++){var sn=Cr[Hr];sn&&(sn.xref!==hr._id||sn.yref!==dr._id)&&Lr.push(sn)}Lr.length<Cr.length&&(Ve._fullLayout._noEmitSelectedAtStart=!0,i.call("_guiRelayout",Ve,{selections:Lr}))}}}else Tn.indexOf("select")>-1&&at(yn,Ve,ut.xaxes,ut.yaxes,ut.subplot,ut,Xe),Tn==="event"&&It(Ve,void 0);g.click(Ve,yn)}).catch(b.error)}},ut.doneFn=function(){sr.remove(),d.done(Or).then(function(){d.clear(Or),!Sr&&Se&&ut.selectionDefs&&(Se.subtract=xr,ut.selectionDefs.push(Se),ut.mergedPolygons.length=0,[].push.apply(ut.mergedPolygons,Te)),(Sr||de)&&X(ut,Sr),ut.doneFnCompleted&&ut.doneFnCompleted(Ir),Me&&It(Ve,$e)}).catch(b.error)}}function at(zt,Tt,ft,ut,vt,St,Ot){var Xt=Tt._hoverdata,$t=Tt._fullLayout,de=$t.clickmode,Me=de.indexOf("event")>-1,Fe=[],De,Ae,Ve,Qe,Sr,he,je,Re,_r,tr;if(ht(Xt)){G(zt,Tt,St),De=ot(Tt,ft,ut,vt);var Gt=pt(Xt,De),re=Gt.pointNumbers.length>0;if(re?xt(De,Gt):Ft(De)&&(je=yt(Gt))){for(Ot&&Ot.remove(),tr=0;tr<De.length;tr++)Ae=De[tr],Ae._module.selectPoints(Ae,!1);Et(Tt,De),X(St),Me&&Rt(Tt)}else{Re=zt.shiftKey&&(je!==void 0?je:yt(Gt)),Ve=it(Gt.pointNumber,Gt.searchInfo,Re);var fe=St.selectionDefs.concat([Ve]);for(Qe=Z(fe),tr=0;tr<De.length;tr++)if(Sr=De[tr]._module.selectPoints(De[tr],Qe),he=wt(Sr,De[tr]),Fe.length)for(var ye=0;ye<he.length;ye++)Fe.push(he[ye]);else Fe=he;if(_r={points:Fe},Et(Tt,De,_r),Ve&&St&&St.selectionDefs.push(Ve),Ot){var Le=St.mergedPolygons,_e=a(St.dragmode);p(Pt(Le,_e),Ot,St)}Me&&It(Tt,_r)}}}function it(zt,Tt,ft){return{pointNumber:zt,searchInfo:Tt,subtract:!!ft}}function q(zt){return"pointNumber"in zt&&"searchInfo"in zt}function W(zt){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(Tt,ft,ut,vt){var St=zt.searchInfo.cd[0].trace._expandedIndex,Ot=vt.cd[0].trace._expandedIndex;return Ot===St&&ut===zt.pointNumber},isRect:!1,degenerate:!1,subtract:!!zt.subtract}}function Z(zt){if(!zt.length)return;for(var Tt=[],ft=q(zt[0])?0:zt[0][0][0],ut=ft,vt=q(zt[0])?0:zt[0][0][1],St=vt,Ot=0;Ot<zt.length;Ot++)if(q(zt[Ot]))Tt.push(W(zt[Ot]));else{var Xt=R(zt[Ot]);Xt.subtract=!!zt[Ot].subtract,Tt.push(Xt),ft=Math.min(ft,Xt.xmin),ut=Math.max(ut,Xt.xmax),vt=Math.min(vt,Xt.ymin),St=Math.max(St,Xt.ymax)}function $t(de,Me,Fe,De){for(var Ae=!1,Ve=0;Ve<Tt.length;Ve++)Tt[Ve].contains(de,Me,Fe,De)&&(Ae=!Tt[Ve].subtract);return Ae}return{xmin:ft,xmax:ut,ymin:vt,ymax:St,pts:[],contains:$t,isRect:!1,degenerate:!1}}function G(zt,Tt,ft){var ut=Tt._fullLayout,vt=ft.plotinfo,St=ft.dragmode,Ot=ut._lastSelectedSubplot&&ut._lastSelectedSubplot===vt.id,Xt=(zt.shiftKey||zt.altKey)&&!(n(St)&&a(St));Ot&&Xt&&vt.selection&&vt.selection.selectionDefs&&!ft.selectionDefs?(ft.selectionDefs=vt.selection.selectionDefs,ft.mergedPolygons=vt.selection.mergedPolygons):(!Xt||!vt.selection)&&X(ft),Ot||(x(Tt),ut._lastSelectedSubplot=vt.id)}function et(zt){return zt._fullLayout._activeShapeIndex>=0}function nt(zt){return zt._fullLayout._activeSelectionIndex>=0}function X(zt,Tt){var ft=zt.dragmode,ut=zt.plotinfo,vt=zt.gd;et(vt)&&vt._fullLayout._deactivateShape(vt),nt(vt)&&vt._fullLayout._deactivateSelection(vt);var St=vt._fullLayout,Ot=St._zoomlayer,Xt=n(ft),$t=o(ft);if(Xt||$t){var de=Ot.selectAll(".select-outline-"+ut.id);if(de&&vt._fullLayout._outlining){var Me;Xt&&(Me=T(de,zt)),Me&&i.call("_guiRelayout",vt,{shapes:Me});var Fe;$t&&!K(zt)&&(Fe=k(de,zt)),Fe&&(vt._fullLayout._noEmitSelectedAtStart=!0,i.call("_guiRelayout",vt,{selections:Fe}).then(function(){Tt&&_(vt)})),vt._fullLayout._outlining=!1}}ut.selection={},ut.selection.selectionDefs=zt.selectionDefs=[],ut.selection.mergedPolygons=zt.mergedPolygons=[]}function Y(zt){return zt._id}function ot(zt,Tt,ft,ut){if(!zt.calcdata)return[];var vt=[],St=Tt.map(Y),Ot=ft.map(Y),Xt,$t,de;for(de=0;de<zt.calcdata.length;de++)if(Xt=zt.calcdata[de],$t=Xt[0].trace,!($t.visible!==!0||!$t._module||!$t._module.selectPoints))if(K({subplot:ut})&&($t.subplot===ut||$t.geo===ut))vt.push(rt($t._module,Xt,Tt[0],ft[0]));else if($t.type==="splom"){if($t._xaxes[St[0]]&&$t._yaxes[Ot[0]]){var Me=rt($t._module,Xt,Tt[0],ft[0]);Me.scene=zt._fullLayout._splomScenes[$t.uid],vt.push(Me)}}else if($t.type==="sankey"){var Fe=rt($t._module,Xt,Tt[0],ft[0]);vt.push(Fe)}else{if(St.indexOf($t.xaxis)===-1||Ot.indexOf($t.yaxis)===-1)continue;vt.push(rt($t._module,Xt,L(zt,$t.xaxis),L(zt,$t.yaxis)))}return vt}function rt(zt,Tt,ft,ut){return{_module:zt,cd:Tt,xaxis:ft,yaxis:ut}}function ht(zt){return zt&&Array.isArray(zt)&&zt[0].hoverOnBox!==!0}function pt(zt,Tt){var ft=zt[0],ut=-1,vt=[],St,Ot;for(Ot=0;Ot<Tt.length;Ot++)if(St=Tt[Ot],ft.fullData._expandedIndex===St.cd[0].trace._expandedIndex){if(ft.hoverOnBox===!0)break;ft.pointNumber!==void 0?ut=ft.pointNumber:ft.binNumber!==void 0&&(ut=ft.binNumber,vt=ft.pointNumbers);break}return{pointNumber:ut,pointNumbers:vt,searchInfo:St}}function yt(zt){var Tt=zt.searchInfo.cd[0].trace,ft=zt.pointNumber,ut=zt.pointNumbers,vt=ut.length>0,St=vt?ut[0]:ft;return Tt.selectedpoints?Tt.selectedpoints.indexOf(St)>-1:!1}function xt(zt,Tt){var ft=[],ut,vt,St,Ot;for(Ot=0;Ot<zt.length;Ot++)ut=zt[Ot],ut.cd[0].trace.selectedpoints&&ut.cd[0].trace.selectedpoints.length>0&&ft.push(ut);if(ft.length===1&&(St=ft[0]===Tt.searchInfo,St&&(vt=Tt.searchInfo.cd[0].trace,vt.selectedpoints.length===Tt.pointNumbers.length))){for(Ot=0;Ot<Tt.pointNumbers.length;Ot++)if(vt.selectedpoints.indexOf(Tt.pointNumbers[Ot])<0)return!1;return!0}return!1}function Ft(zt){var Tt=0,ft,ut,vt;for(vt=0;vt<zt.length;vt++)if(ft=zt[vt],ut=ft.cd[0].trace,ut.selectedpoints&&(ut.selectedpoints.length>1||(Tt+=ut.selectedpoints.length,Tt>1)))return!1;return Tt===1}function Et(zt,Tt,ft){var ut;for(ut=0;ut<Tt.length;ut++){var vt=Tt[ut].cd[0].trace._fullInput,St=zt._fullLayout._tracePreGUI[vt.uid]||{};St.selectedpoints===void 0&&(St.selectedpoints=vt._input.selectedpoints||null)}var Ot;if(ft){var Xt=ft.points||[];for(ut=0;ut<Tt.length;ut++)Ot=Tt[ut].cd[0].trace,Ot._input.selectedpoints=Ot._fullInput.selectedpoints=[],Ot._fullInput!==Ot&&(Ot.selectedpoints=[]);for(var $t=0;$t<Xt.length;$t++){var de=Xt[$t],Me=de.data,Fe=de.fullData,De=de.pointIndex,Ae=de.pointIndices;Ae?([].push.apply(Me.selectedpoints,Ae),Ot._fullInput!==Ot&&[].push.apply(Fe.selectedpoints,Ae)):(Me.selectedpoints.push(De),Ot._fullInput!==Ot&&Fe.selectedpoints.push(De))}}else for(ut=0;ut<Tt.length;ut++)Ot=Tt[ut].cd[0].trace,delete Ot.selectedpoints,delete Ot._input.selectedpoints,Ot._fullInput!==Ot&&delete Ot._fullInput.selectedpoints;mt(zt,Tt)}function mt(zt,Tt){for(var ft=!1,ut=0;ut<Tt.length;ut++){var vt=Tt[ut],St=vt.cd;i.traceIs(St[0].trace,"regl")&&(ft=!0);var Ot=vt._module,Xt=Ot.styleOnSelect||Ot.style;Xt&&(Xt(zt,St,St[0].node3),St[0].nodeRangePlot3&&Xt(zt,St,St[0].nodeRangePlot3))}ft&&(w(zt),I(zt))}function gt(zt,Tt,ft){for(var ut=ft?M.difference:M.union,vt=ut({regions:zt},{regions:[Tt]}),St=vt.regions.reverse(),Ot=0;Ot<St.length;Ot++){var Xt=St[Ot];Xt.subtract=ae(Xt,St.slice(0,Ot))}return St}function wt(zt,Tt){if(Array.isArray(zt))for(var ft=Tt.cd,ut=Tt.cd[0].trace,vt=0;vt<zt.length;vt++)zt[vt]=v(zt[vt],ut,ft);return zt}function Pt(zt,Tt){for(var ft=[],ut=0;ut<zt.length;ut++){ft[ut]=[];for(var vt=0;vt<zt[ut].length;vt++){ft[ut][vt]=[],ft[ut][vt][0]=vt?"L":"M";for(var St=0;St<zt[ut][vt].length;St++)ft[ut][vt].push(zt[ut][vt][St])}Tt||ft[ut].push(["Z",ft[ut][0][1],ft[ut][0][2]])}return ft}function Bt(zt,Tt){for(var ft=[],ut,vt,St=0;St<Tt.length;St++){var Ot=Tt[St];vt=Ot._module.selectPoints(Ot,zt),ut=wt(vt,Ot),ft=ft.concat(ut)}return ft}function kt(zt,Tt,ft,ut,vt){var St=!!ut,Ot,Xt,$t;vt&&(Ot=vt.plotinfo,Xt=vt.xaxes[0]._id,$t=vt.yaxes[0]._id);var de=[],Me=[],Fe=te(zt),De=zt._fullLayout;if(Ot){var Ae=De._zoomlayer,Ve=De.dragmode,Qe=n(Ve),Sr=o(Ve);if(Qe||Sr){var he=L(zt,Xt,"x"),je=L(zt,$t,"y");if(he&&je){var Re=Ae.selectAll(".select-outline-"+Ot.id);if(Re&&zt._fullLayout._outlining&&Re.length){for(var _r=Re[0][0],tr=_r.getAttribute("d"),Gt=c(tr,zt,Ot),re=[],fe=0;fe<Gt.length;fe++){for(var ye=Gt[fe],Le=[],_e=0;_e<ye.length;_e++)Le.push([le(he,ye[_e][1]),le(je,ye[_e][2])]);Le.xref=Xt,Le.yref=$t,Le.subtract=ae(Le,re),re.push(Le)}Fe=Fe.concat(re)}}}}var Ce=Xt&&$t?[Xt+$t]:De._subplots.cartesian;jt(zt);for(var ze={},We=0;We<Ce.length;We++){var qe=Ce[We],ir=qe.indexOf("y"),xr=qe.slice(0,ir),Dt=qe.slice(ir),Ut=Xt&&$t?ft:void 0;if(Ut=ee(Fe,xr,Dt,Ut),Ut){var Te=ut;if(!St){var Se=L(zt,xr,"x"),Be=L(zt,Dt,"y");Te=ot(zt,[Se],[Be],qe);for(var Je=0;Je<Te.length;Je++){var $e=Te[Je],Xe=$e.cd[0],Oe=Xe.trace;if($e._module.name==="scattergl"&&!Xe.t.xpx){var ar=Oe.x,cr=Oe.y,sr=Oe._length;Xe.t.xpx=[],Xe.t.ypx=[];for(var lr=0;lr<sr;lr++)Xe.t.xpx[lr]=Se.c2p(ar[lr]),Xe.t.ypx[lr]=Be.c2p(cr[lr])}$e._module.name==="splom"&&(ze[Oe.uid]||(ze[Oe.uid]=!0))}}var Or=Bt(Ut,Te);de=de.concat(Or),Me=Me.concat(Te)}}var Ir={points:de};Et(zt,Me,Ir);var Pr=De.clickmode,rn=Pr.indexOf("event")>-1&&Tt;if(!Ot&&Tt){var Zr=te(zt,!0);if(Zr.length){var yn=Zr[0].xref,Tn=Zr[0].yref;if(yn&&Tn){var hr=ce(Zr),dr=we([L(zt,yn,"x"),L(zt,Tn,"y")]);dr(Ir,hr)}}zt._fullLayout._noEmitSelectedAtStart?zt._fullLayout._noEmitSelectedAtStart=!1:rn&&It(zt,Ir),De._reselect=!1}if(!Ot&&De._deselect){var Lr=De._deselect;Xt=Lr.xref,$t=Lr.yref,Ht(Xt,$t,Me)||Vt(zt,Xt,$t,ut),rn&&(Ir.points.length?It(zt,Ir):Rt(zt)),De._deselect=!1}return{eventData:Ir,selectionTesters:ft}}function jt(zt){var Tt=zt.calcdata;if(Tt)for(var ft=0;ft<Tt.length;ft++){var ut=Tt[ft][0],vt=ut.trace,St=zt._fullLayout._splomScenes;if(St){var Ot=St[vt.uid];Ot&&(Ot.selectBatch=[])}}}function Ht(zt,Tt,ft){for(var ut=0;ut<ft.length;ut++){var vt=ft[ut];if(vt.xaxis&&vt.xaxis._id===zt&&vt.yaxis&&vt.yaxis._id===Tt)return!0}return!1}function Vt(zt,Tt,ft,ut){ut=ot(zt,[L(zt,Tt,"x")],[L(zt,ft,"y")],Tt+ft);for(var vt=0;vt<ut.length;vt++){var St=ut[vt];St._module.selectPoints(St,!1)}Et(zt,ut)}function ee(zt,Tt,ft,ut){for(var vt,St=0;St<zt.length;St++){var Ot=zt[St];if(!(Tt!==Ot.xref||ft!==Ot.yref))if(vt){var Xt=!!Ot.subtract;vt=gt(vt,Ot,Xt),ut=Z(vt)}else vt=[Ot],ut=R(Ot)}return ut}function te(zt,Tt){for(var ft=[],ut=zt._fullLayout,vt=ut.selections,St=vt.length,Ot=0;Ot<St;Ot++)if(!(Tt&&Ot!==ut._activeSelectionIndex)){var Xt=vt[Ot];if(Xt){var $t=Xt.xref,de=Xt.yref,Me=L(zt,$t,"x"),Fe=L(zt,de,"y"),De,Ae,Ve,Qe,Sr;if(Xt.type==="rect"){Sr=[];var he=le(Me,Xt.x0),je=le(Me,Xt.x1),Re=le(Fe,Xt.y0),_r=le(Fe,Xt.y1);Sr=[[he,Re],[he,_r],[je,_r],[je,Re]],De=Math.min(he,je),Ae=Math.max(he,je),Ve=Math.min(Re,_r),Qe=Math.max(Re,_r),Sr.xmin=De,Sr.xmax=Ae,Sr.ymin=Ve,Sr.ymax=Qe,Sr.xref=$t,Sr.yref=de,Sr.subtract=!1,Sr.isRect=!0,ft.push(Sr)}else if(Xt.type==="path")for(var tr=Xt.path.split("Z"),Gt=[],re=0;re<tr.length;re++){var fe=tr[re];if(fe){fe+="Z";var ye=h.extractPathCoords(fe,y.paramIsX,"raw"),Le=h.extractPathCoords(fe,y.paramIsY,"raw");De=1/0,Ae=-1/0,Ve=1/0,Qe=-1/0,Sr=[];for(var _e=0;_e<ye.length;_e++){var Ce=le(Me,ye[_e]),ze=le(Fe,Le[_e]);Sr.push([Ce,ze]),De=Math.min(Ce,De),Ae=Math.max(Ce,Ae),Ve=Math.min(ze,Ve),Qe=Math.max(ze,Qe)}Sr.xmin=De,Sr.xmax=Ae,Sr.ymin=Ve,Sr.ymax=Qe,Sr.xref=$t,Sr.yref=de,Sr.subtract=ae(Sr,Gt),Gt.push(Sr),ft.push(Sr)}}}}return ft}function ae(zt,Tt){for(var ft=!1,ut=0;ut<Tt.length;ut++)for(var vt=Tt[ut],St=0;St<zt.length;St++)if(E(zt[St],vt)){ft=!ft;break}return ft}function le(zt,Tt){return zt.type==="date"&&(Tt=Tt.replace("_"," ")),zt.type==="log"?zt.c2p(Tt):zt.r2p(Tt,null,zt.calendar)}function ce(zt){for(var Tt=zt.length,ft=[],ut=0;ut<Tt;ut++){var vt=zt[ut];ft=ft.concat(vt),ft=ft.concat([vt[0]])}return pe(ft)}function pe(zt){return zt.isRect=zt.length===5&&zt[0][0]===zt[4][0]&&zt[0][1]===zt[4][1]&&zt[0][0]===zt[1][0]&&zt[2][0]===zt[3][0]&&zt[0][1]===zt[3][1]&&zt[1][1]===zt[2][1]||zt[0][1]===zt[1][1]&&zt[2][1]===zt[3][1]&&zt[0][0]===zt[3][0]&&zt[1][0]===zt[2][0],zt.isRect&&(zt.xmin=Math.min(zt[0][0],zt[2][0]),zt.xmax=Math.max(zt[0][0],zt[2][0]),zt.ymin=Math.min(zt[0][1],zt[2][1]),zt.ymax=Math.max(zt[0][1],zt[2][1])),zt}function we(zt){return function(Tt,ft){for(var ut,vt,St=0;St<zt.length;St++){var Ot=zt[St],Xt=Ot._id,$t=Xt.charAt(0);if(ft.isRect){ut||(ut={});var de=ft[$t+"min"],Me=ft[$t+"max"];de!==void 0&&Me!==void 0&&(ut[Xt]=[F(Ot,de),F(Ot,Me)].sort(P))}else vt||(vt={}),vt[Xt]=ft.map(N(Ot))}ut&&(Tt.range=ut),vt&&(Tt.lassoPoints=vt)}}function ve(zt){var Tt=zt.plotinfo;return Tt.fillRangeItems||we(zt.xaxes.concat(zt.yaxes))}function Mt(zt,Tt){zt.emit("plotly_selecting",Tt)}function It(zt,Tt){Tt&&(Tt.selections=(zt.layout||{}).selections||[]),zt.emit("plotly_selected",Tt)}function Rt(zt){zt.emit("plotly_deselect",null)}$.exports={reselect:kt,prepSelect:Q,clearOutline:x,clearSelectionsCache:X,selectOnClick:at}},89827:function($,U,t){var M=t(50215),E=t(41940),i=t(82196).line,S=t(79952).P,A=t(1426).extendFlat,g=t(44467).templatedArray;t(24695);var v=t(9012),e=t(5386).R,r=t(37281);$.exports=g("shape",{visible:A({},v.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:A({},v.legend,{editType:"calc+arraydraw"}),legendgroup:A({},v.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:A({},v.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:E({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:A({},v.legendrank,{editType:"calc+arraydraw"}),legendwidth:A({},v.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:A({},M.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:A({},M.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:A({},i.color,{editType:"arraydraw"}),width:A({},i.width,{editType:"calc+arraydraw"}),dash:A({},S,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:e({},{keys:Object.keys(r)}),font:E({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},5627:function($,U,t){var M=t(71828),E=t(89298),i=t(21459),S=t(30477);$.exports=function(r){var f=r._fullLayout,n=M.filterVisible(f.shapes);if(!(!n.length||!r._fullData.length))for(var a=0;a<n.length;a++){var o=n[a];o._extremes={};var h,y,p=E.getRefType(o.xref),x=E.getRefType(o.yref);if(o.xref!=="paper"&&p!=="domain"){var s=o.xsizemode==="pixel"?o.xanchor:o.x0,u=o.xsizemode==="pixel"?o.xanchor:o.x1;h=E.getFromId(r,o.xref),y=e(h,s,u,o.path,i.paramIsX),y&&(o._extremes[h._id]=E.findExtremes(h,y,A(o)))}if(o.yref!=="paper"&&x!=="domain"){var c=o.ysizemode==="pixel"?o.yanchor:o.y0,T=o.ysizemode==="pixel"?o.yanchor:o.y1;h=E.getFromId(r,o.yref),y=e(h,c,T,o.path,i.paramIsY),y&&(o._extremes[h._id]=E.findExtremes(h,y,g(o)))}}};function A(r){return v(r.line.width,r.xsizemode,r.x0,r.x1,r.path,!1)}function g(r){return v(r.line.width,r.ysizemode,r.y0,r.y1,r.path,!0)}function v(r,f,n,a,o,h){var y=r/2,p=h;if(f==="pixel"){var x=o?S.extractPathCoords(o,h?i.paramIsY:i.paramIsX):[n,a],s=M.aggNums(Math.max,null,x),u=M.aggNums(Math.min,null,x),c=u<0?Math.abs(u)+y:y,T=s>0?s+y:y;return{ppad:y,ppadplus:p?c:T,ppadminus:p?T:c}}else return{ppad:y}}function e(r,f,n,a,o){var h=r.type==="category"||r.type==="multicategory"?r.r2c:r.d2c;if(f!==void 0)return[h(f),h(n)];if(a){var y=1/0,p=-1/0,x=a.match(i.segmentRE),s,u,c,T,k;for(r.type==="date"&&(h=S.decodeDate(h)),s=0;s<x.length;s++)u=x[s],c=o[u.charAt(0)].drawn,c!==void 0&&(T=x[s].substr(1).match(i.paramRE),!(!T||T.length<c)&&(k=h(T[c]),k<y&&(y=k),k>p&&(p=k)));if(p>=y)return[y,p]}}},21459:function($){$.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},84726:function($,U,t){var M=t(71828),E=t(89298),i=t(85501),S=t(89827),A=t(30477);$.exports=function(e,r){i(e,r,{name:"shapes",handleItemDefaults:v})};function g(e,r){return e?"bottom":r.indexOf("top")!==-1?"top":r.indexOf("bottom")!==-1?"bottom":"middle"}function v(e,r,f){function n(q,W){return M.coerce(e,r,S,q,W)}r._isShape=!0;var a=n("visible");if(a){var o=n("showlegend");o&&(n("legend"),n("legendwidth"),n("legendgroup"),n("legendgrouptitle.text"),M.coerceFont(n,"legendgrouptitle.font"),n("legendrank"));var h=n("path"),y=h?"path":"rect",p=n("type",y),x=p!=="path";x&&delete r.path,n("editable"),n("layer"),n("opacity"),n("fillcolor"),n("fillrule");var s=n("line.width");s&&(n("line.color"),n("line.dash"));for(var u=n("xsizemode"),c=n("ysizemode"),T=["x","y"],k=0;k<2;k++){var _=T[k],b=_+"anchor",P=_==="x"?u:c,l={_fullLayout:f},d,L,w,I=E.coerceRef(e,r,l,_,void 0,"paper"),z=E.getRefType(I);if(z==="range"?(d=E.getFromId(l,I),d._shapeIndices.push(r._index),w=A.rangeToShapePosition(d),L=A.shapePositionToRange(d)):L=w=M.identity,x){var B=.25,O=.75,R=_+"0",C=_+"1",F=e[R],N=e[C];e[R]=L(e[R],!0),e[C]=L(e[C],!0),P==="pixel"?(n(R,0),n(C,10)):(E.coercePosition(r,l,n,I,R,B),E.coercePosition(r,l,n,I,C,O)),r[R]=w(r[R]),r[C]=w(r[C]),e[R]=F,e[C]=N}if(P==="pixel"){var V=e[b];e[b]=L(e[b],!0),E.coercePosition(r,l,n,I,b,.25),r[b]=w(r[b]),e[b]=V}}x&&M.noneOrAll(e,r,["x0","x1","y0","y1"]);var K=p==="line",Q,at;if(x&&(Q=n("label.texttemplate")),Q||(at=n("label.text")),at||Q){n("label.textangle");var it=n("label.textposition",K?"middle":"middle center");n("label.xanchor"),n("label.yanchor",g(K,it)),n("label.padding"),M.coerceFont(n,"label.font",f.font)}}}},48100:function($,U,t){var M=t(71828),E=t(89298),i=t(63893),S=t(91424),A=t(60165).readPaths,g=t(30477),v=g.getPathString,e=t(37281),r=t(18783).FROM_TL;$.exports=function(a,o,h,y){if(y.selectAll(".shape-label").remove(),!!(h.label.text||h.label.texttemplate)){var p;if(h.label.texttemplate){var x={};if(h.type!=="path"){var s=E.getFromId(a,h.xref),u=E.getFromId(a,h.yref);for(var c in e){var T=e[c](h,s,u);T!==void 0&&(x[c]=T)}}p=M.texttemplateStringForShapes(h.label.texttemplate,{},a._fullLayout._d3locale,x)}else p=h.label.text;var k={"data-index":o},_=h.label.font,b={"data-notex":1},P=y.append("g").attr(k).classed("shape-label",!0),l=P.append("text").attr(b).classed("shape-label-text",!0).text(p),d,L,w,I;if(h.path){var z=v(a,h),B=A(z,a);d=1/0,w=1/0,L=-1/0,I=-1/0;for(var O=0;O<B.length;O++)for(var R=0;R<B[O].length;R++)for(var C=B[O][R],F=1;F<C.length;F+=2){var N=C[F],V=C[F+1];d=Math.min(d,N),L=Math.max(L,N),w=Math.min(w,V),I=Math.max(I,V)}}else{var K=E.getFromId(a,h.xref),Q=E.getRefType(h.xref),at=E.getFromId(a,h.yref),it=E.getRefType(h.yref),q=g.getDataToPixel(a,K,!1,Q),W=g.getDataToPixel(a,at,!0,it);d=q(h.x0),L=q(h.x1),w=W(h.y0),I=W(h.y1)}var Z=h.label.textangle;Z==="auto"&&(h.type==="line"?Z=f(d,w,L,I):Z=0),l.call(function(ot){return ot.call(S.font,_).attr({}),i.convertToTspans(ot,a),ot});var G=S.bBox(l.node()),et=n(d,w,L,I,h,Z,G),nt=et.textx,X=et.texty,Y=et.xanchor;l.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[Y],y:X,x:nt,transform:"rotate("+Z+","+nt+","+X+")"}).call(i.positionText,nt,X)}};function f(a,o,h,y){var p,x;return x=Math.abs(h-a),h>=a?p=o-y:p=y-o,-180/Math.PI*Math.atan2(p,x)}function n(a,o,h,y,p,x,s){var u=p.label.textposition,c=p.label.textangle,T=p.label.padding,k=p.type,_=Math.PI/180*x,b=Math.sin(_),P=Math.cos(_),l=p.label.xanchor,d=p.label.yanchor,L,w,I,z;if(k==="line"){u==="start"?(L=a,w=o):u==="end"?(L=h,w=y):(L=(a+h)/2,w=(o+y)/2),l==="auto"&&(u==="start"?c==="auto"?h>a?l="left":h<a?l="right":l="center":h>a?l="right":h<a?l="left":l="center":u==="end"?c==="auto"?h>a?l="right":h<a?l="left":l="center":h>a?l="left":h<a?l="right":l="center":l="center");var B={left:1,center:0,right:-1},O={bottom:-1,middle:0,top:1};if(c==="auto"){var R=O[d];I=-T*b*R,z=T*P*R}else{var C=B[l],F=O[d];I=T*C,z=T*F}L=L+I,w=w+z}else I=T+3,u.indexOf("right")!==-1?(L=Math.max(a,h)-I,l==="auto"&&(l="right")):u.indexOf("left")!==-1?(L=Math.min(a,h)+I,l==="auto"&&(l="left")):(L=(a+h)/2,l==="auto"&&(l="center")),u.indexOf("top")!==-1?w=Math.min(o,y):u.indexOf("bottom")!==-1?w=Math.max(o,y):w=(o+y)/2,z=T,d==="bottom"?w=w-z:d==="top"&&(w=w+z);var N=r[d],V=p.label.font.size,K=s.height,Q=(K*N-V)*b,at=-(K*N-V)*P;return{textx:L+Q,texty:w+at,xanchor:l}}},42359:function($,U,t){var M=t(71828),E=M.strTranslate,i=t(28569),S=t(64505),A=S.drawMode,g=S.selectMode,v=t(73972),e=t(7901),r=t(89995),f=r.i000,n=r.i090,a=r.i180,o=r.i270,h=t(51873),y=h.clearOutlineControllers,p=t(60165),x=p.pointsOnRectangle,s=p.pointsOnEllipse,u=p.writePaths,c=t(90551).newShapes,T=t(90551).createShapeObj,k=t(35855),_=t(48100);$.exports=function d(L,w,I,z){z||(z=0);var B=I.gd;function O(){d(L,w,I,z++),(s(L[0])||I.hasText)&&R({redrawing:!0})}function R(gt){var wt={};I.isActiveShape!==void 0&&(I.isActiveShape=!1,wt=c(w,I)),I.isActiveSelection!==void 0&&(I.isActiveSelection=!1,wt=k(w,I),B._fullLayout._reselect=!0),Object.keys(wt).length&&v.call((gt||{}).redrawing?"relayout":"_guiRelayout",B,wt)}var C=B._fullLayout,F=C._zoomlayer,N=I.dragmode,V=A(N),K=g(N);(V||K)&&(B._fullLayout._outlining=!0),y(B),w.attr("d",u(L));var Q,at,it,q,W;if(!z&&(I.isActiveShape||I.isActiveSelection)){W=b([],L);var Z=F.append("g").attr("class","outline-controllers");ht(Z),mt()}if(V&&I.hasText){var G=F.select(".label-temp"),et=T(w,I,I.dragmode);_(B,"label-temp",et,G)}function nt(gt){it=+gt.srcElement.getAttribute("data-i"),q=+gt.srcElement.getAttribute("data-j"),Q[it][q].moveFn=X}function X(gt,wt){if(L.length){var Pt=W[it][q][1],Bt=W[it][q][2],kt=L[it],jt=kt.length;if(x(kt)){var Ht=gt,Vt=wt;if(I.isActiveSelection){var ee=P(kt,q);ee[1]===kt[q][1]?Vt=0:Ht=0}for(var te=0;te<jt;te++)if(te!==q){var ae=kt[te];ae[1]===kt[q][1]&&(ae[1]=Pt+Ht),ae[2]===kt[q][2]&&(ae[2]=Bt+Vt)}if(kt[q][1]=Pt+Ht,kt[q][2]=Bt+Vt,!x(kt))for(var le=0;le<jt;le++)for(var ce=0;ce<kt[le].length;ce++)kt[le][ce]=W[it][le][ce]}else kt[q][1]=Pt+gt,kt[q][2]=Bt+wt;O()}}function Y(){R()}function ot(){if(L.length&&L[it]&&L[it].length){for(var gt=[],wt=0;wt<L[it].length;wt++)wt!==q&&gt.push(L[it][wt]);gt.length>1&&!(gt.length===2&&gt[1][0]==="Z")&&(q===0&&(gt[0][0]="M"),L[it]=gt,O(),R())}}function rt(gt,wt){if(gt===2){it=+wt.srcElement.getAttribute("data-i"),q=+wt.srcElement.getAttribute("data-j");var Pt=L[it];!x(Pt)&&!s(Pt)&&ot()}}function ht(gt){Q=[];for(var wt=0;wt<L.length;wt++){var Pt=L[wt],Bt=x(Pt),kt=!Bt&&s(Pt);Q[wt]=[];for(var jt=Pt.length,Ht=0;Ht<jt;Ht++)if(Pt[Ht][0]!=="Z"&&!(kt&&Ht!==f&&Ht!==n&&Ht!==a&&Ht!==o)){var Vt=Bt&&I.isActiveSelection,ee;Vt&&(ee=P(Pt,Ht));var te=Pt[Ht][1],ae=Pt[Ht][2],le=gt.append(Vt?"rect":"circle").attr("data-i",wt).attr("data-j",Ht).style({fill:e.background,stroke:e.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(Vt){var ce=ee[1]-te,pe=ee[2]-ae,we=pe?5:Math.max(Math.min(25,Math.abs(ce)-5),5),ve=ce?5:Math.max(Math.min(25,Math.abs(pe)-5),5);le.classed(pe?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",we).attr("height",ve).attr("x",te-we/2).attr("y",ae-ve/2).attr("transform",E(ce/2,pe/2))}else le.classed("cursor-grab",!0).attr("r",5).attr("cx",te).attr("cy",ae);Q[wt][Ht]={element:le.node(),gd:B,prepFn:nt,doneFn:Y,clickFn:rt},i.init(Q[wt][Ht])}}}function pt(gt,wt){if(L.length)for(var Pt=0;Pt<L.length;Pt++)for(var Bt=0;Bt<L[Pt].length;Bt++)for(var kt=0;kt+2<L[Pt][Bt].length;kt+=2)L[Pt][Bt][kt+1]=W[Pt][Bt][kt+1]+gt,L[Pt][Bt][kt+2]=W[Pt][Bt][kt+2]+wt}function yt(gt,wt){pt(gt,wt),O()}function xt(gt){it=+gt.srcElement.getAttribute("data-i"),it||(it=0),at[it].moveFn=yt}function Ft(){R()}function Et(gt){gt===2&&l(B)}function mt(){if(at=[],!!L.length){var gt=0;at[gt]={element:w[0][0],gd:B,prepFn:xt,doneFn:Ft,clickFn:Et},i.init(at[gt])}}};function b(d,L){for(var w=0;w<L.length;w++){var I=L[w];d[w]=[];for(var z=0;z<I.length;z++){d[w][z]=[];for(var B=0;B<I[z].length;B++)d[w][z][B]=I[z][B]}}return d}function P(d,L){var w=d[L][1],I=d[L][2],z=d.length,B,O,R;return B=(L+1)%z,O=d[B][1],R=d[B][2],O===w&&R===I&&(B=(L+2)%z,O=d[B][1],R=d[B][2]),[B,O,R]}function l(d){if(g(d._fullLayout.dragmode)){y(d);var L=d._fullLayout._activeSelectionIndex,w=(d.layout||{}).selections||[];if(L<w.length){for(var I=[],z=0;z<w.length;z++)z!==L&&I.push(w[z]);delete d._fullLayout._activeSelectionIndex;var B=d._fullLayout.selections[L];d._fullLayout._deselect={xref:B.xref,yref:B.yref},v.call("_guiRelayout",d,{selections:I})}}}},34031:function($,U,t){var M=t(39898),E=t(73972),i=t(71828),S=t(89298),A=t(60165).readPaths,g=t(42359),v=t(48100),e=t(51873).clearOutlineControllers,r=t(7901),f=t(91424),n=t(44467).arrayEditor,a=t(28569),o=t(6964),h=t(21459),y=t(30477),p=y.getPathString;$.exports={draw:x,drawOne:c,eraseActiveShape:l,drawLabel:v};function x(d){var L=d._fullLayout;L._shapeUpperLayer.selectAll("path").remove(),L._shapeLowerLayer.selectAll("path").remove(),L._shapeUpperLayer.selectAll("text").remove(),L._shapeLowerLayer.selectAll("text").remove();for(var w in L._plots){var I=L._plots[w].shapelayer;I&&(I.selectAll("path").remove(),I.selectAll("text").remove())}for(var z=0;z<L.shapes.length;z++)L.shapes[z].visible===!0&&c(d,z)}function s(d){return!!d._fullLayout._outlining}function u(d){return!d._context.edits.shapePosition}function c(d,L){d._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+L+'"]').remove();var w=y.makeShapesOptionsAndPlotinfo(d,L),I=w.options,z=w.plotinfo;if(!I._input||I.visible!==!0)return;if(I.layer!=="below")O(d._fullLayout._shapeUpperLayer);else if(I.xref==="paper"||I.yref==="paper")O(d._fullLayout._shapeLowerLayer);else if(z._hadPlotinfo){var B=z.mainplotinfo||z;O(B.shapelayer)}else O(d._fullLayout._shapeLowerLayer);function O(R){var C=p(d,I),F={"data-index":L,"fill-rule":I.fillrule,d:C},N=I.opacity,V=I.fillcolor,K=I.line.width?I.line.color:"rgba(0,0,0,0)",Q=I.line.width,at=I.line.dash;!Q&&I.editable===!0&&(Q=5,at="solid");var it=C[C.length-1]!=="Z",q=u(d)&&I.editable&&d._fullLayout._activeShapeIndex===L;q&&(V=it?"rgba(0,0,0,0)":d._fullLayout.activeshape.fillcolor,N=d._fullLayout.activeshape.opacity);var W=R.append("g").classed("shape-group",!0).attr({"data-index":L}),Z=W.append("path").attr(F).style("opacity",N).call(r.stroke,K).call(r.fill,V).call(f.dashLine,at,Q);T(W,d,I),v(d,L,I,W);var G;if((q||d._context.edits.shapePosition)&&(G=n(d.layout,"shapes",I)),q){Z.style({cursor:"move"});var et={element:Z.node(),plotinfo:z,gd:d,editHelpers:G,hasText:I.label.text||I.label.texttemplate,isActiveShape:!0},nt=A(C,d);g(nt,Z,et)}else d._context.edits.shapePosition?k(d,Z,I,L,R,G):I.editable===!0&&Z.style("pointer-events",it||r.opacity(V)*N<=.5?"stroke":"all");Z.node().addEventListener("click",function(){return b(d,Z)})}}function T(d,L,w){var I=(w.xref+w.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");f.setClipUrl(d,I?"clip"+L._fullLayout._uid+I:null,L)}function k(d,L,w,I,z,B){var O=10,R=10,C=w.xsizemode==="pixel",F=w.ysizemode==="pixel",N=w.type==="line",V=w.type==="path",K=B.modifyItem,Q,at,it,q,W,Z,G,et,nt,X,Y,ot,rt,ht,pt,yt=M.select(L.node().parentNode),xt=S.getFromId(d,w.xref),Ft=S.getRefType(w.xref),Et=S.getFromId(d,w.yref),mt=S.getRefType(w.yref),gt=y.getDataToPixel(d,xt,!1,Ft),wt=y.getDataToPixel(d,Et,!0,mt),Pt=y.getPixelToData(d,xt,!1,Ft),Bt=y.getPixelToData(d,Et,!0,mt),kt=Vt(),jt={element:kt.node(),gd:d,prepFn:ae,doneFn:le,clickFn:ce},Ht;a.init(jt),kt.node().onmousemove=te;function Vt(){return N?ee():L}function ee(){var Rt=10,zt=Math.max(w.line.width,Rt),Tt=z.append("g").attr("data-index",I).attr("drag-helper",!0);Tt.append("path").attr("d",L.attr("d")).style({cursor:"move","stroke-width":zt,"stroke-opacity":"0"});var ft={"fill-opacity":"0"},ut=Math.max(zt/2,Rt);return Tt.append("circle").attr({"data-line-point":"start-point",cx:C?gt(w.xanchor)+w.x0:gt(w.x0),cy:F?wt(w.yanchor)-w.y0:wt(w.y0),r:ut}).style(ft).classed("cursor-grab",!0),Tt.append("circle").attr({"data-line-point":"end-point",cx:C?gt(w.xanchor)+w.x1:gt(w.x1),cy:F?wt(w.yanchor)-w.y1:wt(w.y1),r:ut}).style(ft).classed("cursor-grab",!0),Tt}function te(Rt){if(s(d)){Ht=null;return}if(N)Rt.target.tagName==="path"?Ht="move":Ht=Rt.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var zt=jt.element.getBoundingClientRect(),Tt=zt.right-zt.left,ft=zt.bottom-zt.top,ut=Rt.clientX-zt.left,vt=Rt.clientY-zt.top,St=!V&&Tt>O&&ft>R&&!Rt.shiftKey?a.getCursor(ut/Tt,1-vt/ft):"move";o(L,St),Ht=St.split("-")[0]}}function ae(Rt){s(d)||(C&&(W=gt(w.xanchor)),F&&(Z=wt(w.yanchor)),w.type==="path"?pt=w.path:(Q=C?w.x0:gt(w.x0),at=F?w.y0:wt(w.y0),it=C?w.x1:gt(w.x1),q=F?w.y1:wt(w.y1)),Q<it?(nt=Q,rt="x0",X=it,ht="x1"):(nt=it,rt="x1",X=Q,ht="x0"),!F&&at<q||F&&at>q?(G=at,Y="y0",et=q,ot="y1"):(G=q,Y="y1",et=at,ot="y0"),te(Rt),ve(z,w),It(L,w,d),jt.moveFn=Ht==="move"?pe:we,jt.altKey=Rt.altKey)}function le(){s(d)||(o(L),Mt(z),T(L,d,w),E.call("_guiRelayout",d,B.getUpdateObj()))}function ce(){s(d)||Mt(z)}function pe(Rt,zt){if(w.type==="path"){var Tt=function(vt){return vt},ft=Tt,ut=Tt;C?K("xanchor",w.xanchor=Pt(W+Rt)):(ft=function(vt){return Pt(gt(vt)+Rt)},xt&&xt.type==="date"&&(ft=y.encodeDate(ft))),F?K("yanchor",w.yanchor=Bt(Z+zt)):(ut=function(vt){return Bt(wt(vt)+zt)},Et&&Et.type==="date"&&(ut=y.encodeDate(ut))),K("path",w.path=_(pt,ft,ut))}else C?K("xanchor",w.xanchor=Pt(W+Rt)):(K("x0",w.x0=Pt(Q+Rt)),K("x1",w.x1=Pt(it+Rt))),F?K("yanchor",w.yanchor=Bt(Z+zt)):(K("y0",w.y0=Bt(at+zt)),K("y1",w.y1=Bt(q+zt)));L.attr("d",p(d,w)),ve(z,w),v(d,I,w,yt)}function we(Rt,zt){if(V){var Tt=function(he){return he},ft=Tt,ut=Tt;C?K("xanchor",w.xanchor=Pt(W+Rt)):(ft=function(he){return Pt(gt(he)+Rt)},xt&&xt.type==="date"&&(ft=y.encodeDate(ft))),F?K("yanchor",w.yanchor=Bt(Z+zt)):(ut=function(he){return Bt(wt(he)+zt)},Et&&Et.type==="date"&&(ut=y.encodeDate(ut))),K("path",w.path=_(pt,ft,ut))}else if(N){if(Ht==="resize-over-start-point"){var vt=Q+Rt,St=F?at-zt:at+zt;K("x0",w.x0=C?vt:Pt(vt)),K("y0",w.y0=F?St:Bt(St))}else if(Ht==="resize-over-end-point"){var Ot=it+Rt,Xt=F?q-zt:q+zt;K("x1",w.x1=C?Ot:Pt(Ot)),K("y1",w.y1=F?Xt:Bt(Xt))}}else{var $t=function(he){return Ht.indexOf(he)!==-1},de=$t("n"),Me=$t("s"),Fe=$t("w"),De=$t("e"),Ae=de?G+zt:G,Ve=Me?et+zt:et,Qe=Fe?nt+Rt:nt,Sr=De?X+Rt:X;F&&(de&&(Ae=G-zt),Me&&(Ve=et-zt)),(!F&&Ve-Ae>R||F&&Ae-Ve>R)&&(K(Y,w[Y]=F?Ae:Bt(Ae)),K(ot,w[ot]=F?Ve:Bt(Ve))),Sr-Qe>O&&(K(rt,w[rt]=C?Qe:Pt(Qe)),K(ht,w[ht]=C?Sr:Pt(Sr)))}L.attr("d",p(d,w)),ve(z,w),v(d,I,w,yt)}function ve(Rt,zt){(C||F)&&Tt();function Tt(){var ft=zt.type!=="path",ut=Rt.selectAll(".visual-cue").data([0]),vt=1;ut.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":vt}).classed("visual-cue",!0);var St=gt(C?zt.xanchor:i.midRange(ft?[zt.x0,zt.x1]:y.extractPathCoords(zt.path,h.paramIsX))),Ot=wt(F?zt.yanchor:i.midRange(ft?[zt.y0,zt.y1]:y.extractPathCoords(zt.path,h.paramIsY)));if(St=y.roundPositionForSharpStrokeRendering(St,vt),Ot=y.roundPositionForSharpStrokeRendering(Ot,vt),C&&F){var Xt="M"+(St-1-vt)+","+(Ot-1-vt)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";ut.attr("d",Xt)}else if(C){var $t="M"+(St-1-vt)+","+(Ot-9-vt)+"v18 h2 v-18 Z";ut.attr("d",$t)}else{var de="M"+(St-9-vt)+","+(Ot-1-vt)+"h18 v2 h-18 Z";ut.attr("d",de)}}}function Mt(Rt){Rt.selectAll(".visual-cue").remove()}function It(Rt,zt,Tt){var ft=zt.xref,ut=zt.yref,vt=S.getFromId(Tt,ft),St=S.getFromId(Tt,ut),Ot="";ft!=="paper"&&!vt.autorange&&(Ot+=ft),ut!=="paper"&&!St.autorange&&(Ot+=ut),f.setClipUrl(Rt,Ot?"clip"+Tt._fullLayout._uid+Ot:null,Tt)}}function _(d,L,w){return d.replace(h.segmentRE,function(I){var z=0,B=I.charAt(0),O=h.paramIsX[B],R=h.paramIsY[B],C=h.numParams[B],F=I.substr(1).replace(h.paramRE,function(N){return z>=C||(O[z]?N=L(N):R[z]&&(N=w(N)),z++),N});return B+F})}function b(d,L){if(u(d)){var w=L.node(),I=+w.getAttribute("data-index");if(I>=0){if(I===d._fullLayout._activeShapeIndex){P(d);return}d._fullLayout._activeShapeIndex=I,d._fullLayout._deactivateShape=P,x(d)}}}function P(d){if(u(d)){var L=d._fullLayout._activeShapeIndex;L>=0&&(e(d),delete d._fullLayout._activeShapeIndex,x(d))}}function l(d){if(u(d)){e(d);var L=d._fullLayout._activeShapeIndex,w=(d.layout||{}).shapes||[];if(L<w.length){for(var I=[],z=0;z<w.length;z++)z!==L&&I.push(w[z]);return delete d._fullLayout._activeShapeIndex,E.call("_guiRelayout",d,{shapes:I})}}}},29241:function($,U,t){var M=t(30962).overrideAll,E=t(9012),i=t(41940),S=t(79952).P,A=t(1426).extendFlat,g=t(5386).R,v=t(37281);$.exports=M({newshape:{visible:A({},E.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:A({},E.legend,{}),legendgroup:A({},E.legendgroup,{}),legendgrouptitle:{text:A({},E.legendgrouptitle.text,{}),font:i({})},legendrank:A({},E.legendrank,{}),legendwidth:A({},E.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:A({},S,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:A({},E.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:g({newshape:!0},{keys:Object.keys(v)}),font:i({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},89995:function($){var U=32;$.exports={CIRCLE_SIDES:U,i000:0,i090:U/4,i180:U/2,i270:U/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},45547:function($,U,t){var M=t(7901),E=t(71828);function i(S,A){return S?"bottom":A.indexOf("top")!==-1?"top":A.indexOf("bottom")!==-1?"bottom":"middle"}$.exports=function(S,A,g){g("newshape.visible"),g("newshape.name"),g("newshape.showlegend"),g("newshape.legend"),g("newshape.legendwidth"),g("newshape.legendgroup"),g("newshape.legendgrouptitle.text"),E.coerceFont(g,"newshape.legendgrouptitle.font"),g("newshape.legendrank"),g("newshape.drawdirection"),g("newshape.layer"),g("newshape.fillcolor"),g("newshape.fillrule"),g("newshape.opacity");var v=g("newshape.line.width");if(v){var e=(S||{}).plot_bgcolor||"#FFF";g("newshape.line.color",M.contrast(e)),g("newshape.line.dash")}var r=S.dragmode==="drawline",f=g("newshape.label.text"),n=g("newshape.label.texttemplate");if(f||n){g("newshape.label.textangle");var a=g("newshape.label.textposition",r?"middle":"middle center");g("newshape.label.xanchor"),g("newshape.label.yanchor",i(r,a)),g("newshape.label.padding"),E.coerceFont(g,"newshape.label.font",A.font)}g("activeshape.fillcolor"),g("activeshape.opacity")}},60165:function($,U,t){var M=t(95616),E=t(89995),i=E.CIRCLE_SIDES,S=E.SQRT2,A=t(75549),g=A.p2r,v=A.r2p,e=[0,3,4,5,6,1,2],r=[0,3,4,1,2];U.writePaths=function(a){var o=a.length;if(!o)return"M0,0Z";for(var h="",y=0;y<o;y++)for(var p=a[y].length,x=0;x<p;x++){var s=a[y][x][0];if(s==="Z")h+="Z";else for(var u=a[y][x].length,c=0;c<u;c++){var T=c;s==="Q"||s==="S"?T=r[c]:s==="C"&&(T=e[c]),h+=a[y][x][T],c>0&&c<u-1&&(h+=",")}}return h},U.readPaths=function(a,o,h,y){var p=M(a),x=[],s=-1,u=function(){s++,x[s]=[]},c,T=0,k=0,_,b,P=function(){_=T,b=k};P();for(var l=0;l<p.length;l++){var d=[],L,w,I,z,B=p[l][0],O=B;switch(B){case"M":u(),T=+p[l][1],k=+p[l][2],d.push([O,T,k]),P();break;case"Q":case"S":L=+p[l][1],I=+p[l][2],T=+p[l][3],k=+p[l][4],d.push([O,T,k,L,I]);break;case"C":L=+p[l][1],I=+p[l][2],w=+p[l][3],z=+p[l][4],T=+p[l][5],k=+p[l][6],d.push([O,T,k,L,I,w,z]);break;case"T":case"L":T=+p[l][1],k=+p[l][2],d.push([O,T,k]);break;case"H":O="L",T=+p[l][1],d.push([O,T,k]);break;case"V":O="L",k=+p[l][1],d.push([O,T,k]);break;case"A":O="L";var R=+p[l][1],C=+p[l][2];+p[l][4]||(R=-R,C=-C);var F=T-R,N=k;for(c=1;c<=i/2;c++){var V=2*Math.PI*c/i;d.push([O,F+R*Math.cos(V),N+C*Math.sin(V)])}break;case"Z":(T!==_||k!==b)&&(T=_,k=b,d.push([O,T,k]));break}for(var K=(h||{}).domain,Q=o._fullLayout._size,at=h&&h.xsizemode==="pixel",it=h&&h.ysizemode==="pixel",q=y===!1,W=0;W<d.length;W++){for(c=0;c+2<7;c+=2){var Z=d[W][c+1],G=d[W][c+2];Z===void 0||G===void 0||(T=Z,k=G,h&&(h.xaxis&&h.xaxis.p2r?(q&&(Z-=h.xaxis._offset),at?Z=v(h.xaxis,h.xanchor)+Z:Z=g(h.xaxis,Z)):(q&&(Z-=Q.l),K?Z=K.x[0]+Z/Q.w:Z=Z/Q.w),h.yaxis&&h.yaxis.p2r?(q&&(G-=h.yaxis._offset),it?G=v(h.yaxis,h.yanchor)-G:G=g(h.yaxis,G)):(q&&(G-=Q.t),K?G=K.y[1]-G/Q.h:G=1-G/Q.h)),d[W][c+1]=Z,d[W][c+2]=G)}x[s].push(d[W].slice())}}return x};function f(a,o){return Math.abs(a-o)<=1e-6}function n(a,o){var h=o[1]-a[1],y=o[2]-a[2];return Math.sqrt(h*h+y*y)}U.pointsOnRectangle=function(a){var o=a.length;if(o!==5)return!1;for(var h=1;h<3;h++){var y=a[0][h]-a[1][h],p=a[3][h]-a[2][h];if(!f(y,p))return!1;var x=a[0][h]-a[3][h],s=a[1][h]-a[2][h];if(!f(x,s))return!1}return!f(a[0][1],a[1][1])&&!f(a[0][1],a[3][1])?!1:!!(n(a[0],a[1])*n(a[0],a[3]))},U.pointsOnEllipse=function(a){var o=a.length;if(o!==i+1)return!1;o=i;for(var h=0;h<o;h++){var y=(o*2-h)%o,p=(o/2+y)%o,x=(o/2+h)%o;if(!f(n(a[h],a[x]),n(a[y],a[p])))return!1}return!0},U.handleEllipse=function(a,o,h){if(!a)return[o,h];var y=U.ellipseOver({x0:o[0],y0:o[1],x1:h[0],y1:h[1]}),p=(y.x1+y.x0)/2,x=(y.y1+y.y0)/2,s=(y.x1-y.x0)/2,u=(y.y1-y.y0)/2;s||(s=u=u/S),u||(u=s=s/S);for(var c=[],T=0;T<i;T++){var k=T*2*Math.PI/i;c.push([p+s*Math.cos(k),x+u*Math.sin(k)])}return c},U.ellipseOver=function(a){var o=a.x0,h=a.y0,y=a.x1,p=a.y1,x=y-o,s=p-h;o-=x,h-=s;var u=(o+y)/2,c=(h+p)/2,T=S;return x*=T,s*=T,{x0:u-x,y0:c-s,x1:u+x,y1:c+s}},U.fixDatesForPaths=function(a,o,h){var y=o.type==="date",p=h.type==="date";if(!y&&!p)return a;for(var x=0;x<a.length;x++)for(var s=0;s<a[x].length;s++)for(var u=0;u+2<a[x][s].length;u+=2)y&&(a[x][s][u+1]=a[x][s][u+1].replace(" ","_")),p&&(a[x][s][u+2]=a[x][s][u+2].replace(" ","_"));return a}},90551:function($,U,t){var M=t(64505),E=M.drawMode,i=M.openMode,S=t(89995),A=S.i000,g=S.i090,v=S.i180,e=S.i270,r=S.cos45,f=S.sin45,n=t(75549),a=n.p2r,o=n.r2p,h=t(51873),y=h.clearOutline,p=t(60165),x=p.readPaths,s=p.writePaths,u=p.ellipseOver,c=p.fixDatesForPaths;function T(_,b){if(_.length){var P=_[0][0];if(P){var l=b.gd,d=b.isActiveShape,L=b.dragmode,w=(l.layout||{}).shapes||[];if(!E(L)&&d!==void 0){var I=l._fullLayout._activeShapeIndex;if(I<w.length)switch(l._fullLayout.shapes[I].type){case"rect":L="drawrect";break;case"circle":L="drawcircle";break;case"line":L="drawline";break;case"path":var z=w[I].path||"";z[z.length-1]==="Z"?L="drawclosedpath":L="drawopenpath";break}}var B=k(_,b,L);y(l);for(var O=b.editHelpers,R=(O||{}).modifyItem,C=[],F=0;F<w.length;F++){var N=l._fullLayout.shapes[F];if(C[F]=N._input,d!==void 0&&F===l._fullLayout._activeShapeIndex){var V=B;switch(N.type){case"line":case"rect":case"circle":R("x0",V.x0),R("x1",V.x1),R("y0",V.y0),R("y1",V.y1);break;case"path":R("path",V.path);break}}}return d===void 0?(C.push(B),C):O?O.getUpdateObj():{}}}}function k(_,b,P){var l=_[0][0],d=b.gd,L=l.getAttribute("d"),w=d._fullLayout.newshape,I=b.plotinfo,z=b.isActiveShape,B=I.xaxis,O=I.yaxis,R=!!I.domain||!I.xaxis,C=!!I.domain||!I.yaxis,F=i(P),N=x(L,d,I,z),V={editable:!0,visible:w.visible,name:w.name,showlegend:w.showlegend,legend:w.legend,legendwidth:w.legendwidth,legendgroup:w.legendgroup,legendgrouptitle:{text:w.legendgrouptitle.text,font:w.legendgrouptitle.font},legendrank:w.legendrank,label:w.label,xref:R?"paper":B._id,yref:C?"paper":O._id,layer:w.layer,opacity:w.opacity,line:{color:w.line.color,width:w.line.width,dash:w.line.dash}};F||(V.fillcolor=w.fillcolor,V.fillrule=w.fillrule);var K;if(N.length===1&&(K=N[0]),K&&K.length===5&&P==="drawrect")V.type="rect",V.x0=K[0][1],V.y0=K[0][2],V.x1=K[2][1],V.y1=K[2][2];else if(K&&P==="drawline")V.type="line",V.x0=K[0][1],V.y0=K[0][2],V.x1=K[1][1],V.y1=K[1][2];else if(K&&P==="drawcircle"){V.type="circle";var Q=K[A][1],at=K[g][1],it=K[v][1],q=K[e][1],W=K[A][2],Z=K[g][2],G=K[v][2],et=K[e][2],nt=I.xaxis&&(I.xaxis.type==="date"||I.xaxis.type==="log"),X=I.yaxis&&(I.yaxis.type==="date"||I.yaxis.type==="log");nt&&(Q=o(I.xaxis,Q),at=o(I.xaxis,at),it=o(I.xaxis,it),q=o(I.xaxis,q)),X&&(W=o(I.yaxis,W),Z=o(I.yaxis,Z),G=o(I.yaxis,G),et=o(I.yaxis,et));var Y=(at+q)/2,ot=(W+G)/2,rt=(q-at+it-Q)/2,ht=(et-Z+G-W)/2,pt=u({x0:Y,y0:ot,x1:Y+rt*r,y1:ot+ht*f});nt&&(pt.x0=a(I.xaxis,pt.x0),pt.x1=a(I.xaxis,pt.x1)),X&&(pt.y0=a(I.yaxis,pt.y0),pt.y1=a(I.yaxis,pt.y1)),V.x0=pt.x0,V.y0=pt.y0,V.x1=pt.x1,V.y1=pt.y1}else V.type="path",B&&O&&c(N,B,O),V.path=s(N),K=null;return V}$.exports={newShapes:T,createShapeObj:k}},51873:function($){function U(M){var E=M._fullLayout._zoomlayer;E&&E.selectAll(".outline-controllers").remove()}function t(M){var E=M._fullLayout._zoomlayer;E&&E.selectAll(".select-outline").remove(),M._fullLayout._outlining=!1}$.exports={clearOutlineControllers:U,clearOutline:t}},30477:function($,U,t){var M=t(21459),E=t(71828),i=t(89298);U.rangeToShapePosition=function(A){return A.type==="log"?A.r2d:function(g){return g}},U.shapePositionToRange=function(A){return A.type==="log"?A.d2r:function(g){return g}},U.decodeDate=function(A){return function(g){return g.replace&&(g=g.replace("_"," ")),A(g)}},U.encodeDate=function(A){return function(g){return A(g).replace(" ","_")}},U.extractPathCoords=function(A,g,v){var e=[],r=A.match(M.segmentRE);return r.forEach(function(f){var n=g[f.charAt(0)].drawn;if(n!==void 0){var a=f.substr(1).match(M.paramRE);if(!(!a||a.length<n)){var o=a[n],h=v?o:E.cleanNumber(o);e.push(h)}}}),e},U.getDataToPixel=function(A,g,v,e){var r=A._fullLayout._size,f;if(g)if(e==="domain")f=function(a){return g._length*(v?1-a:a)+g._offset};else{var n=U.shapePositionToRange(g);f=function(a){return g._offset+g.r2p(n(a,!0))},g.type==="date"&&(f=U.decodeDate(f))}else v?f=function(a){return r.t+r.h*(1-a)}:f=function(a){return r.l+r.w*a};return f},U.getPixelToData=function(A,g,v,e){var r=A._fullLayout._size,f;if(g)if(e==="domain")f=function(a){var o=(a-g._offset)/g._length;return v?1-o:o};else{var n=U.rangeToShapePosition(g);f=function(a){return n(g.p2r(a-g._offset))}}else v?f=function(a){return 1-(a-r.t)/r.h}:f=function(a){return(a-r.l)/r.w};return f},U.roundPositionForSharpStrokeRendering=function(A,g){var v=Math.round(g%2)===1,e=Math.round(A);return v?e+.5:e},U.makeShapesOptionsAndPlotinfo=function(A,g){var v=A._fullLayout.shapes[g]||{},e=A._fullLayout._plots[v.xref+v.yref],r=!!e;return r?e._hadPlotinfo=!0:(e={},v.xref&&v.xref!=="paper"&&(e.xaxis=A._fullLayout[v.xref+"axis"]),v.yref&&v.yref!=="paper"&&(e.yaxis=A._fullLayout[v.yref+"axis"])),e.xsizemode=v.xsizemode,e.ysizemode=v.ysizemode,e.xanchor=v.xanchor,e.yanchor=v.yanchor,{options:v,plotinfo:e}},U.makeSelectionsOptionsAndPlotinfo=function(A,g){var v=A._fullLayout.selections[g]||{},e=A._fullLayout._plots[v.xref+v.yref],r=!!e;return r?e._hadPlotinfo=!0:(e={},v.xref&&(e.xaxis=A._fullLayout[v.xref+"axis"]),v.yref&&(e.yaxis=A._fullLayout[v.yref+"axis"])),{options:v,plotinfo:e}},U.getPathString=function(A,g){var v=g.type,e=i.getRefType(g.xref),r=i.getRefType(g.yref),f=i.getFromId(A,g.xref),n=i.getFromId(A,g.yref),a=A._fullLayout._size,o,h,y,p,x,s,u,c;if(f?e==="domain"?h=function(I){return f._offset+f._length*I}:(o=U.shapePositionToRange(f),h=function(I){return f._offset+f.r2p(o(I,!0))}):h=function(I){return a.l+a.w*I},n?r==="domain"?p=function(I){return n._offset+n._length*(1-I)}:(y=U.shapePositionToRange(n),p=function(I){return n._offset+n.r2p(y(I,!0))}):p=function(I){return a.t+a.h*(1-I)},v==="path")return f&&f.type==="date"&&(h=U.decodeDate(h)),n&&n.type==="date"&&(p=U.decodeDate(p)),S(g,h,p);if(g.xsizemode==="pixel"){var T=h(g.xanchor);x=T+g.x0,s=T+g.x1}else x=h(g.x0),s=h(g.x1);if(g.ysizemode==="pixel"){var k=p(g.yanchor);u=k-g.y0,c=k-g.y1}else u=p(g.y0),c=p(g.y1);if(v==="line")return"M"+x+","+u+"L"+s+","+c;if(v==="rect")return"M"+x+","+u+"H"+s+"V"+c+"H"+x+"Z";var _=(x+s)/2,b=(u+c)/2,P=Math.abs(_-x),l=Math.abs(b-u),d="A"+P+","+l,L=_+P+","+b,w=_+","+(b-l);return"M"+L+d+" 0 1,1 "+w+d+" 0 0,1 "+L+"Z"};function S(A,g,v){var e=A.path,r=A.xsizemode,f=A.ysizemode,n=A.xanchor,a=A.yanchor;return e.replace(M.segmentRE,function(o){var h=0,y=o.charAt(0),p=M.paramIsX[y],x=M.paramIsY[y],s=M.numParams[y],u=o.substr(1).replace(M.paramRE,function(c){return p[h]?r==="pixel"?c=g(n)+Number(c):c=g(c):x[h]&&(f==="pixel"?c=v(a)-Number(c):c=v(c)),h++,h>s&&(c="X"),c});return h>s&&(u=u.replace(/[\s,]*X.*/,""),E.log("Ignoring extra params in segment "+o)),y+u})}},89853:function($,U,t){var M=t(34031);$.exports={moduleType:"component",name:"shapes",layoutAttributes:t(89827),supplyLayoutDefaults:t(84726),supplyDrawNewShapeDefaults:t(45547),includeBasePlot:t(76325)("shapes"),calcAutorange:t(5627),draw:M.draw,drawOne:M.drawOne}},37281:function($){function U(o,h){return h?h.d2l(o):o}function t(o,h){return h?h.l2d(o):o}function M(o){return o.x0}function E(o){return o.x1}function i(o){return o.y0}function S(o){return o.y1}function A(o,h){return U(o.x1,h)-U(o.x0,h)}function g(o,h,y){return U(o.y1,y)-U(o.y0,y)}function v(o,h){return Math.abs(A(o,h))}function e(o,h,y){return Math.abs(g(o,h,y))}function r(o,h,y){return o.type!=="line"?void 0:Math.sqrt(Math.pow(A(o,h),2)+Math.pow(g(o,h,y),2))}function f(o,h){return t((U(o.x1,h)+U(o.x0,h))/2,h)}function n(o,h,y){return t((U(o.y1,y)+U(o.y0,y))/2,y)}function a(o,h,y){return o.type!=="line"?void 0:g(o,h,y)/A(o,h)}$.exports={x0:M,x1:E,y0:i,y1:S,slope:a,dx:A,dy:g,width:v,height:e,length:r,xcenter:f,ycenter:n}},75067:function($,U,t){var M=t(41940),E=t(35025),i=t(1426).extendDeepAll,S=t(30962).overrideAll,A=t(85594),g=t(44467).templatedArray,v=t(98292),e=g("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});$.exports=S(g("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:e,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:i(E({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:A.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:M({})},font:M({}),activebgcolor:{valType:"color",dflt:v.gripBgActiveColor},bgcolor:{valType:"color",dflt:v.railBgColor},bordercolor:{valType:"color",dflt:v.railBorderColor},borderwidth:{valType:"number",min:0,dflt:v.railBorderWidth},ticklen:{valType:"number",min:0,dflt:v.tickLength},tickcolor:{valType:"color",dflt:v.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:v.minorTickLength}}),"arraydraw","from-root")},98292:function($){$.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},12343:function($,U,t){var M=t(71828),E=t(85501),i=t(75067),S=t(98292),A=S.name,g=i.steps;$.exports=function(r,f){E(r,f,{name:A,handleItemDefaults:v})};function v(r,f,n){function a(c,T){return M.coerce(r,f,i,c,T)}for(var o=E(r,f,{name:"steps",handleItemDefaults:e}),h=0,y=0;y<o.length;y++)o[y].visible&&h++;var p;if(h<2?p=f.visible=!1:p=a("visible"),!!p){f._stepCount=h;var x=f._visibleSteps=M.filterVisible(o),s=a("active");(o[s]||{}).visible||(f.active=x[0]._index),a("x"),a("y"),M.noneOrAll(r,f,["x","y"]),a("xanchor"),a("yanchor"),a("len"),a("lenmode"),a("pad.t"),a("pad.r"),a("pad.b"),a("pad.l"),M.coerceFont(a,"font",n.font);var u=a("currentvalue.visible");u&&(a("currentvalue.xanchor"),a("currentvalue.prefix"),a("currentvalue.suffix"),a("currentvalue.offset"),M.coerceFont(a,"currentvalue.font",f.font)),a("transition.duration"),a("transition.easing"),a("bgcolor"),a("activebgcolor"),a("bordercolor"),a("borderwidth"),a("ticklen"),a("tickwidth"),a("tickcolor"),a("minorticklen")}}function e(r,f){function n(h,y){return M.coerce(r,f,g,h,y)}var a;if(r.method!=="skip"&&!Array.isArray(r.args)?a=f.visible=!1:a=n("visible"),a){n("method"),n("args");var o=n("label","step-"+f._index);n("value",o),n("execute")}}},44504:function($,U,t){var M=t(39898),E=t(74875),i=t(7901),S=t(91424),A=t(71828),g=A.strTranslate,v=t(63893),e=t(44467).arrayEditor,r=t(98292),f=t(18783),n=f.LINE_SPACING,a=f.FROM_TL,o=f.FROM_BR;$.exports=function(O){var R=O._context.staticPlot,C=O._fullLayout,F=y(C,O),N=C._infolayer.selectAll("g."+r.containerClassName).data(F.length>0?[0]:[]);N.enter().append("g").classed(r.containerClassName,!0).style("cursor",R?null:"ew-resize");function V(it){it._commandObserver&&(it._commandObserver.remove(),delete it._commandObserver),E.autoMargin(O,h(it))}if(N.exit().each(function(){M.select(this).selectAll("g."+r.groupClassName).each(V)}).remove(),F.length!==0){var K=N.selectAll("g."+r.groupClassName).data(F,p);K.enter().append("g").classed(r.groupClassName,!0),K.exit().each(V).remove();for(var Q=0;Q<F.length;Q++){var at=F[Q];x(O,at)}K.each(function(it){var q=M.select(this);d(it),E.manageCommandObserver(O,it,it._visibleSteps,function(W){var Z=q.data()[0];Z.active!==W.index&&(Z._dragging||b(O,q,Z,W.index,!1,!0))}),s(O,M.select(this),it)})}};function h(O){return r.autoMarginIdRoot+O._index}function y(O,R){for(var C=O[r.name],F=[],N=0;N<C.length;N++){var V=C[N];V.visible&&(V._gd=R,F.push(V))}return F}function p(O){return O._index}function x(O,R){var C=S.tester.selectAll("g."+r.labelGroupClass).data(R._visibleSteps);C.enter().append("g").classed(r.labelGroupClass,!0);var F=0,N=0;C.each(function(et){var nt=M.select(this),X=T(nt,{step:et},R),Y=X.node();if(Y){var ot=S.bBox(Y);N=Math.max(N,ot.height),F=Math.max(F,ot.width)}}),C.remove();var V=R._dims={};V.inputAreaWidth=Math.max(r.railWidth,r.gripHeight);var K=O._fullLayout._size;V.lx=K.l+K.w*R.x,V.ly=K.t+K.h*(1-R.y),R.lenmode==="fraction"?V.outerLength=Math.round(K.w*R.len):V.outerLength=R.len,V.inputAreaStart=0,V.inputAreaLength=Math.round(V.outerLength-R.pad.l-R.pad.r);var Q=V.inputAreaLength-2*r.stepInset,at=Q/(R._stepCount-1),it=F+r.labelPadding;if(V.labelStride=Math.max(1,Math.ceil(it/at)),V.labelHeight=N,V.currentValueMaxWidth=0,V.currentValueHeight=0,V.currentValueTotalHeight=0,V.currentValueMaxLines=1,R.currentvalue.visible){var q=S.tester.append("g");C.each(function(et){var nt=u(q,R,et.label),X=nt.node()&&S.bBox(nt.node())||{width:0,height:0},Y=v.lineCount(nt);V.currentValueMaxWidth=Math.max(V.currentValueMaxWidth,Math.ceil(X.width)),V.currentValueHeight=Math.max(V.currentValueHeight,Math.ceil(X.height)),V.currentValueMaxLines=Math.max(V.currentValueMaxLines,Y)}),V.currentValueTotalHeight=V.currentValueHeight+R.currentvalue.offset,q.remove()}V.height=V.currentValueTotalHeight+r.tickOffset+R.ticklen+r.labelOffset+V.labelHeight+R.pad.t+R.pad.b;var W="left";A.isRightAnchor(R)&&(V.lx-=V.outerLength,W="right"),A.isCenterAnchor(R)&&(V.lx-=V.outerLength/2,W="center");var Z="top";A.isBottomAnchor(R)&&(V.ly-=V.height,Z="bottom"),A.isMiddleAnchor(R)&&(V.ly-=V.height/2,Z="middle"),V.outerLength=Math.ceil(V.outerLength),V.height=Math.ceil(V.height),V.lx=Math.round(V.lx),V.ly=Math.round(V.ly);var G={y:R.y,b:V.height*o[Z],t:V.height*a[Z]};R.lenmode==="fraction"?(G.l=0,G.xl=R.x-R.len*a[W],G.r=0,G.xr=R.x+R.len*o[W]):(G.x=R.x,G.l=V.outerLength*a[W],G.r=V.outerLength*o[W]),E.autoMargin(O,h(R),G)}function s(O,R,C){(C.steps[C.active]||{}).visible||(C.active=C._visibleSteps[0]._index),R.call(u,C).call(B,C).call(k,C).call(l,C).call(z,O,C).call(c,O,C);var F=C._dims;S.setTranslate(R,F.lx+C.pad.l,F.ly+C.pad.t),R.call(L,C,!1),R.call(u,C)}function u(O,R,C){if(R.currentvalue.visible){var F=R._dims,N,V;switch(R.currentvalue.xanchor){case"right":N=F.inputAreaLength-r.currentValueInset-F.currentValueMaxWidth,V="left";break;case"center":N=F.inputAreaLength*.5,V="middle";break;default:N=r.currentValueInset,V="left"}var K=A.ensureSingle(O,"text",r.labelClass,function(Z){Z.attr({"text-anchor":V,"data-notex":1})}),Q=R.currentvalue.prefix?R.currentvalue.prefix:"";if(typeof C=="string")Q+=C;else{var at=R.steps[R.active].label,it=R._gd._fullLayout._meta;it&&(at=A.templateString(at,it)),Q+=at}R.currentvalue.suffix&&(Q+=R.currentvalue.suffix),K.call(S.font,R.currentvalue.font).text(Q).call(v.convertToTspans,R._gd);var q=v.lineCount(K),W=(F.currentValueMaxLines+1-q)*R.currentvalue.font.size*n;return v.positionText(K,N,W),K}}function c(O,R,C){var F=A.ensureSingle(O,"rect",r.gripRectClass,function(N){N.call(P,R,O,C).style("pointer-events","all")});F.attr({width:r.gripWidth,height:r.gripHeight,rx:r.gripRadius,ry:r.gripRadius}).call(i.stroke,C.bordercolor).call(i.fill,C.bgcolor).style("stroke-width",C.borderwidth+"px")}function T(O,R,C){var F=A.ensureSingle(O,"text",r.labelClass,function(K){K.attr({"text-anchor":"middle","data-notex":1})}),N=R.step.label,V=C._gd._fullLayout._meta;return V&&(N=A.templateString(N,V)),F.call(S.font,C.font).text(N).call(v.convertToTspans,C._gd),F}function k(O,R){var C=A.ensureSingle(O,"g",r.labelsClass),F=R._dims,N=C.selectAll("g."+r.labelGroupClass).data(F.labelSteps);N.enter().append("g").classed(r.labelGroupClass,!0),N.exit().remove(),N.each(function(V){var K=M.select(this);K.call(T,V,R),S.setTranslate(K,w(R,V.fraction),r.tickOffset+R.ticklen+R.font.size*n+r.labelOffset+F.currentValueTotalHeight)})}function _(O,R,C,F,N){var V=Math.round(F*(C._stepCount-1)),K=C._visibleSteps[V]._index;K!==C.active&&b(O,R,C,K,!0,N)}function b(O,R,C,F,N,V){var K=C.active;C.active=F,e(O.layout,r.name,C).applyUpdate("active",F);var Q=C.steps[C.active];R.call(L,C,V),R.call(u,C),O.emit("plotly_sliderchange",{slider:C,step:C.steps[C.active],interaction:N,previousActive:K}),Q&&Q.method&&N&&(R._nextMethod?(R._nextMethod.step=Q,R._nextMethod.doCallback=N,R._nextMethod.doTransition=V):(R._nextMethod={step:Q,doCallback:N,doTransition:V},R._nextMethodRaf=window.requestAnimationFrame(function(){var at=R._nextMethod.step;at.method&&(at.execute&&E.executeAPICommand(O,at.method,at.args),R._nextMethod=null,R._nextMethodRaf=null)})))}function P(O,R,C){if(R._context.staticPlot)return;var F=C.node(),N=M.select(R);function V(){return C.data()[0]}function K(){var Q=V();R.emit("plotly_sliderstart",{slider:Q});var at=C.select("."+r.gripRectClass);M.event.stopPropagation(),M.event.preventDefault(),at.call(i.fill,Q.activebgcolor);var it=I(Q,M.mouse(F)[0]);_(R,C,Q,it,!0),Q._dragging=!0;function q(){var Z=V(),G=I(Z,M.mouse(F)[0]);_(R,C,Z,G,!1)}N.on("mousemove",q),N.on("touchmove",q);function W(){var Z=V();Z._dragging=!1,at.call(i.fill,Z.bgcolor),N.on("mouseup",null),N.on("mousemove",null),N.on("touchend",null),N.on("touchmove",null),R.emit("plotly_sliderend",{slider:Z,step:Z.steps[Z.active]})}N.on("mouseup",W),N.on("touchend",W)}O.on("mousedown",K),O.on("touchstart",K)}function l(O,R){var C=O.selectAll("rect."+r.tickRectClass).data(R._visibleSteps),F=R._dims;C.enter().append("rect").classed(r.tickRectClass,!0),C.exit().remove(),C.attr({width:R.tickwidth+"px","shape-rendering":"crispEdges"}),C.each(function(N,V){var K=V%F.labelStride===0,Q=M.select(this);Q.attr({height:K?R.ticklen:R.minorticklen}).call(i.fill,R.tickcolor),S.setTranslate(Q,w(R,V/(R._stepCount-1))-.5*R.tickwidth,(K?r.tickOffset:r.minorTickOffset)+F.currentValueTotalHeight)})}function d(O){var R=O._dims;R.labelSteps=[];for(var C=O._stepCount,F=0;F<C;F+=R.labelStride)R.labelSteps.push({fraction:F/(C-1),step:O._visibleSteps[F]})}function L(O,R,C){for(var F=O.select("rect."+r.gripRectClass),N=0,V=0;V<R._stepCount;V++)if(R._visibleSteps[V]._index===R.active){N=V;break}var K=w(R,N/(R._stepCount-1));if(!R._invokingCommand){var Q=F;C&&R.transition.duration>0&&(Q=Q.transition().duration(R.transition.duration).ease(R.transition.easing)),Q.attr("transform",g(K-r.gripWidth*.5,R._dims.currentValueTotalHeight))}}function w(O,R){var C=O._dims;return C.inputAreaStart+r.stepInset+(C.inputAreaLength-2*r.stepInset)*Math.min(1,Math.max(0,R))}function I(O,R){var C=O._dims;return Math.min(1,Math.max(0,(R-r.stepInset-C.inputAreaStart)/(C.inputAreaLength-2*r.stepInset-2*C.inputAreaStart)))}function z(O,R,C){var F=C._dims,N=A.ensureSingle(O,"rect",r.railTouchRectClass,function(V){V.call(P,R,O,C).style("pointer-events","all")});N.attr({width:F.inputAreaLength,height:Math.max(F.inputAreaWidth,r.tickOffset+C.ticklen+F.labelHeight)}).call(i.fill,C.bgcolor).attr("opacity",0),S.setTranslate(N,0,F.currentValueTotalHeight)}function B(O,R){var C=R._dims,F=C.inputAreaLength-r.railInset*2,N=A.ensureSingle(O,"rect",r.railRectClass);N.attr({width:F,height:r.railWidth,rx:r.railRadius,ry:r.railRadius,"shape-rendering":"crispEdges"}).call(i.stroke,R.bordercolor).call(i.fill,R.bgcolor).style("stroke-width",R.borderwidth+"px"),S.setTranslate(N,r.railInset,(C.inputAreaWidth-r.railWidth)*.5+C.currentValueTotalHeight)}},23243:function($,U,t){var M=t(98292);$.exports={moduleType:"component",name:M.name,layoutAttributes:t(75067),supplyLayoutDefaults:t(12343),draw:t(44504)}},92998:function($,U,t){var M=t(39898),E=t(92770),i=t(74875),S=t(73972),A=t(71828),g=A.strTranslate,v=t(91424),e=t(7901),r=t(63893),f=t(37822),n=t(18783).OPPOSITE_SIDE,a=/ [XY][0-9]* /;function o(h,y,p){var x=p.propContainer,s=p.propName,u=p.placeholder,c=p.traceIndex,T=p.avoid||{},k=p.attributes,_=p.transform,b=p.containerGroup,P=h._fullLayout,l=1,d=!1,L=x.title,w=(L&&L.text?L.text:"").trim(),I=L&&L.font?L.font:{},z=I.family,B=I.size,O=I.color,R;s==="title.text"?R="titleText":s.indexOf("axis")!==-1?R="axisTitleText":s.indexOf("colorbar"!==-1)&&(R="colorbarTitleText");var C=h._context.edits[R];w===""?l=0:w.replace(a," % ")===u.replace(a," % ")&&(l=.2,d=!0,C||(w="")),p._meta?w=A.templateString(w,p._meta):P._meta&&(w=A.templateString(w,P._meta));var F=w||C,N;b||(b=A.ensureSingle(P._infolayer,"g","g-"+y),N=P._hColorbarMoveTitle);var V=b.selectAll("text").data(F?[0]:[]);if(V.enter().append("text"),V.text(w).attr("class",y),V.exit().remove(),!F)return b;function K(q){A.syncOrAsync([Q,at],q)}function Q(q){var W;return!_&&N&&(_={}),_?(W="",_.rotate&&(W+="rotate("+[_.rotate,k.x,k.y]+")"),(_.offset||N)&&(W+=g(0,(_.offset||0)-(N||0)))):W=null,q.attr("transform",W),q.style({"font-family":z,"font-size":M.round(B,2)+"px",fill:e.rgb(O),opacity:l*e.opacity(O),"font-weight":i.fontWeight}).attr(k).call(r.convertToTspans,h),i.previousPromises(h)}function at(q){var W=M.select(q.node().parentNode);if(T&&T.selection&&T.side&&w){W.attr("transform",null);var Z=n[T.side],G=T.side==="left"||T.side==="top"?-1:1,et=E(T.pad)?T.pad:2,nt=v.bBox(W.node()),X={t:0,b:0,l:0,r:0},Y=h._fullLayout._reservedMargin;for(var ot in Y)for(var rt in Y[ot]){var ht=Y[ot][rt];X[rt]=Math.max(X[rt],ht)}var pt={left:X.l,top:X.t,right:P.width-X.r,bottom:P.height-X.b},yt=T.maxShift||G*(pt[T.side]-nt[T.side]),xt=0;if(yt<0)xt=yt;else{var Ft=T.offsetLeft||0,Et=T.offsetTop||0;nt.left-=Ft,nt.right-=Ft,nt.top-=Et,nt.bottom-=Et,T.selection.each(function(){var gt=v.bBox(this);A.bBoxIntersect(nt,gt,et)&&(xt=Math.max(xt,G*(gt[T.side]-nt[Z])+et))}),xt=Math.min(yt,xt),x._titleScoot=Math.abs(xt)}if(xt>0||yt<0){var mt={left:[-xt,0],right:[xt,0],top:[0,-xt],bottom:[0,xt]}[T.side];W.attr("transform",g(mt[0],mt[1]))}}}V.call(K);function it(){l=0,d=!0,V.text(u).on("mouseover.opacity",function(){M.select(this).transition().duration(f.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){M.select(this).transition().duration(f.HIDE_PLACEHOLDER).style("opacity",0)})}return C&&(w?V.on(".opacity",null):it(),V.call(r.makeEditable,{gd:h}).on("edit",function(q){c!==void 0?S.call("_guiRestyle",h,s,q,c):S.call("_guiRelayout",h,s,q)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(K)}).on("input",function(q){this.text(q||" ").call(r.positionText,k.x,k.y)})),V.classed("js-placeholder",d),b}$.exports={draw:o}},7163:function($,U,t){var M=t(41940),E=t(22399),i=t(1426).extendFlat,S=t(30962).overrideAll,A=t(35025),g=t(44467).templatedArray,v=g("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});$.exports=S(g("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:v,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:i(A({editType:"arraydraw"}),{}),font:M({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:E.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},75909:function($){$.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},64897:function($,U,t){var M=t(71828),E=t(85501),i=t(7163),S=t(75909),A=S.name,g=i.buttons;$.exports=function(r,f){var n={name:A,handleItemDefaults:v};E(r,f,n)};function v(r,f,n){function a(y,p){return M.coerce(r,f,i,y,p)}var o=E(r,f,{name:"buttons",handleItemDefaults:e}),h=a("visible",o.length>0);h&&(a("active"),a("direction"),a("type"),a("showactive"),a("x"),a("y"),M.noneOrAll(r,f,["x","y"]),a("xanchor"),a("yanchor"),a("pad.t"),a("pad.r"),a("pad.b"),a("pad.l"),M.coerceFont(a,"font",n.font),a("bgcolor",n.paper_bgcolor),a("bordercolor"),a("borderwidth"))}function e(r,f){function n(o,h){return M.coerce(r,f,g,o,h)}var a=n("visible",r.method==="skip"||Array.isArray(r.args));a&&(n("method"),n("args"),n("args2"),n("label"),n("execute"))}},13689:function($,U,t){var M=t(39898),E=t(74875),i=t(7901),S=t(91424),A=t(71828),g=t(63893),v=t(44467).arrayEditor,e=t(18783).LINE_SPACING,r=t(75909),f=t(25849);$.exports=function(w){var I=w._fullLayout,z=A.filterVisible(I[r.name]);function B(Q){E.autoMargin(w,l(Q))}var O=I._menulayer.selectAll("g."+r.containerClassName).data(z.length>0?[0]:[]);if(O.enter().append("g").classed(r.containerClassName,!0).style("cursor","pointer"),O.exit().each(function(){M.select(this).selectAll("g."+r.headerGroupClassName).each(B)}).remove(),z.length!==0){var R=O.selectAll("g."+r.headerGroupClassName).data(z,n);R.enter().append("g").classed(r.headerGroupClassName,!0);for(var C=A.ensureSingle(O,"g",r.dropdownButtonGroupClassName,function(Q){Q.style("pointer-events","all")}),F=0;F<z.length;F++){var N=z[F];P(w,N)}var V="updatemenus"+I._uid,K=new f(w,C,V);R.enter().size()&&(C.node().parentNode.appendChild(C.node()),C.call(L)),R.exit().each(function(Q){C.call(L),B(Q)}).remove(),R.each(function(Q){var at=M.select(this),it=Q.type==="dropdown"?C:null;E.manageCommandObserver(w,Q,Q.buttons,function(q){h(w,Q,Q.buttons[q.index],at,it,K,q.index,!0)}),Q.type==="dropdown"?(y(w,at,C,K,Q),o(C,Q)&&p(w,at,C,K,Q)):p(w,at,null,null,Q)})}};function n(w){return w._index}function a(w){return+w.attr(r.menuIndexAttrName)==-1}function o(w,I){return+w.attr(r.menuIndexAttrName)===I._index}function h(w,I,z,B,O,R,C,F){I.active=C,v(w.layout,r.name,I).applyUpdate("active",C),I.type==="buttons"?p(w,B,null,null,I):I.type==="dropdown"&&(O.attr(r.menuIndexAttrName,"-1"),y(w,B,O,R,I),F||p(w,B,O,R,I))}function y(w,I,z,B,O){var R=A.ensureSingle(I,"g",r.headerClassName,function(at){at.style("pointer-events","all")}),C=O._dims,F=O.active,N=O.buttons[F]||r.blankHeaderOpts,V={y:O.pad.t,yPad:0,x:O.pad.l,xPad:0,index:0},K={width:C.headerWidth,height:C.headerHeight};R.call(u,O,N,w).call(d,O,V,K);var Q=A.ensureSingle(I,"text",r.headerArrowClassName,function(at){at.attr("text-anchor","end").call(S.font,O.font).text(r.arrowSymbol[O.direction])});Q.attr({x:C.headerWidth-r.arrowOffsetX+O.pad.l,y:C.headerHeight/2+r.textOffsetY+O.pad.t}),R.on("click",function(){z.call(L,String(o(z,O)?-1:O._index)),p(w,I,z,B,O)}),R.on("mouseover",function(){R.call(_)}),R.on("mouseout",function(){R.call(b,O)}),S.setTranslate(I,C.lx,C.ly)}function p(w,I,z,B,O){z||(z=I,z.attr("pointer-events","all"));var R=!a(z)||O.type==="buttons"?O.buttons:[],C=O.type==="dropdown"?r.dropdownButtonClassName:r.buttonClassName,F=z.selectAll("g."+C).data(A.filterVisible(R)),N=F.enter().append("g").classed(C,!0),V=F.exit();O.type==="dropdown"?(N.attr("opacity","0").transition().attr("opacity","1"),V.transition().attr("opacity","0").remove()):V.remove();var K=0,Q=0,at=O._dims,it=["up","down"].indexOf(O.direction)!==-1;O.type==="dropdown"&&(it?Q=at.headerHeight+r.gapButtonHeader:K=at.headerWidth+r.gapButtonHeader),O.type==="dropdown"&&O.direction==="up"&&(Q=-r.gapButtonHeader+r.gapButton-at.openHeight),O.type==="dropdown"&&O.direction==="left"&&(K=-r.gapButtonHeader+r.gapButton-at.openWidth);var q={x:at.lx+K+O.pad.l,y:at.ly+Q+O.pad.t,yPad:r.gapButton,xPad:r.gapButton,index:0},W={l:q.x+O.borderwidth,t:q.y+O.borderwidth};F.each(function(Z,G){var et=M.select(this);et.call(u,O,Z,w).call(d,O,q),et.on("click",function(){M.event.defaultPrevented||(Z.execute&&(Z.args2&&O.active===G?(h(w,O,Z,I,z,B,-1),E.executeAPICommand(w,Z.method,Z.args2)):(h(w,O,Z,I,z,B,G),E.executeAPICommand(w,Z.method,Z.args))),w.emit("plotly_buttonclicked",{menu:O,button:Z,active:O.active}))}),et.on("mouseover",function(){et.call(_)}),et.on("mouseout",function(){et.call(b,O),F.call(k,O)})}),F.call(k,O),it?(W.w=Math.max(at.openWidth,at.headerWidth),W.h=q.y-W.t):(W.w=q.x-W.l,W.h=Math.max(at.openHeight,at.headerHeight)),W.direction=O.direction,B&&(F.size()?x(w,I,z,B,O,W):s(B))}function x(w,I,z,B,O,R){var C=O.direction,F=C==="up"||C==="down",N=O._dims,V=O.active,K,Q,at;if(F)for(Q=0,at=0;at<V;at++)Q+=N.heights[at]+r.gapButton;else for(K=0,at=0;at<V;at++)K+=N.widths[at]+r.gapButton;B.enable(R,K,Q),B.hbar&&B.hbar.attr("opacity","0").transition().attr("opacity","1"),B.vbar&&B.vbar.attr("opacity","0").transition().attr("opacity","1")}function s(w){var I=!!w.hbar,z=!!w.vbar;I&&w.hbar.transition().attr("opacity","0").each("end",function(){I=!1,z||w.disable()}),z&&w.vbar.transition().attr("opacity","0").each("end",function(){z=!1,I||w.disable()})}function u(w,I,z,B){w.call(c,I).call(T,I,z,B)}function c(w,I){var z=A.ensureSingle(w,"rect",r.itemRectClassName,function(B){B.attr({rx:r.rx,ry:r.ry,"shape-rendering":"crispEdges"})});z.call(i.stroke,I.bordercolor).call(i.fill,I.bgcolor).style("stroke-width",I.borderwidth+"px")}function T(w,I,z,B){var O=A.ensureSingle(w,"text",r.itemTextClassName,function(F){F.attr({"text-anchor":"start","data-notex":1})}),R=z.label,C=B._fullLayout._meta;C&&(R=A.templateString(R,C)),O.call(S.font,I.font).text(R).call(g.convertToTspans,B)}function k(w,I){var z=I.active;w.each(function(B,O){var R=M.select(this);O===z&&I.showactive&&R.select("rect."+r.itemRectClassName).call(i.fill,r.activeColor)})}function _(w){w.select("rect."+r.itemRectClassName).call(i.fill,r.hoverColor)}function b(w,I){w.select("rect."+r.itemRectClassName).call(i.fill,I.bgcolor)}function P(w,I){var z=I._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},B=S.tester.selectAll("g."+r.dropdownButtonClassName).data(A.filterVisible(I.buttons));B.enter().append("g").classed(r.dropdownButtonClassName,!0);var O=["up","down"].indexOf(I.direction)!==-1;B.each(function(K,Q){var at=M.select(this);at.call(u,I,K,w);var it=at.select("."+r.itemTextClassName),q=it.node()&&S.bBox(it.node()).width,W=Math.max(q+r.textPadX,r.minWidth),Z=I.font.size*e,G=g.lineCount(it),et=Math.max(Z*G,r.minHeight)+r.textOffsetY;et=Math.ceil(et),W=Math.ceil(W),z.widths[Q]=W,z.heights[Q]=et,z.height1=Math.max(z.height1,et),z.width1=Math.max(z.width1,W),O?(z.totalWidth=Math.max(z.totalWidth,W),z.openWidth=z.totalWidth,z.totalHeight+=et+r.gapButton,z.openHeight+=et+r.gapButton):(z.totalWidth+=W+r.gapButton,z.openWidth+=W+r.gapButton,z.totalHeight=Math.max(z.totalHeight,et),z.openHeight=z.totalHeight)}),O?z.totalHeight-=r.gapButton:z.totalWidth-=r.gapButton,z.headerWidth=z.width1+r.arrowPadX,z.headerHeight=z.height1,I.type==="dropdown"&&(O?(z.width1+=r.arrowPadX,z.totalHeight=z.height1):z.totalWidth=z.width1,z.totalWidth+=r.arrowPadX),B.remove();var R=z.totalWidth+I.pad.l+I.pad.r,C=z.totalHeight+I.pad.t+I.pad.b,F=w._fullLayout._size;z.lx=F.l+F.w*I.x,z.ly=F.t+F.h*(1-I.y);var N="left";A.isRightAnchor(I)&&(z.lx-=R,N="right"),A.isCenterAnchor(I)&&(z.lx-=R/2,N="center");var V="top";A.isBottomAnchor(I)&&(z.ly-=C,V="bottom"),A.isMiddleAnchor(I)&&(z.ly-=C/2,V="middle"),z.totalWidth=Math.ceil(z.totalWidth),z.totalHeight=Math.ceil(z.totalHeight),z.lx=Math.round(z.lx),z.ly=Math.round(z.ly),E.autoMargin(w,l(I),{x:I.x,y:I.y,l:R*({right:1,center:.5}[N]||0),r:R*({left:1,center:.5}[N]||0),b:C*({top:1,middle:.5}[V]||0),t:C*({bottom:1,middle:.5}[V]||0)})}function l(w){return r.autoMarginIdRoot+w._index}function d(w,I,z,B){B=B||{};var O=w.select("."+r.itemRectClassName),R=w.select("."+r.itemTextClassName),C=I.borderwidth,F=z.index,N=I._dims;S.setTranslate(w,C+z.x,C+z.y);var V=["up","down"].indexOf(I.direction)!==-1,K=B.height||(V?N.heights[F]:N.height1);O.attr({x:0,y:0,width:B.width||(V?N.width1:N.widths[F]),height:K});var Q=I.font.size*e,at=g.lineCount(R),it=(at-1)*Q/2;g.positionText(R,r.textOffsetX,K/2-it+r.textOffsetY),V?z.y+=N.heights[F]+z.yPad:z.x+=N.widths[F]+z.xPad,z.index++}function L(w,I){w.attr(r.menuIndexAttrName,I||"-1").selectAll("g."+r.dropdownButtonClassName).remove()}},20763:function($,U,t){var M=t(75909);$.exports={moduleType:"component",name:M.name,layoutAttributes:t(7163),supplyLayoutDefaults:t(64897),draw:t(13689)}},25849:function($,U,t){$.exports=A;var M=t(39898),E=t(7901),i=t(91424),S=t(71828);function A(g,v,e){this.gd=g,this.container=v,this.id=e,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}A.barWidth=2,A.barLength=20,A.barRadius=2,A.barPad=1,A.barColor="#808BA4",A.prototype.enable=function(g,v,e){var r=this.gd._fullLayout,f=r.width,n=r.height;this.position=g;var a=this.position.l,o=this.position.w,h=this.position.t,y=this.position.h,p=this.position.direction,x=p==="down",s=p==="left",u=p==="right",c=p==="up",T=o,k=y,_,b,P,l;!x&&!s&&!u&&!c&&(this.position.direction="down",x=!0);var d=x||c;d?(_=a,b=_+T,x?(P=h,l=Math.min(P+k,n),k=l-P):(l=h+k,P=Math.max(l-k,0),k=l-P)):(P=h,l=P+k,s?(b=a+T,_=Math.max(b-T,0),T=b-_):(_=a,b=Math.min(_+T,f),T=b-_)),this._box={l:_,t:P,w:T,h:k};var L=o>T,w=A.barLength+2*A.barPad,I=A.barWidth+2*A.barPad,z=a,B=h+y;B+I>n&&(B=n-I);var O=this.container.selectAll("rect.scrollbar-horizontal").data(L?[0]:[]);O.exit().on(".drag",null).remove(),O.enter().append("rect").classed("scrollbar-horizontal",!0).call(E.fill,A.barColor),L?(this.hbar=O.attr({rx:A.barRadius,ry:A.barRadius,x:z,y:B,width:w,height:I}),this._hbarXMin=z+w/2,this._hbarTranslateMax=T-w):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var R=y>k,C=A.barWidth+2*A.barPad,F=A.barLength+2*A.barPad,N=a+o,V=h;N+C>f&&(N=f-C);var K=this.container.selectAll("rect.scrollbar-vertical").data(R?[0]:[]);K.exit().on(".drag",null).remove(),K.enter().append("rect").classed("scrollbar-vertical",!0).call(E.fill,A.barColor),R?(this.vbar=K.attr({rx:A.barRadius,ry:A.barRadius,x:N,y:V,width:C,height:F}),this._vbarYMin=V+F/2,this._vbarTranslateMax=k-F):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var Q=this.id,at=_-.5,it=R?b+C+.5:b+.5,q=P-.5,W=L?l+I+.5:l+.5,Z=r._topdefs.selectAll("#"+Q).data(L||R?[0]:[]);if(Z.exit().remove(),Z.enter().append("clipPath").attr("id",Q).append("rect"),L||R?(this._clipRect=Z.select("rect").attr({x:Math.floor(at),y:Math.floor(q),width:Math.ceil(it)-Math.floor(at),height:Math.ceil(W)-Math.floor(q)}),this.container.call(i.setClipUrl,Q,this.gd),this.bg.attr({x:a,y:h,width:o,height:y})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(i.setClipUrl,null),delete this._clipRect),L||R){var G=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(G);var et=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault(),M.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));L&&this.hbar.on(".drag",null).call(et),R&&this.vbar.on(".drag",null).call(et)}this.setTranslate(v,e)},A.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(i.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},A.prototype._onBoxDrag=function(){var g=this.translateX,v=this.translateY;this.hbar&&(g-=M.event.dx),this.vbar&&(v-=M.event.dy),this.setTranslate(g,v)},A.prototype._onBoxWheel=function(){var g=this.translateX,v=this.translateY;this.hbar&&(g+=M.event.deltaY),this.vbar&&(v+=M.event.deltaY),this.setTranslate(g,v)},A.prototype._onBarDrag=function(){var g=this.translateX,v=this.translateY;if(this.hbar){var e=g+this._hbarXMin,r=e+this._hbarTranslateMax,f=S.constrain(M.event.x,e,r),n=(f-e)/(r-e),a=this.position.w-this._box.w;g=n*a}if(this.vbar){var o=v+this._vbarYMin,h=o+this._vbarTranslateMax,y=S.constrain(M.event.y,o,h),p=(y-o)/(h-o),x=this.position.h-this._box.h;v=p*x}this.setTranslate(g,v)},A.prototype.setTranslate=function(g,v){var e=this.position.w-this._box.w,r=this.position.h-this._box.h;if(g=S.constrain(g||0,0,e),v=S.constrain(v||0,0,r),this.translateX=g,this.translateY=v,this.container.call(i.setTranslate,this._box.l-this.position.l-g,this._box.t-this.position.t-v),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+g-.5),y:Math.floor(this.position.t+v-.5)}),this.hbar){var f=g/e;this.hbar.call(i.setTranslate,g+f*this._hbarTranslateMax,v)}if(this.vbar){var n=v/r;this.vbar.call(i.setTranslate,g,v+n*this._vbarTranslateMax)}}},18783:function($){$.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},24695:function($){$.exports={axisRefDescription:function(U,t,M){return["If set to a",U,"axis id (e.g. *"+U+"* or","*"+U+"2*), the `"+U+"` position refers to a",U,"coordinate. If set to *paper*, the `"+U+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+M+"). If set to a",U,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+U+"2 domain* refers to the domain of the second",U," axis and a",U,"position of 0.5 refers to the","point between the",t,"and the",M,"of the domain of the","second",U,"axis."].join(" ")}}},22372:function($){$.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},31562:function($){$.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},74808:function($){$.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},29659:function($){$.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87381:function($){$.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},37822:function($){$.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},50606:function($){$.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},32396:function($,U){U.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],U.STYLE=U.CSS_DECLARATIONS.map(function(t){return t.join(": ")+"; "}).join("")},77922:function($,U){U.xmlns="http://www.w3.org/2000/xmlns/",U.svg="http://www.w3.org/2000/svg",U.xlink="http://www.w3.org/1999/xlink",U.svgAttrs={xmlns:U.svg,"xmlns:xlink":U.xlink}},8729:function($,U,t){U.version=t(11506).version,t(7417),t(98847);for(var M=t(73972),E=U.register=M.register,i=t(10641),S=Object.keys(i),A=0;A<S.length;A++){var g=S[A];g.charAt(0)!=="_"&&(U[g]=i[g]),E({moduleType:"apiMethod",name:g,fn:i[g]})}E(t(67368)),E([t(32745),t(2468),t(47322),t(89853),t(68804),t(20763),t(23243),t(13137),t(97218),t(83312),t(37369),t(21081),t(12311),t(2199),t(30211),t(64168)]),E([t(92177),t(37815)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(E(window.PlotlyLocales),delete window.PlotlyLocales),U.Icons=t(24255);var v=t(30211),e=t(74875);U.Plots={resize:e.resize,graphJson:e.graphJson,sendDataToCloud:e.sendDataToCloud},U.Fx={hover:v.hover,unhover:v.unhover,loneHover:v.loneHover,loneUnhover:v.loneUnhover},U.Snapshot=t(44511),U.PlotSchema=t(86281)},24255:function($){$.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},99863:function($,U){U.isLeftAnchor=function(t){return t.xanchor==="left"||t.xanchor==="auto"&&t.x<=.3333333333333333},U.isCenterAnchor=function(t){return t.xanchor==="center"||t.xanchor==="auto"&&t.x>.3333333333333333&&t.x<.6666666666666666},U.isRightAnchor=function(t){return t.xanchor==="right"||t.xanchor==="auto"&&t.x>=.6666666666666666},U.isTopAnchor=function(t){return t.yanchor==="top"||t.yanchor==="auto"&&t.y>=.6666666666666666},U.isMiddleAnchor=function(t){return t.yanchor==="middle"||t.yanchor==="auto"&&t.y>.3333333333333333&&t.y<.6666666666666666},U.isBottomAnchor=function(t){return t.yanchor==="bottom"||t.yanchor==="auto"&&t.y<=.3333333333333333}},26348:function($,U,t){var M=t(64872),E=M.mod,i=M.modHalf,S=Math.PI,A=2*S;function g(x){return x/180*S}function v(x){return x/S*180}function e(x){return Math.abs(x[1]-x[0])>A-1e-14}function r(x,s){return i(s-x,A)}function f(x,s){return Math.abs(r(x,s))}function n(x,s){if(e(s))return!0;var u,c;s[0]<s[1]?(u=s[0],c=s[1]):(u=s[1],c=s[0]),u=E(u,A),c=E(c,A),u>c&&(c+=A);var T=E(x,A),k=T+A;return T>=u&&T<=c||k>=u&&k<=c}function a(x,s,u,c){if(!n(s,c))return!1;var T,k;return u[0]<u[1]?(T=u[0],k=u[1]):(T=u[1],k=u[0]),x>=T&&x<=k}function o(x,s,u,c,T,k,_){T=T||0,k=k||0;var b=e([u,c]),P,l,d,L,w;b?(P=0,l=S,d=A):u<c?(P=u,d=c):(P=c,d=u),x<s?(L=x,w=s):(L=s,w=x);function I(R,C){return[R*Math.cos(C)+T,k-R*Math.sin(C)]}var z=Math.abs(d-P)<=S?0:1;function B(R,C,F){return"A"+[R,R]+" "+[0,z,F]+" "+I(R,C)}var O;return b?L===null?O="M"+I(w,P)+B(w,l,0)+B(w,d,0)+"Z":O="M"+I(L,P)+B(L,l,0)+B(L,d,0)+"ZM"+I(w,P)+B(w,l,1)+B(w,d,1)+"Z":L===null?(O="M"+I(w,P)+B(w,d,0),_&&(O+="L0,0Z")):O="M"+I(L,P)+"L"+I(w,P)+B(w,d,0)+"L"+I(L,d)+B(L,P,1)+"Z",O}function h(x,s,u,c,T){return o(null,x,s,u,c,T,0)}function y(x,s,u,c,T){return o(null,x,s,u,c,T,1)}function p(x,s,u,c,T,k){return o(x,s,u,c,T,k,1)}$.exports={deg2rad:g,rad2deg:v,angleDelta:r,angleDist:f,isFullCircle:e,isAngleInsideSector:n,isPtInsideSector:a,pathArc:h,pathSector:y,pathAnnulus:p}},73627:function($,U){var t=Array.isArray,M=ArrayBuffer,E=DataView;function i(v){return M.isView(v)&&!(v instanceof E)}U.isTypedArray=i;function S(v){return t(v)||i(v)}U.isArrayOrTypedArray=S;function A(v){return!S(v[0])}U.isArray1D=A,U.ensureArray=function(v,e){return t(v)||(v=[]),v.length=e,v},U.concat=function(){var v=[],e=!0,r=0,f,n,a,o,h,y,p,x;for(a=0;a<arguments.length;a++)o=arguments[a],y=o.length,y&&(n?v.push(o):(n=o,h=y),t(o)?f=!1:(e=!1,r?f!==o.constructor&&(f=!1):f=o.constructor),r+=y);if(!r)return[];if(!v.length)return n;if(e)return n.concat.apply(n,v);if(f){for(p=new f(r),p.set(n),a=0;a<v.length;a++)o=v[a],p.set(o,h),h+=o.length;return p}for(p=new Array(r),x=0;x<n.length;x++)p[x]=n[x];for(a=0;a<v.length;a++){for(o=v[a],x=0;x<o.length;x++)p[h+x]=o[x];h+=x}return p},U.maxRowLength=function(v){return g(v,Math.max,0)},U.minRowLength=function(v){return g(v,Math.min,1/0)};function g(v,e,r){if(S(v))if(S(v[0])){for(var f=r,n=0;n<v.length;n++)f=e(f,v[n].length);return f}else return v.length;return 0}},95218:function($,U,t){var M=t(92770),E=t(50606).BADNUM,i=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;$.exports=function(S){return typeof S=="string"&&(S=S.replace(i,"")),M(S)?Number(S):E}},33306:function($){$.exports=function(U){var t=U._fullLayout;t._glcanvas&&t._glcanvas.size()&&t._glcanvas.each(function(M){M.regl&&M.regl.clear({color:!0,depth:!0})})}},86367:function($){$.exports=function(U){U._responsiveChartHandler&&(window.removeEventListener("resize",U._responsiveChartHandler),delete U._responsiveChartHandler)}},96554:function($,U,t){var M=t(92770),E=t(84267),i=t(9012),S=t(63282),A=t(7901),g=t(37822).DESELECTDIM,v=t(65487),e=t(30587).counter,r=t(64872).modHalf,f=t(73627).isArrayOrTypedArray;U.valObjectMeta={data_array:{coerceFunction:function(a,o,h){f(a)?o.set(a):h!==void 0&&o.set(h)}},enumerated:{coerceFunction:function(a,o,h,y){y.coerceNumber&&(a=+a),y.values.indexOf(a)===-1?o.set(h):o.set(a)},validateFunction:function(a,o){o.coerceNumber&&(a=+a);for(var h=o.values,y=0;y<h.length;y++){var p=String(h[y]);if(p.charAt(0)==="/"&&p.charAt(p.length-1)==="/"){var x=new RegExp(p.substr(1,p.length-2));if(x.test(a))return!0}else if(a===h[y])return!0}return!1}},boolean:{coerceFunction:function(a,o,h){a===!0||a===!1?o.set(a):o.set(h)}},number:{coerceFunction:function(a,o,h,y){!M(a)||y.min!==void 0&&a<y.min||y.max!==void 0&&a>y.max?o.set(h):o.set(+a)}},integer:{coerceFunction:function(a,o,h,y){a%1||!M(a)||y.min!==void 0&&a<y.min||y.max!==void 0&&a>y.max?o.set(h):o.set(+a)}},string:{coerceFunction:function(a,o,h,y){if(typeof a!="string"){var p=typeof a=="number";y.strict===!0||!p?o.set(h):o.set(String(a))}else y.noBlank&&!a?o.set(h):o.set(a)}},color:{coerceFunction:function(a,o,h){E(a).isValid()?o.set(a):o.set(h)}},colorlist:{coerceFunction:function(a,o,h){function y(p){return E(p).isValid()}!Array.isArray(a)||!a.length?o.set(h):a.every(y)?o.set(a):o.set(h)}},colorscale:{coerceFunction:function(a,o,h){o.set(S.get(a,h))}},angle:{coerceFunction:function(a,o,h){a==="auto"?o.set("auto"):M(a)?o.set(r(+a,360)):o.set(h)}},subplotid:{coerceFunction:function(a,o,h,y){var p=y.regex||e(h);if(typeof a=="string"&&p.test(a)){o.set(a);return}o.set(h)},validateFunction:function(a,o){var h=o.dflt;return a===h?!0:typeof a!="string"?!1:!!e(h).test(a)}},flaglist:{coerceFunction:function(a,o,h,y){if((y.extras||[]).indexOf(a)!==-1){o.set(a);return}if(typeof a!="string"){o.set(h);return}for(var p=a.split("+"),x=0;x<p.length;){var s=p[x];y.flags.indexOf(s)===-1||p.indexOf(s)<x?p.splice(x,1):x++}p.length?o.set(p.join("+")):o.set(h)}},any:{coerceFunction:function(a,o,h){a===void 0?o.set(h):o.set(a)}},info_array:{coerceFunction:function(a,o,h,y){function p(I,z,B){var O,R={set:function(C){O=C}};return B===void 0&&(B=z.dflt),U.valObjectMeta[z.valType].coerceFunction(I,R,B,z),O}var x=y.dimensions===2||y.dimensions==="1-2"&&Array.isArray(a)&&Array.isArray(a[0]);if(!Array.isArray(a)){o.set(h);return}var s=y.items,u=[],c=Array.isArray(s),T=c&&x&&Array.isArray(s[0]),k=x&&c&&!T,_=c&&!k?s.length:a.length,b,P,l,d,L,w;if(h=Array.isArray(h)?h:[],x)for(b=0;b<_;b++)for(u[b]=[],l=Array.isArray(a[b])?a[b]:[],k?L=s.length:c?L=s[b].length:L=l.length,P=0;P<L;P++)k?d=s[P]:c?d=s[b][P]:d=s,w=p(l[P],d,(h[b]||[])[P]),w!==void 0&&(u[b][P]=w);else for(b=0;b<_;b++)w=p(a[b],c?s[b]:s,h[b]),w!==void 0&&(u[b]=w);o.set(u)},validateFunction:function(a,o){if(!Array.isArray(a))return!1;var h=o.items,y=Array.isArray(h),p=o.dimensions===2;if(!o.freeLength&&a.length!==h.length)return!1;for(var x=0;x<a.length;x++)if(p){if(!Array.isArray(a[x])||!o.freeLength&&a[x].length!==h[x].length)return!1;for(var s=0;s<a[x].length;s++)if(!n(a[x][s],y?h[x][s]:h))return!1}else if(!n(a[x],y?h[x]:h))return!1;return!0}}},U.coerce=function(a,o,h,y,p){var x=v(h,y).get(),s=v(a,y),u=v(o,y),c=s.get(),T=o._template;if(c===void 0&&T&&(c=v(T,y).get(),T=0),p===void 0&&(p=x.dflt),x.arrayOk&&f(c))return u.set(c),c;var k=U.valObjectMeta[x.valType].coerceFunction;k(c,u,p,x);var _=u.get();return T&&_===p&&!n(c,x)&&(c=v(T,y).get(),k(c,u,p,x),_=u.get()),_},U.coerce2=function(a,o,h,y,p){var x=v(a,y),s=U.coerce(a,o,h,y,p),u=x.get();return u!=null?s:!1},U.coerceFont=function(a,o,h){var y={};return h=h||{},y.family=a(o+".family",h.family),y.size=a(o+".size",h.size),y.color=a(o+".color",h.color),y},U.coercePattern=function(a,o,h,y){var p=a(o+".shape");if(p){a(o+".solidity"),a(o+".size");var x=a(o+".fillmode"),s=x==="overlay";if(!y){var u=a(o+".bgcolor",s?h:void 0);a(o+".fgcolor",s?A.contrast(u):h)}a(o+".fgopacity",s?.5:1)}},U.coerceHoverinfo=function(a,o,h){var y=o._module.attributes,p=y.hoverinfo?y:i,x=p.hoverinfo,s;if(h._dataLength===1){var u=x.dflt==="all"?x.flags.slice():x.dflt.split("+");u.splice(u.indexOf("name"),1),s=u.join("+")}return U.coerce(a,o,p,"hoverinfo",s)},U.coerceSelectionMarkerOpacity=function(a,o){if(a.marker){var h=a.marker.opacity;if(h!==void 0){var y,p;!f(h)&&!a.selected&&!a.unselected&&(y=h,p=g*h),o("selected.marker.opacity",y),o("unselected.marker.opacity",p)}}};function n(a,o){var h=U.valObjectMeta[o.valType];if(o.arrayOk&&f(a))return!0;if(h.validateFunction)return h.validateFunction(a,o);var y={},p=y,x={set:function(s){p=s}};return h.coerceFunction(a,x,y,o),p!==y}U.validate=n},41631:function($,U,t){var M=t(84096).i$,E=t(92770),i=t(47769),S=t(64872).mod,A=t(50606),g=A.BADNUM,v=A.ONEDAY,e=A.ONEHOUR,r=A.ONEMIN,f=A.ONESEC,n=A.EPOCHJD,a=t(73972),o=t(84096).g0,h=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,p=new Date().getFullYear()-70;function x(O){return O&&a.componentsRegistry.calendars&&typeof O=="string"&&O!=="gregorian"}U.dateTick0=function(O,R){var C=s(O,!!R);if(R<2)return C;var F=U.dateTime2ms(C,O);return F+=v*(R-1),U.ms2DateTime(F,0,O)};function s(O,R){return x(O)?R?a.getComponentMethod("calendars","CANONICAL_SUNDAY")[O]:a.getComponentMethod("calendars","CANONICAL_TICK")[O]:R?"2000-01-02":"2000-01-01"}U.dfltRange=function(O){return x(O)?a.getComponentMethod("calendars","DFLTRANGE")[O]:["2000-01-01","2001-01-01"]},U.isJSDate=function(O){return typeof O=="object"&&O!==null&&typeof O.getTime=="function"};var u,c;U.dateTime2ms=function(O,R){if(U.isJSDate(O)){var C=O.getTimezoneOffset()*r,F=(O.getUTCMinutes()-O.getMinutes())*r+(O.getUTCSeconds()-O.getSeconds())*f+(O.getUTCMilliseconds()-O.getMilliseconds());if(F){var N=3*r;C=C-N/2+S(F-C+N/2,N)}return O=Number(O)-C,O>=u&&O<=c?O:g}if(typeof O!="string"&&typeof O!="number")return g;O=String(O);var V=x(R),K=O.charAt(0);V&&(K==="G"||K==="g")&&(O=O.substr(1),R="");var Q=V&&R.substr(0,7)==="chinese",at=O.match(Q?y:h);if(!at)return g;var it=at[1],q=at[3]||"1",W=Number(at[5]||1),Z=Number(at[7]||0),G=Number(at[9]||0),et=Number(at[11]||0);if(V){if(it.length===2)return g;it=Number(it);var nt;try{var X=a.getComponentMethod("calendars","getCal")(R);if(Q){var Y=q.charAt(q.length-1)==="i";q=parseInt(q,10),nt=X.newDate(it,X.toMonthIndex(it,q,Y),W)}else nt=X.newDate(it,Number(q),W)}catch{return g}return nt?(nt.toJD()-n)*v+Z*e+G*r+et*f:g}it.length===2?it=(Number(it)+2e3-p)%100+p:it=Number(it),q-=1;var ot=new Date(Date.UTC(2e3,q,W,Z,G));return ot.setUTCFullYear(it),ot.getUTCMonth()!==q||ot.getUTCDate()!==W?g:ot.getTime()+et*f},u=U.MIN_MS=U.dateTime2ms("-9999"),c=U.MAX_MS=U.dateTime2ms("9999-12-31 23:59:59.9999"),U.isDateTime=function(O,R){return U.dateTime2ms(O,R)!==g};function T(O,R){return String(O+Math.pow(10,R)).substr(1)}var k=90*v,_=3*e,b=5*r;U.ms2DateTime=function(O,R,C){if(typeof O!="number"||!(O>=u&&O<=c))return g;R||(R=0);var F=Math.floor(S(O+.05,1)*10),N=Math.round(O-F/10),V,K,Q,at,it,q;if(x(C)){var W=Math.floor(N/v)+n,Z=Math.floor(S(O,v));try{V=a.getComponentMethod("calendars","getCal")(C).fromJD(W).formatDate("yyyy-mm-dd")}catch{V=o("G%Y-%m-%d")(new Date(N))}if(V.charAt(0)==="-")for(;V.length<11;)V="-0"+V.substr(1);else for(;V.length<10;)V="0"+V;K=R<k?Math.floor(Z/e):0,Q=R<k?Math.floor(Z%e/r):0,at=R<_?Math.floor(Z%r/f):0,it=R<b?Z%f*10+F:0}else q=new Date(N),V=o("%Y-%m-%d")(q),K=R<k?q.getUTCHours():0,Q=R<k?q.getUTCMinutes():0,at=R<_?q.getUTCSeconds():0,it=R<b?q.getUTCMilliseconds()*10+F:0;return P(V,K,Q,at,it)},U.ms2DateTimeLocal=function(O){if(!(O>=u+v&&O<=c-v))return g;var R=Math.floor(S(O+.05,1)*10),C=new Date(Math.round(O-R/10)),F=M("%Y-%m-%d")(C),N=C.getHours(),V=C.getMinutes(),K=C.getSeconds(),Q=C.getUTCMilliseconds()*10+R;return P(F,N,V,K,Q)};function P(O,R,C,F,N){if((R||C||F||N)&&(O+=" "+T(R,2)+":"+T(C,2),(F||N)&&(O+=":"+T(F,2),N))){for(var V=4;N%10===0;)V-=1,N/=10;O+="."+T(N,V)}return O}U.cleanDate=function(O,R,C){if(O===g)return R;if(U.isJSDate(O)||typeof O=="number"&&isFinite(O)){if(x(C))return i.error("JS Dates and milliseconds are incompatible with world calendars",O),R;if(O=U.ms2DateTimeLocal(+O),!O&&R!==void 0)return R}else if(!U.isDateTime(O,C))return i.error("unrecognized date",O),R;return O};var l=/%\d?f/g,d=/%h/g,L={1:"1",2:"1",3:"2",4:"2"};function w(O,R,C,F){O=O.replace(l,function(V){var K=Math.min(+V.charAt(1)||6,6),Q=(R/1e3%1+2).toFixed(K).substr(2).replace(/0+$/,"")||"0";return Q});var N=new Date(Math.floor(R+.05));if(O=O.replace(d,function(){return L[C("%q")(N)]}),x(F))try{O=a.getComponentMethod("calendars","worldCalFmt")(O,R,F)}catch{return"Invalid"}return C(O)(N)}var I=[59,59.9,59.99,59.999,59.9999];function z(O,R){var C=S(O+.05,v),F=T(Math.floor(C/e),2)+":"+T(S(Math.floor(C/r),60),2);if(R!=="M"){E(R)||(R=0);var N=Math.min(S(O/f,60),I[R]),V=(100+N).toFixed(R).substr(1);R>0&&(V=V.replace(/0+$/,"").replace(/[\.]$/,"")),F+=":"+V}return F}U.formatDate=function(O,R,C,F,N,V){if(N=x(N)&&N,!R)if(C==="y")R=V.year;else if(C==="m")R=V.month;else if(C==="d")R=V.dayMonth+`
`+V.year;else return z(O,C)+`
`+w(V.dayMonthYear,O,F,N);return w(R,O,F,N)};var B=3*v;U.incrementMonth=function(O,R,C){C=x(C)&&C;var F=S(O,v);if(O=Math.round(O-F),C)try{var N=Math.round(O/v)+n,V=a.getComponentMethod("calendars","getCal")(C),K=V.fromJD(N);return R%12?V.add(K,R,"m"):V.add(K,R/12,"y"),(K.toJD()-n)*v+F}catch{i.error("invalid ms "+O+" in calendar "+C)}var Q=new Date(O+B);return Q.setUTCMonth(Q.getUTCMonth()+R)+F-B},U.findExactDates=function(O,R){for(var C=0,F=0,N=0,V=0,K,Q,at=x(R)&&a.getComponentMethod("calendars","getCal")(R),it=0;it<O.length;it++){if(Q=O[it],!E(Q)){V++;continue}if(!(Q%v))if(at)try{K=at.fromJD(Q/v+n),K.day()===1?K.month()===1?C++:F++:N++}catch{}else K=new Date(Q),K.getUTCDate()===1?K.getUTCMonth()===0?C++:F++:N++}F+=C,N+=F;var q=O.length-V;return{exactYears:C/q,exactMonths:F/q,exactDays:N/q}}},24401:function($,U,t){var M=t(39898),E=t(47769),i=t(35657),S=t(79576);function A(p){var x;if(typeof p=="string"){if(x=document.getElementById(p),x===null)throw new Error("No DOM element with id '"+p+"' exists on the page.");return x}else if(p==null)throw new Error("DOM element provided is null or undefined");return p}function g(p){var x=M.select(p);return x.node()instanceof HTMLElement&&x.size()&&x.classed("js-plotly-plot")}function v(p){var x=p&&p.parentNode;x&&x.removeChild(p)}function e(p,x){r("global",p,x)}function r(p,x,s){var u="plotly.js-style-"+p,c=document.getElementById(u);c||(c=document.createElement("style"),c.setAttribute("id",u),c.appendChild(document.createTextNode("")),document.head.appendChild(c));var T=c.sheet;T.insertRule?T.insertRule(x+"{"+s+"}",0):T.addRule?T.addRule(x,s,0):E.warn("addStyleRule failed")}function f(p){var x="plotly.js-style-"+p,s=document.getElementById(x);s&&v(s)}function n(p){var x=o(p),s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return x.forEach(function(u){var c=a(u);if(c){var T=i.convertCssMatrix(c);s=S.multiply(s,s,T)}}),s}function a(p){var x=window.getComputedStyle(p,null),s=x.getPropertyValue("-webkit-transform")||x.getPropertyValue("-moz-transform")||x.getPropertyValue("-ms-transform")||x.getPropertyValue("-o-transform")||x.getPropertyValue("transform");return s==="none"?null:s.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(u){return+u})}function o(p){for(var x=[];h(p);)x.push(p),p=p.parentNode;return x}function h(p){return p&&(p instanceof Element||p instanceof HTMLElement)}function y(p,x){return p&&x&&p.top===x.top&&p.left===x.left&&p.right===x.right&&p.bottom===x.bottom}$.exports={getGraphDiv:A,isPlotDiv:g,removeElement:v,addStyleRule:e,addRelatedStyleRule:r,deleteRelatedStyleRule:f,getFullTransformMatrix:n,getElementTransformMatrix:a,getElementAndAncestors:o,equalDomRects:y}},11086:function($,U,t){var M=t(15398).EventEmitter,E={init:function(i){if(i._ev instanceof M)return i;var S=new M,A=new M;return i._ev=S,i._internalEv=A,i.on=S.on.bind(S),i.once=S.once.bind(S),i.removeListener=S.removeListener.bind(S),i.removeAllListeners=S.removeAllListeners.bind(S),i._internalOn=A.on.bind(A),i._internalOnce=A.once.bind(A),i._removeInternalListener=A.removeListener.bind(A),i._removeAllInternalListeners=A.removeAllListeners.bind(A),i.emit=function(g,v){typeof jQuery<"u"&&jQuery(i).trigger(g,v),S.emit(g,v),A.emit(g,v)},i},triggerHandler:function(i,S,A){var g,v;typeof jQuery<"u"&&(g=jQuery(i).triggerHandler(S,A));var e=i._ev;if(!e)return g;var r=e._events[S];if(!r)return g;function f(a){if(a.listener){if(e.removeListener(S,a.listener),!a.fired)return a.fired=!0,a.listener.apply(e,[A])}else return a.apply(e,[A])}r=Array.isArray(r)?r:[r];var n;for(n=0;n<r.length-1;n++)f(r[n]);return v=f(r[n]),g!==void 0?g:v},purge:function(i){return delete i._ev,delete i.on,delete i.once,delete i.removeListener,delete i.removeAllListeners,delete i.emit,delete i._ev,delete i._internalEv,delete i._internalOn,delete i._internalOnce,delete i._removeInternalListener,delete i._removeAllInternalListeners,i}};$.exports=E},1426:function($,U,t){var M=t(41965),E=Array.isArray;function i(A,g){var v,e;for(v=0;v<A.length;v++){if(e=A[v],e!==null&&typeof e=="object")return!1;e!==void 0&&(g[v]=e)}return!0}U.extendFlat=function(){return S(arguments,!1,!1,!1)},U.extendDeep=function(){return S(arguments,!0,!1,!1)},U.extendDeepAll=function(){return S(arguments,!0,!0,!1)},U.extendDeepNoArrays=function(){return S(arguments,!0,!1,!0)};function S(A,g,v,e){var r=A[0],f=A.length,n,a,o,h,y,p,x;if(f===2&&E(r)&&E(A[1])&&r.length===0){if(x=i(A[1],r),x)return r;r.splice(0,r.length)}for(var s=1;s<f;s++){n=A[s];for(a in n)o=r[a],h=n[a],e&&E(h)?r[a]=h:g&&h&&(M(h)||(y=E(h)))?(y?(y=!1,p=o&&E(o)?o:[]):p=o&&M(o)?o:{},r[a]=S([p,h],g,v,e)):(typeof h<"u"||v)&&(r[a]=h)}return r}},75744:function($){$.exports=function(U){for(var t={},M=[],E=0,i=0;i<U.length;i++){var S=U[i];t[S]!==1&&(t[S]=1,M[E++]=S)}return M}},76756:function($){$.exports=function(E){for(var i=M(E)?t:U,S=[],A=0;A<E.length;A++){var g=E[A];i(g)&&S.push(g)}return S};function U(E){return E.visible===!0}function t(E){var i=E[0].trace;return i.visible===!0&&i._length!==0}function M(E){return Array.isArray(E)&&Array.isArray(E[0])&&E[0][0]&&E[0][0].trace}},41327:function($,U,t){var M=t(39898),E=t(24138),i=t(30774),S=t(29261),A=t(85268),g=t(23389),v=t(47769),e=t(41965),r=t(65487),f=t(61082),n=Object.keys(E),a={"ISO-3":g,"USA-states":g,"country names":o};function o(T){for(var k=0;k<n.length;k++){var _=n[k],b=new RegExp(E[_]);if(b.test(T.trim().toLowerCase()))return _}return v.log("Unrecognized country name: "+T+"."),!1}function h(T,k,_){if(!k||typeof k!="string")return!1;var b=a[T](k),P,l,d;if(b){if(T==="USA-states")for(P=[],d=0;d<_.length;d++)l=_[d],l.properties&&l.properties.gu&&l.properties.gu==="USA"&&P.push(l);else P=_;for(d=0;d<P.length;d++)if(l=P[d],l.id===b)return l;v.log(["Location with id",b,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function y(T){var k=T.geometry,_=k.coordinates,b=T.id,P=[],l,d,L,w;function I(z){for(var B=0;B<z.length-1;B++)if(z[B][0]>0&&z[B+1][0]<0)return B;return null}switch(b==="RUS"||b==="FJI"?l=function(z){var B;if(I(z)===null)B=z;else for(B=new Array(z.length),w=0;w<z.length;w++)B[w]=[z[w][0]<0?z[w][0]+360:z[w][0],z[w][1]];P.push(f.tester(B))}:b==="ATA"?l=function(z){var B=I(z);if(B===null)return P.push(f.tester(z));var O=new Array(z.length+1),R=0;for(w=0;w<z.length;w++)w>B?O[R++]=[z[w][0]+360,z[w][1]]:w===B?(O[R++]=z[w],O[R++]=[z[w][0],-90]):O[R++]=z[w];var C=f.tester(O);C.pts.pop(),P.push(C)}:l=function(z){P.push(f.tester(z))},k.type){case"MultiPolygon":for(d=0;d<_.length;d++)for(L=0;L<_[d].length;L++)l(_[d][L]);break;case"Polygon":for(d=0;d<_.length;d++)l(_[d]);break}return P}function p(T){var k=T.geojson,_=window.PlotlyGeoAssets||{},b=typeof k=="string"?_[k]:k;return e(b)?b:(v.error("Oops ... something went wrong when fetching "+k),!1)}function x(T){var k=T[0].trace,_=p(k);if(!_)return!1;var b={},P=[],l;for(l=0;l<k._length;l++){var d=T[l];(d.loc||d.loc===0)&&(b[d.loc]=d)}function L(z){var B=r(z,k.featureidkey||"id").get(),O=b[B];if(O){var R=z.geometry;if(R.type==="Polygon"||R.type==="MultiPolygon"){var C={type:"Feature",id:B,geometry:R,properties:{}};C.properties.ct=s(C),O.fIn=z,O.fOut=C,P.push(C)}else v.log(["Location",O.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete b[B]}switch(_.type){case"FeatureCollection":var w=_.features;for(l=0;l<w.length;l++)L(w[l]);break;case"Feature":L(_);break;default:return v.warn(["Invalid GeoJSON type",(_.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var I in b)v.log(["Location *"+I+"*","does not have a matching feature with id-key","*"+k.featureidkey+"*."].join(" "));return P}function s(T){var k=T.geometry,_;if(k.type==="MultiPolygon")for(var b=k.coordinates,P=0,l=0;l<b.length;l++){var d={type:"Polygon",coordinates:b[l]},L=i.default(d);L>P&&(P=L,_=d)}else _=k;return S.default(_).geometry.coordinates}function u(T){var k=window.PlotlyGeoAssets||{},_=[];function b(w){return new Promise(function(I,z){M.json(w,function(B,O){if(B){delete k[w];var R=B.status===404?'GeoJSON at URL "'+w+'" does not exist.':"Unexpected error while fetching from "+w;return z(new Error(R))}return k[w]=O,I(O)})})}function P(w){return new Promise(function(I,z){var B=0,O=setInterval(function(){if(k[w]&&k[w]!=="pending")return clearInterval(O),I(k[w]);if(B>100)return clearInterval(O),z("Unexpected error while fetching from "+w);B++},50)})}for(var l=0;l<T.length;l++){var d=T[l][0].trace,L=d.geojson;typeof L=="string"&&(k[L]?k[L]==="pending"&&_.push(P(L)):(k[L]="pending",_.push(b(L))))}return _}function c(T){return A.default(T)}$.exports={locationToFeature:h,feature2polygons:y,getTraceGeojson:p,extractTraceFeature:x,fetchTraceGeoData:u,computeBbox:c}},18214:function($,U,t){var M=t(50606).BADNUM;U.calcTraceToLineCoords=function(E){for(var i=E[0].trace,S=i.connectgaps,A=[],g=[],v=0;v<E.length;v++){var e=E[v],r=e.lonlat;r[0]!==M?g.push(r):!S&&g.length>0&&(A.push(g),g=[])}return g.length>0&&A.push(g),A},U.makeLine=function(E){return E.length===1?{type:"LineString",coordinates:E[0]}:{type:"MultiLineString",coordinates:E}},U.makePolygon=function(E){if(E.length===1)return{type:"Polygon",coordinates:E};for(var i=new Array(E.length),S=0;S<E.length;S++)i[S]=[E[S]];return{type:"MultiPolygon",coordinates:i}},U.makeBlank=function(){return{type:"Point",coordinates:[]}}},87642:function($,U,t){var M=t(64872).mod;U.segmentsIntersect=E;function E(v,e,r,f,n,a,o,h){var y=r-v,p=n-v,x=o-n,s=f-e,u=a-e,c=h-a,T=y*c-x*s;if(T===0)return null;var k=(p*c-x*u)/T,_=(p*s-y*u)/T;return _<0||_>1||k<0||k>1?null:{x:v+y*k,y:e+s*k}}U.segmentDistance=function(v,e,r,f,n,a,o,h){if(E(v,e,r,f,n,a,o,h))return 0;var y=r-v,p=f-e,x=o-n,s=h-a,u=y*y+p*p,c=x*x+s*s,T=Math.min(i(y,p,u,n-v,a-e),i(y,p,u,o-v,h-e),i(x,s,c,v-n,e-a),i(x,s,c,r-n,f-a));return Math.sqrt(T)};function i(v,e,r,f,n){var a=f*v+n*e;if(a<0)return f*f+n*n;if(a>r){var o=f-v,h=n-e;return o*o+h*h}else{var y=f*e-n*v;return y*y/r}}var S,A,g;U.getTextLocation=function(v,e,r,f){if((v!==A||f!==g)&&(S={},A=v,g=f),S[r])return S[r];var n=v.getPointAtLength(M(r-f/2,e)),a=v.getPointAtLength(M(r+f/2,e)),o=Math.atan((a.y-n.y)/(a.x-n.x)),h=v.getPointAtLength(M(r,e)),y=(h.x*4+n.x+a.x)/6,p=(h.y*4+n.y+a.y)/6,x={x:y,y:p,theta:o};return S[r]=x,x},U.clearLocationCache=function(){A=null},U.getVisibleSegment=function(v,e,r){var f=e.left,n=e.right,a=e.top,o=e.bottom,h=0,y=v.getTotalLength(),p=y,x,s;function u(T){var k=v.getPointAtLength(T);T===0?x=k:T===y&&(s=k);var _=k.x<f?f-k.x:k.x>n?k.x-n:0,b=k.y<a?a-k.y:k.y>o?k.y-o:0;return Math.sqrt(_*_+b*b)}for(var c=u(h);c;){if(h+=c+r,h>p)return;c=u(h)}for(c=u(p);c;){if(p-=c+r,h>p)return;c=u(p)}return{min:h,max:p,len:p-h,total:y,isClosed:h===0&&p===y&&Math.abs(x.x-s.x)<.1&&Math.abs(x.y-s.y)<.1}},U.findPointOnPath=function(v,e,r,f){f=f||{};for(var n=f.pathLength||v.getTotalLength(),a=f.tolerance||.001,o=f.iterationLimit||30,h=v.getPointAtLength(0)[r]>v.getPointAtLength(n)[r]?-1:1,y=0,p=0,x=n,s,u,c;y<o;){if(s=(p+x)/2,u=v.getPointAtLength(s),c=u[r]-e,Math.abs(c)<a)return u;h*c>0?x=s:p=s,y++}return u}},81697:function($,U,t){var M=t(92770),E=t(84267),i=t(25075),S=t(21081),A=t(22399).defaultLine,g=t(73627).isArrayOrTypedArray,v=i(A),e=1;function r(h,y){var p=h;return p[3]*=y,p}function f(h){if(M(h))return v;var y=i(h);return y.length?y:v}function n(h){return M(h)?h:e}function a(h,y,p){var x=h.color,s=g(x),u=g(y),c=S.extractOpts(h),T=[],k,_,b,P,l;if(c.colorscale!==void 0?k=S.makeColorScaleFuncFromTrace(h):k=f,s?_=function(L,w){return L[w]===void 0?v:i(k(L[w]))}:_=f,u?b=function(L,w){return L[w]===void 0?e:n(L[w])}:b=n,s||u)for(var d=0;d<p;d++)P=_(x,d),l=b(y,d),T[d]=r(P,l);else T=r(i(x),y);return T}function o(h){var y=S.extractOpts(h),p=y.colorscale;return y.reversescale&&(p=S.flipScale(y.colorscale)),p.map(function(x){var s=x[0],u=E(x[1]),c=u.toRgb();return{index:s,rgb:[c.r,c.g,c.b,c.a]}})}$.exports={formatColor:a,parseColorScale:o}},28984:function($,U,t){var M=t(23389);function E(i){return[i]}$.exports={keyFun:function(i){return i.key},repeat:E,descend:M,wrap:E,unwrap:function(i){return i[0]}}},23389:function($){$.exports=function(U){return U}},39240:function($){$.exports=function(U,t){if(!t)return U;var M=1/Math.abs(t),E=M>1?(M*U+M*t)/M:U+t,i=String(E).length;if(i>16){var S=String(t).length,A=String(U).length;if(i>=A+S){var g=parseFloat(E).toPrecision(12);g.indexOf("e+")===-1&&(E=+g)}}return E}},71828:function($,U,t){var M=t(39898),E=t(84096).g0,i=t(60721).WU,S=t(92770),A=t(50606),g=A.FP_SAFE,v=-g,e=A.BADNUM,r=$.exports={};r.adjustFormat=function(G){return!G||/^\d[.]\df/.test(G)||/[.]\d%/.test(G)?G:G==="0.f"?"~f":/^\d%/.test(G)?"~%":/^\ds/.test(G)?"~s":!/^[~,.0$]/.test(G)&&/[&fps]/.test(G)?"~"+G:G};var f={};r.warnBadFormat=function(G){var et=String(G);f[et]||(f[et]=1,r.warn('encountered bad format: "'+et+'"'))},r.noFormat=function(G){return String(G)},r.numberFormat=function(G){var et;try{et=i(r.adjustFormat(G))}catch{return r.warnBadFormat(G),r.noFormat}return et},r.nestedProperty=t(65487),r.keyedContainer=t(66636),r.relativeAttr=t(6962),r.isPlainObject=t(41965),r.toLogRange=t(58163),r.relinkPrivateKeys=t(51332);var n=t(73627);r.isTypedArray=n.isTypedArray,r.isArrayOrTypedArray=n.isArrayOrTypedArray,r.isArray1D=n.isArray1D,r.ensureArray=n.ensureArray,r.concat=n.concat,r.maxRowLength=n.maxRowLength,r.minRowLength=n.minRowLength;var a=t(64872);r.mod=a.mod,r.modHalf=a.modHalf;var o=t(96554);r.valObjectMeta=o.valObjectMeta,r.coerce=o.coerce,r.coerce2=o.coerce2,r.coerceFont=o.coerceFont,r.coercePattern=o.coercePattern,r.coerceHoverinfo=o.coerceHoverinfo,r.coerceSelectionMarkerOpacity=o.coerceSelectionMarkerOpacity,r.validate=o.validate;var h=t(41631);r.dateTime2ms=h.dateTime2ms,r.isDateTime=h.isDateTime,r.ms2DateTime=h.ms2DateTime,r.ms2DateTimeLocal=h.ms2DateTimeLocal,r.cleanDate=h.cleanDate,r.isJSDate=h.isJSDate,r.formatDate=h.formatDate,r.incrementMonth=h.incrementMonth,r.dateTick0=h.dateTick0,r.dfltRange=h.dfltRange,r.findExactDates=h.findExactDates,r.MIN_MS=h.MIN_MS,r.MAX_MS=h.MAX_MS;var y=t(65888);r.findBin=y.findBin,r.sorterAsc=y.sorterAsc,r.sorterDes=y.sorterDes,r.distinctVals=y.distinctVals,r.roundUp=y.roundUp,r.sort=y.sort,r.findIndexOfMin=y.findIndexOfMin,r.sortObjectKeys=t(78607);var p=t(80038);r.aggNums=p.aggNums,r.len=p.len,r.mean=p.mean,r.median=p.median,r.midRange=p.midRange,r.variance=p.variance,r.stdev=p.stdev,r.interp=p.interp;var x=t(35657);r.init2dArray=x.init2dArray,r.transposeRagged=x.transposeRagged,r.dot=x.dot,r.translationMatrix=x.translationMatrix,r.rotationMatrix=x.rotationMatrix,r.rotationXYMatrix=x.rotationXYMatrix,r.apply3DTransform=x.apply3DTransform,r.apply2DTransform=x.apply2DTransform,r.apply2DTransform2=x.apply2DTransform2,r.convertCssMatrix=x.convertCssMatrix,r.inverseTransformMatrix=x.inverseTransformMatrix;var s=t(26348);r.deg2rad=s.deg2rad,r.rad2deg=s.rad2deg,r.angleDelta=s.angleDelta,r.angleDist=s.angleDist,r.isFullCircle=s.isFullCircle,r.isAngleInsideSector=s.isAngleInsideSector,r.isPtInsideSector=s.isPtInsideSector,r.pathArc=s.pathArc,r.pathSector=s.pathSector,r.pathAnnulus=s.pathAnnulus;var u=t(99863);r.isLeftAnchor=u.isLeftAnchor,r.isCenterAnchor=u.isCenterAnchor,r.isRightAnchor=u.isRightAnchor,r.isTopAnchor=u.isTopAnchor,r.isMiddleAnchor=u.isMiddleAnchor,r.isBottomAnchor=u.isBottomAnchor;var c=t(87642);r.segmentsIntersect=c.segmentsIntersect,r.segmentDistance=c.segmentDistance,r.getTextLocation=c.getTextLocation,r.clearLocationCache=c.clearLocationCache,r.getVisibleSegment=c.getVisibleSegment,r.findPointOnPath=c.findPointOnPath;var T=t(1426);r.extendFlat=T.extendFlat,r.extendDeep=T.extendDeep,r.extendDeepAll=T.extendDeepAll,r.extendDeepNoArrays=T.extendDeepNoArrays;var k=t(47769);r.log=k.log,r.warn=k.warn,r.error=k.error;var _=t(30587);r.counterRegex=_.counter;var b=t(79990);r.throttle=b.throttle,r.throttleDone=b.done,r.clearThrottle=b.clear;var P=t(24401);r.getGraphDiv=P.getGraphDiv,r.isPlotDiv=P.isPlotDiv,r.removeElement=P.removeElement,r.addStyleRule=P.addStyleRule,r.addRelatedStyleRule=P.addRelatedStyleRule,r.deleteRelatedStyleRule=P.deleteRelatedStyleRule,r.getFullTransformMatrix=P.getFullTransformMatrix,r.getElementTransformMatrix=P.getElementTransformMatrix,r.getElementAndAncestors=P.getElementAndAncestors,r.equalDomRects=P.equalDomRects,r.clearResponsive=t(86367),r.preserveDrawingBuffer=t(45142),r.makeTraceGroups=t(77310),r._=t(15867),r.notifier=t(75046),r.filterUnique=t(75744),r.filterVisible=t(76756),r.pushUnique=t(75138),r.increment=t(39240),r.cleanNumber=t(95218),r.ensureNumber=function(G){return S(G)?(G=Number(G),G>g||G<v?e:G):e},r.isIndex=function(G,et){return et!==void 0&&G>=et?!1:S(G)&&G>=0&&G%1===0},r.noop=t(64213),r.identity=t(23389),r.repeat=function(G,et){for(var nt=new Array(et),X=0;X<et;X++)nt[X]=G;return nt},r.swapAttrs=function(G,et,nt,X){nt||(nt="x"),X||(X="y");for(var Y=0;Y<et.length;Y++){var ot=et[Y],rt=r.nestedProperty(G,ot.replace("?",nt)),ht=r.nestedProperty(G,ot.replace("?",X)),pt=rt.get();rt.set(ht.get()),ht.set(pt)}},r.raiseToTop=function(G){G.parentNode.appendChild(G)},r.cancelTransition=function(G){return G.transition().duration(0)},r.constrain=function(G,et,nt){return et>nt?Math.max(nt,Math.min(et,G)):Math.max(et,Math.min(nt,G))},r.bBoxIntersect=function(G,et,nt){return nt=nt||0,G.left<=et.right+nt&&et.left<=G.right+nt&&G.top<=et.bottom+nt&&et.top<=G.bottom+nt},r.simpleMap=function(G,et,nt,X,Y){for(var ot=G.length,rt=new Array(ot),ht=0;ht<ot;ht++)rt[ht]=et(G[ht],nt,X,Y);return rt},r.randstr=function G(et,nt,X,Y){if(X||(X=16),nt===void 0&&(nt=24),nt<=0)return"0";var ot=Math.log(Math.pow(2,nt))/Math.log(X),rt="",ht,pt,yt;for(ht=2;ot===1/0;ht*=2)ot=Math.log(Math.pow(2,nt/ht))/Math.log(X)*ht;var xt=ot-Math.floor(ot);for(ht=0;ht<Math.floor(ot);ht++)yt=Math.floor(Math.random()*X).toString(X),rt=yt+rt;xt&&(pt=Math.pow(X,xt),yt=Math.floor(Math.random()*pt).toString(X),rt=yt+rt);var Ft=parseInt(rt,X);return et&&et[rt]||Ft!==1/0&&Ft>=Math.pow(2,nt)?Y>10?(r.warn("randstr failed uniqueness"),rt):G(et,nt,X,(Y||0)+1):rt},r.OptionControl=function(G,et){G||(G={}),et||(et="opt");var nt={};return nt.optionList=[],nt._newoption=function(X){X[et]=G,nt[X.name]=X,nt.optionList.push(X)},nt["_"+et]=G,nt},r.smooth=function(G,et){if(et=Math.round(et)||0,et<2)return G;var nt=G.length,X=2*nt,Y=2*et-1,ot=new Array(Y),rt=new Array(nt),ht,pt,yt,xt;for(ht=0;ht<Y;ht++)ot[ht]=(1-Math.cos(Math.PI*(ht+1)/et))/(2*et);for(ht=0;ht<nt;ht++){for(xt=0,pt=0;pt<Y;pt++)yt=ht+pt+1-et,yt<-nt?yt-=X*Math.round(yt/X):yt>=X&&(yt-=X*Math.floor(yt/X)),yt<0?yt=-1-yt:yt>=nt&&(yt=X-1-yt),xt+=G[yt]*ot[pt];rt[ht]=xt}return rt},r.syncOrAsync=function(G,et,nt){var X,Y;function ot(){return r.syncOrAsync(G,et,nt)}for(;G.length;)if(Y=G.splice(0,1)[0],X=Y(et),X&&X.then)return X.then(ot);return nt&&nt(et)},r.stripTrailingSlash=function(G){return G.substr(-1)==="/"?G.substr(0,G.length-1):G},r.noneOrAll=function(G,et,nt){if(G){var X=!1,Y=!0,ot,rt;for(ot=0;ot<nt.length;ot++)rt=G[nt[ot]],rt!=null?X=!0:Y=!1;if(X&&!Y)for(ot=0;ot<nt.length;ot++)G[nt[ot]]=et[nt[ot]]}},r.mergeArray=function(G,et,nt,X){var Y=typeof X=="function";if(r.isArrayOrTypedArray(G))for(var ot=Math.min(G.length,et.length),rt=0;rt<ot;rt++){var ht=G[rt];et[rt][nt]=Y?X(ht):ht}},r.mergeArrayCastPositive=function(G,et,nt){return r.mergeArray(G,et,nt,function(X){var Y=+X;return isFinite(Y)&&Y>0?Y:0})},r.fillArray=function(G,et,nt,X){if(X=X||r.identity,r.isArrayOrTypedArray(G))for(var Y=0;Y<et.length;Y++)et[Y][nt]=X(G[Y])},r.castOption=function(G,et,nt,X){X=X||r.identity;var Y=r.nestedProperty(G,nt).get();return r.isArrayOrTypedArray(Y)?Array.isArray(et)&&r.isArrayOrTypedArray(Y[et[0]])?X(Y[et[0]][et[1]]):X(Y[et]):Y},r.extractOption=function(G,et,nt,X){if(nt in G)return G[nt];var Y=r.nestedProperty(et,X).get();if(!Array.isArray(Y))return Y};function l(G){var et={};for(var nt in G)for(var X=G[nt],Y=0;Y<X.length;Y++)et[X[Y]]=+nt;return et}r.tagSelected=function(G,et,nt){var X=et.selectedpoints,Y=et._indexToPoints,ot;Y&&(ot=l(Y));function rt(Ft){return Ft!==void 0&&Ft<G.length}for(var ht=0;ht<X.length;ht++){var pt=X[ht];if(r.isIndex(pt)||r.isArrayOrTypedArray(pt)&&r.isIndex(pt[0])&&r.isIndex(pt[1])){var yt=ot?ot[pt]:pt,xt=nt?nt[yt]:yt;rt(xt)&&(G[xt].selected=1)}}},r.selIndices2selPoints=function(G){var et=G.selectedpoints,nt=G._indexToPoints;if(nt){for(var X=l(nt),Y=[],ot=0;ot<et.length;ot++){var rt=et[ot];if(r.isIndex(rt)){var ht=X[rt];r.isIndex(ht)&&Y.push(ht)}}return Y}else return et},r.getTargetArray=function(G,et){var nt=et.target;if(typeof nt=="string"&&nt){var X=r.nestedProperty(G,nt).get();return Array.isArray(X)?X:!1}else if(Array.isArray(nt))return nt;return!1};function d(G,et,nt){var X={};typeof et!="object"&&(et={});var Y=nt==="pieLike"?-1:3,ot=Object.keys(G),rt,ht,pt;for(rt=0;rt<ot.length;rt++)ht=ot[rt],pt=G[ht],!(ht.charAt(0)==="_"||typeof pt=="function")&&(ht==="module"?X[ht]=pt:Array.isArray(pt)?ht==="colorscale"||Y===-1?X[ht]=pt.slice():X[ht]=pt.slice(0,Y):r.isTypedArray(pt)?Y===-1?X[ht]=pt.subarray():X[ht]=pt.subarray(0,Y):pt&&typeof pt=="object"?X[ht]=d(G[ht],et[ht],nt):X[ht]=pt);for(ot=Object.keys(et),rt=0;rt<ot.length;rt++)ht=ot[rt],pt=et[ht],(typeof pt!="object"||!(ht in X)||typeof X[ht]!="object")&&(X[ht]=pt);return X}r.minExtend=d,r.titleCase=function(G){return G.charAt(0).toUpperCase()+G.substr(1)},r.containsAny=function(G,et){for(var nt=0;nt<et.length;nt++)if(G.indexOf(et[nt])!==-1)return!0;return!1},r.isIE=function(){return typeof window.navigator.msSaveBlob<"u"};var L=/Version\/[\d\.]+.*Safari/;r.isSafari=function(){return L.test(window.navigator.userAgent)};var w=/iPad|iPhone|iPod/;r.isIOS=function(){return w.test(window.navigator.userAgent)};var I=/Firefox\/(\d+)\.\d+/;r.getFirefoxVersion=function(){var G=I.exec(window.navigator.userAgent);if(G&&G.length===2){var et=parseInt(G[1]);if(!isNaN(et))return et}return null},r.isD3Selection=function(G){return G instanceof M.selection},r.ensureSingle=function(G,et,nt,X){var Y=G.select(et+(nt?"."+nt:""));if(Y.size())return Y;var ot=G.append(et);return nt&&ot.classed(nt,!0),X&&ot.call(X),ot},r.ensureSingleById=function(G,et,nt,X){var Y=G.select(et+"#"+nt);if(Y.size())return Y;var ot=G.append(et).attr("id",nt);return X&&ot.call(X),ot},r.objectFromPath=function(G,et){for(var nt=G.split("."),X,Y=X={},ot=0;ot<nt.length;ot++){var rt=nt[ot],ht=null,pt=nt[ot].match(/(.*)\[([0-9]+)\]/);pt?(rt=pt[1],ht=pt[2],X=X[rt]=[],ot===nt.length-1?X[ht]=et:X[ht]={},X=X[ht]):(ot===nt.length-1?X[rt]=et:X[rt]={},X=X[rt])}return Y};var z=/^([^\[\.]+)\.(.+)?/,B=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;r.expandObjectPaths=function(G){var et,nt,X,Y,ot,rt,ht;if(typeof G=="object"&&!Array.isArray(G))for(nt in G)G.hasOwnProperty(nt)&&((et=nt.match(z))?(Y=G[nt],X=et[1],delete G[nt],G[X]=r.extendDeepNoArrays(G[X]||{},r.objectFromPath(nt,r.expandObjectPaths(Y))[X])):(et=nt.match(B))?(Y=G[nt],X=et[1],ot=parseInt(et[2]),delete G[nt],G[X]=G[X]||[],et[3]==="."?(ht=et[4],rt=G[X][ot]=G[X][ot]||{},r.extendDeepNoArrays(rt,r.objectFromPath(ht,r.expandObjectPaths(Y)))):G[X][ot]=r.expandObjectPaths(Y)):G[nt]=r.expandObjectPaths(G[nt]));return G},r.numSeparate=function(G,et,nt){if(nt||(nt=!1),typeof et!="string"||et.length===0)throw new Error("Separator string required for formatting!");typeof G=="number"&&(G=String(G));var X=/(\d+)(\d{3})/,Y=et.charAt(0),ot=et.charAt(1),rt=G.split("."),ht=rt[0],pt=rt.length>1?Y+rt[1]:"";if(ot&&(rt.length>1||ht.length>4||nt))for(;X.test(ht);)ht=ht.replace(X,"$1"+ot+"$2");return ht+pt},r.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var O=/^\w*$/;r.templateString=function(G,et){var nt={};return G.replace(r.TEMPLATE_STRING_REGEX,function(X,Y){var ot;return O.test(Y)?ot=et[Y]:(nt[Y]=nt[Y]||r.nestedProperty(et,Y).get,ot=nt[Y]()),r.isValidTextValue(ot)?ot:""})};var R={max:10,count:0,name:"hovertemplate"};r.hovertemplateString=function(){return Q.apply(R,arguments)};var C={max:10,count:0,name:"texttemplate"};r.texttemplateString=function(){return Q.apply(C,arguments)};var F=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function N(G){var et=G.match(F);return et?{key:et[1],op:et[2],number:Number(et[3])}:{key:G,op:null,number:null}}var V={max:10,count:0,name:"texttemplate",parseMultDiv:!0};r.texttemplateStringForShapes=function(){return Q.apply(V,arguments)};var K=/^[:|\|]/;function Q(G,et,nt){var X=this,Y=arguments;et||(et={});var ot={};return G.replace(r.TEMPLATE_STRING_REGEX,function(rt,ht,pt){var yt=ht==="xother"||ht==="yother",xt=ht==="_xother"||ht==="_yother",Ft=ht==="_xother_"||ht==="_yother_",Et=ht==="xother_"||ht==="yother_",mt=yt||xt||Et||Ft,gt=ht;(xt||Ft)&&(gt=gt.substring(1)),(Et||Ft)&&(gt=gt.substring(0,gt.length-1));var wt=null,Pt=null;if(X.parseMultDiv){var Bt=N(gt);gt=Bt.key,wt=Bt.op,Pt=Bt.number}var kt;if(mt){if(kt=et[gt],kt===void 0)return""}else{var jt,Ht;for(Ht=3;Ht<Y.length;Ht++)if(jt=Y[Ht],!!jt){if(jt.hasOwnProperty(gt)){kt=jt[gt];break}if(O.test(gt)||(kt=r.nestedProperty(jt,gt).get(),kt=ot[gt]||r.nestedProperty(jt,gt).get(),kt&&(ot[gt]=kt)),kt!==void 0)break}}if(kt!==void 0&&(wt==="*"&&(kt*=Pt),wt==="/"&&(kt/=Pt)),kt===void 0&&X)return X.count<X.max&&(r.warn("Variable '"+gt+"' in "+X.name+" could not be found!"),kt=rt),X.count===X.max&&r.warn("Too many "+X.name+" warnings - additional warnings will be suppressed"),X.count++,rt;if(pt){var Vt;if(pt[0]===":"&&(Vt=nt?nt.numberFormat:r.numberFormat,kt=Vt(pt.replace(K,""))(kt)),pt[0]==="|"){Vt=nt?nt.timeFormat:E;var ee=r.dateTime2ms(kt);kt=r.formatDate(ee,pt.replace(K,""),!1,Vt)}}else{var te=gt+"Label";et.hasOwnProperty(te)&&(kt=et[te])}return mt&&(kt="("+kt+")",(xt||Ft)&&(kt=" "+kt),(Et||Ft)&&(kt=kt+" ")),kt})}var at=48,it=57;r.subplotSort=function(G,et){for(var nt=Math.min(G.length,et.length)+1,X=0,Y=0,ot=0;ot<nt;ot++){var rt=G.charCodeAt(ot)||0,ht=et.charCodeAt(ot)||0,pt=rt>=at&&rt<=it,yt=ht>=at&&ht<=it;if(pt&&(X=10*X+rt-at),yt&&(Y=10*Y+ht-at),!pt||!yt){if(X!==Y)return X-Y;if(rt!==ht)return rt-ht}}return Y-X};var q=2e9;r.seedPseudoRandom=function(){q=2e9},r.pseudoRandom=function(){var G=q;return q=(69069*q+1)%4294967296,Math.abs(q-G)<429496729?r.pseudoRandom():q/4294967296},r.fillText=function(G,et,nt){var X=Array.isArray(nt)?function(rt){nt.push(rt)}:function(rt){nt.text=rt},Y=r.extractOption(G,et,"htx","hovertext");if(r.isValidTextValue(Y))return X(Y);var ot=r.extractOption(G,et,"tx","text");if(r.isValidTextValue(ot))return X(ot)},r.isValidTextValue=function(G){return G||G===0},r.formatPercent=function(G,et){et=et||0;for(var nt=(Math.round(100*G*Math.pow(10,et))*Math.pow(.1,et)).toFixed(et)+"%",X=0;X<et;X++)nt.indexOf(".")!==-1&&(nt=nt.replace("0%","%"),nt=nt.replace(".%","%"));return nt},r.isHidden=function(G){var et=window.getComputedStyle(G).display;return!et||et==="none"},r.strTranslate=function(G,et){return G||et?"translate("+G+","+et+")":""},r.strRotate=function(G){return G?"rotate("+G+")":""},r.strScale=function(G){return G!==1?"scale("+G+")":""},r.getTextTransform=function(G){var et=G.noCenter,nt=G.textX,X=G.textY,Y=G.targetX,ot=G.targetY,rt=G.anchorX||0,ht=G.anchorY||0,pt=G.rotate,yt=G.scale;return yt?yt>1&&(yt=1):yt=0,r.strTranslate(Y-yt*(nt+rt),ot-yt*(X+ht))+r.strScale(yt)+(pt?"rotate("+pt+(et?"":" "+nt+" "+X)+")":"")},r.setTransormAndDisplay=function(G,et){G.attr("transform",r.getTextTransform(et)),G.style("display",et.scale?null:"none")},r.ensureUniformFontSize=function(G,et){var nt=r.extendFlat({},et);return nt.size=Math.max(et.size,G._fullLayout.uniformtext.minsize||0),nt},r.join2=function(G,et,nt){var X=G.length;return X>1?G.slice(0,-1).join(et)+nt+G[X-1]:G.join(et)},r.bigFont=function(G){return Math.round(1.2*G)};var W=r.getFirefoxVersion(),Z=W!==null&&W<86;r.getPositionFromD3Event=function(){return Z?[M.event.layerX,M.event.layerY]:[M.event.offsetX,M.event.offsetY]}},41965:function($){$.exports=function(U){return window&&window.process&&window.process.versions?Object.prototype.toString.call(U)==="[object Object]":Object.prototype.toString.call(U)==="[object Object]"&&Object.getPrototypeOf(U).hasOwnProperty("hasOwnProperty")}},66636:function($,U,t){var M=t(65487),E=/^\w*$/,i=0,S=1,A=2,g=3,v=4;$.exports=function(e,r,f,n){f=f||"name",n=n||"value";var a,o,h,y={};r&&r.length?(h=M(e,r),o=h.get()):o=e,r=r||"";var p={};if(o)for(a=0;a<o.length;a++)p[o[a][f]]=a;var x=E.test(n),s={set:function(u,c){var T=c===null?v:i;if(!o){if(!h||T===v)return;o=[],h.set(o)}var k=p[u];if(k===void 0){if(T===v)return;T=T|g,k=o.length,p[u]=k}else c!==(x?o[k][n]:M(o[k],n).get())&&(T=T|A);var _=o[k]=o[k]||{};return _[f]=u,x?_[n]=c:M(_,n).set(c),c!==null&&(T=T&~v),y[k]=y[k]|T,s},get:function(u){if(o){var c=p[u];if(c!==void 0)return x?o[c][n]:M(o[c],n).get()}},rename:function(u,c){var T=p[u];return T===void 0||(y[T]=y[T]|S,p[c]=T,delete p[u],o[T][f]=c),s},remove:function(u){var c=p[u];if(c===void 0)return s;var T=o[c];if(Object.keys(T).length>2)return y[c]=y[c]|A,s.set(u,null);if(x){for(a=c;a<o.length;a++)y[a]=y[a]|g;for(a=c;a<o.length;a++)p[o[a][f]]--;o.splice(c,1),delete p[u]}else M(T,n).set(null),y[c]=y[c]|A|v;return s},constructUpdate:function(){for(var u,c,T={},k=Object.keys(y),_=0;_<k.length;_++)c=k[_],u=r+"["+c+"]",o[c]?(y[c]&S&&(T[u+"."+f]=o[c][f]),y[c]&A&&(x?T[u+"."+n]=y[c]&v?null:o[c][n]:T[u+"."+n]=y[c]&v?null:M(o[c],n).get())):T[u]=null;return T}};return s}},15867:function($,U,t){var M=t(73972);$.exports=function(E,i){for(var S=E._context.locale,A=0;A<2;A++){for(var g=E._context.locales,v=0;v<2;v++){var e=(g[S]||{}).dictionary;if(e){var r=e[i];if(r)return r}g=M.localeRegistry}var f=S.split("-")[0];if(f===S)break;S=f}return i}},47769:function($,U,t){var M=t(72075).dfltConfig,E=t(75046),i=$.exports={};i.log=function(){var S;if(M.logging>1){var A=["LOG:"];for(S=0;S<arguments.length;S++)A.push(arguments[S]);console.trace.apply(console,A)}if(M.notifyOnLogging>1){var g=[];for(S=0;S<arguments.length;S++)g.push(arguments[S]);E(g.join("<br>"),"long")}},i.warn=function(){var S;if(M.logging>0){var A=["WARN:"];for(S=0;S<arguments.length;S++)A.push(arguments[S]);console.trace.apply(console,A)}if(M.notifyOnLogging>0){var g=[];for(S=0;S<arguments.length;S++)g.push(arguments[S]);E(g.join("<br>"),"stick")}},i.error=function(){var S;if(M.logging>0){var A=["ERROR:"];for(S=0;S<arguments.length;S++)A.push(arguments[S]);console.error.apply(console,A)}if(M.notifyOnLogging>0){var g=[];for(S=0;S<arguments.length;S++)g.push(arguments[S]);E(g.join("<br>"),"stick")}}},77310:function($,U,t){var M=t(39898);$.exports=function(E,i,S){var A=E.selectAll("g."+S.replace(/\s/g,".")).data(i,function(v){return v[0].trace.uid});A.exit().remove(),A.enter().append("g").attr("class",S),A.order();var g=E.classed("rangeplot")?"nodeRangePlot3":"node3";return A.each(function(v){v[0][g]=M.select(this)}),A}},35657:function($,U,t){var M=t(79576);U.init2dArray=function(E,i){for(var S=new Array(E),A=0;A<E;A++)S[A]=new Array(i);return S},U.transposeRagged=function(E){var i=0,S=E.length,A,g;for(A=0;A<S;A++)i=Math.max(i,E[A].length);var v=new Array(i);for(A=0;A<i;A++)for(v[A]=new Array(S),g=0;g<S;g++)v[A][g]=E[g][A];return v},U.dot=function(E,i){if(!(E.length&&i.length)||E.length!==i.length)return null;var S=E.length,A,g;if(E[0].length)for(A=new Array(S),g=0;g<S;g++)A[g]=U.dot(E[g],i);else if(i[0].length){var v=U.transposeRagged(i);for(A=new Array(v.length),g=0;g<v.length;g++)A[g]=U.dot(E,v[g])}else for(A=0,g=0;g<S;g++)A+=E[g]*i[g];return A},U.translationMatrix=function(E,i){return[[1,0,E],[0,1,i],[0,0,1]]},U.rotationMatrix=function(E){var i=E*Math.PI/180;return[[Math.cos(i),-Math.sin(i),0],[Math.sin(i),Math.cos(i),0],[0,0,1]]},U.rotationXYMatrix=function(E,i,S){return U.dot(U.dot(U.translationMatrix(i,S),U.rotationMatrix(E)),U.translationMatrix(-i,-S))},U.apply3DTransform=function(E){return function(){var i=arguments,S=arguments.length===1?i[0]:[i[0],i[1],i[2]||0];return U.dot(E,[S[0],S[1],S[2],1]).slice(0,3)}},U.apply2DTransform=function(E){return function(){var i=arguments;i.length===3&&(i=i[0]);var S=arguments.length===1?i[0]:[i[0],i[1]];return U.dot(E,[S[0],S[1],1]).slice(0,2)}},U.apply2DTransform2=function(E){var i=U.apply2DTransform(E);return function(S){return i(S.slice(0,2)).concat(i(S.slice(2,4)))}},U.convertCssMatrix=function(E){if(E){var i=E.length;if(i===16)return E;if(i===6)return[E[0],E[1],0,0,E[2],E[3],0,0,0,0,1,0,E[4],E[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},U.inverseTransformMatrix=function(E){var i=[];return M.invert(i,E),[[i[0],i[1],i[2],i[3]],[i[4],i[5],i[6],i[7]],[i[8],i[9],i[10],i[11]],[i[12],i[13],i[14],i[15]]]}},64872:function($){function U(M,E){var i=M%E;return i<0?i+E:i}function t(M,E){return Math.abs(M)>E/2?M-Math.round(M/E)*E:M}$.exports={mod:U,modHalf:t}},65487:function($,U,t){var M=t(92770),E=t(73627).isArrayOrTypedArray;$.exports=function(n,a){if(M(a))a=String(a);else if(typeof a!="string"||a.substr(a.length-4)==="[-1]")throw"bad property string";for(var o=0,h=a.split("."),y,p,x;o<h.length;){if(y=String(h[o]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),y){if(y[1])h[o]=y[1];else if(o===0)h.splice(0,1);else throw"bad property string";for(p=y[2].substr(1,y[2].length-2).split("]["),x=0;x<p.length;x++)o++,h.splice(o,0,Number(p[x]))}o++}return typeof n!="object"?f(n,a,h):{set:g(n,h,a),get:i(n,h),astr:a,parts:h,obj:n}};function i(n,a){return function(){var o=n,h,y,p,x,s;for(x=0;x<a.length-1;x++){if(h=a[x],h===-1){for(y=!0,p=[],s=0;s<o.length;s++)p[s]=i(o[s],a.slice(x+1))(),p[s]!==p[0]&&(y=!1);return y?p[0]:p}if(typeof h=="number"&&!E(o)||(o=o[h],typeof o!="object"||o===null))return}if(!(typeof o!="object"||o===null)&&(p=o[a[x]],p!==null))return p}}var S=/(^|\.)args\[/;function A(n,a){return n===void 0||n===null&&!a.match(S)}function g(n,a,o){return function(h){var y=n,p="",x=A(h,o),s,u;for(u=0;u<a.length-1;u++){if(s=a[u],typeof s=="number"&&!E(y))throw"array index but container is not an array";if(s===-1){if(x=!e(y,a.slice(u+1),h,o),x)break;return}if(!r(y,s,a[u+1],x))break;if(y=y[s],typeof y!="object"||y===null)throw"container is not an object";p=v(p,s)}if(x){if(u===a.length-1&&(delete y[a[u]],Array.isArray(y)&&+a[u]===y.length-1))for(;y.length&&y[y.length-1]===void 0;)y.pop()}else y[a[u]]=h}}function v(n,a){var o=a;return M(a)?o="["+a+"]":n&&(o="."+a),n+o}function e(n,a,o,h){var y=E(o),p=!0,x=o,s=h.replace("-1",0),u=y?!1:A(o,s),c=a[0],T;for(T=0;T<n.length;T++)s=h.replace("-1",T),y&&(x=o[T%o.length],u=A(x,s)),u&&(p=!1),r(n,T,c,u)&&g(n[T],a,h.replace("-1",T))(x);return p}function r(n,a,o,h){if(n[a]===void 0){if(h)return!1;typeof o=="number"?n[a]=[]:n[a]={}}return!0}function f(n,a,o){return{set:function(){throw"bad container"},get:function(){},astr:a,parts:o,obj:n}}},64213:function($){$.exports=function(){}},75046:function($,U,t){var M=t(39898),E=t(92770),i=[];$.exports=function(S,A){if(i.indexOf(S)!==-1)return;i.push(S);var g=1e3;E(A)?g=A:A==="long"&&(g=3e3);var v=M.select("body").selectAll(".plotly-notifier").data([0]);v.enter().append("div").classed("plotly-notifier",!0);var e=v.selectAll(".notifier-note").data(i);function r(f){f.duration(700).style("opacity",0).each("end",function(n){var a=i.indexOf(n);a!==-1&&i.splice(a,1),M.select(this).remove()})}e.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(f){var n=M.select(this);n.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){n.transition().call(r)});for(var a=n.append("p"),o=f.split(/<br\s*\/?>/g),h=0;h<o.length;h++)h&&a.append("br"),a.append("span").text(o[h]);A==="stick"?n.transition().duration(350).style("opacity",1):n.transition().duration(700).style("opacity",1).transition().delay(g).call(r)})}},39918:function($,U,t){var M=t(6964),E="data-savedcursor",i="!!";$.exports=function(S,A){var g=S.attr(E);if(A){if(!g){for(var v=(S.attr("class")||"").split(" "),e=0;e<v.length;e++){var r=v[e];r.indexOf("cursor-")===0&&S.attr(E,r.substr(7)).classed(r,!1)}S.attr(E)||S.attr(E,i)}M(S,A)}else g&&(S.attr(E,null),g===i?M(S):M(S,g))}},61082:function($,U,t){var M=t(35657).dot,E=t(50606).BADNUM,i=$.exports={};i.tester=function(S){var A=S.slice(),g=A[0][0],v=g,e=A[0][1],r=e,f;for((A[A.length-1][0]!==A[0][0]||A[A.length-1][1]!==A[0][1])&&A.push(A[0]),f=1;f<A.length;f++)g=Math.min(g,A[f][0]),v=Math.max(v,A[f][0]),e=Math.min(e,A[f][1]),r=Math.max(r,A[f][1]);var n=!1,a;A.length===5&&(A[0][0]===A[1][0]?A[2][0]===A[3][0]&&A[0][1]===A[3][1]&&A[1][1]===A[2][1]&&(n=!0,a=function(x){return x[0]===A[0][0]}):A[0][1]===A[1][1]&&A[2][1]===A[3][1]&&A[0][0]===A[3][0]&&A[1][0]===A[2][0]&&(n=!0,a=function(x){return x[1]===A[0][1]}));function o(x,s){var u=x[0],c=x[1];return!(u===E||u<g||u>v||c===E||c<e||c>r||s&&a(x))}function h(x,s){var u=x[0],c=x[1];if(u===E||u<g||u>v||c===E||c<e||c>r)return!1;var T=A.length,k=A[0][0],_=A[0][1],b=0,P,l,d,L,w;for(P=1;P<T;P++)if(l=k,d=_,k=A[P][0],_=A[P][1],L=Math.min(l,k),!(u<L||u>Math.max(l,k)||c>Math.max(d,_)))if(c<Math.min(d,_))u!==L&&b++;else{if(k===l?w=c:w=d+(u-l)*(_-d)/(k-l),c===w)return!(P===1&&s);c<=w&&u!==L&&b++}return b%2===1}var y=!0,p=A[0];for(f=1;f<A.length;f++)if(p[0]!==A[f][0]||p[1]!==A[f][1]){y=!1;break}return{xmin:g,xmax:v,ymin:e,ymax:r,pts:A,contains:n?o:h,isRect:n,degenerate:y}},i.isSegmentBent=function(S,A,g,v){var e=S[A],r=[S[g][0]-e[0],S[g][1]-e[1]],f=M(r,r),n=Math.sqrt(f),a=[-r[1]/n,r[0]/n],o,h,y;for(o=A+1;o<g;o++)if(h=[S[o][0]-e[0],S[o][1]-e[1]],y=M(h,r),y<0||y>f||Math.abs(M(h,a))>v)return!0;return!1},i.filter=function(S,A){var g=[S[0]],v=0,e=0;function r(n){S.push(n);var a=g.length,o=v;g.splice(e+1);for(var h=o+1;h<S.length;h++)(h===S.length-1||i.isSegmentBent(S,o,h+1,A))&&(g.push(S[h]),g.length<a-2&&(v=h,e=g.length-1),o=h)}if(S.length>1){var f=S.pop();r(f)}return{addPt:r,raw:S,filtered:g}}},79749:function($,U,t){var M=t(58617),E=t(98580);$.exports=function(i,S,A){var g=i._fullLayout,v=!0;return g._glcanvas.each(function(e){if(e.regl){e.regl.preloadCachedCode(A);return}if(!(e.pick&&!g._has("parcoords"))){try{e.regl=E({canvas:this,attributes:{antialias:!e.pick,preserveDrawingBuffer:!0},pixelRatio:i._context.plotGlPixelRatio||t.g.devicePixelRatio,extensions:S||[],cachedCode:A||{}})}catch{v=!1}e.regl||(v=!1),v&&this.addEventListener("webglcontextlost",function(r){i&&i.emit&&i.emit("plotly_webglcontextlost",{event:r,layer:e.key})},!1)}}),v||M({container:g._glcontainer.node()}),v}},45142:function($,U,t){var M=t(92770),E=t(35791);$.exports=function(S){var A;if(S&&S.hasOwnProperty("userAgent")?A=S.userAgent:A=i(),typeof A!="string")return!0;var g=E({ua:{headers:{"user-agent":A}},tablet:!0,featureDetect:!1});if(!g)for(var v=A.split(" "),e=1;e<v.length;e++){var r=v[e];if(r.indexOf("Safari")!==-1)for(var f=e-1;f>-1;f--){var n=v[f];if(n.substr(0,8)==="Version/"){var a=n.substr(8).split(".")[0];if(M(a)&&(a=+a),a>=13)return!0}}}return g};function i(){var S;return typeof navigator<"u"&&(S=navigator.userAgent),S&&S.headers&&typeof S.headers["user-agent"]=="string"&&(S=S.headers["user-agent"]),S}},75138:function($){$.exports=function(U,t){if(t instanceof RegExp){for(var M=t.toString(),E=0;E<U.length;E++)if(U[E]instanceof RegExp&&U[E].toString()===M)return U;U.push(t)}else(t||t===0)&&U.indexOf(t)===-1&&U.push(t);return U}},10847:function($,U,t){var M=t(71828),E=t(72075).dfltConfig;function i(A,g){for(var v=[],e,r=0;r<g.length;r++)e=g[r],e===A?v[r]=e:typeof e=="object"?v[r]=Array.isArray(e)?M.extendDeep([],e):M.extendDeepAll({},e):v[r]=e;return v}var S={};S.add=function(A,g,v,e,r){var f,n;if(A.undoQueue=A.undoQueue||{index:0,queue:[],sequence:!1},n=A.undoQueue.index,A.autoplay){A.undoQueue.inSequence||(A.autoplay=!1);return}!A.undoQueue.sequence||A.undoQueue.beginSequence?(f={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},A.undoQueue.queue.splice(n,A.undoQueue.queue.length-n,f),A.undoQueue.index+=1):f=A.undoQueue.queue[n-1],A.undoQueue.beginSequence=!1,f&&(f.undo.calls.unshift(g),f.undo.args.unshift(v),f.redo.calls.push(e),f.redo.args.push(r)),A.undoQueue.queue.length>E.queueLength&&(A.undoQueue.queue.shift(),A.undoQueue.index--)},S.startSequence=function(A){A.undoQueue=A.undoQueue||{index:0,queue:[],sequence:!1},A.undoQueue.sequence=!0,A.undoQueue.beginSequence=!0},S.stopSequence=function(A){A.undoQueue=A.undoQueue||{index:0,queue:[],sequence:!1},A.undoQueue.sequence=!1,A.undoQueue.beginSequence=!1},S.undo=function(A){var g,v;if(!(A.undoQueue===void 0||isNaN(A.undoQueue.index)||A.undoQueue.index<=0)){for(A.undoQueue.index--,g=A.undoQueue.queue[A.undoQueue.index],A.undoQueue.inSequence=!0,v=0;v<g.undo.calls.length;v++)S.plotDo(A,g.undo.calls[v],g.undo.args[v]);A.undoQueue.inSequence=!1,A.autoplay=!1}},S.redo=function(A){var g,v;if(!(A.undoQueue===void 0||isNaN(A.undoQueue.index)||A.undoQueue.index>=A.undoQueue.queue.length)){for(g=A.undoQueue.queue[A.undoQueue.index],A.undoQueue.inSequence=!0,v=0;v<g.redo.calls.length;v++)S.plotDo(A,g.redo.calls[v],g.redo.args[v]);A.undoQueue.inSequence=!1,A.autoplay=!1,A.undoQueue.index++}},S.plotDo=function(A,g,v){A.autoplay=!0,v=i(A,v),g.apply(null,v)},$.exports=S},30587:function($,U){U.counter=function(t,M,E,i){var S=(M||"")+(E?"":"$"),A=i===!1?"":"^";return t==="xy"?new RegExp(A+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+S):new RegExp(A+t+"([2-9]|[1-9][0-9]+)?"+S)}},6962:function($){var U=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,t=/^[^\.\[\]]+$/;$.exports=function(M,E){for(;E;){var i=M.match(U);if(i)M=i[1];else if(M.match(t))M="";else throw new Error("bad relativeAttr call:"+[M,E]);if(E.charAt(0)==="^")E=E.slice(1);else break}return M&&E.charAt(0)!=="["?M+"."+E:M+E}},51332:function($,U,t){var M=t(73627).isArrayOrTypedArray,E=t(41965);$.exports=function i(S,A){for(var g in A){var v=A[g],e=S[g];if(e!==v)if(g.charAt(0)==="_"||typeof v=="function"){if(g in S)continue;S[g]=v}else if(M(v)&&M(e)&&E(v[0])){if(g==="customdata"||g==="ids")continue;for(var r=Math.min(v.length,e.length),f=0;f<r;f++)e[f]!==v[f]&&E(v[f])&&E(e[f])&&i(e[f],v[f])}else E(v)&&E(e)&&(i(e,v),Object.keys(e).length||delete S[g])}}},65888:function($,U,t){var M=t(92770),E=t(47769),i=t(23389),S=t(50606).BADNUM,A=1e-9;U.findBin=function(f,n,a){if(M(n.start))return a?Math.ceil((f-n.start)/n.size-A)-1:Math.floor((f-n.start)/n.size+A);var o=0,h=n.length,y=0,p=h>1?(n[h-1]-n[0])/(h-1):1,x,s;for(p>=0?s=a?g:v:s=a?r:e,f+=p*A*(a?-1:1)*(p>=0?1:-1);o<h&&y++<100;)x=Math.floor((o+h)/2),s(n[x],f)?o=x+1:h=x;return y>90&&E.log("Long binary search..."),o-1};function g(f,n){return f<n}function v(f,n){return f<=n}function e(f,n){return f>n}function r(f,n){return f>=n}U.sorterAsc=function(f,n){return f-n},U.sorterDes=function(f,n){return n-f},U.distinctVals=function(f){var n=f.slice();n.sort(U.sorterAsc);var a;for(a=n.length-1;a>-1&&n[a]===S;a--);for(var o=n[a]-n[0]||1,h=o/(a||1)/1e4,y=[],p,x=0;x<=a;x++){var s=n[x],u=s-p;p===void 0?(y.push(s),p=s):u>h&&(o=Math.min(o,u),y.push(s),p=s)}return{vals:y,minDiff:o}},U.roundUp=function(f,n,a){for(var o=0,h=n.length-1,y,p=0,x=a?0:1,s=a?1:0,u=a?Math.ceil:Math.floor;o<h&&p++<100;)y=u((o+h)/2),n[y]<=f?o=y+x:h=y-s;return n[o]},U.sort=function(f,n){for(var a=0,o=0,h=1;h<f.length;h++){var y=n(f[h],f[h-1]);if(y<0?a=1:y>0&&(o=1),a&&o)return f.sort(n)}return o?f:f.reverse()},U.findIndexOfMin=function(f,n){n=n||i;for(var a=1/0,o,h=0;h<f.length;h++){var y=n(f[h]);y<a&&(a=y,o=h)}return o}},6964:function($){$.exports=function(U,t){(U.attr("class")||"").split(" ").forEach(function(M){M.indexOf("cursor-")===0&&U.classed(M,!1)}),t&&U.classed("cursor-"+t,!0)}},58617:function($,U,t){var M=t(7901),E=function(){};$.exports=function(i){for(var S in i)typeof i[S]=="function"&&(i[S]=E);i.destroy=function(){i.container.parentNode.removeChild(i.container)};var A=document.createElement("div");A.className="no-webgl",A.style.cursor="pointer",A.style.fontSize="24px",A.style.color=M.defaults[0],A.style.position="absolute",A.style.left=A.style.top="0px",A.style.width=A.style.height="100%",A.style["background-color"]=M.lightLine,A.style["z-index"]=30;var g=document.createElement("p");return g.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",g.style.position="relative",g.style.top="50%",g.style.left="50%",g.style.height="30%",g.style.width="50%",g.style.margin="-15% 0 0 -25%",A.appendChild(g),i.container.appendChild(A),i.container.style.background="#FFFFFF",i.container.onclick=function(){window.open("https://get.webgl.org")},!1}},78607:function($){$.exports=function(U){return Object.keys(U).sort()}},80038:function($,U,t){var M=t(92770),E=t(73627).isArrayOrTypedArray;U.aggNums=function(i,S,A,g){var v,e;if((!g||g>A.length)&&(g=A.length),M(S)||(S=!1),E(A[0])){for(e=new Array(g),v=0;v<g;v++)e[v]=U.aggNums(i,S,A[v]);A=e}for(v=0;v<g;v++)M(S)?M(A[v])&&(S=i(+S,+A[v])):S=A[v];return S},U.len=function(i){return U.aggNums(function(S){return S+1},0,i)},U.mean=function(i,S){return S||(S=U.len(i)),U.aggNums(function(A,g){return A+g},0,i)/S},U.midRange=function(i){if(!(i===void 0||i.length===0))return(U.aggNums(Math.max,null,i)+U.aggNums(Math.min,null,i))/2},U.variance=function(i,S,A){return S||(S=U.len(i)),M(A)||(A=U.mean(i,S)),U.aggNums(function(g,v){return g+Math.pow(v-A,2)},0,i)/S},U.stdev=function(i,S,A){return Math.sqrt(U.variance(i,S,A))},U.median=function(i){var S=i.slice().sort();return U.interp(S,.5)},U.interp=function(i,S){if(!M(S))throw"n should be a finite number";if(S=S*i.length-.5,S<0)return i[0];if(S>i.length-1)return i[i.length-1];var A=S%1;return A*i[Math.ceil(S)]+(1-A)*i[Math.floor(S)]}},78614:function($,U,t){var M=t(25075);function E(i){return i?M(i):[0,0,0,1]}$.exports=E},3883:function($,U,t){var M=t(32396),E=t(91424),i=t(71828),S=null;function A(){if(S!==null)return S;S=!1;var g=i.isIE()||i.isSafari()||i.isIOS();if(window.navigator.userAgent&&!g){var v=Array.from(M.CSS_DECLARATIONS).reverse(),e=window.CSS&&window.CSS.supports||window.supportsCSS;if(typeof e=="function")S=v.some(function(a){return e.apply(null,a)});else{var r=E.tester.append("image").attr("style",M.STYLE),f=window.getComputedStyle(r.node()),n=f.imageRendering;S=v.some(function(a){var o=a[1];return n===o||n===o.toLowerCase()}),r.remove()}}return S}$.exports=A},63893:function($,U,t){var M=t(39898),E=t(71828),i=E.strTranslate,S=t(77922),A=t(18783).LINE_SPACING,g=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;U.convertToTspans=function(C,F,N){var V=C.text(),K=!C.attr("data-notex")&&F&&F._context.typesetMath&&typeof MathJax<"u"&&V.match(g),Q=M.select(C.node().parentNode);if(Q.empty())return;var at=C.attr("class")?C.attr("class").split(" ")[0]:"text";at+="-math",Q.selectAll("svg."+at).remove(),Q.selectAll("g."+at+"-group").remove(),C.style("display",null).attr({"data-unformatted":V,"data-math":"N"});function it(){Q.empty()||(at=C.attr("class")+"-math",Q.select("svg."+at).remove()),C.text("").style("white-space","pre");var q=z(C.node(),V);q&&C.style("pointer-events","all"),U.positionText(C),N&&N.call(C)}return K?(F&&F._promises||[]).push(new Promise(function(q){C.style("display","none");var W=parseInt(C.node().style.fontSize,10),Z={fontSize:W};n(K[2],Z,function(G,et,nt){Q.selectAll("svg."+at).remove(),Q.selectAll("g."+at+"-group").remove();var X=G&&G.select("svg");if(!X||!X.node()){it(),q();return}var Y=Q.append("g").classed(at+"-group",!0).attr({"pointer-events":"none","data-unformatted":V,"data-math":"Y"});Y.node().appendChild(X.node()),et&&et.node()&&X.node().insertBefore(et.node().cloneNode(!0),X.node().firstChild);var ot=nt.width,rt=nt.height;X.attr({class:at,height:rt,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ht=C.node().style.fill||"black",pt=X.select("g");pt.attr({fill:ht,stroke:ht});var yt=pt.node().getBoundingClientRect(),xt=yt.width,Ft=yt.height;(xt>ot||Ft>rt)&&(X.style("overflow","hidden"),yt=X.node().getBoundingClientRect(),xt=yt.width,Ft=yt.height);var Et=+C.attr("x"),mt=+C.attr("y"),gt=W||C.node().getBoundingClientRect().height,wt=-gt/4;if(at[0]==="y")Y.attr({transform:"rotate("+[-90,Et,mt]+")"+i(-xt/2,wt-Ft/2)});else if(at[0]==="l")mt=wt-Ft/2;else if(at[0]==="a"&&at.indexOf("atitle")!==0)Et=0,mt=wt;else{var Pt=C.attr("text-anchor");Et=Et-xt*(Pt==="middle"?.5:Pt==="end"?1:0),mt=mt+wt-Ft/2}X.attr({x:Et,y:mt}),N&&N.call(C,Y),q(Y)})})):it(),C};var v=/(<|&lt;|&#60;)/g,e=/(>|&gt;|&#62;)/g;function r(C){return C.replace(v,"\\lt ").replace(e,"\\gt ")}var f=[["$","$"],["\\(","\\)"]];function n(C,F,N){var V=parseInt((MathJax.version||"").split(".")[0]);if(V!==2&&V!==3){E.warn("No MathJax version:",MathJax.version);return}var K,Q,at,it,q=function(){return Q=E.extendDeepAll({},MathJax.Hub.config),at=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:f},displayAlign:"left"})},W=function(){Q=E.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=f},Z=function(){if(K=MathJax.Hub.config.menuSettings.renderer,K!=="SVG")return MathJax.Hub.setRenderer("SVG")},G=function(){K=MathJax.config.startup.output,K!=="svg"&&(MathJax.config.startup.output="svg")},et=function(){var ht="math-output-"+E.randstr({},64);it=M.select("body").append("div").attr({id:ht}).style({visibility:"hidden",position:"absolute","font-size":F.fontSize+"px"}).text(r(C));var pt=it.node();return V===2?MathJax.Hub.Typeset(pt):MathJax.typeset([pt])},nt=function(){var ht=it.select(V===2?".MathJax_SVG":".MathJax"),pt=!ht.empty()&&it.select("svg").node();if(!pt)E.log("There was an error in the tex syntax.",C),N();else{var yt=pt.getBoundingClientRect(),xt;V===2?xt=M.select("body").select("#MathJax_SVG_glyphs"):xt=ht.select("defs"),N(ht,xt,yt)}it.remove()},X=function(){if(K!=="SVG")return MathJax.Hub.setRenderer(K)},Y=function(){K!=="svg"&&(MathJax.config.startup.output=K)},ot=function(){return at!==void 0&&(MathJax.Hub.processSectionDelay=at),MathJax.Hub.Config(Q)},rt=function(){MathJax.config=Q};V===2?MathJax.Hub.Queue(q,Z,et,nt,X,ot):V===3&&(W(),G(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){et(),nt(),Y(),rt()}))}var a={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},o={sub:"0.3em",sup:"-0.6em"},h={sub:"-0.21em",sup:"0.42em"},y="\u200B",p=["http:","https:","mailto:","",void 0,":"],x=U.NEWLINES=/(\r\n?|\n)/g,s=/(<[^<>]*>)/,u=/<(\/?)([^ >]*)(\s+(.*))?>/i,c=/<br(\s+.*)?>/i;U.BR_TAG_ALL=/<br(\s+.*)?>/gi;var T=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,k=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,_=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,b=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function P(C,F){if(!C)return null;var N=C.match(F),V=N&&(N[3]||N[4]);return V&&w(V)}var l=/(^|;)\s*color:/;U.plainText=function(C,F){F=F||{};for(var N=F.len!==void 0&&F.len!==-1?F.len:1/0,V=F.allowedTags!==void 0?F.allowedTags:["br"],K="...",Q=K.length,at=C.split(s),it=[],q="",W=0,Z=0;Z<at.length;Z++){var G=at[Z],et=G.match(u),nt=et&&et[2].toLowerCase();if(nt)V.indexOf(nt)!==-1&&(it.push(G),q=nt);else{var X=G.length;if(W+X<N)it.push(G),W+=X;else if(W<N){var Y=N-W;q&&(q!=="br"||Y<=Q||X<=Q)&&it.pop(),N>Q?it.push(G.substr(0,Y-Q)+K):it.push(G.substr(0,Y));break}q=""}}return it.join("")};var d={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},L=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function w(C){return C.replace(L,function(F,N){var V;return N.charAt(0)==="#"?V=I(N.charAt(1)==="x"?parseInt(N.substr(2),16):parseInt(N.substr(1),10)):V=d[N],V||F})}U.convertEntities=w;function I(C){if(!(C>1114111)){var F=String.fromCodePoint;if(F)return F(C);var N=String.fromCharCode;return C<=65535?N(C):N((C>>10)+55232,C%1024+56320)}}function z(C,F){F=F.replace(x," ");var N=!1,V=[],K,Q=-1;function at(){Q++;var Ft=document.createElementNS(S.svg,"tspan");M.select(Ft).attr({class:"line",dy:Q*A+"em"}),C.appendChild(Ft),K=Ft;var Et=V;if(V=[{node:Ft}],Et.length>1)for(var mt=1;mt<Et.length;mt++)it(Et[mt])}function it(Ft){var Et=Ft.type,mt={},gt;if(Et==="a"){gt="a";var wt=Ft.target,Pt=Ft.href,Bt=Ft.popup;Pt&&(mt={"xlink:xlink:show":wt==="_blank"||wt.charAt(0)!=="_"?"new":"replace",target:wt,"xlink:xlink:href":Pt},Bt&&(mt.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Bt+'");return false;'))}else gt="tspan";Ft.style&&(mt.style=Ft.style);var kt=document.createElementNS(S.svg,gt);if(Et==="sup"||Et==="sub"){q(K,y),K.appendChild(kt);var jt=document.createElementNS(S.svg,"tspan");q(jt,y),M.select(jt).attr("dy",h[Et]),mt.dy=o[Et],K.appendChild(kt),K.appendChild(jt)}else K.appendChild(kt);M.select(kt).attr(mt),K=Ft.node=kt,V.push(Ft)}function q(Ft,Et){Ft.appendChild(document.createTextNode(Et))}function W(Ft){if(V.length===1){E.log("Ignoring unexpected end tag </"+Ft+">.",F);return}var Et=V.pop();Ft!==Et.type&&E.log("Start tag <"+Et.type+"> doesnt match end tag <"+Ft+">. Pretending it did match.",F),K=V[V.length-1].node}var Z=c.test(F);Z?at():(K=C,V=[{node:C}]);for(var G=F.split(s),et=0;et<G.length;et++){var nt=G[et],X=nt.match(u),Y=X&&X[2].toLowerCase(),ot=a[Y];if(Y==="br")at();else if(ot===void 0)q(K,w(nt));else if(X[1])W(Y);else{var rt=X[4],ht={type:Y},pt=P(rt,T);if(pt?(pt=pt.replace(l,"$1 fill:"),ot&&(pt+=";"+ot)):ot&&(pt=ot),pt&&(ht.style=pt),Y==="a"){N=!0;var yt=P(rt,k);if(yt){var xt=B(yt);xt&&(ht.href=xt,ht.target=P(rt,_)||"_blank",ht.popup=P(rt,b))}}it(ht)}}return N}function B(C){var F=encodeURI(decodeURI(C)),N=document.createElement("a"),V=document.createElement("a");N.href=C,V.href=F;var K=N.protocol,Q=V.protocol;return p.indexOf(K)!==-1&&p.indexOf(Q)!==-1?F:""}U.sanitizeHTML=function(C){C=C.replace(x," ");for(var F=document.createElement("p"),N=F,V=[],K=C.split(s),Q=0;Q<K.length;Q++){var at=K[Q],it=at.match(u),q=it&&it[2].toLowerCase();if(q in a)if(it[1])V.length&&(N=V.pop());else{var W=it[4],Z=P(W,T),G=Z?{style:Z}:{};if(q==="a"){var et=P(W,k);if(et){var nt=B(et);if(nt){G.href=nt;var X=P(W,_);X&&(G.target=X)}}}var Y=document.createElement(q);N.appendChild(Y),M.select(Y).attr(G),N=Y,V.push(Y)}else N.appendChild(document.createTextNode(w(at)))}var ot="innerHTML";return F[ot]},U.lineCount=function(C){return C.selectAll("tspan.line").size()||1},U.positionText=function(C,F,N){return C.each(function(){var V=M.select(this);function K(it,q){return q===void 0?(q=V.attr(it),q===null&&(V.attr(it,0),q=0)):V.attr(it,q),q}var Q=K("x",F),at=K("y",N);this.nodeName==="text"&&V.selectAll("tspan.line").attr({x:Q,y:at})})};function O(C,F,N){var V=N.horizontalAlign,K=N.verticalAlign||"top",Q=C.node().getBoundingClientRect(),at=F.node().getBoundingClientRect(),it,q,W;return K==="bottom"?q=function(){return Q.bottom-it.height}:K==="middle"?q=function(){return Q.top+(Q.height-it.height)/2}:q=function(){return Q.top},V==="right"?W=function(){return Q.right-it.width}:V==="center"?W=function(){return Q.left+(Q.width-it.width)/2}:W=function(){return Q.left},function(){it=this.node().getBoundingClientRect();var Z=W()-at.left,G=q()-at.top,et=N.gd||{};if(N.gd){et._fullLayout._calcInverseTransform(et);var nt=E.apply3DTransform(et._fullLayout._invTransform)(Z,G);Z=nt[0],G=nt[1]}return this.style({top:G+"px",left:Z+"px","z-index":1e3}),this}}var R="1px ";U.makeTextShadow=function(C){var F=R,N=R,V=R;return F+N+V+C+", -"+F+"-"+N+V+C+", "+F+"-"+N+V+C+", -"+F+N+V+C},U.makeEditable=function(C,F){var N=F.gd,V=F.delegate,K=M.dispatch("edit","input","cancel"),Q=V||C;if(C.style({"pointer-events":V?"none":"all"}),C.size()!==1)throw new Error("boo");function at(){q(),C.style({opacity:0});var W=Q.attr("class"),Z;W?Z="."+W.split(" ")[0]+"-math-group":Z="[class*=-math-group]",Z&&M.select(C.node().parentNode).select(Z).style({opacity:0})}function it(W){var Z=W.node(),G=document.createRange();G.selectNodeContents(Z);var et=window.getSelection();et.removeAllRanges(),et.addRange(G),Z.focus()}function q(){var W=M.select(N),Z=W.select(".svg-container"),G=Z.append("div"),et=C.node().style,nt=parseFloat(et.fontSize||12),X=F.text;X===void 0&&(X=C.attr("data-unformatted")),G.classed("plugin-editable editable",!0).style({position:"absolute","font-family":et.fontFamily||"Arial","font-size":nt,color:F.fill||et.fill||"black",opacity:1,"background-color":F.background||"transparent",outline:"#ffffff33 1px solid",margin:[-nt/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(X).call(O(C,Z,F)).on("blur",function(){N._editing=!1,C.text(this.textContent).style({opacity:1});var Y=M.select(this).attr("class"),ot;Y?ot="."+Y.split(" ")[0]+"-math-group":ot="[class*=-math-group]",ot&&M.select(C.node().parentNode).select(ot).style({opacity:0});var rt=this.textContent;M.select(this).transition().duration(0).remove(),M.select(document).on("mouseup",null),K.edit.call(C,rt)}).on("focus",function(){var Y=this;N._editing=!0,M.select(document).on("mouseup",function(){if(M.event.target===Y)return!1;document.activeElement===G.node()&&G.node().blur()})}).on("keyup",function(){M.event.which===27?(N._editing=!1,C.style({opacity:1}),M.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),K.cancel.call(C,this.textContent)):(K.input.call(C,this.textContent),M.select(this).call(O(C,Z,F)))}).on("keydown",function(){M.event.which===13&&this.blur()}).call(it)}return F.immediate?at():Q.on("click",at),M.rebind(C,K,"on")}},79990:function($,U){var t={};U.throttle=function(E,i,S){var A=t[E],g=Date.now();if(!A){for(var v in t)t[v].ts<g-6e4&&delete t[v];A=t[E]={ts:0,timer:null}}M(A);function e(){S(),A.ts=Date.now(),A.onDone&&(A.onDone(),A.onDone=null)}if(g>A.ts+i){e();return}A.timer=setTimeout(function(){e(),A.timer=null},i)},U.done=function(E){var i=t[E];return!i||!i.timer?Promise.resolve():new Promise(function(S){var A=i.onDone;i.onDone=function(){A&&A(),S(),i.onDone=null}})},U.clear=function(E){if(E)M(t[E]),delete t[E];else for(var i in t)U.clear(i)};function M(E){E&&E.timer!==null&&(clearTimeout(E.timer),E.timer=null)}},58163:function($,U,t){var M=t(92770);$.exports=function(E,i){if(E>0)return Math.log(E)/Math.LN10;var S=Math.log(Math.min(i[0],i[1]))/Math.LN10;return M(S)||(S=Math.log(Math.max(i[0],i[1]))/Math.LN10-6),S}},90973:function($,U,t){var M=$.exports={},E=t(78776).locationmodeToLayer,i=t(96892).zL;M.getTopojsonName=function(S){return[S.scope.replace(/ /g,"-"),"_",S.resolution.toString(),"m"].join("")},M.getTopojsonPath=function(S,A){return S+A+".json"},M.getTopojsonFeatures=function(S,A){var g=E[S.locationmode],v=A.objects[g];return i(A,v).features}},37815:function($){$.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},92177:function($){$.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},14458:function($,U,t){var M=t(73972);$.exports=function(E){for(var i=M.layoutArrayContainers,S=M.layoutArrayRegexes,A=E.split("[")[0],g,v,e=0;e<S.length;e++)if(v=E.match(S[e]),v&&v.index===0){g=v[0];break}if(g||(g=i[i.indexOf(A)]),!g)return!1;var r=E.substr(g.length);return r?(v=r.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),v?{array:g,index:Number(v[1]),property:v[3]||""}:!1):{array:g,index:"",property:""}}},30962:function($,U,t){var M=t(1426).extendFlat,E=t(41965),i={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},S={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},A=i.flags.slice().concat(["fullReplot"]),g=S.flags.slice().concat("layoutReplot");$.exports={traces:i,layout:S,traceFlags:function(){return v(A)},layoutFlags:function(){return v(g)},update:function(f,n){var a=n.editType;if(a&&a!=="none")for(var o=a.split("+"),h=0;h<o.length;h++)f[o[h]]=!0},overrideAll:e};function v(f){for(var n={},a=0;a<f.length;a++)n[f[a]]=!1;return n}function e(f,n,a){var o=M({},f);for(var h in o){var y=o[h];E(y)&&(o[h]=r(y,n,a,h))}return a==="from-root"&&(o.editType=n),o}function r(f,n,a,o){if(f.valType){var h=M({},f);if(h.editType=n,Array.isArray(f.items)){h.items=new Array(f.items.length);for(var y=0;y<f.items.length;y++)h.items[y]=r(f.items[y],n)}return h}else return e(f,n,o.charAt(0)==="_"?"nested":"from-root")}},58377:function($,U,t){var M=t(92770),E=t(27812),i=t(73972),S=t(71828),A=t(74875),g=t(41675),v=t(7901),e=g.cleanId,r=g.getFromTrace,f=i.traceIs;U.clearPromiseQueue=function(c){Array.isArray(c._promises)&&c._promises.length>0&&S.log("Clearing previous rejected promises from queue."),c._promises=[]},U.cleanLayout=function(c){var T,k;c||(c={}),c.xaxis1&&(c.xaxis||(c.xaxis=c.xaxis1),delete c.xaxis1),c.yaxis1&&(c.yaxis||(c.yaxis=c.yaxis1),delete c.yaxis1),c.scene1&&(c.scene||(c.scene=c.scene1),delete c.scene1);var _=(A.subplotsRegistry.cartesian||{}).attrRegex,b=(A.subplotsRegistry.polar||{}).attrRegex,P=(A.subplotsRegistry.ternary||{}).attrRegex,l=(A.subplotsRegistry.gl3d||{}).attrRegex,d=Object.keys(c);for(T=0;T<d.length;T++){var L=d[T];if(_&&_.test(L)){var w=c[L];w.anchor&&w.anchor!=="free"&&(w.anchor=e(w.anchor)),w.overlaying&&(w.overlaying=e(w.overlaying)),w.type||(w.isdate?w.type="date":w.islog?w.type="log":w.isdate===!1&&w.islog===!1&&(w.type="linear")),(w.autorange==="withzero"||w.autorange==="tozero")&&(w.autorange=!0,w.rangemode="tozero"),delete w.islog,delete w.isdate,delete w.categories,p(w,"domain")&&delete w.domain,w.autotick!==void 0&&(w.tickmode===void 0&&(w.tickmode=w.autotick?"auto":"linear"),delete w.autotick),a(w)}else if(b&&b.test(L)){var I=c[L];a(I.radialaxis)}else if(P&&P.test(L)){var z=c[L];a(z.aaxis),a(z.baxis),a(z.caxis)}else if(l&&l.test(L)){var B=c[L],O=B.cameraposition;if(Array.isArray(O)&&O[0].length===4){var R=O[0],C=O[1],F=O[2],N=E([],R),V=[];for(k=0;k<3;++k)V[k]=C[k]+F*N[2+4*k];B.camera={eye:{x:V[0],y:V[1],z:V[2]},center:{x:C[0],y:C[1],z:C[2]},up:{x:0,y:0,z:1}},delete B.cameraposition}a(B.xaxis),a(B.yaxis),a(B.zaxis)}}var K=Array.isArray(c.annotations)?c.annotations.length:0;for(T=0;T<K;T++){var Q=c.annotations[T];S.isPlainObject(Q)&&(Q.ref&&(Q.ref==="paper"?(Q.xref="paper",Q.yref="paper"):Q.ref==="data"&&(Q.xref="x",Q.yref="y"),delete Q.ref),n(Q,"xref"),n(Q,"yref"))}var at=Array.isArray(c.shapes)?c.shapes.length:0;for(T=0;T<at;T++){var it=c.shapes[T];S.isPlainObject(it)&&(n(it,"xref"),n(it,"yref"))}var q=Array.isArray(c.images)?c.images.length:0;for(T=0;T<q;T++){var W=c.images[T];S.isPlainObject(W)&&(n(W,"xref"),n(W,"yref"))}var Z=c.legend;return Z&&(Z.x>3?(Z.x=1.02,Z.xanchor="left"):Z.x<-2&&(Z.x=-.02,Z.xanchor="right"),Z.y>3?(Z.y=1.02,Z.yanchor="bottom"):Z.y<-2&&(Z.y=-.02,Z.yanchor="top")),a(c),c.dragmode==="rotate"&&(c.dragmode="orbit"),v.clean(c),c.template&&c.template.layout&&U.cleanLayout(c.template.layout),c};function n(c,T){var k=c[T],_=T.charAt(0);k&&k!=="paper"&&(c[T]=e(k,_,!0))}function a(c){c&&((typeof c.title=="string"||typeof c.title=="number")&&(c.title={text:c.title}),T("titlefont","font"),T("titleposition","position"),T("titleside","side"),T("titleoffset","offset"));function T(k,_){var b=c[k],P=c.title&&c.title[_];b&&!P&&(c.title||(c.title={}),c.title[_]=c[k],delete c[k])}}U.cleanData=function(c){for(var T=0;T<c.length;T++){var k=c[T],_;if(k.type==="histogramy"&&"xbins"in k&&!("ybins"in k)&&(k.ybins=k.xbins,delete k.xbins),k.error_y&&"opacity"in k.error_y){var b=v.defaults,P=k.error_y.color||(f(k,"bar")?v.defaultLine:b[T%b.length]);k.error_y.color=v.addOpacity(v.rgb(P),v.opacity(P)*k.error_y.opacity),delete k.error_y.opacity}if("bardir"in k&&(k.bardir==="h"&&(f(k,"bar")||k.type.substr(0,9)==="histogram")&&(k.orientation="h",U.swapXYData(k)),delete k.bardir),k.type==="histogramy"&&U.swapXYData(k),(k.type==="histogramx"||k.type==="histogramy")&&(k.type="histogram"),"scl"in k&&!("colorscale"in k)&&(k.colorscale=k.scl,delete k.scl),"reversescl"in k&&!("reversescale"in k)&&(k.reversescale=k.reversescl,delete k.reversescl),k.xaxis&&(k.xaxis=e(k.xaxis,"x")),k.yaxis&&(k.yaxis=e(k.yaxis,"y")),f(k,"gl3d")&&k.scene&&(k.scene=A.subplotsRegistry.gl3d.cleanId(k.scene)),!f(k,"pie-like")&&!f(k,"bar-like"))if(Array.isArray(k.textposition))for(_=0;_<k.textposition.length;_++)k.textposition[_]=y(k.textposition[_]);else k.textposition&&(k.textposition=y(k.textposition));var l=i.getModule(k);if(l&&l.colorbar){var d=l.colorbar.container,L=d?k[d]:k;L&&L.colorscale&&(L.colorscale==="YIGnBu"&&(L.colorscale="YlGnBu"),L.colorscale==="YIOrRd"&&(L.colorscale="YlOrRd"))}if(k.type==="surface"&&S.isPlainObject(k.contours)){var w=["x","y","z"];for(_=0;_<w.length;_++){var I=k.contours[w[_]];S.isPlainObject(I)&&(I.highlightColor&&(I.highlightcolor=I.highlightColor,delete I.highlightColor),I.highlightWidth&&(I.highlightwidth=I.highlightWidth,delete I.highlightWidth))}}if(k.type==="candlestick"||k.type==="ohlc"){var z=(k.increasing||{}).showlegend!==!1,B=(k.decreasing||{}).showlegend!==!1,O=o(k.increasing),R=o(k.decreasing);if(O!==!1&&R!==!1){var C=h(O,R,z,B);C&&(k.name=C)}else(O||R)&&!k.name&&(k.name=O||R)}if(Array.isArray(k.transforms)){var F=k.transforms;for(_=0;_<F.length;_++){var N=F[_];if(S.isPlainObject(N))switch(N.type){case"filter":N.filtersrc&&(N.target=N.filtersrc,delete N.filtersrc),N.calendar&&(N.valuecalendar||(N.valuecalendar=N.calendar),delete N.calendar);break;case"groupby":if(N.styles=N.styles||N.style,N.styles&&!Array.isArray(N.styles)){var V=N.styles,K=Object.keys(V);N.styles=[];for(var Q=0;Q<K.length;Q++)N.styles.push({target:K[Q],value:V[K[Q]]})}break}}}p(k,"line")&&delete k.line,"marker"in k&&(p(k.marker,"line")&&delete k.marker.line,p(k,"marker")&&delete k.marker),v.clean(k),k.autobinx&&(delete k.autobinx,delete k.xbins),k.autobiny&&(delete k.autobiny,delete k.ybins),a(k),k.colorbar&&a(k.colorbar),k.marker&&k.marker.colorbar&&a(k.marker.colorbar),k.line&&k.line.colorbar&&a(k.line.colorbar),k.aaxis&&a(k.aaxis),k.baxis&&a(k.baxis)}};function o(c){if(!S.isPlainObject(c))return!1;var T=c.name;return delete c.name,delete c.showlegend,(typeof T=="string"||typeof T=="number")&&String(T)}function h(c,T,k,_){if(k&&!_)return c;if(_&&!k||!c.trim())return T;if(!T.trim())return c;var b=Math.min(c.length,T.length),P;for(P=0;P<b&&c.charAt(P)===T.charAt(P);P++);var l=c.substr(0,P);return l.trim()}function y(c){var T="middle",k="center";return typeof c=="string"&&(c.indexOf("top")!==-1?T="top":c.indexOf("bottom")!==-1&&(T="bottom"),c.indexOf("left")!==-1?k="left":c.indexOf("right")!==-1&&(k="right")),T+" "+k}function p(c,T){return T in c&&typeof c[T]=="object"&&Object.keys(c[T]).length===0}U.swapXYData=function(c){var T;if(S.swapAttrs(c,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(c.z)&&Array.isArray(c.z[0])&&(c.transpose?delete c.transpose:c.transpose=!0),c.error_x&&c.error_y){var k=c.error_y,_="copy_ystyle"in k?k.copy_ystyle:!(k.color||k.thickness||k.width);S.swapAttrs(c,["error_?.copy_ystyle"]),_&&S.swapAttrs(c,["error_?.color","error_?.thickness","error_?.width"])}if(typeof c.hoverinfo=="string"){var b=c.hoverinfo.split("+");for(T=0;T<b.length;T++)b[T]==="x"?b[T]="y":b[T]==="y"&&(b[T]="x");c.hoverinfo=b.join("+")}},U.coerceTraceIndices=function(c,T){if(M(T))return[T];if(!Array.isArray(T)||!T.length)return c.data.map(function(b,P){return P});if(Array.isArray(T)){for(var k=[],_=0;_<T.length;_++)S.isIndex(T[_],c.data.length)?k.push(T[_]):S.warn("trace index (",T[_],") is not a number or is out of bounds");return k}return T},U.manageArrayContainers=function(c,T,k){var _=c.obj,b=c.parts,P=b.length,l=b[P-1],d=M(l);if(d&&T===null){var L=b.slice(0,P-1).join("."),w=S.nestedProperty(_,L).get();w.splice(l,1)}else d&&c.get()===void 0&&c.get()===void 0&&(k[c.astr]=null),c.set(T)};var x=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function s(c){var T=c.search(x);if(T>0)return c.substr(0,T)}U.hasParent=function(c,T){for(var k=s(T);k;){if(k in c)return!0;k=s(k)}return!1};var u=["x","y","z"];U.clearAxisTypes=function(c,T,k){for(var _=0;_<T.length;_++)for(var b=c._fullData[_],P=0;P<3;P++){var l=r(c,b,u[P]);if(l&&l.type!=="log"){var d=l._name,L=l._id.substr(1);if(L.substr(0,5)==="scene"){if(k[L]!==void 0)continue;d=L+"."+d}var w=d+".type";k[d]===void 0&&k[w]===void 0&&S.nestedProperty(c.layout,w).set(null)}}}},10641:function($,U,t){var M=t(72391);U._doPlot=M._doPlot,U.newPlot=M.newPlot,U.restyle=M.restyle,U.relayout=M.relayout,U.redraw=M.redraw,U.update=M.update,U._guiRestyle=M._guiRestyle,U._guiRelayout=M._guiRelayout,U._guiUpdate=M._guiUpdate,U._storeDirectGUIEdit=M._storeDirectGUIEdit,U.react=M.react,U.extendTraces=M.extendTraces,U.prependTraces=M.prependTraces,U.addTraces=M.addTraces,U.deleteTraces=M.deleteTraces,U.moveTraces=M.moveTraces,U.purge=M.purge,U.addFrames=M.addFrames,U.deleteFrames=M.deleteFrames,U.animate=M.animate,U.setPlotConfig=M.setPlotConfig;var E=t(24401).getGraphDiv,i=t(34031).eraseActiveShape;U.deleteActiveShape=function(A){return i(E(A))},U.toImage=t(403),U.validate=t(84936),U.downloadImage=t(7239);var S=t(96318);U.makeTemplate=S.makeTemplate,U.validateTemplate=S.validateTemplate},6611:function($,U,t){var M=t(41965),E=t(64213),i=t(47769),S=t(65888).sorterAsc,A=t(73972);U.containerArrayMatch=t(14458);var g=U.isAddVal=function(e){return e==="add"||M(e)},v=U.isRemoveVal=function(e){return e===null||e==="remove"};U.applyContainerArrayChanges=function(e,r,f,n,a){var o=r.astr,h=A.getComponentMethod(o,"supplyLayoutDefaults"),y=A.getComponentMethod(o,"draw"),p=A.getComponentMethod(o,"drawOne"),x=n.replot||n.recalc||h===E||y===E,s=e.layout,u=e._fullLayout;if(f[""]){Object.keys(f).length>1&&i.warn("Full array edits are incompatible with other edits",o);var c=f[""][""];if(v(c))r.set(null);else if(Array.isArray(c))r.set(c);else return i.warn("Unrecognized full array edit value",o,c),!0;return x?!1:(h(s,u),y(e),!0)}var T=Object.keys(f).map(Number).sort(S),k=r.get(),_=k||[],b=a(u,o).get(),P=[],l=-1,d=_.length,L,w,I,z,B,O,R,C;for(L=0;L<T.length;L++){if(I=T[L],z=f[I],B=Object.keys(z),O=z[""],R=g(O),I<0||I>_.length-(R?0:1)){i.warn("index out of range",o,I);continue}if(O!==void 0)B.length>1&&i.warn("Insertion & removal are incompatible with edits to the same index.",o,I),v(O)?P.push(I):R?(O==="add"&&(O={}),_.splice(I,0,O),b&&b.splice(I,0,{})):i.warn("Unrecognized full object edit value",o,I,O),l===-1&&(l=I);else for(w=0;w<B.length;w++)C=o+"["+I+"].",a(_[I],B[w],C).set(z[B[w]])}for(L=P.length-1;L>=0;L--)_.splice(P[L],1),b&&b.splice(P[L],1);if(_.length?k||r.set(_):r.set(null),x)return!1;if(h(s,u),p!==E){var F;if(l===-1)F=T;else{for(d=Math.max(_.length,d),F=[],L=0;L<T.length&&(I=T[L],!(I>=l));L++)F.push(I);for(L=l;L<d;L++)F.push(L)}for(L=0;L<F.length;L++)p(e,F[L])}else y(e);return!0}},72391:function($,U,t){var M=t(39898),E=t(92770),i=t(57035),S=t(71828),A=S.nestedProperty,g=t(11086),v=t(10847),e=t(73972),r=t(86281),f=t(74875),n=t(89298),a=t(91424),o=t(7901),h=t(4305).initInteractions,y=t(77922),p=t(47322).clearOutline,x=t(72075).dfltConfig,s=t(6611),u=t(58377),c=t(61549),T=t(30962),k=t(85555).AX_NAME_PATTERN,_=0,b=5;function P(ut,vt,St,Ot){var Xt;if(ut=S.getGraphDiv(ut),g.init(ut),S.isPlainObject(vt)){var $t=vt;vt=$t.data,St=$t.layout,Ot=$t.config,Xt=$t.frames}var de=g.triggerHandler(ut,"plotly_beforeplot",[vt,St,Ot]);if(de===!1)return Promise.reject();!vt&&!St&&!S.isPlotDiv(ut)&&S.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",ut);function Me(){if(Xt)return U.addFrames(ut,Xt)}I(ut,Ot),St||(St={}),M.select(ut).classed("js-plotly-plot",!0),a.makeTester(),Array.isArray(ut._promises)||(ut._promises=[]);var Fe=(ut.data||[]).length===0&&Array.isArray(vt);Array.isArray(vt)&&(u.cleanData(vt),Fe?ut.data=vt:ut.data.push.apply(ut.data,vt),ut.empty=!1),(!ut.layout||Fe)&&(ut.layout=u.cleanLayout(St)),f.supplyDefaults(ut);var De=ut._fullLayout,Ae=De._has("cartesian");De._replotting=!0,(Fe||De._shouldCreateBgLayer)&&(ft(ut),De._shouldCreateBgLayer&&delete De._shouldCreateBgLayer),a.initGradients(ut),a.initPatterns(ut),Fe&&n.saveShowSpikeInitial(ut);var Ve=!ut.calcdata||ut.calcdata.length!==(ut._fullData||[]).length;Ve&&f.doCalcdata(ut);for(var Qe=0;Qe<ut.calcdata.length;Qe++)ut.calcdata[Qe][0].trace=ut._fullData[Qe];ut._context.responsive?ut._responsiveChartHandler||(ut._responsiveChartHandler=function(){S.isHidden(ut)||f.resize(ut)},window.addEventListener("resize",ut._responsiveChartHandler)):S.clearResponsive(ut);var Sr=S.extendFlat({},De._size),he=0;function je(){for(var _e=De._basePlotModules,Ce=0;Ce<_e.length;Ce++)_e[Ce].drawFramework&&_e[Ce].drawFramework(ut);!De._glcanvas&&De._has("gl")&&(De._glcanvas=De._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(ir){return ir.key}),De._glcanvas.enter().append("canvas").attr("class",function(ir){return"gl-canvas gl-canvas-"+ir.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var ze=ut._context.plotGlPixelRatio;if(De._glcanvas){De._glcanvas.attr("width",De.width*ze).attr("height",De.height*ze).style("width",De.width+"px").style("height",De.height+"px");var We=De._glcanvas.data()[0].regl;if(We&&(Math.floor(De.width*ze)!==We._gl.drawingBufferWidth||Math.floor(De.height*ze)!==We._gl.drawingBufferHeight)){var qe="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(he)S.error(qe);else return S.log(qe+" Clearing graph and plotting again."),f.cleanPlot([],{},ut._fullData,De),f.supplyDefaults(ut),De=ut._fullLayout,f.doCalcdata(ut),he++,je()}}return De.modebar.orientation==="h"?De._modebardiv.style("height",null).style("width","100%"):De._modebardiv.style("width",null).style("height",De.height+"px"),f.previousPromises(ut)}function Re(){if(f.clearAutoMarginIds(ut),c.drawMarginPushers(ut),n.allowAutoMargin(ut),ut._fullLayout.title.text&&ut._fullLayout.title.automargin&&f.allowAutoMargin(ut,"title.automargin"),De._has("pie"))for(var _e=ut._fullData,Ce=0;Ce<_e.length;Ce++){var ze=_e[Ce];ze.type==="pie"&&ze.automargin&&f.allowAutoMargin(ut,"pie."+ze.uid+".automargin")}return f.doAutoMargin(ut),f.previousPromises(ut)}function _r(){if(f.didMarginChange(Sr,De._size))return S.syncOrAsync([Re,c.layoutStyles],ut)}function tr(){if(!Ve){Gt();return}return S.syncOrAsync([e.getComponentMethod("shapes","calcAutorange"),e.getComponentMethod("annotations","calcAutorange"),Gt],ut)}function Gt(){ut._transitioning||(c.doAutoRangeAndConstraints(ut),Fe&&n.saveRangeInitial(ut),e.getComponentMethod("rangeslider","calcAutorange")(ut))}function re(){return n.draw(ut,Fe?"":"redraw")}var fe=[f.previousPromises,Me,je,Re,_r];Ae&&fe.push(tr),fe.push(c.layoutStyles),Ae&&fe.push(re,function(_e){_e._fullLayout._insideTickLabelsAutorange&&ht(_e,_e._fullLayout._insideTickLabelsAutorange).then(function(){_e._fullLayout._insideTickLabelsAutorange=void 0})}),fe.push(c.drawData,c.finalDraw,h,f.addLinks,f.rehover,f.redrag,f.reselect,f.doAutoMargin,ye,f.previousPromises);function ye(_e){_e._fullLayout._insideTickLabelsAutorange&&Fe&&n.saveRangeInitial(_e,!0)}var Le=S.syncOrAsync(fe,ut);return(!Le||!Le.then)&&(Le=Promise.resolve()),Le.then(function(){return l(ut),ut})}function l(ut){var vt=ut._fullLayout;vt._redrawFromAutoMarginCount?vt._redrawFromAutoMarginCount--:ut.emit("plotly_afterplot")}function d(ut){return S.extendFlat(x,ut)}function L(ut,vt){try{ut._fullLayout._paper.style("background",vt)}catch(St){S.error(St)}}function w(ut,vt){var St=o.combine(vt,"white");L(ut,St)}function I(ut,vt){if(!ut._context){ut._context=S.extendDeep({},x);var St=M.select("base");ut._context._baseUrl=St.size()&&St.attr("href")?window.location.href.split("#")[0]:""}var Ot=ut._context,Xt,$t,de;if(vt){for($t=Object.keys(vt),Xt=0;Xt<$t.length;Xt++)de=$t[Xt],!(de==="editable"||de==="edits")&&de in Ot&&(de==="setBackground"&&vt[de]==="opaque"?Ot[de]=w:Ot[de]=vt[de]);vt.plot3dPixelRatio&&!Ot.plotGlPixelRatio&&(Ot.plotGlPixelRatio=Ot.plot3dPixelRatio);var Me=vt.editable;if(Me!==void 0)for(Ot.editable=Me,$t=Object.keys(Ot.edits),Xt=0;Xt<$t.length;Xt++)Ot.edits[$t[Xt]]=Me;if(vt.edits)for($t=Object.keys(vt.edits),Xt=0;Xt<$t.length;Xt++)de=$t[Xt],de in Ot.edits&&(Ot.edits[de]=vt.edits[de]);Ot._exportedPlot=vt._exportedPlot}Ot.staticPlot&&(Ot.editable=!1,Ot.edits={},Ot.autosizable=!1,Ot.scrollZoom=!1,Ot.doubleClick=!1,Ot.showTips=!1,Ot.showLink=!1,Ot.displayModeBar=!1),Ot.displayModeBar==="hover"&&!i&&(Ot.displayModeBar=!0),(Ot.setBackground==="transparent"||typeof Ot.setBackground!="function")&&(Ot.setBackground=L),Ot._hasZeroHeight=Ot._hasZeroHeight||ut.clientHeight===0,Ot._hasZeroWidth=Ot._hasZeroWidth||ut.clientWidth===0;var Fe=Ot.scrollZoom,De=Ot._scrollZoom={};if(Fe===!0)De.cartesian=1,De.gl3d=1,De.geo=1,De.mapbox=1;else if(typeof Fe=="string"){var Ae=Fe.split("+");for(Xt=0;Xt<Ae.length;Xt++)De[Ae[Xt]]=1}else Fe!==!1&&(De.gl3d=1,De.geo=1,De.mapbox=1)}function z(ut){if(ut=S.getGraphDiv(ut),!S.isPlotDiv(ut))throw new Error("This element is not a Plotly plot: "+ut);return u.cleanData(ut.data),u.cleanLayout(ut.layout),ut.calcdata=void 0,U._doPlot(ut).then(function(){return ut.emit("plotly_redraw"),ut})}function B(ut,vt,St,Ot){return ut=S.getGraphDiv(ut),f.cleanPlot([],{},ut._fullData||[],ut._fullLayout||{}),f.purge(ut),U._doPlot(ut,vt,St,Ot)}function O(ut,vt){var St=vt+1,Ot=[],Xt,$t;for(Xt=0;Xt<ut.length;Xt++)$t=ut[Xt],$t<0?Ot.push(St+$t):Ot.push($t);return Ot}function R(ut,vt,St){var Ot,Xt;for(Ot=0;Ot<vt.length;Ot++){if(Xt=vt[Ot],Xt!==parseInt(Xt,10))throw new Error("all values in "+St+" must be integers");if(Xt>=ut.data.length||Xt<-ut.data.length)throw new Error(St+" must be valid indices for gd.data.");if(vt.indexOf(Xt,Ot+1)>-1||Xt>=0&&vt.indexOf(-ut.data.length+Xt)>-1||Xt<0&&vt.indexOf(ut.data.length+Xt)>-1)throw new Error("each index in "+St+" must be unique.")}}function C(ut,vt,St){if(!Array.isArray(ut.data))throw new Error("gd.data must be an array.");if(typeof vt>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(vt)||(vt=[vt]),R(ut,vt,"currentIndices"),typeof St<"u"&&!Array.isArray(St)&&(St=[St]),typeof St<"u"&&R(ut,St,"newIndices"),typeof St<"u"&&vt.length!==St.length)throw new Error("current and new indices must be of equal length.")}function F(ut,vt,St){var Ot,Xt;if(!Array.isArray(ut.data))throw new Error("gd.data must be an array.");if(typeof vt>"u")throw new Error("traces must be defined.");for(Array.isArray(vt)||(vt=[vt]),Ot=0;Ot<vt.length;Ot++)if(Xt=vt[Ot],typeof Xt!="object"||Array.isArray(Xt)||Xt===null)throw new Error("all values in traces array must be non-array objects");if(typeof St<"u"&&!Array.isArray(St)&&(St=[St]),typeof St<"u"&&St.length!==vt.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function N(ut,vt,St,Ot){var Xt=S.isPlainObject(Ot);if(!Array.isArray(ut.data))throw new Error("gd.data must be an array");if(!S.isPlainObject(vt))throw new Error("update must be a key:value object");if(typeof St>"u")throw new Error("indices must be an integer or array of integers");R(ut,St,"indices");for(var $t in vt){if(!Array.isArray(vt[$t])||vt[$t].length!==St.length)throw new Error("attribute "+$t+" must be an array of length equal to indices array length");if(Xt&&(!($t in Ot)||!Array.isArray(Ot[$t])||Ot[$t].length!==vt[$t].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function V(ut,vt,St,Ot){var Xt=S.isPlainObject(Ot),$t=[],de,Me,Fe,De,Ae;Array.isArray(St)||(St=[St]),St=O(St,ut.data.length-1);for(var Ve in vt)for(var Qe=0;Qe<St.length;Qe++){if(de=ut.data[St[Qe]],Fe=A(de,Ve),Me=Fe.get(),De=vt[Ve][Qe],!S.isArrayOrTypedArray(De))throw new Error("attribute: "+Ve+" index: "+Qe+" must be an array");if(!S.isArrayOrTypedArray(Me))throw new Error("cannot extend missing or non-array attribute: "+Ve);if(Me.constructor!==De.constructor)throw new Error("cannot extend array with an array of a different type: "+Ve);Ae=Xt?Ot[Ve][Qe]:Ot,E(Ae)||(Ae=-1),$t.push({prop:Fe,target:Me,insert:De,maxp:Math.floor(Ae)})}return $t}function K(ut,vt,St,Ot,Xt){N(ut,vt,St,Ot);for(var $t=V(ut,vt,St,Ot),de={},Me={},Fe=0;Fe<$t.length;Fe++){var De=$t[Fe].prop,Ae=$t[Fe].maxp,Ve=Xt($t[Fe].target,$t[Fe].insert,Ae);De.set(Ve[0]),Array.isArray(de[De.astr])||(de[De.astr]=[]),de[De.astr].push(Ve[1]),Array.isArray(Me[De.astr])||(Me[De.astr]=[]),Me[De.astr].push($t[Fe].target.length)}return{update:de,maxPoints:Me}}function Q(ut,vt){var St=new ut.constructor(ut.length+vt.length);return St.set(ut),St.set(vt,ut.length),St}function at(ut,vt,St,Ot){ut=S.getGraphDiv(ut);function Xt(Fe,De,Ae){var Ve,Qe;if(S.isTypedArray(Fe))if(Ae<0){var Sr=new Fe.constructor(0),he=Q(Fe,De);Ae<0?(Ve=he,Qe=Sr):(Ve=Sr,Qe=he)}else if(Ve=new Fe.constructor(Ae),Qe=new Fe.constructor(Fe.length+De.length-Ae),Ae===De.length)Ve.set(De),Qe.set(Fe);else if(Ae<De.length){var je=De.length-Ae;Ve.set(De.subarray(je)),Qe.set(Fe),Qe.set(De.subarray(0,je),Fe.length)}else{var Re=Ae-De.length,_r=Fe.length-Re;Ve.set(Fe.subarray(_r)),Ve.set(De,Re),Qe.set(Fe.subarray(0,_r))}else Ve=Fe.concat(De),Qe=Ae>=0&&Ae<Ve.length?Ve.splice(0,Ve.length-Ae):[];return[Ve,Qe]}var $t=K(ut,vt,St,Ot,Xt),de=U.redraw(ut),Me=[ut,$t.update,St,$t.maxPoints];return v.add(ut,U.prependTraces,Me,at,arguments),de}function it(ut,vt,St,Ot){ut=S.getGraphDiv(ut);function Xt(Fe,De,Ae){var Ve,Qe;if(S.isTypedArray(Fe))if(Ae<=0){var Sr=new Fe.constructor(0),he=Q(De,Fe);Ae<0?(Ve=he,Qe=Sr):(Ve=Sr,Qe=he)}else if(Ve=new Fe.constructor(Ae),Qe=new Fe.constructor(Fe.length+De.length-Ae),Ae===De.length)Ve.set(De),Qe.set(Fe);else if(Ae<De.length){var je=De.length-Ae;Ve.set(De.subarray(0,je)),Qe.set(De.subarray(je)),Qe.set(Fe,je)}else{var Re=Ae-De.length;Ve.set(De),Ve.set(Fe.subarray(0,Re),De.length),Qe.set(Fe.subarray(Re))}else Ve=De.concat(Fe),Qe=Ae>=0&&Ae<Ve.length?Ve.splice(Ae,Ve.length):[];return[Ve,Qe]}var $t=K(ut,vt,St,Ot,Xt),de=U.redraw(ut),Me=[ut,$t.update,St,$t.maxPoints];return v.add(ut,U.extendTraces,Me,it,arguments),de}function q(ut,vt,St){ut=S.getGraphDiv(ut);var Ot=[],Xt=U.deleteTraces,$t=q,de=[ut,Ot],Me=[ut,vt],Fe,De;for(F(ut,vt,St),Array.isArray(vt)||(vt=[vt]),vt=vt.map(function(Ae){return S.extendFlat({},Ae)}),u.cleanData(vt),Fe=0;Fe<vt.length;Fe++)ut.data.push(vt[Fe]);for(Fe=0;Fe<vt.length;Fe++)Ot.push(-vt.length+Fe);if(typeof St>"u")return De=U.redraw(ut),v.add(ut,Xt,de,$t,Me),De;Array.isArray(St)||(St=[St]);try{C(ut,Ot,St)}catch(Ae){throw ut.data.splice(ut.data.length-vt.length,vt.length),Ae}return v.startSequence(ut),v.add(ut,Xt,de,$t,Me),De=U.moveTraces(ut,Ot,St),v.stopSequence(ut),De}function W(ut,vt){ut=S.getGraphDiv(ut);var St=[],Ot=U.addTraces,Xt=W,$t=[ut,St,vt],de=[ut,vt],Me,Fe;if(typeof vt>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(vt)||(vt=[vt]),R(ut,vt,"indices"),vt=O(vt,ut.data.length-1),vt.sort(S.sorterDes),Me=0;Me<vt.length;Me+=1)Fe=ut.data.splice(vt[Me],1)[0],St.push(Fe);var De=U.redraw(ut);return v.add(ut,Ot,$t,Xt,de),De}function Z(ut,vt,St){ut=S.getGraphDiv(ut);var Ot=[],Xt=[],$t=Z,de=Z,Me=[ut,St,vt],Fe=[ut,vt,St],De;if(C(ut,vt,St),vt=Array.isArray(vt)?vt:[vt],typeof St>"u")for(St=[],De=0;De<vt.length;De++)St.push(-vt.length+De);for(St=Array.isArray(St)?St:[St],vt=O(vt,ut.data.length-1),St=O(St,ut.data.length-1),De=0;De<ut.data.length;De++)vt.indexOf(De)===-1&&Ot.push(ut.data[De]);for(De=0;De<vt.length;De++)Xt.push({newIndex:St[De],trace:ut.data[vt[De]]});for(Xt.sort(function(Ve,Qe){return Ve.newIndex-Qe.newIndex}),De=0;De<Xt.length;De+=1)Ot.splice(Xt[De].newIndex,0,Xt[De].trace);ut.data=Ot;var Ae=U.redraw(ut);return v.add(ut,$t,Me,de,Fe),Ae}function G(ut,vt,St,Ot){ut=S.getGraphDiv(ut),u.clearPromiseQueue(ut);var Xt={};if(typeof vt=="string")Xt[vt]=St;else if(S.isPlainObject(vt))Xt=S.extendFlat({},vt),Ot===void 0&&(Ot=St);else return S.warn("Restyle fail.",vt,St,Ot),Promise.reject();Object.keys(Xt).length&&(ut.changed=!0);var $t=u.coerceTraceIndices(ut,Ot),de=ot(ut,Xt,$t),Me=de.flags;Me.calc&&(ut.calcdata=void 0),Me.clearAxisTypes&&u.clearAxisTypes(ut,$t,{});var Fe=[];Me.fullReplot?Fe.push(U._doPlot):(Fe.push(f.previousPromises),f.supplyDefaults(ut),Me.markerSize&&(f.doCalcdata(ut),yt(Fe)),Me.style&&Fe.push(c.doTraceStyle),Me.colorbars&&Fe.push(c.doColorBars),Fe.push(l)),Fe.push(f.rehover,f.redrag,f.reselect),v.add(ut,G,[ut,de.undoit,de.traces],G,[ut,de.redoit,de.traces]);var De=S.syncOrAsync(Fe,ut);return(!De||!De.then)&&(De=Promise.resolve()),De.then(function(){return ut.emit("plotly_restyle",de.eventData),ut})}function et(ut){return ut===void 0?null:ut}function nt(ut,vt){return vt?function(St,Ot,Xt){var $t=A(St,Ot),de=$t.set;return $t.set=function(Me){var Fe=(Xt||"")+Ot;X(Fe,$t.get(),Me,ut),de(Me)},$t}:A}function X(ut,vt,St,Ot){if(Array.isArray(vt)||Array.isArray(St))for(var Xt=Array.isArray(vt)?vt:[],$t=Array.isArray(St)?St:[],de=Math.max(Xt.length,$t.length),Me=0;Me<de;Me++)X(ut+"["+Me+"]",Xt[Me],$t[Me],Ot);else if(S.isPlainObject(vt)||S.isPlainObject(St)){var Fe=S.isPlainObject(vt)?vt:{},De=S.isPlainObject(St)?St:{},Ae=S.extendFlat({},Fe,De);for(var Ve in Ae)X(ut+"."+Ve,Fe[Ve],De[Ve],Ot)}else Ot[ut]===void 0&&(Ot[ut]=et(vt))}function Y(ut,vt,St){for(var Ot in St){var Xt=A(ut,Ot);X(Ot,Xt.get(),St[Ot],vt)}}function ot(ut,vt,St){var Ot=ut._fullLayout,Xt=ut._fullData,$t=ut.data,de=Ot._guiEditing,Me=nt(Ot._preGUI,de),Fe=S.extendDeepAll({},vt),De;rt(vt);var Ae=T.traceFlags(),Ve={},Qe={},Sr;function he(){return St.map(function(){})}function je(Zr){var yn=n.id2name(Zr);Sr.indexOf(yn)===-1&&Sr.push(yn)}function Re(Zr){return"LAYOUT"+Zr+".autorange"}function _r(Zr){return"LAYOUT"+Zr+".range"}function tr(Zr){for(var yn=Zr;yn<Xt.length;yn++)if(Xt[yn]._input===$t[Zr])return Xt[yn]}function Gt(Zr,yn,Tn){if(Array.isArray(Zr)){Zr.forEach(function(Cr){Gt(Cr,yn,Tn)});return}if(!(Zr in vt||u.hasParent(vt,Zr))){var hr;if(Zr.substr(0,6)==="LAYOUT")hr=Me(ut.layout,Zr.replace("LAYOUT",""));else{var dr=St[Tn],Lr=Ot._tracePreGUI[tr(dr)._fullInput.uid];hr=nt(Lr,de)($t[dr],Zr)}Zr in Qe||(Qe[Zr]=he()),Qe[Zr][Tn]===void 0&&(Qe[Zr][Tn]=et(hr.get())),yn!==void 0&&hr.set(yn)}}function re(Zr){return function(yn){return Xt[yn][Zr]}}function fe(Zr){return function(yn,Tn){return yn===!1?Xt[St[Tn]][Zr]:null}}for(var ye in vt){if(u.hasParent(vt,ye))throw new Error("cannot set "+ye+" and a parent attribute simultaneously");var Le=vt[ye],_e,Ce,ze,We,qe,ir;if((ye==="autobinx"||ye==="autobiny")&&(ye=ye.charAt(ye.length-1)+"bins",Array.isArray(Le)?Le=Le.map(fe(ye)):Le===!1?Le=St.map(re(ye)):Le=null),Ve[ye]=Le,ye.substr(0,6)==="LAYOUT"){ze=Me(ut.layout,ye.replace("LAYOUT","")),Qe[ye]=[et(ze.get())],ze.set(Array.isArray(Le)?Le[0]:Le),Ae.calc=!0;continue}for(Qe[ye]=he(),De=0;De<St.length;De++){_e=$t[St[De]],Ce=tr(St[De]);var xr=Ot._tracePreGUI[Ce._fullInput.uid];if(ze=nt(xr,de)(_e,ye),We=ze.get(),qe=Array.isArray(Le)?Le[De%Le.length]:Le,qe!==void 0){var Dt=ze.parts[ze.parts.length-1],Ut=ye.substr(0,ye.length-Dt.length-1),Te=Ut?Ut+".":"",Se=Ut?A(Ce,Ut).get():Ce;if(ir=r.getTraceValObject(Ce,ze.parts),ir&&ir.impliedEdits&&qe!==null)for(var Be in ir.impliedEdits)Gt(S.relativeAttr(ye,Be),ir.impliedEdits[Be],De);else if((Dt==="thicknessmode"||Dt==="lenmode")&&We!==qe&&(qe==="fraction"||qe==="pixels")&&Se){var Je=Ot._size,$e=Se.orient,Xe=$e==="top"||$e==="bottom";if(Dt==="thicknessmode"){var Oe=Xe?Je.h:Je.w;Gt(Te+"thickness",Se.thickness*(qe==="fraction"?1/Oe:Oe),De)}else{var ar=Xe?Je.w:Je.h;Gt(Te+"len",Se.len*(qe==="fraction"?1/ar:ar),De)}}else if(ye==="type"&&(qe==="pie"!=(We==="pie")||qe==="funnelarea"!=(We==="funnelarea"))){var cr="x",sr="y";(qe==="bar"||We==="bar")&&_e.orientation==="h"&&(cr="y",sr="x"),S.swapAttrs(_e,["?","?src"],"labels",cr),S.swapAttrs(_e,["d?","?0"],"label",cr),S.swapAttrs(_e,["?","?src"],"values",sr),We==="pie"||We==="funnelarea"?(A(_e,"marker.color").set(A(_e,"marker.colors").get()),Ot._pielayer.selectAll("g.trace").remove()):e.traceIs(_e,"cartesian")&&A(_e,"marker.colors").set(A(_e,"marker.color").get())}Qe[ye][De]=et(We);var lr=["swapxy","swapxyaxes","orientation","orientationaxes"];if(lr.indexOf(ye)!==-1){if(ye==="orientation"){ze.set(qe);var Or=_e.x&&!_e.y?"h":"v";if((ze.get()||Or)===Ce.orientation)continue}else ye==="orientationaxes"&&(_e.orientation={v:"h",h:"v"}[Ce.orientation]);u.swapXYData(_e),Ae.calc=Ae.clearAxisTypes=!0}else f.dataArrayContainers.indexOf(ze.parts[0])!==-1?(u.manageArrayContainers(ze,qe,Qe),Ae.calc=!0):(ir?ir.arrayOk&&!e.traceIs(Ce,"regl")&&(S.isArrayOrTypedArray(qe)||S.isArrayOrTypedArray(We))?Ae.calc=!0:T.update(Ae,ir):Ae.calc=!0,ze.set(qe))}}if(["swapxyaxes","orientationaxes"].indexOf(ye)!==-1&&n.swap(ut,St),ye==="orientationaxes"){var Ir=A(ut.layout,"hovermode"),Pr=Ir.get();Pr==="x"?Ir.set("y"):Pr==="y"?Ir.set("x"):Pr==="x unified"?Ir.set("y unified"):Pr==="y unified"&&Ir.set("x unified")}if(["orientation","type"].indexOf(ye)!==-1){for(Sr=[],De=0;De<St.length;De++){var rn=$t[St[De]];e.traceIs(rn,"cartesian")&&(je(rn.xaxis||"x"),je(rn.yaxis||"y"))}Gt(Sr.map(Re),!0,0),Gt(Sr.map(_r),[0,1],0)}}return(Ae.calc||Ae.plot)&&(Ae.fullReplot=!0),{flags:Ae,undoit:Qe,redoit:Ve,traces:St,eventData:S.extendDeepNoArrays([],[Fe,St])}}function rt(ut){var vt=S.counterRegex("axis",".title",!1,!1),St=/colorbar\.title$/,Ot=Object.keys(ut),Xt,$t,de;for(Xt=0;Xt<Ot.length;Xt++)$t=Ot[Xt],de=ut[$t],($t==="title"||vt.test($t)||St.test($t))&&(typeof de=="string"||typeof de=="number")?Me($t,$t.replace("title","title.text")):$t.indexOf("titlefont")>-1&&$t.indexOf("grouptitlefont")===-1?Me($t,$t.replace("titlefont","title.font")):$t.indexOf("titleposition")>-1?Me($t,$t.replace("titleposition","title.position")):$t.indexOf("titleside")>-1?Me($t,$t.replace("titleside","title.side")):$t.indexOf("titleoffset")>-1&&Me($t,$t.replace("titleoffset","title.offset"));function Me(Fe,De){ut[De]=ut[Fe],delete ut[Fe]}}function ht(ut,vt,St){ut=S.getGraphDiv(ut),u.clearPromiseQueue(ut);var Ot={};if(typeof vt=="string")Ot[vt]=St;else if(S.isPlainObject(vt))Ot=S.extendFlat({},vt);else return S.warn("Relayout fail.",vt,St),Promise.reject();Object.keys(Ot).length&&(ut.changed=!0);var Xt=mt(ut,Ot),$t=Xt.flags;$t.calc&&(ut.calcdata=void 0);var de=[f.previousPromises];$t.layoutReplot?de.push(c.layoutReplot):Object.keys(Ot).length&&(pt(ut,$t,Xt)||f.supplyDefaults(ut),$t.legend&&de.push(c.doLegend),$t.layoutstyle&&de.push(c.layoutStyles),$t.axrange&&yt(de,Xt.rangesAltered),$t.ticks&&de.push(c.doTicksRelayout),$t.modebar&&de.push(c.doModeBar),$t.camera&&de.push(c.doCamera),$t.colorbars&&de.push(c.doColorBars),de.push(l)),de.push(f.rehover,f.redrag,f.reselect),v.add(ut,ht,[ut,Xt.undoit],ht,[ut,Xt.redoit]);var Me=S.syncOrAsync(de,ut);return(!Me||!Me.then)&&(Me=Promise.resolve(ut)),Me.then(function(){return ut.emit("plotly_relayout",Xt.eventData),ut})}function pt(ut,vt,St){var Ot=ut._fullLayout;if(!vt.axrange)return!1;for(var Xt in vt)if(Xt!=="axrange"&&vt[Xt])return!1;for(var $t in St.rangesAltered){var de=n.id2name($t),Me=ut.layout[de],Fe=Ot[de];if(Fe.autorange=Me.autorange,Me.range&&(Fe.range=Me.range.slice()),Fe.cleanRange(),Fe._matchGroup){for(var De in Fe._matchGroup)if(De!==$t){var Ae=Ot[n.id2name(De)];Ae.autorange=Fe.autorange,Ae.range=Fe.range.slice(),Ae._input.range=Fe.range.slice()}}}return!0}function yt(ut,vt){var St=vt?function(Ot){var Xt=[],$t=!0;for(var de in vt){var Me=n.getFromId(Ot,de);if(Xt.push(de),(Me.ticklabelposition||"").indexOf("inside")!==-1&&Me._anchorAxis&&Xt.push(Me._anchorAxis._id),Me._matchGroup)for(var Fe in Me._matchGroup)vt[Fe]||Xt.push(Fe)}return n.draw(Ot,Xt,{skipTitle:$t})}:function(Ot){return n.draw(Ot,"redraw")};ut.push(p,c.doAutoRangeAndConstraints,St,c.drawData,c.finalDraw)}var xt=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Ft=/^[xyz]axis[0-9]*\.autorange$/,Et=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function mt(ut,vt){var St=ut.layout,Ot=ut._fullLayout,Xt=Ot._guiEditing,$t=nt(Ot._preGUI,Xt),de=Object.keys(vt),Me=n.list(ut),Fe=S.extendDeepAll({},vt),De={},Ae,Ve,Qe;for(rt(vt),de=Object.keys(vt),Ve=0;Ve<de.length;Ve++)if(de[Ve].indexOf("allaxes")===0){for(Qe=0;Qe<Me.length;Qe++){var Sr=Me[Qe]._id.substr(1),he=Sr.indexOf("scene")!==-1?Sr+".":"",je=de[Ve].replace("allaxes",he+Me[Qe]._name);vt[je]||(vt[je]=vt[de[Ve]])}delete vt[de[Ve]]}var Re=T.layoutFlags(),_r={},tr={};function Gt(Lr,Cr){if(Array.isArray(Lr)){Lr.forEach(function(sn){Gt(sn,Cr)});return}if(!(Lr in vt||u.hasParent(vt,Lr))){var Hr=$t(St,Lr);Lr in tr||(tr[Lr]=et(Hr.get())),Cr!==void 0&&Hr.set(Cr)}}var re={},fe;function ye(Lr){var Cr=n.name2id(Lr.split(".")[0]);return re[Cr]=1,Cr}for(var Le in vt){if(u.hasParent(vt,Le))throw new Error("cannot set "+Le+" and a parent attribute simultaneously");for(var _e=$t(St,Le),Ce=vt[Le],ze=_e.parts.length,We=ze-1;We>0&&typeof _e.parts[We]!="string";)We--;var qe=_e.parts[We],ir=_e.parts[We-1]+"."+qe,xr=_e.parts.slice(0,We).join("."),Dt=A(ut.layout,xr).get(),Ut=A(Ot,xr).get(),Te=_e.get();if(Ce!==void 0){_r[Le]=Ce,tr[Le]=qe==="reverse"?Ce:et(Te);var Se=r.getLayoutValObject(Ot,_e.parts);if(Se&&Se.impliedEdits&&Ce!==null)for(var Be in Se.impliedEdits)Gt(S.relativeAttr(Le,Be),Se.impliedEdits[Be]);if(["width","height"].indexOf(Le)!==-1)if(Ce){Gt("autosize",null);var Je=Le==="height"?"width":"height";Gt(Je,Ot[Je])}else Ot[Le]=ut._initialAutoSize[Le];else if(Le==="autosize")Gt("width",Ce?null:Ot.width),Gt("height",Ce?null:Ot.height);else if(ir.match(xt))ye(ir),A(Ot,xr+"._inputRange").set(null);else if(ir.match(Ft)){ye(ir),A(Ot,xr+"._inputRange").set(null);var $e=A(Ot,xr).get();$e._inputDomain&&($e._input.domain=$e._inputDomain.slice())}else ir.match(Et)&&A(Ot,xr+"._inputDomain").set(null);if(qe==="type"){fe=Dt;var Xe=Ut.type==="linear"&&Ce==="log",Oe=Ut.type==="log"&&Ce==="linear";if(Xe||Oe){if(!fe||!fe.range)Gt(xr+".autorange",!0);else if(Ut.autorange)Xe&&(fe.range=fe.range[1]>fe.range[0]?[1,2]:[2,1]);else{var ar=fe.range[0],cr=fe.range[1];Xe?(ar<=0&&cr<=0&&Gt(xr+".autorange",!0),ar<=0?ar=cr/1e6:cr<=0&&(cr=ar/1e6),Gt(xr+".range[0]",Math.log(ar)/Math.LN10),Gt(xr+".range[1]",Math.log(cr)/Math.LN10)):(Gt(xr+".range[0]",Math.pow(10,ar)),Gt(xr+".range[1]",Math.pow(10,cr)))}Array.isArray(Ot._subplots.polar)&&Ot._subplots.polar.length&&Ot[_e.parts[0]]&&_e.parts[1]==="radialaxis"&&delete Ot[_e.parts[0]]._subplot.viewInitial["radialaxis.range"],e.getComponentMethod("annotations","convertCoords")(ut,Ut,Ce,Gt),e.getComponentMethod("images","convertCoords")(ut,Ut,Ce,Gt)}else Gt(xr+".autorange",!0),Gt(xr+".range",null);A(Ot,xr+"._inputRange").set(null)}else if(qe.match(k)){var sr=A(Ot,Le).get(),lr=(Ce||{}).type;(!lr||lr==="-")&&(lr="linear"),e.getComponentMethod("annotations","convertCoords")(ut,sr,lr,Gt),e.getComponentMethod("images","convertCoords")(ut,sr,lr,Gt)}var Or=s.containerArrayMatch(Le);if(Or){Ae=Or.array,Ve=Or.index;var Ir=Or.property,Pr=Se||{editType:"calc"};Ve!==""&&Ir===""&&(s.isAddVal(Ce)?tr[Le]=null:s.isRemoveVal(Ce)?tr[Le]=(A(St,Ae).get()||[])[Ve]:S.warn("unrecognized full object value",vt)),T.update(Re,Pr),De[Ae]||(De[Ae]={});var rn=De[Ae][Ve];rn||(rn=De[Ae][Ve]={}),rn[Ir]=Ce,delete vt[Le]}else qe==="reverse"?(Dt.range?Dt.range.reverse():(Gt(xr+".autorange",!0),Dt.range=[1,0]),Ut.autorange?Re.calc=!0:Re.plot=!0):(Le==="dragmode"&&(Ce===!1&&Te!==!1||Ce!==!1&&Te===!1)||Ot._has("scatter-like")&&Ot._has("regl")&&Le==="dragmode"&&(Ce==="lasso"||Ce==="select")&&!(Te==="lasso"||Te==="select")||Ot._has("gl2d")?Re.plot=!0:Se?T.update(Re,Se):Re.calc=!0,_e.set(Ce))}}for(Ae in De){var Zr=s.applyContainerArrayChanges(ut,$t(St,Ae),De[Ae],Re,$t);Zr||(Re.plot=!0)}for(var yn in re){fe=n.getFromId(ut,yn);var Tn=fe&&fe._constraintGroup;if(Tn){Re.calc=!0;for(var hr in Tn)re[hr]||(n.getFromId(ut,hr)._constraintShrinkable=!0)}}(gt(ut)||vt.height||vt.width)&&(Re.plot=!0);var dr=Ot.shapes;for(Ve=0;Ve<dr.length;Ve++)if(dr[Ve].showlegend){Re.calc=!0;break}return(Re.plot||Re.calc)&&(Re.layoutReplot=!0),{flags:Re,rangesAltered:re,undoit:tr,redoit:_r,eventData:Fe}}function gt(ut){var vt=ut._fullLayout,St=vt.width,Ot=vt.height;return ut.layout.autosize&&f.plotAutoSize(ut,ut.layout,vt),vt.width!==St||vt.height!==Ot}function wt(ut,vt,St,Ot){ut=S.getGraphDiv(ut),u.clearPromiseQueue(ut),S.isPlainObject(vt)||(vt={}),S.isPlainObject(St)||(St={}),Object.keys(vt).length&&(ut.changed=!0),Object.keys(St).length&&(ut.changed=!0);var Xt=u.coerceTraceIndices(ut,Ot),$t=ot(ut,S.extendFlat({},vt),Xt),de=$t.flags,Me=mt(ut,S.extendFlat({},St)),Fe=Me.flags;(de.calc||Fe.calc)&&(ut.calcdata=void 0),de.clearAxisTypes&&u.clearAxisTypes(ut,Xt,St);var De=[];Fe.layoutReplot?De.push(c.layoutReplot):de.fullReplot?De.push(U._doPlot):(De.push(f.previousPromises),pt(ut,Fe,Me)||f.supplyDefaults(ut),de.style&&De.push(c.doTraceStyle),(de.colorbars||Fe.colorbars)&&De.push(c.doColorBars),Fe.legend&&De.push(c.doLegend),Fe.layoutstyle&&De.push(c.layoutStyles),Fe.axrange&&yt(De,Me.rangesAltered),Fe.ticks&&De.push(c.doTicksRelayout),Fe.modebar&&De.push(c.doModeBar),Fe.camera&&De.push(c.doCamera),De.push(l)),De.push(f.rehover,f.redrag,f.reselect),v.add(ut,wt,[ut,$t.undoit,Me.undoit,$t.traces],wt,[ut,$t.redoit,Me.redoit,$t.traces]);var Ae=S.syncOrAsync(De,ut);return(!Ae||!Ae.then)&&(Ae=Promise.resolve(ut)),Ae.then(function(){return ut.emit("plotly_update",{data:$t.eventData,layout:Me.eventData}),ut})}function Pt(ut){return function(vt){vt._fullLayout._guiEditing=!0;var St=ut.apply(null,arguments);return vt._fullLayout._guiEditing=!1,St}}var Bt=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],kt=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function jt(ut,vt){for(var St=0;St<vt.length;St++){var Ot=vt[St],Xt=ut.match(Ot.pattern);if(Xt){var $t=Xt[1]||"";return{head:$t,tail:ut.substr($t.length+1),attr:Ot.attr}}}}function Ht(ut,vt){var St=A(vt,ut).get();if(St!==void 0)return St;var Ot=ut.split(".");for(Ot.pop();Ot.length>1;)if(Ot.pop(),St=A(vt,Ot.join(".")+".uirevision").get(),St!==void 0)return St;return vt.uirevision}function Vt(ut,vt){for(var St=0;St<vt.length;St++)if(vt[St]._fullInput.uid===ut)return St;return-1}function ee(ut,vt,St){for(var Ot=0;Ot<vt.length;Ot++)if(vt[Ot].uid===ut)return Ot;return!vt[St]||vt[St].uid?-1:St}function te(ut,vt){var St=S.isPlainObject(ut),Ot=Array.isArray(ut);return St||Ot?(St&&S.isPlainObject(vt)||Ot&&Array.isArray(vt))&&JSON.stringify(ut)===JSON.stringify(vt):ut===vt}function ae(ut,vt,St,Ot){var Xt=Ot._preGUI,$t,de,Me,Fe,De,Ae,Ve,Qe,Sr,he,je=[],Re={},_r={};for($t in Xt){if(De=jt($t,Bt),De){if(Sr=De.head,he=De.tail,de=De.attr||Sr+".uirevision",Me=A(Ot,de).get(),Fe=Me&&Ht(de,vt),Fe&&Fe===Me){if(Ae=Xt[$t],Ae===null&&(Ae=void 0),Ve=A(vt,$t),Qe=Ve.get(),te(Qe,Ae)){Qe===void 0&&he==="autorange"&&je.push(Sr),Ve.set(et(A(Ot,$t).get()));continue}else if(he==="autorange"||he.substr(0,6)==="range["){var tr=Xt[Sr+".range[0]"],Gt=Xt[Sr+".range[1]"],re=Xt[Sr+".autorange"];if(re||re===null&&tr===null&&Gt===null){if(!(Sr in Re)){var fe=A(vt,Sr).get();Re[Sr]=fe&&(fe.autorange||fe.autorange!==!1&&(!fe.range||fe.range.length!==2))}if(Re[Sr]){Ve.set(et(A(Ot,$t).get()));continue}}}}}else S.warn("unrecognized GUI edit: "+$t);delete Xt[$t],De&&De.tail.substr(0,6)==="range["&&(_r[De.head]=1)}for(var ye=0;ye<je.length;ye++){var Le=je[ye];if(_r[Le]){var _e=A(vt,Le).get();_e&&delete _e.autorange}}var Ce=Ot._tracePreGUI;for(var ze in Ce){var We=Ce[ze],qe=null,ir;for($t in We){if(!qe){var xr=Vt(ze,St);if(xr<0){delete Ce[ze];break}var Dt=St[xr];ir=Dt._fullInput;var Ut=ee(ze,ut,ir.index);if(Ut<0){delete Ce[ze];break}qe=ut[Ut]}if(De=jt($t,kt),De){if(De.attr?(Me=A(Ot,De.attr).get(),Fe=Me&&Ht(De.attr,vt)):(Me=ir.uirevision,Fe=qe.uirevision,Fe===void 0&&(Fe=vt.uirevision)),Fe&&Fe===Me&&(Ae=We[$t],Ae===null&&(Ae=void 0),Ve=A(qe,$t),Qe=Ve.get(),te(Qe,Ae))){Ve.set(et(A(ir,$t).get()));continue}}else S.warn("unrecognized GUI edit: "+$t+" in trace uid "+ze);delete We[$t]}}}function le(ut,vt,St,Ot){var Xt,$t;function de(){return U.addFrames(ut,Xt)}ut=S.getGraphDiv(ut),u.clearPromiseQueue(ut);var Me=ut._fullData,Fe=ut._fullLayout;if(!S.isPlotDiv(ut)||!Me||!Fe)$t=U.newPlot(ut,vt,St,Ot);else{if(S.isPlainObject(vt)){var De=vt;vt=De.data,St=De.layout,Ot=De.config,Xt=De.frames}var Ae=!1;if(Ot){var Ve=S.extendDeep({},ut._context);ut._context=void 0,I(ut,Ot),Ae=ve(Ve,ut._context)}ut.data=vt||[],u.cleanData(ut.data),ut.layout=St||{},u.cleanLayout(ut.layout),ae(ut.data,ut.layout,Me,Fe),f.supplyDefaults(ut,{skipUpdateCalc:!0});var Qe=ut._fullData,Sr=ut._fullLayout,he=Sr.datarevision===void 0,je=Sr.transition,Re=pe(ut,Fe,Sr,he,je),_r=Re.newDataRevision,tr=ce(ut,Me,Qe,he,je,_r);if(gt(ut)&&(Re.layoutReplot=!0),tr.calc||Re.calc){ut.calcdata=void 0;for(var Gt=Object.getOwnPropertyNames(Sr),re=0;re<Gt.length;re++){var fe=Gt[re],ye=fe.substring(0,5);if(ye==="xaxis"||ye==="yaxis"){var Le=Sr[fe]._emptyCategories;Le&&Le()}}}else f.supplyDefaultsUpdateCalc(ut.calcdata,Qe);var _e=[];if(Xt&&(ut._transitionData={},f.createTransitionData(ut),_e.push(de)),Sr.transition&&!Ae&&(tr.anim||Re.anim))Re.ticks&&_e.push(c.doTicksRelayout),f.doCalcdata(ut),c.doAutoRangeAndConstraints(ut),_e.push(function(){return f.transitionFromReact(ut,tr,Re,Fe)});else if(tr.fullReplot||Re.layoutReplot||Ae)ut._fullLayout._skipDefaults=!0,_e.push(U._doPlot);else{for(var Ce in Re.arrays){var ze=Re.arrays[Ce];if(ze.length){var We=e.getComponentMethod(Ce,"drawOne");if(We!==S.noop)for(var qe=0;qe<ze.length;qe++)We(ut,ze[qe]);else{var ir=e.getComponentMethod(Ce,"draw");if(ir===S.noop)throw new Error("cannot draw components: "+Ce);ir(ut)}}}_e.push(f.previousPromises),tr.style&&_e.push(c.doTraceStyle),(tr.colorbars||Re.colorbars)&&_e.push(c.doColorBars),Re.legend&&_e.push(c.doLegend),Re.layoutstyle&&_e.push(c.layoutStyles),Re.axrange&&yt(_e),Re.ticks&&_e.push(c.doTicksRelayout),Re.modebar&&_e.push(c.doModeBar),Re.camera&&_e.push(c.doCamera),_e.push(l)}_e.push(f.rehover,f.redrag,f.reselect),$t=S.syncOrAsync(_e,ut),(!$t||!$t.then)&&($t=Promise.resolve(ut))}return $t.then(function(){return ut.emit("plotly_react",{data:vt,layout:St}),ut})}function ce(ut,vt,St,Ot,Xt,$t){var de=vt.length===St.length;if(!Xt&&!de)return{fullReplot:!0,calc:!0};var Me=T.traceFlags();Me.arrays={},Me.nChanges=0,Me.nChangesAnim=0;var Fe,De;function Ae(Sr){var he=r.getTraceValObject(De,Sr);return!De._module.animatable&&he.anim&&(he.anim=!1),he}var Ve={getValObject:Ae,flags:Me,immutable:Ot,transition:Xt,newDataRevision:$t,gd:ut},Qe={};for(Fe=0;Fe<vt.length;Fe++)if(St[Fe]){if(De=St[Fe]._fullInput,f.hasMakesDataTransform(De)&&(De=St[Fe]),Qe[De.uid])continue;Qe[De.uid]=1,we(vt[Fe]._fullInput,De,[],Ve)}return(Me.calc||Me.plot)&&(Me.fullReplot=!0),Xt&&Me.nChanges&&Me.nChangesAnim&&(Me.anim=Me.nChanges===Me.nChangesAnim&&de?"all":"some"),Me}function pe(ut,vt,St,Ot,Xt){var $t=T.layoutFlags();$t.arrays={},$t.rangesAltered={},$t.nChanges=0,$t.nChangesAnim=0;function de(Fe){return r.getLayoutValObject(St,Fe)}var Me={getValObject:de,flags:$t,immutable:Ot,transition:Xt,gd:ut};return we(vt,St,[],Me),($t.plot||$t.calc)&&($t.layoutReplot=!0),Xt&&$t.nChanges&&$t.nChangesAnim&&($t.anim=$t.nChanges===$t.nChangesAnim?"all":"some"),$t}function we(ut,vt,St,Ot){var Xt,$t,de,Me=Ot.getValObject,Fe=Ot.flags,De=Ot.immutable,Ae=Ot.inArray,Ve=Ot.arrayIndex;function Qe(){var xr=Xt.editType;if(Ae&&xr.indexOf("arraydraw")!==-1){S.pushUnique(Fe.arrays[Ae],Ve);return}T.update(Fe,Xt),xr!=="none"&&Fe.nChanges++,Ot.transition&&Xt.anim&&Fe.nChangesAnim++,(xt.test(de)||Ft.test(de))&&(Fe.rangesAltered[St[0]]=1),Et.test(de)&&A(vt,"_inputDomain").set(null),$t==="datarevision"&&(Fe.newDataRevision=1)}function Sr(xr){return xr.valType==="data_array"||xr.arrayOk}for($t in ut){if(Fe.calc&&!Ot.transition)return;var he=ut[$t],je=vt[$t],Re=St.concat($t);if(de=Re.join("."),!($t.charAt(0)==="_"||typeof he=="function"||he===je)){if(($t==="tick0"||$t==="dtick")&&St[0]!=="geo"){var _r=vt.tickmode;if(_r==="auto"||_r==="array"||!_r)continue}if(!($t==="range"&&vt.autorange)&&!(($t==="zmin"||$t==="zmax")&&vt.type==="contourcarpet")&&(Xt=Me(Re),!!Xt&&!(Xt._compareAsJSON&&JSON.stringify(he)===JSON.stringify(je)))){var tr=Xt.valType,Gt,re=Sr(Xt),fe=Array.isArray(he),ye=Array.isArray(je);if(fe&&ye){var Le="_input_"+$t,_e=ut[Le],Ce=vt[Le];if(Array.isArray(_e)&&_e===Ce)continue}if(je===void 0)re&&fe?Fe.calc=!0:Qe();else if(Xt._isLinkedToArray){var ze=[],We=!1;Ae||(Fe.arrays[$t]=ze);var qe=Math.min(he.length,je.length),ir=Math.max(he.length,je.length);if(qe!==ir)if(Xt.editType==="arraydraw")We=!0;else{Qe();continue}for(Gt=0;Gt<qe;Gt++)we(he[Gt],je[Gt],Re.concat(Gt),S.extendFlat({inArray:$t,arrayIndex:Gt},Ot));if(We)for(Gt=qe;Gt<ir;Gt++)ze.push(Gt)}else!tr&&S.isPlainObject(he)?we(he,je,Re,Ot):re?fe&&ye?(De&&(Fe.calc=!0),(De||Ot.newDataRevision)&&Qe()):fe!==ye?Fe.calc=!0:Qe():fe&&ye?(he.length!==je.length||String(he)!==String(je))&&Qe():Qe()}}}for($t in vt)if(!($t in ut||$t.charAt(0)==="_"||typeof vt[$t]=="function"))if(Xt=Me(St.concat($t)),Sr(Xt)&&Array.isArray(vt[$t])){Fe.calc=!0;return}else Qe()}function ve(ut,vt){var St;for(St in ut)if(St.charAt(0)!=="_"){var Ot=ut[St],Xt=vt[St];if(Ot!==Xt)if(S.isPlainObject(Ot)&&S.isPlainObject(Xt)){if(ve(Ot,Xt))return!0}else if(Array.isArray(Ot)&&Array.isArray(Xt)){if(Ot.length!==Xt.length)return!0;for(var $t=0;$t<Ot.length;$t++)if(Ot[$t]!==Xt[$t])if(S.isPlainObject(Ot[$t])&&S.isPlainObject(Xt[$t])){if(ve(Ot[$t],Xt[$t]))return!0}else return!0}else return!0}}function Mt(ut,vt,St){if(ut=S.getGraphDiv(ut),!S.isPlotDiv(ut))throw new Error("This element is not a Plotly plot: "+ut+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Ot=ut._transitionData;Ot._frameQueue||(Ot._frameQueue=[]),St=f.supplyAnimationDefaults(St);var Xt=St.transition,$t=St.frame;Ot._frameWaitingCnt===void 0&&(Ot._frameWaitingCnt=0);function de(De){return Array.isArray(Xt)?De>=Xt.length?Xt[0]:Xt[De]:Xt}function Me(De){return Array.isArray($t)?De>=$t.length?$t[0]:$t[De]:$t}function Fe(De,Ae){var Ve=0;return function(){if(De&&++Ve===Ae)return De()}}return new Promise(function(De,Ae){function Ve(){if(Ot._frameQueue.length!==0){for(;Ot._frameQueue.length;){var qe=Ot._frameQueue.pop();qe.onInterrupt&&qe.onInterrupt()}ut.emit("plotly_animationinterrupted",[])}}function Qe(qe){if(qe.length!==0){for(var ir=0;ir<qe.length;ir++){var xr;qe[ir].type==="byname"?xr=f.computeFrame(ut,qe[ir].name):xr=qe[ir].data;var Dt=Me(ir),Ut=de(ir);Ut.duration=Math.min(Ut.duration,Dt.duration);var Te={frame:xr,name:qe[ir].name,frameOpts:Dt,transitionOpts:Ut};ir===qe.length-1&&(Te.onComplete=Fe(De,2),Te.onInterrupt=Ae),Ot._frameQueue.push(Te)}St.mode==="immediate"&&(Ot._lastFrameAt=-1/0),Ot._animationRaf||je()}}function Sr(){ut.emit("plotly_animated"),window.cancelAnimationFrame(Ot._animationRaf),Ot._animationRaf=null}function he(){Ot._currentFrame&&Ot._currentFrame.onComplete&&Ot._currentFrame.onComplete();var qe=Ot._currentFrame=Ot._frameQueue.shift();if(qe){var ir=qe.name?qe.name.toString():null;ut._fullLayout._currentFrame=ir,Ot._lastFrameAt=Date.now(),Ot._timeToNext=qe.frameOpts.duration,f.transition(ut,qe.frame.data,qe.frame.layout,u.coerceTraceIndices(ut,qe.frame.traces),qe.frameOpts,qe.transitionOpts).then(function(){qe.onComplete&&qe.onComplete()}),ut.emit("plotly_animatingframe",{name:ir,frame:qe.frame,animation:{frame:qe.frameOpts,transition:qe.transitionOpts}})}else Sr()}function je(){ut.emit("plotly_animating"),Ot._lastFrameAt=-1/0,Ot._timeToNext=0,Ot._runningTransitions=0,Ot._currentFrame=null;var qe=function(){Ot._animationRaf=window.requestAnimationFrame(qe),Date.now()-Ot._lastFrameAt>Ot._timeToNext&&he()};qe()}var Re=0;function _r(qe){return Array.isArray(Xt)?Re>=Xt.length?qe.transitionOpts=Xt[Re]:qe.transitionOpts=Xt[0]:qe.transitionOpts=Xt,Re++,qe}var tr,Gt,re=[],fe=vt==null,ye=Array.isArray(vt),Le=!fe&&!ye&&S.isPlainObject(vt);if(Le)re.push({type:"object",data:_r(S.extendFlat({},vt))});else if(fe||["string","number"].indexOf(typeof vt)!==-1)for(tr=0;tr<Ot._frames.length;tr++)Gt=Ot._frames[tr],Gt&&(fe||String(Gt.group)===String(vt))&&re.push({type:"byname",name:String(Gt.name),data:_r({name:Gt.name})});else if(ye)for(tr=0;tr<vt.length;tr++){var _e=vt[tr];["number","string"].indexOf(typeof _e)!==-1?(_e=String(_e),re.push({type:"byname",name:_e,data:_r({name:_e})})):S.isPlainObject(_e)&&re.push({type:"object",data:_r(S.extendFlat({},_e))})}for(tr=0;tr<re.length;tr++)if(Gt=re[tr],Gt.type==="byname"&&!Ot._frameHash[Gt.data.name]){S.warn('animate failure: frame not found: "'+Gt.data.name+'"'),Ae();return}["next","immediate"].indexOf(St.mode)!==-1&&Ve(),St.direction==="reverse"&&re.reverse();var Ce=ut._fullLayout._currentFrame;if(Ce&&St.fromcurrent){var ze=-1;for(tr=0;tr<re.length;tr++)if(Gt=re[tr],Gt.type==="byname"&&Gt.name===Ce){ze=tr;break}if(ze>0&&ze<re.length-1){var We=[];for(tr=0;tr<re.length;tr++)Gt=re[tr],(re[tr].type!=="byname"||tr>ze)&&We.push(Gt);re=We}}re.length>0?Qe(re):(ut.emit("plotly_animated"),De())})}function It(ut,vt,St){if(ut=S.getGraphDiv(ut),vt==null)return Promise.resolve();if(!S.isPlotDiv(ut))throw new Error("This element is not a Plotly plot: "+ut+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Ot,Xt,$t,de,Me=ut._transitionData._frames,Fe=ut._transitionData._frameHash;if(!Array.isArray(vt))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+vt);var De=Me.length+vt.length*2,Ae=[],Ve={};for(Ot=vt.length-1;Ot>=0;Ot--)if(S.isPlainObject(vt[Ot])){var Qe=vt[Ot].name,Sr=(Fe[Qe]||Ve[Qe]||{}).name,he=vt[Ot].name,je=Fe[Sr]||Ve[Sr];Sr&&he&&typeof he=="number"&&je&&_<b&&(_++,S.warn('addFrames: overwriting frame "'+(Fe[Sr]||Ve[Sr]).name+'" with a frame whose name of type "number" also equates to "'+Sr+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),_===b&&S.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Ve[Qe]={name:Qe},Ae.push({frame:f.supplyFrameDefaults(vt[Ot]),index:St&&St[Ot]!==void 0&&St[Ot]!==null?St[Ot]:De+Ot})}Ae.sort(function(Le,_e){return Le.index>_e.index?-1:Le.index<_e.index?1:0});var Re=[],_r=[],tr=Me.length;for(Ot=Ae.length-1;Ot>=0;Ot--){if(Xt=Ae[Ot].frame,typeof Xt.name=="number"&&S.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Xt.name)for(;Fe[Xt.name="frame "+ut._transitionData._counter++];);if(Fe[Xt.name]){for($t=0;$t<Me.length&&(Me[$t]||{}).name!==Xt.name;$t++);Re.push({type:"replace",index:$t,value:Xt}),_r.unshift({type:"replace",index:$t,value:Me[$t]})}else de=Math.max(0,Math.min(Ae[Ot].index,tr)),Re.push({type:"insert",index:de,value:Xt}),_r.unshift({type:"delete",index:de}),tr++}var Gt=f.modifyFrames,re=f.modifyFrames,fe=[ut,_r],ye=[ut,Re];return v&&v.add(ut,Gt,fe,re,ye),f.modifyFrames(ut,Re)}function Rt(ut,vt){if(ut=S.getGraphDiv(ut),!S.isPlotDiv(ut))throw new Error("This element is not a Plotly plot: "+ut);var St,Ot,Xt=ut._transitionData._frames,$t=[],de=[];if(!vt)for(vt=[],St=0;St<Xt.length;St++)vt.push(St);for(vt=vt.slice(),vt.sort(),St=vt.length-1;St>=0;St--)Ot=vt[St],$t.push({type:"delete",index:Ot}),de.unshift({type:"insert",index:Ot,value:Xt[Ot]});var Me=f.modifyFrames,Fe=f.modifyFrames,De=[ut,de],Ae=[ut,$t];return v&&v.add(ut,Me,De,Fe,Ae),f.modifyFrames(ut,$t)}function zt(ut){ut=S.getGraphDiv(ut);var vt=ut._fullLayout||{},St=ut._fullData||[];return f.cleanPlot([],{},St,vt),f.purge(ut),g.purge(ut),vt._container&&vt._container.remove(),delete ut._context,ut}function Tt(ut){var vt=ut._fullLayout,St=ut.getBoundingClientRect();if(!S.equalDomRects(St,vt._lastBBox)){var Ot=vt._invTransform=S.inverseTransformMatrix(S.getFullTransformMatrix(ut));vt._invScaleX=Math.sqrt(Ot[0][0]*Ot[0][0]+Ot[0][1]*Ot[0][1]+Ot[0][2]*Ot[0][2]),vt._invScaleY=Math.sqrt(Ot[1][0]*Ot[1][0]+Ot[1][1]*Ot[1][1]+Ot[1][2]*Ot[1][2]),vt._lastBBox=St}}function ft(ut){var vt=M.select(ut),St=ut._fullLayout;if(St._calcInverseTransform=Tt,St._calcInverseTransform(ut),St._container=vt.selectAll(".plot-container").data([0]),St._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),St._paperdiv=St._container.selectAll(".svg-container").data([0]),St._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),St._glcontainer=St._paperdiv.selectAll(".gl-container").data([{}]),St._glcontainer.enter().append("div").classed("gl-container",!0),St._paperdiv.selectAll(".main-svg").remove(),St._paperdiv.select(".modebar-container").remove(),St._paper=St._paperdiv.insert("svg",":first-child").classed("main-svg",!0),St._toppaper=St._paperdiv.append("svg").classed("main-svg",!0),St._modebardiv=St._paperdiv.append("div"),delete St._modeBar,St._hoverpaper=St._paperdiv.append("svg").classed("main-svg",!0),!St._uid){var Ot={};M.selectAll("defs").each(function(){this.id&&(Ot[this.id.split("-")[1]]=1)}),St._uid=S.randstr(Ot)}St._paperdiv.selectAll(".main-svg").attr(y.svgAttrs),St._defs=St._paper.append("defs").attr("id","defs-"+St._uid),St._clips=St._defs.append("g").classed("clips",!0),St._topdefs=St._toppaper.append("defs").attr("id","topdefs-"+St._uid),St._topclips=St._topdefs.append("g").classed("clips",!0),St._bgLayer=St._paper.append("g").classed("bglayer",!0),St._draggers=St._paper.append("g").classed("draglayer",!0);var Xt=St._paper.append("g").classed("layer-below",!0);St._imageLowerLayer=Xt.append("g").classed("imagelayer",!0),St._shapeLowerLayer=Xt.append("g").classed("shapelayer",!0),St._cartesianlayer=St._paper.append("g").classed("cartesianlayer",!0),St._polarlayer=St._paper.append("g").classed("polarlayer",!0),St._smithlayer=St._paper.append("g").classed("smithlayer",!0),St._ternarylayer=St._paper.append("g").classed("ternarylayer",!0),St._geolayer=St._paper.append("g").classed("geolayer",!0),St._funnelarealayer=St._paper.append("g").classed("funnelarealayer",!0),St._pielayer=St._paper.append("g").classed("pielayer",!0),St._iciclelayer=St._paper.append("g").classed("iciclelayer",!0),St._treemaplayer=St._paper.append("g").classed("treemaplayer",!0),St._sunburstlayer=St._paper.append("g").classed("sunburstlayer",!0),St._indicatorlayer=St._toppaper.append("g").classed("indicatorlayer",!0),St._glimages=St._paper.append("g").classed("glimages",!0);var $t=St._toppaper.append("g").classed("layer-above",!0);St._imageUpperLayer=$t.append("g").classed("imagelayer",!0),St._shapeUpperLayer=$t.append("g").classed("shapelayer",!0),St._selectionLayer=St._toppaper.append("g").classed("selectionlayer",!0),St._infolayer=St._toppaper.append("g").classed("infolayer",!0),St._menulayer=St._toppaper.append("g").classed("menulayer",!0),St._zoomlayer=St._toppaper.append("g").classed("zoomlayer",!0),St._hoverlayer=St._hoverpaper.append("g").classed("hoverlayer",!0),St._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),ut.emit("plotly_framework")}U.animate=Mt,U.addFrames=It,U.deleteFrames=Rt,U.addTraces=q,U.deleteTraces=W,U.extendTraces=at,U.moveTraces=Z,U.prependTraces=it,U.newPlot=B,U._doPlot=P,U.purge=zt,U.react=le,U.redraw=z,U.relayout=ht,U.restyle=G,U.setPlotConfig=d,U.update=wt,U._guiRelayout=Pt(ht),U._guiRestyle=Pt(G),U._guiUpdate=Pt(wt),U._storeDirectGUIEdit=Y},72075:function($){var U={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},t={};function M(E,i){for(var S in E){var A=E[S];A.valType?i[S]=A.dflt:(i[S]||(i[S]={}),M(A,i[S]))}}M(U,t),$.exports={configAttributes:U,dfltConfig:t}},86281:function($,U,t){var M=t(73972),E=t(71828),i=t(9012),S=t(10820),A=t(31391),g=t(85594),v=t(72075).configAttributes,e=t(30962),r=E.extendDeepAll,f=E.isPlainObject,n=E.isArrayOrTypedArray,a=E.nestedProperty,o=E.valObjectMeta,h="_isSubplotObj",y="_isLinkedToArray",p="_arrayAttrRegexps",x="_deprecated",s=[h,y,p,x];U.IS_SUBPLOT_OBJ=h,U.IS_LINKED_TO_ARRAY=y,U.DEPRECATED=x,U.UNDERSCORE_ATTRS=s,U.get=function(){var B={};M.allTypes.forEach(function(R){B[R]=k(R)});var O={};return Object.keys(M.transformsRegistry).forEach(function(R){O[R]=b(R)}),{defs:{valObjects:o,metaKeys:s.concat(["description","role","editType","impliedEdits"]),editType:{traces:e.traces,layout:e.layout},impliedEdits:{}},traces:B,layout:_(),transforms:O,frames:P(),animation:l(g),config:l(v)}},U.crawl=function(B,O,R,C){var F=R||0;C=C||"",Object.keys(B).forEach(function(N){var V=B[N];if(s.indexOf(N)===-1){var K=(C?C+".":"")+N;O(V,N,B,F,K),!U.isValObject(V)&&f(V)&&N!=="impliedEdits"&&U.crawl(V,O,F+1,K)}})},U.isValObject=function(B){return B&&B.valType!==void 0},U.findArrayAttributes=function(B){var O=[],R=[],C=[],F,N;function V(W,Z,G,et){R=R.slice(0,et).concat([Z]),C=C.slice(0,et).concat([W&&W._isLinkedToArray]);var nt=W&&(W.valType==="data_array"||W.arrayOk===!0)&&!(R[et-1]==="colorbar"&&(Z==="ticktext"||Z==="tickvals"));nt&&K(F,0,"")}function K(W,Z,G){var et=W[R[Z]],nt=G+R[Z];if(Z===R.length-1)n(et)&&O.push(N+nt);else if(C[Z]){if(Array.isArray(et))for(var X=0;X<et.length;X++)f(et[X])&&K(et[X],Z+1,nt+"["+X+"].")}else f(et)&&K(et,Z+1,nt+".")}F=B,N="",U.crawl(i,V),B._module&&B._module.attributes&&U.crawl(B._module.attributes,V);var Q=B.transforms;if(Q)for(var at=0;at<Q.length;at++){var it=Q[at],q=it._module;q&&(N="transforms["+at+"].",F=it,U.crawl(q.attributes,V))}return O},U.getTraceValObject=function(B,O){var R=O[0],C=1,F,N;if(R==="transforms"){if(O.length===1)return i.transforms;var V=B.transforms;if(!Array.isArray(V)||!V.length)return!1;var K=O[1];if(!T(K)||K>=V.length)return!1;F=(M.transformsRegistry[V[K].type]||{}).attributes,N=F&&F[O[2]],C=3}else{var Q=B._module;if(Q||(Q=(M.modules[B.type||i.type.dflt]||{})._module),!Q)return!1;if(F=Q.attributes,N=F&&F[R],!N){var at=Q.basePlotModule;at&&at.attributes&&(N=at.attributes[R])}N||(N=i[R])}return c(N,O,C)},U.getLayoutValObject=function(B,O){var R=u(B,O[0]);return c(R,O,1)};function u(B,O){var R,C,F,N,V=B._basePlotModules;if(V){var K;for(R=0;R<V.length;R++){if(F=V[R],F.attrRegex&&F.attrRegex.test(O)){if(F.layoutAttrOverrides)return F.layoutAttrOverrides;!K&&F.layoutAttributes&&(K=F.layoutAttributes)}var Q=F.baseLayoutAttrOverrides;if(Q&&O in Q)return Q[O]}if(K)return K}var at=B._modules;if(at){for(R=0;R<at.length;R++)if(N=at[R].layoutAttributes,N&&O in N)return N[O]}for(C in M.componentsRegistry){if(F=M.componentsRegistry[C],F.name==="colorscale"&&O.indexOf("coloraxis")===0)return F.layoutAttributes[O];if(!F.schema&&O===F.name)return F.layoutAttributes}return O in S?S[O]:!1}function c(B,O,R){if(!B)return!1;if(B._isLinkedToArray){if(T(O[R]))R++;else if(R<O.length)return!1}for(;R<O.length;R++){var C=B[O[R]];if(f(C))B=C;else break;if(R===O.length-1)break;if(B._isLinkedToArray){if(R++,!T(O[R]))return!1}else if(B.valType==="info_array"){R++;var F=O[R];if(!T(F))return!1;var N=B.items;if(Array.isArray(N)){if(F>=N.length)return!1;if(B.dimensions===2){if(R++,O.length===R)return B;var V=O[R];if(!T(V))return!1;B=N[F][V]}else B=N[F]}else B=N}}return B}function T(B){return B===Math.round(B)&&B>=0}function k(B){var O,R;O=M.modules[B]._module,R=O.basePlotModule;var C={};C.type=null;var F=r({},i),N=r({},O.attributes);U.crawl(N,function(Q,at,it,q,W){a(F,W).set(void 0),Q===void 0&&a(N,W).set(void 0)}),r(C,F),M.traceIs(B,"noOpacity")&&delete C.opacity,M.traceIs(B,"showLegend")||(delete C.showlegend,delete C.legendgroup),M.traceIs(B,"noHover")&&(delete C.hoverinfo,delete C.hoverlabel),O.selectPoints||delete C.selectedpoints,r(C,N),R.attributes&&r(C,R.attributes),C.type=B;var V={meta:O.meta||{},categories:O.categories||{},animatable:!!O.animatable,type:B,attributes:l(C)};if(O.layoutAttributes){var K={};r(K,O.layoutAttributes),V.layoutAttributes=l(K)}return O.animatable||U.crawl(V,function(Q){U.isValObject(Q)&&"anim"in Q&&delete Q.anim}),V}function _(){var B={},O,R;r(B,S);for(O in M.subplotsRegistry)if(R=M.subplotsRegistry[O],!!R.layoutAttributes)if(Array.isArray(R.attr))for(var C=0;C<R.attr.length;C++)I(B,R,R.attr[C]);else{var F=R.attr==="subplot"?R.name:R.attr;I(B,R,F)}for(O in M.componentsRegistry){R=M.componentsRegistry[O];var N=R.schema;if(N&&(N.subplots||N.layout)){var V=N.subplots;if(V&&V.xaxis&&!V.yaxis)for(var K in V.xaxis)delete B.yaxis[K];delete B.xaxis.shift,delete B.xaxis.autoshift}else R.name==="colorscale"?r(B,R.layoutAttributes):R.layoutAttributes&&z(B,R.layoutAttributes,R.name)}return{layoutAttributes:l(B)}}function b(B){var O=M.transformsRegistry[B],R=r({},O.attributes);return Object.keys(M.componentsRegistry).forEach(function(C){var F=M.componentsRegistry[C];F.schema&&F.schema.transforms&&F.schema.transforms[B]&&Object.keys(F.schema.transforms[B]).forEach(function(N){z(R,F.schema.transforms[B][N],N)})}),{attributes:l(R)}}function P(){var B={frames:r({},A)};return l(B),B.frames}function l(B){return d(B),L(B),w(B),B}function d(B){function O(C){return{valType:"string",editType:"none"}}function R(C,F,N){U.isValObject(C)?(C.arrayOk===!0||C.valType==="data_array")&&(N[F+"src"]=O()):f(C)&&(C.role="object")}U.crawl(B,R)}function L(B){function O(R,C,F){if(R){var N=R[y];N&&(delete R[y],F[C]={items:{}},F[C].items[N]=R,F[C].role="object")}}U.crawl(B,O)}function w(B){function O(R){for(var C in R)if(f(R[C]))O(R[C]);else if(Array.isArray(R[C]))for(var F=0;F<R[C].length;F++)O(R[C][F]);else R[C]instanceof RegExp&&(R[C]=R[C].toString())}O(B)}function I(B,O,R){var C=a(B,R),F=r({},O.layoutAttributes);F[h]=!0,C.set(F)}function z(B,O,R){var C=a(B,R);C.set(r(C.get()||{},O))}},44467:function($,U,t){var M=t(71828),E=t(9012),i="templateitemname",S={name:{valType:"string",editType:"none"}};S[i]={valType:"string",editType:"calc"},U.templatedArray=function(v,e){return e._isLinkedToArray=v,e.name=S.name,e[i]=S[i],e},U.traceTemplater=function(v){var e={},r,f;for(r in v)f=v[r],Array.isArray(f)&&f.length&&(e[r]=0);function n(a){r=M.coerce(a,{},E,"type");var o={type:r,_template:null};if(r in e){f=v[r];var h=e[r]%f.length;e[r]++,o._template=f[h]}return o}return{newTrace:n}},U.newContainer=function(v,e,r){var f=v._template,n=f&&(f[e]||r&&f[r]);M.isPlainObject(n)||(n=null);var a=v[e]={_template:n};return a},U.arrayTemplater=function(v,e,r){var f=v._template,n=f&&f[g(e)],a=f&&f[e];(!Array.isArray(a)||!a.length)&&(a=[]);var o={};function h(p){var x={name:p.name,_input:p},s=x[i]=p[i];if(!A(s))return x._template=n,x;for(var u=0;u<a.length;u++){var c=a[u];if(c.name===s)return o[s]=1,x._template=c,x}return x[r]=p[r]||!1,x._template=!1,x}function y(){for(var p=[],x=0;x<a.length;x++){var s=a[x],u=s.name;if(A(u)&&!o[u]){var c={_template:s,name:u,_input:{_templateitemname:u}};c[i]=s[i],p.push(c),o[u]=1}}return p}return{newItem:h,defaultItems:y}};function A(v){return v&&typeof v=="string"}function g(v){var e=v.length-1;return v.charAt(e)!=="s"&&M.warn("bad argument to arrayDefaultKey: "+v),v.substr(0,v.length-1)+"defaults"}U.arrayDefaultKey=g,U.arrayEditor=function(v,e,r){var f=(M.nestedProperty(v,e).get()||[]).length,n=r._index,a=n>=f&&(r._input||{})._templateitemname;a&&(n=f);var o=e+"["+n+"]",h;function y(){h={},a&&(h[o]={},h[o][i]=a)}y();function p(c,T){h[c]=T}function x(c,T){a?M.nestedProperty(h[o],c).set(T):h[o+"."+c]=T}function s(){var c=h;return y(),c}function u(c,T){c&&x(c,T);var k=s();for(var _ in k)M.nestedProperty(v,_).set(k[_])}return{modifyBase:p,modifyItem:x,getUpdateObj:s,applyUpdate:u}}},61549:function($,U,t){var M=t(39898),E=t(73972),i=t(74875),S=t(71828),A=t(63893),g=t(33306),v=t(7901),e=t(91424),r=t(92998),f=t(64168),n=t(89298),a=t(18783),o=t(99082),h=o.enforce,y=o.clean,p=t(71739).doAutoRange,x="start",s="middle",u="end";U.layoutStyles=function(R){return S.syncOrAsync([i.doAutoMargin,T],R)};function c(R,C,F){for(var N=0;N<F.length;N++){var V=F[N][0],K=F[N][1];if(!(V[0]>=R[1]||V[1]<=R[0])&&K[0]<C[1]&&K[1]>C[0])return!0}return!1}function T(R){var C=R._fullLayout,F=C._size,N=F.p,V=n.list(R,"",!0),K,Q,at,it,q,W;if(C._paperdiv.style({width:R._context.responsive&&C.autosize&&!R._context._hasZeroWidth&&!R.layout.width?"100%":C.width+"px",height:R._context.responsive&&C.autosize&&!R._context._hasZeroHeight&&!R.layout.height?"100%":C.height+"px"}).selectAll(".main-svg").call(e.setSize,C.width,C.height),R._context.setBackground(R,C.paper_bgcolor),U.drawMainTitle(R),f.manage(R),!C._has("cartesian"))return i.previousPromises(R);function Z(ft,ut,vt){var St=ft._lw/2;if(ft._id.charAt(0)==="x"){if(ut){if(vt==="top")return ut._offset-N-St}else return F.t+F.h*(1-(ft.position||0))+St%1;return ut._offset+ut._length+N+St}if(ut){if(vt==="right")return ut._offset+ut._length+N+St}else return F.l+F.w*(ft.position||0)+St%1;return ut._offset-N-St}for(K=0;K<V.length;K++){it=V[K];var G=it._anchorAxis;it._linepositions={},it._lw=e.crispRound(R,it.linewidth,1),it._mainLinePosition=Z(it,G,it.side),it._mainMirrorPosition=it.mirror&&G?Z(it,G,a.OPPOSITE_SIDE[it.side]):null}var et=[],nt=[],X=[],Y=v.opacity(C.paper_bgcolor)===1&&v.opacity(C.plot_bgcolor)===1&&C.paper_bgcolor===C.plot_bgcolor;for(Q in C._plots)if(at=C._plots[Q],at.mainplot)at.bg&&at.bg.remove(),at.bg=void 0;else{var ot=at.xaxis.domain,rt=at.yaxis.domain,ht=at.plotgroup;if(c(ot,rt,X)){var pt=ht.node(),yt=at.bg=S.ensureSingle(ht,"rect","bg");pt.insertBefore(yt.node(),pt.childNodes[0]),nt.push(Q)}else ht.select("rect.bg").remove(),X.push([ot,rt]),Y||(et.push(Q),nt.push(Q))}var xt=C._bgLayer.selectAll(".bg").data(et);for(xt.enter().append("rect").classed("bg",!0),xt.exit().remove(),xt.each(function(ft){C._plots[ft].bg=M.select(this)}),K=0;K<nt.length;K++)at=C._plots[nt[K]],q=at.xaxis,W=at.yaxis,at.bg&&q._offset!==void 0&&W._offset!==void 0&&at.bg.call(e.setRect,q._offset-N,W._offset-N,q._length+2*N,W._length+2*N).call(v.fill,C.plot_bgcolor).style("stroke-width",0);if(!C._hasOnlyLargeSploms)for(Q in C._plots){at=C._plots[Q],q=at.xaxis,W=at.yaxis;var Ft=at.clipId="clip"+C._uid+Q+"plot",Et=S.ensureSingleById(C._clips,"clipPath",Ft,function(ft){ft.classed("plotclip",!0).append("rect")});at.clipRect=Et.select("rect").attr({width:q._length,height:W._length}),e.setTranslate(at.plot,q._offset,W._offset);var mt,gt;at._hasClipOnAxisFalse?(mt=null,gt=Ft):(mt=Ft,gt=null),e.setClipUrl(at.plot,mt,R),at.layerClipId=gt}var wt,Pt,Bt,kt,jt,Ht,Vt,ee,te,ae,le,ce,pe;function we(ft){return"M"+wt+","+ft+"H"+Pt}function ve(ft){return"M"+q._offset+","+ft+"h"+q._length}function Mt(ft){return"M"+ft+","+ee+"V"+Vt}function It(ft){return W._shift!==void 0&&(ft+=W._shift),"M"+ft+","+W._offset+"v"+W._length}function Rt(ft,ut,vt){if(!ft.showline||Q!==ft._mainSubplot)return"";if(!ft._anchorAxis)return vt(ft._mainLinePosition);var St=ut(ft._mainLinePosition);return ft.mirror&&(St+=ut(ft._mainMirrorPosition)),St}for(Q in C._plots){at=C._plots[Q],q=at.xaxis,W=at.yaxis;var zt="M0,0";k(q,Q)&&(jt=b(q,"left",W,V),wt=q._offset-(jt?N+jt:0),Ht=b(q,"right",W,V),Pt=q._offset+q._length+(Ht?N+Ht:0),Bt=Z(q,W,"bottom"),kt=Z(q,W,"top"),pe=!q._anchorAxis||Q!==q._mainSubplot,pe&&(q.mirror==="allticks"||q.mirror==="all")&&(q._linepositions[Q]=[Bt,kt]),zt=Rt(q,we,ve),pe&&q.showline&&(q.mirror==="all"||q.mirror==="allticks")&&(zt+=we(Bt)+we(kt)),at.xlines.style("stroke-width",q._lw+"px").call(v.stroke,q.showline?q.linecolor:"rgba(0,0,0,0)")),at.xlines.attr("d",zt);var Tt="M0,0";k(W,Q)&&(le=b(W,"bottom",q,V),Vt=W._offset+W._length+(le?N:0),ce=b(W,"top",q,V),ee=W._offset-(ce?N:0),te=Z(W,q,"left"),ae=Z(W,q,"right"),pe=!W._anchorAxis||Q!==W._mainSubplot,pe&&(W.mirror==="allticks"||W.mirror==="all")&&(W._linepositions[Q]=[te,ae]),Tt=Rt(W,Mt,It),pe&&W.showline&&(W.mirror==="all"||W.mirror==="allticks")&&(Tt+=Mt(te)+Mt(ae)),at.ylines.style("stroke-width",W._lw+"px").call(v.stroke,W.showline?W.linecolor:"rgba(0,0,0,0)")),at.ylines.attr("d",Tt)}return n.makeClipPaths(R),i.previousPromises(R)}function k(R,C){return(R.ticks||R.showline)&&(C===R._mainSubplot||R.mirror==="all"||R.mirror==="allticks")}function _(R,C,F){if(!F.showline||!F._lw)return!1;if(F.mirror==="all"||F.mirror==="allticks")return!0;var N=F._anchorAxis;if(!N)return!1;var V=a.FROM_BL[C];return F.side===C?N.domain[V]===R.domain[V]:F.mirror&&N.domain[1-V]===R.domain[1-V]}function b(R,C,F,N){if(_(R,C,F))return F._lw;for(var V=0;V<N.length;V++){var K=N[V];if(K._mainAxis===F._mainAxis&&_(R,C,K))return K._lw}return 0}U.drawMainTitle=function(R){var C=R._fullLayout.title,F=R._fullLayout,N=B(F),V=O(F),K=I(F,V),Q=w(F,N);if(r.draw(R,"gtitle",{propContainer:F,propName:"title.text",placeholder:F._dfltTitle.plot,attributes:{x:Q,y:K,"text-anchor":N,dy:V}}),C.text&&C.automargin){var at=M.selectAll(".gtitle"),it=e.bBox(at.node()).height,q=d(R,C,it);q>0&&(L(R,K,q,it),at.attr({x:Q,y:K,"text-anchor":N,dy:z(C.yanchor)}).call(A.positionText,Q,K))}};function P(R,C,F,N,V){var K=C.yref==="paper"?R._fullLayout._size.h:R._fullLayout.height,Q=S.isTopAnchor(C)?N:N-V,at=F==="b"?K-Q:Q;return S.isTopAnchor(C)&&F==="t"||S.isBottomAnchor(C)&&F==="b"?!1:at<V}function l(R,C,F,N,V){var K=0;return F==="middle"&&(K+=V/2),R==="t"?(F==="top"&&(K+=V),K+=N-C*N):(F==="bottom"&&(K+=V),K+=C*N),K}function d(R,C,F){var N=C.y,V=C.yanchor,K=N>.5?"t":"b",Q=R._fullLayout.margin[K],at=0;return C.yref==="paper"?at=F+C.pad.t+C.pad.b:C.yref==="container"&&(at=l(K,N,V,R._fullLayout.height,F)+C.pad.t+C.pad.b),at>Q?at:0}function L(R,C,F,N){var V="title.automargin",K=R._fullLayout.title,Q=K.y>.5?"t":"b",at={x:K.x,y:K.y,t:0,b:0},it={};K.yref==="paper"&&P(R,K,Q,C,N)?at[Q]=F:K.yref==="container"&&(it[Q]=F,R._fullLayout._reservedMargin[V]=it),i.allowAutoMargin(R,V),i.autoMargin(R,V,at)}function w(R,C){var F=R.title,N=R._size,V=0;switch(C===x?V=F.pad.l:C===u&&(V=-F.pad.r),F.xref){case"paper":return N.l+N.w*F.x+V;case"container":default:return R.width*F.x+V}}function I(R,C){var F=R.title,N=R._size,V=0;if(C==="0em"||!C?V=-F.pad.b:C===a.CAP_SHIFT+"em"&&(V=F.pad.t),F.y==="auto")return N.t/2;switch(F.yref){case"paper":return N.t+N.h-N.h*F.y+V;case"container":default:return R.height-R.height*F.y+V}}function z(R){return R==="top"?a.CAP_SHIFT+.3+"em":R==="bottom"?"-0.3em":a.MID_SHIFT+"em"}function B(R){var C=R.title,F=s;return S.isRightAnchor(C)?F=u:S.isLeftAnchor(C)&&(F=x),F}function O(R){var C=R.title,F="0em";return S.isTopAnchor(C)?F=a.CAP_SHIFT+"em":S.isMiddleAnchor(C)&&(F=a.MID_SHIFT+"em"),F}U.doTraceStyle=function(R){var C=R.calcdata,F=[],N;for(N=0;N<C.length;N++){var V=C[N],K=V[0]||{},Q=K.trace||{},at=Q._module||{},it=at.arraysToCalcdata;it&&it(V,Q);var q=at.editStyle;q&&F.push({fn:q,cd0:K})}if(F.length){for(N=0;N<F.length;N++){var W=F[N];W.fn(R,W.cd0)}g(R),U.redrawReglTraces(R)}return i.style(R),E.getComponentMethod("legend","draw")(R),i.previousPromises(R)},U.doColorBars=function(R){return E.getComponentMethod("colorbar","draw")(R),i.previousPromises(R)},U.layoutReplot=function(R){var C=R.layout;return R.layout=void 0,E.call("_doPlot",R,"",C)},U.doLegend=function(R){return E.getComponentMethod("legend","draw")(R),i.previousPromises(R)},U.doTicksRelayout=function(R){return n.draw(R,"redraw"),R._fullLayout._hasOnlyLargeSploms&&(E.subplotsRegistry.splom.updateGrid(R),g(R),U.redrawReglTraces(R)),U.drawMainTitle(R),i.previousPromises(R)},U.doModeBar=function(R){var C=R._fullLayout;f.manage(R);for(var F=0;F<C._basePlotModules.length;F++){var N=C._basePlotModules[F].updateFx;N&&N(R)}return i.previousPromises(R)},U.doCamera=function(R){for(var C=R._fullLayout,F=C._subplots.gl3d,N=0;N<F.length;N++){var V=C[F[N]],K=V._scene;K.setViewport(V)}},U.drawData=function(R){var C=R._fullLayout;g(R);for(var F=C._basePlotModules,N=0;N<F.length;N++)F[N].plot(R);return U.redrawReglTraces(R),i.style(R),E.getComponentMethod("selections","draw")(R),E.getComponentMethod("shapes","draw")(R),E.getComponentMethod("annotations","draw")(R),E.getComponentMethod("images","draw")(R),C._replotting=!1,i.previousPromises(R)},U.redrawReglTraces=function(R){var C=R._fullLayout;if(C._has("regl")){var F=R._fullData,N=[],V=[],K,Q;for(C._hasOnlyLargeSploms&&C._splomGrid.draw(),K=0;K<F.length;K++){var at=F[K];at.visible===!0&&at._length!==0&&(at.type==="splom"?C._splomScenes[at.uid].draw():at.type==="scattergl"?S.pushUnique(N,at.xaxis+at.yaxis):at.type==="scatterpolargl"&&S.pushUnique(V,at.subplot))}for(K=0;K<N.length;K++)Q=C._plots[N[K]],Q._scene&&Q._scene.draw();for(K=0;K<V.length;K++)Q=C[V[K]]._subplot,Q._scene&&Q._scene.draw()}},U.doAutoRangeAndConstraints=function(R){for(var C=n.list(R,"",!0),F,N={},V=0;V<C.length;V++)if(F=C[V],!N[F._id]){N[F._id]=1,y(R,F),p(R,F);var K=F._matchGroup;if(K)for(var Q in K){var at=n.getFromId(R,Q);p(R,at,F.range),N[Q]=1}}h(R)},U.finalDraw=function(R){E.getComponentMethod("rangeslider","draw")(R),E.getComponentMethod("rangeselector","draw")(R)},U.drawMarginPushers=function(R){E.getComponentMethod("legend","draw")(R),E.getComponentMethod("rangeselector","draw")(R),E.getComponentMethod("sliders","draw")(R),E.getComponentMethod("updatemenus","draw")(R),E.getComponentMethod("colorbar","draw")(R)}},96318:function($,U,t){var M=t(71828),E=M.isPlainObject,i=t(86281),S=t(74875),A=t(9012),g=t(44467),v=t(72075).dfltConfig;U.makeTemplate=function(p){p=M.isPlainObject(p)?p:M.getGraphDiv(p),p=M.extendDeep({_context:v},{data:p.data,layout:p.layout}),S.supplyDefaults(p);var x=p.data||[],s=p.layout||{};s._basePlotModules=p._fullLayout._basePlotModules,s._modules=p._fullLayout._modules;var u={data:{},layout:{}};x.forEach(function(w){var I={};f(w,I,a.bind(null,w));var z=M.coerce(w,{},A,"type"),B=u.data[z];B||(B=u.data[z]=[]),B.push(I)}),f(s,u.layout,n.bind(null,s)),delete u.layout.template;var c=s.template;if(E(c)){var T=c.layout,k,_,b,P,l,d;E(T)&&e(T,u.layout);var L=c.data;if(E(L)){for(_ in u.data)if(b=L[_],Array.isArray(b)){for(l=u.data[_],d=l.length,P=b.length,k=0;k<d;k++)e(b[k%P],l[k]);for(k=d;k<P;k++)l.push(M.extendDeep({},b[k]))}for(_ in L)_ in u.data||(u.data[_]=M.extendDeep([],L[_]))}}return u};function e(p,x){p=M.extendDeep({},p);var s=Object.keys(p).sort(),u,c;function T(l,d,L){if(E(d)&&E(l))e(l,d);else if(Array.isArray(d)&&Array.isArray(l)){var w=g.arrayTemplater({_template:p},L);for(c=0;c<d.length;c++){var I=d[c],z=w.newItem(I)._template;z&&e(z,I)}var B=w.defaultItems();for(c=0;c<B.length;c++)d.push(B[c]._template);for(c=0;c<d.length;c++)delete d[c].templateitemname}}for(u=0;u<s.length;u++){var k=s[u],_=p[k];if(k in x?T(_,x[k],k):x[k]=_,r(k)===k)for(var b in x){var P=r(b);b!==P&&P===k&&!(b in p)&&T(_,x[b],k)}}}function r(p){return p.replace(/[0-9]+$/,"")}function f(p,x,s,u,c){var T=c&&s(c);for(var k in p){var _=p[k],b=o(p,k,u),P=o(p,k,c),l=s(P);if(!l){var d=r(k);d!==k&&(P=o(p,d,c),l=s(P))}if(!(T&&T===l)&&!(!l||l._noTemplating||l.valType==="data_array"||l.arrayOk&&Array.isArray(_)))if(!l.valType&&E(_))f(_,x,s,b,P);else if(l._isLinkedToArray&&Array.isArray(_))for(var L=!1,w=0,I={},z=0;z<_.length;z++){var B=_[z];if(E(B)){var O=B.name;if(O)I[O]||(f(B,x,s,o(_,w,b),o(_,w,P)),w++,I[O]=1);else if(!L){var R=g.arrayDefaultKey(k),C=o(p,R,u),F=o(_,w,b);f(B,x,s,F,o(_,w,P));var N=M.nestedProperty(x,F),V=M.nestedProperty(x,C);V.set(N.get()),N.set(null),L=!0}}}else{var K=M.nestedProperty(x,b);K.set(_)}}}function n(p,x){return i.getLayoutValObject(p,M.nestedProperty({},x).parts)}function a(p,x){return i.getTraceValObject(p,M.nestedProperty({},x).parts)}function o(p,x,s){var u;return s?Array.isArray(p)?u=s+"["+x+"]":u=s+"."+x:u=x,u}U.validateTemplate=function(p,x){var s=M.extendDeep({},{_context:v,data:p.data,layout:p.layout}),u=s.layout||{};E(x)||(x=u.template||{});var c=x.layout,T=x.data,k=[];s.layout=u,s.layout.template=x,S.supplyDefaults(s);var _=s._fullLayout,b=s._fullData,P={};function l(C,F){for(var N in C)if(N.charAt(0)!=="_"&&E(C[N])){var V=r(N),K=[],Q;for(Q=0;Q<F.length;Q++)K.push(o(C,N,F[Q])),V!==N&&K.push(o(C,V,F[Q]));for(Q=0;Q<K.length;Q++)P[K[Q]]=1;l(C[N],K)}}function d(C,F){for(var N in C)if(N.indexOf("defaults")===-1&&E(C[N])){var V=o(C,N,F);P[V]?d(C[N],V):k.push({code:"unused",path:V})}}if(E(c)?(l(_,["layout"]),d(c,"layout")):k.push({code:"layout"}),!E(T))k.push({code:"data"});else{for(var L={},w,I=0;I<b.length;I++){var z=b[I];w=z.type,L[w]=(L[w]||0)+1,z._fullInput._template||k.push({code:"missing",index:z._fullInput.index,traceType:w})}for(w in T){var B=T[w].length,O=L[w]||0;B>O?k.push({code:"unused",traceType:w,templateCount:B,dataCount:O}):O>B&&k.push({code:"reused",traceType:w,templateCount:B,dataCount:O})}}function R(C,F){for(var N in C)if(N.charAt(0)!=="_"){var V=C[N],K=o(C,N,F);E(V)?(Array.isArray(C)&&V._template===!1&&V.templateitemname&&k.push({code:"missing",path:K,templateitemname:V.templateitemname}),R(V,K)):Array.isArray(V)&&h(V)&&R(V,K)}}if(R({data:b,layout:_},""),k.length)return k.map(y)};function h(p){for(var x=0;x<p.length;x++)if(E(p[x]))return!0}function y(p){var x;switch(p.code){case"data":x="The template has no key data.";break;case"layout":x="The template has no key layout.";break;case"missing":p.path?x="There are no templates for item "+p.path+" with name "+p.templateitemname:x="There are no templates for trace "+p.index+", of type "+p.traceType+".";break;case"unused":p.path?x="The template item at "+p.path+" was not used in constructing the plot.":p.dataCount?x="Some of the templates of type "+p.traceType+" were not used. The template has "+p.templateCount+" traces, the data only has "+p.dataCount+" of this type.":x="The template has "+p.templateCount+" traces of type "+p.traceType+" but there are none in the data.";break;case"reused":x="Some of the templates of type "+p.traceType+" were used more than once. The template has "+p.templateCount+" traces, the data has "+p.dataCount+" of this type.";break}return p.msg=x,p}},403:function($,U,t){var M=t(92770),E=t(72391),i=t(74875),S=t(71828),A=t(25095),g=t(5900),v=t(70942),e=t(11506).version,r={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function f(n,a){a=a||{};var o,h,y,p;S.isPlainObject(n)?(o=n.data||[],h=n.layout||{},y=n.config||{},p={}):(n=S.getGraphDiv(n),o=S.extendDeep([],n.data),h=S.extendDeep({},n.layout),y=n._context,p=n._fullLayout||{});function x(O){return!(O in a)||S.validate(a[O],r[O])}if(!x("width")&&a.width!==null||!x("height")&&a.height!==null)throw new Error("Height and width should be pixel values.");if(!x("format"))throw new Error("Export format is not "+S.join2(r.format.values,", "," or ")+".");var s={};function u(O,R){return S.coerce(a,s,r,O,R)}var c=u("format"),T=u("width"),k=u("height"),_=u("scale"),b=u("setBackground"),P=u("imageDataOnly"),l=document.createElement("div");l.style.position="absolute",l.style.left="-5000px",document.body.appendChild(l);var d=S.extendFlat({},h);T?d.width=T:a.width===null&&M(p.width)&&(d.width=p.width),k?d.height=k:a.height===null&&M(p.height)&&(d.height=p.height);var L=S.extendFlat({},y,{_exportedPlot:!0,staticPlot:!0,setBackground:b}),w=A.getRedrawFunc(l);function I(){return new Promise(function(O){setTimeout(O,A.getDelay(l._fullLayout))})}function z(){return new Promise(function(O,R){var C=g(l,c,_),F=l._fullLayout.width,N=l._fullLayout.height;function V(){E.purge(l),document.body.removeChild(l)}if(c==="full-json"){var K=i.graphJson(l,!1,"keepdata","object",!0,!0);return K.version=e,K=JSON.stringify(K),V(),O(P?K:A.encodeJSON(K))}if(V(),c==="svg")return O(P?C:A.encodeSVG(C));var Q=document.createElement("canvas");Q.id=S.randstr(),v({format:c,width:F,height:N,scale:_,canvas:Q,svg:C,promise:!0}).then(O).catch(R)})}function B(O){return P?O.replace(A.IMAGE_URL_PREFIX,""):O}return new Promise(function(O,R){E.newPlot(l,o,d,L).then(w).then(I).then(z).then(function(C){O(B(C))}).catch(function(C){R(C)})})}$.exports=f},84936:function($,U,t){var M=t(71828),E=t(74875),i=t(86281),S=t(72075).dfltConfig,A=M.isPlainObject,g=Array.isArray,v=M.isArrayOrTypedArray;$.exports=function(s,u){s===void 0&&(s=[]),u===void 0&&(u={});var c=i.get(),T=[],k={_context:M.extendFlat({},S)},_,b;g(s)?(k.data=M.extendDeep([],s),_=s):(k.data=[],_=[],T.push(a("array","data"))),A(u)?(k.layout=M.extendDeep({},u),b=u):(k.layout={},b={},arguments.length>1&&T.push(a("object","layout"))),E.supplyDefaults(k);for(var P=k._fullData,l=_.length,d=0;d<l;d++){var L=_[d],w=["data",d];if(!A(L)){T.push(a("object",w));continue}var I=P[d],z=I.type,B=c.traces[z].attributes;B.type={valType:"enumerated",values:[z]},I.visible===!1&&L.visible!==!1&&T.push(a("invisible",w)),e(L,I,B,T,w);var O=L.transforms,R=I.transforms;if(O){g(O)||T.push(a("array",w,["transforms"])),w.push("transforms");for(var C=0;C<O.length;C++){var F=["transforms",C],N=O[C].type;if(!A(O[C])){T.push(a("object",w,F));continue}var V=c.transforms[N]?c.transforms[N].attributes:{};V.type={valType:"enumerated",values:Object.keys(c.transforms)},e(O[C],R[C],V,T,w,F)}}}var K=k._fullLayout,Q=r(c,P);return e(b,K,Q,T,"layout"),T.length===0?void 0:T};function e(s,u,c,T,k,_){_=_||[];for(var b=Object.keys(s),P=0;P<b.length;P++){var l=b[P];if(l!=="transforms"){var d=_.slice();d.push(l);var L=s[l],w=u[l],I=h(c,l),z=(I||{}).valType,B=z==="info_array",O=z==="colorscale",R=(I||{}).items;if(!o(c,l))T.push(a("schema",k,d));else if(A(L)&&A(w)&&z!=="any")e(L,w,I,T,k,d);else if(B&&g(L)){L.length>w.length&&T.push(a("unused",k,d.concat(w.length)));var C=w.length,F=Array.isArray(R);F&&(C=Math.min(C,R.length));var N,V,K,Q,at;if(I.dimensions===2)for(V=0;V<C;V++)if(g(L[V])){L[V].length>w[V].length&&T.push(a("unused",k,d.concat(V,w[V].length)));var it=w[V].length;for(N=0;N<(F?Math.min(it,R[V].length):it);N++)K=F?R[V][N]:R,Q=L[V][N],at=w[V][N],M.validate(Q,K)?at!==Q&&at!==+Q&&T.push(a("dynamic",k,d.concat(V,N),Q,at)):T.push(a("value",k,d.concat(V,N),Q))}else T.push(a("array",k,d.concat(V),L[V]));else for(V=0;V<C;V++)K=F?R[V]:R,Q=L[V],at=w[V],M.validate(Q,K)?at!==Q&&at!==+Q&&T.push(a("dynamic",k,d.concat(V),Q,at)):T.push(a("value",k,d.concat(V),Q))}else if(I.items&&!B&&g(L)){var q=R[Object.keys(R)[0]],W=[],Z,G;for(Z=0;Z<w.length;Z++){var et=w[Z]._index||Z;if(G=d.slice(),G.push(et),A(L[et])&&A(w[Z])){W.push(et);var nt=L[et],X=w[Z];A(nt)&&nt.visible!==!1&&X.visible===!1?T.push(a("invisible",k,G)):e(nt,X,q,T,k,G)}}for(Z=0;Z<L.length;Z++)G=d.slice(),G.push(Z),A(L[Z])?W.indexOf(Z)===-1&&T.push(a("unused",k,G)):T.push(a("object",k,G,L[Z]))}else!A(L)&&A(w)?T.push(a("object",k,d,L)):!v(L)&&v(w)&&!B&&!O?T.push(a("array",k,d,L)):l in u?M.validate(L,I)?I.valType==="enumerated"&&(I.coerceNumber&&L!==+w||L!==w)&&T.push(a("dynamic",k,d,L,w)):T.push(a("value",k,d,L)):T.push(a("unused",k,d,L))}}return T}function r(s,u){for(var c=s.layout.layoutAttributes,T=0;T<u.length;T++){var k=u[T],_=s.traces[k.type],b=_.layoutAttributes;b&&(k.subplot?M.extendFlat(c[_.attributes.subplot.dflt],b):M.extendFlat(c,b))}return c}var f={object:function(s,u){var c;return s==="layout"&&u===""?c="The layout argument":s[0]==="data"&&u===""?c="Trace "+s[1]+" in the data argument":c=n(s)+"key "+u,c+" must be linked to an object container"},array:function(s,u){var c;return s==="data"?c="The data argument":c=n(s)+"key "+u,c+" must be linked to an array container"},schema:function(s,u){return n(s)+"key "+u+" is not part of the schema"},unused:function(s,u,c){var T=A(c)?"container":"key";return n(s)+T+" "+u+" did not get coerced"},dynamic:function(s,u,c,T){return[n(s)+"key",u,"(set to '"+c+"')","got reset to","'"+T+"'","during defaults."].join(" ")},invisible:function(s,u){return(u?n(s)+"item "+u:"Trace "+s[1])+" got defaulted to be not visible"},value:function(s,u,c){return[n(s)+"key "+u,"is set to an invalid value ("+c+")"].join(" ")}};function n(s){return g(s)?"In data trace "+s[1]+", ":"In "+s+", "}function a(s,u,c,T,k){c=c||"";var _,b;g(u)?(_=u[0],b=u[1]):(_=u,b=null);var P=x(c),l=f[s](u,P,T,k);return M.log(l),{code:s,container:_,trace:b,path:c,astr:P,msg:l}}function o(s,u){var c=p(u),T=c.keyMinusId,k=c.id;return T in s&&s[T]._isSubplotObj&&k?!0:u in s}function h(s,u){if(u in s)return s[u];var c=p(u);return s[c.keyMinusId]}var y=M.counterRegex("([a-z]+)");function p(s){var u=s.match(y);return{keyMinusId:u&&u[1],id:u&&u[2]}}function x(s){if(!g(s))return String(s);for(var u="",c=0;c<s.length;c++){var T=s[c];typeof T=="number"?u=u.substr(0,u.length-1)+"["+T+"]":u+=T,c<s.length-1&&(u+=".")}return u}},85594:function($){$.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},85501:function($,U,t){var M=t(71828),E=t(44467);$.exports=function(i,S,A){var g=A.name,v=A.inclusionAttr||"visible",e=S[g],r=M.isArrayOrTypedArray(i[g])?i[g]:[],f=S[g]=[],n=E.arrayTemplater(S,g,v),a,o;for(a=0;a<r.length;a++){var h=r[a];M.isPlainObject(h)?o=n.newItem(h):(o=n.newItem({}),o[v]=!1),o._index=a,o[v]!==!1&&A.handleItemDefaults(h,o,S,A),f.push(o)}var y=n.defaultItems();for(a=0;a<y.length;a++)o=y[a],o._index=f.length,A.handleItemDefaults({},o,S,A,{}),f.push(o);if(M.isArrayOrTypedArray(e)){var p=Math.min(e.length,f.length);for(a=0;a<p;a++)M.relinkPrivateKeys(f[a],e[a])}return f}},9012:function($,U,t){var M=t(41940),E=t(77914);$.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:M({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:E.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},42973:function($,U,t){var M=t(92770),E=t(71828),i=E.dateTime2ms,S=E.incrementMonth,A=t(50606),g=A.ONEAVGMONTH;$.exports=function(v,e,r,f){if(e.type!=="date")return{vals:f};var n=v[r+"periodalignment"];if(!n)return{vals:f};var a=v[r+"period"],o;if(M(a)){if(a=+a,a<=0)return{vals:f}}else if(typeof a=="string"&&a.charAt(0)==="M"){var h=+a.substring(1);if(h>0&&Math.round(h)===h)o=h;else return{vals:f}}for(var y=e.calendar,p=n==="start",x=n==="end",s=v[r+"period0"],u=i(s,y)||0,c=[],T=[],k=[],_=f.length,b=0;b<_;b++){var P=f[b],l,d,L;if(o){for(l=Math.round((P-u)/(o*g)),L=S(u,o*l,y);L>P;)L=S(L,-o,y);for(;L<=P;)L=S(L,o,y);d=S(L,-o,y)}else{for(l=Math.round((P-u)/a),L=u+l*a;L>P;)L-=a;for(;L<=P;)L+=a;d=L-a}c[b]=p?d:x?L:(d+L)/2,T[b]=d,k[b]=L}return{vals:c,starts:T,ends:k}}},89502:function($){$.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},71739:function($,U,t){var M=t(39898),E=t(92770),i=t(71828),S=t(50606).FP_SAFE,A=t(73972),g=t(91424),v=t(41675),e=v.getFromId,r=v.isLinked;$.exports={getAutoRange:f,makePadFn:a,doAutoRange:p,findExtremes:x,concatExtremes:y};function f(b,P){var l,d,L=[],w=b._fullLayout,I=a(w,P,0),z=a(w,P,1),B=y(b,P),O=B.min,R=B.max;if(O.length===0||R.length===0)return i.simpleMap(P.range,P.r2l);var C=O[0].val,F=R[0].val;for(l=1;l<O.length&&C===F;l++)C=Math.min(C,O[l].val);for(l=1;l<R.length&&C===F;l++)F=Math.max(F,R[l].val);var N=!1;if(P.range){var V=i.simpleMap(P.range,P.r2l);N=V[1]<V[0]}P.autorange==="reversed"&&(N=!0,P.autorange=!0);var K=P.rangemode,Q=K==="tozero",at=K==="nonnegative",it=P._length,q=it/10,W=0,Z,G,et,nt,X,Y;for(l=0;l<O.length;l++)for(Z=O[l],d=0;d<R.length;d++)G=R[d],Y=G.val-Z.val-n(P,Z.val,G.val),Y>0&&(X=it-I(Z)-z(G),X>q?Y/X>W&&(et=Z,nt=G,W=Y/X):Y/it>W&&(et={val:Z.val,nopad:1},nt={val:G.val,nopad:1},W=Y/it));function ot(xt,Ft){return Math.max(xt,z(Ft))}if(C===F){var rt=C-1,ht=C+1;if(Q)if(C===0)L=[0,1];else{var pt=(C>0?R:O).reduce(ot,0),yt=C/(1-Math.min(.5,pt/it));L=C>0?[0,yt]:[yt,0]}else at?L=[Math.max(0,rt),Math.max(1,ht)]:L=[rt,ht]}else Q?(et.val>=0&&(et={val:0,nopad:1}),nt.val<=0&&(nt={val:0,nopad:1})):at&&(et.val-W*I(et)<0&&(et={val:0,nopad:1}),nt.val<=0&&(nt={val:1,nopad:1})),W=(nt.val-et.val-n(P,Z.val,G.val))/(it-I(et)-z(nt)),L=[et.val-W*I(et),nt.val+W*z(nt)];return N&&L.reverse(),i.simpleMap(L,P.l2r||Number)}function n(b,P,l){var d=0;if(b.rangebreaks)for(var L=b.locateBreaks(P,l),w=0;w<L.length;w++){var I=L[w];d+=I.max-I.min}return d}function a(b,P,l){var d=.05*P._length,L=P._anchorAxis||{};if((P.ticklabelposition||"").indexOf("inside")!==-1||(L.ticklabelposition||"").indexOf("inside")!==-1){var w=P.autorange==="reversed";if(!w){var I=i.simpleMap(P.range,P.r2l);w=I[1]<I[0]}w&&(l=!l)}var z=0;return r(b,P._id)||(z=h(b,P,l)),d=Math.max(z,d),P.constrain==="domain"&&P._inputDomain&&(d*=(P._inputDomain[1]-P._inputDomain[0])/(P.domain[1]-P.domain[0])),function(B){return B.nopad?0:B.pad+(B.extrapad?d:z)}}var o=3;function h(b,P,l){var d=0,L=P._id.charAt(0)==="x";for(var w in b._plots){var I=b._plots[w];if(!(P._id!==I.xaxis._id&&P._id!==I.yaxis._id)){var z=(L?I.yaxis:I.xaxis)||{};if((z.ticklabelposition||"").indexOf("inside")!==-1&&(!l&&(z.side==="left"||z.side==="bottom")||l&&(z.side==="top"||z.side==="right"))){if(z._vals){var B=i.deg2rad(z._tickAngles[z._id+"tick"]||0),O=Math.abs(Math.cos(B)),R=Math.abs(Math.sin(B));if(!z._vals[0].bb){var C=z._id+"tick",F=z._selections[C];F.each(function(it){var q=M.select(this),W=q.select(".text-math-group");W.empty()&&(it.bb=g.bBox(q.node()))})}for(var N=0;N<z._vals.length;N++){var V=z._vals[N],K=V.bb;if(K){var Q=2*o+K.width,at=2*o+K.height;d=Math.max(d,L?Math.max(Q*O,at*R):Math.max(at*O,Q*R))}}}z.ticks==="inside"&&z.ticklabelposition==="inside"&&(d+=z.ticklen||0)}}}return d}function y(b,P,l){var d=P._id,L=b._fullData,w=b._fullLayout,I=[],z=[],B,O,R;function C(Q,at){for(B=0;B<at.length;B++){var it=Q[at[B]],q=(it._extremes||{})[d];if(it.visible===!0&&q){for(O=0;O<q.min.length;O++)R=q.min[O],s(I,R.val,R.pad,{extrapad:R.extrapad});for(O=0;O<q.max.length;O++)R=q.max[O],u(z,R.val,R.pad,{extrapad:R.extrapad})}}}if(C(L,P._traceIndices),C(w.annotations||[],P._annIndices||[]),C(w.shapes||[],P._shapeIndices||[]),P._matchGroup&&!l){for(var F in P._matchGroup)if(F!==P._id){var N=e(b,F),V=y(b,N,!0),K=P._length/N._length;for(O=0;O<V.min.length;O++)R=V.min[O],s(I,R.val,R.pad*K,{extrapad:R.extrapad});for(O=0;O<V.max.length;O++)R=V.max[O],u(z,R.val,R.pad*K,{extrapad:R.extrapad})}}return{min:I,max:z}}function p(b,P,l){if(P.setScale(),P.autorange){P.range=l?l.slice():f(b,P),P._r=P.range.slice(),P._rl=i.simpleMap(P._r,P.r2l);var d=P._input,L={};L[P._attr+".range"]=P.range,L[P._attr+".autorange"]=P.autorange,A.call("_storeDirectGUIEdit",b.layout,b._fullLayout._preGUI,L),d.range=P.range.slice(),d.autorange=P.autorange}var w=P._anchorAxis;if(w&&w.rangeslider){var I=w.rangeslider[P._name];I&&I.rangemode==="auto"&&(I.range=f(b,P)),w._input.rangeslider[P._name]=i.extendFlat({},I)}}function x(b,P,l){l||(l={}),b._m||b.setScale();var d=[],L=[],w=P.length,I=l.padded||!1,z=l.tozero&&(b.type==="linear"||b.type==="-"),B=b.type==="log",O=!1,R=l.vpadLinearized||!1,C,F,N,V,K,Q,at,it,q;function W(rt){if(Array.isArray(rt))return O=!0,function(pt){return Math.max(Number(rt[pt]||0),0)};var ht=Math.max(Number(rt||0),0);return function(){return ht}}var Z=W((b._m>0?l.ppadplus:l.ppadminus)||l.ppad||0),G=W((b._m>0?l.ppadminus:l.ppadplus)||l.ppad||0),et=W(l.vpadplus||l.vpad),nt=W(l.vpadminus||l.vpad);if(!O){if(it=1/0,q=-1/0,B)for(C=0;C<w;C++)F=P[C],F<it&&F>0&&(it=F),F>q&&F<S&&(q=F);else for(C=0;C<w;C++)F=P[C],F<it&&F>-S&&(it=F),F>q&&F<S&&(q=F);P=[it,q],w=2}var X={tozero:z,extrapad:I};function Y(rt){N=P[rt],E(N)&&(Q=Z(rt),at=G(rt),R?(V=b.c2l(N)-nt(rt),K=b.c2l(N)+et(rt)):(it=N-nt(rt),q=N+et(rt),B&&it<q/10&&(it=q/10),V=b.c2l(it),K=b.c2l(q)),z&&(V=Math.min(0,V),K=Math.max(0,K)),T(V)&&s(d,V,at,X),T(K)&&u(L,K,Q,X))}var ot=Math.min(6,w);for(C=0;C<ot;C++)Y(C);for(C=w-1;C>=ot;C--)Y(C);return{min:d,max:L,opts:l}}function s(b,P,l,d){c(b,P,l,d,k)}function u(b,P,l,d){c(b,P,l,d,_)}function c(b,P,l,d,L){for(var w=d.tozero,I=d.extrapad,z=!0,B=0;B<b.length&&z;B++){var O=b[B];if(L(O.val,P)&&O.pad>=l&&(O.extrapad||!I)){z=!1;break}else L(P,O.val)&&O.pad<=l&&(I||!O.extrapad)&&(b.splice(B,1),B--)}if(z){var R=w&&P===0;b.push({val:P,pad:R?0:l,extrapad:R?!1:I})}}function T(b){return E(b)&&Math.abs(b)<S}function k(b,P){return b<=P}function _(b,P){return b>=P}},89298:function($,U,t){var M=t(39898),E=t(92770),i=t(74875),S=t(73972),A=t(71828),g=A.strTranslate,v=t(63893),e=t(92998),r=t(7901),f=t(91424),n=t(13838),a=t(66287),o=t(50606),h=o.ONEMAXYEAR,y=o.ONEAVGYEAR,p=o.ONEMINYEAR,x=o.ONEMAXQUARTER,s=o.ONEAVGQUARTER,u=o.ONEMINQUARTER,c=o.ONEMAXMONTH,T=o.ONEAVGMONTH,k=o.ONEMINMONTH,_=o.ONEWEEK,b=o.ONEDAY,P=b/2,l=o.ONEHOUR,d=o.ONEMIN,L=o.ONESEC,w=o.MINUS_SIGN,I=o.BADNUM,z={K:"zeroline"},B={K:"gridline",L:"path"},O={K:"minor-gridline",L:"path"},R={K:"tick",L:"path"},C={K:"tick",L:"text"},F={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},N=t(18783),V=N.MID_SHIFT,K=N.CAP_SHIFT,Q=N.LINE_SPACING,at=N.OPPOSITE_SIDE,it=3,q=$.exports={};q.setConvert=t(21994);var W=t(4322),Z=t(41675),G=Z.idSort,et=Z.isLinked;q.id2name=Z.id2name,q.name2id=Z.name2id,q.cleanId=Z.cleanId,q.list=Z.list,q.listIds=Z.listIds,q.getFromId=Z.getFromId,q.getFromTrace=Z.getFromTrace;var nt=t(71739);q.getAutoRange=nt.getAutoRange,q.findExtremes=nt.findExtremes;var X=1e-4;function Y(Dt){var Ut=(Dt[1]-Dt[0])*X;return[Dt[0]-Ut,Dt[1]+Ut]}q.coerceRef=function(Dt,Ut,Te,Se,Be,Je){var $e=Se.charAt(Se.length-1),Xe=Te._fullLayout._subplots[$e+"axis"],Oe=Se+"ref",ar={};return Be||(Be=Xe[0]||(typeof Je=="string"?Je:Je[0])),Je||(Je=Be),Xe=Xe.concat(Xe.map(function(cr){return cr+" domain"})),ar[Oe]={valType:"enumerated",values:Xe.concat(Je?typeof Je=="string"?[Je]:Je:[]),dflt:Be},A.coerce(Dt,Ut,ar,Oe)},q.getRefType=function(Dt){return Dt===void 0?Dt:Dt==="paper"?"paper":Dt==="pixel"?"pixel":/( domain)$/.test(Dt)?"domain":"range"},q.coercePosition=function(Dt,Ut,Te,Se,Be,Je){var $e,Xe,Oe=q.getRefType(Se);if(Oe!=="range")$e=A.ensureNumber,Xe=Te(Be,Je);else{var ar=q.getFromId(Ut,Se);Je=ar.fraction2r(Je),Xe=Te(Be,Je),$e=ar.cleanPos}Dt[Be]=$e(Xe)},q.cleanPosition=function(Dt,Ut,Te){var Se=Te==="paper"||Te==="pixel"?A.ensureNumber:q.getFromId(Ut,Te).cleanPos;return Se(Dt)},q.redrawComponents=function(Dt,Ut){Ut=Ut||q.listIds(Dt);var Te=Dt._fullLayout;function Se(Be,Je,$e,Xe){for(var Oe=S.getComponentMethod(Be,Je),ar={},cr=0;cr<Ut.length;cr++)for(var sr=Te[q.id2name(Ut[cr])],lr=sr[$e],Or=0;Or<lr.length;Or++){var Ir=lr[Or];if(!ar[Ir]&&(Oe(Dt,Ir),ar[Ir]=1,Xe))return}}Se("annotations","drawOne","_annIndices"),Se("shapes","drawOne","_shapeIndices"),Se("images","draw","_imgIndices",!0),Se("selections","drawOne","_selectionIndices")};var ot=q.getDataConversions=function(Dt,Ut,Te,Se){var Be,Je=Te==="x"||Te==="y"||Te==="z"?Te:Se;if(Array.isArray(Je)){if(Be={type:W(Se,void 0,{autotypenumbers:Dt._fullLayout.autotypenumbers}),_categories:[]},q.setConvert(Be),Be.type==="category")for(var $e=0;$e<Se.length;$e++)Be.d2c(Se[$e])}else Be=q.getFromTrace(Dt,Ut,Je);return Be?{d2c:Be.d2c,c2d:Be.c2d}:Je==="ids"?{d2c:ht,c2d:ht}:{d2c:rt,c2d:rt}};function rt(Dt){return+Dt}function ht(Dt){return String(Dt)}q.getDataToCoordFunc=function(Dt,Ut,Te,Se){return ot(Dt,Ut,Te,Se).d2c},q.counterLetter=function(Dt){var Ut=Dt.charAt(0);if(Ut==="x")return"y";if(Ut==="y")return"x"},q.minDtick=function(Dt,Ut,Te,Se){["log","category","multicategory"].indexOf(Dt.type)!==-1||!Se?Dt._minDtick=0:Dt._minDtick===void 0?(Dt._minDtick=Ut,Dt._forceTick0=Te):Dt._minDtick&&((Dt._minDtick/Ut+1e-6)%1<2e-6&&((Te-Dt._forceTick0)/Ut%1+1.000001)%1<2e-6?(Dt._minDtick=Ut,Dt._forceTick0=Te):((Ut/Dt._minDtick+1e-6)%1>2e-6||((Te-Dt._forceTick0)/Dt._minDtick%1+1.000001)%1>2e-6)&&(Dt._minDtick=0))},q.saveRangeInitial=function(Dt,Ut){for(var Te=q.list(Dt,"",!0),Se=!1,Be=0;Be<Te.length;Be++){var Je=Te[Be],$e=Je._rangeInitial===void 0,Xe=$e||!(Je.range[0]===Je._rangeInitial[0]&&Je.range[1]===Je._rangeInitial[1]);($e&&Je.autorange===!1||Ut&&Xe)&&(Je._rangeInitial=Je.range.slice(),Se=!0)}return Se},q.saveShowSpikeInitial=function(Dt,Ut){for(var Te=q.list(Dt,"",!0),Se=!1,Be="on",Je=0;Je<Te.length;Je++){var $e=Te[Je],Xe=$e._showSpikeInitial===void 0,Oe=Xe||$e.showspikes!==$e._showspikes;(Xe||Ut&&Oe)&&($e._showSpikeInitial=$e.showspikes,Se=!0),Be==="on"&&!$e.showspikes&&(Be="off")}return Dt._fullLayout._cartesianSpikesEnabled=Be,Se},q.autoBin=function(Dt,Ut,Te,Se,Be,Je){var $e=A.aggNums(Math.min,null,Dt),Xe=A.aggNums(Math.max,null,Dt);if(Ut.type==="category"||Ut.type==="multicategory")return{start:$e-.5,end:Xe+.5,size:Math.max(1,Math.round(Je)||1),_dataSpan:Xe-$e};Be||(Be=Ut.calendar);var Oe;if(Ut.type==="log"?Oe={type:"linear",range:[$e,Xe]}:Oe={type:Ut.type,range:A.simpleMap([$e,Xe],Ut.c2r,0,Be),calendar:Be},q.setConvert(Oe),Je=Je&&a.dtick(Je,Oe.type),Je)Oe.dtick=Je,Oe.tick0=a.tick0(void 0,Oe.type,Be);else{var ar;if(Te)ar=(Xe-$e)/Te;else{var cr=A.distinctVals(Dt),sr=Math.pow(10,Math.floor(Math.log(cr.minDiff)/Math.LN10)),lr=sr*A.roundUp(cr.minDiff/sr,[.9,1.9,4.9,9.9],!0);ar=Math.max(lr,2*A.stdev(Dt)/Math.pow(Dt.length,Se?.25:.4)),E(ar)||(ar=1)}q.autoTicks(Oe,ar)}var Or=Oe.dtick,Ir=q.tickIncrement(q.tickFirst(Oe),Or,"reverse",Be),Pr,rn;if(typeof Or=="number")Ir=pt(Ir,Dt,Oe,$e,Xe),rn=1+Math.floor((Xe-Ir)/Or),Pr=Ir+rn*Or;else for(Oe.dtick.charAt(0)==="M"&&(Ir=yt(Ir,Dt,Or,$e,Be)),Pr=Ir,rn=0;Pr<=Xe;)Pr=q.tickIncrement(Pr,Or,!1,Be),rn++;return{start:Ut.c2r(Ir,0,Be),end:Ut.c2r(Pr,0,Be),size:Or,_dataSpan:Xe-$e}};function pt(Dt,Ut,Te,Se,Be){var Je=0,$e=0,Xe=0,Oe=0;function ar(Or){return(1+(Or-Dt)*100/Te.dtick)%100<2}for(var cr=0;cr<Ut.length;cr++)Ut[cr]%1===0?Xe++:E(Ut[cr])||Oe++,ar(Ut[cr])&&Je++,ar(Ut[cr]+Te.dtick/2)&&$e++;var sr=Ut.length-Oe;if(Xe===sr&&Te.type!=="date")Te.dtick<1?Dt=Se-.5*Te.dtick:(Dt-=.5,Dt+Te.dtick<Se&&(Dt+=Te.dtick));else if($e<sr*.1&&(Je>sr*.3||ar(Se)||ar(Be))){var lr=Te.dtick/2;Dt+=Dt+lr<Se?lr:-lr}return Dt}function yt(Dt,Ut,Te,Se,Be){var Je=A.findExactDates(Ut,Be),$e=.8;if(Je.exactDays>$e){var Xe=Number(Te.substr(1));Je.exactYears>$e&&Xe%12===0?Dt=q.tickIncrement(Dt,"M6","reverse")+b*1.5:Je.exactMonths>$e?Dt=q.tickIncrement(Dt,"M1","reverse")+b*15.5:Dt-=P;var Oe=q.tickIncrement(Dt,Te);if(Oe<=Se)return Oe}return Dt}q.prepMinorTicks=function(Dt,Ut,Te){if(!Ut.minor.dtick){delete Dt.dtick;var Se=Ut.dtick&&E(Ut._tmin),Be;if(Se){var Je=q.tickIncrement(Ut._tmin,Ut.dtick,!0);Be=[Ut._tmin,Je*.99+Ut._tmin*.01]}else{var $e=A.simpleMap(Ut.range,Ut.r2l);Be=[$e[0],.8*$e[0]+.2*$e[1]]}if(Dt.range=A.simpleMap(Be,Ut.l2r),Dt._isMinor=!0,q.prepTicks(Dt,Te),Se){var Xe=E(Ut.dtick),Oe=E(Dt.dtick),ar=Xe?Ut.dtick:+Ut.dtick.substring(1),cr=Oe?Dt.dtick:+Dt.dtick.substring(1);Xe&&Oe?xt(ar,cr)?ar===2*_&&cr===2*b&&(Dt.dtick=_):ar===2*_&&cr===3*b?Dt.dtick=_:ar===_&&!(Ut._input.minor||{}).nticks?Dt.dtick=b:Ft(ar/cr,2.5)?Dt.dtick=ar/2:Dt.dtick=ar:String(Ut.dtick).charAt(0)==="M"?Oe?Dt.dtick="M1":xt(ar,cr)?ar>=12&&cr===2&&(Dt.dtick="M3"):Dt.dtick=Ut.dtick:String(Dt.dtick).charAt(0)==="L"?String(Ut.dtick).charAt(0)==="L"?xt(ar,cr)||(Dt.dtick=Ft(ar/cr,2.5)?Ut.dtick/2:Ut.dtick):Dt.dtick="D1":Dt.dtick==="D2"&&+Ut.dtick>1&&(Dt.dtick=1)}Dt.range=Ut.range}Ut.minor._tick0Init===void 0&&(Dt.tick0=Ut.tick0)};function xt(Dt,Ut){return Math.abs((Dt/Ut+.5)%1-.5)<.001}function Ft(Dt,Ut){return Math.abs(Dt/Ut-1)<.001}q.prepTicks=function(Dt,Ut){var Te=A.simpleMap(Dt.range,Dt.r2l,void 0,void 0,Ut);if(Dt.tickmode==="auto"||!Dt.dtick){var Se=Dt.nticks,Be;Se||(Dt.type==="category"||Dt.type==="multicategory"?(Be=Dt.tickfont?A.bigFont(Dt.tickfont.size||12):15,Se=Dt._length/Be):(Be=Dt._id.charAt(0)==="y"?40:80,Se=A.constrain(Dt._length/Be,4,9)+1),Dt._name==="radialaxis"&&(Se*=2)),Dt.minor&&Dt.minor.tickmode!=="array"||Dt.tickmode==="array"&&(Se*=100),Dt._roughDTick=Math.abs(Te[1]-Te[0])/Se,q.autoTicks(Dt,Dt._roughDTick),Dt._minDtick>0&&Dt.dtick<Dt._minDtick*2&&(Dt.dtick=Dt._minDtick,Dt.tick0=Dt.l2r(Dt._forceTick0))}Dt.ticklabelmode==="period"&&mt(Dt),Dt.tick0||(Dt.tick0=Dt.type==="date"?"2000-01-01":0),Dt.type==="date"&&Dt.dtick<.1&&(Dt.dtick=.1),ce(Dt)};function Et(Dt){return+Dt.substring(1)}function mt(Dt){var Ut;function Te(){return!(E(Dt.dtick)||Dt.dtick.charAt(0)!=="M")}var Se=Te(),Be=q.getTickFormat(Dt);if(Be){var Je=Dt._dtickInit!==Dt.dtick;/%[fLQsSMX]/.test(Be)||(/%[HI]/.test(Be)?(Ut=l,Je&&!Se&&Dt.dtick<l&&(Dt.dtick=l)):/%p/.test(Be)?(Ut=P,Je&&!Se&&Dt.dtick<P&&(Dt.dtick=P)):/%[Aadejuwx]/.test(Be)?(Ut=b,Je&&!Se&&Dt.dtick<b&&(Dt.dtick=b)):/%[UVW]/.test(Be)?(Ut=_,Je&&!Se&&Dt.dtick<_&&(Dt.dtick=_)):/%[Bbm]/.test(Be)?(Ut=T,Je&&(Se?Et(Dt.dtick)<1:Dt.dtick<k)&&(Dt.dtick="M1")):/%[q]/.test(Be)?(Ut=s,Je&&(Se?Et(Dt.dtick)<3:Dt.dtick<u)&&(Dt.dtick="M3")):/%[Yy]/.test(Be)&&(Ut=y,Je&&(Se?Et(Dt.dtick)<12:Dt.dtick<p)&&(Dt.dtick="M12")))}Se=Te(),Se&&Dt.tick0===Dt._dowTick0&&(Dt.tick0=Dt._rawTick0),Dt._definedDelta=Ut}function gt(Dt,Ut,Te){for(var Se=0;Se<Dt.length;Se++){var Be=Dt[Se].value,Je=Se,$e=Se+1;Se<Dt.length-1?(Je=Se,$e=Se+1):Se>0?(Je=Se-1,$e=Se):(Je=Se,$e=Se);var Xe=Dt[Je].value,Oe=Dt[$e].value,ar=Math.abs(Oe-Xe),cr=Te||ar,sr=0;cr>=p?ar>=p&&ar<=h?sr=ar:sr=y:Te===s&&cr>=u?ar>=u&&ar<=x?sr=ar:sr=s:cr>=k?ar>=k&&ar<=c?sr=ar:sr=T:Te===_&&cr>=_?sr=_:cr>=b?sr=b:Te===P&&cr>=P?sr=P:Te===l&&cr>=l&&(sr=l);var lr;sr>=ar&&(sr=ar,lr=!0);var Or=Be+sr;if(Ut.rangebreaks&&sr>0){for(var Ir=84,Pr=0,rn=0;rn<Ir;rn++){var Zr=(rn+.5)/Ir;Ut.maskBreaks(Be*(1-Zr)+Zr*Or)!==I&&Pr++}sr*=Pr/Ir,sr||(Dt[Se].drop=!0),lr&&ar>_&&(sr=ar)}(sr>0||Se===0)&&(Dt[Se].periodX=Be+sr/2)}}q.calcTicks=function(Dt,Ut){for(var Te=Dt.type,Se=Dt.calendar,Be=Dt.ticklabelstep,Je=Dt.ticklabelmode==="period",$e=A.simpleMap(Dt.range,Dt.r2l,void 0,void 0,Ut),Xe=$e[1]<$e[0],Oe=Math.min($e[0],$e[1]),ar=Math.max($e[0],$e[1]),cr=Math.max(1e3,Dt._length||0),sr=[],lr=[],Or=[],Ir=[],Pr=Dt.minor&&(Dt.minor.ticks||Dt.minor.showgrid),rn=1;rn>=(Pr?0:1);rn--){var Zr=!rn;rn?(Dt._dtickInit=Dt.dtick,Dt._tick0Init=Dt.tick0):(Dt.minor._dtickInit=Dt.minor.dtick,Dt.minor._tick0Init=Dt.minor.tick0);var yn=rn?Dt:A.extendFlat({},Dt,Dt.minor);if(Zr?q.prepMinorTicks(yn,Dt,Ut):q.prepTicks(yn,Ut),yn.tickmode==="array"){rn?(Or=[],sr=Bt(Dt)):(Ir=[],lr=Bt(Dt));continue}if(yn.tickmode==="sync"){Or=[],sr=Pt(Dt);continue}var Tn=Y($e),hr=Tn[0],dr=Tn[1],Lr=E(yn.dtick),Cr=Te==="log"&&!(Lr||yn.dtick.charAt(0)==="L"),Hr=q.tickFirst(yn,Ut);if(rn){if(Dt._tmin=Hr,Hr<hr!==Xe)break;(Te==="category"||Te==="multicategory")&&(dr=Xe?Math.max(-.5,dr):Math.min(Dt._categories.length-.5,dr))}var sn=null,Yr=Hr,xn;if(rn){var wn;Lr?wn=Dt.dtick:Te==="date"?typeof Dt.dtick=="string"&&Dt.dtick.charAt(0)==="M"&&(wn=T*Dt.dtick.substring(1)):wn=Dt._roughDTick,xn=Math.round((Dt.r2l(Yr)-Dt.r2l(Dt.tick0))/wn)-1}var Un=yn.dtick;for(yn.rangebreaks&&yn._tick0Init!==yn.tick0&&(Yr=ze(Yr,Dt),Xe||(Yr=q.tickIncrement(Yr,Un,!Xe,Se))),rn&&Je&&(Yr=q.tickIncrement(Yr,Un,!Xe,Se),xn--);Xe?Yr>=dr:Yr<=dr;Yr=q.tickIncrement(Yr,Un,Xe,Se)){if(rn&&xn++,yn.rangebreaks&&!Xe){if(Yr<hr)continue;if(yn.maskBreaks(Yr)===I&&ze(Yr,yn)>=ar)break}if(Or.length>cr||Yr===sn)break;sn=Yr;var qn={value:Yr};rn?(Cr&&Yr!==(Yr|0)&&(qn.simpleLabel=!0),Be>1&&xn%Be&&(qn.skipLabel=!0),Or.push(qn)):(qn.minor=!0,Ir.push(qn))}}if(Pr){var ei=Dt.minor.ticks==="inside"&&Dt.ticks==="outside"||Dt.minor.ticks==="outside"&&Dt.ticks==="inside";if(!ei){for(var Gn=Or.map(function(_n){return _n.value}),Hn=[],gr=0;gr<Ir.length;gr++){var $r=Ir[gr],Jr=$r.value;if(Gn.indexOf(Jr)===-1){for(var ln=!1,zn=0;!ln&&zn<Or.length;zn++)1e7+Or[zn].value===1e7+Jr&&(ln=!0);ln||Hn.push($r)}}Ir=Hn}}Je&&gt(Or,Dt,Dt._definedDelta);var mn;if(Dt.rangebreaks){var Mn=Dt._id.charAt(0)==="y",On=1;Dt.tickmode==="auto"&&(On=Dt.tickfont?Dt.tickfont.size:12);var Xn=NaN;for(mn=Or.length-1;mn>-1;mn--){if(Or[mn].drop){Or.splice(mn,1);continue}Or[mn].value=ze(Or[mn].value,Dt);var gi=Dt.c2p(Or[mn].value);(Mn?Xn>gi-On:Xn<gi+On)?Or.splice(Xe?mn+1:mn,1):Xn=gi}}Ce(Dt)&&Math.abs($e[1]-$e[0])===360&&Or.pop(),Dt._tmax=(Or[Or.length-1]||{}).value,Dt._prevDateHead="",Dt._inCalcTicks=!0;var Ri,Ue=function(_n){_n.text="",Dt._prevDateHead=Ri};Or=Or.concat(Ir);var fr,Qr;for(mn=0;mn<Or.length;mn++){var cn=Or[mn].minor,nn=Or[mn].value;cn?lr.push({x:nn,minor:!0}):(Ri=Dt._prevDateHead,fr=q.tickText(Dt,nn,!1,Or[mn].simpleLabel),Qr=Or[mn].periodX,Qr!==void 0&&(fr.periodX=Qr,(Qr>ar||Qr<Oe)&&(Qr>ar&&(fr.periodX=ar),Qr<Oe&&(fr.periodX=Oe),Ue(fr))),Or[mn].skipLabel&&Ue(fr),sr.push(fr))}return sr=sr.concat(lr),Dt._inCalcTicks=!1,Je&&sr.length&&(sr[0].noTick=!0),sr};function wt(Dt,Ut){return Dt.rangebreaks&&(Ut=Ut.filter(function(Te){return Dt.maskBreaks(Te.x)!==I})),Ut}function Pt(Dt){var Ut=Dt._mainAxis,Te=[];if(Ut._vals){for(var Se=0;Se<Ut._vals.length;Se++)if(!Ut._vals[Se].noTick){var Be=Ut.l2p(Ut._vals[Se].x),Je=Dt.p2l(Be),$e=q.tickText(Dt,Je);Ut._vals[Se].minor&&($e.minor=!0,$e.text=""),Te.push($e)}}return Te=wt(Dt,Te),Te}function Bt(Dt){var Ut=A.simpleMap(Dt.range,Dt.r2l),Te=Y(Ut),Se=Math.min(Te[0],Te[1]),Be=Math.max(Te[0],Te[1]),Je=Dt.type==="category"?Dt.d2l_noadd:Dt.d2l;Dt.type==="log"&&String(Dt.dtick).charAt(0)!=="L"&&(Dt.dtick="L"+Math.pow(10,Math.floor(Math.min(Dt.range[0],Dt.range[1]))-1));for(var $e=[],Xe=0;Xe<=1;Xe++)if(!(Xe&&!Dt.minor)){var Oe=Xe?Dt.minor.tickvals:Dt.tickvals,ar=Xe?[]:Dt.ticktext;if(Oe){Array.isArray(ar)||(ar=[]);for(var cr=0;cr<Oe.length;cr++){var sr=Je(Oe[cr]);if(sr>Se&&sr<Be){var lr=ar[cr]===void 0?q.tickText(Dt,sr):pe(Dt,sr,String(ar[cr]));Xe&&(lr.minor=!0,lr.text=""),$e.push(lr)}}}}return $e=wt(Dt,$e),$e}var kt=[2,5,10],jt=[1,2,3,6,12],Ht=[1,2,5,10,15,30],Vt=[1,2,3,7,14],ee=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],te=[-.301,0,.301,.699,1],ae=[15,30,45,90,180];function le(Dt,Ut,Te){return Ut*A.roundUp(Dt/Ut,Te)}q.autoTicks=function(Dt,Ut,Te){var Se;function Be(sr){return Math.pow(sr,Math.floor(Math.log(Ut)/Math.LN10))}if(Dt.type==="date"){Dt.tick0=A.dateTick0(Dt.calendar,0);var Je=2*Ut;if(Je>y)Ut/=y,Se=Be(10),Dt.dtick="M"+12*le(Ut,Se,kt);else if(Je>T)Ut/=T,Dt.dtick="M"+le(Ut,1,jt);else if(Je>b){if(Dt.dtick=le(Ut,b,Dt._hasDayOfWeekBreaks?[1,2,7,14]:Vt),!Te){var $e=q.getTickFormat(Dt),Xe=Dt.ticklabelmode==="period";Xe&&(Dt._rawTick0=Dt.tick0),/%[uVW]/.test($e)?Dt.tick0=A.dateTick0(Dt.calendar,2):Dt.tick0=A.dateTick0(Dt.calendar,1),Xe&&(Dt._dowTick0=Dt.tick0)}}else Je>l?Dt.dtick=le(Ut,l,jt):Je>d?Dt.dtick=le(Ut,d,Ht):Je>L?Dt.dtick=le(Ut,L,Ht):(Se=Be(10),Dt.dtick=le(Ut,Se,kt))}else if(Dt.type==="log"){Dt.tick0=0;var Oe=A.simpleMap(Dt.range,Dt.r2l);if(Dt._isMinor&&(Ut*=1.5),Ut>.7)Dt.dtick=Math.ceil(Ut);else if(Math.abs(Oe[1]-Oe[0])<1){var ar=1.5*Math.abs((Oe[1]-Oe[0])/Ut);Ut=Math.abs(Math.pow(10,Oe[1])-Math.pow(10,Oe[0]))/ar,Se=Be(10),Dt.dtick="L"+le(Ut,Se,kt)}else Dt.dtick=Ut>.3?"D2":"D1"}else Dt.type==="category"||Dt.type==="multicategory"?(Dt.tick0=0,Dt.dtick=Math.ceil(Math.max(Ut,1))):Ce(Dt)?(Dt.tick0=0,Se=1,Dt.dtick=le(Ut,Se,ae)):(Dt.tick0=0,Se=Be(10),Dt.dtick=le(Ut,Se,kt));if(Dt.dtick===0&&(Dt.dtick=1),!E(Dt.dtick)&&typeof Dt.dtick!="string"){var cr=Dt.dtick;throw Dt.dtick=1,"ax.dtick error: "+String(cr)}};function ce(Dt){var Ut=Dt.dtick;if(Dt._tickexponent=0,!E(Ut)&&typeof Ut!="string"&&(Ut=1),(Dt.type==="category"||Dt.type==="multicategory")&&(Dt._tickround=null),Dt.type==="date"){var Te=Dt.r2l(Dt.tick0),Se=Dt.l2r(Te).replace(/(^-|i)/g,""),Be=Se.length;if(String(Ut).charAt(0)==="M")Be>10||Se.substr(5)!=="01-01"?Dt._tickround="d":Dt._tickround=+Ut.substr(1)%12===0?"y":"m";else if(Ut>=b&&Be<=10||Ut>=b*15)Dt._tickround="d";else if(Ut>=d&&Be<=16||Ut>=l)Dt._tickround="M";else if(Ut>=L&&Be<=19||Ut>=d)Dt._tickround="S";else{var Je=Dt.l2r(Te+Ut).replace(/^-/,"").length;Dt._tickround=Math.max(Be,Je)-20,Dt._tickround<0&&(Dt._tickround=4)}}else if(E(Ut)||Ut.charAt(0)==="L"){var $e=Dt.range.map(Dt.r2d||Number);E(Ut)||(Ut=Number(Ut.substr(1))),Dt._tickround=2-Math.floor(Math.log(Ut)/Math.LN10+.01);var Xe=Math.max(Math.abs($e[0]),Math.abs($e[1])),Oe=Math.floor(Math.log(Xe)/Math.LN10+.01),ar=Dt.minexponent===void 0?3:Dt.minexponent;Math.abs(Oe)>ar&&(ut(Dt.exponentformat)&&!vt(Oe)?Dt._tickexponent=3*Math.round((Oe-1)/3):Dt._tickexponent=Oe)}else Dt._tickround=null}q.tickIncrement=function(Dt,Ut,Te,Se){var Be=Te?-1:1;if(E(Ut))return A.increment(Dt,Be*Ut);var Je=Ut.charAt(0),$e=Be*Number(Ut.substr(1));if(Je==="M")return A.incrementMonth(Dt,$e,Se);if(Je==="L")return Math.log(Math.pow(10,Dt)+$e)/Math.LN10;if(Je==="D"){var Xe=Ut==="D2"?te:ee,Oe=Dt+Be*.01,ar=A.roundUp(A.mod(Oe,1),Xe,Te);return Math.floor(Oe)+Math.log(M.round(Math.pow(10,ar),1))/Math.LN10}throw"unrecognized dtick "+String(Ut)},q.tickFirst=function(Dt,Ut){var Te=Dt.r2l||Number,Se=A.simpleMap(Dt.range,Te,void 0,void 0,Ut),Be=Se[1]<Se[0],Je=Be?Math.floor:Math.ceil,$e=Y(Se)[0],Xe=Dt.dtick,Oe=Te(Dt.tick0);if(E(Xe)){var ar=Je(($e-Oe)/Xe)*Xe+Oe;return(Dt.type==="category"||Dt.type==="multicategory")&&(ar=A.constrain(ar,0,Dt._categories.length-1)),ar}var cr=Xe.charAt(0),sr=Number(Xe.substr(1));if(cr==="M"){for(var lr=0,Or=Oe,Ir,Pr,rn;lr<10;){if(Ir=q.tickIncrement(Or,Xe,Be,Dt.calendar),(Ir-$e)*(Or-$e)<=0)return Be?Math.min(Or,Ir):Math.max(Or,Ir);Pr=($e-(Or+Ir)/2)/(Ir-Or),rn=cr+(Math.abs(Math.round(Pr))||1)*sr,Or=q.tickIncrement(Or,rn,Pr<0?!Be:Be,Dt.calendar),lr++}return A.error("tickFirst did not converge",Dt),Or}else{if(cr==="L")return Math.log(Je((Math.pow(10,$e)-Oe)/sr)*sr+Oe)/Math.LN10;if(cr==="D"){var Zr=Xe==="D2"?te:ee,yn=A.roundUp(A.mod($e,1),Zr,Be);return Math.floor($e)+Math.log(M.round(Math.pow(10,yn),1))/Math.LN10}else throw"unrecognized dtick "+String(Xe)}},q.tickText=function(Dt,Ut,Te,Se){var Be=pe(Dt,Ut),Je=Dt.tickmode==="array",$e=Te||Je,Xe=Dt.type,Oe=Xe==="category"?Dt.d2l_noadd:Dt.d2l,ar;if(Je&&Array.isArray(Dt.ticktext)){var cr=A.simpleMap(Dt.range,Dt.r2l),sr=(Math.abs(cr[1]-cr[0])-(Dt._lBreaks||0))/1e4;for(ar=0;ar<Dt.ticktext.length&&!(Math.abs(Ut-Oe(Dt.tickvals[ar]))<sr);ar++);if(ar<Dt.ticktext.length)return Be.text=String(Dt.ticktext[ar]),Be}function lr(rn){if(rn===void 0)return!0;if(Te)return rn==="none";var Zr={first:Dt._tmin,last:Dt._tmax}[rn];return rn!=="all"&&Ut!==Zr}var Or=Te?"never":Dt.exponentformat!=="none"&&lr(Dt.showexponent)?"hide":"";if(Xe==="date"?we(Dt,Be,Te,$e):Xe==="log"?ve(Dt,Be,Te,$e,Or):Xe==="category"?Mt(Dt,Be):Xe==="multicategory"?It(Dt,Be,Te):Ce(Dt)?zt(Dt,Be,Te,$e,Or):Rt(Dt,Be,Te,$e,Or),Se||(Dt.tickprefix&&!lr(Dt.showtickprefix)&&(Be.text=Dt.tickprefix+Be.text),Dt.ticksuffix&&!lr(Dt.showticksuffix)&&(Be.text+=Dt.ticksuffix)),Dt.labelalias&&Dt.labelalias.hasOwnProperty(Be.text)){var Ir=Dt.labelalias[Be.text];typeof Ir=="string"&&(Be.text=Ir)}if(Dt.tickson==="boundaries"||Dt.showdividers){var Pr=function(rn){var Zr=Dt.l2p(rn);return Zr>=0&&Zr<=Dt._length?rn:null};Be.xbnd=[Pr(Be.x-.5),Pr(Be.x+Dt.dtick-.5)]}return Be},q.hoverLabelText=function(Dt,Ut,Te){Te&&(Dt=A.extendFlat({},Dt,{hoverformat:Te}));var Se=Array.isArray(Ut)?Ut[0]:Ut,Be=Array.isArray(Ut)?Ut[1]:void 0;if(Be!==void 0&&Be!==Se)return q.hoverLabelText(Dt,Se,Te)+" - "+q.hoverLabelText(Dt,Be,Te);var Je=Dt.type==="log"&&Se<=0,$e=q.tickText(Dt,Dt.c2l(Je?-Se:Se),"hover").text;return Je?Se===0?"0":w+$e:$e};function pe(Dt,Ut,Te){var Se=Dt.tickfont||{};return{x:Ut,dx:0,dy:0,text:Te||"",fontSize:Se.size,font:Se.family,fontColor:Se.color}}function we(Dt,Ut,Te,Se){var Be=Dt._tickround,Je=Te&&Dt.hoverformat||q.getTickFormat(Dt);Se&&(E(Be)?Be=4:Be={y:"m",m:"d",d:"M",M:"S",S:4}[Be]);var $e=A.formatDate(Ut.x,Je,Be,Dt._dateFormat,Dt.calendar,Dt._extraFormat),Xe,Oe=$e.indexOf(`
`);if(Oe!==-1&&(Xe=$e.substr(Oe+1),$e=$e.substr(0,Oe)),Se&&($e==="00:00:00"||$e==="00:00"?($e=Xe,Xe=""):$e.length===8&&($e=$e.replace(/:00$/,""))),Xe)if(Te)Be==="d"?$e+=", "+Xe:$e=Xe+($e?", "+$e:"");else if(!Dt._inCalcTicks||Dt._prevDateHead!==Xe)Dt._prevDateHead=Xe,$e+="<br>"+Xe;else{var ar=We(Dt),cr=Dt._trueSide||Dt.side;(!ar&&cr==="top"||ar&&cr==="bottom")&&($e+="<br> ")}Ut.text=$e}function ve(Dt,Ut,Te,Se,Be){var Je=Dt.dtick,$e=Ut.x,Xe=Dt.tickformat,Oe=typeof Je=="string"&&Je.charAt(0);if(Be==="never"&&(Be=""),Se&&Oe!=="L"&&(Je="L3",Oe="L"),Xe||Oe==="L")Ut.text=St(Math.pow(10,$e),Dt,Be,Se);else if(E(Je)||Oe==="D"&&A.mod($e+.01,1)<.1){var ar=Math.round($e),cr=Math.abs(ar),sr=Dt.exponentformat;sr==="power"||ut(sr)&&vt(ar)?(ar===0?Ut.text=1:ar===1?Ut.text="10":Ut.text="10<sup>"+(ar>1?"":w)+cr+"</sup>",Ut.fontSize*=1.25):(sr==="e"||sr==="E")&&cr>2?Ut.text="1"+sr+(ar>0?"+":w)+cr:(Ut.text=St(Math.pow(10,$e),Dt,"","fakehover"),Je==="D1"&&Dt._id.charAt(0)==="y"&&(Ut.dy-=Ut.fontSize/6))}else if(Oe==="D")Ut.text=String(Math.round(Math.pow(10,A.mod($e,1)))),Ut.fontSize*=.75;else throw"unrecognized dtick "+String(Je);if(Dt.dtick==="D1"){var lr=String(Ut.text).charAt(0);(lr==="0"||lr==="1")&&(Dt._id.charAt(0)==="y"?Ut.dx-=Ut.fontSize/4:(Ut.dy+=Ut.fontSize/2,Ut.dx+=(Dt.range[1]>Dt.range[0]?1:-1)*Ut.fontSize*($e<0?.5:.25)))}}function Mt(Dt,Ut){var Te=Dt._categories[Math.round(Ut.x)];Te===void 0&&(Te=""),Ut.text=String(Te)}function It(Dt,Ut,Te){var Se=Math.round(Ut.x),Be=Dt._categories[Se]||[],Je=Be[1]===void 0?"":String(Be[1]),$e=Be[0]===void 0?"":String(Be[0]);Te?Ut.text=$e+" - "+Je:(Ut.text=Je,Ut.text2=$e)}function Rt(Dt,Ut,Te,Se,Be){Be==="never"?Be="":Dt.showexponent==="all"&&Math.abs(Ut.x/Dt.dtick)<1e-6&&(Be="hide"),Ut.text=St(Ut.x,Dt,Be,Se)}function zt(Dt,Ut,Te,Se,Be){if(Dt.thetaunit==="radians"&&!Te){var Je=Ut.x/180;if(Je===0)Ut.text="0";else{var $e=Tt(Je);if($e[1]>=100)Ut.text=St(A.deg2rad(Ut.x),Dt,Be,Se);else{var Xe=Ut.x<0;$e[1]===1?$e[0]===1?Ut.text="\u03C0":Ut.text=$e[0]+"\u03C0":Ut.text=["<sup>",$e[0],"</sup>","\u2044","<sub>",$e[1],"</sub>","\u03C0"].join(""),Xe&&(Ut.text=w+Ut.text)}}}else Ut.text=St(Ut.x,Dt,Be,Se)}function Tt(Dt){function Ut(Xe,Oe){return Math.abs(Xe-Oe)<=1e-6}function Te(Xe,Oe){return Ut(Oe,0)?Xe:Te(Oe,Xe%Oe)}function Se(Xe){for(var Oe=1;!Ut(Math.round(Xe*Oe)/Oe,Xe);)Oe*=10;return Oe}var Be=Se(Dt),Je=Dt*Be,$e=Math.abs(Te(Je,Be));return[Math.round(Je/$e),Math.round(Be/$e)]}var ft=["f","p","n","\u03BC","m","","k","M","G","T"];function ut(Dt){return Dt==="SI"||Dt==="B"}function vt(Dt){return Dt>14||Dt<-15}function St(Dt,Ut,Te,Se){var Be=Dt<0,Je=Ut._tickround,$e=Te||Ut.exponentformat||"B",Xe=Ut._tickexponent,Oe=q.getTickFormat(Ut),ar=Ut.separatethousands;if(Se){var cr={exponentformat:$e,minexponent:Ut.minexponent,dtick:Ut.showexponent==="none"?Ut.dtick:E(Dt)&&Math.abs(Dt)||1,range:Ut.showexponent==="none"?Ut.range.map(Ut.r2d):[0,Dt||1]};ce(cr),Je=(Number(cr._tickround)||0)+4,Xe=cr._tickexponent,Ut.hoverformat&&(Oe=Ut.hoverformat)}if(Oe)return Ut._numFormat(Oe)(Dt).replace(/-/g,w);var sr=Math.pow(10,-Je)/2;if($e==="none"&&(Xe=0),Dt=Math.abs(Dt),Dt<sr)Dt="0",Be=!1;else{if(Dt+=sr,Xe&&(Dt*=Math.pow(10,-Xe),Je+=Xe),Je===0)Dt=String(Math.floor(Dt));else if(Je<0){Dt=String(Math.round(Dt)),Dt=Dt.substr(0,Dt.length+Je);for(var lr=Je;lr<0;lr++)Dt+="0"}else{Dt=String(Dt);var Or=Dt.indexOf(".")+1;Or&&(Dt=Dt.substr(0,Or+Je).replace(/\.?0+$/,""))}Dt=A.numSeparate(Dt,Ut._separators,ar)}if(Xe&&$e!=="hide"){ut($e)&&vt(Xe)&&($e="power");var Ir;Xe<0?Ir=w+-Xe:$e!=="power"?Ir="+"+Xe:Ir=String(Xe),$e==="e"||$e==="E"?Dt+=$e+Ir:$e==="power"?Dt+="\xD710<sup>"+Ir+"</sup>":$e==="B"&&Xe===9?Dt+="B":ut($e)&&(Dt+=ft[Xe/3+5])}return Be?w+Dt:Dt}q.getTickFormat=function(Dt){var Ut;function Te(Oe){return typeof Oe!="string"?Oe:Number(Oe.replace("M",""))*T}function Se(Oe,ar){var cr=["L","D"];if(typeof Oe==typeof ar){if(typeof Oe=="number")return Oe-ar;var sr=cr.indexOf(Oe.charAt(0)),lr=cr.indexOf(ar.charAt(0));return sr===lr?Number(Oe.replace(/(L|D)/g,""))-Number(ar.replace(/(L|D)/g,"")):sr-lr}else return typeof Oe=="number"?1:-1}function Be(Oe,ar,cr){var sr=cr||function(Ir){return Ir},lr=ar[0],Or=ar[1];return(!lr&&typeof lr!="number"||sr(lr)<=sr(Oe))&&(!Or&&typeof Or!="number"||sr(Or)>=sr(Oe))}function Je(Oe,ar){var cr=ar[0]===null,sr=ar[1]===null,lr=Se(Oe,ar[0])>=0,Or=Se(Oe,ar[1])<=0;return(cr||lr)&&(sr||Or)}var $e,Xe;if(Dt.tickformatstops&&Dt.tickformatstops.length>0)switch(Dt.type){case"date":case"linear":{for(Ut=0;Ut<Dt.tickformatstops.length;Ut++)if(Xe=Dt.tickformatstops[Ut],Xe.enabled&&Be(Dt.dtick,Xe.dtickrange,Te)){$e=Xe;break}break}case"log":{for(Ut=0;Ut<Dt.tickformatstops.length;Ut++)if(Xe=Dt.tickformatstops[Ut],Xe.enabled&&Je(Dt.dtick,Xe.dtickrange)){$e=Xe;break}break}}return $e?$e.value:Dt.tickformat},q.getSubplots=function(Dt,Ut){var Te=Dt._fullLayout._subplots,Se=Te.cartesian.concat(Te.gl2d||[]),Be=Ut?q.findSubplotsWithAxis(Se,Ut):Se;return Be.sort(function(Je,$e){var Xe=Je.substr(1).split("y"),Oe=$e.substr(1).split("y");return Xe[0]===Oe[0]?+Xe[1]-+Oe[1]:+Xe[0]-+Oe[0]}),Be},q.findSubplotsWithAxis=function(Dt,Ut){for(var Te=new RegExp(Ut._id.charAt(0)==="x"?"^"+Ut._id+"y":Ut._id+"$"),Se=[],Be=0;Be<Dt.length;Be++){var Je=Dt[Be];Te.test(Je)&&Se.push(Je)}return Se},q.makeClipPaths=function(Dt){var Ut=Dt._fullLayout;if(!Ut._hasOnlyLargeSploms){var Te={_offset:0,_length:Ut.width,_id:""},Se={_offset:0,_length:Ut.height,_id:""},Be=q.list(Dt,"x",!0),Je=q.list(Dt,"y",!0),$e=[],Xe,Oe;for(Xe=0;Xe<Be.length;Xe++)for($e.push({x:Be[Xe],y:Se}),Oe=0;Oe<Je.length;Oe++)Xe===0&&$e.push({x:Te,y:Je[Oe]}),$e.push({x:Be[Xe],y:Je[Oe]});var ar=Ut._clips.selectAll(".axesclip").data($e,function(cr){return cr.x._id+cr.y._id});ar.enter().append("clipPath").classed("axesclip",!0).attr("id",function(cr){return"clip"+Ut._uid+cr.x._id+cr.y._id}).append("rect"),ar.exit().remove(),ar.each(function(cr){M.select(this).select("rect").attr({x:cr.x._offset||0,y:cr.y._offset||0,width:cr.x._length||1,height:cr.y._length||1})})}},q.draw=function(Dt,Ut,Te){var Se=Dt._fullLayout;Ut==="redraw"&&Se._paper.selectAll("g.subplot").each(function(Oe){var ar=Oe[0],cr=Se._plots[ar];if(cr){var sr=cr.xaxis,lr=cr.yaxis;cr.xaxislayer.selectAll("."+sr._id+"tick").remove(),cr.yaxislayer.selectAll("."+lr._id+"tick").remove(),cr.xaxislayer.selectAll("."+sr._id+"tick2").remove(),cr.yaxislayer.selectAll("."+lr._id+"tick2").remove(),cr.xaxislayer.selectAll("."+sr._id+"divider").remove(),cr.yaxislayer.selectAll("."+lr._id+"divider").remove(),cr.minorGridlayer&&cr.minorGridlayer.selectAll("path").remove(),cr.gridlayer&&cr.gridlayer.selectAll("path").remove(),cr.zerolinelayer&&cr.zerolinelayer.selectAll("path").remove(),Se._infolayer.select(".g-"+sr._id+"title").remove(),Se._infolayer.select(".g-"+lr._id+"title").remove()}});var Be=!Ut||Ut==="redraw"?q.listIds(Dt):Ut,Je=q.list(Dt),$e=Je.filter(function(Oe){return Oe.autoshift}).map(function(Oe){return Oe.overlaying});Be.map(function(Oe){var ar=q.getFromId(Dt,Oe);if(ar.tickmode==="sync"&&ar.overlaying){var cr=Be.findIndex(function(sr){return sr===ar.overlaying});cr>=0&&Be.unshift(Be.splice(cr,1).shift())}});var Xe={false:{left:0,right:0}};return A.syncOrAsync(Be.map(function(Oe){return function(){if(Oe){var ar=q.getFromId(Dt,Oe);Te||(Te={}),Te.axShifts=Xe,Te.overlayingShiftedAx=$e;var cr=q.drawOne(Dt,ar,Te);return ar._shiftPusher&&ir(ar,ar._fullDepth||0,Xe,!0),ar._r=ar.range.slice(),ar._rl=A.simpleMap(ar._r,ar.r2l),cr}}}))},q.drawOne=function(Dt,Ut,Te){Te=Te||{};var Se=Te.axShifts||{},Be=Te.overlayingShiftedAx||[],Je,$e,Xe;Ut.setScale();var Oe=Dt._fullLayout,ar=Ut._id,cr=ar.charAt(0),sr=q.counterLetter(ar),lr=Oe._plots[Ut._mainSubplot];if(!lr)return;if(Ut._shiftPusher=Ut.autoshift||Be.indexOf(Ut._id)!==-1||Be.indexOf(Ut.overlaying)!==-1,Ut._shiftPusher&Ut.anchor==="free"){var Or=Ut.linewidth/2||0;Ut.ticks==="inside"&&(Or+=Ut.ticklen),ir(Ut,Or,Se,!0),ir(Ut,Ut.shift||0,Se,!1)}(Te.skipTitle!==!0||Ut._shift===void 0)&&(Ut._shift=xr(Ut,Se));var Ir=lr[cr+"axislayer"],Pr=Ut._mainLinePosition,rn=Pr+=Ut._shift,Zr=Ut._mainMirrorPosition,yn=Ut._vals=q.calcTicks(Ut),Tn=[Ut.mirror,rn,Zr].join("_");for(Je=0;Je<yn.length;Je++)yn[Je].axInfo=Tn;Ut._selections={},Ut._tickAngles&&(Ut._prevTickAngles=Ut._tickAngles),Ut._tickAngles={},Ut._depth=null;var hr={};function dr(Mr){var an=ar+(Mr||"tick");return hr[an]||(hr[an]=Me(Ut,an)),hr[an]}if(Ut.visible){var Lr=q.makeTransTickFn(Ut),Cr=q.makeTransTickLabelFn(Ut),Hr,sn,Yr=Ut.ticks==="inside",xn=Ut.ticks==="outside";if(Ut.tickson==="boundaries"){var wn=Xt(Ut,yn);sn=q.clipEnds(Ut,wn),Hr=Yr?sn:wn}else sn=q.clipEnds(Ut,yn),Hr=Yr&&Ut.ticklabelmode!=="period"?sn:yn;var Un=Ut._gridVals=sn,qn=de(Ut,yn);if(!Oe._hasOnlyLargeSploms){var ei=Ut._subplotsWith,Gn={};for(Je=0;Je<ei.length;Je++){$e=ei[Je],Xe=Oe._plots[$e];var Hn=Xe[sr+"axis"],gr=Hn._mainAxis._id;if(!Gn[gr]){Gn[gr]=1;var $r=cr==="x"?"M0,"+Hn._offset+"v"+Hn._length:"M"+Hn._offset+",0h"+Hn._length;q.drawGrid(Dt,Ut,{vals:Un,counterAxis:Hn,layer:Xe.gridlayer.select("."+ar),minorLayer:Xe.minorGridlayer.select("."+ar),path:$r,transFn:Lr}),q.drawZeroLine(Dt,Ut,{counterAxis:Hn,layer:Xe.zerolinelayer,path:$r,transFn:Lr})}}}var Jr,ln=q.getTickSigns(Ut),zn=q.getTickSigns(Ut,"minor");if(Ut.ticks||Ut.minor&&Ut.minor.ticks){var mn=q.makeTickPath(Ut,rn,ln[2]),Mn=q.makeTickPath(Ut,rn,zn[2],{minor:!0}),On,Xn,gi,Ri;if(Ut._anchorAxis&&Ut.mirror&&Ut.mirror!==!0?(On=q.makeTickPath(Ut,Zr,ln[3]),Xn=q.makeTickPath(Ut,Zr,zn[3],{minor:!0}),gi=mn+On,Ri=Mn+Xn):(On="",Xn="",gi=mn,Ri=Mn),Ut.showdividers&&xn&&Ut.tickson==="boundaries"){var Ue={};for(Je=0;Je<qn.length;Je++)Ue[qn[Je].x]=1;Jr=function(Mr){return Ue[Mr.x]?On:gi}}else Jr=function(Mr){return Mr.minor?Ri:gi}}if(q.drawTicks(Dt,Ut,{vals:Hr,layer:Ir,path:Jr,transFn:Lr}),Ut.mirror==="allticks"){var fr=Object.keys(Ut._linepositions||{});for(Je=0;Je<fr.length;Je++){$e=fr[Je],Xe=Oe._plots[$e];var Qr=Ut._linepositions[$e]||[],cn=Qr[0],nn=Qr[1],_n=Qr[2],gn=q.makeTickPath(Ut,cn,_n?ln[0]:zn[0],{minor:_n})+q.makeTickPath(Ut,nn,_n?ln[1]:zn[1],{minor:_n});q.drawTicks(Dt,Ut,{vals:Hr,layer:Xe[cr+"axislayer"],path:gn,transFn:Lr})}}var en=[];if(en.push(function(){return q.drawLabels(Dt,Ut,{vals:yn,layer:Ir,plotinfo:Xe,transFn:Cr,labelFns:q.makeLabelFns(Ut,rn)})}),Ut.type==="multicategory"){var wr={x:2,y:10}[cr];en.push(function(){var Mr={x:"height",y:"width"}[cr],an=dr()[Mr]+wr+(Ut._tickAngles[ar+"tick"]?Ut.tickfont.size*Q:0);return q.drawLabels(Dt,Ut,{vals:$t(Ut,yn),layer:Ir,cls:ar+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Lr,labelFns:q.makeLabelFns(Ut,rn+an*ln[4])})}),en.push(function(){return Ut._depth=ln[4]*(dr("tick2")[Ut.side]-rn),Ve(Dt,Ut,{vals:qn,layer:Ir,path:q.makeTickPath(Ut,rn,ln[4],{len:Ut._depth}),transFn:Lr})})}else Ut.title.hasOwnProperty("standoff")&&en.push(function(){Ut._depth=ln[4]*(dr()[Ut.side]-rn)});var mr=S.getComponentMethod("rangeslider","isVisible")(Ut);return!Te.skipTitle&&!(mr&&Ut.side==="bottom")&&en.push(function(){return Sr(Dt,Ut)}),en.push(function(){var Mr=Ut.side.charAt(0),an=at[Ut.side].charAt(0),kn=q.getPxPosition(Dt,Ut),Rn=xn?Ut.ticklen:0,fn,Sn,Vn,$n;(Ut.automargin||mr||Ut._shiftPusher)&&(Ut.type==="multicategory"?fn=dr("tick2"):(fn=dr(),cr==="x"&&Mr==="b"&&(Ut._depth=Math.max(fn.width>0?fn.bottom-kn:0,Rn))));var Kn=0,Jn=0;if(Ut._shiftPusher&&(Kn=Math.max(Rn,fn.height>0?Mr==="l"?kn-fn.left:fn.right-kn:0),Ut.title.text!==Oe._dfltTitle[cr]&&(Jn=(Ut._titleStandoff||0)+(Ut._titleScoot||0),Mr==="l"&&(Jn+=Qe(Ut))),Ut._fullDepth=Math.max(Kn,Jn)),Ut.automargin){Sn={x:0,y:0,r:0,l:0,t:0,b:0};var ii=[0,1],Pa=typeof Ut._shift=="number"?Ut._shift:0;if(cr==="x"){if(Mr==="b"?Sn[Mr]=Ut._depth:(Sn[Mr]=Ut._depth=Math.max(fn.width>0?kn-fn.top:0,Rn),ii.reverse()),fn.width>0){var Za=fn.right-(Ut._offset+Ut._length);Za>0&&(Sn.xr=1,Sn.r=Za);var Ga=Ut._offset-fn.left;Ga>0&&(Sn.xl=0,Sn.l=Ga)}}else if(Mr==="l"?(Ut._depth=Math.max(fn.height>0?kn-fn.left:0,Rn),Sn[Mr]=Ut._depth-Pa):(Ut._depth=Math.max(fn.height>0?fn.right-kn:0,Rn),Sn[Mr]=Ut._depth+Pa,ii.reverse()),fn.height>0){var Ja=fn.bottom-(Ut._offset+Ut._length);Ja>0&&(Sn.yb=0,Sn.b=Ja);var Wa=Ut._offset-fn.top;Wa>0&&(Sn.yt=1,Sn.t=Wa)}Sn[sr]=Ut.anchor==="free"?Ut.position:Ut._anchorAxis.domain[ii[0]],Ut.title.text!==Oe._dfltTitle[cr]&&(Sn[Mr]+=Qe(Ut)+(Ut.title.standoff||0)),Ut.mirror&&Ut.anchor!=="free"&&(Vn={x:0,y:0,r:0,l:0,t:0,b:0},Vn[an]=Ut.linewidth,Ut.mirror&&Ut.mirror!==!0&&(Vn[an]+=Rn),Ut.mirror===!0||Ut.mirror==="ticks"?Vn[sr]=Ut._anchorAxis.domain[ii[1]]:(Ut.mirror==="all"||Ut.mirror==="allticks")&&(Vn[sr]=[Ut._counterDomainMin,Ut._counterDomainMax][ii[1]]))}mr&&($n=S.getComponentMethod("rangeslider","autoMarginOpts")(Dt,Ut)),typeof Ut.automargin=="string"&&(Ot(Sn,Ut.automargin),Ot(Vn,Ut.automargin)),i.autoMargin(Dt,tr(Ut),Sn),i.autoMargin(Dt,Gt(Ut),Vn),i.autoMargin(Dt,re(Ut),$n)}),A.syncOrAsync(en)}};function Ot(Dt,Ut){if(Dt){var Te=Object.keys(F).reduce(function(Se,Be){return Ut.indexOf(Be)!==-1&&F[Be].forEach(function(Je){Se[Je]=1}),Se},{});Object.keys(Dt).forEach(function(Se){Te[Se]||(Se.length===1?Dt[Se]=0:delete Dt[Se])})}}function Xt(Dt,Ut){var Te=[],Se,Be=function(Je,$e){var Xe=Je.xbnd[$e];Xe!==null&&Te.push(A.extendFlat({},Je,{x:Xe}))};if(Ut.length){for(Se=0;Se<Ut.length;Se++)Be(Ut[Se],0);Be(Ut[Se-1],1)}return Te}function $t(Dt,Ut){for(var Te=[],Se={},Be=0;Be<Ut.length;Be++){var Je=Ut[Be];Se[Je.text2]?Se[Je.text2].push(Je.x):Se[Je.text2]=[Je.x]}for(var $e in Se)Te.push(pe(Dt,A.interp(Se[$e],.5),$e));return Te}function de(Dt,Ut){var Te=[],Se,Be,Je=Ut.length&&Ut[Ut.length-1].x<Ut[0].x,$e=function(Oe,ar){var cr=Oe.xbnd[ar];cr!==null&&Te.push(A.extendFlat({},Oe,{x:cr}))};if(Dt.showdividers&&Ut.length){for(Se=0;Se<Ut.length;Se++){var Xe=Ut[Se];Xe.text2!==Be&&$e(Xe,Je?1:0),Be=Xe.text2}$e(Ut[Se-1],Je?0:1)}return Te}function Me(Dt,Ut){var Te,Se,Be,Je;return Dt._selections[Ut].size()?(Te=1/0,Se=-1/0,Be=1/0,Je=-1/0,Dt._selections[Ut].each(function(){var $e=_r(this),Xe=f.bBox($e.node().parentNode);Te=Math.min(Te,Xe.top),Se=Math.max(Se,Xe.bottom),Be=Math.min(Be,Xe.left),Je=Math.max(Je,Xe.right)})):(Te=0,Se=0,Be=0,Je=0),{top:Te,bottom:Se,left:Be,right:Je,height:Se-Te,width:Je-Be}}q.getTickSigns=function(Dt,Ut){var Te=Dt._id.charAt(0),Se={x:"top",y:"right"}[Te],Be=Dt.side===Se?1:-1,Je=[-1,1,Be,-Be],$e=Ut?(Dt.minor||{}).ticks:Dt.ticks;return $e!=="inside"==(Te==="x")&&(Je=Je.map(function(Xe){return-Xe})),Dt.side&&Je.push({l:-1,t:-1,r:1,b:1}[Dt.side.charAt(0)]),Je},q.makeTransTickFn=function(Dt){return Dt._id.charAt(0)==="x"?function(Ut){return g(Dt._offset+Dt.l2p(Ut.x),0)}:function(Ut){return g(0,Dt._offset+Dt.l2p(Ut.x))}},q.makeTransTickLabelFn=function(Dt){var Ut=De(Dt),Te=Ut[0],Se=Ut[1];return Dt._id.charAt(0)==="x"?function(Be){return g(Te+Dt._offset+Dt.l2p(Fe(Be)),Se)}:function(Be){return g(Se,Te+Dt._offset+Dt.l2p(Fe(Be)))}};function Fe(Dt){return Dt.periodX!==void 0?Dt.periodX:Dt.x}function De(Dt){var Ut=Dt.ticklabelposition||"",Te=function(Or){return Ut.indexOf(Or)!==-1},Se=Te("top"),Be=Te("left"),Je=Te("right"),$e=Te("bottom"),Xe=Te("inside"),Oe=$e||Be||Se||Je;if(!Oe&&!Xe)return[0,0];var ar=Dt.side,cr=Oe?(Dt.tickwidth||0)/2:0,sr=it,lr=Dt.tickfont?Dt.tickfont.size:12;return($e||Se)&&(cr+=lr*K,sr+=(Dt.linewidth||0)/2),(Be||Je)&&(cr+=(Dt.linewidth||0)/2,sr+=it),Xe&&ar==="top"&&(sr-=lr*(1-K)),(Be||Se)&&(cr=-cr),(ar==="bottom"||ar==="right")&&(sr=-sr),[Oe?cr:0,Xe?sr:0]}q.makeTickPath=function(Dt,Ut,Te,Se){Se||(Se={});var Be=Se.minor;if(Be&&!Dt.minor)return"";var Je=Se.len!==void 0?Se.len:Be?Dt.minor.ticklen:Dt.ticklen,$e=Dt._id.charAt(0),Xe=(Dt.linewidth||1)/2;return $e==="x"?"M0,"+(Ut+Xe*Te)+"v"+Je*Te:"M"+(Ut+Xe*Te)+",0h"+Je*Te},q.makeLabelFns=function(Dt,Ut,Te){var Se=Dt.ticklabelposition||"",Be=function(wn){return Se.indexOf(wn)!==-1},Je=Be("top"),$e=Be("left"),Xe=Be("right"),Oe=Be("bottom"),ar=Oe||$e||Je||Xe,cr=Be("inside"),sr=Se==="inside"&&Dt.ticks==="inside"||!cr&&Dt.ticks==="outside"&&Dt.tickson!=="boundaries",lr=0,Or=0,Ir=sr?Dt.ticklen:0;if(cr?Ir*=-1:ar&&(Ir=0),sr&&(lr+=Ir,Te)){var Pr=A.deg2rad(Te);lr=Ir*Math.cos(Pr)+1,Or=Ir*Math.sin(Pr)}Dt.showticklabels&&(sr||Dt.showline)&&(lr+=.2*Dt.tickfont.size),lr+=(Dt.linewidth||1)/2*(cr?-1:1);var rn={labelStandoff:lr,labelShift:Or},Zr,yn,Tn,hr,dr=0,Lr=Dt.side,Cr=Dt._id.charAt(0),Hr=Dt.tickangle,sn;if(Cr==="x")sn=!cr&&Lr==="bottom"||cr&&Lr==="top",hr=sn?1:-1,cr&&(hr*=-1),Zr=Or*hr,yn=Ut+lr*hr,Tn=sn?1:-.2,Math.abs(Hr)===90&&(cr?Tn+=V:Hr===-90&&Lr==="bottom"?Tn=K:Hr===90&&Lr==="top"?Tn=V:Tn=.5,dr=V/2*(Hr/90)),rn.xFn=function(wn){return wn.dx+Zr+dr*wn.fontSize},rn.yFn=function(wn){return wn.dy+yn+wn.fontSize*Tn},rn.anchorFn=function(wn,Un){if(ar){if($e)return"end";if(Xe)return"start"}return!E(Un)||Un===0||Un===180?"middle":Un*hr<0!==cr?"end":"start"},rn.heightFn=function(wn,Un,qn){return Un<-60||Un>60?-.5*qn:Dt.side==="top"!==cr?-qn:0};else if(Cr==="y"){if(sn=!cr&&Lr==="left"||cr&&Lr==="right",hr=sn?1:-1,cr&&(hr*=-1),Zr=lr,yn=Or*hr,Tn=0,!cr&&Math.abs(Hr)===90&&(Hr===-90&&Lr==="left"||Hr===90&&Lr==="right"?Tn=K:Tn=.5),cr){var Yr=E(Hr)?+Hr:0;if(Yr!==0){var xn=A.deg2rad(Yr);dr=Math.abs(Math.sin(xn))*K*hr,Tn=0}}rn.xFn=function(wn){return wn.dx+Ut-(Zr+wn.fontSize*Tn)*hr+dr*wn.fontSize},rn.yFn=function(wn){return wn.dy+yn+wn.fontSize*V},rn.anchorFn=function(wn,Un){return E(Un)&&Math.abs(Un)===90?"middle":sn?"end":"start"},rn.heightFn=function(wn,Un,qn){return Dt.side==="right"&&(Un*=-1),Un<-30?-qn:Un<30?-.5*qn:0}}return rn};function Ae(Dt){return[Dt.text,Dt.x,Dt.axInfo,Dt.font,Dt.fontSize,Dt.fontColor].join("_")}q.drawTicks=function(Dt,Ut,Te){Te=Te||{};var Se=Ut._id+"tick",Be=[].concat(Ut.minor&&Ut.minor.ticks?Te.vals.filter(function($e){return $e.minor&&!$e.noTick}):[]).concat(Ut.ticks?Te.vals.filter(function($e){return!$e.minor&&!$e.noTick}):[]),Je=Te.layer.selectAll("path."+Se).data(Be,Ae);Je.exit().remove(),Je.enter().append("path").classed(Se,1).classed("ticks",1).classed("crisp",Te.crisp!==!1).each(function($e){return r.stroke(M.select(this),$e.minor?Ut.minor.tickcolor:Ut.tickcolor)}).style("stroke-width",function($e){return f.crispRound(Dt,$e.minor?Ut.minor.tickwidth:Ut.tickwidth,1)+"px"}).attr("d",Te.path).style("display",null),qe(Ut,[R]),Je.attr("transform",Te.transFn)},q.drawGrid=function(Dt,Ut,Te){if(Te=Te||{},Ut.tickmode!=="sync"){var Se=Ut._id+"grid",Be=Ut.minor&&Ut.minor.showgrid,Je=Be?Te.vals.filter(function(Zr){return Zr.minor}):[],$e=Ut.showgrid?Te.vals.filter(function(Zr){return!Zr.minor}):[],Xe=Te.counterAxis;if(Xe&&q.shouldShowZeroLine(Dt,Ut,Xe))for(var Oe=Ut.tickmode==="array",ar=0;ar<$e.length;ar++){var cr=$e[ar].x;if(Oe?!cr:Math.abs(cr)<Ut.dtick/100)if($e=$e.slice(0,ar).concat($e.slice(ar+1)),Oe)ar--;else break}Ut._gw=f.crispRound(Dt,Ut.gridwidth,1);for(var sr=Be?f.crispRound(Dt,Ut.minor.gridwidth,1):0,lr=Te.layer,Or=Te.minorLayer,Ir=1;Ir>=0;Ir--){var Pr=Ir?lr:Or;if(Pr){var rn=Pr.selectAll("path."+Se).data(Ir?$e:Je,Ae);rn.exit().remove(),rn.enter().append("path").classed(Se,1).classed("crisp",Te.crisp!==!1),rn.attr("transform",Te.transFn).attr("d",Te.path).each(function(Zr){return r.stroke(M.select(this),Zr.minor?Ut.minor.gridcolor:Ut.gridcolor||"#ddd")}).style("stroke-dasharray",function(Zr){return f.dashStyle(Zr.minor?Ut.minor.griddash:Ut.griddash,Zr.minor?Ut.minor.gridwidth:Ut.gridwidth)}).style("stroke-width",function(Zr){return(Zr.minor?sr:Ut._gw)+"px"}).style("display",null),typeof Te.path=="function"&&rn.attr("d",Te.path)}}qe(Ut,[B,O])}},q.drawZeroLine=function(Dt,Ut,Te){Te=Te||Te;var Se=Ut._id+"zl",Be=q.shouldShowZeroLine(Dt,Ut,Te.counterAxis),Je=Te.layer.selectAll("path."+Se).data(Be?[{x:0,id:Ut._id}]:[]);Je.exit().remove(),Je.enter().append("path").classed(Se,1).classed("zl",1).classed("crisp",Te.crisp!==!1).each(function(){Te.layer.selectAll("path").sort(function($e,Xe){return G($e.id,Xe.id)})}),Je.attr("transform",Te.transFn).attr("d",Te.path).call(r.stroke,Ut.zerolinecolor||r.defaultLine).style("stroke-width",f.crispRound(Dt,Ut.zerolinewidth,Ut._gw||1)+"px").style("display",null),qe(Ut,[z])},q.drawLabels=function(Dt,Ut,Te){Te=Te||{};var Se=Dt._fullLayout,Be=Ut._id,Je=Be.charAt(0),$e=Te.cls||Be+"tick",Xe=Te.vals.filter(function(hr){return hr.text}),Oe=Te.labelFns,ar=Te.secondary?0:Ut.tickangle,cr=(Ut._prevTickAngles||{})[$e],sr=Te.layer.selectAll("g."+$e).data(Ut.showticklabels?Xe:[],Ae),lr=[];sr.enter().append("g").classed($e,1).append("text").attr("text-anchor","middle").each(function(hr){var dr=M.select(this),Lr=Dt._promises.length;dr.call(v.positionText,Oe.xFn(hr),Oe.yFn(hr)).call(f.font,hr.font,hr.fontSize,hr.fontColor).text(hr.text).call(v.convertToTspans,Dt),Dt._promises[Lr]?lr.push(Dt._promises.pop().then(function(){Or(dr,ar)})):Or(dr,ar)}),qe(Ut,[C]),sr.exit().remove(),Te.repositionOnUpdate&&sr.each(function(hr){M.select(this).select("text").call(v.positionText,Oe.xFn(hr),Oe.yFn(hr))});function Or(hr,dr){hr.each(function(Lr){var Cr=M.select(this),Hr=Cr.select(".text-math-group"),sn=Oe.anchorFn(Lr,dr),Yr=Te.transFn.call(Cr.node(),Lr)+(E(dr)&&+dr!=0?" rotate("+dr+","+Oe.xFn(Lr)+","+(Oe.yFn(Lr)-Lr.fontSize/2)+")":""),xn=v.lineCount(Cr),wn=Q*Lr.fontSize,Un=Oe.heightFn(Lr,E(dr)?+dr:0,(xn-1)*wn);if(Un&&(Yr+=g(0,Un)),Hr.empty()){var qn=Cr.select("text");qn.attr({transform:Yr,"text-anchor":sn}),qn.style("opacity",1),Ut._adjustTickLabelsOverflow&&Ut._adjustTickLabelsOverflow()}else{var ei=f.bBox(Hr.node()).width,Gn=ei*{end:-.5,start:.5}[sn];Hr.attr("transform",Yr+g(Gn,0))}})}Ut._adjustTickLabelsOverflow=function(){var hr=Ut.ticklabeloverflow;if(!(!hr||hr==="allow")){var dr=hr.indexOf("hide")!==-1,Lr=Ut._id.charAt(0)==="x",Cr=0,Hr=Lr?Dt._fullLayout.width:Dt._fullLayout.height;if(hr.indexOf("domain")!==-1){var sn=A.simpleMap(Ut.range,Ut.r2l);Cr=Ut.l2p(sn[0])+Ut._offset,Hr=Ut.l2p(sn[1])+Ut._offset}var Yr=Math.min(Cr,Hr),xn=Math.max(Cr,Hr),wn=Ut.side,Un=1/0,qn=-1/0;sr.each(function(gr){var $r=M.select(this),Jr=$r.select(".text-math-group");if(Jr.empty()){var ln=f.bBox($r.node()),zn=0;Lr?(ln.right>xn||ln.left<Yr)&&(zn=1):(ln.bottom>xn||ln.top+(Ut.tickangle?0:gr.fontSize/4)<Yr)&&(zn=1);var mn=$r.select("text");zn?dr&&mn.style("opacity",0):(mn.style("opacity",1),wn==="bottom"||wn==="right"?Un=Math.min(Un,Lr?ln.top:ln.left):Un=-1/0,wn==="top"||wn==="left"?qn=Math.max(qn,Lr?ln.bottom:ln.right):qn=1/0)}});for(var ei in Se._plots){var Gn=Se._plots[ei];if(!(Ut._id!==Gn.xaxis._id&&Ut._id!==Gn.yaxis._id)){var Hn=Lr?Gn.yaxis:Gn.xaxis;Hn&&(Hn["_visibleLabelMin_"+Ut._id]=Un,Hn["_visibleLabelMax_"+Ut._id]=qn)}}}},Ut._hideCounterAxisInsideTickLabels=function(hr){var dr=Ut._id.charAt(0)==="x",Lr=[];for(var Cr in Se._plots){var Hr=Se._plots[Cr];Ut._id!==Hr.xaxis._id&&Ut._id!==Hr.yaxis._id||Lr.push(dr?Hr.yaxis:Hr.xaxis)}Lr.forEach(function(sn,Yr){sn&&We(sn)&&(hr||[z,O,B,R,C]).forEach(function(xn){var wn=xn.K==="tick"&&xn.L==="text"&&Ut.ticklabelmode==="period",Un=Se._plots[Ut._mainSubplot],qn;xn.K===z.K?qn=Un.zerolinelayer.selectAll("."+Ut._id+"zl"):xn.K===O.K?qn=Un.minorGridlayer.selectAll("."+Ut._id):xn.K===B.K?qn=Un.gridlayer.selectAll("."+Ut._id):qn=Un[Ut._id.charAt(0)+"axislayer"],qn.each(function(){var ei=M.select(this);xn.L&&(ei=ei.selectAll(xn.L)),ei.each(function(Gn){var Hn=Ut.l2p(wn?Fe(Gn):Gn.x)+Ut._offset,gr=M.select(this);Hn<Ut["_visibleLabelMax_"+sn._id]&&Hn>Ut["_visibleLabelMin_"+sn._id]?gr.style("display","none"):xn.K==="tick"&&!Yr&&gr.style("display",null)})})})})},Or(sr,cr+1?cr:ar);function Ir(){return lr.length&&Promise.all(lr)}var Pr=null;function rn(){if(Or(sr,ar),Xe.length&&Je==="x"&&!E(ar)&&(Ut.type!=="log"||String(Ut.dtick).charAt(0)!=="D")){Pr=0;var hr=0,dr=[],Lr;if(sr.each(function(ln){hr=Math.max(hr,ln.fontSize);var zn=Ut.l2p(ln.x),mn=_r(this),Mn=f.bBox(mn.node());dr.push({top:0,bottom:10,height:10,left:zn-Mn.width/2,right:zn+Mn.width/2+2,width:Mn.width+2})}),(Ut.tickson==="boundaries"||Ut.showdividers)&&!Te.secondary){var Cr=2;for(Ut.ticks&&(Cr+=Ut.tickwidth/2),Lr=0;Lr<dr.length;Lr++){var Hr=Xe[Lr].xbnd,sn=dr[Lr];if(Hr[0]!==null&&sn.left-Ut.l2p(Hr[0])<Cr||Hr[1]!==null&&Ut.l2p(Hr[1])-sn.right<Cr){Pr=90;break}}}else{var Yr=Xe.length,xn=Math.abs((Xe[Yr-1].x-Xe[0].x)*Ut._m)/(Yr-1),wn=Ut.ticklabelposition||"",Un=function(ln){return wn.indexOf(ln)!==-1},qn=Un("top"),ei=Un("left"),Gn=Un("right"),Hn=Un("bottom"),gr=Hn||ei||qn||Gn,$r=gr?(Ut.tickwidth||0)+2*it:0,Jr=xn<hr*2.5||Ut.type==="multicategory"||Ut._name==="realaxis";for(Lr=0;Lr<dr.length-1;Lr++)if(A.bBoxIntersect(dr[Lr],dr[Lr+1],$r)){Pr=Jr?90:30;break}}Pr&&Or(sr,Pr)}}Ut._selections&&(Ut._selections[$e]=sr);var Zr=[Ir];Ut.automargin&&Se._redrawFromAutoMarginCount&&cr===90?(Pr=90,Zr.push(function(){Or(sr,cr)})):Zr.push(rn),Ut._tickAngles&&Zr.push(function(){Ut._tickAngles[$e]=Pr===null?E(ar)?ar:0:Pr});var yn=Ut._anchorAxis;yn&&yn.autorange&&We(Ut)&&!et(Se,Ut._id)&&(Se._insideTickLabelsAutorange||(Se._insideTickLabelsAutorange={}),Se._insideTickLabelsAutorange[yn._name+".autorange"]=yn.autorange,Zr.push(function(){sr.each(function(hr,dr){var Lr=_r(this),Cr=Lr.select(".text-math-group");Cr.empty()&&(Ut._vals[dr].bb=f.bBox(Lr.node()))})}));var Tn=A.syncOrAsync(Zr);return Tn&&Tn.then&&Dt._promises.push(Tn),Tn};function Ve(Dt,Ut,Te){var Se=Ut._id+"divider",Be=Te.vals,Je=Te.layer.selectAll("path."+Se).data(Be,Ae);Je.exit().remove(),Je.enter().insert("path",":first-child").classed(Se,1).classed("crisp",1).call(r.stroke,Ut.dividercolor).style("stroke-width",f.crispRound(Dt,Ut.dividerwidth,1)+"px"),Je.attr("transform",Te.transFn).attr("d",Te.path)}q.getPxPosition=function(Dt,Ut){var Te=Dt._fullLayout._size,Se=Ut._id.charAt(0),Be=Ut.side,Je;if(Ut.anchor!=="free"?Je=Ut._anchorAxis:Se==="x"?Je={_offset:Te.t+(1-(Ut.position||0))*Te.h,_length:0}:Se==="y"&&(Je={_offset:Te.l+(Ut.position||0)*Te.w+Ut._shift,_length:0}),Be==="top"||Be==="left")return Je._offset;if(Be==="bottom"||Be==="right")return Je._offset+Je._length};function Qe(Dt){var Ut=Dt.title.font.size,Te=(Dt.title.text.match(v.BR_TAG_ALL)||[]).length;return Dt.title.hasOwnProperty("standoff")?Te?Ut*(K+Te*Q):Ut*K:Te?Ut*(Te+1)*Q:Ut}function Sr(Dt,Ut){var Te=Dt._fullLayout,Se=Ut._id,Be=Se.charAt(0),Je=Ut.title.font.size,$e;if(Ut.title.hasOwnProperty("standoff"))$e=Ut._depth+Ut.title.standoff+Qe(Ut);else{var Xe=We(Ut);if(Ut.type==="multicategory")$e=Ut._depth;else{var Oe=1.5*Je;Xe&&(Oe=.5*Je,Ut.ticks==="outside"&&(Oe+=Ut.ticklen)),$e=10+Oe+(Ut.linewidth?Ut.linewidth-1:0)}Xe||(Be==="x"?$e+=Ut.side==="top"?Je*(Ut.showticklabels?1:0):Je*(Ut.showticklabels?1.5:.5):$e+=Ut.side==="right"?Je*(Ut.showticklabels?1:.5):Je*(Ut.showticklabels?.5:0))}var ar=q.getPxPosition(Dt,Ut),cr,sr,lr;Be==="x"?(sr=Ut._offset+Ut._length/2,lr=Ut.side==="top"?ar-$e:ar+$e):(lr=Ut._offset+Ut._length/2,sr=Ut.side==="right"?ar+$e:ar-$e,cr={rotate:"-90",offset:0});var Or;if(Ut.type!=="multicategory"){var Ir=Ut._selections[Ut._id+"tick"];if(Or={selection:Ir,side:Ut.side},Ir&&Ir.node()&&Ir.node().parentNode){var Pr=f.getTranslate(Ir.node().parentNode);Or.offsetLeft=Pr.x,Or.offsetTop=Pr.y}Ut.title.hasOwnProperty("standoff")&&(Or.pad=0)}return Ut._titleStandoff=$e,e.draw(Dt,Se+"title",{propContainer:Ut,propName:Ut._name+".title.text",placeholder:Te._dfltTitle[Be],avoid:Or,transform:cr,attributes:{x:sr,y:lr,"text-anchor":"middle"}})}q.shouldShowZeroLine=function(Dt,Ut,Te){var Se=A.simpleMap(Ut.range,Ut.r2l);return Se[0]*Se[1]<=0&&Ut.zeroline&&(Ut.type==="linear"||Ut.type==="-")&&!(Ut.rangebreaks&&Ut.maskBreaks(0)===I)&&(he(Ut,0)||!je(Dt,Ut,Te,Se)||Re(Dt,Ut))},q.clipEnds=function(Dt,Ut){return Ut.filter(function(Te){return he(Dt,Te.x)})};function he(Dt,Ut){var Te=Dt.l2p(Ut);return Te>1&&Te<Dt._length-1}function je(Dt,Ut,Te,Se){var Be=Te._mainAxis;if(!Be)return;var Je=Dt._fullLayout,$e=Ut._id.charAt(0),Xe=q.counterLetter(Ut._id),Oe=Ut._offset+(Math.abs(Se[0])<Math.abs(Se[1])==($e==="x")?0:Ut._length);function ar(Ir){if(!Ir.showline||!Ir.linewidth)return!1;var Pr=Math.max((Ir.linewidth+Ut.zerolinewidth)/2,1);function rn(Tn){return typeof Tn=="number"&&Math.abs(Tn-Oe)<Pr}if(rn(Ir._mainLinePosition)||rn(Ir._mainMirrorPosition))return!0;var Zr=Ir._linepositions||{};for(var yn in Zr)if(rn(Zr[yn][0])||rn(Zr[yn][1]))return!0}var cr=Je._plots[Te._mainSubplot];if(!(cr.mainplotinfo||cr).overlays.length)return ar(Te);for(var sr=q.list(Dt,Xe),lr=0;lr<sr.length;lr++){var Or=sr[lr];if(Or._mainAxis===Be&&ar(Or))return!0}}function Re(Dt,Ut){for(var Te=Dt._fullData,Se=Ut._mainSubplot,Be=Ut._id.charAt(0),Je=0;Je<Te.length;Je++){var $e=Te[Je];if($e.visible===!0&&$e.xaxis+$e.yaxis===Se&&(S.traceIs($e,"bar-like")&&$e.orientation==={x:"h",y:"v"}[Be]||$e.fill&&$e.fill.charAt($e.fill.length-1)===Be))return!0}return!1}function _r(Dt){var Ut=M.select(Dt),Te=Ut.select(".text-math-group");return Te.empty()?Ut.select("text"):Te}q.allowAutoMargin=function(Dt){for(var Ut=q.list(Dt,"",!0),Te=0;Te<Ut.length;Te++){var Se=Ut[Te];Se.automargin&&(i.allowAutoMargin(Dt,tr(Se)),Se.mirror&&i.allowAutoMargin(Dt,Gt(Se))),S.getComponentMethod("rangeslider","isVisible")(Se)&&i.allowAutoMargin(Dt,re(Se))}};function tr(Dt){return Dt._id+".automargin"}function Gt(Dt){return tr(Dt)+".mirror"}function re(Dt){return Dt._id+".rangeslider"}q.swap=function(Dt,Ut){for(var Te=fe(Dt,Ut),Se=0;Se<Te.length;Se++)Le(Dt,Te[Se].x,Te[Se].y)};function fe(Dt,Ut){var Te=[],Se,Be;for(Se=0;Se<Ut.length;Se++){var Je=[],$e=Dt._fullData[Ut[Se]].xaxis,Xe=Dt._fullData[Ut[Se]].yaxis;if(!(!$e||!Xe)){for(Be=0;Be<Te.length;Be++)(Te[Be].x.indexOf($e)!==-1||Te[Be].y.indexOf(Xe)!==-1)&&Je.push(Be);if(!Je.length){Te.push({x:[$e],y:[Xe]});continue}var Oe=Te[Je[0]],ar;if(Je.length>1)for(Be=1;Be<Je.length;Be++)ar=Te[Je[Be]],ye(Oe.x,ar.x),ye(Oe.y,ar.y);ye(Oe.x,[$e]),ye(Oe.y,[Xe])}}return Te}function ye(Dt,Ut){for(var Te=0;Te<Ut.length;Te++)Dt.indexOf(Ut[Te])===-1&&Dt.push(Ut[Te])}function Le(Dt,Ut,Te){var Se=[],Be=[],Je=Dt.layout,$e,Xe;for($e=0;$e<Ut.length;$e++)Se.push(q.getFromId(Dt,Ut[$e]));for($e=0;$e<Te.length;$e++)Be.push(q.getFromId(Dt,Te[$e]));var Oe=Object.keys(n),ar=["anchor","domain","overlaying","position","side","tickangle","editType"],cr=["linear","log"];for($e=0;$e<Oe.length;$e++){var sr=Oe[$e],lr=Se[0][sr],Or=Be[0][sr],Ir=!0,Pr=!1,rn=!1;if(!(sr.charAt(0)==="_"||typeof lr=="function"||ar.indexOf(sr)!==-1)){for(Xe=1;Xe<Se.length&&Ir;Xe++){var Zr=Se[Xe][sr];sr==="type"&&cr.indexOf(lr)!==-1&&cr.indexOf(Zr)!==-1&&lr!==Zr?Pr=!0:Zr!==lr&&(Ir=!1)}for(Xe=1;Xe<Be.length&&Ir;Xe++){var yn=Be[Xe][sr];sr==="type"&&cr.indexOf(Or)!==-1&&cr.indexOf(yn)!==-1&&Or!==yn?rn=!0:Be[Xe][sr]!==Or&&(Ir=!1)}Ir&&(Pr&&(Je[Se[0]._name].type="linear"),rn&&(Je[Be[0]._name].type="linear"),_e(Je,sr,Se,Be,Dt._fullLayout._dfltTitle))}}for($e=0;$e<Dt._fullLayout.annotations.length;$e++){var Tn=Dt._fullLayout.annotations[$e];Ut.indexOf(Tn.xref)!==-1&&Te.indexOf(Tn.yref)!==-1&&A.swapAttrs(Je.annotations[$e],["?"])}}function _e(Dt,Ut,Te,Se,Be){var Je=A.nestedProperty,$e=Je(Dt[Te[0]._name],Ut).get(),Xe=Je(Dt[Se[0]._name],Ut).get(),Oe;for(Ut==="title"&&($e&&$e.text===Be.x&&($e.text=Be.y),Xe&&Xe.text===Be.y&&(Xe.text=Be.x)),Oe=0;Oe<Te.length;Oe++)Je(Dt,Te[Oe]._name+"."+Ut).set(Xe);for(Oe=0;Oe<Se.length;Oe++)Je(Dt,Se[Oe]._name+"."+Ut).set($e)}function Ce(Dt){return Dt._id==="angularaxis"}function ze(Dt,Ut){for(var Te=Ut._rangebreaks.length,Se=0;Se<Te;Se++){var Be=Ut._rangebreaks[Se];if(Dt>=Be.min&&Dt<Be.max)return Be.max}return Dt}function We(Dt){return(Dt.ticklabelposition||"").indexOf("inside")!==-1}function qe(Dt,Ut){We(Dt._anchorAxis||{})&&Dt._hideCounterAxisInsideTickLabels&&Dt._hideCounterAxisInsideTickLabels(Ut)}function ir(Dt,Ut,Te,Se){var Be=Dt.anchor!=="free"&&(Dt.overlaying===void 0||Dt.overlaying===!1)?Dt._id:Dt.overlaying,Je;Se?Je=Dt.side==="right"?Ut:-Ut:Je=Ut,Be in Te||(Te[Be]={}),Dt.side in Te[Be]||(Te[Be][Dt.side]=0),Te[Be][Dt.side]+=Je}function xr(Dt,Ut){return Dt.autoshift?Ut[Dt.overlaying][Dt.side]:Dt.shift||0}},4322:function($,U,t){var M=t(92770),E=t(71828),i=t(50606).BADNUM,S=E.isArrayOrTypedArray,A=E.isDateTime,g=E.cleanNumber,v=Math.round;$.exports=function(h,y,p){var x=h,s=p.noMultiCategory;if(S(x)&&!x.length)return"-";if(!s&&o(x))return"multicategory";if(s&&Array.isArray(x[0])){for(var u=[],c=0;c<x.length;c++)if(S(x[c]))for(var T=0;T<x[c].length;T++)u.push(x[c][T]);x=u}if(f(x,y))return"date";var k=p.autotypenumbers!=="strict";return a(x,k)?"category":r(x,k)?"linear":"-"};function e(h,y){return y?M(h):typeof h=="number"}function r(h,y){for(var p=h.length,x=0;x<p;x++)if(e(h[x],y))return!0;return!1}function f(h,y){for(var p=h.length,x=n(p),s=0,u=0,c={},T=0;T<p;T+=x){var k=v(T),_=h[k],b=String(_);c[b]||(c[b]=1,A(_,y)&&s++,M(_)&&u++)}return s>u*2}function n(h){return Math.max(1,(h-1)/1e3)}function a(h,y){for(var p=h.length,x=n(p),s=0,u=0,c={},T=0;T<p;T+=x){var k=v(T),_=h[k],b=String(_);if(!c[b]){c[b]=1;var P=typeof _;P==="boolean"?u++:(y?g(_)!==i:P==="number")?s++:P==="string"&&u++}}return u>s*2}function o(h){return S(h[0])&&S(h[1])}},71453:function($,U,t){var M=t(92770),E=t(73972),i=t(71828),S=t(44467),A=t(85501),g=t(13838),v=t(26218),e=t(38701),r=t(96115),f=t(89426),n=t(15258),a=t(92128),o=t(21994),h=t(85555).WEEKDAY_PATTERN,y=t(85555).HOUR_PATTERN;$.exports=function(u,c,T,k,_){var b=k.letter,P=k.font||{},l=k.splomStash||{},d=T("visible",!k.visibleDflt),L=c._template||{},w=c.type||L.type||"-",I;if(w==="date"){var z=E.getComponentMethod("calendars","handleDefaults");z(u,c,"calendar",k.calendar),k.noTicklabelmode||(I=T("ticklabelmode"))}var B="";(!k.noTicklabelposition||w==="multicategory")&&(B=i.coerce(u,c,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:I==="period"?["outside","inside"]:b==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),k.noTicklabeloverflow||T("ticklabeloverflow",B.indexOf("inside")!==-1?"hide past domain":w==="category"||w==="multicategory"?"allow":"hide past div"),o(c,_);var O=!c.isValidRange(u.range);O&&k.reverseDflt&&(O="reversed");var R=T("autorange",O);R&&(w==="linear"||w==="-")&&T("rangemode"),T("range"),c.cleanRange(),n(u,c,T,k),w!=="category"&&!k.noHover&&T("hoverformat");var C=T("color"),F=C!==g.color.dflt?C:P.color,N=l.label||_._dfltTitle[b];if(f(u,c,T,w,k),!d)return c;T("title.text",N),i.coerceFont(T,"title.font",{family:P.family,size:i.bigFont(P.size),color:F}),v(u,c,T,w);var V=k.hasMinor;if(V&&(S.newContainer(c,"minor"),v(u,c,T,w,{isMinor:!0})),r(u,c,T,w,k),e(u,c,T,k),V){var K=k.isMinor;k.isMinor=!0,e(u,c,T,k),k.isMinor=K}a(u,c,T,{dfltColor:C,bgColor:k.bgColor,showGrid:k.showGrid,hasMinor:V,attributes:g}),V&&!c.minor.ticks&&!c.minor.showgrid&&delete c.minor,(c.showline||c.ticks)&&T("mirror");var Q=w==="multicategory";if(!k.noTickson&&(w==="category"||Q)&&(c.ticks||c.showgrid)){var at;Q&&(at="boundaries");var it=T("tickson",at);it==="boundaries"&&delete c.ticklabelposition}if(Q){var q=T("showdividers");q&&(T("dividercolor"),T("dividerwidth"))}if(w==="date")if(A(u,c,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:p}),!c.rangebreaks.length)delete c.rangebreaks;else{for(var W=0;W<c.rangebreaks.length;W++)if(c.rangebreaks[W].pattern===h){c._hasDayOfWeekBreaks=!0;break}if(o(c,_),_._has("scattergl")||_._has("splom"))for(var Z=0;Z<k.data.length;Z++){var G=k.data[Z];(G.type==="scattergl"||G.type==="splom")&&(G.visible=!1,i.warn(G.type+" traces do not work on axes with rangebreaks. Setting trace "+G.index+" to `visible: false`."))}}return c};function p(u,c,T){function k(z,B){return i.coerce(u,c,g.rangebreaks,z,B)}var _=k("enabled");if(_){var b=k("bounds");if(b&&b.length>=2){var P="",l,d;if(b.length===2){for(l=0;l<2;l++)if(d=s(b[l]),d){P=h;break}}var L=k("pattern",P);if(L===h)for(l=0;l<2;l++)d=s(b[l]),d&&(c.bounds[l]=b[l]=d-1);if(L)for(l=0;l<2;l++)switch(d=b[l],L){case h:if(!M(d)){c.enabled=!1;return}if(d=+d,d!==Math.floor(d)||d<0||d>=7){c.enabled=!1;return}c.bounds[l]=b[l]=d;break;case y:if(!M(d)){c.enabled=!1;return}if(d=+d,d<0||d>24){c.enabled=!1;return}c.bounds[l]=b[l]=d;break}if(T.autorange===!1){var w=T.range;if(w[0]<w[1]){if(b[0]<w[0]&&b[1]>w[1]){c.enabled=!1;return}}else if(b[0]>w[0]&&b[1]<w[1]){c.enabled=!1;return}}}else{var I=k("values");if(I&&I.length)k("dvalue");else{c.enabled=!1;return}}}}var x={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function s(u){if(typeof u=="string")return x[u.substr(0,3).toLowerCase()]}},12663:function($,U,t){var M=t(31562),E=M.FORMAT_LINK,i=M.DATE_FORMAT_LINK;function S(v,e){return{valType:"string",dflt:"",editType:"none",description:(e?A:g)("hover text",v)+["By default the values are formatted using "+(e?"generic number format":"`"+v+"axis.hoverformat`")+"."].join(" ")}}function A(v,e){return["Sets the "+v+" formatting rule"+(e?"for `"+e+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+E+"."].join(" ")}function g(v,e){return A(v,e)+[" And for dates see: "+i+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}$.exports={axisHoverFormat:S,descriptionOnlyNumbers:A,descriptionWithDates:g}},41675:function($,U,t){var M=t(73972),E=t(85555);U.id2name=function(S){if(!(typeof S!="string"||!S.match(E.AX_ID_PATTERN))){var A=S.split(" ")[0].substr(1);return A==="1"&&(A=""),S.charAt(0)+"axis"+A}},U.name2id=function(S){if(S.match(E.AX_NAME_PATTERN)){var A=S.substr(5);return A==="1"&&(A=""),S.charAt(0)+A}},U.cleanId=function(S,A,g){var v=/( domain)$/.test(S);if(!(typeof S!="string"||!S.match(E.AX_ID_PATTERN))&&!(A&&S.charAt(0)!==A)&&!(v&&!g)){var e=S.split(" ")[0].substr(1).replace(/^0+/,"");return e==="1"&&(e=""),S.charAt(0)+e+(v&&g?" domain":"")}},U.list=function(S,A,g){var v=S._fullLayout;if(!v)return[];var e=U.listIds(S,A),r=new Array(e.length),f;for(f=0;f<e.length;f++){var n=e[f];r[f]=v[n.charAt(0)+"axis"+n.substr(1)]}if(!g){var a=v._subplots.gl3d||[];for(f=0;f<a.length;f++){var o=v[a[f]];A?r.push(o[A+"axis"]):r.push(o.xaxis,o.yaxis,o.zaxis)}}return r},U.listIds=function(S,A){var g=S._fullLayout;if(!g)return[];var v=g._subplots;return A?v[A+"axis"]:v.xaxis.concat(v.yaxis)},U.getFromId=function(S,A,g){var v=S._fullLayout;return A=A===void 0||typeof A!="string"?A:A.replace(" domain",""),g==="x"?A=A.replace(/y[0-9]*/,""):g==="y"&&(A=A.replace(/x[0-9]*/,"")),v[U.id2name(A)]},U.getFromTrace=function(S,A,g){var v=S._fullLayout,e=null;if(M.traceIs(A,"gl3d")){var r=A.scene;r.substr(0,5)==="scene"&&(e=v[r][g+"axis"])}else e=U.getFromId(S,A[g+"axis"]||g);return e},U.idSort=function(S,A){var g=S.charAt(0),v=A.charAt(0);return g!==v?g>v?1:-1:+(S.substr(1)||1)-+(A.substr(1)||1)},U.ref2id=function(S){return/^[xyz]/.test(S)?S.split(" ")[0]:!1};function i(S,A){if(A&&A.length){for(var g=0;g<A.length;g++)if(A[g][S])return!0}return!1}U.isLinked=function(S,A){return i(A,S._axisMatchGroups)||i(A,S._axisConstraintGroups)}},15258:function($){function U(t,M){var E=M.dataAttr||t._id.charAt(0),i={},S,A,g;if(M.axData)S=M.axData;else for(S=[],A=0;A<M.data.length;A++){var v=M.data[A];v[E+"axis"]===t._id&&S.push(v)}for(A=0;A<S.length;A++){var e=S[A][E];for(g=0;g<e.length;g++){var r=e[g];r!=null&&(i[r]=1)}}return Object.keys(i)}$.exports=function(t,M,E,i){if(M.type==="category"){var S=t.categoryarray,A=Array.isArray(S)&&S.length>0,g;A&&(g="array");var v=E("categoryorder",g),e;v==="array"&&(e=E("categoryarray")),!A&&v==="array"&&(v=M.categoryorder="trace"),v==="trace"?M._initialCategories=[]:v==="array"?M._initialCategories=e.slice():(e=U(M,i).sort(),v==="category ascending"?M._initialCategories=e:v==="category descending"&&(M._initialCategories=e.reverse()))}}},66287:function($,U,t){var M=t(92770),E=t(71828),i=t(50606),S=i.ONEDAY,A=i.ONEWEEK;U.dtick=function(g,v){var e=v==="log",r=v==="date",f=v==="category",n=r?S:1;if(!g)return n;if(M(g))return g=Number(g),g<=0?n:f?Math.max(1,Math.round(g)):r?Math.max(.1,g):g;if(typeof g!="string"||!(r||e))return n;var a=g.charAt(0),o=g.substr(1);return o=M(o)?Number(o):0,o<=0||!(r&&a==="M"&&o===Math.round(o)||e&&a==="L"||e&&a==="D"&&(o===1||o===2))?n:g},U.tick0=function(g,v,e,r){if(v==="date")return E.cleanDate(g,E.dateTick0(e,r%A===0?1:0));if(!(r==="D1"||r==="D2"))return M(g)?Number(g):0}},85555:function($,U,t){var M=t(30587).counter;$.exports={idRegex:{x:M("x","( domain)?"),y:M("y","( domain)?")},attrRegex:M("[xy]axis"),xAxisMatch:M("xaxis"),yAxisMatch:M("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},99082:function($,U,t){var M=t(71828),E=t(71739),i=t(41675).id2name,S=t(13838),A=t(42449),g=t(21994),v=t(50606).ALMOST_EQUAL,e=t(18783).FROM_BL;U.handleDefaults=function(p,x,s){var u=s.axIds,c=s.axHasImage,T=x._axisConstraintGroups=[],k=x._axisMatchGroups=[],_,b,P,l,d,L,w,I;for(_=0;_<u.length;_++)l=i(u[_]),d=p[l],L=x[l],r(d,L,{axIds:u,layoutOut:x,hasImage:c[l]});function z(Q,at){for(_=0;_<Q.length;_++){b=Q[_];for(P in b)x[i(P)][at]=b}}for(z(k,"_matchGroup"),_=0;_<T.length;_++){b=T[_];for(P in b)if(L=x[i(P)],L.fixedrange){for(var B in b){var O=i(B);(p[O]||{}).fixedrange===!1&&M.warn("fixedrange was specified as false for axis "+O+" but was overridden because another axis in its constraint group has fixedrange true"),x[O].fixedrange=!0}break}}for(_=0;_<T.length;){b=T[_];for(P in b){L=x[i(P)],L._matchGroup&&Object.keys(L._matchGroup).length===Object.keys(b).length&&(T.splice(_,1),_--);break}_++}z(T,"_constraintGroup");var R=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],C=!1,F=!1;function N(){I=L[w],w==="rangebreaks"&&(F=L._hasDayOfWeekBreaks)}for(_=0;_<k.length;_++){b=k[_];for(var V=0;V<R.length;V++){w=R[V],I=null;var K;for(P in b)if(l=i(P),d=p[l],L=x[l],w in L){if(!L.matches&&(K=L,w in d)){N();break}I===null&&w in d&&N()}if(w==="range"&&I&&(C=!0),w==="autorange"&&I===null&&C&&(I=!1),I===null&&w in K&&(I=K[w]),I!==null)for(P in b)L=x[i(P)],L[w]=w==="range"?I.slice():I,w==="rangebreaks"&&(L._hasDayOfWeekBreaks=F,g(L,x))}}};function r(p,x,s){var u=s.axIds,c=s.layoutOut,T=s.hasImage,k=c._axisConstraintGroups,_=c._axisMatchGroups,b=x._id,P=b.charAt(0),l=((c._splomAxes||{})[P]||{})[b]||{},d=x._id,L=d.charAt(0)==="x";x._matchGroup=null,x._constraintGroup=null;function w(W,Z){return M.coerce(p,x,S,W,Z)}w("constrain",T?"domain":"range"),M.coerce(p,x,{constraintoward:{valType:"enumerated",values:L?["left","center","right"]:["bottom","middle","top"],dflt:L?"center":"middle"}},"constraintoward");var I=x.type,z,B,O=[];for(z=0;z<u.length;z++)if(B=u[z],B!==d){var R=c[i(B)];R.type===I&&O.push(B)}var C=n(k,d);if(C){var F=[];for(z=0;z<O.length;z++)B=O[z],C[B]||F.push(B);O=F}var N=O.length,V,K;N&&(p.matches||l.matches)&&(V=M.coerce(p,x,{matches:{valType:"enumerated",values:O,dflt:O.indexOf(l.matches)!==-1?l.matches:void 0}},"matches"));var Q=T&&!L?x.anchor:void 0;if(N&&!V&&(p.scaleanchor||Q)&&(K=M.coerce(p,x,{scaleanchor:{valType:"enumerated",values:O}},"scaleanchor",Q)),V){x._matchGroup=a(_,d,V,1);var at=c[i(V)],it=f(c,x)/f(c,at);L!==(V.charAt(0)==="x")&&(it=(L?"x":"y")+it),a(k,d,V,it)}else p.matches&&u.indexOf(p.matches)!==-1&&M.warn("ignored "+x._name+'.matches: "'+p.matches+'" to avoid an infinite loop');if(K){var q=w("scaleratio");q||(q=x.scaleratio=1),a(k,d,K,q)}else p.scaleanchor&&u.indexOf(p.scaleanchor)!==-1&&M.warn("ignored "+x._name+'.scaleanchor: "'+p.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function f(p,x){var s=x.domain;return s||(s=p[i(x.overlaying)].domain),s[1]-s[0]}function n(p,x){for(var s=0;s<p.length;s++)if(p[s][x])return p[s];return null}function a(p,x,s,u){var c,T,k,_,b,P=n(p,x);P===null?(P={},P[x]=1,b=p.length,p.push(P)):b=p.indexOf(P);var l=Object.keys(P);for(c=0;c<p.length;c++)if(k=p[c],c!==b&&k[s]){var d=k[s];for(T=0;T<l.length;T++)_=l[T],k[_]=o(d,o(u,P[_]));p.splice(b,1);return}if(u!==1)for(T=0;T<l.length;T++){var L=l[T];P[L]=o(u,P[L])}P[s]=1}function o(p,x){var s="",u="",c,T;typeof p=="string"&&(s=p.match(/^[xy]*/)[0],c=s.length,p=+p.substr(c)),typeof x=="string"&&(u=x.match(/^[xy]*/)[0],T=u.length,x=+x.substr(T));var k=p*x;return!c&&!T?k:!c||!T||s.charAt(0)===u.charAt(0)?s+u+p*x:c===T?k:(c>T?s.substr(T):u.substr(c))+k}function h(p,x){for(var s=x._size,u=s.h/s.w,c={},T=Object.keys(p),k=0;k<T.length;k++){var _=T[k],b=p[_];if(typeof b=="string"){var P=b.match(/^[xy]*/)[0],l=P.length;b=+b.substr(l);for(var d=P.charAt(0)==="y"?u:1/u,L=0;L<l;L++)b*=d}c[_]=b}return c}U.enforce=function(p){var x=p._fullLayout,s=x._axisConstraintGroups||[],u,c,T,k,_,b,P,l;for(u=0;u<s.length;u++){T=h(s[u],x);var d=Object.keys(T),L=1/0,w=0,I=1/0,z={},B={},O=!1;for(c=0;c<d.length;c++)k=d[c],B[k]=_=x[i(k)],_._inputDomain?_.domain=_._inputDomain.slice():_._inputDomain=_.domain.slice(),_._inputRange||(_._inputRange=_.range.slice()),_.setScale(),z[k]=b=Math.abs(_._m)/T[k],L=Math.min(L,b),(_.constrain==="domain"||!_._constraintShrinkable)&&(I=Math.min(I,b)),delete _._constraintShrinkable,w=Math.max(w,b),_.constrain==="domain"&&(O=!0);if(!(L>v*w&&!O)){for(c=0;c<d.length;c++)if(k=d[c],b=z[k],_=B[k],P=_.constrain,b!==I||P==="domain")if(l=b/I,P==="range")A(_,l);else{var R=_._inputDomain,C=(_.domain[1]-_.domain[0])/(R[1]-R[0]),F=(_.r2l(_.range[1])-_.r2l(_.range[0]))/(_.r2l(_._inputRange[1])-_.r2l(_._inputRange[0]));if(l/=C,l*F<1){_.domain=_._input.domain=R.slice(),A(_,l);continue}if(F<1&&(_.range=_._input.range=_._inputRange.slice(),l*=F),_.autorange){var N=_.r2l(_.range[0]),V=_.r2l(_.range[1]),K=(N+V)/2,Q=K,at=K,it=Math.abs(V-K),q=K-it*l*1.0001,W=K+it*l*1.0001,Z=E.makePadFn(x,_,0),G=E.makePadFn(x,_,1);y(_,l);var et=Math.abs(_._m),nt=E.concatExtremes(p,_),X=nt.min,Y=nt.max,ot,rt;for(rt=0;rt<X.length;rt++)ot=X[rt].val-Z(X[rt])/et,ot>q&&ot<Q&&(Q=ot);for(rt=0;rt<Y.length;rt++)ot=Y[rt].val+G(Y[rt])/et,ot<W&&ot>at&&(at=ot);var ht=(at-Q)/(2*it);l/=ht,Q=_.l2r(Q),at=_.l2r(at),_.range=_._input.range=N<V?[Q,at]:[at,Q]}y(_,l)}}}},U.getAxisGroup=function(p,x){for(var s=p._axisMatchGroups,u=0;u<s.length;u++){var c=s[u];if(c[x])return"g"+u}return x},U.clean=function(p,x){if(x._inputDomain){for(var s=!1,u=x._id,c=p._fullLayout._axisConstraintGroups,T=0;T<c.length;T++)if(c[T][u]){s=!0;break}(!s||x.constrain!=="domain")&&(x._input.domain=x.domain=x._inputDomain,delete x._inputDomain)}};function y(p,x){var s=p._inputDomain,u=e[p.constraintoward],c=s[0]+(s[1]-s[0])*u;p.domain=p._input.domain=[c+(s[0]-c)/x,c+(s[1]-c)/x],p.setScale()}},29323:function($,U,t){var M=t(39898),E=t(71828),i=E.numberFormat,S=t(84267),A=t(38520),g=t(73972),v=E.strTranslate,e=t(63893),r=t(7901),f=t(91424),n=t(30211),a=t(89298),o=t(6964),h=t(28569),y=t(64505),p=y.selectingOrDrawing,x=y.freeMode,s=t(18783).FROM_TL,u=t(33306),c=t(61549).redrawReglTraces,T=t(74875),k=t(41675).getFromId,_=t(47322).prepSelect,b=t(47322).clearOutline,P=t(47322).selectOnClick,l=t(42449),d=t(85555),L=d.MINDRAG,w=d.MINZOOM,I=!0;function z(rt,ht,pt,yt,xt,Ft,Et,mt){var gt=rt._fullLayout._zoomlayer,wt=Et+mt==="nsew",Pt=(Et+mt).length===1,Bt,kt,jt,Ht,Vt,ee,te,ae,le,ce,pe,we,ve,Mt,It,Rt,zt,Tt,ft,ut,vt,St,Ot;pt+=ht.yaxis._shift;function Xt(){if(Bt=ht.xaxis,kt=ht.yaxis,le=Bt._length,ce=kt._length,te=Bt._offset,ae=kt._offset,jt={},jt[Bt._id]=Bt,Ht={},Ht[kt._id]=kt,Et&&mt)for(var Xe=ht.overlays,Oe=0;Oe<Xe.length;Oe++){var ar=Xe[Oe].xaxis;jt[ar._id]=ar;var cr=Xe[Oe].yaxis;Ht[cr._id]=cr}Vt=ot(jt),ee=ot(Ht),ve=R(Vt,mt),Mt=R(ee,Et),It=!Mt&&!ve,we=X(rt,rt._fullLayout._axisMatchGroups,jt,Ht),pe=X(rt,rt._fullLayout._axisConstraintGroups,jt,Ht,we);var sr=pe.isSubplotConstrained||we.isSubplotConstrained;Rt=mt||sr,zt=Et||sr;var lr=rt._fullLayout;Tt=lr._has("scattergl"),ft=lr._has("splom"),ut=lr._has("svg")}Xt();var $t=K(Mt+ve,rt._fullLayout.dragmode,wt),de=O(ht,Et+mt+"drag",$t,pt,yt,xt,Ft);if(It&&!wt)return de.onmousedown=null,de.style.pointerEvents="none",de;var Me={element:de,gd:rt,plotinfo:ht};Me.prepFn=function(Xe,Oe,ar){var cr=Me.dragmode,sr=rt._fullLayout.dragmode;sr!==cr&&(Me.dragmode=sr),Xt(),St=rt._fullLayout._invScaleX,Ot=rt._fullLayout._invScaleY,It||(wt?Xe.shiftKey?sr==="pan"?sr="zoom":p(sr)||(sr="pan"):Xe.ctrlKey&&(sr="pan"):sr="pan"),x(sr)?Me.minDrag=1:Me.minDrag=void 0,p(sr)?(Me.xaxes=Vt,Me.yaxes=ee,_(Xe,Oe,ar,Me,sr)):(Me.clickFn=De,p(cr)&&Fe(),It||(sr==="zoom"?(Me.moveFn=fe,Me.doneFn=Le,Me.minDrag=1,re(Xe,Oe,ar)):sr==="pan"&&(Me.moveFn=ir,Me.doneFn=Te))),rt._fullLayout._redrag=function(){var lr=rt._dragdata;if(lr&&lr.element===de){var Or=rt._fullLayout.dragmode;p(Or)||(Xt(),Se([0,0,le,ce]),Me.moveFn(lr.dx,lr.dy))}}};function Fe(){Me.plotinfo.selection=!1,b(rt)}function De(Xe,Oe){var ar=Me.gd;if(ar._fullLayout._activeShapeIndex>=0){ar._fullLayout._deactivateShape(ar);return}var cr=ar._fullLayout.clickmode;if(W(ar),Xe===2&&!Pt&&Ut(),wt)cr.indexOf("select")>-1&&P(Oe,ar,Vt,ee,ht.id,Me),cr.indexOf("event")>-1&&n.click(ar,Oe,ht.id);else if(Xe===1&&Pt){var sr=Et?kt:Bt,lr=Et==="s"||mt==="w"?0:1,Or=sr._name+".range["+lr+"]",Ir=C(sr,lr),Pr="left",rn="middle";if(sr.fixedrange)return;Et?(rn=Et==="n"?"top":"bottom",sr.side==="right"&&(Pr="right")):mt==="e"&&(Pr="right"),ar._context.showAxisRangeEntryBoxes&&M.select(de).call(e.makeEditable,{gd:ar,immediate:!0,background:ar._fullLayout.paper_bgcolor,text:String(Ir),fill:sr.tickfont?sr.tickfont.color:"#444",horizontalAlign:Pr,verticalAlign:rn}).on("edit",function(Zr){var yn=sr.d2r(Zr);yn!==void 0&&g.call("_guiRelayout",ar,Or,yn)})}}h.init(Me);var Ae,Ve,Qe,Sr,he,je,Re,_r,tr,Gt;function re(Xe,Oe,ar){var cr=de.getBoundingClientRect();Ae=Oe-cr.left,Ve=ar-cr.top,rt._fullLayout._calcInverseTransform(rt);var sr=E.apply3DTransform(rt._fullLayout._invTransform)(Ae,Ve);Ae=sr[0],Ve=sr[1],Qe={l:Ae,r:Ae,w:0,t:Ve,b:Ve,h:0},Sr=rt._hmpixcount?rt._hmlumcount/rt._hmpixcount:S(rt._fullLayout.plot_bgcolor).getLuminance(),he="M0,0H"+le+"V"+ce+"H0V0",je=!1,Re="xy",Gt=!1,_r=Q(gt,Sr,te,ae,he),tr=at(gt,te,ae)}function fe(Xe,Oe){if(rt._transitioningWithDuration)return!1;var ar=Math.max(0,Math.min(le,St*Xe+Ae)),cr=Math.max(0,Math.min(ce,Ot*Oe+Ve)),sr=Math.abs(ar-Ae),lr=Math.abs(cr-Ve);Qe.l=Math.min(Ae,ar),Qe.r=Math.max(Ae,ar),Qe.t=Math.min(Ve,cr),Qe.b=Math.max(Ve,cr);function Or(){Re="",Qe.r=Qe.l,Qe.t=Qe.b,tr.attr("d","M0,0Z")}if(pe.isSubplotConstrained)sr>w||lr>w?(Re="xy",sr/le>lr/ce?(lr=sr*ce/le,Ve>cr?Qe.t=Ve-lr:Qe.b=Ve+lr):(sr=lr*le/ce,Ae>ar?Qe.l=Ae-sr:Qe.r=Ae+sr),tr.attr("d",nt(Qe))):Or();else if(we.isSubplotConstrained)if(sr>w||lr>w){Re="xy";var Ir=Math.min(Qe.l/le,(ce-Qe.b)/ce),Pr=Math.max(Qe.r/le,(ce-Qe.t)/ce);Qe.l=Ir*le,Qe.r=Pr*le,Qe.b=(1-Ir)*ce,Qe.t=(1-Pr)*ce,tr.attr("d",nt(Qe))}else Or();else!Mt||lr<Math.min(Math.max(sr*.6,L),w)?sr<L||!ve?Or():(Qe.t=0,Qe.b=ce,Re="x",tr.attr("d",G(Qe,Ve))):!ve||sr<Math.min(lr*.6,w)?(Qe.l=0,Qe.r=le,Re="y",tr.attr("d",et(Qe,Ae))):(Re="xy",tr.attr("d",nt(Qe)));Qe.w=Qe.r-Qe.l,Qe.h=Qe.b-Qe.t,Re&&(Gt=!0),rt._dragged=Gt,it(_r,tr,Qe,he,je,Sr),ye(),rt.emit("plotly_relayouting",vt),je=!0}function ye(){vt={},(Re==="xy"||Re==="x")&&(F(Vt,Qe.l/le,Qe.r/le,vt,pe.xaxes),xr("x",vt)),(Re==="xy"||Re==="y")&&(F(ee,(ce-Qe.b)/ce,(ce-Qe.t)/ce,vt,pe.yaxes),xr("y",vt))}function Le(){ye(),W(rt),Te(),Z(rt)}var _e=[0,0,le,ce],Ce=null,ze=d.REDRAWDELAY,We=ht.mainplot?rt._fullLayout._plots[ht.mainplot]:ht;function qe(Xe){if(!rt._context._scrollZoom.cartesian&&!rt._fullLayout._enablescrollzoom)return;if(Fe(),rt._transitioningWithDuration){Xe.preventDefault(),Xe.stopPropagation();return}Xt(),clearTimeout(Ce);var Oe=-Xe.deltaY;if(isFinite(Oe)||(Oe=Xe.wheelDelta/10),!isFinite(Oe)){E.log("Did not find wheel motion attributes: ",Xe);return}var ar=Math.exp(-Math.min(Math.max(Oe,-20),20)/200),cr=We.draglayer.select(".nsewdrag").node().getBoundingClientRect(),sr=(Xe.clientX-cr.left)/cr.width,lr=(cr.bottom-Xe.clientY)/cr.height,Or;function Ir(Pr,rn,Zr){if(Pr.fixedrange)return;var yn=E.simpleMap(Pr.range,Pr.r2l),Tn=yn[0]+(yn[1]-yn[0])*rn;function hr(dr){return Pr.l2r(Tn+(dr-Tn)*Zr)}Pr.range=yn.map(hr)}if(Rt){for(mt||(sr=.5),Or=0;Or<Vt.length;Or++)Ir(Vt[Or],sr,ar);xr("x"),_e[2]*=ar,_e[0]+=_e[2]*sr*(1/ar-1)}if(zt){for(Et||(lr=.5),Or=0;Or<ee.length;Or++)Ir(ee[Or],lr,ar);xr("y"),_e[3]*=ar,_e[1]+=_e[3]*(1-lr)*(1/ar-1)}Se(_e),Dt(),rt.emit("plotly_relayouting",vt),Ce=setTimeout(function(){rt._fullLayout&&(_e=[0,0,le,ce],Te())},ze),Xe.preventDefault()}Et.length*mt.length!==1&&Y(de,qe);function ir(Xe,Oe){if(Xe=Xe*St,Oe=Oe*Ot,rt._transitioningWithDuration)return;if(rt._fullLayout._replotting=!0,ve==="ew"||Mt==="ns"){var ar=ve?-Xe:0,cr=Mt?-Oe:0;if(we.isSubplotConstrained){if(ve&&Mt){var sr=(Xe/le-Oe/ce)/2;Xe=sr*le,Oe=-sr*ce,ar=-Xe,cr=-Oe}Mt?ar=-cr*le/ce:cr=-ar*ce/le}ve&&(N(Vt,Xe),xr("x")),Mt&&(N(ee,Oe),xr("y")),Se([ar,cr,le,ce]),Dt(),rt.emit("plotly_relayouting",vt);return}function lr(hr,dr,Lr){for(var Cr=1-dr,Hr,sn,Yr=0;Yr<hr.length;Yr++){var xn=hr[Yr];if(!xn.fixedrange){Hr=xn,sn=xn._rl[Cr]+(xn._rl[dr]-xn._rl[Cr])/V(Lr/xn._length);var wn=xn.l2r(sn);wn!==!1&&wn!==void 0&&(xn.range[dr]=wn)}}return Hr._length*(Hr._rl[dr]-sn)/(Hr._rl[dr]-Hr._rl[Cr])}var Or=ve==="w"==(Mt==="n")?1:-1;if(ve&&Mt&&(pe.isSubplotConstrained||we.isSubplotConstrained)){var Ir=(Xe/le+Or*Oe/ce)/2;Xe=Ir*le,Oe=Or*Ir*ce}var Pr,rn;if(ve==="w"?Xe=lr(Vt,0,Xe):ve==="e"?Xe=lr(Vt,1,-Xe):ve||(Xe=0),Mt==="n"?Oe=lr(ee,1,Oe):Mt==="s"?Oe=lr(ee,0,-Oe):Mt||(Oe=0),Pr=ve==="w"?Xe:0,rn=Mt==="n"?Oe:0,pe.isSubplotConstrained&&!we.isSubplotConstrained||we.isSubplotConstrained&&ve&&Mt&&Or>0){var Zr;if(we.isSubplotConstrained||!ve&&Mt.length===1){for(Zr=0;Zr<Vt.length;Zr++)Vt[Zr].range=Vt[Zr]._r.slice(),l(Vt[Zr],1-Oe/ce);Xe=Oe*le/ce,Pr=Xe/2}if(we.isSubplotConstrained||!Mt&&ve.length===1){for(Zr=0;Zr<ee.length;Zr++)ee[Zr].range=ee[Zr]._r.slice(),l(ee[Zr],1-Xe/le);Oe=Xe*ce/le,rn=Oe/2}}(!we.isSubplotConstrained||!Mt)&&xr("x"),(!we.isSubplotConstrained||!ve)&&xr("y");var yn=le-Xe,Tn=ce-Oe;we.isSubplotConstrained&&!(ve&&Mt)&&(ve?(rn=Pr?0:Xe*ce/le,Tn=yn*ce/le):(Pr=rn?0:Oe*le/ce,yn=Tn*le/ce)),Se([Pr,rn,yn,Tn]),Dt(),rt.emit("plotly_relayouting",vt)}function xr(Xe,Oe){for(var ar=we.isSubplotConstrained?{x:ee,y:Vt}[Xe]:we[Xe+"axes"],cr=we.isSubplotConstrained?{x:Vt,y:ee}[Xe]:[],sr=0;sr<ar.length;sr++){var lr=ar[sr],Or=lr._id,Ir=we.xLinks[Or]||we.yLinks[Or],Pr=cr[0]||jt[Ir]||Ht[Ir];Pr&&(Oe?(Oe[lr._name+".range[0]"]=Oe[Pr._name+".range[0]"],Oe[lr._name+".range[1]"]=Oe[Pr._name+".range[1]"]):lr.range=Pr.range.slice())}}function Dt(){var Xe=[],Oe;function ar(Or){for(Oe=0;Oe<Or.length;Oe++)Or[Oe].fixedrange||Xe.push(Or[Oe]._id)}function cr(Or,Ir){for(Oe=0;Oe<Or.length;Oe++){var Pr=Or[Oe],rn=Pr[Ir];!Pr.fixedrange&&rn.tickmode==="sync"&&Xe.push(rn._id)}}for(Rt&&(ar(Vt),ar(pe.xaxes),ar(we.xaxes),cr(ht.overlays,"xaxis")),zt&&(ar(ee),ar(pe.yaxes),ar(we.yaxes),cr(ht.overlays,"yaxis")),vt={},Oe=0;Oe<Xe.length;Oe++){var sr=Xe[Oe],lr=k(rt,sr);a.drawOne(rt,lr,{skipTitle:!0}),vt[lr._name+".range[0]"]=lr.range[0],vt[lr._name+".range[1]"]=lr.range[1]}a.redrawComponents(rt,Xe)}function Ut(){if(!rt._transitioningWithDuration){var Xe=rt._context.doubleClick,Oe=[];ve&&(Oe=Oe.concat(Vt)),Mt&&(Oe=Oe.concat(ee)),we.xaxes&&(Oe=Oe.concat(we.xaxes)),we.yaxes&&(Oe=Oe.concat(we.yaxes));var ar={},cr,sr,lr;if(Xe==="reset+autosize"){for(Xe="autosize",sr=0;sr<Oe.length;sr++)if(cr=Oe[sr],cr._rangeInitial&&(cr.range[0]!==cr._rangeInitial[0]||cr.range[1]!==cr._rangeInitial[1])||!cr._rangeInitial&&!cr.autorange){Xe="reset";break}}if(Xe==="autosize")for(sr=0;sr<Oe.length;sr++)cr=Oe[sr],cr.fixedrange||(ar[cr._name+".autorange"]=!0);else if(Xe==="reset")for((ve||pe.isSubplotConstrained)&&(Oe=Oe.concat(pe.xaxes)),Mt&&!pe.isSubplotConstrained&&(Oe=Oe.concat(pe.yaxes)),pe.isSubplotConstrained&&(ve?Mt||(Oe=Oe.concat(ee)):Oe=Oe.concat(Vt)),sr=0;sr<Oe.length;sr++)cr=Oe[sr],cr.fixedrange||(cr._rangeInitial?(lr=cr._rangeInitial,ar[cr._name+".range[0]"]=lr[0],ar[cr._name+".range[1]"]=lr[1]):ar[cr._name+".autorange"]=!0);rt.emit("plotly_doubleclick",null),g.call("_guiRelayout",rt,ar)}}function Te(){Se([0,0,le,ce]),E.syncOrAsync([T.previousPromises,function(){rt._fullLayout._replotting=!1,g.call("_guiRelayout",rt,vt)}],rt)}function Se(Xe){var Oe=rt._fullLayout,ar=Oe._plots,cr=Oe._subplots.cartesian,sr,lr,Or,Ir;if(ft&&g.subplotsRegistry.splom.drag(rt),Tt){for(sr=0;sr<cr.length;sr++)if(lr=ar[cr[sr]],Or=lr.xaxis,Ir=lr.yaxis,lr._scene){var Pr=E.simpleMap(Or.range,Or.r2l),rn=E.simpleMap(Ir.range,Ir.r2l);lr._scene.update({range:[Pr[0],rn[0],Pr[1],rn[1]]})}}if((ft||Tt)&&(u(rt),c(rt)),ut){var Zr=Xe[2]/Bt._length,yn=Xe[3]/kt._length;for(sr=0;sr<cr.length;sr++){lr=ar[cr[sr]],Or=lr.xaxis,Ir=lr.yaxis;var Tn=(Rt||we.isSubplotConstrained)&&!Or.fixedrange&&jt[Or._id],hr=(zt||we.isSubplotConstrained)&&!Ir.fixedrange&&Ht[Ir._id],dr,Lr,Cr,Hr;if(Tn?(dr=Zr,Cr=mt||we.isSubplotConstrained?Xe[0]:$e(Or,dr)):we.xaHash[Or._id]?(dr=Zr,Cr=Xe[0]*Or._length/Bt._length):we.yaHash[Or._id]?(dr=yn,Cr=Mt==="ns"?-Xe[1]*Or._length/kt._length:$e(Or,dr,{n:"top",s:"bottom"}[Mt])):(dr=Be(Or,Zr,yn),Cr=Je(Or,dr)),hr?(Lr=yn,Hr=Et||we.isSubplotConstrained?Xe[1]:$e(Ir,Lr)):we.yaHash[Ir._id]?(Lr=yn,Hr=Xe[1]*Ir._length/kt._length):we.xaHash[Ir._id]?(Lr=Zr,Hr=ve==="ew"?-Xe[0]*Ir._length/Bt._length:$e(Ir,Lr,{e:"right",w:"left"}[ve])):(Lr=Be(Ir,Zr,yn),Hr=Je(Ir,Lr)),!(!dr&&!Lr)){dr||(dr=1),Lr||(Lr=1);var sn=Or._offset-Cr/dr,Yr=Ir._offset-Hr/Lr;lr.clipRect.call(f.setTranslate,Cr,Hr).call(f.setScale,dr,Lr),lr.plot.call(f.setTranslate,sn,Yr).call(f.setScale,1/dr,1/Lr),(dr!==lr.xScaleFactor||Lr!==lr.yScaleFactor)&&(f.setPointGroupScale(lr.zoomScalePts,dr,Lr),f.setTextPointsScale(lr.zoomScaleTxt,dr,Lr)),f.hideOutsideRangePoints(lr.clipOnAxisFalseTraces,lr),lr.xScaleFactor=dr,lr.yScaleFactor=Lr}}}}function Be(Xe,Oe,ar){return Xe.fixedrange?0:Rt&&pe.xaHash[Xe._id]?Oe:zt&&(pe.isSubplotConstrained?pe.xaHash:pe.yaHash)[Xe._id]?ar:0}function Je(Xe,Oe){return Oe?(Xe.range=Xe._r.slice(),l(Xe,Oe),$e(Xe,Oe)):0}function $e(Xe,Oe,ar){return Xe._length*(1-Oe)*s[ar||Xe.constraintoward||"middle"]}return de}function B(rt,ht,pt,yt){var xt=E.ensureSingle(rt.draglayer,ht,pt,function(Ft){Ft.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",rt.id)});return xt.call(o,yt),xt.node()}function O(rt,ht,pt,yt,xt,Ft,Et){var mt=B(rt,"rect",ht,pt);return M.select(mt).call(f.setRect,yt,xt,Ft,Et),mt}function R(rt,ht){for(var pt=0;pt<rt.length;pt++)if(!rt[pt].fixedrange)return ht;return""}function C(rt,ht){var pt=rt.range[ht],yt=Math.abs(pt-rt.range[1-ht]),xt;return rt.type==="date"?pt:rt.type==="log"?(xt=Math.ceil(Math.max(0,-Math.log(yt)/Math.LN10))+3,i("."+xt+"g")(Math.pow(10,pt))):(xt=Math.floor(Math.log(Math.abs(pt))/Math.LN10)-Math.floor(Math.log(yt)/Math.LN10)+4,i("."+String(xt)+"g")(pt))}function F(rt,ht,pt,yt,xt){for(var Ft=0;Ft<rt.length;Ft++){var Et=rt[Ft];if(!Et.fixedrange)if(Et.rangebreaks){var mt=Et._id.charAt(0)==="y",gt=mt?1-ht:ht,wt=mt?1-pt:pt;yt[Et._name+".range[0]"]=Et.l2r(Et.p2l(gt*Et._length)),yt[Et._name+".range[1]"]=Et.l2r(Et.p2l(wt*Et._length))}else{var Pt=Et._rl[0],Bt=Et._rl[1]-Pt;yt[Et._name+".range[0]"]=Et.l2r(Pt+Bt*ht),yt[Et._name+".range[1]"]=Et.l2r(Pt+Bt*pt)}}if(xt&&xt.length){var kt=(ht+(1-pt))/2;F(xt,kt,1-kt,yt,[])}}function N(rt,ht){for(var pt=0;pt<rt.length;pt++){var yt=rt[pt];if(!yt.fixedrange)if(yt.rangebreaks){var xt=0,Ft=yt._length,Et=yt.p2l(xt+ht)-yt.p2l(xt),mt=yt.p2l(Ft+ht)-yt.p2l(Ft),gt=(Et+mt)/2;yt.range=[yt.l2r(yt._rl[0]-gt),yt.l2r(yt._rl[1]-gt)]}else yt.range=[yt.l2r(yt._rl[0]-ht/yt._m),yt.l2r(yt._rl[1]-ht/yt._m)]}}function V(rt){return 1-(rt>=0?Math.min(rt,.9):1/(1/Math.max(rt,-.3)+3.222))}function K(rt,ht,pt){return rt?rt==="nsew"?pt?"":ht==="pan"?"move":"crosshair":rt.toLowerCase()+"-resize":"pointer"}function Q(rt,ht,pt,yt,xt){return rt.append("path").attr("class","zoombox").style({fill:ht>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",v(pt,yt)).attr("d",xt+"Z")}function at(rt,ht,pt){return rt.append("path").attr("class","zoombox-corners").style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,opacity:0}).attr("transform",v(ht,pt)).attr("d","M0,0Z")}function it(rt,ht,pt,yt,xt,Ft){rt.attr("d",yt+"M"+pt.l+","+pt.t+"v"+pt.h+"h"+pt.w+"v-"+pt.h+"h-"+pt.w+"Z"),q(rt,ht,xt,Ft)}function q(rt,ht,pt,yt){pt||(rt.transition().style("fill",yt>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ht.transition().style("opacity",1).duration(200))}function W(rt){M.select(rt).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Z(rt){I&&rt.data&&rt._context.showTips&&(E.notifier(E._(rt,"Double-click to zoom back out"),"long"),I=!1)}function G(rt,ht){return"M"+(rt.l-.5)+","+(ht-w-.5)+"h-3v"+(2*w+1)+"h3ZM"+(rt.r+.5)+","+(ht-w-.5)+"h3v"+(2*w+1)+"h-3Z"}function et(rt,ht){return"M"+(ht-w-.5)+","+(rt.t-.5)+"v-3h"+(2*w+1)+"v3ZM"+(ht-w-.5)+","+(rt.b+.5)+"v3h"+(2*w+1)+"v-3Z"}function nt(rt){var ht=Math.floor(Math.min(rt.b-rt.t,rt.r-rt.l,w)/2);return"M"+(rt.l-3.5)+","+(rt.t-.5+ht)+"h3v"+-ht+"h"+ht+"v-3h-"+(ht+3)+"ZM"+(rt.r+3.5)+","+(rt.t-.5+ht)+"h-3v"+-ht+"h"+-ht+"v-3h"+(ht+3)+"ZM"+(rt.r+3.5)+","+(rt.b+.5-ht)+"h-3v"+ht+"h"+-ht+"v3h"+(ht+3)+"ZM"+(rt.l-3.5)+","+(rt.b+.5-ht)+"h3v"+ht+"h"+ht+"v3h-"+(ht+3)+"Z"}function X(rt,ht,pt,yt,xt){for(var Ft=!1,Et={},mt={},gt,wt,Pt,Bt,kt=(xt||{}).xaHash,jt=(xt||{}).yaHash,Ht=0;Ht<ht.length;Ht++){var Vt=ht[Ht];for(gt in pt)if(Vt[gt]){for(Pt in Vt)!(xt&&(kt[Pt]||jt[Pt]))&&!(Pt.charAt(0)==="x"?pt:yt)[Pt]&&(Et[Pt]=gt);for(wt in yt)!(xt&&(kt[wt]||jt[wt]))&&Vt[wt]&&(Ft=!0)}for(wt in yt)if(Vt[wt])for(Bt in Vt)!(xt&&(kt[Bt]||jt[Bt]))&&!(Bt.charAt(0)==="x"?pt:yt)[Bt]&&(mt[Bt]=wt)}Ft&&(E.extendFlat(Et,mt),mt={});var ee={},te=[];for(Pt in Et){var ae=k(rt,Pt);te.push(ae),ee[ae._id]=ae}var le={},ce=[];for(Bt in mt){var pe=k(rt,Bt);ce.push(pe),le[pe._id]=pe}return{xaHash:ee,yaHash:le,xaxes:te,yaxes:ce,xLinks:Et,yLinks:mt,isSubplotConstrained:Ft}}function Y(rt,ht){if(!A)rt.onwheel!==void 0?rt.onwheel=ht:rt.onmousewheel!==void 0?rt.onmousewheel=ht:rt.isAddedWheelEvent||(rt.isAddedWheelEvent=!0,rt.addEventListener("wheel",ht,{passive:!1}));else{var pt=rt.onwheel!==void 0?"wheel":"mousewheel";rt._onwheel&&rt.removeEventListener(pt,rt._onwheel),rt._onwheel=ht,rt.addEventListener(pt,ht,{passive:!1})}}function ot(rt){var ht=[];for(var pt in rt)ht.push(rt[pt]);return ht}$.exports={makeDragBox:z,makeDragger:B,makeRectDragger:O,makeZoombox:Q,makeCorners:at,updateZoombox:it,xyCorners:nt,transitionZoombox:q,removeZoombox:W,showDoubleClickNotifier:Z,attachWheelEventHandler:Y}},4305:function($,U,t){var M=t(39898),E=t(30211),i=t(28569),S=t(6964),A=t(29323).makeDragBox,g=t(85555).DRAGGERSIZE;U.initInteractions=function(v){var e=v._fullLayout;if(v._context.staticPlot){M.select(v).selectAll(".drag").remove();return}if(!(!e._has("cartesian")&&!e._has("splom"))){var r=Object.keys(e._plots||{}).sort(function(n,a){if((e._plots[n].mainplot&&!0)===(e._plots[a].mainplot&&!0)){var o=n.split("y"),h=a.split("y");return o[0]===h[0]?Number(o[1]||1)-Number(h[1]||1):Number(o[0]||1)-Number(h[0]||1)}return e._plots[n].mainplot?1:-1});r.forEach(function(n){var a=e._plots[n],o=a.xaxis,h=a.yaxis;if(!a.mainplot){var y=A(v,a,o._offset,h._offset,o._length,h._length,"ns","ew");y.onmousemove=function(s){v._fullLayout._rehover=function(){v._fullLayout._hoversubplot===n&&v._fullLayout._plots[n]&&E.hover(v,s,n)},E.hover(v,s,n),v._fullLayout._lasthover=y,v._fullLayout._hoversubplot=n},y.onmouseout=function(s){v._dragging||(v._fullLayout._hoversubplot=null,i.unhover(v,s))},v._context.showAxisDragHandles&&(A(v,a,o._offset-g,h._offset-g,g,g,"n","w"),A(v,a,o._offset+o._length,h._offset-g,g,g,"n","e"),A(v,a,o._offset-g,h._offset+h._length,g,g,"s","w"),A(v,a,o._offset+o._length,h._offset+h._length,g,g,"s","e"))}if(v._context.showAxisDragHandles){if(n===o._mainSubplot){var p=o._mainLinePosition;o.side==="top"&&(p-=g),A(v,a,o._offset+o._length*.1,p,o._length*.8,g,"","ew"),A(v,a,o._offset,p,o._length*.1,g,"","w"),A(v,a,o._offset+o._length*.9,p,o._length*.1,g,"","e")}if(n===h._mainSubplot){var x=h._mainLinePosition;h.side!=="right"&&(x-=g),A(v,a,x,h._offset+h._length*.1,g,h._length*.8,"ns",""),A(v,a,x,h._offset+h._length*.9,g,h._length*.1,"s",""),A(v,a,x,h._offset,g,h._length*.1,"n","")}}});var f=e._hoverlayer.node();f.onmousemove=function(n){n.target=v._fullLayout._lasthover,E.hover(v,n,e._hoversubplot)},f.onclick=function(n){n.target=v._fullLayout._lasthover,E.click(v,n)},f.onmousedown=function(n){v._fullLayout._lasthover.onmousedown(n)},U.updateFx(v)}},U.updateFx=function(v){var e=v._fullLayout,r=e.dragmode==="pan"?"move":"crosshair";S(e._draggers,r)}},76325:function($,U,t){var M=t(73972),E=t(71828),i=t(41675);$.exports=function(S){return function(A,g){var v=A[S];if(Array.isArray(v))for(var e=M.subplotsRegistry.cartesian,r=e.idRegex,f=g._subplots,n=f.xaxis,a=f.yaxis,o=f.cartesian,h=g._has("cartesian")||g._has("gl2d"),y=0;y<v.length;y++){var p=v[y];if(E.isPlainObject(p)){var x=i.cleanId(p.xref,"x",!1),s=i.cleanId(p.yref,"y",!1),u=r.x.test(x),c=r.y.test(s);if(u||c){h||E.pushUnique(g._basePlotModules,e);var T=!1;u&&n.indexOf(x)===-1&&(n.push(x),T=!0),c&&a.indexOf(s)===-1&&(a.push(s),T=!0),T&&u&&c&&o.push(x+s)}}}}}},93612:function($,U,t){var M=t(39898),E=t(73972),i=t(71828),S=t(74875),A=t(91424),g=t(27659).a0,v=t(41675),e=t(85555),r=t(77922),f=i.ensureSingle;function n(x,s,u){return i.ensureSingle(x,s,u,function(c){c.datum(u)})}U.name="cartesian",U.attr=["xaxis","yaxis"],U.idRoot=["x","y"],U.idRegex=e.idRegex,U.attrRegex=e.attrRegex,U.attributes=t(89502),U.layoutAttributes=t(13838),U.supplyLayoutDefaults=t(86763),U.transitionAxes=t(66847),U.finalizeSubplots=function(x,s){var u=s._subplots,c=u.xaxis,T=u.yaxis,k=u.cartesian,_=k.concat(u.gl2d||[]),b={},P={},l,d,L;for(l=0;l<_.length;l++){var w=_[l].split("y");b[w[0]]=1,P["y"+w[1]]=1}for(l=0;l<c.length;l++)d=c[l],b[d]||(L=(x[v.id2name(d)]||{}).anchor,e.idRegex.y.test(L)||(L="y"),k.push(d+L),_.push(d+L),P[L]||(P[L]=1,i.pushUnique(T,L)));for(l=0;l<T.length;l++)L=T[l],P[L]||(d=(x[v.id2name(L)]||{}).anchor,e.idRegex.x.test(d)||(d="x"),k.push(d+L),_.push(d+L),b[d]||(b[d]=1,i.pushUnique(c,d)));if(!_.length){d="",L="";for(var I in x)if(e.attrRegex.test(I)){var z=I.charAt(0);z==="x"?(!d||+I.substr(5)<+d.substr(5))&&(d=I):(!L||+I.substr(5)<+L.substr(5))&&(L=I)}d=d?v.name2id(d):"x",L=L?v.name2id(L):"y",c.push(d),T.push(L),k.push(d+L)}},U.plot=function(x,s,u,c){var T=x._fullLayout,k=T._subplots.cartesian,_=x.calcdata,b;if(!Array.isArray(s))for(s=[],b=0;b<_.length;b++)s.push(b);for(b=0;b<k.length;b++){for(var P=k[b],l=T._plots[P],d=[],L,w=0;w<_.length;w++){var I=_[w],z=I[0].trace;z.xaxis+z.yaxis===P&&((s.indexOf(z.index)!==-1||z.carpet)&&(L&&L[0].trace.xaxis+L[0].trace.yaxis===P&&["tonextx","tonexty","tonext"].indexOf(z.fill)!==-1&&d.indexOf(L)===-1&&d.push(L),d.push(I)),L=I)}a(x,l,d,u,c)}};function a(x,s,u,c,T){for(var k=e.traceLayerClasses,_=x._fullLayout,b=_._modules,P,l,d,L=[],w=[],I=0;I<b.length;I++){P=b[I];var z=P.name,B=E.modules[z].categories;if(B.svg){var O=P.layerName||z+"layer",R=P.plot;l=g(u,R),d=l[0],u=l[1],d.length&&L.push({i:k.indexOf(O),className:O,plotMethod:R,cdModule:d}),B.zoomScale&&w.push("."+O)}}L.sort(function(N,V){return N.i-V.i});var C=s.plot.selectAll("g.mlayer").data(L,function(N){return N.className});if(C.enter().append("g").attr("class",function(N){return N.className}).classed("mlayer",!0).classed("rangeplot",s.isRangePlot),C.exit().remove(),C.order(),C.each(function(N){var V=M.select(this),K=N.className;N.plotMethod(x,s,N.cdModule,V,c,T),e.clipOnAxisFalseQuery.indexOf("."+K)===-1&&A.setClipUrl(V,s.layerClipId,x)}),_._has("scattergl")&&(P=E.getModule("scattergl"),d=g(u,P)[0],P.plot(x,s,d)),!x._context.staticPlot&&(s._hasClipOnAxisFalse&&(s.clipOnAxisFalseTraces=s.plot.selectAll(e.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),w.length)){var F=s.plot.selectAll(w.join(",")).selectAll(".trace");s.zoomScalePts=F.selectAll("path.point"),s.zoomScaleTxt=F.selectAll(".textpoint")}}U.clean=function(x,s,u,c){var T=c._plots||{},k=s._plots||{},_=c._subplots||{},b,P,l;if(c._hasOnlyLargeSploms&&!s._hasOnlyLargeSploms)for(l in T)b=T[l],b.plotgroup&&b.plotgroup.remove();var d=c._has&&c._has("gl"),L=s._has&&s._has("gl");if(d&&!L)for(l in T)b=T[l],b._scene&&b._scene.destroy();if(_.xaxis&&_.yaxis){var w=v.listIds({_fullLayout:c});for(P=0;P<w.length;P++){var I=w[P];s[v.id2name(I)]||c._infolayer.selectAll(".g-"+I+"title").remove()}}var z=c._has&&c._has("cartesian"),B=s._has&&s._has("cartesian");if(z&&!B)y(c._cartesianlayer.selectAll(".subplot"),c),c._defs.selectAll(".axesclip").remove(),delete c._axisConstraintGroups,delete c._axisMatchGroups;else if(_.cartesian)for(P=0;P<_.cartesian.length;P++){var O=_.cartesian[P];if(!k[O]){var R="."+O+",."+O+"-x,."+O+"-y";c._cartesianlayer.selectAll(R).remove(),p(O,c)}}},U.drawFramework=function(x){var s=x._fullLayout,u=o(x),c=s._cartesianlayer.selectAll(".subplot").data(u,String);c.enter().append("g").attr("class",function(T){return"subplot "+T[0]}),c.order(),c.exit().call(y,s),c.each(function(T){var k=T[0],_=s._plots[k];_.plotgroup=M.select(this),h(x,_),_.draglayer=f(s._draggers,"g",k)})},U.rangePlot=function(x,s,u){h(x,s),a(x,s,u),S.style(x)};function o(x){var s=x._fullLayout,u=s._subplots.cartesian,c=u.length,T,k,_,b,P,l,d=[],L=[];for(T=0;T<c;T++){_=u[T],b=s._plots[_],P=b.xaxis,l=b.yaxis;var w=P._mainAxis,I=l._mainAxis,z=w._id+I._id,B=s._plots[z];b.overlays=[],z!==_&&B?(b.mainplot=z,b.mainplotinfo=B,L.push(_)):(b.mainplot=void 0,b.mainplotinfo=void 0,d.push(_))}for(T=0;T<L.length;T++)_=L[T],b=s._plots[_],b.mainplotinfo.overlays.push(b);var O=d.concat(L),R=new Array(c);for(T=0;T<c;T++){_=O[T],b=s._plots[_],P=b.xaxis,l=b.yaxis;var C=[_,P.layer,l.layer,P.overlaying||"",l.overlaying||""];for(k=0;k<b.overlays.length;k++)C.push(b.overlays[k].id);R[T]=C}return R}function h(x,s){var u=s.plotgroup,c=s.id,T=e.layerValue2layerClass[s.xaxis.layer],k=e.layerValue2layerClass[s.yaxis.layer],_=x._fullLayout._hasOnlyLargeSploms;if(s.mainplot){var b=s.mainplotinfo,P=b.plotgroup,l=c+"-x",d=c+"-y";s.minorGridlayer=b.minorGridlayer,s.gridlayer=b.gridlayer,s.zerolinelayer=b.zerolinelayer,f(b.overlinesBelow,"path",l),f(b.overlinesBelow,"path",d),f(b.overaxesBelow,"g",l),f(b.overaxesBelow,"g",d),s.plot=f(b.overplot,"g",c),f(b.overlinesAbove,"path",l),f(b.overlinesAbove,"path",d),f(b.overaxesAbove,"g",l),f(b.overaxesAbove,"g",d),s.xlines=P.select(".overlines-"+T).select("."+l),s.ylines=P.select(".overlines-"+k).select("."+d),s.xaxislayer=P.select(".overaxes-"+T).select("."+l),s.yaxislayer=P.select(".overaxes-"+k).select("."+d)}else if(_)s.xlines=f(u,"path","xlines-above"),s.ylines=f(u,"path","ylines-above"),s.xaxislayer=f(u,"g","xaxislayer-above"),s.yaxislayer=f(u,"g","yaxislayer-above");else{var L=f(u,"g","layer-subplot");s.shapelayer=f(L,"g","shapelayer"),s.imagelayer=f(L,"g","imagelayer"),s.minorGridlayer=f(u,"g","minor-gridlayer"),s.gridlayer=f(u,"g","gridlayer"),s.zerolinelayer=f(u,"g","zerolinelayer"),f(u,"path","xlines-below"),f(u,"path","ylines-below"),s.overlinesBelow=f(u,"g","overlines-below"),f(u,"g","xaxislayer-below"),f(u,"g","yaxislayer-below"),s.overaxesBelow=f(u,"g","overaxes-below"),s.plot=f(u,"g","plot"),s.overplot=f(u,"g","overplot"),s.xlines=f(u,"path","xlines-above"),s.ylines=f(u,"path","ylines-above"),s.overlinesAbove=f(u,"g","overlines-above"),f(u,"g","xaxislayer-above"),f(u,"g","yaxislayer-above"),s.overaxesAbove=f(u,"g","overaxes-above"),s.xlines=u.select(".xlines-"+T),s.ylines=u.select(".ylines-"+k),s.xaxislayer=u.select(".xaxislayer-"+T),s.yaxislayer=u.select(".yaxislayer-"+k)}_||(n(s.minorGridlayer,"g",s.xaxis._id),n(s.minorGridlayer,"g",s.yaxis._id),s.minorGridlayer.selectAll("g").map(function(w){return w[0]}).sort(v.idSort),n(s.gridlayer,"g",s.xaxis._id),n(s.gridlayer,"g",s.yaxis._id),s.gridlayer.selectAll("g").map(function(w){return w[0]}).sort(v.idSort)),s.xlines.style("fill","none").classed("crisp",!0),s.ylines.style("fill","none").classed("crisp",!0)}function y(x,s){if(x){var u={};x.each(function(P){var l=P[0],d=M.select(this);d.remove(),p(l,s),u[l]=!0});for(var c in s._plots)for(var T=s._plots[c],k=T.overlays||[],_=0;_<k.length;_++){var b=k[_];u[b.id]&&b.plot.selectAll(".trace").remove()}}}function p(x,s){s._draggers.selectAll("g."+x).remove(),s._defs.select("#clip"+s._uid+x+"plot").remove()}U.toSVG=function(x){var s=x._fullLayout._glimages,u=M.select(x).selectAll(".svg-container"),c=u.filter(function(k,_){return _===u.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function T(){var k=this,_=k.toDataURL("image/png"),b=s.append("svg:image");b.attr({xmlns:r.svg,"xlink:href":_,preserveAspectRatio:"none",x:0,y:0,width:k.style.width,height:k.style.height})}c.each(T)},U.updateFx=t(4305).updateFx},13838:function($,U,t){var M=t(41940),E=t(22399),i=t(79952).P,S=t(1426).extendFlat,A=t(44467).templatedArray,g=t(12663).descriptionWithDates,v=t(50606).ONEDAY,e=t(85555),r=e.HOUR_PATTERN,f=e.WEEKDAY_PATTERN,n={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},a=S({},n,{values:n.values.slice().concat(["sync"])});function o(P){return{valType:"integer",min:0,dflt:P?5:0,editType:"ticks"}}var h={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},y={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},p={valType:"data_array",editType:"ticks"},x={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function s(P){var l={valType:"number",min:0,editType:"ticks"};return P||(l.dflt=5),l}function u(P){var l={valType:"number",min:0,editType:"ticks"};return P||(l.dflt=1),l}var c={valType:"color",dflt:E.defaultLine,editType:"ticks"},T={valType:"color",dflt:E.lightLine,editType:"ticks"};function k(P){var l={valType:"number",min:0,editType:"ticks"};return P||(l.dflt=1),l}var _=S({},i,{editType:"ticks"}),b={valType:"boolean",editType:"ticks"};$.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:E.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:M({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[e.idRegex.x.toString(),e.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[e.idRegex.x.toString(),e.idRegex.y.toString()],editType:"calc"},rangebreaks:A("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[f,r,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:v},editType:"calc"}),tickmode:a,nticks:o(),tick0:h,dtick:y,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:p,ticktext:{valType:"data_array",editType:"ticks"},ticks:x,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:s(),tickwidth:u(),tickcolor:c,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:S({},i,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:M({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:g("tick label")},tickformatstops:A("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:g("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:E.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:b,gridcolor:T,gridwidth:k(),griddash:_,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:E.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:E.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",e.idRegex.x.toString(),e.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",e.idRegex.x.toString(),e.idRegex.y.toString()],editType:"plot"},minor:{tickmode:n,nticks:o("minor"),tick0:h,dtick:y,tickvals:p,ticks:x,ticklen:s("minor"),tickwidth:u("minor"),tickcolor:c,gridcolor:T,gridwidth:k("minor"),griddash:_,showgrid:b,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:M({editType:"ticks"})}}},86763:function($,U,t){var M=t(71828),E=t(7901),i=t(23469).isUnifiedHover,S=t(98212),A=t(44467),g=t(10820),v=t(13838),e=t(951),r=t(71453),f=t(99082),n=t(52830),a=t(41675),o=a.id2name,h=a.name2id,y=t(85555).AX_ID_PATTERN,p=t(73972),x=p.traceIs,s=p.getComponentMethod;function u(c,T,k){Array.isArray(c[T])?c[T].push(k):c[T]=[k]}$.exports=function(c,T,k){var _=T.autotypenumbers,b={},P={},l={},d={},L={},w={},I={},z={},B={},O={},R,C;for(R=0;R<k.length;R++){var F=k[R];if(!(!x(F,"cartesian")&&!x(F,"gl2d"))){var N;if(F.xaxis)N=o(F.xaxis),u(b,N,F);else if(F.xaxes)for(C=0;C<F.xaxes.length;C++)u(b,o(F.xaxes[C]),F);var V;if(F.yaxis)V=o(F.yaxis),u(b,V,F);else if(F.yaxes)for(C=0;C<F.yaxes.length;C++)u(b,o(F.yaxes[C]),F);if(F.type==="funnel"?F.orientation==="h"?(N&&(P[N]=!0),V&&(I[V]=!0)):V&&(l[V]=!0):F.type==="image"?(V&&(z[V]=!0),N&&(z[N]=!0)):(V&&(L[V]=!0,w[V]=!0),(!x(F,"carpet")||F.type==="carpet"&&!F._cheater)&&N&&(d[N]=!0)),F.type==="carpet"&&F._cheater&&N&&(P[N]=!0),x(F,"2dMap")&&(B[N]=!0,B[V]=!0),x(F,"oriented")){var K=F.orientation==="h"?V:N;O[K]=!0}}}var Q=T._subplots,at=Q.xaxis,it=Q.yaxis,q=M.simpleMap(at,o),W=M.simpleMap(it,o),Z=q.concat(W),G=E.background;at.length&&it.length&&(G=M.coerce(c,T,g,"plot_bgcolor"));var et=E.combine(G,T.paper_bgcolor),nt,X,Y,ot,rt;function ht(){var vt=b[nt]||[];rt._traceIndices=vt.map(function(St){return St._expandedIndex}),rt._annIndices=[],rt._shapeIndices=[],rt._selectionIndices=[],rt._imgIndices=[],rt._subplotsWith=[],rt._counterAxes=[],rt._name=rt._attr=nt,rt._id=X}function pt(vt,St){return M.coerce(ot,rt,v,vt,St)}function yt(vt,St){return M.coerce2(ot,rt,v,vt,St)}function xt(vt){return vt==="x"?it:at}function Ft(vt,St){for(var Ot=vt==="x"?q:W,Xt=[],$t=0;$t<Ot.length;$t++){var de=Ot[$t];de!==St&&!(c[de]||{}).overlaying&&Xt.push(h(de))}return Xt}var Et={x:xt("x"),y:xt("y")},mt=Et.x.concat(Et.y),gt={},wt=[];function Pt(){var vt=ot.matches;y.test(vt)&&mt.indexOf(vt)===-1&&(gt[vt]=ot.type,wt=Object.keys(gt))}var Bt=S(c,T),kt=i(Bt);for(R=0;R<Z.length;R++){nt=Z[R],X=h(nt),Y=nt.charAt(0),M.isPlainObject(c[nt])||(c[nt]={}),ot=c[nt],rt=A.newContainer(T,nt,Y+"axis"),ht();var jt=Y==="x"&&!d[nt]&&P[nt]||Y==="y"&&!L[nt]&&l[nt],Ht=Y==="y"&&(!w[nt]&&I[nt]||z[nt]),Vt={hasMinor:!0,letter:Y,font:T.font,outerTicks:B[nt],showGrid:!O[nt],data:b[nt]||[],bgColor:et,calendar:T.calendar,automargin:!0,visibleDflt:jt,reverseDflt:Ht,autotypenumbersDflt:_,splomStash:((T._splomAxes||{})[Y]||{})[X]};pt("uirevision",T.uirevision),e(ot,rt,pt,Vt),r(ot,rt,pt,Vt,T);var ee=kt&&Y===Bt.charAt(0),te=yt("spikecolor",kt?rt.color:void 0),ae=yt("spikethickness",kt?1.5:void 0),le=yt("spikedash",kt?"dot":void 0),ce=yt("spikemode",kt?"across":void 0),pe=yt("spikesnap"),we=pt("showspikes",!!ee||!!te||!!ae||!!le||!!ce||!!pe);we||(delete rt.spikecolor,delete rt.spikethickness,delete rt.spikedash,delete rt.spikemode,delete rt.spikesnap);var ve=o(ot.overlaying),Mt=[0,1];if(T[ve]!==void 0){var It=o(T[ve].anchor);T[It]!==void 0&&(Mt=T[It].domain)}n(ot,rt,pt,{letter:Y,counterAxes:Et[Y],overlayableAxes:Ft(Y,nt),grid:T.grid,overlayingDomain:Mt}),pt("title.standoff"),Pt(),rt._input=ot}for(R=0;R<wt.length;){X=wt[R++],nt=o(X),Y=nt.charAt(0),M.isPlainObject(c[nt])||(c[nt]={}),ot=c[nt],rt=A.newContainer(T,nt,Y+"axis"),ht();var Rt={letter:Y,font:T.font,outerTicks:B[nt],showGrid:!O[nt],data:[],bgColor:et,calendar:T.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:_,splomStash:((T._splomAxes||{})[Y]||{})[X]};pt("uirevision",T.uirevision),rt.type=gt[X]||"linear",r(ot,rt,pt,Rt,T),n(ot,rt,pt,{letter:Y,counterAxes:Et[Y],overlayableAxes:Ft(Y,nt),grid:T.grid}),pt("fixedrange"),Pt(),rt._input=ot}var zt=s("rangeslider","handleDefaults"),Tt=s("rangeselector","handleDefaults");for(R=0;R<q.length;R++)nt=q[R],ot=c[nt],rt=T[nt],zt(c,T,nt),rt.type==="date"&&Tt(ot,rt,T,W,rt.calendar),pt("fixedrange");for(R=0;R<W.length;R++){nt=W[R],ot=c[nt],rt=T[nt];var ft=T[o(rt.anchor)],ut=s("rangeslider","isVisible")(ft);pt("fixedrange",ut)}f.handleDefaults(c,T,{axIds:mt.concat(wt).sort(a.idSort),axHasImage:z})}},92128:function($,U,t){var M=t(84267).mix,E=t(22399),i=t(71828);$.exports=function(S,A,g,v){v=v||{};var e=v.dfltColor;function r(l,d){return i.coerce2(S,A,v.attributes,l,d)}var f=r("linecolor",e),n=r("linewidth"),a=g("showline",v.showLine||!!f||!!n);a||(delete A.linecolor,delete A.linewidth);var o=M(e,v.bgColor,v.blend||E.lightFraction).toRgbString(),h=r("gridcolor",o),y=r("gridwidth"),p=r("griddash"),x=g("showgrid",v.showGrid||!!h||!!y||!!p);if(x||(delete A.gridcolor,delete A.gridwidth,delete A.griddash),v.hasMinor){var s=M(A.gridcolor,v.bgColor,67).toRgbString(),u=r("minor.gridcolor",s),c=r("minor.gridwidth",A.gridwidth||1),T=r("minor.griddash",A.griddash||"solid"),k=g("minor.showgrid",!!u||!!c||!!T);k||(delete A.minor.gridcolor,delete A.minor.gridwidth,delete A.minor.griddash)}if(!v.noZeroLine){var _=r("zerolinecolor",e),b=r("zerolinewidth"),P=g("zeroline",v.showGrid||!!_||!!b);P||(delete A.zerolinecolor,delete A.zerolinewidth)}}},52830:function($,U,t){var M=t(92770),E=t(71828);$.exports=function(i,S,A,g){var v=g.counterAxes||[],e=g.overlayableAxes||[],r=g.letter,f=g.grid,n=g.overlayingDomain,a,o,h,y,p,x;f&&(o=f._domains[r][f._axisMap[S._id]],a=f._anchors[S._id],o&&(h=f[r+"side"].split(" ")[0],y=f.domain[r][h==="right"||h==="top"?1:0])),o=o||[0,1],a=a||(M(i.position)?"free":v[0]||"free"),h=h||(r==="x"?"bottom":"left"),y=y||0,p=0,x=!1;var s=E.coerce(i,S,{anchor:{valType:"enumerated",values:["free"].concat(v),dflt:a}},"anchor"),u=E.coerce(i,S,{side:{valType:"enumerated",values:r==="x"?["bottom","top"]:["left","right"],dflt:h}},"side");if(s==="free"){if(r==="y"){var c=A("autoshift");c&&(y=u==="left"?n[0]:n[1],x=S.automargin?S.automargin:!0,p=u==="left"?-3:3),A("shift",p)}A("position",y)}A("automargin",x);var T=!1;if(e.length&&(T=E.coerce(i,S,{overlaying:{valType:"enumerated",values:[!1].concat(e),dflt:!1}},"overlaying")),!T){var k=A("domain",o);k[0]>k[1]-.000244140625&&(S.domain=o),E.noneOrAll(i.domain,S.domain,o),S.tickmode==="sync"&&(S.tickmode="auto")}return A("layer"),S}},89426:function($,U,t){var M=t(59652);$.exports=function(E,i,S,A,g){g||(g={});var v=g.tickSuffixDflt,e=M(E),r=S("tickprefix");r&&S("showtickprefix",e);var f=S("ticksuffix",v);f&&S("showticksuffix",e)}},42449:function($,U,t){var M=t(18783).FROM_BL;$.exports=function(E,i,S){S===void 0&&(S=M[E.constraintoward||"center"]);var A=[E.r2l(E.range[0]),E.r2l(E.range[1])],g=A[0]+(A[1]-A[0])*S;E.range=E._input.range=[E.l2r(g+(A[0]-g)*i),E.l2r(g+(A[1]-g)*i)],E.setScale()}},21994:function($,U,t){var M=t(39898),E=t(84096).g0,i=t(71828),S=i.numberFormat,A=t(92770),g=i.cleanNumber,v=i.ms2DateTime,e=i.dateTime2ms,r=i.ensureNumber,f=i.isArrayOrTypedArray,n=t(50606),a=n.FP_SAFE,o=n.BADNUM,h=n.LOG_CLIP,y=n.ONEWEEK,p=n.ONEDAY,x=n.ONEHOUR,s=n.ONEMIN,u=n.ONESEC,c=t(41675),T=t(85555),k=T.HOUR_PATTERN,_=T.WEEKDAY_PATTERN;function b(l){return Math.pow(10,l)}function P(l){return l!=null}$.exports=function(l,d){d=d||{};var L=l._id||"x",w=L.charAt(0);function I(Z,G){if(Z>0)return Math.log(Z)/Math.LN10;if(Z<=0&&G&&l.range&&l.range.length===2){var et=l.range[0],nt=l.range[1];return .5*(et+nt-2*h*Math.abs(et-nt))}else return o}function z(Z,G,et,nt){if((nt||{}).msUTC&&A(Z))return+Z;var X=e(Z,et||l.calendar);if(X===o)if(A(Z)){Z=+Z;var Y=Math.floor(i.mod(Z+.05,1)*10),ot=Math.round(Z-Y/10);X=e(new Date(ot))+Y/10}else return o;return X}function B(Z,G,et){return v(Z,G,et||l.calendar)}function O(Z){return l._categories[Math.round(Z)]}function R(Z){if(P(Z)){if(l._categoriesMap===void 0&&(l._categoriesMap={}),l._categoriesMap[Z]!==void 0)return l._categoriesMap[Z];l._categories.push(typeof Z=="number"?String(Z):Z);var G=l._categories.length-1;return l._categoriesMap[Z]=G,G}return o}function C(Z,G){for(var et=new Array(G),nt=0;nt<G;nt++){var X=(Z[0]||[])[nt],Y=(Z[1]||[])[nt];et[nt]=F([X,Y])}return et}function F(Z){if(l._categoriesMap)return l._categoriesMap[Z]}function N(Z){var G=F(Z);if(G!==void 0)return G;if(A(Z))return+Z}function V(Z){return A(Z)?+Z:F(Z)}function K(Z,G,et){return M.round(et+G*Z,2)}function Q(Z,G,et){return(Z-et)/G}var at=function(Z){return A(Z)?K(Z,l._m,l._b):o},it=function(Z){return Q(Z,l._m,l._b)};if(l.rangebreaks){var q=w==="y";at=function(Z){if(!A(Z))return o;var G=l._rangebreaks.length;if(!G)return K(Z,l._m,l._b);var et=q;l.range[0]>l.range[1]&&(et=!et);for(var nt=et?-1:1,X=nt*Z,Y=0,ot=0;ot<G;ot++){var rt=nt*l._rangebreaks[ot].min,ht=nt*l._rangebreaks[ot].max;if(X<rt)break;if(X>ht)Y=ot+1;else{Y=X<(rt+ht)/2?ot:ot+1;break}}var pt=l._B[Y]||0;return isFinite(pt)?K(Z,l._m2,pt):0},it=function(Z){var G=l._rangebreaks.length;if(!G)return Q(Z,l._m,l._b);for(var et=0,nt=0;nt<G&&!(Z<l._rangebreaks[nt].pmin);nt++)Z>l._rangebreaks[nt].pmax&&(et=nt+1);return Q(Z,l._m2,l._B[et])}}l.c2l=l.type==="log"?I:r,l.l2c=l.type==="log"?b:r,l.l2p=at,l.p2l=it,l.c2p=l.type==="log"?function(Z,G){return at(I(Z,G))}:at,l.p2c=l.type==="log"?function(Z){return b(it(Z))}:it,["linear","-"].indexOf(l.type)!==-1?(l.d2r=l.r2d=l.d2c=l.r2c=l.d2l=l.r2l=g,l.c2d=l.c2r=l.l2d=l.l2r=r,l.d2p=l.r2p=function(Z){return l.l2p(g(Z))},l.p2d=l.p2r=it,l.cleanPos=r):l.type==="log"?(l.d2r=l.d2l=function(Z,G){return I(g(Z),G)},l.r2d=l.r2c=function(Z){return b(g(Z))},l.d2c=l.r2l=g,l.c2d=l.l2r=r,l.c2r=I,l.l2d=b,l.d2p=function(Z,G){return l.l2p(l.d2r(Z,G))},l.p2d=function(Z){return b(it(Z))},l.r2p=function(Z){return l.l2p(g(Z))},l.p2r=it,l.cleanPos=r):l.type==="date"?(l.d2r=l.r2d=i.identity,l.d2c=l.r2c=l.d2l=l.r2l=z,l.c2d=l.c2r=l.l2d=l.l2r=B,l.d2p=l.r2p=function(Z,G,et){return l.l2p(z(Z,0,et))},l.p2d=l.p2r=function(Z,G,et){return B(it(Z),G,et)},l.cleanPos=function(Z){return i.cleanDate(Z,o,l.calendar)}):l.type==="category"?(l.d2c=l.d2l=R,l.r2d=l.c2d=l.l2d=O,l.d2r=l.d2l_noadd=N,l.r2c=function(Z){var G=V(Z);return G!==void 0?G:l.fraction2r(.5)},l.l2r=l.c2r=r,l.r2l=V,l.d2p=function(Z){return l.l2p(l.r2c(Z))},l.p2d=function(Z){return O(it(Z))},l.r2p=l.d2p,l.p2r=it,l.cleanPos=function(Z){return typeof Z=="string"&&Z!==""?Z:r(Z)}):l.type==="multicategory"&&(l.r2d=l.c2d=l.l2d=O,l.d2r=l.d2l_noadd=N,l.r2c=function(Z){var G=N(Z);return G!==void 0?G:l.fraction2r(.5)},l.r2c_just_indices=F,l.l2r=l.c2r=r,l.r2l=N,l.d2p=function(Z){return l.l2p(l.r2c(Z))},l.p2d=function(Z){return O(it(Z))},l.r2p=l.d2p,l.p2r=it,l.cleanPos=function(Z){return Array.isArray(Z)||typeof Z=="string"&&Z!==""?Z:r(Z)},l.setupMultiCategory=function(Z){var G=l._traceIndices,et,nt,X=l._matchGroup;if(X&&l._categories.length===0){for(var Y in X)if(Y!==L){var ot=d[c.id2name(Y)];G=G.concat(ot._traceIndices)}}var rt=[[0,{}],[0,{}]],ht=[];for(et=0;et<G.length;et++){var pt=Z[G[et]];if(w in pt){var yt=pt[w],xt=pt._length||i.minRowLength(yt);if(f(yt[0])&&f(yt[1]))for(nt=0;nt<xt;nt++){var Ft=yt[0][nt],Et=yt[1][nt];P(Ft)&&P(Et)&&(ht.push([Ft,Et]),Ft in rt[0][1]||(rt[0][1][Ft]=rt[0][0]++),Et in rt[1][1]||(rt[1][1][Et]=rt[1][0]++))}}}for(ht.sort(function(mt,gt){var wt=rt[0][1],Pt=wt[mt[0]]-wt[gt[0]];if(Pt)return Pt;var Bt=rt[1][1];return Bt[mt[1]]-Bt[gt[1]]}),et=0;et<ht.length;et++)R(ht[et])}),l.fraction2r=function(Z){var G=l.r2l(l.range[0]),et=l.r2l(l.range[1]);return l.l2r(G+Z*(et-G))},l.r2fraction=function(Z){var G=l.r2l(l.range[0]),et=l.r2l(l.range[1]);return(l.r2l(Z)-G)/(et-G)},l.cleanRange=function(Z,G){G||(G={}),Z||(Z="range");var et=i.nestedProperty(l,Z).get(),nt,X;if(l.type==="date"?X=i.dfltRange(l.calendar):w==="y"?X=T.DFLTRANGEY:l._name==="realaxis"?X=[0,1]:X=G.dfltRange||T.DFLTRANGEX,X=X.slice(),(l.rangemode==="tozero"||l.rangemode==="nonnegative")&&(X[0]=0),!et||et.length!==2){i.nestedProperty(l,Z).set(X);return}for(l.type==="date"&&!l.autorange&&(et[0]=i.cleanDate(et[0],o,l.calendar),et[1]=i.cleanDate(et[1],o,l.calendar)),nt=0;nt<2;nt++)if(l.type==="date"){if(!i.isDateTime(et[nt],l.calendar)){l[Z]=X;break}if(l.r2l(et[0])===l.r2l(et[1])){var Y=i.constrain(l.r2l(et[0]),i.MIN_MS+1e3,i.MAX_MS-1e3);et[0]=l.l2r(Y-1e3),et[1]=l.l2r(Y+1e3);break}}else{if(!A(et[nt]))if(A(et[1-nt]))et[nt]=et[1-nt]*(nt?10:.1);else{l[Z]=X;break}if(et[nt]<-a?et[nt]=-a:et[nt]>a&&(et[nt]=a),et[0]===et[1]){var ot=Math.max(1,Math.abs(et[0]*1e-6));et[0]-=ot,et[1]+=ot}}},l.setScale=function(Z){var G=d._size;if(l.overlaying){var et=c.getFromId({_fullLayout:d},l.overlaying);l.domain=et.domain}var nt=Z&&l._r?"_r":"range",X=l.calendar;l.cleanRange(nt);var Y=l.r2l(l[nt][0],X),ot=l.r2l(l[nt][1],X),rt=w==="y";if(rt?(l._offset=G.t+(1-l.domain[1])*G.h,l._length=G.h*(l.domain[1]-l.domain[0]),l._m=l._length/(Y-ot),l._b=-l._m*ot):(l._offset=G.l+l.domain[0]*G.w,l._length=G.w*(l.domain[1]-l.domain[0]),l._m=l._length/(ot-Y),l._b=-l._m*Y),l._rangebreaks=[],l._lBreaks=0,l._m2=0,l._B=[],l.rangebreaks){var ht,pt;if(l._rangebreaks=l.locateBreaks(Math.min(Y,ot),Math.max(Y,ot)),l._rangebreaks.length){for(ht=0;ht<l._rangebreaks.length;ht++)pt=l._rangebreaks[ht],l._lBreaks+=Math.abs(pt.max-pt.min);var yt=rt;Y>ot&&(yt=!yt),yt&&l._rangebreaks.reverse();var xt=yt?-1:1;for(l._m2=xt*l._length/(Math.abs(ot-Y)-l._lBreaks),l._B.push(-l._m2*(rt?ot:Y)),ht=0;ht<l._rangebreaks.length;ht++)pt=l._rangebreaks[ht],l._B.push(l._B[l._B.length-1]-xt*l._m2*(pt.max-pt.min));for(ht=0;ht<l._rangebreaks.length;ht++)pt=l._rangebreaks[ht],pt.pmin=at(pt.min),pt.pmax=at(pt.max)}}if(!isFinite(l._m)||!isFinite(l._b)||l._length<0)throw d._replotting=!1,new Error("Something went wrong with axis scaling")},l.maskBreaks=function(Z){var G=l.rangebreaks||[],et,nt,X,Y,ot;G._cachedPatterns||(G._cachedPatterns=G.map(function(wt){return wt.enabled&&wt.bounds?i.simpleMap(wt.bounds,wt.pattern?g:l.d2c):null})),G._cachedValues||(G._cachedValues=G.map(function(wt){return wt.enabled&&wt.values?i.simpleMap(wt.values,l.d2c).sort(i.sorterAsc):null}));for(var rt=0;rt<G.length;rt++){var ht=G[rt];if(ht.enabled){if(ht.bounds){var pt=ht.pattern;switch(et=G._cachedPatterns[rt],nt=et[0],X=et[1],pt){case _:ot=new Date(Z),Y=ot.getUTCDay(),nt>X&&(X+=7,Y<nt&&(Y+=7));break;case k:ot=new Date(Z);var yt=ot.getUTCHours(),xt=ot.getUTCMinutes(),Ft=ot.getUTCSeconds(),Et=ot.getUTCMilliseconds();Y=yt+(xt/60+Ft/3600+Et/36e5),nt>X&&(X+=24,Y<nt&&(Y+=24));break;case"":Y=Z;break}if(Y>=nt&&Y<X)return o}else for(var mt=G._cachedValues[rt],gt=0;gt<mt.length;gt++)if(nt=mt[gt],X=nt+ht.dvalue,Z>=nt&&Z<X)return o}}return Z},l.locateBreaks=function(Z,G){var et,nt,X,Y,ot=[];if(!l.rangebreaks)return ot;var rt=l.rangebreaks.slice().sort(function(Bt,kt){return Bt.pattern===_&&kt.pattern===k?-1:kt.pattern===_&&Bt.pattern===k?1:0}),ht=function(Bt,kt){if(Bt=i.constrain(Bt,Z,G),kt=i.constrain(kt,Z,G),Bt!==kt){for(var jt=!0,Ht=0;Ht<ot.length;Ht++){var Vt=ot[Ht];Bt<Vt.max&&kt>=Vt.min&&(Bt<Vt.min&&(Vt.min=Bt),kt>Vt.max&&(Vt.max=kt),jt=!1)}jt&&ot.push({min:Bt,max:kt})}};for(et=0;et<rt.length;et++){var pt=rt[et];if(pt.enabled)if(pt.bounds){var yt=Z,xt=G;pt.pattern&&(yt=Math.floor(yt)),nt=i.simpleMap(pt.bounds,pt.pattern?g:l.r2l),X=nt[0],Y=nt[1];var Ft=new Date(yt),Et,mt;switch(pt.pattern){case _:mt=y,Et=((Y<X?7:0)+(Y-X))*p,yt+=X*p-(Ft.getUTCDay()*p+Ft.getUTCHours()*x+Ft.getUTCMinutes()*s+Ft.getUTCSeconds()*u+Ft.getUTCMilliseconds());break;case k:mt=p,Et=((Y<X?24:0)+(Y-X))*x,yt+=X*x-(Ft.getUTCHours()*x+Ft.getUTCMinutes()*s+Ft.getUTCSeconds()*u+Ft.getUTCMilliseconds());break;default:yt=Math.min(nt[0],nt[1]),xt=Math.max(nt[0],nt[1]),mt=xt-yt,Et=mt}for(var gt=yt;gt<xt;gt+=mt)ht(gt,gt+Et)}else for(var wt=i.simpleMap(pt.values,l.d2c),Pt=0;Pt<wt.length;Pt++)X=wt[Pt],Y=X+pt.dvalue,ht(X,Y)}return ot.sort(function(Bt,kt){return Bt.min-kt.min}),ot},l.makeCalcdata=function(Z,G,et){var nt,X,Y,ot,rt=l.type,ht=rt==="date"&&Z[G+"calendar"];if(G in Z){if(nt=Z[G],ot=Z._length||i.minRowLength(nt),i.isTypedArray(nt)&&(rt==="linear"||rt==="log")){if(ot===nt.length)return nt;if(nt.subarray)return nt.subarray(0,ot)}if(rt==="multicategory")return C(nt,ot);for(X=new Array(ot),Y=0;Y<ot;Y++)X[Y]=l.d2c(nt[Y],0,ht,et)}else{var pt=G+"0"in Z?l.d2c(Z[G+"0"],0,ht):0,yt=Z["d"+G]?Number(Z["d"+G]):1;for(nt=Z[{x:"y",y:"x"}[G]],ot=Z._length||nt.length,X=new Array(ot),Y=0;Y<ot;Y++)X[Y]=pt+Y*yt}if(l.rangebreaks)for(Y=0;Y<ot;Y++)X[Y]=l.maskBreaks(X[Y]);return X},l.isValidRange=function(Z){return Array.isArray(Z)&&Z.length===2&&A(l.r2l(Z[0]))&&A(l.r2l(Z[1]))},l.isPtWithinRange=function(Z,G){var et=l.c2l(Z[w],null,G),nt=l.r2l(l.range[0]),X=l.r2l(l.range[1]);return nt<X?nt<=et&&et<=X:X<=et&&et<=nt},l._emptyCategories=function(){l._categories=[],l._categoriesMap={}},l.clearCalc=function(){var Z=l._matchGroup;if(Z){var G=null,et=null;for(var nt in Z){var X=d[c.id2name(nt)];if(X._categories){G=X._categories,et=X._categoriesMap;break}}G&&et?(l._categories=G,l._categoriesMap=et):l._emptyCategories()}else l._emptyCategories();if(l._initialCategories)for(var Y=0;Y<l._initialCategories.length;Y++)R(l._initialCategories[Y])},l.sortByInitialCategories=function(){var Z=[];if(l._emptyCategories(),l._initialCategories)for(var G=0;G<l._initialCategories.length;G++)R(l._initialCategories[G]);Z=Z.concat(l._traceIndices);var et=l._matchGroup;for(var nt in et)if(L!==nt){var X=d[c.id2name(nt)];X._categories=l._categories,X._categoriesMap=l._categoriesMap,Z=Z.concat(X._traceIndices)}return Z};var W=d._d3locale;l.type==="date"&&(l._dateFormat=W?W.timeFormat:E,l._extraFormat=d._extraFormat),l._separators=d.separators,l._numFormat=W?W.numberFormat:S,delete l._minDtick,delete l._forceTick0}},59652:function($){$.exports=function(U){var t=["showexponent","showtickprefix","showticksuffix"],M=t.filter(function(i){return U[i]!==void 0}),E=function(i){return U[i]===U[M[0]]};if(M.every(E)||M.length===1)return U[M[0]]}},96115:function($,U,t){var M=t(71828),E=t(7901).contrast,i=t(13838),S=t(59652),A=t(85501);$.exports=function(v,e,r,f,n){n||(n={});var a=r("labelalias");M.isPlainObject(a)||delete e.labelalias;var o=S(v),h=r("showticklabels");if(h){var y=n.font||{},p=e.color,x=e.ticklabelposition||"",s=x.indexOf("inside")!==-1?E(n.bgColor):p&&p!==i.color.dflt?p:y.color;if(M.coerceFont(r,"tickfont",{family:y.family,size:y.size,color:s}),!n.noTicklabelstep&&f!=="multicategory"&&f!=="log"&&r("ticklabelstep"),n.noAng||r("tickangle"),f!=="category"){var u=r("tickformat");A(v,e,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:g}),e.tickformatstops.length||delete e.tickformatstops,!n.noExp&&!u&&f!=="date"&&(r("showexponent",o),r("exponentformat"),r("minexponent"),r("separatethousands"))}}};function g(v,e){function r(n,a){return M.coerce(v,e,i.tickformatstops,n,a)}var f=r("enabled");f&&(r("dtickrange"),r("value"))}},38701:function($,U,t){var M=t(71828),E=t(13838);$.exports=function(i,S,A,g){var v=g.isMinor,e=v?i.minor||{}:i,r=v?S.minor:S,f=v?E.minor:E,n=v?"minor.":"",a=M.coerce2(e,r,f,"ticklen",v?(S.ticklen||5)*.6:void 0),o=M.coerce2(e,r,f,"tickwidth",v?S.tickwidth||1:void 0),h=M.coerce2(e,r,f,"tickcolor",(v?S.tickcolor:void 0)||r.color),y=A(n+"ticks",!v&&g.outerTicks||a||o||h?"outside":"");y||(delete r.ticklen,delete r.tickwidth,delete r.tickcolor)}},26218:function($,U,t){var M=t(66287),E=t(71828).isArrayOrTypedArray;$.exports=function(i,S,A,g,v){v||(v={});var e=v.isMinor,r=e?i.minor||{}:i,f=e?S.minor:S,n=e?"minor.":"";function a(c){var T=r[c];return T!==void 0?T:(f._template||{})[c]}var o=a("tick0"),h=a("dtick"),y=a("tickvals"),p=E(y)?"array":h?"linear":"auto",x=A(n+"tickmode",p);if(x==="auto"||x==="sync")A(n+"nticks");else if(x==="linear"){var s=f.dtick=M.dtick(h,g);f.tick0=M.tick0(o,g,S.calendar,s)}else if(g!=="multicategory"){var u=A(n+"tickvals");u===void 0?f.tickmode="auto":e||A("ticktext")}}},66847:function($,U,t){var M=t(39898),E=t(73972),i=t(71828),S=t(91424),A=t(89298);$.exports=function(g,v,e,r){var f=g._fullLayout;if(v.length===0){A.redrawComponents(g);return}function n(T){var k=T.xaxis,_=T.yaxis;f._defs.select("#"+T.clipId+"> rect").call(S.setTranslate,0,0).call(S.setScale,1,1),T.plot.call(S.setTranslate,k._offset,_._offset).call(S.setScale,1,1);var b=T.plot.selectAll(".scatterlayer .trace");b.selectAll(".point").call(S.setPointGroupScale,1,1),b.selectAll(".textpoint").call(S.setTextPointsScale,1,1),b.call(S.hideOutsideRangePoints,T)}function a(T,k){var _=T.plotinfo,b=_.xaxis,P=_.yaxis,l=b._length,d=P._length,L=!!T.xr1,w=!!T.yr1,I=[];if(L){var z=i.simpleMap(T.xr0,b.r2l),B=i.simpleMap(T.xr1,b.r2l),O=z[1]-z[0],R=B[1]-B[0];I[0]=(z[0]*(1-k)+k*B[0]-z[0])/(z[1]-z[0])*l,I[2]=l*(1-k+k*R/O),b.range[0]=b.l2r(z[0]*(1-k)+k*B[0]),b.range[1]=b.l2r(z[1]*(1-k)+k*B[1])}else I[0]=0,I[2]=l;if(w){var C=i.simpleMap(T.yr0,P.r2l),F=i.simpleMap(T.yr1,P.r2l),N=C[1]-C[0],V=F[1]-F[0];I[1]=(C[1]*(1-k)+k*F[1]-C[1])/(C[0]-C[1])*d,I[3]=d*(1-k+k*V/N),P.range[0]=b.l2r(C[0]*(1-k)+k*F[0]),P.range[1]=P.l2r(C[1]*(1-k)+k*F[1])}else I[1]=0,I[3]=d;A.drawOne(g,b,{skipTitle:!0}),A.drawOne(g,P,{skipTitle:!0}),A.redrawComponents(g,[b._id,P._id]);var K=L?l/I[2]:1,Q=w?d/I[3]:1,at=L?I[0]:0,it=w?I[1]:0,q=L?I[0]/I[2]*l:0,W=w?I[1]/I[3]*d:0,Z=b._offset-q,G=P._offset-W;_.clipRect.call(S.setTranslate,at,it).call(S.setScale,1/K,1/Q),_.plot.call(S.setTranslate,Z,G).call(S.setScale,K,Q),S.setPointGroupScale(_.zoomScalePts,1/K,1/Q),S.setTextPointsScale(_.zoomScaleTxt,1/K,1/Q)}var o;r&&(o=r());function h(){for(var T={},k=0;k<v.length;k++){var _=v[k],b=_.plotinfo.xaxis,P=_.plotinfo.yaxis;_.xr1&&(T[b._name+".range"]=_.xr1.slice()),_.yr1&&(T[P._name+".range"]=_.yr1.slice())}return o&&o(),E.call("relayout",g,T).then(function(){for(var l=0;l<v.length;l++)n(v[l].plotinfo)})}function y(){for(var T={},k=0;k<v.length;k++){var _=v[k],b=_.plotinfo.xaxis,P=_.plotinfo.yaxis;_.xr0&&(T[b._name+".range"]=_.xr0.slice()),_.yr0&&(T[P._name+".range"]=_.yr0.slice())}return E.call("relayout",g,T).then(function(){for(var l=0;l<v.length;l++)n(v[l].plotinfo)})}var p,x,s,u=M.ease(e.easing);g._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(s),s=null,y()});function c(){x=Date.now();for(var T=Math.min(1,(x-p)/e.duration),k=u(T),_=0;_<v.length;_++)a(v[_],k);x-p>e.duration?(h(),s=window.cancelAnimationFrame(c)):s=window.requestAnimationFrame(c)}return p=Date.now(),s=window.requestAnimationFrame(c),Promise.resolve()}},951:function($,U,t){var M=t(73972).traceIs,E=t(4322);$.exports=function(v,e,r,f){r("autotypenumbers",f.autotypenumbersDflt);var n=r("type",(f.splomStash||{}).type);n==="-"&&(i(e,f.data),e.type==="-"?e.type="linear":v.type=e.type)};function i(v,e){if(v.type==="-"){var r=v._id,f=r.charAt(0),n;r.indexOf("scene")!==-1&&(r=f);var a=S(e,r,f);if(a){if(a.type==="histogram"&&f==={v:"y",h:"x"}[a.orientation||"v"]){v.type="linear";return}var o=f+"calendar",h=a[o],y={noMultiCategory:!M(a,"cartesian")||M(a,"noMultiCategory")};if(a.type==="box"&&a._hasPreCompStats&&f==={h:"x",v:"y"}[a.orientation||"v"]&&(y.noMultiCategory=!0),y.autotypenumbers=v.autotypenumbers,g(a,f)){var p=A(a),x=[];for(n=0;n<e.length;n++){var s=e[n];!M(s,"box-violin")||(s[f+"axis"]||f)!==r||(s[p]!==void 0?x.push(s[p][0]):s.name!==void 0?x.push(s.name):x.push("text"),s[o]!==h&&(h=void 0))}v.type=E(x,h,y)}else if(a.type==="splom"){var u=a.dimensions,c=u[a._axesDim[r]];c.visible&&(v.type=E(c.values,h,y))}else v.type=E(a[f]||[a[f+"0"]],h,y)}}}function S(v,e,r){for(var f=0;f<v.length;f++){var n=v[f];if(n.type==="splom"&&n._length>0&&(n["_"+r+"axes"]||{})[e]||(n[r+"axis"]||r)===e&&(g(n,r)||(n[r]||[]).length||n[r+"0"]))return n}}function A(v){return{v:"x",h:"y"}[v.orientation||"v"]}function g(v,e){var r=A(v),f=M(v,"box-violin"),n=M(v._fullInput||{},"candlestick");return f&&!n&&e===r&&v[r]===void 0&&v[r+"0"]===void 0}},31137:function($,U,t){var M=t(73972),E=t(71828);U.manageCommandObserver=function(e,r,f,n){var a={},o=!0;r&&r._commandObserver&&(a=r._commandObserver),a.cache||(a.cache={}),a.lookupTable={};var h=U.hasSimpleAPICommandBindings(e,f,a.lookupTable);if(r&&r._commandObserver){if(h)return a;if(r._commandObserver.remove)return r._commandObserver.remove(),r._commandObserver=null,a}if(h){i(e,h,a.cache),a.check=function(){if(o){var x=i(e,h,a.cache);return x.changed&&n&&a.lookupTable[x.value]!==void 0&&(a.disable(),Promise.resolve(n({value:x.value,type:h.type,prop:h.prop,traces:h.traces,index:a.lookupTable[x.value]})).then(a.enable,a.enable)),x.changed}};for(var y=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],p=0;p<y.length;p++)e._internalOn(y[p],a.check);a.remove=function(){for(var x=0;x<y.length;x++)e._removeInternalListener(y[x],a.check)}}else E.log("Unable to automatically bind plot updates to API command"),a.lookupTable={},a.remove=function(){};return a.disable=function(){o=!1},a.enable=function(){o=!0},r&&(r._commandObserver=a),a},U.hasSimpleAPICommandBindings=function(e,r,f){var n,a=r.length,o;for(n=0;n<a;n++){var h,y=r[n],p=y.method,x=y.args;if(Array.isArray(x)||(x=[]),!p)return!1;var s=U.computeAPICommandBindings(e,p,x);if(s.length!==1)return!1;if(!o)o=s[0],Array.isArray(o.traces)&&o.traces.sort();else{if(h=s[0],h.type!==o.type||h.prop!==o.prop)return!1;if(Array.isArray(o.traces))if(Array.isArray(h.traces)){h.traces.sort();for(var u=0;u<o.traces.length;u++)if(o.traces[u]!==h.traces[u])return!1}else return!1;else if(h.prop!==o.prop)return!1}h=s[0];var c=h.value;if(Array.isArray(c))if(c.length===1)c=c[0];else return!1;f&&(f[c]=n)}return o};function i(e,r,f){var n,a,o,h=!1;if(r.type==="data")n=e._fullData[r.traces!==null?r.traces[0]:0];else if(r.type==="layout")n=e._fullLayout;else return!1;return a=E.nestedProperty(n,r.prop).get(),o=f[r.type]=f[r.type]||{},o.hasOwnProperty(r.prop)&&o[r.prop]!==a&&(h=!0),o[r.prop]=a,{changed:h,value:a}}U.executeAPICommand=function(e,r,f){if(r==="skip")return Promise.resolve();var n=M.apiMethodRegistry[r],a=[e];Array.isArray(f)||(f=[]);for(var o=0;o<f.length;o++)a.push(f[o]);return n.apply(null,a).catch(function(h){return E.warn("API call to Plotly."+r+" rejected.",h),Promise.reject(h)})},U.computeAPICommandBindings=function(e,r,f){var n;switch(Array.isArray(f)||(f=[]),r){case"restyle":n=g(e,f);break;case"relayout":n=A(e,f);break;case"update":n=g(e,[f[0],f[2]]).concat(A(e,[f[1]]));break;case"animate":n=S(e,f);break;default:n=[]}return n};function S(e,r){return Array.isArray(r[0])&&r[0].length===1&&["string","number"].indexOf(typeof r[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:r[0][0].toString()}]:[]}function A(e,r){var f=[],n=r[0],a={};if(typeof n=="string")a[n]=r[1];else if(E.isPlainObject(n))a=n;else return f;return v(a,function(o,h,y){f.push({type:"layout",prop:o,value:y})},"",0),f}function g(e,r){var f,n,a,o,h=[];if(n=r[0],a=r[1],f=r[2],o={},typeof n=="string")o[n]=a;else if(E.isPlainObject(n))o=n,f===void 0&&(f=a);else return h;return f===void 0&&(f=null),v(o,function(y,p,x){var s,u;if(Array.isArray(x)){u=x.slice();var c=Math.min(u.length,e.data.length);f&&(c=Math.min(c,f.length)),s=[];for(var T=0;T<c;T++)s[T]=f?f[T]:T}else u=x,s=f?f.slice():null;if(s===null)Array.isArray(u)&&(u=u[0]);else if(Array.isArray(s)){if(!Array.isArray(u)){var k=u;u=[];for(var _=0;_<s.length;_++)u[_]=k}u.length=Math.min(s.length,u.length)}h.push({type:"data",prop:y,traces:s,value:u})},"",0),h}function v(e,r,f,n){Object.keys(e).forEach(function(a){var o=e[a];if(a[0]!=="_"){var h=f+(n>0?".":"")+a;E.isPlainObject(o)?v(o,r,h,n+1):r(h,a,o)}})}},27670:function($,U,t){var M=t(1426).extendFlat;U.Y=function(E,i){E=E||{},i=i||{};var S={valType:"info_array",editType:E.editType,items:[{valType:"number",min:0,max:1,editType:E.editType},{valType:"number",min:0,max:1,editType:E.editType}],dflt:[0,1]};E.name&&E.name+"",E.trace,i.description&&""+i.description;var A={x:M({},S,{}),y:M({},S,{}),editType:E.editType};return E.noGridCell||(A.row={valType:"integer",min:0,dflt:0,editType:E.editType},A.column={valType:"integer",min:0,dflt:0,editType:E.editType}),A},U.c=function(E,i,S,A){var g=A&&A.x||[0,1],v=A&&A.y||[0,1],e=i.grid;if(e){var r=S("domain.column");r!==void 0&&(r<e.columns?g=e._domains.x[r]:delete E.domain.column);var f=S("domain.row");f!==void 0&&(f<e.rows?v=e._domains.y[f]:delete E.domain.row)}var n=S("domain.x",g),a=S("domain.y",v);n[0]<n[1]||(E.domain.x=g.slice()),a[0]<a[1]||(E.domain.y=v.slice())}},41940:function($){$.exports=function(U){var t=U.editType,M=U.colorEditType;M===void 0&&(M=t);var E={family:{valType:"string",noBlank:!0,strict:!0,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:M},editType:t};return U.autoSize&&(E.size.dflt="auto"),U.autoColor&&(E.color.dflt="auto"),U.arrayOk&&(E.family.arrayOk=!0,E.size.arrayOk=!0,E.color.arrayOk=!0),E}},31391:function($){$.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},78776:function($,U){U.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},U.axesNames=["lonaxis","lataxis"],U.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},U.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},U.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},U.clipPad=.001,U.precision=.1,U.landColor="#F0DC82",U.waterColor="#3399FF",U.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},U.sphereSVG={type:"Sphere"},U.fillLayers={ocean:1,land:1,lakes:1},U.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},U.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],U.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],U.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},69082:function($,U,t){var M=t(39898),E=t(27362),i=E.geoPath,S=E.geoDistance,A=t(65704),g=t(73972),v=t(71828),e=v.strTranslate,r=t(7901),f=t(91424),n=t(30211),a=t(74875),o=t(89298),h=t(71739).getAutoRange,y=t(28569),p=t(47322).prepSelect,x=t(47322).clearOutline,s=t(47322).selectOnClick,u=t(74455),c=t(78776),T=t(41327),k=t(90973),_=t(96892).zL;function b(w){this.id=w.id,this.graphDiv=w.graphDiv,this.container=w.container,this.topojsonURL=w.topojsonURL,this.isStatic=w.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var P=b.prototype;$.exports=function(w){return new b(w)},P.plot=function(w,I,z,B){var O=this;if(B)return O.update(w,I,!0);O._geoCalcData=w,O._fullLayout=I;var R=I[this.id],C=[],F=!1;for(var N in c.layerNameToAdjective)if(N!=="frame"&&R["show"+N]){F=!0;break}for(var V=!1,K=0;K<w.length;K++){var Q=w[0][0].trace;Q._geo=O,Q.locationmode&&(F=!0);var at=Q.marker;if(at){var it=at.angle,q=at.angleref;(it||q==="north"||q==="previous")&&(V=!0)}}if(this._hasMarkerAngles=V,F){var W=k.getTopojsonName(R);(O.topojson===null||W!==O.topojsonName)&&(O.topojsonName=W,PlotlyGeoAssets.topojson[O.topojsonName]===void 0&&C.push(O.fetchTopojson()))}C=C.concat(T.fetchTraceGeoData(w)),z.push(new Promise(function(Z,G){Promise.all(C).then(function(){O.topojson=PlotlyGeoAssets.topojson[O.topojsonName],O.update(w,I),Z()}).catch(G)}))},P.fetchTopojson=function(){var w=this,I=k.getTopojsonPath(w.topojsonURL,w.topojsonName);return new Promise(function(z,B){M.json(I,function(O,R){if(O)return O.status===404?B(new Error(["plotly.js could not find topojson file at",I+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):B(new Error(["unexpected error while fetching topojson file at",I].join(" ")));PlotlyGeoAssets.topojson[w.topojsonName]=R,z()})})},P.update=function(w,I,z){var B=I[this.id];this.hasChoropleth=!1;for(var O=0;O<w.length;O++){var R=w[O],C=R[0].trace;C.type==="choropleth"&&(this.hasChoropleth=!0),C.visible===!0&&C._length>0&&C._module.calcGeoJSON(R,I)}if(!z){var F=this.updateProjection(w,I);if(F)return;(!this.viewInitial||this.scope!==B.scope)&&this.saveViewInitial(B)}this.scope=B.scope,this.updateBaseLayers(I,B),this.updateDims(I,B),this.updateFx(I,B),a.generalUpdatePerTraceModule(this.graphDiv,this,w,B);var N=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=N.selectAll(".point"),this.dataPoints.text=N.selectAll("text"),this.dataPaths.line=N.selectAll(".js-line");var V=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=V.selectAll("path"),this._render()},P.updateProjection=function(w,I){var z=this.graphDiv,B=I[this.id],O=I._size,R=B.domain,C=B.projection,F=B.lonaxis,N=B.lataxis,V=F._ax,K=N._ax,Q=this.projection=l(B),at=[[O.l+O.w*R.x[0],O.t+O.h*(1-R.y[1])],[O.l+O.w*R.x[1],O.t+O.h*(1-R.y[0])]],it=B.center||{},q=C.rotation||{},W=F.range||[],Z=N.range||[];if(B.fitbounds){V._length=at[1][0]-at[0][0],K._length=at[1][1]-at[0][1],V.range=h(z,V),K.range=h(z,K);var G=(V.range[0]+V.range[1])/2,et=(K.range[0]+K.range[1])/2;if(B._isScoped)it={lon:G,lat:et};else if(B._isClipped){it={lon:G,lat:et},q={lon:G,lat:et,roll:q.roll};var nt=C.type,X=c.lonaxisSpan[nt]/2||180,Y=c.lataxisSpan[nt]/2||90;W=[G-X,G+X],Z=[et-Y,et+Y]}else it={lon:G,lat:et},q={lon:G,lat:q.lat,roll:q.roll}}Q.center([it.lon-q.lon,it.lat-q.lat]).rotate([-q.lon,-q.lat,q.roll]).parallels(C.parallels);var ot=L(W,Z);Q.fitExtent(at,ot);var rt=this.bounds=Q.getBounds(ot),ht=this.fitScale=Q.scale(),pt=Q.translate();if(B.fitbounds){var yt=Q.getBounds(L(V.range,K.range)),xt=Math.min((rt[1][0]-rt[0][0])/(yt[1][0]-yt[0][0]),(rt[1][1]-rt[0][1])/(yt[1][1]-yt[0][1]));isFinite(xt)?Q.scale(xt*ht):v.warn("Something went wrong during"+this.id+"fitbounds computations.")}else Q.scale(C.scale*ht);var Ft=this.midPt=[(rt[0][0]+rt[1][0])/2,(rt[0][1]+rt[1][1])/2];if(Q.translate([pt[0]+(Ft[0]-pt[0]),pt[1]+(Ft[1]-pt[1])]).clipExtent(rt),B._isAlbersUsa){var Et=Q([it.lon,it.lat]),mt=Q.translate();Q.translate([mt[0]-(Et[0]-mt[0]),mt[1]-(Et[1]-mt[1])])}},P.updateBaseLayers=function(w,I){var z=this,B=z.topojson,O=z.layers,R=z.basePaths;function C(at){return at==="lonaxis"||at==="lataxis"}function F(at){return!!c.lineLayers[at]}function N(at){return!!c.fillLayers[at]}var V=this.hasChoropleth?c.layersForChoropleth:c.layers,K=V.filter(function(at){return F(at)||N(at)?I["show"+at]:C(at)?I[at].showgrid:!0}),Q=z.framework.selectAll(".layer").data(K,String);Q.exit().each(function(at){delete O[at],delete R[at],M.select(this).remove()}),Q.enter().append("g").attr("class",function(at){return"layer "+at}).each(function(at){var it=O[at]=M.select(this);at==="bg"?z.bgRect=it.append("rect").style("pointer-events","all"):C(at)?R[at]=it.append("path").style("fill","none"):at==="backplot"?it.append("g").classed("choroplethlayer",!0):at==="frontplot"?it.append("g").classed("scatterlayer",!0):F(at)?R[at]=it.append("path").style("fill","none").style("stroke-miterlimit",2):N(at)&&(R[at]=it.append("path").style("stroke","none"))}),Q.order(),Q.each(function(at){var it=R[at],q=c.layerNameToAdjective[at];at==="frame"?it.datum(c.sphereSVG):F(at)||N(at)?it.datum(_(B,B.objects[at])):C(at)&&it.datum(d(at,I,w)).call(r.stroke,I[at].gridcolor).call(f.dashLine,I[at].griddash,I[at].gridwidth),F(at)?it.call(r.stroke,I[q+"color"]).call(f.dashLine,"",I[q+"width"]):N(at)&&it.call(r.fill,I[q+"color"])})},P.updateDims=function(w,I){var z=this.bounds,B=(I.framewidth||0)/2,O=z[0][0]-B,R=z[0][1]-B,C=z[1][0]-O+B,F=z[1][1]-R+B;f.setRect(this.clipRect,O,R,C,F),this.bgRect.call(f.setRect,O,R,C,F).call(r.fill,I.bgcolor),this.xaxis._offset=O,this.xaxis._length=C,this.yaxis._offset=R,this.yaxis._length=F},P.updateFx=function(w,I){var z=this,B=z.graphDiv,O=z.bgRect,R=w.dragmode,C=w.clickmode;if(z.isStatic)return;function F(){var Q=z.viewInitial,at={};for(var it in Q)at[z.id+"."+it]=Q[it];g.call("_guiRelayout",B,at),B.emit("plotly_doubleclick",null)}function N(Q){return z.projection.invert([Q[0]+z.xaxis._offset,Q[1]+z.yaxis._offset])}var V=function(Q,at){if(at.isRect){var it=Q.range={};it[z.id]=[N([at.xmin,at.ymin]),N([at.xmax,at.ymax])]}else{var q=Q.lassoPoints={};q[z.id]=at.map(N)}},K={element:z.bgRect.node(),gd:B,plotinfo:{id:z.id,xaxis:z.xaxis,yaxis:z.yaxis,fillRangeItems:V},xaxes:[z.xaxis],yaxes:[z.yaxis],subplot:z.id,clickFn:function(Q){Q===2&&x(B)}};R==="pan"?(O.node().onmousedown=null,O.call(u(z,I)),O.on("dblclick.zoom",F),B._context._scrollZoom.geo||O.on("wheel.zoom",null)):(R==="select"||R==="lasso")&&(O.on(".zoom",null),K.prepFn=function(Q,at,it){p(Q,at,it,K,R)},y.init(K)),O.on("mousemove",function(){var Q=z.projection.invert(v.getPositionFromD3Event());if(!Q)return y.unhover(B,M.event);z.xaxis.p2c=function(){return Q[0]},z.yaxis.p2c=function(){return Q[1]},n.hover(B,M.event,z.id)}),O.on("mouseout",function(){B._dragging||y.unhover(B,M.event)}),O.on("click",function(){R!=="select"&&R!=="lasso"&&(C.indexOf("select")>-1&&s(M.event,B,[z.xaxis],[z.yaxis],z.id,K),C.indexOf("event")>-1&&n.click(B,M.event))})},P.makeFramework=function(){var w=this,I=w.graphDiv,z=I._fullLayout,B="clip"+z._uid+w.id;w.clipDef=z._clips.append("clipPath").attr("id",B),w.clipRect=w.clipDef.append("rect"),w.framework=M.select(w.container).append("g").attr("class","geo "+w.id).call(f.setClipUrl,B,I),w.project=function(O){var R=w.projection(O);return R?[R[0]-w.xaxis._offset,R[1]-w.yaxis._offset]:[null,null]},w.xaxis={_id:"x",c2p:function(O){return w.project(O)[0]}},w.yaxis={_id:"y",c2p:function(O){return w.project(O)[1]}},w.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},o.setConvert(w.mockAxis,z)},P.saveViewInitial=function(w){var I=w.center||{},z=w.projection,B=z.rotation||{};this.viewInitial={fitbounds:w.fitbounds,"projection.scale":z.scale};var O;w._isScoped?O={"center.lon":I.lon,"center.lat":I.lat}:w._isClipped?O={"projection.rotation.lon":B.lon,"projection.rotation.lat":B.lat}:O={"center.lon":I.lon,"center.lat":I.lat,"projection.rotation.lon":B.lon},v.extendFlat(this.viewInitial,O)},P.render=function(w){this._hasMarkerAngles&&w?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},P._render=function(){var w=this.projection,I=w.getPath(),z;function B(R){var C=w(R.lonlat);return C?e(C[0],C[1]):null}function O(R){return w.isLonLatOverEdges(R.lonlat)?"none":null}for(z in this.basePaths)this.basePaths[z].attr("d",I);for(z in this.dataPaths)this.dataPaths[z].attr("d",function(R){return I(R.geojson)});for(z in this.dataPoints)this.dataPoints[z].attr("display",O).attr("transform",B)};function l(w){var I=w.projection,z=I.type,B=c.projNames[z];B="geo"+v.titleCase(B);for(var O=E[B]||A[B],R=O(),C=w._isSatellite?Math.acos(1/I.distance)*180/Math.PI:w._isClipped?c.lonaxisSpan[z]/2:null,F=["center","rotate","parallels","clipExtent"],N=function(Q){return Q?R:[]},V=0;V<F.length;V++){var K=F[V];typeof R[K]!="function"&&(R[K]=N)}return R.isLonLatOverEdges=function(Q){if(R(Q)===null)return!0;if(C){var at=R.rotate(),it=S(Q,[-at[0],-at[1]]),q=C*Math.PI/180;return it>q}else return!1},R.getPath=function(){return i().projection(R)},R.getBounds=function(Q){return R.getPath().bounds(Q)},R.precision(c.precision),w._isSatellite&&R.tilt(I.tilt).distance(I.distance),C&&R.clipAngle(C-c.clipPad),R}function d(w,I,z){var B=1e-6,O=2.5,R=I[w],C=c.scopeDefaults[I.scope],F,N,V;w==="lonaxis"?(F=C.lonaxisRange,N=C.lataxisRange,V=function(et,nt){return[et,nt]}):w==="lataxis"&&(F=C.lataxisRange,N=C.lonaxisRange,V=function(et,nt){return[nt,et]});var K={type:"linear",range:[F[0],F[1]-B],tick0:R.tick0,dtick:R.dtick};o.setConvert(K,z);var Q=o.calcTicks(K);!I.isScoped&&w==="lonaxis"&&Q.pop();for(var at=Q.length,it=new Array(at),q=0;q<at;q++)for(var W=Q[q].x,Z=it[q]=[],G=N[0];G<N[1]+O;G+=O)Z.push(V(W,G));return{type:"MultiLineString",coordinates:it}}function L(w,I){var z=c.clipPad,B=w[0]+z,O=w[1]-z,R=I[0]+z,C=I[1]-z;B>0&&O<0&&(O+=360);var F=(O-B)/4;return{type:"Polygon",coordinates:[[[B,R],[B,C],[B+F,C],[B+2*F,C],[B+3*F,C],[O,C],[O,R],[O-F,R],[O-2*F,R],[O-3*F,R],[B,R]]]}}},44622:function($,U,t){var M=t(27659).AU,E=t(71828).counterRegex,i=t(69082),S="geo",A=E(S),g={};g[S]={valType:"subplotid",dflt:S,editType:"calc"};function v(f){for(var n=f._fullLayout,a=f.calcdata,o=n._subplots[S],h=0;h<o.length;h++){var y=o[h],p=M(a,S,y),x=n[y],s=x._subplot;s||(s=i({id:y,graphDiv:f,container:n._geolayer.node(),topojsonURL:f._context.topojsonURL,staticPlot:f._context.staticPlot}),n[y]._subplot=s),s.plot(p,n,f._promises)}}function e(f,n,a,o){for(var h=o._subplots[S]||[],y=0;y<h.length;y++){var p=h[y],x=o[p]._subplot;!n[p]&&x&&(x.framework.remove(),x.clipDef.remove())}}function r(f){for(var n=f._fullLayout,a=n._subplots[S],o=0;o<a.length;o++){var h=n[a[o]],y=h._subplot;y.updateFx(n,h)}}$.exports={attr:S,name:S,idRoot:S,idRegex:A,attrRegex:A,attributes:g,layoutAttributes:t(77519),supplyLayoutDefaults:t(82161),plot:v,updateFx:r,clean:e}},77519:function($,U,t){var M=t(22399),E=t(27670).Y,i=t(79952).P,S=t(78776),A=t(30962).overrideAll,g=t(78607),v={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:M.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:i},e=$.exports=A({domain:E({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:g(S.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:g(S.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:M.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:S.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:S.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:S.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:S.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:M.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:M.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:M.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:M.background},lonaxis:v,lataxis:v},"plot","from-root");e.uirevision={valType:"any",editType:"none"}},82161:function($,U,t){var M=t(71828),E=t(49119),i=t(27659).NG,S=t(78776),A=t(77519),g=S.axesNames;$.exports=function(e,r,f){E(e,r,f,{type:"geo",attributes:A,handleDefaults:v,fullData:f,partition:"y"})};function v(e,r,f,n){var a=i(n.fullData,"geo",n.id),o=a.map(function(Z){return Z._expandedIndex}),h=f("resolution"),y=f("scope"),p=S.scopeDefaults[y],x=f("projection.type",p.projType),s=r._isAlbersUsa=x==="albers usa";s&&(y=r.scope="usa");var u=r._isScoped=y!=="world",c=r._isSatellite=x==="satellite",T=r._isConic=x.indexOf("conic")!==-1||x==="albers",k=r._isClipped=!!S.lonaxisSpan[x];if(e.visible===!1){var _=M.extendDeep({},r._template);_.showcoastlines=!1,_.showcountries=!1,_.showframe=!1,_.showlakes=!1,_.showland=!1,_.showocean=!1,_.showrivers=!1,_.showsubunits=!1,_.lonaxis&&(_.lonaxis.showgrid=!1),_.lataxis&&(_.lataxis.showgrid=!1),r._template=_}for(var b=f("visible"),P,l=0;l<g.length;l++){var d=g[l],L=[30,10][l],w;if(u)w=p[d+"Range"];else{var I=S[d+"Span"],z=(I[x]||I["*"])/2,B=f("projection.rotation."+d.substr(0,3),p.projRotate[l]);w=[B-z,B+z]}var O=f(d+".range",w);f(d+".tick0"),f(d+".dtick",L),P=f(d+".showgrid",b?void 0:!1),P&&(f(d+".gridcolor"),f(d+".gridwidth"),f(d+".griddash")),r[d]._ax={type:"linear",_id:d.slice(0,3),_traceIndices:o,setScale:M.identity,c2l:M.identity,r2l:M.identity,autorange:!0,range:O.slice(),_m:1,_input:{}}}var R=r.lonaxis.range,C=r.lataxis.range,F=R[0],N=R[1];F>0&&N<0&&(N+=360);var V=(F+N)/2,K;if(!s){var Q=u?p.projRotate:[V,0,0];K=f("projection.rotation.lon",Q[0]),f("projection.rotation.lat",Q[1]),f("projection.rotation.roll",Q[2]),P=f("showcoastlines",!u&&b),P&&(f("coastlinecolor"),f("coastlinewidth")),P=f("showocean",b?void 0:!1),P&&f("oceancolor")}var at,it;if(s?(at=-96.6,it=38.7):(at=u?V:K,it=(C[0]+C[1])/2),f("center.lon",at),f("center.lat",it),c&&(f("projection.tilt"),f("projection.distance")),T){var q=p.projParallels||[0,60];f("projection.parallels",q)}f("projection.scale"),P=f("showland",b?void 0:!1),P&&f("landcolor"),P=f("showlakes",b?void 0:!1),P&&f("lakecolor"),P=f("showrivers",b?void 0:!1),P&&(f("rivercolor"),f("riverwidth")),P=f("showcountries",u&&y!=="usa"&&b),P&&(f("countrycolor"),f("countrywidth")),(y==="usa"||y==="north america"&&h===50)&&(f("showsubunits",b),f("subunitcolor"),f("subunitwidth")),u||(P=f("showframe",b),P&&(f("framecolor"),f("framewidth"))),f("bgcolor");var W=f("fitbounds");W&&(delete r.projection.scale,u?(delete r.center.lon,delete r.center.lat):k?(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon,delete r.projection.rotation.lat,delete r.lonaxis.range,delete r.lataxis.range):(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon))}},74455:function($,U,t){var M=t(39898),E=t(71828),i=t(73972),S=Math.PI/180,A=180/Math.PI,g={cursor:"pointer"},v={cursor:"auto"};function e(d,L){var w=d.projection,I;return L._isScoped?I=n:L._isClipped?I=o:I=a,I(d,w)}$.exports=e;function r(d,L){return M.behavior.zoom().translate(L.translate()).scale(L.scale())}function f(d,L,w){var I=d.id,z=d.graphDiv,B=z.layout,O=B[I],R=z._fullLayout,C=R[I],F={},N={};function V(K,Q){F[I+"."+K]=E.nestedProperty(O,K).get(),i.call("_storeDirectGUIEdit",B,R._preGUI,F);var at=E.nestedProperty(C,K);at.get()!==Q&&(at.set(Q),E.nestedProperty(O,K).set(Q),N[I+"."+K]=Q)}w(V),V("projection.scale",L.scale()/d.fitScale),V("fitbounds",!1),z.emit("plotly_relayout",N)}function n(d,L){var w=r(d,L);function I(){M.select(this).style(g)}function z(){L.scale(M.event.scale).translate(M.event.translate),d.render(!0);var R=L.invert(d.midPt);d.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":L.scale()/d.fitScale,"geo.center.lon":R[0],"geo.center.lat":R[1]})}function B(R){var C=L.invert(d.midPt);R("center.lon",C[0]),R("center.lat",C[1])}function O(){M.select(this).style(v),f(d,L,B)}return w.on("zoomstart",I).on("zoom",z).on("zoomend",O),w}function a(d,L){var w=r(d,L),I=2,z,B,O,R,C,F,N,V,K;function Q(G){return L.invert(G)}function at(G){var et=Q(G);if(!et)return!0;var nt=L(et);return Math.abs(nt[0]-G[0])>I||Math.abs(nt[1]-G[1])>I}function it(){M.select(this).style(g),z=M.mouse(this),B=L.rotate(),O=L.translate(),R=B,C=Q(z)}function q(){if(F=M.mouse(this),at(z)){w.scale(L.scale()),w.translate(L.translate());return}L.scale(M.event.scale),L.translate([O[0],M.event.translate[1]]),C?Q(F)&&(V=Q(F),N=[R[0]+(V[0]-C[0]),B[1],B[2]],L.rotate(N),R=N):(z=F,C=Q(z)),K=!0,d.render(!0);var G=L.rotate(),et=L.invert(d.midPt);d.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":L.scale()/d.fitScale,"geo.center.lon":et[0],"geo.center.lat":et[1],"geo.projection.rotation.lon":-G[0]})}function W(){M.select(this).style(v),K&&f(d,L,Z)}function Z(G){var et=L.rotate(),nt=L.invert(d.midPt);G("projection.rotation.lon",-et[0]),G("center.lon",nt[0]),G("center.lat",nt[1])}return w.on("zoomstart",it).on("zoom",q).on("zoomend",W),w}function o(d,L){L.rotate(),L.scale();var w=r(d,L),I=l(w,"zoomstart","zoom","zoomend"),z=0,B=w.on,O;w.on("zoomstart",function(){M.select(this).style(g);var V=M.mouse(this),K=L.rotate(),Q=K,at=L.translate(),it=y(K);O=h(L,V),B.call(w,"zoom",function(){var q=M.mouse(this);if(L.scale(M.event.scale),!O)V=q,O=h(L,V);else if(h(L,q)){L.rotate(K).translate(at);var W=h(L,q),Z=x(O,W),G=k(p(it,Z)),et=s(G,O,Q);(!isFinite(et[0])||!isFinite(et[1])||!isFinite(et[2]))&&(et=Q),L.rotate(et),Q=et}C(I.of(this,arguments))}),R(I.of(this,arguments))}).on("zoomend",function(){M.select(this).style(v),B.call(w,"zoom",null),F(I.of(this,arguments)),f(d,L,N)}).on("zoom.redraw",function(){d.render(!0);var V=L.rotate();d.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":L.scale()/d.fitScale,"geo.projection.rotation.lon":-V[0],"geo.projection.rotation.lat":-V[1]})});function R(V){z++||V({type:"zoomstart"})}function C(V){V({type:"zoom"})}function F(V){--z||V({type:"zoomend"})}function N(V){var K=L.rotate();V("projection.rotation.lon",-K[0]),V("projection.rotation.lat",-K[1])}return M.rebind(w,I,"on")}function h(d,L){var w=d.invert(L);return w&&isFinite(w[0])&&isFinite(w[1])&&_(w)}function y(d){var L=.5*d[0]*S,w=.5*d[1]*S,I=.5*d[2]*S,z=Math.sin(L),B=Math.cos(L),O=Math.sin(w),R=Math.cos(w),C=Math.sin(I),F=Math.cos(I);return[B*R*F+z*O*C,z*R*F-B*O*C,B*O*F+z*R*C,B*R*C-z*O*F]}function p(d,L){var w=d[0],I=d[1],z=d[2],B=d[3],O=L[0],R=L[1],C=L[2],F=L[3];return[w*O-I*R-z*C-B*F,w*R+I*O+z*F-B*C,w*C-I*F+z*O+B*R,w*F+I*C-z*R+B*O]}function x(d,L){if(!(!d||!L)){var w=P(d,L),I=Math.sqrt(b(w,w)),z=.5*Math.acos(Math.max(-1,Math.min(1,b(d,L)))),B=Math.sin(z)/I;return I&&[Math.cos(z),w[2]*B,-w[1]*B,w[0]*B]}}function s(d,L,w){var I=T(L,2,d[0]);I=T(I,1,d[1]),I=T(I,0,d[2]-w[2]);var z=L[0],B=L[1],O=L[2],R=I[0],C=I[1],F=I[2],N=Math.atan2(B,z)*A,V=Math.sqrt(z*z+B*B),K,Q;Math.abs(C)>V?(Q=(C>0?90:-90)-N,K=0):(Q=Math.asin(C/V)*A-N,K=Math.sqrt(V*V-C*C));var at=180-Q-2*N,it=(Math.atan2(F,R)-Math.atan2(O,K))*A,q=(Math.atan2(F,R)-Math.atan2(O,-K))*A,W=u(w[0],w[1],Q,it),Z=u(w[0],w[1],at,q);return W<=Z?[Q,it,w[2]]:[at,q,w[2]]}function u(d,L,w,I){var z=c(w-d),B=c(I-L);return Math.sqrt(z*z+B*B)}function c(d){return(d%360+540)%360-180}function T(d,L,w){var I=w*S,z=d.slice(),B=L===0?1:0,O=L===2?1:2,R=Math.cos(I),C=Math.sin(I);return z[B]=d[B]*R-d[O]*C,z[O]=d[O]*R+d[B]*C,z}function k(d){return[Math.atan2(2*(d[0]*d[1]+d[2]*d[3]),1-2*(d[1]*d[1]+d[2]*d[2]))*A,Math.asin(Math.max(-1,Math.min(1,2*(d[0]*d[2]-d[3]*d[1]))))*A,Math.atan2(2*(d[0]*d[3]+d[1]*d[2]),1-2*(d[2]*d[2]+d[3]*d[3]))*A]}function _(d){var L=d[0]*S,w=d[1]*S,I=Math.cos(w);return[I*Math.cos(L),I*Math.sin(L),Math.sin(w)]}function b(d,L){for(var w=0,I=0,z=d.length;I<z;++I)w+=d[I]*L[I];return w}function P(d,L){return[d[1]*L[2]-d[2]*L[1],d[2]*L[0]-d[0]*L[2],d[0]*L[1]-d[1]*L[0]]}function l(d){for(var L=0,w=arguments.length,I=[];++L<w;)I.push(arguments[L]);var z=M.dispatch.apply(null,I);return z.of=function(B,O){return function(R){var C;try{C=R.sourceEvent=M.event,R.target=d,M.event=R,z[R.type].apply(B,O)}finally{M.event=C}}},z}},27659:function($,U,t){var M=t(73972),E=t(85555).SUBPLOT_PATTERN;U.AU=function(i,S,A){var g=M.subplotsRegistry[S];if(!g)return[];for(var v=g.attr,e=[],r=0;r<i.length;r++){var f=i[r],n=f[0].trace;n[v]===A&&e.push(f)}return e},U.a0=function(i,S){var A=[],g=[],v;if(typeof S=="string"?v=M.getModule(S).plot:typeof S=="function"?v=S:v=S.plot,!v)return[A,i];for(var e=0;e<i.length;e++){var r=i[e],f=r[0].trace;f.visible!==!0||f._length===0||(f._module&&f._module.plot===v?A.push(r):g.push(r))}return[A,g]},U.NG=function(i,S,A){if(!M.subplotsRegistry[S])return[];var g=M.subplotsRegistry[S].attr,v=[],e,r,f;if(S==="gl2d"){var n=A.match(E);r="x"+n[1],f="y"+n[2]}for(var a=0;a<i.length;a++)e=i[a],S==="gl2d"&&M.traceIs(e,"gl2d")?e[g[0]]===r&&e[g[1]]===f&&v.push(e):e[g]===A&&v.push(e);return v}},75071:function($,U,t){var M=t(16825),E=t(1195),i=t(48956),S=t(85555),A=t(38520);$.exports=v;function g(e,r){this.element=e,this.plot=r,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function v(e){var r=e.mouseContainer,f=e.glplot,n=new g(r,f);function a(){e.xaxis.autorange=!1,e.yaxis.autorange=!1}function o(){for(var y=e.graphDiv._fullLayout._axisConstraintGroups,p=e.xaxis._id,x=e.yaxis._id,s=0;s<y.length;s++)if(y[s][p]!==-1){if(y[s][x]!==-1)return!0;break}return!1}n.mouseListener=M(r,h),r.addEventListener("touchstart",function(y){var p=i(y.changedTouches[0],r);h(0,p[0],p[1]),h(1,p[0],p[1]),y.preventDefault()},A?{passive:!1}:!1),r.addEventListener("touchmove",function(y){y.preventDefault();var p=i(y.changedTouches[0],r);h(1,p[0],p[1]),y.preventDefault()},A?{passive:!1}:!1),r.addEventListener("touchend",function(y){h(0,n.lastPos[0],n.lastPos[1]),y.preventDefault()},A?{passive:!1}:!1);function h(y,p,x){var s=e.calcDataBox(),u=f.viewBox,c=n.lastPos[0],T=n.lastPos[1],k=S.MINDRAG*f.pixelRatio,_=S.MINZOOM*f.pixelRatio,b,P;p*=f.pixelRatio,x*=f.pixelRatio,x=u[3]-u[1]-x;function l(B,O,R){var C=Math.min(O,R),F=Math.max(O,R);C!==F?(s[B]=C,s[B+2]=F,n.dataBox=s,e.setRanges(s)):(e.selectBox.selectBox=[0,0,1,1],e.glplot.setDirty())}switch(e.fullLayout.dragmode){case"zoom":if(y){var d=p/(u[2]-u[0])*(s[2]-s[0])+s[0],L=x/(u[3]-u[1])*(s[3]-s[1])+s[1];n.boxInited||(n.boxStart[0]=d,n.boxStart[1]=L,n.dragStart[0]=p,n.dragStart[1]=x),n.boxEnd[0]=d,n.boxEnd[1]=L,n.boxInited=!0,!n.boxEnabled&&(n.boxStart[0]!==n.boxEnd[0]||n.boxStart[1]!==n.boxEnd[1])&&(n.boxEnabled=!0);var w=Math.abs(n.dragStart[0]-p)<_,I=Math.abs(n.dragStart[1]-x)<_;if(o()&&!(w&&I)){b=n.boxEnd[0]-n.boxStart[0],P=n.boxEnd[1]-n.boxStart[1];var z=(s[3]-s[1])/(s[2]-s[0]);Math.abs(b*z)>Math.abs(P)?(n.boxEnd[1]=n.boxStart[1]+Math.abs(b)*z*(P>=0?1:-1),n.boxEnd[1]<s[1]?(n.boxEnd[1]=s[1],n.boxEnd[0]=n.boxStart[0]+(s[1]-n.boxStart[1])/Math.abs(z)):n.boxEnd[1]>s[3]&&(n.boxEnd[1]=s[3],n.boxEnd[0]=n.boxStart[0]+(s[3]-n.boxStart[1])/Math.abs(z))):(n.boxEnd[0]=n.boxStart[0]+Math.abs(P)/z*(b>=0?1:-1),n.boxEnd[0]<s[0]?(n.boxEnd[0]=s[0],n.boxEnd[1]=n.boxStart[1]+(s[0]-n.boxStart[0])*Math.abs(z)):n.boxEnd[0]>s[2]&&(n.boxEnd[0]=s[2],n.boxEnd[1]=n.boxStart[1]+(s[2]-n.boxStart[0])*Math.abs(z)))}else w&&(n.boxEnd[0]=n.boxStart[0]),I&&(n.boxEnd[1]=n.boxStart[1])}else n.boxEnabled?(b=n.boxStart[0]!==n.boxEnd[0],P=n.boxStart[1]!==n.boxEnd[1],b||P?(b&&(l(0,n.boxStart[0],n.boxEnd[0]),e.xaxis.autorange=!1),P&&(l(1,n.boxStart[1],n.boxEnd[1]),e.yaxis.autorange=!1),e.relayoutCallback()):e.glplot.setDirty(),n.boxEnabled=!1,n.boxInited=!1):n.boxInited&&(n.boxInited=!1);break;case"pan":n.boxEnabled=!1,n.boxInited=!1,y?(n.panning||(n.dragStart[0]=p,n.dragStart[1]=x),Math.abs(n.dragStart[0]-p)<k&&(p=n.dragStart[0]),Math.abs(n.dragStart[1]-x)<k&&(x=n.dragStart[1]),b=(c-p)*(s[2]-s[0])/(f.viewBox[2]-f.viewBox[0]),P=(T-x)*(s[3]-s[1])/(f.viewBox[3]-f.viewBox[1]),s[0]+=b,s[2]+=b,s[1]+=P,s[3]+=P,e.setRanges(s),n.panning=!0,n.lastInputTime=Date.now(),a(),e.cameraChanged(),e.handleAnnotations()):n.panning&&(n.panning=!1,e.relayoutCallback());break}n.lastPos[0]=p,n.lastPos[1]=x}return n.wheelListener=E(r,function(y,p){if(!e.scrollZoom)return!1;var x=e.calcDataBox(),s=f.viewBox,u=n.lastPos[0],c=n.lastPos[1],T=Math.exp(5*p/(s[3]-s[1])),k=u/(s[2]-s[0])*(x[2]-x[0])+x[0],_=c/(s[3]-s[1])*(x[3]-x[1])+x[1];return x[0]=(x[0]-k)*T+k,x[2]=(x[2]-k)*T+k,x[1]=(x[1]-_)*T+_,x[3]=(x[3]-_)*T+_,e.setRanges(x),n.lastInputTime=Date.now(),a(),e.cameraChanged(),e.handleAnnotations(),e.relayoutCallback(),!0},!0),n}},82961:function($,U,t){var M=t(89298),E=t(78614);function i(v){this.scene=v,this.gl=v.gl,this.pixelRatio=v.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var S=i.prototype,A=["xaxis","yaxis"];S.merge=function(v){this.titleEnable=!1,this.backgroundColor=E(v.plot_bgcolor);var e,r,f,n,a,o,h,y,p,x,s;for(x=0;x<2;++x){e=A[x];var u=e.charAt(0);for(r=v[this.scene[e]._name],f=r.title.text===this.scene.fullLayout._dfltTitle[u]?"":r.title.text,s=0;s<=2;s+=2)this.labelEnable[x+s]=!1,this.labels[x+s]=f,this.labelColor[x+s]=E(r.title.font.color),this.labelFont[x+s]=r.title.font.family,this.labelSize[x+s]=r.title.font.size,this.labelPad[x+s]=this.getLabelPad(e,r),this.tickEnable[x+s]=!1,this.tickColor[x+s]=E((r.tickfont||{}).color),this.tickAngle[x+s]=r.tickangle==="auto"?0:Math.PI*-r.tickangle/180,this.tickPad[x+s]=this.getTickPad(r),this.tickMarkLength[x+s]=0,this.tickMarkWidth[x+s]=r.tickwidth||0,this.tickMarkColor[x+s]=E(r.tickcolor),this.borderLineEnable[x+s]=!1,this.borderLineColor[x+s]=E(r.linecolor),this.borderLineWidth[x+s]=r.linewidth||0;h=this.hasSharedAxis(r),a=this.hasAxisInDfltPos(e,r)&&!h,o=this.hasAxisInAltrPos(e,r)&&!h,n=r.mirror||!1,y=h?String(n).indexOf("all")!==-1:!!n,p=h?n==="allticks":String(n).indexOf("ticks")!==-1,a?this.labelEnable[x]=!0:o&&(this.labelEnable[x+2]=!0),a?this.tickEnable[x]=r.showticklabels:o&&(this.tickEnable[x+2]=r.showticklabels),(a||y)&&(this.borderLineEnable[x]=r.showline),(o||y)&&(this.borderLineEnable[x+2]=r.showline),(a||p)&&(this.tickMarkLength[x]=this.getTickMarkLength(r)),(o||p)&&(this.tickMarkLength[x+2]=this.getTickMarkLength(r)),this.gridLineEnable[x]=r.showgrid,this.gridLineColor[x]=E(r.gridcolor),this.gridLineWidth[x]=r.gridwidth,this.zeroLineEnable[x]=r.zeroline,this.zeroLineColor[x]=E(r.zerolinecolor),this.zeroLineWidth[x]=r.zerolinewidth}},S.hasSharedAxis=function(v){var e=this.scene,r=e.fullLayout._subplots.gl2d,f=M.findSubplotsWithAxis(r,v);return f.indexOf(e.id)!==0},S.hasAxisInDfltPos=function(v,e){var r=e.side;if(v==="xaxis")return r==="bottom";if(v==="yaxis")return r==="left"},S.hasAxisInAltrPos=function(v,e){var r=e.side;if(v==="xaxis")return r==="top";if(v==="yaxis")return r==="right"},S.getLabelPad=function(v,e){var r=1.5,f=e.title.font.size,n=e.showticklabels;if(v==="xaxis")return e.side==="top"?-10+f*(r+(n?1:0)):-10+f*(r+(n?.5:0));if(v==="yaxis")return e.side==="right"?10+f*(r+(n?1:.5)):10+f*(r+(n?.5:0))},S.getTickPad=function(v){return v.ticks==="outside"?10+v.ticklen:15},S.getTickMarkLength=function(v){if(!v.ticks)return 0;var e=v.ticklen;return v.ticks==="inside"?-e:e};function g(v){return new i(v)}$.exports=g},4796:function($,U,t){var M=t(30962).overrideAll,E=t(92918),i=t(10820),S=t(77922),A=t(85555),g=t(93612),v=t(528),e=t(27659).NG;U.name="gl2d",U.attr=["xaxis","yaxis"],U.idRoot=["x","y"],U.idRegex=A.idRegex,U.attrRegex=A.attrRegex,U.attributes=t(89502),U.supplyLayoutDefaults=function(r,f,n){f._has("cartesian")||g.supplyLayoutDefaults(r,f,n)},U.layoutAttrOverrides=M(g.layoutAttributes,"plot","from-root"),U.baseLayoutAttrOverrides=M({plot_bgcolor:i.plot_bgcolor,hoverlabel:v.hoverlabel},"plot","nested"),U.plot=function(r){for(var f=r._fullLayout,n=r._fullData,a=f._subplots.gl2d,o=0;o<a.length;o++){var h=a[o],y=f._plots[h],p=e(n,"gl2d",h),x=y._scene2d;x===void 0&&(x=new E({id:h,graphDiv:r,container:r.querySelector(".gl-container"),staticPlot:r._context.staticPlot,plotGlPixelRatio:r._context.plotGlPixelRatio},f),y._scene2d=x),x.plot(p,r.calcdata,f,r.layout)}},U.clean=function(r,f,n,a){for(var o=a._subplots.gl2d||[],h=0;h<o.length;h++){var y=o[h],p=a._plots[y];if(p._scene2d){var x=e(r,"gl2d",y);x.length===0&&(p._scene2d.destroy(),delete a._plots[y])}}g.clean.apply(this,arguments)},U.drawFramework=function(r){r._context.staticPlot||g.drawFramework(r)},U.toSVG=function(r){for(var f=r._fullLayout,n=f._subplots.gl2d,a=0;a<n.length;a++){var o=f._plots[n[a]],h=o._scene2d,y=h.toImage("png"),p=f._glimages.append("svg:image");p.attr({xmlns:S.svg,"xlink:href":y,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),h.destroy()}},U.updateFx=function(r){for(var f=r._fullLayout,n=f._subplots.gl2d,a=0;a<n.length;a++){var o=f._plots[n[a]]._scene2d;o.updateFx(f.dragmode)}}},92918:function($,U,t){var M=t(73972),E=t(89298),i=t(30211),S=t(9330).gl_plot2d,A=t(9330).gl_spikes2d,g=t(9330).gl_select_box,v=t(40372),e=t(82961),r=t(75071),f=t(58617),n=t(99082),a=n.enforce,o=n.clean,h=t(71739).doAutoRange,y=t(64505),p=y.drawMode,x=y.selectMode,s=["xaxis","yaxis"],u,c,T=t(85555).SUBPLOT_PATTERN;function k(P,l){this.container=P.container,this.graphDiv=P.graphDiv,this.pixelRatio=P.plotGlPixelRatio||window.devicePixelRatio,this.id=P.id,this.staticPlot=!!P.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(l),this.makeFramework(),!this.stopped&&(this.glplotOptions=e(this),this.glplotOptions.merge(l),this.glplot=S(this.glplotOptions),this.camera=r(this),this.traces={},this.spikes=A(this.glplot),this.selectBox=g(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}$.exports=k;var _=k.prototype;_.makeFramework=function(){if(this.staticPlot){if(!c&&(u=document.createElement("canvas"),c=v({canvas:u,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!c))throw new Error("Error creating static canvas/context for image server");this.canvas=u,this.gl=c}else{var P=this.container.querySelector(".gl-canvas-focus"),l=v({canvas:P,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!l){f(this),this.stopped=!0;return}this.canvas=P,this.gl=l}var d=this.canvas;d.style.width="100%",d.style.height="100%",d.style.position="absolute",d.style.top="0px",d.style.left="0px",d.style["pointer-events"]="none",this.updateSize(d);var L=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");L.style.position="absolute",L.style.top=L.style.left="0px",L.style.width=L.style.height="100%",L.style["z-index"]=20,L.style["pointer-events"]="none";var w=this.mouseContainer=document.createElement("div");w.style.position="absolute",w.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var I=this.container;I.appendChild(L),I.appendChild(w);var z=this;w.addEventListener("mouseout",function(){z.isMouseOver=!1,z.unhover()}),w.addEventListener("mouseover",function(){z.isMouseOver=!0})},_.toImage=function(P){P||(P="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(u),this.updateSize(this.canvas);var l=this.glplot.gl,d=l.drawingBufferWidth,L=l.drawingBufferHeight;l.clearColor(1,1,1,0),l.clear(l.COLOR_BUFFER_BIT|l.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),l.bindFramebuffer(l.FRAMEBUFFER,null);var w=new Uint8Array(d*L*4);l.readPixels(0,0,d,L,l.RGBA,l.UNSIGNED_BYTE,w);for(var I=0,z=L-1;I<z;++I,--z)for(var B=0;B<d;++B)for(var O=0;O<4;++O){var R=w[4*(d*I+B)+O];w[4*(d*I+B)+O]=w[4*(d*z+B)+O],w[4*(d*z+B)+O]=R}var C=document.createElement("canvas");C.width=d,C.height=L;var F=C.getContext("2d",{willReadFrequently:!0}),N=F.createImageData(d,L);N.data.set(w),F.putImageData(N,0,0);var V;switch(P){case"jpeg":V=C.toDataURL("image/jpeg");break;case"webp":V=C.toDataURL("image/webp");break;default:V=C.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(u),V},_.updateSize=function(P){P||(P=this.canvas);var l=this.pixelRatio,d=this.fullLayout,L=d.width,w=d.height,I=Math.ceil(l*L)|0,z=Math.ceil(l*w)|0;return(P.width!==I||P.height!==z)&&(P.width=I,P.height=z),P},_.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var P=[E.calcTicks(this.xaxis),E.calcTicks(this.yaxis)],l=0;l<2;++l)for(var d=0;d<P[l].length;++d)P[l][d].text=P[l][d].text+"";return P};function b(P,l){for(var d=0;d<2;++d){var L=P[d],w=l[d];if(L.length!==w.length)return!0;for(var I=0;I<L.length;++I)if(L[I].x!==w[I].x)return!0}return!1}_.updateRefs=function(P){this.fullLayout=P;var l=this.id.match(T),d="xaxis"+l[1],L="yaxis"+l[2];this.xaxis=this.fullLayout[d],this.yaxis=this.fullLayout[L]},_.relayoutCallback=function(){var P=this.graphDiv,l=this.xaxis,d=this.yaxis,L=P.layout,w={},I=w[l._name+".range"]=l.range.slice(),z=w[d._name+".range"]=d.range.slice();w[l._name+".autorange"]=l.autorange,w[d._name+".autorange"]=d.autorange,M.call("_storeDirectGUIEdit",P.layout,P._fullLayout._preGUI,w);var B=L[l._name];B.range=I,B.autorange=l.autorange;var O=L[d._name];O.range=z,O.autorange=d.autorange,w.lastInputTime=this.camera.lastInputTime,P.emit("plotly_relayout",w)},_.cameraChanged=function(){var P=this.camera;this.glplot.setDataBox(this.calcDataBox());var l=this.computeTickMarks(),d=this.glplotOptions.ticks;b(l,d)&&(this.glplotOptions.ticks=l,this.glplotOptions.dataBox=P.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},_.handleAnnotations=function(){for(var P=this.graphDiv,l=this.fullLayout.annotations,d=0;d<l.length;d++){var L=l[d];L.xref===this.xaxis._id&&L.yref===this.yaxis._id&&M.getComponentMethod("annotations","drawOne")(P,d)}},_.destroy=function(){if(this.glplot){var P=this.traces;P&&Object.keys(P).map(function(l){P[l].dispose(),delete P[l]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},_.plot=function(P,l,d){var L=this.glplot;this.updateRefs(d),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(P,l),this.updateFx(d.dragmode);var w=d.width,I=d.height;this.updateSize(this.canvas);var z=this.glplotOptions;z.merge(d),z.screenBox=[0,0,w,I];var B={_fullLayout:{_axisConstraintGroups:d._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:d._size}};o(B,this.xaxis),o(B,this.yaxis);var O=d._size,R=this.xaxis.domain,C=this.yaxis.domain;z.viewBox=[O.l+R[0]*O.w,O.b+C[0]*O.h,w-O.r-(1-R[1])*O.w,I-O.t-(1-C[1])*O.h],this.mouseContainer.style.width=O.w*(R[1]-R[0])+"px",this.mouseContainer.style.height=O.h*(C[1]-C[0])+"px",this.mouseContainer.height=O.h*(C[1]-C[0]),this.mouseContainer.style.left=O.l+R[0]*O.w+"px",this.mouseContainer.style.top=O.t+(1-C[1])*O.h+"px";var F,N;for(N=0;N<2;++N)F=this[s[N]],F._length=z.viewBox[N+2]-z.viewBox[N],h(this.graphDiv,F),F.setScale();a(B),z.ticks=this.computeTickMarks(),z.dataBox=this.calcDataBox(),z.merge(d),L.update(z),this.glplot.draw()},_.calcDataBox=function(){var P=this.xaxis,l=this.yaxis,d=P.range,L=l.range,w=P.r2l,I=l.r2l;return[w(d[0]),I(L[0]),w(d[1]),I(L[1])]},_.setRanges=function(P){var l=this.xaxis,d=this.yaxis,L=l.l2r,w=d.l2r;l.range=[L(P[0]),L(P[2])],d.range=[w(P[1]),w(P[3])]},_.updateTraces=function(P,l){var d=Object.keys(this.traces),L,w,I;this.fullData=P;t:for(L=0;L<d.length;L++){var z=d[L],B=this.traces[z];for(w=0;w<P.length;w++)if(I=P[w],I.uid===z&&I.type===B.type)continue t;B.dispose(),delete this.traces[z]}for(L=0;L<P.length;L++){I=P[L];var O=l[L],R=this.traces[I.uid];R?R.update(I,O):(R=I._module.plot(this,I,O),this.traces[I.uid]=R)}this.glplot.objects.sort(function(C,F){return C._trace.index-F._trace.index})},_.updateFx=function(P){x(P)||p(P)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),P==="pan"?this.mouseContainer.style.cursor="move":P==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},_.emitPointAction=function(P,l){for(var d=P.trace.uid,L=P.pointIndex,w,I=0;I<this.fullData.length;I++)this.fullData[I].uid===d&&(w=this.fullData[I]);var z={x:P.traceCoord[0],y:P.traceCoord[1],curveNumber:w.index,pointNumber:L,data:w._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};i.appendArrayPointValue(z,w,L),this.graphDiv.emit(l,{points:[z]})},_.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var P=this.glplot,l=this.camera,d=l.mouseListener,L=this.lastButtonState===1&&d.buttons===0,w=this.fullLayout;this.lastButtonState=d.buttons,this.cameraChanged();var I=d.x*P.pixelRatio,z=this.canvas.height-P.pixelRatio*d.y,B;if(l.boxEnabled&&w.dragmode==="zoom"){this.selectBox.enabled=!0;for(var O=this.selectBox.selectBox=[Math.min(l.boxStart[0],l.boxEnd[0]),Math.min(l.boxStart[1],l.boxEnd[1]),Math.max(l.boxStart[0],l.boxEnd[0]),Math.max(l.boxStart[1],l.boxEnd[1])],R=0;R<2;R++)l.boxStart[R]===l.boxEnd[R]&&(O[R]=P.dataBox[R],O[R+2]=P.dataBox[R+2]);P.setDirty()}else if(!l.panning&&this.isMouseOver){this.selectBox.enabled=!1;var C=w._size,F=this.xaxis.domain,N=this.yaxis.domain;B=P.pick(I/P.pixelRatio+C.l+F[0]*C.w,z/P.pixelRatio-(C.t+(1-N[1])*C.h));var V=B&&B.object._trace.handlePick(B);if(V&&L&&this.emitPointAction(V,"plotly_click"),B&&B.object._trace.hoverinfo!=="skip"&&w.hovermode&&V&&(!this.lastPickResult||this.lastPickResult.traceUid!==V.trace.uid||this.lastPickResult.dataCoord[0]!==V.dataCoord[0]||this.lastPickResult.dataCoord[1]!==V.dataCoord[1])){var K=V;this.lastPickResult={traceUid:V.trace?V.trace.uid:null,dataCoord:V.dataCoord.slice()},this.spikes.update({center:B.dataCoord}),K.screenCoord=[((P.viewBox[2]-P.viewBox[0])*(B.dataCoord[0]-P.dataBox[0])/(P.dataBox[2]-P.dataBox[0])+P.viewBox[0])/P.pixelRatio,(this.canvas.height-(P.viewBox[3]-P.viewBox[1])*(B.dataCoord[1]-P.dataBox[1])/(P.dataBox[3]-P.dataBox[1])-P.viewBox[1])/P.pixelRatio],this.emitPointAction(V,"plotly_hover");var Q=this.fullData[K.trace.index]||{},at=K.pointIndex,it=i.castHoverinfo(Q,w,at);if(it&&it!=="all"){var q=it.split("+");q.indexOf("x")===-1&&(K.traceCoord[0]=void 0),q.indexOf("y")===-1&&(K.traceCoord[1]=void 0),q.indexOf("z")===-1&&(K.traceCoord[2]=void 0),q.indexOf("text")===-1&&(K.textLabel=void 0),q.indexOf("name")===-1&&(K.name=void 0)}i.loneHover({x:K.screenCoord[0],y:K.screenCoord[1],xLabel:this.hoverFormatter("xaxis",K.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",K.traceCoord[1]),zLabel:K.traceCoord[2],text:K.textLabel,name:K.name,color:i.castHoverOption(Q,at,"bgcolor")||K.color,borderColor:i.castHoverOption(Q,at,"bordercolor"),fontFamily:i.castHoverOption(Q,at,"font.family"),fontSize:i.castHoverOption(Q,at,"font.size"),fontColor:i.castHoverOption(Q,at,"font.color"),nameLength:i.castHoverOption(Q,at,"namelength"),textAlign:i.castHoverOption(Q,at,"align")},{container:this.svgContainer,gd:this.graphDiv})}}B||this.unhover(),P.draw()}},_.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),i.loneUnhover(this.svgContainer))},_.hoverFormatter=function(P,l){if(l!==void 0){var d=this[P];return E.tickText(d,d.c2l(l),"hover").text}}},58547:function($,U,t){var M=t(30962).overrideAll,E=t(528),i=t(33539),S=t(27659).NG,A=t(71828),g=t(77922),v="gl3d",e="scene";U.name=v,U.attr=e,U.idRoot=e,U.idRegex=U.attrRegex=A.counterRegex("scene"),U.attributes=t(59084),U.layoutAttributes=t(65500),U.baseLayoutAttrOverrides=M({hoverlabel:E.hoverlabel},"plot","nested"),U.supplyLayoutDefaults=t(24682),U.plot=function(r){for(var f=r._fullLayout,n=r._fullData,a=f._subplots[v],o=0;o<a.length;o++){var h=a[o],y=S(n,v,h),p=f[h],x=p.camera,s=p._scene;s||(s=new i({id:h,graphDiv:r,container:r.querySelector(".gl-container"),staticPlot:r._context.staticPlot,plotGlPixelRatio:r._context.plotGlPixelRatio,camera:x},f),p._scene=s),s.viewInitial||(s.viewInitial={up:{x:x.up.x,y:x.up.y,z:x.up.z},eye:{x:x.eye.x,y:x.eye.y,z:x.eye.z},center:{x:x.center.x,y:x.center.y,z:x.center.z}}),s.plot(y,f,r.layout)}},U.clean=function(r,f,n,a){for(var o=a._subplots[v]||[],h=0;h<o.length;h++){var y=o[h];!f[y]&&a[y]._scene&&(a[y]._scene.destroy(),a._infolayer&&a._infolayer.selectAll(".annotation-"+y).remove())}},U.toSVG=function(r){for(var f=r._fullLayout,n=f._subplots[v],a=f._size,o=0;o<n.length;o++){var h=f[n[o]],y=h.domain,p=h._scene,x=p.toImage("png"),s=f._glimages.append("svg:image");s.attr({xmlns:g.svg,"xlink:href":x,x:a.l+a.w*y.x[0],y:a.t+a.h*(1-y.y[1]),width:a.w*(y.x[1]-y.x[0]),height:a.h*(y.y[1]-y.y[0]),preserveAspectRatio:"none"}),p.destroy()}},U.cleanId=function(r){if(r.match(/^scene[0-9]*$/)){var f=r.substr(5);return f==="1"&&(f=""),e+f}},U.updateFx=function(r){for(var f=r._fullLayout,n=f._subplots[v],a=0;a<n.length;a++){var o=f[n[a]]._scene;o.updateFx(f.dragmode,f.hovermode)}}},59084:function($){$.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},77894:function($,U,t){var M=t(7901),E=t(13838),i=t(1426).extendFlat,S=t(30962).overrideAll;$.exports=S({visible:E.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:M.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:E.color,categoryorder:E.categoryorder,categoryarray:E.categoryarray,title:{text:E.title.text,font:E.title.font},type:i({},E.type,{values:["-","linear","log","date","category"]}),autotypenumbers:E.autotypenumbers,autorange:E.autorange,rangemode:E.rangemode,range:i({},E.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:E.minor.tickmode,nticks:E.nticks,tick0:E.tick0,dtick:E.dtick,tickvals:E.tickvals,ticktext:E.ticktext,ticks:E.ticks,mirror:E.mirror,ticklen:E.ticklen,tickwidth:E.tickwidth,tickcolor:E.tickcolor,showticklabels:E.showticklabels,labelalias:E.labelalias,tickfont:E.tickfont,tickangle:E.tickangle,tickprefix:E.tickprefix,showtickprefix:E.showtickprefix,ticksuffix:E.ticksuffix,showticksuffix:E.showticksuffix,showexponent:E.showexponent,exponentformat:E.exponentformat,minexponent:E.minexponent,separatethousands:E.separatethousands,tickformat:E.tickformat,tickformatstops:E.tickformatstops,hoverformat:E.hoverformat,showline:E.showline,linecolor:E.linecolor,linewidth:E.linewidth,showgrid:E.showgrid,gridcolor:i({},E.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:E.gridwidth,zeroline:E.zeroline,zerolinecolor:E.zerolinecolor,zerolinewidth:E.zerolinewidth,_deprecated:{title:E._deprecated.title,titlefont:E._deprecated.titlefont}},"plot","from-root")},3277:function($,U,t){var M=t(84267).mix,E=t(71828),i=t(44467),S=t(77894),A=t(951),g=t(71453),v=["xaxis","yaxis","zaxis"],e=100*(204-68)/(255-68);$.exports=function(r,f,n){var a,o;function h(x,s){return E.coerce(a,o,S,x,s)}for(var y=0;y<v.length;y++){var p=v[y];a=r[p]||{},o=i.newContainer(f,p),o._id=p[0]+n.scene,o._name=p,A(a,o,h,n),g(a,o,h,{font:n.font,letter:p[0],data:n.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:n.bgColor,calendar:n.calendar},n.fullLayout),h("gridcolor",M(o.color,n.bgColor,e).toRgbString()),h("title.text",p[0]),o.setScale=E.noop,h("showspikes")&&(h("spikesides"),h("spikethickness"),h("spikecolor",o.color)),h("showaxeslabels"),h("showbackground")&&h("backgroundcolor")}}},30422:function($,U,t){var M=t(78614),E=t(71828),i=["xaxis","yaxis","zaxis"];function S(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var A=S.prototype;A.merge=function(v,e){for(var r=this,f=0;f<3;++f){var n=e[i[f]];if(!n.visible){r.tickEnable[f]=!1,r.labelEnable[f]=!1,r.lineEnable[f]=!1,r.lineTickEnable[f]=!1,r.gridEnable[f]=!1,r.zeroEnable[f]=!1,r.backgroundEnable[f]=!1;continue}r.labels[f]=v._meta?E.templateString(n.title.text,v._meta):n.title.text,"font"in n.title&&(n.title.font.color&&(r.labelColor[f]=M(n.title.font.color)),n.title.font.family&&(r.labelFont[f]=n.title.font.family),n.title.font.size&&(r.labelSize[f]=n.title.font.size)),"showline"in n&&(r.lineEnable[f]=n.showline),"linecolor"in n&&(r.lineColor[f]=M(n.linecolor)),"linewidth"in n&&(r.lineWidth[f]=n.linewidth),"showgrid"in n&&(r.gridEnable[f]=n.showgrid),"gridcolor"in n&&(r.gridColor[f]=M(n.gridcolor)),"gridwidth"in n&&(r.gridWidth[f]=n.gridwidth),n.type==="log"?r.zeroEnable[f]=!1:"zeroline"in n&&(r.zeroEnable[f]=n.zeroline),"zerolinecolor"in n&&(r.zeroLineColor[f]=M(n.zerolinecolor)),"zerolinewidth"in n&&(r.zeroLineWidth[f]=n.zerolinewidth),"ticks"in n&&n.ticks?r.lineTickEnable[f]=!0:r.lineTickEnable[f]=!1,"ticklen"in n&&(r.lineTickLength[f]=r._defaultLineTickLength[f]=n.ticklen),"tickcolor"in n&&(r.lineTickColor[f]=M(n.tickcolor)),"tickwidth"in n&&(r.lineTickWidth[f]=n.tickwidth),"tickangle"in n&&(r.tickAngle[f]=n.tickangle==="auto"?-3600:Math.PI*-n.tickangle/180),"showticklabels"in n&&(r.tickEnable[f]=n.showticklabels),"tickfont"in n&&(n.tickfont.color&&(r.tickColor[f]=M(n.tickfont.color)),n.tickfont.family&&(r.tickFont[f]=n.tickfont.family),n.tickfont.size&&(r.tickSize[f]=n.tickfont.size)),"mirror"in n?["ticks","all","allticks"].indexOf(n.mirror)!==-1?(r.lineTickMirror[f]=!0,r.lineMirror[f]=!0):n.mirror===!0?(r.lineTickMirror[f]=!1,r.lineMirror[f]=!0):(r.lineTickMirror[f]=!1,r.lineMirror[f]=!1):r.lineMirror[f]=!1,"showbackground"in n&&n.showbackground!==!1?(r.backgroundEnable[f]=!0,r.backgroundColor[f]=M(n.backgroundcolor)):r.backgroundEnable[f]=!1}};function g(v,e){var r=new S;return r.merge(v,e),r}$.exports=g},24682:function($,U,t){var M=t(71828),E=t(7901),i=t(73972),S=t(49119),A=t(3277),g=t(65500),v=t(27659).NG,e="gl3d";$.exports=function(f,n,a){var o=n._basePlotModules.length>1;function h(y){if(!o){var p=M.validate(f[y],g[y]);if(p)return f[y]}}S(f,n,a,{type:e,attributes:g,handleDefaults:r,fullLayout:n,font:n.font,fullData:a,getDfltFromLayout:h,autotypenumbersDflt:n.autotypenumbers,paper_bgcolor:n.paper_bgcolor,calendar:n.calendar})};function r(f,n,a,o){for(var h=a("bgcolor"),y=E.combine(h,o.paper_bgcolor),p=["up","center","eye"],x=0;x<p.length;x++)a("camera."+p[x]+".x"),a("camera."+p[x]+".y"),a("camera."+p[x]+".z");a("camera.projection.type");var s=!!a("aspectratio.x")&&!!a("aspectratio.y")&&!!a("aspectratio.z"),u=s?"manual":"auto",c=a("aspectmode",u);s||(f.aspectratio=n.aspectratio={x:1,y:1,z:1},c==="manual"&&(n.aspectmode="auto"),f.aspectmode=n.aspectmode);var T=v(o.fullData,e,o.id);A(f,n,{font:o.font,scene:o.id,data:T,bgColor:y,calendar:o.calendar,autotypenumbersDflt:o.autotypenumbersDflt,fullLayout:o.fullLayout}),i.getComponentMethod("annotations3d","handleDefaults")(f,n,o);var k=o.getDfltFromLayout("dragmode");if(k!==!1&&!k)if(k="orbit",f.camera&&f.camera.up){var _=f.camera.up.x,b=f.camera.up.y,P=f.camera.up.z;P!==0&&(!_||!b||!P||P/Math.sqrt(_*_+b*b+P*P)>.999)&&(k="turntable")}else k="turntable";a("dragmode",k),a("hovermode",o.getDfltFromLayout("hovermode"))}},65500:function($,U,t){var M=t(77894),E=t(27670).Y,i=t(1426).extendFlat,S=t(71828).counterRegex;function A(g,v,e){return{x:{valType:"number",dflt:g,editType:"camera"},y:{valType:"number",dflt:v,editType:"camera"},z:{valType:"number",dflt:e,editType:"camera"},editType:"camera"}}$.exports={_arrayAttrRegexps:[S("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:i(A(0,0,1),{}),center:i(A(0,0,0),{}),eye:i(A(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:E({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:M,yaxis:M,zaxis:M,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},13133:function($,U,t){var M=t(78614),E=["xaxis","yaxis","zaxis"];function i(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var S=i.prototype;S.merge=function(g){for(var v=0;v<3;++v){var e=g[E[v]];if(!e.visible){this.enabled[v]=!1,this.drawSides[v]=!1;continue}this.enabled[v]=e.showspikes,this.colors[v]=M(e.spikecolor),this.drawSides[v]=e.spikesides,this.lineWidth[v]=e.spikethickness}};function A(g){var v=new i;return v.merge(g),v}$.exports=A},96085:function($,U,t){$.exports=A;var M=t(89298),E=t(71828),i=["xaxis","yaxis","zaxis"];function S(g){for(var v=new Array(3),e=0;e<3;++e){for(var r=g[e],f=new Array(r.length),n=0;n<r.length;++n)f[n]=r[n].x;v[e]=f}return v}function A(g){for(var v=g.axesOptions,e=g.glplot.axesPixels,r=g.fullSceneLayout,f=[[],[],[]],n=0;n<3;++n){var a=r[i[n]];if(a._length=(e[n].hi-e[n].lo)*e[n].pixelsPerDataUnit/g.dataScale[n],Math.abs(a._length)===1/0||isNaN(a._length))f[n]=[];else{a._input_range=a.range.slice(),a.range[0]=e[n].lo/g.dataScale[n],a.range[1]=e[n].hi/g.dataScale[n],a._m=1/(g.dataScale[n]*e[n].pixelsPerDataUnit),a.range[0]===a.range[1]&&(a.range[0]-=1,a.range[1]+=1);var o=a.tickmode;if(a.tickmode==="auto"){a.tickmode="linear";var h=a.nticks||E.constrain(a._length/40,4,9);M.autoTicks(a,Math.abs(a.range[1]-a.range[0])/h)}for(var y=M.calcTicks(a,{msUTC:!0}),p=0;p<y.length;++p)y[p].x=y[p].x*g.dataScale[n],a.type==="date"&&(y[p].text=y[p].text.replace(/\<br\>/g," "));f[n]=y,a.tickmode=o}}v.ticks=f;for(var n=0;n<3;++n){.5*(g.glplot.bounds[0][n]+g.glplot.bounds[1][n]);for(var p=0;p<2;++p)v.bounds[p][n]=g.glplot.bounds[p][n]}g.contourLevels=S(f)}},63538:function($){function U(M,E){var i=[0,0,0,0],S,A;for(S=0;S<4;++S)for(A=0;A<4;++A)i[A]+=M[4*S+A]*E[S];return i}function t(M,E){var i=U(M.projection,U(M.view,U(M.model,[E[0],E[1],E[2],1])));return i}$.exports=t},33539:function($,U,t){var M=t(9330).gl_plot3d,E=M.createCamera,i=M.createScene,S=t(40372),A=t(38520),g=t(73972),v=t(71828),e=v.preserveDrawingBuffer(),r=t(89298),f=t(30211),n=t(78614),a=t(58617),o=t(63538),h=t(30422),y=t(13133),p=t(96085),x,s,u=!1;function c(I,z){var B=document.createElement("div"),O=I.container;this.graphDiv=I.graphDiv;var R=document.createElementNS("http://www.w3.org/2000/svg","svg");R.style.position="absolute",R.style.top=R.style.left="0px",R.style.width=R.style.height="100%",R.style["z-index"]=20,R.style["pointer-events"]="none",B.appendChild(R),this.svgContainer=R,B.id=I.id,B.style.position="absolute",B.style.top=B.style.left="0px",B.style.width=B.style.height="100%",O.appendChild(B),this.fullLayout=z,this.id=I.id||"scene",this.fullSceneLayout=z[this.id],this.plotArgs=[[],{},{}],this.axesOptions=h(z,z[this.id]),this.spikeOptions=y(z[this.id]),this.container=B,this.staticMode=!!I.staticPlot,this.pixelRatio=this.pixelRatio||I.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=g.getComponentMethod("annotations3d","convert"),this.drawAnnotations=g.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var T=c.prototype;T.prepareOptions=function(){var I=this,z={canvas:I.canvas,gl:I.gl,glOptions:{preserveDrawingBuffer:e,premultipliedAlpha:!0,antialias:!0},container:I.container,axes:I.axesOptions,spikes:I.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:I.camera,pixelRatio:I.pixelRatio};if(I.staticMode){if(!s&&(x=document.createElement("canvas"),s=S({canvas:x,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!s))throw new Error("error creating static canvas/context for image server");z.gl=s,z.canvas=x}return z};var k=!0;T.tryCreatePlot=function(){var I=this,z=I.prepareOptions(),B=!0;try{I.glplot=i(z)}catch{if(I.staticMode||!k||e)B=!1;else{v.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{e=z.glOptions.preserveDrawingBuffer=!0,I.glplot=i(z)}catch{e=z.glOptions.preserveDrawingBuffer=!1,B=!1}}}return k=!1,B},T.initializeGLCamera=function(){var I=this,z=I.fullSceneLayout.camera,B=z.projection.type==="orthographic";I.camera=E(I.container,{center:[z.center.x,z.center.y,z.center.z],eye:[z.eye.x,z.eye.y,z.eye.z],up:[z.up.x,z.up.y,z.up.z],_ortho:B,zoomMin:.01,zoomMax:100,mode:"orbit"})},T.initializeGLPlot=function(){var I=this;I.initializeGLCamera();var z=I.tryCreatePlot();if(!z)return a(I);I.traces={},I.make4thDimension();var B=I.graphDiv,O=B.layout,R=function(){var F={};return I.isCameraChanged(O)&&(F[I.id+".camera"]=I.getCamera()),I.isAspectChanged(O)&&(F[I.id+".aspectratio"]=I.glplot.getAspectratio(),O[I.id].aspectmode!=="manual"&&(I.fullSceneLayout.aspectmode=O[I.id].aspectmode=F[I.id+".aspectmode"]="manual")),F},C=function(F){if(F.fullSceneLayout.dragmode!==!1){var N=R();F.saveLayout(O),F.graphDiv.emit("plotly_relayout",N)}};return I.glplot.canvas&&(I.glplot.canvas.addEventListener("mouseup",function(){C(I)}),I.glplot.canvas.addEventListener("touchstart",function(){u=!0}),I.glplot.canvas.addEventListener("wheel",function(F){if(B._context._scrollZoom.gl3d){if(I.camera._ortho){var N=F.deltaX>F.deltaY?1.1:.9090909090909092,V=I.glplot.getAspectratio();I.glplot.setAspectratio({x:N*V.x,y:N*V.y,z:N*V.z})}C(I)}},A?{passive:!1}:!1),I.glplot.canvas.addEventListener("mousemove",function(){if(I.fullSceneLayout.dragmode!==!1&&I.camera.mouseListener.buttons!==0){var F=R();I.graphDiv.emit("plotly_relayouting",F)}}),I.staticMode||I.glplot.canvas.addEventListener("webglcontextlost",function(F){B&&B.emit&&B.emit("plotly_webglcontextlost",{event:F,layer:I.id})},!1)),I.glplot.oncontextloss=function(){I.recoverContext()},I.glplot.onrender=function(){I.render()},!0},T.render=function(){var I=this,z=I.graphDiv,B,O=I.svgContainer,R=I.container.getBoundingClientRect();z._fullLayout._calcInverseTransform(z);var C=z._fullLayout._invScaleX,F=z._fullLayout._invScaleY,N=R.width*C,V=R.height*F;O.setAttributeNS(null,"viewBox","0 0 "+N+" "+V),O.setAttributeNS(null,"width",N),O.setAttributeNS(null,"height",V),p(I),I.glplot.axes.update(I.axesOptions);for(var K=Object.keys(I.traces),Q=null,at=I.glplot.selection,it=0;it<K.length;++it)B=I.traces[K[it]],B.data.hoverinfo!=="skip"&&B.handlePick(at)&&(Q=B),B.setContourLevels&&B.setContourLevels();function q(xt,Ft,Et){var mt=I.fullSceneLayout[xt+"axis"];return mt.type!=="log"&&(Ft=mt.d2l(Ft)),r.hoverLabelText(mt,Ft,Et)}if(Q!==null){var W=o(I.glplot.cameraParams,at.dataCoordinate);B=Q.data;var Z=z._fullData[B.index],G=at.index,et={xLabel:q("x",at.traceCoordinate[0],B.xhoverformat),yLabel:q("y",at.traceCoordinate[1],B.yhoverformat),zLabel:q("z",at.traceCoordinate[2],B.zhoverformat)},nt=f.castHoverinfo(Z,I.fullLayout,G),X=(nt||"").split("+"),Y=nt&&nt==="all";!Z.hovertemplate&&!Y&&(X.indexOf("x")===-1&&(et.xLabel=void 0),X.indexOf("y")===-1&&(et.yLabel=void 0),X.indexOf("z")===-1&&(et.zLabel=void 0),X.indexOf("text")===-1&&(at.textLabel=void 0),X.indexOf("name")===-1&&(Q.name=void 0));var ot,rt=[];B.type==="cone"||B.type==="streamtube"?(et.uLabel=q("x",at.traceCoordinate[3],B.uhoverformat),(Y||X.indexOf("u")!==-1)&&rt.push("u: "+et.uLabel),et.vLabel=q("y",at.traceCoordinate[4],B.vhoverformat),(Y||X.indexOf("v")!==-1)&&rt.push("v: "+et.vLabel),et.wLabel=q("z",at.traceCoordinate[5],B.whoverformat),(Y||X.indexOf("w")!==-1)&&rt.push("w: "+et.wLabel),et.normLabel=at.traceCoordinate[6].toPrecision(3),(Y||X.indexOf("norm")!==-1)&&rt.push("norm: "+et.normLabel),B.type==="streamtube"&&(et.divergenceLabel=at.traceCoordinate[7].toPrecision(3),(Y||X.indexOf("divergence")!==-1)&&rt.push("divergence: "+et.divergenceLabel)),at.textLabel&&rt.push(at.textLabel),ot=rt.join("<br>")):B.type==="isosurface"||B.type==="volume"?(et.valueLabel=r.hoverLabelText(I._mockAxis,I._mockAxis.d2l(at.traceCoordinate[3]),B.valuehoverformat),rt.push("value: "+et.valueLabel),at.textLabel&&rt.push(at.textLabel),ot=rt.join("<br>")):ot=at.textLabel;var ht={x:at.traceCoordinate[0],y:at.traceCoordinate[1],z:at.traceCoordinate[2],data:Z._input,fullData:Z,curveNumber:Z.index,pointNumber:G};f.appendArrayPointValue(ht,Z,G),B._module.eventData&&(ht=Z._module.eventData(ht,at,Z,{},G));var pt={points:[ht]};if(I.fullSceneLayout.hovermode){var yt=[];f.loneHover({trace:Z,x:(.5+.5*W[0]/W[3])*N,y:(.5-.5*W[1]/W[3])*V,xLabel:et.xLabel,yLabel:et.yLabel,zLabel:et.zLabel,text:ot,name:Q.name,color:f.castHoverOption(Z,G,"bgcolor")||Q.color,borderColor:f.castHoverOption(Z,G,"bordercolor"),fontFamily:f.castHoverOption(Z,G,"font.family"),fontSize:f.castHoverOption(Z,G,"font.size"),fontColor:f.castHoverOption(Z,G,"font.color"),nameLength:f.castHoverOption(Z,G,"namelength"),textAlign:f.castHoverOption(Z,G,"align"),hovertemplate:v.castOption(Z,G,"hovertemplate"),hovertemplateLabels:v.extendFlat({},ht,et),eventData:[ht]},{container:O,gd:z,inOut_bbox:yt}),ht.bbox=yt[0]}at.distance<5&&(at.buttons||u)?z.emit("plotly_click",pt):z.emit("plotly_hover",pt),this.oldEventData=pt}else f.loneUnhover(O),this.oldEventData&&z.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;I.drawAnnotations(I)},T.recoverContext=function(){var I=this;I.glplot.dispose();var z=function(){if(I.glplot.gl.isContextLost()){requestAnimationFrame(z);return}if(!I.initializeGLPlot()){v.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}I.plot.apply(I,I.plotArgs)};requestAnimationFrame(z)};var _=["xaxis","yaxis","zaxis"];function b(I,z,B){for(var O=I.fullSceneLayout,R=0;R<3;R++){var C=_[R],F=C.charAt(0),N=O[C],V=z[F],K=z[F+"calendar"],Q=z["_"+F+"length"];if(!v.isArrayOrTypedArray(V))B[0][R]=Math.min(B[0][R],0),B[1][R]=Math.max(B[1][R],Q-1);else for(var at,it=0;it<(Q||V.length);it++)if(v.isArrayOrTypedArray(V[it]))for(var q=0;q<V[it].length;++q)at=N.d2l(V[it][q],0,K),!isNaN(at)&&isFinite(at)&&(B[0][R]=Math.min(B[0][R],at),B[1][R]=Math.max(B[1][R],at));else at=N.d2l(V[it],0,K),!isNaN(at)&&isFinite(at)&&(B[0][R]=Math.min(B[0][R],at),B[1][R]=Math.max(B[1][R],at))}}function P(I,z){for(var B=I.fullSceneLayout,O=B.annotations||[],R=0;R<3;R++)for(var C=_[R],F=C.charAt(0),N=B[C],V=0;V<O.length;V++){var K=O[V];if(K.visible){var Q=N.r2l(K[F]);!isNaN(Q)&&isFinite(Q)&&(z[0][R]=Math.min(z[0][R],Q),z[1][R]=Math.max(z[1][R],Q))}}}T.plot=function(I,z,B){var O=this;if(O.plotArgs=[I,z,B],!O.glplot.contextLost){var R,C,F,N,V,K,Q=z[O.id],at=B[O.id];O.fullLayout=z,O.fullSceneLayout=Q,O.axesOptions.merge(z,Q),O.spikeOptions.merge(Q),O.setViewport(Q),O.updateFx(Q.dragmode,Q.hovermode),O.camera.enableWheel=O.graphDiv._context._scrollZoom.gl3d,O.glplot.setClearColor(n(Q.bgcolor)),O.setConvert(V),I?Array.isArray(I)||(I=[I]):I=[];var it=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(F=0;F<I.length;++F)R=I[F],!(R.visible!==!0||R._length===0)&&b(this,R,it);P(this,it);var q=[1,1,1];for(N=0;N<3;++N)it[1][N]===it[0][N]?q[N]=1:q[N]=1/(it[1][N]-it[0][N]);for(O.dataScale=q,O.convertAnnotations(this),F=0;F<I.length;++F)R=I[F],!(R.visible!==!0||R._length===0)&&(C=O.traces[R.uid],C?C.data.type===R.type?C.update(R):(C.dispose(),C=R._module.plot(this,R),O.traces[R.uid]=C):(C=R._module.plot(this,R),O.traces[R.uid]=C),C.name=R.name);var W=Object.keys(O.traces);t:for(F=0;F<W.length;++F){for(N=0;N<I.length;++N)if(I[N].uid===W[F]&&I[N].visible===!0&&I[N]._length!==0)continue t;C=O.traces[W[F]],C.dispose(),delete O.traces[W[F]]}O.glplot.objects.sort(function(Ht,Vt){return Ht._trace.data.index-Vt._trace.data.index});var Z=[[0,0,0],[0,0,0]],G={};for(F=0;F<3;++F){if(V=Q[_[F]],K=V.type,K in G?(G[K].acc*=q[F],G[K].count+=1):G[K]={acc:q[F],count:1},V.autorange){Z[0][F]=1/0,Z[1][F]=-1/0;var et=O.glplot.objects,nt=O.fullSceneLayout.annotations||[],X=V._name.charAt(0);for(N=0;N<et.length;N++){var Y=et[N],ot=Y.bounds,rt=Y._trace.data._pad||0;Y.constructor.name==="ErrorBars"&&V._lowerLogErrorBound?Z[0][F]=Math.min(Z[0][F],V._lowerLogErrorBound):Z[0][F]=Math.min(Z[0][F],ot[0][F]/q[F]-rt),Z[1][F]=Math.max(Z[1][F],ot[1][F]/q[F]+rt)}for(N=0;N<nt.length;N++){var ht=nt[N];if(ht.visible){var pt=V.r2l(ht[X]);Z[0][F]=Math.min(Z[0][F],pt),Z[1][F]=Math.max(Z[1][F],pt)}}if("rangemode"in V&&V.rangemode==="tozero"&&(Z[0][F]=Math.min(Z[0][F],0),Z[1][F]=Math.max(Z[1][F],0)),Z[0][F]>Z[1][F])Z[0][F]=-1,Z[1][F]=1;else{var yt=Z[1][F]-Z[0][F];Z[0][F]-=yt/32,Z[1][F]+=yt/32}if(V.autorange==="reversed"){var xt=Z[0][F];Z[0][F]=Z[1][F],Z[1][F]=xt}}else{var Ft=V.range;Z[0][F]=V.r2l(Ft[0]),Z[1][F]=V.r2l(Ft[1])}Z[0][F]===Z[1][F]&&(Z[0][F]-=1,Z[1][F]+=1),O.glplot.setBounds(F,{min:Z[0][F]*q[F],max:Z[1][F]*q[F]})}var Et,mt=Q.aspectmode;if(mt==="cube")Et=[1,1,1];else if(mt==="manual"){var gt=Q.aspectratio;Et=[gt.x,gt.y,gt.z]}else if(mt==="auto"||mt==="data"){var wt=[1,1,1];for(F=0;F<3;++F){V=Q[_[F]],K=V.type;var Pt=G[K];wt[F]=Math.pow(Pt.acc,1/Pt.count)/q[F]}mt==="data"||Math.max.apply(null,wt)/Math.min.apply(null,wt)<=4?Et=wt:Et=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");Q.aspectratio.x=at.aspectratio.x=Et[0],Q.aspectratio.y=at.aspectratio.y=Et[1],Q.aspectratio.z=at.aspectratio.z=Et[2],O.glplot.setAspectratio(Q.aspectratio),O.viewInitial.aspectratio||(O.viewInitial.aspectratio={x:Q.aspectratio.x,y:Q.aspectratio.y,z:Q.aspectratio.z}),O.viewInitial.aspectmode||(O.viewInitial.aspectmode=Q.aspectmode);var Bt=Q.domain||null,kt=z._size||null;if(Bt&&kt){var jt=O.container.style;jt.position="absolute",jt.left=kt.l+Bt.x[0]*kt.w+"px",jt.top=kt.t+(1-Bt.y[1])*kt.h+"px",jt.width=kt.w*(Bt.x[1]-Bt.x[0])+"px",jt.height=kt.h*(Bt.y[1]-Bt.y[0])+"px"}O.glplot.redraw()}},T.destroy=function(){var I=this;I.glplot&&(I.camera.mouseListener.enabled=!1,I.container.removeEventListener("wheel",I.camera.wheelListener),I.camera=null,I.glplot.dispose(),I.container.parentNode.removeChild(I.container),I.glplot=null)};function l(I){return[[I.eye.x,I.eye.y,I.eye.z],[I.center.x,I.center.y,I.center.z],[I.up.x,I.up.y,I.up.z]]}function d(I){return{up:{x:I.up[0],y:I.up[1],z:I.up[2]},center:{x:I.center[0],y:I.center[1],z:I.center[2]},eye:{x:I.eye[0],y:I.eye[1],z:I.eye[2]},projection:{type:I._ortho===!0?"orthographic":"perspective"}}}T.getCamera=function(){var I=this;return I.camera.view.recalcMatrix(I.camera.view.lastT()),d(I.camera)},T.setViewport=function(I){var z=this,B=I.camera;z.camera.lookAt.apply(this,l(B)),z.glplot.setAspectratio(I.aspectratio);var O=B.projection.type==="orthographic",R=z.camera._ortho;O!==R&&(z.glplot.redraw(),z.glplot.clearRGBA(),z.glplot.dispose(),z.initializeGLPlot())},T.isCameraChanged=function(I){var z=this,B=z.getCamera(),O=v.nestedProperty(I,z.id+".camera"),R=O.get();function C(K,Q,at,it){var q=["up","center","eye"],W=["x","y","z"];return Q[q[at]]&&K[q[at]][W[it]]===Q[q[at]][W[it]]}var F=!1;if(R===void 0)F=!0;else{for(var N=0;N<3;N++)for(var V=0;V<3;V++)if(!C(B,R,N,V)){F=!0;break}(!R.projection||B.projection&&B.projection.type!==R.projection.type)&&(F=!0)}return F},T.isAspectChanged=function(I){var z=this,B=z.glplot.getAspectratio(),O=v.nestedProperty(I,z.id+".aspectratio"),R=O.get();return R===void 0||R.x!==B.x||R.y!==B.y||R.z!==B.z},T.saveLayout=function(I){var z=this,B=z.fullLayout,O,R,C,F,N,V,K=z.isCameraChanged(I),Q=z.isAspectChanged(I),at=K||Q;if(at){var it={};if(K&&(O=z.getCamera(),R=v.nestedProperty(I,z.id+".camera"),C=R.get(),it[z.id+".camera"]=C),Q&&(F=z.glplot.getAspectratio(),N=v.nestedProperty(I,z.id+".aspectratio"),V=N.get(),it[z.id+".aspectratio"]=V),g.call("_storeDirectGUIEdit",I,B._preGUI,it),K){R.set(O);var q=v.nestedProperty(B,z.id+".camera");q.set(O)}if(Q){N.set(F);var W=v.nestedProperty(B,z.id+".aspectratio");W.set(F),z.glplot.redraw()}}return at},T.updateFx=function(I,z){var B=this,O=B.camera;if(O)if(I==="orbit")O.mode="orbit",O.keyBindingMode="rotate";else if(I==="turntable"){O.up=[0,0,1],O.mode="turntable",O.keyBindingMode="rotate";var R=B.graphDiv,C=R._fullLayout,F=B.fullSceneLayout.camera,N=F.up.x,V=F.up.y,K=F.up.z;if(K/Math.sqrt(N*N+V*V+K*K)<.999){var Q=B.id+".camera.up",at={x:0,y:0,z:1},it={};it[Q]=at;var q=R.layout;g.call("_storeDirectGUIEdit",q,C._preGUI,it),F.up=at,v.nestedProperty(q,Q).set(at)}}else O.keyBindingMode=I;B.fullSceneLayout.hovermode=z};function L(I,z,B){for(var O=0,R=B-1;O<R;++O,--R)for(var C=0;C<z;++C)for(var F=0;F<4;++F){var N=4*(z*O+C)+F,V=4*(z*R+C)+F,K=I[N];I[N]=I[V],I[V]=K}}function w(I,z,B){for(var O=0;O<B;++O)for(var R=0;R<z;++R){var C=4*(z*O+R),F=I[C+3];if(F>0)for(var N=255/F,V=0;V<3;++V)I[C+V]=Math.min(N*I[C+V],255)}}T.toImage=function(I){var z=this;I||(I="png"),z.staticMode&&z.container.appendChild(x),z.glplot.redraw();var B=z.glplot.gl,O=B.drawingBufferWidth,R=B.drawingBufferHeight;B.bindFramebuffer(B.FRAMEBUFFER,null);var C=new Uint8Array(O*R*4);B.readPixels(0,0,O,R,B.RGBA,B.UNSIGNED_BYTE,C),L(C,O,R),w(C,O,R);var F=document.createElement("canvas");F.width=O,F.height=R;var N=F.getContext("2d",{willReadFrequently:!0}),V=N.createImageData(O,R);V.data.set(C),N.putImageData(V,0,0);var K;switch(I){case"jpeg":K=F.toDataURL("image/jpeg");break;case"webp":K=F.toDataURL("image/webp");break;default:K=F.toDataURL("image/png")}return z.staticMode&&z.container.removeChild(x),K},T.setConvert=function(){for(var I=this,z=0;z<3;z++){var B=I.fullSceneLayout[_[z]];r.setConvert(B,I.fullLayout),B.setScale=v.noop}},T.make4thDimension=function(){var I=this,z=I.graphDiv,B=z._fullLayout;I._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},r.setConvert(I._mockAxis,B)},$.exports=c},90060:function($){$.exports=function(U,t,M,E){E=E||U.length;for(var i=new Array(E),S=0;S<E;S++)i[S]=[U[S],t[S],M[S]];return i}},10820:function($,U,t){var M=t(41940),E=t(85594),i=t(22399),S=t(29241),A=t(53777),g=t(35025),v=t(1426).extendFlat,e=M({editType:"calc"});e.family.dflt='"Open Sans", verdana, arial, sans-serif',e.size.dflt=12,e.color.dflt=i.defaultLine,$.exports={font:e,title:{text:{valType:"string",editType:"layoutstyle"},font:M({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:v(g({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:i.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:i.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:i.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:S.newshape,activeshape:S.activeshape,newselection:A.newselection,activeselection:A.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:v({},E.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:M({editType:"layoutstyle"})}}},77734:function($,U,t){var M=t(78607),E="1.10.1",i='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',S=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',i].join(" "),A=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),g=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),v={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:i,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:S,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:S,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:A,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:A,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:g,tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},e=M(v);$.exports={requiredVersion:E,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:v,styleValuesNonMapbox:e,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+E+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",e.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},13056:function($,U,t){var M=t(71828);$.exports=function(E,i){var S=E.split(" "),A=S[0],g=S[1],v=M.isArrayOrTypedArray(i)?M.mean(i):i,e=.5+v/100,r=1.5+v/100,f=["",""],n=[0,0];switch(A){case"top":f[0]="top",n[1]=-r;break;case"bottom":f[0]="bottom",n[1]=r;break}switch(g){case"left":f[1]="right",n[0]=-e;break;case"right":f[1]="left",n[0]=e;break}var a;return f[0]&&f[1]?a=f.join("-"):f[0]?a=f[0]:f[1]?a=f[1]:a="center",{anchor:a,offset:n}}},50101:function($,U,t){var M=t(44517),E=t(71828),i=E.strTranslate,S=E.strScale,A=t(27659).AU,g=t(77922),v=t(39898),e=t(91424),r=t(63893),f=t(10481),n="mapbox",a=U.constants=t(77734);U.name=n,U.attr="subplot",U.idRoot=n,U.idRegex=U.attrRegex=E.counterRegex(n),U.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},U.layoutAttributes=t(23585),U.supplyLayoutDefaults=t(77882),U.plot=function(y){var p=y._fullLayout,x=y.calcdata,s=p._subplots[n];if(M.version!==a.requiredVersion)throw new Error(a.wrongVersionErrorMsg);var u=o(y,s);M.accessToken=u;for(var c=0;c<s.length;c++){var T=s[c],k=A(x,n,T),_=p[T],b=_._subplot;b||(b=new f(y,T),p[T]._subplot=b),b.viewInitial||(b.viewInitial={center:E.extendFlat({},_.center),zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),b.plot(k,p,y._promises)}},U.clean=function(y,p,x,s){for(var u=s._subplots[n]||[],c=0;c<u.length;c++){var T=u[c];!p[T]&&s[T]._subplot&&s[T]._subplot.destroy()}},U.toSVG=function(y){for(var p=y._fullLayout,x=p._subplots[n],s=p._size,u=0;u<x.length;u++){var c=p[x[u]],T=c.domain,k=c._subplot,_=k.toImage("png"),b=p._glimages.append("svg:image");b.attr({xmlns:g.svg,"xlink:href":_,x:s.l+s.w*T.x[0],y:s.t+s.h*(1-T.y[1]),width:s.w*(T.x[1]-T.x[0]),height:s.h*(T.y[1]-T.y[0]),preserveAspectRatio:"none"});var P=v.select(c._subplot.div),l=P.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!l){var d=p._glimages.append("g");d.attr("transform",i(s.l+s.w*T.x[0]+10,s.t+s.h*(1-T.y[0])-31)),d.append("path").attr("d",a.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),d.append("path").attr("d",a.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),d.append("path").attr("d",a.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),d.append("polygon").attr("points",a.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var L=P.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),w=p._glimages.append("g"),I=w.append("text");I.text(L).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":L});var z=e.bBox(I.node()),B=s.w*(T.x[1]-T.x[0]);if(z.width>B/2){var O=L.split("|").join("<br>");I.text(O).attr("data-unformatted",O).call(r.convertToTspans,y),z=e.bBox(I.node())}I.attr("transform",i(-3,-z.height+8)),w.insert("rect",".static-attribution").attr({x:-z.width-6,y:-z.height-3,width:z.width+6,height:z.height+3,fill:"rgba(255, 255, 255, 0.75)"});var R=1;z.width+6>B&&(R=B/(z.width+6));var C=[s.l+s.w*T.x[1],s.t+s.h*(1-T.y[0])];w.attr("transform",i(C[0],C[1])+S(R))}};function o(y,p){var x=y._fullLayout,s=y._context;if(s.mapboxAccessToken==="")return"";for(var u=[],c=[],T=!1,k=!1,_=0;_<p.length;_++){var b=x[p[_]],P=b.accesstoken;h(b.style)&&(P?E.pushUnique(u,P):(h(b._input.style)&&(E.error("Uses Mapbox map style, but did not set an access token."),T=!0),k=!0)),P&&E.pushUnique(c,P)}if(k){var l=T?a.noAccessTokenErrorMsg:a.missingStyleErrorMsg;throw E.error(l),new Error(l)}return u.length?(u.length>1&&E.warn(a.multipleTokensErrorMsg),u[0]):(c.length&&E.log(["Listed mapbox access token(s)",c.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function h(y){return typeof y=="string"&&(a.styleValuesMapbox.indexOf(y)!==-1||y.indexOf("mapbox://")===0)}U.updateFx=function(y){for(var p=y._fullLayout,x=p._subplots[n],s=0;s<x.length;s++){var u=p[x[s]]._subplot;u.updateFx(p)}}},67911:function($,U,t){var M=t(71828),E=t(63893).sanitizeHTML,i=t(13056),S=t(77734);function A(f,n){this.subplot=f,this.uid=f.uid+"-"+n,this.index=n,this.idSource="source-"+this.uid,this.idLayer=S.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var g=A.prototype;g.update=function(f){this.visible?this.needsNewImage(f)?this.updateImage(f):this.needsNewSource(f)?(this.removeLayer(),this.updateSource(f),this.updateLayer(f)):this.needsNewLayer(f)?this.updateLayer(f):this.updateStyle(f):(this.updateSource(f),this.updateLayer(f)),this.visible=v(f)},g.needsNewImage=function(f){var n=this.subplot.map;return n.getSource(this.idSource)&&this.sourceType==="image"&&f.sourcetype==="image"&&(this.source!==f.source||JSON.stringify(this.coordinates)!==JSON.stringify(f.coordinates))},g.needsNewSource=function(f){return this.sourceType!==f.sourcetype||JSON.stringify(this.source)!==JSON.stringify(f.source)||this.layerType!==f.type},g.needsNewLayer=function(f){return this.layerType!==f.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},g.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},g.updateImage=function(f){var n=this.subplot.map;n.getSource(this.idSource).updateImage({url:f.source,coordinates:f.coordinates});var a=this.findFollowingMapboxLayerId(this.lookupBelow());a!==null&&this.subplot.map.moveLayer(this.idLayer,a)},g.updateSource=function(f){var n=this.subplot.map;if(n.getSource(this.idSource)&&n.removeSource(this.idSource),this.sourceType=f.sourcetype,this.source=f.source,!!v(f)){var a=r(f);n.addSource(this.idSource,a)}},g.findFollowingMapboxLayerId=function(f){if(f==="traces")for(var n=this.subplot.getMapLayers(),a=0;a<n.length;a++){var o=n[a].id;if(typeof o=="string"&&o.indexOf(S.traceLayerPrefix)===0){f=o;break}}return f},g.updateLayer=function(f){var n=this.subplot,a=e(f),o=this.lookupBelow(),h=this.findFollowingMapboxLayerId(o);this.removeLayer(),v(f)&&n.addLayer({id:this.idLayer,source:this.idSource,"source-layer":f.sourcelayer||"",type:f.type,minzoom:f.minzoom,maxzoom:f.maxzoom,layout:a.layout,paint:a.paint},h),this.layerType=f.type,this.below=o},g.updateStyle=function(f){if(v(f)){var n=e(f);this.subplot.setOptions(this.idLayer,"setLayoutProperty",n.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",n.paint)}},g.removeLayer=function(){var f=this.subplot.map;f.getLayer(this.idLayer)&&f.removeLayer(this.idLayer)},g.dispose=function(){var f=this.subplot.map;f.getLayer(this.idLayer)&&f.removeLayer(this.idLayer),f.getSource(this.idSource)&&f.removeSource(this.idSource)};function v(f){if(!f.visible)return!1;var n=f.source;if(Array.isArray(n)&&n.length>0){for(var a=0;a<n.length;a++)if(typeof n[a]!="string"||n[a].length===0)return!1;return!0}return M.isPlainObject(n)||typeof n=="string"&&n.length>0}function e(f){var n={},a={};switch(f.type){case"circle":M.extendFlat(a,{"circle-radius":f.circle.radius,"circle-color":f.color,"circle-opacity":f.opacity});break;case"line":M.extendFlat(a,{"line-width":f.line.width,"line-color":f.color,"line-opacity":f.opacity,"line-dasharray":f.line.dash});break;case"fill":M.extendFlat(a,{"fill-color":f.color,"fill-outline-color":f.fill.outlinecolor,"fill-opacity":f.opacity});break;case"symbol":var o=f.symbol,h=i(o.textposition,o.iconsize);M.extendFlat(n,{"icon-image":o.icon+"-15","icon-size":o.iconsize/10,"text-field":o.text,"text-size":o.textfont.size,"text-anchor":h.anchor,"text-offset":h.offset,"symbol-placement":o.placement}),M.extendFlat(a,{"icon-color":f.color,"text-color":o.textfont.color,"text-opacity":f.opacity});break;case"raster":M.extendFlat(a,{"raster-fade-duration":0,"raster-opacity":f.opacity});break}return{layout:n,paint:a}}function r(f){var n=f.sourcetype,a=f.source,o={type:n},h;return n==="geojson"?h="data":n==="vector"?h=typeof a=="string"?"url":"tiles":n==="raster"?(h="tiles",o.tileSize=256):n==="image"&&(h="url",o.coordinates=f.coordinates),o[h]=a,f.sourceattribution&&(o.attribution=E(f.sourceattribution)),o}$.exports=function(f,n,a){var o=new A(f,n);return o.update(a),o}},23585:function($,U,t){var M=t(71828),E=t(7901).defaultLine,i=t(27670).Y,S=t(41940),A=t(82196).textposition,g=t(30962).overrideAll,v=t(44467).templatedArray,e=t(77734),r=S({});r.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var f=$.exports=g({_arrayAttrRegexps:[M.counterRegex("mapbox",".layers",!0)],domain:i({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:e.styleValuesMapbox.concat(e.styleValuesNonMapbox),dflt:e.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:v("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:E},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:E}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:r,textposition:M.extendFlat({},A,{arrayOk:!1})}})},"plot","from-root");f.uirevision={valType:"any",editType:"none"}},77882:function($,U,t){var M=t(71828),E=t(49119),i=t(85501),S=t(23585);$.exports=function(v,e,r){E(v,e,r,{type:"mapbox",attributes:S,handleDefaults:A,partition:"y",accessToken:e._mapboxAccessToken})};function A(v,e,r,f){r("accesstoken",f.accessToken),r("style"),r("center.lon"),r("center.lat"),r("zoom"),r("bearing"),r("pitch");var n=r("bounds.west"),a=r("bounds.east"),o=r("bounds.south"),h=r("bounds.north");(n===void 0||a===void 0||o===void 0||h===void 0)&&delete e.bounds,i(v,e,{name:"layers",handleItemDefaults:g}),e._input=v}function g(v,e){function r(y,p){return M.coerce(v,e,S.layers,y,p)}var f=r("visible");if(f){var n=r("sourcetype"),a=n==="raster"||n==="image";r("source"),r("sourceattribution"),n==="vector"&&r("sourcelayer"),n==="image"&&r("coordinates");var o;a&&(o="raster");var h=r("type",o);a&&h!=="raster"&&(h=e.type="raster",M.log("Source types *raster* and *image* must drawn *raster* layer type.")),r("below"),r("color"),r("opacity"),r("minzoom"),r("maxzoom"),h==="circle"&&r("circle.radius"),h==="line"&&(r("line.width"),r("line.dash")),h==="fill"&&r("fill.outlinecolor"),h==="symbol"&&(r("symbol.icon"),r("symbol.iconsize"),r("symbol.text"),M.coerceFont(r,"symbol.textfont"),r("symbol.textposition"),r("symbol.placement"))}}},10481:function($,U,t){var M=t(44517),E=t(71828),i=t(41327),S=t(73972),A=t(89298),g=t(28569),v=t(30211),e=t(64505),r=e.drawMode,f=e.selectMode,n=t(47322).prepSelect,a=t(47322).clearOutline,o=t(47322).clearSelectionsCache,h=t(47322).selectOnClick,y=t(77734),p=t(67911);function x(_,b){this.id=b,this.gd=_;var P=_._fullLayout,l=_._context;this.container=P._glcontainer.node(),this.isStatic=l.staticPlot,this.uid=P._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(P),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var s=x.prototype;s.plot=function(_,b,P){var l=this,d=b[l.id];l.map&&d.accesstoken!==l.accessToken&&(l.map.remove(),l.map=null,l.styleObj=null,l.traceHash={},l.layerList=[]);var L;l.map?L=new Promise(function(w,I){l.updateMap(_,b,w,I)}):L=new Promise(function(w,I){l.createMap(_,b,w,I)}),P.push(L)},s.createMap=function(_,b,P,l){var d=this,L=b[d.id],w=d.styleObj=c(L.style);d.accessToken=L.accesstoken;var I=L.bounds,z=I?[[I.west,I.south],[I.east,I.north]]:null,B=d.map=new M.Map({container:d.div,style:w.style,center:k(L.center),zoom:L.zoom,bearing:L.bearing,pitch:L.pitch,maxBounds:z,interactive:!d.isStatic,preserveDrawingBuffer:d.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new M.AttributionControl({compact:!0}));B._canvas.style.left="0px",B._canvas.style.top="0px",d.rejectOnError(l),d.isStatic||d.initFx(_,b);var O=[];O.push(new Promise(function(R){B.once("load",R)})),O=O.concat(i.fetchTraceGeoData(_)),Promise.all(O).then(function(){d.fillBelowLookup(_,b),d.updateData(_),d.updateLayout(b),d.resolveOnRender(P)}).catch(l)},s.updateMap=function(_,b,P,l){var d=this,L=d.map,w=b[this.id];d.rejectOnError(l);var I=[],z=c(w.style);JSON.stringify(d.styleObj)!==JSON.stringify(z)&&(d.styleObj=z,L.setStyle(z.style),d.traceHash={},I.push(new Promise(function(B){L.once("styledata",B)}))),I=I.concat(i.fetchTraceGeoData(_)),Promise.all(I).then(function(){d.fillBelowLookup(_,b),d.updateData(_),d.updateLayout(b),d.resolveOnRender(P)}).catch(l)},s.fillBelowLookup=function(_,b){var P=b[this.id],l=P.layers,d,L,w=this.belowLookup={},I=!1;for(d=0;d<_.length;d++){var z=_[d][0].trace,B=z._module;typeof z.below=="string"?L=z.below:B.getBelow&&(L=B.getBelow(z,this)),L===""&&(I=!0),w["trace-"+z.uid]=L||""}for(d=0;d<l.length;d++){var O=l[d];typeof O.below=="string"?L=O.below:I?L="traces":L="",w["layout-"+d]=L}var R={},C,F;for(C in w)L=w[C],R[L]?R[L].push(C):R[L]=[C];for(L in R){var N=R[L];if(N.length>1)for(d=0;d<N.length;d++)C=N[d],C.indexOf("trace-")===0?(F=C.split("trace-")[1],this.traceHash[F]&&(this.traceHash[F].below=null)):C.indexOf("layout-")===0&&(F=C.split("layout-")[1],this.layerList[F]&&(this.layerList[F].below=null))}};var u={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};s.updateData=function(_){var b=this.traceHash,P,l,d,L,w=_.slice().sort(function(R,C){return u[R[0].trace.type]-u[C[0].trace.type]});for(d=0;d<w.length;d++){var I=w[d];l=I[0].trace,P=b[l.uid];var z=!1;P&&(P.type===l.type?(P.update(I),z=!0):P.dispose()),!z&&l._module&&(b[l.uid]=l._module.plot(this,I))}var B=Object.keys(b);t:for(d=0;d<B.length;d++){var O=B[d];for(L=0;L<_.length;L++)if(l=_[L][0].trace,O===l.uid)continue t;P=b[O],P.dispose(),delete b[O]}},s.updateLayout=function(_){var b=this.map,P=_[this.id];!this.dragging&&!this.wheeling&&(b.setCenter(k(P.center)),b.setZoom(P.zoom),b.setBearing(P.bearing),b.setPitch(P.pitch)),this.updateLayers(_),this.updateFramework(_),this.updateFx(_),this.map.resize(),this.gd._context._scrollZoom.mapbox?b.scrollZoom.enable():b.scrollZoom.disable()},s.resolveOnRender=function(_){var b=this.map;b.on("render",function P(){b.loaded()&&(b.off("render",P),setTimeout(_,10))})},s.rejectOnError=function(_){var b=this.map;function P(){_(new Error(y.mapOnErrorMsg))}b.once("error",P),b.once("style.error",P),b.once("source.error",P),b.once("tile.error",P),b.once("layer.error",P)},s.createFramework=function(_){var b=this,P=b.div=document.createElement("div");P.id=b.uid,P.style.position="absolute",b.container.appendChild(P),b.xaxis={_id:"x",c2p:function(l){return b.project(l).x}},b.yaxis={_id:"y",c2p:function(l){return b.project(l).y}},b.updateFramework(_),b.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},A.setConvert(b.mockAxis,_)},s.initFx=function(_,b){var P=this,l=P.gd,d=P.map;d.on("moveend",function(I){if(P.map){var z=l._fullLayout;if(I.originalEvent||P.wheeling){var B=z[P.id];S.call("_storeDirectGUIEdit",l.layout,z._preGUI,P.getViewEdits(B));var O=P.getView();B._input.center=B.center=O.center,B._input.zoom=B.zoom=O.zoom,B._input.bearing=B.bearing=O.bearing,B._input.pitch=B.pitch=O.pitch,l.emit("plotly_relayout",P.getViewEditsWithDerived(O))}I.originalEvent&&I.originalEvent.type==="mouseup"?P.dragging=!1:P.wheeling&&(P.wheeling=!1),z._rehover&&z._rehover()}}),d.on("wheel",function(){P.wheeling=!0}),d.on("mousemove",function(I){var z=P.div.getBoundingClientRect(),B=[I.originalEvent.offsetX,I.originalEvent.offsetY];I.target.getBoundingClientRect=function(){return z},P.xaxis.p2c=function(){return d.unproject(B).lng},P.yaxis.p2c=function(){return d.unproject(B).lat},l._fullLayout._rehover=function(){l._fullLayout._hoversubplot===P.id&&l._fullLayout[P.id]&&v.hover(l,I,P.id)},v.hover(l,I,P.id),l._fullLayout._hoversubplot=P.id});function L(){v.loneUnhover(b._hoverlayer)}d.on("dragstart",function(){P.dragging=!0,L()}),d.on("zoomstart",L),d.on("mouseout",function(){l._fullLayout._hoversubplot=null});function w(){var I=P.getView();l.emit("plotly_relayouting",P.getViewEditsWithDerived(I))}d.on("drag",w),d.on("zoom",w),d.on("dblclick",function(){var I=l._fullLayout[P.id];S.call("_storeDirectGUIEdit",l.layout,l._fullLayout._preGUI,P.getViewEdits(I));var z=P.viewInitial;d.setCenter(k(z.center)),d.setZoom(z.zoom),d.setBearing(z.bearing),d.setPitch(z.pitch);var B=P.getView();I._input.center=I.center=B.center,I._input.zoom=I.zoom=B.zoom,I._input.bearing=I.bearing=B.bearing,I._input.pitch=I.pitch=B.pitch,l.emit("plotly_doubleclick",null),l.emit("plotly_relayout",P.getViewEditsWithDerived(B))}),P.clearOutline=function(){o(P.dragOptions),a(P.dragOptions.gd)},P.onClickInPanFn=function(I){return function(z){var B=l._fullLayout.clickmode;B.indexOf("select")>-1&&h(z.originalEvent,l,[P.xaxis],[P.yaxis],P.id,I),B.indexOf("event")>-1&&v.click(l,z.originalEvent)}}},s.updateFx=function(_){var b=this,P=b.map,l=b.gd;if(b.isStatic)return;function d(z){var B=b.map.unproject(z);return[B.lng,B.lat]}var L=_.dragmode,w;w=function(z,B){if(B.isRect){var O=z.range={};O[b.id]=[d([B.xmin,B.ymin]),d([B.xmax,B.ymax])]}else{var R=z.lassoPoints={};R[b.id]=B.map(d)}};var I=b.dragOptions;b.dragOptions=E.extendDeep(I||{},{dragmode:_.dragmode,element:b.div,gd:l,plotinfo:{id:b.id,domain:_[b.id].domain,xaxis:b.xaxis,yaxis:b.yaxis,fillRangeItems:w},xaxes:[b.xaxis],yaxes:[b.yaxis],subplot:b.id}),P.off("click",b.onClickInPanHandler),f(L)||r(L)?(P.dragPan.disable(),P.on("zoomstart",b.clearOutline),b.dragOptions.prepFn=function(z,B,O){n(z,B,O,b.dragOptions,L)},g.init(b.dragOptions)):(P.dragPan.enable(),P.off("zoomstart",b.clearOutline),b.div.onmousedown=null,b.div.ontouchstart=null,b.div.removeEventListener("touchstart",b.div._ontouchstart),b.onClickInPanHandler=b.onClickInPanFn(b.dragOptions),P.on("click",b.onClickInPanHandler))},s.updateFramework=function(_){var b=_[this.id].domain,P=_._size,l=this.div.style;l.width=P.w*(b.x[1]-b.x[0])+"px",l.height=P.h*(b.y[1]-b.y[0])+"px",l.left=P.l+b.x[0]*P.w+"px",l.top=P.t+(1-b.y[1])*P.h+"px",this.xaxis._offset=P.l+b.x[0]*P.w,this.xaxis._length=P.w*(b.x[1]-b.x[0]),this.yaxis._offset=P.t+(1-b.y[1])*P.h,this.yaxis._length=P.h*(b.y[1]-b.y[0])},s.updateLayers=function(_){var b=_[this.id],P=b.layers,l=this.layerList,d;if(P.length!==l.length){for(d=0;d<l.length;d++)l[d].dispose();for(l=this.layerList=[],d=0;d<P.length;d++)l.push(p(this,d,P[d]))}else for(d=0;d<P.length;d++)l[d].update(P[d])},s.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},s.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},s.setOptions=function(_,b,P){for(var l in P)this.map[b](_,l,P[l])},s.getMapLayers=function(){return this.map.getStyle().layers},s.addLayer=function(_,b){var P=this.map;if(typeof b=="string"){if(b===""){P.addLayer(_,b);return}for(var l=this.getMapLayers(),d=0;d<l.length;d++)if(b===l[d].id){P.addLayer(_,b);return}E.warn(["Trying to add layer with *below* value",b,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}P.addLayer(_)},s.project=function(_){return this.map.project(new M.LngLat(_[0],_[1]))},s.getView=function(){var _=this.map,b=_.getCenter(),P=b.lng,l=b.lat,d={lon:P,lat:l},L=_.getCanvas(),w=parseInt(L.style.width),I=parseInt(L.style.height);return{center:d,zoom:_.getZoom(),bearing:_.getBearing(),pitch:_.getPitch(),_derived:{coordinates:[_.unproject([0,0]).toArray(),_.unproject([w,0]).toArray(),_.unproject([w,I]).toArray(),_.unproject([0,I]).toArray()]}}},s.getViewEdits=function(_){for(var b=this.id,P=["center","zoom","bearing","pitch"],l={},d=0;d<P.length;d++){var L=P[d];l[b+"."+L]=_[L]}return l},s.getViewEditsWithDerived=function(_){var b=this.id,P=this.getViewEdits(_);return P[b+"._derived"]=_._derived,P};function c(_){var b={};return E.isPlainObject(_)?(b.id=_.id,b.style=_):typeof _=="string"?(b.id=_,y.styleValuesMapbox.indexOf(_)!==-1?b.style=T(_):y.stylesNonMapbox[_]?b.style=y.stylesNonMapbox[_]:b.style=_):(b.id=y.styleValueDflt,b.style=T(y.styleValueDflt)),b.transition={duration:0,delay:0},b}function T(_){return y.styleUrlPrefix+_+"-"+y.styleUrlSuffix}function k(_){return[_.lon,_.lat]}$.exports=x},35025:function($){$.exports=function(U){var t=U.editType;return{t:{valType:"number",dflt:0,editType:t},r:{valType:"number",dflt:0,editType:t},b:{valType:"number",dflt:0,editType:t},l:{valType:"number",dflt:0,editType:t},editType:t}}},74875:function($,U,t){var M=t(39898),E=t(84096).Dq,i=t(60721).FF,S=t(92770),A=t(73972),g=t(86281),v=t(44467),e=t(71828),r=t(7901),f=t(50606).BADNUM,n=t(41675),a=t(51873).clearOutline,o=t(21479),h=t(85594),y=t(31391),p=t(27659).a0,x=e.relinkPrivateKeys,s=e._,u=$.exports={};e.extendFlat(u,A),u.attributes=t(9012),u.attributes.type.values=u.allTypes,u.fontAttrs=t(41940),u.layoutAttributes=t(10820),u.fontWeight="normal";var c=u.transformsRegistry,T=t(31137);u.executeAPICommand=T.executeAPICommand,u.computeAPICommandBindings=T.computeAPICommandBindings,u.manageCommandObserver=T.manageCommandObserver,u.hasSimpleAPICommandBindings=T.hasSimpleAPICommandBindings,u.redrawText=function(Z){return Z=e.getGraphDiv(Z),new Promise(function(G){setTimeout(function(){Z._fullLayout&&(A.getComponentMethod("annotations","draw")(Z),A.getComponentMethod("legend","draw")(Z),A.getComponentMethod("colorbar","draw")(Z),G(u.previousPromises(Z)))},300)})},u.resize=function(Z){Z=e.getGraphDiv(Z);var G,et=new Promise(function(nt,X){(!Z||e.isHidden(Z))&&X(new Error("Resize must be passed a displayed plot div element.")),Z._redrawTimer&&clearTimeout(Z._redrawTimer),Z._resolveResize&&(G=Z._resolveResize),Z._resolveResize=nt,Z._redrawTimer=setTimeout(function(){if(!Z.layout||Z.layout.width&&Z.layout.height||e.isHidden(Z)){nt(Z);return}delete Z.layout.width,delete Z.layout.height;var Y=Z.changed;Z.autoplay=!0,A.call("relayout",Z,{autosize:!0}).then(function(){Z.changed=Y,Z._resolveResize===nt&&(delete Z._resolveResize,nt(Z))})},100)});return G&&G(et),et},u.previousPromises=function(Z){if((Z._promises||[]).length)return Promise.all(Z._promises).then(function(){Z._promises=[]})},u.addLinks=function(Z){if(!(!Z._context.showLink&&!Z._context.showSources)){var G=Z._fullLayout,et=e.ensureSingle(G._paper,"text","js-plot-link-container",function(ht){ht.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:r.defaultLine,"pointer-events":"all"}).each(function(){var pt=M.select(this);pt.append("tspan").classed("js-link-to-tool",!0),pt.append("tspan").classed("js-link-spacer",!0),pt.append("tspan").classed("js-sourcelinks",!0)})}),nt=et.node(),X={y:G._paper.attr("height")-9};document.body.contains(nt)&&nt.getComputedTextLength()>=G.width-20?(X["text-anchor"]="start",X.x=5):(X["text-anchor"]="end",X.x=G._paper.attr("width")-7),et.attr(X);var Y=et.select(".js-link-to-tool"),ot=et.select(".js-link-spacer"),rt=et.select(".js-sourcelinks");Z._context.showSources&&Z._context.showSources(Z),Z._context.showLink&&k(Z,Y),ot.text(Y.text()&&rt.text()?" - ":"")}};function k(Z,G){G.text("");var et=G.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(Z._context.linkText+" "+String.fromCharCode(187));if(Z._context.sendData)et.on("click",function(){u.sendDataToCloud(Z)});else{var nt=window.location.pathname.split("/"),X=window.location.search;et.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+nt[2].split(".")[0]+"/"+nt[1]+X})}}u.sendDataToCloud=function(Z){var G=(window.PLOTLYENV||{}).BASE_URL||Z._context.plotlyServerURL;if(G){Z.emit("plotly_beforeexport");var et=M.select(Z).append("div").attr("id","hiddenform").style("display","none"),nt=et.append("form").attr({action:G+"/external",method:"post",target:"_blank"}),X=nt.append("input").attr({type:"text",name:"data"});return X.node().value=u.graphJson(Z,!1,"keepdata"),nt.node().submit(),et.remove(),Z.emit("plotly_afterexport"),!1}};var _=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],b=["year","month","dayMonth","dayMonthYear"];u.supplyDefaults=function(Z,G){var et=G&&G.skipUpdateCalc,nt=Z._fullLayout||{};if(nt._skipDefaults){delete nt._skipDefaults;return}var X=Z._fullLayout={},Y=Z.layout||{},ot=Z._fullData||[],rt=Z._fullData=[],ht=Z.data||[],pt=Z.calcdata||[],yt=Z._context||{},xt;Z._transitionData||u.createTransitionData(Z),X._dfltTitle={plot:s(Z,"Click to enter Plot title"),x:s(Z,"Click to enter X axis title"),y:s(Z,"Click to enter Y axis title"),colorbar:s(Z,"Click to enter Colorscale title"),annotation:s(Z,"new text")},X._traceWord=s(Z,"trace");var Ft=d(Z,_);if(X._mapboxAccessToken=yt.mapboxAccessToken,nt._initialAutoSizeIsDone){var Et=nt.width,mt=nt.height;u.supplyLayoutGlobalDefaults(Y,X,Ft),Y.width||(X.width=Et),Y.height||(X.height=mt),u.sanitizeMargins(X)}else{u.supplyLayoutGlobalDefaults(Y,X,Ft);var gt=!Y.width||!Y.height,wt=X.autosize,Pt=yt.autosizable,Bt=gt&&(wt||Pt);Bt?u.plotAutoSize(Z,Y,X):gt&&u.sanitizeMargins(X),!wt&&gt&&(Y.width=X.width,Y.height=X.height)}X._d3locale=L(Ft,X.separators),X._extraFormat=d(Z,b),X._initialAutoSizeIsDone=!0,X._dataLength=ht.length,X._modules=[],X._visibleModules=[],X._basePlotModules=[];var kt=X._subplots=l(),jt=X._splomAxes={x:{},y:{}},Ht=X._splomSubplots={};X._splomGridDflt={},X._scatterStackOpts={},X._firstScatter={},X._alignmentOpts={},X._colorAxes={},X._requestRangeslider={},X._traceUids=P(ot,ht),X._globalTransforms=(Z._context||{}).globalTransforms,u.supplyDataDefaults(ht,rt,Y,X);var Vt=Object.keys(jt.x),ee=Object.keys(jt.y);if(Vt.length>1&&ee.length>1){for(A.getComponentMethod("grid","sizeDefaults")(Y,X),xt=0;xt<Vt.length;xt++)e.pushUnique(kt.xaxis,Vt[xt]);for(xt=0;xt<ee.length;xt++)e.pushUnique(kt.yaxis,ee[xt]);for(var te in Ht)e.pushUnique(kt.cartesian,te)}if(X._has=u._hasPlotType.bind(X),ot.length===rt.length)for(xt=0;xt<rt.length;xt++)x(rt[xt],ot[xt]);u.supplyLayoutModuleDefaults(Y,X,rt,Z._transitionData);var ae=X._visibleModules,le=[];for(xt=0;xt<ae.length;xt++){var ce=ae[xt].crossTraceDefaults;ce&&e.pushUnique(le,ce)}for(xt=0;xt<le.length;xt++)le[xt](rt,X);X._hasOnlyLargeSploms=X._basePlotModules.length===1&&X._basePlotModules[0].name==="splom"&&Vt.length>15&&ee.length>15&&X.shapes.length===0&&X.images.length===0,u.linkSubplots(rt,X,ot,nt),u.cleanPlot(rt,X,ot,nt);var pe=!!(nt._has&&nt._has("gl2d")),we=!!(X._has&&X._has("gl2d")),ve=!!(nt._has&&nt._has("cartesian")),Mt=!!(X._has&&X._has("cartesian")),It=ve||pe,Rt=Mt||we;It&&!Rt?nt._bgLayer.remove():Rt&&!It&&(X._shouldCreateBgLayer=!0),nt._zoomlayer&&!Z._dragging&&a({_fullLayout:nt}),w(rt,X),x(X,nt),A.getComponentMethod("colorscale","crossTraceDefaults")(rt,X),X._preGUI||(X._preGUI={}),X._tracePreGUI||(X._tracePreGUI={});var zt=X._tracePreGUI,Tt={},ft;for(ft in zt)Tt[ft]="old";for(xt=0;xt<rt.length;xt++)ft=rt[xt]._fullInput.uid,Tt[ft]||(zt[ft]={}),Tt[ft]="new";for(ft in Tt)Tt[ft]==="old"&&delete zt[ft];R(X),A.getComponentMethod("rangeslider","makeData")(X),!et&&pt.length===rt.length&&u.supplyDefaultsUpdateCalc(pt,rt)},u.supplyDefaultsUpdateCalc=function(Z,G){for(var et=0;et<G.length;et++){var nt=G[et],X=(Z[et]||[])[0];if(X&&X.trace){var Y=X.trace;if(Y._hasCalcTransform){var ot=Y._arrayAttrs,rt,ht,pt;for(rt=0;rt<ot.length;rt++)ht=ot[rt],pt=e.nestedProperty(Y,ht).get().slice(),e.nestedProperty(nt,ht).set(pt)}X.trace=nt}}};function P(Z,G){var et=G.length,nt=[],X,Y;for(X=0;X<Z.length;X++){var ot=Z[X]._fullInput;ot!==Y&&nt.push(ot),Y=ot}var rt=nt.length,ht=new Array(et),pt={};function yt(Et,mt){ht[mt]=Et,pt[Et]=1}function xt(Et,mt){if(Et&&typeof Et=="string"&&!pt[Et])return yt(Et,mt),!0}for(X=0;X<et;X++){var Ft=G[X].uid;typeof Ft=="number"&&(Ft=String(Ft)),!xt(Ft,X)&&(X<rt&&xt(nt[X].uid,X)||yt(e.randstr(pt),X))}return ht}function l(){var Z=A.collectableSubplotTypes,G={},et,nt;if(!Z){Z=[];var X=A.subplotsRegistry;for(var Y in X){var ot=X[Y],rt=ot.attr;if(rt&&(Z.push(Y),Array.isArray(rt)))for(nt=0;nt<rt.length;nt++)e.pushUnique(Z,rt[nt])}}for(et=0;et<Z.length;et++)G[Z[et]]=[];return G}function d(Z,G){var et=Z._context.locale;et||(et="en-US");var nt=!1,X={};function Y(xt){for(var Ft=!0,Et=0;Et<G.length;Et++){var mt=G[Et];X[mt]||(xt[mt]?X[mt]=xt[mt]:Ft=!1)}Ft&&(nt=!0)}for(var ot=0;ot<2;ot++){for(var rt=Z._context.locales,ht=0;ht<2;ht++){var pt=(rt[et]||{}).format;if(pt&&(Y(pt),nt))break;rt=A.localeRegistry}var yt=et.split("-")[0];if(nt||yt===et)break;et=yt}return nt||Y(A.localeRegistry.en.format),X}function L(Z,G){return Z.decimal=G.charAt(0),Z.thousands=G.charAt(1),{numberFormat:function(et){try{et=i(Z).format(e.adjustFormat(et))}catch{return e.warnBadFormat(et),e.noFormat}return et},timeFormat:E(Z).utcFormat}}function w(Z,G){var et,nt=[];G.meta&&(et=G._meta={meta:G.meta,layout:{meta:G.meta}});for(var X=0;X<Z.length;X++){var Y=Z[X];Y.meta?nt[Y.index]=Y._meta={meta:Y.meta}:G.meta&&(Y._meta={meta:G.meta}),G.meta&&(Y._meta.layout={meta:G.meta})}nt.length&&(et||(et=G._meta={}),et.data=nt)}u.createTransitionData=function(Z){Z._transitionData||(Z._transitionData={}),Z._transitionData._frames||(Z._transitionData._frames=[]),Z._transitionData._frameHash||(Z._transitionData._frameHash={}),Z._transitionData._counter||(Z._transitionData._counter=0),Z._transitionData._interruptCallbacks||(Z._transitionData._interruptCallbacks=[])},u._hasPlotType=function(Z){var G,et=this._basePlotModules||[];for(G=0;G<et.length;G++)if(et[G].name===Z)return!0;var nt=this._modules||[];for(G=0;G<nt.length;G++){var X=nt[G].name;if(X===Z)return!0;var Y=A.modules[X];if(Y&&Y.categories[Z])return!0}return!1},u.cleanPlot=function(Z,G,et,nt){var X,Y,ot=nt._basePlotModules||[];for(X=0;X<ot.length;X++){var rt=ot[X];rt.clean&&rt.clean(Z,G,et,nt)}var ht=nt._has&&nt._has("gl"),pt=G._has&&G._has("gl");ht&&!pt&&nt._glcontainer!==void 0&&(nt._glcontainer.selectAll(".gl-canvas").remove(),nt._glcontainer.selectAll(".no-webgl").remove(),nt._glcanvas=null);var yt=!!nt._infolayer;t:for(X=0;X<et.length;X++){var xt=et[X],Ft=xt.uid;for(Y=0;Y<Z.length;Y++){var Et=Z[Y];if(Ft===Et.uid)continue t}yt&&nt._infolayer.select(".cb"+Ft).remove()}},u.linkSubplots=function(Z,G,et,nt){var X,Y,ot=nt._plots||{},rt=G._plots={},ht=G._subplots,pt={_fullData:Z,_fullLayout:G},yt=ht.cartesian.concat(ht.gl2d||[]);for(X=0;X<yt.length;X++){var xt=yt[X],Ft=ot[xt],Et=n.getFromId(pt,xt,"x"),mt=n.getFromId(pt,xt,"y"),gt;for(Ft?gt=rt[xt]=Ft:(gt=rt[xt]={},gt.id=xt),Et._counterAxes.push(mt._id),mt._counterAxes.push(Et._id),Et._subplotsWith.push(xt),mt._subplotsWith.push(xt),gt.xaxis=Et,gt.yaxis=mt,gt._hasClipOnAxisFalse=!1,Y=0;Y<Z.length;Y++){var wt=Z[Y];if(wt.xaxis===gt.xaxis._id&&wt.yaxis===gt.yaxis._id&&wt.cliponaxis===!1){gt._hasClipOnAxisFalse=!0;break}}}var Pt=n.list(pt,null,!0),Bt;for(X=0;X<Pt.length;X++){Bt=Pt[X];var kt=null;Bt.overlaying&&(kt=n.getFromId(pt,Bt.overlaying),kt&&kt.overlaying&&(Bt.overlaying=!1,kt=null)),Bt._mainAxis=kt||Bt,kt&&(Bt.domain=kt.domain.slice()),Bt._anchorAxis=Bt.anchor==="free"?null:n.getFromId(pt,Bt.anchor)}for(X=0;X<Pt.length;X++)if(Bt=Pt[X],Bt._counterAxes.sort(n.idSort),Bt._subplotsWith.sort(e.subplotSort),Bt._mainSubplot=I(Bt,G),Bt._counterAxes.length&&(Bt.spikemode&&Bt.spikemode.indexOf("across")!==-1||Bt.automargin&&Bt.mirror&&Bt.anchor!=="free"||A.getComponentMethod("rangeslider","isVisible")(Bt))){var jt=1,Ht=0;for(Y=0;Y<Bt._counterAxes.length;Y++){var Vt=n.getFromId(pt,Bt._counterAxes[Y]);jt=Math.min(jt,Vt.domain[0]),Ht=Math.max(Ht,Vt.domain[1])}jt<Ht&&(Bt._counterDomainMin=jt,Bt._counterDomainMax=Ht)}};function I(Z,G){var et={_fullLayout:G},nt=Z._id.charAt(0)==="x",X=Z._mainAxis._anchorAxis,Y="",ot="",rt="";if(X&&(rt=X._mainAxis._id,Y=nt?Z._id+rt:rt+Z._id),!Y||!G._plots[Y]){Y="";for(var ht=Z._counterAxes,pt=0;pt<ht.length;pt++){var yt=ht[pt],xt=nt?Z._id+yt:yt+Z._id;ot||(ot=xt);var Ft=n.getFromId(et,yt);if(rt&&Ft.overlaying===rt){Y=xt;break}}}return Y||ot}u.clearExpandedTraceDefaultColors=function(Z){var G,et,nt;function X(ot,rt,ht,pt){et[pt]=rt,et.length=pt+1,ot.valType==="color"&&ot.dflt===void 0&&G.push(et.join("."))}for(et=[],G=Z._module._colorAttrs,G||(Z._module._colorAttrs=G=[],g.crawl(Z._module.attributes,X)),nt=0;nt<G.length;nt++){var Y=e.nestedProperty(Z,"_input."+G[nt]);Y.get()||e.nestedProperty(Z,G[nt]).set(null)}},u.supplyDataDefaults=function(Z,G,et,nt){var X=nt._modules,Y=nt._visibleModules,ot=nt._basePlotModules,rt=0,ht=0,pt,yt,xt;nt._transformModules=[];function Ft(ee){G.push(ee);var te=ee._module;te&&(e.pushUnique(X,te),ee.visible===!0&&e.pushUnique(Y,te),e.pushUnique(ot,ee._module.basePlotModule),rt++,ee._input.visible!==!1&&ht++)}var Et={},mt=[],gt=(et.template||{}).data||{},wt=v.traceTemplater(gt);for(pt=0;pt<Z.length;pt++){if(xt=Z[pt],yt=wt.newTrace(xt),yt.uid=nt._traceUids[pt],u.supplyTraceDefaults(xt,yt,ht,nt,pt),yt.index=pt,yt._input=xt,yt._expandedIndex=rt,yt.transforms&&yt.transforms.length)for(var Pt=xt.visible!==!1&&yt.visible===!1,Bt=B(yt,G,et,nt),kt=0;kt<Bt.length;kt++){var jt=Bt[kt],Ht={_template:yt._template,type:yt.type,uid:yt.uid+kt};Pt&&jt.visible===!1&&delete jt.visible,u.supplyTraceDefaults(jt,Ht,rt,nt,pt),x(Ht,jt),Ht.index=pt,Ht._input=xt,Ht._fullInput=yt,Ht._expandedIndex=rt,Ht._expandedInput=jt,Ft(Ht)}else yt._fullInput=yt,yt._expandedInput=yt,Ft(yt);A.traceIs(yt,"carpetAxis")&&(Et[yt.carpet]=yt),A.traceIs(yt,"carpetDependent")&&mt.push(pt)}for(pt=0;pt<mt.length;pt++)if(yt=G[mt[pt]],!!yt.visible){var Vt=Et[yt.carpet];if(yt._carpet=Vt,!Vt||!Vt.visible){yt.visible=!1;continue}yt.xaxis=Vt.xaxis,yt.yaxis=Vt.yaxis}},u.supplyAnimationDefaults=function(Z){Z=Z||{};var G,et={};function nt(X,Y){return e.coerce(Z||{},et,h,X,Y)}if(nt("mode"),nt("direction"),nt("fromcurrent"),Array.isArray(Z.frame))for(et.frame=[],G=0;G<Z.frame.length;G++)et.frame[G]=u.supplyAnimationFrameDefaults(Z.frame[G]||{});else et.frame=u.supplyAnimationFrameDefaults(Z.frame||{});if(Array.isArray(Z.transition))for(et.transition=[],G=0;G<Z.transition.length;G++)et.transition[G]=u.supplyAnimationTransitionDefaults(Z.transition[G]||{});else et.transition=u.supplyAnimationTransitionDefaults(Z.transition||{});return et},u.supplyAnimationFrameDefaults=function(Z){var G={};function et(nt,X){return e.coerce(Z||{},G,h.frame,nt,X)}return et("duration"),et("redraw"),G},u.supplyAnimationTransitionDefaults=function(Z){var G={};function et(nt,X){return e.coerce(Z||{},G,h.transition,nt,X)}return et("duration"),et("easing"),G},u.supplyFrameDefaults=function(Z){var G={};function et(nt,X){return e.coerce(Z,G,y,nt,X)}return et("group"),et("name"),et("traces"),et("baseframe"),et("data"),et("layout"),G},u.supplyTraceDefaults=function(Z,G,et,nt,X){var Y=nt.colorway||r.defaults,ot=Y[et%Y.length],rt;function ht(Bt,kt){return e.coerce(Z,G,u.attributes,Bt,kt)}var pt=ht("visible");ht("type"),ht("name",nt._traceWord+" "+X),ht("uirevision",nt.uirevision);var yt=u.getModule(G);if(G._module=yt,yt){var xt=yt.basePlotModule,Ft=xt.attr,Et=xt.attributes;if(Ft&&Et){var mt=nt._subplots,gt="";if(pt||xt.name!=="gl2d"){if(Array.isArray(Ft))for(rt=0;rt<Ft.length;rt++){var wt=Ft[rt],Pt=e.coerce(Z,G,Et,wt);mt[wt]&&e.pushUnique(mt[wt],Pt),gt+=Pt}else gt=e.coerce(Z,G,Et,Ft);mt[xt.name]&&e.pushUnique(mt[xt.name],gt)}}}return pt&&(ht("customdata"),ht("ids"),ht("meta"),A.traceIs(G,"showLegend")?(e.coerce(Z,G,yt.attributes.showlegend?yt.attributes:u.attributes,"showlegend"),ht("legend"),ht("legendwidth"),ht("legendgroup"),ht("legendgrouptitle.text"),ht("legendrank"),G._dfltShowLegend=!0):G._dfltShowLegend=!1,yt&&yt.supplyDefaults(Z,G,ot,nt),A.traceIs(G,"noOpacity")||ht("opacity"),A.traceIs(G,"notLegendIsolatable")&&(G.visible=!!G.visible),A.traceIs(G,"noHover")||(G.hovertemplate||e.coerceHoverinfo(Z,G,nt),G.type!=="parcats"&&A.getComponentMethod("fx","supplyDefaults")(Z,G,ot,nt)),yt&&yt.selectPoints&&ht("selectedpoints"),u.supplyTransformDefaults(Z,G,nt)),G};function z(Z){var G=Z.transforms;if(Array.isArray(G)&&G.length)for(var et=0;et<G.length;et++){var nt=G[et],X=nt._module||c[nt.type];if(X&&X.makesData)return!0}return!1}u.hasMakesDataTransform=z,u.supplyTransformDefaults=function(Z,G,et){if(G._length||z(Z)){var nt=et._globalTransforms||[],X=et._transformModules||[];if(!(!Array.isArray(Z.transforms)&&nt.length===0))for(var Y=Z.transforms||[],ot=nt.concat(Y),rt=G.transforms=[],ht=0;ht<ot.length;ht++){var pt=ot[ht],yt=pt.type,xt=c[yt],Ft,Et=!(pt._module&&pt._module===xt),mt=xt&&typeof xt.transform=="function";xt||e.warn("Unrecognized transform type "+yt+"."),xt&&xt.supplyDefaults&&(Et||mt)?(Ft=xt.supplyDefaults(pt,G,et,Z),Ft.type=yt,Ft._module=xt,e.pushUnique(X,xt)):Ft=e.extendFlat({},pt),rt.push(Ft)}}};function B(Z,G,et,nt){for(var X=Z.transforms,Y=[Z],ot=0;ot<X.length;ot++){var rt=X[ot],ht=c[rt.type];ht&&ht.transform&&(Y=ht.transform(Y,{transform:rt,fullTrace:Z,fullData:G,layout:et,fullLayout:nt,transformIndex:ot}))}return Y}u.supplyLayoutGlobalDefaults=function(Z,G,et){function nt(xt,Ft){return e.coerce(Z,G,u.layoutAttributes,xt,Ft)}var X=Z.template;e.isPlainObject(X)&&(G.template=X,G._template=X.layout,G._dataTemplate=X.data),nt("autotypenumbers");var Y=e.coerceFont(nt,"font"),ot=Y.size;e.coerceFont(nt,"title.font",e.extendFlat({},Y,{size:Math.round(ot*1.4)})),nt("title.text",G._dfltTitle.plot),nt("title.xref");var rt=nt("title.yref");nt("title.pad.t"),nt("title.pad.r"),nt("title.pad.b"),nt("title.pad.l");var ht=nt("title.automargin");nt("title.x"),nt("title.xanchor"),nt("title.y"),nt("title.yanchor"),ht&&(rt==="paper"&&(G.title.y!==0&&(G.title.y=1),G.title.yanchor==="auto"&&(G.title.yanchor=G.title.y===0?"top":"bottom")),rt==="container"&&(G.title.y==="auto"&&(G.title.y=1),G.title.yanchor==="auto"&&(G.title.yanchor=G.title.y<.5?"bottom":"top")));var pt=nt("uniformtext.mode");pt&&nt("uniformtext.minsize"),nt("autosize",!(Z.width&&Z.height)),nt("width"),nt("height"),nt("minreducedwidth"),nt("minreducedheight"),nt("margin.l"),nt("margin.r"),nt("margin.t"),nt("margin.b"),nt("margin.pad"),nt("margin.autoexpand"),Z.width&&Z.height&&u.sanitizeMargins(G),A.getComponentMethod("grid","sizeDefaults")(Z,G),nt("paper_bgcolor"),nt("separators",et.decimal+et.thousands),nt("hidesources"),nt("colorway"),nt("datarevision");var yt=nt("uirevision");nt("editrevision",yt),nt("selectionrevision",yt),A.getComponentMethod("modebar","supplyLayoutDefaults")(Z,G),A.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(Z,G,nt),A.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(Z,G,nt),nt("meta"),e.isPlainObject(Z.transition)&&(nt("transition.duration"),nt("transition.easing"),nt("transition.ordering")),A.getComponentMethod("calendars","handleDefaults")(Z,G,"calendar"),A.getComponentMethod("fx","supplyLayoutGlobalDefaults")(Z,G,nt),e.coerce(Z,G,o,"scattermode")};function O(Z){return typeof Z=="string"&&Z.substr(Z.length-2)==="px"&&parseFloat(Z)}u.plotAutoSize=function(Z,G,et){var nt=Z._context||{},X=nt.frameMargins,Y,ot,rt=e.isPlotDiv(Z);if(rt&&Z.emit("plotly_autosize"),nt.fillFrame)Y=window.innerWidth,ot=window.innerHeight,document.body.style.overflow="hidden";else{var ht=rt?window.getComputedStyle(Z):{};if(Y=O(ht.width)||O(ht.maxWidth)||et.width,ot=O(ht.height)||O(ht.maxHeight)||et.height,S(X)&&X>0){var pt=1-2*X;Y=Math.round(pt*Y),ot=Math.round(pt*ot)}}var yt=u.layoutAttributes.width.min,xt=u.layoutAttributes.height.min;Y<yt&&(Y=yt),ot<xt&&(ot=xt);var Ft=!G.width&&Math.abs(et.width-Y)>1,Et=!G.height&&Math.abs(et.height-ot)>1;(Et||Ft)&&(Ft&&(et.width=Y),Et&&(et.height=ot)),Z._initialAutoSize||(Z._initialAutoSize={width:Y,height:ot}),u.sanitizeMargins(et)},u.supplyLayoutModuleDefaults=function(Z,G,et,nt){var X=A.componentsRegistry,Y=G._basePlotModules,ot,rt,ht,pt=A.subplotsRegistry.cartesian;for(ot in X)ht=X[ot],ht.includeBasePlot&&ht.includeBasePlot(Z,G);Y.length||Y.push(pt),G._has("cartesian")&&(A.getComponentMethod("grid","contentDefaults")(Z,G),pt.finalizeSubplots(Z,G));for(var yt in G._subplots)G._subplots[yt].sort(e.subplotSort);for(rt=0;rt<Y.length;rt++)ht=Y[rt],ht.supplyLayoutDefaults&&ht.supplyLayoutDefaults(Z,G,et);var xt=G._modules;for(rt=0;rt<xt.length;rt++)ht=xt[rt],ht.supplyLayoutDefaults&&ht.supplyLayoutDefaults(Z,G,et);var Ft=G._transformModules;for(rt=0;rt<Ft.length;rt++)ht=Ft[rt],ht.supplyLayoutDefaults&&ht.supplyLayoutDefaults(Z,G,et,nt);for(ot in X)ht=X[ot],ht.supplyLayoutDefaults&&ht.supplyLayoutDefaults(Z,G,et)},u.purge=function(Z){var G=Z._fullLayout||{};G._glcontainer!==void 0&&(G._glcontainer.selectAll(".gl-canvas").remove(),G._glcontainer.remove(),G._glcanvas=null),G._modeBar&&G._modeBar.destroy(),Z._transitionData&&(Z._transitionData._interruptCallbacks&&(Z._transitionData._interruptCallbacks.length=0),Z._transitionData._animationRaf&&window.cancelAnimationFrame(Z._transitionData._animationRaf)),e.clearThrottle(),e.clearResponsive(Z),delete Z.data,delete Z.layout,delete Z._fullData,delete Z._fullLayout,delete Z.calcdata,delete Z.empty,delete Z.fid,delete Z.undoqueue,delete Z.undonum,delete Z.autoplay,delete Z.changed,delete Z._promises,delete Z._redrawTimer,delete Z._hmlumcount,delete Z._hmpixcount,delete Z._transitionData,delete Z._transitioning,delete Z._initialAutoSize,delete Z._transitioningWithDuration,delete Z._dragging,delete Z._dragged,delete Z._dragdata,delete Z._hoverdata,delete Z._snapshotInProgress,delete Z._editing,delete Z._mouseDownTime,delete Z._legendMouseDownTime,Z.removeAllListeners&&Z.removeAllListeners()},u.style=function(Z){var G=Z._fullLayout._visibleModules,et=[],nt;for(nt=0;nt<G.length;nt++){var X=G[nt];X.style&&e.pushUnique(et,X.style)}for(nt=0;nt<et.length;nt++)et[nt](Z)},u.sanitizeMargins=function(Z){if(!(!Z||!Z.margin)){var G=Z.width,et=Z.height,nt=Z.margin,X=G-(nt.l+nt.r),Y=et-(nt.t+nt.b),ot;X<0&&(ot=(G-1)/(nt.l+nt.r),nt.l=Math.floor(ot*nt.l),nt.r=Math.floor(ot*nt.r)),Y<0&&(ot=(et-1)/(nt.t+nt.b),nt.t=Math.floor(ot*nt.t),nt.b=Math.floor(ot*nt.b))}},u.clearAutoMarginIds=function(Z){Z._fullLayout._pushmarginIds={}},u.allowAutoMargin=function(Z,G){Z._fullLayout._pushmarginIds[G]=1};function R(Z){var G=Z.margin;if(!Z._size){var et=Z._size={l:Math.round(G.l),r:Math.round(G.r),t:Math.round(G.t),b:Math.round(G.b),p:Math.round(G.pad)};et.w=Math.round(Z.width)-et.l-et.r,et.h=Math.round(Z.height)-et.t-et.b}Z._pushmargin||(Z._pushmargin={}),Z._pushmarginIds||(Z._pushmarginIds={}),Z._reservedMargin||(Z._reservedMargin={})}var C=2,F=2;u.autoMargin=function(Z,G,et){var nt=Z._fullLayout,X=nt.width,Y=nt.height,ot=nt.margin,rt=nt.minreducedwidth,ht=nt.minreducedheight,pt=e.constrain(X-ot.l-ot.r,C,rt),yt=e.constrain(Y-ot.t-ot.b,F,ht),xt=Math.max(0,X-pt),Ft=Math.max(0,Y-yt),Et=nt._pushmargin,mt=nt._pushmarginIds;if(ot.autoexpand!==!1){if(!et)delete Et[G],delete mt[G];else{var gt=et.pad;if(gt===void 0&&(gt=Math.min(12,ot.l,ot.r,ot.t,ot.b)),xt){var wt=(et.l+et.r)/xt;wt>1&&(et.l/=wt,et.r/=wt)}if(Ft){var Pt=(et.t+et.b)/Ft;Pt>1&&(et.t/=Pt,et.b/=Pt)}var Bt=et.xl!==void 0?et.xl:et.x,kt=et.xr!==void 0?et.xr:et.x,jt=et.yt!==void 0?et.yt:et.y,Ht=et.yb!==void 0?et.yb:et.y;Et[G]={l:{val:Bt,size:et.l+gt},r:{val:kt,size:et.r+gt},b:{val:Ht,size:et.b+gt},t:{val:jt,size:et.t+gt}},mt[G]=1}if(!nt._replotting)return u.doAutoMargin(Z)}};function N(Z){if("_redrawFromAutoMarginCount"in Z._fullLayout)return!1;var G=n.list(Z,"",!0);for(var et in G)if(G[et].autoshift||G[et].shift)return!0;return!1}u.doAutoMargin=function(Z){var G=Z._fullLayout,et=G.width,nt=G.height;G._size||(G._size={}),R(G);var X=G._size,Y=G.margin,ot={t:0,b:0,l:0,r:0},rt=e.extendFlat({},X),ht=Y.l,pt=Y.r,yt=Y.t,xt=Y.b,Ft=G._pushmargin,Et=G._pushmarginIds,mt=G.minreducedwidth,gt=G.minreducedheight;if(Y.autoexpand!==!1){for(var wt in Ft)Et[wt]||delete Ft[wt];var Pt=Z._fullLayout._reservedMargin;for(var Bt in Pt)for(var kt in Pt[Bt]){var jt=Pt[Bt][kt];ot[kt]=Math.max(ot[kt],jt)}Ft.base={l:{val:0,size:ht},r:{val:1,size:pt},t:{val:1,size:yt},b:{val:0,size:xt}};for(var Ht in ot){var Vt=0;for(var ee in Ft)ee!=="base"&&S(Ft[ee][Ht].size)&&(Vt=Ft[ee][Ht].size>Vt?Ft[ee][Ht].size:Vt);var te=Math.max(0,Y[Ht]-Vt);ot[Ht]=Math.max(0,ot[Ht]-te)}for(var ae in Ft){var le=Ft[ae].l||{},ce=Ft[ae].b||{},pe=le.val,we=le.size,ve=ce.val,Mt=ce.size,It=et-ot.r-ot.l,Rt=nt-ot.t-ot.b;for(var zt in Ft){if(S(we)&&Ft[zt].r){var Tt=Ft[zt].r.val,ft=Ft[zt].r.size;if(Tt>pe){var ut=(we*Tt+(ft-It)*pe)/(Tt-pe),vt=(ft*(1-pe)+(we-It)*(1-Tt))/(Tt-pe);ut+vt>ht+pt&&(ht=ut,pt=vt)}}if(S(Mt)&&Ft[zt].t){var St=Ft[zt].t.val,Ot=Ft[zt].t.size;if(St>ve){var Xt=(Mt*St+(Ot-Rt)*ve)/(St-ve),$t=(Ot*(1-ve)+(Mt-Rt)*(1-St))/(St-ve);Xt+$t>xt+yt&&(xt=Xt,yt=$t)}}}}}var de=e.constrain(et-Y.l-Y.r,C,mt),Me=e.constrain(nt-Y.t-Y.b,F,gt),Fe=Math.max(0,et-de),De=Math.max(0,nt-Me);if(Fe){var Ae=(ht+pt)/Fe;Ae>1&&(ht/=Ae,pt/=Ae)}if(De){var Ve=(xt+yt)/De;Ve>1&&(xt/=Ve,yt/=Ve)}if(X.l=Math.round(ht)+ot.l,X.r=Math.round(pt)+ot.r,X.t=Math.round(yt)+ot.t,X.b=Math.round(xt)+ot.b,X.p=Math.round(Y.pad),X.w=Math.round(et)-X.l-X.r,X.h=Math.round(nt)-X.t-X.b,!G._replotting&&(u.didMarginChange(rt,X)||N(Z))){"_redrawFromAutoMarginCount"in G?G._redrawFromAutoMarginCount++:G._redrawFromAutoMarginCount=1;var Qe=3*(1+Object.keys(Et).length);if(G._redrawFromAutoMarginCount<Qe)return A.call("_doPlot",Z);G._size=rt,e.warn("Too many auto-margin redraws.")}V(Z)};function V(Z){var G=n.list(Z,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(et){for(var nt=0;nt<G.length;nt++){var X=G[nt][et];X&&X()}})}var K=["l","r","t","b","p","w","h"];u.didMarginChange=function(Z,G){for(var et=0;et<K.length;et++){var nt=K[et],X=Z[nt],Y=G[nt];if(!S(X)||Math.abs(Y-X)>1)return!0}return!1},u.graphJson=function(Z,G,et,nt,X,Y){(X&&G&&!Z._fullData||X&&!G&&!Z._fullLayout)&&u.supplyDefaults(Z);var ot=X?Z._fullData:Z.data,rt=X?Z._fullLayout:Z.layout,ht=(Z._transitionData||{})._frames;function pt(Ft,Et){if(typeof Ft=="function")return Et?"_function_":null;if(e.isPlainObject(Ft)){var mt={},gt;return Object.keys(Ft).sort().forEach(function(wt){if(["_","["].indexOf(wt.charAt(0))===-1){if(typeof Ft[wt]=="function"){Et&&(mt[wt]="_function");return}if(et==="keepdata"){if(wt.substr(wt.length-3)==="src")return}else if(et==="keepstream"){if(gt=Ft[wt+"src"],typeof gt=="string"&&gt.indexOf(":")>0&&!e.isPlainObject(Ft.stream))return}else if(et!=="keepall"&&(gt=Ft[wt+"src"],typeof gt=="string"&&gt.indexOf(":")>0))return;mt[wt]=pt(Ft[wt],Et)}}),mt}return Array.isArray(Ft)?Ft.map(function(wt){return pt(wt,Et)}):e.isTypedArray(Ft)?e.simpleMap(Ft,e.identity):e.isJSDate(Ft)?e.ms2DateTimeLocal(+Ft):Ft}var yt={data:(ot||[]).map(function(Ft){var Et=pt(Ft);return G&&delete Et.fit,Et})};if(!G&&(yt.layout=pt(rt),X)){var xt=rt._size;yt.layout.computed={margin:{b:xt.b,l:xt.l,r:xt.r,t:xt.t}}}return ht&&(yt.frames=pt(ht)),Y&&(yt.config=pt(Z._context,!0)),nt==="object"?yt:JSON.stringify(yt)},u.modifyFrames=function(Z,G){var et,nt,X,Y=Z._transitionData._frames,ot=Z._transitionData._frameHash;for(et=0;et<G.length;et++)switch(nt=G[et],nt.type){case"replace":X=nt.value;var rt=(Y[nt.index]||{}).name,ht=X.name;Y[nt.index]=ot[ht]=X,ht!==rt&&(delete ot[rt],ot[ht]=X);break;case"insert":X=nt.value,ot[X.name]=X,Y.splice(nt.index,0,X);break;case"delete":X=Y[nt.index],delete ot[X.name],Y.splice(nt.index,1);break}return Promise.resolve()},u.computeFrame=function(Z,G){var et=Z._transitionData._frameHash,nt,X,Y,ot;if(!G)throw new Error("computeFrame must be given a string frame name");var rt=et[G.toString()];if(!rt)return!1;for(var ht=[rt],pt=[rt.name];rt.baseframe&&(rt=et[rt.baseframe.toString()])&&pt.indexOf(rt.name)===-1;)ht.push(rt),pt.push(rt.name);for(var yt={};rt=ht.pop();)if(rt.layout&&(yt.layout=u.extendLayout(yt.layout,rt.layout)),rt.data){if(yt.data||(yt.data=[]),X=rt.traces,!X)for(X=[],nt=0;nt<rt.data.length;nt++)X[nt]=nt;for(yt.traces||(yt.traces=[]),nt=0;nt<rt.data.length;nt++)Y=X[nt],Y!=null&&(ot=yt.traces.indexOf(Y),ot===-1&&(ot=yt.data.length,yt.traces[ot]=Y),yt.data[ot]=u.extendTrace(yt.data[ot],rt.data[nt]))}return yt},u.recomputeFrameHash=function(Z){for(var G=Z._transitionData._frameHash={},et=Z._transitionData._frames,nt=0;nt<et.length;nt++){var X=et[nt];X&&X.name&&(G[X.name]=X)}},u.extendObjectWithContainers=function(Z,G,et){var nt,X,Y,ot,rt,ht,pt,yt,xt=e.extendDeepNoArrays({},G||{}),Ft=e.expandObjectPaths(xt),Et={};if(et&&et.length)for(Y=0;Y<et.length;Y++)nt=e.nestedProperty(Ft,et[Y]),X=nt.get(),X===void 0?e.nestedProperty(Et,et[Y]).set(null):(nt.set(null),e.nestedProperty(Et,et[Y]).set(X));if(Z=e.extendDeepNoArrays(Z||{},Ft),et&&et.length){for(Y=0;Y<et.length;Y++)if(rt=e.nestedProperty(Et,et[Y]),pt=rt.get(),!!pt){for(ht=e.nestedProperty(Z,et[Y]),yt=ht.get(),Array.isArray(yt)||(yt=[],ht.set(yt)),ot=0;ot<pt.length;ot++){var mt=pt[ot];mt===null?yt[ot]=null:yt[ot]=u.extendObjectWithContainers(yt[ot],mt)}ht.set(yt)}}return Z},u.dataArrayContainers=["transforms","dimensions"],u.layoutArrayContainers=A.layoutArrayContainers,u.extendTrace=function(Z,G){return u.extendObjectWithContainers(Z,G,u.dataArrayContainers)},u.extendLayout=function(Z,G){return u.extendObjectWithContainers(Z,G,u.layoutArrayContainers)},u.transition=function(Z,G,et,nt,X,Y){var ot={redraw:X.redraw},rt={},ht=[];return ot.prepareFn=function(){for(var pt=Array.isArray(G)?G.length:0,yt=nt.slice(0,pt),xt=0;xt<yt.length;xt++){var Ft=yt[xt],Et=Z._fullData[Ft],mt=Et._module;if(mt){if(mt.animatable){var gt=mt.basePlotModule.name;rt[gt]||(rt[gt]=[]),rt[gt].push(Ft)}Z.data[yt[xt]]=u.extendTrace(Z.data[yt[xt]],G[xt])}}var wt=e.expandObjectPaths(e.extendDeepNoArrays({},et)),Pt=/^[xy]axis[0-9]*$/;for(var Bt in wt)Pt.test(Bt)&&delete wt[Bt].range;u.extendLayout(Z.layout,wt),delete Z.calcdata,u.supplyDefaults(Z),u.doCalcdata(Z);var kt=e.expandObjectPaths(et);if(kt){var jt=Z._fullLayout._plots;for(var Ht in jt){var Vt=jt[Ht],ee=Vt.xaxis,te=Vt.yaxis,ae=ee.range.slice(),le=te.range.slice(),ce=null,pe=null,we=null,ve=null;Array.isArray(kt[ee._name+".range"])?ce=kt[ee._name+".range"].slice():Array.isArray((kt[ee._name]||{}).range)&&(ce=kt[ee._name].range.slice()),Array.isArray(kt[te._name+".range"])?pe=kt[te._name+".range"].slice():Array.isArray((kt[te._name]||{}).range)&&(pe=kt[te._name].range.slice()),ae&&ce&&(ee.r2l(ae[0])!==ee.r2l(ce[0])||ee.r2l(ae[1])!==ee.r2l(ce[1]))&&(we={xr0:ae,xr1:ce}),le&&pe&&(te.r2l(le[0])!==te.r2l(pe[0])||te.r2l(le[1])!==te.r2l(pe[1]))&&(ve={yr0:le,yr1:pe}),(we||ve)&&ht.push(e.extendFlat({plotinfo:Vt},we,ve))}}return Promise.resolve()},ot.runFn=function(pt){var yt,xt=Z._fullLayout._basePlotModules,Ft=ht.length,Et;if(et)for(Et=0;Et<xt.length;Et++)xt[Et].transitionAxes&&xt[Et].transitionAxes(Z,ht,Y,pt);Ft?(yt=e.extendFlat({},Y),yt.duration=0,delete rt.cartesian):yt=Y;for(var mt in rt){var gt=rt[mt],wt=Z._fullData[gt[0]]._module;wt.basePlotModule.plot(Z,gt,yt,pt)}},Q(Z,Y,ot)},u.transitionFromReact=function(Z,G,et,nt){var X=Z._fullLayout,Y=X.transition,ot={},rt=[];return ot.prepareFn=function(){var ht=X._plots;ot.redraw=!1,G.anim==="some"&&(ot.redraw=!0),et.anim==="some"&&(ot.redraw=!0);for(var pt in ht){var yt=ht[pt],xt=yt.xaxis,Ft=yt.yaxis,Et=nt[xt._name].range.slice(),mt=nt[Ft._name].range.slice(),gt=xt.range.slice(),wt=Ft.range.slice();xt.setScale(),Ft.setScale();var Pt=null,Bt=null;(xt.r2l(Et[0])!==xt.r2l(gt[0])||xt.r2l(Et[1])!==xt.r2l(gt[1]))&&(Pt={xr0:Et,xr1:gt}),(Ft.r2l(mt[0])!==Ft.r2l(wt[0])||Ft.r2l(mt[1])!==Ft.r2l(wt[1]))&&(Bt={yr0:mt,yr1:wt}),(Pt||Bt)&&rt.push(e.extendFlat({plotinfo:yt},Pt,Bt))}return Promise.resolve()},ot.runFn=function(ht){for(var pt=Z._fullData,yt=Z._fullLayout,xt=yt._basePlotModules,Ft,Et,mt,gt=[],wt=0;wt<pt.length;wt++)gt.push(wt);function Pt(){if(Z._fullLayout)for(var kt=0;kt<xt.length;kt++)xt[kt].transitionAxes&&xt[kt].transitionAxes(Z,rt,Ft,ht)}function Bt(){if(Z._fullLayout)for(var kt=0;kt<xt.length;kt++)xt[kt].plot(Z,mt,Et,ht)}rt.length&&G.anim?Y.ordering==="traces first"?(Ft=e.extendFlat({},Y,{duration:0}),mt=gt,Et=Y,setTimeout(Pt,Y.duration),Bt()):(Ft=Y,mt=null,Et=e.extendFlat({},Y,{duration:0}),setTimeout(Bt,Ft.duration),Pt()):rt.length?(Ft=Y,Pt()):G.anim&&(mt=gt,Et=Y,Bt())},Q(Z,Y,ot)};function Q(Z,G,et){var nt=!1;function X(xt){var Ft=Promise.resolve();if(!xt)return Ft;for(;xt.length;)Ft=Ft.then(xt.shift());return Ft}function Y(xt){if(xt)for(;xt.length;)xt.shift()}function ot(){return Z.emit("plotly_transitioning",[]),new Promise(function(xt){Z._transitioning=!0,G.duration>0&&(Z._transitioningWithDuration=!0),Z._transitionData._interruptCallbacks.push(function(){nt=!0}),et.redraw&&Z._transitionData._interruptCallbacks.push(function(){return A.call("redraw",Z)}),Z._transitionData._interruptCallbacks.push(function(){Z.emit("plotly_transitioninterrupted",[])});var Ft=0,Et=0;function mt(){return Ft++,function(){Et++,!nt&&Et===Ft&&rt(xt)}}et.runFn(mt),setTimeout(mt())})}function rt(xt){if(Z._transitionData)return Y(Z._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(et.redraw)return A.call("redraw",Z)}).then(function(){Z._transitioning=!1,Z._transitioningWithDuration=!1,Z.emit("plotly_transitioned",[])}).then(xt)}function ht(){if(Z._transitionData)return Z._transitioning=!1,X(Z._transitionData._interruptCallbacks)}var pt=[u.previousPromises,ht,et.prepareFn,u.rehover,u.reselect,ot],yt=e.syncOrAsync(pt,Z);return(!yt||!yt.then)&&(yt=Promise.resolve()),yt.then(function(){return Z})}u.doCalcdata=function(Z,G){var et=n.list(Z),nt=Z._fullData,X=Z._fullLayout,Y,ot,rt,ht,pt=new Array(nt.length),yt=(Z.calcdata||[]).slice();for(Z.calcdata=pt,X._numBoxes=0,X._numViolins=0,X._violinScaleGroupStats={},Z._hmpixcount=0,Z._hmlumcount=0,X._piecolormap={},X._sunburstcolormap={},X._treemapcolormap={},X._iciclecolormap={},X._funnelareacolormap={},rt=0;rt<nt.length;rt++)if(Array.isArray(G)&&G.indexOf(rt)===-1){pt[rt]=yt[rt];continue}for(rt=0;rt<nt.length;rt++)Y=nt[rt],Y._arrayAttrs=g.findArrayAttributes(Y),Y._extremes={};var xt=X._subplots.polar||[];for(rt=0;rt<xt.length;rt++)et.push(X[xt[rt]].radialaxis,X[xt[rt]].angularaxis);for(var Ft in X._colorAxes){var Et=X[Ft];Et.cauto!==!1&&(delete Et.cmin,delete Et.cmax)}var mt=!1;function gt(Bt){if(Y=nt[Bt],ot=Y._module,Y.visible===!0&&Y.transforms){if(ot&&ot.calc){var kt=ot.calc(Z,Y);kt[0]&&kt[0].t&&kt[0].t._scene&&delete kt[0].t._scene.dirty}for(ht=0;ht<Y.transforms.length;ht++){var jt=Y.transforms[ht];ot=c[jt.type],ot&&ot.calcTransform&&(Y._hasCalcTransform=!0,mt=!0,ot.calcTransform(Z,Y,jt))}}}function wt(Bt,kt){if(Y=nt[Bt],ot=Y._module,!!ot.isContainer===kt){var jt=[];if(Y.visible===!0&&Y._length!==0){delete Y._indexToPoints;var Ht=Y.transforms||[];for(ht=Ht.length-1;ht>=0;ht--)if(Ht[ht].enabled){Y._indexToPoints=Ht[ht]._indexToPoints;break}ot&&ot.calc&&(jt=ot.calc(Z,Y))}(!Array.isArray(jt)||!jt[0])&&(jt=[{x:f,y:f}]),jt[0].t||(jt[0].t={}),jt[0].trace=Y,pt[Bt]=jt}}for(q(et,nt,X),rt=0;rt<nt.length;rt++)wt(rt,!0);for(rt=0;rt<nt.length;rt++)gt(rt);for(mt&&q(et,nt,X),rt=0;rt<nt.length;rt++)wt(rt,!0);for(rt=0;rt<nt.length;rt++)wt(rt,!1);W(Z);var Pt=it(et,Z);if(Pt.length){for(X._numBoxes=0,X._numViolins=0,rt=0;rt<Pt.length;rt++)wt(Pt[rt],!0);for(rt=0;rt<Pt.length;rt++)wt(Pt[rt],!1);W(Z)}A.getComponentMethod("fx","calc")(Z),A.getComponentMethod("errorbars","calc")(Z)};var at=/(total|sum|min|max|mean|median) (ascending|descending)/;function it(Z,G){var et=[],nt,X,Y,ot,rt;function ht(It,Rt,zt){var Tt=Rt._id.charAt(0);if(It==="histogram2dcontour"){var ft=Rt._counterAxes[0],ut=n.getFromId(G,ft),vt=Tt==="x"||ft==="x"&&ut.type==="category",St=Tt==="y"||ft==="y"&&ut.type==="category";return function(Ot,Xt){return Ot===0||Xt===0||vt&&Ot===zt[Xt].length-1||St&&Xt===zt.length-1?-1:(Tt==="y"?Xt:Ot)-1}}else return function(Ot,Xt){return Tt==="y"?Xt:Ot}}var pt={min:function(It){return e.aggNums(Math.min,null,It)},max:function(It){return e.aggNums(Math.max,null,It)},sum:function(It){return e.aggNums(function(Rt,zt){return Rt+zt},null,It)},total:function(It){return e.aggNums(function(Rt,zt){return Rt+zt},null,It)},mean:function(It){return e.mean(It)},median:function(It){return e.median(It)}};for(nt=0;nt<Z.length;nt++){var yt=Z[nt];if(yt.type==="category"){var xt=yt.categoryorder.match(at);if(xt){var Ft=xt[1],Et=xt[2],mt=yt._id.charAt(0),gt=mt==="x",wt=[];for(X=0;X<yt._categories.length;X++)wt.push([yt._categories[X],[]]);for(X=0;X<yt._traceIndices.length;X++){var Pt=yt._traceIndices[X],Bt=G._fullData[Pt];if(Bt.visible===!0){var kt=Bt.type;A.traceIs(Bt,"histogram")&&(delete Bt._xautoBinFinished,delete Bt._yautoBinFinished);var jt=kt==="splom",Ht=kt==="scattergl",Vt=G.calcdata[Pt];for(Y=0;Y<Vt.length;Y++){var ee=Vt[Y],te,ae;if(jt){var le=Bt._axesDim[yt._id];if(!gt){var ce=Bt._diag[le][0];ce&&(yt=G._fullLayout[n.id2name(ce)])}var pe=ee.trace.dimensions[le].values;for(ot=0;ot<pe.length;ot++)for(te=yt._categoriesMap[pe[ot]],rt=0;rt<ee.trace.dimensions.length;rt++)if(rt!==le){var we=ee.trace.dimensions[rt];wt[te][1].push(we.values[ot])}}else if(Ht){for(ot=0;ot<ee.t.x.length;ot++)gt?(te=ee.t.x[ot],ae=ee.t.y[ot]):(te=ee.t.y[ot],ae=ee.t.x[ot]),wt[te][1].push(ae);ee.t&&ee.t._scene&&delete ee.t._scene.dirty}else if(ee.hasOwnProperty("z")){ae=ee.z;var ve=ht(Bt.type,yt,ae);for(ot=0;ot<ae.length;ot++)for(rt=0;rt<ae[ot].length;rt++)te=ve(rt,ot),te+1&&wt[te][1].push(ae[ot][rt])}else for(te=ee.p,te===void 0&&(te=ee[mt]),ae=ee.s,ae===void 0&&(ae=ee.v),ae===void 0&&(ae=gt?ee.y:ee.x),Array.isArray(ae)||(ae===void 0?ae=[]:ae=[ae]),ot=0;ot<ae.length;ot++)wt[te][1].push(ae[ot])}}}yt._categoriesValue=wt;var Mt=[];for(X=0;X<wt.length;X++)Mt.push([wt[X][0],pt[Ft](wt[X][1])]);Mt.sort(function(It,Rt){return It[1]-Rt[1]}),yt._categoriesAggregatedValue=Mt,yt._initialCategories=Mt.map(function(It){return It[0]}),Et==="descending"&&yt._initialCategories.reverse(),et=et.concat(yt.sortByInitialCategories())}}}return et}function q(Z,G,et){var nt={};function X(ht){ht.clearCalc(),ht.type==="multicategory"&&ht.setupMultiCategory(G),nt[ht._id]=1}e.simpleMap(Z,X);for(var Y=et._axisMatchGroups||[],ot=0;ot<Y.length;ot++)for(var rt in Y[ot])nt[rt]||X(et[n.id2name(rt)])}function W(Z){var G=Z._fullLayout,et=G._visibleModules,nt={},X,Y,ot;for(Y=0;Y<et.length;Y++){var rt=et[Y],ht=rt.crossTraceCalc;if(ht){var pt=rt.basePlotModule.name;nt[pt]?e.pushUnique(nt[pt],ht):nt[pt]=[ht]}}for(ot in nt){var yt=nt[ot],xt=G._subplots[ot];if(Array.isArray(xt))for(X=0;X<xt.length;X++){var Ft=xt[X],Et=ot==="cartesian"?G._plots[Ft]:G[Ft];for(Y=0;Y<yt.length;Y++)yt[Y](Z,Et,Ft)}else for(Y=0;Y<yt.length;Y++)yt[Y](Z)}}u.rehover=function(Z){Z._fullLayout._rehover&&Z._fullLayout._rehover()},u.redrag=function(Z){Z._fullLayout._redrag&&Z._fullLayout._redrag()},u.reselect=function(Z){var G=Z._fullLayout,et=(Z.layout||{}).selections,nt=G._previousSelections;G._previousSelections=et;var X=G._reselect||JSON.stringify(et)!==JSON.stringify(nt);A.getComponentMethod("selections","reselect")(Z,X)},u.generalUpdatePerTraceModule=function(Z,G,et,nt){var X=G.traceHash,Y={},ot;for(ot=0;ot<et.length;ot++){var rt=et[ot],ht=rt[0].trace;ht.visible&&(Y[ht.type]=Y[ht.type]||[],Y[ht.type].push(rt))}for(var pt in X)if(!Y[pt]){var yt=X[pt][0],xt=yt[0].trace;xt.visible=!1,Y[pt]=[yt]}for(var Ft in Y){var Et=Y[Ft],mt=Et[0][0].trace._module;mt.plot(Z,G,e.filterVisible(Et),nt)}G.traceHash=Y},u.plotBasePlot=function(Z,G,et,nt,X){var Y=A.getModule(Z),ot=p(G.calcdata,Y)[0];Y.plot(G,ot,nt,X)},u.cleanBasePlot=function(Z,G,et,nt,X){var Y=X._has&&X._has(Z),ot=et._has&&et._has(Z);Y&&!ot&&X["_"+Z+"layer"].selectAll("g.trace").remove()}},9813:function($){$.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},10869:function($,U,t){var M=t(71828),E=t(61082).tester,i=M.findIndexOfMin,S=M.isAngleInsideSector,A=M.angleDelta,g=M.angleDist;function v(u,c,T,k,_){if(!S(c,k))return!1;var b,P;T[0]<T[1]?(b=T[0],P=T[1]):(b=T[1],P=T[0]);var l=E(a(b,k[0],k[1],_)),d=E(a(P,k[0],k[1],_)),L=[u*Math.cos(c),u*Math.sin(c)];return d.contains(L)&&!l.contains(L)}function e(u,c,T,k){var _,b,P=k[0],l=k[1],d=y(Math.sin(c)-Math.sin(u)),L=y(Math.cos(c)-Math.cos(u)),w=Math.tan(T),I=y(1/w),z=d/L,B=l-z*P;return I?d&&L?(_=B/(w-z),b=w*_):L?(_=l*I,b=l):(_=P,b=P*w):d&&L?(_=0,b=B):L?(_=0,b=l):_=b=NaN,[_,b]}function r(u,c,T,k){var _=-c*T,b=c*c+1,P=2*(c*_-T),l=_*_+T*T-u*u,d=Math.sqrt(P*P-4*b*l),L=(-P+d)/(2*b),w=(-P-d)/(2*b);return[[L,c*L+_+k],[w,c*w+_+k]]}function f(u,c){var T=c.length,k=new Array(T+1),_;for(_=0;_<T;_++){var b=c[_];k[_]=[u*Math.cos(b),u*Math.sin(b)]}return k[_]=k[0].slice(),k}function n(u,c,T,k){var _=k.length,b=[],P,l;function d(F){return[u*Math.cos(F),u*Math.sin(F)]}function L(F,N,V){return e(F,N,V,d(F))}function w(F){return M.mod(F,_)}function I(F){return S(F,[c,T])}var z=i(k,function(F){return I(F)?g(F,c):1/0}),B=L(k[z],k[w(z-1)],c);for(b.push(B),P=z,l=0;l<_;P++,l++){var O=k[w(P)];if(!I(O))break;b.push(d(O))}var R=i(k,function(F){return I(F)?g(F,T):1/0}),C=L(k[R],k[w(R+1)],T);return b.push(C),b.push([0,0]),b.push(b[0].slice()),b}function a(u,c,T,k){return M.isFullCircle([c,T])?f(u,k):n(u,c,T,k)}function o(u,c,T,k){for(var _=1/0,b=1/0,P=a(u,c,T,k),l=0;l<P.length;l++){var d=P[l];_=Math.min(_,d[0]),b=Math.min(b,-d[1])}return[_,b]}function h(u,c){var T=function(b){var P=A(b,u);return P>0?P:1/0},k=i(c,T),_=M.mod(k+1,c.length);return[c[k],c[_]]}function y(u){return Math.abs(u)>1e-10?u:0}function p(u,c,T){c=c||0,T=T||0;for(var k=u.length,_=new Array(k),b=0;b<k;b++){var P=u[b];_[b]=[c+P[0],T-P[1]]}return _}function x(u,c,T,k,_,b){var P=a(u,c,T,k);return"M"+p(P,_,b).join("L")}function s(u,c,T,k,_,b,P){var l,d;u<c?(l=u,d=c):(l=c,d=u);var L=p(a(l,T,k,_),b,P),w=p(a(d,T,k,_),b,P);return"M"+w.reverse().join("L")+"M"+L.join("L")}$.exports={isPtInsidePolygon:v,findPolygonOffset:o,findEnclosingVertexAngles:h,findIntersectionXY:e,findXYatLength:r,clampTiny:y,pathPolygon:x,pathPolygonAnnulus:s}},23580:function($,U,t){var M=t(27659).AU,E=t(71828).counterRegex,i=t(77997),S=t(9813),A=S.attr,g=S.name,v=E(g),e={};e[A]={valType:"subplotid",dflt:g,editType:"calc"};function r(n){for(var a=n._fullLayout,o=n.calcdata,h=a._subplots[g],y=0;y<h.length;y++){var p=h[y],x=M(o,g,p),s=a[p]._subplot;s||(s=i(n,p),a[p]._subplot=s),s.plot(x,a,n._promises)}}function f(n,a,o,h){for(var y=h._subplots[g]||[],p=h._has&&h._has("gl"),x=a._has&&a._has("gl"),s=p&&!x,u=0;u<y.length;u++){var c=y[u],T=h[c]._subplot;if(!a[c]&&T){T.framework.remove(),T.layers["radial-axis-title"].remove();for(var k in T.clipPaths)T.clipPaths[k].remove()}s&&T._scene&&(T._scene.destroy(),T._scene=null)}}$.exports={attr:A,name:g,idRoot:g,idRegex:v,attrRegex:v,attributes:e,layoutAttributes:t(73812),supplyLayoutDefaults:t(68993),plot:r,clean:f,toSVG:t(93612).toSVG}},73812:function($,U,t){var M=t(22399),E=t(13838),i=t(27670).Y,S=t(71828).extendFlat,A=t(30962).overrideAll,g=A({color:E.color,showline:S({},E.showline,{dflt:!0}),linecolor:E.linecolor,linewidth:E.linewidth,showgrid:S({},E.showgrid,{dflt:!0}),gridcolor:E.gridcolor,gridwidth:E.gridwidth,griddash:E.griddash},"plot","from-root"),v=A({tickmode:E.minor.tickmode,nticks:E.nticks,tick0:E.tick0,dtick:E.dtick,tickvals:E.tickvals,ticktext:E.ticktext,ticks:E.ticks,ticklen:E.ticklen,tickwidth:E.tickwidth,tickcolor:E.tickcolor,ticklabelstep:E.ticklabelstep,showticklabels:E.showticklabels,labelalias:E.labelalias,showtickprefix:E.showtickprefix,tickprefix:E.tickprefix,showticksuffix:E.showticksuffix,ticksuffix:E.ticksuffix,showexponent:E.showexponent,exponentformat:E.exponentformat,minexponent:E.minexponent,separatethousands:E.separatethousands,tickfont:E.tickfont,tickangle:E.tickangle,tickformat:E.tickformat,tickformatstops:E.tickformatstops,layer:E.layer},"plot","from-root"),e={visible:S({},E.visible,{dflt:!0}),type:S({},E.type,{values:["-","linear","log","date","category"]}),autotypenumbers:E.autotypenumbers,autorange:S({},E.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:S({},E.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:E.categoryorder,categoryarray:E.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:S({},E.title.text,{editType:"plot",dflt:""}),font:S({},E.title.font,{editType:"plot"}),editType:"plot"},hoverformat:E.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:E._deprecated.title,titlefont:E._deprecated.titlefont}};S(e,g,v);var r={visible:S({},E.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:E.autotypenumbers,categoryorder:E.categoryorder,categoryarray:E.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:E.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};S(r,g,v),$.exports={domain:i({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:M.background},radialaxis:e,angularaxis:r,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},68993:function($,U,t){var M=t(71828),E=t(7901),i=t(44467),S=t(49119),A=t(27659).NG,g=t(26218),v=t(38701),e=t(96115),r=t(89426),f=t(15258),n=t(92128),a=t(4322),o=t(73812),h=t(12101),y=t(9813),p=y.axisNames;function x(u,c,T,k){var _=T("bgcolor");k.bgColor=E.combine(_,k.paper_bgcolor);var b=T("sector");T("hole");var P=A(k.fullData,y.name,k.id),l=k.layoutOut,d;function L(q,W){return T(d+"."+q,W)}for(var w=0;w<p.length;w++){d=p[w],M.isPlainObject(u[d])||(u[d]={});var I=u[d],z=i.newContainer(c,d);z._id=z._name=d,z._attr=k.id+"."+d,z._traceIndices=P.map(function(q){return q._expandedIndex});var B=y.axisName2dataArray[d],O=s(I,z,L,P,B,k);f(I,z,L,{axData:P,dataAttr:B});var R=L("visible");switch(h(z,c,l),L("uirevision",c.uirevision),z._m=1,d){case"radialaxis":var C=L("autorange",!z.isValidRange(I.range));I.autorange=C,C&&(O==="linear"||O==="-")&&L("rangemode"),C==="reversed"&&(z._m=-1),L("range"),z.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(O==="date"){M.log("Polar plots do not support date angular axes yet.");for(var F=0;F<P.length;F++)P[F].visible=!1;O=I.type=z.type="linear"}L(O==="linear"?"thetaunit":"period");var N=L("direction");L("rotation",{counterclockwise:0,clockwise:90}[N]);break}if(r(I,z,L,z.type,{tickSuffixDflt:z.thetaunit==="degrees"?"\xB0":void 0}),R){var V,K,Q,at,it=k.font||{};V=L("color"),K=V===I.color?V:it.color,Q=it.size,at=it.family,g(I,z,L,z.type),e(I,z,L,z.type,{font:{color:K,size:Q,family:at}}),v(I,z,L,{outerTicks:!0}),n(I,z,L,{dfltColor:V,bgColor:k.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:o[d]}),L("layer"),d==="radialaxis"&&(L("side"),L("angle",b[0]),L("title.text"),M.coerceFont(L,"title.font",{color:K,size:M.bigFont(Q),family:at}))}O!=="category"&&L("hoverformat"),z._input=I}c.angularaxis.type==="category"&&T("gridshape")}function s(u,c,T,k,_,b){var P=T("autotypenumbers",b.autotypenumbersDflt),l=T("type");if(l==="-"){for(var d,L=0;L<k.length;L++)if(k[L].visible){d=k[L];break}d&&d[_]&&(c.type=a(d[_],"gregorian",{noMultiCategory:!0,autotypenumbers:P})),c.type==="-"?c.type="linear":u.type=c.type}return c.type}$.exports=function(u,c,T){S(u,c,T,{type:y.name,attributes:o,handleDefaults:x,font:c.font,autotypenumbersDflt:c.autotypenumbers,paper_bgcolor:c.paper_bgcolor,fullData:T,layoutOut:c})}},77997:function($,U,t){var M=t(39898),E=t(84267),i=t(73972),S=t(71828),A=S.strRotate,g=S.strTranslate,v=t(7901),e=t(91424),r=t(74875),f=t(89298),n=t(21994),a=t(12101),o=t(71739).doAutoRange,h=t(29323),y=t(28569),p=t(30211),x=t(92998),s=t(47322).prepSelect,u=t(47322).selectOnClick,c=t(47322).clearOutline,T=t(6964),k=t(33306),_=t(61549).redrawReglTraces,b=t(18783).MID_SHIFT,P=t(9813),l=t(10869),d=t(23893),L=d.smith,w=d.reactanceArc,I=d.resistanceArc,z=d.smithTransform,B=S._,O=S.mod,R=S.deg2rad,C=S.rad2deg;function F(it,q,W){this.isSmith=W||!1,this.id=q,this.gd=it,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var Z=it._fullLayout,G="clip"+Z._uid+q;this.clipIds.forTraces=G+"-for-traces",this.clipPaths.forTraces=Z._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=Z["_"+(W?"smith":"polar")+"layer"].append("g").attr("class",q),this.getHole=function(et){return this.isSmith?0:et.hole},this.getSector=function(et){return this.isSmith?[0,360]:et.sector},this.getRadial=function(et){return this.isSmith?et.realaxis:et.radialaxis},this.getAngular=function(et){return this.isSmith?et.imaginaryaxis:et.angularaxis},W||(this.radialTickLayout=null,this.angularTickLayout=null)}var N=F.prototype;$.exports=function(it,q,W){return new F(it,q,W)},N.plot=function(it,q){for(var W=this,Z=q[W.id],G=!1,et=0;et<it.length;et++){var nt=it[et][0].trace;if(nt.cliponaxis===!1){G=!0;break}}W._hasClipOnAxisFalse=G,W.updateLayers(q,Z),W.updateLayout(q,Z),r.generalUpdatePerTraceModule(W.gd,W,it,Z),W.updateFx(q,Z),W.isSmith&&(delete Z.realaxis.range,delete Z.imaginaryaxis.range)},N.updateLayers=function(it,q){var W=this,Z=W.isSmith,G=W.layers,et=W.getRadial(q),nt=W.getAngular(q),X=P.layerNames,Y=X.indexOf("frontplot"),ot=X.slice(0,Y),rt=nt.layer==="below traces",ht=et.layer==="below traces";rt&&ot.push("angular-line"),ht&&ot.push("radial-line"),rt&&ot.push("angular-axis"),ht&&ot.push("radial-axis"),ot.push("frontplot"),rt||ot.push("angular-line"),ht||ot.push("radial-line"),rt||ot.push("angular-axis"),ht||ot.push("radial-axis");var pt=(Z?"smith":"polar")+"sublayer",yt=W.framework.selectAll("."+pt).data(ot,String);yt.enter().append("g").attr("class",function(xt){return pt+" "+xt}).each(function(xt){var Ft=G[xt]=M.select(this);switch(xt){case"frontplot":Z||Ft.append("g").classed("barlayer",!0),Ft.append("g").classed("scatterlayer",!0);break;case"backplot":Ft.append("g").classed("maplayer",!0);break;case"plotbg":G.bg=Ft.append("path");break;case"radial-grid":Ft.style("fill","none");break;case"angular-grid":Ft.style("fill","none");break;case"radial-line":Ft.append("line").style("fill","none");break;case"angular-line":Ft.append("path").style("fill","none");break}}),yt.order()},N.updateLayout=function(it,q){var W=this,Z=W.layers,G=it._size,et=W.getRadial(q),nt=W.getAngular(q),X=q.domain.x,Y=q.domain.y;W.xOffset=G.l+G.w*X[0],W.yOffset=G.t+G.h*(1-Y[1]);var ot=W.xLength=G.w*(X[1]-X[0]),rt=W.yLength=G.h*(Y[1]-Y[0]),ht=W.getSector(q);W.sectorInRad=ht.map(R);var pt=W.sectorBBox=K(ht),yt=pt[2]-pt[0],xt=pt[3]-pt[1],Ft=rt/ot,Et=Math.abs(xt/yt),mt,gt,wt,Pt,Bt;Ft>Et?(mt=ot,gt=ot*Et,Bt=(rt-gt)/G.h/2,wt=[X[0],X[1]],Pt=[Y[0]+Bt,Y[1]-Bt]):(mt=rt/Et,gt=rt,Bt=(ot-mt)/G.w/2,wt=[X[0]+Bt,X[1]-Bt],Pt=[Y[0],Y[1]]),W.xLength2=mt,W.yLength2=gt,W.xDomain2=wt,W.yDomain2=Pt;var kt=W.xOffset2=G.l+G.w*wt[0],jt=W.yOffset2=G.t+G.h*(1-Pt[1]),Ht=W.radius=mt/yt,Vt=W.innerRadius=W.getHole(q)*Ht,ee=W.cx=kt-Ht*pt[0],te=W.cy=jt+Ht*pt[3],ae=W.cxx=ee-kt,le=W.cyy=te-jt,ce=et.side,pe;ce==="counterclockwise"?(pe=ce,ce="top"):ce==="clockwise"&&(pe=ce,ce="bottom"),W.radialAxis=W.mockAxis(it,q,et,{_id:"x",side:ce,_trueSide:pe,domain:[Vt/G.w,Ht/G.w]}),W.angularAxis=W.mockAxis(it,q,nt,{side:"right",domain:[0,Math.PI],autorange:!1}),W.doAutoRange(it,q),W.updateAngularAxis(it,q),W.updateRadialAxis(it,q),W.updateRadialAxisTitle(it,q),W.xaxis=W.mockCartesianAxis(it,q,{_id:"x",domain:wt}),W.yaxis=W.mockCartesianAxis(it,q,{_id:"y",domain:Pt});var we=W.pathSubplot();W.clipPaths.forTraces.select("path").attr("d",we).attr("transform",g(ae,le)),Z.frontplot.attr("transform",g(kt,jt)).call(e.setClipUrl,W._hasClipOnAxisFalse?null:W.clipIds.forTraces,W.gd),Z.bg.attr("d",we).attr("transform",g(ee,te)).call(v.fill,q.bgcolor)},N.mockAxis=function(it,q,W,Z){var G=S.extendFlat({},W,Z);return a(G,q,it),G},N.mockCartesianAxis=function(it,q,W){var Z=this,G=Z.isSmith,et=W._id,nt=S.extendFlat({type:"linear"},W);n(nt,it);var X={x:[0,2],y:[1,3]};return nt.setRange=function(){var Y=Z.sectorBBox,ot=X[et],rt=Z.radialAxis._rl,ht=(rt[1]-rt[0])/(1-Z.getHole(q));nt.range=[Y[ot[0]]*ht,Y[ot[1]]*ht]},nt.isPtWithinRange=et==="x"&&!G?function(Y){return Z.isPtInside(Y)}:function(){return!0},nt.setRange(),nt.setScale(),nt},N.doAutoRange=function(it,q){var W=this,Z=W.gd,G=W.radialAxis,et=W.getRadial(q);o(Z,G);var nt=G.range;et.range=nt.slice(),et._input.range=nt.slice(),G._rl=[G.r2l(nt[0],null,"gregorian"),G.r2l(nt[1],null,"gregorian")]},N.updateRadialAxis=function(it,q){var W=this,Z=W.gd,G=W.layers,et=W.radius,nt=W.innerRadius,X=W.cx,Y=W.cy,ot=W.getRadial(q),rt=O(W.getSector(q)[0],360),ht=W.radialAxis,pt=nt<et,yt=W.isSmith;yt||(W.fillViewInitialKey("radialaxis.angle",ot.angle),W.fillViewInitialKey("radialaxis.range",ht.range.slice()),ht.setGeometry()),ht.tickangle==="auto"&&rt>90&&rt<=270&&(ht.tickangle=180);var xt=yt?function(Ht){var Vt=z(W,L([Ht.x,0]));return g(Vt[0]-X,Vt[1]-Y)}:function(Ht){return g(ht.l2p(Ht.x)+nt,0)},Ft=yt?function(Ht){return I(W,Ht.x,-1/0,1/0)}:function(Ht){return W.pathArc(ht.r2p(Ht.x)+nt)},Et=V(ot);if(W.radialTickLayout!==Et&&(G["radial-axis"].selectAll(".xtick").remove(),W.radialTickLayout=Et),pt){ht.setScale();var mt=0,gt=yt?(ht.tickvals||[]).filter(function(Ht){return Ht>=0}).map(function(Ht){return f.tickText(ht,Ht,!0,!1)}):f.calcTicks(ht),wt=yt?gt:f.clipEnds(ht,gt),Pt=f.getTickSigns(ht)[2];yt&&((ht.ticks==="top"&&ht.side==="bottom"||ht.ticks==="bottom"&&ht.side==="top")&&(Pt=-Pt),ht.ticks==="top"&&ht.side==="top"&&(mt=-ht.ticklen),ht.ticks==="bottom"&&ht.side==="bottom"&&(mt=ht.ticklen)),f.drawTicks(Z,ht,{vals:gt,layer:G["radial-axis"],path:f.makeTickPath(ht,0,Pt),transFn:xt,crisp:!1}),f.drawGrid(Z,ht,{vals:wt,layer:G["radial-grid"],path:Ft,transFn:S.noop,crisp:!1}),f.drawLabels(Z,ht,{vals:gt,layer:G["radial-axis"],transFn:xt,labelFns:f.makeLabelFns(ht,mt)})}var Bt=W.radialAxisAngle=W.vangles?C(Q(R(ot.angle),W.vangles)):ot.angle,kt=g(X,Y),jt=kt+A(-Bt);at(G["radial-axis"],pt&&(ot.showticklabels||ot.ticks),{transform:jt}),at(G["radial-grid"],pt&&ot.showgrid,{transform:yt?"":kt}),at(G["radial-line"].select("line"),pt&&ot.showline,{x1:yt?-et:nt,y1:0,x2:et,y2:0,transform:jt}).attr("stroke-width",ot.linewidth).call(v.stroke,ot.linecolor)},N.updateRadialAxisTitle=function(it,q,W){if(!this.isSmith){var Z=this,G=Z.gd,et=Z.radius,nt=Z.cx,X=Z.cy,Y=Z.getRadial(q),ot=Z.id+"title",rt=0;if(Y.title){var ht=e.bBox(Z.layers["radial-axis"].node()).height,pt=Y.title.font.size,yt=Y.side;rt=yt==="top"?pt:yt==="counterclockwise"?-(ht+pt*.4):ht+pt*.8}var xt=W!==void 0?W:Z.radialAxisAngle,Ft=R(xt),Et=Math.cos(Ft),mt=Math.sin(Ft),gt=nt+et/2*Et+rt*mt,wt=X-et/2*mt+rt*Et;Z.layers["radial-axis-title"]=x.draw(G,ot,{propContainer:Y,propName:Z.id+".radialaxis.title",placeholder:B(G,"Click to enter radial axis title"),attributes:{x:gt,y:wt,"text-anchor":"middle"},transform:{rotate:-xt}})}},N.updateAngularAxis=function(it,q){var W=this,Z=W.gd,G=W.layers,et=W.radius,nt=W.innerRadius,X=W.cx,Y=W.cy,ot=W.getAngular(q),rt=W.angularAxis,ht=W.isSmith;ht||(W.fillViewInitialKey("angularaxis.rotation",ot.rotation),rt.setGeometry(),rt.setScale());var pt=ht?function(Vt){var ee=z(W,L([0,Vt.x]));return Math.atan2(ee[0]-X,ee[1]-Y)-Math.PI/2}:function(Vt){return rt.t2g(Vt.x)};rt.type==="linear"&&rt.thetaunit==="radians"&&(rt.tick0=C(rt.tick0),rt.dtick=C(rt.dtick));var yt=function(Vt){return g(X+et*Math.cos(Vt),Y-et*Math.sin(Vt))},xt=ht?function(Vt){var ee=z(W,L([0,Vt.x]));return g(ee[0],ee[1])}:function(Vt){return yt(pt(Vt))},Ft=ht?function(Vt){var ee=z(W,L([0,Vt.x])),te=Math.atan2(ee[0]-X,ee[1]-Y)-Math.PI/2;return g(ee[0],ee[1])+A(-C(te))}:function(Vt){var ee=pt(Vt);return yt(ee)+A(-C(ee))},Et=ht?function(Vt){return w(W,Vt.x,0,1/0)}:function(Vt){var ee=pt(Vt),te=Math.cos(ee),ae=Math.sin(ee);return"M"+[X+nt*te,Y-nt*ae]+"L"+[X+et*te,Y-et*ae]},mt=f.makeLabelFns(rt,0),gt=mt.labelStandoff,wt={};wt.xFn=function(Vt){var ee=pt(Vt);return Math.cos(ee)*gt},wt.yFn=function(Vt){var ee=pt(Vt),te=Math.sin(ee)>0?.2:1;return-Math.sin(ee)*(gt+Vt.fontSize*te)+Math.abs(Math.cos(ee))*(Vt.fontSize*b)},wt.anchorFn=function(Vt){var ee=pt(Vt),te=Math.cos(ee);return Math.abs(te)<.1?"middle":te>0?"start":"end"},wt.heightFn=function(Vt,ee,te){var ae=pt(Vt);return-.5*(1+Math.sin(ae))*te};var Pt=V(ot);W.angularTickLayout!==Pt&&(G["angular-axis"].selectAll("."+rt._id+"tick").remove(),W.angularTickLayout=Pt);var Bt=ht?[1/0].concat(rt.tickvals||[]).map(function(Vt){return f.tickText(rt,Vt,!0,!1)}):f.calcTicks(rt);ht&&(Bt[0].text="\u221E",Bt[0].fontSize*=1.75);var kt;if(q.gridshape==="linear"?(kt=Bt.map(pt),S.angleDelta(kt[0],kt[1])<0&&(kt=kt.slice().reverse())):kt=null,W.vangles=kt,rt.type==="category"&&(Bt=Bt.filter(function(Vt){return S.isAngleInsideSector(pt(Vt),W.sectorInRad)})),rt.visible){var jt=rt.ticks==="inside"?-1:1,Ht=(rt.linewidth||1)/2;f.drawTicks(Z,rt,{vals:Bt,layer:G["angular-axis"],path:"M"+jt*Ht+",0h"+jt*rt.ticklen,transFn:Ft,crisp:!1}),f.drawGrid(Z,rt,{vals:Bt,layer:G["angular-grid"],path:Et,transFn:S.noop,crisp:!1}),f.drawLabels(Z,rt,{vals:Bt,layer:G["angular-axis"],repositionOnUpdate:!0,transFn:xt,labelFns:wt})}at(G["angular-line"].select("path"),ot.showline,{d:W.pathSubplot(),transform:g(X,Y)}).attr("stroke-width",ot.linewidth).call(v.stroke,ot.linecolor)},N.updateFx=function(it,q){if(!this.gd._context.staticPlot){var W=!this.isSmith;W&&(this.updateAngularDrag(it),this.updateRadialDrag(it,q,0),this.updateRadialDrag(it,q,1)),this.updateHoverAndMainDrag(it)}},N.updateHoverAndMainDrag=function(it){var q=this,W=q.isSmith,Z=q.gd,G=q.layers,et=it._zoomlayer,nt=P.MINZOOM,X=P.OFFEDGE,Y=q.radius,ot=q.innerRadius,rt=q.cx,ht=q.cy,pt=q.cxx,yt=q.cyy,xt=q.sectorInRad,Ft=q.vangles,Et=q.radialAxis,mt=l.clampTiny,gt=l.findXYatLength,wt=l.findEnclosingVertexAngles,Pt=P.cornerHalfWidth,Bt=P.cornerLen/2,kt,jt,Ht=h.makeDragger(G,"path","maindrag",it.dragmode===!1?"none":"crosshair");M.select(Ht).attr("d",q.pathSubplot()).attr("transform",g(rt,ht)),Ht.onmousemove=function(Ae){p.hover(Z,Ae,q.id),Z._fullLayout._lasthover=Ht,Z._fullLayout._hoversubplot=q.id},Ht.onmouseout=function(Ae){Z._dragging||y.unhover(Z,Ae)};var Vt={element:Ht,gd:Z,subplot:q.id,plotinfo:{id:q.id,xaxis:q.xaxis,yaxis:q.yaxis},xaxes:[q.xaxis],yaxes:[q.yaxis]},ee,te,ae,le,ce,pe,we,ve,Mt;function It(Ae,Ve){return Math.sqrt(Ae*Ae+Ve*Ve)}function Rt(Ae,Ve){return It(Ae-pt,Ve-yt)}function zt(Ae,Ve){return Math.atan2(yt-Ve,Ae-pt)}function Tt(Ae,Ve){return[Ae*Math.cos(Ve),Ae*Math.sin(-Ve)]}function ft(Ae,Ve){if(Ae===0)return q.pathSector(2*Pt);var Qe=Bt/Ae,Sr=Ve-Qe,he=Ve+Qe,je=Math.max(0,Math.min(Ae,Y)),Re=je-Pt,_r=je+Pt;return"M"+Tt(Re,Sr)+"A"+[Re,Re]+" 0,0,0 "+Tt(Re,he)+"L"+Tt(_r,he)+"A"+[_r,_r]+" 0,0,1 "+Tt(_r,Sr)+"Z"}function ut(Ae,Ve,Qe){if(Ae===0)return q.pathSector(2*Pt);var Sr=Tt(Ae,Ve),he=Tt(Ae,Qe),je=mt((Sr[0]+he[0])/2),Re=mt((Sr[1]+he[1])/2),_r,tr;if(je&&Re){var Gt=Re/je,re=-1/Gt,fe=gt(Pt,Gt,je,Re);_r=gt(Bt,re,fe[0][0],fe[0][1]),tr=gt(Bt,re,fe[1][0],fe[1][1])}else{var ye,Le;Re?(ye=Bt,Le=Pt):(ye=Pt,Le=Bt),_r=[[je-ye,Re-Le],[je+ye,Re-Le]],tr=[[je-ye,Re+Le],[je+ye,Re+Le]]}return"M"+_r.join("L")+"L"+tr.reverse().join("L")+"Z"}function vt(){ae=null,le=null,ce=q.pathSubplot(),pe=!1;var Ae=Z._fullLayout[q.id];we=E(Ae.bgcolor).getLuminance(),ve=h.makeZoombox(et,we,rt,ht,ce),ve.attr("fill-rule","evenodd"),Mt=h.makeCorners(et,rt,ht),c(Z)}function St(Ae,Ve){return Ve=Math.max(Math.min(Ve,Y),ot),Ae<X?Ae=0:Y-Ae<X?Ae=Y:Ve<X?Ve=0:Y-Ve<X&&(Ve=Y),Math.abs(Ve-Ae)>nt?(Ae<Ve?(ae=Ae,le=Ve):(ae=Ve,le=Ae),!0):(ae=null,le=null,!1)}function Ot(Ae,Ve){Ae=Ae||ce,Ve=Ve||"M0,0Z",ve.attr("d",Ae),Mt.attr("d",Ve),h.transitionZoombox(ve,Mt,pe,we),pe=!0;var Qe={};Fe(Qe),Z.emit("plotly_relayouting",Qe)}function Xt(Ae,Ve){Ae=Ae*kt,Ve=Ve*jt;var Qe=ee+Ae,Sr=te+Ve,he=Rt(ee,te),je=Math.min(Rt(Qe,Sr),Y),Re=zt(ee,te),_r,tr;St(he,je)&&(_r=ce+q.pathSector(le),ae&&(_r+=q.pathSector(ae)),tr=ft(ae,Re)+ft(le,Re)),Ot(_r,tr)}function $t(Ae,Ve,Qe,Sr){var he=l.findIntersectionXY(Qe,Sr,Qe,[Ae-pt,yt-Ve]);return It(he[0],he[1])}function de(Ae,Ve){var Qe=ee+Ae,Sr=te+Ve,he=zt(ee,te),je=zt(Qe,Sr),Re=wt(he,Ft),_r=wt(je,Ft),tr=$t(ee,te,Re[0],Re[1]),Gt=Math.min($t(Qe,Sr,_r[0],_r[1]),Y),re,fe;St(tr,Gt)&&(re=ce+q.pathSector(le),ae&&(re+=q.pathSector(ae)),fe=[ut(ae,Re[0],Re[1]),ut(le,Re[0],Re[1])].join(" ")),Ot(re,fe)}function Me(){if(h.removeZoombox(Z),!(ae===null||le===null)){var Ae={};Fe(Ae),h.showDoubleClickNotifier(Z),i.call("_guiRelayout",Z,Ae)}}function Fe(Ae){var Ve=Et._rl,Qe=(Ve[1]-Ve[0])/(1-ot/Y)/Y,Sr=[Ve[0]+(ae-ot)*Qe,Ve[0]+(le-ot)*Qe];Ae[q.id+".radialaxis.range"]=Sr}function De(Ae,Ve){var Qe=Z._fullLayout.clickmode;if(h.removeZoombox(Z),Ae===2){var Sr={};for(var he in q.viewInitial)Sr[q.id+"."+he]=q.viewInitial[he];Z.emit("plotly_doubleclick",null),i.call("_guiRelayout",Z,Sr)}Qe.indexOf("select")>-1&&Ae===1&&u(Ve,Z,[q.xaxis],[q.yaxis],q.id,Vt),Qe.indexOf("event")>-1&&p.click(Z,Ve,q.id)}Vt.prepFn=function(Ae,Ve,Qe){var Sr=Z._fullLayout.dragmode,he=Ht.getBoundingClientRect();Z._fullLayout._calcInverseTransform(Z);var je=Z._fullLayout._invTransform;kt=Z._fullLayout._invScaleX,jt=Z._fullLayout._invScaleY;var Re=S.apply3DTransform(je)(Ve-he.left,Qe-he.top);if(ee=Re[0],te=Re[1],Ft){var _r=l.findPolygonOffset(Y,xt[0],xt[1],Ft);ee+=pt+_r[0],te+=yt+_r[1]}switch(Sr){case"zoom":Vt.clickFn=De,W||(Ft?Vt.moveFn=de:Vt.moveFn=Xt,Vt.doneFn=Me,vt());break;case"select":case"lasso":s(Ae,Ve,Qe,Vt,Sr);break}},y.init(Vt)},N.updateRadialDrag=function(it,q,W){var Z=this,G=Z.gd,et=Z.layers,nt=Z.radius,X=Z.innerRadius,Y=Z.cx,ot=Z.cy,rt=Z.radialAxis,ht=P.radialDragBoxSize,pt=ht/2;if(!rt.visible)return;var yt=R(Z.radialAxisAngle),xt=rt._rl,Ft=xt[0],Et=xt[1],mt=xt[W],gt=.75*(xt[1]-xt[0])/(1-Z.getHole(q))/nt,wt,Pt,Bt;W?(wt=Y+(nt+pt)*Math.cos(yt),Pt=ot-(nt+pt)*Math.sin(yt),Bt="radialdrag"):(wt=Y+(X-pt)*Math.cos(yt),Pt=ot-(X-pt)*Math.sin(yt),Bt="radialdrag-inner");var kt=h.makeRectDragger(et,Bt,"crosshair",-pt,-pt,ht,ht),jt={element:kt,gd:G};it.dragmode===!1&&(jt.dragmode=!1),at(M.select(kt),rt.visible&&X<nt,{transform:g(wt,Pt)});var Ht,Vt,ee;function te(we,ve){if(Ht)Ht(we,ve);else{var Mt=[we,-ve],It=[Math.cos(yt),Math.sin(yt)],Rt=Math.abs(S.dot(Mt,It)/Math.sqrt(S.dot(Mt,Mt)));isNaN(Rt)||(Ht=Rt<.5?ce:pe)}var zt={};ae(zt),G.emit("plotly_relayouting",zt)}function ae(we){Vt!==null?we[Z.id+".radialaxis.angle"]=Vt:ee!==null&&(we[Z.id+".radialaxis.range["+W+"]"]=ee)}function le(){Vt!==null?i.call("_guiRelayout",G,Z.id+".radialaxis.angle",Vt):ee!==null&&i.call("_guiRelayout",G,Z.id+".radialaxis.range["+W+"]",ee)}function ce(we,ve){if(W!==0){var Mt=wt+we,It=Pt+ve;Vt=Math.atan2(ot-It,Mt-Y),Z.vangles&&(Vt=Q(Vt,Z.vangles)),Vt=C(Vt);var Rt=g(Y,ot)+A(-Vt);et["radial-axis"].attr("transform",Rt),et["radial-line"].select("line").attr("transform",Rt);var zt=Z.gd._fullLayout,Tt=zt[Z.id];Z.updateRadialAxisTitle(zt,Tt,Vt)}}function pe(we,ve){var Mt=S.dot([we,-ve],[Math.cos(yt),Math.sin(yt)]);if(ee=mt-gt*Mt,gt>0!=(W?ee>Ft:ee<Et)){ee=null;return}var It=G._fullLayout,Rt=It[Z.id];rt.range[W]=ee,rt._rl[W]=ee,Z.updateRadialAxis(It,Rt),Z.xaxis.setRange(),Z.xaxis.setScale(),Z.yaxis.setRange(),Z.yaxis.setScale();var zt=!1;for(var Tt in Z.traceHash){var ft=Z.traceHash[Tt],ut=S.filterVisible(ft),vt=ft[0][0].trace._module;vt.plot(G,Z,ut,Rt),i.traceIs(Tt,"gl")&&ut.length&&(zt=!0)}zt&&(k(G),_(G))}jt.prepFn=function(){Ht=null,Vt=null,ee=null,jt.moveFn=te,jt.doneFn=le,c(G)},jt.clampFn=function(we,ve){return Math.sqrt(we*we+ve*ve)<P.MINDRAG&&(we=0,ve=0),[we,ve]},y.init(jt)},N.updateAngularDrag=function(it){var q=this,W=q.gd,Z=q.layers,G=q.radius,et=q.angularAxis,nt=q.cx,X=q.cy,Y=q.cxx,ot=q.cyy,rt=P.angularDragBoxSize,ht=h.makeDragger(Z,"path","angulardrag",it.dragmode===!1?"none":"move"),pt={element:ht,gd:W};it.dragmode===!1?pt.dragmode=!1:M.select(ht).attr("d",q.pathAnnulus(G,G+rt)).attr("transform",g(nt,X)).call(T,"move");function yt(ee,te){return Math.atan2(ot+rt-te,ee-Y-rt)}var xt=Z.frontplot.select(".scatterlayer").selectAll(".trace"),Ft=xt.selectAll(".point"),Et=xt.selectAll(".textpoint"),mt,gt,wt,Pt,Bt,kt;function jt(ee,te){var ae=q.gd._fullLayout,le=ae[q.id],ce=mt+ee*it._invScaleX,pe=gt+te*it._invScaleY,we=yt(ce,pe),ve=C(we-kt);if(Pt=wt+ve,Z.frontplot.attr("transform",g(q.xOffset2,q.yOffset2)+A([-ve,Y,ot])),q.vangles){Bt=q.radialAxisAngle+ve;var Mt=g(nt,X)+A(-ve),It=g(nt,X)+A(-Bt);Z.bg.attr("transform",Mt),Z["radial-grid"].attr("transform",Mt),Z["radial-axis"].attr("transform",It),Z["radial-line"].select("line").attr("transform",It),q.updateRadialAxisTitle(ae,le,Bt)}else q.clipPaths.forTraces.select("path").attr("transform",g(Y,ot)+A(ve));Ft.each(function(){var St=M.select(this),Ot=e.getTranslate(St);St.attr("transform",g(Ot.x,Ot.y)+A([ve]))}),Et.each(function(){var St=M.select(this),Ot=St.select("text"),Xt=e.getTranslate(St);St.attr("transform",A([ve,Ot.attr("x"),Ot.attr("y")])+g(Xt.x,Xt.y))}),et.rotation=S.modHalf(Pt,360),q.updateAngularAxis(ae,le),q._hasClipOnAxisFalse&&!S.isFullCircle(q.sectorInRad)&&xt.call(e.hideOutsideRangePoints,q);var Rt=!1;for(var zt in q.traceHash)if(i.traceIs(zt,"gl")){var Tt=q.traceHash[zt],ft=S.filterVisible(Tt),ut=Tt[0][0].trace._module;ut.plot(W,q,ft,le),ft.length&&(Rt=!0)}Rt&&(k(W),_(W));var vt={};Ht(vt),W.emit("plotly_relayouting",vt)}function Ht(ee){ee[q.id+".angularaxis.rotation"]=Pt,q.vangles&&(ee[q.id+".radialaxis.angle"]=Bt)}function Vt(){Et.select("text").attr("transform",null);var ee={};Ht(ee),i.call("_guiRelayout",W,ee)}pt.prepFn=function(ee,te,ae){var le=it[q.id];wt=le.angularaxis.rotation;var ce=ht.getBoundingClientRect();mt=te-ce.left,gt=ae-ce.top,W._fullLayout._calcInverseTransform(W);var pe=S.apply3DTransform(it._invTransform)(mt,gt);mt=pe[0],gt=pe[1],kt=yt(mt,gt),pt.moveFn=jt,pt.doneFn=Vt,c(W)},q.vangles&&!S.isFullCircle(q.sectorInRad)&&(pt.prepFn=S.noop,T(M.select(ht),null)),y.init(pt)},N.isPtInside=function(it){if(this.isSmith)return!0;var q=this.sectorInRad,W=this.vangles,Z=this.angularAxis.c2g(it.theta),G=this.radialAxis,et=G.c2l(it.r),nt=G._rl,X=W?l.isPtInsidePolygon:S.isPtInsideSector;return X(et,Z,nt,q,W)},N.pathArc=function(it){var q=this.sectorInRad,W=this.vangles,Z=W?l.pathPolygon:S.pathArc;return Z(it,q[0],q[1],W)},N.pathSector=function(it){var q=this.sectorInRad,W=this.vangles,Z=W?l.pathPolygon:S.pathSector;return Z(it,q[0],q[1],W)},N.pathAnnulus=function(it,q){var W=this.sectorInRad,Z=this.vangles,G=Z?l.pathPolygonAnnulus:S.pathAnnulus;return G(it,q,W[0],W[1],Z)},N.pathSubplot=function(){var it=this.innerRadius,q=this.radius;return it?this.pathAnnulus(it,q):this.pathSector(q)},N.fillViewInitialKey=function(it,q){it in this.viewInitial||(this.viewInitial[it]=q)};function V(it){var q=it.ticks+String(it.ticklen)+String(it.showticklabels);return"side"in it&&(q+=it.side),q}function K(it){var q=it[0],W=it[1],Z=W-q,G=O(q,360),et=G+Z,nt=Math.cos(R(G)),X=Math.sin(R(G)),Y=Math.cos(R(et)),ot=Math.sin(R(et)),rt,ht,pt,yt;return G<=90&&et>=90||G>90&&et>=450?yt=1:X<=0&&ot<=0?yt=0:yt=Math.max(X,ot),G<=180&&et>=180||G>180&&et>=540?rt=-1:nt>=0&&Y>=0?rt=0:rt=Math.min(nt,Y),G<=270&&et>=270||G>270&&et>=630?ht=-1:X>=0&&ot>=0?ht=0:ht=Math.min(X,ot),et>=360?pt=1:nt<=0&&Y<=0?pt=0:pt=Math.max(nt,Y),[rt,ht,pt,yt]}function Q(it,q){var W=function(G){return S.angleDist(it,G)},Z=S.findIndexOfMin(q,W);return q[Z]}function at(it,q,W){return q?(it.attr("display",null),it.attr(W)):it&&it.attr("display","none"),it}},12101:function($,U,t){var M=t(71828),E=t(21994),i=M.deg2rad,S=M.rad2deg;$.exports=function(r,f,n){switch(E(r,n),r._id){case"x":case"radialaxis":A(r,f);break;case"angularaxis":e(r,f);break}};function A(r,f){var n=f._subplot;r.setGeometry=function(){var a=r._rl[0],o=r._rl[1],h=n.innerRadius,y=(n.radius-h)/(o-a),p=h/y,x=a>o?function(s){return s<=0}:function(s){return s>=0};r.c2g=function(s){var u=r.c2l(s)-a;return(x(u)?u:0)+p},r.g2c=function(s){return r.l2c(s+a-p)},r.g2p=function(s){return s*y},r.c2p=function(s){return r.g2p(r.c2g(s))}}}function g(r,f){return f==="degrees"?i(r):r}function v(r,f){return f==="degrees"?S(r):r}function e(r,f){var n=r.type;if(n==="linear"){var a=r.d2c,o=r.c2d;r.d2c=function(h,y){return g(a(h),y)},r.c2d=function(h,y){return o(v(h,y))}}r.makeCalcdata=function(h,y){var p=h[y],x=h._length,s,u,c=function(P){return r.d2c(P,h.thetaunit)};if(p){if(M.isTypedArray(p)&&n==="linear"){if(x===p.length)return p;if(p.subarray)return p.subarray(0,x)}for(s=new Array(x),u=0;u<x;u++)s[u]=c(p[u])}else{var T=y+"0",k="d"+y,_=T in h?c(h[T]):0,b=h[k]?c(h[k]):(r.period||2*Math.PI)/x;for(s=new Array(x),u=0;u<x;u++)s[u]=_+u*b}return s},r.setGeometry=function(){var h=f.sector,y=h.map(i),p={clockwise:-1,counterclockwise:1}[r.direction],x=i(r.rotation),s=function(l){return p*l+x},u=function(l){return(l-x)/p},c,T,k,_;switch(n){case"linear":T=c=M.identity,_=i,k=S,r.range=M.isFullCircle(y)?[h[0],h[0]+360]:y.map(u).map(S);break;case"category":var b=r._categories.length,P=r.period?Math.max(r.period,b):b;P===0&&(P=1),T=_=function(l){return l*2*Math.PI/P},c=k=function(l){return l*P/Math.PI/2},r.range=[0,P];break}r.c2g=function(l){return s(T(l))},r.g2c=function(l){return c(u(l))},r.t2g=function(l){return s(_(l))},r.g2t=function(l){return k(u(l))}}}},39779:function($){$.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},23893:function($){function U(A){return A<0?-1:A>0?1:0}function t(A){var g=A[0],v=A[1];if(!isFinite(g)||!isFinite(v))return[1,0];var e=(g+1)*(g+1)+v*v;return[(g*g+v*v-1)/e,2*v/e]}function M(A,g){var v=g[0],e=g[1];return[v*A.radius+A.cx,-e*A.radius+A.cy]}function E(A,g){return g*A.radius}function i(A,g,v,e){var r=M(A,t([v,g])),f=r[0],n=r[1],a=M(A,t([e,g])),o=a[0],h=a[1];if(g===0)return["M"+f+","+n,"L"+o+","+h].join(" ");var y=E(A,1/Math.abs(g));return["M"+f+","+n,"A"+y+","+y+" 0 0,"+(g<0?1:0)+" "+o+","+h].join(" ")}function S(A,g,v,e){var r=E(A,1/(g+1)),f=M(A,t([g,v])),n=f[0],a=f[1],o=M(A,t([g,e])),h=o[0],y=o[1];if(U(v)!==U(e)){var p=M(A,t([g,0])),x=p[0],s=p[1];return["M"+n+","+a,"A"+r+","+r+" 0 0,"+(0<v?0:1)+" "+x+","+s,"A"+r+","+r+" 0 0,"+(e<0?0:1)+h+","+y].join(" ")}return["M"+n+","+a,"A"+r+","+r+" 0 0,"+(e<v?0:1)+" "+h+","+y].join(" ")}$.exports={smith:t,reactanceArc:i,resistanceArc:S,smithTransform:M}},7504:function($,U,t){var M=t(27659).AU,E=t(71828).counterRegex,i=t(77997),S=t(39779),A=S.attr,g=S.name,v=E(g),e={};e[A]={valType:"subplotid",dflt:g,editType:"calc"};function r(n){for(var a=n._fullLayout,o=n.calcdata,h=a._subplots[g],y=0;y<h.length;y++){var p=h[y],x=M(o,g,p),s=a[p]._subplot;s||(s=i(n,p,!0),a[p]._subplot=s),s.plot(x,a,n._promises)}}function f(n,a,o,h){for(var y=h._subplots[g]||[],p=0;p<y.length;p++){var x=y[p],s=h[x]._subplot;if(!a[x]&&s){s.framework.remove();for(var u in s.clipPaths)s.clipPaths[u].remove()}}}$.exports={attr:A,name:g,idRoot:g,idRegex:v,attrRegex:v,attributes:e,layoutAttributes:t(33419),supplyLayoutDefaults:t(9558),plot:r,clean:f,toSVG:t(93612).toSVG}},33419:function($,U,t){var M=t(22399),E=t(13838),i=t(27670).Y,S=t(71828).extendFlat,A=t(30962).overrideAll,g=A({color:E.color,showline:S({},E.showline,{dflt:!0}),linecolor:E.linecolor,linewidth:E.linewidth,showgrid:S({},E.showgrid,{dflt:!0}),gridcolor:E.gridcolor,gridwidth:E.gridwidth,griddash:E.griddash},"plot","from-root"),v=A({ticklen:E.ticklen,tickwidth:S({},E.tickwidth,{dflt:2}),tickcolor:E.tickcolor,showticklabels:E.showticklabels,labelalias:E.labelalias,showtickprefix:E.showtickprefix,tickprefix:E.tickprefix,showticksuffix:E.showticksuffix,ticksuffix:E.ticksuffix,tickfont:E.tickfont,tickformat:E.tickformat,hoverformat:E.hoverformat,layer:E.layer},"plot","from-root"),e=S({visible:S({},E.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:S({},E.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},g,v),r=S({visible:S({},E.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:E.ticks,editType:"calc"},g,v);$.exports={domain:i({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:M.background},realaxis:e,imaginaryaxis:r,editType:"calc"}},9558:function($,U,t){var M=t(71828),E=t(7901),i=t(44467),S=t(49119),A=t(27659).NG,g=t(89426),v=t(96115),e=t(92128),r=t(21994),f=t(33419),n=t(39779),a=n.axisNames,o=y(function(p){return p.slice().reverse().map(function(x){return-x}).concat([0]).concat(p)},String);function h(p,x,s,u){var c=s("bgcolor");u.bgColor=E.combine(c,u.paper_bgcolor);var T=A(u.fullData,n.name,u.id),k=u.layoutOut,_;function b(N,V){return s(_+"."+N,V)}for(var P=0;P<a.length;P++){_=a[P],M.isPlainObject(p[_])||(p[_]={});var l=p[_],d=i.newContainer(x,_);d._id=d._name=_,d._attr=u.id+"."+_,d._traceIndices=T.map(function(N){return N._expandedIndex});var L=b("visible");if(d.type="linear",r(d,k),g(l,d,b,d.type),L){var w=_==="realaxis";if(w&&b("side"),w)b("tickvals");else{var I=o(x.realaxis.tickvals||f.realaxis.tickvals.dflt);b("tickvals",I)}var z,B,O,R,C=u.font||{};L&&(z=b("color"),B=z===l.color?z:C.color,O=C.size,R=C.family),v(l,d,b,d.type,{noTicklabelstep:!0,noAng:!w,noExp:!0,font:{color:B,size:O,family:R}}),M.coerce2(p,x,f,_+".ticklen"),M.coerce2(p,x,f,_+".tickwidth"),M.coerce2(p,x,f,_+".tickcolor",x.color);var F=b("ticks");F||(delete x[_].ticklen,delete x[_].tickwidth,delete x[_].tickcolor),e(l,d,b,{dfltColor:z,bgColor:u.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:f[_]}),b("layer")}b("hoverformat"),delete d.type,d._input=l}}$.exports=function(p,x,s){S(p,x,s,{noUirevision:!0,type:n.name,attributes:f,handleDefaults:h,font:x.font,paper_bgcolor:x.paper_bgcolor,fullData:s,layoutOut:x})};function y(p,x){var s={};return function(u){var c=x?x(u):u;if(c in s)return s[c];var T=p(u);return s[c]=T,T}}},49119:function($,U,t){var M=t(71828),E=t(44467),i=t(27670).c;$.exports=function(S,A,g,v){var e=v.type,r=v.attributes,f=v.handleDefaults,n=v.partition||"x",a=A._subplots[e],o=a.length,h=o&&a[0].replace(/\d+$/,""),y,p;function x(T,k){return M.coerce(y,p,r,T,k)}for(var s=0;s<o;s++){var u=a[s];S[u]?y=S[u]:y=S[u]={},p=E.newContainer(A,u,h),v.noUirevision||x("uirevision",A.uirevision);var c={};c[n]=[s/o,(s+1)/o],i(p,A,x,c),v.id=u,f(y,p,x,v)}}},5386:function($,U,t){var M=t(31562);M.FORMAT_LINK,M.DATE_FORMAT_LINK;function E(i){var S=i.description?" "+i.description:"",A=i.keys||[];if(A.length>0){for(var g=[],v=0;v<A.length;v++)g[v]="`"+A[v]+"`";S=S+"Finally, the template string has access to ",A.length===1?S=S+"variable "+g[0]:S=S+"variables "+g.slice(0,-1).join(", ")+" and "+g.slice(-1)+"."}return S}U.fF=function(i,S){i=i||{},S=S||{},E(S);var A={valType:"string",dflt:"",editType:i.editType||"none"};return i.arrayOk!==!1&&(A.arrayOk=!0),A},U.si=function(i,S){i=i||{},S=S||{},E(S);var A={valType:"string",dflt:"",editType:i.editType||"calc"};return i.arrayOk!==!1&&(A.arrayOk=!0),A},U.R=function(i,S){i=i||{},S=S||{},i.newshape,E(S);var A={valType:"string",dflt:"",editType:i.editType||"arraydraw"};return A}},61639:function($,U,t){var M=t(64380),E=t(27659).AU,i=t(71828).counterRegex,S="ternary";U.name=S;var A=U.attr="subplot";U.idRoot=S,U.idRegex=U.attrRegex=i(S);var g=U.attributes={};g[A]={valType:"subplotid",dflt:"ternary",editType:"calc"},U.layoutAttributes=t(81367),U.supplyLayoutDefaults=t(25369),U.plot=function(v){for(var e=v._fullLayout,r=v.calcdata,f=e._subplots[S],n=0;n<f.length;n++){var a=f[n],o=E(r,S,a),h=e[a]._subplot;h||(h=new M({id:a,graphDiv:v,container:e._ternarylayer.node()},e),e[a]._subplot=h),h.plot(o,e,v._promises)}},U.clean=function(v,e,r,f){for(var n=f._subplots[S]||[],a=0;a<n.length;a++){var o=n[a],h=f[o]._subplot;!e[o]&&h&&(h.plotContainer.remove(),h.clipDef.remove(),h.clipDefRelative.remove(),h.layers["a-title"].remove(),h.layers["b-title"].remove(),h.layers["c-title"].remove())}}},81367:function($,U,t){var M=t(22399),E=t(27670).Y,i=t(13838),S=t(30962).overrideAll,A=t(1426).extendFlat,g={title:{text:i.title.text,font:i.title.font},color:i.color,tickmode:i.minor.tickmode,nticks:A({},i.nticks,{dflt:6,min:1}),tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:i.ticks,ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,ticklabelstep:i.ticklabelstep,showticklabels:i.showticklabels,labelalias:i.labelalias,showtickprefix:i.showtickprefix,tickprefix:i.tickprefix,showticksuffix:i.showticksuffix,ticksuffix:i.ticksuffix,showexponent:i.showexponent,exponentformat:i.exponentformat,minexponent:i.minexponent,separatethousands:i.separatethousands,tickfont:i.tickfont,tickangle:i.tickangle,tickformat:i.tickformat,tickformatstops:i.tickformatstops,hoverformat:i.hoverformat,showline:A({},i.showline,{dflt:!0}),linecolor:i.linecolor,linewidth:i.linewidth,showgrid:A({},i.showgrid,{dflt:!0}),gridcolor:i.gridcolor,gridwidth:i.gridwidth,griddash:i.griddash,layer:i.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:i._deprecated.title,titlefont:i._deprecated.titlefont}},v=$.exports=S({domain:E({name:"ternary"}),bgcolor:{valType:"color",dflt:M.background},sum:{valType:"number",dflt:1,min:0},aaxis:g,baxis:g,caxis:g},"plot","from-root");v.uirevision={valType:"any",editType:"none"},v.aaxis.uirevision=v.baxis.uirevision=v.caxis.uirevision={valType:"any",editType:"none"}},25369:function($,U,t){var M=t(7901),E=t(44467),i=t(71828),S=t(49119),A=t(96115),g=t(89426),v=t(38701),e=t(26218),r=t(92128),f=t(81367),n=["aaxis","baxis","caxis"];$.exports=function(h,y,p){S(h,y,p,{type:"ternary",attributes:f,handleDefaults:a,font:y.font,paper_bgcolor:y.paper_bgcolor})};function a(h,y,p,x){var s=p("bgcolor"),u=p("sum");x.bgColor=M.combine(s,x.paper_bgcolor);for(var c,T,k,_=0;_<n.length;_++)c=n[_],T=h[c]||{},k=E.newContainer(y,c),k._name=c,o(T,k,x,y);var b=y.aaxis,P=y.baxis,l=y.caxis;b.min+P.min+l.min>=u&&(b.min=0,P.min=0,l.min=0,h.aaxis&&delete h.aaxis.min,h.baxis&&delete h.baxis.min,h.caxis&&delete h.caxis.min)}function o(h,y,p,x){var s=f[y._name];function u(d,L){return i.coerce(h,y,s,d,L)}u("uirevision",x.uirevision),y.type="linear";var c=u("color"),T=c!==s.color.dflt?c:p.font.color,k=y._name,_=k.charAt(0).toUpperCase(),b="Component "+_,P=u("title.text",b);y._hovertitle=P===b?P:_,i.coerceFont(u,"title.font",{family:p.font.family,size:i.bigFont(p.font.size),color:T}),u("min"),e(h,y,u,"linear"),g(h,y,u,"linear"),A(h,y,u,"linear"),v(h,y,u,{outerTicks:!0});var l=u("showticklabels");l&&(i.coerceFont(u,"tickfont",{family:p.font.family,size:p.font.size,color:T}),u("tickangle"),u("tickformat")),r(h,y,u,{dfltColor:c,bgColor:p.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:s}),u("hoverformat"),u("layer")}},64380:function($,U,t){var M=t(39898),E=t(84267),i=t(73972),S=t(71828),A=S.strTranslate,g=S._,v=t(7901),e=t(91424),r=t(21994),f=t(1426).extendFlat,n=t(74875),a=t(89298),o=t(28569),h=t(30211),y=t(64505),p=y.freeMode,x=y.rectMode,s=t(92998),u=t(47322).prepSelect,c=t(47322).selectOnClick,T=t(47322).clearOutline,k=t(47322).clearSelectionsCache,_=t(85555);function b(C,F){this.id=C.id,this.graphDiv=C.graphDiv,this.init(F),this.makeFramework(F),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}$.exports=b;var P=b.prototype;P.init=function(C){this.container=C._ternarylayer,this.defs=C._defs,this.layoutId=C._uid,this.traceHash={},this.layers={}},P.plot=function(C,F){var N=this,V=F[N.id],K=F._size;N._hasClipOnAxisFalse=!1;for(var Q=0;Q<C.length;Q++){var at=C[Q][0].trace;if(at.cliponaxis===!1){N._hasClipOnAxisFalse=!0;break}}N.updateLayers(V),N.adjustLayout(V,K),n.generalUpdatePerTraceModule(N.graphDiv,N,C,V),N.layers.plotbg.select("path").call(v.fill,V.bgcolor)},P.makeFramework=function(C){var F=this,N=F.graphDiv,V=C[F.id],K=F.clipId="clip"+F.layoutId+F.id,Q=F.clipIdRelative="clip-relative"+F.layoutId+F.id;F.clipDef=S.ensureSingleById(C._clips,"clipPath",K,function(at){at.append("path").attr("d","M0,0Z")}),F.clipDefRelative=S.ensureSingleById(C._clips,"clipPath",Q,function(at){at.append("path").attr("d","M0,0Z")}),F.plotContainer=S.ensureSingle(F.container,"g",F.id),F.updateLayers(V),e.setClipUrl(F.layers.backplot,K,N),e.setClipUrl(F.layers.grids,K,N)},P.updateLayers=function(C){var F=this,N=F.layers,V=["draglayer","plotbg","backplot","grids"];C.aaxis.layer==="below traces"&&V.push("aaxis","aline"),C.baxis.layer==="below traces"&&V.push("baxis","bline"),C.caxis.layer==="below traces"&&V.push("caxis","cline"),V.push("frontplot"),C.aaxis.layer==="above traces"&&V.push("aaxis","aline"),C.baxis.layer==="above traces"&&V.push("baxis","bline"),C.caxis.layer==="above traces"&&V.push("caxis","cline");var K=F.plotContainer.selectAll("g.toplevel").data(V,String),Q=["agrid","bgrid","cgrid"];K.enter().append("g").attr("class",function(at){return"toplevel "+at}).each(function(at){var it=M.select(this);N[at]=it,at==="frontplot"?it.append("g").classed("scatterlayer",!0):at==="backplot"?it.append("g").classed("maplayer",!0):at==="plotbg"?it.append("path").attr("d","M0,0Z"):at==="aline"||at==="bline"||at==="cline"?it.append("path"):at==="grids"&&Q.forEach(function(q){N[q]=it.append("g").classed("grid "+q,!0)})}),K.order()};var l=Math.sqrt(4/3);P.adjustLayout=function(C,F){var N=this,V=C.domain,K=(V.x[0]+V.x[1])/2,Q=(V.y[0]+V.y[1])/2,at=V.x[1]-V.x[0],it=V.y[1]-V.y[0],q=at*F.w,W=it*F.h,Z=C.sum,G=C.aaxis.min,et=C.baxis.min,nt=C.caxis.min,X,Y,ot,rt,ht,pt;q>l*W?(rt=W,ot=rt*l):(ot=q,rt=ot/l),ht=at*ot/q,pt=it*rt/W,X=F.l+F.w*K-ot/2,Y=F.t+F.h*(1-Q)-rt/2,N.x0=X,N.y0=Y,N.w=ot,N.h=rt,N.sum=Z,N.xaxis={type:"linear",range:[G+2*nt-Z,Z-G-2*et],domain:[K-ht/2,K+ht/2],_id:"x"},r(N.xaxis,N.graphDiv._fullLayout),N.xaxis.setScale(),N.xaxis.isPtWithinRange=function(jt){return jt.a>=N.aaxis.range[0]&&jt.a<=N.aaxis.range[1]&&jt.b>=N.baxis.range[1]&&jt.b<=N.baxis.range[0]&&jt.c>=N.caxis.range[1]&&jt.c<=N.caxis.range[0]},N.yaxis={type:"linear",range:[G,Z-et-nt],domain:[Q-pt/2,Q+pt/2],_id:"y"},r(N.yaxis,N.graphDiv._fullLayout),N.yaxis.setScale(),N.yaxis.isPtWithinRange=function(){return!0};var yt=N.yaxis.domain[0],xt=N.aaxis=f({},C.aaxis,{range:[G,Z-et-nt],side:"left",tickangle:(+C.aaxis.tickangle||0)-30,domain:[yt,yt+pt*l],anchor:"free",position:0,_id:"y",_length:ot});r(xt,N.graphDiv._fullLayout),xt.setScale();var Ft=N.baxis=f({},C.baxis,{range:[Z-G-nt,et],side:"bottom",domain:N.xaxis.domain,anchor:"free",position:0,_id:"x",_length:ot});r(Ft,N.graphDiv._fullLayout),Ft.setScale();var Et=N.caxis=f({},C.caxis,{range:[Z-G-et,nt],side:"right",tickangle:(+C.caxis.tickangle||0)+30,domain:[yt,yt+pt*l],anchor:"free",position:0,_id:"y",_length:ot});r(Et,N.graphDiv._fullLayout),Et.setScale();var mt="M"+X+","+(Y+rt)+"h"+ot+"l-"+ot/2+",-"+rt+"Z";N.clipDef.select("path").attr("d",mt),N.layers.plotbg.select("path").attr("d",mt);var gt="M0,"+rt+"h"+ot+"l-"+ot/2+",-"+rt+"Z";N.clipDefRelative.select("path").attr("d",gt);var wt=A(X,Y);N.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",wt),N.clipDefRelative.select("path").attr("transform",null);var Pt=A(X-Ft._offset,Y+rt);N.layers.baxis.attr("transform",Pt),N.layers.bgrid.attr("transform",Pt);var Bt=A(X+ot/2,Y)+"rotate(30)"+A(0,-xt._offset);N.layers.aaxis.attr("transform",Bt),N.layers.agrid.attr("transform",Bt);var kt=A(X+ot/2,Y)+"rotate(-30)"+A(0,-Et._offset);N.layers.caxis.attr("transform",kt),N.layers.cgrid.attr("transform",kt),N.drawAxes(!0),N.layers.aline.select("path").attr("d",xt.showline?"M"+X+","+(Y+rt)+"l"+ot/2+",-"+rt:"M0,0").call(v.stroke,xt.linecolor||"#000").style("stroke-width",(xt.linewidth||0)+"px"),N.layers.bline.select("path").attr("d",Ft.showline?"M"+X+","+(Y+rt)+"h"+ot:"M0,0").call(v.stroke,Ft.linecolor||"#000").style("stroke-width",(Ft.linewidth||0)+"px"),N.layers.cline.select("path").attr("d",Et.showline?"M"+(X+ot/2)+","+Y+"l"+ot/2+","+rt:"M0,0").call(v.stroke,Et.linecolor||"#000").style("stroke-width",(Et.linewidth||0)+"px"),N.graphDiv._context.staticPlot||N.initInteractions(),e.setClipUrl(N.layers.frontplot,N._hasClipOnAxisFalse?null:N.clipId,N.graphDiv)},P.drawAxes=function(C){var F=this,N=F.graphDiv,V=F.id.substr(7)+"title",K=F.layers,Q=F.aaxis,at=F.baxis,it=F.caxis;if(F.drawAx(Q),F.drawAx(at),F.drawAx(it),C){var q=Math.max(Q.showticklabels?Q.tickfont.size/2:0,(it.showticklabels?it.tickfont.size*.75:0)+(it.ticks==="outside"?it.ticklen*.87:0)),W=(at.showticklabels?at.tickfont.size:0)+(at.ticks==="outside"?at.ticklen:0)+3;K["a-title"]=s.draw(N,"a"+V,{propContainer:Q,propName:F.id+".aaxis.title",placeholder:g(N,"Click to enter Component A title"),attributes:{x:F.x0+F.w/2,y:F.y0-Q.title.font.size/3-q,"text-anchor":"middle"}}),K["b-title"]=s.draw(N,"b"+V,{propContainer:at,propName:F.id+".baxis.title",placeholder:g(N,"Click to enter Component B title"),attributes:{x:F.x0-W,y:F.y0+F.h+at.title.font.size*.83+W,"text-anchor":"middle"}}),K["c-title"]=s.draw(N,"c"+V,{propContainer:it,propName:F.id+".caxis.title",placeholder:g(N,"Click to enter Component C title"),attributes:{x:F.x0+F.w+W,y:F.y0+F.h+it.title.font.size*.83+W,"text-anchor":"middle"}})}},P.drawAx=function(C){var F=this,N=F.graphDiv,V=C._name,K=V.charAt(0),Q=C._id,at=F.layers[V],it=30,q=K+"tickLayout",W=d(C);F[q]!==W&&(at.selectAll("."+Q+"tick").remove(),F[q]=W),C.setScale();var Z=a.calcTicks(C),G=a.clipEnds(C,Z),et=a.makeTransTickFn(C),nt=a.getTickSigns(C)[2],X=S.deg2rad(it),Y=nt*(C.linewidth||1)/2,ot=nt*C.ticklen,rt=F.w,ht=F.h,pt=K==="b"?"M0,"+Y+"l"+Math.sin(X)*ot+","+Math.cos(X)*ot:"M"+Y+",0l"+Math.cos(X)*ot+","+-Math.sin(X)*ot,yt={a:"M0,0l"+ht+",-"+rt/2,b:"M0,0l-"+rt/2+",-"+ht,c:"M0,0l-"+ht+","+rt/2}[K];a.drawTicks(N,C,{vals:C.ticks==="inside"?G:Z,layer:at,path:pt,transFn:et,crisp:!1}),a.drawGrid(N,C,{vals:G,layer:F.layers[K+"grid"],path:yt,transFn:et,crisp:!1}),a.drawLabels(N,C,{vals:Z,layer:at,transFn:et,labelFns:a.makeLabelFns(C,0,it)})};function d(C){return C.ticks+String(C.ticklen)+String(C.showticklabels)}var L=_.MINZOOM/2+.87,w="m-0.87,.5h"+L+"v3h-"+(L+5.2)+"l"+(L/2+2.6)+",-"+(L*.87+4.5)+"l2.6,1.5l-"+L/2+","+L*.87+"Z",I="m0.87,.5h-"+L+"v3h"+(L+5.2)+"l-"+(L/2+2.6)+",-"+(L*.87+4.5)+"l-2.6,1.5l"+L/2+","+L*.87+"Z",z="m0,1l"+L/2+","+L*.87+"l2.6,-1.5l-"+(L/2+2.6)+",-"+(L*.87+4.5)+"l-"+(L/2+2.6)+","+(L*.87+4.5)+"l2.6,1.5l"+L/2+",-"+L*.87+"Z",B="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",O=!0;P.clearOutline=function(){k(this.dragOptions),T(this.dragOptions.gd)},P.initInteractions=function(){var C=this,F=C.layers.plotbg.select("path").node(),N=C.graphDiv,V=N._fullLayout._zoomlayer,K,Q;this.dragOptions={element:F,gd:N,plotinfo:{id:C.id,domain:N._fullLayout[C.id].domain,xaxis:C.xaxis,yaxis:C.yaxis},subplot:C.id,prepFn:function(Pt,Bt,kt){C.dragOptions.xaxes=[C.xaxis],C.dragOptions.yaxes=[C.yaxis],K=N._fullLayout._invScaleX,Q=N._fullLayout._invScaleY;var jt=C.dragOptions.dragmode=N._fullLayout.dragmode;p(jt)?C.dragOptions.minDrag=1:C.dragOptions.minDrag=void 0,jt==="zoom"?(C.dragOptions.moveFn=Ft,C.dragOptions.clickFn=rt,C.dragOptions.doneFn=Et,ht(Pt,Bt,kt)):jt==="pan"?(C.dragOptions.moveFn=gt,C.dragOptions.clickFn=rt,C.dragOptions.doneFn=wt,mt(),C.clearOutline(N)):(x(jt)||p(jt))&&u(Pt,Bt,kt,C.dragOptions,jt)}};var at,it,q,W,Z,G,et,nt,X,Y;function ot(Pt){var Bt={};return Bt[C.id+".aaxis.min"]=Pt.a,Bt[C.id+".baxis.min"]=Pt.b,Bt[C.id+".caxis.min"]=Pt.c,Bt}function rt(Pt,Bt){var kt=N._fullLayout.clickmode;R(N),Pt===2&&(N.emit("plotly_doubleclick",null),i.call("_guiRelayout",N,ot({a:0,b:0,c:0}))),kt.indexOf("select")>-1&&Pt===1&&c(Bt,N,[C.xaxis],[C.yaxis],C.id,C.dragOptions),kt.indexOf("event")>-1&&h.click(N,Bt,C.id)}function ht(Pt,Bt,kt){var jt=F.getBoundingClientRect();at=Bt-jt.left,it=kt-jt.top,N._fullLayout._calcInverseTransform(N);var Ht=N._fullLayout._invTransform,Vt=S.apply3DTransform(Ht)(at,it);at=Vt[0],it=Vt[1],q={a:C.aaxis.range[0],b:C.baxis.range[1],c:C.caxis.range[1]},Z=q,W=C.aaxis.range[1]-q.a,G=E(C.graphDiv._fullLayout[C.id].bgcolor).getLuminance(),et="M0,"+C.h+"L"+C.w/2+", 0L"+C.w+","+C.h+"Z",nt=!1,X=V.append("path").attr("class","zoombox").attr("transform",A(C.x0,C.y0)).style({fill:G>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",et),Y=V.append("path").attr("class","zoombox-corners").attr("transform",A(C.x0,C.y0)).style({fill:v.background,stroke:v.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),C.clearOutline(N)}function pt(Pt,Bt){return 1-Bt/C.h}function yt(Pt,Bt){return 1-(Pt+(C.h-Bt)/Math.sqrt(3))/C.w}function xt(Pt,Bt){return(Pt-(C.h-Bt)/Math.sqrt(3))/C.w}function Ft(Pt,Bt){var kt=at+Pt*K,jt=it+Bt*Q,Ht=Math.max(0,Math.min(1,pt(at,it),pt(kt,jt))),Vt=Math.max(0,Math.min(1,yt(at,it),yt(kt,jt))),ee=Math.max(0,Math.min(1,xt(at,it),xt(kt,jt))),te=(Ht/2+ee)*C.w,ae=(1-Ht/2-Vt)*C.w,le=(te+ae)/2,ce=ae-te,pe=(1-Ht)*C.h,we=pe-ce/l;ce<_.MINZOOM?(Z=q,X.attr("d",et),Y.attr("d","M0,0Z")):(Z={a:q.a+Ht*W,b:q.b+Vt*W,c:q.c+ee*W},X.attr("d",et+"M"+te+","+pe+"H"+ae+"L"+le+","+we+"L"+te+","+pe+"Z"),Y.attr("d","M"+at+","+it+B+"M"+te+","+pe+w+"M"+ae+","+pe+I+"M"+le+","+we+z)),nt||(X.transition().style("fill",G>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),Y.transition().style("opacity",1).duration(200),nt=!0),N.emit("plotly_relayouting",ot(Z))}function Et(){R(N),Z!==q&&(i.call("_guiRelayout",N,ot(Z)),O&&N.data&&N._context.showTips&&(S.notifier(g(N,"Double-click to zoom back out"),"long"),O=!1))}function mt(){q={a:C.aaxis.range[0],b:C.baxis.range[1],c:C.caxis.range[1]},Z=q}function gt(Pt,Bt){var kt=Pt/C.xaxis._m,jt=Bt/C.yaxis._m;Z={a:q.a-jt,b:q.b+(kt+jt)/2,c:q.c-(kt-jt)/2};var Ht=[Z.a,Z.b,Z.c].sort(S.sorterAsc),Vt={a:Ht.indexOf(Z.a),b:Ht.indexOf(Z.b),c:Ht.indexOf(Z.c)};Ht[0]<0&&(Ht[1]+Ht[0]/2<0?(Ht[2]+=Ht[0]+Ht[1],Ht[0]=Ht[1]=0):(Ht[2]+=Ht[0]/2,Ht[1]+=Ht[0]/2,Ht[0]=0),Z={a:Ht[Vt.a],b:Ht[Vt.b],c:Ht[Vt.c]},Bt=(q.a-Z.a)*C.yaxis._m,Pt=(q.c-Z.c-q.b+Z.b)*C.xaxis._m);var ee=A(C.x0+Pt,C.y0+Bt);C.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ee);var te=A(-Pt,-Bt);C.clipDefRelative.select("path").attr("transform",te),C.aaxis.range=[Z.a,C.sum-Z.b-Z.c],C.baxis.range=[C.sum-Z.a-Z.c,Z.b],C.caxis.range=[C.sum-Z.a-Z.b,Z.c],C.drawAxes(!1),C._hasClipOnAxisFalse&&C.plotContainer.select(".scatterlayer").selectAll(".trace").call(e.hideOutsideRangePoints,C),N.emit("plotly_relayouting",ot(Z))}function wt(){i.call("_guiRelayout",N,ot(Z))}F.onmousemove=function(Pt){h.hover(N,Pt,C.id),N._fullLayout._lasthover=F,N._fullLayout._hoversubplot=C.id},F.onmouseout=function(Pt){N._dragging||o.unhover(N,Pt)},o.init(this.dragOptions)};function R(C){M.select(C).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},73972:function($,U,t){var M=t(47769),E=t(64213),i=t(75138),S=t(41965),A=t(24401).addStyleRule,g=t(1426),v=t(9012),e=t(10820),r=g.extendFlat,f=g.extendDeepAll;U.modules={},U.allCategories={},U.allTypes=[],U.subplotsRegistry={},U.transformsRegistry={},U.componentsRegistry={},U.layoutArrayContainers=[],U.layoutArrayRegexes=[],U.traceLayoutAttributes={},U.localeRegistry={},U.apiMethodRegistry={},U.collectableSubplotTypes=null,U.register=function(T){if(U.collectableSubplotTypes=null,T)T&&!Array.isArray(T)&&(T=[T]);else throw new Error("No argument passed to Plotly.register.");for(var k=0;k<T.length;k++){var _=T[k];if(!_)throw new Error("Invalid module was attempted to be registered!");switch(_.moduleType){case"trace":n(_);break;case"transform":h(_);break;case"component":o(_);break;case"locale":y(_);break;case"apiMethod":var b=_.name;U.apiMethodRegistry[b]=_.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},U.getModule=function(T){var k=U.modules[c(T)];return k?k._module:!1},U.traceIs=function(T,k){if(T=c(T),T==="various")return!1;var _=U.modules[T];return _||(T&&M.log("Unrecognized trace type "+T+"."),_=U.modules[v.type.dflt]),!!_.categories[k]},U.getTransformIndices=function(T,k){for(var _=[],b=T.transforms||[],P=0;P<b.length;P++)b[P].type===k&&_.push(P);return _},U.hasTransform=function(T,k){for(var _=T.transforms||[],b=0;b<_.length;b++)if(_[b].type===k)return!0;return!1},U.getComponentMethod=function(T,k){var _=U.componentsRegistry[T];return _&&_[k]||E},U.call=function(){var T=arguments[0],k=[].slice.call(arguments,1);return U.apiMethodRegistry[T].apply(null,k)};function n(T){var k=T.name,_=T.categories,b=T.meta;if(U.modules[k]){M.log("Type "+k+" already registered");return}U.subplotsRegistry[T.basePlotModule.name]||a(T.basePlotModule);for(var P={},l=0;l<_.length;l++)P[_[l]]=!0,U.allCategories[_[l]]=!0;U.modules[k]={_module:T,categories:P},b&&Object.keys(b).length&&(U.modules[k].meta=b),U.allTypes.push(k);for(var d in U.componentsRegistry)x(d,k);T.layoutAttributes&&r(U.traceLayoutAttributes,T.layoutAttributes);var L=T.basePlotModule,w=L.name;if(w==="mapbox"){var I=L.constants.styleRules;for(var z in I)A(".js-plotly-plot .plotly .mapboxgl-"+z,I[z])}(w==="geo"||w==="mapbox")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function a(T){var k=T.name;if(U.subplotsRegistry[k]){M.log("Plot type "+k+" already registered.");return}p(T),U.subplotsRegistry[k]=T;for(var _ in U.componentsRegistry)u(_,T.name)}function o(T){if(typeof T.name!="string")throw new Error("Component module *name* must be a string.");var k=T.name;U.componentsRegistry[k]=T,T.layoutAttributes&&(T.layoutAttributes._isLinkedToArray&&i(U.layoutArrayContainers,k),p(T));for(var _ in U.modules)x(k,_);for(var b in U.subplotsRegistry)u(k,b);for(var P in U.transformsRegistry)s(k,P);T.schema&&T.schema.layout&&f(e,T.schema.layout)}function h(T){if(typeof T.name!="string")throw new Error("Transform module *name* must be a string.");var k="Transform module "+T.name,_=typeof T.transform=="function",b=typeof T.calcTransform=="function";if(!_&&!b)throw new Error(k+" is missing a *transform* or *calcTransform* method.");_&&b&&M.log([k+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),S(T.attributes)||M.log(k+" registered without an *attributes* object."),typeof T.supplyDefaults!="function"&&M.log(k+" registered without a *supplyDefaults* method."),U.transformsRegistry[T.name]=T;for(var P in U.componentsRegistry)s(P,T.name)}function y(T){var k=T.name,_=k.split("-")[0],b=T.dictionary,P=T.format,l=b&&Object.keys(b).length,d=P&&Object.keys(P).length,L=U.localeRegistry,w=L[k];if(w||(L[k]=w={}),_!==k){var I=L[_];I||(L[_]=I={}),l&&I.dictionary===w.dictionary&&(I.dictionary=b),d&&I.format===w.format&&(I.format=P)}l&&(w.dictionary=b),d&&(w.format=P)}function p(T){if(T.layoutAttributes){var k=T.layoutAttributes._arrayAttrRegexps;if(k)for(var _=0;_<k.length;_++)i(U.layoutArrayRegexes,k[_])}}function x(T,k){var _=U.componentsRegistry[T].schema;if(!(!_||!_.traces)){var b=_.traces[k];b&&f(U.modules[k]._module.attributes,b)}}function s(T,k){var _=U.componentsRegistry[T].schema;if(!(!_||!_.transforms)){var b=_.transforms[k];b&&f(U.transformsRegistry[k].attributes,b)}}function u(T,k){var _=U.componentsRegistry[T].schema;if(!(!_||!_.subplots)){var b=U.subplotsRegistry[k],P=b.layoutAttributes,l=b.attr==="subplot"?b.name:b.attr;Array.isArray(l)&&(l=l[0]);var d=_.subplots[l];P&&d&&f(P,d)}}function c(T){return typeof T=="object"&&(T=T.type),T}},61914:function($,U,t){var M=t(73972),E=t(71828),i=E.extendFlat,S=E.extendDeep;function A(v){var e;switch(v){case"themes__thumb":e={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":e={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:e={}}return e}function g(v){var e=["xaxis","yaxis","zaxis"];return e.indexOf(v.slice(0,5))>-1}$.exports=function(v,e){var r,f=v.data,n=v.layout,a=S([],f),o=S({},n,A(e.tileClass)),h=v._context||{};if(e.width&&(o.width=e.width),e.height&&(o.height=e.height),e.tileClass==="thumbnail"||e.tileClass==="themes__thumb"){o.annotations=[];var y=Object.keys(o);for(r=0;r<y.length;r++)g(y[r])&&(o[y[r]].title={text:""});for(r=0;r<a.length;r++){var p=a[r];p.showscale=!1,p.marker&&(p.marker.showscale=!1),M.traceIs(p,"pie-like")&&(p.textposition="none")}}if(Array.isArray(e.annotations))for(r=0;r<e.annotations.length;r++)o.annotations.push(e.annotations[r]);var x=Object.keys(o).filter(function(k){return k.match(/^scene\d*$/)});if(x.length){var s={};for(e.tileClass==="thumbnail"&&(s={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),r=0;r<x.length;r++){var u=o[x[r]];u.xaxis||(u.xaxis={}),u.yaxis||(u.yaxis={}),u.zaxis||(u.zaxis={}),i(u.xaxis,s),i(u.yaxis,s),i(u.zaxis,s),u._scene=null}}var c=document.createElement("div");e.tileClass&&(c.className=e.tileClass);var T={gd:c,td:c,layout:o,data:a,config:{staticPlot:e.staticPlot===void 0?!0:e.staticPlot,plotGlPixelRatio:e.plotGlPixelRatio===void 0?2:e.plotGlPixelRatio,displaylogo:e.displaylogo||!1,showLink:e.showLink||!1,showTips:e.showTips||!1,mapboxAccessToken:h.mapboxAccessToken}};return e.setBackground!=="transparent"&&(T.config.setBackground=e.setBackground||"opaque"),T.gd.defaultLayout=A(e.tileClass),T}},7239:function($,U,t){var M=t(71828),E=t(403),i=t(22435),S=t(25095);function A(g,v){var e;return M.isPlainObject(g)||(e=M.getGraphDiv(g)),v=v||{},v.format=v.format||"png",v.width=v.width||null,v.height=v.height||null,v.imageDataOnly=!0,new Promise(function(r,f){e&&e._snapshotInProgress&&f(new Error("Snapshotting already in progress.")),M.isIE()&&v.format!=="svg"&&f(new Error(S.MSG_IE_BAD_FORMAT)),e&&(e._snapshotInProgress=!0);var n=E(g,v),a=v.filename||g.fn||"newplot";a+="."+v.format.replace("-","."),n.then(function(o){return e&&(e._snapshotInProgress=!1),i(o,a,v.format)}).then(function(o){r(o)}).catch(function(o){e&&(e._snapshotInProgress=!1),f(o)})})}$.exports=A},22435:function($,U,t){var M=t(71828),E=t(25095);function i(S,A,g){var v=document.createElement("a"),e="download"in v,r=new Promise(function(f,n){var a,o;if(M.isIE())return a=E.createBlob(S,"svg"),window.navigator.msSaveBlob(a,A),a=null,f(A);if(e)return a=E.createBlob(S,g),o=E.createObjectURL(a),v.href=o,v.download=A,document.body.appendChild(v),v.click(),document.body.removeChild(v),E.revokeObjectURL(o),a=null,f(A);if(M.isSafari()){var h=g==="svg"?",":";base64,";return E.octetStream(h+encodeURIComponent(S)),f(A)}n(new Error("download error"))});return r}$.exports=i},25095:function($,U,t){var M=t(73972);U.getDelay=function(S){return S._has&&(S._has("gl3d")||S._has("gl2d")||S._has("mapbox"))?500:0},U.getRedrawFunc=function(S){return function(){M.getComponentMethod("colorbar","draw")(S)}},U.encodeSVG=function(S){return"data:image/svg+xml,"+encodeURIComponent(S)},U.encodeJSON=function(S){return"data:application/json,"+encodeURIComponent(S)};var E=window.URL||window.webkitURL;U.createObjectURL=function(S){return E.createObjectURL(S)},U.revokeObjectURL=function(S){return E.revokeObjectURL(S)},U.createBlob=function(S,A){if(A==="svg")return new window.Blob([S],{type:"image/svg+xml;charset=utf-8"});if(A==="full-json")return new window.Blob([S],{type:"application/json;charset=utf-8"});var g=i(window.atob(S));return new window.Blob([g],{type:"image/"+A})},U.octetStream=function(S){document.location.href="data:application/octet-stream"+S};function i(S){for(var A=S.length,g=new ArrayBuffer(A),v=new Uint8Array(g),e=0;e<A;e++)v[e]=S.charCodeAt(e);return g}U.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,U.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},44511:function($,U,t){var M=t(25095),E={getDelay:M.getDelay,getRedrawFunc:M.getRedrawFunc,clone:t(61914),toSVG:t(5900),svgToImg:t(70942),toImage:t(56395),downloadImage:t(7239)};$.exports=E},70942:function($,U,t){var M=t(71828),E=t(15398).EventEmitter,i=t(25095);function S(A){var g=A.emitter||new E,v=new Promise(function(e,r){var f=window.Image,n=A.svg,a=A.format||"png";if(M.isIE()&&a!=="svg"){var o=new Error(i.MSG_IE_BAD_FORMAT);return r(o),A.promise?v:g.emit("error",o)}var h=A.canvas,y=A.scale||1,p=A.width||300,x=A.height||150,s=y*p,u=y*x,c=h.getContext("2d",{willReadFrequently:!0}),T=new f,k,_;a==="svg"||M.isSafari()?_=i.encodeSVG(n):(k=i.createBlob(n,"svg"),_=i.createObjectURL(k)),h.width=s,h.height=u,T.onload=function(){var b;switch(k=null,i.revokeObjectURL(_),a!=="svg"&&c.drawImage(T,0,0,s,u),a){case"jpeg":b=h.toDataURL("image/jpeg");break;case"png":b=h.toDataURL("image/png");break;case"webp":b=h.toDataURL("image/webp");break;case"svg":b=_;break;default:var P="Image format is not jpeg, png, svg or webp.";if(r(new Error(P)),!A.promise)return g.emit("error",P)}e(b),A.promise||g.emit("success",b)},T.onerror=function(b){if(k=null,i.revokeObjectURL(_),r(b),!A.promise)return g.emit("error",b)},T.src=_});return A.promise?v:g}$.exports=S},56395:function($,U,t){var M=t(15398).EventEmitter,E=t(73972),i=t(71828),S=t(25095),A=t(61914),g=t(5900),v=t(70942);function e(r,f){var n=new M,a=A(r,{format:"png"}),o=a.gd;o.style.position="absolute",o.style.left="-5000px",document.body.appendChild(o);function h(){var p=S.getDelay(o._fullLayout);setTimeout(function(){var x=g(o),s=document.createElement("canvas");s.id=i.randstr(),n=v({format:f.format,width:o._fullLayout.width,height:o._fullLayout.height,canvas:s,emitter:n,svg:x}),n.clean=function(){o&&document.body.removeChild(o)}},p)}var y=S.getRedrawFunc(o);return E.call("_doPlot",o,a.data,a.layout,a.config).then(y).then(h).catch(function(p){n.emit("error",p)}),n}$.exports=e},5900:function($,U,t){var M=t(39898),E=t(71828),i=t(91424),S=t(7901),A=t(77922),g=/"/g,v="TOBESTRIPPED",e=new RegExp('("'+v+")|("+v+'")',"g");function r(n){var a=M.select("body").append("div").style({display:"none"}).html(""),o=n.replace(/(&[^;]*;)/gi,function(h){return h==="&lt;"?"&#60;":h==="&rt;"?"&#62;":h.indexOf("<")!==-1||h.indexOf(">")!==-1?"":a.html(h).text()});return a.remove(),o}function f(n){return n.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}$.exports=function(n,a,o){var h=n._fullLayout,y=h._paper,p=h._toppaper,x=h.width,s=h.height,u;y.insert("rect",":first-child").call(i.setRect,0,0,x,s).call(S.fill,h.paper_bgcolor);var c=h._basePlotModules||[];for(u=0;u<c.length;u++){var T=c[u];T.toSVG&&T.toSVG(n)}if(p){var k=p.node().childNodes,_=Array.prototype.slice.call(k);for(u=0;u<_.length;u++){var b=_[u];b.childNodes.length&&y.node().appendChild(b)}}h._draggers&&h._draggers.remove(),y.node().style.background="",y.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var l=M.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){l.remove();return}else l.style({visibility:null,display:null});var d=this.style.fontFamily;d&&d.indexOf('"')!==-1&&l.style("font-family",d.replace(g,v))}),y.selectAll(".gradient_filled,.pattern_filled").each(function(){var l=M.select(this),d=this.style.fill;d&&d.indexOf("url(")!==-1&&l.style("fill",d.replace(g,v));var L=this.style.stroke;L&&L.indexOf("url(")!==-1&&l.style("stroke",L.replace(g,v))}),(a==="pdf"||a==="eps")&&y.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),y.node().setAttributeNS(A.xmlns,"xmlns",A.svg),y.node().setAttributeNS(A.xmlns,"xmlns:xlink",A.xlink),a==="svg"&&o&&(y.attr("width",o*x),y.attr("height",o*s),y.attr("viewBox","0 0 "+x+" "+s));var P=new window.XMLSerializer().serializeToString(y.node());return P=r(P),P=f(P),P=P.replace(e,"'"),E.isIE()&&(P=P.replace(/"/gi,"'"),P=P.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),P=P.replace(/(\\')/gi,'"')),P}},75341:function($,U,t){var M=t(71828);$.exports=function(E,i){for(var S=0;S<E.length;S++)E[S].i=S;M.mergeArray(i.text,E,"tx"),M.mergeArray(i.hovertext,E,"htx");var A=i.marker;if(A){M.mergeArray(A.opacity,E,"mo",!0),M.mergeArray(A.color,E,"mc");var g=A.line;g&&(M.mergeArray(g.color,E,"mlc"),M.mergeArrayCastPositive(g.width,E,"mlw"))}}},1486:function($,U,t){var M=t(82196),E=t(12663).axisHoverFormat,i=t(5386).fF,S=t(5386).si,A=t(50693),g=t(41940),v=t(97313),e=t(79952).u,r=t(1426).extendFlat,f=g({editType:"calc",arrayOk:!0,colorEditType:"style"}),n=M.marker,a=n.line,o=r({},a.width,{dflt:0}),h=r({width:o,editType:"calc"},A("marker.line")),y=r({line:h,editType:"calc"},A("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:e});$.exports={x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:E("x"),yhoverformat:E("y"),text:M.text,texttemplate:S({editType:"plot"},{keys:v.eventDataKeys}),hovertext:M.hovertext,hovertemplate:i({},{keys:v.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:r({},f,{}),insidetextfont:r({},f,{}),outsidetextfont:r({},f,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:r({},M.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:y,offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:{marker:{opacity:M.selected.marker.opacity,color:M.selected.marker.color,editType:"style"},textfont:M.selected.textfont,editType:"style"},unselected:{marker:{opacity:M.unselected.marker.opacity,color:M.unselected.marker.color,editType:"style"},textfont:M.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},92290:function($,U,t){var M=t(89298),E=t(42973),i=t(52075).hasColorscale,S=t(78803),A=t(75341),g=t(66279);$.exports=function(v,e){var r=M.getFromId(v,e.xaxis||"x"),f=M.getFromId(v,e.yaxis||"y"),n,a,o,h,y,p,x={msUTC:!!(e.base||e.base===0)};e.orientation==="h"?(n=r.makeCalcdata(e,"x",x),o=f.makeCalcdata(e,"y"),h=E(e,f,"y",o),y=!!e.yperiodalignment,p="y"):(n=f.makeCalcdata(e,"y",x),o=r.makeCalcdata(e,"x"),h=E(e,r,"x",o),y=!!e.xperiodalignment,p="x"),a=h.vals;for(var s=Math.min(a.length,n.length),u=new Array(s),c=0;c<s;c++)u[c]={p:a[c],s:n[c]},y&&(u[c].orig_p=o[c],u[c][p+"End"]=h.ends[c],u[c][p+"Start"]=h.starts[c]),e.ids&&(u[c].id=String(e.ids[c]));return i(e,"marker")&&S(v,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),i(e,"marker.line")&&S(v,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}),A(u,e),g(u,e),u}},97313:function($){$.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},11661:function($,U,t){var M=t(92770),E=t(71828).isArrayOrTypedArray,i=t(50606).BADNUM,S=t(73972),A=t(89298),g=t(99082).getAxisGroup,v=t(61546);function e(l,d){for(var L=d.xaxis,w=d.yaxis,I=l._fullLayout,z=l._fullData,B=l.calcdata,O=[],R=[],C=0;C<z.length;C++){var F=z[C];if(F.visible===!0&&S.traceIs(F,"bar")&&F.xaxis===L._id&&F.yaxis===w._id&&(F.orientation==="h"?O.push(B[C]):R.push(B[C]),F._computePh))for(var N=l.calcdata[C],V=0;V<N.length;V++)typeof N[V].ph0=="function"&&(N[V].ph0=N[V].ph0()),typeof N[V].ph1=="function"&&(N[V].ph1=N[V].ph1())}var K={xCat:L.type==="category"||L.type==="multicategory",yCat:w.type==="category"||w.type==="multicategory",mode:I.barmode,norm:I.barnorm,gap:I.bargap,groupgap:I.bargroupgap};r(l,L,w,R,K),r(l,w,L,O,K)}function r(l,d,L,w,I){if(w.length){var z,B,O,R,C;switch(f(L,w),I.mode){case"overlay":n(d,L,w,I);break;case"group":for(z=[],B=[],O=0;O<w.length;O++)R=w[O],C=R[0].trace,C.offset===void 0?B.push(R):z.push(R);B.length&&a(l,d,L,B,I),z.length&&n(d,L,z,I);break;case"stack":case"relative":for(z=[],B=[],O=0;O<w.length;O++)R=w[O],C=R[0].trace,C.base===void 0?B.push(R):z.push(R);B.length&&o(l,d,L,B,I),z.length&&n(d,L,z,I);break}b(w,d)}}function f(l,d){var L,w;for(L=0;L<d.length;L++){var I=d[L],z=I[0].trace,B=z.type==="funnel"?z._base:z.base,O,R=z.orientation==="h"?z.xcalendar:z.ycalendar,C=l.type==="category"||l.type==="multicategory"?function(){return null}:l.d2c;if(E(B)){for(w=0;w<Math.min(B.length,I.length);w++)O=C(B[w],0,R),M(O)?(I[w].b=+O,I[w].hasB=1):I[w].b=0;for(;w<I.length;w++)I[w].b=0}else{O=C(B,0,R);var F=M(O);for(O=F?O:0,w=0;w<I.length;w++)I[w].b=O,F&&(I[w].hasB=1)}}}function n(l,d,L,w){for(var I=0;I<L.length;I++){var z=L[I],B=new v([z],{posAxis:l,sepNegVal:!1,overlapNoMerge:!w.norm});h(l,B,w),w.norm?(T(B),_(d,B,w)):u(d,B)}}function a(l,d,L,w,I){var z=new v(w,{posAxis:d,sepNegVal:!1,overlapNoMerge:!I.norm});y(l,d,z,I),k(z,d),I.norm?(T(z),_(L,z,I)):u(L,z)}function o(l,d,L,w,I){var z=new v(w,{posAxis:d,sepNegVal:I.mode==="relative",overlapNoMerge:!(I.norm||I.mode==="stack"||I.mode==="relative")});h(d,z,I),c(L,z,I);for(var B=0;B<w.length;B++)for(var O=w[B],R=0;R<O.length;R++){var C=O[R];if(C.s!==i){var F=C.b+C.s===z.get(C.p,C.s);F&&(C._outmost=!0)}}I.norm&&_(L,z,I)}function h(l,d,L){for(var w=d.minDiff,I=d.traces,z=w*(1-L.gap),B=z,O=B*(1-(L.groupgap||0)),R=-O/2,C=0;C<I.length;C++){var F=I[C],N=F[0].t;N.barwidth=O,N.poffset=R,N.bargroupwidth=z,N.bardelta=w}d.binWidth=I[0][0].t.barwidth/100,p(d),x(l,d),s(l,d)}function y(l,d,L,w){for(var I=l._fullLayout,z=L.positions,B=L.distinctPositions,O=L.minDiff,R=L.traces,C=R.length,F=z.length!==B.length,N=O*(1-w.gap),V=g(I,d._id)+R[0][0].trace.orientation,K=I._alignmentOpts[V]||{},Q=0;Q<C;Q++){var at=R[Q],it=at[0].trace,q=K[it.alignmentgroup]||{},W=Object.keys(q.offsetGroups||{}).length,Z;W?Z=N/W:Z=F?N/C:N;var G=Z*(1-(w.groupgap||0)),et;W?et=((2*it._offsetIndex+1-W)*Z-G)/2:et=F?((2*Q+1-C)*Z-G)/2:-G/2;var nt=at[0].t;nt.barwidth=G,nt.poffset=et,nt.bargroupwidth=N,nt.bardelta=O}L.binWidth=R[0][0].t.barwidth/100,p(L),x(d,L),s(d,L,F)}function p(l){var d=l.traces,L,w;for(L=0;L<d.length;L++){var I=d[L],z=I[0],B=z.trace,O=z.t,R=B._offset||B.offset,C=O.poffset,F;if(E(R)){for(F=Array.prototype.slice.call(R,0,I.length),w=0;w<F.length;w++)M(F[w])||(F[w]=C);for(w=F.length;w<I.length;w++)F.push(C);O.poffset=F}else R!==void 0&&(O.poffset=R);var N=B._width||B.width,V=O.barwidth;if(E(N)){var K=Array.prototype.slice.call(N,0,I.length);for(w=0;w<K.length;w++)M(K[w])||(K[w]=V);for(w=K.length;w<I.length;w++)K.push(V);if(O.barwidth=K,R===void 0){for(F=[],w=0;w<I.length;w++)F.push(C+(V-K[w])/2);O.poffset=F}}else N!==void 0&&(O.barwidth=N,R===void 0&&(O.poffset=C+(V-N)/2))}}function x(l,d){for(var L=d.traces,w=P(l),I=0;I<L.length;I++)for(var z=L[I],B=z[0].t,O=B.poffset,R=Array.isArray(O),C=B.barwidth,F=Array.isArray(C),N=0;N<z.length;N++){var V=z[N],K=V.w=F?C[N]:C;V.p===void 0&&(V.p=V[w],V["orig_"+w]=V[w]);var Q=(R?O[N]:O)+K/2;V[w]=V.p+Q}}function s(l,d,L){var w=d.traces,I=d.minDiff,z=I/2;A.minDtick(l,d.minDiff,d.distinctPositions[0],L);for(var B=0;B<w.length;B++){var O=w[B],R=O[0],C=R.trace,F=[],N,V,K,Q;for(Q=0;Q<O.length;Q++)N=O[Q],V=N.p-z,K=N.p+z,F.push(V,K);if(C.width||C.offset){var at=R.t,it=at.poffset,q=at.barwidth,W=Array.isArray(it),Z=Array.isArray(q);for(Q=0;Q<O.length;Q++){N=O[Q];var G=W?it[Q]:it,et=Z?q[Q]:q;V=N.p+G,K=V+et,F.push(V,K)}}C._extremes[l._id]=A.findExtremes(l,F,{padded:!1})}}function u(l,d){for(var L=d.traces,w=P(l),I=0;I<L.length;I++){for(var z=L[I],B=z[0].trace,O=B.type==="scatter",R=B.orientation==="v",C=[],F=!1,N=0;N<z.length;N++){var V=z[N],K=O?0:V.b,Q=O?R?V.y:V.x:K+V.s;V[w]=Q,C.push(Q),V.hasB&&C.push(K),(!V.hasB||!V.b)&&(F=!0)}B._extremes[l._id]=A.findExtremes(l,C,{tozero:F,padded:!0})}}function c(l,d,L){var w=P(l),I=d.traces,z,B,O,R,C,F;for(R=0;R<I.length;R++)if(z=I[R],B=z[0].trace,B.type==="funnel")for(C=0;C<z.length;C++)F=z[C],F.s!==i&&d.put(F.p,-.5*F.s);for(R=0;R<I.length;R++){z=I[R],B=z[0].trace,O=B.type==="funnel";var N=[];for(C=0;C<z.length;C++)if(F=z[C],F.s!==i){var V;O?V=F.s:V=F.s+F.b;var K=d.put(F.p,V),Q=K+V;F.b=K,F[w]=Q,L.norm||(N.push(Q),F.hasB&&N.push(K))}L.norm||(B._extremes[l._id]=A.findExtremes(l,N,{tozero:!0,padded:!0}))}}function T(l){for(var d=l.traces,L=0;L<d.length;L++)for(var w=d[L],I=0;I<w.length;I++){var z=w[I];z.s!==i&&l.put(z.p,z.b+z.s)}}function k(l,d){for(var L=l.traces,w=0;w<L.length;w++){var I=L[w],z=I[0].trace;if(z.base===void 0)for(var B=new v([I],{posAxis:d,sepNegVal:!0,overlapNoMerge:!0}),O=0;O<I.length;O++){var R=I[O];if(R.p!==i){var C=B.put(R.p,R.b+R.s);C&&(R.b=C)}}}}function _(l,d,L){var w=d.traces,I=P(l),z=L.norm==="fraction"?1:100,B=z/1e9,O=l.l2c(l.c2l(0)),R=L.mode==="stack"?z:O;function C(et){return M(l.c2l(et))&&(et<O-B||et>R+B||!M(O))}for(var F=0;F<w.length;F++){for(var N=w[F],V=N[0].trace,K=[],Q=!1,at=!1,it=0;it<N.length;it++){var q=N[it];if(q.s!==i){var W=Math.abs(z/d.get(q.p,q.s));q.b*=W,q.s*=W;var Z=q.b,G=Z+q.s;q[I]=G,K.push(G),at=at||C(G),q.hasB&&(K.push(Z),at=at||C(Z)),(!q.hasB||!q.b)&&(Q=!0)}}V._extremes[l._id]=A.findExtremes(l,K,{tozero:Q,padded:at})}}function b(l,d){var L=P(d),w={},I,z,B,O=1/0,R=-1/0;for(I=0;I<l.length;I++)for(B=l[I],z=0;z<B.length;z++){var C=B[z].p;M(C)&&(O=Math.min(O,C),R=Math.max(R,C))}var F=1e4/(R-O),N=w.round=function(W){return String(Math.round(F*(W-O)))};for(I=0;I<l.length;I++){B=l[I],B[0].t.extents=w;var V=B[0].t.poffset,K=Array.isArray(V);for(z=0;z<B.length;z++){var Q=B[z],at=Q[L]-Q.w/2;if(M(at)){var it=Q[L]+Q.w/2,q=N(Q.p);w[q]?w[q]=[Math.min(at,w[q][0]),Math.max(it,w[q][1])]:w[q]=[at,it]}Q.p0=Q.p+(K?V[z]:V),Q.p1=Q.p0+Q.w,Q.s0=Q.b,Q.s1=Q.s0+Q.s}}}function P(l){return l._id.charAt(0)}$.exports={crossTraceCalc:e,setGroupPositions:r}},90769:function($,U,t){var M=t(71828),E=t(7901),i=t(73972),S=t(67513),A=t(73927),g=t(98340),v=t(26125),e=t(1486),r=M.coerceFont;function f(o,h,y,p){function x(k,_){return M.coerce(o,h,e,k,_)}var s=S(o,h,p,x);if(!s){h.visible=!1;return}A(o,h,p,x),x("xhoverformat"),x("yhoverformat"),x("orientation",h.x&&!h.y?"h":"v"),x("base"),x("offset"),x("width"),x("text"),x("hovertext"),x("hovertemplate");var u=x("textposition");a(o,h,p,x,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),g(o,h,x,y,p);var c=(h.marker.line||{}).color,T=i.getComponentMethod("errorbars","supplyDefaults");T(o,h,c||E.defaultLine,{axis:"y"}),T(o,h,c||E.defaultLine,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(h,x)}function n(o,h){var y,p;function x(u){return M.coerce(p._input,p,e,u)}if(h.barmode==="group")for(var s=0;s<o.length;s++)p=o[s],p.type==="bar"&&(y=p._input,v(y,p,h,x))}function a(o,h,y,p,x,s){s=s||{};var u=s.moduleHasSelected!==!1,c=s.moduleHasUnselected!==!1,T=s.moduleHasConstrain!==!1,k=s.moduleHasCliponaxis!==!1,_=s.moduleHasTextangle!==!1,b=s.moduleHasInsideanchor!==!1,P=!!s.hasPathbar,l=Array.isArray(x)||x==="auto",d=l||x==="inside",L=l||x==="outside";if(d||L){var w=r(p,"textfont",y.font),I=M.extendFlat({},w),z=o.textfont&&o.textfont.color,B=!z;if(B&&delete I.color,r(p,"insidetextfont",I),P){var O=M.extendFlat({},w);B&&delete O.color,r(p,"pathbar.textfont",O)}L&&r(p,"outsidetextfont",w),u&&p("selected.textfont.color"),c&&p("unselected.textfont.color"),T&&p("constraintext"),k&&p("cliponaxis"),_&&p("textangle"),p("texttemplate")}d&&b&&p("insidetextanchor")}$.exports={supplyDefaults:f,crossTraceDefaults:n,handleText:a}},58065:function($){$.exports=function(U,t,M){return U.x="xVal"in t?t.xVal:t.x,U.y="yVal"in t?t.yVal:t.y,t.xa&&(U.xaxis=t.xa),t.ya&&(U.yaxis=t.ya),M.orientation==="h"?(U.label=U.y,U.value=U.x):(U.label=U.x,U.value=U.y),U}},69383:function($,U,t){var M=t(92770),E=t(84267),i=t(71828).isArrayOrTypedArray;U.coerceString=function(S,A,g){if(typeof A=="string"){if(A||!S.noBlank)return A}else if((typeof A=="number"||A===!0)&&!S.strict)return String(A);return g!==void 0?g:S.dflt},U.coerceNumber=function(S,A,g){if(M(A)){A=+A;var v=S.min,e=S.max,r=v!==void 0&&A<v||e!==void 0&&A>e;if(!r)return A}return g!==void 0?g:S.dflt},U.coerceColor=function(S,A,g){return E(A).isValid()?A:g!==void 0?g:S.dflt},U.coerceEnumerated=function(S,A,g){return S.coerceNumber&&(A=+A),S.values.indexOf(A)!==-1?A:g!==void 0?g:S.dflt},U.getValue=function(S,A){var g;return Array.isArray(S)?A<S.length&&(g=S[A]):g=S,g},U.getLineWidth=function(S,A){var g=0<A.mlw?A.mlw:i(S.marker.line.width)?0:S.marker.line.width;return g}},95423:function($,U,t){var M=t(30211),E=t(73972),i=t(7901),S=t(71828).fillText,A=t(69383).getLineWidth,g=t(89298).hoverLabelText,v=t(50606).BADNUM;function e(n,a,o,h,y){var p=r(n,a,o,h,y);if(p){var x=p.cd,s=x[0].trace,u=x[p.index];return p.color=f(s,u),E.getComponentMethod("errorbars","hoverInfo")(u,s,p),[p]}}function r(n,a,o,h,y){var p=n.cd,x=p[0].trace,s=p[0].t,u=h==="closest",c=x.type==="waterfall",T=n.maxHoverDistance,k=n.maxSpikeDistance,_,b,P,l,d,L,w;x.orientation==="h"?(_=o,b=a,P="y",l="x",d=it,L=K):(_=a,b=o,P="x",l="y",L=it,d=K);var I=x[P+"period"],z=u||I;function B(ht){return R(ht,-1)}function O(ht){return R(ht,1)}function R(ht,pt){var yt=ht.w;return ht[P]+pt*yt/2}function C(ht){return ht[P+"End"]-ht[P+"Start"]}var F=u?B:I?function(ht){return ht.p-C(ht)/2}:function(ht){return Math.min(B(ht),ht.p-s.bardelta/2)},N=u?O:I?function(ht){return ht.p+C(ht)/2}:function(ht){return Math.max(O(ht),ht.p+s.bardelta/2)};function V(ht,pt,yt){return y.finiteRange&&(yt=0),M.inbox(ht-_,pt-_,yt+Math.min(1,Math.abs(pt-ht)/w)-1)}function K(ht){return V(F(ht),N(ht),T)}function Q(ht){return V(B(ht),O(ht),k)}function at(ht){var pt=ht[l];if(c){var yt=Math.abs(ht.rawS)||0;b>0?pt+=yt:b<0&&(pt-=yt)}return pt}function it(ht){var pt=b,yt=ht.b,xt=at(ht);return M.inbox(yt-pt,xt-pt,T+(xt-pt)/(xt-yt)-1)}function q(ht){var pt=b,yt=ht.b,xt=at(ht);return M.inbox(yt-pt,xt-pt,k+(xt-pt)/(xt-yt)-1)}var W=n[P+"a"],Z=n[l+"a"];w=Math.abs(W.r2c(W.range[1])-W.r2c(W.range[0]));function G(ht){return(d(ht)+L(ht))/2}var et=M.getDistanceFunction(h,d,L,G);if(M.getClosest(p,et,n),n.index!==!1&&p[n.index].p!==v){z||(F=function(ht){return Math.min(B(ht),ht.p-s.bargroupwidth/2)},N=function(ht){return Math.max(O(ht),ht.p+s.bargroupwidth/2)});var nt=n.index,X=p[nt],Y=x.base?X.b+X.s:X.s;n[l+"0"]=n[l+"1"]=Z.c2p(X[l],!0),n[l+"LabelVal"]=Y;var ot=s.extents[s.extents.round(X.p)];n[P+"0"]=W.c2p(u?F(X):ot[0],!0),n[P+"1"]=W.c2p(u?N(X):ot[1],!0);var rt=X.orig_p!==void 0;return n[P+"LabelVal"]=rt?X.orig_p:X.p,n.labelLabel=g(W,n[P+"LabelVal"],x[P+"hoverformat"]),n.valueLabel=g(Z,n[l+"LabelVal"],x[l+"hoverformat"]),n.baseLabel=g(Z,X.b,x[l+"hoverformat"]),n.spikeDistance=(q(X)+Q(X))/2,n[P+"Spike"]=W.c2p(X.p,!0),S(X,x,n),n.hovertemplate=x.hovertemplate,n}}function f(n,a){var o=a.mcc||n.marker.color,h=a.mlcc||n.marker.line.color,y=A(n,a);if(i.opacity(o))return o;if(i.opacity(h)&&y)return h}$.exports={hoverPoints:e,hoverOnBars:r,getTraceColor:f}},60822:function($,U,t){$.exports={attributes:t(1486),layoutAttributes:t(43641),supplyDefaults:t(90769).supplyDefaults,crossTraceDefaults:t(90769).crossTraceDefaults,supplyLayoutDefaults:t(13957),calc:t(92290),crossTraceCalc:t(11661).crossTraceCalc,colorbar:t(4898),arraysToCalcdata:t(75341),plot:t(17295).plot,style:t(16688).style,styleOnSelect:t(16688).styleOnSelect,hoverPoints:t(95423).hoverPoints,eventData:t(58065),selectPoints:t(81974),moduleType:"trace",name:"bar",basePlotModule:t(93612),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},43641:function($){$.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},13957:function($,U,t){var M=t(73972),E=t(89298),i=t(71828),S=t(43641);$.exports=function(A,g,v){function e(s,u){return i.coerce(A,g,S,s,u)}for(var r=!1,f=!1,n=!1,a={},o=e("barmode"),h=0;h<v.length;h++){var y=v[h];if(M.traceIs(y,"bar")&&y.visible)r=!0;else continue;if(o==="group"){var p=y.xaxis+y.yaxis;a[p]&&(n=!0),a[p]=!0}if(y.visible&&y.type==="histogram"){var x=E.getFromId({_fullLayout:g},y[y.orientation==="v"?"xaxis":"yaxis"]);x.type!=="category"&&(f=!0)}}if(!r){delete g.barmode;return}o!=="overlay"&&e("barnorm"),e("bargap",f&&!n?0:.2),e("bargroupgap")}},17295:function($,U,t){var M=t(39898),E=t(92770),i=t(71828),S=t(63893),A=t(7901),g=t(91424),v=t(73972),e=t(89298).tickText,r=t(72597),f=r.recordMinTextSize,n=r.clearMinTextSize,a=t(16688),o=t(69383),h=t(97313),y=t(1486),p=y.text,x=y.textposition,s=t(23469).appendArrayPointValue,u=h.TEXTPAD;function c(F){return F.id}function T(F){if(F.ids)return c}function k(F,N){return F<N?1:-1}function _(F,N,V,K){var Q=[],at=[],it=K?N:V,q=K?V:N;return Q[0]=it.c2p(F.s0,!0),at[0]=q.c2p(F.p0,!0),Q[1]=it.c2p(F.s1,!0),at[1]=q.c2p(F.p1,!0),K?[Q,at]:[at,Q]}function b(F,N,V,K){if(!N.uniformtext.mode&&P(V)){var Q;return K&&(Q=K()),F.transition().duration(V.duration).ease(V.easing).each("end",function(){Q&&Q()}).each("interrupt",function(){Q&&Q()})}else return F}function P(F){return F&&F.duration>0}function l(F,N,V,K,Q,at){var it=N.xaxis,q=N.yaxis,W=F._fullLayout,Z=F._context.staticPlot;Q||(Q={mode:W.barmode,norm:W.barmode,gap:W.bargap,groupgap:W.bargroupgap},n("bar",W));var G=i.makeTraceGroups(K,V,"trace bars").each(function(et){var nt=M.select(this),X=et[0].trace,Y=X.type==="waterfall",ot=X.type==="funnel",rt=X.type==="bar",ht=rt||ot,pt=0;Y&&X.connector.visible&&X.connector.mode==="between"&&(pt=X.connector.line.width/2);var yt=X.orientation==="h",xt=P(Q),Ft=i.ensureSingle(nt,"g","points"),Et=T(X),mt=Ft.selectAll("g.point").data(i.identity,Et);mt.enter().append("g").classed("point",!0),mt.exit().remove(),mt.each(function(wt,Pt){var Bt=M.select(this),kt=_(wt,it,q,yt),jt=kt[0][0],Ht=kt[0][1],Vt=kt[1][0],ee=kt[1][1],te=(yt?Ht-jt:ee-Vt)===0;te&&ht&&o.getLineWidth(X,wt)&&(te=!1),te||(te=!E(jt)||!E(Ht)||!E(Vt)||!E(ee)),wt.isBlank=te,te&&(yt?Ht=jt:ee=Vt),pt&&!te&&(yt?(jt-=k(jt,Ht)*pt,Ht+=k(jt,Ht)*pt):(Vt-=k(Vt,ee)*pt,ee+=k(Vt,ee)*pt));var ae,le;if(X.type==="waterfall"){if(!te){var ce=X[wt.dir].marker;ae=ce.line.width,le=ce.color}}else ae=o.getLineWidth(X,wt),le=wt.mc||X.marker.color;function pe(zt){var Tt=M.round(ae/2%1,2);return Q.gap===0&&Q.groupgap===0?M.round(Math.round(zt)-Tt,2):zt}function we(zt,Tt,ft){return ft&&zt===Tt?zt:Math.abs(zt-Tt)>=2?pe(zt):zt>Tt?Math.ceil(zt):Math.floor(zt)}if(!F._context.staticPlot){var ve=A.opacity(le),Mt=ve<1||ae>.01?pe:we;jt=Mt(jt,Ht,yt),Ht=Mt(Ht,jt,yt),Vt=Mt(Vt,ee,!yt),ee=Mt(ee,Vt,!yt)}var It=b(i.ensureSingle(Bt,"path"),W,Q,at);if(It.style("vector-effect",Z?"none":"non-scaling-stroke").attr("d",isNaN((Ht-jt)*(ee-Vt))||te&&F._context.staticPlot?"M0,0Z":"M"+jt+","+Vt+"V"+ee+"H"+Ht+"V"+Vt+"Z").call(g.setClipUrl,N.layerClipId,F),!W.uniformtext.mode&&xt){var Rt=g.makePointStyleFns(X);g.singlePointStyle(wt,It,X,Rt,F)}d(F,N,Bt,et,Pt,jt,Ht,Vt,ee,Q,at),N.layerClipId&&g.hideOutsideRangePoint(wt,Bt.select("text"),it,q,X.xcalendar,X.ycalendar)});var gt=X.cliponaxis===!1;g.setClipUrl(nt,gt?null:N.layerClipId,F)});v.getComponentMethod("errorbars","plot")(F,G,N,Q)}function d(F,N,V,K,Q,at,it,q,W,Z,G){var et=N.xaxis,nt=N.yaxis,X=F._fullLayout,Y;function ot(zt,Tt,ft){var ut=i.ensureSingle(zt,"text").text(Tt).attr({class:"bartext bartext-"+Y,"text-anchor":"middle","data-notex":1}).call(g.font,ft).call(S.convertToTspans,F);return ut}var rt=K[0].trace,ht=rt.orientation==="h",pt=B(X,K,Q,et,nt);Y=O(rt,Q);var yt=Z.mode==="stack"||Z.mode==="relative",xt=K[Q],Ft=!yt||xt._outmost;if(!pt||Y==="none"||(xt.isBlank||at===it||q===W)&&(Y==="auto"||Y==="inside")){V.select("text").remove();return}var Et=X.font,mt=a.getBarColor(K[Q],rt),gt=a.getInsideTextFont(rt,Q,Et,mt),wt=a.getOutsideTextFont(rt,Q,Et),Pt=V.datum();ht?et.type==="log"&&Pt.s0<=0&&(et.range[0]<et.range[1]?at=0:at=et._length):nt.type==="log"&&Pt.s0<=0&&(nt.range[0]<nt.range[1]?q=nt._length:q=0);var Bt=Math.abs(it-at)-2*u,kt=Math.abs(W-q)-2*u,jt,Ht,Vt,ee,te;if(Y==="outside"&&!Ft&&!xt.hasB&&(Y="inside"),Y==="auto")if(Ft){Y="inside",te=i.ensureUniformFontSize(F,gt),jt=ot(V,pt,te),Ht=g.bBox(jt.node()),Vt=Ht.width,ee=Ht.height;var ae=Vt>0&&ee>0,le=Vt<=Bt&&ee<=kt,ce=Vt<=kt&&ee<=Bt,pe=ht?Bt>=Vt*(kt/ee):kt>=ee*(Bt/Vt);ae&&(le||ce||pe)?Y="inside":(Y="outside",jt.remove(),jt=null)}else Y="inside";if(!jt){te=i.ensureUniformFontSize(F,Y==="outside"?wt:gt),jt=ot(V,pt,te);var we=jt.attr("transform");if(jt.attr("transform",""),Ht=g.bBox(jt.node()),Vt=Ht.width,ee=Ht.height,jt.attr("transform",we),Vt<=0||ee<=0){jt.remove();return}}var ve=rt.textangle,Mt,It;Y==="outside"?(It=rt.constraintext==="both"||rt.constraintext==="outside",Mt=z(at,it,q,W,Ht,{isHorizontal:ht,constrained:It,angle:ve})):(It=rt.constraintext==="both"||rt.constraintext==="inside",Mt=I(at,it,q,W,Ht,{isHorizontal:ht,constrained:It,angle:ve,anchor:rt.insidetextanchor})),Mt.fontSize=te.size,f(rt.type==="histogram"?"bar":rt.type,Mt,X),xt.transform=Mt;var Rt=b(jt,X,Z,G);i.setTransormAndDisplay(Rt,Mt)}function L(F){return F==="auto"?0:F}function w(F,N){var V=Math.PI/180*N,K=Math.abs(Math.sin(V)),Q=Math.abs(Math.cos(V));return{x:F.width*Q+F.height*K,y:F.width*K+F.height*Q}}function I(F,N,V,K,Q,at){var it=!!at.isHorizontal,q=!!at.constrained,W=at.angle||0,Z=at.anchor||"end",G=Z==="end",et=Z==="start",nt=at.leftToRight||0,X=(nt+1)/2,Y=1-X,ot=Q.width,rt=Q.height,ht=Math.abs(N-F),pt=Math.abs(K-V),yt=ht>2*u&&pt>2*u?u:0;ht-=2*yt,pt-=2*yt;var xt=L(W);W==="auto"&&!(ot<=ht&&rt<=pt)&&(ot>ht||rt>pt)&&(!(ot>pt||rt>ht)||ot<rt!=ht<pt)&&(xt+=90);var Ft=w(Q,xt),Et=1;q&&(Et=Math.min(1,ht/Ft.x,pt/Ft.y));var mt=Q.left*Y+Q.right*X,gt=(Q.top+Q.bottom)/2,wt=(F+u)*Y+(N-u)*X,Pt=(V+K)/2,Bt=0,kt=0;if(et||G){var jt=(it?Ft.x:Ft.y)/2,Ht=it?k(F,N):k(V,K);it?et?(wt=F+Ht*yt,Bt=-Ht*jt):(wt=N-Ht*yt,Bt=Ht*jt):et?(Pt=V+Ht*yt,kt=-Ht*jt):(Pt=K-Ht*yt,kt=Ht*jt)}return{textX:mt,textY:gt,targetX:wt,targetY:Pt,anchorX:Bt,anchorY:kt,scale:Et,rotate:xt}}function z(F,N,V,K,Q,at){var it=!!at.isHorizontal,q=!!at.constrained,W=at.angle||0,Z=Q.width,G=Q.height,et=Math.abs(N-F),nt=Math.abs(K-V),X;it?X=nt>2*u?u:0:X=et>2*u?u:0;var Y=1;q&&(Y=it?Math.min(1,nt/G):Math.min(1,et/Z));var ot=L(W),rt=w(Q,ot),ht=(it?rt.x:rt.y)/2,pt=(Q.left+Q.right)/2,yt=(Q.top+Q.bottom)/2,xt=(F+N)/2,Ft=(V+K)/2,Et=0,mt=0,gt=it?k(N,F):k(V,K);return it?(xt=N-gt*X,Et=gt*ht):(Ft=K+gt*X,mt=-gt*ht),{textX:pt,textY:yt,targetX:xt,targetY:Ft,anchorX:Et,anchorY:mt,scale:Y,rotate:ot}}function B(F,N,V,K,Q){var at=N[0].trace,it=at.texttemplate,q;return it?q=R(F,N,V,K,Q):at.textinfo?q=C(N,V,K,Q):q=o.getValue(at.text,V),o.coerceString(p,q)}function O(F,N){var V=o.getValue(F.textposition,N);return o.coerceEnumerated(x,V)}function R(F,N,V,K,Q){var at=N[0].trace,it=i.castOption(at,V,"texttemplate");if(!it)return"";var q=at.type==="histogram",W=at.type==="waterfall",Z=at.type==="funnel",G=at.orientation==="h",et,nt,X,Y;G?(et="y",nt=Q,X="x",Y=K):(et="x",nt=K,X="y",Y=Q);function ot(Et){return e(nt,nt.c2l(Et),!0).text}function rt(Et){return e(Y,Y.c2l(Et),!0).text}var ht=N[V],pt={};pt.label=ht.p,pt.labelLabel=pt[et+"Label"]=ot(ht.p);var yt=i.castOption(at,ht.i,"text");(yt===0||yt)&&(pt.text=yt),pt.value=ht.s,pt.valueLabel=pt[X+"Label"]=rt(ht.s);var xt={};s(xt,at,ht.i),(q||xt.x===void 0)&&(xt.x=G?pt.value:pt.label),(q||xt.y===void 0)&&(xt.y=G?pt.label:pt.value),(q||xt.xLabel===void 0)&&(xt.xLabel=G?pt.valueLabel:pt.labelLabel),(q||xt.yLabel===void 0)&&(xt.yLabel=G?pt.labelLabel:pt.valueLabel),W&&(pt.delta=+ht.rawS||ht.s,pt.deltaLabel=rt(pt.delta),pt.final=ht.v,pt.finalLabel=rt(pt.final),pt.initial=pt.final-pt.delta,pt.initialLabel=rt(pt.initial)),Z&&(pt.value=ht.s,pt.valueLabel=rt(pt.value),pt.percentInitial=ht.begR,pt.percentInitialLabel=i.formatPercent(ht.begR),pt.percentPrevious=ht.difR,pt.percentPreviousLabel=i.formatPercent(ht.difR),pt.percentTotal=ht.sumR,pt.percenTotalLabel=i.formatPercent(ht.sumR));var Ft=i.castOption(at,ht.i,"customdata");return Ft&&(pt.customdata=Ft),i.texttemplateString(it,pt,F._d3locale,xt,pt,at._meta||{})}function C(F,N,V,K){var Q=F[0].trace,at=Q.orientation==="h",it=Q.type==="waterfall",q=Q.type==="funnel";function W(Ft){var Et=at?K:V;return e(Et,Ft,!0).text}function Z(Ft){var Et=at?V:K;return e(Et,+Ft,!0).text}var G=Q.textinfo,et=F[N],nt=G.split("+"),X=[],Y,ot=function(Ft){return nt.indexOf(Ft)!==-1};if(ot("label")&&X.push(W(F[N].p)),ot("text")&&(Y=i.castOption(Q,et.i,"text"),(Y===0||Y)&&X.push(Y)),it){var rt=+et.rawS||et.s,ht=et.v,pt=ht-rt;ot("initial")&&X.push(Z(pt)),ot("delta")&&X.push(Z(rt)),ot("final")&&X.push(Z(ht))}if(q){ot("value")&&X.push(Z(et.s));var yt=0;ot("percent initial")&&yt++,ot("percent previous")&&yt++,ot("percent total")&&yt++;var xt=yt>1;ot("percent initial")&&(Y=i.formatPercent(et.begR),xt&&(Y+=" of initial"),X.push(Y)),ot("percent previous")&&(Y=i.formatPercent(et.difR),xt&&(Y+=" of previous"),X.push(Y)),ot("percent total")&&(Y=i.formatPercent(et.sumR),xt&&(Y+=" of total"),X.push(Y))}return X.join("<br>")}$.exports={plot:l,toMoveInsideBar:I}},81974:function($){$.exports=function(t,M){var E=t.cd,i=t.xaxis,S=t.yaxis,A=E[0].trace,g=A.type==="funnel",v=A.orientation==="h",e=[],r;if(M===!1)for(r=0;r<E.length;r++)E[r].selected=0;else for(r=0;r<E.length;r++){var f=E[r],n="ct"in f?f.ct:U(f,i,S,v,g);M.contains(n,!1,r,t)?(e.push({pointNumber:r,x:i.c2d(f.x),y:S.c2d(f.y)}),f.selected=1):f.selected=0}return e};function U(t,M,E,i,S){var A=M.c2p(i?t.s0:t.p0,!0),g=M.c2p(i?t.s1:t.p1,!0),v=E.c2p(i?t.p0:t.s0,!0),e=E.c2p(i?t.p1:t.s1,!0);return S?[(A+g)/2,(v+e)/2]:i?[g,(v+e)/2]:[(A+g)/2,e]}},61546:function($,U,t){$.exports=E;var M=t(71828).distinctVals;function E(i,S){this.traces=i,this.sepNegVal=S.sepNegVal,this.overlapNoMerge=S.overlapNoMerge;for(var A=1/0,g=S.posAxis._id.charAt(0),v=[],e=0;e<i.length;e++){for(var r=i[e],f=0;f<r.length;f++){var n=r[f],a=n.p;a===void 0&&(a=n[g]),a!==void 0&&v.push(a)}r[0]&&r[0].width1&&(A=Math.min(r[0].width1,A))}this.positions=v;var o=M(v);this.distinctPositions=o.vals,o.vals.length===1&&A!==1/0?this.minDiff=A:this.minDiff=Math.min(o.minDiff,A);var h=(S.posAxis||{}).type;(h==="category"||h==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}E.prototype.put=function(i,S){var A=this.getLabel(i,S),g=this.bins[A]||0;return this.bins[A]=g+S,g},E.prototype.get=function(i,S){var A=this.getLabel(i,S);return this.bins[A]||0},E.prototype.getLabel=function(i,S){var A=S<0&&this.sepNegVal?"v":"^",g=this.overlapNoMerge?i:Math.round(i/this.binWidth);return A+g}},16688:function($,U,t){var M=t(39898),E=t(7901),i=t(91424),S=t(71828),A=t(73972),g=t(72597).resizeText,v=t(1486),e=v.textfont,r=v.insidetextfont,f=v.outsidetextfont,n=t(69383);function a(b){var P=M.select(b).selectAll("g.barlayer").selectAll("g.trace");g(b,P,"bar");var l=P.size(),d=b._fullLayout;P.style("opacity",function(L){return L[0].trace.opacity}).each(function(L){(d.barmode==="stack"&&l>1||d.bargap===0&&d.bargroupgap===0&&!L[0].trace.marker.line.width)&&M.select(this).attr("shape-rendering","crispEdges")}),P.selectAll("g.points").each(function(L){var w=M.select(this),I=L[0].trace;o(w,I,b)}),A.getComponentMethod("errorbars","style")(P)}function o(b,P,l){i.pointStyle(b.selectAll("path"),P,l),h(b,P,l)}function h(b,P,l){b.selectAll("text").each(function(d){var L=M.select(this),w=S.ensureUniformFontSize(l,s(L,d,P,l));i.font(L,w)})}function y(b,P,l){var d=P[0].trace;d.selectedpoints?p(l,d,b):(o(l,d,b),A.getComponentMethod("errorbars","style")(l))}function p(b,P,l){i.selectedPointStyle(b.selectAll("path"),P),x(b.selectAll("text"),P,l)}function x(b,P,l){b.each(function(d){var L=M.select(this),w;if(d.selected){w=S.ensureUniformFontSize(l,s(L,d,P,l));var I=P.selected.textfont&&P.selected.textfont.color;I&&(w.color=I),i.font(L,w)}else i.selectedTextStyle(L,P)})}function s(b,P,l,d){var L=d._fullLayout.font,w=l.textfont;if(b.classed("bartext-inside")){var I=_(P,l);w=c(l,P.i,L,I)}else b.classed("bartext-outside")&&(w=T(l,P.i,L));return w}function u(b,P,l){return k(e,b.textfont,P,l)}function c(b,P,l,d){var L=u(b,P,l),w=b._input.textfont===void 0||b._input.textfont.color===void 0||Array.isArray(b.textfont.color)&&b.textfont.color[P]===void 0;return w&&(L={color:E.contrast(d),family:L.family,size:L.size}),k(r,b.insidetextfont,P,L)}function T(b,P,l){var d=u(b,P,l);return k(f,b.outsidetextfont,P,d)}function k(b,P,l,d){P=P||{};var L=n.getValue(P.family,l),w=n.getValue(P.size,l),I=n.getValue(P.color,l);return{family:n.coerceString(b.family,L,d.family),size:n.coerceNumber(b.size,w,d.size),color:n.coerceColor(b.color,I,d.color)}}function _(b,P){return P.type==="waterfall"?P[b.dir].marker.color:b.mcc||b.mc||P.marker.color}$.exports={style:a,styleTextPoints:h,styleOnSelect:y,getInsideTextFont:c,getOutsideTextFont:T,getBarColor:_,resizeText:g}},98340:function($,U,t){var M=t(7901),E=t(52075).hasColorscale,i=t(1586),S=t(71828).coercePattern;$.exports=function(A,g,v,e,r){var f=v("marker.color",e),n=E(A,"marker");n&&i(A,g,r,v,{prefix:"marker.",cLetter:"c"}),v("marker.line.color",M.defaultLine),E(A,"marker.line")&&i(A,g,r,v,{prefix:"marker.line.",cLetter:"c"}),v("marker.line.width"),v("marker.opacity"),S(v,"marker.pattern",f,n),v("selected.marker.color"),v("unselected.marker.color")}},72597:function($,U,t){var M=t(39898),E=t(71828);function i(v,e,r){var f=v._fullLayout,n=f["_"+r+"Text_minsize"];if(n){var a=f.uniformtext.mode==="hide",o;switch(r){case"funnelarea":case"pie":case"sunburst":o="g.slice";break;case"treemap":case"icicle":o="g.slice, g.pathbar";break;default:o="g.points > g.point"}e.selectAll(o).each(function(h){var y=h.transform;if(y){y.scale=a&&y.hide?0:n/y.fontSize;var p=M.select(this).select("text");E.setTransormAndDisplay(p,y)}})}}function S(v,e,r){if(r.uniformtext.mode){var f=g(v),n=r.uniformtext.minsize,a=e.scale*e.fontSize;e.hide=a<n,r[f]=r[f]||1/0,e.hide||(r[f]=Math.min(r[f],Math.max(a,n)))}}function A(v,e){var r=g(v);e[r]=void 0}function g(v){return"_"+v+"Text_minsize"}$.exports={recordMinTextSize:S,clearMinTextSize:A,resizeText:i}},55023:function($,U,t){var M=t(5386).fF,E=t(1426).extendFlat,i=t(81245),S=t(1486);$.exports={r:i.r,theta:i.theta,r0:i.r0,dr:i.dr,theta0:i.theta0,dtheta:i.dtheta,thetaunit:i.thetaunit,base:E({},S.base,{}),offset:E({},S.offset,{}),width:E({},S.width,{}),text:E({},S.text,{}),hovertext:E({},S.hovertext,{}),marker:S.marker,hoverinfo:i.hoverinfo,hovertemplate:M(),selected:S.selected,unselected:S.unselected}},74692:function($,U,t){var M=t(52075).hasColorscale,E=t(78803),i=t(75341),S=t(11661).setGroupPositions,A=t(66279),g=t(73972).traceIs,v=t(71828).extendFlat;function e(f,n){for(var a=f._fullLayout,o=n.subplot,h=a[o].radialaxis,y=a[o].angularaxis,p=h.makeCalcdata(n,"r"),x=y.makeCalcdata(n,"theta"),s=n._length,u=new Array(s),c=p,T=x,k=0;k<s;k++)u[k]={p:T[k],s:c[k]};function _(b){var P=n[b];P!==void 0&&(n["_"+b]=Array.isArray(P)?y.makeCalcdata(n,b):y.d2c(P,n.thetaunit))}return y.type==="linear"&&(_("width"),_("offset")),M(n,"marker")&&E(f,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),M(n,"marker.line")&&E(f,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}),i(u,n),A(u,n),u}function r(f,n,a){for(var o=f.calcdata,h=[],y=0;y<o.length;y++){var p=o[y],x=p[0].trace;x.visible===!0&&g(x,"bar")&&x.subplot===a&&h.push(p)}var s=v({},n.radialaxis,{_id:"x"}),u=n.angularaxis;S(f,u,s,h,{mode:n.barmode,norm:n.barnorm,gap:n.bargap,groupgap:n.bargroupgap})}$.exports={calc:e,crossTraceCalc:r}},6135:function($,U,t){var M=t(71828),E=t(22184).handleRThetaDefaults,i=t(98340),S=t(55023);$.exports=function(A,g,v,e){function r(n,a){return M.coerce(A,g,S,n,a)}var f=E(A,g,e,r);if(!f){g.visible=!1;return}r("thetaunit"),r("base"),r("offset"),r("width"),r("text"),r("hovertext"),r("hovertemplate"),i(A,g,r,v,e),M.coerceSelectionMarkerOpacity(g,r)}},27379:function($,U,t){var M=t(30211),E=t(71828),i=t(95423).getTraceColor,S=E.fillText,A=t(59150).makeHoverPointText,g=t(10869).isPtInsidePolygon;$.exports=function(v,e,r){var f=v.cd,n=f[0].trace,a=v.subplot,o=a.radialAxis,h=a.angularAxis,y=a.vangles,p=y?g:E.isPtInsideSector,x=v.maxHoverDistance,s=h._period||2*Math.PI,u=Math.abs(o.g2p(Math.sqrt(e*e+r*r))),c=Math.atan2(r,e);o.range[0]>o.range[1]&&(c+=Math.PI);var T=function(P){return p(u,c,[P.rp0,P.rp1],[P.thetag0,P.thetag1],y)?x+Math.min(1,Math.abs(P.thetag1-P.thetag0)/s)-1+(P.rp1-u)/(P.rp1-P.rp0)-1:1/0};if(M.getClosest(f,T,v),v.index!==!1){var k=v.index,_=f[k];v.x0=v.x1=_.ct[0],v.y0=v.y1=_.ct[1];var b=E.extendFlat({},_,{r:_.s,theta:_.p});return S(_,n,v),A(b,n,a,v),v.hovertemplate=n.hovertemplate,v.color=i(n,_),v.xLabelVal=v.yLabelVal=void 0,_.s<0&&(v.idealAlign="left"),[v]}}},23381:function($,U,t){$.exports={moduleType:"trace",name:"barpolar",basePlotModule:t(23580),categories:["polar","bar","showLegend"],attributes:t(55023),layoutAttributes:t(40151),supplyDefaults:t(6135),supplyLayoutDefaults:t(19860),calc:t(74692).calc,crossTraceCalc:t(74692).crossTraceCalc,plot:t(60173),colorbar:t(4898),formatLabels:t(98608),style:t(16688).style,styleOnSelect:t(16688).styleOnSelect,hoverPoints:t(27379),selectPoints:t(81974),meta:{}}},40151:function($){$.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},19860:function($,U,t){var M=t(71828),E=t(40151);$.exports=function(i,S,A){var g={},v;function e(n,a){return M.coerce(i[v]||{},S[v],E,n,a)}for(var r=0;r<A.length;r++){var f=A[r];f.type==="barpolar"&&f.visible===!0&&(v=f.subplot,g[v]||(e("barmode"),e("bargap"),g[v]=1))}}},60173:function($,U,t){var M=t(39898),E=t(92770),i=t(71828),S=t(91424),A=t(10869);$.exports=function(v,e,r){var f=v._context.staticPlot,n=e.xaxis,a=e.yaxis,o=e.radialAxis,h=e.angularAxis,y=g(e),p=e.layers.frontplot.select("g.barlayer");i.makeTraceGroups(p,r,"trace bars").each(function(){var x=M.select(this),s=i.ensureSingle(x,"g","points"),u=s.selectAll("g.point").data(i.identity);u.enter().append("g").style("vector-effect",f?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),u.exit().remove(),u.each(function(c){var T=M.select(this),k=c.rp0=o.c2p(c.s0),_=c.rp1=o.c2p(c.s1),b=c.thetag0=h.c2g(c.p0),P=c.thetag1=h.c2g(c.p1),l;if(!E(k)||!E(_)||!E(b)||!E(P)||k===_||b===P)l="M0,0Z";else{var d=o.c2g(c.s1),L=(b+P)/2;c.ct=[n.c2p(d*Math.cos(L)),a.c2p(d*Math.sin(L))],l=y(k,_,b,P)}i.ensureSingle(T,"path").attr("d",l)}),S.setClipUrl(x,e._hasClipOnAxisFalse?e.clipIds.forTraces:null,v)})};function g(v){var e=v.cxx,r=v.cyy;return v.vangles?function(f,n,a,o){var h,y;i.angleDelta(a,o)>0?(h=a,y=o):(h=o,y=a);var p=A.findEnclosingVertexAngles(h,v.vangles)[0],x=A.findEnclosingVertexAngles(y,v.vangles)[1],s=[p,(h+y)/2,x];return A.pathPolygonAnnulus(f,n,h,y,s,e,r)}:function(f,n,a,o){return i.pathAnnulus(f,n,a,o,e,r)}}},53522:function($,U,t){var M=t(82196),E=t(1486),i=t(22399),S=t(12663).axisHoverFormat,A=t(5386).fF,g=t(1426).extendFlat,v=M.marker,e=v.line;$.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:S("x"),yhoverformat:S("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:g({},v.symbol,{arrayOk:!1,editType:"plot"}),opacity:g({},v.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:g({},v.angle,{arrayOk:!1,editType:"calc"}),size:g({},v.size,{arrayOk:!1,editType:"calc"}),color:g({},v.color,{arrayOk:!1,editType:"style"}),line:{color:g({},e.color,{arrayOk:!1,dflt:i.defaultLine,editType:"style"}),width:g({},e.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:M.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:E.offsetgroup,alignmentgroup:E.alignmentgroup,selected:{marker:M.selected.marker,editType:"style"},unselected:{marker:M.unselected.marker,editType:"style"},text:g({},M.text,{}),hovertext:g({},M.hovertext,{}),hovertemplate:A({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},48518:function($,U,t){var M=t(92770),E=t(89298),i=t(42973),S=t(71828),A=t(50606).BADNUM,g=S._;$.exports=function(c,T){var k=c._fullLayout,_=E.getFromId(c,T.xaxis||"x"),b=E.getFromId(c,T.yaxis||"y"),P=[],l=T.type==="violin"?"_numViolins":"_numBoxes",d,L,w,I,z,B,O;T.orientation==="h"?(w=_,I="x",z=b,B="y",O=!!T.yperiodalignment):(w=b,I="y",z=_,B="x",O=!!T.xperiodalignment);var R=v(T,B,z,k[l]),C=R[0],F=R[1],N=S.distinctVals(C,z),V=N.vals,K=N.minDiff/2,Q,at,it,q,W,Z,G=(T.boxpoints||T.points)==="all"?S.identity:function(pe){return pe.v<Q.lf||pe.v>Q.uf};if(T._hasPreCompStats){var et=T[I],nt=function(pe){return w.d2c((T[pe]||[])[d])},X=1/0,Y=-1/0;for(d=0;d<T._length;d++){var ot=C[d];if(M(ot)){if(Q={},Q.pos=Q[B]=ot,O&&F&&(Q.orig_p=F[d]),Q.q1=nt("q1"),Q.med=nt("median"),Q.q3=nt("q3"),at=[],et&&S.isArrayOrTypedArray(et[d]))for(L=0;L<et[d].length;L++)Z=w.d2c(et[d][L]),Z!==A&&(W={v:Z,i:[d,L]},n(W,T,[d,L]),at.push(W));if(Q.pts=at.sort(o),it=Q[I]=at.map(h),q=it.length,Q.med!==A&&Q.q1!==A&&Q.q3!==A&&Q.med>=Q.q1&&Q.q3>=Q.med){var rt=nt("lowerfence");Q.lf=rt!==A&&rt<=Q.q1?rt:y(Q,it,q);var ht=nt("upperfence");Q.uf=ht!==A&&ht>=Q.q3?ht:p(Q,it,q);var pt=nt("mean");Q.mean=pt!==A?pt:q?S.mean(it,q):(Q.q1+Q.q3)/2;var yt=nt("sd");Q.sd=pt!==A&&yt>=0?yt:q?S.stdev(it,q,Q.mean):Q.q3-Q.q1,Q.lo=x(Q),Q.uo=s(Q);var xt=nt("notchspan");xt=xt!==A&&xt>0?xt:u(Q,q),Q.ln=Q.med-xt,Q.un=Q.med+xt;var Ft=Q.lf,Et=Q.uf;T.boxpoints&&it.length&&(Ft=Math.min(Ft,it[0]),Et=Math.max(Et,it[q-1])),T.notched&&(Ft=Math.min(Ft,Q.ln),Et=Math.max(Et,Q.un)),Q.min=Ft,Q.max=Et}else{S.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+Q.q1,"median = "+Q.med,"q3 = "+Q.q3].join(`
`));var mt;Q.med!==A?mt=Q.med:Q.q1!==A?Q.q3!==A?mt=(Q.q1+Q.q3)/2:mt=Q.q1:Q.q3!==A?mt=Q.q3:mt=0,Q.med=mt,Q.q1=Q.q3=mt,Q.lf=Q.uf=mt,Q.mean=Q.sd=mt,Q.ln=Q.un=mt,Q.min=Q.max=mt}X=Math.min(X,Q.min),Y=Math.max(Y,Q.max),Q.pts2=at.filter(G),P.push(Q)}}T._extremes[w._id]=E.findExtremes(w,[X,Y],{padded:!0})}else{var gt=w.makeCalcdata(T,I),wt=e(V,K),Pt=V.length,Bt=r(Pt);for(d=0;d<T._length;d++)if(Z=gt[d],!!M(Z)){var kt=S.findBin(C[d],wt);kt>=0&&kt<Pt&&(W={v:Z,i:d},n(W,T,d),Bt[kt].push(W))}var jt=1/0,Ht=-1/0,Vt=T.quartilemethod,ee=Vt==="exclusive",te=Vt==="inclusive";for(d=0;d<Pt;d++)if(Bt[d].length>0){if(Q={},Q.pos=Q[B]=V[d],at=Q.pts=Bt[d].sort(o),it=Q[I]=at.map(h),q=it.length,Q.min=it[0],Q.max=it[q-1],Q.mean=S.mean(it,q),Q.sd=S.stdev(it,q,Q.mean),Q.med=S.interp(it,.5),q%2&&(ee||te)){var ae,le;ee?(ae=it.slice(0,q/2),le=it.slice(q/2+1)):te&&(ae=it.slice(0,q/2+1),le=it.slice(q/2)),Q.q1=S.interp(ae,.5),Q.q3=S.interp(le,.5)}else Q.q1=S.interp(it,.25),Q.q3=S.interp(it,.75);Q.lf=y(Q,it,q),Q.uf=p(Q,it,q),Q.lo=x(Q),Q.uo=s(Q);var ce=u(Q,q);Q.ln=Q.med-ce,Q.un=Q.med+ce,jt=Math.min(jt,Q.ln),Ht=Math.max(Ht,Q.un),Q.pts2=at.filter(G),P.push(Q)}T._extremes[w._id]=E.findExtremes(w,T.notched?gt.concat([jt,Ht]):gt,{padded:!0})}return a(P,T),P.length>0?(P[0].t={num:k[l],dPos:K,posLetter:B,valLetter:I,labels:{med:g(c,"median:"),min:g(c,"min:"),q1:g(c,"q1:"),q3:g(c,"q3:"),max:g(c,"max:"),mean:T.boxmean==="sd"?g(c,"mean \xB1 \u03C3:"):g(c,"mean:"),lf:g(c,"lower fence:"),uf:g(c,"upper fence:")}},k[l]++,P):[{t:{empty:!0}}]};function v(c,T,k,_){var b=T in c,P=T+"0"in c,l="d"+T in c;if(b||P&&l){var d=k.makeCalcdata(c,T),L=i(c,k,T,d).vals;return[L,d]}var w;P?w=c[T+"0"]:"name"in c&&(k.type==="category"||M(c.name)&&["linear","log"].indexOf(k.type)!==-1||S.isDateTime(c.name)&&k.type==="date")?w=c.name:w=_;for(var I=k.type==="multicategory"?k.r2c_just_indices(w):k.d2c(w,0,c[T+"calendar"]),z=c._length,B=new Array(z),O=0;O<z;O++)B[O]=I;return[B]}function e(c,T){for(var k=c.length,_=new Array(k+1),b=0;b<k;b++)_[b]=c[b]-T;return _[k]=c[k-1]+T,_}function r(c){for(var T=new Array(c),k=0;k<c;k++)T[k]=[];return T}var f={text:"tx",hovertext:"htx"};function n(c,T,k){for(var _ in f)S.isArrayOrTypedArray(T[_])&&(Array.isArray(k)?S.isArrayOrTypedArray(T[_][k[0]])&&(c[f[_]]=T[_][k[0]][k[1]]):c[f[_]]=T[_][k])}function a(c,T){if(S.isArrayOrTypedArray(T.selectedpoints))for(var k=0;k<c.length;k++){for(var _=c[k].pts||[],b={},P=0;P<_.length;P++)b[_[P].i]=P;S.tagSelected(_,T,b)}}function o(c,T){return c.v-T.v}function h(c){return c.v}function y(c,T,k){return k===0?c.q1:Math.min(c.q1,T[Math.min(S.findBin(2.5*c.q1-1.5*c.q3,T,!0)+1,k-1)])}function p(c,T,k){return k===0?c.q3:Math.max(c.q3,T[Math.max(S.findBin(2.5*c.q3-1.5*c.q1,T),0)])}function x(c){return 4*c.q1-3*c.q3}function s(c){return 4*c.q3-3*c.q1}function u(c,T){return T===0?0:1.57*(c.q3-c.q1)/Math.sqrt(T)}},37188:function($,U,t){var M=t(89298),E=t(71828),i=t(99082).getAxisGroup,S=["v","h"];function A(v,e){for(var r=v.calcdata,f=e.xaxis,n=e.yaxis,a=0;a<S.length;a++){for(var o=S[a],h=o==="h"?n:f,y=[],p=0;p<r.length;p++){var x=r[p],s=x[0].t,u=x[0].trace;u.visible===!0&&(u.type==="box"||u.type==="candlestick")&&!s.empty&&(u.orientation||"v")===o&&u.xaxis===f._id&&u.yaxis===n._id&&y.push(p)}g("box",v,y,h)}}function g(v,e,r,f){var n=e.calcdata,a=e._fullLayout,o=f._id,h=o.charAt(0),y,p,x,s=[],u=0;for(y=0;y<r.length;y++)for(x=n[r[y]],p=0;p<x.length;p++)s.push(f.c2l(x[p].pos,!0)),u+=(x[p].pts2||[]).length;if(s.length){var c=E.distinctVals(s);(f.type==="category"||f.type==="multicategory")&&(c.minDiff=1);var T=c.minDiff/2;M.minDtick(f,c.minDiff,c.vals[0],!0);var k=v==="violin"?"_numViolins":"_numBoxes",_=a[k],b=a[v+"mode"]==="group"&&_>1,P=1-a[v+"gap"],l=1-a[v+"groupgap"];for(y=0;y<r.length;y++){x=n[r[y]];var d=x[0].trace,L=x[0].t,w=d.width,I=d.side,z,B,O,R;if(w)z=B=R=w/2,O=0;else if(z=T,b){var C=i(a,f._id)+d.orientation,F=a._alignmentOpts[C]||{},N=F[d.alignmentgroup]||{},V=Object.keys(N.offsetGroups||{}).length,K=V||_,Q=V?d._offsetIndex:L.num;B=z*P*l/K,O=2*z*(-.5+(Q+.5)/K)*P,R=z*P/K}else B=z*P*l,O=0,R=z;L.dPos=z,L.bPos=O,L.bdPos=B,L.wHover=R;var at,it,q=O+B,W,Z,G,et,nt,X,Y=!!w,ot=(d.boxpoints||d.points)&&u>0;if(I==="positive"?(at=z*(w?1:.5),W=q,it=W=O):I==="negative"?(at=W=O,it=z*(w?1:.5),Z=q):(at=it=z,W=Z=q),ot){var rt=d.pointpos,ht=d.jitter,pt=d.marker.size/2,yt=0;rt+ht>=0&&(yt=q*(rt+ht),yt>at?(Y=!0,nt=pt,G=yt):yt>W&&(nt=pt,G=at)),yt<=at&&(G=at);var xt=0;rt-ht<=0&&(xt=-q*(rt-ht),xt>it?(Y=!0,X=pt,et=xt):xt>Z&&(X=pt,et=it)),xt<=it&&(et=it)}else G=at,et=it;var Ft=new Array(x.length);for(p=0;p<x.length;p++)Ft[p]=x[p].pos;d._extremes[o]=M.findExtremes(f,Ft,{padded:Y,vpadminus:et,vpadplus:G,vpadLinearized:!0,ppadminus:{x:X,y:nt}[h],ppadplus:{x:nt,y:X}[h]})}}}$.exports={crossTraceCalc:A,setPositionOffset:g}},36411:function($,U,t){var M=t(71828),E=t(73972),i=t(7901),S=t(73927),A=t(26125),g=t(4322),v=t(53522);function e(a,o,h,y){function p(b,P){return M.coerce(a,o,v,b,P)}if(r(a,o,p,y),o.visible!==!1){S(a,o,y,p),p("xhoverformat"),p("yhoverformat");var x=o._hasPreCompStats;x&&(p("lowerfence"),p("upperfence")),p("line.color",(a.marker||{}).color||h),p("line.width"),p("fillcolor",i.addOpacity(o.line.color,.5));var s=!1;if(x){var u=p("mean"),c=p("sd");u&&u.length&&(s=!0,c&&c.length&&(s="sd"))}p("boxmean",s),p("whiskerwidth"),p("width"),p("quartilemethod");var T=!1;if(x){var k=p("notchspan");k&&k.length&&(T=!0)}else M.validate(a.notchwidth,v.notchwidth)&&(T=!0);var _=p("notched",T);_&&p("notchwidth"),f(a,o,p,{prefix:"box"})}}function r(a,o,h,y){function p(V){var K=0;return V&&V.length&&(K+=1,M.isArrayOrTypedArray(V[0])&&V[0].length&&(K+=1)),K}function x(V){return M.validate(a[V],v[V])}var s=h("y"),u=h("x"),c;if(o.type==="box"){var T=h("q1"),k=h("median"),_=h("q3");o._hasPreCompStats=T&&T.length&&k&&k.length&&_&&_.length,c=Math.min(M.minRowLength(T),M.minRowLength(k),M.minRowLength(_))}var b=p(s),P=p(u),l=b&&M.minRowLength(s),d=P&&M.minRowLength(u),L=y.calendar,w={autotypenumbers:y.autotypenumbers},I,z;if(o._hasPreCompStats)switch(String(P)+String(b)){case"00":var B=x("x0")||x("dx"),O=x("y0")||x("dy");O&&!B?I="h":I="v",z=c;break;case"10":I="v",z=Math.min(c,d);break;case"20":I="h",z=Math.min(c,u.length);break;case"01":I="h",z=Math.min(c,l);break;case"02":I="v",z=Math.min(c,s.length);break;case"12":I="v",z=Math.min(c,d,s.length);break;case"21":I="h",z=Math.min(c,u.length,l);break;case"11":z=0;break;case"22":var R=!1,C;for(C=0;C<u.length;C++)if(g(u[C],L,w)==="category"){R=!0;break}if(R)I="v",z=Math.min(c,d,s.length);else{for(C=0;C<s.length;C++)if(g(s[C],L,w)==="category"){R=!0;break}R?(I="h",z=Math.min(c,u.length,l)):(I="v",z=Math.min(c,d,s.length))}break}else b>0?(I="v",P>0?z=Math.min(d,l):z=Math.min(l)):P>0?(I="h",z=Math.min(d)):z=0;if(!z){o.visible=!1;return}o._length=z;var F=h("orientation",I);o._hasPreCompStats?F==="v"&&P===0?(h("x0",0),h("dx",1)):F==="h"&&b===0&&(h("y0",0),h("dy",1)):F==="v"&&P===0?h("x0"):F==="h"&&b===0&&h("y0");var N=E.getComponentMethod("calendars","handleTraceDefaults");N(a,o,["x","y"],y)}function f(a,o,h,y){var p=y.prefix,x=M.coerce2(a,o,v,"marker.outliercolor"),s=h("marker.line.outliercolor"),u="outliers";o._hasPreCompStats?u="all":(x||s)&&(u="suspectedoutliers");var c=h(p+"points",u);c?(h("jitter",c==="all"?.3:0),h("pointpos",c==="all"?-1.5:0),h("marker.symbol"),h("marker.opacity"),h("marker.size"),h("marker.angle"),h("marker.color",o.line.color),h("marker.line.color"),h("marker.line.width"),c==="suspectedoutliers"&&(h("marker.line.outliercolor",o.marker.color),h("marker.line.outlierwidth")),h("selected.marker.color"),h("unselected.marker.color"),h("selected.marker.size"),h("unselected.marker.size"),h("text"),h("hovertext")):delete o.marker;var T=h("hoveron");(T==="all"||T.indexOf("points")!==-1)&&h("hovertemplate"),M.coerceSelectionMarkerOpacity(o,h)}function n(a,o){var h,y;function p(u){return M.coerce(y._input,y,v,u)}for(var x=0;x<a.length;x++){y=a[x];var s=y.type;(s==="box"||s==="violin")&&(h=y._input,o[s+"mode"]==="group"&&A(h,y,o,p))}}$.exports={supplyDefaults:e,crossTraceDefaults:n,handleSampleDefaults:r,handlePointsDefaults:f}},74907:function($){$.exports=function(U,t){return t.hoverOnBox&&(U.hoverOnBox=t.hoverOnBox),"xVal"in t&&(U.x=t.xVal),"yVal"in t&&(U.y=t.yVal),t.xa&&(U.xaxis=t.xa),t.ya&&(U.yaxis=t.ya),U}},41868:function($,U,t){var M=t(89298),E=t(71828),i=t(30211),S=t(7901),A=E.fillText;function g(r,f,n,a){var o=r.cd,h=o[0].trace,y=h.hoveron,p=[],x;return y.indexOf("boxes")!==-1&&(p=p.concat(v(r,f,n,a))),y.indexOf("points")!==-1&&(x=e(r,f,n)),a==="closest"?x?[x]:p:(x&&p.push(x),p)}function v(r,f,n,a){var o=r.cd,h=r.xa,y=r.ya,p=o[0].trace,x=o[0].t,s=p.type==="violin",u,c,T,k,_,b,P,l,d,L,w,I=x.bdPos,z,B,O=x.wHover,R=function(xt){return T.c2l(xt.pos)+x.bPos-T.c2l(b)};s&&p.side!=="both"?(p.side==="positive"&&(d=function(xt){var Ft=R(xt);return i.inbox(Ft,Ft+O,L)},z=I,B=0),p.side==="negative"&&(d=function(xt){var Ft=R(xt);return i.inbox(Ft-O,Ft,L)},z=0,B=I)):(d=function(xt){var Ft=R(xt);return i.inbox(Ft-O,Ft+O,L)},z=B=I);var C;s?C=function(xt){return i.inbox(xt.span[0]-_,xt.span[1]-_,L)}:C=function(xt){return i.inbox(xt.min-_,xt.max-_,L)},p.orientation==="h"?(_=f,b=n,P=C,l=d,u="y",T=y,c="x",k=h):(_=n,b=f,P=d,l=C,u="x",T=h,c="y",k=y);var F=Math.min(1,I/Math.abs(T.r2c(T.range[1])-T.r2c(T.range[0])));L=r.maxHoverDistance-F,w=r.maxSpikeDistance-F;function N(xt){return(P(xt)+l(xt))/2}var V=i.getDistanceFunction(a,P,l,N);if(i.getClosest(o,V,r),r.index===!1)return[];var K=o[r.index],Q=p.line.color,at=(p.marker||{}).color;S.opacity(Q)&&p.line.width?r.color=Q:S.opacity(at)&&p.boxpoints?r.color=at:r.color=p.fillcolor,r[u+"0"]=T.c2p(K.pos+x.bPos-B,!0),r[u+"1"]=T.c2p(K.pos+x.bPos+z,!0),r[u+"LabelVal"]=K.orig_p!==void 0?K.orig_p:K.pos;var it=u+"Spike";r.spikeDistance=N(K)*w/L,r[it]=T.c2p(K.pos,!0);var q=p.boxmean||(p.meanline||{}).visible,W=p.boxpoints||p.points,Z=W&&q?["max","uf","q3","med","mean","q1","lf","min"]:W&&!q?["max","uf","q3","med","q1","lf","min"]:!W&&q?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],G=k.range[1]<k.range[0];p.orientation===(G?"v":"h")&&Z.reverse();for(var et=r.spikeDistance,nt=r[it],X=[],Y=0;Y<Z.length;Y++){var ot=Z[Y];if(ot in K){var rt=K[ot],ht=k.c2p(rt,!0),pt=E.extendFlat({},r);pt.attr=ot,pt[c+"0"]=pt[c+"1"]=ht,pt[c+"LabelVal"]=rt,pt[c+"Label"]=(x.labels?x.labels[ot]+" ":"")+M.hoverLabelText(k,rt,p[c+"hoverformat"]),pt.hoverOnBox=!0,ot==="mean"&&"sd"in K&&p.boxmean==="sd"&&(pt[c+"err"]=K.sd),pt.hovertemplate=!1,X.push(pt)}}r.name="",r.spikeDistance=void 0,r[it]=void 0;for(var yt=0;yt<X.length;yt++)X[yt].attr!=="med"?(X[yt].name="",X[yt].spikeDistance=void 0,X[yt][it]=void 0):(X[yt].spikeDistance=et,X[yt][it]=nt);return X}function e(r,f,n){for(var a=r.cd,o=r.xa,h=r.ya,y=a[0].trace,p=o.c2p(f),x=h.c2p(n),s,u=function(C){var F=Math.max(3,C.mrc||0);return Math.max(Math.abs(o.c2p(C.x)-p)-F,1-3/F)},c=function(C){var F=Math.max(3,C.mrc||0);return Math.max(Math.abs(h.c2p(C.y)-x)-F,1-3/F)},T=i.quadrature(u,c),k=!1,_,b,P=0;P<a.length;P++){_=a[P];for(var l=0;l<(_.pts||[]).length;l++){b=_.pts[l];var d=T(b);d<=r.distance&&(r.distance=d,k=[P,l])}}if(!k)return!1;_=a[k[0]],b=_.pts[k[1]];var L=o.c2p(b.x,!0),w=h.c2p(b.y,!0),I=b.mrc||1;s=E.extendFlat({},r,{index:b.i,color:(y.marker||{}).color,name:y.name,x0:L-I,x1:L+I,y0:w-I,y1:w+I,spikeDistance:r.distance,hovertemplate:y.hovertemplate});var z=_.orig_p,B=z!==void 0?z:_.pos,O;y.orientation==="h"?(O=h,s.xLabelVal=b.x,s.yLabelVal=B):(O=o,s.xLabelVal=B,s.yLabelVal=b.y);var R=O._id.charAt(0);return s[R+"Spike"]=O.c2p(_.pos,!0),A(b,y,s),s}$.exports={hoverPoints:g,hoverOnBoxes:v,hoverOnPoints:e}},83832:function($,U,t){$.exports={attributes:t(53522),layoutAttributes:t(40094),supplyDefaults:t(36411).supplyDefaults,crossTraceDefaults:t(36411).crossTraceDefaults,supplyLayoutDefaults:t(4199).supplyLayoutDefaults,calc:t(48518),crossTraceCalc:t(37188).crossTraceCalc,plot:t(86047).plot,style:t(58063).style,styleOnSelect:t(58063).styleOnSelect,hoverPoints:t(41868).hoverPoints,eventData:t(74907),selectPoints:t(24626),moduleType:"trace",name:"box",basePlotModule:t(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},40094:function($){$.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},4199:function($,U,t){var M=t(73972),E=t(71828),i=t(40094);function S(g,v,e,r,f){for(var n=f+"Layout",a=!1,o=0;o<e.length;o++){var h=e[o];if(M.traceIs(h,n)){a=!0;break}}a&&(r(f+"mode"),r(f+"gap"),r(f+"groupgap"))}function A(g,v,e){function r(f,n){return E.coerce(g,v,i,f,n)}S(g,v,e,r,"box")}$.exports={supplyLayoutDefaults:A,_supply:S}},86047:function($,U,t){var M=t(39898),E=t(71828),i=t(91424),S=5,A=.01;function g(f,n,a,o){var h=f._context.staticPlot,y=n.xaxis,p=n.yaxis;E.makeTraceGroups(o,a,"trace boxes").each(function(x){var s=M.select(this),u=x[0],c=u.t,T=u.trace;if(c.wdPos=c.bdPos*T.whiskerwidth,T.visible!==!0||c.empty){s.remove();return}var k,_;T.orientation==="h"?(k=p,_=y):(k=y,_=p),v(s,{pos:k,val:_},T,c,h),e(s,{x:y,y:p},T,c),r(s,{pos:k,val:_},T,c)})}function v(f,n,a,o,h){var y=a.orientation==="h",p=n.val,x=n.pos,s=!!x.rangebreaks,u=o.bPos,c=o.wdPos||0,T=o.bPosPxOffset||0,k=a.whiskerwidth||0,_=a.notched||!1,b=_?1-2*a.notchwidth:1,P,l;Array.isArray(o.bdPos)?(P=o.bdPos[0],l=o.bdPos[1]):(P=o.bdPos,l=o.bdPos);var d=f.selectAll("path.box").data(a.type!=="violin"||a.box.visible?E.identity:[]);d.enter().append("path").style("vector-effect",h?"none":"non-scaling-stroke").attr("class","box"),d.exit().remove(),d.each(function(L){if(L.empty)return"M0,0Z";var w=x.c2l(L.pos+u,!0),I=x.l2p(w-P)+T,z=x.l2p(w+l)+T,B=s?(I+z)/2:x.l2p(w)+T,O=a.whiskerwidth,R=s?I*O+(1-O)*B:x.l2p(w-c)+T,C=s?z*O+(1-O)*B:x.l2p(w+c)+T,F=x.l2p(w-P*b)+T,N=x.l2p(w+l*b)+T,V=p.c2p(L.q1,!0),K=p.c2p(L.q3,!0),Q=E.constrain(p.c2p(L.med,!0),Math.min(V,K)+1,Math.max(V,K)-1),at=L.lf===void 0||a.boxpoints===!1,it=p.c2p(at?L.min:L.lf,!0),q=p.c2p(at?L.max:L.uf,!0),W=p.c2p(L.ln,!0),Z=p.c2p(L.un,!0);y?M.select(this).attr("d","M"+Q+","+F+"V"+N+"M"+V+","+I+"V"+z+(_?"H"+W+"L"+Q+","+N+"L"+Z+","+z:"")+"H"+K+"V"+I+(_?"H"+Z+"L"+Q+","+F+"L"+W+","+I:"")+"ZM"+V+","+B+"H"+it+"M"+K+","+B+"H"+q+(k===0?"":"M"+it+","+R+"V"+C+"M"+q+","+R+"V"+C)):M.select(this).attr("d","M"+F+","+Q+"H"+N+"M"+I+","+V+"H"+z+(_?"V"+W+"L"+N+","+Q+"L"+z+","+Z:"")+"V"+K+"H"+I+(_?"V"+Z+"L"+F+","+Q+"L"+I+","+W:"")+"ZM"+B+","+V+"V"+it+"M"+B+","+K+"V"+q+(k===0?"":"M"+R+","+it+"H"+C+"M"+R+","+q+"H"+C))})}function e(f,n,a,o){var h=n.x,y=n.y,p=o.bdPos,x=o.bPos,s=a.boxpoints||a.points;E.seedPseudoRandom();var u=function(k){return k.forEach(function(_){_.t=o,_.trace=a}),k},c=f.selectAll("g.points").data(s?u:[]);c.enter().append("g").attr("class","points"),c.exit().remove();var T=c.selectAll("path").data(function(k){var _,b=k.pts2,P=Math.max((k.max-k.min)/10,k.q3-k.q1),l=P*1e-9,d=P*A,L=[],w=0,I;if(a.jitter){if(P===0)for(w=1,L=new Array(b.length),_=0;_<b.length;_++)L[_]=1;else for(_=0;_<b.length;_++){var z=Math.max(0,_-S),B=b[z].v,O=Math.min(b.length-1,_+S),R=b[O].v;s!=="all"&&(b[_].v<k.lf?R=Math.min(R,k.lf):B=Math.max(B,k.uf));var C=Math.sqrt(d*(O-z)/(R-B+l))||0;C=E.constrain(Math.abs(C),0,1),L.push(C),w=Math.max(C,w)}I=a.jitter*2/(w||1)}for(_=0;_<b.length;_++){var F=b[_],N=F.v,V=a.jitter?I*L[_]*(E.pseudoRandom()-.5):0,K=k.pos+x+p*(a.pointpos+V);a.orientation==="h"?(F.y=K,F.x=N):(F.x=K,F.y=N),s==="suspectedoutliers"&&N<k.uo&&N>k.lo&&(F.so=!0)}return b});T.enter().append("path").classed("point",!0),T.exit().remove(),T.call(i.translatePoints,h,y)}function r(f,n,a,o){var h=n.val,y=n.pos,p=!!y.rangebreaks,x=o.bPos,s=o.bPosPxOffset||0,u=a.boxmean||(a.meanline||{}).visible,c,T;Array.isArray(o.bdPos)?(c=o.bdPos[0],T=o.bdPos[1]):(c=o.bdPos,T=o.bdPos);var k=f.selectAll("path.mean").data(a.type==="box"&&a.boxmean||a.type==="violin"&&a.box.visible&&a.meanline.visible?E.identity:[]);k.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),k.exit().remove(),k.each(function(_){var b=y.c2l(_.pos+x,!0),P=y.l2p(b-c)+s,l=y.l2p(b+T)+s,d=p?(P+l)/2:y.l2p(b)+s,L=h.c2p(_.mean,!0),w=h.c2p(_.mean-_.sd,!0),I=h.c2p(_.mean+_.sd,!0);a.orientation==="h"?M.select(this).attr("d","M"+L+","+P+"V"+l+(u==="sd"?"m0,0L"+w+","+d+"L"+L+","+P+"L"+I+","+d+"Z":"")):M.select(this).attr("d","M"+P+","+L+"H"+l+(u==="sd"?"m0,0L"+d+","+w+"L"+P+","+L+"L"+d+","+I+"Z":""))})}$.exports={plot:g,plotBoxAndWhiskers:v,plotPoints:e,plotBoxMean:r}},24626:function($){$.exports=function(U,t){var M=U.cd,E=U.xaxis,i=U.yaxis,S=[],A,g;if(t===!1)for(A=0;A<M.length;A++)for(g=0;g<(M[A].pts||[]).length;g++)M[A].pts[g].selected=0;else for(A=0;A<M.length;A++)for(g=0;g<(M[A].pts||[]).length;g++){var v=M[A].pts[g],e=E.c2p(v.x),r=i.c2p(v.y);t.contains([e,r],null,v.i,U)?(S.push({pointNumber:v.i,x:E.c2d(v.x),y:i.c2d(v.y)}),v.selected=1):v.selected=0}return S}},58063:function($,U,t){var M=t(39898),E=t(7901),i=t(91424);function S(g,v,e){var r=e||M.select(g).selectAll("g.trace.boxes");r.style("opacity",function(f){return f[0].trace.opacity}),r.each(function(f){var n=M.select(this),a=f[0].trace,o=a.line.width;function h(x,s,u,c){x.style("stroke-width",s+"px").call(E.stroke,u).call(E.fill,c)}var y=n.selectAll("path.box");if(a.type==="candlestick")y.each(function(x){if(!x.empty){var s=M.select(this),u=a[x.dir];h(s,u.line.width,u.line.color,u.fillcolor),s.style("opacity",a.selectedpoints&&!x.selected?.3:1)}});else{h(y,o,a.line.color,a.fillcolor),n.selectAll("path.mean").style({"stroke-width":o,"stroke-dasharray":2*o+"px,"+o+"px"}).call(E.stroke,a.line.color);var p=n.selectAll("path.point");i.pointStyle(p,a,g)}})}function A(g,v,e){var r=v[0].trace,f=e.selectAll("path.point");r.selectedpoints?i.selectedPointStyle(f,r):i.pointStyle(f,r,g)}$.exports={style:S,styleOnSelect:A}},75343:function($,U,t){var M=t(71828).extendFlat,E=t(12663).axisHoverFormat,i=t(2522),S=t(53522);function A(g){return{line:{color:M({},S.line.color,{dflt:g}),width:S.line.width,editType:"style"},fillcolor:S.fillcolor,editType:"style"}}$.exports={xperiod:i.xperiod,xperiod0:i.xperiod0,xperiodalignment:i.xperiodalignment,xhoverformat:E("x"),yhoverformat:E("y"),x:i.x,open:i.open,high:i.high,low:i.low,close:i.close,line:{width:M({},S.line.width,{}),editType:"style"},increasing:A(i.increasing.line.color.dflt),decreasing:A(i.decreasing.line.color.dflt),text:i.text,hovertext:i.hovertext,whiskerwidth:M({},S.whiskerwidth,{dflt:0}),hoverlabel:i.hoverlabel}},41197:function($,U,t){var M=t(71828),E=t(89298),i=t(42973),S=t(3485).calcCommon;$.exports=function(g,v){var e=g._fullLayout,r=E.getFromId(g,v.xaxis),f=E.getFromId(g,v.yaxis),n=r.makeCalcdata(v,"x"),a=i(v,r,"x",n).vals,o=S(g,v,n,a,f,A);return o.length?(M.extendFlat(o[0].t,{num:e._numBoxes,dPos:M.distinctVals(a).minDiff/2,posLetter:"x",valLetter:"y"}),e._numBoxes++,o):[{t:{empty:!0}}]};function A(g,v,e,r){return{min:e,q1:Math.min(g,r),med:r,q3:Math.max(g,r),max:v}}},1026:function($,U,t){var M=t(71828),E=t(7901),i=t(14555),S=t(73927),A=t(75343);$.exports=function(v,e,r,f){function n(o,h){return M.coerce(v,e,A,o,h)}var a=i(v,e,n,f);if(!a){e.visible=!1;return}S(v,e,f,n,{x:!0}),n("xhoverformat"),n("yhoverformat"),n("line.width"),g(v,e,n,"increasing"),g(v,e,n,"decreasing"),n("text"),n("hovertext"),n("whiskerwidth"),f._requestRangeslider[e.xaxis]=!0};function g(v,e,r,f){var n=r(f+".line.color");r(f+".line.width",e.line.width),r(f+".fillcolor",E.addOpacity(n,.5))}},91815:function($,U,t){$.exports={moduleType:"trace",name:"candlestick",basePlotModule:t(93612),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:t(75343),layoutAttributes:t(40094),supplyLayoutDefaults:t(4199).supplyLayoutDefaults,crossTraceCalc:t(37188).crossTraceCalc,supplyDefaults:t(1026),calc:t(41197),plot:t(86047).plot,layerName:"boxlayer",style:t(58063).style,hoverPoints:t(66449).hoverPoints,selectPoints:t(67324)}},13145:function($,U,t){var M=t(11500),E=t(44467);$.exports=function(S,A,g,v,e){var r=v("a");r||(v("da"),v("a0"));var f=v("b");f||(v("db"),v("b0")),i(S,A,g,e)};function i(S,A,g,v){var e=["aaxis","baxis"];e.forEach(function(r){var f=r.charAt(0),n=S[r]||{},a=E.newContainer(A,r),o={noTicklabelstep:!0,tickfont:"x",id:f+"axis",letter:f,font:A.font,name:r,data:S[f],calendar:A.calendar,dfltColor:v,bgColor:g.paper_bgcolor,autotypenumbersDflt:g.autotypenumbers,fullLayout:g};M(n,a,o),a._categories=a._categories||[],!S[r]&&n.type!=="-"&&(S[r]={type:n.type})})}},402:function($,U,t){var M=t(71828).isArrayOrTypedArray;$.exports=function(i){return E(i,0)};function E(i,S){if(!M(i)||S>=10)return null;for(var A=1/0,g=-1/0,v=i.length,e=0;e<v;e++){var r=i[e];if(M(r)){var f=E(r,S+1);f&&(A=Math.min(f[0],A),g=Math.max(f[1],g))}else A=Math.min(r,A),g=Math.max(r,g)}return[A,g]}},99798:function($,U,t){var M=t(41940),E=t(1928),i=t(22399),S=M({editType:"calc"});S.family.dflt='"Open Sans", verdana, arial, sans-serif',S.size.dflt=12,S.color.dflt=i.defaultLine,$.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:E,baxis:E,font:S,color:{valType:"color",dflt:i.defaultLine,editType:"plot"},transforms:void 0}},4536:function($,U,t){var M=t(71828).isArrayOrTypedArray;$.exports=function(E,i,S,A){var g,v,e,r,f,n,a,o,h,y,p,x,s,u=M(S)?"a":"b",c=u==="a"?E.aaxis:E.baxis,T=c.smoothing,k=u==="a"?E.a2i:E.b2j,_=u==="a"?S:A,b=u==="a"?A:S,P=u==="a"?i.a.length:i.b.length,l=u==="a"?i.b.length:i.a.length,d=Math.floor(u==="a"?E.b2j(b):E.a2i(b)),L=u==="a"?function(Q){return E.evalxy([],Q,d)}:function(Q){return E.evalxy([],d,Q)};T&&(e=Math.max(0,Math.min(l-2,d)),r=d-e,v=u==="a"?function(Q,at){return E.dxydi([],Q,e,at,r)}:function(Q,at){return E.dxydj([],e,Q,r,at)});var w=k(_[0]),I=k(_[1]),z=w<I?1:-1,B=(I-w)*1e-8,O=z>0?Math.floor:Math.ceil,R=z>0?Math.ceil:Math.floor,C=z>0?Math.min:Math.max,F=z>0?Math.max:Math.min,N=O(w+B),V=R(I-B);a=L(w);var K=[[a]];for(g=N;g*z<V*z;g+=z)f=[],p=F(w,g),x=C(I,g+z),s=x-p,n=Math.max(0,Math.min(P-2,Math.floor(.5*(p+x)))),o=L(x),T&&(h=v(n,p-n),y=v(n,x-n),f.push([a[0]+h[0]/3*s,a[1]+h[1]/3*s]),f.push([o[0]-y[0]/3*s,o[1]-y[1]/3*s])),f.push(o),K.push(f),a=o;return K}},1928:function($,U,t){var M=t(41940),E=t(22399),i=t(13838),S=t(12663).descriptionWithDates,A=t(30962).overrideAll,g=t(79952).P,v=t(1426).extendFlat;$.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:M({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:i.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:v({},i.labelalias,{editType:"calc"}),tickfont:M({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:S("tick label")},tickformatstops:A(i.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:E.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:v({},g,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:v({},g,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:E.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:M({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},11500:function($,U,t){var M=t(99798),E=t(7901).addOpacity,i=t(73972),S=t(71828),A=t(26218),g=t(96115),v=t(89426),e=t(15258),r=t(21994),f=t(4322);$.exports=function(a,o,h){var y=h.letter,p=h.font||{},x=M[y+"axis"];function s(F,N){return S.coerce(a,o,x,F,N)}function u(F,N){return S.coerce2(a,o,x,F,N)}h.name&&(o._name=h.name,o._id=h.name),s("autotypenumbers",h.autotypenumbersDflt);var c=s("type");if(c==="-"&&(h.data&&n(o,h.data),o.type==="-"?o.type="linear":c=a.type=o.type),s("smoothing"),s("cheatertype"),s("showticklabels"),s("labelprefix",y+" = "),s("labelsuffix"),s("showtickprefix"),s("showticksuffix"),s("separatethousands"),s("tickformat"),s("exponentformat"),s("minexponent"),s("showexponent"),s("categoryorder"),s("tickmode"),s("tickvals"),s("ticktext"),s("tick0"),s("dtick"),o.tickmode==="array"&&(s("arraytick0"),s("arraydtick")),s("labelpadding"),o._hovertitle=y,c==="date"){var T=i.getComponentMethod("calendars","handleDefaults");T(a,o,"calendar",h.calendar)}r(o,h.fullLayout),o.c2p=S.identity;var k=s("color",h.dfltColor),_=k===a.color?k:p.color,b=s("title.text");b&&(S.coerceFont(s,"title.font",{family:p.family,size:S.bigFont(p.size),color:_}),s("title.offset")),s("tickangle");var P=s("autorange",!o.isValidRange(a.range));P&&s("rangemode"),s("range"),o.cleanRange(),s("fixedrange"),A(a,o,s,c),v(a,o,s,c,h),g(a,o,s,c,h),e(a,o,s,{data:h.data,dataAttr:y});var l=u("gridcolor",E(k,.3)),d=u("gridwidth"),L=u("griddash"),w=s("showgrid");w||(delete o.gridcolor,delete o.gridwidth,delete o.griddash);var I=u("startlinecolor",k),z=u("startlinewidth",d),B=s("startline",o.showgrid||!!I||!!z);B||(delete o.startlinecolor,delete o.startlinewidth);var O=u("endlinecolor",k),R=u("endlinewidth",d),C=s("endline",o.showgrid||!!O||!!R);return C||(delete o.endlinecolor,delete o.endlinewidth),w?(s("minorgridcount"),s("minorgridwidth",d),s("minorgriddash",L),s("minorgridcolor",E(l,.06)),o.minorgridcount||(delete o.minorgridwidth,delete o.minorgriddash,delete o.minorgridcolor)):(delete o.gridcolor,delete o.gridwidth,delete o.griddash),o.showticklabels==="none"&&(delete o.tickfont,delete o.tickangle,delete o.showexponent,delete o.exponentformat,delete o.minexponent,delete o.tickformat,delete o.showticksuffix,delete o.showtickprefix),o.showticksuffix||delete o.ticksuffix,o.showtickprefix||delete o.tickprefix,s("tickmode"),o};function n(a,o){if(a.type==="-"){var h=a._id,y=h.charAt(0),p=y+"calendar",x=a[p];a.type=f(o,x,{autotypenumbers:a.autotypenumbers})}}},25281:function($,U,t){var M=t(89298),E=t(71828).isArray1D,i=t(53824),S=t(402),A=t(20347),g=t(83311),v=t(44807),e=t(4742),r=t(72505),f=t(68296),n=t(11435);$.exports=function(a,o){var h=M.getFromId(a,o.xaxis),y=M.getFromId(a,o.yaxis),p=o.aaxis,x=o.baxis,s=o.x,u=o.y,c=[];s&&E(s)&&c.push("x"),u&&E(u)&&c.push("y"),c.length&&f(o,p,x,"a","b",c);var T=o._a=o._a||o.a,k=o._b=o._b||o.b;s=o._x||o.x,u=o._y||o.y;var _={};if(o._cheater){var b=p.cheatertype==="index"?T.length:T,P=x.cheatertype==="index"?k.length:k;s=i(b,P,o.cheaterslope)}o._x=s=e(s),o._y=u=e(u),r(s,T,k),r(u,T,k),n(o),o.setScale();var l=S(s),d=S(u),L=.5*(l[1]-l[0]),w=.5*(l[1]+l[0]),I=.5*(d[1]-d[0]),z=.5*(d[1]+d[0]),B=1.3;return l=[w-L*B,w+L*B],d=[z-I*B,z+I*B],o._extremes[h._id]=M.findExtremes(h,l,{padded:!0}),o._extremes[y._id]=M.findExtremes(y,d,{padded:!0}),A(o,"a","b"),A(o,"b","a"),g(o,p),g(o,x),_.clipsegments=v(o._xctrl,o._yctrl,p,x),_.x=s,_.y=u,_.a=T,_.b=k,[_]}},44807:function($){$.exports=function(U,t,M,E){var i,S,A,g=[],v=!!M.smoothing,e=!!E.smoothing,r=U[0].length-1,f=U.length-1;for(i=0,S=[],A=[];i<=r;i++)S[i]=U[0][i],A[i]=t[0][i];for(g.push({x:S,y:A,bicubic:v}),i=0,S=[],A=[];i<=f;i++)S[i]=U[i][r],A[i]=t[i][r];for(g.push({x:S,y:A,bicubic:e}),i=r,S=[],A=[];i>=0;i--)S[r-i]=U[f][i],A[r-i]=t[f][i];for(g.push({x:S,y:A,bicubic:v}),i=f,S=[],A=[];i>=0;i--)S[f-i]=U[i][0],A[f-i]=t[i][0];return g.push({x:S,y:A,bicubic:e}),g}},20347:function($,U,t){var M=t(89298),E=t(1426).extendFlat;$.exports=function(i,S,A){var g,v,e,r,f,n,a,o,h,y,p,x,s,u,c=i["_"+S],T=i[S+"axis"],k=T._gridlines=[],_=T._minorgridlines=[],b=T._boundarylines=[],P=i["_"+A],l=i[A+"axis"];T.tickmode==="array"&&(T.tickvals=c.slice());var d=i._xctrl,L=i._yctrl,w=d[0].length,I=d.length,z=i._a.length,B=i._b.length;M.prepTicks(T),T.tickmode==="array"&&delete T.tickvals;var O=T.smoothing?3:1;function R(F){var N,V,K,Q,at,it,q,W,Z,G,et,nt,X=[],Y=[],ot={};if(S==="b")for(V=i.b2j(F),K=Math.floor(Math.max(0,Math.min(B-2,V))),Q=V-K,ot.length=B,ot.crossLength=z,ot.xy=function(rt){return i.evalxy([],rt,V)},ot.dxy=function(rt,ht){return i.dxydi([],rt,K,ht,Q)},N=0;N<z;N++)it=Math.min(z-2,N),q=N-it,W=i.evalxy([],N,V),l.smoothing&&N>0&&(Z=i.dxydi([],N-1,K,0,Q),X.push(at[0]+Z[0]/3),Y.push(at[1]+Z[1]/3),G=i.dxydi([],N-1,K,1,Q),X.push(W[0]-G[0]/3),Y.push(W[1]-G[1]/3)),X.push(W[0]),Y.push(W[1]),at=W;else for(N=i.a2i(F),it=Math.floor(Math.max(0,Math.min(z-2,N))),q=N-it,ot.length=z,ot.crossLength=B,ot.xy=function(rt){return i.evalxy([],N,rt)},ot.dxy=function(rt,ht){return i.dxydj([],it,rt,q,ht)},V=0;V<B;V++)K=Math.min(B-2,V),Q=V-K,W=i.evalxy([],N,V),l.smoothing&&V>0&&(et=i.dxydj([],it,V-1,q,0),X.push(at[0]+et[0]/3),Y.push(at[1]+et[1]/3),nt=i.dxydj([],it,V-1,q,1),X.push(W[0]-nt[0]/3),Y.push(W[1]-nt[1]/3)),X.push(W[0]),Y.push(W[1]),at=W;return ot.axisLetter=S,ot.axis=T,ot.crossAxis=l,ot.value=F,ot.constvar=A,ot.index=o,ot.x=X,ot.y=Y,ot.smoothing=l.smoothing,ot}function C(F){var N,V,K,Q,at,it=[],q=[],W={};if(W.length=c.length,W.crossLength=P.length,S==="b")for(K=Math.max(0,Math.min(B-2,F)),at=Math.min(1,Math.max(0,F-K)),W.xy=function(Z){return i.evalxy([],Z,F)},W.dxy=function(Z,G){return i.dxydi([],Z,K,G,at)},N=0;N<w;N++)it[N]=d[F*O][N],q[N]=L[F*O][N];else for(V=Math.max(0,Math.min(z-2,F)),Q=Math.min(1,Math.max(0,F-V)),W.xy=function(Z){return i.evalxy([],F,Z)},W.dxy=function(Z,G){return i.dxydj([],V,Z,Q,G)},N=0;N<I;N++)it[N]=d[N][F*O],q[N]=L[N][F*O];return W.axisLetter=S,W.axis=T,W.crossAxis=l,W.value=c[F],W.constvar=A,W.index=F,W.x=it,W.y=q,W.smoothing=l.smoothing,W}if(T.tickmode==="array"){for(r=5e-15,f=[Math.floor((c.length-1-T.arraytick0)/T.arraydtick*(1+r)),Math.ceil(-T.arraytick0/T.arraydtick/(1+r))].sort(function(F,N){return F-N}),n=f[0]-1,a=f[1]+1,o=n;o<a;o++)v=T.arraytick0+T.arraydtick*o,!(v<0||v>c.length-1)&&k.push(E(C(v),{color:T.gridcolor,width:T.gridwidth,dash:T.griddash}));for(o=n;o<a;o++)if(e=T.arraytick0+T.arraydtick*o,p=Math.min(e+T.arraydtick,c.length-1),!(e<0||e>c.length-1)&&!(p<0||p>c.length-1))for(x=c[e],s=c[p],g=0;g<T.minorgridcount;g++)u=p-e,!(u<=0)&&(y=x+(s-x)*(g+1)/(T.minorgridcount+1)*(T.arraydtick/u),!(y<c[0]||y>c[c.length-1])&&_.push(E(R(y),{color:T.minorgridcolor,width:T.minorgridwidth,dash:T.minorgriddash})));T.startline&&b.push(E(C(0),{color:T.startlinecolor,width:T.startlinewidth})),T.endline&&b.push(E(C(c.length-1),{color:T.endlinecolor,width:T.endlinewidth}))}else{for(r=5e-15,f=[Math.floor((c[c.length-1]-T.tick0)/T.dtick*(1+r)),Math.ceil((c[0]-T.tick0)/T.dtick/(1+r))].sort(function(F,N){return F-N}),n=f[0],a=f[1],o=n;o<=a;o++)h=T.tick0+T.dtick*o,k.push(E(R(h),{color:T.gridcolor,width:T.gridwidth,dash:T.griddash}));for(o=n-1;o<a+1;o++)for(h=T.tick0+T.dtick*o,g=0;g<T.minorgridcount;g++)y=h+T.dtick*(g+1)/(T.minorgridcount+1),!(y<c[0]||y>c[c.length-1])&&_.push(E(R(y),{color:T.minorgridcolor,width:T.minorgridwidth,dash:T.minorgriddash}));T.startline&&b.push(E(R(c[0]),{color:T.startlinecolor,width:T.startlinewidth})),T.endline&&b.push(E(R(c[c.length-1]),{color:T.endlinecolor,width:T.endlinewidth}))}}},83311:function($,U,t){var M=t(89298),E=t(1426).extendFlat;$.exports=function(i,S){var A,g,v,e,r,f=S._labels=[],n=S._gridlines;for(A=0;A<n.length;A++)r=n[A],["start","both"].indexOf(S.showticklabels)!==-1&&(g=M.tickText(S,r.value),E(g,{prefix:v,suffix:e,endAnchor:!0,xy:r.xy(0),dxy:r.dxy(0,0),axis:r.axis,length:r.crossAxis.length,font:r.axis.tickfont,isFirst:A===0,isLast:A===n.length-1}),f.push(g)),["end","both"].indexOf(S.showticklabels)!==-1&&(g=M.tickText(S,r.value),E(g,{endAnchor:!1,xy:r.xy(r.crossLength-1),dxy:r.dxy(r.crossLength-2,1),axis:r.axis,length:r.crossAxis.length,font:r.axis.tickfont,isFirst:A===0,isLast:A===n.length-1}),f.push(g))}},42048:function($){var U=.5;$.exports=function(t,M,E,i){var S=t[0]-M[0],A=t[1]-M[1],g=E[0]-M[0],v=E[1]-M[1],e=Math.pow(S*S+A*A,U/2),r=Math.pow(g*g+v*v,U/2),f=(r*r*S-e*e*g)*i,n=(r*r*A-e*e*v)*i,a=r*(e+r)*3,o=e*(e+r)*3;return[[M[0]+(a&&f/a),M[1]+(a&&n/a)],[M[0]-(o&&f/o),M[1]-(o&&n/o)]]}},53824:function($,U,t){var M=t(71828).isArrayOrTypedArray;$.exports=function(E,i,S){var A,g,v,e,r,f,n=[],a=M(E)?E.length:E,o=M(i)?i.length:i,h=M(E)?E:null,y=M(i)?i:null;h&&(v=(h.length-1)/(h[h.length-1]-h[0])/(a-1)),y&&(e=(y.length-1)/(y[y.length-1]-y[0])/(o-1));var p,x=1/0,s=-1/0;for(g=0;g<o;g++)for(n[g]=[],f=y?(y[g]-y[0])*e:g/(o-1),A=0;A<a;A++)r=h?(h[A]-h[0])*v:A/(a-1),p=r-f*S,x=Math.min(p,x),s=Math.max(p,s),n[g][A]=p;var u=1/(s-x),c=-x*u;for(g=0;g<o;g++)for(A=0;A<a;A++)n[g][A]=u*n[g][A]+c;return n}},45664:function($,U,t){var M=t(42048),E=t(71828).ensureArray;function i(S,A,g){var v=-.5*g[0]+1.5*A[0],e=-.5*g[1]+1.5*A[1];return[(2*v+S[0])/3,(2*e+S[1])/3]}$.exports=function(S,A,g,v,e,r){var f,n,a,o,h,y,p,x,s,u,c=g[0].length,T=g.length,k=e?3*c-2:c,_=r?3*T-2:T;for(S=E(S,_),A=E(A,_),a=0;a<_;a++)S[a]=E(S[a],k),A[a]=E(A[a],k);for(n=0,o=0;n<T;n++,o+=r?3:1)for(h=S[o],y=A[o],p=g[n],x=v[n],f=0,a=0;f<c;f++,a+=e?3:1)h[a]=p[f],y[a]=x[f];if(e)for(n=0,o=0;n<T;n++,o+=r?3:1){for(f=1,a=3;f<c-1;f++,a+=3)s=M([g[n][f-1],v[n][f-1]],[g[n][f],v[n][f]],[g[n][f+1],v[n][f+1]],e),S[o][a-1]=s[0][0],A[o][a-1]=s[0][1],S[o][a+1]=s[1][0],A[o][a+1]=s[1][1];u=i([S[o][0],A[o][0]],[S[o][2],A[o][2]],[S[o][3],A[o][3]]),S[o][1]=u[0],A[o][1]=u[1],u=i([S[o][k-1],A[o][k-1]],[S[o][k-3],A[o][k-3]],[S[o][k-4],A[o][k-4]]),S[o][k-2]=u[0],A[o][k-2]=u[1]}if(r)for(a=0;a<k;a++){for(o=3;o<_-3;o+=3)s=M([S[o-3][a],A[o-3][a]],[S[o][a],A[o][a]],[S[o+3][a],A[o+3][a]],r),S[o-1][a]=s[0][0],A[o-1][a]=s[0][1],S[o+1][a]=s[1][0],A[o+1][a]=s[1][1];u=i([S[0][a],A[0][a]],[S[2][a],A[2][a]],[S[3][a],A[3][a]]),S[1][a]=u[0],A[1][a]=u[1],u=i([S[_-1][a],A[_-1][a]],[S[_-3][a],A[_-3][a]],[S[_-4][a],A[_-4][a]]),S[_-2][a]=u[0],A[_-2][a]=u[1]}if(e&&r)for(o=1;o<_;o+=(o+1)%3===0?2:1){for(a=3;a<k-3;a+=3)s=M([S[o][a-3],A[o][a-3]],[S[o][a],A[o][a]],[S[o][a+3],A[o][a+3]],e),S[o][a-1]=.5*(S[o][a-1]+s[0][0]),A[o][a-1]=.5*(A[o][a-1]+s[0][1]),S[o][a+1]=.5*(S[o][a+1]+s[1][0]),A[o][a+1]=.5*(A[o][a+1]+s[1][1]);u=i([S[o][0],A[o][0]],[S[o][2],A[o][2]],[S[o][3],A[o][3]]),S[o][1]=.5*(S[o][1]+u[0]),A[o][1]=.5*(A[o][1]+u[1]),u=i([S[o][k-1],A[o][k-1]],[S[o][k-3],A[o][k-3]],[S[o][k-4],A[o][k-4]]),S[o][k-2]=.5*(S[o][k-2]+u[0]),A[o][k-2]=.5*(A[o][k-2]+u[1])}return[S,A]}},35509:function($){$.exports={RELATIVE_CULL_TOLERANCE:1e-6}},54495:function($){$.exports=function(U,t,M){return t&&M?function(E,i,S,A,g){E||(E=[]);var v,e,r,f,n,a;i*=3,S*=3;var o=A*A,h=1-A,y=h*h,p=h*A*2,x=-3*y,s=3*(y-p),u=3*(p-o),c=3*o,T=g*g,k=T*g,_=1-g,b=_*_,P=b*_;for(a=0;a<U.length;a++)n=U[a],v=x*n[S][i]+s*n[S][i+1]+u*n[S][i+2]+c*n[S][i+3],e=x*n[S+1][i]+s*n[S+1][i+1]+u*n[S+1][i+2]+c*n[S+1][i+3],r=x*n[S+2][i]+s*n[S+2][i+1]+u*n[S+2][i+2]+c*n[S+2][i+3],f=x*n[S+3][i]+s*n[S+3][i+1]+u*n[S+3][i+2]+c*n[S+3][i+3],E[a]=P*v+3*(b*g*e+_*T*r)+k*f;return E}:t?function(E,i,S,A,g){E||(E=[]);var v,e,r,f;i*=3;var n=A*A,a=1-A,o=a*a,h=a*A*2,y=-3*o,p=3*(o-h),x=3*(h-n),s=3*n,u=1-g;for(r=0;r<U.length;r++)f=U[r],v=y*f[S][i]+p*f[S][i+1]+x*f[S][i+2]+s*f[S][i+3],e=y*f[S+1][i]+p*f[S+1][i+1]+x*f[S+1][i+2]+s*f[S+1][i+3],E[r]=u*v+g*e;return E}:M?function(E,i,S,A,g){E||(E=[]);var v,e,r,f,n,a;S*=3;var o=g*g,h=o*g,y=1-g,p=y*y,x=p*y;for(n=0;n<U.length;n++)a=U[n],v=a[S][i+1]-a[S][i],e=a[S+1][i+1]-a[S+1][i],r=a[S+2][i+1]-a[S+2][i],f=a[S+3][i+1]-a[S+3][i],E[n]=x*v+3*(p*g*e+y*o*r)+h*f;return E}:function(E,i,S,A,g){E||(E=[]);var v,e,r,f,n=1-g;for(r=0;r<U.length;r++)f=U[r],v=f[S][i+1]-f[S][i],e=f[S+1][i+1]-f[S+1][i],E[r]=n*v+g*e;return E}}},73057:function($){$.exports=function(U,t,M){return t&&M?function(E,i,S,A,g){E||(E=[]);var v,e,r,f,n,a;i*=3,S*=3;var o=A*A,h=o*A,y=1-A,p=y*y,x=p*y,s=g*g,u=1-g,c=u*u,T=u*g*2,k=-3*c,_=3*(c-T),b=3*(T-s),P=3*s;for(a=0;a<U.length;a++)n=U[a],v=k*n[S][i]+_*n[S+1][i]+b*n[S+2][i]+P*n[S+3][i],e=k*n[S][i+1]+_*n[S+1][i+1]+b*n[S+2][i+1]+P*n[S+3][i+1],r=k*n[S][i+2]+_*n[S+1][i+2]+b*n[S+2][i+2]+P*n[S+3][i+2],f=k*n[S][i+3]+_*n[S+1][i+3]+b*n[S+2][i+3]+P*n[S+3][i+3],E[a]=x*v+3*(p*A*e+y*o*r)+h*f;return E}:t?function(E,i,S,A,g){E||(E=[]);var v,e,r,f,n,a;i*=3;var o=g*g,h=o*g,y=1-g,p=y*y,x=p*y;for(n=0;n<U.length;n++)a=U[n],v=a[S+1][i]-a[S][i],e=a[S+1][i+1]-a[S][i+1],r=a[S+1][i+2]-a[S][i+2],f=a[S+1][i+3]-a[S][i+3],E[n]=x*v+3*(p*g*e+y*o*r)+h*f;return E}:M?function(E,i,S,A,g){E||(E=[]);var v,e,r,f;S*=3;var n=1-A,a=g*g,o=1-g,h=o*o,y=o*g*2,p=-3*h,x=3*(h-y),s=3*(y-a),u=3*a;for(r=0;r<U.length;r++)f=U[r],v=p*f[S][i]+x*f[S+1][i]+s*f[S+2][i]+u*f[S+3][i],e=p*f[S][i+1]+x*f[S+1][i+1]+s*f[S+2][i+1]+u*f[S+3][i+1],E[r]=n*v+A*e;return E}:function(E,i,S,A,g){E||(E=[]);var v,e,r,f,n=1-A;for(r=0;r<U.length;r++)f=U[r],v=f[S+1][i]-f[S][i],e=f[S+1][i+1]-f[S][i+1],E[r]=n*v+A*e;return E}}},20349:function($){$.exports=function(U,t,M,E,i){var S=t-2,A=M-2;return E&&i?function(g,v,e){g||(g=[]);var r,f,n,a,o,h,y=Math.max(0,Math.min(Math.floor(v),S)),p=Math.max(0,Math.min(Math.floor(e),A)),x=Math.max(0,Math.min(1,v-y)),s=Math.max(0,Math.min(1,e-p));y*=3,p*=3;var u=x*x,c=u*x,T=1-x,k=T*T,_=k*T,b=s*s,P=b*s,l=1-s,d=l*l,L=d*l;for(h=0;h<U.length;h++)o=U[h],r=_*o[p][y]+3*(k*x*o[p][y+1]+T*u*o[p][y+2])+c*o[p][y+3],f=_*o[p+1][y]+3*(k*x*o[p+1][y+1]+T*u*o[p+1][y+2])+c*o[p+1][y+3],n=_*o[p+2][y]+3*(k*x*o[p+2][y+1]+T*u*o[p+2][y+2])+c*o[p+2][y+3],a=_*o[p+3][y]+3*(k*x*o[p+3][y+1]+T*u*o[p+3][y+2])+c*o[p+3][y+3],g[h]=L*r+3*(d*s*f+l*b*n)+P*a;return g}:E?function(g,v,e){g||(g=[]);var r=Math.max(0,Math.min(Math.floor(v),S)),f=Math.max(0,Math.min(Math.floor(e),A)),n=Math.max(0,Math.min(1,v-r)),a=Math.max(0,Math.min(1,e-f)),o,h,y,p,x,s;r*=3;var u=n*n,c=u*n,T=1-n,k=T*T,_=k*T,b=1-a;for(x=0;x<U.length;x++)s=U[x],o=b*s[f][r]+a*s[f+1][r],h=b*s[f][r+1]+a*s[f+1][r+1],y=b*s[f][r+2]+a*s[f+1][r+1],p=b*s[f][r+3]+a*s[f+1][r+1],g[x]=_*o+3*(k*n*h+T*u*y)+c*p;return g}:i?function(g,v,e){g||(g=[]);var r=Math.max(0,Math.min(Math.floor(v),S)),f=Math.max(0,Math.min(Math.floor(e),A)),n=Math.max(0,Math.min(1,v-r)),a=Math.max(0,Math.min(1,e-f)),o,h,y,p,x,s;f*=3;var u=a*a,c=u*a,T=1-a,k=T*T,_=k*T,b=1-n;for(x=0;x<U.length;x++)s=U[x],o=b*s[f][r]+n*s[f][r+1],h=b*s[f+1][r]+n*s[f+1][r+1],y=b*s[f+2][r]+n*s[f+2][r+1],p=b*s[f+3][r]+n*s[f+3][r+1],g[x]=_*o+3*(k*a*h+T*u*y)+c*p;return g}:function(g,v,e){g||(g=[]);var r=Math.max(0,Math.min(Math.floor(v),S)),f=Math.max(0,Math.min(Math.floor(e),A)),n=Math.max(0,Math.min(1,v-r)),a=Math.max(0,Math.min(1,e-f)),o,h,y,p,x=1-a,s=1-n;for(y=0;y<U.length;y++)p=U[y],o=s*p[f][r]+n*p[f][r+1],h=s*p[f+1][r]+n*p[f+1][r+1],g[y]=x*o+a*h;return g}}},92087:function($,U,t){var M=t(71828),E=t(19237),i=t(13145),S=t(99798),A=t(22399);$.exports=function(g,v,e,r){function f(o,h){return M.coerce(g,v,S,o,h)}v._clipPathId="clip"+v.uid+"carpet";var n=f("color",A.defaultLine);if(M.coerceFont(f,"font"),f("carpet"),i(g,v,r,f,n),!v.a||!v.b){v.visible=!1;return}v.a.length<3&&(v.aaxis.smoothing=0),v.b.length<3&&(v.baxis.smoothing=0);var a=E(g,v,f);a||(v.visible=!1),v._cheater&&f("cheaterslope")}},21462:function($,U,t){$.exports={attributes:t(99798),supplyDefaults:t(92087),plot:t(89740),calc:t(25281),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:t(93612),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},22882:function($){$.exports=function(U,t){for(var M=U._fullData.length,E,i=0;i<M;i++){var S=U._fullData[i];if(S.index!==t.index&&S.type==="carpet"&&(E||(E=S),S.carpet===t.carpet))return S}return E}},67961:function($){$.exports=function(U,t,M){if(U.length===0)return"";var E,i=[],S=M?3:1;for(E=0;E<U.length;E+=S)i.push(U[E]+","+t[E]),M&&E<U.length-S&&(i.push("C"),i.push([U[E+1]+","+t[E+1],U[E+2]+","+t[E+2]+" "].join(" ")));return i.join(M?"":"L")}},27669:function($,U,t){var M=t(71828).isArrayOrTypedArray;$.exports=function(E,i,S){var A;for(M(E)?E.length>i.length&&(E=E.slice(0,i.length)):E=[],A=0;A<i.length;A++)E[A]=S(i[A]);return E}},11651:function($){$.exports=function(U,t,M,E,i,S){var A=i[0]*U.dpdx(t),g=i[1]*U.dpdy(M),v=1,e=1;if(S){var r=Math.sqrt(i[0]*i[0]+i[1]*i[1]),f=Math.sqrt(S[0]*S[0]+S[1]*S[1]),n=(i[0]*S[0]+i[1]*S[1])/r/f;e=Math.max(0,n)}var a=Math.atan2(g,A)*180/Math.PI;return a<-90?(a+=180,v=-v):a>90&&(a-=180,v=-v),{angle:a,flip:v,p:U.c2p(E,t,M),offsetMultplier:e}}},89740:function($,U,t){var M=t(39898),E=t(91424),i=t(27669),S=t(67961),A=t(11651),g=t(63893),v=t(71828),e=v.strRotate,r=v.strTranslate,f=t(18783);$.exports=function(s,u,c,T){var k=s._context.staticPlot,_=u.xaxis,b=u.yaxis,P=s._fullLayout,l=P._clips;v.makeTraceGroups(T,c,"trace").each(function(d){var L=M.select(this),w=d[0],I=w.trace,z=I.aaxis,B=I.baxis,O=v.ensureSingle(L,"g","minorlayer"),R=v.ensureSingle(L,"g","majorlayer"),C=v.ensureSingle(L,"g","boundarylayer"),F=v.ensureSingle(L,"g","labellayer");L.style("opacity",I.opacity),a(_,b,R,z,"a",z._gridlines,!0),a(_,b,R,B,"b",B._gridlines,!0),a(_,b,O,z,"a",z._minorgridlines,!0),a(_,b,O,B,"b",B._minorgridlines,!0),a(_,b,C,z,"a-boundary",z._boundarylines,k),a(_,b,C,B,"b-boundary",B._boundarylines,k);var N=o(s,_,b,I,w,F,z._labels,"a-label"),V=o(s,_,b,I,w,F,B._labels,"b-label");h(s,F,I,w,_,b,N,V),n(I,w,l,_,b)})};function n(s,u,c,T,k){var _,b,P,l,d=c.select("#"+s._clipPathId);d.size()||(d=c.append("clipPath").classed("carpetclip",!0));var L=v.ensureSingle(d,"path","carpetboundary"),w=u.clipsegments,I=[];for(l=0;l<w.length;l++)_=w[l],b=i([],_.x,T.c2p),P=i([],_.y,k.c2p),I.push(S(b,P,_.bicubic));var z="M"+I.join("L")+"Z";d.attr("id",s._clipPathId),L.attr("d",z)}function a(s,u,c,T,k,_,b){var P="const-"+k+"-lines",l=c.selectAll("."+P).data(_);l.enter().append("path").classed(P,!0).style("vector-effect",b?"none":"non-scaling-stroke"),l.each(function(d){var L=d,w=L.x,I=L.y,z=i([],w,s.c2p),B=i([],I,u.c2p),O="M"+S(z,B,L.smoothing),R=M.select(this);R.attr("d",O).style("stroke-width",L.width).style("stroke",L.color).style("stroke-dasharray",E.dashStyle(L.dash,L.width)).style("fill","none")}),l.exit().remove()}function o(s,u,c,T,k,_,b,P){var l=_.selectAll("text."+P).data(b);l.enter().append("text").classed(P,!0);var d=0,L={};return l.each(function(w,I){var z;if(w.axis.tickangle==="auto")z=A(T,u,c,w.xy,w.dxy);else{var B=(w.axis.tickangle+180)*Math.PI/180;z=A(T,u,c,w.xy,[Math.cos(B),Math.sin(B)])}I||(L={angle:z.angle,flip:z.flip});var O=(w.endAnchor?-1:1)*z.flip,R=M.select(this).attr({"text-anchor":O>0?"start":"end","data-notex":1}).call(E.font,w.font).text(w.text).call(g.convertToTspans,s),C=E.bBox(this);R.attr("transform",r(z.p[0],z.p[1])+e(z.angle)+r(w.axis.labelpadding*O,C.height*.3)),d=Math.max(d,C.width+w.axis.labelpadding)}),l.exit().remove(),L.maxExtent=d,L}function h(s,u,c,T,k,_,b,P){var l,d,L,w,I=v.aggNums(Math.min,null,c.a),z=v.aggNums(Math.max,null,c.a),B=v.aggNums(Math.min,null,c.b),O=v.aggNums(Math.max,null,c.b);l=.5*(I+z),d=B,L=c.ab2xy(l,d,!0),w=c.dxyda_rough(l,d),b.angle===void 0&&v.extendFlat(b,A(c,k,_,L,c.dxydb_rough(l,d))),x(s,u,c,T,L,w,c.aaxis,k,_,b,"a-title"),l=I,d=.5*(B+O),L=c.ab2xy(l,d,!0),w=c.dxydb_rough(l,d),P.angle===void 0&&v.extendFlat(P,A(c,k,_,L,c.dxyda_rough(l,d))),x(s,u,c,T,L,w,c.baxis,k,_,P,"b-title")}var y=f.LINE_SPACING,p=(1-f.MID_SHIFT)/y+1;function x(s,u,c,T,k,_,b,P,l,d,L){var w=[];b.title.text&&w.push(b.title.text);var I=u.selectAll("text."+L).data(w),z=d.maxExtent;I.enter().append("text").classed(L,!0),I.each(function(){var B=A(c,P,l,k,_);["start","both"].indexOf(b.showticklabels)===-1&&(z=0);var O=b.title.font.size;z+=O+b.title.offset;var R=d.angle+(d.flip<0?180:0),C=(R-B.angle+450)%360,F=C>90&&C<270,N=M.select(this);N.text(b.title.text).call(g.convertToTspans,s),F&&(z=(-g.lineCount(N)+p)*y*O-z),N.attr("transform",r(B.p[0],B.p[1])+e(B.angle)+r(0,z)).attr("text-anchor","middle").call(E.font,b.title.font)}),I.exit().remove()}},11435:function($,U,t){var M=t(35509),E=t(65888).findBin,i=t(45664),S=t(20349),A=t(54495),g=t(73057);$.exports=function(v){var e=v._a,r=v._b,f=e.length,n=r.length,a=v.aaxis,o=v.baxis,h=e[0],y=e[f-1],p=r[0],x=r[n-1],s=e[e.length-1]-e[0],u=r[r.length-1]-r[0],c=s*M.RELATIVE_CULL_TOLERANCE,T=u*M.RELATIVE_CULL_TOLERANCE;h-=c,y+=c,p-=T,x+=T,v.isVisible=function(k,_){return k>h&&k<y&&_>p&&_<x},v.isOccluded=function(k,_){return k<h||k>y||_<p||_>x},v.setScale=function(){var k=v._x,_=v._y,b=i(v._xctrl,v._yctrl,k,_,a.smoothing,o.smoothing);v._xctrl=b[0],v._yctrl=b[1],v.evalxy=S([v._xctrl,v._yctrl],f,n,a.smoothing,o.smoothing),v.dxydi=A([v._xctrl,v._yctrl],a.smoothing,o.smoothing),v.dxydj=g([v._xctrl,v._yctrl],a.smoothing,o.smoothing)},v.i2a=function(k){var _=Math.max(0,Math.floor(k[0]),f-2),b=k[0]-_;return(1-b)*e[_]+b*e[_+1]},v.j2b=function(k){var _=Math.max(0,Math.floor(k[1]),f-2),b=k[1]-_;return(1-b)*r[_]+b*r[_+1]},v.ij2ab=function(k){return[v.i2a(k[0]),v.j2b(k[1])]},v.a2i=function(k){var _=Math.max(0,Math.min(E(k,e),f-2)),b=e[_],P=e[_+1];return Math.max(0,Math.min(f-1,_+(k-b)/(P-b)))},v.b2j=function(k){var _=Math.max(0,Math.min(E(k,r),n-2)),b=r[_],P=r[_+1];return Math.max(0,Math.min(n-1,_+(k-b)/(P-b)))},v.ab2ij=function(k){return[v.a2i(k[0]),v.b2j(k[1])]},v.i2c=function(k,_){return v.evalxy([],k,_)},v.ab2xy=function(k,_,b){if(!b&&(k<e[0]||k>e[f-1]|_<r[0]||_>r[n-1]))return[!1,!1];var P=v.a2i(k),l=v.b2j(_),d=v.evalxy([],P,l);if(b){var L=0,w=0,I=[],z,B,O,R;k<e[0]?(z=0,B=0,L=(k-e[0])/(e[1]-e[0])):k>e[f-1]?(z=f-2,B=1,L=(k-e[f-1])/(e[f-1]-e[f-2])):(z=Math.max(0,Math.min(f-2,Math.floor(P))),B=P-z),_<r[0]?(O=0,R=0,w=(_-r[0])/(r[1]-r[0])):_>r[n-1]?(O=n-2,R=1,w=(_-r[n-1])/(r[n-1]-r[n-2])):(O=Math.max(0,Math.min(n-2,Math.floor(l))),R=l-O),L&&(v.dxydi(I,z,O,B,R),d[0]+=I[0]*L,d[1]+=I[1]*L),w&&(v.dxydj(I,z,O,B,R),d[0]+=I[0]*w,d[1]+=I[1]*w)}return d},v.c2p=function(k,_,b){return[_.c2p(k[0]),b.c2p(k[1])]},v.p2x=function(k,_,b){return[_.p2c(k[0]),b.p2c(k[1])]},v.dadi=function(k){var _=Math.max(0,Math.min(e.length-2,k));return e[_+1]-e[_]},v.dbdj=function(k){var _=Math.max(0,Math.min(r.length-2,k));return r[_+1]-r[_]},v.dxyda=function(k,_,b,P){var l=v.dxydi(null,k,_,b,P),d=v.dadi(k,b);return[l[0]/d,l[1]/d]},v.dxydb=function(k,_,b,P){var l=v.dxydj(null,k,_,b,P),d=v.dbdj(_,P);return[l[0]/d,l[1]/d]},v.dxyda_rough=function(k,_,b){var P=s*(b||.1),l=v.ab2xy(k+P,_,!0),d=v.ab2xy(k-P,_,!0);return[(l[0]-d[0])*.5/P,(l[1]-d[1])*.5/P]},v.dxydb_rough=function(k,_,b){var P=u*(b||.1),l=v.ab2xy(k,_+P,!0),d=v.ab2xy(k,_-P,!0);return[(l[0]-d[0])*.5/P,(l[1]-d[1])*.5/P]},v.dpdx=function(k){return k._m},v.dpdy=function(k){return k._m}}},72505:function($,U,t){var M=t(71828);$.exports=function(E,i,S){var A,g,v,e=[],r=[],f=E[0].length,n=E.length;function a(V,K){var Q=0,at,it=0;return V>0&&(at=E[K][V-1])!==void 0&&(it++,Q+=at),V<f-1&&(at=E[K][V+1])!==void 0&&(it++,Q+=at),K>0&&(at=E[K-1][V])!==void 0&&(it++,Q+=at),K<n-1&&(at=E[K+1][V])!==void 0&&(it++,Q+=at),Q/Math.max(1,it)}var o=0;for(A=0;A<f;A++)for(g=0;g<n;g++)E[g][A]===void 0&&(e.push(A),r.push(g),E[g][A]=a(A,g)),o=Math.max(o,Math.abs(E[g][A]));if(!e.length)return E;var h,y,p,x,s,u,c,T,k,_,b,P=1e-5,l=0,d=100,L=0,w=e.length;do{for(l=0,v=0;v<w;v++){A=e[v],g=r[v];var I=0,z=0,B,O,R,C,F,N;A===0?(F=Math.min(f-1,2),R=i[F],C=i[1],B=E[g][F],O=E[g][1],z+=O+(O-B)*(i[0]-C)/(C-R),I++):A===f-1&&(F=Math.max(0,f-3),R=i[F],C=i[f-2],B=E[g][F],O=E[g][f-2],z+=O+(O-B)*(i[f-1]-C)/(C-R),I++),(A===0||A===f-1)&&g>0&&g<n-1&&(h=S[g+1]-S[g],y=S[g]-S[g-1],z+=(y*E[g+1][A]+h*E[g-1][A])/(y+h),I++),g===0?(N=Math.min(n-1,2),R=S[N],C=S[1],B=E[N][A],O=E[1][A],z+=O+(O-B)*(S[0]-C)/(C-R),I++):g===n-1&&(N=Math.max(0,n-3),R=S[N],C=S[n-2],B=E[N][A],O=E[n-2][A],z+=O+(O-B)*(S[n-1]-C)/(C-R),I++),(g===0||g===n-1)&&A>0&&A<f-1&&(h=i[A+1]-i[A],y=i[A]-i[A-1],z+=(y*E[g][A+1]+h*E[g][A-1])/(y+h),I++),I?z/=I:(p=i[A+1]-i[A],x=i[A]-i[A-1],s=S[g+1]-S[g],u=S[g]-S[g-1],c=p*x*(p+x),T=s*u*(s+u),z=(c*(u*E[g+1][A]+s*E[g-1][A])+T*(x*E[g][A+1]+p*E[g][A-1]))/(T*(x+p)+c*(u+s))),k=z-E[g][A],_=k/o,l+=_*_,b=I?0:.85,E[g][A]+=k*(1+b)}l=Math.sqrt(l)}while(L++<d&&l>P);return M.log("Smoother converged to",l,"after",L,"iterations"),E}},19237:function($,U,t){var M=t(71828).isArray1D;$.exports=function(E,i,S){var A=S("x"),g=A&&A.length,v=S("y"),e=v&&v.length;if(!g&&!e)return!1;if(i._cheater=!A,(!g||M(A))&&(!e||M(v))){var r=g?A.length:1/0;e&&(r=Math.min(r,v.length)),i.a&&i.a.length&&(r=Math.min(r,i.a.length)),i.b&&i.b.length&&(r=Math.min(r,i.b.length)),i._length=r}else i._length=null;return!0}},69568:function($,U,t){var M=t(5386).fF,E=t(19316),i=t(50693),S=t(9012),A=t(22399).defaultLine,g=t(1426).extendFlat,v=E.marker.line;$.exports=g({locations:{valType:"data_array",editType:"calc"},locationmode:E.locationmode,z:{valType:"data_array",editType:"calc"},geojson:g({},E.geojson,{}),featureidkey:E.featureidkey,text:g({},E.text,{}),hovertext:g({},E.hovertext,{}),marker:{line:{color:g({},v.color,{dflt:A}),width:g({},v.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:E.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:E.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:g({},S.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:M(),showlegend:g({},S.showlegend,{dflt:!1})},i("",{cLetter:"z",editTypeOverride:"calc"}))},38675:function($,U,t){var M=t(92770),E=t(50606).BADNUM,i=t(78803),S=t(75225),A=t(66279);function g(v){return v&&typeof v=="string"}$.exports=function(v,e){var r=e._length,f=new Array(r),n;e.geojson?n=function(p){return g(p)||M(p)}:n=g;for(var a=0;a<r;a++){var o=f[a]={},h=e.locations[a],y=e.z[a];n(h)&&M(y)?(o.loc=h,o.z=y):(o.loc=null,o.z=E),o.index=a}return S(f,e),i(v,e,{vals:e.z,containerStr:"",cLetter:"z"}),A(f,e),f}},61869:function($,U,t){var M=t(71828),E=t(1586),i=t(69568);$.exports=function(S,A,g,v){function e(y,p){return M.coerce(S,A,i,y,p)}var r=e("locations"),f=e("z");if(!(r&&r.length&&M.isArrayOrTypedArray(f)&&f.length)){A.visible=!1;return}A._length=Math.min(r.length,f.length);var n=e("geojson"),a;(typeof n=="string"&&n!==""||M.isPlainObject(n))&&(a="geojson-id");var o=e("locationmode",a);o==="geojson-id"&&e("featureidkey"),e("text"),e("hovertext"),e("hovertemplate");var h=e("marker.line.width");h&&e("marker.line.color"),e("marker.opacity"),E(S,A,v,e,{prefix:"",cLetter:"z"}),M.coerceSelectionMarkerOpacity(A,e)}},92069:function($){$.exports=function(U,t,M,E,i){U.location=t.location,U.z=t.z;var S=E[i];return S.fIn&&S.fIn.properties&&(U.properties=S.fIn.properties),U.ct=S.ct,U}},42300:function($,U,t){var M=t(89298),E=t(69568),i=t(71828).fillText;$.exports=function(A,g,v){var e=A.cd,r=e[0].trace,f=A.subplot,n,a,o,h,y=[g,v],p=[g+360,v];for(a=0;a<e.length;a++)if(n=e[a],h=!1,n._polygons){for(o=0;o<n._polygons.length;o++)n._polygons[o].contains(y)&&(h=!h),n._polygons[o].contains(p)&&(h=!h);if(h)break}if(!(!h||!n))return A.x0=A.x1=A.xa.c2p(n.ct),A.y0=A.y1=A.ya.c2p(n.ct),A.index=n.index,A.location=n.loc,A.z=n.z,A.zLabel=M.tickText(f.mockAxis,f.mockAxis.c2l(n.z),"hover").text,A.hovertemplate=n.hovertemplate,S(A,r,n),[A]};function S(A,g,v){if(!g.hovertemplate){var e=v.hi||g.hoverinfo,r=String(v.loc),f=e==="all"?E.hoverinfo.flags:e.split("+"),n=f.indexOf("name")!==-1,a=f.indexOf("location")!==-1,o=f.indexOf("z")!==-1,h=f.indexOf("text")!==-1,y=!n&&a,p=[];y?A.nameOverride=r:(n&&(A.nameOverride=g.name),a&&p.push(r)),o&&p.push(A.zLabel),h&&i(v,g,p),A.extraText=p.join("<br>")}}},51319:function($,U,t){$.exports={attributes:t(69568),supplyDefaults:t(61869),colorbar:t(61243),calc:t(38675),calcGeoJSON:t(99841).calcGeoJSON,plot:t(99841).plot,style:t(99636).style,styleOnSelect:t(99636).styleOnSelect,hoverPoints:t(42300),eventData:t(92069),selectPoints:t(81253),moduleType:"trace",name:"choropleth",basePlotModule:t(44622),categories:["geo","noOpacity","showLegend"],meta:{}}},99841:function($,U,t){var M=t(39898),E=t(71828),i=t(41327),S=t(90973).getTopojsonFeatures,A=t(71739).findExtremes,g=t(99636).style;function v(r,f,n){var a=f.layers.backplot.select(".choroplethlayer");E.makeTraceGroups(a,n,"trace choropleth").each(function(o){var h=M.select(this),y=h.selectAll("path.choroplethlocation").data(E.identity);y.enter().append("path").classed("choroplethlocation",!0),y.exit().remove(),g(r,o)})}function e(r,f){for(var n=r[0].trace,a=f[n.geo],o=a._subplot,h=n.locationmode,y=n._length,p=h==="geojson-id"?i.extractTraceFeature(r):S(n,o.topojson),x=[],s=[],u=0;u<y;u++){var c=r[u],T=h==="geojson-id"?c.fOut:i.locationToFeature(h,c.loc,p);if(T){c.geojson=T,c.ct=T.properties.ct,c._polygons=i.feature2polygons(T);var k=i.computeBbox(T);x.push(k[0],k[2]),s.push(k[1],k[3])}else c.geojson=null}if(a.fitbounds==="geojson"&&h==="geojson-id"){var _=i.computeBbox(i.getTraceGeojson(n));x=[_[0],_[2]],s=[_[1],_[3]]}var b={padded:!0};n._extremes.lon=A(a.lonaxis._ax,x,b),n._extremes.lat=A(a.lataxis._ax,s,b)}$.exports={calcGeoJSON:e,plot:v}},81253:function($){$.exports=function(U,t){var M=U.cd,E=U.xaxis,i=U.yaxis,S=[],A,g,v,e,r;if(t===!1)for(A=0;A<M.length;A++)M[A].selected=0;else for(A=0;A<M.length;A++)g=M[A],v=g.ct,v&&(e=E.c2p(v),r=i.c2p(v),t.contains([e,r],null,A,U)?(S.push({pointNumber:A,lon:v[0],lat:v[1]}),g.selected=1):g.selected=0);return S}},99636:function($,U,t){var M=t(39898),E=t(7901),i=t(91424),S=t(21081);function A(e,r){r&&g(e,r)}function g(e,r){var f=r[0].trace,n=r[0].node3,a=n.selectAll(".choroplethlocation"),o=f.marker||{},h=o.line||{},y=S.makeColorScaleFuncFromTrace(f);a.each(function(p){M.select(this).attr("fill",y(p.z)).call(E.stroke,p.mlc||h.color).call(i.dashLine,"",p.mlw||h.width||0).style("opacity",o.opacity)}),i.selectedPointStyle(a,f)}function v(e,r){var f=r[0].node3,n=r[0].trace;n.selectedpoints?i.selectedPointStyle(f.selectAll(".choroplethlocation"),n):g(e,r)}$.exports={style:A,styleOnSelect:v}},64496:function($,U,t){var M=t(69568),E=t(50693),i=t(5386).fF,S=t(9012),A=t(1426).extendFlat;$.exports=A({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:A({},M.featureidkey,{}),below:{valType:"string",editType:"plot"},text:M.text,hovertext:M.hovertext,marker:{line:{color:A({},M.marker.line.color,{editType:"plot"}),width:A({},M.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:A({},M.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:A({},M.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:A({},M.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:M.hoverinfo,hovertemplate:i({},{keys:["properties"]}),showlegend:A({},S.showlegend,{dflt:!1})},E("",{cLetter:"z",editTypeOverride:"calc"}))},82004:function($,U,t){var M=t(92770),E=t(71828),i=t(21081),S=t(91424),A=t(18214).makeBlank,g=t(41327);function v(r){var f=r[0].trace,n=f.visible===!0&&f._length!==0,a={layout:{visibility:"none"},paint:{}},o={layout:{visibility:"none"},paint:{}},h=f._opts={fill:a,line:o,geojson:A()};if(!n)return h;var y=g.extractTraceFeature(r);if(!y)return h;var p=i.makeColorScaleFuncFromTrace(f),x=f.marker,s=x.line||{},u;E.isArrayOrTypedArray(x.opacity)&&(u=function(d){var L=d.mo;return M(L)?+E.constrain(L,0,1):0});var c;E.isArrayOrTypedArray(s.color)&&(c=function(d){return d.mlc});var T;E.isArrayOrTypedArray(s.width)&&(T=function(d){return d.mlw});for(var k=0;k<r.length;k++){var _=r[k],b=_.fOut;if(b){var P=b.properties;P.fc=p(_.z),u&&(P.mo=u(_)),c&&(P.mlc=c(_)),T&&(P.mlw=T(_)),_.ct=P.ct,_._polygons=g.feature2polygons(b)}}var l=u?{type:"identity",property:"mo"}:x.opacity;return E.extendFlat(a.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":l}),E.extendFlat(o.paint,{"line-color":c?{type:"identity",property:"mlc"}:s.color,"line-width":T?{type:"identity",property:"mlw"}:s.width,"line-opacity":l}),a.layout.visibility="visible",o.layout.visibility="visible",h.geojson={type:"FeatureCollection",features:y},e(r),h}function e(r){var f=r[0].trace,n=f._opts,a;if(f.selectedpoints){for(var o=S.makeSelectedPointStyleFns(f),h=0;h<r.length;h++){var y=r[h];y.fOut&&(y.fOut.properties.mo2=o.selectedOpacityFn(y))}a={type:"identity",property:"mo2"}}else a=E.isArrayOrTypedArray(f.marker.opacity)?{type:"identity",property:"mo"}:f.marker.opacity;return E.extendFlat(n.fill.paint,{"fill-opacity":a}),E.extendFlat(n.line.paint,{"line-opacity":a}),n}$.exports={convert:v,convertOnSelect:e}},22654:function($,U,t){var M=t(71828),E=t(1586),i=t(64496);$.exports=function(S,A,g,v){function e(o,h){return M.coerce(S,A,i,o,h)}var r=e("locations"),f=e("z"),n=e("geojson");if(!M.isArrayOrTypedArray(r)||!r.length||!M.isArrayOrTypedArray(f)||!f.length||!(typeof n=="string"&&n!==""||M.isPlainObject(n))){A.visible=!1;return}e("featureidkey"),A._length=Math.min(r.length,f.length),e("below"),e("text"),e("hovertext"),e("hovertemplate");var a=e("marker.line.width");a&&e("marker.line.color"),e("marker.opacity"),E(S,A,v,e,{prefix:"",cLetter:"z"}),M.coerceSelectionMarkerOpacity(A,e)}},57516:function($,U,t){$.exports={attributes:t(64496),supplyDefaults:t(22654),colorbar:t(61243),calc:t(38675),plot:t(7852),hoverPoints:t(42300),eventData:t(92069),selectPoints:t(81253),styleOnSelect:function(M,E){if(E){var i=E[0].trace;i._glTrace.updateOnSelect(E)}},getBelow:function(M,E){for(var i=E.getMapLayers(),S=i.length-2;S>=0;S--){var A=i[S].id;if(typeof A=="string"&&A.indexOf("water")===0){for(var g=S+1;g<i.length;g++)if(A=i[g].id,typeof A=="string"&&A.indexOf("plotly-")===-1)return A}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:t(50101),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},7852:function($,U,t){var M=t(82004).convert,E=t(82004).convertOnSelect,i=t(77734).traceLayerPrefix;function S(g,v){this.type="choroplethmapbox",this.subplot=g,this.uid=v,this.sourceId="source-"+v,this.layerList=[["fill",i+v+"-fill"],["line",i+v+"-line"]],this.below=null}var A=S.prototype;A.update=function(g){this._update(M(g)),g[0].trace._glTrace=this},A.updateOnSelect=function(g){this._update(E(g))},A._update=function(g){var v=this.subplot,e=this.layerList,r=v.belowLookup["trace-"+this.uid];v.map.getSource(this.sourceId).setData(g.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(g,r),this.below=r);for(var f=0;f<e.length;f++){var n=e[f],a=n[0],o=n[1],h=g[a];v.setOptions(o,"setLayoutProperty",h.layout),h.layout.visibility==="visible"&&v.setOptions(o,"setPaintProperty",h.paint)}},A._addLayers=function(g,v){for(var e=this.subplot,r=this.layerList,f=this.sourceId,n=0;n<r.length;n++){var a=r[n],o=a[0],h=g[o];e.addLayer({type:o,id:a[1],source:f,layout:h.layout,paint:h.paint},v)}},A._removeLayers=function(){for(var g=this.subplot.map,v=this.layerList,e=v.length-1;e>=0;e--)g.removeLayer(v[e][1])},A.dispose=function(){var g=this.subplot.map;this._removeLayers(),g.removeSource(this.sourceId)},$.exports=function(g,v){var e=v[0].trace,r=new S(g,e.uid),f=r.sourceId,n=M(v),a=r.below=g.belowLookup["trace-"+e.uid];return g.map.addSource(f,{type:"geojson",data:n.geojson}),r._addLayers(n,a),v[0].trace._glTrace=r,r}},12674:function($,U,t){var M=t(50693),E=t(12663).axisHoverFormat,i=t(5386).fF,S=t(2418),A=t(9012),g=t(1426).extendFlat,v={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:i({editType:"calc"},{keys:["norm"]}),uhoverformat:E("u",1),vhoverformat:E("v",1),whoverformat:E("w",1),xhoverformat:E("x"),yhoverformat:E("y"),zhoverformat:E("z"),showlegend:g({},A.showlegend,{dflt:!1})};g(v,M("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var e=["opacity","lightposition","lighting"];e.forEach(function(r){v[r]=S[r]}),v.hoverinfo=g({},A.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),v.transforms=void 0,$.exports=v},31371:function($,U,t){var M=t(78803);$.exports=function(E,i){for(var S=i.u,A=i.v,g=i.w,v=Math.min(i.x.length,i.y.length,i.z.length,S.length,A.length,g.length),e=-1/0,r=1/0,f=0;f<v;f++){var n=S[f],a=A[f],o=g[f],h=Math.sqrt(n*n+a*a+o*o);e=Math.max(e,h),r=Math.min(r,h)}i._len=v,i._normMax=e,M(E,i,{vals:[r,e],containerStr:"",cLetter:"c"})}},5453:function($,U,t){var M=t(9330).gl_cone3d,E=t(9330).gl_cone3d.createConeMesh,i=t(71828).simpleMap,S=t(81697).parseColorScale,A=t(21081).extractOpts,g=t(90060);function v(h,y){this.scene=h,this.uid=y,this.mesh=null,this.data=null}var e=v.prototype;e.handlePick=function(h){if(h.object===this.mesh){var y=h.index=h.data.index,p=this.data.x[y],x=this.data.y[y],s=this.data.z[y],u=this.data.u[y],c=this.data.v[y],T=this.data.w[y];h.traceCoordinate=[p,x,s,u,c,T,Math.sqrt(u*u+c*c+T*T)];var k=this.data.hovertext||this.data.text;return Array.isArray(k)&&k[y]!==void 0?h.textLabel=k[y]:k&&(h.textLabel=k),!0}};var r={xaxis:0,yaxis:1,zaxis:2},f={tip:1,tail:0,cm:.25,center:.5},n={tip:1,tail:1,cm:.75,center:.5};function a(h,y){var p=h.fullSceneLayout,x=h.dataScale,s={};function u(_,b){var P=p[b],l=x[r[b]];return i(_,function(d){return P.d2l(d)*l})}s.vectors=g(u(y.u,"xaxis"),u(y.v,"yaxis"),u(y.w,"zaxis"),y._len),s.positions=g(u(y.x,"xaxis"),u(y.y,"yaxis"),u(y.z,"zaxis"),y._len);var c=A(y);s.colormap=S(y),s.vertexIntensityBounds=[c.min/y._normMax,c.max/y._normMax],s.coneOffset=f[y.anchor],y.sizemode==="scaled"?s.coneSize=y.sizeref||.5:s.coneSize=y.sizeref&&y._normMax?y.sizeref/y._normMax:.5;var T=M(s),k=y.lightposition;return T.lightPosition=[k.x,k.y,k.z],T.ambient=y.lighting.ambient,T.diffuse=y.lighting.diffuse,T.specular=y.lighting.specular,T.roughness=y.lighting.roughness,T.fresnel=y.lighting.fresnel,T.opacity=y.opacity,y._pad=n[y.anchor]*T.vectorScale*T.coneScale*y._normMax,T}e.update=function(h){this.data=h;var y=a(this.scene,h);this.mesh.update(y)},e.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function o(h,y){var p=h.glplot.gl,x=a(h,y),s=E(p,x),u=new v(h,y.uid);return u.mesh=s,u.data=y,s._trace=u,h.glplot.add(s),u}$.exports=o},91750:function($,U,t){var M=t(71828),E=t(1586),i=t(12674);$.exports=function(S,A,g,v){function e(y,p){return M.coerce(S,A,i,y,p)}var r=e("u"),f=e("v"),n=e("w"),a=e("x"),o=e("y"),h=e("z");if(!r||!r.length||!f||!f.length||!n||!n.length||!a||!a.length||!o||!o.length||!h||!h.length){A.visible=!1;return}e("sizeref"),e("sizemode"),e("anchor"),e("lighting.ambient"),e("lighting.diffuse"),e("lighting.specular"),e("lighting.roughness"),e("lighting.fresnel"),e("lightposition.x"),e("lightposition.y"),e("lightposition.z"),E(S,A,v,e,{prefix:"",cLetter:"c"}),e("text"),e("hovertext"),e("hovertemplate"),e("uhoverformat"),e("vhoverformat"),e("whoverformat"),e("xhoverformat"),e("yhoverformat"),e("zhoverformat"),A._length=null}},98128:function($,U,t){$.exports={moduleType:"trace",name:"cone",basePlotModule:t(58547),categories:["gl3d","showLegend"],attributes:t(12674),supplyDefaults:t(91750),colorbar:{min:"cmin",max:"cmax"},calc:t(31371),plot:t(5453),eventData:function(M,E){return M.norm=E.traceCoordinate[6],M},meta:{}}},70600:function($,U,t){var M=t(21606),E=t(82196),i=t(12663),S=i.axisHoverFormat,A=i.descriptionOnlyNumbers,g=t(50693),v=t(79952).P,e=t(41940),r=t(1426).extendFlat,f=t(74808),n=f.COMPARISON_OPS2,a=f.INTERVAL_OPS,o=E.line;$.exports=r({z:M.z,x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:E.xperiod0,yperiod0:E.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,text:M.text,hovertext:M.hovertext,transpose:M.transpose,xtype:M.xtype,ytype:M.ytype,xhoverformat:S("x"),yhoverformat:S("y"),zhoverformat:S("z",1),hovertemplate:M.hovertemplate,texttemplate:r({},M.texttemplate,{}),textfont:r({},M.textfont,{}),hoverongaps:M.hoverongaps,connectgaps:r({},M.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:e({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:A("contour label")},operation:{valType:"enumerated",values:[].concat(n).concat(a),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:r({},o.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:v,smoothing:r({},o.smoothing,{}),editType:"plot"}},g("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},27529:function($,U,t){var M=t(21081),E=t(90757),i=t(18670),S=t(53572);$.exports=function(A,g){var v=E(A,g),e=v[0].z;i(g,e);var r=g.contours,f=M.extractOpts(g),n;if(r.coloring==="heatmap"&&f.auto&&g.autocontour===!1){var a=r.start,o=S(r),h=r.size||1,y=Math.floor((o-a)/h)+1;isFinite(h)||(h=1,y=1);var p=a-h/2,x=p+y*h;n=[p,x]}else n=e;return M.calc(A,g,{vals:n,cLetter:"z"}),v}},20083:function($){$.exports=function(U,t){var M=U[0],E=M.z,i;switch(t.type){case"levels":var S=Math.min(E[0][0],E[0][1]);for(i=0;i<U.length;i++){var A=U[i];A.prefixBoundary=!A.edgepaths.length&&(S>A.level||A.starts.length&&S===A.level)}break;case"constraint":if(M.prefixBoundary=!1,M.edgepaths.length)return;var g=M.x.length,v=M.y.length,e=-1/0,r=1/0;for(i=0;i<v;i++)r=Math.min(r,E[i][0]),r=Math.min(r,E[i][g-1]),e=Math.max(e,E[i][0]),e=Math.max(e,E[i][g-1]);for(i=1;i<g-1;i++)r=Math.min(r,E[0][i]),r=Math.min(r,E[v-1][i]),e=Math.max(e,E[0][i]),e=Math.max(e,E[v-1][i]);var f=t.value,n,a;switch(t._operation){case">":f>e&&(M.prefixBoundary=!0);break;case"<":(f<r||M.starts.length&&f===r)&&(M.prefixBoundary=!0);break;case"[]":n=Math.min(f[0],f[1]),a=Math.max(f[0],f[1]),(a<r||n>e||M.starts.length&&a===r)&&(M.prefixBoundary=!0);break;case"][":n=Math.min(f[0],f[1]),a=Math.max(f[0],f[1]),n<r&&a>e&&(M.prefixBoundary=!0);break}break}}},90654:function($,U,t){var M=t(21081),E=t(86068),i=t(53572);function S(A,g,v){var e=g.contours,r=g.line,f=e.size||1,n=e.coloring,a=E(g,{isColorbar:!0});if(n==="heatmap"){var o=M.extractOpts(g);v._fillgradient=o.reversescale?M.flipScale(o.colorscale):o.colorscale,v._zrange=[o.min,o.max]}else n==="fill"&&(v._fillcolor=a);v._line={color:n==="lines"?a:r.color,width:e.showlines!==!1?r.width:0,dash:r.dash},v._levels={start:e.start,end:i(e),size:f}}$.exports={min:"zmin",max:"zmax",calc:S}},36914:function($){$.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},83179:function($,U,t){var M=t(92770),E=t(14523),i=t(7901),S=i.addOpacity,A=i.opacity,g=t(74808),v=g.CONSTRAINT_REDUCTION,e=g.COMPARISON_OPS2;$.exports=function(f,n,a,o,h,y){var p=n.contours,x,s,u,c=a("contours.operation");if(p._operation=v[c],r(a,p),c==="="?x=p.showlines=!0:(x=a("contours.showlines"),u=a("fillcolor",S((f.line||{}).color||h,.5))),x){var T=u&&A(u)?S(n.fillcolor,1):h;s=a("line.color",T),a("line.width",2),a("line.dash")}a("line.smoothing"),E(a,o,s,y)};function r(f,n){var a;e.indexOf(n.operation)===-1?(f("contours.value",[0,1]),Array.isArray(n.value)?n.value.length>2?n.value=n.value.slice(2):n.length===0?n.value=[0,1]:n.length<2?(a=parseFloat(n.value[0]),n.value=[a,a+1]):n.value=[parseFloat(n.value[0]),parseFloat(n.value[1])]:M(n.value)&&(a=parseFloat(n.value),n.value=[a,a+1])):(f("contours.value",0),M(n.value)||(Array.isArray(n.value)?n.value=parseFloat(n.value[0]):n.value=0))}},64237:function($,U,t){var M=t(74808),E=t(92770);$.exports={"[]":S("[]"),"][":S("]["),">":A(">"),"<":A("<"),"=":A("=")};function i(g,v){var e=Array.isArray(v),r;function f(n){return E(n)?+n:null}return M.COMPARISON_OPS2.indexOf(g)!==-1?r=f(e?v[0]:v):M.INTERVAL_OPS.indexOf(g)!==-1?r=e?[f(v[0]),f(v[1])]:[f(v),f(v)]:M.SET_OPS.indexOf(g)!==-1&&(r=e?v.map(f):[f(v)]),r}function S(g){return function(v){v=i(g,v);var e=Math.min(v[0],v[1]),r=Math.max(v[0],v[1]);return{start:e,end:r,size:r-e}}}function A(g){return function(v){return v=i(g,v),{start:v,end:1/0,size:1/0}}}},67217:function($){$.exports=function(U,t,M,E){var i=E("contours.start"),S=E("contours.end"),A=i===!1||S===!1,g=M("contours.size"),v;A?v=t.autocontour=!0:v=M("autocontour",!1),(v||!g)&&M("ncontours")}},84857:function($,U,t){var M=t(71828);$.exports=function(i,S){var A,g,v,e=function(n){return n.reverse()},r=function(n){return n};switch(S){case"=":case"<":return i;case">":for(i.length!==1&&M.warn("Contour data invalid for the specified inequality operation."),g=i[0],A=0;A<g.edgepaths.length;A++)g.edgepaths[A]=e(g.edgepaths[A]);for(A=0;A<g.paths.length;A++)g.paths[A]=e(g.paths[A]);for(A=0;A<g.starts.length;A++)g.starts[A]=e(g.starts[A]);return i;case"][":var f=e;e=r,r=f;case"[]":for(i.length!==2&&M.warn("Contour data invalid for the specified inequality range operation."),g=E(i[0]),v=E(i[1]),A=0;A<g.edgepaths.length;A++)g.edgepaths[A]=e(g.edgepaths[A]);for(A=0;A<g.paths.length;A++)g.paths[A]=e(g.paths[A]);for(A=0;A<g.starts.length;A++)g.starts[A]=e(g.starts[A]);for(;v.edgepaths.length;)g.edgepaths.push(r(v.edgepaths.shift()));for(;v.paths.length;)g.paths.push(r(v.paths.shift()));for(;v.starts.length;)g.starts.push(r(v.starts.shift()));return[g]}};function E(i){return M.extendFlat({},i,{edgepaths:M.extendDeep([],i.edgepaths),paths:M.extendDeep([],i.paths),starts:M.extendDeep([],i.starts)})}},13031:function($,U,t){var M=t(71828),E=t(67684),i=t(73927),S=t(83179),A=t(67217),g=t(8724),v=t(58623),e=t(70600);$.exports=function(r,f,n,a){function o(x,s){return M.coerce(r,f,e,x,s)}function h(x){return M.coerce2(r,f,e,x)}var y=E(r,f,o,a);if(!y){f.visible=!1;return}i(r,f,a,o),o("xhoverformat"),o("yhoverformat"),o("text"),o("hovertext"),o("hoverongaps"),o("hovertemplate");var p=o("contours.type")==="constraint";o("connectgaps",M.isArray1D(f.z)),p?S(r,f,o,a,n):(A(r,f,o,h),g(r,f,o,a)),f.contours&&f.contours.coloring==="heatmap"&&v(o,a)}},87558:function($,U,t){var M=t(71828),E=t(64237),i=t(53572);$.exports=function(S,A,g){for(var v=S.type==="constraint"?E[S._operation](S.value):S,e=v.size,r=[],f=i(v),n=g.trace._carpetTrace,a=n?{xaxis:n.aaxis,yaxis:n.baxis,x:g.a,y:g.b}:{xaxis:A.xaxis,yaxis:A.yaxis,x:g.x,y:g.y},o=v.start;o<f;o+=e)if(r.push(M.extendFlat({level:o,crossings:{},starts:[],edgepaths:[],paths:[],z:g.z,smoothing:g.trace.line.smoothing},a)),r.length>1e3){M.warn("Too many contours, clipping at 1000",S);break}return r}},53572:function($){$.exports=function(U){return U.end+U.size/1e6}},81696:function($,U,t){var M=t(71828),E=t(36914);$.exports=function(e,r,f){var n,a,o,h,y;for(r=r||.01,f=f||.01,o=0;o<e.length;o++){for(h=e[o],y=0;y<h.starts.length;y++)a=h.starts[y],A(h,a,"edge",r,f);for(n=0;Object.keys(h.crossings).length&&n<1e4;)n++,a=Object.keys(h.crossings)[0].split(",").map(Number),A(h,a,void 0,r,f);n===1e4&&M.log("Infinite loop in contour?")}};function i(e,r,f,n){return Math.abs(e[0]-r[0])<f&&Math.abs(e[1]-r[1])<n}function S(e,r){var f=e[2]-r[2],n=e[3]-r[3];return Math.sqrt(f*f+n*n)}function A(e,r,f,n,a){var o=r.join(","),h=e.crossings[o],y=g(h,f,r),p=[v(e,r,[-y[0],-y[1]])],x=e.z.length,s=e.z[0].length,u=r.slice(),c=y.slice(),T;for(T=0;T<1e4;T++){if(h>20?(h=E.CHOOSESADDLE[h][(y[0]||y[1])<0?0:1],e.crossings[o]=E.SADDLEREMAINDER[h]):delete e.crossings[o],y=E.NEWDELTA[h],!y){M.log("Found bad marching index:",h,r,e.level);break}p.push(v(e,r,y)),r[0]+=y[0],r[1]+=y[1],o=r.join(","),i(p[p.length-1],p[p.length-2],n,a)&&p.pop();var k=y[0]&&(r[0]<0||r[0]>s-2)||y[1]&&(r[1]<0||r[1]>x-2),_=r[0]===u[0]&&r[1]===u[1]&&y[0]===c[0]&&y[1]===c[1];if(_||f&&k)break;h=e.crossings[o]}T===1e4&&M.log("Infinite loop in contour?");var b=i(p[0],p[p.length-1],n,a),P=0,l=.2*e.smoothing,d=[],L=0,w,I,z,B,O,R,C,F,N,V,K;for(T=1;T<p.length;T++)C=S(p[T],p[T-1]),P+=C,d.push(C);var Q=P/d.length*l;function at(W){return p[W%p.length]}for(T=p.length-2;T>=L;T--)if(w=d[T],w<Q){for(z=0,I=T-1;I>=L&&w+d[I]<Q;I--)w+=d[I];if(b&&T===p.length-2)for(z=0;z<I&&w+d[z]<Q;z++)w+=d[z];O=T-I+z+1,R=Math.floor((T+I+z+2)/2),!b&&T===p.length-2?B=p[p.length-1]:!b&&I===-1?B=p[0]:O%2?B=at(R):B=[(at(R)[0]+at(R+1)[0])/2,(at(R)[1]+at(R+1)[1])/2],p.splice(I+1,T-I+1,B),T=I+1,z&&(L=z),b&&(T===p.length-2?p[z]=p[p.length-1]:T===0&&(p[p.length-1]=p[0]))}for(p.splice(0,L),T=0;T<p.length;T++)p[T].length=2;if(!(p.length<2))if(b)p.pop(),e.paths.push(p);else{f||M.log("Unclosed interior contour?",e.level,u.join(","),p.join("L"));var it=!1;for(F=0;F<e.edgepaths.length;F++)if(V=e.edgepaths[F],!it&&i(V[0],p[p.length-1],n,a)){p.pop(),it=!0;var q=!1;for(N=0;N<e.edgepaths.length;N++)if(K=e.edgepaths[N],i(K[K.length-1],p[0],n,a)){q=!0,p.shift(),e.edgepaths.splice(F,1),N===F?e.paths.push(p.concat(K)):(N>F&&N--,e.edgepaths[N]=K.concat(p,V));break}q||(e.edgepaths[F]=p.concat(V))}for(F=0;F<e.edgepaths.length&&!it;F++)V=e.edgepaths[F],i(V[V.length-1],p[0],n,a)&&(p.shift(),e.edgepaths[F]=V.concat(p),it=!0);it||e.edgepaths.push(p)}}function g(e,r,f){var n=0,a=0;return e>20&&r?e===208||e===1114?n=f[0]===0?1:-1:a=f[1]===0?1:-1:E.BOTTOMSTART.indexOf(e)!==-1?a=1:E.LEFTSTART.indexOf(e)!==-1?n=1:E.TOPSTART.indexOf(e)!==-1?a=-1:n=-1,[n,a]}function v(e,r,f){var n=r[0]+Math.max(f[0],0),a=r[1]+Math.max(f[1],0),o=e.z[a][n],h=e.xaxis,y=e.yaxis;if(f[1]){var p=(e.level-o)/(e.z[a][n+1]-o),x=(p!==1?(1-p)*h.c2l(e.x[n]):0)+(p!==0?p*h.c2l(e.x[n+1]):0);return[h.c2p(h.l2c(x),!0),y.c2p(e.y[a],!0),n+p,a]}else{var s=(e.level-o)/(e.z[a+1][n]-o),u=(s!==1?(1-s)*y.c2l(e.y[a]):0)+(s!==0?s*y.c2l(e.y[a+1]):0);return[h.c2p(e.x[n],!0),y.c2p(y.l2c(u),!0),n,a+s]}}},52421:function($,U,t){var M=t(7901),E=t(46248);$.exports=function(i,S,A,g,v){v||(v={}),v.isContour=!0;var e=E(i,S,A,g,v);return e&&e.forEach(function(r){var f=r.trace;f.contours.type==="constraint"&&(f.fillcolor&&M.opacity(f.fillcolor)?r.color=M.addOpacity(f.fillcolor,1):f.contours.showlines&&M.opacity(f.line.color)&&(r.color=M.addOpacity(f.line.color,1)))}),e}},99442:function($,U,t){$.exports={attributes:t(70600),supplyDefaults:t(13031),calc:t(27529),plot:t(29854).plot,style:t(84426),colorbar:t(90654),hoverPoints:t(52421),moduleType:"trace",name:"contour",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},14523:function($,U,t){var M=t(71828);$.exports=function(E,i,S,A){A||(A={});var g=E("contours.showlabels");if(g){var v=i.font;M.coerceFont(E,"contours.labelfont",{family:v.family,size:v.size,color:S}),E("contours.labelformat")}A.hasHover!==!1&&E("zhoverformat")}},86068:function($,U,t){var M=t(39898),E=t(21081),i=t(53572);$.exports=function(S){var A=S.contours,g=A.start,v=i(A),e=A.size||1,r=Math.floor((v-g)/e)+1,f=A.coloring==="lines"?0:1,n=E.extractOpts(S);isFinite(e)||(e=1,r=1);var a=n.reversescale?E.flipScale(n.colorscale):n.colorscale,o=a.length,h=new Array(o),y=new Array(o),p,x,s=n.min,u=n.max;if(A.coloring==="heatmap"){for(x=0;x<o;x++)p=a[x],h[x]=p[0]*(u-s)+s,y[x]=p[1];var c=M.extent([s,u,A.start,A.start+e*(r-1)]),T=c[s<u?0:1],k=c[s<u?1:0];T!==s&&(h.splice(0,0,T),y.splice(0,0,y[0])),k!==u&&(h.push(k),y.push(y[y.length-1]))}else{var _=S._input&&typeof S._input.zmin=="number"&&typeof S._input.zmax=="number";for(_&&(g<=s||v>=u)&&(g<=s&&(g=s),v>=u&&(v=u),r=Math.floor((v-g)/e)+1,f=0),x=0;x<o;x++)p=a[x],h[x]=(p[0]*(r+f-1)-f/2)*e+g,y[x]=p[1];(_||S.autocontour)&&(h[0]>s&&(h.unshift(s),y.unshift(y[0])),h[h.length-1]<u&&(h.push(u),y.push(y[y.length-1])))}return E.makeColorScaleFunc({domain:h,range:y},{noNumericCheck:!0})}},87678:function($,U,t){var M=t(36914);$.exports=function(i){var S=i[0].z,A=S.length,g=S[0].length,v=A===2||g===2,e,r,f,n,a,o,h,y,p;for(r=0;r<A-1;r++)for(n=[],r===0&&(n=n.concat(M.BOTTOMSTART)),r===A-2&&(n=n.concat(M.TOPSTART)),e=0;e<g-1;e++)for(f=n.slice(),e===0&&(f=f.concat(M.LEFTSTART)),e===g-2&&(f=f.concat(M.RIGHTSTART)),a=e+","+r,o=[[S[r][e],S[r][e+1]],[S[r+1][e],S[r+1][e+1]]],p=0;p<i.length;p++)y=i[p],h=E(y.level,o),h&&(y.crossings[a]=h,f.indexOf(h)!==-1&&(y.starts.push([e,r]),v&&f.indexOf(h,f.indexOf(h)+1)!==-1&&y.starts.push([e,r])))};function E(i,S){var A=(S[0][0]>i?0:1)+(S[0][1]>i?0:2)+(S[1][1]>i?0:4)+(S[1][0]>i?0:8);if(A===5||A===10){var g=(S[0][0]+S[0][1]+S[1][0]+S[1][1])/4;return i>g?A===5?713:1114:A===5?104:208}return A===15?0:A}},29854:function($,U,t){var M=t(39898),E=t(71828),i=t(91424),S=t(21081),A=t(63893),g=t(89298),v=t(21994),e=t(50347),r=t(87678),f=t(81696),n=t(87558),a=t(84857),o=t(20083),h=t(36914),y=h.LABELOPTIMIZER;U.plot=function(_,b,P,l){var d=b.xaxis,L=b.yaxis;E.makeTraceGroups(l,P,"contour").each(function(w){var I=M.select(this),z=w[0],B=z.trace,O=z.x,R=z.y,C=B.contours,F=n(C,b,z),N=E.ensureSingle(I,"g","heatmapcoloring"),V=[];C.coloring==="heatmap"&&(V=[w]),e(_,b,V,N),r(F),f(F);var K=d.c2p(O[0],!0),Q=d.c2p(O[O.length-1],!0),at=L.c2p(R[0],!0),it=L.c2p(R[R.length-1],!0),q=[[K,it],[Q,it],[Q,at],[K,at]],W=F;C.type==="constraint"&&(W=a(F,C._operation)),p(I,q,C),x(I,W,q,C),u(I,F,_,z,C),T(I,b,_,z,q)})};function p(_,b,P){var l=E.ensureSingle(_,"g","contourbg"),d=l.selectAll("path").data(P.coloring==="fill"?[0]:[]);d.enter().append("path"),d.exit().remove(),d.attr("d","M"+b.join("L")+"Z").style("stroke","none")}function x(_,b,P,l){var d=l.coloring==="fill"||l.type==="constraint"&&l._operation!=="=",L="M"+P.join("L")+"Z";d&&o(b,l);var w=E.ensureSingle(_,"g","contourfill"),I=w.selectAll("path").data(d?b:[]);I.enter().append("path"),I.exit().remove(),I.each(function(z){var B=(z.prefixBoundary?L:"")+s(z,P);B?M.select(this).attr("d",B).style("stroke","none"):M.select(this).remove()})}function s(_,b){var P="",l=0,d=_.edgepaths.map(function(Q,at){return at}),L=!0,w,I,z,B,O,R;function C(Q){return Math.abs(Q[1]-b[0][1])<.01}function F(Q){return Math.abs(Q[1]-b[2][1])<.01}function N(Q){return Math.abs(Q[0]-b[0][0])<.01}function V(Q){return Math.abs(Q[0]-b[2][0])<.01}for(;d.length;){for(R=i.smoothopen(_.edgepaths[l],_.smoothing),P+=L?R:R.replace(/^M/,"L"),d.splice(d.indexOf(l),1),w=_.edgepaths[l][_.edgepaths[l].length-1],B=-1,z=0;z<4;z++){if(!w){E.log("Missing end?",l,_);break}for(C(w)&&!V(w)?I=b[1]:N(w)?I=b[0]:F(w)?I=b[3]:V(w)&&(I=b[2]),O=0;O<_.edgepaths.length;O++){var K=_.edgepaths[O][0];Math.abs(w[0]-I[0])<.01?Math.abs(w[0]-K[0])<.01&&(K[1]-w[1])*(I[1]-K[1])>=0&&(I=K,B=O):Math.abs(w[1]-I[1])<.01?Math.abs(w[1]-K[1])<.01&&(K[0]-w[0])*(I[0]-K[0])>=0&&(I=K,B=O):E.log("endpt to newendpt is not vert. or horz.",w,I,K)}if(w=I,B>=0)break;P+="L"+I}if(B===_.edgepaths.length){E.log("unclosed perimeter path");break}l=B,L=d.indexOf(l)===-1,L&&(l=d[0],P+="Z")}for(l=0;l<_.paths.length;l++)P+=i.smoothclosed(_.paths[l],_.smoothing);return P}function u(_,b,P,l,d){var L=P._context.staticPlot,w=E.ensureSingle(_,"g","contourlines"),I=d.showlines!==!1,z=d.showlabels,B=I&&z,O=U.createLines(w,I||z,b,L),R=U.createLineClip(w,B,P,l.trace.uid),C=_.selectAll("g.contourlabels").data(z?[0]:[]);if(C.exit().remove(),C.enter().append("g").classed("contourlabels",!0),z){var F=[],N=[];E.clearLocationCache();var V=U.labelFormatter(P,l),K=i.tester.append("text").attr("data-notex",1).call(i.font,d.labelfont),Q=b[0].xaxis,at=b[0].yaxis,it=Q._length,q=at._length,W=Q.range,Z=at.range,G=E.aggNums(Math.min,null,l.x),et=E.aggNums(Math.max,null,l.x),nt=E.aggNums(Math.min,null,l.y),X=E.aggNums(Math.max,null,l.y),Y=Math.max(Q.c2p(G,!0),0),ot=Math.min(Q.c2p(et,!0),it),rt=Math.max(at.c2p(X,!0),0),ht=Math.min(at.c2p(nt,!0),q),pt={};W[0]<W[1]?(pt.left=Y,pt.right=ot):(pt.left=ot,pt.right=Y),Z[0]<Z[1]?(pt.top=rt,pt.bottom=ht):(pt.top=ht,pt.bottom=rt),pt.middle=(pt.top+pt.bottom)/2,pt.center=(pt.left+pt.right)/2,F.push([[pt.left,pt.top],[pt.right,pt.top],[pt.right,pt.bottom],[pt.left,pt.bottom]]);var yt=Math.sqrt(it*it+q*q),xt=h.LABELDISTANCE*yt/Math.max(1,b.length/h.LABELINCREASE);O.each(function(Ft){var Et=U.calcTextOpts(Ft.level,V,K,P);M.select(this).selectAll("path").each(function(){var mt=this,gt=E.getVisibleSegment(mt,pt,Et.height/2);if(gt&&!(gt.len<(Et.width+Et.height)*h.LABELMIN))for(var wt=Math.min(Math.ceil(gt.len/xt),h.LABELMAX),Pt=0;Pt<wt;Pt++){var Bt=U.findBestTextLocation(mt,gt,Et,N,pt);if(!Bt)break;U.addLabelData(Bt,Et,N,F)}})}),K.remove(),U.drawLabels(C,N,P,R,B?F:null)}z&&!I&&O.remove()}U.createLines=function(_,b,P,l){var d=P[0].smoothing,L=_.selectAll("g.contourlevel").data(b?P:[]);if(L.exit().remove(),L.enter().append("g").classed("contourlevel",!0),b){var w=L.selectAll("path.openline").data(function(z){return z.pedgepaths||z.edgepaths});w.exit().remove(),w.enter().append("path").classed("openline",!0),w.attr("d",function(z){return i.smoothopen(z,d)}).style("stroke-miterlimit",1).style("vector-effect",l?"none":"non-scaling-stroke");var I=L.selectAll("path.closedline").data(function(z){return z.ppaths||z.paths});I.exit().remove(),I.enter().append("path").classed("closedline",!0),I.attr("d",function(z){return i.smoothclosed(z,d)}).style("stroke-miterlimit",1).style("vector-effect",l?"none":"non-scaling-stroke")}return L},U.createLineClip=function(_,b,P,l){var d=P._fullLayout._clips,L=b?"clipline"+l:null,w=d.selectAll("#"+L).data(b?[0]:[]);return w.exit().remove(),w.enter().append("clipPath").classed("contourlineclip",!0).attr("id",L),i.setClipUrl(_,L,P),w},U.labelFormatter=function(_,b){var P=_._fullLayout,l=b.trace,d=l.contours,L={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(d.labelformat)L.tickformat=d.labelformat,v(L,P);else{var w=S.extractOpts(l);if(w&&w.colorbar&&w.colorbar._axis)L=w.colorbar._axis;else{if(d.type==="constraint"){var I=d.value;Array.isArray(I)?L.range=[I[0],I[I.length-1]]:L.range=[I,I]}else L.range=[d.start,d.end],L.nticks=(d.end-d.start)/d.size;L.range[0]===L.range[1]&&(L.range[1]+=L.range[0]||1),L.nticks||(L.nticks=1e3),v(L,P),g.prepTicks(L),L._tmin=null,L._tmax=null}}return function(z){return g.tickText(L,z).text}},U.calcTextOpts=function(_,b,P,l){var d=b(_);P.text(d).call(A.convertToTspans,l);var L=P.node(),w=i.bBox(L,!0);return{text:d,width:w.width,height:w.height,fontSize:+L.style["font-size"].replace("px",""),level:_,dy:(w.top+w.bottom)/2}},U.findBestTextLocation=function(_,b,P,l,d){var L=P.width,w,I,z,B,O;b.isClosed?(I=b.len/y.INITIALSEARCHPOINTS,w=b.min+I/2,z=b.max):(I=(b.len-L)/(y.INITIALSEARCHPOINTS+1),w=b.min+I+L/2,z=b.max-(I+L)/2);for(var R=1/0,C=0;C<y.ITERATIONS;C++){for(var F=w;F<z;F+=I){var N=E.getTextLocation(_,b.total,F,L),V=c(N,P,l,d);V<R&&(R=V,O=N,B=F)}if(R>y.MAXCOST*2)break;C&&(I/=2),w=B-I/2,z=w+I*1.5}if(R<=y.MAXCOST)return O};function c(_,b,P,l){var d=b.width/2,L=b.height/2,w=_.x,I=_.y,z=_.theta,B=Math.cos(z)*d,O=Math.sin(z)*d,R=(w>l.center?l.right-w:w-l.left)/(B+Math.abs(Math.sin(z)*L)),C=(I>l.middle?l.bottom-I:I-l.top)/(Math.abs(O)+Math.cos(z)*L);if(R<1||C<1)return 1/0;var F=y.EDGECOST*(1/(R-1)+1/(C-1));F+=y.ANGLECOST*z*z;for(var N=w-B,V=I-O,K=w+B,Q=I+O,at=0;at<P.length;at++){var it=P[at],q=Math.cos(it.theta)*it.width/2,W=Math.sin(it.theta)*it.width/2,Z=E.segmentDistance(N,V,K,Q,it.x-q,it.y-W,it.x+q,it.y+W)*2/(b.height+it.height),G=it.level===b.level,et=G?y.SAMELEVELDISTANCE:1;if(Z<=et)return 1/0;var nt=y.NEIGHBORCOST*(G?y.SAMELEVELFACTOR:1);F+=nt/(Z-et)}return F}U.addLabelData=function(_,b,P,l){var d=b.fontSize,L=b.width+d/3,w=Math.max(0,b.height-d/3),I=_.x,z=_.y,B=_.theta,O=Math.sin(B),R=Math.cos(B),C=function(N,V){return[I+N*R-V*O,z+N*O+V*R]},F=[C(-L/2,-w/2),C(-L/2,w/2),C(L/2,w/2),C(L/2,-w/2)];P.push({text:b.text,x:I,y:z,dy:b.dy,theta:B,level:b.level,width:L,height:w}),l.push(F)},U.drawLabels=function(_,b,P,l,d){var L=_.selectAll("text").data(b,function(B){return B.text+","+B.x+","+B.y+","+B.theta});if(L.exit().remove(),L.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(B){var O=B.x+Math.sin(B.theta)*B.dy,R=B.y-Math.cos(B.theta)*B.dy;M.select(this).text(B.text).attr({x:O,y:R,transform:"rotate("+180*B.theta/Math.PI+" "+O+" "+R+")"}).call(A.convertToTspans,P)}),d){for(var w="",I=0;I<d.length;I++)w+="M"+d[I].join("L")+"Z";var z=E.ensureSingle(l,"path","");z.attr("d",w)}};function T(_,b,P,l,d){var L=l.trace,w=P._fullLayout._clips,I="clip"+L.uid,z=w.selectAll("#"+I).data(L.connectgaps?[]:[0]);if(z.enter().append("clipPath").classed("contourclip",!0).attr("id",I),z.exit().remove(),L.connectgaps===!1){var B={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:b.xaxis,yaxis:b.yaxis,x:l.x,y:l.y,z:k(l),smoothing:0};r([B]),f([B]),o([B],{type:"levels"});var O=E.ensureSingle(z,"path","");O.attr("d",(B.prefixBoundary?"M"+d.join("L")+"Z":"")+s(B,d))}else I=null;i.setClipUrl(_,I,P)}function k(_){var b=_.trace._emptypoints,P=[],l=_.z.length,d=_.z[0].length,L,w=[],I;for(L=0;L<d;L++)w.push(1);for(L=0;L<l;L++)P.push(w.slice());for(L=0;L<b.length;L++)I=b[L],P[I[0]][I[1]]=0;return _.zmask=P,P}},18670:function($,U,t){var M=t(89298),E=t(71828);$.exports=function(S,A){var g=S.contours;if(S.autocontour){var v=S.zmin,e=S.zmax;(S.zauto||v===void 0)&&(v=E.aggNums(Math.min,null,A)),(S.zauto||e===void 0)&&(e=E.aggNums(Math.max,null,A));var r=i(v,e,S.ncontours);g.size=r.dtick,g.start=M.tickFirst(r),r.range.reverse(),g.end=M.tickFirst(r),g.start===v&&(g.start+=g.size),g.end===e&&(g.end-=g.size),g.start>g.end&&(g.start=g.end=(g.start+g.end)/2),S._input.contours||(S._input.contours={}),E.extendFlat(S._input.contours,{start:g.start,end:g.end,size:g.size}),S._input.autocontour=!0}else if(g.type!=="constraint"){var f=g.start,n=g.end,a=S._input.contours;if(f>n&&(g.start=a.start=n,n=g.end=a.end=f,f=g.start),!(g.size>0)){var o;f===n?o=1:o=i(f,n,S.ncontours).dtick,a.size=g.size=o}}};function i(S,A,g){var v={type:"linear",range:[S,A]};return M.autoTicks(v,(A-S)/(g||15)),v}},84426:function($,U,t){var M=t(39898),E=t(91424),i=t(70035),S=t(86068);$.exports=function(A){var g=M.select(A).selectAll("g.contour");g.style("opacity",function(v){return v[0].trace.opacity}),g.each(function(v){var e=M.select(this),r=v[0].trace,f=r.contours,n=r.line,a=f.size||1,o=f.start,h=f.type==="constraint",y=!h&&f.coloring==="lines",p=!h&&f.coloring==="fill",x=y||p?S(r):null;e.selectAll("g.contourlevel").each(function(c){M.select(this).selectAll("path").call(E.lineGroupStyle,n.width,y?x(c.level):n.color,n.dash)});var s=f.labelfont;if(e.selectAll("g.contourlabels text").each(function(c){E.font(M.select(this),{family:s.family,size:s.size,color:s.color||(y?x(c.level):n.color)})}),h)e.selectAll("g.contourfill path").style("fill",r.fillcolor);else if(p){var u;e.selectAll("g.contourfill path").style("fill",function(c){return u===void 0&&(u=c.level),x(c.level+.5*a)}),u===void 0&&(u=o),e.selectAll("g.contourbg path").style("fill",x(u-.5*a))}}),i(A)}},8724:function($,U,t){var M=t(1586),E=t(14523);$.exports=function(i,S,A,g,v){var e=A("contours.coloring"),r,f="";e==="fill"&&(r=A("contours.showlines")),r!==!1&&(e!=="lines"&&(f=A("line.color","#000")),A("line.width",.5),A("line.dash")),e!=="none"&&(i.showlegend!==!0&&(S.showlegend=!1),S._dfltShowLegend=!1,M(i,S,g,A,{prefix:"",cLetter:"z"})),A("line.smoothing"),E(A,g,f,v)}},88085:function($,U,t){var M=t(21606),E=t(70600),i=t(50693),S=t(1426).extendFlat,A=E.contours;$.exports=S({carpet:{valType:"string",editType:"calc"},z:M.z,a:M.x,a0:M.x0,da:M.dx,b:M.y,b0:M.y0,db:M.dy,text:M.text,hovertext:M.hovertext,transpose:M.transpose,atype:M.xtype,btype:M.ytype,fillcolor:E.fillcolor,autocontour:E.autocontour,ncontours:E.ncontours,contours:{type:A.type,start:A.start,end:A.end,size:A.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:A.showlines,showlabels:A.showlabels,labelfont:A.labelfont,labelformat:A.labelformat,operation:A.operation,value:A.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:E.line.color,width:E.line.width,dash:E.line.dash,smoothing:E.line.smoothing,editType:"plot"},transforms:void 0},i("",{cLetter:"z",autoColorDflt:!1}))},59885:function($,U,t){var M=t(78803),E=t(71828),i=t(68296),S=t(4742),A=t(824),g=t(43907),v=t(70769),e=t(75005),r=t(22882),f=t(18670);$.exports=function(a,o){var h=o._carpetTrace=r(a,o);if(!(!h||!h.visible||h.visible==="legendonly")){if(!o.a||!o.b){var y=a.data[h.index],p=a.data[o.index];p.a||(p.a=y.a),p.b||(p.b=y.b),e(p,o,o._defaultColor,a._fullLayout)}var x=n(a,o);return f(o,o._z),x}};function n(a,o){var h=o._carpetTrace,y=h.aaxis,p=h.baxis,x,s,u,c,T,k,_;y._minDtick=0,p._minDtick=0,E.isArray1D(o.z)&&i(o,y,p,"a","b",["z"]),x=o._a=o._a||o.a,c=o._b=o._b||o.b,x=x?y.makeCalcdata(o,"_a"):[],c=c?p.makeCalcdata(o,"_b"):[],s=o.a0||0,u=o.da||1,T=o.b0||0,k=o.db||1,_=o._z=S(o._z||o.z,o.transpose),o._emptypoints=g(_),A(_,o._emptypoints);var b=E.maxRowLength(_),P=o.xtype==="scaled"?"":x,l=v(o,P,s,u,b,y),d=o.ytype==="scaled"?"":c,L=v(o,d,T,k,_.length,p),w={a:l,b:L,z:_};return o.contours.type==="levels"&&o.contours.coloring!=="none"&&M(a,o,{vals:_,containerStr:"",cLetter:"z"}),[w]}},75005:function($,U,t){var M=t(71828),E=t(67684),i=t(88085),S=t(83179),A=t(67217),g=t(8724);$.exports=function(v,e,r,f){function n(y,p){return M.coerce(v,e,i,y,p)}function a(y){return M.coerce2(v,e,i,y)}if(n("carpet"),v.a&&v.b){var o=E(v,e,n,f,"a","b");if(!o){e.visible=!1;return}n("text");var h=n("contours.type")==="constraint";h?S(v,e,n,f,r,{hasHover:!1}):(A(v,e,n,a),g(v,e,n,f,{hasHover:!1}))}else e._defaultColor=r,e._length=null}},93740:function($,U,t){$.exports={attributes:t(88085),supplyDefaults:t(75005),colorbar:t(90654),calc:t(59885),plot:t(51048),style:t(84426),moduleType:"trace",name:"contourcarpet",basePlotModule:t(93612),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},51048:function($,U,t){var M=t(39898),E=t(27669),i=t(67961),S=t(91424),A=t(71828),g=t(87678),v=t(81696),e=t(29854),r=t(36914),f=t(84857),n=t(87558),a=t(20083),o=t(22882),h=t(4536);$.exports=function(b,P,l,d){var L=P.xaxis,w=P.yaxis;A.makeTraceGroups(d,l,"contour").each(function(I){var z=M.select(this),B=I[0],O=B.trace,R=O._carpetTrace=o(b,O),C=b.calcdata[R.index][0];if(!R.visible||R.visible==="legendonly")return;var F=B.a,N=B.b,V=O.contours,K=n(V,P,B),Q=V.type==="constraint",at=V._operation,it=Q?at==="="?"lines":"fill":V.coloring;function q(pt){var yt=R.ab2xy(pt[0],pt[1],!0);return[L.c2p(yt[0]),w.c2p(yt[1])]}var W=[[F[0],N[N.length-1]],[F[F.length-1],N[N.length-1]],[F[F.length-1],N[0]],[F[0],N[0]]];g(K);var Z=(F[F.length-1]-F[0])*1e-8,G=(N[N.length-1]-N[0])*1e-8;v(K,Z,G);var et=K;V.type==="constraint"&&(et=f(K,at)),y(K,q);var nt,X,Y,ot,rt=[];for(ot=C.clipsegments.length-1;ot>=0;ot--)nt=C.clipsegments[ot],X=E([],nt.x,L.c2p),Y=E([],nt.y,w.c2p),X.reverse(),Y.reverse(),rt.push(i(X,Y,nt.bicubic));var ht="M"+rt.join("L")+"Z";T(z,C.clipsegments,L,w,Q,it),k(O,z,L,w,et,W,q,R,C,it,ht),p(z,K,b,B,V,P,R),S.setClipUrl(z,R._clipPathId,b)})};function y(b,P){var l,d,L,w,I,z,B,O,R;for(l=0;l<b.length;l++){for(w=b[l],I=w.pedgepaths=[],z=w.ppaths=[],d=0;d<w.edgepaths.length;d++){for(R=w.edgepaths[d],B=[],L=0;L<R.length;L++)B[L]=P(R[L]);I.push(B)}for(d=0;d<w.paths.length;d++){for(R=w.paths[d],O=[],L=0;L<R.length;L++)O[L]=P(R[L]);z.push(O)}}}function p(b,P,l,d,L,w,I){var z=l._context.staticPlot,B=A.ensureSingle(b,"g","contourlines"),O=L.showlines!==!1,R=L.showlabels,C=O&&R,F=e.createLines(B,O||R,P,z),N=e.createLineClip(B,C,l,d.trace.uid),V=b.selectAll("g.contourlabels").data(R?[0]:[]);if(V.exit().remove(),V.enter().append("g").classed("contourlabels",!0),R){var K=w.xaxis,Q=w.yaxis,at=K._length,it=Q._length,q=[[[0,0],[at,0],[at,it],[0,it]]],W=[];A.clearLocationCache();var Z=e.labelFormatter(l,d),G=S.tester.append("text").attr("data-notex",1).call(S.font,L.labelfont),et={left:0,right:at,center:at/2,top:0,bottom:it,middle:it/2},nt=Math.sqrt(at*at+it*it),X=r.LABELDISTANCE*nt/Math.max(1,P.length/r.LABELINCREASE);F.each(function(Y){var ot=e.calcTextOpts(Y.level,Z,G,l);M.select(this).selectAll("path").each(function(rt){var ht=this,pt=A.getVisibleSegment(ht,et,ot.height/2);if(pt&&(x(ht,rt,Y,pt,I,ot.height),!(pt.len<(ot.width+ot.height)*r.LABELMIN)))for(var yt=Math.min(Math.ceil(pt.len/X),r.LABELMAX),xt=0;xt<yt;xt++){var Ft=e.findBestTextLocation(ht,pt,ot,W,et);if(!Ft)break;e.addLabelData(Ft,ot,W,q)}})}),G.remove(),e.drawLabels(V,W,l,N,C?q:null)}R&&!O&&F.remove()}function x(b,P,l,d,L,w){for(var I,z=0;z<l.pedgepaths.length;z++)P===l.pedgepaths[z]&&(I=l.edgepaths[z]);if(!I)return;var B=L.a[0],O=L.a[L.a.length-1],R=L.b[0],C=L.b[L.b.length-1];function F(at,it){var q=0,W,Z=.1;return(Math.abs(at[0]-B)<Z||Math.abs(at[0]-O)<Z)&&(W=u(L.dxydb_rough(at[0],at[1],Z)),q=Math.max(q,w*c(it,W)/2)),(Math.abs(at[1]-R)<Z||Math.abs(at[1]-C)<Z)&&(W=u(L.dxyda_rough(at[0],at[1],Z)),q=Math.max(q,w*c(it,W)/2)),q}var N=s(b,0,1),V=s(b,d.total,d.total-1),K=F(I[0],N),Q=d.total-F(I[I.length-1],V);d.min<K&&(d.min=K),d.max>Q&&(d.max=Q),d.len=d.max-d.min}function s(b,P,l){var d=b.getPointAtLength(P),L=b.getPointAtLength(l),w=L.x-d.x,I=L.y-d.y,z=Math.sqrt(w*w+I*I);return[w/z,I/z]}function u(b){var P=Math.sqrt(b[0]*b[0]+b[1]*b[1]);return[b[0]/P,b[1]/P]}function c(b,P){var l=Math.abs(b[0]*P[0]+b[1]*P[1]),d=Math.sqrt(1-l*l);return d/l}function T(b,P,l,d,L,w){var I,z,B,O,R=A.ensureSingle(b,"g","contourbg"),C=R.selectAll("path").data(w==="fill"&&!L?[0]:[]);C.enter().append("path"),C.exit().remove();var F=[];for(O=0;O<P.length;O++)I=P[O],z=E([],I.x,l.c2p),B=E([],I.y,d.c2p),F.push(i(z,B,I.bicubic));C.attr("d","M"+F.join("L")+"Z").style("stroke","none")}function k(b,P,l,d,L,w,I,z,B,O,R){var C=O==="fill";C&&a(L,b.contours);var F=A.ensureSingle(P,"g","contourfill"),N=F.selectAll("path").data(C?L:[]);N.enter().append("path"),N.exit().remove(),N.each(function(V){var K=(V.prefixBoundary?R:"")+_(b,V,w,I,z,B,l,d);K?M.select(this).attr("d",K).style("stroke","none"):M.select(this).remove()})}function _(b,P,l,d,L,w,I,z){var B,O="",R=P.edgepaths.map(function(ot,rt){return rt}),C=!0,F,N,V,K,Q,at,it=Math.abs(l[0][0]-l[2][0])*1e-4,q=Math.abs(l[0][1]-l[2][1])*1e-4;function W(ot){return Math.abs(ot[1]-l[0][1])<q}function Z(ot){return Math.abs(ot[1]-l[2][1])<q}function G(ot){return Math.abs(ot[0]-l[0][0])<it}function et(ot){return Math.abs(ot[0]-l[2][0])<it}function nt(ot,rt){var ht,pt,yt,xt,Ft="";for(W(ot)&&!et(ot)||Z(ot)&&!G(ot)?(xt=L.aaxis,yt=h(L,w,[ot[0],rt[0]],.5*(ot[1]+rt[1]))):(xt=L.baxis,yt=h(L,w,.5*(ot[0]+rt[0]),[ot[1],rt[1]])),ht=1;ht<yt.length;ht++)for(Ft+=xt.smoothing?"C":"L",pt=0;pt<yt[ht].length;pt++){var Et=yt[ht][pt];Ft+=[I.c2p(Et[0]),z.c2p(Et[1])]+" "}return Ft}for(B=0,F=null;R.length;){var X=P.edgepaths[B][0];for(F&&(O+=nt(F,X)),at=S.smoothopen(P.edgepaths[B].map(d),P.smoothing),O+=C?at:at.replace(/^M/,"L"),R.splice(R.indexOf(B),1),F=P.edgepaths[B][P.edgepaths[B].length-1],K=-1,V=0;V<4;V++){if(!F){A.log("Missing end?",B,P);break}for(W(F)&&!et(F)?N=l[1]:G(F)?N=l[0]:Z(F)?N=l[3]:et(F)&&(N=l[2]),Q=0;Q<P.edgepaths.length;Q++){var Y=P.edgepaths[Q][0];Math.abs(F[0]-N[0])<it?Math.abs(F[0]-Y[0])<it&&(Y[1]-F[1])*(N[1]-Y[1])>=0&&(N=Y,K=Q):Math.abs(F[1]-N[1])<q?Math.abs(F[1]-Y[1])<q&&(Y[0]-F[0])*(N[0]-Y[0])>=0&&(N=Y,K=Q):A.log("endpt to newendpt is not vert. or horz.",F,N,Y)}if(K>=0)break;O+=nt(F,N),F=N}if(K===P.edgepaths.length){A.log("unclosed perimeter path");break}B=K,C=R.indexOf(B)===-1,C&&(B=R[0],O+=nt(F,N)+"Z",F=null)}for(B=0;B<P.paths.length;B++)O+=S.smoothclosed(P.paths[B].map(d),P.smoothing);return O}},64096:function($,U,t){var M=t(50693),E=t(5386).fF,i=t(9012),S=t(99181),A=t(1426).extendFlat;$.exports=A({lon:S.lon,lat:S.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:S.text,hovertext:S.hovertext,hoverinfo:A({},i.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:E(),showlegend:A({},i.showlegend,{dflt:!1})},M("",{cLetter:"z",editTypeOverride:"calc"}))},85070:function($,U,t){var M=t(92770),E=t(71828).isArrayOrTypedArray,i=t(50606).BADNUM,S=t(78803),A=t(71828)._;$.exports=function(g,v){for(var e=v._length,r=new Array(e),f=v.z,n=E(f)&&f.length,a=0;a<e;a++){var o=r[a]={},h=v.lon[a],y=v.lat[a];if(o.lonlat=M(h)&&M(y)?[+h,+y]:[i,i],n){var p=f[a];o.z=M(p)?p:i}}return S(g,v,{vals:n?f:[0,1],containerStr:"",cLetter:"z"}),e&&(r[0].t={labels:{lat:A(g,"lat:")+" ",lon:A(g,"lon:")+" "}}),r}},52414:function($,U,t){var M=t(92770),E=t(71828),i=t(7901),S=t(21081),A=t(50606).BADNUM,g=t(18214).makeBlank;$.exports=function(v){var e=v[0].trace,r=e.visible===!0&&e._length!==0,f={layout:{visibility:"none"},paint:{}},n=e._opts={heatmap:f,geojson:g()};if(!r)return n;var a=[],o,h=e.z,y=e.radius,p=E.isArrayOrTypedArray(h)&&h.length,x=E.isArrayOrTypedArray(y);for(o=0;o<v.length;o++){var s=v[o],u=s.lonlat;if(u[0]!==A){var c={};if(p){var T=s.z;c.z=T!==A?T:0}x&&(c.r=M(y[o])&&y[o]>0?+y[o]:0),a.push({type:"Feature",geometry:{type:"Point",coordinates:u},properties:c})}}var k=S.extractOpts(e),_=k.reversescale?S.flipScale(k.colorscale):k.colorscale,b=_[0][1],P=i.opacity(b)<1?b:i.addOpacity(b,0),l=["interpolate",["linear"],["heatmap-density"],0,P];for(o=1;o<_.length;o++)l.push(_[o][0],_[o][1]);var d=["interpolate",["linear"],["get","z"],k.min,0,k.max,1];return E.extendFlat(n.heatmap.paint,{"heatmap-weight":p?d:1/(k.max-k.min),"heatmap-color":l,"heatmap-radius":x?{type:"identity",property:"r"}:e.radius,"heatmap-opacity":e.opacity}),n.geojson={type:"FeatureCollection",features:a},n.heatmap.layout.visibility="visible",n}},79429:function($,U,t){var M=t(71828),E=t(1586),i=t(64096);$.exports=function(S,A,g,v){function e(a,o){return M.coerce(S,A,i,a,o)}var r=e("lon")||[],f=e("lat")||[],n=Math.min(r.length,f.length);if(!n){A.visible=!1;return}A._length=n,e("z"),e("radius"),e("below"),e("text"),e("hovertext"),e("hovertemplate"),E(S,A,v,e,{prefix:"",cLetter:"z"})}},62474:function($){$.exports=function(U,t){return U.lon=t.lon,U.lat=t.lat,U.z=t.z,U}},84684:function($,U,t){var M=t(89298),E=t(28178).hoverPoints,i=t(28178).getExtraText;$.exports=function(S,A,g){var v=E(S,A,g);if(v){var e=v[0],r=e.cd,f=r[0].trace,n=r[e.index];if(delete e.color,"z"in n){var a=e.subplot.mockAxis;e.z=n.z,e.zLabel=M.tickText(a,a.c2l(n.z),"hover").text}return e.extraText=i(f,n,r[0].t.labels),[e]}}},93814:function($,U,t){$.exports={attributes:t(64096),supplyDefaults:t(79429),colorbar:t(61243),formatLabels:t(15636),calc:t(85070),plot:t(7336),hoverPoints:t(84684),eventData:t(62474),getBelow:function(M,E){for(var i=E.getMapLayers(),S=0;S<i.length;S++){var A=i[S],g=A.id;if(A.type==="symbol"&&typeof g=="string"&&g.indexOf("plotly-")===-1)return g}},moduleType:"trace",name:"densitymapbox",basePlotModule:t(50101),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},7336:function($,U,t){var M=t(52414),E=t(77734).traceLayerPrefix;function i(A,g){this.type="densitymapbox",this.subplot=A,this.uid=g,this.sourceId="source-"+g,this.layerList=[["heatmap",E+g+"-heatmap"]],this.below=null}var S=i.prototype;S.update=function(A){var g=this.subplot,v=this.layerList,e=M(A),r=g.belowLookup["trace-"+this.uid];g.map.getSource(this.sourceId).setData(e.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(e,r),this.below=r);for(var f=0;f<v.length;f++){var n=v[f],a=n[0],o=n[1],h=e[a];g.setOptions(o,"setLayoutProperty",h.layout),h.layout.visibility==="visible"&&g.setOptions(o,"setPaintProperty",h.paint)}},S._addLayers=function(A,g){for(var v=this.subplot,e=this.layerList,r=this.sourceId,f=0;f<e.length;f++){var n=e[f],a=n[0],o=A[a];v.addLayer({type:a,id:n[1],source:r,layout:o.layout,paint:o.paint},g)}},S._removeLayers=function(){for(var A=this.subplot.map,g=this.layerList,v=g.length-1;v>=0;v--)A.removeLayer(g[v][1])},S.dispose=function(){var A=this.subplot.map;this._removeLayers(),A.removeSource(this.sourceId)},$.exports=function(A,g){var v=g[0].trace,e=new i(A,v.uid),r=e.sourceId,f=M(g),n=e.below=A.belowLookup["trace-"+v.uid];return A.map.addSource(r,{type:"geojson",data:f.geojson}),e._addLayers(f,n),e}},49789:function($,U,t){var M=t(71828);$.exports=function(E,i){for(var S=0;S<E.length;S++)E[S].i=S;M.mergeArray(i.text,E,"tx"),M.mergeArray(i.hovertext,E,"htx");var A=i.marker;if(A){M.mergeArray(A.opacity,E,"mo"),M.mergeArray(A.color,E,"mc");var g=A.line;g&&(M.mergeArray(g.color,E,"mlc"),M.mergeArrayCastPositive(g.width,E,"mlw"))}}},1285:function($,U,t){var M=t(1486),E=t(82196).line,i=t(9012),S=t(12663).axisHoverFormat,A=t(5386).fF,g=t(5386).si,v=t(18517),e=t(1426).extendFlat,r=t(7901);$.exports={x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:S("x"),yhoverformat:S("y"),hovertext:M.hovertext,hovertemplate:A({},{keys:v.eventDataKeys}),hoverinfo:e({},i.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:g({editType:"plot"},{keys:v.eventDataKeys.concat(["label","value"])}),text:M.text,textposition:M.textposition,insidetextanchor:e({},M.insidetextanchor,{dflt:"middle"}),textangle:e({},M.textangle,{dflt:0}),textfont:M.textfont,insidetextfont:M.insidetextfont,outsidetextfont:M.outsidetextfont,constraintext:M.constraintext,cliponaxis:M.cliponaxis,orientation:e({},M.orientation,{}),offset:e({},M.offset,{arrayOk:!1}),width:e({},M.width,{arrayOk:!1}),marker:f(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:e({},E.color,{dflt:r.defaultLine}),width:e({},E.width,{dflt:0,editType:"plot"}),dash:E.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup};function f(){var n=e({},M.marker);return delete n.pattern,n}},9532:function($,U,t){var M=t(89298),E=t(42973),i=t(49789),S=t(66279),A=t(50606).BADNUM;$.exports=function(v,e){var r=M.getFromId(v,e.xaxis||"x"),f=M.getFromId(v,e.yaxis||"y"),n,a,o,h,y,p,x,s;e.orientation==="h"?(n=r.makeCalcdata(e,"x"),o=f.makeCalcdata(e,"y"),h=E(e,f,"y",o),y=!!e.yperiodalignment,p="y"):(n=f.makeCalcdata(e,"y"),o=r.makeCalcdata(e,"x"),h=E(e,r,"x",o),y=!!e.xperiodalignment,p="x"),a=h.vals;var u=Math.min(a.length,n.length),c=new Array(u);for(e._base=[],x=0;x<u;x++){n[x]<0&&(n[x]=A);var T=!1;n[x]!==A&&x+1<u&&n[x+1]!==A&&(T=!0),s=c[x]={p:a[x],s:n[x],cNext:T},e._base[x]=-.5*s.s,y&&(c[x].orig_p=o[x],c[x][p+"End"]=h.ends[x],c[x][p+"Start"]=h.starts[x]),e.ids&&(s.id=String(e.ids[x])),x===0&&(c[0].vTotal=0),c[0].vTotal+=g(s.s),s.begR=g(s.s)/g(c[0].s)}var k;for(x=0;x<u;x++)s=c[x],s.s!==A&&(s.sumR=s.s/c[0].vTotal,s.difR=k!==void 0?s.s/k:1,k=s.s);return i(c,e),S(c,e),c};function g(v){return v===A?0:v}},18517:function($){$.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},8984:function($,U,t){var M=t(11661).setGroupPositions;$.exports=function(E,i){var S=E._fullLayout,A=E._fullData,g=E.calcdata,v=i.xaxis,e=i.yaxis,r=[],f=[],n=[],a,o;for(o=0;o<A.length;o++){var h=A[o],y=h.orientation==="h";h.visible===!0&&h.xaxis===v._id&&h.yaxis===e._id&&h.type==="funnel"&&(a=g[o],y?n.push(a):f.push(a),r.push(a))}var p={mode:S.funnelmode,norm:S.funnelnorm,gap:S.funnelgap,groupgap:S.funnelgroupgap};for(M(E,v,e,f,p),M(E,e,v,n,p),o=0;o<r.length;o++){a=r[o];for(var x=0;x<a.length;x++)x+1<a.length&&(a[x].nextP0=a[x+1].p0,a[x].nextS0=a[x+1].s0,a[x].nextP1=a[x+1].p1,a[x].nextS1=a[x+1].s1)}}},26199:function($,U,t){var M=t(71828),E=t(26125),i=t(90769).handleText,S=t(67513),A=t(73927),g=t(1285),v=t(7901);function e(n,a,o,h){function y(k,_){return M.coerce(n,a,g,k,_)}var p=S(n,a,h,y);if(!p){a.visible=!1;return}A(n,a,h,y),y("xhoverformat"),y("yhoverformat"),y("orientation",a.y&&!a.x?"v":"h"),y("offset"),y("width");var x=y("text");y("hovertext"),y("hovertemplate");var s=y("textposition");i(n,a,h,y,s,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),a.textposition!=="none"&&!a.texttemplate&&y("textinfo",Array.isArray(x)?"text+value":"value");var u=y("marker.color",o);y("marker.line.color",v.defaultLine),y("marker.line.width");var c=y("connector.visible");if(c){y("connector.fillcolor",r(u));var T=y("connector.line.width");T&&(y("connector.line.color"),y("connector.line.dash"))}}function r(n){var a=M.isArrayOrTypedArray(n)?"#000":n;return v.addOpacity(a,.5*v.opacity(a))}function f(n,a){var o,h;function y(x){return M.coerce(h._input,h,g,x)}if(a.funnelmode==="group")for(var p=0;p<n.length;p++)h=n[p],o=h._input,E(o,h,a,y)}$.exports={supplyDefaults:e,crossTraceDefaults:f}},34598:function($){$.exports=function(U,t){return U.x="xVal"in t?t.xVal:t.x,U.y="yVal"in t?t.yVal:t.y,"percentInitial"in t&&(U.percentInitial=t.percentInitial),"percentPrevious"in t&&(U.percentPrevious=t.percentPrevious),"percentTotal"in t&&(U.percentTotal=t.percentTotal),t.xa&&(U.xaxis=t.xa),t.ya&&(U.yaxis=t.ya),U}},63341:function($,U,t){var M=t(7901).opacity,E=t(95423).hoverOnBars,i=t(71828).formatPercent;$.exports=function(A,g,v,e,r){var f=E(A,g,v,e,r);if(f){var n=f.cd,a=n[0].trace,o=a.orientation==="h",h=f.index,y=n[h],p=o?"x":"y";f[p+"LabelVal"]=y.s,f.percentInitial=y.begR,f.percentInitialLabel=i(y.begR,1),f.percentPrevious=y.difR,f.percentPreviousLabel=i(y.difR,1),f.percentTotal=y.sumR,f.percentTotalLabel=i(y.sumR,1);var x=y.hi||a.hoverinfo,s=[];if(x&&x!=="none"&&x!=="skip"){var u=x==="all",c=x.split("+"),T=function(k){return u||c.indexOf(k)!==-1};T("percent initial")&&s.push(f.percentInitialLabel+" of initial"),T("percent previous")&&s.push(f.percentPreviousLabel+" of previous"),T("percent total")&&s.push(f.percentTotalLabel+" of total")}return f.extraText=s.join("<br>"),f.color=S(a,y),[f]}};function S(A,g){var v=A.marker,e=g.mc||v.color,r=g.mlc||v.line.color,f=g.mlw||v.line.width;if(M(e))return e;if(M(r)&&f)return r}},51759:function($,U,t){$.exports={attributes:t(1285),layoutAttributes:t(10440),supplyDefaults:t(26199).supplyDefaults,crossTraceDefaults:t(26199).crossTraceDefaults,supplyLayoutDefaults:t(93138),calc:t(9532),crossTraceCalc:t(8984),plot:t(80461),style:t(68266).style,hoverPoints:t(63341),eventData:t(34598),selectPoints:t(81974),moduleType:"trace",name:"funnel",basePlotModule:t(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},10440:function($){$.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},93138:function($,U,t){var M=t(71828),E=t(10440);$.exports=function(i,S,A){var g=!1;function v(f,n){return M.coerce(i,S,E,f,n)}for(var e=0;e<A.length;e++){var r=A[e];if(r.visible&&r.type==="funnel"){g=!0;break}}g&&(v("funnelmode"),v("funnelgap",.2),v("funnelgroupgap"))}},80461:function($,U,t){var M=t(39898),E=t(71828),i=t(91424),S=t(50606).BADNUM,A=t(17295),g=t(72597).clearMinTextSize;$.exports=function(f,n,a,o){var h=f._fullLayout;g("funnel",h),v(f,n,a,o),e(f,n,a,o),A.plot(f,n,a,o,{mode:h.funnelmode,norm:h.funnelmode,gap:h.funnelgap,groupgap:h.funnelgroupgap})};function v(f,n,a,o){var h=n.xaxis,y=n.yaxis;E.makeTraceGroups(o,a,"trace bars").each(function(p){var x=M.select(this),s=p[0].trace,u=E.ensureSingle(x,"g","regions");if(!s.connector||!s.connector.visible){u.remove();return}var c=s.orientation==="h",T=u.selectAll("g.region").data(E.identity);T.enter().append("g").classed("region",!0),T.exit().remove();var k=T.size();T.each(function(_,b){if(!(b!==k-1&&!_.cNext)){var P=r(_,h,y,c),l=P[0],d=P[1],L="";l[0]!==S&&d[0]!==S&&l[1]!==S&&d[1]!==S&&l[2]!==S&&d[2]!==S&&l[3]!==S&&d[3]!==S&&(c?L+="M"+l[0]+","+d[1]+"L"+l[2]+","+d[2]+"H"+l[3]+"L"+l[1]+","+d[1]+"Z":L+="M"+l[1]+","+d[1]+"L"+l[2]+","+d[3]+"V"+d[2]+"L"+l[1]+","+d[0]+"Z"),L===""&&(L="M0,0Z"),E.ensureSingle(M.select(this),"path").attr("d",L).call(i.setClipUrl,n.layerClipId,f)}})})}function e(f,n,a,o){var h=n.xaxis,y=n.yaxis;E.makeTraceGroups(o,a,"trace bars").each(function(p){var x=M.select(this),s=p[0].trace,u=E.ensureSingle(x,"g","lines");if(!s.connector||!s.connector.visible||!s.connector.line.width){u.remove();return}var c=s.orientation==="h",T=u.selectAll("g.line").data(E.identity);T.enter().append("g").classed("line",!0),T.exit().remove();var k=T.size();T.each(function(_,b){if(!(b!==k-1&&!_.cNext)){var P=r(_,h,y,c),l=P[0],d=P[1],L="";l[3]!==void 0&&d[3]!==void 0&&(c?(L+="M"+l[0]+","+d[1]+"L"+l[2]+","+d[2],L+="M"+l[1]+","+d[1]+"L"+l[3]+","+d[2]):(L+="M"+l[1]+","+d[1]+"L"+l[2]+","+d[3],L+="M"+l[1]+","+d[0]+"L"+l[2]+","+d[2])),L===""&&(L="M0,0Z"),E.ensureSingle(M.select(this),"path").attr("d",L).call(i.setClipUrl,n.layerClipId,f)}})})}function r(f,n,a,o){var h=[],y=[],p=o?n:a,x=o?a:n;return h[0]=p.c2p(f.s0,!0),y[0]=x.c2p(f.p0,!0),h[1]=p.c2p(f.s1,!0),y[1]=x.c2p(f.p1,!0),h[2]=p.c2p(f.nextS0,!0),y[2]=x.c2p(f.nextP0,!0),h[3]=p.c2p(f.nextS1,!0),y[3]=x.c2p(f.nextP1,!0),o?[h,y]:[y,h]}},68266:function($,U,t){var M=t(39898),E=t(91424),i=t(7901),S=t(37822).DESELECTDIM,A=t(16688),g=t(72597).resizeText,v=A.styleTextPoints;function e(r,f,n){var a=n||M.select(r).selectAll("g.funnellayer").selectAll("g.trace");g(r,a,"funnel"),a.style("opacity",function(o){return o[0].trace.opacity}),a.each(function(o){var h=M.select(this),y=o[0].trace;h.selectAll(".point > path").each(function(p){if(!p.isBlank){var x=y.marker;M.select(this).call(i.fill,p.mc||x.color).call(i.stroke,p.mlc||x.line.color).call(E.dashLine,x.line.dash,p.mlw||x.line.width).style("opacity",y.selectedpoints&&!p.selected?S:1)}}),v(h,y,r),h.selectAll(".regions").each(function(){M.select(this).selectAll("path").style("stroke-width",0).call(i.fill,y.connector.fillcolor)}),h.selectAll(".lines").each(function(){var p=y.connector.line;E.lineGroupStyle(M.select(this).selectAll("path"),p.width,p.color,p.dash)})})}$.exports={style:e}},86807:function($,U,t){var M=t(34e3),E=t(9012),i=t(27670).Y,S=t(5386).fF,A=t(5386).si,g=t(1426).extendFlat;$.exports={labels:M.labels,label0:M.label0,dlabel:M.dlabel,values:M.values,marker:{colors:M.marker.colors,line:{color:g({},M.marker.line.color,{dflt:null}),width:g({},M.marker.line.width,{dflt:1}),editType:"calc"},pattern:M.marker.pattern,editType:"calc"},text:M.text,hovertext:M.hovertext,scalegroup:g({},M.scalegroup,{}),textinfo:g({},M.textinfo,{flags:["label","text","value","percent"]}),texttemplate:A({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:g({},E.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:S({},{keys:["label","color","value","text","percent"]}),textposition:g({},M.textposition,{values:["inside","none"],dflt:"inside"}),textfont:M.textfont,insidetextfont:M.insidetextfont,title:{text:M.title.text,font:M.title.font,position:g({},M.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:i({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},6452:function($,U,t){var M=t(74875);U.name="funnelarea",U.plot=function(E,i,S,A){M.plotBasePlot(U.name,E,i,S,A)},U.clean=function(E,i,S,A){M.cleanBasePlot(U.name,E,i,S,A)}},89574:function($,U,t){var M=t(32354);function E(S,A){return M.calc(S,A)}function i(S){M.crossTraceCalc(S,{type:"funnelarea"})}$.exports={calc:E,crossTraceCalc:i}},86282:function($,U,t){var M=t(71828),E=t(86807),i=t(27670).c,S=t(90769).handleText,A=t(37434).handleLabelsAndValues,g=t(37434).handleMarkerDefaults;$.exports=function(v,e,r,f){function n(T,k){return M.coerce(v,e,E,T,k)}var a=n("labels"),o=n("values"),h=A(a,o),y=h.len;if(e._hasLabels=h.hasLabels,e._hasValues=h.hasValues,!e._hasLabels&&e._hasValues&&(n("label0"),n("dlabel")),!y){e.visible=!1;return}e._length=y,g(v,e,f,n),n("scalegroup");var p=n("text"),x=n("texttemplate"),s;if(x||(s=n("textinfo",Array.isArray(p)?"text+percent":"percent")),n("hovertext"),n("hovertemplate"),x||s&&s!=="none"){var u=n("textposition");S(v,e,f,n,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}i(e,f,n);var c=n("title.text");c&&(n("title.position"),M.coerceFont(n,"title.font",f.font)),n("aspectratio"),n("baseratio")}},10421:function($,U,t){$.exports={moduleType:"trace",name:"funnelarea",basePlotModule:t(6452),categories:["pie-like","funnelarea","showLegend"],attributes:t(86807),layoutAttributes:t(80097),supplyDefaults:t(86282),supplyLayoutDefaults:t(57402),calc:t(89574).calc,crossTraceCalc:t(89574).crossTraceCalc,plot:t(79187),style:t(71858),styleOne:t(63463),meta:{}}},80097:function($,U,t){var M=t(92774).hiddenlabels;$.exports={hiddenlabels:M,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57402:function($,U,t){var M=t(71828),E=t(80097);$.exports=function(i,S){function A(g,v){return M.coerce(i,S,E,g,v)}A("hiddenlabels"),A("funnelareacolorway",S.colorway),A("extendfunnelareacolors")}},79187:function($,U,t){var M=t(39898),E=t(91424),i=t(71828),S=i.strScale,A=i.strTranslate,g=t(63893),v=t(17295),e=v.toMoveInsideBar,r=t(72597),f=r.recordMinTextSize,n=r.clearMinTextSize,a=t(53581),o=t(14575),h=o.attachFxHandlers,y=o.determineInsideTextFont,p=o.layoutAreas,x=o.prerenderTitles,s=o.positionTitleOutside,u=o.formatSliceLabel;$.exports=function(_,b){var P=_._context.staticPlot,l=_._fullLayout;n("funnelarea",l),x(b,_),p(b,l._size),i.makeTraceGroups(l._funnelarealayer,b,"trace").each(function(d){var L=M.select(this),w=d[0],I=w.trace;k(d),L.each(function(){var z=M.select(this).selectAll("g.slice").data(d);z.enter().append("g").classed("slice",!0),z.exit().remove(),z.each(function(O,R){if(O.hidden){M.select(this).selectAll("path,g").remove();return}O.pointNumber=O.i,O.curveNumber=I.index;var C=w.cx,F=w.cy,N=M.select(this),V=N.selectAll("path.surface").data([O]);V.enter().append("path").classed("surface",!0).style({"pointer-events":P?"none":"all"}),N.call(h,_,d);var K="M"+(C+O.TR[0])+","+(F+O.TR[1])+c(O.TR,O.BR)+c(O.BR,O.BL)+c(O.BL,O.TL)+"Z";V.attr("d",K),u(_,O,w);var Q=a.castOption(I.textposition,O.pts),at=N.selectAll("g.slicetext").data(O.text&&Q!=="none"?[0]:[]);at.enter().append("g").classed("slicetext",!0),at.exit().remove(),at.each(function(){var it=i.ensureSingle(M.select(this),"text","",function(Y){Y.attr("data-notex",1)}),q=i.ensureUniformFontSize(_,y(I,O,l.font));it.text(O.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(E.font,q).call(g.convertToTspans,_);var W=E.bBox(it.node()),Z,G,et,nt=Math.min(O.BL[1],O.BR[1])+F,X=Math.max(O.TL[1],O.TR[1])+F;G=Math.max(O.TL[0],O.BL[0])+C,et=Math.min(O.TR[0],O.BR[0])+C,Z=e(G,et,nt,X,W,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),Z.fontSize=q.size,f(I.type,Z,l),d[R].transform=Z,i.setTransormAndDisplay(it,Z)})});var B=M.select(this).selectAll("g.titletext").data(I.title.text?[0]:[]);B.enter().append("g").classed("titletext",!0),B.exit().remove(),B.each(function(){var O=i.ensureSingle(M.select(this),"text","",function(F){F.attr("data-notex",1)}),R=I.title.text;I._meta&&(R=i.templateString(R,I._meta)),O.text(R).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(E.font,I.title.font).call(g.convertToTspans,_);var C=s(w,l._size);O.attr("transform",A(C.x,C.y)+S(Math.min(1,C.scale))+A(C.tx,C.ty))})})})};function c(_,b){var P=b[0]-_[0],l=b[1]-_[1];return"l"+P+","+l}function T(_,b){return[.5*(_[0]+b[0]),.5*(_[1]+b[1])]}function k(_){if(!_.length)return;var b=_[0],P=b.trace,l=P.aspectratio,d=P.baseratio;d>.999&&(d=.999);var L=Math.pow(d,2),w=b.vTotal,I=w*L/(1-L),z=w,B=I/w;function O(){var rt=Math.sqrt(B);return{x:rt,y:-rt}}function R(){var rt=O();return[rt.x,rt.y]}var C,F=[];F.push(R());var N,V;for(N=_.length-1;N>-1;N--)if(V=_[N],!V.hidden){var K=V.v/z;B+=K,F.push(R())}var Q=1/0,at=-1/0;for(N=0;N<F.length;N++)C=F[N],Q=Math.min(Q,C[1]),at=Math.max(at,C[1]);for(N=0;N<F.length;N++)F[N][1]-=(at+Q)/2;var it=F[F.length-1][0],q=b.r,W=(at-Q)/2,Z=q/it,G=q/W*l;for(b.r=G*W,N=0;N<F.length;N++)F[N][0]*=Z,F[N][1]*=G;C=F[0];var et=[-C[0],C[1]],nt=[C[0],C[1]],X=0;for(N=_.length-1;N>-1;N--)if(V=_[N],!V.hidden){X+=1;var Y=F[X][0],ot=F[X][1];V.TL=[-Y,ot],V.TR=[Y,ot],V.BL=et,V.BR=nt,V.pxmid=T(V.TR,V.BR),et=V.TL,nt=V.TR}}},71858:function($,U,t){var M=t(39898),E=t(63463),i=t(72597).resizeText;$.exports=function(S){var A=S._fullLayout._funnelarealayer.selectAll(".trace");i(S,A,"funnelarea"),A.each(function(g){var v=g[0],e=v.trace,r=M.select(this);r.style({opacity:e.opacity}),r.selectAll("path.surface").each(function(f){M.select(this).call(E,f,e,S)})})}},21606:function($,U,t){var M=t(82196),E=t(9012),i=t(41940),S=t(12663).axisHoverFormat,A=t(5386).fF,g=t(5386).si,v=t(50693),e=t(1426).extendFlat;$.exports=e({z:{valType:"data_array",editType:"calc"},x:e({},M.x,{impliedEdits:{xtype:"array"}}),x0:e({},M.x0,{impliedEdits:{xtype:"scaled"}}),dx:e({},M.dx,{impliedEdits:{xtype:"scaled"}}),y:e({},M.y,{impliedEdits:{ytype:"array"}}),y0:e({},M.y0,{impliedEdits:{ytype:"scaled"}}),dy:e({},M.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:e({},M.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:e({},M.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:e({},M.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:e({},M.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:e({},M.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:e({},M.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:S("x"),yhoverformat:S("y"),zhoverformat:S("z",1),hovertemplate:A(),texttemplate:g({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:i({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:e({},E.showlegend,{dflt:!1})},{transforms:void 0},v("",{cLetter:"z",autoColorDflt:!1}))},90757:function($,U,t){var M=t(73972),E=t(71828),i=t(89298),S=t(42973),A=t(17562),g=t(78803),v=t(68296),e=t(4742),r=t(824),f=t(43907),n=t(70769),a=t(50606).BADNUM;$.exports=function(y,p){var x=i.getFromId(y,p.xaxis||"x"),s=i.getFromId(y,p.yaxis||"y"),u=M.traceIs(p,"contour"),c=M.traceIs(p,"histogram"),T=M.traceIs(p,"gl2d"),k=u?"best":p.zsmooth,_,b,P,l,d,L,w,I,z,B,O;if(x._minDtick=0,s._minDtick=0,c)O=A(y,p),l=O.orig_x,_=O.x,b=O.x0,P=O.dx,I=O.orig_y,d=O.y,L=O.y0,w=O.dy,z=O.z;else{var R=p.z;E.isArray1D(R)?(v(p,x,s,"x","y",["z"]),_=p._x,d=p._y,R=p._z):(l=p.x?x.makeCalcdata(p,"x"):[],I=p.y?s.makeCalcdata(p,"y"):[],_=S(p,x,"x",l).vals,d=S(p,s,"y",I).vals,p._x=_,p._y=d),b=p.x0,P=p.dx,L=p.y0,w=p.dy,z=e(R,p,x,s)}(x.rangebreaks||s.rangebreaks)&&(z=h(_,d,z),c||(_=o(_),d=o(d),p._x=_,p._y=d)),!c&&(u||p.connectgaps)&&(p._emptypoints=f(z),r(z,p._emptypoints));function C(W){k=p._input.zsmooth=p.zsmooth=!1,E.warn('cannot use zsmooth: "fast": '+W)}function F(W){if(W.length>1){var Z=(W[W.length-1]-W[0])/(W.length-1),G=Math.abs(Z/100);for(B=0;B<W.length-1;B++)if(Math.abs(W[B+1]-W[B]-Z)>G)return!1}return!0}p._islinear=!1,x.type==="log"||s.type==="log"?k==="fast"&&C("log axis found"):F(_)?F(d)?p._islinear=!0:k==="fast"&&C("y scale is not linear"):k==="fast"&&C("x scale is not linear");var N=E.maxRowLength(z),V=p.xtype==="scaled"?"":_,K=n(p,V,b,P,N,x),Q=p.ytype==="scaled"?"":d,at=n(p,Q,L,w,z.length,s);T||(p._extremes[x._id]=i.findExtremes(x,K),p._extremes[s._id]=i.findExtremes(s,at));var it={x:K,y:at,z,text:p._text||p.text,hovertext:p._hovertext||p.hovertext};if(p.xperiodalignment&&l&&(it.orig_x=l),p.yperiodalignment&&I&&(it.orig_y=I),V&&V.length===K.length-1&&(it.xCenter=V),Q&&Q.length===at.length-1&&(it.yCenter=Q),c&&(it.xRanges=O.xRanges,it.yRanges=O.yRanges,it.pts=O.pts),u||g(y,p,{vals:z,cLetter:"z"}),u&&p.contours&&p.contours.coloring==="heatmap"){var q={type:p.type==="contour"?"heatmap":"histogram2d",xcalendar:p.xcalendar,ycalendar:p.ycalendar};it.xfill=n(q,V,b,P,N,x),it.yfill=n(q,Q,L,w,z.length,s)}return[it]};function o(y){for(var p=[],x=y.length,s=0;s<x;s++){var u=y[s];u!==a&&p.push(u)}return p}function h(y,p,x){for(var s=[],u=-1,c=0;c<x.length;c++)if(p[c]!==a){u++,s[u]=[];for(var T=0;T<x[c].length;T++)y[T]!==a&&s[u].push(x[c][T])}return s}},4742:function($,U,t){var M=t(92770),E=t(71828),i=t(50606).BADNUM;$.exports=function(S,A,g,v){var e,r,f,n,a,o;function h(c){if(M(c))return+c}if(A&&A.transpose){for(e=0,a=0;a<S.length;a++)e=Math.max(e,S[a].length);if(e===0)return!1;f=function(c){return c.length},n=function(c,T,k){return(c[k]||[])[T]}}else e=S.length,f=function(c,T){return c[T].length},n=function(c,T,k){return(c[T]||[])[k]};var y=function(c,T,k){return T===i||k===i?i:n(c,T,k)};function p(c){if(A&&A.type!=="carpet"&&A.type!=="contourcarpet"&&c&&c.type==="category"&&A["_"+c._id.charAt(0)].length){var T=c._id.charAt(0),k={},_=A["_"+T+"CategoryMap"]||A[T];for(a=0;a<_.length;a++)k[_[a]]=a;return function(b){var P=k[c._categories[b]];return P+1?P:i}}else return E.identity}var x=p(g),s=p(v);v&&v.type==="category"&&(e=v._categories.length);var u=new Array(e);for(a=0;a<e;a++)for(g&&g.type==="category"?r=g._categories.length:r=f(S,a),u[a]=new Array(r),o=0;o<r;o++)u[a][o]=h(y(S,s(a),x(o)));return u}},61243:function($){$.exports={min:"zmin",max:"zmax"}},68296:function($,U,t){var M=t(71828),E=t(50606).BADNUM,i=t(42973);$.exports=function(S,A,g,v,e,r){var f=S._length,n=A.makeCalcdata(S,v),a=g.makeCalcdata(S,e);n=i(S,A,v,n).vals,a=i(S,g,e,a).vals;var o=S.text,h=o!==void 0&&M.isArray1D(o),y=S.hovertext,p=y!==void 0&&M.isArray1D(y),x,s,u=M.distinctVals(n),c=u.vals,T=M.distinctVals(a),k=T.vals,_=[],b,P,l=k.length,d=c.length;for(x=0;x<r.length;x++)_[x]=M.init2dArray(l,d);h&&(b=M.init2dArray(l,d)),p&&(P=M.init2dArray(l,d));var L=M.init2dArray(l,d);for(x=0;x<f;x++)if(n[x]!==E&&a[x]!==E){var w=M.findBin(n[x]+u.minDiff/2,c),I=M.findBin(a[x]+T.minDiff/2,k);for(s=0;s<r.length;s++){var z=r[s],B=S[z],O=_[s];O[I][w]=B[x],L[I][w]=x}h&&(b[I][w]=o[x]),p&&(P[I][w]=y[x])}for(S["_"+v]=c,S["_"+e]=k,s=0;s<r.length;s++)S["_"+r[s]]=_[s];h&&(S._text=b),p&&(S._hovertext=P),A&&A.type==="category"&&(S["_"+v+"CategoryMap"]=c.map(function(R){return A._categories[R]})),g&&g.type==="category"&&(S["_"+e+"CategoryMap"]=k.map(function(R){return g._categories[R]})),S._after2before=L}},76382:function($,U,t){var M=t(71828),E=t(67684),i=t(58623),S=t(73927),A=t(49901),g=t(1586),v=t(21606);$.exports=function(e,r,f,n){function a(h,y){return M.coerce(e,r,v,h,y)}var o=E(e,r,a,n);if(!o){r.visible=!1;return}S(e,r,n,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hovertemplate"),i(a,n),A(e,r,a,n),a("hoverongaps"),a("connectgaps",M.isArray1D(r.z)&&r.zsmooth!==!1),g(e,r,n,a,{prefix:"",cLetter:"z"})}},43907:function($,U,t){var M=t(71828).maxRowLength;$.exports=function(E){var i=[],S={},A=[],g=E[0],v=[],e=[0,0,0],r=M(E),f,n,a,o,h,y,p,x;for(n=0;n<E.length;n++)for(f=v,v=g,g=E[n+1]||[],a=0;a<r;a++)v[a]===void 0&&(y=(v[a-1]!==void 0?1:0)+(v[a+1]!==void 0?1:0)+(f[a]!==void 0?1:0)+(g[a]!==void 0?1:0),y?(n===0&&y++,a===0&&y++,n===E.length-1&&y++,a===v.length-1&&y++,y<4&&(S[[n,a]]=[n,a,y]),i.push([n,a,y])):A.push([n,a]));for(;A.length;){for(p={},x=!1,h=A.length-1;h>=0;h--)o=A[h],n=o[0],a=o[1],y=((S[[n-1,a]]||e)[2]+(S[[n+1,a]]||e)[2]+(S[[n,a-1]]||e)[2]+(S[[n,a+1]]||e)[2])/20,y&&(p[o]=[n,a,y],A.splice(h,1),x=!0);if(!x)throw"findEmpties iterated with no new neighbors";for(o in p)S[o]=p[o],i.push(p[o])}return i.sort(function(s,u){return u[2]-s[2]})}},46248:function($,U,t){var M=t(30211),E=t(71828),i=t(89298),S=t(21081).extractOpts;$.exports=function(A,g,v,e,r){r||(r={});var f=r.isContour,n=A.cd[0],a=n.trace,o=A.xa,h=A.ya,y=n.x,p=n.y,x=n.z,s=n.xCenter,u=n.yCenter,c=n.zmask,T=a.zhoverformat,k=y,_=p,b,P,l,d;if(A.index!==!1){try{l=Math.round(A.index[1]),d=Math.round(A.index[0])}catch{E.error("Error hovering on heatmap, pointNumber must be [row,col], found:",A.index);return}if(l<0||l>=x[0].length||d<0||d>x.length)return}else{if(M.inbox(g-y[0],g-y[y.length-1],0)>0||M.inbox(v-p[0],v-p[p.length-1],0)>0)return;if(f){var L;for(k=[2*y[0]-y[1]],L=1;L<y.length;L++)k.push((y[L]+y[L-1])/2);for(k.push([2*y[y.length-1]-y[y.length-2]]),_=[2*p[0]-p[1]],L=1;L<p.length;L++)_.push((p[L]+p[L-1])/2);_.push([2*p[p.length-1]-p[p.length-2]])}l=Math.max(0,Math.min(k.length-2,E.findBin(g,k))),d=Math.max(0,Math.min(_.length-2,E.findBin(v,_)))}var w=o.c2p(y[l]),I=o.c2p(y[l+1]),z=h.c2p(p[d]),B=h.c2p(p[d+1]),O,R;f?(O=n.orig_x||y,R=n.orig_y||p,I=w,b=O[l],B=z,P=R[d]):(O=n.orig_x||s||y,R=n.orig_y||u||p,b=s?O[l]:(O[l]+O[l+1])/2,P=u?R[d]:(R[d]+R[d+1])/2,o&&o.type==="category"&&(b=y[l]),h&&h.type==="category"&&(P=p[d]),a.zsmooth&&(w=I=o.c2p(b),z=B=h.c2p(P)));var C=x[d][l];if(c&&!c[d][l]&&(C=void 0),!(C===void 0&&!a.hoverongaps)){var F;Array.isArray(n.hovertext)&&Array.isArray(n.hovertext[d])?F=n.hovertext[d][l]:Array.isArray(n.text)&&Array.isArray(n.text[d])&&(F=n.text[d][l]);var N=S(a),V={type:"linear",range:[N.min,N.max],hoverformat:T,_separators:o._separators,_numFormat:o._numFormat},K=i.tickText(V,C,"hover").text;return[E.extendFlat(A,{index:a._after2before?a._after2before[d][l]:[d,l],distance:A.maxHoverDistance,spikeDistance:A.maxSpikeDistance,x0:w,x1:I,y0:z,y1:B,xLabelVal:b,yLabelVal:P,zLabelVal:C,zLabel:K,text:F})]}}},92165:function($,U,t){$.exports={attributes:t(21606),supplyDefaults:t(76382),calc:t(90757),plot:t(50347),colorbar:t(61243),style:t(70035),hoverPoints:t(46248),moduleType:"trace",name:"heatmap",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},824:function($,U,t){var M=t(71828),E=.01,i=[[-1,0],[1,0],[0,-1],[0,1]];function S(g){return .5-.25*Math.min(1,g*.5)}$.exports=function(g,v){var e=1,r;for(A(g,v),r=0;r<v.length&&!(v[r][2]<4);r++);for(v=v.slice(r),r=0;r<100&&e>E;r++)e=A(g,v,S(e));return e>E&&M.log("interp2d didn't converge quickly",e),g};function A(g,v,e){var r=0,f,n,a,o,h,y,p,x,s,u,c,T,k;for(o=0;o<v.length;o++){for(f=v[o],n=f[0],a=f[1],c=g[n][a],u=0,s=0,h=0;h<4;h++)y=i[h],p=g[n+y[0]],p&&(x=p[a+y[1]],x!==void 0&&(u===0?T=k=x:(T=Math.min(T,x),k=Math.max(k,x)),s++,u+=x));if(s===0)throw"iterateInterp2d order is wrong: no defined neighbors";g[n][a]=u/s,c===void 0?s<4&&(r=1):(g[n][a]=(1+e)*g[n][a]-e*c,k>T&&(r=Math.max(r,Math.abs(g[n][a]-c)/(k-T))))}return r}},58623:function($,U,t){var M=t(71828);$.exports=function(E,i){E("texttemplate");var S=M.extendFlat({},i.font,{color:"auto",size:"auto"});M.coerceFont(E,"textfont",S)}},70769:function($,U,t){var M=t(73972),E=t(71828).isArrayOrTypedArray;$.exports=function(i,S,A,g,v,e){var r=[],f=M.traceIs(i,"contour"),n=M.traceIs(i,"histogram"),a=M.traceIs(i,"gl2d"),o,h,y,p=E(S)&&S.length>1;if(p&&!n&&e.type!=="category"){var x=S.length;if(x<=v){if(f||a)r=S.slice(0,v);else if(v===1)r=[S[0]-.5,S[0]+.5];else{for(r=[1.5*S[0]-.5*S[1]],y=1;y<x;y++)r.push((S[y-1]+S[y])*.5);r.push(1.5*S[x-1]-.5*S[x-2])}if(x<v){var s=r[r.length-1],u=s-r[r.length-2];for(y=x;y<v;y++)s+=u,r.push(s)}}else return f?S.slice(0,v):S.slice(0,v+1)}else{var c=i[e._id.charAt(0)+"calendar"];if(n)o=e.r2c(A,0,c);else if(E(S)&&S.length===1)o=S[0];else if(A===void 0)o=0;else{var T=e.type==="log"?e.d2c:e.r2c;o=T(A,0,c)}for(h=g||1,y=f||a?0:-.5;y<v;y++)r.push(o+h*y)}return r}},50347:function($,U,t){var M=t(39898),E=t(84267),i=t(73972),S=t(91424),A=t(89298),g=t(71828),v=t(63893),e=t(8225),r=t(7901),f=t(21081).extractOpts,n=t(21081).makeColorScaleFuncFromTrace,a=t(77922),o=t(18783),h=o.LINE_SPACING,y=t(3883),p=t(32396).STYLE,x="heatmap-label";function s(_){return _.selectAll("g."+x)}function u(_){s(_).remove()}$.exports=function(_,b,P,l){var d=b.xaxis,L=b.yaxis;g.makeTraceGroups(l,P,"hm").each(function(w){var I=M.select(this),z=w[0],B=z.trace,O=B.xgap||0,R=B.ygap||0,C=z.z,F=z.x,N=z.y,V=z.xCenter,K=z.yCenter,Q=i.traceIs(B,"contour"),at=Q?"best":B.zsmooth,it=C.length,q=g.maxRowLength(C),W=!1,Z=!1,G,et,nt,X,Y,ot,rt,ht;for(ot=0;G===void 0&&ot<F.length-1;)G=d.c2p(F[ot]),ot++;for(ot=F.length-1;et===void 0&&ot>0;)et=d.c2p(F[ot]),ot--;for(et<G&&(nt=et,et=G,G=nt,W=!0),ot=0;X===void 0&&ot<N.length-1;)X=L.c2p(N[ot]),ot++;for(ot=N.length-1;Y===void 0&&ot>0;)Y=L.c2p(N[ot]),ot--;Y<X&&(nt=X,X=Y,Y=nt,Z=!0),Q&&(V=F,K=N,F=z.xfill,N=z.yfill);var pt="default";if(at?pt=at==="best"?"smooth":"fast":B._islinear&&O===0&&R===0&&y()&&(pt="fast"),pt!=="fast"){var yt=at==="best"?0:.5;G=Math.max(-yt*d._length,G),et=Math.min((1+yt)*d._length,et),X=Math.max(-yt*L._length,X),Y=Math.min((1+yt)*L._length,Y)}var xt=Math.round(et-G),Ft=Math.round(Y-X),Et=G>=d._length||et<=0||X>=L._length||Y<=0;if(Et){var mt=I.selectAll("image").data([]);mt.exit().remove(),u(I);return}var gt,wt;pt==="fast"?(gt=q,wt=it):(gt=xt,wt=Ft);var Pt=document.createElement("canvas");Pt.width=gt,Pt.height=wt;var Bt=Pt.getContext("2d"),kt=n(B,{noNumericCheck:!0,returnArray:!0}),jt,Ht;pt==="fast"?(jt=W?function(Hr){return q-1-Hr}:g.identity,Ht=Z?function(Hr){return it-1-Hr}:g.identity):(jt=function(Hr){return g.constrain(Math.round(d.c2p(F[Hr])-G),0,xt)},Ht=function(Hr){return g.constrain(Math.round(L.c2p(N[Hr])-X),0,Ft)});var Vt=Ht(0),ee=[Vt,Vt],te=W?0:1,ae=Z?0:1,le=0,ce=0,pe=0,we=0,ve,Mt,It,Rt,zt;function Tt(Hr,sn){if(Hr!==void 0){var Yr=kt(Hr);return Yr[0]=Math.round(Yr[0]),Yr[1]=Math.round(Yr[1]),Yr[2]=Math.round(Yr[2]),le+=sn,ce+=Yr[0]*sn,pe+=Yr[1]*sn,we+=Yr[2]*sn,Yr}return[0,0,0,0]}function ft(Hr,sn,Yr,xn){var wn=Hr[Yr.bin0];if(wn===void 0)return Tt(void 0,1);var Un=Hr[Yr.bin1],qn=sn[Yr.bin0],ei=sn[Yr.bin1],Gn=Un-wn||0,Hn=qn-wn||0,gr;return Un===void 0?ei===void 0?gr=0:qn===void 0?gr=2*(ei-wn):gr=(2*ei-qn-wn)*2/3:ei===void 0?qn===void 0?gr=0:gr=(2*wn-Un-qn)*2/3:qn===void 0?gr=(2*ei-Un-wn)*2/3:gr=ei+wn-Un-qn,Tt(wn+Yr.frac*Gn+xn.frac*(Hn+Yr.frac*gr))}if(pt!=="default"){var ut=0,vt;try{vt=new Uint8Array(gt*wt*4)}catch{vt=new Array(gt*wt*4)}if(pt==="smooth"){var St=V||F,Ot=K||N,Xt=new Array(St.length),$t=new Array(Ot.length),de=new Array(xt),Me=V?T:c,Fe=K?T:c,De,Ae,Ve;for(ot=0;ot<St.length;ot++)Xt[ot]=Math.round(d.c2p(St[ot])-G);for(ot=0;ot<Ot.length;ot++)$t[ot]=Math.round(L.c2p(Ot[ot])-X);for(ot=0;ot<xt;ot++)de[ot]=Me(ot,Xt);for(rt=0;rt<Ft;rt++)for(De=Fe(rt,$t),Ae=C[De.bin0],Ve=C[De.bin1],ot=0;ot<xt;ot++,ut+=4)zt=ft(Ae,Ve,de[ot],De),k(vt,ut,zt)}else for(rt=0;rt<it;rt++)for(Rt=C[rt],ee=Ht(rt),ot=0;ot<q;ot++)zt=Tt(Rt[ot],1),ut=(ee*q+jt(ot))*4,k(vt,ut,zt);var Qe=Bt.createImageData(gt,wt);try{Qe.data.set(vt)}catch{var Sr=Qe.data,he=Sr.length;for(rt=0;rt<he;rt++)Sr[rt]=vt[rt]}Bt.putImageData(Qe,0,0)}else{var je=Math.floor(O/2),Re=Math.floor(R/2);for(rt=0;rt<it;rt++)if(Rt=C[rt],ee.reverse(),ee[ae]=Ht(rt+1),!(ee[0]===ee[1]||ee[0]===void 0||ee[1]===void 0))for(Mt=jt(0),ve=[Mt,Mt],ot=0;ot<q;ot++)ve.reverse(),ve[te]=jt(ot+1),!(ve[0]===ve[1]||ve[0]===void 0||ve[1]===void 0)&&(It=Rt[ot],zt=Tt(It,(ve[1]-ve[0])*(ee[1]-ee[0])),Bt.fillStyle="rgba("+zt.join(",")+")",Bt.fillRect(ve[0]+je,ee[0]+Re,ve[1]-ve[0]-O,ee[1]-ee[0]-R))}ce=Math.round(ce/le),pe=Math.round(pe/le),we=Math.round(we/le);var _r=E("rgb("+ce+","+pe+","+we+")");_._hmpixcount=(_._hmpixcount||0)+le,_._hmlumcount=(_._hmlumcount||0)+le*_r.getLuminance();var tr=I.selectAll("image").data(w);tr.enter().append("svg:image").attr({xmlns:a.svg,preserveAspectRatio:"none"}),tr.attr({height:Ft,width:xt,x:G,y:X,"xlink:href":Pt.toDataURL("image/png")}),pt==="fast"&&!at&&tr.attr("style",p),u(I);var Gt=B.texttemplate;if(Gt){var re=f(B),fe={type:"linear",range:[re.min,re.max],_separators:d._separators,_numFormat:d._numFormat},ye=B.type==="histogram2dcontour",Le=B.type==="contour",_e=Le?1:0,Ce=Le?it-1:it,ze=Le?1:0,We=Le?q-1:q,qe=[];for(ot=_e;ot<Ce;ot++){var ir;if(Le)ir=z.y[ot];else if(ye){if(ot===0||ot===it-1)continue;ir=z.y[ot]}else if(z.yCenter)ir=z.yCenter[ot];else{if(ot+1===it&&z.y[ot+1]===void 0)continue;ir=(z.y[ot]+z.y[ot+1])/2}var xr=Math.round(L.c2p(ir));if(!(0>xr||xr>L._length))for(rt=ze;rt<We;rt++){var Dt;if(Le)Dt=z.x[rt];else if(ye){if(rt===0||rt===q-1)continue;Dt=z.x[rt]}else if(z.xCenter)Dt=z.xCenter[rt];else{if(rt+1===q&&z.x[rt+1]===void 0)continue;Dt=(z.x[rt]+z.x[rt+1])/2}var Ut=Math.round(d.c2p(Dt));if(!(0>Ut||Ut>d._length)){var Te=e({x:Dt,y:ir},B,_._fullLayout);Te.x=Dt,Te.y=ir;var Se=z.z[ot][rt];Se===void 0?(Te.z="",Te.zLabel=""):(Te.z=Se,Te.zLabel=A.tickText(fe,Se,"hover").text);var Be=z.text&&z.text[ot]&&z.text[ot][rt];(Be===void 0||Be===!1)&&(Be=""),Te.text=Be;var Je=g.texttemplateString(Gt,Te,_._fullLayout._d3locale,Te,B._meta||{});if(Je){var $e=Je.split("<br>"),Xe=$e.length,Oe=0;for(ht=0;ht<Xe;ht++)Oe=Math.max(Oe,$e[ht].length);qe.push({l:Xe,c:Oe,t:Je,x:Ut,y:xr,z:Se})}}}}var ar=B.textfont,cr=ar.family,sr=ar.size,lr=_._fullLayout.font.size;if(!sr||sr==="auto"){var Or=1/0,Ir=1/0,Pr=0,rn=0;for(ht=0;ht<qe.length;ht++){var Zr=qe[ht];if(Pr=Math.max(Pr,Zr.l),rn=Math.max(rn,Zr.c),ht<qe.length-1){var yn=qe[ht+1],Tn=Math.abs(yn.x-Zr.x),hr=Math.abs(yn.y-Zr.y);Tn&&(Or=Math.min(Or,Tn)),hr&&(Ir=Math.min(Ir,hr))}}!isFinite(Or)||!isFinite(Ir)?sr=lr:(Or-=O,Ir-=R,Or/=rn,Ir/=Pr,Or/=h/2,Ir/=h,sr=Math.min(Math.floor(Or),Math.floor(Ir),lr))}if(sr<=0||!isFinite(sr))return;var dr=function(Hr){return Hr.x},Lr=function(Hr){return Hr.y-sr*(Hr.l*h/2-1)},Cr=s(I).data(qe);Cr.enter().append("g").classed(x,1).append("text").attr("text-anchor","middle").each(function(Hr){var sn=M.select(this),Yr=ar.color;(!Yr||Yr==="auto")&&(Yr=r.contrast("rgba("+kt(Hr.z).join()+")")),sn.attr("data-notex",1).call(v.positionText,dr(Hr),Lr(Hr)).call(S.font,cr,sr,Yr).text(Hr.t).call(v.convertToTspans,_)})}})};function c(_,b){var P=b.length-2,l=g.constrain(g.findBin(_,b),0,P),d=b[l],L=b[l+1],w=g.constrain(l+(_-d)/(L-d)-.5,0,P),I=Math.round(w),z=Math.abs(w-I);return!w||w===P||!z?{bin0:I,bin1:I,frac:0}:{bin0:I,frac:z,bin1:Math.round(I+z/(w-I))}}function T(_,b){var P=b.length-1,l=g.constrain(g.findBin(_,b),0,P),d=b[l],L=b[l+1],w=(_-d)/(L-d)||0;return w<=0?{bin0:l,bin1:l,frac:0}:w<.5?{bin0:l,bin1:l+1,frac:w}:{bin0:l+1,bin1:l,frac:1-w}}function k(_,b,P){_[b]=P[0],_[b+1]=P[1],_[b+2]=P[2],_[b+3]=Math.round(P[3]*255)}},70035:function($,U,t){var M=t(39898);$.exports=function(E){M.select(E).selectAll(".hm image").style("opacity",function(i){return i.trace.opacity})}},49901:function($){$.exports=function(U,t,M){var E=M("zsmooth");E===!1&&(M("xgap"),M("ygap")),M("zhoverformat")}},67684:function($,U,t){var M=t(92770),E=t(71828),i=t(73972);$.exports=function(g,v,e,r,f,n){var a=e("z");f=f||"x",n=n||"y";var o,h;if(a===void 0||!a.length)return 0;if(E.isArray1D(g.z)){o=e(f),h=e(n);var y=E.minRowLength(o),p=E.minRowLength(h);if(y===0||p===0)return 0;v._length=Math.min(y,p,a.length)}else{if(o=S(f,e),h=S(n,e),!A(a))return 0;e("transpose"),v._length=null}if(g.type==="heatmapgl")return!0;var x=i.getComponentMethod("calendars","handleTraceDefaults");return x(g,v,[f,n],r),!0};function S(g,v){var e=v(g),r=e?v(g+"type","array"):"scaled";return r==="scaled"&&(v(g+"0"),v("d"+g)),e}function A(g){for(var v=!0,e=!1,r=!1,f,n=0;n<g.length;n++){if(f=g[n],!E.isArrayOrTypedArray(f)){v=!1;break}f.length>0&&(e=!0);for(var a=0;a<f.length;a++)if(M(f[a])){r=!0;break}}return v&&e&&r}},16063:function($,U,t){for(var M=t(21606),E=t(50693),i=t(1426).extendFlat,S=t(30962).overrideAll,A=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],g={},v=0;v<A.length;v++){var e=A[v];g[e]=M[e]}g.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},i(g,E("",{cLetter:"z",autoColorDflt:!1})),$.exports=S(g,"calc","nested")},59560:function($,U,t){var M=t(9330).gl_heatmap2d,E=t(89298),i=t(78614);function S(e,r){this.scene=e,this.uid=r,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=M(e.glplot,this.options),this.heatmap._trace=this}var A=S.prototype;A.handlePick=function(e){var r=this.options,f=r.shape,n=e.pointId,a=n%f[0],o=Math.floor(n/f[0]),h=n;return{trace:this,dataCoord:e.dataCoord,traceCoord:[r.x[a],r.y[o],r.z[h]],textLabel:this.textLabels[n],name:this.name,pointIndex:[o,a],hoverinfo:this.hoverinfo}},A.update=function(e,r){var f=r[0];this.index=e.index,this.name=e.name,this.hoverinfo=e.hoverinfo;var n=f.z;this.options.z=[].concat.apply([],n);var a=n[0].length,o=n.length;this.options.shape=[a,o],this.options.x=f.x,this.options.y=f.y,this.options.zsmooth=e.zsmooth;var h=g(e);this.options.colorLevels=h.colorLevels,this.options.colorValues=h.colorValues,this.textLabels=[].concat.apply([],e.text),this.heatmap.update(this.options);var y=this.scene.xaxis,p=this.scene.yaxis,x,s;e.zsmooth===!1&&(x={ppad:f.x[1]-f.x[0]},s={ppad:f.y[1]-f.y[0]}),e._extremes[y._id]=E.findExtremes(y,f.x,x),e._extremes[p._id]=E.findExtremes(p,f.y,s)},A.dispose=function(){this.heatmap.dispose()};function g(e){for(var r=e.colorscale,f=e.zmin,n=e.zmax,a=r.length,o=new Array(a),h=new Array(4*a),y=0;y<a;y++){var p=r[y],x=i(p[1]);o[y]=f+p[0]*(n-f);for(var s=0;s<4;s++)h[4*y+s]=x[s]}return{colorLevels:o,colorValues:h}}function v(e,r,f){var n=new S(e,r.uid);return n.update(r,f),n}$.exports=v},19600:function($,U,t){var M=t(71828),E=t(67684),i=t(1586),S=t(16063);$.exports=function(A,g,v,e){function r(n,a){return M.coerce(A,g,S,n,a)}var f=E(A,g,r,e);if(!f){g.visible=!1;return}r("text"),r("zsmooth"),i(A,g,e,r,{prefix:"",cLetter:"z"})}},3325:function($,U,t){$.exports={attributes:t(16063),supplyDefaults:t(19600),colorbar:t(61243),calc:t(90757),plot:t(59560),moduleType:"trace",name:"heatmapgl",basePlotModule:t(4796),categories:["gl","gl2d","2dMap"],meta:{}}},7745:function($,U,t){var M=t(1486),E=t(12663).axisHoverFormat,i=t(5386).fF,S=t(5386).si,A=t(41940),g=t(17656),v=t(72406),e=t(1426).extendFlat;$.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:E("x"),yhoverformat:E("y"),text:e({},M.text,{}),hovertext:e({},M.hovertext,{}),orientation:M.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:g("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:g("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:i({},{keys:v.eventDataKeys}),texttemplate:S({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:e({},M.textposition,{arrayOk:!1}),textfont:A({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:A({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:A({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:M.insidetextanchor,textangle:M.textangle,cliponaxis:M.cliponaxis,constraintext:M.constraintext,marker:M.marker,offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:M.selected,unselected:M.unselected,_deprecated:{bardir:M._deprecated.bardir}}},42174:function($){$.exports=function(U,t){for(var M=U.length,E=0,i=0;i<M;i++)t[i]?(U[i]/=t[i],E+=U[i]):U[i]=null;return E}},17656:function($){$.exports=function(U,t){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},59575:function($,U,t){var M=t(92770);$.exports={count:function(E,i,S){return S[E]++,1},sum:function(E,i,S,A){var g=A[i];return M(g)?(g=Number(g),S[E]+=g,g):0},avg:function(E,i,S,A,g){var v=A[i];return M(v)&&(v=Number(v),S[E]+=v,g[E]++),0},min:function(E,i,S,A){var g=A[i];if(M(g))if(g=Number(g),M(S[E])){if(S[E]>g){var v=g-S[E];return S[E]=g,v}}else return S[E]=g,g;return 0},max:function(E,i,S,A){var g=A[i];if(M(g))if(g=Number(g),M(S[E])){if(S[E]<g){var v=g-S[E];return S[E]=g,v}}else return S[E]=g,g;return 0}}},40965:function($,U,t){var M=t(50606),E=M.ONEAVGYEAR,i=M.ONEAVGMONTH,S=M.ONEDAY,A=M.ONEHOUR,g=M.ONEMIN,v=M.ONESEC,e=t(89298).tickIncrement;$.exports=function(o,h,y,p,x){var s=-1.1*h,u=-.1*h,c=o-u,T=y[0],k=y[1],_=Math.min(r(T+u,T+c,p,x),r(k+u,k+c,p,x)),b=Math.min(r(T+s,T+u,p,x),r(k+s,k+u,p,x)),P,l;if(_>b&&b<Math.abs(k-T)/4e3?(P=_,l=!1):(P=Math.min(_,b),l=!0),p.type==="date"&&P>S){var d=P===E?1:6,L=P===E?"M12":"M1";return function(w,I){var z=p.c2d(w,E,x),B=z.indexOf("-",d);B>0&&(z=z.substr(0,B));var O=p.d2c(z,0,x);if(O<w){var R=e(O,L,!1,x);(O+R)/2<w+o&&(O=R)}return I&&l?e(O,L,!0,x):O}}return function(w,I){var z=P*Math.round(w/P);return z+P/10<w&&z+P*.9<w+o&&(z+=P),I&&l&&(z-=P),z}};function r(o,h,y,p){if(o*h<=0)return 1/0;for(var x=Math.abs(h-o),s=y.type==="date",u=f(x,s),c=0;c<10;c++){var T=f(u*80,s);if(u===T)break;if(n(T,o,h,s,y,p))u=T;else break}return u}function f(o,h){return h&&o>v?o>S?o>E*1.1?E:o>i*1.1?i:S:o>A?A:o>g?g:v:Math.pow(10,Math.floor(Math.log(o)/Math.LN10))}function n(o,h,y,p,x,s){if(p&&o>S){var u=a(h,x,s),c=a(y,x,s),T=o===E?0:1;return u[T]!==c[T]}return Math.floor(y/o)-Math.floor(h/o)>.1}function a(o,h,y){var p=h.c2d(o,E,y).split("-");return p[0]===""&&(p.unshift(),p[0]="-"+p[0]),p}},72138:function($,U,t){var M=t(92770),E=t(71828),i=t(73972),S=t(89298),A=t(75341),g=t(59575),v=t(36362),e=t(42174),r=t(40965);function f(y,p){var x=[],s=[],u=p.orientation==="h",c=S.getFromId(y,u?p.yaxis:p.xaxis),T=u?"y":"x",k={x:"y",y:"x"}[T],_=p[T+"calendar"],b=p.cumulative,P,l=n(y,p,c,T),d=l[0],L=l[1],w=typeof d.size=="string",I=[],z=w?I:d,B=[],O=[],R=[],C=0,F=p.histnorm,N=p.histfunc,V=F.indexOf("density")!==-1,K,Q,at;b.enabled&&V&&(F=F.replace(/ ?density$/,""),V=!1);var it=N==="max"||N==="min",q=it?null:0,W=g.count,Z=v[F],G=!1,et=function(Bt){return c.r2c(Bt,0,_)},nt;for(E.isArrayOrTypedArray(p[k])&&N!=="count"&&(nt=p[k],G=N==="avg",W=g[N]),P=et(d.start),Q=et(d.end)+(P-S.tickIncrement(P,d.size,!1,_))/1e6;P<Q&&x.length<1e6&&(K=S.tickIncrement(P,d.size,!1,_),x.push((P+K)/2),s.push(q),R.push([]),I.push(P),V&&B.push(1/(K-P)),G&&O.push(0),!(K<=P));)P=K;I.push(P),!w&&c.type==="date"&&(z={start:et(z.start),end:et(z.end),size:z.size}),y._fullLayout._roundFnOpts||(y._fullLayout._roundFnOpts={});var X=p["_"+T+"bingroup"],Y={leftGap:1/0,rightGap:1/0};X&&(y._fullLayout._roundFnOpts[X]||(y._fullLayout._roundFnOpts[X]=Y),Y=y._fullLayout._roundFnOpts[X]);var ot=s.length,rt=!0,ht=Y.leftGap,pt=Y.rightGap,yt={};for(P=0;P<L.length;P++){var xt=L[P];at=E.findBin(xt,z),at>=0&&at<ot&&(C+=W(at,P,s,nt,O),rt&&R[at].length&&xt!==L[R[at][0]]&&(rt=!1),R[at].push(P),yt[P]=at,ht=Math.min(ht,xt-I[at]),pt=Math.min(pt,I[at+1]-xt))}Y.leftGap=ht,Y.rightGap=pt;var Ft;rt||(Ft=function(Bt,kt){return function(){var jt=y._fullLayout._roundFnOpts[X];return r(jt.leftGap,jt.rightGap,I,c,_)(Bt,kt)}}),G&&(C=e(s,O)),Z&&Z(s,C,B),b.enabled&&h(s,b.direction,b.currentbin);var Et=Math.min(x.length,s.length),mt=[],gt=0,wt=Et-1;for(P=0;P<Et;P++)if(s[P]){gt=P;break}for(P=Et-1;P>=gt;P--)if(s[P]){wt=P;break}for(P=gt;P<=wt;P++)if(M(x[P])&&M(s[P])){var Pt={p:x[P],s:s[P],b:0};b.enabled||(Pt.pts=R[P],rt?Pt.ph0=Pt.ph1=R[P].length?L[R[P][0]]:x[P]:(p._computePh=!0,Pt.ph0=Ft(I[P]),Pt.ph1=Ft(I[P+1],!0))),mt.push(Pt)}return mt.length===1&&(mt[0].width1=S.tickIncrement(mt[0].p,d.size,!1,_)-mt[0].p),A(mt,p),E.isArrayOrTypedArray(p.selectedpoints)&&E.tagSelected(mt,p,yt),mt}function n(y,p,x,s,u){var c=s+"bins",T=y._fullLayout,k=p["_"+s+"bingroup"],_=T._histogramBinOpts[k],b=T.barmode==="overlay",P,l,d,L,w,I,z,B=function(xt){return x.r2c(xt,0,L)},O=function(xt){return x.c2r(xt,0,L)},R=x.type==="date"?function(xt){return xt||xt===0?E.cleanDate(xt,null,L):null}:function(xt){return M(xt)?Number(xt):null};function C(xt,Ft,Et){Ft[xt+"Found"]?(Ft[xt]=R(Ft[xt]),Ft[xt]===null&&(Ft[xt]=Et[xt])):(I[xt]=Ft[xt]=Et[xt],E.nestedProperty(l[0],c+"."+xt).set(Et[xt]))}if(p["_"+s+"autoBinFinished"])delete p["_"+s+"autoBinFinished"];else{l=_.traces;var F=[],N=!0,V=!1,K=!1;for(P=0;P<l.length;P++)if(d=l[P],d.visible){var Q=_.dirs[P];w=d["_"+Q+"pos0"]=x.makeCalcdata(d,Q),F=E.concat(F,w),delete d["_"+s+"autoBinFinished"],p.visible===!0&&(N?N=!1:(delete d._autoBin,d["_"+s+"autoBinFinished"]=1),i.traceIs(d,"2dMap")&&(V=!0),d.type==="histogram2dcontour"&&(K=!0))}L=l[0][s+"calendar"];var at=S.autoBin(F,x,_.nbins,V,L,_.sizeFound&&_.size),it=l[0]._autoBin={};if(I=it[_.dirs[0]]={},K&&(_.size||(at.start=O(S.tickIncrement(B(at.start),at.size,!0,L))),_.end===void 0&&(at.end=O(S.tickIncrement(B(at.end),at.size,!1,L)))),b&&!i.traceIs(p,"2dMap")&&at._dataSpan===0&&x.type!=="category"&&x.type!=="multicategory"){if(u)return[at,w,!0];at=a(y,p,x,s,c)}z=d.cumulative||{},z.enabled&&z.currentbin!=="include"&&(z.direction==="decreasing"?at.start=O(S.tickIncrement(B(at.start),at.size,!0,L)):at.end=O(S.tickIncrement(B(at.end),at.size,!1,L))),_.size=at.size,_.sizeFound||(I.size=at.size,E.nestedProperty(l[0],c+".size").set(at.size)),C("start",_,at),C("end",_,at)}w=p["_"+s+"pos0"],delete p["_"+s+"pos0"];var q=p._input[c]||{},W=E.extendFlat({},_),Z=_.start,G=x.r2l(q.start),et=G!==void 0;if((_.startFound||et)&&G!==x.r2l(Z)){var nt=et?G:E.aggNums(Math.min,null,w),X={type:x.type==="category"||x.type==="multicategory"?"linear":x.type,r2l:x.r2l,dtick:_.size,tick0:Z,calendar:L,range:[nt,S.tickIncrement(nt,_.size,!1,L)].map(x.l2r)},Y=S.tickFirst(X);Y>x.r2l(nt)&&(Y=S.tickIncrement(Y,_.size,!0,L)),W.start=x.l2r(Y),et||E.nestedProperty(p,c+".start").set(W.start)}var ot=_.end,rt=x.r2l(q.end),ht=rt!==void 0;if((_.endFound||ht)&&rt!==x.r2l(ot)){var pt=ht?rt:E.aggNums(Math.max,null,w);W.end=x.l2r(pt),ht||E.nestedProperty(p,c+".start").set(W.end)}var yt="autobin"+s;return p._input[yt]===!1&&(p._input[c]=E.extendFlat({},p[c]||{}),delete p._input[yt],delete p[yt]),[W,w]}function a(y,p,x,s,u){var c=y._fullLayout,T=o(y,p),k=!1,_=1/0,b=[p],P,l,d;for(P=0;P<T.length;P++)if(l=T[P],l===p)k=!0;else if(!k)d=c._histogramBinOpts[l["_"+s+"bingroup"]],_=Math.min(_,d.size||l[u].size);else{var L=n(y,l,x,s,!0),w=L[0],I=L[2];l["_"+s+"autoBinFinished"]=1,l["_"+s+"pos0"]=L[1],I?b.push(l):_=Math.min(_,w.size)}var z=new Array(b.length);for(P=0;P<b.length;P++)for(var B=b[P]["_"+s+"pos0"],O=0;O<B.length;O++)if(B[O]!==void 0){z[P]=B[O];break}for(isFinite(_)||(_=E.distinctVals(z).minDiff),P=0;P<b.length;P++){l=b[P];var R=l[s+"calendar"],C={start:x.c2r(z[P]-_/2,0,R),end:x.c2r(z[P]+_/2,0,R),size:_};l._input[u]=l[u]=C,d=c._histogramBinOpts[l["_"+s+"bingroup"]],d&&E.extendFlat(d,C)}return p[u]}function o(y,p){for(var x=p.xaxis,s=p.yaxis,u=p.orientation,c=[],T=y._fullData,k=0;k<T.length;k++){var _=T[k];_.type==="histogram"&&_.visible===!0&&_.orientation===u&&_.xaxis===x&&_.yaxis===s&&c.push(_)}return c}function h(y,p,x){var s,u,c;function T(_){c=y[_],y[_]/=2}function k(_){u=y[_],y[_]=c+u/2,c+=u}if(x==="half")if(p==="increasing")for(T(0),s=1;s<y.length;s++)k(s);else for(T(y.length-1),s=y.length-2;s>=0;s--)k(s);else if(p==="increasing"){for(s=1;s<y.length;s++)y[s]+=y[s-1];x==="exclude"&&(y.unshift(0),y.pop())}else{for(s=y.length-2;s>=0;s--)y[s]+=y[s+1];x==="exclude"&&(y.push(0),y.shift())}}$.exports={calc:f,calcAllAutoBins:n}},72406:function($){$.exports={eventDataKeys:["binNumber"]}},82222:function($,U,t){var M=t(71828),E=t(41675),i=t(73972).traceIs,S=t(26125),A=M.nestedProperty,g=t(99082).getAxisGroup,v=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],e=["x","y"];$.exports=function(r,f){var n=f._histogramBinOpts={},a=[],o={},h=[],y,p,x,s,u,c,T;function k(V,K){return M.coerce(y._input,y,y._module.attributes,V,K)}function _(V){return V.orientation==="v"?"x":"y"}function b(V,K){var Q=E.getFromTrace({_fullLayout:f},V,K);return Q.type}function P(V,K,Q){var at=V.uid+"__"+Q;K||(K=at);var it=b(V,Q),q=V[Q+"calendar"]||"",W=n[K],Z=!0;W&&(it===W.axType&&q===W.calendar?(Z=!1,W.traces.push(V),W.dirs.push(Q)):(K=at,it!==W.axType&&M.warn(["Attempted to group the bins of trace",V.index,"set on a","type:"+it,"axis","with bins on","type:"+W.axType,"axis."].join(" ")),q!==W.calendar&&M.warn(["Attempted to group the bins of trace",V.index,"set with a",q,"calendar","with bins",W.calendar?"on a "+W.calendar+" calendar":"w/o a set calendar"].join(" ")))),Z&&(n[K]={traces:[V],dirs:[Q],axType:it,calendar:V[Q+"calendar"]||""}),V["_"+Q+"bingroup"]=K}for(u=0;u<r.length;u++)y=r[u],i(y,"histogram")&&(a.push(y),delete y._xautoBinFinished,delete y._yautoBinFinished,i(y,"2dMap")||S(y._input,y,f,k));var l=f._alignmentOpts||{};for(u=0;u<a.length;u++){if(y=a[u],x="",!i(y,"2dMap")){if(s=_(y),f.barmode==="group"&&y.alignmentgroup){var d=y[s+"axis"],L=g(f,d)+y.orientation;(l[L]||{})[y.alignmentgroup]&&(x=L)}!x&&f.barmode!=="overlay"&&(x=g(f,y.xaxis)+g(f,y.yaxis)+_(y))}x?(o[x]||(o[x]=[]),o[x].push(y)):h.push(y)}for(x in o){if(p=o[x],p.length===1){h.push(p[0]);continue}var w=!1;for(p.length&&(y=p[0],w=k("bingroup")),x=w||x,u=0;u<p.length;u++){y=p[u];var I=y._input.bingroup;I&&I!==x&&M.warn(["Trace",y.index,"must match","within bingroup",x+".","Ignoring its bingroup:",I,"setting."].join(" ")),y.bingroup=x,P(y,x,_(y))}}for(u=0;u<h.length;u++){y=h[u];var z=k("bingroup");if(i(y,"2dMap"))for(T=0;T<2;T++){s=e[T];var B=k(s+"bingroup",z?z+"__"+s:null);P(y,B,s)}else P(y,z,_(y))}for(x in n){var O=n[x];for(p=O.traces,c=0;c<v.length;c++){var R=v[c],C=R.name,F,N;if(!(C==="nbins"&&O.sizeFound)){for(u=0;u<p.length;u++){if(y=p[u],s=O.dirs[u],F=R.aStr[s],A(y._input,F).get()!==void 0){O[C]=k(F),O[C+"Found"]=!0;break}N=(y._autoBin||{})[s]||{},N[C]&&A(y,F).set(N[C])}if(C==="start"||C==="end")for(;u<p.length;u++)y=p[u],y["_"+s+"bingroup"]&&(N=(y._autoBin||{})[s]||{},k(F,N[C]));C==="nbins"&&!O.sizeFound&&!O.nbinsFound&&(y=p[0],O[C]=k(F))}}}}},11385:function($,U,t){var M=t(73972),E=t(71828),i=t(7901),S=t(90769).handleText,A=t(98340),g=t(7745);$.exports=function(v,e,r,f){function n(b,P){return E.coerce(v,e,g,b,P)}var a=n("x"),o=n("y"),h=n("cumulative.enabled");h&&(n("cumulative.direction"),n("cumulative.currentbin")),n("text");var y=n("textposition");S(v,e,f,n,y,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),n("hovertext"),n("hovertemplate"),n("xhoverformat"),n("yhoverformat");var p=n("orientation",o&&!a?"h":"v"),x=p==="v"?"x":"y",s=p==="v"?"y":"x",u=a&&o?Math.min(E.minRowLength(a)&&E.minRowLength(o)):E.minRowLength(e[x]||[]);if(!u){e.visible=!1;return}e._length=u;var c=M.getComponentMethod("calendars","handleTraceDefaults");c(v,e,["x","y"],f);var T=e[s];T&&n("histfunc"),n("histnorm"),n("autobin"+x),A(v,e,n,r,f),E.coerceSelectionMarkerOpacity(e,n);var k=(e.marker.line||{}).color,_=M.getComponentMethod("errorbars","supplyDefaults");_(v,e,k||i.defaultLine,{axis:"y"}),_(v,e,k||i.defaultLine,{axis:"x",inherit:"y"})}},84402:function($){$.exports=function(U,t,M,E,i){if(U.x="xVal"in t?t.xVal:t.x,U.y="yVal"in t?t.yVal:t.y,"zLabelVal"in t&&(U.z=t.zLabelVal),t.xa&&(U.xaxis=t.xa),t.ya&&(U.yaxis=t.ya),!(M.cumulative||{}).enabled){var S=Array.isArray(i)?E[0].pts[i[0]][i[1]]:E[i].pts;U.pointNumbers=S,U.binNumber=U.pointNumber,delete U.pointNumber,delete U.pointIndex;var A;if(M._indexToPoints){A=[];for(var g=0;g<S.length;g++)A=A.concat(M._indexToPoints[S[g]])}else A=S;U.pointIndices=A}return U}},76440:function($,U,t){var M=t(95423).hoverPoints,E=t(89298).hoverLabelText;$.exports=function(i,S,A,g,v){var e=M(i,S,A,g,v);if(e){i=e[0];var r=i.cd[i.index],f=i.cd[0].trace;if(!f.cumulative.enabled){var n=f.orientation==="h"?"y":"x";i[n+"Label"]=E(i[n+"a"],[r.ph0,r.ph1],f[n+"hoverformat"])}return e}}},36071:function($,U,t){$.exports={attributes:t(7745),layoutAttributes:t(43641),supplyDefaults:t(11385),crossTraceDefaults:t(82222),supplyLayoutDefaults:t(13957),calc:t(72138).calc,crossTraceCalc:t(11661).crossTraceCalc,plot:t(17295).plot,layerName:"barlayer",style:t(16688).style,styleOnSelect:t(16688).styleOnSelect,colorbar:t(4898),hoverPoints:t(76440),selectPoints:t(81974),eventData:t(84402),moduleType:"trace",name:"histogram",basePlotModule:t(93612),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},36362:function($){$.exports={percent:function(U,t){for(var M=U.length,E=100/t,i=0;i<M;i++)U[i]*=E},probability:function(U,t){for(var M=U.length,E=0;E<M;E++)U[E]/=t},density:function(U,t,M,E){var i=U.length;E=E||1;for(var S=0;S<i;S++)U[S]*=M[S]*E},"probability density":function(U,t,M,E){var i=U.length;E&&(t/=E);for(var S=0;S<i;S++)U[S]*=M[S]/t}}},35361:function($,U,t){var M=t(7745),E=t(17656),i=t(21606),S=t(9012),A=t(12663).axisHoverFormat,g=t(5386).fF,v=t(5386).si,e=t(50693),r=t(1426).extendFlat;$.exports=r({x:M.x,y:M.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:M.histnorm,histfunc:M.histfunc,nbinsx:M.nbinsx,xbins:E("x"),nbinsy:M.nbinsy,ybins:E("y"),autobinx:M.autobinx,autobiny:M.autobiny,bingroup:r({},M.bingroup,{}),xbingroup:r({},M.bingroup,{}),ybingroup:r({},M.bingroup,{}),xgap:i.xgap,ygap:i.ygap,zsmooth:i.zsmooth,xhoverformat:A("x"),yhoverformat:A("y"),zhoverformat:A("z",1),hovertemplate:g({},{keys:"z"}),texttemplate:v({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:i.textfont,showlegend:r({},S.showlegend,{dflt:!1})},e("",{cLetter:"z",autoColorDflt:!1}))},17562:function($,U,t){var M=t(71828),E=t(89298),i=t(59575),S=t(36362),A=t(42174),g=t(40965),v=t(72138).calcAllAutoBins;$.exports=function(n,a){var o=E.getFromId(n,a.xaxis),h=E.getFromId(n,a.yaxis),y=a.xcalendar,p=a.ycalendar,x=function(Rt){return o.r2c(Rt,0,y)},s=function(Rt){return h.r2c(Rt,0,p)},u=function(Rt){return o.c2r(Rt,0,y)},c=function(Rt){return h.c2r(Rt,0,p)},T,k,_,b,P=v(n,a,o,"x"),l=P[0],d=P[1],L=v(n,a,h,"y"),w=L[0],I=L[1],z=a._length;d.length>z&&d.splice(z,d.length-z),I.length>z&&I.splice(z,I.length-z);var B=[],O=[],R=[],C=typeof l.size=="string",F=typeof w.size=="string",N=[],V=[],K=C?N:l,Q=F?V:w,at=0,it=[],q=[],W=a.histnorm,Z=a.histfunc,G=W.indexOf("density")!==-1,et=Z==="max"||Z==="min",nt=et?null:0,X=i.count,Y=S[W],ot=!1,rt=[],ht=[],pt="z"in a?a.z:"marker"in a&&Array.isArray(a.marker.color)?a.marker.color:"";pt&&Z!=="count"&&(ot=Z==="avg",X=i[Z]);var yt=l.size,xt=x(l.start),Ft=x(l.end)+(xt-E.tickIncrement(xt,yt,!1,y))/1e6;for(T=xt;T<Ft;T=E.tickIncrement(T,yt,!1,y))O.push(nt),N.push(T),ot&&R.push(0);N.push(T);var Et=O.length,mt=(T-xt)/Et,gt=u(xt+mt/2),wt=w.size,Pt=s(w.start),Bt=s(w.end)+(Pt-E.tickIncrement(Pt,wt,!1,p))/1e6;for(T=Pt;T<Bt;T=E.tickIncrement(T,wt,!1,p)){B.push(O.slice()),V.push(T);var kt=new Array(Et);for(k=0;k<Et;k++)kt[k]=[];q.push(kt),ot&&it.push(R.slice())}V.push(T);var jt=B.length,Ht=(T-Pt)/jt,Vt=c(Pt+Ht/2);G&&(rt=e(O.length,K,mt,C),ht=e(B.length,Q,Ht,F)),!C&&o.type==="date"&&(K=r(x,K)),!F&&h.type==="date"&&(Q=r(s,Q));var ee=!0,te=!0,ae=new Array(Et),le=new Array(jt),ce=1/0,pe=1/0,we=1/0,ve=1/0;for(T=0;T<z;T++){var Mt=d[T],It=I[T];_=M.findBin(Mt,K),b=M.findBin(It,Q),_>=0&&_<Et&&b>=0&&b<jt&&(at+=X(_,T,B[b],pt,it[b]),q[b][_].push(T),ee&&(ae[_]===void 0?ae[_]=Mt:ae[_]!==Mt&&(ee=!1)),te&&(le[b]===void 0?le[b]=It:le[b]!==It&&(te=!1)),ce=Math.min(ce,Mt-N[_]),pe=Math.min(pe,N[_+1]-Mt),we=Math.min(we,It-V[b]),ve=Math.min(ve,V[b+1]-It))}if(ot)for(b=0;b<jt;b++)at+=A(B[b],it[b]);if(Y)for(b=0;b<jt;b++)Y(B[b],at,rt,ht[b]);return{x:d,xRanges:f(N,ee&&ae,ce,pe,o,y),x0:gt,dx:mt,y:I,yRanges:f(V,te&&le,we,ve,h,p),y0:Vt,dy:Ht,z:B,pts:q}};function e(n,a,o,h){var y=new Array(n),p;if(h)for(p=0;p<n;p++)y[p]=1/(a[p+1]-a[p]);else{var x=1/o;for(p=0;p<n;p++)y[p]=x}return y}function r(n,a){return{start:n(a.start),end:n(a.end),size:a.size}}function f(n,a,o,h,y,p){var x,s=n.length-1,u=new Array(s),c=g(o,h,n,y,p);for(x=0;x<s;x++){var T=(a||[])[x];u[x]=T===void 0?[c(n[x]),c(n[x+1],!0)]:[T,T]}return u}},93888:function($,U,t){var M=t(71828),E=t(75238),i=t(49901),S=t(1586),A=t(58623),g=t(35361);$.exports=function(v,e,r,f){function n(a,o){return M.coerce(v,e,g,a,o)}E(v,e,n,f),e.visible!==!1&&(i(v,e,n,f),S(v,e,f,n,{prefix:"",cLetter:"z"}),n("hovertemplate"),A(n,f),n("xhoverformat"),n("yhoverformat"))}},76128:function($,U,t){var M=t(46248),E=t(89298).hoverLabelText;$.exports=function(i,S,A,g,v){var e=M(i,S,A,g,v);if(e){i=e[0];var r=i.index,f=r[0],n=r[1],a=i.cd[0],o=a.trace,h=a.xRanges[n],y=a.yRanges[f];return i.xLabel=E(i.xa,[h[0],h[1]],o.xhoverformat),i.yLabel=E(i.ya,[y[0],y[1]],o.yhoverformat),e}}},43905:function($,U,t){$.exports={attributes:t(35361),supplyDefaults:t(93888),crossTraceDefaults:t(82222),calc:t(90757),plot:t(50347),layerName:"heatmaplayer",colorbar:t(61243),style:t(70035),hoverPoints:t(76128),eventData:t(84402),moduleType:"trace",name:"histogram2d",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},75238:function($,U,t){var M=t(73972),E=t(71828);$.exports=function(i,S,A,g){var v=A("x"),e=A("y"),r=E.minRowLength(v),f=E.minRowLength(e);if(!r||!f){S.visible=!1;return}S._length=Math.min(r,f);var n=M.getComponentMethod("calendars","handleTraceDefaults");n(i,S,["x","y"],g);var a=A("z")||A("marker.color");a&&A("histfunc"),A("histnorm"),A("autobinx"),A("autobiny")}},99066:function($,U,t){var M=t(35361),E=t(70600),i=t(50693),S=t(12663).axisHoverFormat,A=t(1426).extendFlat;$.exports=A({x:M.x,y:M.y,z:M.z,marker:M.marker,histnorm:M.histnorm,histfunc:M.histfunc,nbinsx:M.nbinsx,xbins:M.xbins,nbinsy:M.nbinsy,ybins:M.ybins,autobinx:M.autobinx,autobiny:M.autobiny,bingroup:M.bingroup,xbingroup:M.xbingroup,ybingroup:M.ybingroup,autocontour:E.autocontour,ncontours:E.ncontours,contours:E.contours,line:{color:E.line.color,width:A({},E.line.width,{dflt:.5}),dash:E.line.dash,smoothing:E.line.smoothing,editType:"plot"},xhoverformat:S("x"),yhoverformat:S("y"),zhoverformat:S("z",1),hovertemplate:M.hovertemplate,texttemplate:E.texttemplate,textfont:E.textfont},i("",{cLetter:"z",editTypeOverride:"calc"}))},62654:function($,U,t){var M=t(71828),E=t(75238),i=t(67217),S=t(8724),A=t(58623),g=t(99066);$.exports=function(v,e,r,f){function n(o,h){return M.coerce(v,e,g,o,h)}function a(o){return M.coerce2(v,e,g,o)}E(v,e,n,f),e.visible!==!1&&(i(v,e,n,a),S(v,e,n,f),n("xhoverformat"),n("yhoverformat"),n("hovertemplate"),e.contours&&e.contours.coloring==="heatmap"&&A(n,f))}},35902:function($,U,t){$.exports={attributes:t(99066),supplyDefaults:t(62654),crossTraceDefaults:t(82222),calc:t(27529),plot:t(29854).plot,layerName:"contourlayer",style:t(84426),colorbar:t(90654),hoverPoints:t(52421),moduleType:"trace",name:"histogram2dcontour",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},46291:function($,U,t){var M=t(5386).fF,E=t(5386).si,i=t(50693),S=t(27670).Y,A=t(34e3),g=t(57564),v=t(45802),e=t(43473),r=t(1426).extendFlat,f=t(79952).u;$.exports={labels:g.labels,parents:g.parents,values:g.values,branchvalues:g.branchvalues,count:g.count,level:g.level,maxdepth:g.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:v.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:r({colors:g.marker.colors,line:g.marker.line,pattern:f,editType:"calc"},i("marker",{colorAttr:"colors",anim:!1})),leaf:g.leaf,pathbar:v.pathbar,text:A.text,textinfo:g.textinfo,texttemplate:E({editType:"plot"},{keys:e.eventDataKeys.concat(["label","value"])}),hovertext:A.hovertext,hoverinfo:g.hoverinfo,hovertemplate:M({},{keys:e.eventDataKeys}),textfont:A.textfont,insidetextfont:A.insidetextfont,outsidetextfont:v.outsidetextfont,textposition:v.textposition,sort:A.sort,root:g.root,domain:S({name:"icicle",trace:!0,editType:"calc"})}},96346:function($,U,t){var M=t(74875);U.name="icicle",U.plot=function(E,i,S,A){M.plotBasePlot(U.name,E,i,S,A)},U.clean=function(E,i,S,A){M.cleanBasePlot(U.name,E,i,S,A)}},46584:function($,U,t){var M=t(52147);U.y=function(E,i){return M.calc(E,i)},U.T=function(E){return M._runCrossTraceCalc("icicle",E)}},56524:function($,U,t){var M=t(71828),E=t(46291),i=t(7901),S=t(27670).c,A=t(90769).handleText,g=t(97313).TEXTPAD,v=t(37434).handleMarkerDefaults,e=t(21081),r=e.hasColorscale,f=e.handleDefaults;$.exports=function(n,a,o,h){function y(_,b){return M.coerce(n,a,E,_,b)}var p=y("labels"),x=y("parents");if(!p||!p.length||!x||!x.length){a.visible=!1;return}var s=y("values");s&&s.length?y("branchvalues"):y("count"),y("level"),y("maxdepth"),y("tiling.orientation"),y("tiling.flip"),y("tiling.pad");var u=y("text");y("texttemplate"),a.texttemplate||y("textinfo",Array.isArray(u)?"text+label":"label"),y("hovertext"),y("hovertemplate");var c=y("pathbar.visible"),T="auto";A(n,a,h,y,T,{hasPathbar:c,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),y("textposition"),v(n,a,h,y);var k=a._hasColorscale=r(n,"marker","colors")||(n.marker||{}).coloraxis;k&&f(n,a,h,y,{prefix:"marker.",cLetter:"c"}),y("leaf.opacity",k?1:.7),a._hovered={marker:{line:{width:2,color:i.contrast(h.paper_bgcolor)}}},c&&(y("pathbar.thickness",a.pathbar.textfont.size+2*g),y("pathbar.side"),y("pathbar.edgeshape")),y("sort"),y("root.color"),S(a,h,y),a._length=null}},90666:function($,U,t){var M=t(39898),E=t(71828),i=t(91424),S=t(63893),A=t(21538),g=t(82454).styleOne,v=t(43473),e=t(2791),r=t(83523),f=t(24714).formatSliceLabel,n=!1;$.exports=function(a,o,h,y,p){var x=p.width,s=p.height,u=p.viewX,c=p.viewY,T=p.pathSlice,k=p.toMoveInsideSlice,_=p.strTransform,b=p.hasTransition,P=p.handleSlicesExit,l=p.makeUpdateSliceInterpolator,d=p.makeUpdateTextInterpolator,L=p.prevEntry,w={},I=a._context.staticPlot,z=a._fullLayout,B=o[0],O=B.trace,R=O.textposition.indexOf("left")!==-1,C=O.textposition.indexOf("right")!==-1,F=O.textposition.indexOf("bottom")!==-1,N=A(h,[x,s],{flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1,orientation:O.tiling.orientation,pad:{inner:O.tiling.pad},maxDepth:O._maxDepth}),V=N.descendants(),K=1/0,Q=-1/0;V.forEach(function(Z){var G=Z.depth;G>=O._maxDepth?(Z.x0=Z.x1=(Z.x0+Z.x1)/2,Z.y0=Z.y1=(Z.y0+Z.y1)/2):(K=Math.min(K,G),Q=Math.max(Q,G))}),y=y.data(V,e.getPtId),O._maxVisibleLayers=isFinite(Q)?Q-K+1:0,y.enter().append("g").classed("slice",!0),P(y,n,w,[x,s],T),y.order();var at=null;if(b&&L){var it=e.getPtId(L);y.each(function(Z){at===null&&e.getPtId(Z)===it&&(at={x0:Z.x0,x1:Z.x1,y0:Z.y0,y1:Z.y1})})}var q=function(){return at||{x0:0,x1:x,y0:0,y1:s}},W=y;return b&&(W=W.transition().each("end",function(){var Z=M.select(this);e.setSliceCursor(Z,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),W.each(function(Z){Z._x0=u(Z.x0),Z._x1=u(Z.x1),Z._y0=c(Z.y0),Z._y1=c(Z.y1),Z._hoverX=u(Z.x1-O.tiling.pad),Z._hoverY=c(F?Z.y1-O.tiling.pad/2:Z.y0+O.tiling.pad/2);var G=M.select(this),et=E.ensureSingle(G,"path","surface",function(ot){ot.style("pointer-events",I?"none":"all")});b?et.transition().attrTween("d",function(ot){var rt=l(ot,n,q(),[x,s],{orientation:O.tiling.orientation,flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1});return function(ht){return T(rt(ht))}}):et.attr("d",T),G.call(r,h,a,o,{styleOne:g,eventDataKeys:v.eventDataKeys,transitionTime:v.CLICK_TRANSITION_TIME,transitionEasing:v.CLICK_TRANSITION_EASING}).call(e.setSliceCursor,a,{isTransitioning:a._transitioning}),et.call(g,Z,O,a,{hovered:!1}),Z.x0===Z.x1||Z.y0===Z.y1?Z._text="":Z._text=f(Z,h,O,o,z)||"";var nt=E.ensureSingle(G,"g","slicetext"),X=E.ensureSingle(nt,"text","",function(ot){ot.attr("data-notex",1)}),Y=E.ensureUniformFontSize(a,e.determineTextFont(O,Z,z.font));X.text(Z._text||" ").classed("slicetext",!0).attr("text-anchor",C?"end":R?"start":"middle").call(i.font,Y).call(S.convertToTspans,a),Z.textBB=i.bBox(X.node()),Z.transform=k(Z,{fontSize:Y.size}),Z.transform.fontSize=Y.size,b?X.transition().attrTween("transform",function(ot){var rt=d(ot,n,q(),[x,s]);return function(ht){return _(rt(ht))}}):X.attr("transform",_(Z))}),at}},69816:function($,U,t){$.exports={moduleType:"trace",name:"icicle",basePlotModule:t(96346),categories:[],animatable:!0,attributes:t(46291),layoutAttributes:t(92894),supplyDefaults:t(56524),supplyLayoutDefaults:t(21070),calc:t(46584).y,crossTraceCalc:t(46584).T,plot:t(85596),style:t(82454).style,colorbar:t(4898),meta:{}}},92894:function($){$.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},21070:function($,U,t){var M=t(71828),E=t(92894);$.exports=function(i,S){function A(g,v){return M.coerce(i,S,E,g,v)}A("iciclecolorway",S.colorway),A("extendiciclecolors")}},21538:function($,U,t){var M=t(674),E=t(14102);$.exports=function(i,S,A){var g=A.flipX,v=A.flipY,e=A.orientation==="h",r=A.maxDepth,f=S[0],n=S[1];r&&(f=(i.height+1)*S[0]/Math.min(i.height+1,r),n=(i.height+1)*S[1]/Math.min(i.height+1,r));var a=M.partition().padding(A.pad.inner).size(e?[S[1],f]:[S[0],n])(i);return(e||g||v)&&E(a,S,{swapXY:e,flipX:g,flipY:v}),a}},85596:function($,U,t){var M=t(80694),E=t(90666);$.exports=function(i,S,A,g){return M(i,S,A,g,{type:"icicle",drawDescendants:E})}},82454:function($,U,t){var M=t(39898),E=t(7901),i=t(71828),S=t(72597).resizeText,A=t(43467);function g(e){var r=e._fullLayout._iciclelayer.selectAll(".trace");S(e,r,"icicle"),r.each(function(f){var n=M.select(this),a=f[0],o=a.trace;n.style("opacity",o.opacity),n.selectAll("path.surface").each(function(h){M.select(this).call(v,h,o,e)})})}function v(e,r,f,n){var a=r.data.data,o=!r.children,h=a.i,y=i.castOption(f,h,"marker.line.color")||E.defaultLine,p=i.castOption(f,h,"marker.line.width")||0;e.call(A,r,f,n).style("stroke-width",p).call(E.stroke,y).style("opacity",o?f.leaf.opacity:null)}$.exports={style:g,styleOne:v}},17230:function($,U,t){for(var M=t(9012),E=t(5386).fF,i=t(1426).extendFlat,S=t(51877).colormodel,A=["rgb","rgba","rgba256","hsl","hsla"],g=[],v=[],e=0;e<A.length;e++){var r=S[A[e]];g.push("For the `"+A[e]+"` colormodel, it is ["+(r.zminDflt||r.min).join(", ")+"]."),v.push("For the `"+A[e]+"` colormodel, it is ["+(r.zmaxDflt||r.max).join(", ")+"].")}$.exports=i({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:A,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:i({},M.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:E({},{keys:["z","color","colormodel"]}),transforms:void 0})},71113:function($,U,t){var M=t(71828),E=t(51877),i=t(92770),S=t(89298),A=t(71828).maxRowLength,g=t(67395).A;$.exports=function(f,n){var a,o;if(n._hasZ)a=n.z.length,o=A(n.z);else if(n._hasSource){var h=g(n.source);a=h.height,o=h.width}var y=S.getFromId(f,n.xaxis||"x"),p=S.getFromId(f,n.yaxis||"y"),x=y.d2c(n.x0)-n.dx/2,s=p.d2c(n.y0)-n.dy/2,u,c=[x,x+o*n.dx],T=[s,s+a*n.dy];if(y&&y.type==="log")for(u=0;u<o;u++)c.push(x+u*n.dx);if(p&&p.type==="log")for(u=0;u<a;u++)T.push(s+u*n.dy);n._extremes[y._id]=S.findExtremes(y,c),n._extremes[p._id]=S.findExtremes(p,T),n._scaler=r(n);var k={x0:x,y0:s,z:n.z,w:o,h:a};return[k]};function v(f,n,a,o){return function(h){return M.constrain((h-f)*n,a,o)}}function e(f,n){return function(a){return M.constrain(a,f,n)}}function r(f){var n=E.colormodel[f.colormodel],a=n.colormodel||f.colormodel,o=a.length;f._sArray=[];for(var h=0;h<o;h++)n.min[h]!==f.zmin[h]||n.max[h]!==f.zmax[h]?f._sArray.push(v(f.zmin[h],(n.max[h]-n.min[h])/(f.zmax[h]-f.zmin[h]),n.min[h],n.max[h])):f._sArray.push(e(n.min[h],n.max[h]));return function(y){for(var p=y.slice(0,o),x=0;x<o;x++){var s=p[x];if(!i(s))return!1;p[x]=f._sArray[x](s)}return p}}},51877:function($){$.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(U){return U.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(U){return U.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(U){return U.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(U){var t=U.slice(0,3);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(U){var t=U.slice(0,4);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["\xB0","%","%",""]}}}},13245:function($,U,t){var M=t(71828),E=t(17230),i=t(51877),S=t(25095).IMAGE_URL_PREFIX;$.exports=function(A,g){function v(f,n){return M.coerce(A,g,E,f,n)}v("source"),g.source&&!g.source.match(S)&&delete g.source,g._hasSource=!!g.source;var e=v("z");if(g._hasZ=!(e===void 0||!e.length||!e[0]||!e[0].length),!g._hasZ&&!g._hasSource){g.visible=!1;return}v("x0"),v("y0"),v("dx"),v("dy");var r;g._hasZ?(v("colormodel","rgb"),r=i.colormodel[g.colormodel],v("zmin",r.zminDflt||r.min),v("zmax",r.zmaxDflt||r.max)):g._hasSource&&(g.colormodel="rgba256",r=i.colormodel[g.colormodel],g.zmin=r.zminDflt,g.zmax=r.zmaxDflt),v("zsmooth"),v("text"),v("hovertext"),v("hovertemplate"),g._length=null}},30835:function($){$.exports=function(U,t){return"xVal"in t&&(U.x=t.xVal),"yVal"in t&&(U.y=t.yVal),t.xa&&(U.xaxis=t.xa),t.ya&&(U.yaxis=t.ya),U.color=t.color,U.colormodel=t.trace.colormodel,U.z||(U.z=t.color),U}},67395:function($,U,t){var M=t(33575),E=t(25095).IMAGE_URL_PREFIX,i=t(12856).Buffer;U.A=function(S){var A=S.replace(E,""),g=new i(A,"base64");return M(g)}},28749:function($,U,t){var M=t(30211),E=t(71828),i=t(51877);$.exports=function(S,A,g){var v=S.cd[0],e=v.trace,r=S.xa,f=S.ya;if(!(M.inbox(A-v.x0,A-(v.x0+v.w*e.dx),0)>0||M.inbox(g-v.y0,g-(v.y0+v.h*e.dy),0)>0)){var n=Math.floor((A-v.x0)/e.dx),a=Math.floor(Math.abs(g-v.y0)/e.dy),o;if(e._hasZ?o=v.z[a][n]:e._hasSource&&(o=e._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(n,a,1,1).data),!!o){var h=v.hi||e.hoverinfo,y;if(h){var p=h.split("+");p.indexOf("all")!==-1&&(p=["color"]),p.indexOf("color")!==-1&&(y=!0)}var x=i.colormodel[e.colormodel],s=x.colormodel||e.colormodel,u=s.length,c=e._scaler(o),T=x.suffix,k=[];(e.hovertemplate||y)&&(k.push("["+[c[0]+T[0],c[1]+T[1],c[2]+T[2]].join(", ")),u===4&&k.push(", "+c[3]+T[3]),k.push("]"),k=k.join(""),S.extraText=s.toUpperCase()+": "+k);var _;Array.isArray(e.hovertext)&&Array.isArray(e.hovertext[a])?_=e.hovertext[a][n]:Array.isArray(e.text)&&Array.isArray(e.text[a])&&(_=e.text[a][n]);var b=f.c2p(v.y0+(a+.5)*e.dy),P=v.x0+(n+.5)*e.dx,l=v.y0+(a+.5)*e.dy,d="["+o.slice(0,e.colormodel.length).join(", ")+"]";return[E.extendFlat(S,{index:[a,n],x0:r.c2p(v.x0+n*e.dx),x1:r.c2p(v.x0+(n+1)*e.dx),y0:b,y1:b,color:c,xVal:P,xLabelVal:P,yVal:l,yLabelVal:l,zLabelVal:d,text:_,hovertemplateLabels:{zLabel:d,colorLabel:k,"color[0]Label":c[0]+T[0],"color[1]Label":c[1]+T[1],"color[2]Label":c[2]+T[2],"color[3]Label":c[3]+T[3]}})]}}}},94507:function($,U,t){$.exports={attributes:t(17230),supplyDefaults:t(13245),calc:t(71113),plot:t(60775),style:t(12826),hoverPoints:t(28749),eventData:t(30835),moduleType:"trace",name:"image",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},60775:function($,U,t){var M=t(39898),E=t(71828),i=E.strTranslate,S=t(77922),A=t(51877),g=t(3883),v=t(32396).STYLE;$.exports=function(e,r,f,n){var a=r.xaxis,o=r.yaxis,h=!e._context._exportedPlot&&g();E.makeTraceGroups(n,f,"im").each(function(y){var p=M.select(this),x=y[0],s=x.trace,u=(s.zsmooth==="fast"||s.zsmooth===!1&&h)&&!s._hasZ&&s._hasSource&&a.type==="linear"&&o.type==="linear";s._realImage=u;var c=x.z,T=x.x0,k=x.y0,_=x.w,b=x.h,P=s.dx,l=s.dy,d,L,w,I,z,B;for(B=0;d===void 0&&B<_;)d=a.c2p(T+B*P),B++;for(B=_;L===void 0&&B>0;)L=a.c2p(T+B*P),B--;for(B=0;I===void 0&&B<b;)I=o.c2p(k+B*l),B++;for(B=b;z===void 0&&B>0;)z=o.c2p(k+B*l),B--;if(L<d&&(w=L,L=d,d=w),z<I&&(w=I,I=z,z=w),!u){var O=.5;d=Math.max(-O*a._length,d),L=Math.min((1+O)*a._length,L),I=Math.max(-O*o._length,I),z=Math.min((1+O)*o._length,z)}var R=Math.round(L-d),C=Math.round(z-I),F=R<=0||C<=0;if(F){var N=p.selectAll("image").data([]);N.exit().remove();return}function V(nt){var X=document.createElement("canvas");X.width=R,X.height=C;var Y=X.getContext("2d",{willReadFrequently:!0}),ot=function(Pt){return E.constrain(Math.round(a.c2p(T+Pt*P)-d),0,R)},rt=function(Pt){return E.constrain(Math.round(o.c2p(k+Pt*l)-I),0,C)},ht=A.colormodel[s.colormodel],pt=ht.colormodel||s.colormodel,yt=ht.fmt,xt;for(B=0;B<x.w;B++){var Ft=ot(B),Et=ot(B+1);if(!(Et===Ft||isNaN(Et)||isNaN(Ft)))for(var mt=0;mt<x.h;mt++){var gt=rt(mt),wt=rt(mt+1);wt===gt||isNaN(wt)||isNaN(gt)||!nt(B,mt)||(xt=s._scaler(nt(B,mt)),xt?Y.fillStyle=pt+"("+yt(xt).join(",")+")":Y.fillStyle="rgba(0,0,0,0)",Y.fillRect(Ft,gt,Et-Ft,wt-gt))}}return X}var K=p.selectAll("image").data([y]);K.enter().append("svg:image").attr({xmlns:S.svg,preserveAspectRatio:"none"}),K.exit().remove();var Q=s.zsmooth===!1?v:"";if(u){var at=E.simpleMap(a.range,a.r2l),it=E.simpleMap(o.range,o.r2l),q=at[1]<at[0],W=it[1]>it[0];if(q||W){var Z=d+R/2,G=I+C/2;Q+="transform:"+i(Z+"px",G+"px")+"scale("+(q?-1:1)+","+(W?-1:1)+")"+i(-Z+"px",-G+"px")+";"}}K.attr("style",Q);var et=new Promise(function(nt){if(s._hasZ)nt();else if(s._hasSource)if(s._canvas&&s._canvas.el.width===_&&s._canvas.el.height===b&&s._canvas.source===s.source)nt();else{var X=document.createElement("canvas");X.width=_,X.height=b;var Y=X.getContext("2d",{willReadFrequently:!0});s._image=s._image||new Image;var ot=s._image;ot.onload=function(){Y.drawImage(ot,0,0),s._canvas={el:X,source:s.source},nt()},ot.setAttribute("src",s.source)}}).then(function(){var nt,X;if(s._hasZ)X=V(function(rt,ht){return c[ht][rt]}),nt=X.toDataURL("image/png");else if(s._hasSource)if(u)nt=s.source;else{var Y=s._canvas.el.getContext("2d",{willReadFrequently:!0}),ot=Y.getImageData(0,0,_,b).data;X=V(function(rt,ht){var pt=4*(ht*_+rt);return[ot[pt],ot[pt+1],ot[pt+2],ot[pt+3]]}),nt=X.toDataURL("image/png")}K.attr({"xlink:href":nt,height:C,width:R,x:d,y:I})});e._promises.push(et)})}},12826:function($,U,t){var M=t(39898);$.exports=function(E){M.select(E).selectAll(".im image").style("opacity",function(i){return i[0].trace.opacity})}},54846:function($,U,t){var M=t(1426).extendFlat,E=t(1426).extendDeep,i=t(30962).overrideAll,S=t(41940),A=t(22399),g=t(27670).Y,v=t(13838),e=t(44467).templatedArray,r=t(22372),f=t(12663).descriptionOnlyNumbers,n=S({editType:"plot",colorEditType:"plot"}),a={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:A.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},o={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},h=e("step",E({},a,{range:o}));$.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:g({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:M({},n,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:f("value")},font:M({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:f("value")},increasing:{symbol:{valType:"string",dflt:r.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:r.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:M({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:E({},a,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:A.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:i({range:o,visible:M({},v.visible,{dflt:!0}),tickmode:v.minor.tickmode,nticks:v.nticks,tick0:v.tick0,dtick:v.dtick,tickvals:v.tickvals,ticktext:v.ticktext,ticks:M({},v.ticks,{dflt:"outside"}),ticklen:v.ticklen,tickwidth:v.tickwidth,tickcolor:v.tickcolor,ticklabelstep:v.ticklabelstep,showticklabels:v.showticklabels,labelalias:v.labelalias,tickfont:S({}),tickangle:v.tickangle,tickformat:v.tickformat,tickformatstops:v.tickformatstops,tickprefix:v.tickprefix,showtickprefix:v.showtickprefix,ticksuffix:v.ticksuffix,showticksuffix:v.showticksuffix,separatethousands:v.separatethousands,exponentformat:v.exponentformat,minexponent:v.minexponent,showexponent:v.showexponent,editType:"plot"},"plot"),steps:h,threshold:{line:{color:M({},a.line.color,{}),width:M({},a.line.width,{dflt:1}),editType:"plot"},thickness:M({},a.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},15970:function($,U,t){var M=t(74875);U.name="indicator",U.plot=function(E,i,S,A){M.plotBasePlot(U.name,E,i,S,A)},U.clean=function(E,i,S,A){M.cleanBasePlot(U.name,E,i,S,A)}},24667:function($){function U(t,M){var E=[],i=M.value;typeof M._lastValue!="number"&&(M._lastValue=M.value);var S=M._lastValue,A=S;return M._hasDelta&&typeof M.delta.reference=="number"&&(A=M.delta.reference),E[0]={y:i,lastY:S,delta:i-A,relativeDelta:(i-A)/A},E}$.exports={calc:U}},84577:function($){$.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},94425:function($,U,t){var M=t(71828),E=t(54846),i=t(27670).c,S=t(44467),A=t(85501),g=t(84577),v=t(26218),e=t(38701),r=t(96115),f=t(89426);function n(o,h,y,p){function x(B,O){return M.coerce(o,h,E,B,O)}i(h,p,x),x("mode"),h._hasNumber=h.mode.indexOf("number")!==-1,h._hasDelta=h.mode.indexOf("delta")!==-1,h._hasGauge=h.mode.indexOf("gauge")!==-1;var s=x("value");h._range=[0,typeof s=="number"?1.5*s:1];var u=new Array(2),c;h._hasNumber&&(x("number.valueformat"),x("number.font.color",p.font.color),x("number.font.family",p.font.family),x("number.font.size"),h.number.font.size===void 0&&(h.number.font.size=g.defaultNumberFontSize,u[0]=!0),x("number.prefix"),x("number.suffix"),c=h.number.font.size);var T;h._hasDelta&&(x("delta.font.color",p.font.color),x("delta.font.family",p.font.family),x("delta.font.size"),h.delta.font.size===void 0&&(h.delta.font.size=(h._hasNumber?.5:1)*(c||g.defaultNumberFontSize),u[1]=!0),x("delta.reference",h.value),x("delta.relative"),x("delta.valueformat",h.delta.relative?"2%":""),x("delta.increasing.symbol"),x("delta.increasing.color"),x("delta.decreasing.symbol"),x("delta.decreasing.color"),x("delta.position"),x("delta.prefix"),x("delta.suffix"),T=h.delta.font.size),h._scaleNumbers=(!h._hasNumber||u[0])&&(!h._hasDelta||u[1])||!1,x("title.font.color",p.font.color),x("title.font.family",p.font.family),x("title.font.size",.25*(c||T||g.defaultNumberFontSize)),x("title.text");var k,_,b,P;function l(B,O){return M.coerce(k,_,E.gauge,B,O)}function d(B,O){return M.coerce(b,P,E.gauge.axis,B,O)}if(h._hasGauge){k=o.gauge,k||(k={}),_=S.newContainer(h,"gauge"),l("shape");var L=h._isBullet=h.gauge.shape==="bullet";L||x("title.align","center");var w=h._isAngular=h.gauge.shape==="angular";w||x("align","center"),l("bgcolor",p.paper_bgcolor),l("borderwidth"),l("bordercolor"),l("bar.color"),l("bar.line.color"),l("bar.line.width");var I=g.valueThickness*(h.gauge.shape==="bullet"?.5:1);l("bar.thickness",I),A(k,_,{name:"steps",handleItemDefaults:a}),l("threshold.value"),l("threshold.thickness"),l("threshold.line.width"),l("threshold.line.color"),b={},k&&(b=k.axis||{}),P=S.newContainer(_,"axis"),d("visible"),h._range=d("range",h._range);var z={outerTicks:!0};v(b,P,d,"linear"),f(b,P,d,"linear",z),r(b,P,d,"linear",z),e(b,P,d,z)}else x("title.align","center"),x("align","center"),h._isAngular=h._isBullet=!1;h._length=null}function a(o,h){function y(p,x){return M.coerce(o,h,E.gauge.steps,p,x)}y("color"),y("line.color"),y("line.width"),y("range"),y("thickness")}$.exports={supplyDefaults:n}},15154:function($,U,t){$.exports={moduleType:"trace",name:"indicator",basePlotModule:t(15970),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:t(54846),supplyDefaults:t(94425).supplyDefaults,calc:t(24667).calc,plot:t(75634),meta:{}}},75634:function($,U,t){var M=t(39898),E=t(81684).sX,i=t(81684).k4,S=t(71828),A=S.strScale,g=S.strTranslate,v=S.rad2deg,e=t(18783).MID_SHIFT,r=t(91424),f=t(84577),n=t(63893),a=t(89298),o=t(71453),h=t(52830),y=t(13838),p=t(7901),x={left:"start",center:"middle",right:"end"},s={left:0,center:.5,right:1},u=/[yzafpnµmkMGTPEZY]/;function c(z){return z&&z.duration>0}$.exports=function(z,B,O,R){var C=z._fullLayout,F;c(O)&&R&&(F=R()),S.makeTraceGroups(C._indicatorlayer,B,"trace").each(function(N){var V=N[0],K=V.trace,Q=M.select(this),at=K._hasGauge,it=K._isAngular,q=K._isBullet,W=K.domain,Z={w:C._size.w*(W.x[1]-W.x[0]),h:C._size.h*(W.y[1]-W.y[0]),l:C._size.l+C._size.w*W.x[0],r:C._size.r+C._size.w*(1-W.x[1]),t:C._size.t+C._size.h*(1-W.y[1]),b:C._size.b+C._size.h*W.y[0]},G=Z.l+Z.w/2,et=Z.t+Z.h/2,nt=Math.min(Z.w/2,Z.h),X=f.innerRadius*nt,Y,ot,rt,ht=K.align||"center";if(ot=et,!at)Y=Z.l+s[ht]*Z.w,rt=function(Bt){return d(Bt,Z.w,Z.h)};else if(it&&(Y=G,ot=et+nt/2,rt=function(Bt){return L(Bt,.9*X)}),q){var pt=f.bulletPadding,yt=1-f.bulletNumberDomainSize+pt;Y=Z.l+(yt+(1-yt)*s[ht])*Z.w,rt=function(Bt){return d(Bt,(f.bulletNumberDomainSize-pt)*Z.w,Z.h)}}_(z,Q,N,{numbersX:Y,numbersY:ot,numbersScaler:rt,transitionOpts:O,onComplete:F});var xt,Ft;at&&(xt={range:K.gauge.axis.range,color:K.gauge.bgcolor,line:{color:K.gauge.bordercolor,width:0},thickness:1},Ft={range:K.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:K.gauge.bordercolor,width:K.gauge.borderwidth},thickness:1});var Et=Q.selectAll("g.angular").data(it?N:[]);Et.exit().remove();var mt=Q.selectAll("g.angularaxis").data(it?N:[]);mt.exit().remove(),it&&k(z,Q,N,{radius:nt,innerRadius:X,gauge:Et,layer:mt,size:Z,gaugeBg:xt,gaugeOutline:Ft,transitionOpts:O,onComplete:F});var gt=Q.selectAll("g.bullet").data(q?N:[]);gt.exit().remove();var wt=Q.selectAll("g.bulletaxis").data(q?N:[]);wt.exit().remove(),q&&T(z,Q,N,{gauge:gt,layer:wt,size:Z,gaugeBg:xt,gaugeOutline:Ft,transitionOpts:O,onComplete:F});var Pt=Q.selectAll("text.title").data(N);Pt.exit().remove(),Pt.enter().append("text").classed("title",!0),Pt.attr("text-anchor",function(){return q?x.right:x[K.title.align]}).text(K.title.text).call(r.font,K.title.font).call(n.convertToTspans,z),Pt.attr("transform",function(){var Bt=Z.l+Z.w*s[K.title.align],kt,jt=f.titlePadding,Ht=r.bBox(Pt.node());if(at){if(it)if(K.gauge.axis.visible){var Vt=r.bBox(mt.node());kt=Vt.top-jt-Ht.bottom}else kt=Z.t+Z.h/2-nt/2-Ht.bottom-jt;q&&(kt=ot-(Ht.top+Ht.bottom)/2,Bt=Z.l-f.bulletPadding*Z.w)}else kt=K._numbersTop-jt-Ht.bottom;return g(Bt,kt)})})};function T(z,B,O,R){var C=O[0].trace,F=R.gauge,N=R.layer,V=R.gaugeBg,K=R.gaugeOutline,Q=R.size,at=C.domain,it=R.transitionOpts,q=R.onComplete,W,Z,G,et,nt;F.enter().append("g").classed("bullet",!0),F.attr("transform",g(Q.l,Q.t)),N.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),N.selectAll("g.xbulletaxistick,path,text").remove();var X=Q.h,Y=C.gauge.bar.thickness*X,ot=at.x[0],rt=at.x[0]+(at.x[1]-at.x[0])*(C._hasNumber||C._hasDelta?1-f.bulletNumberDomainSize:1);W=l(z,C.gauge.axis),W._id="xbulletaxis",W.domain=[ot,rt],W.setScale(),Z=a.calcTicks(W),G=a.makeTransTickFn(W),et=a.getTickSigns(W)[2],nt=Q.t+Q.h,W.visible&&(a.drawTicks(z,W,{vals:W.ticks==="inside"?a.clipEnds(W,Z):Z,layer:N,path:a.makeTickPath(W,nt,et),transFn:G}),a.drawLabels(z,W,{vals:Z,layer:N,transFn:G,labelFns:a.makeLabelFns(W,nt)}));function ht(gt){gt.attr("width",function(wt){return Math.max(0,W.c2p(wt.range[1])-W.c2p(wt.range[0]))}).attr("x",function(wt){return W.c2p(wt.range[0])}).attr("y",function(wt){return .5*(1-wt.thickness)*X}).attr("height",function(wt){return wt.thickness*X})}var pt=[V].concat(C.gauge.steps),yt=F.selectAll("g.bg-bullet").data(pt);yt.enter().append("g").classed("bg-bullet",!0).append("rect"),yt.select("rect").call(ht).call(b),yt.exit().remove();var xt=F.selectAll("g.value-bullet").data([C.gauge.bar]);xt.enter().append("g").classed("value-bullet",!0).append("rect"),xt.select("rect").attr("height",Y).attr("y",(X-Y)/2).call(b),c(it)?xt.select("rect").transition().duration(it.duration).ease(it.easing).each("end",function(){q&&q()}).each("interrupt",function(){q&&q()}).attr("width",Math.max(0,W.c2p(Math.min(C.gauge.axis.range[1],O[0].y)))):xt.select("rect").attr("width",typeof O[0].y=="number"?Math.max(0,W.c2p(Math.min(C.gauge.axis.range[1],O[0].y))):0),xt.exit().remove();var Ft=O.filter(function(){return C.gauge.threshold.value||C.gauge.threshold.value===0}),Et=F.selectAll("g.threshold-bullet").data(Ft);Et.enter().append("g").classed("threshold-bullet",!0).append("line"),Et.select("line").attr("x1",W.c2p(C.gauge.threshold.value)).attr("x2",W.c2p(C.gauge.threshold.value)).attr("y1",(1-C.gauge.threshold.thickness)/2*X).attr("y2",(1-(1-C.gauge.threshold.thickness)/2)*X).call(p.stroke,C.gauge.threshold.line.color).style("stroke-width",C.gauge.threshold.line.width),Et.exit().remove();var mt=F.selectAll("g.gauge-outline").data([K]);mt.enter().append("g").classed("gauge-outline",!0).append("rect"),mt.select("rect").call(ht).call(b),mt.exit().remove()}function k(z,B,O,R){var C=O[0].trace,F=R.size,N=R.radius,V=R.innerRadius,K=R.gaugeBg,Q=R.gaugeOutline,at=[F.l+F.w/2,F.t+F.h/2+N/2],it=R.gauge,q=R.layer,W=R.transitionOpts,Z=R.onComplete,G=Math.PI/2;function et(te){var ae=C.gauge.axis.range[0],le=C.gauge.axis.range[1],ce=(te-ae)/(le-ae)*Math.PI-G;return ce<-G?-G:ce>G?G:ce}function nt(te){return M.svg.arc().innerRadius((V+N)/2-te/2*(N-V)).outerRadius((V+N)/2+te/2*(N-V)).startAngle(-G)}function X(te){te.attr("d",function(ae){return nt(ae.thickness).startAngle(et(ae.range[0])).endAngle(et(ae.range[1]))()})}var Y,ot,rt,ht;it.enter().append("g").classed("angular",!0),it.attr("transform",g(at[0],at[1])),q.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),q.selectAll("g.xangularaxistick,path,text").remove(),Y=l(z,C.gauge.axis),Y.type="linear",Y.range=C.gauge.axis.range,Y._id="xangularaxis",Y.ticklabeloverflow="allow",Y.setScale();var pt=function(te){return(Y.range[0]-te.x)/(Y.range[1]-Y.range[0])*Math.PI+Math.PI},yt={},xt=a.makeLabelFns(Y,0),Ft=xt.labelStandoff;yt.xFn=function(te){var ae=pt(te);return Math.cos(ae)*Ft},yt.yFn=function(te){var ae=pt(te),le=Math.sin(ae)>0?.2:1;return-Math.sin(ae)*(Ft+te.fontSize*le)+Math.abs(Math.cos(ae))*(te.fontSize*e)},yt.anchorFn=function(te){var ae=pt(te),le=Math.cos(ae);return Math.abs(le)<.1?"middle":le>0?"start":"end"},yt.heightFn=function(te,ae,le){var ce=pt(te);return-.5*(1+Math.sin(ce))*le};var Et=function(te){return g(at[0]+N*Math.cos(te),at[1]-N*Math.sin(te))};rt=function(te){return Et(pt(te))};var mt=function(te){var ae=pt(te);return Et(ae)+"rotate("+-v(ae)+")"};if(ot=a.calcTicks(Y),ht=a.getTickSigns(Y)[2],Y.visible){ht=Y.ticks==="inside"?-1:1;var gt=(Y.linewidth||1)/2;a.drawTicks(z,Y,{vals:ot,layer:q,path:"M"+ht*gt+",0h"+ht*Y.ticklen,transFn:mt}),a.drawLabels(z,Y,{vals:ot,layer:q,transFn:rt,labelFns:yt})}var wt=[K].concat(C.gauge.steps),Pt=it.selectAll("g.bg-arc").data(wt);Pt.enter().append("g").classed("bg-arc",!0).append("path"),Pt.select("path").call(X).call(b),Pt.exit().remove();var Bt=nt(C.gauge.bar.thickness),kt=it.selectAll("g.value-arc").data([C.gauge.bar]);kt.enter().append("g").classed("value-arc",!0).append("path");var jt=kt.select("path");c(W)?(jt.transition().duration(W.duration).ease(W.easing).each("end",function(){Z&&Z()}).each("interrupt",function(){Z&&Z()}).attrTween("d",P(Bt,et(O[0].lastY),et(O[0].y))),C._lastValue=O[0].y):jt.attr("d",typeof O[0].y=="number"?Bt.endAngle(et(O[0].y)):"M0,0Z"),jt.call(b),kt.exit().remove(),wt=[];var Ht=C.gauge.threshold.value;(Ht||Ht===0)&&wt.push({range:[Ht,Ht],color:C.gauge.threshold.color,line:{color:C.gauge.threshold.line.color,width:C.gauge.threshold.line.width},thickness:C.gauge.threshold.thickness});var Vt=it.selectAll("g.threshold-arc").data(wt);Vt.enter().append("g").classed("threshold-arc",!0).append("path"),Vt.select("path").call(X).call(b),Vt.exit().remove();var ee=it.selectAll("g.gauge-outline").data([Q]);ee.enter().append("g").classed("gauge-outline",!0).append("path"),ee.select("path").call(X).call(b),ee.exit().remove()}function _(z,B,O,R){var C=O[0].trace,F=R.numbersX,N=R.numbersY,V=C.align||"center",K=x[V],Q=R.transitionOpts,at=R.onComplete,it=S.ensureSingle(B,"g","numbers"),q,W,Z,G=[];C._hasNumber&&G.push("number"),C._hasDelta&&(G.push("delta"),C.delta.position==="left"&&G.reverse());var et=it.selectAll("text").data(G);et.enter().append("text"),et.attr("text-anchor",function(){return K}).attr("class",function(Et){return Et}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),et.exit().remove();function nt(Et,mt,gt,wt){if(Et.match("s")&&gt>=0!=wt>=0&&!mt(gt).slice(-1).match(u)&&!mt(wt).slice(-1).match(u)){var Pt=Et.slice().replace("s","f").replace(/\d+/,function(kt){return parseInt(kt)-1}),Bt=l(z,{tickformat:Pt});return function(kt){return Math.abs(kt)<1?a.tickText(Bt,kt).text:mt(kt)}}else return mt}function X(){var Et=l(z,{tickformat:C.number.valueformat},C._range);Et.setScale(),a.prepTicks(Et);var mt=function(kt){return a.tickText(Et,kt).text},gt=C.number.suffix,wt=C.number.prefix,Pt=it.select("text.number");function Bt(){var kt=typeof O[0].y=="number"?wt+mt(O[0].y)+gt:"-";Pt.text(kt).call(r.font,C.number.font).call(n.convertToTspans,z)}return c(Q)?Pt.transition().duration(Q.duration).ease(Q.easing).each("end",function(){Bt(),at&&at()}).each("interrupt",function(){Bt(),at&&at()}).attrTween("text",function(){var kt=M.select(this),jt=i(O[0].lastY,O[0].y);C._lastValue=O[0].y;var Ht=nt(C.number.valueformat,mt,O[0].lastY,O[0].y);return function(Vt){kt.text(wt+Ht(jt(Vt))+gt)}}):Bt(),q=w(wt+mt(O[0].y)+gt,C.number.font,K,z),Pt}function Y(){var Et=l(z,{tickformat:C.delta.valueformat},C._range);Et.setScale(),a.prepTicks(Et);var mt=function(Vt){return a.tickText(Et,Vt).text},gt=C.delta.suffix,wt=C.delta.prefix,Pt=function(Vt){var ee=C.delta.relative?Vt.relativeDelta:Vt.delta;return ee},Bt=function(Vt,ee){return Vt===0||typeof Vt!="number"||isNaN(Vt)?"-":(Vt>0?C.delta.increasing.symbol:C.delta.decreasing.symbol)+wt+ee(Vt)+gt},kt=function(Vt){return Vt.delta>=0?C.delta.increasing.color:C.delta.decreasing.color};C._deltaLastValue===void 0&&(C._deltaLastValue=Pt(O[0]));var jt=it.select("text.delta");jt.call(r.font,C.delta.font).call(p.fill,kt({delta:C._deltaLastValue}));function Ht(){jt.text(Bt(Pt(O[0]),mt)).call(p.fill,kt(O[0])).call(n.convertToTspans,z)}return c(Q)?jt.transition().duration(Q.duration).ease(Q.easing).tween("text",function(){var Vt=M.select(this),ee=Pt(O[0]),te=C._deltaLastValue,ae=nt(C.delta.valueformat,mt,te,ee),le=i(te,ee);return C._deltaLastValue=ee,function(ce){Vt.text(Bt(le(ce),ae)),Vt.call(p.fill,kt({delta:le(ce)}))}}).each("end",function(){Ht(),at&&at()}).each("interrupt",function(){Ht(),at&&at()}):Ht(),W=w(Bt(Pt(O[0]),mt),C.delta.font,K,z),jt}var ot=C.mode+C.align,rt;if(C._hasDelta&&(rt=Y(),ot+=C.delta.position+C.delta.font.size+C.delta.font.family+C.delta.valueformat,ot+=C.delta.increasing.symbol+C.delta.decreasing.symbol,Z=W),C._hasNumber&&(X(),ot+=C.number.font.size+C.number.font.family+C.number.valueformat+C.number.suffix+C.number.prefix,Z=q),C._hasDelta&&C._hasNumber){var ht=[(q.left+q.right)/2,(q.top+q.bottom)/2],pt=[(W.left+W.right)/2,(W.top+W.bottom)/2],yt,xt,Ft=.75*C.delta.font.size;C.delta.position==="left"&&(yt=I(C,"deltaPos",0,-1*(q.width*s[C.align]+W.width*(1-s[C.align])+Ft),ot,Math.min),xt=ht[1]-pt[1],Z={width:q.width+W.width+Ft,height:Math.max(q.height,W.height),left:W.left+yt,right:q.right,top:Math.min(q.top,W.top+xt),bottom:Math.max(q.bottom,W.bottom+xt)}),C.delta.position==="right"&&(yt=I(C,"deltaPos",0,q.width*(1-s[C.align])+W.width*s[C.align]+Ft,ot,Math.max),xt=ht[1]-pt[1],Z={width:q.width+W.width+Ft,height:Math.max(q.height,W.height),left:q.left,right:W.right+yt,top:Math.min(q.top,W.top+xt),bottom:Math.max(q.bottom,W.bottom+xt)}),C.delta.position==="bottom"&&(yt=null,xt=W.height,Z={width:Math.max(q.width,W.width),height:q.height+W.height,left:Math.min(q.left,W.left),right:Math.max(q.right,W.right),top:q.bottom-q.height,bottom:q.bottom+W.height}),C.delta.position==="top"&&(yt=null,xt=q.top,Z={width:Math.max(q.width,W.width),height:q.height+W.height,left:Math.min(q.left,W.left),right:Math.max(q.right,W.right),top:q.bottom-q.height-W.height,bottom:q.bottom}),rt.attr({dx:yt,dy:xt})}(C._hasNumber||C._hasDelta)&&it.attr("transform",function(){var Et=R.numbersScaler(Z);ot+=Et[2];var mt=I(C,"numbersScale",1,Et[0],ot,Math.min),gt;C._scaleNumbers||(mt=1),C._isAngular?gt=N-mt*Z.bottom:gt=N-mt*(Z.top+Z.bottom)/2,C._numbersTop=mt*Z.top+gt;var wt=Z[V];V==="center"&&(wt=(Z.left+Z.right)/2);var Pt=F-mt*wt;return Pt=I(C,"numbersTranslate",0,Pt,ot,Math.max),g(Pt,gt)+A(mt)})}function b(z){z.each(function(B){p.stroke(M.select(this),B.line.color)}).each(function(B){p.fill(M.select(this),B.color)}).style("stroke-width",function(B){return B.line.width})}function P(z,B,O){return function(){var R=E(B,O);return function(C){return z.endAngle(R(C))()}}}function l(z,B,O){var R=z._fullLayout,C=S.extendFlat({type:"linear",ticks:"outside",range:O,showline:!0},B),F={type:"linear",_id:"x"+B._id},N={letter:"x",font:R.font,noHover:!0,noTickson:!0};function V(K,Q){return S.coerce(C,F,y,K,Q)}return o(C,F,V,N,R),h(C,F,V,N),F}function d(z,B,O){var R=Math.min(B/z.width,O/z.height);return[R,z,B+"x"+O]}function L(z,B){var O=Math.sqrt(z.width/2*(z.width/2)+z.height*z.height),R=B/O;return[R,z,B]}function w(z,B,O,R){var C=document.createElementNS("http://www.w3.org/2000/svg","text"),F=M.select(C);return F.text(z).attr("x",0).attr("y",0).attr("text-anchor",O).attr("data-unformatted",z).call(n.convertToTspans,R).call(r.font,B),r.bBox(F.node())}function I(z,B,O,R,C,F){var N="_cache"+B;z[N]&&z[N].key===C||(z[N]={key:C,value:O});var V=S.aggNums(F,null,[z[N].value,R],2);return z[N].value=V,V}},16249:function($,U,t){var M=t(50693),E=t(12663).axisHoverFormat,i=t(5386).fF,S=t(2418),A=t(9012),g=t(1426).extendFlat,v=t(30962).overrideAll;function e(n){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function r(n){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var f=$.exports=v(g({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:e(),y:e(),z:e()},caps:{x:r(),y:r(),z:r()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:i(),xhoverformat:E("x"),yhoverformat:E("y"),zhoverformat:E("z"),valuehoverformat:E("value",1),showlegend:g({},A.showlegend,{dflt:!1})},M("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:S.opacity,lightposition:S.lightposition,lighting:S.lighting,flatshading:S.flatshading,contour:S.contour,hoverinfo:g({},A.hoverinfo)}),"calc","nested");f.flatshading.dflt=!0,f.lighting.facenormalsepsilon.dflt=0,f.x.editType=f.y.editType=f.z.editType=f.value.editType="calc+clearAxisTypes",f.transforms=void 0},56959:function($,U,t){var M=t(78803),E=t(88489).processGrid,i=t(88489).filter;$.exports=function(S,A){A._len=Math.min(A.x.length,A.y.length,A.z.length,A.value.length),A._x=i(A.x,A._len),A._y=i(A.y,A._len),A._z=i(A.z,A._len),A._value=i(A.value,A._len);var g=E(A);A._gridFill=g.fill,A._Xs=g.Xs,A._Ys=g.Ys,A._Zs=g.Zs,A._len=g.len;for(var v=1/0,e=-1/0,r=0;r<A._len;r++){var f=A._value[r];v=Math.min(v,f),e=Math.max(e,f)}A._minValues=v,A._maxValues=e,A._vMin=A.isomin===void 0||A.isomin===null?v:A.isomin,A._vMax=A.isomax===void 0||A.isomin===null?e:A.isomax,M(S,A,{vals:[A._vMin,A._vMax],containerStr:"",cLetter:"c"})}},22674:function($,U,t){var M=t(9330).gl_mesh3d,E=t(81697).parseColorScale,i=t(78614),S=t(21081).extractOpts,A=t(90060),g=function(a,o){for(var h=o.length-1;h>0;h--){var y=Math.min(o[h],o[h-1]),p=Math.max(o[h],o[h-1]);if(p>y&&y<a&&a<=p)return{id:h,distRatio:(p-a)/(p-y)}}return{id:0,distRatio:0}};function v(a,o,h){this.scene=a,this.uid=h,this.mesh=o,this.name="",this.data=null,this.showContour=!1}var e=v.prototype;e.handlePick=function(a){if(a.object===this.mesh){var o=a.data.index,h=this.data._meshX[o],y=this.data._meshY[o],p=this.data._meshZ[o],x=this.data._Ys.length,s=this.data._Zs.length,u=g(h,this.data._Xs).id,c=g(y,this.data._Ys).id,T=g(p,this.data._Zs).id,k=a.index=T+s*c+s*x*u;a.traceCoordinate=[this.data._meshX[k],this.data._meshY[k],this.data._meshZ[k],this.data._value[k]];var _=this.data.hovertext||this.data.text;return Array.isArray(_)&&_[k]!==void 0?a.textLabel=_[k]:_&&(a.textLabel=_),!0}},e.update=function(a){var o=this.scene,h=o.fullSceneLayout;this.data=f(a);function y(c,T,k,_){return T.map(function(b){return c.d2l(b,0,_)*k})}var p=A(y(h.xaxis,a._meshX,o.dataScale[0],a.xcalendar),y(h.yaxis,a._meshY,o.dataScale[1],a.ycalendar),y(h.zaxis,a._meshZ,o.dataScale[2],a.zcalendar)),x=A(a._meshI,a._meshJ,a._meshK),s={positions:p,cells:x,lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,contourEnable:a.contour.show,contourColor:i(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading},u=S(a);s.vertexIntensity=a._meshIntensity,s.vertexIntensityBounds=[u.min,u.max],s.colormap=E(a),this.mesh.update(s)},e.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var r=["xyz","xzy","yxz","yzx","zxy","zyx"];function f(a){a._meshI=[],a._meshJ=[],a._meshK=[];var o=a.surface.show,h=a.spaceframe.show,y=a.surface.fill,p=a.spaceframe.fill,x=!1,s=!1,u=0,c,T,k=a._Xs,_=a._Ys,b=a._Zs,P=k.length,l=_.length,d=b.length,L=r.indexOf(a._gridFill.replace(/-/g,"").replace(/\+/g,"")),w=function(It,Rt,zt){switch(L){case 5:return zt+d*Rt+d*l*It;case 4:return zt+d*It+d*P*Rt;case 3:return Rt+l*zt+l*d*It;case 2:return Rt+l*It+l*P*zt;case 1:return It+P*zt+P*d*Rt;default:return It+P*Rt+P*l*zt}},I=a._minValues,z=a._maxValues,B=a._vMin,O=a._vMax,R,C,F,N;function V(It,Rt,zt){for(var Tt=N.length,ft=T;ft<Tt;ft++)if(It===R[ft]&&Rt===C[ft]&&zt===F[ft])return ft;return-1}function K(){T=c}function Q(){R=[],C=[],F=[],N=[],c=0,K()}function at(It,Rt,zt,Tt){return R.push(It),C.push(Rt),F.push(zt),N.push(Tt),c++,c-1}function it(It,Rt,zt){return a._meshI.push(It),a._meshJ.push(Rt),a._meshK.push(zt),u++,u-1}function q(It,Rt,zt){for(var Tt=[],ft=0;ft<It.length;ft++)Tt[ft]=(It[ft]+Rt[ft]+zt[ft])/3;return Tt}function W(It,Rt,zt){for(var Tt=[],ft=0;ft<It.length;ft++)Tt[ft]=It[ft]*(1-zt)+zt*Rt[ft];return Tt}var Z;function G(It){Z=It}function et(It,Rt){var zt=It[0],Tt=It[1],ft=It[2],ut=q(zt,Tt,ft),vt=Math.sqrt(1-Z),St=W(ut,zt,vt),Ot=W(ut,Tt,vt),Xt=W(ut,ft,vt),$t=Rt[0],de=Rt[1],Me=Rt[2];return{xyzv:[[zt,Tt,Ot],[Ot,St,zt],[Tt,ft,Xt],[Xt,Ot,Tt],[ft,zt,St],[St,Xt,ft]],abc:[[$t,de,-1],[-1,-1,$t],[de,Me,-1],[-1,-1,de],[Me,$t,-1],[-1,-1,Me]]}}function nt(It,Rt){return It==="all"||It===null?!0:It.indexOf(Rt)>-1}function X(It,Rt){return It===null?Rt:It}function Y(It,Rt,zt){K();var Tt=[Rt],ft=[zt];if(Z>=1)Tt=[Rt],ft=[zt];else if(Z>0){var ut=et(Rt,zt);Tt=ut.xyzv,ft=ut.abc}for(var vt=0;vt<Tt.length;vt++){Rt=Tt[vt],zt=ft[vt];for(var St=[],Ot=0;Ot<3;Ot++){var Xt=Rt[Ot][0],$t=Rt[Ot][1],de=Rt[Ot][2],Me=Rt[Ot][3],Fe=zt[Ot]>-1?zt[Ot]:V(Xt,$t,de);Fe>-1?St[Ot]=Fe:St[Ot]=at(Xt,$t,de,X(It,Me))}it(St[0],St[1],St[2])}}function ot(It,Rt,zt){var Tt=function(ft,ut,vt){Y(It,[Rt[ft],Rt[ut],Rt[vt]],[zt[ft],zt[ut],zt[vt]])};Tt(0,1,2),Tt(2,3,0)}function rt(It,Rt,zt){var Tt=function(ft,ut,vt){Y(It,[Rt[ft],Rt[ut],Rt[vt]],[zt[ft],zt[ut],zt[vt]])};Tt(0,1,2),Tt(3,0,1),Tt(2,3,0),Tt(1,2,3)}function ht(It,Rt,zt,Tt){var ft=It[3];ft<zt&&(ft=zt),ft>Tt&&(ft=Tt);for(var ut=(It[3]-ft)/(It[3]-Rt[3]+1e-9),vt=[],St=0;St<4;St++)vt[St]=(1-ut)*It[St]+ut*Rt[St];return vt}function pt(It,Rt,zt){return It>=Rt&&It<=zt}function yt(It){var Rt=.001*(O-B);return It>=B-Rt&&It<=O+Rt}function xt(It){for(var Rt=[],zt=0;zt<4;zt++){var Tt=It[zt];Rt.push([a._x[Tt],a._y[Tt],a._z[Tt],a._value[Tt]])}return Rt}var Ft=3;function Et(It,Rt,zt,Tt,ft,ut){ut||(ut=1),zt=[-1,-1,-1];var vt=!1,St=[pt(Rt[0][3],Tt,ft),pt(Rt[1][3],Tt,ft),pt(Rt[2][3],Tt,ft)];if(!St[0]&&!St[1]&&!St[2])return!1;var Ot=function($t,de,Me){return yt(de[0][3])&&yt(de[1][3])&&yt(de[2][3])?(Y($t,de,Me),!0):ut<Ft?Et($t,de,Me,B,O,++ut):!1};if(St[0]&&St[1]&&St[2])return Ot(It,Rt,zt)||vt;var Xt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function($t){if(St[$t[0]]&&St[$t[1]]&&!St[$t[2]]){var de=Rt[$t[0]],Me=Rt[$t[1]],Fe=Rt[$t[2]],De=ht(Fe,de,Tt,ft),Ae=ht(Fe,Me,Tt,ft);vt=Ot(It,[Ae,De,de],[-1,-1,zt[$t[0]]])||vt,vt=Ot(It,[de,Me,Ae],[zt[$t[0]],zt[$t[1]],-1])||vt,Xt=!0}}),Xt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function($t){if(St[$t[0]]&&!St[$t[1]]&&!St[$t[2]]){var de=Rt[$t[0]],Me=Rt[$t[1]],Fe=Rt[$t[2]],De=ht(Me,de,Tt,ft),Ae=ht(Fe,de,Tt,ft);vt=Ot(It,[Ae,De,de],[-1,-1,zt[$t[0]]])||vt,Xt=!0}}),vt}function mt(It,Rt,zt,Tt){var ft=!1,ut=xt(Rt),vt=[pt(ut[0][3],zt,Tt),pt(ut[1][3],zt,Tt),pt(ut[2][3],zt,Tt),pt(ut[3][3],zt,Tt)];if(!vt[0]&&!vt[1]&&!vt[2]&&!vt[3])return ft;if(vt[0]&&vt[1]&&vt[2]&&vt[3])return s&&(ft=rt(It,ut,Rt)||ft),ft;var St=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Ot){if(vt[Ot[0]]&&vt[Ot[1]]&&vt[Ot[2]]&&!vt[Ot[3]]){var Xt=ut[Ot[0]],$t=ut[Ot[1]],de=ut[Ot[2]],Me=ut[Ot[3]];if(s)ft=Y(It,[Xt,$t,de],[Rt[Ot[0]],Rt[Ot[1]],Rt[Ot[2]]])||ft;else{var Fe=ht(Me,Xt,zt,Tt),De=ht(Me,$t,zt,Tt),Ae=ht(Me,de,zt,Tt);ft=Y(null,[Fe,De,Ae],[-1,-1,-1])||ft}St=!0}}),St||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Ot){if(vt[Ot[0]]&&vt[Ot[1]]&&!vt[Ot[2]]&&!vt[Ot[3]]){var Xt=ut[Ot[0]],$t=ut[Ot[1]],de=ut[Ot[2]],Me=ut[Ot[3]],Fe=ht(de,Xt,zt,Tt),De=ht(de,$t,zt,Tt),Ae=ht(Me,$t,zt,Tt),Ve=ht(Me,Xt,zt,Tt);s?(ft=Y(It,[Xt,Ve,Fe],[Rt[Ot[0]],-1,-1])||ft,ft=Y(It,[$t,De,Ae],[Rt[Ot[1]],-1,-1])||ft):ft=ot(null,[Fe,De,Ae,Ve],[-1,-1,-1,-1])||ft,St=!0}}),St)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Ot){if(vt[Ot[0]]&&!vt[Ot[1]]&&!vt[Ot[2]]&&!vt[Ot[3]]){var Xt=ut[Ot[0]],$t=ut[Ot[1]],de=ut[Ot[2]],Me=ut[Ot[3]],Fe=ht($t,Xt,zt,Tt),De=ht(de,Xt,zt,Tt),Ae=ht(Me,Xt,zt,Tt);s?(ft=Y(It,[Xt,Fe,De],[Rt[Ot[0]],-1,-1])||ft,ft=Y(It,[Xt,De,Ae],[Rt[Ot[0]],-1,-1])||ft,ft=Y(It,[Xt,Ae,Fe],[Rt[Ot[0]],-1,-1])||ft):ft=Y(null,[Fe,De,Ae],[-1,-1,-1])||ft,St=!0}}),ft}function gt(It,Rt,zt,Tt,ft,ut,vt,St,Ot,Xt,$t){var de=!1;return x&&(nt(It,"A")&&(de=mt(null,[Rt,zt,Tt,ut],Xt,$t)||de),nt(It,"B")&&(de=mt(null,[zt,Tt,ft,Ot],Xt,$t)||de),nt(It,"C")&&(de=mt(null,[zt,ut,vt,Ot],Xt,$t)||de),nt(It,"D")&&(de=mt(null,[Tt,ut,St,Ot],Xt,$t)||de),nt(It,"E")&&(de=mt(null,[zt,Tt,ut,Ot],Xt,$t)||de)),s&&(de=mt(It,[zt,Tt,ut,Ot],Xt,$t)||de),de}function wt(It,Rt,zt,Tt,ft,ut,vt,St){return[St[0]===!0?!0:Et(It,xt([Rt,zt,Tt]),[Rt,zt,Tt],ut,vt),St[1]===!0?!0:Et(It,xt([Tt,ft,Rt]),[Tt,ft,Rt],ut,vt)]}function Pt(It,Rt,zt,Tt,ft,ut,vt,St,Ot){return St?wt(It,Rt,zt,ft,Tt,ut,vt,Ot):wt(It,zt,ft,Tt,Rt,ut,vt,Ot)}function Bt(It,Rt,zt,Tt,ft,ut,vt){var St=!1,Ot,Xt,$t,de,Me=function(){St=Et(It,[Ot,Xt,$t],[-1,-1,-1],ft,ut)||St,St=Et(It,[$t,de,Ot],[-1,-1,-1],ft,ut)||St},Fe=vt[0],De=vt[1],Ae=vt[2];return Fe&&(Ot=W(xt([w(Rt,zt-0,Tt-0)])[0],xt([w(Rt-1,zt-0,Tt-0)])[0],Fe),Xt=W(xt([w(Rt,zt-0,Tt-1)])[0],xt([w(Rt-1,zt-0,Tt-1)])[0],Fe),$t=W(xt([w(Rt,zt-1,Tt-1)])[0],xt([w(Rt-1,zt-1,Tt-1)])[0],Fe),de=W(xt([w(Rt,zt-1,Tt-0)])[0],xt([w(Rt-1,zt-1,Tt-0)])[0],Fe),Me()),De&&(Ot=W(xt([w(Rt-0,zt,Tt-0)])[0],xt([w(Rt-0,zt-1,Tt-0)])[0],De),Xt=W(xt([w(Rt-0,zt,Tt-1)])[0],xt([w(Rt-0,zt-1,Tt-1)])[0],De),$t=W(xt([w(Rt-1,zt,Tt-1)])[0],xt([w(Rt-1,zt-1,Tt-1)])[0],De),de=W(xt([w(Rt-1,zt,Tt-0)])[0],xt([w(Rt-1,zt-1,Tt-0)])[0],De),Me()),Ae&&(Ot=W(xt([w(Rt-0,zt-0,Tt)])[0],xt([w(Rt-0,zt-0,Tt-1)])[0],Ae),Xt=W(xt([w(Rt-0,zt-1,Tt)])[0],xt([w(Rt-0,zt-1,Tt-1)])[0],Ae),$t=W(xt([w(Rt-1,zt-1,Tt)])[0],xt([w(Rt-1,zt-1,Tt-1)])[0],Ae),de=W(xt([w(Rt-1,zt-0,Tt)])[0],xt([w(Rt-1,zt-0,Tt-1)])[0],Ae),Me()),St}function kt(It,Rt,zt,Tt,ft,ut,vt,St,Ot,Xt,$t,de){var Me=It;return de?(x&&It==="even"&&(Me=null),gt(Me,Rt,zt,Tt,ft,ut,vt,St,Ot,Xt,$t)):(x&&It==="odd"&&(Me=null),gt(Me,Ot,St,vt,ut,ft,Tt,zt,Rt,Xt,$t))}function jt(It,Rt,zt,Tt,ft){for(var ut=[],vt=0,St=0;St<Rt.length;St++)for(var Ot=Rt[St],Xt=1;Xt<d;Xt++)for(var $t=1;$t<l;$t++)ut.push(Pt(It,w(Ot,$t-1,Xt-1),w(Ot,$t-1,Xt),w(Ot,$t,Xt-1),w(Ot,$t,Xt),zt,Tt,(Ot+$t+Xt)%2,ft&&ft[vt]?ft[vt]:[])),vt++;return ut}function Ht(It,Rt,zt,Tt,ft){for(var ut=[],vt=0,St=0;St<Rt.length;St++)for(var Ot=Rt[St],Xt=1;Xt<P;Xt++)for(var $t=1;$t<d;$t++)ut.push(Pt(It,w(Xt-1,Ot,$t-1),w(Xt,Ot,$t-1),w(Xt-1,Ot,$t),w(Xt,Ot,$t),zt,Tt,(Xt+Ot+$t)%2,ft&&ft[vt]?ft[vt]:[])),vt++;return ut}function Vt(It,Rt,zt,Tt,ft){for(var ut=[],vt=0,St=0;St<Rt.length;St++)for(var Ot=Rt[St],Xt=1;Xt<l;Xt++)for(var $t=1;$t<P;$t++)ut.push(Pt(It,w($t-1,Xt-1,Ot),w($t-1,Xt,Ot),w($t,Xt-1,Ot),w($t,Xt,Ot),zt,Tt,($t+Xt+Ot)%2,ft&&ft[vt]?ft[vt]:[])),vt++;return ut}function ee(It,Rt,zt){for(var Tt=1;Tt<d;Tt++)for(var ft=1;ft<l;ft++)for(var ut=1;ut<P;ut++)kt(It,w(ut-1,ft-1,Tt-1),w(ut-1,ft-1,Tt),w(ut-1,ft,Tt-1),w(ut-1,ft,Tt),w(ut,ft-1,Tt-1),w(ut,ft-1,Tt),w(ut,ft,Tt-1),w(ut,ft,Tt),Rt,zt,(ut+ft+Tt)%2)}function te(It,Rt,zt){s=!0,ee(It,Rt,zt),s=!1}function ae(It,Rt,zt){x=!0,ee(It,Rt,zt),x=!1}function le(It,Rt,zt,Tt,ft,ut){for(var vt=[],St=0,Ot=0;Ot<Rt.length;Ot++)for(var Xt=Rt[Ot],$t=1;$t<d;$t++)for(var de=1;de<l;de++)vt.push(Bt(It,Xt,de,$t,zt,Tt,ft[Ot],ut&&ut[St]?ut[St]:[])),St++;return vt}function ce(It,Rt,zt,Tt,ft,ut){for(var vt=[],St=0,Ot=0;Ot<Rt.length;Ot++)for(var Xt=Rt[Ot],$t=1;$t<P;$t++)for(var de=1;de<d;de++)vt.push(Bt(It,$t,Xt,de,zt,Tt,ft[Ot],ut&&ut[St]?ut[St]:[])),St++;return vt}function pe(It,Rt,zt,Tt,ft,ut){for(var vt=[],St=0,Ot=0;Ot<Rt.length;Ot++)for(var Xt=Rt[Ot],$t=1;$t<l;$t++)for(var de=1;de<P;de++)vt.push(Bt(It,de,$t,Xt,zt,Tt,ft[Ot],ut&&ut[St]?ut[St]:[])),St++;return vt}function we(It,Rt){for(var zt=[],Tt=It;Tt<Rt;Tt++)zt.push(Tt);return zt}function ve(){for(var It=0;It<P;It++)for(var Rt=0;Rt<l;Rt++)for(var zt=0;zt<d;zt++){var Tt=w(It,Rt,zt);at(a._x[Tt],a._y[Tt],a._z[Tt],a._value[Tt])}}function Mt(){Q(),ve();var It=null;if(h&&p&&(G(p),te(It,B,O)),o&&y){G(y);for(var Rt=a.surface.pattern,zt=a.surface.count,Tt=0;Tt<zt;Tt++){var ft=zt===1?.5:Tt/(zt-1),ut=(1-ft)*B+ft*O,vt=Math.abs(ut-I),St=Math.abs(ut-z),Ot=vt>St?[I,ut]:[ut,z];ae(Rt,Ot[0],Ot[1])}}var Xt=[[Math.min(B,z),Math.max(B,z)],[Math.min(I,O),Math.max(I,O)]];["x","y","z"].forEach(function($t){for(var de=[],Me=0;Me<Xt.length;Me++){var Fe=0,De=Xt[Me][0],Ae=Xt[Me][1],Ve=a.slices[$t];if(Ve.show&&Ve.fill){G(Ve.fill);var Qe=[],Sr=[],he=[];if(Ve.locations.length)for(var je=0;je<Ve.locations.length;je++){var Re=g(Ve.locations[je],$t==="x"?k:$t==="y"?_:b);Re.distRatio===0?Qe.push(Re.id):Re.id>0&&(Sr.push(Re.id),$t==="x"?he.push([Re.distRatio,0,0]):$t==="y"?he.push([0,Re.distRatio,0]):he.push([0,0,Re.distRatio]))}else $t==="x"?Qe=we(1,P-1):$t==="y"?Qe=we(1,l-1):Qe=we(1,d-1);Sr.length>0&&($t==="x"?de[Fe]=le(It,Sr,De,Ae,he,de[Fe]):$t==="y"?de[Fe]=ce(It,Sr,De,Ae,he,de[Fe]):de[Fe]=pe(It,Sr,De,Ae,he,de[Fe]),Fe++),Qe.length>0&&($t==="x"?de[Fe]=jt(It,Qe,De,Ae,de[Fe]):$t==="y"?de[Fe]=Ht(It,Qe,De,Ae,de[Fe]):de[Fe]=Vt(It,Qe,De,Ae,de[Fe]),Fe++)}var _r=a.caps[$t];_r.show&&_r.fill&&(G(_r.fill),$t==="x"?de[Fe]=jt(It,[0,P-1],De,Ae,de[Fe]):$t==="y"?de[Fe]=Ht(It,[0,l-1],De,Ae,de[Fe]):de[Fe]=Vt(It,[0,d-1],De,Ae,de[Fe]),Fe++)}}),u===0&&Q(),a._meshX=R,a._meshY=C,a._meshZ=F,a._meshIntensity=N,a._Xs=k,a._Ys=_,a._Zs=b}return Mt(),a}function n(a,o){var h=a.glplot.gl,y=M({gl:h}),p=new v(a,y,o.uid);return y._trace=p,p.update(o),a.glplot.add(y),p}$.exports={findNearestOnAxis:g,generateIsoMeshes:f,createIsosurfaceTrace:n}},82738:function($,U,t){var M=t(71828),E=t(73972),i=t(16249),S=t(1586);function A(v,e,r,f){function n(a,o){return M.coerce(v,e,i,a,o)}g(v,e,r,f,n)}function g(v,e,r,f,n){var a=n("isomin"),o=n("isomax");o!=null&&a!==void 0&&a!==null&&a>o&&(e.isomin=null,e.isomax=null);var h=n("x"),y=n("y"),p=n("z"),x=n("value");if(!h||!h.length||!y||!y.length||!p||!p.length||!x||!x.length){e.visible=!1;return}var s=E.getComponentMethod("calendars","handleTraceDefaults");s(v,e,["x","y","z"],f),n("valuehoverformat"),["x","y","z"].forEach(function(k){n(k+"hoverformat");var _="caps."+k,b=n(_+".show");b&&n(_+".fill");var P="slices."+k,l=n(P+".show");l&&(n(P+".fill"),n(P+".locations"))});var u=n("spaceframe.show");u&&n("spaceframe.fill");var c=n("surface.show");c&&(n("surface.count"),n("surface.fill"),n("surface.pattern"));var T=n("contour.show");T&&(n("contour.color"),n("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(k){n(k)}),S(v,e,f,n,{prefix:"",cLetter:"c"}),e._length=null}$.exports={supplyDefaults:A,supplyIsoDefaults:g}},64943:function($,U,t){$.exports={attributes:t(16249),supplyDefaults:t(82738).supplyDefaults,calc:t(56959),colorbar:{min:"cmin",max:"cmax"},plot:t(22674).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:t(58547),categories:["gl3d","showLegend"],meta:{}}},2418:function($,U,t){var M=t(50693),E=t(12663).axisHoverFormat,i=t(5386).fF,S=t(54532),A=t(9012),g=t(1426).extendFlat;$.exports=g({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:i({editType:"calc"}),xhoverformat:E("x"),yhoverformat:E("y"),zhoverformat:E("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},M("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:S.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:g({},S.contours.x.show,{}),color:S.contours.x.color,width:S.contours.x.width,editType:"calc"},lightposition:{x:g({},S.lightposition.x,{dflt:1e5}),y:g({},S.lightposition.y,{dflt:1e5}),z:g({},S.lightposition.z,{dflt:0}),editType:"calc"},lighting:g({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},S.lighting),hoverinfo:g({},A.hoverinfo,{editType:"calc"}),showlegend:g({},A.showlegend,{dflt:!1})})},82932:function($,U,t){var M=t(78803);$.exports=function(E,i){i.intensity&&M(E,i,{vals:i.intensity,containerStr:"",cLetter:"c"})}},91134:function($,U,t){var M=t(9330).gl_mesh3d,E=t(9330).delaunay_triangulate,i=t(9330).alpha_shape,S=t(9330).convex_hull,A=t(81697).parseColorScale,g=t(78614),v=t(21081).extractOpts,e=t(90060);function r(x,s,u){this.scene=x,this.uid=u,this.mesh=s,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var f=r.prototype;f.handlePick=function(x){if(x.object===this.mesh){var s=x.index=x.data.index;x.data._cellCenter?x.traceCoordinate=x.data.dataCoordinate:x.traceCoordinate=[this.data.x[s],this.data.y[s],this.data.z[s]];var u=this.data.hovertext||this.data.text;return Array.isArray(u)&&u[s]!==void 0?x.textLabel=u[s]:u&&(x.textLabel=u),!0}};function n(x){for(var s=[],u=x.length,c=0;c<u;c++)s[c]=g(x[c]);return s}function a(x,s,u,c){for(var T=[],k=s.length,_=0;_<k;_++)T[_]=x.d2l(s[_],0,c)*u;return T}function o(x){for(var s=[],u=x.length,c=0;c<u;c++)s[c]=Math.round(x[c]);return s}function h(x,s){for(var u=["x","y","z"].indexOf(x),c=[],T=s.length,k=0;k<T;k++)c[k]=[s[k][(u+1)%3],s[k][(u+2)%3]];return E(c)}function y(x,s){for(var u=x.length,c=0;c<u;c++)if(x[c]<=-.5||x[c]>=s-.5)return!1;return!0}f.update=function(x){var s=this.scene,u=s.fullSceneLayout;this.data=x;var c=x.x.length,T=e(a(u.xaxis,x.x,s.dataScale[0],x.xcalendar),a(u.yaxis,x.y,s.dataScale[1],x.ycalendar),a(u.zaxis,x.z,s.dataScale[2],x.zcalendar)),k;if(x.i&&x.j&&x.k){if(x.i.length!==x.j.length||x.j.length!==x.k.length||!y(x.i,c)||!y(x.j,c)||!y(x.k,c))return;k=e(o(x.i),o(x.j),o(x.k))}else x.alphahull===0?k=S(T):x.alphahull>0?k=i(x.alphahull,T):k=h(x.delaunayaxis,T);var _={positions:T,cells:k,lightPosition:[x.lightposition.x,x.lightposition.y,x.lightposition.z],ambient:x.lighting.ambient,diffuse:x.lighting.diffuse,specular:x.lighting.specular,roughness:x.lighting.roughness,fresnel:x.lighting.fresnel,vertexNormalsEpsilon:x.lighting.vertexnormalsepsilon,faceNormalsEpsilon:x.lighting.facenormalsepsilon,opacity:x.opacity,contourEnable:x.contour.show,contourColor:g(x.contour.color).slice(0,3),contourWidth:x.contour.width,useFacetNormals:x.flatshading};if(x.intensity){var b=v(x);this.color="#fff";var P=x.intensitymode;_[P+"Intensity"]=x.intensity,_[P+"IntensityBounds"]=[b.min,b.max],_.colormap=A(x)}else x.vertexcolor?(this.color=x.vertexcolor[0],_.vertexColors=n(x.vertexcolor)):x.facecolor?(this.color=x.facecolor[0],_.cellColors=n(x.facecolor)):(this.color=x.color,_.meshColor=g(x.color));this.mesh.update(_)},f.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function p(x,s){var u=x.glplot.gl,c=M({gl:u}),T=new r(x,c,s.uid);return c._trace=T,T.update(s),x.glplot.add(c),T}$.exports=p},58669:function($,U,t){var M=t(73972),E=t(71828),i=t(1586),S=t(2418);$.exports=function(A,g,v,e){function r(h,y){return E.coerce(A,g,S,h,y)}function f(h){var y=h.map(function(p){var x=r(p);return x&&E.isArrayOrTypedArray(x)?x:null});return y.every(function(p){return p&&p.length===y[0].length})&&y}var n=f(["x","y","z"]);if(!n){g.visible=!1;return}if(f(["i","j","k"]),g.i&&(!g.j||!g.k)||g.j&&(!g.k||!g.i)||g.k&&(!g.i||!g.j)){g.visible=!1;return}var a=M.getComponentMethod("calendars","handleTraceDefaults");a(A,g,["x","y","z"],e),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(h){r(h)});var o=r("contour.show");o&&(r("contour.color"),r("contour.width")),"intensity"in A?(r("intensity"),r("intensitymode"),i(A,g,e,r,{prefix:"",cLetter:"c"})):(g.showscale=!1,"facecolor"in A?r("facecolor"):"vertexcolor"in A?r("vertexcolor"):r("color",v)),r("text"),r("hovertext"),r("hovertemplate"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),g._length=null}},21164:function($,U,t){$.exports={attributes:t(2418),supplyDefaults:t(58669),calc:t(82932),colorbar:{min:"cmin",max:"cmax"},plot:t(91134),moduleType:"trace",name:"mesh3d",basePlotModule:t(58547),categories:["gl3d","showLegend"],meta:{}}},2522:function($,U,t){var M=t(71828).extendFlat,E=t(82196),i=t(12663).axisHoverFormat,S=t(79952).P,A=t(77914),g=t(22372),v=g.INCREASING.COLOR,e=g.DECREASING.COLOR,r=E.line;function f(n){return{line:{color:M({},r.color,{dflt:n}),width:r.width,dash:S,editType:"style"},editType:"style"}}$.exports={xperiod:E.xperiod,xperiod0:E.xperiod0,xperiodalignment:E.xperiodalignment,xhoverformat:i("x"),yhoverformat:i("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:M({},r.width,{}),dash:M({},S,{}),editType:"style"},increasing:f(v),decreasing:f(e),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:M({},A.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},3485:function($,U,t){var M=t(71828),E=M._,i=t(89298),S=t(42973),A=t(50606).BADNUM;function g(f,n){var a=i.getFromId(f,n.xaxis),o=i.getFromId(f,n.yaxis),h=r(f,a,n),y=n._minDiff;n._minDiff=null;var p=n._origX;n._origX=null;var x=n._xcalc;n._xcalc=null;var s=e(f,n,p,x,o,v);return n._extremes[a._id]=i.findExtremes(a,x,{vpad:y/2}),s.length?(M.extendFlat(s[0].t,{wHover:y/2,tickLen:h}),s):[{t:{empty:!0}}]}function v(f,n,a,o){return{o:f,h:n,l:a,c:o}}function e(f,n,a,o,h,y){for(var p=h.makeCalcdata(n,"open"),x=h.makeCalcdata(n,"high"),s=h.makeCalcdata(n,"low"),u=h.makeCalcdata(n,"close"),c=Array.isArray(n.text),T=Array.isArray(n.hovertext),k=!0,_=null,b=!!n.xperiodalignment,P=[],l=0;l<o.length;l++){var d=o[l],L=p[l],w=x[l],I=s[l],z=u[l];if(d!==A&&L!==A&&w!==A&&I!==A&&z!==A){z===L?_!==null&&z!==_&&(k=z>_):k=z>L,_=z;var B=y(L,w,I,z);B.pos=d,B.yc=(L+z)/2,B.i=l,B.dir=k?"increasing":"decreasing",B.x=B.pos,B.y=[I,w],b&&(B.orig_p=a[l]),c&&(B.tx=n.text[l]),T&&(B.htx=n.hovertext[l]),P.push(B)}else P.push({pos:d,empty:!0})}return n._extremes[h._id]=i.findExtremes(h,M.concat(s,x),{padded:!0}),P.length&&(P[0].t={labels:{open:E(f,"open:")+" ",high:E(f,"high:")+" ",low:E(f,"low:")+" ",close:E(f,"close:")+" "}}),P}function r(f,n,a){var o=a._minDiff;if(!o){var h=f._fullData,y=[];o=1/0;var p;for(p=0;p<h.length;p++){var x=h[p];if(x.type==="ohlc"&&x.visible===!0&&x.xaxis===n._id){y.push(x);var s=n.makeCalcdata(x,"x");x._origX=s;var u=S(a,n,"x",s).vals;x._xcalc=u;var c=M.distinctVals(u).minDiff;c&&isFinite(c)&&(o=Math.min(o,c))}}for(o===1/0&&(o=1),p=0;p<y.length;p++)y[p]._minDiff=o}return o*a.tickwidth}$.exports={calc:g,calcCommon:e}},16169:function($,U,t){var M=t(71828),E=t(14555),i=t(73927),S=t(2522);$.exports=function(g,v,e,r){function f(a,o){return M.coerce(g,v,S,a,o)}var n=E(g,v,f,r);if(!n){v.visible=!1;return}i(g,v,r,f,{x:!0}),f("xhoverformat"),f("yhoverformat"),f("line.width"),f("line.dash"),A(g,v,f,"increasing"),A(g,v,f,"decreasing"),f("text"),f("hovertext"),f("tickwidth"),r._requestRangeslider[v.xaxis]=!0};function A(g,v,e,r){e(r+".line.color"),e(r+".line.width",v.line.width),e(r+".line.dash",v.line.dash)}},66449:function($,U,t){var M=t(89298),E=t(71828),i=t(30211),S=t(7901),A=t(71828).fillText,g=t(22372),v={increasing:g.INCREASING.SYMBOL,decreasing:g.DECREASING.SYMBOL};function e(a,o,h,y){var p=a.cd,x=p[0].trace;return x.hoverlabel.split?f(a,o,h,y):n(a,o,h,y)}function r(a,o,h,y){var p=a.cd,x=a.xa,s=p[0].trace,u=p[0].t,c=s.type,T=c==="ohlc"?"l":"min",k=c==="ohlc"?"h":"max",_,b,P=u.bPos||0,l=function(V){return V.pos+P-o},d=u.bdPos||u.tickLen,L=u.wHover,w=Math.min(1,d/Math.abs(x.r2c(x.range[1])-x.r2c(x.range[0])));_=a.maxHoverDistance-w,b=a.maxSpikeDistance-w;function I(V){var K=l(V);return i.inbox(K-L,K+L,_)}function z(V){var K=V[T],Q=V[k];return K===Q||i.inbox(K-h,Q-h,_)}function B(V){return(I(V)+z(V))/2}var O=i.getDistanceFunction(y,I,z,B);if(i.getClosest(p,O,a),a.index===!1)return null;var R=p[a.index];if(R.empty)return null;var C=R.dir,F=s[C],N=F.line.color;return S.opacity(N)&&F.line.width?a.color=N:a.color=F.fillcolor,a.x0=x.c2p(R.pos+P-d,!0),a.x1=x.c2p(R.pos+P+d,!0),a.xLabelVal=R.orig_p!==void 0?R.orig_p:R.pos,a.spikeDistance=B(R)*b/_,a.xSpike=x.c2p(R.pos,!0),a}function f(a,o,h,y){var p=a.cd,x=a.ya,s=p[0].trace,u=p[0].t,c=[],T=r(a,o,h,y);if(!T)return[];var k=T.index,_=p[k],b=_.hi||s.hoverinfo,P=b.split("+"),l=b==="all",d=l||P.indexOf("y")!==-1;if(!d)return[];for(var L=["high","open","close","low"],w={},I=0;I<L.length;I++){var z=L[I],B=s[z][T.index],O=x.c2p(B,!0),R;B in w?(R=w[B],R.yLabel+="<br>"+u.labels[z]+M.hoverLabelText(x,B,s.yhoverformat)):(R=E.extendFlat({},T),R.y0=R.y1=O,R.yLabelVal=B,R.yLabel=u.labels[z]+M.hoverLabelText(x,B,s.yhoverformat),R.name="",c.push(R),w[B]=R)}return c}function n(a,o,h,y){var p=a.cd,x=a.ya,s=p[0].trace,u=p[0].t,c=r(a,o,h,y);if(!c)return[];var T=c.index,k=p[T],_=c.index=k.i,b=k.dir;function P(B){return u.labels[B]+M.hoverLabelText(x,s[B][_],s.yhoverformat)}var l=k.hi||s.hoverinfo,d=l.split("+"),L=l==="all",w=L||d.indexOf("y")!==-1,I=L||d.indexOf("text")!==-1,z=w?[P("open"),P("high"),P("low"),P("close")+"  "+v[b]]:[];return I&&A(k,s,z),c.extraText=z.join("<br>"),c.y0=c.y1=x.c2p(k.yc,!0),[c]}$.exports={hoverPoints:e,hoverSplit:f,hoverOnPoints:n}},54186:function($,U,t){$.exports={moduleType:"trace",name:"ohlc",basePlotModule:t(93612),categories:["cartesian","svg","showLegend"],meta:{},attributes:t(2522),supplyDefaults:t(16169),calc:t(3485).calc,plot:t(72314),style:t(53101),hoverPoints:t(66449).hoverPoints,selectPoints:t(67324)}},14555:function($,U,t){var M=t(73972),E=t(71828);$.exports=function(i,S,A,g){var v=A("x"),e=A("open"),r=A("high"),f=A("low"),n=A("close");A("hoverlabel.split");var a=M.getComponentMethod("calendars","handleTraceDefaults");if(a(i,S,["x"],g),!!(e&&r&&f&&n)){var o=Math.min(e.length,r.length,f.length,n.length);return v&&(o=Math.min(o,E.minRowLength(v))),S._length=o,o}}},72314:function($,U,t){var M=t(39898),E=t(71828);$.exports=function(i,S,A,g){var v=S.yaxis,e=S.xaxis,r=!!e.rangebreaks;E.makeTraceGroups(g,A,"trace ohlc").each(function(f){var n=M.select(this),a=f[0],o=a.t,h=a.trace;if(h.visible!==!0||o.empty){n.remove();return}var y=o.tickLen,p=n.selectAll("path").data(E.identity);p.enter().append("path"),p.exit().remove(),p.attr("d",function(x){if(x.empty)return"M0,0Z";var s=e.c2p(x.pos-y,!0),u=e.c2p(x.pos+y,!0),c=r?(s+u)/2:e.c2p(x.pos,!0),T=v.c2p(x.o,!0),k=v.c2p(x.h,!0),_=v.c2p(x.l,!0),b=v.c2p(x.c,!0);return"M"+s+","+T+"H"+c+"M"+c+","+k+"V"+_+"M"+u+","+b+"H"+c})})}},67324:function($){$.exports=function(U,t){var M=U.cd,E=U.xaxis,i=U.yaxis,S=[],A,g=M[0].t.bPos||0;if(t===!1)for(A=0;A<M.length;A++)M[A].selected=0;else for(A=0;A<M.length;A++){var v=M[A];t.contains([E.c2p(v.pos+g),i.c2p(v.yc)],null,v.i,U)?(S.push({pointNumber:v.i,x:E.c2d(v.pos),y:i.c2d(v.yc)}),v.selected=1):v.selected=0}return S}},53101:function($,U,t){var M=t(39898),E=t(91424),i=t(7901);$.exports=function(S,A,g){var v=g||M.select(S).selectAll("g.ohlclayer").selectAll("g.trace");v.style("opacity",function(e){return e[0].trace.opacity}),v.each(function(e){var r=e[0].trace;M.select(this).selectAll("path").each(function(f){if(!f.empty){var n=r[f.dir].line;M.select(this).style("fill","none").call(i.stroke,n.color).call(E.dashLine,n.dash,n.width).style("opacity",r.selectedpoints&&!f.selected?.3:1)}})})}},99506:function($,U,t){var M=t(1426).extendFlat,E=t(9012),i=t(41940),S=t(50693),A=t(5386).fF,g=t(27670).Y,v=M({editType:"calc"},S("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:A({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});$.exports={domain:g({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:M({},E.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:A({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:i({editType:"calc"}),tickfont:i({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:v,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},27677:function($,U,t){var M=t(27659).a0,E=t(45784),i="parcats";U.name=i,U.plot=function(S,A,g,v){var e=M(S.calcdata,i);if(e.length){var r=e[0];E(S,r,g,v)}},U.clean=function(S,A,g,v){var e=v._has&&v._has("parcats"),r=A._has&&A._has("parcats");e&&!r&&v._paperdiv.selectAll(".parcats").remove()}},28699:function($,U,t){var M=t(28984).wrap,E=t(52075).hasColorscale,i=t(78803),S=t(75744),A=t(91424),g=t(71828),v=t(92770);$.exports=function(s,u){var c=g.filterVisible(u.dimensions);if(c.length===0)return[];var T=c.map(function(it){var q;if(it.categoryorder==="trace")q=null;else if(it.categoryorder==="array")q=it.categoryarray;else{q=S(it.values);for(var W=!0,Z=0;Z<q.length;Z++)if(!v(q[Z])){W=!1;break}q.sort(W?g.sorterAsc:void 0),it.categoryorder==="category descending"&&(q=q.reverse())}return h(it.values,q)}),k,_,b;g.isArrayOrTypedArray(u.counts)?k=u.counts:k=[u.counts],y(c),c.forEach(function(it,q){p(it,T[q])});var P=u.line,l;P?(E(u,"line")&&i(s,u,{vals:u.line.color,containerStr:"line",cLetter:"c"}),l=A.tryColorscale(P)):l=g.identity;function d(it){var q,W;return g.isArrayOrTypedArray(P.color)?(q=P.color[it%P.color.length],W=q):q=P.color,{color:l(q),rawColor:W}}var L=c[0].values.length,w={},I=T.map(function(it){return it.inds});b=0;var z,B;for(z=0;z<L;z++){var O=[];for(B=0;B<I.length;B++)O.push(I[B][z]);_=k[z%k.length],b+=_;var R=d(z),C=O+"-"+R.rawColor;w[C]===void 0&&(w[C]=a(O,R.color,R.rawColor)),o(w[C],z,_)}var F=c.map(function(it,q){return r(q,it._index,it._displayindex,it.label,b)});for(z=0;z<L;z++)for(_=k[z%k.length],B=0;B<F.length;B++){var N=F[B].containerInd,V=T[B].inds[z],K=F[B].categories;if(K[V]===void 0){var Q=u.dimensions[N]._categoryarray[V],at=u.dimensions[N]._ticktext[V];K[V]=f(B,V,Q,at)}n(K[V],z,_)}return M(e(F,w,b))};function e(s,u,c){var T=s.map(function(k){return k.categories.length}).reduce(function(k,_){return Math.max(k,_)});return{dimensions:s,paths:u,trace:void 0,maxCats:T,count:c}}function r(s,u,c,T,k){return{dimensionInd:s,containerInd:u,displayInd:c,dimensionLabel:T,count:k,categories:[],dragX:null}}function f(s,u,c,T){return{dimensionInd:s,categoryInd:u,categoryValue:c,displayInd:u,categoryLabel:T,valueInds:[],count:0,dragY:null}}function n(s,u,c){s.valueInds.push(u),s.count+=c}function a(s,u,c){return{categoryInds:s,color:u,rawColor:c,valueInds:[],count:0}}function o(s,u,c){s.valueInds.push(u),s.count+=c}function h(s,u){u==null?u=[]:u=u.map(function(d){return d});var c={},T={},k=[];u.forEach(function(d,L){c[d]=0,T[d]=L});for(var _=0;_<s.length;_++){var b=s[_],P;c[b]===void 0?(c[b]=1,P=u.push(b)-1,T[b]=P):(c[b]++,P=T[b]),k.push(P)}var l=u.map(function(d){return c[d]});return{uniqueValues:u,uniqueCounts:l,inds:k}}function y(s){var u=s.map(function(T){return T.displayindex}),c;if(x(u))for(c=0;c<s.length;c++)s[c]._displayindex=s[c].displayindex;else for(c=0;c<s.length;c++)s[c]._displayindex=c}function p(s,u){s._categoryarray=u.uniqueValues,s.ticktext===null||s.ticktext===void 0?s._ticktext=[]:s._ticktext=s.ticktext.slice();for(var c=s._ticktext.length;c<u.uniqueValues.length;c++)s._ticktext.push(u.uniqueValues[c])}function x(s){for(var u=new Array(s.length),c=0;c<s.length;c++){if(s[c]<0||s[c]>=s.length||u[s[c]]!==void 0)return!1;u[s[c]]=!0}return!0}},14647:function($,U,t){var M=t(71828),E=t(52075).hasColorscale,i=t(1586),S=t(27670).c,A=t(85501),g=t(99506),v=t(94397);function e(f,n,a,o,h){h("line.shape"),h("line.hovertemplate");var y=h("line.color",o.colorway[0]);if(E(f,"line")&&M.isArrayOrTypedArray(y)){if(y.length)return h("line.colorscale"),i(f,n,o,h,{prefix:"line.",cLetter:"c"}),y.length;n.line.color=a}return 1/0}function r(f,n){function a(u,c){return M.coerce(f,n,g.dimensions,u,c)}var o=a("values"),h=a("visible");if(o&&o.length||(h=n.visible=!1),h){a("label"),a("displayindex",n._index);var y=f.categoryarray,p=Array.isArray(y)&&y.length>0,x;p&&(x="array");var s=a("categoryorder",x);s==="array"?(a("categoryarray"),a("ticktext")):(delete f.categoryarray,delete f.ticktext),!p&&s==="array"&&(n.categoryorder="trace")}}$.exports=function(f,n,a,o){function h(u,c){return M.coerce(f,n,g,u,c)}var y=A(f,n,{name:"dimensions",handleItemDefaults:r}),p=e(f,n,a,o,h);S(n,o,h),(!Array.isArray(y)||!y.length)&&(n.visible=!1),v(n,y,"values",p),h("hoveron"),h("hovertemplate"),h("arrangement"),h("bundlecolors"),h("sortpaths"),h("counts");var x={family:o.font.family,size:Math.round(o.font.size),color:o.font.color};M.coerceFont(h,"labelfont",x);var s={family:o.font.family,size:Math.round(o.font.size/1.2),color:o.font.color};M.coerceFont(h,"tickfont",s)}},94873:function($,U,t){$.exports={attributes:t(99506),supplyDefaults:t(14647),calc:t(28699),plot:t(45784),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:t(27677),categories:["noOpacity"],meta:{}}},45460:function($,U,t){var M=t(39898),E=t(81684).k4,i=t(72391),S=t(30211),A=t(71828),g=A.strTranslate,v=t(91424),e=t(84267),r=t(63893);function f(G,et,nt,X){var Y=et._context.staticPlot,ot=G.map(at.bind(0,et,nt)),rt=X.selectAll("g.parcatslayer").data([null]);rt.enter().append("g").attr("class","parcatslayer").style("pointer-events",Y?"none":"all");var ht=rt.selectAll("g.trace.parcats").data(ot,n),pt=ht.enter().append("g").attr("class","trace parcats");ht.attr("transform",function(jt){return g(jt.x,jt.y)}),pt.append("g").attr("class","paths");var yt=ht.select("g.paths"),xt=yt.selectAll("path.path").data(function(jt){return jt.paths},n);xt.attr("fill",function(jt){return jt.model.color});var Ft=xt.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(jt){return jt.model.color}).attr("fill-opacity",0);u(Ft),xt.attr("d",function(jt){return jt.svgD}),Ft.empty()||xt.sort(o),xt.exit().remove(),xt.on("mouseover",h).on("mouseout",y).on("click",s),pt.append("g").attr("class","dimensions");var Et=ht.select("g.dimensions"),mt=Et.selectAll("g.dimension").data(function(jt){return jt.dimensions},n);mt.enter().append("g").attr("class","dimension"),mt.attr("transform",function(jt){return g(jt.x,0)}),mt.exit().remove();var gt=mt.selectAll("g.category").data(function(jt){return jt.categories},n),wt=gt.enter().append("g").attr("class","category");gt.attr("transform",function(jt){return g(0,jt.y)}),wt.append("rect").attr("class","catrect").attr("pointer-events","none"),gt.select("rect.catrect").attr("fill","none").attr("width",function(jt){return jt.width}).attr("height",function(jt){return jt.height}),k(wt);var Pt=gt.selectAll("rect.bandrect").data(function(jt){return jt.bands},n);Pt.each(function(){A.raiseToTop(this)}),Pt.attr("fill",function(jt){return jt.color});var Bt=Pt.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(jt){return jt.color}).attr("fill-opacity",0);Pt.attr("fill",function(jt){return jt.color}).attr("width",function(jt){return jt.width}).attr("height",function(jt){return jt.height}).attr("y",function(jt){return jt.y}).attr("cursor",function(jt){return jt.parcatsViewModel.arrangement==="fixed"?"default":jt.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),b(Bt),Pt.exit().remove(),wt.append("text").attr("class","catlabel").attr("pointer-events","none");var kt=et._fullLayout.paper_bgcolor;gt.select("text.catlabel").attr("text-anchor",function(jt){return a(jt)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",r.makeTextShadow(kt)).style("fill","rgb(0, 0, 0)").attr("x",function(jt){return a(jt)?jt.width+5:-5}).attr("y",function(jt){return jt.height/2}).text(function(jt){return jt.model.categoryLabel}).each(function(jt){v.font(M.select(this),jt.parcatsViewModel.categorylabelfont),r.convertToTspans(M.select(this),et)}),wt.append("text").attr("class","dimlabel"),gt.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(jt){return jt.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(jt){return jt.width/2}).attr("y",-5).text(function(jt,Ht){return Ht===0?jt.parcatsViewModel.model.dimensions[jt.model.dimensionInd].dimensionLabel:null}).each(function(jt){v.font(M.select(this),jt.parcatsViewModel.labelfont)}),gt.selectAll("rect.bandrect").on("mouseover",O).on("mouseout",R),gt.exit().remove(),mt.call(M.behavior.drag().origin(function(jt){return{x:jt.x,y:0}}).on("dragstart",C).on("drag",F).on("dragend",N)),ht.each(function(jt){jt.traceSelection=M.select(this),jt.pathSelection=M.select(this).selectAll("g.paths").selectAll("path.path"),jt.dimensionSelection=M.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ht.exit().remove()}$.exports=function(G,et,nt,X){f(nt,G,X,et)};function n(G){return G.key}function a(G){var et=G.parcatsViewModel.dimensions.length,nt=G.parcatsViewModel.dimensions[et-1].model.dimensionInd;return G.model.dimensionInd===nt}function o(G,et){return G.model.rawColor>et.model.rawColor?1:G.model.rawColor<et.model.rawColor?-1:0}function h(G){if(!G.parcatsViewModel.dragDimension&&G.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){A.raiseToTop(this),c(M.select(this));var et=p(G),nt=x(G);if(G.parcatsViewModel.graphDiv.emit("plotly_hover",{points:et,event:M.event,constraints:nt}),G.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var X=M.mouse(this)[0],Y=G.parcatsViewModel.graphDiv,ot=G.parcatsViewModel.trace,rt=Y._fullLayout,ht=rt._paperdiv.node().getBoundingClientRect(),pt=G.parcatsViewModel.graphDiv.getBoundingClientRect(),yt,xt,Ft;for(Ft=0;Ft<G.leftXs.length-1;Ft++)if(G.leftXs[Ft]+G.dimWidths[Ft]-2<=X&&X<=G.leftXs[Ft+1]+2){var Et=G.parcatsViewModel.dimensions[Ft],mt=G.parcatsViewModel.dimensions[Ft+1];yt=(Et.x+Et.width+mt.x)/2,xt=(G.topYs[Ft]+G.topYs[Ft+1]+G.height)/2;break}var gt=G.parcatsViewModel.x+yt,wt=G.parcatsViewModel.y+xt,Pt=e.mostReadable(G.model.color,["black","white"]),Bt=G.model.count,kt=Bt/G.parcatsViewModel.model.count,jt={countLabel:Bt,probabilityLabel:kt.toFixed(3)},Ht=[];G.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ht.push(["Count:",jt.countLabel].join(" ")),G.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ht.push(["P:",jt.probabilityLabel].join(" "));var Vt=Ht.join("<br>"),ee=M.mouse(Y)[0];S.loneHover({trace:ot,x:gt-ht.left+pt.left,y:wt-ht.top+pt.top,text:Vt,color:G.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Pt,idealAlign:ee<gt?"right":"left",hovertemplate:(ot.line||{}).hovertemplate,hovertemplateLabels:jt,eventData:[{data:ot._input,fullData:ot,count:Bt,probability:kt}]},{container:rt._hoverlayer.node(),outerContainer:rt._paper.node(),gd:Y})}}}function y(G){if(!G.parcatsViewModel.dragDimension&&(u(M.select(this)),S.loneUnhover(G.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),G.parcatsViewModel.pathSelection.sort(o),G.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var et=p(G),nt=x(G);G.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:et,event:M.event,constraints:nt})}}function p(G){for(var et=[],nt=V(G.parcatsViewModel),X=0;X<G.model.valueInds.length;X++){var Y=G.model.valueInds[X];et.push({curveNumber:nt,pointNumber:Y})}return et}function x(G){for(var et={},nt=G.parcatsViewModel.model.dimensions,X=0;X<nt.length;X++){var Y=nt[X],ot=Y.categories[G.model.categoryInds[X]];et[Y.containerInd]=ot.categoryValue}return G.model.rawColor!==void 0&&(et.color=G.model.rawColor),et}function s(G){if(G.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var et=p(G),nt=x(G);G.parcatsViewModel.graphDiv.emit("plotly_click",{points:et,event:M.event,constraints:nt})}}function u(G){G.attr("fill",function(et){return et.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function c(G){G.attr("fill-opacity",.8).attr("stroke",function(et){return e.mostReadable(et.model.color,["black","white"])}).attr("stroke-width",.3)}function T(G){G.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function k(G){G.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function _(G){G.attr("stroke","black").attr("stroke-width",1.5)}function b(G){G.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function P(G){var et=G.parcatsViewModel.pathSelection,nt=G.categoryViewModel.model.dimensionInd,X=G.categoryViewModel.model.categoryInd;return et.filter(function(Y){return Y.model.categoryInds[nt]===X&&Y.model.color===G.color})}function l(G){var et=M.select(G.parentNode).selectAll("rect.bandrect");et.each(function(nt){var X=P(nt);c(X),X.each(function(){A.raiseToTop(this)})}),T(M.select(G.parentNode))}function d(G){var et=M.select(G).datum(),nt=P(et);c(nt),nt.each(function(){A.raiseToTop(this)}),M.select(G.parentNode).selectAll("rect.bandrect").filter(function(X){return X.color===et.color}).each(function(){A.raiseToTop(this),_(M.select(this))})}function L(G,et,nt){var X=M.select(G).datum(),Y=X.categoryViewModel.model,ot=X.parcatsViewModel.graphDiv,rt=M.select(G.parentNode).selectAll("rect.bandrect"),ht=[];rt.each(function(yt){var xt=P(yt);xt.each(function(Ft){Array.prototype.push.apply(ht,p(Ft))})});var pt={};pt[Y.dimensionInd]=Y.categoryValue,ot.emit(et,{points:ht,event:nt,constraints:pt})}function w(G,et,nt){var X=M.select(G).datum(),Y=X.categoryViewModel.model,ot=X.parcatsViewModel.graphDiv,rt=P(X),ht=[];rt.each(function(yt){Array.prototype.push.apply(ht,p(yt))});var pt={};pt[Y.dimensionInd]=Y.categoryValue,X.rawColor!==void 0&&(pt.color=X.rawColor),ot.emit(et,{points:ht,event:nt,constraints:pt})}function I(G,et,nt){G._fullLayout._calcInverseTransform(G);var X=G._fullLayout._invScaleX,Y=G._fullLayout._invScaleY,ot=M.select(nt.parentNode).select("rect.catrect"),rt=ot.node().getBoundingClientRect(),ht=ot.datum(),pt=ht.parcatsViewModel,yt=pt.model.dimensions[ht.model.dimensionInd],xt=pt.trace,Ft=rt.top+rt.height/2,Et,mt;pt.dimensions.length>1&&yt.displayInd===pt.dimensions.length-1?(Et=rt.left,mt="left"):(Et=rt.left+rt.width,mt="right");var gt=ht.model.count,wt=ht.model.categoryLabel,Pt=gt/ht.parcatsViewModel.model.count,Bt={countLabel:gt,categoryLabel:wt,probabilityLabel:Pt.toFixed(3)},kt=[];ht.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&kt.push(["Count:",Bt.countLabel].join(" ")),ht.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&kt.push(["P("+Bt.categoryLabel+"):",Bt.probabilityLabel].join(" "));var jt=kt.join("<br>");return{trace:xt,x:X*(Et-et.left),y:Y*(Ft-et.top),text:jt,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:mt,hovertemplate:xt.hovertemplate,hovertemplateLabels:Bt,eventData:[{data:xt._input,fullData:xt,count:gt,category:wt,probability:Pt}]}}function z(G,et,nt){var X=[];return M.select(nt.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var Y=this;X.push(I(G,et,Y))}),X}function B(G,et,nt){G._fullLayout._calcInverseTransform(G);var X=G._fullLayout._invScaleX,Y=G._fullLayout._invScaleY,ot=nt.getBoundingClientRect(),rt=M.select(nt).datum(),ht=rt.categoryViewModel,pt=ht.parcatsViewModel,yt=pt.model.dimensions[ht.model.dimensionInd],xt=pt.trace,Ft=ot.y+ot.height/2,Et,mt;pt.dimensions.length>1&&yt.displayInd===pt.dimensions.length-1?(Et=ot.left,mt="left"):(Et=ot.left+ot.width,mt="right");var gt=ht.model.categoryLabel,wt=rt.parcatsViewModel.model.count,Pt=0;rt.categoryViewModel.bands.forEach(function(ce){ce.color===rt.color&&(Pt+=ce.count)});var Bt=ht.model.count,kt=0;pt.pathSelection.each(function(ce){ce.model.color===rt.color&&(kt+=ce.model.count)});var jt=Pt/wt,Ht=Pt/kt,Vt=Pt/Bt,ee={countLabel:wt,categoryLabel:gt,probabilityLabel:jt.toFixed(3)},te=[];ht.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&te.push(["Count:",ee.countLabel].join(" ")),ht.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(te.push("P(color \u2229 "+gt+"): "+ee.probabilityLabel),te.push("P("+gt+" | color): "+Ht.toFixed(3)),te.push("P(color | "+gt+"): "+Vt.toFixed(3)));var ae=te.join("<br>"),le=e.mostReadable(rt.color,["black","white"]);return{trace:xt,x:X*(Et-et.left),y:Y*(Ft-et.top),text:ae,color:rt.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:le,fontSize:10,idealAlign:mt,hovertemplate:xt.hovertemplate,hovertemplateLabels:ee,eventData:[{data:xt._input,fullData:xt,category:gt,count:wt,probability:jt,categorycount:Bt,colorcount:kt,bandcolorcount:Pt}]}}function O(G){if(!G.parcatsViewModel.dragDimension&&G.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var et=M.mouse(this)[1];if(et<-1)return;var nt=G.parcatsViewModel.graphDiv,X=nt._fullLayout,Y=X._paperdiv.node().getBoundingClientRect(),ot=G.parcatsViewModel.hoveron,rt=this;if(ot==="color"?(d(rt),w(rt,"plotly_hover",M.event)):(l(rt),L(rt,"plotly_hover",M.event)),G.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var ht;ot==="category"?ht=I(nt,Y,rt):ot==="color"?ht=B(nt,Y,rt):ot==="dimension"&&(ht=z(nt,Y,rt)),ht&&S.loneHover(ht,{container:X._hoverlayer.node(),outerContainer:X._paper.node(),gd:nt})}}}function R(G){var et=G.parcatsViewModel;if(!et.dragDimension&&(u(et.pathSelection),k(et.dimensionSelection.selectAll("g.category")),b(et.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),S.loneUnhover(et.graphDiv._fullLayout._hoverlayer.node()),et.pathSelection.sort(o),et.hoverinfoItems.indexOf("skip")===-1)){var nt=G.parcatsViewModel.hoveron,X=this;nt==="color"?w(X,"plotly_unhover",M.event):L(X,"plotly_unhover",M.event)}}function C(G){G.parcatsViewModel.arrangement!=="fixed"&&(G.dragDimensionDisplayInd=G.model.displayInd,G.initialDragDimensionDisplayInds=G.parcatsViewModel.model.dimensions.map(function(et){return et.displayInd}),G.dragHasMoved=!1,G.dragCategoryDisplayInd=null,M.select(this).selectAll("g.category").select("rect.catrect").each(function(et){var nt=M.mouse(this)[0],X=M.mouse(this)[1];-2<=nt&&nt<=et.width+2&&-2<=X&&X<=et.height+2&&(G.dragCategoryDisplayInd=et.model.displayInd,G.initialDragCategoryDisplayInds=G.model.categories.map(function(Y){return Y.displayInd}),et.model.dragY=et.y,A.raiseToTop(this.parentNode),M.select(this.parentNode).selectAll("rect.bandrect").each(function(Y){Y.y<X&&X<=Y.y+Y.height&&(G.potentialClickBand=this)}))}),G.parcatsViewModel.dragDimension=G,S.loneUnhover(G.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function F(G){if(G.parcatsViewModel.arrangement!=="fixed"&&(G.dragHasMoved=!0,G.dragDimensionDisplayInd!==null)){var et=G.dragDimensionDisplayInd,nt=et-1,X=et+1,Y=G.parcatsViewModel.dimensions[et];if(G.dragCategoryDisplayInd!==null){var ot=Y.categories[G.dragCategoryDisplayInd];ot.model.dragY+=M.event.dy;var rt=ot.model.dragY,ht=ot.model.displayInd,pt=Y.categories,yt=pt[ht-1],xt=pt[ht+1];yt!==void 0&&rt<yt.y+yt.height/2&&(ot.model.displayInd=yt.model.displayInd,yt.model.displayInd=ht),xt!==void 0&&rt+ot.height>xt.y+xt.height/2&&(ot.model.displayInd=xt.model.displayInd,xt.model.displayInd=ht),G.dragCategoryDisplayInd=ot.model.displayInd}if(G.dragCategoryDisplayInd===null||G.parcatsViewModel.arrangement==="freeform"){Y.model.dragX=M.event.x;var Ft=G.parcatsViewModel.dimensions[nt],Et=G.parcatsViewModel.dimensions[X];Ft!==void 0&&Y.model.dragX<Ft.x+Ft.width&&(Y.model.displayInd=Ft.model.displayInd,Ft.model.displayInd=et),Et!==void 0&&Y.model.dragX+Y.width>Et.x&&(Y.model.displayInd=Et.model.displayInd,Et.model.displayInd=G.dragDimensionDisplayInd),G.dragDimensionDisplayInd=Y.model.displayInd}W(G.parcatsViewModel),q(G.parcatsViewModel),Q(G.parcatsViewModel),K(G.parcatsViewModel)}}function N(G){if(G.parcatsViewModel.arrangement!=="fixed"&&G.dragDimensionDisplayInd!==null){M.select(this).selectAll("text").attr("font-weight","normal");var et={},nt=V(G.parcatsViewModel),X=G.parcatsViewModel.model.dimensions.map(function(Et){return Et.displayInd}),Y=G.initialDragDimensionDisplayInds.some(function(Et,mt){return Et!==X[mt]});Y&&X.forEach(function(Et,mt){var gt=G.parcatsViewModel.model.dimensions[mt].containerInd;et["dimensions["+gt+"].displayindex"]=Et});var ot=!1;if(G.dragCategoryDisplayInd!==null){var rt=G.model.categories.map(function(Et){return Et.displayInd});if(ot=G.initialDragCategoryDisplayInds.some(function(Et,mt){return Et!==rt[mt]}),ot){var ht=G.model.categories.slice().sort(function(Et,mt){return Et.displayInd-mt.displayInd}),pt=ht.map(function(Et){return Et.categoryValue}),yt=ht.map(function(Et){return Et.categoryLabel});et["dimensions["+G.model.containerInd+"].categoryarray"]=[pt],et["dimensions["+G.model.containerInd+"].ticktext"]=[yt],et["dimensions["+G.model.containerInd+"].categoryorder"]="array"}}if(G.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!G.dragHasMoved&&G.potentialClickBand&&(G.parcatsViewModel.hoveron==="color"?w(G.potentialClickBand,"plotly_click",M.event.sourceEvent):L(G.potentialClickBand,"plotly_click",M.event.sourceEvent)),G.model.dragX=null,G.dragCategoryDisplayInd!==null){var xt=G.parcatsViewModel.dimensions[G.dragDimensionDisplayInd].categories[G.dragCategoryDisplayInd];xt.model.dragY=null,G.dragCategoryDisplayInd=null}G.dragDimensionDisplayInd=null,G.parcatsViewModel.dragDimension=null,G.dragHasMoved=null,G.potentialClickBand=null,W(G.parcatsViewModel),q(G.parcatsViewModel);var Ft=M.transition().duration(300).ease("cubic-in-out");Ft.each(function(){Q(G.parcatsViewModel,!0),K(G.parcatsViewModel,!0)}).each("end",function(){(Y||ot)&&i.restyle(G.parcatsViewModel.graphDiv,et,[nt])})}}function V(G){for(var et,nt=G.graphDiv._fullData,X=0;X<nt.length;X++)if(G.key===nt[X].uid){et=X;break}return et}function K(G,et){et===void 0&&(et=!1);function nt(X){return et?X.transition():X}G.pathSelection.data(function(X){return X.paths},n),nt(G.pathSelection).attr("d",function(X){return X.svgD})}function Q(G,et){et===void 0&&(et=!1);function nt(pt){return et?pt.transition():pt}G.dimensionSelection.data(function(pt){return pt.dimensions},n);var X=G.dimensionSelection.selectAll("g.category").data(function(pt){return pt.categories},n);nt(G.dimensionSelection).attr("transform",function(pt){return g(pt.x,0)}),nt(X).attr("transform",function(pt){return g(0,pt.y)});var Y=X.select(".dimlabel");Y.text(function(pt,yt){return yt===0?pt.parcatsViewModel.model.dimensions[pt.model.dimensionInd].dimensionLabel:null});var ot=X.select(".catlabel");ot.attr("text-anchor",function(pt){return a(pt)?"start":"end"}).attr("x",function(pt){return a(pt)?pt.width+5:-5}).each(function(pt){var yt,xt;a(pt)?(yt=pt.width+5,xt="start"):(yt=-5,xt="end"),M.select(this).selectAll("tspan").attr("x",yt).attr("text-anchor",xt)});var rt=X.selectAll("rect.bandrect").data(function(pt){return pt.bands},n),ht=rt.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(pt){return pt.color}).attr("fill-opacity",0);rt.attr("fill",function(pt){return pt.color}).attr("width",function(pt){return pt.width}).attr("height",function(pt){return pt.height}).attr("y",function(pt){return pt.y}),b(ht),rt.each(function(){A.raiseToTop(this)}),rt.exit().remove()}function at(G,et,nt){var X=nt[0],Y=et.margin||{l:80,r:80,t:100,b:80},ot=X.trace,rt=ot.domain,ht=et.width,pt=et.height,yt=Math.floor(ht*(rt.x[1]-rt.x[0])),xt=Math.floor(pt*(rt.y[1]-rt.y[0])),Ft=rt.x[0]*ht+Y.l,Et=et.height-rt.y[1]*et.height+Y.t,mt=ot.line.shape,gt;ot.hoverinfo==="all"?gt=["count","probability"]:gt=(ot.hoverinfo||"").split("+");var wt={trace:ot,key:ot.uid,model:X,x:Ft,y:Et,width:yt,height:xt,hoveron:ot.hoveron,hoverinfoItems:gt,arrangement:ot.arrangement,bundlecolors:ot.bundlecolors,sortpaths:ot.sortpaths,labelfont:ot.labelfont,categorylabelfont:ot.tickfont,pathShape:mt,dragDimension:null,margin:Y,paths:[],dimensions:[],graphDiv:G,traceSelection:null,pathSelection:null,dimensionSelection:null};return X.dimensions&&(W(wt),q(wt)),wt}function it(G,et,nt,X,Y){var ot=[],rt=[],ht,pt;for(pt=0;pt<nt.length-1;pt++)ht=E(nt[pt]+G[pt],G[pt+1]),ot.push(ht(Y)),rt.push(ht(1-Y));var yt="M "+G[0]+","+et[0];for(yt+="l"+nt[0]+",0 ",pt=1;pt<nt.length;pt++)yt+="C"+ot[pt-1]+","+et[pt-1]+" "+rt[pt-1]+","+et[pt]+" "+G[pt]+","+et[pt],yt+="l"+nt[pt]+",0 ";for(yt+="l0,"+X+" ",yt+="l -"+nt[nt.length-1]+",0 ",pt=nt.length-2;pt>=0;pt--)yt+="C"+rt[pt]+","+(et[pt+1]+X)+" "+ot[pt]+","+(et[pt]+X)+" "+(G[pt]+nt[pt])+","+(et[pt]+X),yt+="l-"+nt[pt]+",0 ";return yt+="Z",yt}function q(G){var et=G.dimensions,nt=G.model,X=et.map(function(ve){return ve.categories.map(function(Mt){return Mt.y})}),Y=G.model.dimensions.map(function(ve){return ve.categories.map(function(Mt){return Mt.displayInd})}),ot=G.model.dimensions.map(function(ve){return ve.displayInd}),rt=G.dimensions.map(function(ve){return ve.model.dimensionInd}),ht=et.map(function(ve){return ve.x}),pt=et.map(function(ve){return ve.width}),yt=[];for(var xt in nt.paths)nt.paths.hasOwnProperty(xt)&&yt.push(nt.paths[xt]);function Ft(ve){var Mt=ve.categoryInds.map(function(Rt,zt){return Y[zt][Rt]}),It=rt.map(function(Rt){return Mt[Rt]});return It}yt.sort(function(ve,Mt){var It=Ft(ve),Rt=Ft(Mt);return G.sortpaths==="backward"&&(It.reverse(),Rt.reverse()),It.push(ve.valueInds[0]),Rt.push(Mt.valueInds[0]),G.bundlecolors&&(It.unshift(ve.rawColor),Rt.unshift(Mt.rawColor)),It<Rt?-1:It>Rt?1:0});for(var Et=new Array(yt.length),mt=et[0].model.count,gt=et[0].categories.map(function(ve){return ve.height}).reduce(function(ve,Mt){return ve+Mt}),wt=0;wt<yt.length;wt++){var Pt=yt[wt],Bt;mt>0?Bt=gt*(Pt.count/mt):Bt=0;for(var kt=new Array(X.length),jt=0;jt<Pt.categoryInds.length;jt++){var Ht=Pt.categoryInds[jt],Vt=Y[jt][Ht],ee=ot[jt];kt[ee]=X[ee][Vt],X[ee][Vt]+=Bt;var te=G.dimensions[ee].categories[Vt],ae=te.bands.length,le=te.bands[ae-1];if(le===void 0||Pt.rawColor!==le.rawColor){var ce=le===void 0?0:le.y+le.height;te.bands.push({key:ce,color:Pt.color,rawColor:Pt.rawColor,height:Bt,width:te.width,count:Pt.count,y:ce,categoryViewModel:te,parcatsViewModel:G})}else{var pe=te.bands[ae-1];pe.height+=Bt,pe.count+=Pt.count}}var we;G.pathShape==="hspline"?we=it(ht,kt,pt,Bt,.5):we=it(ht,kt,pt,Bt,0),Et[wt]={key:Pt.valueInds[0],model:Pt,height:Bt,leftXs:ht,topYs:kt,dimWidths:pt,svgD:we,parcatsViewModel:G}}G.paths=Et}function W(G){var et=G.model.dimensions.map(function(rt){return{displayInd:rt.displayInd,dimensionInd:rt.dimensionInd}});et.sort(function(rt,ht){return rt.displayInd-ht.displayInd});var nt=[];for(var X in et){var Y=et[X].dimensionInd,ot=G.model.dimensions[Y];nt.push(Z(G,ot))}G.dimensions=nt}function Z(G,et){var nt=40,X=16,Y=G.model.dimensions.length,ot=et.displayInd,rt,ht,pt;Y>1?rt=(G.width-2*nt-X)/(Y-1):rt=0,ht=nt,pt=ht+rt*ot;var yt=[],xt=G.model.maxCats,Ft=et.categories.length,Et=8,mt=et.count,gt=G.height-Et*(xt-1),wt,Pt,Bt,kt,jt,Ht=(xt-Ft)*Et/2,Vt=et.categories.map(function(ee){return{displayInd:ee.displayInd,categoryInd:ee.categoryInd}});for(Vt.sort(function(ee,te){return ee.displayInd-te.displayInd}),jt=0;jt<Ft;jt++)kt=Vt[jt].categoryInd,Pt=et.categories[kt],mt>0?wt=Pt.count/mt*gt:wt=0,Bt={key:Pt.valueInds[0],model:Pt,width:X,height:wt,y:Pt.dragY!==null?Pt.dragY:Ht,bands:[],parcatsViewModel:G},Ht=Ht+wt+Et,yt.push(Bt);return{key:et.dimensionInd,x:et.dragX!==null?et.dragX:pt,y:0,width:X,model:et,categories:yt,parcatsViewModel:G,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}},45784:function($,U,t){var M=t(45460);$.exports=function(E,i,S,A){var g=E._fullLayout,v=g._paper,e=g._size;M(E,v,i,{width:e.w,height:e.h,margin:{t:e.t,r:e.r,b:e.b,l:e.l}},S,A)}},73362:function($,U,t){var M=t(50693),E=t(13838),i=t(41940),S=t(27670).Y,A=t(1426).extendFlat,g=t(44467).templatedArray;$.exports={domain:S({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:i({editType:"plot"}),tickfont:i({editType:"plot"}),rangefont:i({editType:"plot"}),dimensions:g("dimension",{label:{valType:"string",editType:"plot"},tickvals:A({},E.tickvals,{editType:"plot"}),ticktext:A({},E.ticktext,{editType:"plot"}),tickformat:A({},E.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:A({editType:"calc"},M("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},57920:function($,U,t){var M=t(25706),E=t(39898),i=t(28984).keyFun,S=t(28984).repeat,A=t(71828).sorterAsc,g=t(71828).strTranslate,v=M.bar.snapRatio;function e(N,V){return N*(1-v)+V*v}var r=M.bar.snapClose;function f(N,V){return N*(1-r)+V*r}function n(N,V,K,Q){if(a(K,Q))return K;var at=N?-1:1,it=0,q=V.length-1;if(at<0){var W=it;it=q,q=W}for(var Z=V[it],G=Z,et=it;at*et<at*q;et+=at){var nt=et+at,X=V[nt];if(at*K<at*f(Z,X))return e(Z,G);if(at*K<at*X||nt===q)return e(X,Z);G=Z,Z=X}}function a(N,V){for(var K=0;K<V.length;K++)if(N>=V[K][0]&&N<=V[K][1])return!0;return!1}function o(N){N.attr("x",-M.bar.captureWidth/2).attr("width",M.bar.captureWidth)}function h(N){N.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function y(N){if(!N.brush.filterSpecified)return"0,"+N.height;for(var V=p(N.brush.filter.getConsolidated(),N.height),K=[0],Q,at,it,q=V.length?V[0][0]:null,W=0;W<V.length;W++)Q=V[W],at=Q[1]-Q[0],K.push(q),K.push(at),it=W+1,it<V.length&&(q=V[it][0]-Q[1]);return K.push(N.height),K}function p(N,V){return N.map(function(K){return K.map(function(Q){return Math.max(0,Q*V)}).sort(A)})}function x(N,V){var K=M.bar.handleHeight;if(!(V>N[1]+K||V<N[0]-K))return V>=.9*N[1]+.1*N[0]?"n":V<=.9*N[0]+.1*N[1]?"s":"ns"}function s(){E.select(document.body).style("cursor",null)}function u(N){N.attr("stroke-dasharray",y)}function c(N,V){var K=E.select(N).selectAll(".highlight, .highlight-shadow"),Q=V?K.transition().duration(M.bar.snapDuration).each("end",V):K;u(Q)}function T(N,V){var K=N.brush,Q=K.filterSpecified,at=NaN,it={},q;if(Q){var W=N.height,Z=K.filter.getConsolidated(),G=p(Z,W),et=NaN,nt=NaN,X=NaN;for(q=0;q<=G.length;q++){var Y=G[q];if(Y&&Y[0]<=V&&V<=Y[1]){et=q;break}else if(nt=q?q-1:NaN,Y&&Y[0]>V){X=q;break}}if(at=et,isNaN(at)&&(isNaN(nt)||isNaN(X)?at=isNaN(nt)?X:nt:at=V-G[nt][1]<G[X][0]-V?nt:X),!isNaN(at)){var ot=G[at],rt=x(ot,V);rt&&(it.interval=Z[at],it.intervalPix=ot,it.region=rt)}}if(N.ordinal&&!it.region){var ht=N.unitTickvals,pt=N.unitToPaddedPx.invert(V);for(q=0;q<ht.length;q++){var yt=[ht[Math.max(q-1,0)]*.25+ht[q]*.75,ht[Math.min(q+1,ht.length-1)]*.25+ht[q]*.75];if(pt>=yt[0]&&pt<=yt[1]){it.clickableOrdinalRange=yt;break}}}return it}function k(N,V){E.event.sourceEvent.stopPropagation();var K=V.height-E.mouse(N)[1]-2*M.verticalPadding,Q=V.unitToPaddedPx.invert(K),at=V.brush,it=T(V,K),q=it.interval,W=at.svgBrush;if(W.wasDragged=!1,W.grabbingBar=it.region==="ns",W.grabbingBar){var Z=q.map(V.unitToPaddedPx);W.grabPoint=K-Z[0]-M.verticalPadding,W.barLength=Z[1]-Z[0]}W.clickableOrdinalRange=it.clickableOrdinalRange,W.stayingIntervals=V.multiselect&&at.filterSpecified?at.filter.getConsolidated():[],q&&(W.stayingIntervals=W.stayingIntervals.filter(function(G){return G[0]!==q[0]&&G[1]!==q[1]})),W.startExtent=it.region?q[it.region==="s"?1:0]:Q,V.parent.inBrushDrag=!0,W.brushStartCallback()}function _(N,V){E.event.sourceEvent.stopPropagation();var K=V.height-E.mouse(N)[1]-2*M.verticalPadding,Q=V.brush.svgBrush;Q.wasDragged=!0,Q._dragging=!0,Q.grabbingBar?Q.newExtent=[K-Q.grabPoint,K+Q.barLength-Q.grabPoint].map(V.unitToPaddedPx.invert):Q.newExtent=[Q.startExtent,V.unitToPaddedPx.invert(K)].sort(A),V.brush.filterSpecified=!0,Q.extent=Q.stayingIntervals.concat([Q.newExtent]),Q.brushCallback(V),c(N.parentNode)}function b(N,V){var K=V.brush,Q=K.filter,at=K.svgBrush;at._dragging||(P(N,V),_(N,V),V.brush.svgBrush.wasDragged=!1),at._dragging=!1;var it=E.event;it.sourceEvent.stopPropagation();var q=at.grabbingBar;if(at.grabbingBar=!1,at.grabLocation=void 0,V.parent.inBrushDrag=!1,s(),!at.wasDragged){at.wasDragged=void 0,at.clickableOrdinalRange?K.filterSpecified&&V.multiselect?at.extent.push(at.clickableOrdinalRange):(at.extent=[at.clickableOrdinalRange],K.filterSpecified=!0):q?(at.extent=at.stayingIntervals,at.extent.length===0&&z(K)):z(K),at.brushCallback(V),c(N.parentNode),at.brushEndCallback(K.filterSpecified?Q.getConsolidated():[]);return}var W=function(){Q.set(Q.getConsolidated())};if(V.ordinal){var Z=V.unitTickvals;Z[Z.length-1]<Z[0]&&Z.reverse(),at.newExtent=[n(0,Z,at.newExtent[0],at.stayingIntervals),n(1,Z,at.newExtent[1],at.stayingIntervals)];var G=at.newExtent[1]>at.newExtent[0];at.extent=at.stayingIntervals.concat(G?[at.newExtent]:[]),at.extent.length||z(K),at.brushCallback(V),G?c(N.parentNode,W):(W(),c(N.parentNode))}else W();at.brushEndCallback(K.filterSpecified?Q.getConsolidated():[])}function P(N,V){var K=V.height-E.mouse(N)[1]-2*M.verticalPadding,Q=T(V,K),at="crosshair";Q.clickableOrdinalRange?at="pointer":Q.region&&(at=Q.region+"-resize"),E.select(document.body).style("cursor",at)}function l(N){N.on("mousemove",function(V){E.event.preventDefault(),V.parent.inBrushDrag||P(this,V)}).on("mouseleave",function(V){V.parent.inBrushDrag||s()}).call(E.behavior.drag().on("dragstart",function(V){k(this,V)}).on("drag",function(V){_(this,V)}).on("dragend",function(V){b(this,V)}))}function d(N,V){return N[0]-V[0]}function L(N,V,K){var Q=K._context.staticPlot,at=N.selectAll(".background").data(S);at.enter().append("rect").classed("background",!0).call(o).call(h).style("pointer-events",Q?"none":"auto").attr("transform",g(0,M.verticalPadding)),at.call(l).attr("height",function(W){return W.height-M.verticalPadding});var it=N.selectAll(".highlight-shadow").data(S);it.enter().append("line").classed("highlight-shadow",!0).attr("x",-M.bar.width/2).attr("stroke-width",M.bar.width+M.bar.strokeWidth).attr("stroke",V).attr("opacity",M.bar.strokeOpacity).attr("stroke-linecap","butt"),it.attr("y1",function(W){return W.height}).call(u);var q=N.selectAll(".highlight").data(S);q.enter().append("line").classed("highlight",!0).attr("x",-M.bar.width/2).attr("stroke-width",M.bar.width-M.bar.strokeWidth).attr("stroke",M.bar.fillColor).attr("opacity",M.bar.fillOpacity).attr("stroke-linecap","butt"),q.attr("y1",function(W){return W.height}).call(u)}function w(N,V,K){var Q=N.selectAll("."+M.cn.axisBrush).data(S,i);Q.enter().append("g").classed(M.cn.axisBrush,!0),L(Q,V,K)}function I(N){return N.svgBrush.extent.map(function(V){return V.slice()})}function z(N){N.filterSpecified=!1,N.svgBrush.extent=[[-1/0,1/0]]}function B(N){return function(V){var K=V.brush,Q=I(K),at=Q.slice();K.filter.set(at),N()}}function O(N){for(var V=N.slice(),K=[],Q,at=V.shift();at;){for(Q=at.slice();(at=V.shift())&&at[0]<=Q[1];)Q[1]=Math.max(Q[1],at[1]);K.push(Q)}return K.length===1&&K[0][0]>K[0][1]&&(K=[]),K}function R(){var N=[],V,K;return{set:function(Q){N=Q.map(function(at){return at.slice().sort(A)}).sort(d),N.length===1&&N[0][0]===-1/0&&N[0][1]===1/0&&(N=[[0,-1]]),V=O(N),K=N.reduce(function(at,it){return[Math.min(at[0],it[0]),Math.max(at[1],it[1])]},[1/0,-1/0])},get:function(){return N.slice()},getConsolidated:function(){return V},getBounds:function(){return K}}}function C(N,V,K,Q,at,it){var q=R();return q.set(K),{filter:q,filterSpecified:V,svgBrush:{extent:[],brushStartCallback:Q,brushCallback:B(at),brushEndCallback:it}}}function F(N,V){if(Array.isArray(N[0])?(N=N.map(function(Q){return Q.sort(A)}),V.multiselect?N=O(N.sort(d)):N=[N[0]]):N=[N.sort(A)],V.tickvals){var K=V.tickvals.slice().sort(A);if(N=N.map(function(Q){var at=[n(0,K,Q[0],[]),n(1,K,Q[1],[])];if(at[1]>at[0])return at}).filter(function(Q){return Q}),!N.length)return}return N.length>1?N:N[0]}$.exports={makeBrush:C,ensureAxisBrush:w,cleanRanges:F}},71791:function($,U,t){$.exports={attributes:t(73362),supplyDefaults:t(3633),calc:t(24639),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:t(49351),categories:["gl","regl","noOpacity","noHover"],meta:{}}},49351:function($,U,t){var M=t(39898),E=t(27659).a0,i=t(21341),S=t(77922);U.name="parcoords",U.plot=function(A){var g=E(A.calcdata,"parcoords")[0];g.length&&i(A,g)},U.clean=function(A,g,v,e){var r=e._has&&e._has("parcoords"),f=g._has&&g._has("parcoords");r&&!f&&(e._paperdiv.selectAll(".parcoords").remove(),e._glimages.selectAll("*").remove())},U.toSVG=function(A){var g=A._fullLayout._glimages,v=M.select(A).selectAll(".svg-container"),e=v.filter(function(f,n){return n===v.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function r(){var f=this,n=f.toDataURL("image/png"),a=g.append("svg:image");a.attr({xmlns:S.svg,"xlink:href":n,preserveAspectRatio:"none",x:0,y:0,width:f.style.width,height:f.style.height})}e.each(r),window.setTimeout(function(){M.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},24639:function($,U,t){var M=t(71828).isArrayOrTypedArray,E=t(21081),i=t(28984).wrap;$.exports=function(A,g){var v,e;return E.hasColorscale(g,"line")&&M(g.line.color)?(v=g.line.color,e=E.extractOpts(g.line).colorscale,E.calc(A,g,{vals:v,containerStr:"line",cLetter:"c"})):(v=S(g._length),e=[[0,g.line.color],[1,g.line.color]]),i({lineColor:v,cscale:e})};function S(A){for(var g=new Array(A),v=0;v<A;v++)g[v]=.5;return g}},25706:function($){$.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},3633:function($,U,t){var M=t(71828),E=t(52075).hasColorscale,i=t(1586),S=t(27670).c,A=t(85501),g=t(89298),v=t(73362),e=t(57920),r=t(25706).maxDimensionCount,f=t(94397);function n(o,h,y,p,x){var s=x("line.color",y);if(E(o,"line")&&M.isArrayOrTypedArray(s)){if(s.length)return x("line.colorscale"),i(o,h,p,x,{prefix:"line.",cLetter:"c"}),s.length;h.line.color=y}return 1/0}function a(o,h,y,p){function x(k,_){return M.coerce(o,h,v.dimensions,k,_)}var s=x("values"),u=x("visible");if(s&&s.length||(u=h.visible=!1),u){x("label"),x("tickvals"),x("ticktext"),x("tickformat");var c=x("range");h._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:c},g.setConvert(h._ax,p.layout),x("multiselect");var T=x("constraintrange");T&&(h.constraintrange=e.cleanRanges(T,h))}}$.exports=function(o,h,y,p){function x(k,_){return M.coerce(o,h,v,k,_)}var s=o.dimensions;Array.isArray(s)&&s.length>r&&(M.log("parcoords traces support up to "+r+" dimensions at the moment"),s.splice(r));var u=A(o,h,{name:"dimensions",layout:p,handleItemDefaults:a}),c=n(o,h,y,p,x);S(h,p,x),(!Array.isArray(u)||!u.length)&&(h.visible=!1),f(h,u,"values",c);var T={family:p.font.family,size:Math.round(p.font.size/1.2),color:p.font.color};M.coerceFont(x,"labelfont",T),M.coerceFont(x,"tickfont",T),M.coerceFont(x,"rangefont",T),x("labelangle"),x("labelside"),x("unselected.line.color"),x("unselected.line.opacity")}},1602:function($,U,t){var M=t(71828).isTypedArray;U.convertTypedArray=function(E){return M(E)?Array.prototype.slice.call(E):E},U.isOrdinal=function(E){return!!E.tickvals},U.isVisible=function(E){return E.visible||!("visible"in E)}},67618:function($,U,t){var M=t(71791);M.plot=t(21341),$.exports=M},83398:function($,U,t){var M=t(56068),E=M([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),i=M([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),S=t(25706).maxDimensionCount,A=t(71828),g=1e-6,v=2048,e=new Uint8Array(4),r=new Uint8Array(4),f={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function n(P){P.read({x:0,y:0,width:1,height:1,data:e})}function a(P,l,d,L,w){var I=P._gl;I.enable(I.SCISSOR_TEST),I.scissor(l,d,L,w),P.clear({color:[0,0,0,0],depth:1})}function o(P,l,d,L,w,I){var z=I.key;function B(O){var R=Math.min(L,w-O*L);O===0&&(window.cancelAnimationFrame(d.currentRafs[z]),delete d.currentRafs[z],a(P,I.scissorX,I.scissorY,I.scissorWidth,I.viewBoxSize[1])),!d.clearOnly&&(I.count=2*R,I.offset=2*O*L,l(I),O*L+R<w&&(d.currentRafs[z]=window.requestAnimationFrame(function(){B(O+1)})),d.drawCompleted=!1)}d.drawCompleted||(n(P),d.drawCompleted=!0),B(0)}function h(P){return Math.max(g,Math.min(1-g,P))}function y(P,l){for(var d=new Array(256),L=0;L<256;L++)d[L]=P(L/255).concat(l);return d}function p(P,l){return(P>>>8*l)%256/255}function x(P,l,d){for(var L=new Array(P*(S+4)),w=0,I=0;I<P;I++){for(var z=0;z<S;z++)L[w++]=z<l.length?l[z].paddedUnitValues[I]:.5;L[w++]=p(I,2),L[w++]=p(I,1),L[w++]=p(I,0),L[w++]=h(d[I])}return L}function s(P,l,d){for(var L=new Array(l*8),w=0,I=0;I<l;I++)for(var z=0;z<2;z++)for(var B=0;B<4;B++){var O=P*4+B,R=d[I*64+O];O===63&&z===0&&(R*=-1),L[w++]=R}return L}function u(P){var l="0"+P;return l.substr(l.length-2)}function c(P){return P<S?"p"+u(P+1)+"_"+u(P+4):"colors"}function T(P,l,d){for(var L=0;L<=S;L+=4)P[c(L)](s(L/4,l,d))}function k(P){for(var l={},d=0;d<=S;d+=4)l[c(d)]=P.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return l}function _(P,l,d,L,w,I,z,B,O,R,C,F,N,V){for(var K=[[],[]],Q=0;Q<64;Q++)K[0][Q]=Q===w?1:0,K[1][Q]=Q===I?1:0;z*=V,B*=V,O*=V,R*=V;var at=P.lines.canvasOverdrag*V,it=P.domain,q=P.canvasWidth*V,W=P.canvasHeight*V,Z=P.pad.l*V,G=P.pad.b*V,et=P.layoutHeight*V,nt=P.layoutWidth*V,X=P.deselectedLines.color,Y=P.deselectedLines.opacity,ot=A.extendFlat({key:C,resolution:[q,W],viewBoxPos:[z+at,B],viewBoxSize:[O,R],i0:w,i1:I,dim0A:K[0].slice(0,16),dim0B:K[0].slice(16,32),dim0C:K[0].slice(32,48),dim0D:K[0].slice(48,64),dim1A:K[1].slice(0,16),dim1B:K[1].slice(16,32),dim1C:K[1].slice(32,48),dim1D:K[1].slice(48,64),drwLayer:F,contextColor:[X[0]/255,X[1]/255,X[2]/255,Y!=="auto"?X[3]*Y:Math.max(1/255,Math.pow(1/P.lines.color.length,1/3))],scissorX:(L===l?0:z+at)+(Z-at)+nt*it.x[0],scissorWidth:(L===d?q-z+at:O+.5)+(L===l?z+at:0),scissorY:B+G+et*it.y[0],scissorHeight:R,viewportX:Z-at+nt*it.x[0],viewportY:G+et*it.y[0],viewportWidth:q,viewportHeight:W},N);return ot}function b(P){var l=v-1,d=Math.max(0,Math.floor(P[0]*l),0),L=Math.min(l,Math.ceil(P[1]*l),l);return[Math.min(d,L),Math.max(d,L)]}$.exports=function(P,l){var d=l.context,L=l.pick,w=l.regl,I=w._gl,z=I.getParameter(I.ALIASED_LINE_WIDTH_RANGE),B=Math.max(z[0],Math.min(z[1],l.viewModel.plotGlPixelRatio)),O={currentRafs:{},drawCompleted:!0,clearOnly:!1},R,C,F,N,V=k(w),K,Q=w.texture(f),at=[];q(l);var it=w({profile:!1,blend:{enable:d,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!d,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:w.prop("scissorX"),y:w.prop("scissorY"),width:w.prop("scissorWidth"),height:w.prop("scissorHeight")}},viewport:{x:w.prop("viewportX"),y:w.prop("viewportY"),width:w.prop("viewportWidth"),height:w.prop("viewportHeight")},dither:!1,vert:E,frag:i,primitive:"lines",lineWidth:B,attributes:V,uniforms:{resolution:w.prop("resolution"),viewBoxPos:w.prop("viewBoxPos"),viewBoxSize:w.prop("viewBoxSize"),dim0A:w.prop("dim0A"),dim1A:w.prop("dim1A"),dim0B:w.prop("dim0B"),dim1B:w.prop("dim1B"),dim0C:w.prop("dim0C"),dim1C:w.prop("dim1C"),dim0D:w.prop("dim0D"),dim1D:w.prop("dim1D"),loA:w.prop("loA"),hiA:w.prop("hiA"),loB:w.prop("loB"),hiB:w.prop("hiB"),loC:w.prop("loC"),hiC:w.prop("hiC"),loD:w.prop("loD"),hiD:w.prop("hiD"),palette:Q,contextColor:w.prop("contextColor"),maskTexture:w.prop("maskTexture"),drwLayer:w.prop("drwLayer"),maskHeight:w.prop("maskHeight")},offset:w.prop("offset"),count:w.prop("count")});function q(X){R=X.model,C=X.viewModel,F=C.dimensions.slice(),N=F[0]?F[0].values.length:0;var Y=R.lines,ot=L?Y.color.map(function(ht,pt){return pt/Y.color.length}):Y.color,rt=x(N,F,ot);T(V,N,rt),!d&&!L&&(Q=w.texture(A.extendFlat({data:y(R.unitToColor,255)},f)))}function W(X){var Y,ot,rt,ht=[[],[]];for(rt=0;rt<64;rt++){var pt=!X&&rt<F.length?F[rt].brush.filter.getBounds():[-1/0,1/0];ht[0][rt]=pt[0],ht[1][rt]=pt[1]}var yt=v*8,xt=new Array(yt);for(Y=0;Y<yt;Y++)xt[Y]=255;if(!X)for(Y=0;Y<F.length;Y++){var Ft=Y%8,Et=(Y-Ft)/8,mt=Math.pow(2,Ft),gt=F[Y],wt=gt.brush.filter.get();if(!(wt.length<2)){var Pt=b(wt[0])[1];for(ot=1;ot<wt.length;ot++){var Bt=b(wt[ot]);for(rt=Pt+1;rt<Bt[0];rt++)xt[rt*8+Et]&=~mt;Pt=Math.max(Pt,Bt[1])}}}var kt={shape:[8,v],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:xt};return K?K(kt):K=w.texture(kt),{maskTexture:K,maskHeight:v,loA:ht[0].slice(0,16),loB:ht[0].slice(16,32),loC:ht[0].slice(32,48),loD:ht[0].slice(48,64),hiA:ht[1].slice(0,16),hiB:ht[1].slice(16,32),hiC:ht[1].slice(32,48),hiD:ht[1].slice(48,64)}}function Z(X,Y,ot){var rt=X.length,ht,pt,yt,xt=1/0,Ft=-1/0;for(ht=0;ht<rt;ht++)X[ht].dim0.canvasX<xt&&(xt=X[ht].dim0.canvasX,pt=ht),X[ht].dim1.canvasX>Ft&&(Ft=X[ht].dim1.canvasX,yt=ht);rt===0&&a(w,0,0,R.canvasWidth,R.canvasHeight);var Et=W(d);for(ht=0;ht<rt;ht++){var mt=X[ht],gt=mt.dim0.crossfilterDimensionIndex,wt=mt.dim1.crossfilterDimensionIndex,Pt=mt.canvasX,Bt=mt.canvasY,kt=Pt+mt.panelSizeX,jt=mt.plotGlPixelRatio;if(Y||!at[gt]||at[gt][0]!==Pt||at[gt][1]!==kt){at[gt]=[Pt,kt];var Ht=_(R,pt,yt,ht,gt,wt,Pt,Bt,mt.panelSizeX,mt.panelSizeY,mt.dim0.crossfilterDimensionIndex,d?0:L?2:1,Et,jt);O.clearOnly=ot;var Vt=Y?R.lines.blockLineCount:N;o(w,it,O,Vt,N,Ht)}}}function G(X,Y){return w.read({x:X,y:Y,width:1,height:1,data:r}),r}function et(X,Y,ot,rt){var ht=new Uint8Array(4*ot*rt);return w.read({x:X,y:Y,width:ot,height:rt,data:ht}),ht}function nt(){P.style["pointer-events"]="none",Q.destroy(),K&&K.destroy();for(var X in V)V[X].destroy()}return{render:Z,readPixel:G,readPixels:et,destroy:nt,update:q}}},94397:function($){$.exports=function(U,t,M,E){E||(E=1/0);var i,S;for(i=0;i<t.length;i++)S=t[i],S.visible&&(E=Math.min(E,S[M].length));for(E===1/0&&(E=0),U._length=E,i=0;i<t.length;i++)S=t[i],S.visible&&(S._length=E);return E}},17171:function($,U,t){var M=t(39898),E=t(71828),i=E.numberFormat,S=t(36652),A=t(89298),g=E.strRotate,v=E.strTranslate,e=t(63893),r=t(91424),f=t(21081),n=t(28984),a=n.keyFun,o=n.repeat,h=n.unwrap,y=t(1602),p=t(25706),x=t(57920),s=t(83398);function u(K,Q,at){return E.aggNums(K,null,Q,at)}function c(K,Q){return k(u(Math.min,K,Q),u(Math.max,K,Q))}function T(K){var Q=K.range;return Q?k(Q[0],Q[1]):c(K.values,K._length)}function k(K,Q){return(isNaN(K)||!isFinite(K))&&(K=0),(isNaN(Q)||!isFinite(Q))&&(Q=0),K===Q&&(K===0?(K-=1,Q+=1):(K*=.9,Q*=1.1)),[K,Q]}function _(K,Q){return Q?function(at,it){var q=Q[it];return q??K(at)}:K}function b(K,Q,at,it,q){var W=T(at);return it?M.scale.ordinal().domain(it.map(_(i(at.tickformat),q))).range(it.map(function(Z){var G=(Z-W[0])/(W[1]-W[0]);return K-Q+G*(2*Q-K)})):M.scale.linear().domain(W).range([K-Q,Q])}function P(K,Q){return M.scale.linear().range([Q,K-Q])}function l(K,Q){return M.scale.linear().domain(T(K)).range([Q,1-Q])}function d(K){if(K.tickvals){var Q=T(K);return M.scale.ordinal().domain(K.tickvals).range(K.tickvals.map(function(at){return(at-Q[0])/(Q[1]-Q[0])}))}}function L(K){var Q=K.map(function(W){return W[0]}),at=K.map(function(W){var Z=S(W[1]);return M.rgb("rgb("+Z[0]+","+Z[1]+","+Z[2]+")")}),it=function(W){return function(Z){return Z[W]}},q="rgb".split("").map(function(W){return M.scale.linear().clamp(!0).domain(Q).range(at.map(it(W)))});return function(W){return q.map(function(Z){return Z(W)})}}function w(K){return K.dimensions.some(function(Q){return Q.brush.filterSpecified})}function I(K,Q,at){var it=h(Q),q=it.trace,W=y.convertTypedArray(it.lineColor),Z=q.line,G={color:S(q.unselected.line.color),opacity:q.unselected.line.opacity},et=f.extractOpts(Z),nt=et.reversescale?f.flipScale(it.cscale):it.cscale,X=q.domain,Y=q.dimensions,ot=K.width,rt=q.labelangle,ht=q.labelside,pt=q.labelfont,yt=q.tickfont,xt=q.rangefont,Ft=E.extendDeepNoArrays({},Z,{color:W.map(M.scale.linear().domain(T({values:W,range:[et.min,et.max],_length:q._length}))),blockLineCount:p.blockLineCount,canvasOverdrag:p.overdrag*p.canvasPixelRatio}),Et=Math.floor(ot*(X.x[1]-X.x[0])),mt=Math.floor(K.height*(X.y[1]-X.y[0])),gt=K.margin||{l:80,r:80,t:100,b:80},wt=Et,Pt=mt;return{key:at,colCount:Y.filter(y.isVisible).length,dimensions:Y,tickDistance:p.tickDistance,unitToColor:L(nt),lines:Ft,deselectedLines:G,labelAngle:rt,labelSide:ht,labelFont:pt,tickFont:yt,rangeFont:xt,layoutWidth:ot,layoutHeight:K.height,domain:X,translateX:X.x[0]*ot,translateY:K.height-X.y[1]*K.height,pad:gt,canvasWidth:wt*p.canvasPixelRatio+2*Ft.canvasOverdrag,canvasHeight:Pt*p.canvasPixelRatio,width:wt,height:Pt,canvasPixelRatio:p.canvasPixelRatio}}function z(K,Q,at){var it=at.width,q=at.height,W=at.dimensions,Z=at.canvasPixelRatio,G=function(ot){return it*ot/Math.max(1,at.colCount-1)},et=p.verticalPadding/q,nt=P(q,p.verticalPadding),X={key:at.key,xScale:G,model:at,inBrushDrag:!1},Y={};return X.dimensions=W.filter(y.isVisible).map(function(ot,rt){var ht=l(ot,et),pt=Y[ot.label];Y[ot.label]=(pt||0)+1;var yt=ot.label+(pt?"__"+pt:""),xt=ot.constraintrange,Ft=xt&&xt.length;Ft&&!Array.isArray(xt[0])&&(xt=[xt]);var Et=Ft?xt.map(function(ee){return ee.map(ht)}):[[-1/0,1/0]],mt=function(){var ee=X;ee.focusLayer&&ee.focusLayer.render(ee.panels,!0);var te=w(ee);!K.contextShown()&&te?(ee.contextLayer&&ee.contextLayer.render(ee.panels,!0),K.contextShown(!0)):K.contextShown()&&!te&&(ee.contextLayer&&ee.contextLayer.render(ee.panels,!0,!0),K.contextShown(!1))},gt=ot.values;gt.length>ot._length&&(gt=gt.slice(0,ot._length));var wt=ot.tickvals,Pt;function Bt(ee,te){return{val:ee,text:Pt[te]}}function kt(ee,te){return ee.val-te.val}if(Array.isArray(wt)&&wt.length){Pt=ot.ticktext,!Array.isArray(Pt)||!Pt.length?Pt=wt.map(i(ot.tickformat)):Pt.length>wt.length?Pt=Pt.slice(0,wt.length):wt.length>Pt.length&&(wt=wt.slice(0,Pt.length));for(var jt=1;jt<wt.length;jt++)if(wt[jt]<wt[jt-1]){for(var Ht=wt.map(Bt).sort(kt),Vt=0;Vt<wt.length;Vt++)wt[Vt]=Ht[Vt].val,Pt[Vt]=Ht[Vt].text;break}}else wt=void 0;return gt=y.convertTypedArray(gt),{key:yt,label:ot.label,tickFormat:ot.tickformat,tickvals:wt,ticktext:Pt,ordinal:y.isOrdinal(ot),multiselect:ot.multiselect,xIndex:rt,crossfilterDimensionIndex:rt,visibleIndex:ot._index,height:q,values:gt,paddedUnitValues:gt.map(ht),unitTickvals:wt&&wt.map(ht),xScale:G,x:G(rt),canvasX:G(rt)*Z,unitToPaddedPx:nt,domainScale:b(q,p.verticalPadding,ot,wt,Pt),ordinalScale:d(ot),parent:X,model:at,brush:x.makeBrush(K,Ft,Et,function(){K.linePickActive(!1)},mt,function(ee){if(X.focusLayer.render(X.panels,!0),X.pickLayer&&X.pickLayer.render(X.panels,!0),K.linePickActive(!0),Q&&Q.filterChanged){var te=ht.invert,ae=ee.map(function(le){return le.map(te).sort(E.sorterAsc)}).sort(function(le,ce){return le[0]-ce[0]});Q.filterChanged(X.key,ot._index,ae)}})}}),X}function B(K){K.classed(p.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function O(){var K=!0,Q=!1;return{linePickActive:function(at){return arguments.length?K=!!at:K},contextShown:function(at){return arguments.length?Q=!!at:Q}}}function R(K,Q){var at=Q==="top"?1:-1,it=K*Math.PI/180,q=Math.sin(it),W=Math.cos(it);return{dir:at,dx:q,dy:W,degrees:K}}function C(K,Q,at){for(var it=Q.panels||(Q.panels=[]),q=K.data(),W=0;W<q.length-1;W++){var Z=it[W]||(it[W]={}),G=q[W],et=q[W+1];Z.dim0=G,Z.dim1=et,Z.canvasX=G.canvasX,Z.panelSizeX=et.canvasX-G.canvasX,Z.panelSizeY=Q.model.canvasHeight,Z.y=0,Z.canvasY=0,Z.plotGlPixelRatio=at}}function F(K){for(var Q=0;Q<K.length;Q++)for(var at=0;at<K[Q].length;at++)for(var it=K[Q][at].trace,q=it.dimensions,W=0;W<q.length;W++){var Z=q[W].values,G=q[W]._ax;G&&(G.range?G.range=k(G.range[0],G.range[1]):G.range=c(Z,it._length),G.dtick||(G.dtick=.01*(Math.abs(G.range[1]-G.range[0])||1)),G.tickformat=q[W].tickformat,A.calcTicks(G),G.cleanRange())}}function N(K,Q){return A.tickText(K._ax,Q,!1).text}function V(K,Q){if(K.ordinal)return"";var at=K.domainScale.domain(),it=at[Q?at.length-1:0];return N(K.model.dimensions[K.visibleIndex],it)}$.exports=function(K,Q,at,it){var q=K._context.staticPlot,W=K._fullLayout,Z=W._toppaper,G=W._glcontainer,et=K._context.plotGlPixelRatio,nt=K._fullLayout.paper_bgcolor;F(Q);var X=O(),Y=Q.filter(function(Ht){return h(Ht).trace.visible}).map(I.bind(0,at)).map(z.bind(0,X,it));G.each(function(Ht,Vt){return E.extendFlat(Ht,Y[Vt])});var ot=G.selectAll(".gl-canvas").each(function(Ht){Ht.viewModel=Y[0],Ht.viewModel.plotGlPixelRatio=et,Ht.viewModel.paperColor=nt,Ht.model=Ht.viewModel?Ht.viewModel.model:null}),rt=null,ht=ot.filter(function(Ht){return Ht.pick});ht.style("pointer-events",q?"none":"auto").on("mousemove",function(Ht){if(X.linePickActive()&&Ht.lineLayer&&it&&it.hover){var Vt=M.event,ee=this.width,te=this.height,ae=M.mouse(this),le=ae[0],ce=ae[1];if(le<0||ce<0||le>=ee||ce>=te)return;var pe=Ht.lineLayer.readPixel(le,te-1-ce),we=pe[3]!==0,ve=we?pe[2]+256*(pe[1]+256*pe[0]):null,Mt={x:le,y:ce,clientX:Vt.clientX,clientY:Vt.clientY,dataIndex:Ht.model.key,curveNumber:ve};ve!==rt&&(we?it.hover(Mt):it.unhover&&it.unhover(Mt),rt=ve)}}),ot.style("opacity",function(Ht){return Ht.pick?0:1}),Z.style("background","rgba(255, 255, 255, 0)");var pt=Z.selectAll("."+p.cn.parcoords).data(Y,a);pt.exit().remove(),pt.enter().append("g").classed(p.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),pt.attr("transform",function(Ht){return v(Ht.model.translateX,Ht.model.translateY)});var yt=pt.selectAll("."+p.cn.parcoordsControlView).data(o,a);yt.enter().append("g").classed(p.cn.parcoordsControlView,!0),yt.attr("transform",function(Ht){return v(Ht.model.pad.l,Ht.model.pad.t)});var xt=yt.selectAll("."+p.cn.yAxis).data(function(Ht){return Ht.dimensions},a);xt.enter().append("g").classed(p.cn.yAxis,!0),yt.each(function(Ht){C(xt,Ht,et)}),ot.each(function(Ht){if(Ht.viewModel){!Ht.lineLayer||it?Ht.lineLayer=s(this,Ht):Ht.lineLayer.update(Ht),(Ht.key||Ht.key===0)&&(Ht.viewModel[Ht.key]=Ht.lineLayer);var Vt=!Ht.context||it;Ht.lineLayer.render(Ht.viewModel.panels,Vt)}}),xt.attr("transform",function(Ht){return v(Ht.xScale(Ht.xIndex),0)}),xt.call(M.behavior.drag().origin(function(Ht){return Ht}).on("drag",function(Ht){var Vt=Ht.parent;X.linePickActive(!1),Ht.x=Math.max(-p.overdrag,Math.min(Ht.model.width+p.overdrag,M.event.x)),Ht.canvasX=Ht.x*Ht.model.canvasPixelRatio,xt.sort(function(ee,te){return ee.x-te.x}).each(function(ee,te){ee.xIndex=te,ee.x=Ht===ee?ee.x:ee.xScale(ee.xIndex),ee.canvasX=ee.x*ee.model.canvasPixelRatio}),C(xt,Vt,et),xt.filter(function(ee){return Math.abs(Ht.xIndex-ee.xIndex)!==0}).attr("transform",function(ee){return v(ee.xScale(ee.xIndex),0)}),M.select(this).attr("transform",v(Ht.x,0)),xt.each(function(ee,te,ae){ae===Ht.parent.key&&(Vt.dimensions[te]=ee)}),Vt.contextLayer&&Vt.contextLayer.render(Vt.panels,!1,!w(Vt)),Vt.focusLayer.render&&Vt.focusLayer.render(Vt.panels)}).on("dragend",function(Ht){var Vt=Ht.parent;Ht.x=Ht.xScale(Ht.xIndex),Ht.canvasX=Ht.x*Ht.model.canvasPixelRatio,C(xt,Vt,et),M.select(this).attr("transform",function(ee){return v(ee.x,0)}),Vt.contextLayer&&Vt.contextLayer.render(Vt.panels,!1,!w(Vt)),Vt.focusLayer&&Vt.focusLayer.render(Vt.panels),Vt.pickLayer&&Vt.pickLayer.render(Vt.panels,!0),X.linePickActive(!0),it&&it.axesMoved&&it.axesMoved(Vt.key,Vt.dimensions.map(function(ee){return ee.crossfilterDimensionIndex}))})),xt.exit().remove();var Ft=xt.selectAll("."+p.cn.axisOverlays).data(o,a);Ft.enter().append("g").classed(p.cn.axisOverlays,!0),Ft.selectAll("."+p.cn.axis).remove();var Et=Ft.selectAll("."+p.cn.axis).data(o,a);Et.enter().append("g").classed(p.cn.axis,!0),Et.each(function(Ht){var Vt=Ht.model.height/Ht.model.tickDistance,ee=Ht.domainScale,te=ee.domain();M.select(this).call(M.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Vt,Ht.tickFormat).tickValues(Ht.ordinal?te:null).tickFormat(function(ae){return y.isOrdinal(Ht)?ae:N(Ht.model.dimensions[Ht.visibleIndex],ae)}).scale(ee)),r.font(Et.selectAll("text"),Ht.model.tickFont)}),Et.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Et.selectAll("text").style("text-shadow",e.makeTextShadow(nt)).style("cursor","default");var mt=Ft.selectAll("."+p.cn.axisHeading).data(o,a);mt.enter().append("g").classed(p.cn.axisHeading,!0);var gt=mt.selectAll("."+p.cn.axisTitle).data(o,a);gt.enter().append("text").classed(p.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",q?"none":"auto"),gt.text(function(Ht){return Ht.label}).each(function(Ht){var Vt=M.select(this);r.font(Vt,Ht.model.labelFont),e.convertToTspans(Vt,K)}).attr("transform",function(Ht){var Vt=R(Ht.model.labelAngle,Ht.model.labelSide),ee=p.axisTitleOffset;return(Vt.dir>0?"":v(0,2*ee+Ht.model.height))+g(Vt.degrees)+v(-ee*Vt.dx,-ee*Vt.dy)}).attr("text-anchor",function(Ht){var Vt=R(Ht.model.labelAngle,Ht.model.labelSide),ee=Math.abs(Vt.dx),te=Math.abs(Vt.dy);return 2*ee>te?Vt.dir*Vt.dx<0?"start":"end":"middle"});var wt=Ft.selectAll("."+p.cn.axisExtent).data(o,a);wt.enter().append("g").classed(p.cn.axisExtent,!0);var Pt=wt.selectAll("."+p.cn.axisExtentTop).data(o,a);Pt.enter().append("g").classed(p.cn.axisExtentTop,!0),Pt.attr("transform",v(0,-p.axisExtentOffset));var Bt=Pt.selectAll("."+p.cn.axisExtentTopText).data(o,a);Bt.enter().append("text").classed(p.cn.axisExtentTopText,!0).call(B),Bt.text(function(Ht){return V(Ht,!0)}).each(function(Ht){r.font(M.select(this),Ht.model.rangeFont)});var kt=wt.selectAll("."+p.cn.axisExtentBottom).data(o,a);kt.enter().append("g").classed(p.cn.axisExtentBottom,!0),kt.attr("transform",function(Ht){return v(0,Ht.model.height+p.axisExtentOffset)});var jt=kt.selectAll("."+p.cn.axisExtentBottomText).data(o,a);jt.enter().append("text").classed(p.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(B),jt.text(function(Ht){return V(Ht,!1)}).each(function(Ht){r.font(M.select(this),Ht.model.rangeFont)}),x.ensureAxisBrush(Ft,nt,K)}},21341:function($,U,t){var M=t(17171),E=t(79749),i=t(1602).isVisible,S={};function A(e,r,f){var n=r.indexOf(f),a=e.indexOf(n);return a===-1&&(a+=r.length),a}function g(e,r){return function(f,n){return A(e,r,f)-A(e,r,n)}}var v=$.exports=function(e,r){var f=e._fullLayout,n=E(e,[],S);if(n){var a={},o={},h={},y={},p=f._size;r.forEach(function(T,k){var _=T[0].trace;h[k]=_.index;var b=y[k]=_._fullInput.index;a[k]=e.data[b].dimensions,o[k]=e.data[b].dimensions.slice()});var x=function(T,k,_){var b=o[T][k],P=_.map(function(z){return z.slice()}),l="dimensions["+k+"].constraintrange",d=f._tracePreGUI[e._fullData[h[T]]._fullInput.uid];if(d[l]===void 0){var L=b.constraintrange;d[l]=L||null}var w=e._fullData[h[T]].dimensions[k];P.length?(P.length===1&&(P=P[0]),b.constraintrange=P,w.constraintrange=P.slice(),P=[P]):(delete b.constraintrange,delete w.constraintrange,P=null);var I={};I[l]=P,e.emit("plotly_restyle",[I,[y[T]]])},s=function(T){e.emit("plotly_hover",T)},u=function(T){e.emit("plotly_unhover",T)},c=function(T,k){var _=g(k,o[T].filter(i));a[T].sort(_),o[T].filter(function(b){return!i(b)}).sort(function(b){return o[T].indexOf(b)}).forEach(function(b){a[T].splice(a[T].indexOf(b),1),a[T].splice(o[T].indexOf(b),0,b)}),e.emit("plotly_restyle",[{dimensions:[a[T]]},[y[T]]])};M(e,r,{width:p.w,height:p.h,margin:{t:p.t,r:p.r,b:p.b,l:p.l}},{filterChanged:x,hover:s,unhover:u,axesMoved:c})}};v.reglPrecompiled=S},34e3:function($,U,t){var M=t(9012),E=t(27670).Y,i=t(41940),S=t(22399),A=t(5386).fF,g=t(5386).si,v=t(1426).extendFlat,e=t(79952).u,r=i({editType:"plot",arrayOk:!0,colorEditType:"plot"});$.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:S.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:e,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:v({},M.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:A({},{keys:["label","color","value","percent","text"]}),texttemplate:g({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:v({},r,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:v({},r,{}),outsidetextfont:v({},r,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:v({},r,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:E({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:v({},r,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},13584:function($,U,t){var M=t(74875);U.name="pie",U.plot=function(E,i,S,A){M.plotBasePlot(U.name,E,i,S,A)},U.clean=function(E,i,S,A){M.cleanBasePlot(U.name,E,i,S,A)}},32354:function($,U,t){var M=t(92770),E=t(84267),i=t(7901),S={};function A(r,f){var n=[],a=r._fullLayout,o=a.hiddenlabels||[],h=f.labels,y=f.marker.colors||[],p=f.values,x=f._length,s=f._hasValues&&x,u,c;if(f.dlabel)for(h=new Array(x),u=0;u<x;u++)h[u]=String(f.label0+u*f.dlabel);var T={},k=g(a["_"+f.type+"colormap"]),_=0,b=!1;for(u=0;u<x;u++){var P,l,d;if(s){if(P=p[u],!M(P))continue;P=+P}else P=1;l=h[u],(l===void 0||l==="")&&(l=u),l=String(l);var L=T[l];L===void 0?(T[l]=n.length,d=o.indexOf(l)!==-1,d||(_+=P),n.push({v:P,label:l,color:k(y[u],l),i:u,pts:[u],hidden:d})):(b=!0,c=n[L],c.v+=P,c.pts.push(u),c.hidden||(_+=P),c.color===!1&&y[u]&&(c.color=k(y[u],l)))}n=n.filter(function(I){return I.v>=0});var w=f.type==="funnelarea"?b:f.sort;return w&&n.sort(function(I,z){return z.v-I.v}),n[0]&&(n[0].vTotal=_),n}function g(r){return function(f,n){return!f||(f=E(f),!f.isValid())?!1:(f=i.addOpacity(f,f.getAlpha()),r[n]||(r[n]=f),f)}}function v(r,f){var n=(f||{}).type;n||(n="pie");var a=r._fullLayout,o=r.calcdata,h=a[n+"colorway"],y=a["_"+n+"colormap"];a["extend"+n+"colors"]&&(h=e(h,S));for(var p=0,x=0;x<o.length;x++){var s=o[x],u=s[0].trace.type;if(u===n)for(var c=0;c<s.length;c++){var T=s[c];T.color===!1&&(y[T.label]?T.color=y[T.label]:(y[T.label]=T.color=h[p%h.length],p++))}}}function e(r,f){var n,a=JSON.stringify(r),o=f[a];if(!o){for(o=r.slice(),n=0;n<r.length;n++)o.push(E(r[n]).lighten(20).toHexString());for(n=0;n<r.length;n++)o.push(E(r[n]).darken(20).toHexString());f[a]=o}return o}$.exports={calc:A,crossTraceCalc:v,makePullColorFn:g,generateExtendedColors:e}},37434:function($,U,t){var M=t(92770),E=t(71828),i=t(34e3),S=t(27670).c,A=t(90769).handleText,g=t(71828).coercePattern;function v(f,n){var a=Array.isArray(f),o=E.isArrayOrTypedArray(n),h=Math.min(a?f.length:1/0,o?n.length:1/0);if(isFinite(h)||(h=0),h&&o){for(var y,p=0;p<h;p++){var x=n[p];if(M(x)&&x>0){y=!0;break}}y||(h=0)}return{hasLabels:a,hasValues:o,len:h}}function e(f,n,a,o,h){var y=o("marker.line.width");y&&o("marker.line.color",h?void 0:a.paper_bgcolor);var p=o("marker.colors");g(o,"marker.pattern",p),f.marker&&!n.marker.pattern.fgcolor&&(n.marker.pattern.fgcolor=f.marker.colors),n.marker.pattern.bgcolor||(n.marker.pattern.bgcolor=a.paper_bgcolor)}function r(f,n,a,o){function h(L,w){return E.coerce(f,n,i,L,w)}var y=h("labels"),p=h("values"),x=v(y,p),s=x.len;if(n._hasLabels=x.hasLabels,n._hasValues=x.hasValues,!n._hasLabels&&n._hasValues&&(h("label0"),h("dlabel")),!s){n.visible=!1;return}n._length=s,e(f,n,o,h,!0),h("scalegroup");var u=h("text"),c=h("texttemplate"),T;if(c||(T=h("textinfo",Array.isArray(u)?"text+percent":"percent")),h("hovertext"),h("hovertemplate"),c||T&&T!=="none"){var k=h("textposition");A(f,n,o,h,k,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var _=Array.isArray(k)||k==="auto",b=_||k==="outside";b&&h("automargin"),(k==="inside"||k==="auto"||Array.isArray(k))&&h("insidetextorientation")}S(n,o,h);var P=h("hole"),l=h("title.text");if(l){var d=h("title.position",P?"middle center":"top center");!P&&d==="middle center"&&(n.title.position="top center"),E.coerceFont(h,"title.font",o.font)}h("sort"),h("direction"),h("rotation"),h("pull")}$.exports={handleLabelsAndValues:v,handleMarkerDefaults:e,supplyDefaults:r}},20007:function($,U,t){var M=t(23469).appendArrayMultiPointValues;$.exports=function(E,i){var S={curveNumber:i.index,pointNumbers:E.pts,data:i._input,fullData:i,label:E.label,color:E.color,value:E.v,percent:E.percent,text:E.text,bbox:E.bbox,v:E.v};return E.pts.length===1&&(S.pointNumber=S.i=E.pts[0]),M(S,i,E.pts),i.type==="funnelarea"&&(delete S.v,delete S.i),S}},22209:function($,U,t){var M=t(91424),E=t(7901);$.exports=function(i,S,A,g){var v=A.marker.pattern;v&&v.shape?M.pointStyle(i,A,g,S):E.fill(i,S.color)}},53581:function($,U,t){var M=t(71828);function E(i){return i.indexOf("e")!==-1?i.replace(/[.]?0+e/,"e"):i.indexOf(".")!==-1?i.replace(/[.]?0+$/,""):i}U.formatPiePercent=function(i,S){var A=E((i*100).toPrecision(3));return M.numSeparate(A,S)+"%"},U.formatPieValue=function(i,S){var A=E(i.toPrecision(10));return M.numSeparate(A,S)},U.getFirstFilled=function(i,S){if(Array.isArray(i))for(var A=0;A<S.length;A++){var g=i[S[A]];if(g||g===0||g==="")return g}},U.castOption=function(i,S){if(Array.isArray(i))return U.getFirstFilled(i,S);if(i)return i},U.getRotationAngle=function(i){return(i==="auto"?0:i)*Math.PI/180}},58810:function($,U,t){$.exports={attributes:t(34e3),supplyDefaults:t(37434).supplyDefaults,supplyLayoutDefaults:t(92097),layoutAttributes:t(92774),calc:t(32354).calc,crossTraceCalc:t(32354).crossTraceCalc,plot:t(14575).plot,style:t(68357),styleOne:t(63463),moduleType:"trace",name:"pie",basePlotModule:t(13584),categories:["pie-like","pie","showLegend"],meta:{}}},92774:function($){$.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},92097:function($,U,t){var M=t(71828),E=t(92774);$.exports=function(i,S){function A(g,v){return M.coerce(i,S,E,g,v)}A("hiddenlabels"),A("piecolorway",S.colorway),A("extendpiecolors")}},14575:function($,U,t){var M=t(39898),E=t(74875),i=t(30211),S=t(7901),A=t(91424),g=t(71828),v=g.strScale,e=g.strTranslate,r=t(63893),f=t(72597),n=f.recordMinTextSize,a=f.clearMinTextSize,o=t(97313).TEXTPAD,h=t(53581),y=t(20007),p=t(71828).isValidTextValue;function x(W,Z){var G=W._context.staticPlot,et=W._fullLayout,nt=et._size;a("pie",et),k(Z,W),V(Z,nt);var X=g.makeTraceGroups(et._pielayer,Z,"trace").each(function(Y){var ot=M.select(this),rt=Y[0],ht=rt.trace;Q(Y),ot.attr("stroke-linejoin","round"),ot.each(function(){var pt=M.select(this).selectAll("g.slice").data(Y);pt.enter().append("g").classed("slice",!0),pt.exit().remove();var yt=[[[],[]],[[],[]]],xt=!1;pt.each(function(kt,jt){if(kt.hidden){M.select(this).selectAll("path,g").remove();return}kt.pointNumber=kt.i,kt.curveNumber=ht.index,yt[kt.pxmid[1]<0?0:1][kt.pxmid[0]<0?0:1].push(kt);var Ht=rt.cx,Vt=rt.cy,ee=M.select(this),te=ee.selectAll("path.surface").data([kt]);if(te.enter().append("path").classed("surface",!0).style({"pointer-events":G?"none":"all"}),ee.call(u,W,Y),ht.pull){var ae=+h.castOption(ht.pull,kt.pts)||0;ae>0&&(Ht+=ae*kt.pxmid[0],Vt+=ae*kt.pxmid[1])}kt.cxFinal=Ht,kt.cyFinal=Vt;function le(Rt,zt,Tt,ft){var ut=ft*(zt[0]-Rt[0]),vt=ft*(zt[1]-Rt[1]);return"a"+ft*rt.r+","+ft*rt.r+" 0 "+kt.largeArc+(Tt?" 1 ":" 0 ")+ut+","+vt}var ce=ht.hole;if(kt.v===rt.vTotal){var pe="M"+(Ht+kt.px0[0])+","+(Vt+kt.px0[1])+le(kt.px0,kt.pxmid,!0,1)+le(kt.pxmid,kt.px0,!0,1)+"Z";ce?te.attr("d","M"+(Ht+ce*kt.px0[0])+","+(Vt+ce*kt.px0[1])+le(kt.px0,kt.pxmid,!1,ce)+le(kt.pxmid,kt.px0,!1,ce)+"Z"+pe):te.attr("d",pe)}else{var we=le(kt.px0,kt.px1,!0,1);if(ce){var ve=1-ce;te.attr("d","M"+(Ht+ce*kt.px1[0])+","+(Vt+ce*kt.px1[1])+le(kt.px1,kt.px0,!1,ce)+"l"+ve*kt.px0[0]+","+ve*kt.px0[1]+we+"Z")}else te.attr("d","M"+Ht+","+Vt+"l"+kt.px0[0]+","+kt.px0[1]+we+"Z")}it(W,kt,rt);var Mt=h.castOption(ht.textposition,kt.pts),It=ee.selectAll("g.slicetext").data(kt.text&&Mt!=="none"?[0]:[]);It.enter().append("g").classed("slicetext",!0),It.exit().remove(),It.each(function(){var Rt=g.ensureSingle(M.select(this),"text","",function(Xt){Xt.attr("data-notex",1)}),zt=g.ensureUniformFontSize(W,Mt==="outside"?c(ht,kt,et.font):T(ht,kt,et.font));Rt.text(kt.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(A.font,zt).call(r.convertToTspans,W);var Tt=A.bBox(Rt.node()),ft;if(Mt==="outside")ft=z(Tt,kt);else if(ft=_(Tt,kt,rt),Mt==="auto"&&ft.scale<1){var ut=g.ensureUniformFontSize(W,ht.outsidetextfont);Rt.call(A.font,ut),Tt=A.bBox(Rt.node()),ft=z(Tt,kt)}var vt=ft.textPosAngle,St=vt===void 0?kt.pxmid:at(rt.r,vt);if(ft.targetX=Ht+St[0]*ft.rCenter+(ft.x||0),ft.targetY=Vt+St[1]*ft.rCenter+(ft.y||0),q(ft,Tt),ft.outside){var Ot=ft.targetY;kt.yLabelMin=Ot-Tt.height/2,kt.yLabelMid=Ot,kt.yLabelMax=Ot+Tt.height/2,kt.labelExtraX=0,kt.labelExtraY=0,xt=!0}ft.fontSize=zt.size,n(ht.type,ft,et),Y[jt].transform=ft,g.setTransormAndDisplay(Rt,ft)})});var Ft=M.select(this).selectAll("g.titletext").data(ht.title.text?[0]:[]);if(Ft.enter().append("g").classed("titletext",!0),Ft.exit().remove(),Ft.each(function(){var kt=g.ensureSingle(M.select(this),"text","",function(Vt){Vt.attr("data-notex",1)}),jt=ht.title.text;ht._meta&&(jt=g.templateString(jt,ht._meta)),kt.text(jt).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(A.font,ht.title.font).call(r.convertToTspans,W);var Ht;ht.title.position==="middle center"?Ht=B(rt):Ht=O(rt,nt),kt.attr("transform",e(Ht.x,Ht.y)+v(Math.min(1,Ht.scale))+e(Ht.tx,Ht.ty))}),xt&&N(yt,ht),s(pt,ht),xt&&ht.automargin){var Et=A.bBox(ot.node()),mt=ht.domain,gt=nt.w*(mt.x[1]-mt.x[0]),wt=nt.h*(mt.y[1]-mt.y[0]),Pt=(.5*gt-rt.r)/nt.w,Bt=(.5*wt-rt.r)/nt.h;E.autoMargin(W,"pie."+ht.uid+".automargin",{xl:mt.x[0]-Pt,xr:mt.x[1]+Pt,yb:mt.y[0]-Bt,yt:mt.y[1]+Bt,l:Math.max(rt.cx-rt.r-Et.left,0),r:Math.max(Et.right-(rt.cx+rt.r),0),b:Math.max(Et.bottom-(rt.cy+rt.r),0),t:Math.max(rt.cy-rt.r-Et.top,0),pad:5})}})});setTimeout(function(){X.selectAll("tspan").each(function(){var Y=M.select(this);Y.attr("dy")&&Y.attr("dy",Y.attr("dy"))})},0)}function s(W,Z){W.each(function(G){var et=M.select(this);if(!G.labelExtraX&&!G.labelExtraY){et.select("path.textline").remove();return}var nt=et.select("g.slicetext text");G.transform.targetX+=G.labelExtraX,G.transform.targetY+=G.labelExtraY,g.setTransormAndDisplay(nt,G.transform);var X=G.cxFinal+G.pxmid[0],Y=G.cyFinal+G.pxmid[1],ot="M"+X+","+Y,rt=(G.yLabelMax-G.yLabelMin)*(G.pxmid[0]<0?-1:1)/4;if(G.labelExtraX){var ht=G.labelExtraX*G.pxmid[1]/G.pxmid[0],pt=G.yLabelMid+G.labelExtraY-(G.cyFinal+G.pxmid[1]);Math.abs(ht)>Math.abs(pt)?ot+="l"+pt*G.pxmid[0]/G.pxmid[1]+","+pt+"H"+(X+G.labelExtraX+rt):ot+="l"+G.labelExtraX+","+ht+"v"+(pt-ht)+"h"+rt}else ot+="V"+(G.yLabelMid+G.labelExtraY)+"h"+rt;g.ensureSingle(et,"path","textline").call(S.stroke,Z.outsidetextfont.color).attr({"stroke-width":Math.min(2,Z.outsidetextfont.size/8),d:ot,fill:"none"})})}function u(W,Z,G){var et=G[0],nt=et.cx,X=et.cy,Y=et.trace,ot=Y.type==="funnelarea";"_hasHoverLabel"in Y||(Y._hasHoverLabel=!1),"_hasHoverEvent"in Y||(Y._hasHoverEvent=!1),W.on("mouseover",function(rt){var ht=Z._fullLayout,pt=Z._fullData[Y.index];if(!(Z._dragging||ht.hovermode===!1)){var yt=pt.hoverinfo;if(Array.isArray(yt)&&(yt=i.castHoverinfo({hoverinfo:[h.castOption(yt,rt.pts)],_module:Y._module},ht,0)),yt==="all"&&(yt="label+text+value+percent+name"),pt.hovertemplate||yt!=="none"&&yt!=="skip"&&yt){var xt=rt.rInscribed||0,Ft=nt+rt.pxmid[0]*(1-xt),Et=X+rt.pxmid[1]*(1-xt),mt=ht.separators,gt=[];if(yt&&yt.indexOf("label")!==-1&&gt.push(rt.label),rt.text=h.castOption(pt.hovertext||pt.text,rt.pts),yt&&yt.indexOf("text")!==-1){var wt=rt.text;g.isValidTextValue(wt)&&gt.push(wt)}rt.value=rt.v,rt.valueLabel=h.formatPieValue(rt.v,mt),yt&&yt.indexOf("value")!==-1&&gt.push(rt.valueLabel),rt.percent=rt.v/et.vTotal,rt.percentLabel=h.formatPiePercent(rt.percent,mt),yt&&yt.indexOf("percent")!==-1&&gt.push(rt.percentLabel);var Pt=pt.hoverlabel,Bt=Pt.font,kt=[];i.loneHover({trace:Y,x0:Ft-xt*et.r,x1:Ft+xt*et.r,y:Et,_x0:ot?nt+rt.TL[0]:Ft-xt*et.r,_x1:ot?nt+rt.TR[0]:Ft+xt*et.r,_y0:ot?X+rt.TL[1]:Et-xt*et.r,_y1:ot?X+rt.BL[1]:Et+xt*et.r,text:gt.join("<br>"),name:pt.hovertemplate||yt.indexOf("name")!==-1?pt.name:void 0,idealAlign:rt.pxmid[0]<0?"left":"right",color:h.castOption(Pt.bgcolor,rt.pts)||rt.color,borderColor:h.castOption(Pt.bordercolor,rt.pts),fontFamily:h.castOption(Bt.family,rt.pts),fontSize:h.castOption(Bt.size,rt.pts),fontColor:h.castOption(Bt.color,rt.pts),nameLength:h.castOption(Pt.namelength,rt.pts),textAlign:h.castOption(Pt.align,rt.pts),hovertemplate:h.castOption(pt.hovertemplate,rt.pts),hovertemplateLabels:rt,eventData:[y(rt,pt)]},{container:ht._hoverlayer.node(),outerContainer:ht._paper.node(),gd:Z,inOut_bbox:kt}),rt.bbox=kt[0],Y._hasHoverLabel=!0}Y._hasHoverEvent=!0,Z.emit("plotly_hover",{points:[y(rt,pt)],event:M.event})}}),W.on("mouseout",function(rt){var ht=Z._fullLayout,pt=Z._fullData[Y.index],yt=M.select(this).datum();Y._hasHoverEvent&&(rt.originalEvent=M.event,Z.emit("plotly_unhover",{points:[y(yt,pt)],event:M.event}),Y._hasHoverEvent=!1),Y._hasHoverLabel&&(i.loneUnhover(ht._hoverlayer.node()),Y._hasHoverLabel=!1)}),W.on("click",function(rt){var ht=Z._fullLayout,pt=Z._fullData[Y.index];Z._dragging||ht.hovermode===!1||(Z._hoverdata=[y(rt,pt)],i.click(Z,M.event))})}function c(W,Z,G){var et=h.castOption(W.outsidetextfont.color,Z.pts)||h.castOption(W.textfont.color,Z.pts)||G.color,nt=h.castOption(W.outsidetextfont.family,Z.pts)||h.castOption(W.textfont.family,Z.pts)||G.family,X=h.castOption(W.outsidetextfont.size,Z.pts)||h.castOption(W.textfont.size,Z.pts)||G.size;return{color:et,family:nt,size:X}}function T(W,Z,G){var et=h.castOption(W.insidetextfont.color,Z.pts);!et&&W._input.textfont&&(et=h.castOption(W._input.textfont.color,Z.pts));var nt=h.castOption(W.insidetextfont.family,Z.pts)||h.castOption(W.textfont.family,Z.pts)||G.family,X=h.castOption(W.insidetextfont.size,Z.pts)||h.castOption(W.textfont.size,Z.pts)||G.size;return{color:et||S.contrast(Z.color),family:nt,size:X}}function k(W,Z){for(var G,et,nt=0;nt<W.length;nt++)if(G=W[nt][0],et=G.trace,et.title.text){var X=et.title.text;et._meta&&(X=g.templateString(X,et._meta));var Y=A.tester.append("text").attr("data-notex",1).text(X).call(A.font,et.title.font).call(r.convertToTspans,Z),ot=A.bBox(Y.node(),!0);G.titleBox={width:ot.width,height:ot.height},Y.remove()}}function _(W,Z,G){var et=G.r||Z.rpx1,nt=Z.rInscribed,X=Z.startangle===Z.stopangle;if(X)return{rCenter:1-nt,scale:0,rotate:0,textPosAngle:0};var Y=Z.ring,ot=Y===1&&Math.abs(Z.startangle-Z.stopangle)===Math.PI*2,rt=Z.halfangle,ht=Z.midangle,pt=G.trace.insidetextorientation,yt=pt==="horizontal",xt=pt==="tangential",Ft=pt==="radial",Et=pt==="auto",mt=[],gt;if(!Et){var wt=function(ee,te){if(b(Z,ee)){var ae=Math.abs(ee-Z.startangle),le=Math.abs(ee-Z.stopangle),ce=ae<le?ae:le;te==="tan"?gt=l(W,et,Y,ce,0):gt=P(W,et,Y,ce,Math.PI/2),gt.textPosAngle=ee,mt.push(gt)}},Pt;if(yt||xt){for(Pt=4;Pt>=-4;Pt-=2)wt(Math.PI*Pt,"tan");for(Pt=4;Pt>=-4;Pt-=2)wt(Math.PI*(Pt+1),"tan")}if(yt||Ft){for(Pt=4;Pt>=-4;Pt-=2)wt(Math.PI*(Pt+1.5),"rad");for(Pt=4;Pt>=-4;Pt-=2)wt(Math.PI*(Pt+.5),"rad")}}if(ot||Et||yt){var Bt=Math.sqrt(W.width*W.width+W.height*W.height);if(gt={scale:nt*et*2/Bt,rCenter:1-nt,rotate:0},gt.textPosAngle=(Z.startangle+Z.stopangle)/2,gt.scale>=1)return gt;mt.push(gt)}(Et||Ft)&&(gt=P(W,et,Y,rt,ht),gt.textPosAngle=(Z.startangle+Z.stopangle)/2,mt.push(gt)),(Et||xt)&&(gt=l(W,et,Y,rt,ht),gt.textPosAngle=(Z.startangle+Z.stopangle)/2,mt.push(gt));for(var kt=0,jt=0,Ht=0;Ht<mt.length;Ht++){var Vt=mt[Ht].scale;if(jt<Vt&&(jt=Vt,kt=Ht),!Et&&jt>=1)break}return mt[kt]}function b(W,Z){var G=W.startangle,et=W.stopangle;return G>Z&&Z>et||G<Z&&Z<et}function P(W,Z,G,et,nt){Z=Math.max(0,Z-2*o);var X=W.width/W.height,Y=w(X,et,Z,G);return{scale:Y*2/W.height,rCenter:d(X,Y/Z),rotate:L(nt)}}function l(W,Z,G,et,nt){Z=Math.max(0,Z-2*o);var X=W.height/W.width,Y=w(X,et,Z,G);return{scale:Y*2/W.width,rCenter:d(X,Y/Z),rotate:L(nt+Math.PI/2)}}function d(W,Z){return Math.cos(Z)-W*Z}function L(W){return(180/Math.PI*W+720)%180-90}function w(W,Z,G,et){var nt=W+1/(2*Math.tan(Z));return G*Math.min(1/(Math.sqrt(nt*nt+.5)+nt),et/(Math.sqrt(W*W+et/2)+W))}function I(W,Z){return W.v===Z.vTotal&&!Z.trace.hole?1:Math.min(1/(1+1/Math.sin(W.halfangle)),W.ring/2)}function z(W,Z){var G=Z.pxmid[0],et=Z.pxmid[1],nt=W.width/2,X=W.height/2;return G<0&&(nt*=-1),et<0&&(X*=-1),{scale:1,rCenter:1,rotate:0,x:nt+Math.abs(X)*(nt>0?1:-1)/2,y:X/(1+G*G/(et*et)),outside:!0}}function B(W){var Z=Math.sqrt(W.titleBox.width*W.titleBox.width+W.titleBox.height*W.titleBox.height);return{x:W.cx,y:W.cy,scale:W.trace.hole*W.r*2/Z,tx:0,ty:-W.titleBox.height/2+W.trace.title.font.size}}function O(W,Z){var G=1,et=1,nt,X=W.trace,Y={x:W.cx,y:W.cy},ot={tx:0,ty:0};ot.ty+=X.title.font.size,nt=F(X),X.title.position.indexOf("top")!==-1?(Y.y-=(1+nt)*W.r,ot.ty-=W.titleBox.height):X.title.position.indexOf("bottom")!==-1&&(Y.y+=(1+nt)*W.r);var rt=R(W.r,W.trace.aspectratio),ht=Z.w*(X.domain.x[1]-X.domain.x[0])/2;return X.title.position.indexOf("left")!==-1?(ht=ht+rt,Y.x-=(1+nt)*rt,ot.tx+=W.titleBox.width/2):X.title.position.indexOf("center")!==-1?ht*=2:X.title.position.indexOf("right")!==-1&&(ht=ht+rt,Y.x+=(1+nt)*rt,ot.tx-=W.titleBox.width/2),G=ht/W.titleBox.width,et=C(W,Z)/W.titleBox.height,{x:Y.x,y:Y.y,scale:Math.min(G,et),tx:ot.tx,ty:ot.ty}}function R(W,Z){return W/(Z===void 0?1:Z)}function C(W,Z){var G=W.trace,et=Z.h*(G.domain.y[1]-G.domain.y[0]);return Math.min(W.titleBox.height,et/2)}function F(W){var Z=W.pull;if(!Z)return 0;var G;if(Array.isArray(Z))for(Z=0,G=0;G<W.pull.length;G++)W.pull[G]>Z&&(Z=W.pull[G]);return Z}function N(W,Z){var G,et,nt,X,Y,ot,rt,ht,pt,yt,xt,Ft,Et;function mt(Bt,kt){return Bt.pxmid[1]-kt.pxmid[1]}function gt(Bt,kt){return kt.pxmid[1]-Bt.pxmid[1]}function wt(Bt,kt){kt||(kt={});var jt=kt.labelExtraY+(et?kt.yLabelMax:kt.yLabelMin),Ht=et?Bt.yLabelMin:Bt.yLabelMax,Vt=et?Bt.yLabelMax:Bt.yLabelMin,ee=Bt.cyFinal+Y(Bt.px0[1],Bt.px1[1]),te=jt-Ht,ae,le,ce,pe,we,ve;if(te*rt>0&&(Bt.labelExtraY=te),!!Array.isArray(Z.pull))for(le=0;le<yt.length;le++)ce=yt[le],!(ce===Bt||(h.castOption(Z.pull,Bt.pts)||0)>=(h.castOption(Z.pull,ce.pts)||0))&&((Bt.pxmid[1]-ce.pxmid[1])*rt>0?(pe=ce.cyFinal+Y(ce.px0[1],ce.px1[1]),te=pe-Ht-Bt.labelExtraY,te*rt>0&&(Bt.labelExtraY+=te)):(Vt+Bt.labelExtraY-ee)*rt>0&&(ae=3*ot*Math.abs(le-yt.indexOf(Bt)),we=ce.cxFinal+X(ce.px0[0],ce.px1[0]),ve=we+ae-(Bt.cxFinal+Bt.pxmid[0])-Bt.labelExtraX,ve*ot>0&&(Bt.labelExtraX+=ve)))}for(et=0;et<2;et++)for(nt=et?mt:gt,Y=et?Math.max:Math.min,rt=et?1:-1,G=0;G<2;G++){for(X=G?Math.max:Math.min,ot=G?1:-1,ht=W[et][G],ht.sort(nt),pt=W[1-et][G],yt=pt.concat(ht),Ft=[],xt=0;xt<ht.length;xt++)ht[xt].yLabelMid!==void 0&&Ft.push(ht[xt]);for(Et=!1,xt=0;et&&xt<pt.length;xt++)if(pt[xt].yLabelMid!==void 0){Et=pt[xt];break}for(xt=0;xt<Ft.length;xt++){var Pt=xt&&Ft[xt-1];Et&&!xt&&(Pt=Et),wt(Ft[xt],Pt)}}}function V(W,Z){for(var G=[],et=0;et<W.length;et++){var nt=W[et][0],X=nt.trace,Y=X.domain,ot=Z.w*(Y.x[1]-Y.x[0]),rt=Z.h*(Y.y[1]-Y.y[0]);X.title.text&&X.title.position!=="middle center"&&(rt-=C(nt,Z));var ht=ot/2,pt=rt/2;X.type==="funnelarea"&&!X.scalegroup&&(pt/=X.aspectratio),nt.r=Math.min(ht,pt)/(1+F(X)),nt.cx=Z.l+Z.w*(X.domain.x[1]+X.domain.x[0])/2,nt.cy=Z.t+Z.h*(1-X.domain.y[0])-rt/2,X.title.text&&X.title.position.indexOf("bottom")!==-1&&(nt.cy-=C(nt,Z)),X.scalegroup&&G.indexOf(X.scalegroup)===-1&&G.push(X.scalegroup)}K(W,G)}function K(W,Z){for(var G,et,nt,X=0;X<Z.length;X++){var Y=1/0,ot=Z[X];for(et=0;et<W.length;et++)if(G=W[et][0],nt=G.trace,nt.scalegroup===ot){var rt;if(nt.type==="pie")rt=G.r*G.r;else if(nt.type==="funnelarea"){var ht,pt;nt.aspectratio>1?(ht=G.r,pt=ht/nt.aspectratio):(pt=G.r,ht=pt*nt.aspectratio),ht*=(1+nt.baseratio)/2,rt=ht*pt}Y=Math.min(Y,rt/G.vTotal)}for(et=0;et<W.length;et++)if(G=W[et][0],nt=G.trace,nt.scalegroup===ot){var yt=Y*G.vTotal;nt.type==="funnelarea"&&(yt/=(1+nt.baseratio)/2,yt/=nt.aspectratio),G.r=Math.sqrt(yt)}}}function Q(W){var Z=W[0],G=Z.r,et=Z.trace,nt=h.getRotationAngle(et.rotation),X=2*Math.PI/Z.vTotal,Y="px0",ot="px1",rt,ht,pt;if(et.direction==="counterclockwise"){for(rt=0;rt<W.length&&W[rt].hidden;rt++);if(rt===W.length)return;nt+=X*W[rt].v,X*=-1,Y="px1",ot="px0"}for(pt=at(G,nt),rt=0;rt<W.length;rt++)ht=W[rt],!ht.hidden&&(ht[Y]=pt,ht.startangle=nt,nt+=X*ht.v/2,ht.pxmid=at(G,nt),ht.midangle=nt,nt+=X*ht.v/2,pt=at(G,nt),ht.stopangle=nt,ht[ot]=pt,ht.largeArc=ht.v>Z.vTotal/2?1:0,ht.halfangle=Math.PI*Math.min(ht.v/Z.vTotal,.5),ht.ring=1-et.hole,ht.rInscribed=I(ht,Z))}function at(W,Z){return[W*Math.sin(Z),-W*Math.cos(Z)]}function it(W,Z,G){var et=W._fullLayout,nt=G.trace,X=nt.texttemplate,Y=nt.textinfo;if(!X&&Y&&Y!=="none"){var ot=Y.split("+"),rt=function(kt){return ot.indexOf(kt)!==-1},ht=rt("label"),pt=rt("text"),yt=rt("value"),xt=rt("percent"),Ft=et.separators,Et;if(Et=ht?[Z.label]:[],pt){var mt=h.getFirstFilled(nt.text,Z.pts);p(mt)&&Et.push(mt)}yt&&Et.push(h.formatPieValue(Z.v,Ft)),xt&&Et.push(h.formatPiePercent(Z.v/G.vTotal,Ft)),Z.text=Et.join("<br>")}function gt(kt){return{label:kt.label,value:kt.v,valueLabel:h.formatPieValue(kt.v,et.separators),percent:kt.v/G.vTotal,percentLabel:h.formatPiePercent(kt.v/G.vTotal,et.separators),color:kt.color,text:kt.text,customdata:g.castOption(nt,kt.i,"customdata")}}if(X){var wt=g.castOption(nt,Z.i,"texttemplate");if(!wt)Z.text="";else{var Pt=gt(Z),Bt=h.getFirstFilled(nt.text,Z.pts);(p(Bt)||Bt==="")&&(Pt.text=Bt),Z.text=g.texttemplateString(wt,Pt,W._fullLayout._d3locale,Pt,nt._meta||{})}}}function q(W,Z){var G=W.rotate*Math.PI/180,et=Math.cos(G),nt=Math.sin(G),X=(Z.left+Z.right)/2,Y=(Z.top+Z.bottom)/2;W.textX=X*et-Y*nt,W.textY=X*nt+Y*et,W.noCenter=!0}$.exports={plot:x,formatSliceLabel:it,transformInsideText:_,determineInsideTextFont:T,positionTitleOutside:O,prerenderTitles:k,layoutAreas:V,attachFxHandlers:u,computeTransform:q}},68357:function($,U,t){var M=t(39898),E=t(63463),i=t(72597).resizeText;$.exports=function(S){var A=S._fullLayout._pielayer.selectAll(".trace");i(S,A,"pie"),A.each(function(g){var v=g[0],e=v.trace,r=M.select(this);r.style({opacity:e.opacity}),r.selectAll("path.surface").each(function(f){M.select(this).call(E,f,e,S)})})}},63463:function($,U,t){var M=t(7901),E=t(53581).castOption,i=t(22209);$.exports=function(S,A,g,v){var e=g.marker.line,r=E(e.color,A.pts)||M.defaultLine,f=E(e.width,A.pts)||0;S.call(i,A,g,v).style("stroke-width",f).call(M.stroke,r)}},10959:function($,U,t){var M=t(82196);$.exports={x:M.x,y:M.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:M.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},42743:function($,U,t){var M=t(9330).gl_pointcloud2d,E=t(78614),i=t(71739).findExtremes,S=t(34603);function A(e,r){this.scene=e,this.uid=r,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=M(e.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var g=A.prototype;g.handlePick=function(e){var r=this.idToIndex[e.pointId];return{trace:this,dataCoord:e.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[r*2],this.pickXYData[r*2+1]]:[this.pickXData[r],this.pickYData[r]],textLabel:Array.isArray(this.textLabels)?this.textLabels[r]:this.textLabels,color:this.color,name:this.name,pointIndex:r,hoverinfo:this.hoverinfo}},g.update=function(e){this.index=e.index,this.textLabels=e.text,this.name=e.name,this.hoverinfo=e.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(e),this.color=S(e,{})},g.updateFast=function(e){var r=this.xData=this.pickXData=e.x,f=this.yData=this.pickYData=e.y,n=this.pickXYData=e.xy,a=e.xbounds&&e.ybounds,o=e.indices,h,y,p,x=this.bounds,s,u,c;if(n){if(p=n,h=n.length>>>1,a)x[0]=e.xbounds[0],x[2]=e.xbounds[1],x[1]=e.ybounds[0],x[3]=e.ybounds[1];else for(c=0;c<h;c++)s=p[c*2],u=p[c*2+1],s<x[0]&&(x[0]=s),s>x[2]&&(x[2]=s),u<x[1]&&(x[1]=u),u>x[3]&&(x[3]=u);if(o)y=o;else for(y=new Int32Array(h),c=0;c<h;c++)y[c]=c}else for(h=r.length,p=new Float32Array(2*h),y=new Int32Array(h),c=0;c<h;c++)s=r[c],u=f[c],y[c]=c,p[c*2]=s,p[c*2+1]=u,s<x[0]&&(x[0]=s),s>x[2]&&(x[2]=s),u<x[1]&&(x[1]=u),u>x[3]&&(x[3]=u);this.idToIndex=y,this.pointcloudOptions.idToIndex=y,this.pointcloudOptions.positions=p;var T=E(e.marker.color),k=E(e.marker.border.color),_=e.opacity*e.marker.opacity;T[3]*=_,this.pointcloudOptions.color=T;var b=e.marker.blend;if(b===null){var P=100;b=r.length<P||f.length<P}this.pointcloudOptions.blend=b,k[3]*=_,this.pointcloudOptions.borderColor=k;var l=e.marker.sizemin,d=Math.max(e.marker.sizemax,e.marker.sizemin);this.pointcloudOptions.sizeMin=l,this.pointcloudOptions.sizeMax=d,this.pointcloudOptions.areaRatio=e.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var L=this.scene.xaxis,w=this.scene.yaxis,I=d/2||.5;e._extremes[L._id]=i(L,[x[0],x[2]],{ppad:I}),e._extremes[w._id]=i(w,[x[1],x[3]],{ppad:I})},g.dispose=function(){this.pointcloud.dispose()};function v(e,r){var f=new A(e,r.uid);return f.update(r),f}$.exports=v},33876:function($,U,t){var M=t(71828),E=t(10959);$.exports=function(i,S,A){function g(v,e){return M.coerce(i,S,E,v,e)}g("x"),g("y"),g("xbounds"),g("ybounds"),i.xy&&i.xy instanceof Float32Array&&(S.xy=i.xy),i.indices&&i.indices instanceof Int32Array&&(S.indices=i.indices),g("text"),g("marker.color",A),g("marker.opacity"),g("marker.blend"),g("marker.sizemin"),g("marker.sizemax"),g("marker.border.color",A),g("marker.border.arearatio"),S._length=null}},20593:function($,U,t){$.exports={attributes:t(10959),supplyDefaults:t(33876),calc:t(36563),plot:t(42743),moduleType:"trace",name:"pointcloud",basePlotModule:t(4796),categories:["gl","gl2d","showLegend"],meta:{}}},39953:function($,U,t){var M=t(41940),E=t(9012),i=t(22399),S=t(77914),A=t(27670).Y,g=t(5386).fF,v=t(50693),e=t(44467).templatedArray,r=t(12663).descriptionOnlyNumbers,f=t(1426).extendFlat,n=t(30962).overrideAll,a=$.exports=n({hoverinfo:f({},E.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:S.hoverlabel,domain:A({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:r("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:M({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:i.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:S.hoverlabel,hovertemplate:g({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:i.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:S.hoverlabel,hovertemplate:g({},{keys:["value","label"]}),colorscales:e("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:f(v().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");a.transforms=void 0},75536:function($,U,t){var M=t(30962).overrideAll,E=t(27659).a0,i=t(60436),S=t(528),A=t(6964),g=t(28569),v=t(47322).prepSelect,e=t(71828),r=t(73972),f="sankey";U.name=f,U.baseLayoutAttrOverrides=M({hoverlabel:S.hoverlabel},"plot","nested"),U.plot=function(a){var o=E(a.calcdata,f)[0];i(a,o),U.updateFx(a)},U.clean=function(a,o,h,y){var p=y._has&&y._has(f),x=o._has&&o._has(f);p&&!x&&(y._paperdiv.selectAll(".sankey").remove(),y._paperdiv.selectAll(".bgsankey").remove())},U.updateFx=function(a){for(var o=0;o<a._fullData.length;o++)n(a,o)};function n(a,o){var h=a._fullData[o],y=a._fullLayout,p=y.dragmode,x=y.dragmode==="pan"?"move":"crosshair",s=h._bgRect;if(s&&!(p==="pan"||p==="zoom")){A(s,x);var u={_id:"x",c2p:e.identity,_offset:h._sankey.translateX,_length:h._sankey.width},c={_id:"y",c2p:e.identity,_offset:h._sankey.translateY,_length:h._sankey.height},T={gd:a,element:s.node(),plotinfo:{id:o,xaxis:u,yaxis:c,fillRangeItems:e.noop},subplot:o,xaxes:[u],yaxes:[c],doneFnCompleted:function(k){var _=a._fullData[o],b,P=_.node.groups.slice(),l=[];function d(z){for(var B=_._sankey.graph.nodes,O=0;O<B.length;O++)if(B[O].pointNumber===z)return B[O]}for(var L=0;L<k.length;L++){var w=d(k[L].pointNumber);if(w)if(w.group){for(var I=0;I<w.childrenNodes.length;I++)l.push(w.childrenNodes[I].pointNumber);P[w.pointNumber-_.node._count]=!1}else l.push(w.pointNumber)}b=P.filter(Boolean).concat([l]),r.call("_guiRestyle",a,{"node.groups":[b]},o)}};T.prepFn=function(k,_,b){v(k,_,b,T,p)},g.init(T)}}},92930:function($,U,t){var M=t(68664),E=t(71828),i=t(28984).wrap,S=E.isArrayOrTypedArray,A=E.isIndex,g=t(21081);function v(r){var f=r.node,n=r.link,a=[],o=S(n.color),h=S(n.customdata),y={},p={},x=n.colorscales.length,s;for(s=0;s<x;s++){var u=n.colorscales[s],c=g.extractScale(u,{cLetter:"c"}),T=g.makeColorScaleFunc(c);p[u.label]=T}var k=0;for(s=0;s<n.value.length;s++)n.source[s]>k&&(k=n.source[s]),n.target[s]>k&&(k=n.target[s]);var _=k+1;r.node._count=_;var b,P=r.node.groups,l={};for(s=0;s<P.length;s++){var d=P[s];for(b=0;b<d.length;b++){var L=d[b],w=_+s;l.hasOwnProperty(L)?E.warn("Node "+L+" is already part of a group."):l[L]=w}}var I={source:[],target:[]};for(s=0;s<n.value.length;s++){var z=n.value[s],B=n.source[s],O=n.target[s];if(z>0&&A(B,_)&&A(O,_)&&!(l.hasOwnProperty(B)&&l.hasOwnProperty(O)&&l[B]===l[O])){l.hasOwnProperty(O)&&(O=l[O]),l.hasOwnProperty(B)&&(B=l[B]),B=+B,O=+O,y[B]=y[O]=!0;var R="";n.label&&n.label[s]&&(R=n.label[s]);var C=null;R&&p.hasOwnProperty(R)&&(C=p[R]),a.push({pointNumber:s,label:R,color:o?n.color[s]:n.color,customdata:h?n.customdata[s]:n.customdata,concentrationscale:C,source:B,target:O,value:+z}),I.source.push(B),I.target.push(O)}}var F=_+P.length,N=S(f.color),V=S(f.customdata),K=[];for(s=0;s<F;s++)if(y[s]){var Q=f.label[s];K.push({group:s>_-1,childrenNodes:[],pointNumber:s,label:Q,color:N?f.color[s]:f.color,customdata:V?f.customdata[s]:f.customdata})}var at=!1;return e(F,I.source,I.target)&&(at=!0),{circular:at,links:a,nodes:K,groups:P,groupLookup:l}}function e(r,f,n){for(var a=E.init2dArray(r,0),o=0;o<Math.min(f.length,n.length);o++)if(E.isIndex(f[o],r)&&E.isIndex(n[o],r)){if(f[o]===n[o])return!0;a[f[o]].push(n[o])}var h=M(a);return h.components.some(function(y){return y.length>1})}$.exports=function(r,f){var n=v(f);return i({circular:n.circular,_nodes:n.nodes,_links:n.links,_groups:n.groups,_groupLookup:n.groupLookup})}},85247:function($){$.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},26857:function($,U,t){var M=t(71828),E=t(39953),i=t(7901),S=t(84267),A=t(27670).c,g=t(38048),v=t(44467),e=t(85501);$.exports=function(f,n,a,o){function h(l,d){return M.coerce(f,n,E,l,d)}var y=M.extendDeep(o.hoverlabel,f.hoverlabel),p=f.node,x=v.newContainer(n,"node");function s(l,d){return M.coerce(p,x,E.node,l,d)}s("label"),s("groups"),s("x"),s("y"),s("pad"),s("thickness"),s("line.color"),s("line.width"),s("hoverinfo",f.hoverinfo),g(p,x,s,y),s("hovertemplate");var u=o.colorway,c=function(l){return u[l%u.length]};s("color",x.label.map(function(l,d){return i.addOpacity(c(d),.8)})),s("customdata");var T=f.link||{},k=v.newContainer(n,"link");function _(l,d){return M.coerce(T,k,E.link,l,d)}_("label"),_("arrowlen"),_("source"),_("target"),_("value"),_("line.color"),_("line.width"),_("hoverinfo",f.hoverinfo),g(T,k,_,y),_("hovertemplate");var b=S(o.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";_("color",M.repeat(b,k.value.length)),_("customdata"),e(T,k,{name:"colorscales",handleItemDefaults:r}),A(n,o,h),h("orientation"),h("valueformat"),h("valuesuffix");var P;x.x.length&&x.y.length&&(P="freeform"),h("arrangement",P),M.coerceFont(h,"textfont",M.extendFlat({},o.font)),n._length=null};function r(f,n){function a(o,h){return M.coerce(f,n,E.link.colorscales,o,h)}a("label"),a("cmin"),a("cmax"),a("colorscale")}},29396:function($,U,t){$.exports={attributes:t(39953),supplyDefaults:t(26857),calc:t(92930),plot:t(60436),moduleType:"trace",name:"sankey",basePlotModule:t(75536),selectPoints:t(84564),categories:["noOpacity"],meta:{}}},60436:function($,U,t){var M=t(39898),E=t(71828),i=E.numberFormat,S=t(3393),A=t(30211),g=t(7901),v=t(85247).cn,e=E._;function r(c){return c!==""}function f(c,T){return c.filter(function(k){return k.key===T.traceId})}function n(c,T){M.select(c).select("path").style("fill-opacity",T),M.select(c).select("rect").style("fill-opacity",T)}function a(c){M.select(c).select("text.name").style("fill","black")}function o(c){return function(T){return c.node.sourceLinks.indexOf(T.link)!==-1||c.node.targetLinks.indexOf(T.link)!==-1}}function h(c){return function(T){return T.node.sourceLinks.indexOf(c.link)!==-1||T.node.targetLinks.indexOf(c.link)!==-1}}function y(c,T,k){T&&k&&f(k,T).selectAll("."+v.sankeyLink).filter(o(T)).call(x.bind(0,T,k,!1))}function p(c,T,k){T&&k&&f(k,T).selectAll("."+v.sankeyLink).filter(o(T)).call(s.bind(0,T,k,!1))}function x(c,T,k,_){var b=_.datum().link.label;_.style("fill-opacity",function(P){if(!P.link.concentrationscale)return .4}),b&&f(T,c).selectAll("."+v.sankeyLink).filter(function(P){return P.link.label===b}).style("fill-opacity",function(P){if(!P.link.concentrationscale)return .4}),k&&f(T,c).selectAll("."+v.sankeyNode).filter(h(c)).call(y)}function s(c,T,k,_){var b=_.datum().link.label;_.style("fill-opacity",function(P){return P.tinyColorAlpha}),b&&f(T,c).selectAll("."+v.sankeyLink).filter(function(P){return P.link.label===b}).style("fill-opacity",function(P){return P.tinyColorAlpha}),k&&f(T,c).selectAll(v.sankeyNode).filter(h(c)).call(p)}function u(c,T){var k=c.hoverlabel||{},_=E.nestedProperty(k,T).get();return Array.isArray(_)?!1:_}$.exports=function(c,T){for(var k=c._fullLayout,_=k._paper,b=k._size,P=0;P<c._fullData.length;P++)if(c._fullData[P].visible&&c._fullData[P].type===v.sankey&&!c._fullData[P]._viewInitial){var l=c._fullData[P].node;c._fullData[P]._viewInitial={node:{groups:l.groups.slice(),x:l.x.slice(),y:l.y.slice()}}}var d=function(Q,at){var it=at.link;it.originalEvent=M.event,c._hoverdata=[it],A.click(c,{target:!0})},L=function(Q,at,it){c._fullLayout.hovermode!==!1&&(M.select(Q).call(x.bind(0,at,it,!0)),at.link.trace.link.hoverinfo!=="skip"&&(at.link.fullData=at.link.trace,c.emit("plotly_hover",{event:M.event,points:[at.link]})))},w=e(c,"source:")+" ",I=e(c,"target:")+" ",z=e(c,"concentration:")+" ",B=e(c,"incoming flow count:")+" ",O=e(c,"outgoing flow count:")+" ",R=function(Q,at){if(c._fullLayout.hovermode===!1)return;var it=at.link.trace.link;if(it.hoverinfo==="none"||it.hoverinfo==="skip")return;var q=[];function W(ot){var rt,ht;ot.circular?(rt=(ot.circularPathData.leftInnerExtent+ot.circularPathData.rightInnerExtent)/2,ht=ot.circularPathData.verticalFullExtent):(rt=(ot.source.x1+ot.target.x0)/2,ht=(ot.y0+ot.y1)/2);var pt=[rt,ht];return ot.trace.orientation==="v"&&pt.reverse(),pt[0]+=at.parent.translateX,pt[1]+=at.parent.translateY,pt}for(var Z=0,G=0;G<at.flow.links.length;G++){var et=at.flow.links[G];if(!(c._fullLayout.hovermode==="closest"&&at.link.pointNumber!==et.pointNumber)){at.link.pointNumber===et.pointNumber&&(Z=G),et.fullData=et.trace,it=at.link.trace.link;var nt=W(et),X={valueLabel:i(at.valueFormat)(et.value)+at.valueSuffix};q.push({x:nt[0],y:nt[1],name:X.valueLabel,text:[et.label||"",w+et.source.label,I+et.target.label,et.concentrationscale?z+i("%0.2f")(et.flow.labelConcentration):""].filter(r).join("<br>"),color:u(it,"bgcolor")||g.addOpacity(et.color,1),borderColor:u(it,"bordercolor"),fontFamily:u(it,"font.family"),fontSize:u(it,"font.size"),fontColor:u(it,"font.color"),nameLength:u(it,"namelength"),textAlign:u(it,"align"),idealAlign:M.event.x<nt[0]?"right":"left",hovertemplate:it.hovertemplate,hovertemplateLabels:X,eventData:[et]})}}var Y=A.loneHover(q,{container:k._hoverlayer.node(),outerContainer:k._paper.node(),gd:c,anchorIndex:Z});Y.each(function(){var ot=this;at.link.concentrationscale||n(ot,.65),a(ot)})},C=function(Q,at,it){c._fullLayout.hovermode!==!1&&(M.select(Q).call(s.bind(0,at,it,!0)),at.link.trace.link.hoverinfo!=="skip"&&(at.link.fullData=at.link.trace,c.emit("plotly_unhover",{event:M.event,points:[at.link]})),A.loneUnhover(k._hoverlayer.node()))},F=function(Q,at,it){var q=at.node;q.originalEvent=M.event,c._hoverdata=[q],M.select(Q).call(p,at,it),A.click(c,{target:!0})},N=function(Q,at,it){c._fullLayout.hovermode!==!1&&(M.select(Q).call(y,at,it),at.node.trace.node.hoverinfo!=="skip"&&(at.node.fullData=at.node.trace,c.emit("plotly_hover",{event:M.event,points:[at.node]})))},V=function(Q,at){if(c._fullLayout.hovermode!==!1){var it=at.node.trace.node;if(!(it.hoverinfo==="none"||it.hoverinfo==="skip")){var q=M.select(Q).select("."+v.nodeRect),W=c._fullLayout._paperdiv.node().getBoundingClientRect(),Z=q.node().getBoundingClientRect(),G=Z.left-2-W.left,et=Z.right+2-W.left,nt=Z.top+Z.height/4-W.top,X={valueLabel:i(at.valueFormat)(at.node.value)+at.valueSuffix};at.node.fullData=at.node.trace,c._fullLayout._calcInverseTransform(c);var Y=c._fullLayout._invScaleX,ot=c._fullLayout._invScaleY,rt=A.loneHover({x0:Y*G,x1:Y*et,y:ot*nt,name:i(at.valueFormat)(at.node.value)+at.valueSuffix,text:[at.node.label,B+at.node.targetLinks.length,O+at.node.sourceLinks.length].filter(r).join("<br>"),color:u(it,"bgcolor")||at.tinyColorHue,borderColor:u(it,"bordercolor"),fontFamily:u(it,"font.family"),fontSize:u(it,"font.size"),fontColor:u(it,"font.color"),nameLength:u(it,"namelength"),textAlign:u(it,"align"),idealAlign:"left",hovertemplate:it.hovertemplate,hovertemplateLabels:X,eventData:[at.node]},{container:k._hoverlayer.node(),outerContainer:k._paper.node(),gd:c});n(rt,.85),a(rt)}}},K=function(Q,at,it){c._fullLayout.hovermode!==!1&&(M.select(Q).call(p,at,it),at.node.trace.node.hoverinfo!=="skip"&&(at.node.fullData=at.node.trace,c.emit("plotly_unhover",{event:M.event,points:[at.node]})),A.loneUnhover(k._hoverlayer.node()))};S(c,_,T,{width:b.w,height:b.h,margin:{t:b.t,r:b.r,b:b.b,l:b.l}},{linkEvents:{hover:L,follow:R,unhover:C,select:d},nodeEvents:{hover:N,follow:V,unhover:K,select:F}})}},3393:function($,U,t){var M=t(49887),E=t(81684).k4,i=t(39898),S=t(30838),A=t(86781),g=t(85247),v=t(84267),e=t(7901),r=t(91424),f=t(71828),n=f.strTranslate,a=f.strRotate,o=t(28984),h=o.keyFun,y=o.repeat,p=o.unwrap,x=t(63893),s=t(73972),u=t(18783),c=u.CAP_SHIFT,T=u.LINE_SPACING,k=3;function _(Z,G,et){var nt=p(G),X=nt.trace,Y=X.domain,ot=X.orientation==="h",rt=X.node.pad,ht=X.node.thickness,pt=Z.width*(Y.x[1]-Y.x[0]),yt=Z.height*(Y.y[1]-Y.y[0]),xt=nt._nodes,Ft=nt._links,Et=nt.circular,mt;Et?mt=A.sankeyCircular().circularLinkGap(0):mt=S.sankey(),mt.iterations(g.sankeyIterations).size(ot?[pt,yt]:[yt,pt]).nodeWidth(ht).nodePadding(rt).nodeId(function(we){return we.pointNumber}).nodes(xt).links(Ft);var gt=mt();mt.nodePadding()<rt&&f.warn("node.pad was reduced to ",mt.nodePadding()," to fit within the figure.");var wt,Pt,Bt;for(var kt in nt._groupLookup){var jt=parseInt(nt._groupLookup[kt]),Ht;for(wt=0;wt<gt.nodes.length;wt++)if(gt.nodes[wt].pointNumber===jt){Ht=gt.nodes[wt];break}if(Ht){var Vt={pointNumber:parseInt(kt),x0:Ht.x0,x1:Ht.x1,y0:Ht.y0,y1:Ht.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};gt.nodes.unshift(Vt),Ht.childrenNodes.unshift(Vt)}}function ee(){for(wt=0;wt<gt.nodes.length;wt++){var we=gt.nodes[wt],ve={},Mt,It;for(Pt=0;Pt<we.targetLinks.length;Pt++)It=we.targetLinks[Pt],Mt=It.source.pointNumber+":"+It.target.pointNumber,ve.hasOwnProperty(Mt)||(ve[Mt]=[]),ve[Mt].push(It);var Rt=Object.keys(ve);for(Pt=0;Pt<Rt.length;Pt++){Mt=Rt[Pt];var zt=ve[Mt],Tt=0,ft={};for(Bt=0;Bt<zt.length;Bt++)It=zt[Bt],ft[It.label]||(ft[It.label]=0),ft[It.label]+=It.value,Tt+=It.value;for(Bt=0;Bt<zt.length;Bt++)It=zt[Bt],It.flow={value:Tt,labelConcentration:ft[It.label]/Tt,concentration:It.value/Tt,links:zt},It.concentrationscale&&(It.color=v(It.concentrationscale(It.flow.labelConcentration)))}var ut=0;for(Pt=0;Pt<we.sourceLinks.length;Pt++)ut+=we.sourceLinks[Pt].value;for(Pt=0;Pt<we.sourceLinks.length;Pt++)It=we.sourceLinks[Pt],It.concentrationOut=It.value/ut;var vt=0;for(Pt=0;Pt<we.targetLinks.length;Pt++)vt+=we.targetLinks[Pt].value;for(Pt=0;Pt<we.targetLinks.length;Pt++)It=we.targetLinks[Pt],It.concenrationIn=It.value/vt}}ee();function te(we){we.forEach(function(ve){var Mt,It,Rt=0,zt=ve.length,Tt;for(ve.sort(function(ft,ut){return ft.y0-ut.y0}),Tt=0;Tt<zt;++Tt)Mt=ve[Tt],Mt.y0>=Rt||(It=Rt-Mt.y0,It>1e-6&&(Mt.y0+=It,Mt.y1+=It)),Rt=Mt.y1+rt})}function ae(we){var ve=we.map(function(ut,vt){return{x0:ut.x0,index:vt}}).sort(function(ut,vt){return ut.x0-vt.x0}),Mt=[],It=-1,Rt,zt=-1/0,Tt;for(wt=0;wt<ve.length;wt++){var ft=we[ve[wt].index];ft.x0>zt+ht&&(It+=1,Rt=ft.x0),zt=ft.x0,Mt[It]||(Mt[It]=[]),Mt[It].push(ft),Tt=Rt-ft.x0,ft.x0+=Tt,ft.x1+=Tt}return Mt}if(X.node.x.length&&X.node.y.length){for(wt=0;wt<Math.min(X.node.x.length,X.node.y.length,gt.nodes.length);wt++)if(X.node.x[wt]&&X.node.y[wt]){var le=[X.node.x[wt]*pt,X.node.y[wt]*yt];gt.nodes[wt].x0=le[0]-ht/2,gt.nodes[wt].x1=le[0]+ht/2;var ce=gt.nodes[wt].y1-gt.nodes[wt].y0;gt.nodes[wt].y0=le[1]-ce/2,gt.nodes[wt].y1=le[1]+ce/2}if(X.arrangement==="snap"){xt=gt.nodes;var pe=ae(xt);te(pe)}mt.update(gt)}return{circular:Et,key:et,trace:X,guid:f.randstr(),horizontal:ot,width:pt,height:yt,nodePad:X.node.pad,nodeLineColor:X.node.line.color,nodeLineWidth:X.node.line.width,linkLineColor:X.link.line.color,linkLineWidth:X.link.line.width,linkArrowLength:X.link.arrowlen,valueFormat:X.valueformat,valueSuffix:X.valuesuffix,textFont:X.textfont,translateX:Y.x[0]*Z.width+Z.margin.l,translateY:Z.height-Y.y[1]*Z.height+Z.margin.t,dragParallel:ot?yt:pt,dragPerpendicular:ot?pt:yt,arrangement:X.arrangement,sankey:mt,graph:gt,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function b(Z,G,et){var nt=v(G.color),X=G.source.label+"|"+G.target.label,Y=X+"__"+et;return G.trace=Z.trace,G.curveNumber=Z.trace.index,{circular:Z.circular,key:Y,traceId:Z.key,pointNumber:G.pointNumber,link:G,tinyColorHue:e.tinyRGB(nt),tinyColorAlpha:nt.getAlpha(),linkPath:l,linkLineColor:Z.linkLineColor,linkLineWidth:Z.linkLineWidth,linkArrowLength:Z.linkArrowLength,valueFormat:Z.valueFormat,valueSuffix:Z.valueSuffix,sankey:Z.sankey,parent:Z,interactionState:Z.interactionState,flow:G.flow}}function P(Z,G){var et="",nt=Z.width/2,X=Z.circularPathData;return Z.circularLinkType==="top"?et="M "+(X.targetX-G)+" "+(X.targetY+nt)+" L"+(X.rightInnerExtent-G)+" "+(X.targetY+nt)+"A"+(X.rightLargeArcRadius+nt)+" "+(X.rightSmallArcRadius+nt)+" 0 0 1 "+(X.rightFullExtent-nt-G)+" "+(X.targetY-X.rightSmallArcRadius)+"L"+(X.rightFullExtent-nt-G)+" "+X.verticalRightInnerExtent+"A"+(X.rightLargeArcRadius+nt)+" "+(X.rightLargeArcRadius+nt)+" 0 0 1 "+(X.rightInnerExtent-G)+" "+(X.verticalFullExtent-nt)+"L"+X.leftInnerExtent+" "+(X.verticalFullExtent-nt)+"A"+(X.leftLargeArcRadius+nt)+" "+(X.leftLargeArcRadius+nt)+" 0 0 1 "+(X.leftFullExtent+nt)+" "+X.verticalLeftInnerExtent+"L"+(X.leftFullExtent+nt)+" "+(X.sourceY-X.leftSmallArcRadius)+"A"+(X.leftLargeArcRadius+nt)+" "+(X.leftSmallArcRadius+nt)+" 0 0 1 "+X.leftInnerExtent+" "+(X.sourceY+nt)+"L"+X.sourceX+" "+(X.sourceY+nt)+"L"+X.sourceX+" "+(X.sourceY-nt)+"L"+X.leftInnerExtent+" "+(X.sourceY-nt)+"A"+(X.leftLargeArcRadius-nt)+" "+(X.leftSmallArcRadius-nt)+" 0 0 0 "+(X.leftFullExtent-nt)+" "+(X.sourceY-X.leftSmallArcRadius)+"L"+(X.leftFullExtent-nt)+" "+X.verticalLeftInnerExtent+"A"+(X.leftLargeArcRadius-nt)+" "+(X.leftLargeArcRadius-nt)+" 0 0 0 "+X.leftInnerExtent+" "+(X.verticalFullExtent+nt)+"L"+(X.rightInnerExtent-G)+" "+(X.verticalFullExtent+nt)+"A"+(X.rightLargeArcRadius-nt)+" "+(X.rightLargeArcRadius-nt)+" 0 0 0 "+(X.rightFullExtent+nt-G)+" "+X.verticalRightInnerExtent+"L"+(X.rightFullExtent+nt-G)+" "+(X.targetY-X.rightSmallArcRadius)+"A"+(X.rightLargeArcRadius-nt)+" "+(X.rightSmallArcRadius-nt)+" 0 0 0 "+(X.rightInnerExtent-G)+" "+(X.targetY-nt)+"L"+(X.targetX-G)+" "+(X.targetY-nt)+(G>0?"L"+X.targetX+" "+X.targetY:"")+"Z":et="M "+(X.targetX-G)+" "+(X.targetY-nt)+" L"+(X.rightInnerExtent-G)+" "+(X.targetY-nt)+"A"+(X.rightLargeArcRadius+nt)+" "+(X.rightSmallArcRadius+nt)+" 0 0 0 "+(X.rightFullExtent-nt-G)+" "+(X.targetY+X.rightSmallArcRadius)+"L"+(X.rightFullExtent-nt-G)+" "+X.verticalRightInnerExtent+"A"+(X.rightLargeArcRadius+nt)+" "+(X.rightLargeArcRadius+nt)+" 0 0 0 "+(X.rightInnerExtent-G)+" "+(X.verticalFullExtent+nt)+"L"+X.leftInnerExtent+" "+(X.verticalFullExtent+nt)+"A"+(X.leftLargeArcRadius+nt)+" "+(X.leftLargeArcRadius+nt)+" 0 0 0 "+(X.leftFullExtent+nt)+" "+X.verticalLeftInnerExtent+"L"+(X.leftFullExtent+nt)+" "+(X.sourceY+X.leftSmallArcRadius)+"A"+(X.leftLargeArcRadius+nt)+" "+(X.leftSmallArcRadius+nt)+" 0 0 0 "+X.leftInnerExtent+" "+(X.sourceY-nt)+"L"+X.sourceX+" "+(X.sourceY-nt)+"L"+X.sourceX+" "+(X.sourceY+nt)+"L"+X.leftInnerExtent+" "+(X.sourceY+nt)+"A"+(X.leftLargeArcRadius-nt)+" "+(X.leftSmallArcRadius-nt)+" 0 0 1 "+(X.leftFullExtent-nt)+" "+(X.sourceY+X.leftSmallArcRadius)+"L"+(X.leftFullExtent-nt)+" "+X.verticalLeftInnerExtent+"A"+(X.leftLargeArcRadius-nt)+" "+(X.leftLargeArcRadius-nt)+" 0 0 1 "+X.leftInnerExtent+" "+(X.verticalFullExtent-nt)+"L"+(X.rightInnerExtent-G)+" "+(X.verticalFullExtent-nt)+"A"+(X.rightLargeArcRadius-nt)+" "+(X.rightLargeArcRadius-nt)+" 0 0 1 "+(X.rightFullExtent+nt-G)+" "+X.verticalRightInnerExtent+"L"+(X.rightFullExtent+nt-G)+" "+(X.targetY+X.rightSmallArcRadius)+"A"+(X.rightLargeArcRadius-nt)+" "+(X.rightSmallArcRadius-nt)+" 0 0 1 "+(X.rightInnerExtent-G)+" "+(X.targetY+nt)+"L"+(X.targetX-G)+" "+(X.targetY+nt)+(G>0?"L"+X.targetX+" "+X.targetY:"")+"Z",et}function l(){var Z=.5;function G(et){var nt=et.linkArrowLength;if(et.link.circular)return P(et.link,nt);var X=Math.abs((et.link.target.x0-et.link.source.x1)/2);nt>X&&(nt=X);var Y=et.link.source.x1,ot=et.link.target.x0-nt,rt=E(Y,ot),ht=rt(Z),pt=rt(1-Z),yt=et.link.y0-et.link.width/2,xt=et.link.y0+et.link.width/2,Ft=et.link.y1-et.link.width/2,Et=et.link.y1+et.link.width/2,mt="M"+Y+","+yt,gt="C"+ht+","+yt+" "+pt+","+Ft+" "+ot+","+Ft,wt="C"+pt+","+Et+" "+ht+","+xt+" "+Y+","+xt,Pt=nt>0?"L"+(ot+nt)+","+(Ft+et.link.width/2):"";return Pt+="L"+ot+","+Et,mt+gt+Pt+wt+"Z"}return G}function d(Z,G){var et=v(G.color),nt=g.nodePadAcross,X=Z.nodePad/2;G.dx=G.x1-G.x0,G.dy=G.y1-G.y0;var Y=G.dx,ot=Math.max(.5,G.dy),rt="node_"+G.pointNumber;return G.group&&(rt=f.randstr()),G.trace=Z.trace,G.curveNumber=Z.trace.index,{index:G.pointNumber,key:rt,partOfGroup:G.partOfGroup||!1,group:G.group,traceId:Z.key,trace:Z.trace,node:G,nodePad:Z.nodePad,nodeLineColor:Z.nodeLineColor,nodeLineWidth:Z.nodeLineWidth,textFont:Z.textFont,size:Z.horizontal?Z.height:Z.width,visibleWidth:Math.ceil(Y),visibleHeight:ot,zoneX:-nt,zoneY:-X,zoneWidth:Y+2*nt,zoneHeight:ot+2*X,labelY:Z.horizontal?G.dy/2+1:G.dx/2+1,left:G.originalLayer===1,sizeAcross:Z.width,forceLayouts:Z.forceLayouts,horizontal:Z.horizontal,darkBackground:et.getBrightness()<=128,tinyColorHue:e.tinyRGB(et),tinyColorAlpha:et.getAlpha(),valueFormat:Z.valueFormat,valueSuffix:Z.valueSuffix,sankey:Z.sankey,graph:Z.graph,arrangement:Z.arrangement,uniqueNodeLabelPathId:[Z.guid,Z.key,rt].join("_"),interactionState:Z.interactionState,figure:Z}}function L(Z){Z.attr("transform",function(G){return n(G.node.x0.toFixed(3),G.node.y0.toFixed(3))})}function w(Z){Z.call(L)}function I(Z,G){Z.call(w),G.attr("d",l())}function z(Z){Z.attr("width",function(G){return G.node.x1-G.node.x0}).attr("height",function(G){return G.visibleHeight})}function B(Z){return Z.link.width>1||Z.linkLineWidth>0}function O(Z){var G=n(Z.translateX,Z.translateY);return G+(Z.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function R(Z,G,et){Z.on(".basic",null).on("mouseover.basic",function(nt){!nt.interactionState.dragInProgress&&!nt.partOfGroup&&(et.hover(this,nt,G),nt.interactionState.hovered=[this,nt])}).on("mousemove.basic",function(nt){!nt.interactionState.dragInProgress&&!nt.partOfGroup&&(et.follow(this,nt),nt.interactionState.hovered=[this,nt])}).on("mouseout.basic",function(nt){!nt.interactionState.dragInProgress&&!nt.partOfGroup&&(et.unhover(this,nt,G),nt.interactionState.hovered=!1)}).on("click.basic",function(nt){nt.interactionState.hovered&&(et.unhover(this,nt,G),nt.interactionState.hovered=!1),!nt.interactionState.dragInProgress&&!nt.partOfGroup&&et.select(this,nt,G)})}function C(Z,G,et,nt){var X=i.behavior.drag().origin(function(Y){return{x:Y.node.x0+Y.visibleWidth/2,y:Y.node.y0+Y.visibleHeight/2}}).on("dragstart",function(Y){if(Y.arrangement!=="fixed"&&(f.ensureSingle(nt._fullLayout._infolayer,"g","dragcover",function(rt){nt._fullLayout._dragCover=rt}),f.raiseToTop(this),Y.interactionState.dragInProgress=Y.node,at(Y.node),Y.interactionState.hovered&&(et.nodeEvents.unhover.apply(0,Y.interactionState.hovered),Y.interactionState.hovered=!1),Y.arrangement==="snap")){var ot=Y.traceId+"|"+Y.key;Y.forceLayouts[ot]?Y.forceLayouts[ot].alpha(1):F(Z,ot,Y),N(Z,G,Y,ot,nt)}}).on("drag",function(Y){if(Y.arrangement!=="fixed"){var ot=i.event.x,rt=i.event.y;Y.arrangement==="snap"?(Y.node.x0=ot-Y.visibleWidth/2,Y.node.x1=ot+Y.visibleWidth/2,Y.node.y0=rt-Y.visibleHeight/2,Y.node.y1=rt+Y.visibleHeight/2):(Y.arrangement==="freeform"&&(Y.node.x0=ot-Y.visibleWidth/2,Y.node.x1=ot+Y.visibleWidth/2),rt=Math.max(0,Math.min(Y.size-Y.visibleHeight/2,rt)),Y.node.y0=rt-Y.visibleHeight/2,Y.node.y1=rt+Y.visibleHeight/2),at(Y.node),Y.arrangement!=="snap"&&(Y.sankey.update(Y.graph),I(Z.filter(it(Y)),G))}}).on("dragend",function(Y){if(Y.arrangement!=="fixed"){Y.interactionState.dragInProgress=!1;for(var ot=0;ot<Y.node.childrenNodes.length;ot++)Y.node.childrenNodes[ot].x=Y.node.x,Y.node.childrenNodes[ot].y=Y.node.y;Y.arrangement!=="snap"&&K(Y,nt)}});Z.on(".drag",null).call(X)}function F(Z,G,et,nt){q(et.graph.nodes);var X=et.graph.nodes.filter(function(Y){return Y.originalX===et.node.originalX}).filter(function(Y){return!Y.partOfGroup});et.forceLayouts[G]=M.forceSimulation(X).alphaDecay(0).force("collide",M.forceCollide().radius(function(Y){return Y.dy/2+et.nodePad/2}).strength(1).iterations(g.forceIterations)).force("constrain",V(Z,G,X,et)).stop()}function N(Z,G,et,nt,X){window.requestAnimationFrame(function Y(){var ot;for(ot=0;ot<g.forceTicksPerFrame;ot++)et.forceLayouts[nt].tick();var rt=et.graph.nodes;if(W(rt),et.sankey.update(et.graph),I(Z.filter(it(et)),G),et.forceLayouts[nt].alpha()>0)window.requestAnimationFrame(Y);else{var ht=et.node.originalX;et.node.x0=ht-et.visibleWidth/2,et.node.x1=ht+et.visibleWidth/2,K(et,X)}})}function V(Z,G,et,nt){return function(){for(var X=0,Y=0;Y<et.length;Y++){var ot=et[Y];ot===nt.interactionState.dragInProgress?(ot.x=ot.lastDraggedX,ot.y=ot.lastDraggedY):(ot.vx=(ot.originalX-ot.x)/g.forceTicksPerFrame,ot.y=Math.min(nt.size-ot.dy/2,Math.max(ot.dy/2,ot.y))),X=Math.max(X,Math.abs(ot.vx),Math.abs(ot.vy))}!nt.interactionState.dragInProgress&&X<.1&&nt.forceLayouts[G].alpha()>0&&nt.forceLayouts[G].alpha(0)}}function K(Z,G){for(var et=[],nt=[],X=0;X<Z.graph.nodes.length;X++){var Y=(Z.graph.nodes[X].x0+Z.graph.nodes[X].x1)/2,ot=(Z.graph.nodes[X].y0+Z.graph.nodes[X].y1)/2;et.push(Y/Z.figure.width),nt.push(ot/Z.figure.height)}s.call("_guiRestyle",G,{"node.x":[et],"node.y":[nt]},Z.trace.index).then(function(){G._fullLayout._dragCover&&G._fullLayout._dragCover.remove()})}function Q(Z){var G=[],et;for(et=0;et<Z.length;et++)Z[et].originalX=(Z[et].x0+Z[et].x1)/2,Z[et].originalY=(Z[et].y0+Z[et].y1)/2,G.indexOf(Z[et].originalX)===-1&&G.push(Z[et].originalX);for(G.sort(function(nt,X){return nt-X}),et=0;et<Z.length;et++)Z[et].originalLayerIndex=G.indexOf(Z[et].originalX),Z[et].originalLayer=Z[et].originalLayerIndex/(G.length-1)}function at(Z){Z.lastDraggedX=Z.x0+Z.dx/2,Z.lastDraggedY=Z.y0+Z.dy/2}function it(Z){return function(G){return G.node.originalX===Z.node.originalX}}function q(Z){for(var G=0;G<Z.length;G++)Z[G].y=(Z[G].y0+Z[G].y1)/2,Z[G].x=(Z[G].x0+Z[G].x1)/2}function W(Z){for(var G=0;G<Z.length;G++)Z[G].y0=Z[G].y-Z[G].dy/2,Z[G].y1=Z[G].y0+Z[G].dy,Z[G].x0=Z[G].x-Z[G].dx/2,Z[G].x1=Z[G].x0+Z[G].dx}$.exports=function(Z,G,et,nt,X){var Y=Z._context.staticPlot,ot=!1;f.ensureSingle(Z._fullLayout._infolayer,"g","first-render",function(){ot=!0});var rt=Z._fullLayout._dragCover,ht=et.filter(function(wt){return p(wt).trace.visible}).map(_.bind(null,nt)),pt=G.selectAll("."+g.cn.sankey).data(ht,h);pt.exit().remove(),pt.enter().append("g").classed(g.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",Y?"none":"auto").attr("transform",O),pt.each(function(wt,Pt){Z._fullData[Pt]._sankey=wt;var Bt="bgsankey-"+wt.trace.uid+"-"+Pt;f.ensureSingle(Z._fullLayout._draggers,"rect",Bt),Z._fullData[Pt]._bgRect=i.select("."+Bt),Z._fullData[Pt]._bgRect.style("pointer-events",Y?"none":"all").attr("width",wt.width).attr("height",wt.height).attr("x",wt.translateX).attr("y",wt.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),pt.transition().ease(g.ease).duration(g.duration).attr("transform",O);var yt=pt.selectAll("."+g.cn.sankeyLinks).data(y,h);yt.enter().append("g").classed(g.cn.sankeyLinks,!0).style("fill","none");var xt=yt.selectAll("."+g.cn.sankeyLink).data(function(wt){var Pt=wt.graph.links;return Pt.filter(function(Bt){return Bt.value}).map(b.bind(null,wt))},h);xt.enter().append("path").classed(g.cn.sankeyLink,!0).call(R,pt,X.linkEvents),xt.style("stroke",function(wt){return B(wt)?e.tinyRGB(v(wt.linkLineColor)):wt.tinyColorHue}).style("stroke-opacity",function(wt){return B(wt)?e.opacity(wt.linkLineColor):wt.tinyColorAlpha}).style("fill",function(wt){return wt.tinyColorHue}).style("fill-opacity",function(wt){return wt.tinyColorAlpha}).style("stroke-width",function(wt){return B(wt)?wt.linkLineWidth:1}).attr("d",l()),xt.style("opacity",function(){return Z._context.staticPlot||ot||rt?1:0}).transition().ease(g.ease).duration(g.duration).style("opacity",1),xt.exit().transition().ease(g.ease).duration(g.duration).style("opacity",0).remove();var Ft=pt.selectAll("."+g.cn.sankeyNodeSet).data(y,h);Ft.enter().append("g").classed(g.cn.sankeyNodeSet,!0),Ft.style("cursor",function(wt){switch(wt.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var Et=Ft.selectAll("."+g.cn.sankeyNode).data(function(wt){var Pt=wt.graph.nodes;return Q(Pt),Pt.map(d.bind(null,wt))},h);Et.enter().append("g").classed(g.cn.sankeyNode,!0).call(L).style("opacity",function(wt){return(Z._context.staticPlot||ot)&&!wt.partOfGroup?1:0}),Et.call(R,pt,X.nodeEvents).call(C,xt,X,Z),Et.transition().ease(g.ease).duration(g.duration).call(L).style("opacity",function(wt){return wt.partOfGroup?0:1}),Et.exit().transition().ease(g.ease).duration(g.duration).style("opacity",0).remove();var mt=Et.selectAll("."+g.cn.nodeRect).data(y);mt.enter().append("rect").classed(g.cn.nodeRect,!0).call(z),mt.style("stroke-width",function(wt){return wt.nodeLineWidth}).style("stroke",function(wt){return e.tinyRGB(v(wt.nodeLineColor))}).style("stroke-opacity",function(wt){return e.opacity(wt.nodeLineColor)}).style("fill",function(wt){return wt.tinyColorHue}).style("fill-opacity",function(wt){return wt.tinyColorAlpha}),mt.transition().ease(g.ease).duration(g.duration).call(z);var gt=Et.selectAll("."+g.cn.nodeLabel).data(y);gt.enter().append("text").classed(g.cn.nodeLabel,!0).style("cursor","default"),gt.attr("data-notex",1).text(function(wt){return wt.node.label}).each(function(wt){var Pt=i.select(this);r.font(Pt,wt.textFont),x.convertToTspans(Pt,Z)}).style("text-shadow",x.makeTextShadow(Z._fullLayout.paper_bgcolor)).attr("text-anchor",function(wt){return wt.horizontal&&wt.left?"end":"start"}).attr("transform",function(wt){var Pt=i.select(this),Bt=x.lineCount(Pt),kt=wt.textFont.size*((Bt-1)*T-c),jt=wt.nodeLineWidth/2+k,Ht=((wt.horizontal?wt.visibleHeight:wt.visibleWidth)-kt)/2;wt.horizontal&&(wt.left?jt=-jt:jt+=wt.visibleWidth);var Vt=wt.horizontal?"":"scale(-1,1)"+a(90);return n(wt.horizontal?jt:Ht,wt.horizontal?Ht:jt)+Vt}),gt.transition().ease(g.ease).duration(g.duration)}},84564:function($){$.exports=function(U,t){for(var M=U.cd,E=[],i=M[0].trace,S=i._sankey.graph.nodes,A=0;A<S.length;A++){var g=S[A];if(!g.partOfGroup){var v=[(g.x0+g.x1)/2,(g.y0+g.y1)/2];i.orientation==="v"&&v.reverse(),t&&t.contains(v,!1,A,U)&&E.push({pointNumber:g.pointNumber})}}return E}},75225:function($,U,t){var M=t(71828);$.exports=function(E,i){for(var S=0;S<E.length;S++)E[S].i=S;M.mergeArray(i.text,E,"tx"),M.mergeArray(i.texttemplate,E,"txt"),M.mergeArray(i.hovertext,E,"htx"),M.mergeArray(i.customdata,E,"data"),M.mergeArray(i.textposition,E,"tp"),i.textfont&&(M.mergeArrayCastPositive(i.textfont.size,E,"ts"),M.mergeArray(i.textfont.color,E,"tc"),M.mergeArray(i.textfont.family,E,"tf"));var A=i.marker;if(A){M.mergeArrayCastPositive(A.size,E,"ms"),M.mergeArrayCastPositive(A.opacity,E,"mo"),M.mergeArray(A.symbol,E,"mx"),M.mergeArray(A.angle,E,"ma"),M.mergeArray(A.standoff,E,"mf"),M.mergeArray(A.color,E,"mc");var g=A.line;A.line&&(M.mergeArray(g.color,E,"mlc"),M.mergeArrayCastPositive(g.width,E,"mlw"));var v=A.gradient;v&&v.type!=="none"&&(M.mergeArray(v.type,E,"mgt"),M.mergeArray(v.color,E,"mgc"))}}},82196:function($,U,t){var M=t(12663).axisHoverFormat,E=t(5386).si,i=t(5386).fF,S=t(50693),A=t(41940),g=t(79952).P,v=t(79952).u,e=t(91424),r=t(47581),f=t(1426).extendFlat;function n(h){return{valType:"any",dflt:0,editType:"calc"}}function a(h){return{valType:"any",editType:"calc"}}function o(h){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}$.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:n(),yperiod:n(),xperiod0:a(),yperiod0:a(),xperiodalignment:o(),yperiodalignment:o(),xhoverformat:M("x"),yhoverformat:M("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:E({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:i({},{keys:r.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:f({},g,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:v,marker:f({symbol:{valType:"enumerated",values:e.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:f({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},S("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},S("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:A({editType:"calc",colorEditType:"style",arrayOk:!0})}},47761:function($,U,t){var M=t(92770),E=t(71828),i=t(89298),S=t(42973),A=t(50606).BADNUM,g=t(34098),v=t(36922),e=t(75225),r=t(66279);function f(p,x){var s=p._fullLayout,u=x._xA=i.getFromId(p,x.xaxis||"x","x"),c=x._yA=i.getFromId(p,x.yaxis||"y","y"),T=u.makeCalcdata(x,"x"),k=c.makeCalcdata(x,"y"),_=S(x,u,"x",T),b=S(x,c,"y",k),P=_.vals,l=b.vals,d=x._length,L=new Array(d),w=x.ids,I=y(x,s,u,c),z=!1,B,O,R,C,F,N;o(s,x);var V="x",K="y",Q;if(I)E.pushUnique(I.traceIndices,x._expandedIndex),B=I.orientation==="v",B?(K="s",Q="x"):(V="s",Q="y"),F=I.stackgaps==="interpolate";else{var at=a(x,d);n(p,x,u,c,P,l,at)}var it=!!x.xperiodalignment,q=!!x.yperiodalignment;for(O=0;O<d;O++){var W=L[O]={},Z=M(P[O]),G=M(l[O]);Z&&G?(W[V]=P[O],W[K]=l[O],it&&(W.orig_x=T[O],W.xEnd=_.ends[O],W.xStart=_.starts[O]),q&&(W.orig_y=k[O],W.yEnd=b.ends[O],W.yStart=b.starts[O])):I&&(B?Z:G)?(W[Q]=B?P[O]:l[O],W.gap=!0,F?(W.s=A,z=!0):W.s=0):W[V]=W[K]=A,w&&(W.id=String(w[O]))}if(e(L,x),v(p,x),r(L,x),I){for(O=0;O<L.length;)L[O][Q]===A?L.splice(O,1):O++;if(E.sort(L,function(Y,ot){return Y[Q]-ot[Q]||Y.i-ot.i}),z){for(O=0;O<L.length-1&&L[O].gap;)O++;for(N=L[O].s,N||(N=L[O].s=0),R=0;R<O;R++)L[R].s=N;for(C=L.length-1;C>O&&L[C].gap;)C--;for(N=L[C].s,R=L.length-1;R>C;R--)L[R].s=N;for(;O<C;)if(O++,L[O].gap){for(R=O+1;L[R].gap;)R++;for(var et=L[O-1][Q],nt=L[O-1].s,X=(L[R].s-nt)/(L[R][Q]-et);O<R;)L[O].s=nt+(L[O][Q]-et)*X,O++}}}return L}function n(p,x,s,u,c,T,k){var _=x._length,b=p._fullLayout,P=s._id,l=u._id,d=b._firstScatter[h(x)]===x.uid,L=(y(x,b,s,u)||{}).orientation,w=x.fill;s._minDtick=0,u._minDtick=0;var I={padded:!0},z={padded:!0};k&&(I.ppad=z.ppad=k);var B=_<2||c[0]!==c[_-1]||T[0]!==T[_-1];B&&(w==="tozerox"||w==="tonextx"&&(d||L==="h"))?I.tozero=!0:!(x.error_y||{}).visible&&(w==="tonexty"||w==="tozeroy"||!g.hasMarkers(x)&&!g.hasText(x))&&(I.padded=!1,I.ppad=0),B&&(w==="tozeroy"||w==="tonexty"&&(d||L==="v"))?z.tozero=!0:(w==="tonextx"||w==="tozerox")&&(z.padded=!1),P&&(x._extremes[P]=i.findExtremes(s,c,I)),l&&(x._extremes[l]=i.findExtremes(u,T,z))}function a(p,x){if(g.hasMarkers(p)){var s=p.marker,u=1.6*(p.marker.sizeref||1),c;if(p.marker.sizemode==="area"?c=function(P){return Math.max(Math.sqrt((P||0)/u),3)}:c=function(P){return Math.max((P||0)/u,3)},E.isArrayOrTypedArray(s.size)){var T={type:"linear"};i.setConvert(T);for(var k=T.makeCalcdata(p.marker,"size"),_=new Array(x),b=0;b<x;b++)_[b]=c(k[b]);return _}else return c(s.size)}}function o(p,x){var s=h(x),u=p._firstScatter;u[s]||(u[s]=x.uid)}function h(p){var x=p.stackgroup;return p.xaxis+p.yaxis+p.type+(x?"-"+x:"")}function y(p,x,s,u){var c=p.stackgroup;if(c){var T=x._scatterStackOpts[s._id+u._id][c],k=T.orientation==="v"?u:s;if(k.type==="linear"||k.type==="log")return T}}$.exports={calc:f,calcMarkerSize:a,calcAxisExpansion:n,setFirstScatter:o,getStackOpts:y}},66279:function($,U,t){var M=t(71828);$.exports=function(E,i){M.isArrayOrTypedArray(i.selectedpoints)&&M.tagSelected(E,i)}},36922:function($,U,t){var M=t(52075).hasColorscale,E=t(78803),i=t(34098);$.exports=function(S,A){i.hasLines(A)&&M(A,"line")&&E(S,A,{vals:A.line.color,containerStr:"line",cLetter:"c"}),i.hasMarkers(A)&&(M(A,"marker")&&E(S,A,{vals:A.marker.color,containerStr:"marker",cLetter:"c"}),M(A,"marker.line")&&E(S,A,{vals:A.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},47581:function($){$.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},72626:function($,U,t){var M=t(47761),E=t(11661).setGroupPositions;function i(g,v){for(var e=v.xaxis,r=v.yaxis,f=g._fullLayout,n=g._fullData,a=g.calcdata,o=[],h=[],y=0;y<n.length;y++){var p=n[y];p.visible===!0&&p.type==="scatter"&&p.xaxis===e._id&&p.yaxis===r._id&&(p.orientation==="h"?o.push(a[y]):p.orientation==="v"&&h.push(a[y]))}var x={mode:f.scattermode,gap:f.scattergap};E(g,e,r,h,x),E(g,r,e,o,x)}$.exports=function(g,v){g._fullLayout.scattermode==="group"&&i(g,v);var e=v.xaxis,r=v.yaxis,f=e._id+r._id,n=g._fullLayout._scatterStackOpts[f];if(n){var a=g.calcdata,o,h,y,p,x,s,u,c,T,k,_,b,P,l,d;for(var L in n){k=n[L];var w=k.traceIndices;if(w.length){for(_=k.stackgaps==="interpolate",b=k.groupnorm,k.orientation==="v"?(P="x",l="y"):(P="y",l="x"),d=new Array(w.length),o=0;o<d.length;o++)d[o]=!1;s=a[w[0]];var I=new Array(s.length);for(o=0;o<s.length;o++)I[o]=s[o][P];for(o=1;o<w.length;o++){for(x=a[w[o]],h=y=0;h<x.length;h++){for(u=x[h][P];u>I[y]&&y<I.length;y++)S(x,h,I[y],o,d,_,P),h++;if(u!==I[y]){for(p=0;p<o;p++)S(a[w[p]],y,u,p,d,_,P);I.splice(y,0,u)}y++}for(;y<I.length;y++)S(x,h,I[y],o,d,_,P),h++}var z=I.length;for(h=0;h<s.length;h++){for(c=s[h][l]=s[h].s,o=1;o<w.length;o++)x=a[w[o]],x[0].trace._rawLength=x[0].trace._length,x[0].trace._length=z,c+=x[h].s,x[h][l]=c;if(b)for(T=(b==="fraction"?c:c/100)||1,o=0;o<w.length;o++){var B=a[w[o]][h];B[l]/=T,B.sNorm=B.s/T}}for(o=0;o<w.length;o++){x=a[w[o]];var O=x[0].trace,R=M.calcMarkerSize(O,O._rawLength),C=Array.isArray(R);if(R&&d[o]||C){var F=R;for(R=new Array(z),h=0;h<z;h++)R[h]=x[h].gap?0:C?F[x[h].i]:F}var N=new Array(z),V=new Array(z);for(h=0;h<z;h++)N[h]=x[h].x,V[h]=x[h].y;M.calcAxisExpansion(g,O,e,r,N,V,R),x[0].t.orientation=k.orientation}}}}};function S(g,v,e,r,f,n,a){f[r]=!0;var o={i:null,gap:!0,s:0};if(o[a]=e,g.splice(v,0,o),v&&e===g[v-1][a]){var h=g[v-1];o.s=h.s,o.i=h.i,o.gap=h.gap}else n&&(o.s=A(g,v,e,a));v||(g[0].t=g[1].t,g[0].trace=g[1].trace,delete g[1].t,delete g[1].trace)}function A(g,v,e,r){var f=g[v-1],n=g[v+1];return n?f?f.s+(n.s-f.s)*(e-f[r])/(n[r]-f[r]):n.s:f.s}},34936:function($,U,t){var M=t(71828),E=t(26125),i=t(82196);$.exports=function(S,A){var g,v,e;function r(h){return M.coerce(v._input,v,i,h)}if(A.scattermode==="group")for(e=0;e<S.length;e++)v=S[e],v.type==="scatter"&&(g=v._input,E(g,v,A,r));for(e=0;e<S.length;e++){var f=S[e];if(f.type==="scatter"){var n=f.fill;if(!(n==="none"||n==="toself")&&(f.opacity=void 0,n==="tonexty"||n==="tonextx"))for(var a=e-1;a>=0;a--){var o=S[a];if(o.type==="scatter"&&o.xaxis===f.xaxis&&o.yaxis===f.yaxis){o.opacity=void 0;break}}}}}},17438:function($,U,t){var M=t(71828),E=t(73972),i=t(82196),S=t(47581),A=t(34098),g=t(67513),v=t(73927),e=t(565),r=t(49508),f=t(11058),n=t(94039),a=t(82410),o=t(28908),h=t(71828).coercePattern;$.exports=function(y,p,x,s){function u(d,L){return M.coerce(y,p,i,d,L)}var c=g(y,p,s,u);if(c||(p.visible=!1),!!p.visible){v(y,p,s,u),u("xhoverformat"),u("yhoverformat");var T=e(y,p,s,u);s.scattermode==="group"&&p.orientation===void 0&&u("orientation","v");var k=!T&&c<S.PTS_LINESONLY?"lines+markers":"lines";u("text"),u("hovertext"),u("mode",k),A.hasLines(p)&&(f(y,p,x,s,u,{backoff:!0}),n(y,p,u),u("connectgaps"),u("line.simplify")),A.hasMarkers(p)&&r(y,p,x,s,u,{gradient:!0}),A.hasText(p)&&(u("texttemplate"),a(y,p,s,u));var _=[];(A.hasMarkers(p)||A.hasText(p))&&(u("cliponaxis"),u("marker.maxdisplayed"),_.push("points")),u("fill",T?T.fillDflt:"none"),p.fill!=="none"&&(o(y,p,x,u),A.hasLines(p)||n(y,p,u),h(u,"fillpattern",p.fillcolor,!1));var b=(p.line||{}).color,P=(p.marker||{}).color;(p.fill==="tonext"||p.fill==="toself")&&_.push("fills"),u("hoveron",_.join("+")||"points"),p.hoveron!=="fills"&&u("hovertemplate");var l=E.getComponentMethod("errorbars","supplyDefaults");l(y,p,b||P||x,{axis:"y"}),l(y,p,b||P||x,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(p,u)}}},28908:function($,U,t){var M=t(7901),E=t(71828).isArrayOrTypedArray;$.exports=function(i,S,A,g){var v=!1;if(S.marker){var e=S.marker.color,r=(S.marker.line||{}).color;e&&!E(e)?v=e:r&&!E(r)&&(v=r)}g("fillcolor",M.addOpacity((S.line||{}).color||v||A,.5))}},8225:function($,U,t){var M=t(89298);$.exports=function(E,i,S){var A={},g={_fullLayout:S},v=M.getFromTrace(g,i,"x"),e=M.getFromTrace(g,i,"y"),r=E.orig_x;r===void 0&&(r=E.x);var f=E.orig_y;return f===void 0&&(f=E.y),A.xLabel=M.tickText(v,v.c2l(r),!0).text,A.yLabel=M.tickText(e,e.c2l(f),!0).text,A}},34603:function($,U,t){var M=t(7901),E=t(34098);$.exports=function(i,S){var A,g;if(i.mode==="lines")return A=i.line.color,A&&M.opacity(A)?A:i.fillcolor;if(i.mode==="none")return i.fill?i.fillcolor:"";var v=S.mcc||(i.marker||{}).color,e=S.mlcc||((i.marker||{}).line||{}).color;return g=v&&M.opacity(v)?v:e&&M.opacity(e)&&(S.mlw||((i.marker||{}).line||{}).width)?e:"",g?M.opacity(g)<.3?M.addOpacity(g,.3):g:(A=(i.line||{}).color,A&&M.opacity(A)&&E.hasLines(i)&&i.line.width?A:i.fillcolor)}},26125:function($,U,t){var M=t(99082).getAxisGroup;$.exports=function(E,i,S,A){var g=i.orientation,v=i[{v:"x",h:"y"}[g]+"axis"],e=M(S,v)+g,r=S._alignmentOpts||{},f=A("alignmentgroup"),n=r[e];n||(n=r[e]={});var a=n[f];a?a.traces.push(i):a=n[f]={traces:[i],alignmentIndex:Object.keys(n).length,offsetGroups:{}};var o=A("offsetgroup"),h=a.offsetGroups,y=h[o];o&&(y||(y=h[o]={offsetIndex:Object.keys(h).length}),i._offsetIndex=y.offsetIndex)}},33720:function($,U,t){var M=t(71828),E=t(30211),i=t(73972),S=t(34603),A=t(7901),g=M.fillText;$.exports=function(v,e,r,f){var n=v.cd,a=n[0].trace,o=v.xa,h=v.ya,y=o.c2p(e),p=h.c2p(r),x=[y,p],s=a.hoveron||"",u=a.mode.indexOf("markers")!==-1?3:.5,c=!!a.xperiodalignment,T=!!a.yperiodalignment;if(s.indexOf("points")!==-1){var k=function(rt){if(c){var ht=o.c2p(rt.xStart),pt=o.c2p(rt.xEnd);return y>=Math.min(ht,pt)&&y<=Math.max(ht,pt)?0:1/0}var yt=Math.max(3,rt.mrc||0),xt=1-1/yt,Ft=Math.abs(o.c2p(rt.x)-y);return Ft<yt?xt*Ft/yt:Ft-yt+xt},_=function(rt){if(T){var ht=h.c2p(rt.yStart),pt=h.c2p(rt.yEnd);return p>=Math.min(ht,pt)&&p<=Math.max(ht,pt)?0:1/0}var yt=Math.max(3,rt.mrc||0),xt=1-1/yt,Ft=Math.abs(h.c2p(rt.y)-p);return Ft<yt?xt*Ft/yt:Ft-yt+xt},b=function(rt){var ht=Math.max(u,rt.mrc||0),pt=o.c2p(rt.x)-y,yt=h.c2p(rt.y)-p;return Math.max(Math.sqrt(pt*pt+yt*yt)-ht,1-u/ht)},P=E.getDistanceFunction(f,k,_,b);if(E.getClosest(n,P,v),v.index!==!1){var l=n[v.index],d=o.c2p(l.x,!0),L=h.c2p(l.y,!0),w=l.mrc||1;v.index=l.i;var I=n[0].t.orientation,z=I&&(l.sNorm||l.s),B=I==="h"?z:l.orig_x!==void 0?l.orig_x:l.x,O=I==="v"?z:l.orig_y!==void 0?l.orig_y:l.y;return M.extendFlat(v,{color:S(a,l),x0:d-w,x1:d+w,xLabelVal:B,y0:L-w,y1:L+w,yLabelVal:O,spikeDistance:b(l),hovertemplate:a.hovertemplate}),g(l,a,v),i.getComponentMethod("errorbars","hoverInfo")(l,a,v),[v]}}if(s.indexOf("fills")!==-1&&a._polygons){var R=a._polygons,C=[],F=!1,N=1/0,V=-1/0,K=1/0,Q=-1/0,at,it,q,W,Z,G,et,nt,X;for(at=0;at<R.length;at++)q=R[at],q.contains(x)&&(F=!F,C.push(q),K=Math.min(K,q.ymin),Q=Math.max(Q,q.ymax));if(F){K=Math.max(K,0),Q=Math.min(Q,h._length);var Y=(K+Q)/2;for(at=0;at<C.length;at++)for(W=C[at].pts,it=1;it<W.length;it++)nt=W[it-1][1],X=W[it][1],nt>Y!=X>=Y&&(G=W[it-1][0],et=W[it][0],X-nt&&(Z=G+(et-G)*(Y-nt)/(X-nt),N=Math.min(N,Z),V=Math.max(V,Z)));N=Math.max(N,0),V=Math.min(V,o._length);var ot=A.defaultLine;return A.opacity(a.fillcolor)?ot=a.fillcolor:A.opacity((a.line||{}).color)&&(ot=a.line.color),M.extendFlat(v,{distance:v.maxHoverDistance,x0:N,x1:V,y0:Y,y1:Y,color:ot,hovertemplate:!1}),delete v.index,a.text&&!Array.isArray(a.text)?v.text=String(a.text):v.text=a.name,[v]}}}},67368:function($,U,t){var M=t(34098);$.exports={hasLines:M.hasLines,hasMarkers:M.hasMarkers,hasText:M.hasText,isBubble:M.isBubble,attributes:t(82196),layoutAttributes:t(21479),supplyDefaults:t(17438),crossTraceDefaults:t(34936),supplyLayoutDefaults:t(79334),calc:t(47761).calc,crossTraceCalc:t(72626),arraysToCalcdata:t(75225),plot:t(32663),colorbar:t(4898),formatLabels:t(8225),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(33720),selectPoints:t(98002),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:t(93612),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},21479:function($){$.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},79334:function($,U,t){var M=t(71828),E=t(21479);$.exports=function(i,S){function A(v,e){return M.coerce(i,S,E,v,e)}var g=S.barmode==="group";S.scattermode==="group"&&A("scattergap",g?S.bargap:.2)}},11058:function($,U,t){var M=t(71828).isArrayOrTypedArray,E=t(52075).hasColorscale,i=t(1586);$.exports=function(S,A,g,v,e,r){r||(r={});var f=(S.marker||{}).color;if(e("line.color",g),E(S,"line"))i(S,A,v,e,{prefix:"line.",cLetter:"c"});else{var n=(M(f)?!1:f)||g;e("line.color",n)}e("line.width"),r.noDash||e("line.dash"),r.backoff&&e("line.backoff")}},34621:function($,U,t){var M=t(91424),E=t(50606),i=E.BADNUM,S=E.LOG_CLIP,A=S+.5,g=S-.5,v=t(71828),e=v.segmentsIntersect,r=v.constrain,f=t(47581);$.exports=function(n,a){var o=a.trace||{},h=a.xaxis,y=a.yaxis,p=h.type==="log",x=y.type==="log",s=h._length,u=y._length,c=a.backoff,T=o.marker,k=a.connectGaps,_=a.baseTolerance,b=a.shape,P=b==="linear",l=o.fill&&o.fill!=="none",d=[],L=f.minTolerance,w=n.length,I=new Array(w),z=0,B,O,R,C,F,N,V,K,Q,at,it,q,W,Z,G,et;function nt($t){var de=n[$t];if(!de)return!1;var Me=a.linearized?h.l2p(de.x):h.c2p(de.x),Fe=a.linearized?y.l2p(de.y):y.c2p(de.y);if(Me===i){if(p&&(Me=h.c2p(de.x,!0)),Me===i)return!1;x&&Fe===i&&(Me*=Math.abs(h._m*u*(h._m>0?A:g)/(y._m*s*(y._m>0?A:g)))),Me*=1e3}if(Fe===i){if(x&&(Fe=y.c2p(de.y,!0)),Fe===i)return!1;Fe*=1e3}return[Me,Fe]}function X($t,de,Me,Fe){var De=Me-$t,Ae=Fe-de,Ve=.5-$t,Qe=.5-de,Sr=De*De+Ae*Ae,he=De*Ve+Ae*Qe;if(he>0&&he<Sr){var je=Ve*Ae-Qe*De;if(je*je<Sr)return!0}}var Y,ot;function rt($t,de){var Me=$t[0]/s,Fe=$t[1]/u,De=Math.max(0,-Me,Me-1,-Fe,Fe-1);return De&&Y!==void 0&&X(Me,Fe,Y,ot)&&(De=0),De&&de&&X(Me,Fe,de[0]/s,de[1]/u)&&(De=0),(1+f.toleranceGrowth*De)*_}function ht($t,de){var Me=$t[0]-de[0],Fe=$t[1]-de[1];return Math.sqrt(Me*Me+Fe*Fe)}var pt=f.maxScreensAway,yt=-s*pt,xt=s*(1+pt),Ft=-u*pt,Et=u*(1+pt),mt=[[yt,Ft,xt,Ft],[xt,Ft,xt,Et],[xt,Et,yt,Et],[yt,Et,yt,Ft]],gt,wt,Pt,Bt,kt,jt;function Ht($t,de){for(var Me=[],Fe=0,De=0;De<4;De++){var Ae=mt[De],Ve=e($t[0],$t[1],de[0],de[1],Ae[0],Ae[1],Ae[2],Ae[3]);Ve&&(!Fe||Math.abs(Ve.x-Me[0][0])>1||Math.abs(Ve.y-Me[0][1])>1)&&(Ve=[Ve.x,Ve.y],Fe&&ht(Ve,$t)<ht(Me[0],$t)?Me.unshift(Ve):Me.push(Ve),Fe++)}return Me}function Vt($t){if($t[0]<yt||$t[0]>xt||$t[1]<Ft||$t[1]>Et)return[r($t[0],yt,xt),r($t[1],Ft,Et)]}function ee($t,de){if($t[0]===de[0]&&($t[0]===yt||$t[0]===xt)||$t[1]===de[1]&&($t[1]===Ft||$t[1]===Et))return!0}function te($t,de){var Me=[],Fe=Vt($t),De=Vt(de);return Fe&&De&&ee(Fe,De)||(Fe&&Me.push(Fe),De&&Me.push(De)),Me}function ae($t,de,Me){return function(Fe,De){var Ae=Vt(Fe),Ve=Vt(De),Qe=[];if(Ae&&Ve&&ee(Ae,Ve))return Qe;Ae&&Qe.push(Ae),Ve&&Qe.push(Ve);var Sr=2*v.constrain((Fe[$t]+De[$t])/2,de,Me)-((Ae||Fe)[$t]+(Ve||De)[$t]);if(Sr){var he;Ae&&Ve?he=Sr>0==Ae[$t]>Ve[$t]?Ae:Ve:he=Ae||Ve,he[$t]+=Sr}return Qe}}var le;b==="linear"||b==="spline"?le=Ht:b==="hv"||b==="vh"?le=te:b==="hvh"?le=ae(0,yt,xt):b==="vhv"&&(le=ae(1,Ft,Et));function ce($t,de){var Me=de[0]-$t[0],Fe=(de[1]-$t[1])/Me,De=($t[1]*de[0]-de[1]*$t[0])/Me;return De>0?[Fe>0?yt:xt,Et]:[Fe>0?xt:yt,Ft]}function pe($t){var de=$t[0],Me=$t[1],Fe=de===I[z-1][0],De=Me===I[z-1][1];if(!(Fe&&De))if(z>1){var Ae=de===I[z-2][0],Ve=Me===I[z-2][1];Fe&&(de===yt||de===xt)&&Ae?Ve?z--:I[z-1]=$t:De&&(Me===Ft||Me===Et)&&Ve?Ae?z--:I[z-1]=$t:I[z++]=$t}else I[z++]=$t}function we($t){I[z-1][0]!==$t[0]&&I[z-1][1]!==$t[1]&&pe([Pt,Bt]),pe($t),kt=null,Pt=Bt=0}var ve=v.isArrayOrTypedArray(T);function Mt($t){if($t&&c&&($t.i=B,$t.d=n,$t.trace=o,$t.marker=ve?T[$t.i]:T,$t.backoff=c),Y=$t[0]/s,ot=$t[1]/u,gt=$t[0]<yt?yt:$t[0]>xt?xt:0,wt=$t[1]<Ft?Ft:$t[1]>Et?Et:0,gt||wt){if(!z)I[z++]=[gt||$t[0],wt||$t[1]];else if(kt){var de=le(kt,$t);de.length>1&&(we(de[0]),I[z++]=de[1])}else jt=le(I[z-1],$t)[0],I[z++]=jt;var Me=I[z-1];gt&&wt&&(Me[0]!==gt||Me[1]!==wt)?(kt&&(Pt!==gt&&Bt!==wt?pe(Pt&&Bt?ce(kt,$t):[Pt||gt,Bt||wt]):Pt&&Bt&&pe([Pt,Bt])),pe([gt,wt])):Pt-gt&&Bt-wt&&pe([gt||Pt,wt||Bt]),kt=$t,Pt=gt,Bt=wt}else kt&&we(le(kt,$t)[0]),I[z++]=$t}for(B=0;B<w;B++)if(O=nt(B),!!O){for(z=0,kt=null,Mt(O),B++;B<w;B++){if(C=nt(B),!C){if(k)continue;break}if(!P||!a.simplify){Mt(C);continue}var It=nt(B+1);if(at=ht(C,O),!(!(l&&(z===0||z===w-1))&&at<rt(C,It)*L)){for(K=[(C[0]-O[0])/at,(C[1]-O[1])/at],F=O,it=at,q=Z=G=0,V=!1,R=C,B++;B<n.length;B++){if(N=It,It=nt(B+1),!N){if(k)continue;break}if(Q=[N[0]-O[0],N[1]-O[1]],et=Q[0]*K[1]-Q[1]*K[0],Z=Math.min(Z,et),G=Math.max(G,et),G-Z>rt(N,It))break;R=N,W=Q[0]*K[0]+Q[1]*K[1],W>it?(it=W,C=N,V=!1):W<q&&(q=W,F=N,V=!0)}if(V?(Mt(C),R!==F&&Mt(F)):(F!==O&&Mt(F),R!==C&&Mt(C)),Mt(R),B>=n.length||!N)break;Mt(N),O=N}}kt&&pe([Pt||kt[0],Bt||kt[1]]),d.push(I.slice(0,z))}var Rt=b.slice(b.length-1);if(c&&Rt!=="h"&&Rt!=="v"){for(var zt=!1,Tt=-1,ft=[],ut=0;ut<d.length;ut++)for(var vt=0;vt<d[ut].length-1;vt++){var St=d[ut][vt],Ot=d[ut][vt+1],Xt=M.applyBackoff(Ot,St);(Xt[0]!==Ot[0]||Xt[1]!==Ot[1])&&(zt=!0),ft[Tt+1]||(Tt++,ft[Tt]=[St,[Xt[0],Xt[1]]])}return zt?ft:d}return d}},94039:function($){$.exports=function(U,t,M){var E=M("line.shape");E==="spline"&&M("line.smoothing")}},68687:function($){var U={tonextx:1,tonexty:1,tonext:1};$.exports=function(t,M,E){var i,S,A,g,v,e={},r=!1,f=-1,n=0,a=-1;for(S=0;S<E.length;S++)i=E[S][0].trace,A=i.stackgroup||"",A?A in e?v=e[A]:(v=e[A]=n,n++):i.fill in U&&a>=0?v=a:(v=a=n,n++),v<f&&(r=!0),i._groupIndex=f=v;var o=E.slice();r&&o.sort(function(y,p){var x=y[0].trace,s=p[0].trace;return x._groupIndex-s._groupIndex||x.index-s.index});var h={};for(S=0;S<o.length;S++)i=o[S][0].trace,A=i.stackgroup||"",i.visible===!0?(i._nexttrace=null,i.fill in U&&(g=h[A],i._prevtrace=g||null,g&&(g._nexttrace=i)),i._ownfill=i.fill&&(i.fill.substr(0,6)==="tozero"||i.fill==="toself"||i.fill.substr(0,2)==="to"&&!i._prevtrace),h[A]=i):i._prevtrace=i._nexttrace=i._ownfill=null;return o}},39984:function($,U,t){var M=t(92770);$.exports=function(E,i){i||(i=2);var S=E.marker,A=S.sizeref||1,g=S.sizemin||0,v=S.sizemode==="area"?function(e){return Math.sqrt(e/A)}:function(e){return e/A};return function(e){var r=v(e/i);return M(r)&&r>0?Math.max(r,g):0}}},4898:function($){$.exports={container:"marker",min:"cmin",max:"cmax"}},49508:function($,U,t){var M=t(7901),E=t(52075).hasColorscale,i=t(1586),S=t(34098);$.exports=function(A,g,v,e,r,f){var n=S.isBubble(A),a=(A.line||{}).color,o;if(f=f||{},a&&(v=a),r("marker.symbol"),r("marker.opacity",n?.7:1),r("marker.size"),f.noAngle||(r("marker.angle"),f.noAngleRef||r("marker.angleref"),f.noStandOff||r("marker.standoff")),r("marker.color",v),E(A,"marker")&&i(A,g,e,r,{prefix:"marker.",cLetter:"c"}),f.noSelect||(r("selected.marker.color"),r("unselected.marker.color"),r("selected.marker.size"),r("unselected.marker.size")),f.noLine||(a&&!Array.isArray(a)&&g.marker.color!==a?o=a:n?o=M.background:o=M.defaultLine,r("marker.line.color",o),E(A,"marker.line")&&i(A,g,e,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width",n?1:0)),n&&(r("marker.sizeref"),r("marker.sizemin"),r("marker.sizemode")),f.gradient){var h=r("marker.gradient.type");h!=="none"&&r("marker.gradient.color")}}},73927:function($,U,t){var M=t(71828).dateTick0,E=t(50606),i=E.ONEWEEK;function S(A,g){return A%i===0?M(g,1):M(g,0)}$.exports=function(A,g,v,e,r){if(r||(r={x:!0,y:!0}),r.x){var f=e("xperiod");f&&(e("xperiod0",S(f,g.xcalendar)),e("xperiodalignment"))}if(r.y){var n=e("yperiod");n&&(e("yperiod0",S(n,g.ycalendar)),e("yperiodalignment"))}}},32663:function($,U,t){var M=t(39898),E=t(73972),i=t(71828),S=i.ensureSingle,A=i.identity,g=t(91424),v=t(34098),e=t(34621),r=t(68687),f=t(61082).tester;$.exports=function(h,y,p,x,s,u){var c,T,k=!s,_=!!s&&s.duration>0,b=r(h,y,p);if(c=x.selectAll("g.trace").data(b,function(l){return l[0].trace.uid}),c.enter().append("g").attr("class",function(l){return"trace scatter trace"+l[0].trace.uid}).style("stroke-miterlimit",2),c.order(),n(h,c,y),_){u&&(T=u());var P=M.transition().duration(s.duration).ease(s.easing).each("end",function(){T&&T()}).each("interrupt",function(){T&&T()});P.each(function(){x.selectAll("g.trace").each(function(l,d){a(h,d,y,l,b,this,s)})})}else c.each(function(l,d){a(h,d,y,l,b,this,s)});k&&c.exit().remove(),x.selectAll("path:not([d])").remove()};function n(h,y,p){y.each(function(x){var s=S(M.select(this),"g","fills");g.setClipUrl(s,p.layerClipId,h);var u=x[0].trace,c=[];u._ownfill&&c.push("_ownFill"),u._nexttrace&&c.push("_nextFill");var T=s.selectAll("g").data(c,A);T.enter().append("g"),T.exit().each(function(k){u[k]=null}).remove(),T.order().each(function(k){u[k]=S(M.select(this),"path","js-fill")})})}function a(h,y,p,x,s,u,c){var T=h._context.staticPlot,k;o(h,y,p,x,s);var _=!!c&&c.duration>0;function b(kt){return _?kt.transition():kt}var P=p.xaxis,l=p.yaxis,d=x[0].trace,L=d.line,w=M.select(u),I=S(w,"g","errorbars"),z=S(w,"g","lines"),B=S(w,"g","points"),O=S(w,"g","text");if(E.getComponentMethod("errorbars","plot")(h,I,p,c),d.visible!==!0)return;b(w).style("opacity",d.opacity);var R,C,F=d.fill.charAt(d.fill.length-1);F!=="x"&&F!=="y"&&(F=""),x[0][p.isRangePlot?"nodeRangePlot3":"node3"]=w;var N="",V=[],K=d._prevtrace;K&&(N=K._prevRevpath||"",C=K._nextFill,V=K._polygons);var Q,at,it="",q="",W,Z,G,et,nt,X,Y,ot=[],rt=i.noop;if(R=d._ownFill,v.hasLines(d)||d.fill!=="none"){for(C&&C.datum(x),["hv","vh","hvh","vhv"].indexOf(L.shape)!==-1?(W=g.steps(L.shape),Z=g.steps(L.shape.split("").reverse().join(""))):L.shape==="spline"?W=Z=function(kt){var jt=kt[kt.length-1];return kt.length>1&&kt[0][0]===jt[0]&&kt[0][1]===jt[1]?g.smoothclosed(kt.slice(1),L.smoothing):g.smoothopen(kt,L.smoothing)}:W=Z=function(kt){return"M"+kt.join("L")},G=function(kt){return Z(kt.reverse())},ot=e(x,{xaxis:P,yaxis:l,trace:d,connectGaps:d.connectgaps,baseTolerance:Math.max(L.width||1,3)/4,shape:L.shape,backoff:L.backoff,simplify:L.simplify,fill:d.fill}),Y=d._polygons=new Array(ot.length),k=0;k<ot.length;k++)d._polygons[k]=f(ot[k]);ot.length&&(et=ot[0][0],nt=ot[ot.length-1],X=nt[nt.length-1]),rt=function(kt){return function(jt){if(Q=W(jt),at=G(jt),it?F?(it+="L"+Q.substr(1),q=at+("L"+q.substr(1))):(it+="Z"+Q,q=at+"Z"+q):(it=Q,q=at),v.hasLines(d)){var Ht=M.select(this);if(Ht.datum(x),kt)b(Ht.style("opacity",0).attr("d",Q).call(g.lineGroupStyle)).style("opacity",1);else{var Vt=b(Ht);Vt.attr("d",Q),g.singleLineStyle(x,Vt)}}}}}var ht=z.selectAll(".js-line").data(ot);b(ht.exit()).style("opacity",0).remove(),ht.each(rt(!1)),ht.enter().append("path").classed("js-line",!0).style("vector-effect",T?"none":"non-scaling-stroke").call(g.lineGroupStyle).each(rt(!0)),g.setClipUrl(ht,p.layerClipId,h);function pt(kt){b(kt).attr("d","M0,0Z")}ot.length?(R?(R.datum(x),et&&X&&(F?(F==="y"?et[1]=X[1]=l.c2p(0,!0):F==="x"&&(et[0]=X[0]=P.c2p(0,!0)),b(R).attr("d","M"+X+"L"+et+"L"+it.substr(1)).call(g.singleFillStyle,h)):b(R).attr("d",it+"Z").call(g.singleFillStyle,h))):C&&(d.fill.substr(0,6)==="tonext"&&it&&N?(d.fill==="tonext"?b(C).attr("d",it+"Z"+N+"Z").call(g.singleFillStyle,h):b(C).attr("d",it+"L"+N.substr(1)+"Z").call(g.singleFillStyle,h),d._polygons=d._polygons.concat(V)):(pt(C),d._polygons=null)),d._prevRevpath=q,d._prevPolygons=Y):(R?pt(R):C&&pt(C),d._polygons=d._prevRevpath=d._prevPolygons=null);function yt(kt){return kt.filter(function(jt){return!jt.gap&&jt.vis})}function xt(kt){return kt.filter(function(jt){return jt.vis})}function Ft(kt){return kt.filter(function(jt){return!jt.gap})}function Et(kt){return kt.id}function mt(kt){if(kt.ids)return Et}function gt(){return!1}function wt(kt,jt,Ht){var Vt,ee,te,ae=Ht[0].trace,le=v.hasMarkers(ae),ce=v.hasText(ae),pe=mt(ae),we=gt,ve=gt;if(le||ce){var Mt=A,It=ae.stackgroup,Rt=It&&h._fullLayout._scatterStackOpts[P._id+l._id][It].stackgaps==="infer zero";ae.marker.maxdisplayed||ae._needsCull?Mt=Rt?xt:yt:It&&!Rt&&(Mt=Ft),le&&(we=Mt),ce&&(ve=Mt)}ee=kt.selectAll("path.point"),Vt=ee.data(we,pe);var zt=Vt.enter().append("path").classed("point",!0);_&&zt.call(g.pointStyle,ae,h).call(g.translatePoints,P,l).style("opacity",0).transition().style("opacity",1),Vt.order();var Tt;le&&(Tt=g.makePointStyleFns(ae)),Vt.each(function(ft){var ut=M.select(this),vt=b(ut);te=g.translatePoint(ft,vt,P,l),te?(g.singlePointStyle(ft,vt,ae,Tt,h),p.layerClipId&&g.hideOutsideRangePoint(ft,vt,P,l,ae.xcalendar,ae.ycalendar),ae.customdata&&ut.classed("plotly-customdata",ft.data!==null&&ft.data!==void 0)):vt.remove()}),_?Vt.exit().transition().style("opacity",0).remove():Vt.exit().remove(),ee=jt.selectAll("g"),Vt=ee.data(ve,pe),Vt.enter().append("g").classed("textpoint",!0).append("text"),Vt.order(),Vt.each(function(ft){var ut=M.select(this),vt=b(ut.select("text"));te=g.translatePoint(ft,vt,P,l),te?p.layerClipId&&g.hideOutsideRangePoint(ft,ut,P,l,ae.xcalendar,ae.ycalendar):ut.remove()}),Vt.selectAll("text").call(g.textPointStyle,ae,h).each(function(ft){var ut=P.c2p(ft.x),vt=l.c2p(ft.y);M.select(this).selectAll("tspan.line").each(function(){b(M.select(this)).attr({x:ut,y:vt})})}),Vt.exit().remove()}B.datum(x),O.datum(x),wt(B,O,x);var Pt=d.cliponaxis===!1,Bt=Pt?null:p.layerClipId;g.setClipUrl(B,Bt,h),g.setClipUrl(O,Bt,h)}function o(h,y,p,x,s){var u=p.xaxis,c=p.yaxis,T=M.extent(i.simpleMap(u.range,u.r2c)),k=M.extent(i.simpleMap(c.range,c.r2c)),_=x[0].trace;if(v.hasMarkers(_)){var b=_.marker.maxdisplayed;if(b!==0){var P=x.filter(function(w){return w.x>=T[0]&&w.x<=T[1]&&w.y>=k[0]&&w.y<=k[1]}),l=Math.ceil(P.length/b),d=0;s.forEach(function(w,I){var z=w[0].trace;v.hasMarkers(z)&&z.marker.maxdisplayed>0&&I<y&&d++});var L=Math.round(d*l/3+Math.floor(d/3)*l/7.1);x.forEach(function(w){delete w.vis}),P.forEach(function(w,I){Math.round((I+L)%l)===0&&(w.vis=!0)})}}}},98002:function($,U,t){var M=t(34098);$.exports=function(E,i){var S=E.cd,A=E.xaxis,g=E.yaxis,v=[],e=S[0].trace,r,f,n,a,o=!M.hasMarkers(e)&&!M.hasText(e);if(o)return[];if(i===!1)for(r=0;r<S.length;r++)S[r].selected=0;else for(r=0;r<S.length;r++)f=S[r],n=A.c2p(f.x),a=g.c2p(f.y),f.i!==null&&i.contains([n,a],!1,r,E)?(v.push({pointNumber:f.i,x:A.c2d(f.x),y:g.c2d(f.y)}),f.selected=1):f.selected=0;return v}},565:function($){var U=["orientation","groupnorm","stackgaps"];$.exports=function(t,M,E,i){var S=E._scatterStackOpts,A=i("stackgroup");if(A){var g=M.xaxis+M.yaxis,v=S[g];v||(v=S[g]={});var e=v[A],r=!1;e?e.traces.push(M):(e=v[A]={traceIndices:[],traces:[M]},r=!0);for(var f={orientation:M.x&&!M.y?"h":"v"},n=0;n<U.length;n++){var a=U[n],o=a+"Found";if(!e[o]){var h=t[a]!==void 0,y=a==="orientation";if((h||r)&&(e[a]=i(a,f[a]),y&&(e.fillDflt=e[a]==="h"?"tonextx":"tonexty"),h&&(e[o]=!0,!r&&(delete e.traces[0][a],y))))for(var p=0;p<e.traces.length-1;p++){var x=e.traces[p];x._input.fill!==x.fill&&(x.fill=e.fillDflt)}}}return e}}},16296:function($,U,t){var M=t(39898),E=t(91424),i=t(73972);function S(e){var r=M.select(e).selectAll("g.trace.scatter");r.style("opacity",function(f){return f[0].trace.opacity}),r.selectAll("g.points").each(function(f){var n=M.select(this),a=f.trace||f[0].trace;A(n,a,e)}),r.selectAll("g.text").each(function(f){var n=M.select(this),a=f.trace||f[0].trace;g(n,a,e)}),r.selectAll("g.trace path.js-line").call(E.lineGroupStyle),r.selectAll("g.trace path.js-fill").call(E.fillGroupStyle,e),i.getComponentMethod("errorbars","style")(r)}function A(e,r,f){E.pointStyle(e.selectAll("path.point"),r,f)}function g(e,r,f){E.textPointStyle(e.selectAll("text"),r,f)}function v(e,r,f){var n=r[0].trace;n.selectedpoints?(E.selectedPointStyle(f.selectAll("path.point"),n),E.selectedTextStyle(f.selectAll("text"),n)):(A(f,n,e),g(f,n,e))}$.exports={style:S,stylePoints:A,styleText:g,styleOnSelect:v}},34098:function($,U,t){var M=t(71828);$.exports={hasLines:function(E){return E.visible&&E.mode&&E.mode.indexOf("lines")!==-1},hasMarkers:function(E){return E.visible&&(E.mode&&E.mode.indexOf("markers")!==-1||E.type==="splom")},hasText:function(E){return E.visible&&E.mode&&E.mode.indexOf("text")!==-1},isBubble:function(E){return M.isPlainObject(E.marker)&&M.isArrayOrTypedArray(E.marker.size)}}},82410:function($,U,t){var M=t(71828);$.exports=function(E,i,S,A,g){g=g||{},A("textposition"),M.coerceFont(A,"textfont",g.font||S.font),g.noSelect||(A("selected.textfont.color"),A("unselected.textfont.color"))}},67513:function($,U,t){var M=t(71828),E=t(73972);$.exports=function(i,S,A,g){var v=g("x"),e=g("y"),r,f=E.getComponentMethod("calendars","handleTraceDefaults");if(f(i,S,["x","y"],A),v){var n=M.minRowLength(v);e?r=Math.min(n,M.minRowLength(e)):(r=n,g("y0"),g("dy"))}else{if(!e)return 0;r=M.minRowLength(e),g("x0"),g("dx")}return S._length=r,r}},44542:function($,U,t){var M=t(82196),E=t(50693),i=t(12663).axisHoverFormat,S=t(5386).fF,A=t(5386).si,g=t(9012),v=t(29659),e=t(87381),r=t(1426).extendFlat,f=t(30962).overrideAll,n=t(78607),a=M.line,o=M.marker,h=o.line,y=r({width:a.width,dash:{valType:"enumerated",values:n(v),dflt:"solid"}},E("line"));function p(s){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:.6666666666666666}}}var x=$.exports=f({x:M.x,y:M.y,z:{valType:"data_array"},text:r({},M.text,{}),texttemplate:A({},{}),hovertext:r({},M.hovertext,{}),hovertemplate:S(),xhoverformat:i("x"),yhoverformat:i("y"),zhoverformat:i("z"),mode:r({},M.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:p(),y:p(),z:p()},connectgaps:M.connectgaps,line:y,marker:r({symbol:{valType:"enumerated",values:n(e),dflt:"circle",arrayOk:!0},size:r({},o.size,{dflt:8}),sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,opacity:r({},o.opacity,{arrayOk:!1}),colorbar:o.colorbar,line:r({width:r({},h.width,{arrayOk:!1})},E("marker.line"))},E("marker")),textposition:r({},M.textposition,{dflt:"top center"}),textfont:{color:M.textfont.color,size:M.textfont.size,family:r({},M.textfont.family,{arrayOk:!1})},opacity:g.opacity,hoverinfo:r({},g.hoverinfo)},"calc","nested");x.x.editType=x.y.editType=x.z.editType="calc+clearAxisTypes"},36563:function($,U,t){var M=t(75225),E=t(36922);$.exports=function(i,S){var A=[{x:!1,y:!1,trace:S,t:{}}];return M(A,S),E(i,S),A}},67336:function($,U,t){var M=t(73972);function E(A,g,v,e){if(!g||!g.visible)return null;for(var r=M.getComponentMethod("errorbars","makeComputeError")(g),f=new Array(A.length),n=0;n<A.length;n++){var a=r(+A[n],n);if(e.type==="log"){var o=e.c2l(A[n]),h=A[n]-a[0],y=A[n]+a[1];if(f[n]=[(e.c2l(h,!0)-o)*v,(e.c2l(y,!0)-o)*v],h>0){var p=e.c2l(h);e._lowerLogErrorBound||(e._lowerLogErrorBound=p),e._lowerErrorBound=Math.min(e._lowerLogErrorBound,p)}}else f[n]=[-a[0]*v,a[1]*v]}return f}function i(A){for(var g=0;g<A.length;g++)if(A[g])return A[g].length;return 0}function S(A,g,v){var e=[E(A.x,A.error_x,g[0],v.xaxis),E(A.y,A.error_y,g[1],v.yaxis),E(A.z,A.error_z,g[2],v.zaxis)],r=i(e);if(r===0)return null;for(var f=new Array(r),n=0;n<r;n++){for(var a=[[0,0,0],[0,0,0]],o=0;o<3;o++)if(e[o])for(var h=0;h<2;h++)a[h][o]=e[o][n][h];f[n]=a}return f}$.exports=S},58925:function($,U,t){var M=t(9330).gl_line3d,E=t(9330).gl_scatter3d,i=t(9330).gl_error3d,S=t(9330).gl_mesh3d,A=t(9330).delaunay_triangulate,g=t(71828),v=t(78614),e=t(81697).formatColor,r=t(39984),f=t(29659),n=t(87381),a=t(89298),o=t(23469).appendArrayPointValue,h=t(67336);function y(w,I){this.scene=w,this.uid=I,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var p=y.prototype;p.handlePick=function(w){if(w.object&&(w.object===this.linePlot||w.object===this.delaunayMesh||w.object===this.textMarkers||w.object===this.scatterPlot)){var I=w.index=w.data.index;return w.object.highlight&&w.object.highlight(null),this.scatterPlot&&(w.object=this.scatterPlot,this.scatterPlot.highlight(w.data)),w.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[I]||this.textLabels[I]===0)&&(w.textLabel=this.textLabels[I]):w.textLabel=this.textLabels),w.traceCoordinate=[this.data.x[I],this.data.y[I],this.data.z[I]],!0}};function x(w,I,z){var B=(z+1)%3,O=(z+2)%3,R=[],C=[],F;for(F=0;F<w.length;++F){var N=w[F];isNaN(N[B])||!isFinite(N[B])||isNaN(N[O])||!isFinite(N[O])||(R.push([N[B],N[O]]),C.push(F))}var V=A(R);for(F=0;F<V.length;++F)for(var K=V[F],Q=0;Q<K.length;++Q)K[Q]=C[K[Q]];return{positions:w,cells:V,meshColor:I}}function s(w){for(var I=[0,0,0],z=[[0,0,0],[0,0,0],[0,0,0]],B=[1,1,1],O=0;O<3;O++){var R=w[O];R&&R.copy_zstyle!==!1&&w[2].visible!==!1&&(R=w[2]),!(!R||!R.visible)&&(I[O]=R.width/2,z[O]=v(R.color),B[O]=R.thickness)}return{capSize:I,color:z,lineWidth:B}}function u(w){return w==null?0:w.indexOf("left")>-1?-1:w.indexOf("right")>-1?1:0}function c(w){return w==null?0:w.indexOf("top")>-1?-1:w.indexOf("bottom")>-1?1:0}function T(w){var I=0,z=0,B=[I,z];if(Array.isArray(w))for(var O=0;O<w.length;O++)B[O]=[I,z],w[O]&&(B[O][0]=u(w[O]),B[O][1]=c(w[O]));else B[0]=u(w),B[1]=c(w);return B}function k(w,I){return I(w*4)}function _(w){return n[w]}function b(w,I,z,B,O){var R=null;if(g.isArrayOrTypedArray(w)){R=[];for(var C=0;C<I;C++)w[C]===void 0?R[C]=B:R[C]=z(w[C],O)}else R=z(w,g.identity);return R}function P(w,I){var z=[],B=w.fullSceneLayout,O=w.dataScale,R=B.xaxis,C=B.yaxis,F=B.zaxis,N=I.marker,V=I.line,K=I.x||[],Q=I.y||[],at=I.z||[],it=K.length,q=I.xcalendar,W=I.ycalendar,Z=I.zcalendar,G,et,nt,X,Y,ot;for(Y=0;Y<it;Y++)G=R.d2l(K[Y],0,q)*O[0],et=C.d2l(Q[Y],0,W)*O[1],nt=F.d2l(at[Y],0,Z)*O[2],z[Y]=[G,et,nt];if(Array.isArray(I.text))ot=I.text;else if(I.text!==void 0)for(ot=new Array(it),Y=0;Y<it;Y++)ot[Y]=I.text;function rt(Vt,ee){var te=B[Vt];return a.tickText(te,te.d2l(ee),!0).text}var ht=I.texttemplate;if(ht){var pt=w.fullLayout,yt=pt._d3locale,xt=Array.isArray(ht),Ft=xt?Math.min(ht.length,it):it,Et=xt?function(Vt){return ht[Vt]}:function(){return ht};for(ot=new Array(Ft),Y=0;Y<Ft;Y++){var mt={x:K[Y],y:Q[Y],z:at[Y]},gt={xLabel:rt("xaxis",K[Y]),yLabel:rt("yaxis",Q[Y]),zLabel:rt("zaxis",at[Y])},wt={};o(wt,I,Y);var Pt=I._meta||{};ot[Y]=g.texttemplateString(Et(Y),gt,yt,wt,mt,Pt)}}if(X={position:z,mode:I.mode,text:ot},"line"in I&&(X.lineColor=e(V,1,it),X.lineWidth=V.width,X.lineDashes=V.dash),"marker"in I){var Bt=r(I);X.scatterColor=e(N,1,it),X.scatterSize=b(N.size,it,k,20,Bt),X.scatterMarker=b(N.symbol,it,_,"\u25CF"),X.scatterLineWidth=N.line.width,X.scatterLineColor=e(N.line,1,it),X.scatterAngle=0}"textposition"in I&&(X.textOffset=T(I.textposition),X.textColor=e(I.textfont,1,it),X.textSize=b(I.textfont.size,it,g.identity,12),X.textFont=I.textfont.family,X.textAngle=0);var kt=["x","y","z"];for(X.project=[!1,!1,!1],X.projectScale=[1,1,1],X.projectOpacity=[1,1,1],Y=0;Y<3;++Y){var jt=I.projection[kt[Y]];(X.project[Y]=jt.show)&&(X.projectOpacity[Y]=jt.opacity,X.projectScale[Y]=jt.scale)}X.errorBounds=h(I,O,B);var Ht=s([I.error_x,I.error_y,I.error_z]);return X.errorColor=Ht.color,X.errorLineWidth=Ht.lineWidth,X.errorCapSize=Ht.capSize,X.delaunayAxis=I.surfaceaxis,X.delaunayColor=v(I.surfacecolor),X}function l(w){if(g.isArrayOrTypedArray(w)){var I=w[0];return g.isArrayOrTypedArray(I)&&(w=I),"rgb("+w.slice(0,3).map(function(z){return Math.round(z*255)})+")"}return null}function d(w){return g.isArrayOrTypedArray(w)?w.length===4&&typeof w[0]=="number"?l(w):w.map(l):null}p.update=function(w){var I=this.scene.glplot.gl,z,B,O,R,C=f.solid;this.data=w;var F=P(this.scene,w);"mode"in F&&(this.mode=F.mode),"lineDashes"in F&&F.lineDashes in f&&(C=f[F.lineDashes]),this.color=d(F.scatterColor)||d(F.lineColor),this.dataPoints=F.position,z={gl:this.scene.glplot.gl,position:F.position,color:F.lineColor,lineWidth:F.lineWidth||1,dashes:C[0],dashScale:C[1],opacity:w.opacity,connectGaps:w.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(z):(this.linePlot=M(z),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var N=w.opacity;if(w.marker&&w.marker.opacity!==void 0&&(N*=w.marker.opacity),B={gl:this.scene.glplot.gl,position:F.position,color:F.scatterColor,size:F.scatterSize,glyph:F.scatterMarker,opacity:N,orthographic:!0,lineWidth:F.scatterLineWidth,lineColor:F.scatterLineColor,project:F.project,projectScale:F.projectScale,projectOpacity:F.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(B):(this.scatterPlot=E(B),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),R={gl:this.scene.glplot.gl,position:F.position,glyph:F.text,color:F.textColor,size:F.textSize,angle:F.textAngle,alignment:F.textOffset,font:F.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:w.opacity},this.textLabels=w.hovertext||w.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(R):(this.textMarkers=E(R),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),O={gl:this.scene.glplot.gl,position:F.position,color:F.errorColor,error:F.errorBounds,lineWidth:F.errorLineWidth,capSize:F.errorCapSize,opacity:w.opacity},this.errorBars?F.errorBounds?this.errorBars.update(O):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):F.errorBounds&&(this.errorBars=i(O),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),F.delaunayAxis>=0){var V=x(F.position,F.delaunayColor,F.delaunayAxis);V.opacity=w.opacity,this.delaunayMesh?this.delaunayMesh.update(V):(V.gl=I,this.delaunayMesh=S(V),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},p.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function L(w,I){var z=new y(w,I.uid);return z.update(I),z}$.exports=L},21428:function($,U,t){var M=t(73972),E=t(71828),i=t(34098),S=t(49508),A=t(11058),g=t(82410),v=t(44542);$.exports=function(r,f,n,a){function o(T,k){return E.coerce(r,f,v,T,k)}var h=e(r,f,o,a);if(!h){f.visible=!1;return}o("text"),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),o("mode"),i.hasLines(f)&&(o("connectgaps"),A(r,f,n,a,o)),i.hasMarkers(f)&&S(r,f,n,a,o,{noSelect:!0,noAngle:!0}),i.hasText(f)&&(o("texttemplate"),g(r,f,a,o,{noSelect:!0}));var y=(f.line||{}).color,p=(f.marker||{}).color;o("surfaceaxis")>=0&&o("surfacecolor",y||p);for(var x=["x","y","z"],s=0;s<3;++s){var u="projection."+x[s];o(u+".show")&&(o(u+".opacity"),o(u+".scale"))}var c=M.getComponentMethod("errorbars","supplyDefaults");c(r,f,y||p||n,{axis:"z"}),c(r,f,y||p||n,{axis:"y",inherit:"z"}),c(r,f,y||p||n,{axis:"x",inherit:"z"})};function e(r,f,n,a){var o=0,h=n("x"),y=n("y"),p=n("z"),x=M.getComponentMethod("calendars","handleTraceDefaults");return x(r,f,["x","y","z"],a),h&&y&&p&&(o=Math.min(h.length,y.length,p.length),f._length=f._xlength=f._ylength=f._zlength=o),o}},13551:function($,U,t){$.exports={plot:t(58925),attributes:t(44542),markerSymbols:t(87381),supplyDefaults:t(21428),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:t(36563),moduleType:"trace",name:"scatter3d",basePlotModule:t(58547),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},97001:function($,U,t){var M=t(82196),E=t(9012),i=t(5386).fF,S=t(5386).si,A=t(50693),g=t(1426).extendFlat,v=M.marker,e=M.line,r=v.line;$.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:g({},M.mode,{dflt:"markers"}),text:g({},M.text,{}),texttemplate:S({editType:"plot"},{keys:["a","b","text"]}),hovertext:g({},M.hovertext,{}),line:{color:e.color,width:e.width,dash:e.dash,backoff:e.backoff,shape:g({},e.shape,{values:["linear","spline"]}),smoothing:e.smoothing,editType:"calc"},connectgaps:M.connectgaps,fill:g({},M.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:M.fillcolor,marker:g({symbol:v.symbol,opacity:v.opacity,maxdisplayed:v.maxdisplayed,angle:v.angle,angleref:v.angleref,standoff:v.standoff,size:v.size,sizeref:v.sizeref,sizemin:v.sizemin,sizemode:v.sizemode,line:g({width:r.width,editType:"calc"},A("marker.line")),gradient:v.gradient,editType:"calc"},A("marker")),textfont:M.textfont,textposition:M.textposition,selected:M.selected,unselected:M.unselected,hoverinfo:g({},E.hoverinfo,{flags:["a","b","text","name"]}),hoveron:M.hoveron,hovertemplate:i()}},34618:function($,U,t){var M=t(92770),E=t(36922),i=t(75225),S=t(66279),A=t(47761).calcMarkerSize,g=t(22882);$.exports=function(v,e){var r=e._carpetTrace=g(v,e);if(!(!r||!r.visible||r.visible==="legendonly")){var f;e.xaxis=r.xaxis,e.yaxis=r.yaxis;var n=e._length,a=new Array(n),o,h,y=!1;for(f=0;f<n;f++)if(o=e.a[f],h=e.b[f],M(o)&&M(h)){var p=r.ab2xy(+o,+h,!0),x=r.isVisible(+o,+h);x||(y=!0),a[f]={x:p[0],y:p[1],a:o,b:h,vis:x}}else a[f]={x:!1,y:!1};return e._needsCull=y,a[0].carpet=r,a[0].trace=e,A(e,n),E(v,e),i(a,e),S(a,e),a}}},98965:function($,U,t){var M=t(71828),E=t(47581),i=t(34098),S=t(49508),A=t(11058),g=t(94039),v=t(82410),e=t(28908),r=t(97001);$.exports=function(f,n,a,o){function h(T,k){return M.coerce(f,n,r,T,k)}h("carpet"),n.xaxis="x",n.yaxis="y";var y=h("a"),p=h("b"),x=Math.min(y.length,p.length);if(!x){n.visible=!1;return}n._length=x,h("text"),h("texttemplate"),h("hovertext");var s=x<E.PTS_LINESONLY?"lines+markers":"lines";h("mode",s),i.hasLines(n)&&(A(f,n,a,o,h,{backoff:!0}),g(f,n,h),h("connectgaps")),i.hasMarkers(n)&&S(f,n,a,o,h,{gradient:!0}),i.hasText(n)&&v(f,n,o,h);var u=[];(i.hasMarkers(n)||i.hasText(n))&&(h("marker.maxdisplayed"),u.push("points")),h("fill"),n.fill!=="none"&&(e(f,n,a,h),i.hasLines(n)||g(f,n,h)),(n.fill==="tonext"||n.fill==="toself")&&u.push("fills");var c=h("hoveron",u.join("+")||"points");c!=="fills"&&h("hovertemplate"),M.coerceSelectionMarkerOpacity(n,h)}},16165:function($){$.exports=function(U,t,M,E,i){var S=E[i];return U.a=S.a,U.b=S.b,U.y=S.y,U}},48953:function($){$.exports=function(U,t){var M={},E=t._carpet,i=E.ab2ij([U.a,U.b]),S=Math.floor(i[0]),A=i[0]-S,g=Math.floor(i[1]),v=i[1]-g,e=E.evalxy([],S,g,A,v);return M.yLabel=e[1].toFixed(3),M}},22931:function($,U,t){var M=t(33720),E=t(71828).fillText;$.exports=function(i,S,A,g){var v=M(i,S,A,g);if(!v||v[0].index===!1)return;var e=v[0];if(e.index===void 0){var r=1-e.y0/i.ya._length,f=i.xa._length,n=f*r/2,a=f-n;return e.x0=Math.max(Math.min(e.x0,a),n),e.x1=Math.max(Math.min(e.x1,a),n),v}var o=e.cd[e.index];e.a=o.a,e.b=o.b,e.xLabelVal=void 0,e.yLabelVal=void 0;var h=e.trace,y=h._carpet,p=h._module.formatLabels(o,h);e.yLabel=p.yLabel,delete e.text;var x=[];function s(T,k){var _;T.labelprefix&&T.labelprefix.length>0?_=T.labelprefix.replace(/ = $/,""):_=T._hovertitle,x.push(_+": "+k.toFixed(3)+T.labelsuffix)}if(!h.hovertemplate){var u=o.hi||h.hoverinfo,c=u.split("+");c.indexOf("all")!==-1&&(c=["a","b","text"]),c.indexOf("a")!==-1&&s(y.aaxis,o.a),c.indexOf("b")!==-1&&s(y.baxis,o.b),x.push("y: "+e.yLabel),c.indexOf("text")!==-1&&E(o,h,x),e.extraText=x.join("<br>")}return v}},46858:function($,U,t){$.exports={attributes:t(97001),supplyDefaults:t(98965),colorbar:t(4898),formatLabels:t(48953),calc:t(34618),plot:t(1913),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(22931),selectPoints:t(98002),eventData:t(16165),moduleType:"trace",name:"scattercarpet",basePlotModule:t(93612),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},1913:function($,U,t){var M=t(32663),E=t(89298),i=t(91424);$.exports=function(S,A,g,v){var e,r,f,n=g[0][0].carpet,a=E.getFromId(S,n.xaxis||"x"),o=E.getFromId(S,n.yaxis||"y"),h={xaxis:a,yaxis:o,plot:A.plot};for(e=0;e<g.length;e++)r=g[e][0].trace,r._xA=a,r._yA=o;for(M(S,h,g,v),e=0;e<g.length;e++)r=g[e][0].trace,f=v.selectAll("g.trace"+r.uid+" .js-line"),i.setClipUrl(f,g[e][0].carpet._clipPathId,S)}},19316:function($,U,t){var M=t(5386).fF,E=t(5386).si,i=t(82196),S=t(9012),A=t(50693),g=t(79952).P,v=t(1426).extendFlat,e=t(30962).overrideAll,r=i.marker,f=i.line,n=r.line;$.exports=e({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:v({},i.mode,{dflt:"markers"}),text:v({},i.text,{}),texttemplate:E({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:v({},i.hovertext,{}),textfont:i.textfont,textposition:i.textposition,line:{color:f.color,width:f.width,dash:g},connectgaps:i.connectgaps,marker:v({symbol:r.symbol,opacity:r.opacity,angle:r.angle,angleref:v({},r.angleref,{values:["previous","up","north"]}),standoff:r.standoff,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,colorbar:r.colorbar,line:v({width:n.width},A("marker.line")),gradient:r.gradient},A("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:i.fillcolor,selected:i.selected,unselected:i.unselected,hoverinfo:v({},S.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:M()},"calc","nested")},84622:function($,U,t){var M=t(92770),E=t(50606).BADNUM,i=t(36922),S=t(75225),A=t(66279),g=t(71828)._;function v(e){return e&&typeof e=="string"}$.exports=function(e,r){var f=Array.isArray(r.locations),n=f?r.locations.length:r._length,a=new Array(n),o;r.geojson?o=function(u){return v(u)||M(u)}:o=v;for(var h=0;h<n;h++){var y=a[h]={};if(f){var p=r.locations[h];y.loc=o(p)?p:null}else{var x=r.lon[h],s=r.lat[h];M(x)&&M(s)?y.lonlat=[+x,+s]:y.lonlat=[E,E]}}return S(a,r),i(e,r),A(a,r),n&&(a[0].t={labels:{lat:g(e,"lat:")+" ",lon:g(e,"lon:")+" "}}),a}},10659:function($,U,t){var M=t(71828),E=t(34098),i=t(49508),S=t(11058),A=t(82410),g=t(28908),v=t(19316);$.exports=function(e,r,f,n){function a(c,T){return M.coerce(e,r,v,c,T)}var o=a("locations"),h;if(o&&o.length){var y=a("geojson"),p;(typeof y=="string"&&y!==""||M.isPlainObject(y))&&(p="geojson-id");var x=a("locationmode",p);x==="geojson-id"&&a("featureidkey"),h=o.length}else{var s=a("lon")||[],u=a("lat")||[];h=Math.min(s.length,u.length)}if(!h){r.visible=!1;return}r._length=h,a("text"),a("hovertext"),a("hovertemplate"),a("mode"),E.hasLines(r)&&(S(e,r,f,n,a),a("connectgaps")),E.hasMarkers(r)&&i(e,r,f,n,a,{gradient:!0}),E.hasText(r)&&(a("texttemplate"),A(e,r,n,a)),a("fill"),r.fill!=="none"&&g(e,r,f,a),M.coerceSelectionMarkerOpacity(r,a)}},84084:function($){$.exports=function(U,t,M,E,i){U.lon=t.lon,U.lat=t.lat,U.location=t.loc?t.loc:null;var S=E[i];return S.fIn&&S.fIn.properties&&(U.properties=S.fIn.properties),U}},82719:function($,U,t){var M=t(89298);$.exports=function(E,i,S){var A={},g=S[i.geo]._subplot,v=g.mockAxis,e=E.lonlat;return A.lonLabel=M.tickText(v,v.c2l(e[0]),!0).text,A.latLabel=M.tickText(v,v.c2l(e[1]),!0).text,A}},14977:function($,U,t){var M=t(30211),E=t(50606).BADNUM,i=t(34603),S=t(71828).fillText,A=t(19316);$.exports=function(v,e,r){var f=v.cd,n=f[0].trace,a=v.xa,o=v.ya,h=v.subplot,y=h.projection.isLonLatOverEdges,p=h.project;function x(b){var P=b.lonlat;if(P[0]===E||y(P))return 1/0;var l=p(P),d=p([e,r]),L=Math.abs(l[0]-d[0]),w=Math.abs(l[1]-d[1]),I=Math.max(3,b.mrc||0);return Math.max(Math.sqrt(L*L+w*w)-I,1-3/I)}if(M.getClosest(f,x,v),v.index!==!1){var s=f[v.index],u=s.lonlat,c=[a.c2p(u),o.c2p(u)],T=s.mrc||1;v.x0=c[0]-T,v.x1=c[0]+T,v.y0=c[1]-T,v.y1=c[1]+T,v.loc=s.loc,v.lon=u[0],v.lat=u[1];var k={};k[n.geo]={_subplot:h};var _=n._module.formatLabels(s,n,k);return v.lonLabel=_.lonLabel,v.latLabel=_.latLabel,v.color=i(n,s),v.extraText=g(n,s,v,f[0].t.labels),v.hovertemplate=n.hovertemplate,[v]}};function g(v,e,r,f){if(v.hovertemplate)return;var n=e.hi||v.hoverinfo,a=n==="all"?A.hoverinfo.flags:n.split("+"),o=a.indexOf("location")!==-1&&Array.isArray(v.locations),h=a.indexOf("lon")!==-1,y=a.indexOf("lat")!==-1,p=a.indexOf("text")!==-1,x=[];function s(u){return u+"\xB0"}return o?x.push(e.loc):h&&y?x.push("("+s(r.latLabel)+", "+s(r.lonLabel)+")"):h?x.push(f.lon+s(r.lonLabel)):y&&x.push(f.lat+s(r.latLabel)),p&&S(e,v,x),x.join("<br>")}},17988:function($,U,t){$.exports={attributes:t(19316),supplyDefaults:t(10659),colorbar:t(4898),formatLabels:t(82719),calc:t(84622),calcGeoJSON:t(89171).calcGeoJSON,plot:t(89171).plot,style:t(33095),styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(14977),eventData:t(84084),selectPoints:t(20548),moduleType:"trace",name:"scattergeo",basePlotModule:t(44622),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},89171:function($,U,t){var M=t(39898),E=t(71828),i=t(90973).getTopojsonFeatures,S=t(18214),A=t(41327),g=t(71739).findExtremes,v=t(50606).BADNUM,e=t(47761).calcMarkerSize,r=t(34098),f=t(33095);function n(o,h,y){var p=h.layers.frontplot.select(".scatterlayer"),x=E.makeTraceGroups(p,y,"trace scattergeo");function s(u,c){u.lonlat[0]===v&&M.select(c).remove()}x.selectAll("*").remove(),x.each(function(u){var c=M.select(this),T=u[0].trace;if(r.hasLines(T)||T.fill!=="none"){var k=S.calcTraceToLineCoords(u),_=T.fill!=="none"?S.makePolygon(k):S.makeLine(k);c.selectAll("path.js-line").data([{geojson:_,trace:T}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}r.hasMarkers(T)&&c.selectAll("path.point").data(E.identity).enter().append("path").classed("point",!0).each(function(b){s(b,this)}),r.hasText(T)&&c.selectAll("g").data(E.identity).enter().append("g").append("text").each(function(b){s(b,this)}),f(o,u)})}function a(o,h){var y=o[0].trace,p=h[y.geo],x=p._subplot,s=y._length,u,c;if(Array.isArray(y.locations)){var T=y.locationmode,k=T==="geojson-id"?A.extractTraceFeature(o):i(y,x.topojson);for(u=0;u<s;u++){c=o[u];var _=T==="geojson-id"?c.fOut:A.locationToFeature(T,c.loc,k);c.lonlat=_?_.properties.ct:[v,v]}}var b={padded:!0},P,l;if(p.fitbounds==="geojson"&&y.locationmode==="geojson-id"){var d=A.computeBbox(A.getTraceGeojson(y));P=[d[0],d[2]],l=[d[1],d[3]]}else{for(P=new Array(s),l=new Array(s),u=0;u<s;u++)c=o[u],P[u]=c.lonlat[0],l[u]=c.lonlat[1];b.ppad=e(y,s)}y._extremes.lon=g(p.lonaxis._ax,P,b),y._extremes.lat=g(p.lataxis._ax,l,b)}$.exports={calcGeoJSON:a,plot:n}},20548:function($,U,t){var M=t(34098),E=t(50606).BADNUM;$.exports=function(i,S){var A=i.cd,g=i.xaxis,v=i.yaxis,e=[],r=A[0].trace,f,n,a,o,h,y=!M.hasMarkers(r)&&!M.hasText(r);if(y)return[];if(S===!1)for(h=0;h<A.length;h++)A[h].selected=0;else for(h=0;h<A.length;h++)f=A[h],n=f.lonlat,n[0]!==E&&(a=g.c2p(n),o=v.c2p(n),S.contains([a,o],null,h,i)?(e.push({pointNumber:h,lon:n[0],lat:n[1]}),f.selected=1):f.selected=0);return e}},33095:function($,U,t){var M=t(39898),E=t(91424),i=t(7901),S=t(16296),A=S.stylePoints,g=S.styleText;$.exports=function(e,r){r&&v(e,r)};function v(e,r){var f=r[0].trace,n=r[0].node3;n.style("opacity",r[0].trace.opacity),A(n,f,e),g(n,f,e),n.selectAll("path.js-line").style("fill","none").each(function(a){var o=M.select(this),h=a.trace,y=h.line||{};o.call(i.stroke,y.color).call(E.dashLine,y.dash||"",y.width||0),h.fill!=="none"&&o.call(i.fill,h.fillcolor)})}},42341:function($,U,t){var M=t(9012),E=t(82196),i=t(12663).axisHoverFormat,S=t(50693),A=t(78607),g=t(1426).extendFlat,v=t(30962).overrideAll,e=t(78232).DASHES,r=E.line,f=E.marker,n=f.line,a=$.exports=v({x:E.x,x0:E.x0,dx:E.dx,y:E.y,y0:E.y0,dy:E.dy,xperiod:E.xperiod,yperiod:E.yperiod,xperiod0:E.xperiod0,yperiod0:E.yperiod0,xperiodalignment:E.xperiodalignment,yperiodalignment:E.yperiodalignment,xhoverformat:i("x"),yhoverformat:i("y"),text:E.text,hovertext:E.hovertext,textposition:E.textposition,textfont:E.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:r.color,width:r.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:A(e),dflt:"solid"}},marker:g({},S("marker"),{symbol:f.symbol,angle:f.angle,size:f.size,sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,opacity:f.opacity,colorbar:f.colorbar,line:g({},S("marker.line"),{width:n.width})}),connectgaps:E.connectgaps,fill:g({},E.fill,{dflt:"none"}),fillcolor:E.fillcolor,selected:{marker:E.selected.marker,textfont:E.selected.textfont},unselected:{marker:E.unselected.marker,textfont:E.unselected.textfont},opacity:M.opacity},"calc","nested");a.x.editType=a.y.editType=a.x0.editType=a.y0.editType="calc+clearAxisTypes",a.hovertemplate=E.hovertemplate,a.texttemplate=E.texttemplate},72156:function($,U,t){var M=t(20794);$.exports={moduleType:"trace",name:"scattergl",basePlotModule:t(93612),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:t(42341),supplyDefaults:t(47148),crossTraceDefaults:t(34936),colorbar:t(4898),formatLabels:t(68101),calc:t(45032),hoverPoints:M.hoverPoints,selectPoints:t(58147),meta:{}}},45032:function($,U,t){var M=t(88294),E=t(71828),i=t(41675),S=t(71739).findExtremes,A=t(42973),g=t(47761),v=g.calcMarkerSize,e=g.calcAxisExpansion,r=g.setFirstScatter,f=t(36922),n=t(19635),a=t(38967),o=t(50606).BADNUM,h=t(78232).TOO_MANY_POINTS;$.exports=function(x,s){var u=x._fullLayout,c=s._xA=i.getFromId(x,s.xaxis,"x"),T=s._yA=i.getFromId(x,s.yaxis,"y"),k=u._plots[s.xaxis+s.yaxis],_=s._length,b=_>=h,P=_*2,l={},d,L=c.makeCalcdata(s,"x"),w=T.makeCalcdata(s,"y"),I=A(s,c,"x",L),z=A(s,T,"y",w),B=I.vals,O=z.vals;s._x=B,s._y=O,s.xperiodalignment&&(s._origX=L,s._xStarts=I.starts,s._xEnds=I.ends),s.yperiodalignment&&(s._origY=w,s._yStarts=z.starts,s._yEnds=z.ends);var R=new Array(P),C=new Array(_);for(d=0;d<_;d++)R[d*2]=B[d]===o?NaN:B[d],R[d*2+1]=O[d]===o?NaN:O[d],C[d]=d;if(c.type==="log")for(d=0;d<P;d+=2)R[d]=c.c2l(R[d]);if(T.type==="log")for(d=1;d<P;d+=2)R[d]=T.c2l(R[d]);b&&c.type!=="log"&&T.type!=="log"?l.tree=M(R):l.ids=C,f(x,s);var F=p(x,k,s,R,B,O),N=a(x,k);r(u,s);var V;return b?F.marker&&(V=F.marker.sizeAvg||Math.max(F.marker.size,3)):V=v(s,_),e(x,s,c,T,B,O,V),F.errorX&&y(s,c,F.errorX),F.errorY&&y(s,T,F.errorY),F.fill&&!N.fill2d&&(N.fill2d=!0),F.marker&&!N.scatter2d&&(N.scatter2d=!0),F.line&&!N.line2d&&(N.line2d=!0),(F.errorX||F.errorY)&&!N.error2d&&(N.error2d=!0),F.text&&!N.glText&&(N.glText=!0),F.marker&&(F.marker.snap=_),N.lineOptions.push(F.line),N.errorXOptions.push(F.errorX),N.errorYOptions.push(F.errorY),N.fillOptions.push(F.fill),N.markerOptions.push(F.marker),N.markerSelectedOptions.push(F.markerSel),N.markerUnselectedOptions.push(F.markerUnsel),N.textOptions.push(F.text),N.textSelectedOptions.push(F.textSel),N.textUnselectedOptions.push(F.textUnsel),N.selectBatch.push([]),N.unselectBatch.push([]),l._scene=N,l.index=N.count,l.x=B,l.y=O,l.positions=R,N.count++,[{x:!1,y:!1,t:l,trace:s}]};function y(x,s,u){var c=x._extremes[s._id],T=S(s,u._bnds,{padded:!0});c.min=c.min.concat(T.min),c.max=c.max.concat(T.max)}function p(x,s,u,c,T,k){var _=n.style(x,u);if(_.marker&&(_.marker.positions=c),_.line&&c.length>1&&E.extendFlat(_.line,n.linePositions(x,u,c)),_.errorX||_.errorY){var b=n.errorBarPositions(x,u,c,T,k);_.errorX&&E.extendFlat(_.errorX,b.x),_.errorY&&E.extendFlat(_.errorY,b.y)}return _.text&&(E.extendFlat(_.text,{positions:c},n.textPosition(x,u,_.text,_.marker)),E.extendFlat(_.textSel,{positions:c},n.textPosition(x,u,_.text,_.markerSel)),E.extendFlat(_.textUnsel,{positions:c},n.textPosition(x,u,_.text,_.markerUnsel))),_}},78232:function($){var U=20;$.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:U,SYMBOL_STROKE:U/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},19635:function($,U,t){var M=t(92770),E=t(82019),i=t(25075),S=t(73972),A=t(71828),g=t(91424),v=t(41675),e=t(81697).formatColor,r=t(34098),f=t(39984),n=t(68645),a=t(78232),o=t(37822).DESELECTDIM,h={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},y=t(23469).appendArrayPointValue;function p(z,B){var O,R={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},C=z._context.plotGlPixelRatio;if(B.visible!==!0)return R;if(r.hasText(B)&&(R.text=x(z,B),R.textSel=c(z,B,B.selected),R.textUnsel=c(z,B,B.unselected)),r.hasMarkers(B)&&(R.marker=s(z,B),R.markerSel=u(z,B,B.selected),R.markerUnsel=u(z,B,B.unselected),!B.unselected&&A.isArrayOrTypedArray(B.marker.opacity))){var F=B.marker.opacity;for(R.markerUnsel.opacity=new Array(F.length),O=0;O<F.length;O++)R.markerUnsel.opacity[O]=o*F[O]}if(r.hasLines(B)){R.line={overlay:!0,thickness:B.line.width*C,color:B.line.color,opacity:B.opacity};var N=(a.DASHES[B.line.dash]||[1]).slice();for(O=0;O<N.length;++O)N[O]*=B.line.width*C;R.line.dashes=N}return B.error_x&&B.error_x.visible&&(R.errorX=T(B,B.error_x,C)),B.error_y&&B.error_y.visible&&(R.errorY=T(B,B.error_y,C)),B.fill&&B.fill!=="none"&&(R.fill={closed:!0,fill:B.fillcolor,thickness:0}),R}function x(z,B){var O=z._fullLayout,R=B._length,C=B.textfont,F=B.textposition,N=Array.isArray(F)?F:[F],V=C.color,K=C.size,Q=C.family,at={},it,q=z._context.plotGlPixelRatio,W=B.texttemplate;if(W){at.text=[];var Z=O._d3locale,G=Array.isArray(W),et=G?Math.min(W.length,R):R,nt=G?function(yt){return W[yt]}:function(){return W};for(it=0;it<et;it++){var X={i:it},Y=B._module.formatLabels(X,B,O),ot={};y(ot,B,it);var rt=B._meta||{};at.text.push(A.texttemplateString(nt(it),Y,Z,ot,X,rt))}}else Array.isArray(B.text)&&B.text.length<R?at.text=B.text.slice():at.text=B.text;if(Array.isArray(at.text))for(it=at.text.length;it<R;it++)at.text[it]="";for(at.opacity=B.opacity,at.font={},at.align=[],at.baseline=[],it=0;it<N.length;it++){var ht=N[it].split(/\s+/);switch(ht[1]){case"left":at.align.push("right");break;case"right":at.align.push("left");break;default:at.align.push(ht[1])}switch(ht[0]){case"top":at.baseline.push("bottom");break;case"bottom":at.baseline.push("top");break;default:at.baseline.push(ht[0])}}if(Array.isArray(V))for(at.color=new Array(R),it=0;it<R;it++)at.color[it]=V[it];else at.color=V;if(A.isArrayOrTypedArray(K)||Array.isArray(Q))for(at.font=new Array(R),it=0;it<R;it++){var pt=at.font[it]={};pt.size=(A.isTypedArray(K)?K[it]:Array.isArray(K)?M(K[it])?K[it]:0:K)*q,pt.family=Array.isArray(Q)?Q[it]:Q}else at.font={size:K*q,family:Q};return at}function s(z,B){var O=B._length,R=B.marker,C={},F,N=A.isArrayOrTypedArray(R.symbol),V=A.isArrayOrTypedArray(R.angle),K=A.isArrayOrTypedArray(R.color),Q=A.isArrayOrTypedArray(R.line.color),at=A.isArrayOrTypedArray(R.opacity),it=A.isArrayOrTypedArray(R.size),q=A.isArrayOrTypedArray(R.line.width),W;if(N||(W=n.isOpenSymbol(R.symbol)),N||K||Q||at||V){C.symbols=new Array(O),C.angles=new Array(O),C.colors=new Array(O),C.borderColors=new Array(O);var Z=R.symbol,G=R.angle,et=e(R,R.opacity,O),nt=e(R.line,R.opacity,O);if(!Array.isArray(nt[0])){var X=nt;for(nt=Array(O),F=0;F<O;F++)nt[F]=X}if(!Array.isArray(et[0])){var Y=et;for(et=Array(O),F=0;F<O;F++)et[F]=Y}if(!Array.isArray(Z)){var ot=Z;for(Z=Array(O),F=0;F<O;F++)Z[F]=ot}if(!Array.isArray(G)){var rt=G;for(G=Array(O),F=0;F<O;F++)G[F]=rt}for(C.symbols=Z,C.angles=G,C.colors=et,C.borderColors=nt,F=0;F<O;F++)N&&(W=n.isOpenSymbol(R.symbol[F])),W&&(nt[F]=et[F].slice(),et[F]=et[F].slice(),et[F][3]=0);for(C.opacity=B.opacity,C.markers=new Array(O),F=0;F<O;F++)C.markers[F]=d({mx:C.symbols[F],ma:C.angles[F]},B)}else W?(C.color=i(R.color,"uint8"),C.color[3]=0,C.borderColor=i(R.color,"uint8")):(C.color=i(R.color,"uint8"),C.borderColor=i(R.line.color,"uint8")),C.opacity=B.opacity*R.opacity,C.marker=d({mx:R.symbol,ma:R.angle},B);var ht=1,pt=f(B,ht),yt;if(it||q){var xt=C.sizes=new Array(O),Ft=C.borderSizes=new Array(O),Et=0,mt;if(it){for(F=0;F<O;F++)xt[F]=pt(R.size[F]),Et+=xt[F];mt=Et/O}else for(yt=pt(R.size),F=0;F<O;F++)xt[F]=yt;if(q)for(F=0;F<O;F++)Ft[F]=R.line.width[F];else for(yt=R.line.width,F=0;F<O;F++)Ft[F]=yt;C.sizeAvg=mt}else C.size=pt(R&&R.size||10),C.borderSizes=pt(R.line.width);return C}function u(z,B,O){var R=B.marker,C={};return O&&(O.marker&&O.marker.symbol?C=s(z,A.extendFlat({},R,O.marker)):O.marker&&(O.marker.size&&(C.size=O.marker.size),O.marker.color&&(C.colors=O.marker.color),O.marker.opacity!==void 0&&(C.opacity=O.marker.opacity))),C}function c(z,B,O){var R={};if(!O)return R;if(O.textfont){var C={opacity:1,text:B.text,texttemplate:B.texttemplate,textposition:B.textposition,textfont:A.extendFlat({},B.textfont)};O.textfont&&A.extendFlat(C.textfont,O.textfont),R=x(z,C)}return R}function T(z,B,O){var R={capSize:B.width*2*O,lineWidth:B.thickness*O,color:B.color};return B.copy_ystyle&&(R=z.error_y),R}var k=a.SYMBOL_SDF_SIZE,_=a.SYMBOL_SIZE,b=a.SYMBOL_STROKE,P={},l=g.symbolFuncs[0](_*.05);function d(z,B){var O=z.mx;if(O==="circle")return null;var R,C,F=g.symbolNumber(O),N=g.symbolFuncs[F%100],V=!!g.symbolNoDot[F%100],K=!!g.symbolNoFill[F%100],Q=n.isDotSymbol(O);if(z.ma&&(O+="_"+z.ma),P[O])return P[O];var at=g.getMarkerAngle(z,B);return Q&&!V?R=N(_*1.1,at)+l:R=N(_,at),C=E(R,{w:k,h:k,viewBox:[-_,-_,_,_],stroke:K?b:-b}),P[O]=C,C||null}function L(z,B,O){var R=O.length,C=R/2,F,N;if(r.hasLines(B)&&C)if(B.line.shape==="hv"){for(F=[],N=0;N<C-1;N++)isNaN(O[N*2])||isNaN(O[N*2+1])?F.push(NaN,NaN,NaN,NaN):(F.push(O[N*2],O[N*2+1]),!isNaN(O[N*2+2])&&!isNaN(O[N*2+3])?F.push(O[N*2+2],O[N*2+1]):F.push(NaN,NaN));F.push(O[R-2],O[R-1])}else if(B.line.shape==="hvh"){for(F=[],N=0;N<C-1;N++)if(isNaN(O[N*2])||isNaN(O[N*2+1])||isNaN(O[N*2+2])||isNaN(O[N*2+3]))!isNaN(O[N*2])&&!isNaN(O[N*2+1])?F.push(O[N*2],O[N*2+1]):F.push(NaN,NaN),F.push(NaN,NaN);else{var V=(O[N*2]+O[N*2+2])/2;F.push(O[N*2],O[N*2+1],V,O[N*2+1],V,O[N*2+3])}F.push(O[R-2],O[R-1])}else if(B.line.shape==="vhv"){for(F=[],N=0;N<C-1;N++)if(isNaN(O[N*2])||isNaN(O[N*2+1])||isNaN(O[N*2+2])||isNaN(O[N*2+3]))!isNaN(O[N*2])&&!isNaN(O[N*2+1])?F.push(O[N*2],O[N*2+1]):F.push(NaN,NaN),F.push(NaN,NaN);else{var K=(O[N*2+1]+O[N*2+3])/2;F.push(O[N*2],O[N*2+1],O[N*2],K,O[N*2+2],K)}F.push(O[R-2],O[R-1])}else if(B.line.shape==="vh"){for(F=[],N=0;N<C-1;N++)isNaN(O[N*2])||isNaN(O[N*2+1])?F.push(NaN,NaN,NaN,NaN):(F.push(O[N*2],O[N*2+1]),!isNaN(O[N*2+2])&&!isNaN(O[N*2+3])?F.push(O[N*2],O[N*2+3]):F.push(NaN,NaN));F.push(O[R-2],O[R-1])}else F=O;var Q=!1;for(N=0;N<F.length;N++)if(isNaN(F[N])){Q=!0;break}var at=Q||F.length>a.TOO_MANY_POINTS||r.hasMarkers(B)?"rect":"round";if(Q&&B.connectgaps){var it=F[0],q=F[1];for(N=0;N<F.length;N+=2)isNaN(F[N])||isNaN(F[N+1])?(F[N]=it,F[N+1]=q):(it=F[N],q=F[N+1])}return{join:at,positions:F}}function w(z,B,O,R,C){var F=S.getComponentMethod("errorbars","makeComputeError"),N=v.getFromId(z,B.xaxis,"x"),V=v.getFromId(z,B.yaxis,"y"),K=O.length/2,Q={};function at(it,q){var W=q._id.charAt(0),Z=B["error_"+W];if(Z&&Z.visible&&(q.type==="linear"||q.type==="log")){for(var G=F(Z),et={x:0,y:1}[W],nt={x:[0,1,2,3],y:[2,3,0,1]}[W],X=new Float64Array(4*K),Y=1/0,ot=-1/0,rt=0,ht=0;rt<K;rt++,ht+=4){var pt=it[rt];if(M(pt)){var yt=O[rt*2+et],xt=G(pt,rt),Ft=xt[0],Et=xt[1];if(M(Ft)&&M(Et)){var mt=pt-Ft,gt=pt+Et;X[ht+nt[0]]=yt-q.c2l(mt),X[ht+nt[1]]=q.c2l(gt)-yt,X[ht+nt[2]]=0,X[ht+nt[3]]=0,Y=Math.min(Y,pt-Ft),ot=Math.max(ot,pt+Et)}}}Q[W]={positions:O,errors:X,_bnds:[Y,ot]}}}return at(R,N),at(C,V),Q}function I(z,B,O,R){var C=B._length,F={},N;if(r.hasMarkers(B)){var V=O.font,K=O.align,Q=O.baseline;for(F.offset=new Array(C),N=0;N<C;N++){var at=R.sizes?R.sizes[N]:R.size,it=Array.isArray(V)?V[N].size:V.size,q=Array.isArray(K)?K.length>1?K[N]:K[0]:K,W=Array.isArray(Q)?Q.length>1?Q[N]:Q[0]:Q,Z=h[q],G=h[W],et=at?at/.8+1:0,nt=-G*et-G*.5;F.offset[N]=[Z*et/it,nt/it]}}return F}$.exports={style:p,markerStyle:s,markerSelection:u,linePositions:L,errorBarPositions:w,textPosition:I}},47148:function($,U,t){var M=t(71828),E=t(73972),i=t(68645),S=t(42341),A=t(47581),g=t(34098),v=t(67513),e=t(73927),r=t(49508),f=t(11058),n=t(28908),a=t(82410);$.exports=function(o,h,y,p){function x(P,l){return M.coerce(o,h,S,P,l)}var s=o.marker?i.isOpenSymbol(o.marker.symbol):!1,u=g.isBubble(o),c=v(o,h,p,x);if(!c){h.visible=!1;return}e(o,h,p,x),x("xhoverformat"),x("yhoverformat");var T=c<A.PTS_LINESONLY?"lines+markers":"lines";x("text"),x("hovertext"),x("hovertemplate"),x("mode",T),g.hasLines(h)&&(x("connectgaps"),f(o,h,y,p,x),x("line.shape")),g.hasMarkers(h)&&(r(o,h,y,p,x,{noAngleRef:!0,noStandOff:!0}),x("marker.line.width",s||u?1:0)),g.hasText(h)&&(x("texttemplate"),a(o,h,p,x));var k=(h.line||{}).color,_=(h.marker||{}).color;x("fill"),h.fill!=="none"&&n(o,h,y,x);var b=E.getComponentMethod("errorbars","supplyDefaults");b(o,h,k||_||y,{axis:"y"}),b(o,h,k||_||y,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(h,x)}},5345:function($,U,t){var M=t(71828),E=t(7901),i=t(37822).DESELECTDIM;function S(A){var g=A[0],v=g.trace,e=g.t,r=e._scene,f=e.index,n=r.selectBatch[f],a=r.unselectBatch[f],o=r.textOptions[f],h=r.textSelectedOptions[f]||{},y=r.textUnselectedOptions[f]||{},p=M.extendFlat({},o),x,s;if(n.length||a.length){var u=h.color,c=y.color,T=o.color,k=Array.isArray(T);for(p.color=new Array(v._length),x=0;x<n.length;x++)s=n[x],p.color[s]=u||(k?T[s]:T);for(x=0;x<a.length;x++){s=a[x];var _=k?T[s]:T;p.color[s]=c||(u?_:E.addOpacity(_,i))}}r.glText[f].update(p)}$.exports={styleTextSelection:S}},68101:function($,U,t){var M=t(8225);$.exports=function(E,i,S){var A=E.i;return"x"in E||(E.x=i._x[A]),"y"in E||(E.y=i._y[A]),M(E,i,S)}},68645:function($,U,t){var M=t(78232);U.isOpenSymbol=function(E){return typeof E=="string"?M.OPEN_RE.test(E):E%200>100},U.isDotSymbol=function(E){return typeof E=="string"?M.DOT_RE.test(E):E>200}},20794:function($,U,t){var M=t(73972),E=t(71828),i=t(34603);function S(g,v,e,r){var f=g.cd,n=f[0].t,a=f[0].trace,o=g.xa,h=g.ya,y=n.x,p=n.y,x=o.c2p(v),s=h.c2p(e),u=g.distance,c;if(n.tree){var T=o.p2c(x-u),k=o.p2c(x+u),_=h.p2c(s-u),b=h.p2c(s+u);r==="x"?c=n.tree.range(Math.min(T,k),Math.min(h._rl[0],h._rl[1]),Math.max(T,k),Math.max(h._rl[0],h._rl[1])):c=n.tree.range(Math.min(T,k),Math.min(_,b),Math.max(T,k),Math.max(_,b))}else c=n.ids;var P,l,d,L,w,I,z,B,O,R=u;if(r==="x"){var C=!!a.xperiodalignment,F=!!a.yperiodalignment;for(w=0;w<c.length;w++){if(P=c[w],d=y[P],I=Math.abs(o.c2p(d)-x),C){var N=o.c2p(a._xStarts[P]),V=o.c2p(a._xEnds[P]);I=x>=Math.min(N,V)&&x<=Math.max(N,V)?0:1/0}if(I<R){if(R=I,L=p[P],z=h.c2p(L)-s,F){var K=h.c2p(a._yStarts[P]),Q=h.c2p(a._yEnds[P]);z=s>=Math.min(K,Q)&&s<=Math.max(K,Q)?0:1/0}O=Math.sqrt(I*I+z*z),l=c[w]}}}else for(w=c.length-1;w>-1;w--)P=c[w],d=y[P],L=p[P],I=o.c2p(d)-x,z=h.c2p(L)-s,B=Math.sqrt(I*I+z*z),B<R&&(R=O=B,l=P);return g.index=l,g.distance=R,g.dxy=O,l===void 0?[g]:[A(g,y,p,a)]}function A(g,v,e,r){var f=g.xa,n=g.ya,a=g.distance,o=g.dxy,h=g.index,y={pointNumber:h,x:v[h],y:e[h]};y.tx=Array.isArray(r.text)?r.text[h]:r.text,y.htx=Array.isArray(r.hovertext)?r.hovertext[h]:r.hovertext,y.data=Array.isArray(r.customdata)?r.customdata[h]:r.customdata,y.tp=Array.isArray(r.textposition)?r.textposition[h]:r.textposition;var p=r.textfont;p&&(y.ts=E.isArrayOrTypedArray(p.size)?p.size[h]:p.size,y.tc=Array.isArray(p.color)?p.color[h]:p.color,y.tf=Array.isArray(p.family)?p.family[h]:p.family);var x=r.marker;x&&(y.ms=E.isArrayOrTypedArray(x.size)?x.size[h]:x.size,y.mo=E.isArrayOrTypedArray(x.opacity)?x.opacity[h]:x.opacity,y.mx=E.isArrayOrTypedArray(x.symbol)?x.symbol[h]:x.symbol,y.ma=E.isArrayOrTypedArray(x.angle)?x.angle[h]:x.angle,y.mc=E.isArrayOrTypedArray(x.color)?x.color[h]:x.color);var s=x&&x.line;s&&(y.mlc=Array.isArray(s.color)?s.color[h]:s.color,y.mlw=E.isArrayOrTypedArray(s.width)?s.width[h]:s.width);var u=x&&x.gradient;u&&u.type!=="none"&&(y.mgt=Array.isArray(u.type)?u.type[h]:u.type,y.mgc=Array.isArray(u.color)?u.color[h]:u.color);var c=f.c2p(y.x,!0),T=n.c2p(y.y,!0),k=y.mrc||1,_=r.hoverlabel;_&&(y.hbg=Array.isArray(_.bgcolor)?_.bgcolor[h]:_.bgcolor,y.hbc=Array.isArray(_.bordercolor)?_.bordercolor[h]:_.bordercolor,y.hts=E.isArrayOrTypedArray(_.font.size)?_.font.size[h]:_.font.size,y.htc=Array.isArray(_.font.color)?_.font.color[h]:_.font.color,y.htf=Array.isArray(_.font.family)?_.font.family[h]:_.font.family,y.hnl=E.isArrayOrTypedArray(_.namelength)?_.namelength[h]:_.namelength);var b=r.hoverinfo;b&&(y.hi=Array.isArray(b)?b[h]:b);var P=r.hovertemplate;P&&(y.ht=Array.isArray(P)?P[h]:P);var l={};l[g.index]=y;var d=r._origX,L=r._origY,w=E.extendFlat({},g,{color:i(r,y),x0:c-k,x1:c+k,xLabelVal:d?d[h]:y.x,y0:T-k,y1:T+k,yLabelVal:L?L[h]:y.y,cd:l,distance:a,spikeDistance:o,hovertemplate:y.ht});return y.htx?w.text=y.htx:y.tx?w.text=y.tx:r.text&&(w.text=r.text),E.fillText(y,r,w),M.getComponentMethod("errorbars","hoverInfo")(y,r,w),w}$.exports={hoverPoints:S,calcHover:A}},68868:function($,U,t){var M=t(72156);M.plot=t(26787),$.exports=M},26787:function($,U,t){var M=t(11870),E=t(46075),i=t(3593),S=t(42505),A=t(71828),g=t(64505).selectMode,v=t(79749),e=t(34098),r=t(68687),f=t(5345).styleTextSelection,n={};function a(h,y,p,x){var s=h._size,u=h.width*x,c=h.height*x,T=s.l*x,k=s.b*x,_=s.r*x,b=s.t*x,P=s.w*x,l=s.h*x;return[T+y.domain[0]*P,k+p.domain[0]*l,u-_-(1-y.domain[1])*P,c-b-(1-p.domain[1])*l]}var o=$.exports=function(h,y,p){if(p.length){var x=h._fullLayout,s=y._scene,u=y.xaxis,c=y.yaxis,T,k;if(s){var _=v(h,["ANGLE_instanced_arrays","OES_element_index_uint"],n);if(!_){s.init();return}var b=s.count,P=x._glcanvas.data()[0].regl;if(r(h,y,p),s.dirty){if(s.error2d===!0&&(s.error2d=i(P)),s.line2d===!0&&(s.line2d=E(P)),s.scatter2d===!0&&(s.scatter2d=M(P)),s.fill2d===!0&&(s.fill2d=E(P)),s.glText===!0)for(s.glText=new Array(b),T=0;T<b;T++)s.glText[T]=new S(P);if(s.glText){if(b>s.glText.length){var l=b-s.glText.length;for(T=0;T<l;T++)s.glText.push(new S(P))}else if(b<s.glText.length){var d=s.glText.length-b,L=s.glText.splice(b,d);L.forEach(function(nt){nt.destroy()})}for(T=0;T<b;T++)s.glText[T].update(s.textOptions[T])}if(s.line2d&&(s.line2d.update(s.lineOptions),s.lineOptions=s.lineOptions.map(function(nt){if(nt&&nt.positions){for(var X=nt.positions,Y=0;Y<X.length&&(isNaN(X[Y])||isNaN(X[Y+1]));)Y+=2;for(var ot=X.length-2;ot>Y&&(isNaN(X[ot])||isNaN(X[ot+1]));)ot-=2;nt.positions=X.slice(Y,ot+2)}return nt}),s.line2d.update(s.lineOptions)),s.error2d){var w=(s.errorXOptions||[]).concat(s.errorYOptions||[]);s.error2d.update(w)}s.scatter2d&&s.scatter2d.update(s.markerOptions),s.fillOrder=A.repeat(null,b),s.fill2d&&(s.fillOptions=s.fillOptions.map(function(nt,X){var Y=p[X];if(!(!nt||!Y||!Y[0]||!Y[0].trace)){var ot=Y[0],rt=ot.trace,ht=ot.t,pt=s.lineOptions[X],yt,xt,Ft=[];rt._ownfill&&Ft.push(X),rt._nexttrace&&Ft.push(X+1),Ft.length&&(s.fillOrder[X]=Ft);var Et=[],mt=pt&&pt.positions||ht.positions,gt,wt;if(rt.fill==="tozeroy"){for(gt=0;gt<mt.length&&isNaN(mt[gt+1]);)gt+=2;for(wt=mt.length-2;wt>gt&&isNaN(mt[wt+1]);)wt-=2;mt[gt+1]!==0&&(Et=[mt[gt],0]),Et=Et.concat(mt.slice(gt,wt+2)),mt[wt+1]!==0&&(Et=Et.concat([mt[wt],0]))}else if(rt.fill==="tozerox"){for(gt=0;gt<mt.length&&isNaN(mt[gt]);)gt+=2;for(wt=mt.length-2;wt>gt&&isNaN(mt[wt]);)wt-=2;mt[gt]!==0&&(Et=[0,mt[gt+1]]),Et=Et.concat(mt.slice(gt,wt+2)),mt[wt]!==0&&(Et=Et.concat([0,mt[wt+1]]))}else if(rt.fill==="toself"||rt.fill==="tonext"){for(Et=[],yt=0,nt.splitNull=!0,xt=0;xt<mt.length;xt+=2)(isNaN(mt[xt])||isNaN(mt[xt+1]))&&(Et=Et.concat(mt.slice(yt,xt)),Et.push(mt[yt],mt[yt+1]),Et.push(null,null),yt=xt+2);Et=Et.concat(mt.slice(yt)),yt&&Et.push(mt[yt],mt[yt+1])}else{var Pt=rt._nexttrace;if(Pt){var Bt=s.lineOptions[X+1];if(Bt){var kt=Bt.positions;if(rt.fill==="tonexty"){for(Et=mt.slice(),X=Math.floor(kt.length/2);X--;){var jt=kt[X*2],Ht=kt[X*2+1];isNaN(jt)||isNaN(Ht)||Et.push(jt,Ht)}nt.fill=Pt.fillcolor}}}}if(rt._prevtrace&&rt._prevtrace.fill==="tonext"){var Vt=s.lineOptions[X-1].positions,ee=Et.length/2;yt=ee;var te=[yt];for(xt=0;xt<Vt.length;xt+=2)(isNaN(Vt[xt])||isNaN(Vt[xt+1]))&&(te.push(xt/2+ee+1),yt=xt+2);Et=Et.concat(Vt),nt.hole=te}return nt.fillmode=rt.fill,nt.opacity=rt.opacity,nt.positions=Et,nt}}),s.fill2d.update(s.fillOptions))}var I=x.dragmode,z=g(I),B=x.clickmode.indexOf("select")>-1;for(T=0;T<b;T++){var O=p[T][0],R=O.trace,C=O.t,F=C.index,N=R._length,V=C.x,K=C.y;if(R.selectedpoints||z||B){if(z||(z=!0),R.selectedpoints){var Q=s.selectBatch[F]=A.selIndices2selPoints(R),at={};for(k=0;k<Q.length;k++)at[Q[k]]=1;var it=[];for(k=0;k<N;k++)at[k]||it.push(k);s.unselectBatch[F]=it}var q=C.xpx=new Array(N),W=C.ypx=new Array(N);for(k=0;k<N;k++)q[k]=u.c2p(V[k]),W[k]=c.c2p(K[k])}else C.xpx=C.ypx=null}if(z){if(s.select2d||(s.select2d=M(x._glcanvas.data()[1].regl)),s.scatter2d){var Z=new Array(b);for(T=0;T<b;T++)Z[T]=s.selectBatch[T].length||s.unselectBatch[T].length?s.markerUnselectedOptions[T]:{};s.scatter2d.update(Z)}s.select2d&&(s.select2d.update(s.markerOptions),s.select2d.update(s.markerSelectedOptions)),s.glText&&p.forEach(function(nt){var X=((nt||[])[0]||{}).trace||{};e.hasText(X)&&f(nt)})}else s.scatter2d&&s.scatter2d.update(s.markerOptions);var G={viewport:a(x,u,c,h._context.plotGlPixelRatio),range:[(u._rl||u.range)[0],(c._rl||c.range)[0],(u._rl||u.range)[1],(c._rl||c.range)[1]]},et=A.repeat(G,s.count);s.fill2d&&s.fill2d.update(et),s.line2d&&s.line2d.update(et),s.error2d&&s.error2d.update(et.concat(et)),s.scatter2d&&s.scatter2d.update(et),s.select2d&&s.select2d.update(et),s.glText&&s.glText.forEach(function(nt){nt.update(G)})}}};o.reglPrecompiled=n},38967:function($,U,t){var M=t(71828);$.exports=function(E,i){var S=i._scene,A={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},g={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return i._scene||(S=i._scene={},S.init=function(){M.extendFlat(S,g,A)},S.init(),S.update=function(v){var e=M.repeat(v,S.count);if(S.fill2d&&S.fill2d.update(e),S.scatter2d&&S.scatter2d.update(e),S.line2d&&S.line2d.update(e),S.error2d&&S.error2d.update(e.concat(e)),S.select2d&&S.select2d.update(e),S.glText)for(var r=0;r<S.count;r++)S.glText[r].update(v)},S.draw=function(){for(var v=S.count,e=S.fill2d,r=S.error2d,f=S.line2d,n=S.scatter2d,a=S.glText,o=S.select2d,h=S.selectBatch,y=S.unselectBatch,p=0;p<v;p++){if(e&&S.fillOrder[p]&&e.draw(S.fillOrder[p]),f&&S.lineOptions[p]&&f.draw(p),r&&(S.errorXOptions[p]&&r.draw(p),S.errorYOptions[p]&&r.draw(p+v)),n&&S.markerOptions[p])if(y[p].length){var x=M.repeat([],S.count);x[p]=y[p],n.draw(x)}else h[p].length||n.draw(p);a[p]&&S.textOptions[p]&&a[p].render()}o&&o.draw(h),S.dirty=!1},S.destroy=function(){S.fill2d&&S.fill2d.destroy&&S.fill2d.destroy(),S.scatter2d&&S.scatter2d.destroy&&S.scatter2d.destroy(),S.error2d&&S.error2d.destroy&&S.error2d.destroy(),S.line2d&&S.line2d.destroy&&S.line2d.destroy(),S.select2d&&S.select2d.destroy&&S.select2d.destroy(),S.glText&&S.glText.forEach(function(v){v.destroy&&v.destroy()}),S.lineOptions=null,S.fillOptions=null,S.markerOptions=null,S.markerSelectedOptions=null,S.markerUnselectedOptions=null,S.errorXOptions=null,S.errorYOptions=null,S.textOptions=null,S.textSelectedOptions=null,S.textUnselectedOptions=null,S.selectBatch=null,S.unselectBatch=null,i._scene=null}),S.dirty||M.extendFlat(S,A),S}},58147:function($,U,t){var M=t(34098),E=t(5345).styleTextSelection;$.exports=function(i,S){var A=i.cd,g=i.xaxis,v=i.yaxis,e=[],r=A[0].trace,f=A[0].t,n=r._length,a=f.x,o=f.y,h=f._scene,y=f.index;if(!h)return e;var p=M.hasText(r),x=M.hasMarkers(r),s=!x&&!p;if(r.visible!==!0||s)return e;var u=[],c=[];if(S!==!1&&!S.degenerate)for(var T=0;T<n;T++)S.contains([f.xpx[T],f.ypx[T]],!1,T,i)?(u.push(T),e.push({pointNumber:T,x:g.c2d(a[T]),y:v.c2d(o[T])})):c.push(T);if(x){var k=h.scatter2d;if(!u.length&&!c.length){var _=new Array(h.count);_[y]=h.markerOptions[y],k.update.apply(k,_)}else if(!h.selectBatch[y].length&&!h.unselectBatch[y].length){var b=new Array(h.count);b[y]=h.markerUnselectedOptions[y],k.update.apply(k,b)}}return h.selectBatch[y]=u,h.unselectBatch[y]=c,p&&E(A),e}},99181:function($,U,t){var M=t(5386).fF,E=t(5386).si,i=t(19316),S=t(82196),A=t(23585),g=t(9012),v=t(50693),e=t(1426).extendFlat,r=t(30962).overrideAll,f=t(23585),n=i.line,a=i.marker;$.exports=r({lon:i.lon,lat:i.lat,cluster:{enabled:{valType:"boolean"},maxzoom:e({},f.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:e({},a.opacity,{dflt:1})},mode:e({},S.mode,{dflt:"markers"}),text:e({},S.text,{}),texttemplate:E({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:e({},S.hovertext,{}),line:{color:n.color,width:n.width},connectgaps:S.connectgaps,marker:e({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:a.opacity,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode},v("marker")),fill:i.fill,fillcolor:S.fillcolor,textfont:A.layers.symbol.textfont,textposition:A.layers.symbol.textposition,below:{valType:"string"},selected:{marker:S.selected.marker},unselected:{marker:S.unselected.marker},hoverinfo:e({},g.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:M()},"calc","nested")},15790:function($,U,t){var M=t(92770),E=t(71828),i=t(50606).BADNUM,S=t(18214),A=t(21081),g=t(91424),v=t(39984),e=t(34098),r=t(13056),f=t(23469).appendArrayPointValue,n=t(63893).NEWLINES,a=t(63893).BR_TAG_ALL;$.exports=function(c,T){var k=T[0].trace,_=k.visible===!0&&k._length!==0,b=k.fill!=="none",P=e.hasLines(k),l=e.hasMarkers(k),d=e.hasText(k),L=l&&k.marker.symbol==="circle",w=l&&k.marker.symbol!=="circle",I=k.cluster&&k.cluster.enabled,z=o("fill"),B=o("line"),O=o("circle"),R=o("symbol"),C={fill:z,line:B,circle:O,symbol:R};if(!_)return C;var F;if((b||P)&&(F=S.calcTraceToLineCoords(T)),b&&(z.geojson=S.makePolygon(F),z.layout.visibility="visible",E.extendFlat(z.paint,{"fill-color":k.fillcolor})),P&&(B.geojson=S.makeLine(F),B.layout.visibility="visible",E.extendFlat(B.paint,{"line-width":k.line.width,"line-color":k.line.color,"line-opacity":k.opacity})),L){var N=h(T);O.geojson=N.geojson,O.layout.visibility="visible",I&&(O.filter=["!",["has","point_count"]],C.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":u(k.cluster.color,k.cluster.step),"circle-radius":u(k.cluster.size,k.cluster.step),"circle-opacity":u(k.cluster.opacity,k.cluster.step)}},C.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),E.extendFlat(O.paint,{"circle-color":N.mcc,"circle-radius":N.mrc,"circle-opacity":N.mo})}if(L&&I&&(O.filter=["!",["has","point_count"]]),(w||d)&&(R.geojson=y(T,c),E.extendFlat(R.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),w&&(E.extendFlat(R.layout,{"icon-size":k.marker.size/10}),"angle"in k.marker&&k.marker.angle!=="auto"&&E.extendFlat(R.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),R.layout["icon-allow-overlap"]=k.marker.allowoverlap,E.extendFlat(R.paint,{"icon-opacity":k.opacity*k.marker.opacity,"icon-color":k.marker.color})),d)){var V=(k.marker||{}).size,K=r(k.textposition,V);E.extendFlat(R.layout,{"text-size":k.textfont.size,"text-anchor":K.anchor,"text-offset":K.offset,"text-font":k.textfont.family.split(", ")}),E.extendFlat(R.paint,{"text-color":k.textfont.color,"text-opacity":k.opacity})}return C};function o(c){return{type:c,geojson:S.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function h(c){var T=c[0].trace,k=T.marker,_=T.selectedpoints,b=E.isArrayOrTypedArray(k.color),P=E.isArrayOrTypedArray(k.size),l=E.isArrayOrTypedArray(k.opacity),d;function L(K){return T.opacity*K}function w(K){return K/2}var I;b&&(A.hasColorscale(T,"marker")?I=A.makeColorScaleFuncFromTrace(k):I=E.identity);var z;P&&(z=v(T));var B;l&&(B=function(K){var Q=M(K)?+E.constrain(K,0,1):0;return L(Q)});var O=[];for(d=0;d<c.length;d++){var R=c[d],C=R.lonlat;if(!s(C)){var F={};I&&(F.mcc=R.mcc=I(R.mc)),z&&(F.mrc=R.mrc=z(R.ms)),B&&(F.mo=B(R.mo)),_&&(F.selected=R.selected||0),O.push({type:"Feature",id:d+1,geometry:{type:"Point",coordinates:C},properties:F})}}var N;if(_)for(N=g.makeSelectedPointStyleFns(T),d=0;d<O.length;d++){var V=O[d].properties;N.selectedOpacityFn&&(V.mo=L(N.selectedOpacityFn(V))),N.selectedColorFn&&(V.mcc=N.selectedColorFn(V)),N.selectedSizeFn&&(V.mrc=N.selectedSizeFn(V))}return{geojson:{type:"FeatureCollection",features:O},mcc:b||N&&N.selectedColorFn?{type:"identity",property:"mcc"}:k.color,mrc:P||N&&N.selectedSizeFn?{type:"identity",property:"mrc"}:w(k.size),mo:l||N&&N.selectedOpacityFn?{type:"identity",property:"mo"}:L(k.opacity)}}function y(c,T){for(var k=T._fullLayout,_=c[0].trace,b=_.marker||{},P=b.symbol,l=b.angle,d=P!=="circle"?p(P):x,L=l!=="auto"?p(l,!0):x,w=e.hasText(_)?p(_.text):x,I=[],z=0;z<c.length;z++){var B=c[z];if(!s(B.lonlat)){var O=_.texttemplate,R;if(O){var C=Array.isArray(O)?O[z]||"":O,F=_._module.formatLabels(B,_,k),N={};f(N,_,B.i);var V=_._meta||{};R=E.texttemplateString(C,F,k._d3locale,N,B,V)}else R=w(z);R&&(R=R.replace(n,"").replace(a,`
`)),I.push({type:"Feature",geometry:{type:"Point",coordinates:B.lonlat},properties:{symbol:d(z),angle:L(z),text:R}})}}return{type:"FeatureCollection",features:I}}function p(c,T){return E.isArrayOrTypedArray(c)?T?function(k){return M(c[k])?+c[k]:0}:function(k){return c[k]}:c?function(){return c}:x}function x(){return""}function s(c){return c[0]===i}function u(c,T){var k;if(E.isArrayOrTypedArray(c)&&E.isArrayOrTypedArray(T)){k=["step",["get","point_count"],c[0]];for(var _=1;_<c.length;_++)k.push(T[_-1],c[_])}else k=c;return k}},76645:function($,U,t){var M=t(71828),E=t(34098),i=t(49508),S=t(11058),A=t(82410),g=t(28908),v=t(99181),e=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extra Bold Italic","Open Sans Extra Bold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];$.exports=function(f,n,a,o){function h(b,P){return M.coerce(f,n,v,b,P)}function y(b,P){return M.coerce2(f,n,v,b,P)}var p=r(f,n,h);if(!p){n.visible=!1;return}if(h("text"),h("texttemplate"),h("hovertext"),h("hovertemplate"),h("mode"),h("below"),E.hasLines(n)&&(S(f,n,a,o,h,{noDash:!0}),h("connectgaps")),E.hasMarkers(n)){i(f,n,a,o,h,{noLine:!0,noAngle:!0}),h("marker.allowoverlap"),h("marker.angle");var x=n.marker;x.symbol!=="circle"&&(M.isArrayOrTypedArray(x.size)&&(x.size=x.size[0]),M.isArrayOrTypedArray(x.color)&&(x.color=x.color[0]))}var s=y("cluster.maxzoom"),u=y("cluster.step"),c=y("cluster.color",n.marker&&n.marker.color||a),T=y("cluster.size"),k=y("cluster.opacity"),_=s!==!1||u!==!1||c!==!1||T!==!1||k!==!1;h("cluster.enabled",_),E.hasText(n)&&A(f,n,o,h,{noSelect:!0,font:{family:e.indexOf(o.font.family)!==-1?o.font.family:"Open Sans Regular",size:o.font.size,color:o.font.color}}),h("fill"),n.fill!=="none"&&g(f,n,a,h),M.coerceSelectionMarkerOpacity(n,h)};function r(f,n,a){var o=a("lon")||[],h=a("lat")||[],y=Math.min(o.length,h.length);return n._length=y,y}},53353:function($){$.exports=function(U,t){return U.lon=t.lon,U.lat=t.lat,U}},15636:function($,U,t){var M=t(89298);$.exports=function(E,i,S){var A={},g=S[i.subplot]._subplot,v=g.mockAxis,e=E.lonlat;return A.lonLabel=M.tickText(v,v.c2l(e[0]),!0).text,A.latLabel=M.tickText(v,v.c2l(e[1]),!0).text,A}},28178:function($,U,t){var M=t(30211),E=t(71828),i=t(34603),S=E.fillText,A=t(50606).BADNUM,g=t(77734).traceLayerPrefix;function v(r,f,n){var a=r.cd,o=a[0].trace,h=r.xa,y=r.ya,p=r.subplot,x=[],s=g+o.uid+"-circle",u=o.cluster&&o.cluster.enabled;if(u){var c=p.map.queryRenderedFeatures(null,{layers:[s]});x=c.map(function(O){return O.id})}var T=f>=0?Math.floor((f+180)/360):Math.ceil((f-180)/360),k=T*360,_=f-k;function b(O){var R=O.lonlat;if(R[0]===A||u&&x.indexOf(O.i+1)===-1)return 1/0;var C=E.modHalf(R[0],360),F=R[1],N=p.project([C,F]),V=N.x-h.c2p([_,F]),K=N.y-y.c2p([C,n]),Q=Math.max(3,O.mrc||0);return Math.max(Math.sqrt(V*V+K*K)-Q,1-3/Q)}if(M.getClosest(a,b,r),r.index!==!1){var P=a[r.index],l=P.lonlat,d=[E.modHalf(l[0],360)+k,l[1]],L=h.c2p(d),w=y.c2p(d),I=P.mrc||1;r.x0=L-I,r.x1=L+I,r.y0=w-I,r.y1=w+I;var z={};z[o.subplot]={_subplot:p};var B=o._module.formatLabels(P,o,z);return r.lonLabel=B.lonLabel,r.latLabel=B.latLabel,r.color=i(o,P),r.extraText=e(o,P,a[0].t.labels),r.hovertemplate=o.hovertemplate,[r]}}function e(r,f,n){if(r.hovertemplate)return;var a=f.hi||r.hoverinfo,o=a.split("+"),h=o.indexOf("all")!==-1,y=o.indexOf("lon")!==-1,p=o.indexOf("lat")!==-1,x=f.lonlat,s=[];function u(c){return c+"\xB0"}return h||y&&p?s.push("("+u(x[1])+", "+u(x[0])+")"):y?s.push(n.lon+u(x[0])):p&&s.push(n.lat+u(x[1])),(h||o.indexOf("text")!==-1)&&S(f,r,s),s.join("<br>")}$.exports={hoverPoints:v,getExtraText:e}},20467:function($,U,t){$.exports={attributes:t(99181),supplyDefaults:t(76645),colorbar:t(4898),formatLabels:t(15636),calc:t(84622),plot:t(86951),hoverPoints:t(28178).hoverPoints,eventData:t(53353),selectPoints:t(86387),styleOnSelect:function(M,E){if(E){var i=E[0].trace;i._glTrace.update(E)}},moduleType:"trace",name:"scattermapbox",basePlotModule:t(50101),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},86951:function($,U,t){var M=t(71828),E=t(15790),i=t(77734).traceLayerPrefix,S={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function A(v,e,r,f){this.type="scattermapbox",this.subplot=v,this.uid=e,this.clusterEnabled=r,this.isHidden=f,this.sourceIds={fill:"source-"+e+"-fill",line:"source-"+e+"-line",circle:"source-"+e+"-circle",symbol:"source-"+e+"-symbol",cluster:"source-"+e+"-circle",clusterCount:"source-"+e+"-circle"},this.layerIds={fill:i+e+"-fill",line:i+e+"-line",circle:i+e+"-circle",symbol:i+e+"-symbol",cluster:i+e+"-cluster",clusterCount:i+e+"-cluster-count"},this.below=null}var g=A.prototype;g.addSource=function(v,e,r){var f={type:"geojson",data:e.geojson};r&&r.enabled&&M.extendFlat(f,{cluster:!0,clusterMaxZoom:r.maxzoom});var n=this.subplot.map.getSource(this.sourceIds[v]);n?n.setData(e.geojson):this.subplot.map.addSource(this.sourceIds[v],f)},g.setSourceData=function(v,e){this.subplot.map.getSource(this.sourceIds[v]).setData(e.geojson)},g.addLayer=function(v,e,r){var f={type:e.type,id:this.layerIds[v],source:this.sourceIds[v],layout:e.layout,paint:e.paint};e.filter&&(f.filter=e.filter);for(var n=this.layerIds[v],a,o=this.subplot.getMapLayers(),h=0;h<o.length;h++)if(o[h].id===n){a=!0;break}a?(this.subplot.setOptions(n,"setLayoutProperty",f.layout),f.layout.visibility==="visible"&&this.subplot.setOptions(n,"setPaintProperty",f.paint)):this.subplot.addLayer(f,r)},g.update=function(v){var e=v[0].trace,r=this.subplot,f=r.map,n=E(r.gd,v),a=r.belowLookup["trace-"+this.uid],o=!!(e.cluster&&e.cluster.enabled),h=!!this.clusterEnabled,y=this;function p(P){P||y.addSource("circle",n.circle,e.cluster);for(var l=S.cluster,d=0;d<l.length;d++){var L=l[d],w=n[L];y.addLayer(L,w,a)}}function x(P){for(var l=S.cluster,d=l.length-1;d>=0;d--){var L=l[d];f.removeLayer(y.layerIds[L])}P||f.removeSource(y.sourceIds.circle)}function s(P){for(var l=S.nonCluster,d=0;d<l.length;d++){var L=l[d],w=n[L];P||y.addSource(L,w),y.addLayer(L,w,a)}}function u(P){for(var l=S.nonCluster,d=l.length-1;d>=0;d--){var L=l[d];f.removeLayer(y.layerIds[L]),P||f.removeSource(y.sourceIds[L])}}function c(P){h?x(P):u(P)}function T(P){o?p(P):s(P)}function k(){for(var P=o?S.cluster:S.nonCluster,l=0;l<P.length;l++){var d=P[l],L=n[d];L&&(r.setOptions(y.layerIds[d],"setLayoutProperty",L.layout),L.layout.visibility==="visible"&&(d!=="cluster"&&y.setSourceData(d,L),r.setOptions(y.layerIds[d],"setPaintProperty",L.paint)))}}var _=this.isHidden,b=e.visible!==!0;b?_||c():_?b||T():h!==o?(c(),T()):(this.below!==a&&(c(!0),T(!0)),k()),this.clusterEnabled=o,this.isHidden=b,this.below=a,v[0].trace._glTrace=this},g.dispose=function(){for(var v=this.subplot.map,e=this.clusterEnabled?S.cluster:S.nonCluster,r=e.length-1;r>=0;r--){var f=e[r];v.removeLayer(this.layerIds[f]),v.removeSource(this.sourceIds[f])}},$.exports=function(v,e){var r=e[0].trace,f=r.cluster&&r.cluster.enabled,n=r.visible!==!0,a=new A(v,r.uid,f,n),o=E(v.gd,e),h=a.below=v.belowLookup["trace-"+r.uid],y,p,x;if(f)for(a.addSource("circle",o.circle,r.cluster),y=0;y<S.cluster.length;y++)p=S.cluster[y],x=o[p],a.addLayer(p,x,h);else for(y=0;y<S.nonCluster.length;y++)p=S.nonCluster[y],x=o[p],a.addSource(p,x,r.cluster),a.addLayer(p,x,h);return e[0].trace._glTrace=a,a}},86387:function($,U,t){var M=t(71828),E=t(34098),i=t(50606).BADNUM;$.exports=function(S,A){var g=S.cd,v=S.xaxis,e=S.yaxis,r=[],f=g[0].trace,n;if(!E.hasMarkers(f))return[];if(A===!1)for(n=0;n<g.length;n++)g[n].selected=0;else for(n=0;n<g.length;n++){var a=g[n],o=a.lonlat;if(o[0]!==i){var h=[M.modHalf(o[0],360),o[1]],y=[v.c2p(h),e.c2p(h)];A.contains(y,null,n,S)?(r.push({pointNumber:n,lon:o[0],lat:o[1]}),a.selected=1):a.selected=0}}return r}},81245:function($,U,t){var M=t(5386).fF,E=t(5386).si,i=t(1426).extendFlat,S=t(82196),A=t(9012),g=S.line;$.exports={mode:S.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:S.text,texttemplate:E({editType:"plot"},{keys:["r","theta","text"]}),hovertext:S.hovertext,line:{color:g.color,width:g.width,dash:g.dash,backoff:g.backoff,shape:i({},g.shape,{values:["linear","spline"]}),smoothing:g.smoothing,editType:"calc"},connectgaps:S.connectgaps,marker:S.marker,cliponaxis:i({},S.cliponaxis,{dflt:!1}),textposition:S.textposition,textfont:S.textfont,fill:i({},S.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:S.fillcolor,hoverinfo:i({},A.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:S.hoveron,hovertemplate:M(),selected:S.selected,unselected:S.unselected}},26442:function($,U,t){var M=t(92770),E=t(50606).BADNUM,i=t(89298),S=t(36922),A=t(75225),g=t(66279),v=t(47761).calcMarkerSize;$.exports=function(e,r){for(var f=e._fullLayout,n=r.subplot,a=f[n].radialaxis,o=f[n].angularaxis,h=a.makeCalcdata(r,"r"),y=o.makeCalcdata(r,"theta"),p=r._length,x=new Array(p),s=0;s<p;s++){var u=h[s],c=y[s],T=x[s]={};M(u)&&M(c)?(T.r=u,T.theta=c):T.r=E}var k=v(r,p);return r._extremes.x=i.findExtremes(a,h,{ppad:k}),S(e,r),A(x,r),g(x,r),x}},22184:function($,U,t){var M=t(71828),E=t(34098),i=t(49508),S=t(11058),A=t(94039),g=t(82410),v=t(28908),e=t(47581).PTS_LINESONLY,r=t(81245);function f(a,o,h,y){function p(u,c){return M.coerce(a,o,r,u,c)}var x=n(a,o,y,p);if(!x){o.visible=!1;return}p("thetaunit"),p("mode",x<e?"lines+markers":"lines"),p("text"),p("hovertext"),o.hoveron!=="fills"&&p("hovertemplate"),E.hasLines(o)&&(S(a,o,h,y,p,{backoff:!0}),A(a,o,p),p("connectgaps")),E.hasMarkers(o)&&i(a,o,h,y,p,{gradient:!0}),E.hasText(o)&&(p("texttemplate"),g(a,o,y,p));var s=[];(E.hasMarkers(o)||E.hasText(o))&&(p("cliponaxis"),p("marker.maxdisplayed"),s.push("points")),p("fill"),o.fill!=="none"&&(v(a,o,h,p),E.hasLines(o)||A(a,o,p)),(o.fill==="tonext"||o.fill==="toself")&&s.push("fills"),p("hoveron",s.join("+")||"points"),M.coerceSelectionMarkerOpacity(o,p)}function n(a,o,h,y){var p=y("r"),x=y("theta"),s;if(p)x?s=Math.min(p.length,x.length):(s=p.length,y("theta0"),y("dtheta"));else{if(!x)return 0;s=o.theta.length,y("r0"),y("dr")}return o._length=s,s}$.exports={handleRThetaDefaults:n,supplyDefaults:f}},98608:function($,U,t){var M=t(71828),E=t(89298);$.exports=function(i,S,A){var g={},v=A[S.subplot]._subplot,e,r;v?(e=v.radialAxis,r=v.angularAxis):(v=A[S.subplot],e=v.radialaxis,r=v.angularaxis);var f=e.c2l(i.r);g.rLabel=E.tickText(e,f,!0).text;var n=r.thetaunit==="degrees"?M.rad2deg(i.theta):i.theta;return g.thetaLabel=E.tickText(r,n,!0).text,g}},59150:function($,U,t){var M=t(33720);function E(S,A,g,v){var e=M(S,A,g,v);if(!(!e||e[0].index===!1)){var r=e[0];if(r.index===void 0)return e;var f=S.subplot,n=r.cd[r.index],a=r.trace;if(f.isPtInside(n))return r.xLabelVal=void 0,r.yLabelVal=void 0,i(n,a,f,r),r.hovertemplate=a.hovertemplate,e}}function i(S,A,g,v){var e=g.radialAxis,r=g.angularAxis;e._hovertitle="r",r._hovertitle="\u03B8";var f={};f[A.subplot]={_subplot:g};var n=A._module.formatLabels(S,A,f);v.rLabel=n.rLabel,v.thetaLabel=n.thetaLabel;var a=S.hi||A.hoverinfo,o=[];function h(p,x){o.push(p._hovertitle+": "+x)}if(!A.hovertemplate){var y=a.split("+");y.indexOf("all")!==-1&&(y=["r","theta","text"]),y.indexOf("r")!==-1&&h(e,v.rLabel),y.indexOf("theta")!==-1&&h(r,v.thetaLabel),y.indexOf("text")!==-1&&v.text&&(o.push(v.text),delete v.text),v.extraText=o.join("<br>")}}$.exports={hoverPoints:E,makeHoverPointText:i}},91271:function($,U,t){$.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:t(23580),categories:["polar","symbols","showLegend","scatter-like"],attributes:t(81245),supplyDefaults:t(22184).supplyDefaults,colorbar:t(4898),formatLabels:t(98608),calc:t(26442),plot:t(45162),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(59150).hoverPoints,selectPoints:t(98002),meta:{}}},45162:function($,U,t){var M=t(32663),E=t(50606).BADNUM;$.exports=function(i,S,A){for(var g=S.layers.frontplot.select("g.scatterlayer"),v=S.xaxis,e=S.yaxis,r={xaxis:v,yaxis:e,plot:S.framework,layerClipId:S._hasClipOnAxisFalse?S.clipIds.forTraces:null},f=S.radialAxis,n=S.angularAxis,a=0;a<A.length;a++)for(var o=A[a],h=0;h<o.length;h++){h===0&&(o[0].trace._xA=v,o[0].trace._yA=e);var y=o[h],p=y.r;if(p===E)y.x=y.y=E;else{var x=f.c2g(p),s=n.c2g(y.theta);y.x=x*Math.cos(s),y.y=x*Math.sin(s)}}M(i,r,A,g)}},53286:function($,U,t){var M=t(81245),E=t(42341),i=t(5386).si;$.exports={mode:M.mode,r:M.r,theta:M.theta,r0:M.r0,dr:M.dr,theta0:M.theta0,dtheta:M.dtheta,thetaunit:M.thetaunit,text:M.text,texttemplate:i({editType:"plot"},{keys:["r","theta","text"]}),hovertext:M.hovertext,hovertemplate:M.hovertemplate,line:E.line,connectgaps:E.connectgaps,marker:E.marker,fill:E.fill,fillcolor:E.fillcolor,textposition:E.textposition,textfont:E.textfont,hoverinfo:M.hoverinfo,selected:M.selected,unselected:M.unselected}},65746:function($,U,t){$.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:t(23580),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:t(53286),supplyDefaults:t(75485),colorbar:t(4898),formatLabels:t(46255),calc:t(37499),hoverPoints:t(29347).hoverPoints,selectPoints:t(58147),meta:{}}},37499:function($,U,t){var M=t(36922),E=t(47761).calcMarkerSize,i=t(19635),S=t(89298),A=t(78232).TOO_MANY_POINTS;$.exports=function(g,v){var e=g._fullLayout,r=v.subplot,f=e[r].radialaxis,n=e[r].angularaxis,a=v._r=f.makeCalcdata(v,"r"),o=v._theta=n.makeCalcdata(v,"theta"),h=v._length,y={};h<a.length&&(a=a.slice(0,h)),h<o.length&&(o=o.slice(0,h)),y.r=a,y.theta=o,M(g,v);var p=y.opts=i.style(g,v),x;return h<A?x=E(v,h):p.marker&&(x=2*(p.marker.sizeAvg||Math.max(p.marker.size,3))),v._extremes.x=S.findExtremes(f,a,{ppad:x}),[{x:!1,y:!1,t:y,trace:v}]}},75485:function($,U,t){var M=t(71828),E=t(34098),i=t(22184).handleRThetaDefaults,S=t(49508),A=t(11058),g=t(82410),v=t(28908),e=t(47581).PTS_LINESONLY,r=t(53286);$.exports=function(f,n,a,o){function h(p,x){return M.coerce(f,n,r,p,x)}var y=i(f,n,o,h);if(!y){n.visible=!1;return}h("thetaunit"),h("mode",y<e?"lines+markers":"lines"),h("text"),h("hovertext"),n.hoveron!=="fills"&&h("hovertemplate"),E.hasLines(n)&&(A(f,n,a,o,h),h("connectgaps")),E.hasMarkers(n)&&S(f,n,a,o,h,{noAngleRef:!0,noStandOff:!0}),E.hasText(n)&&(h("texttemplate"),g(f,n,o,h)),h("fill"),n.fill!=="none"&&v(f,n,a,h),M.coerceSelectionMarkerOpacity(n,h)}},46255:function($,U,t){var M=t(98608);$.exports=function(E,i,S){var A=E.i;return"r"in E||(E.r=i._r[A]),"theta"in E||(E.theta=i._theta[A]),M(E,i,S)}},29347:function($,U,t){var M=t(20794),E=t(59150).makeHoverPointText;function i(S,A,g,v){var e=S.cd,r=e[0].t,f=r.r,n=r.theta,a=M.hoverPoints(S,A,g,v);if(!(!a||a[0].index===!1)){var o=a[0];if(o.index===void 0)return a;var h=S.subplot,y=o.cd[o.index],p=o.trace;if(y.r=f[o.index],y.theta=n[o.index],!!h.isPtInside(y))return o.xLabelVal=void 0,o.yLabelVal=void 0,E(y,p,h,o),a}}$.exports={hoverPoints:i}},21461:function($,U,t){var M=t(65746);M.plot=t(49741),$.exports=M},49741:function($,U,t){var M=t(88294),E=t(92770),i=t(26787),S=t(38967),A=t(19635),g=t(71828),v=t(78232).TOO_MANY_POINTS,e={};$.exports=function(r,f,n){if(n.length){var a=f.radialAxis,o=f.angularAxis,h=S(r,f);return n.forEach(function(y){if(!(!y||!y[0]||!y[0].trace)){var p=y[0],x=p.trace,s=p.t,u=x._length,c=s.r,T=s.theta,k=s.opts,_,b=c.slice(),P=T.slice();for(_=0;_<c.length;_++)f.isPtInside({r:c[_],theta:T[_]})||(b[_]=NaN,P[_]=NaN);var l=new Array(u*2),d=Array(u),L=Array(u);for(_=0;_<u;_++){var w=b[_],I,z;if(E(w)){var B=a.c2g(w),O=o.c2g(P[_],x.thetaunit);I=B*Math.cos(O),z=B*Math.sin(O)}else I=z=NaN;d[_]=l[_*2]=I,L[_]=l[_*2+1]=z}s.tree=M(l),k.marker&&u>=v&&(k.marker.cluster=s.tree),k.marker&&(k.markerSel.positions=k.markerUnsel.positions=k.marker.positions=l),k.line&&l.length>1&&g.extendFlat(k.line,A.linePositions(r,x,l)),k.text&&(g.extendFlat(k.text,{positions:l},A.textPosition(r,x,k.text,k.marker)),g.extendFlat(k.textSel,{positions:l},A.textPosition(r,x,k.text,k.markerSel)),g.extendFlat(k.textUnsel,{positions:l},A.textPosition(r,x,k.text,k.markerUnsel))),k.fill&&!h.fill2d&&(h.fill2d=!0),k.marker&&!h.scatter2d&&(h.scatter2d=!0),k.line&&!h.line2d&&(h.line2d=!0),k.text&&!h.glText&&(h.glText=!0),h.lineOptions.push(k.line),h.fillOptions.push(k.fill),h.markerOptions.push(k.marker),h.markerSelectedOptions.push(k.markerSel),h.markerUnselectedOptions.push(k.markerUnsel),h.textOptions.push(k.text),h.textSelectedOptions.push(k.textSel),h.textUnselectedOptions.push(k.textUnsel),h.selectBatch.push([]),h.unselectBatch.push([]),s.x=d,s.y=L,s.rawx=d,s.rawy=L,s.r=c,s.theta=T,s.positions=l,s._scene=h,s.index=h.count,h.count++}}),i(r,f,n)}},$.exports.reglPrecompiled=e},48300:function($,U,t){var M=t(5386).fF,E=t(5386).si,i=t(1426).extendFlat,S=t(82196),A=t(9012),g=S.line;$.exports={mode:S.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:S.text,texttemplate:E({editType:"plot"},{keys:["real","imag","text"]}),hovertext:S.hovertext,line:{color:g.color,width:g.width,dash:g.dash,backoff:g.backoff,shape:i({},g.shape,{values:["linear","spline"]}),smoothing:g.smoothing,editType:"calc"},connectgaps:S.connectgaps,marker:S.marker,cliponaxis:i({},S.cliponaxis,{dflt:!1}),textposition:S.textposition,textfont:S.textfont,fill:i({},S.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:S.fillcolor,hoverinfo:i({},A.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:S.hoveron,hovertemplate:M(),selected:S.selected,unselected:S.unselected}},30621:function($,U,t){var M=t(92770),E=t(50606).BADNUM,i=t(36922),S=t(75225),A=t(66279),g=t(47761).calcMarkerSize;$.exports=function(v,e){for(var r=v._fullLayout,f=e.subplot,n=r[f].realaxis,a=r[f].imaginaryaxis,o=n.makeCalcdata(e,"real"),h=a.makeCalcdata(e,"imag"),y=e._length,p=new Array(y),x=0;x<y;x++){var s=o[x],u=h[x],c=p[x]={};M(s)&&M(u)?(c.real=s,c.imag=u):c.real=E}return g(e,y),i(v,e),S(p,e),A(p,e),p}},65269:function($,U,t){var M=t(71828),E=t(34098),i=t(49508),S=t(11058),A=t(94039),g=t(82410),v=t(28908),e=t(47581).PTS_LINESONLY,r=t(48300);$.exports=function(n,a,o,h){function y(s,u){return M.coerce(n,a,r,s,u)}var p=f(n,a,h,y);if(!p){a.visible=!1;return}y("mode",p<e?"lines+markers":"lines"),y("text"),y("hovertext"),a.hoveron!=="fills"&&y("hovertemplate"),E.hasLines(a)&&(S(n,a,o,h,y,{backoff:!0}),A(n,a,y),y("connectgaps")),E.hasMarkers(a)&&i(n,a,o,h,y,{gradient:!0}),E.hasText(a)&&(y("texttemplate"),g(n,a,h,y));var x=[];(E.hasMarkers(a)||E.hasText(a))&&(y("cliponaxis"),y("marker.maxdisplayed"),x.push("points")),y("fill"),a.fill!=="none"&&(v(n,a,o,y),E.hasLines(a)||A(n,a,y)),(a.fill==="tonext"||a.fill==="toself")&&x.push("fills"),y("hoveron",x.join("+")||"points"),M.coerceSelectionMarkerOpacity(a,y)};function f(n,a,o,h){var y=h("real"),p=h("imag"),x;return y&&p&&(x=Math.min(y.length,p.length)),a._length=x,x}},62047:function($,U,t){var M=t(89298);$.exports=function(E,i,S){var A={},g=S[i.subplot]._subplot;return A.realLabel=M.tickText(g.radialAxis,E.real,!0).text,A.imagLabel=M.tickText(g.angularAxis,E.imag,!0).text,A}},11350:function($,U,t){var M=t(33720);function E(S,A,g,v){var e=M(S,A,g,v);if(!(!e||e[0].index===!1)){var r=e[0];if(r.index===void 0)return e;var f=S.subplot,n=r.cd[r.index],a=r.trace;if(f.isPtInside(n))return r.xLabelVal=void 0,r.yLabelVal=void 0,i(n,a,f,r),r.hovertemplate=a.hovertemplate,e}}function i(S,A,g,v){var e=g.radialAxis,r=g.angularAxis;e._hovertitle="real",r._hovertitle="imag";var f={};f[A.subplot]={_subplot:g};var n=A._module.formatLabels(S,A,f);v.realLabel=n.realLabel,v.imagLabel=n.imagLabel;var a=S.hi||A.hoverinfo,o=[];function h(p,x){o.push(p._hovertitle+": "+x)}if(!A.hovertemplate){var y=a.split("+");y.indexOf("all")!==-1&&(y=["real","imag","text"]),y.indexOf("real")!==-1&&h(e,v.realLabel),y.indexOf("imag")!==-1&&h(r,v.imagLabel),y.indexOf("text")!==-1&&v.text&&(o.push(v.text),delete v.text),v.extraText=o.join("<br>")}}$.exports={hoverPoints:E,makeHoverPointText:i}},85956:function($,U,t){$.exports={moduleType:"trace",name:"scattersmith",basePlotModule:t(7504),categories:["smith","symbols","showLegend","scatter-like"],attributes:t(48300),supplyDefaults:t(65269),colorbar:t(4898),formatLabels:t(62047),calc:t(30621),plot:t(12480),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(11350).hoverPoints,selectPoints:t(98002),meta:{}}},12480:function($,U,t){var M=t(32663),E=t(50606).BADNUM,i=t(23893),S=i.smith;$.exports=function(A,g,v){for(var e=g.layers.frontplot.select("g.scatterlayer"),r=g.xaxis,f=g.yaxis,n={xaxis:r,yaxis:f,plot:g.framework,layerClipId:g._hasClipOnAxisFalse?g.clipIds.forTraces:null},a=0;a<v.length;a++)for(var o=v[a],h=0;h<o.length;h++){h===0&&(o[0].trace._xA=r,o[0].trace._yA=f);var y=o[h],p=y.real;if(p===E)y.x=y.y=E;else{var x=S([p,y.imag]);y.x=x[0],y.y=x[1]}}M(A,n,v,e)}},50413:function($,U,t){var M=t(5386).fF,E=t(5386).si,i=t(82196),S=t(9012),A=t(50693),g=t(79952).P,v=t(1426).extendFlat,e=i.marker,r=i.line,f=e.line;$.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:v({},i.mode,{dflt:"markers"}),text:v({},i.text,{}),texttemplate:E({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:v({},i.hovertext,{}),line:{color:r.color,width:r.width,dash:g,backoff:r.backoff,shape:v({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:i.connectgaps,cliponaxis:i.cliponaxis,fill:v({},i.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:i.fillcolor,marker:v({symbol:e.symbol,opacity:e.opacity,angle:e.angle,angleref:e.angleref,standoff:e.standoff,maxdisplayed:e.maxdisplayed,size:e.size,sizeref:e.sizeref,sizemin:e.sizemin,sizemode:e.sizemode,line:v({width:f.width,editType:"calc"},A("marker.line")),gradient:e.gradient,editType:"calc"},A("marker")),textfont:i.textfont,textposition:i.textposition,selected:i.selected,unselected:i.unselected,hoverinfo:v({},S.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:i.hoveron,hovertemplate:M()}},54337:function($,U,t){var M=t(92770),E=t(36922),i=t(75225),S=t(66279),A=t(47761).calcMarkerSize,g=["a","b","c"],v={a:["b","c"],b:["a","c"],c:["a","b"]};$.exports=function(e,r){var f=e._fullLayout[r.subplot],n=f.sum,a=r.sum||n,o={a:r.a,b:r.b,c:r.c},h,y,p,x,s,u;for(h=0;h<g.length;h++)if(p=g[h],!o[p]){for(s=o[v[p][0]],u=o[v[p][1]],x=new Array(s.length),y=0;y<s.length;y++)x[y]=a-s[y]-u[y];o[p]=x}var c=r._length,T=new Array(c),k,_,b,P,l,d;for(h=0;h<c;h++)k=o.a[h],_=o.b[h],b=o.c[h],M(k)&&M(_)&&M(b)?(k=+k,_=+_,b=+b,P=n/(k+_+b),P!==1&&(k*=P,_*=P,b*=P),d=k,l=b-_,T[h]={x:l,y:d,a:k,b:_,c:b}):T[h]={x:!1,y:!1};return A(r,c),E(e,r),i(T,r),S(T,r),T}},46008:function($,U,t){var M=t(71828),E=t(47581),i=t(34098),S=t(49508),A=t(11058),g=t(94039),v=t(82410),e=t(28908),r=t(50413);$.exports=function(f,n,a,o){function h(T,k){return M.coerce(f,n,r,T,k)}var y=h("a"),p=h("b"),x=h("c"),s;if(y?(s=y.length,p?(s=Math.min(s,p.length),x&&(s=Math.min(s,x.length))):x?s=Math.min(s,x.length):s=0):p&&x&&(s=Math.min(p.length,x.length)),!s){n.visible=!1;return}n._length=s,h("sum"),h("text"),h("hovertext"),n.hoveron!=="fills"&&h("hovertemplate");var u=s<E.PTS_LINESONLY?"lines+markers":"lines";h("mode",u),i.hasLines(n)&&(A(f,n,a,o,h,{backoff:!0}),g(f,n,h),h("connectgaps")),i.hasMarkers(n)&&S(f,n,a,o,h,{gradient:!0}),i.hasText(n)&&(h("texttemplate"),v(f,n,o,h));var c=[];(i.hasMarkers(n)||i.hasText(n))&&(h("cliponaxis"),h("marker.maxdisplayed"),c.push("points")),h("fill"),n.fill!=="none"&&(e(f,n,a,h),i.hasLines(n)||g(f,n,h)),(n.fill==="tonext"||n.fill==="toself")&&c.push("fills"),h("hoveron",c.join("+")||"points"),M.coerceSelectionMarkerOpacity(n,h)}},4524:function($){$.exports=function(U,t,M,E,i){if(t.xa&&(U.xaxis=t.xa),t.ya&&(U.yaxis=t.ya),E[i]){var S=E[i];U.a=S.a,U.b=S.b,U.c=S.c}else U.a=t.a,U.b=t.b,U.c=t.c;return U}},93645:function($,U,t){var M=t(89298);$.exports=function(E,i,S){var A={},g=S[i.subplot]._subplot;return A.aLabel=M.tickText(g.aaxis,E.a,!0).text,A.bLabel=M.tickText(g.baxis,E.b,!0).text,A.cLabel=M.tickText(g.caxis,E.c,!0).text,A}},47250:function($,U,t){var M=t(33720);$.exports=function(E,i,S,A){var g=M(E,i,S,A);if(!g||g[0].index===!1)return;var v=g[0];if(v.index===void 0){var e=1-v.y0/E.ya._length,r=E.xa._length,f=r*e/2,n=r-f;return v.x0=Math.max(Math.min(v.x0,n),f),v.x1=Math.max(Math.min(v.x1,n),f),g}var a=v.cd[v.index],o=v.trace,h=v.subplot;v.a=a.a,v.b=a.b,v.c=a.c,v.xLabelVal=void 0,v.yLabelVal=void 0;var y={};y[o.subplot]={_subplot:h};var p=o._module.formatLabels(a,o,y);v.aLabel=p.aLabel,v.bLabel=p.bLabel,v.cLabel=p.cLabel;var x=a.hi||o.hoverinfo,s=[];function u(T,k){s.push(T._hovertitle+": "+k)}if(!o.hovertemplate){var c=x.split("+");c.indexOf("all")!==-1&&(c=["a","b","c"]),c.indexOf("a")!==-1&&u(h.aaxis,v.aLabel),c.indexOf("b")!==-1&&u(h.baxis,v.bLabel),c.indexOf("c")!==-1&&u(h.caxis,v.cLabel)}return v.extraText=s.join("<br>"),v.hovertemplate=o.hovertemplate,g}},52979:function($,U,t){$.exports={attributes:t(50413),supplyDefaults:t(46008),colorbar:t(4898),formatLabels:t(93645),calc:t(54337),plot:t(7507),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(47250),selectPoints:t(98002),eventData:t(4524),moduleType:"trace",name:"scatterternary",basePlotModule:t(61639),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},7507:function($,U,t){var M=t(32663);$.exports=function(E,i,S){var A=i.plotContainer;A.select(".scatterlayer").selectAll("*").remove();for(var g=i.xaxis,v=i.yaxis,e={xaxis:g,yaxis:v,plot:A,layerClipId:i._hasClipOnAxisFalse?i.clipIdRelative:null},r=i.layers.frontplot.select("g.scatterlayer"),f=0;f<S.length;f++){var n=S[f];n.length&&(n[0].trace._xA=g,n[0].trace._yA=v)}M(E,e,S,r)}},46880:function($,U,t){var M=t(82196),E=t(50693),i=t(12663).axisHoverFormat,S=t(5386).fF,A=t(42341),g=t(85555).idRegex,v=t(44467).templatedArray,e=t(1426).extendFlat,r=M.marker,f=r.line,n=e(E("marker.line",{editTypeOverride:"calc"}),{width:e({},f.width,{editType:"calc"}),editType:"calc"}),a=e(E("marker"),{symbol:r.symbol,angle:r.angle,size:e({},r.size,{editType:"markerSize"}),sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:n,editType:"calc"});a.color.editType=a.cmin.editType=a.cmax.editType="style";function o(h){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:g[h],editType:"plot"}}}$.exports={dimensions:v("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:e({},A.text,{}),hovertext:e({},A.hovertext,{}),hovertemplate:S(),xhoverformat:i("x"),yhoverformat:i("y"),marker:a,xaxes:o("x"),yaxes:o("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:A.selected.marker,editType:"calc"},unselected:{marker:A.unselected.marker,editType:"calc"},opacity:A.opacity}},65017:function($,U,t){var M=t(73972),E=t(83312);$.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:t(46880),supplyDefaults:t(25784),colorbar:t(4898),calc:t(87625),plot:t(79410),hoverPoints:t(8567).hoverPoints,selectPoints:t(8689),editStyle:t(28801),meta:{}},M.register(E)},16947:function($,U,t){var M=t(46075),E=t(73972),i=t(79749),S=t(27659).a0,A=t(93612),g=t(41675).getFromId,v=t(89298).shouldShowZeroLine,e="splom",r={};function f(p){var x=p._fullLayout,s=E.getModule(e),u=S(p.calcdata,s)[0],c=i(p,["ANGLE_instanced_arrays","OES_element_index_uint"],r);c&&(x._hasOnlyLargeSploms&&o(p),s.plot(p,{},u))}function n(p){var x=p.calcdata,s=p._fullLayout;s._hasOnlyLargeSploms&&o(p);for(var u=0;u<x.length;u++){var c=x[u][0],T=c.trace,k=s._splomScenes[T.uid];T.type==="splom"&&k&&k.matrix&&a(p,T,k)}}function a(p,x,s){for(var u=s.matrixOptions.data.length,c=x._visibleDims,T=s.viewOpts.ranges=new Array(u),k=0;k<c.length;k++){var _=c[k],b=T[k]=new Array(4),P=g(p,x._diag[_][0]);P&&(b[0]=P.r2l(P.range[0]),b[2]=P.r2l(P.range[1]));var l=g(p,x._diag[_][1]);l&&(b[1]=l.r2l(l.range[0]),b[3]=l.r2l(l.range[1]))}s.selectBatch.length||s.unselectBatch.length?s.matrix.update({ranges:T},{ranges:T}):s.matrix.update({ranges:T})}function o(p){var x=p._fullLayout,s=x._glcanvas.data()[0].regl,u=x._splomGrid;u||(u=x._splomGrid=M(s)),u.update(h(p))}function h(p){var x=p._context.plotGlPixelRatio,s=p._fullLayout,u=s._size,c=[0,0,s.width*x,s.height*x],T={},k;function _(V,K,Q,at,it,q){Q*=x,at*=x,it*=x,q*=x;var W=K[V+"color"],Z=K[V+"width"],G=String(W+Z);G in T?T[G].data.push(NaN,NaN,Q,at,it,q):T[G]={data:[Q,at,it,q],join:"rect",thickness:Z*x,color:W,viewport:c,range:c,overlay:!1}}for(k in s._splomSubplots){var b=s._plots[k],P=b.xaxis,l=b.yaxis,d=P._gridVals,L=l._gridVals,w=P._offset,I=P._length,z=l._length,B=u.b+l.domain[0]*u.h,O=-l._m,R=-O*l.r2l(l.range[0],l.calendar),C,F;if(P.showgrid)for(k=0;k<d.length;k++)C=w+P.l2p(d[k].x),_("grid",P,C,B,C,B+z);if(l.showgrid)for(k=0;k<L.length;k++)F=B+R+O*L[k].x,_("grid",l,w,F,w+I,F);v(p,P,l)&&(C=w+P.l2p(0),_("zeroline",P,C,B,C,B+z)),v(p,l,P)&&(F=B+R+0,_("zeroline",l,w,F,w+I,F))}var N=[];for(k in T)N.push(T[k]);return N}function y(p,x,s,u){var c={},T;if(u._splomScenes){for(T=0;T<p.length;T++){var k=p[T];k.type==="splom"&&(c[k.uid]=1)}for(T=0;T<s.length;T++){var _=s[T];if(!c[_.uid]){var b=u._splomScenes[_.uid];b&&b.destroy&&b.destroy(),u._splomScenes[_.uid]=null,delete u._splomScenes[_.uid]}}}Object.keys(u._splomScenes||{}).length===0&&delete u._splomScenes,u._splomGrid&&!x._hasOnlyLargeSploms&&u._hasOnlyLargeSploms&&(u._splomGrid.destroy(),u._splomGrid=null,delete u._splomGrid),A.clean(p,x,s,u)}$.exports={name:e,attr:A.attr,attrRegex:A.attrRegex,layoutAttributes:A.layoutAttributes,supplyLayoutDefaults:A.supplyLayoutDefaults,drawFramework:A.drawFramework,plot:f,drag:n,updateGrid:o,clean:y,updateFx:A.updateFx,toSVG:A.toSVG,reglPrecompiled:r}},87625:function($,U,t){var M=t(71828),E=t(41675),i=t(47761).calcMarkerSize,S=t(47761).calcAxisExpansion,A=t(36922),g=t(19635).markerSelection,v=t(19635).markerStyle,e=t(10164),r=t(50606).BADNUM,f=t(78232).TOO_MANY_POINTS;$.exports=function(n,a){var o=a.dimensions,h=a._length,y={},p=y.cdata=[],x=y.data=[],s=a._visibleDims=[],u,c,T,k,_;function b(w,I){for(var z=w.makeCalcdata({v:I.values,vcalendar:a.calendar},"v"),B=0;B<z.length;B++)z[B]=z[B]===r?NaN:z[B];p.push(z),x.push(w.type==="log"?M.simpleMap(z,w.c2l):z)}for(u=0;u<o.length;u++)if(T=o[u],T.visible){if(k=E.getFromId(n,a._diag[u][0]),_=E.getFromId(n,a._diag[u][1]),k&&_&&k.type!==_.type){M.log("Skipping splom dimension "+u+" with conflicting axis types");continue}k?(b(k,T),_&&_.type==="category"&&(_._categories=k._categories.slice())):b(_,T),s.push(u)}A(n,a),M.extendFlat(y,v(n,a));var P=p.length,l=P*h>f,d;for(l?d=y.sizeAvg||Math.max(y.size,3):d=i(a,h),c=0;c<s.length;c++)u=s[c],T=o[u],k=E.getFromId(n,a._diag[u][0])||{},_=E.getFromId(n,a._diag[u][1])||{},S(n,a,k,_,p[c],p[c],d);var L=e(n,a);return L.matrix||(L.matrix=!0),L.matrixOptions=y,L.selectedOptions=g(n,a,a.selected),L.unselectedOptions=g(n,a,a.unselected),[{x:!1,y:!1,t:{},trace:a}]}},25784:function($,U,t){var M=t(71828),E=t(85501),i=t(46880),S=t(34098),A=t(49508),g=t(94397),v=t(68645).isOpenSymbol;$.exports=function(f,n,a,o){function h(k,_){return M.coerce(f,n,i,k,_)}var y=E(f,n,{name:"dimensions",handleItemDefaults:e}),p=h("diagonal.visible"),x=h("showupperhalf"),s=h("showlowerhalf"),u=g(n,y,"values");if(!u||!p&&!x&&!s){n.visible=!1;return}h("text"),h("hovertext"),h("hovertemplate"),h("xhoverformat"),h("yhoverformat"),A(f,n,a,o,h,{noAngleRef:!0,noStandOff:!0});var c=v(n.marker.symbol),T=S.isBubble(n);h("marker.line.width",c||T?1:0),r(f,n,o,h),M.coerceSelectionMarkerOpacity(n,h)};function e(f,n){function a(h,y){return M.coerce(f,n,i.dimensions,h,y)}a("label");var o=a("values");o&&o.length?a("visible"):n.visible=!1,a("axis.type"),a("axis.matches")}function r(f,n,a,o){var h=n.dimensions,y=h.length,p=n.showupperhalf,x=n.showlowerhalf,s=n.diagonal.visible,u,c,T=new Array(y),k=new Array(y);for(u=0;u<y;u++){var _=u?u+1:"";T[u]="x"+_,k[u]="y"+_}var b=o("xaxes",T),P=o("yaxes",k),l=n._diag=new Array(y);n._xaxes={},n._yaxes={};var d=[],L=[];function w(V,K,Q,at){if(V){var it=V.charAt(0),q=a._splomAxes[it];if(n["_"+it+"axes"][V]=1,at.push(V),!(V in q)){var W=q[V]={};Q&&(W.label=Q.label||"",Q.visible&&Q.axis&&(Q.axis.type&&(W.type=Q.axis.type),Q.axis.matches&&(W.matches=K)))}}}var I=!s&&!x,z=!s&&!p;for(n._axesDim={},u=0;u<y;u++){var B=h[u],O=u===0,R=u===y-1,C=O&&I||R&&z?void 0:b[u],F=O&&z||R&&I?void 0:P[u];w(C,F,B,d),w(F,C,B,L),l[u]=[C,F],n._axesDim[C]=u,n._axesDim[F]=u}for(u=0;u<d.length;u++)for(c=0;c<L.length;c++){var N=d[u]+L[c];(u>c&&p||u<c&&x||u===c&&(s||!x||!p))&&(a._splomSubplots[N]=1)}(!x||!s&&p&&x)&&(a._splomGridDflt.xside="bottom",a._splomGridDflt.yside="left")}},28801:function($,U,t){var M=t(71828),E=t(36922),i=t(19635).markerStyle;$.exports=function(S,A){var g=A.trace,v=S._fullLayout._splomScenes[g.uid];if(v){E(S,g),M.extendFlat(v.matrixOptions,i(S,g));var e=M.extendFlat({},v.matrixOptions,v.viewOpts);v.matrix.update(e,null)}}},35948:function($,U){U.getDimIndex=function(t,M){for(var E=M._id,i=E.charAt(0),S={x:0,y:1}[i],A=t._visibleDims,g=0;g<A.length;g++){var v=A[g];if(t._diag[v][S]===E)return g}return!1}},8567:function($,U,t){var M=t(35948),E=t(20794).calcHover;function i(S,A,g){var v=S.cd,e=v[0].trace,r=S.scene,f=r.matrixOptions.cdata,n=S.xa,a=S.ya,o=n.c2p(A),h=a.c2p(g),y=S.distance,p=M.getDimIndex(e,n),x=M.getDimIndex(e,a);if(p===!1||x===!1)return[S];for(var s=f[p],u=f[x],c,T,k=y,_=0;_<s.length;_++){var b=s[_],P=u[_],l=n.c2p(b)-o,d=a.c2p(P)-h,L=Math.sqrt(l*l+d*d);L<k&&(k=T=L,c=_)}return S.index=c,S.distance=k,S.dxy=T,c===void 0?[S]:[E(S,s,u,e)]}$.exports={hoverPoints:i}},6419:function($,U,t){var M=t(65017);M.basePlotModule=t(16947),$.exports=M},79410:function($,U,t){var M=t(60487),E=t(71828),i=t(41675),S=t(64505).selectMode;$.exports=function(g,v,e){if(e.length)for(var r=0;r<e.length;r++)A(g,e[r][0])};function A(g,v){var e=g._fullLayout,r=e._size,f=v.trace,n=v.t,a=e._splomScenes[f.uid],o=a.matrixOptions,h=o.cdata,y=e._glcanvas.data()[0].regl,p=e.dragmode,x,s,u,c,T;if(h.length!==0){o.lower=f.showupperhalf,o.upper=f.showlowerhalf,o.diagonal=f.diagonal.visible;var k=f._visibleDims,_=h.length,b=a.viewOpts={};for(b.ranges=new Array(_),b.domains=new Array(_),T=0;T<k.length;T++){u=k[T];var P=b.ranges[T]=new Array(4),l=b.domains[T]=new Array(4);x=i.getFromId(g,f._diag[u][0]),x&&(P[0]=x._rl[0],P[2]=x._rl[1],l[0]=x.domain[0],l[2]=x.domain[1]),s=i.getFromId(g,f._diag[u][1]),s&&(P[1]=s._rl[0],P[3]=s._rl[1],l[1]=s.domain[0],l[3]=s.domain[1])}var d=g._context.plotGlPixelRatio,L=r.l*d,w=r.b*d,I=r.w*d,z=r.h*d;b.viewport=[L,w,I+L,z+w],a.matrix===!0&&(a.matrix=M(y));var B=e.clickmode.indexOf("select")>-1,O=S(p)||!!f.selectedpoints||B,R=!0;if(O){var C=f._length;if(f.selectedpoints){a.selectBatch=f.selectedpoints;var F=f.selectedpoints,N={};for(u=0;u<F.length;u++)N[F[u]]=!0;var V=[];for(u=0;u<C;u++)N[u]||V.push(u);a.unselectBatch=V}var K=n.xpx=new Array(_),Q=n.ypx=new Array(_);for(T=0;T<k.length;T++){if(u=k[T],x=i.getFromId(g,f._diag[u][0]),x)for(K[T]=new Array(C),c=0;c<C;c++)K[T][c]=x.c2p(h[T][c]);if(s=i.getFromId(g,f._diag[u][1]),s)for(Q[T]=new Array(C),c=0;c<C;c++)Q[T][c]=s.c2p(h[T][c])}if(a.selectBatch.length||a.unselectBatch.length){var at=E.extendFlat({},o,a.unselectedOptions,b),it=E.extendFlat({},o,a.selectedOptions,b);a.matrix.update(at,it),R=!1}}else n.xpx=n.ypx=null;if(R){var q=E.extendFlat({},o,b);a.matrix.update(q,null)}}}},10164:function($,U,t){var M=t(71828);$.exports=function(E,i){var S=E._fullLayout,A=i.uid,g=S._splomScenes;g||(g=S._splomScenes={});var v={dirty:!0,selectBatch:[],unselectBatch:[]},e={matrix:!1,selectBatch:[],unselectBatch:[]},r=g[i.uid];return r||(r=g[A]=M.extendFlat({},v,e),r.draw=function(){r.matrix&&r.matrix.draw&&(r.selectBatch.length||r.unselectBatch.length?r.matrix.draw(r.unselectBatch,r.selectBatch):r.matrix.draw()),r.dirty=!1},r.destroy=function(){r.matrix&&r.matrix.destroy&&r.matrix.destroy(),r.matrixOptions=null,r.selectBatch=null,r.unselectBatch=null,r=null}),r.dirty||M.extendFlat(r,v),r}},8689:function($,U,t){var M=t(71828),E=M.pushUnique,i=t(34098),S=t(35948);$.exports=function(A,g){var v=A.cd,e=v[0].trace,r=v[0].t,f=A.scene,n=f.matrixOptions.cdata,a=A.xaxis,o=A.yaxis,h=[];if(!f)return h;var y=!i.hasMarkers(e)&&!i.hasText(e);if(e.visible!==!0||y)return h;var p=S.getDimIndex(e,a),x=S.getDimIndex(e,o);if(p===!1||x===!1)return h;var s=r.xpx[p],u=r.ypx[x],c=n[p],T=n[x],k=(A.scene.selectBatch||[]).slice(),_=[];if(g!==!1&&!g.degenerate)for(var b=0;b<c.length;b++)g.contains([s[b],u[b]],null,b,A)?(h.push({pointNumber:b,x:c[b],y:T[b]}),E(k,b)):k.indexOf(b)!==-1?E(k,b):_.push(b);var P=f.matrixOptions;return!k.length&&!_.length?f.matrix.update(P,null):!f.selectBatch.length&&!f.unselectBatch.length&&f.matrix.update(f.unselectedOptions,M.extendFlat({},P,f.selectedOptions,f.viewOpts)),f.selectBatch=k,f.unselectBatch=_,h}},21850:function($,U,t){var M=t(50693),E=t(12663).axisHoverFormat,i=t(5386).fF,S=t(2418),A=t(9012),g=t(1426).extendFlat,v={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:i({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:E("u",1),vhoverformat:E("v",1),whoverformat:E("w",1),xhoverformat:E("x"),yhoverformat:E("y"),zhoverformat:E("z"),showlegend:g({},A.showlegend,{dflt:!1})};g(v,M("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var e=["opacity","lightposition","lighting"];e.forEach(function(r){v[r]=S[r]}),v.hoverinfo=g({},A.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),v.transforms=void 0,$.exports=v},88489:function($,U,t){var M=t(71828),E=t(78803);function i(v,e){e._len=Math.min(e.u.length,e.v.length,e.w.length,e.x.length,e.y.length,e.z.length),e._u=g(e.u,e._len),e._v=g(e.v,e._len),e._w=g(e.w,e._len),e._x=g(e.x,e._len),e._y=g(e.y,e._len),e._z=g(e.z,e._len);var r=S(e);e._gridFill=r.fill,e._Xs=r.Xs,e._Ys=r.Ys,e._Zs=r.Zs,e._len=r.len;var f=0,n,a,o;e.starts&&(n=g(e.starts.x||[]),a=g(e.starts.y||[]),o=g(e.starts.z||[]),f=Math.min(n.length,a.length,o.length)),e._startsX=n||[],e._startsY=a||[],e._startsZ=o||[];var h=0,y=1/0,p;for(p=0;p<e._len;p++){var x=e._u[p],s=e._v[p],u=e._w[p],c=Math.sqrt(x*x+s*s+u*u);h=Math.max(h,c),y=Math.min(y,c)}for(E(v,e,{vals:[y,h],containerStr:"",cLetter:"c"}),p=0;p<f;p++){var T=n[p];r.xMax=Math.max(r.xMax,T),r.xMin=Math.min(r.xMin,T);var k=a[p];r.yMax=Math.max(r.yMax,k),r.yMin=Math.min(r.yMin,k);var _=o[p];r.zMax=Math.max(r.zMax,_),r.zMin=Math.min(r.zMin,_)}e._slen=f,e._normMax=h,e._xbnds=[r.xMin,r.xMax],e._ybnds=[r.yMin,r.yMax],e._zbnds=[r.zMin,r.zMax]}function S(v){var e=v._x,r=v._y,f=v._z,n=v._len,a,o,h,y=-1/0,p=1/0,x=-1/0,s=1/0,u=-1/0,c=1/0,T="",k,_,b,P,l,d,L,w,I;for(n&&(P=e[0],d=r[0],w=f[0]),n>1&&(l=e[n-1],L=r[n-1],I=f[n-1]),a=0;a<n;a++)y=Math.max(y,e[a]),p=Math.min(p,e[a]),x=Math.max(x,r[a]),s=Math.min(s,r[a]),u=Math.max(u,f[a]),c=Math.min(c,f[a]),!k&&e[a]!==P&&(k=!0,T+="x"),!_&&r[a]!==d&&(_=!0,T+="y"),!b&&f[a]!==w&&(b=!0,T+="z");k||(T+="x"),_||(T+="y"),b||(T+="z");var z=A(v._x),B=A(v._y),O=A(v._z);T=T.replace("x",(P>l?"-":"+")+"x"),T=T.replace("y",(d>L?"-":"+")+"y"),T=T.replace("z",(w>I?"-":"+")+"z");var R=function(){n=0,z=[],B=[],O=[]};(!n||n<z.length*B.length*O.length)&&R();var C=function(ht){return ht==="x"?e:ht==="y"?r:f},F=function(ht){return ht==="x"?z:ht==="y"?B:O},N=function(ht){return ht[n-1]<ht[0]?-1:1},V=C(T[1]),K=C(T[3]),Q=C(T[5]),at=F(T[1]).length,it=F(T[3]).length,q=F(T[5]).length,W=!1,Z=function(ht,pt,yt){return at*(it*ht+pt)+yt},G=N(C(T[1])),et=N(C(T[3])),nt=N(C(T[5]));for(a=0;a<q-1;a++){for(o=0;o<it-1;o++){for(h=0;h<at-1;h++){var X=Z(a,o,h),Y=Z(a,o,h+1),ot=Z(a,o+1,h),rt=Z(a+1,o,h);if((!(V[X]*G<V[Y]*G)||!(K[X]*et<K[ot]*et)||!(Q[X]*nt<Q[rt]*nt))&&(W=!0),W)break}if(W)break}if(W)break}return W&&(M.warn("Encountered arbitrary coordinates! Unable to input data grid."),R()),{xMin:p,yMin:s,zMin:c,xMax:y,yMax:x,zMax:u,Xs:z,Ys:B,Zs:O,len:n,fill:T}}function A(v){return M.distinctVals(v).vals}function g(v,e){if(e===void 0&&(e=v.length),M.isTypedArray(v))return v.subarray(0,e);for(var r=[],f=0;f<e;f++)r[f]=+v[f];return r}$.exports={calc:i,filter:g,processGrid:S}},90154:function($,U,t){var M=t(9330).gl_streamtube3d,E=M.createTubeMesh,i=t(71828),S=t(81697).parseColorScale,A=t(21081).extractOpts,g=t(90060),v={xaxis:0,yaxis:1,zaxis:2};function e(h,y){this.scene=h,this.uid=y,this.mesh=null,this.data=null}var r=e.prototype;r.handlePick=function(h){var y=this.scene.fullSceneLayout,p=this.scene.dataScale;function x(c,T){var k=y[T],_=p[v[T]];return k.l2c(c)/_}if(h.object===this.mesh){var s=h.data.position,u=h.data.velocity;return h.traceCoordinate=[x(s[0],"xaxis"),x(s[1],"yaxis"),x(s[2],"zaxis"),x(u[0],"xaxis"),x(u[1],"yaxis"),x(u[2],"zaxis"),h.data.intensity*this.data._normMax,h.data.divergence],h.textLabel=this.data.hovertext||this.data.text,!0}};function f(h){var y=h.length,p;return y>2?p=h.slice(1,y-1):y===2?p=[(h[0]+h[1])/2]:p=h,p}function n(h){var y=h.length;return y===1?[.5,.5]:[h[1]-h[0],h[y-1]-h[y-2]]}function a(h,y){var p=h.fullSceneLayout,x=h.dataScale,s=y._len,u={};function c(it,q){var W=p[q],Z=x[v[q]];return i.simpleMap(it,function(G){return W.d2l(G)*Z})}if(u.vectors=g(c(y._u,"xaxis"),c(y._v,"yaxis"),c(y._w,"zaxis"),s),!s)return{positions:[],cells:[]};var T=c(y._Xs,"xaxis"),k=c(y._Ys,"yaxis"),_=c(y._Zs,"zaxis");u.meshgrid=[T,k,_],u.gridFill=y._gridFill;var b=y._slen;if(b)u.startingPositions=g(c(y._startsX,"xaxis"),c(y._startsY,"yaxis"),c(y._startsZ,"zaxis"));else{for(var P=k[0],l=f(T),d=f(_),L=new Array(l.length*d.length),w=0,I=0;I<l.length;I++)for(var z=0;z<d.length;z++)L[w++]=[l[I],P,d[z]];u.startingPositions=L}u.colormap=S(y),u.tubeSize=y.sizeref,u.maxLength=y.maxdisplayed;var B=c(y._xbnds,"xaxis"),O=c(y._ybnds,"yaxis"),R=c(y._zbnds,"zaxis"),C=n(T),F=n(k),N=n(_),V=[[B[0]-C[0],O[0]-F[0],R[0]-N[0]],[B[1]+C[1],O[1]+F[1],R[1]+N[1]]],K=M(u,V),Q=A(y);K.vertexIntensityBounds=[Q.min/y._normMax,Q.max/y._normMax];var at=y.lightposition;return K.lightPosition=[at.x,at.y,at.z],K.ambient=y.lighting.ambient,K.diffuse=y.lighting.diffuse,K.specular=y.lighting.specular,K.roughness=y.lighting.roughness,K.fresnel=y.lighting.fresnel,K.opacity=y.opacity,y._pad=K.tubeScale*y.sizeref*2,K}r.update=function(h){this.data=h;var y=a(this.scene,h);this.mesh.update(y)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function o(h,y){var p=h.glplot.gl,x=a(h,y),s=E(p,x),u=new e(h,y.uid);return u.mesh=s,u.data=y,s._trace=u,h.glplot.add(s),u}$.exports=o},22459:function($,U,t){var M=t(71828),E=t(1586),i=t(21850);$.exports=function(S,A,g,v){function e(y,p){return M.coerce(S,A,i,y,p)}var r=e("u"),f=e("v"),n=e("w"),a=e("x"),o=e("y"),h=e("z");if(!r||!r.length||!f||!f.length||!n||!n.length||!a||!a.length||!o||!o.length||!h||!h.length){A.visible=!1;return}e("starts.x"),e("starts.y"),e("starts.z"),e("maxdisplayed"),e("sizeref"),e("lighting.ambient"),e("lighting.diffuse"),e("lighting.specular"),e("lighting.roughness"),e("lighting.fresnel"),e("lightposition.x"),e("lightposition.y"),e("lightposition.z"),E(S,A,v,e,{prefix:"",cLetter:"c"}),e("text"),e("hovertext"),e("hovertemplate"),e("uhoverformat"),e("vhoverformat"),e("whoverformat"),e("xhoverformat"),e("yhoverformat"),e("zhoverformat"),A._length=null}},61510:function($,U,t){$.exports={moduleType:"trace",name:"streamtube",basePlotModule:t(58547),categories:["gl3d","showLegend"],attributes:t(21850),supplyDefaults:t(22459),colorbar:{min:"cmin",max:"cmax"},calc:t(88489).calc,plot:t(90154),eventData:function(M,E){return M.tubex=M.x,M.tubey=M.y,M.tubez=M.z,M.tubeu=E.traceCoordinate[3],M.tubev=E.traceCoordinate[4],M.tubew=E.traceCoordinate[5],M.norm=E.traceCoordinate[6],M.divergence=E.traceCoordinate[7],delete M.x,delete M.y,delete M.z,M},meta:{}}},57564:function($,U,t){var M=t(9012),E=t(5386).fF,i=t(5386).si,S=t(50693),A=t(27670).Y,g=t(34e3),v=t(7055),e=t(1426).extendFlat,r=t(79952).u;$.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:e({colors:{valType:"data_array",editType:"calc"},line:{color:e({},g.marker.line.color,{dflt:null}),width:e({},g.marker.line.width,{dflt:1}),editType:"calc"},pattern:r,editType:"calc"},S("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:g.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:i({editType:"plot"},{keys:v.eventDataKeys.concat(["label","value"])}),hovertext:g.hovertext,hoverinfo:e({},M.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:E({},{keys:v.eventDataKeys}),textfont:g.textfont,insidetextorientation:g.insidetextorientation,insidetextfont:g.insidetextfont,outsidetextfont:e({},g.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:g.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:A({name:"sunburst",trace:!0,editType:"calc"})}},66888:function($,U,t){var M=t(74875);U.name="sunburst",U.plot=function(E,i,S,A){M.plotBasePlot(U.name,E,i,S,A)},U.clean=function(E,i,S,A){M.cleanBasePlot(U.name,E,i,S,A)}},52147:function($,U,t){var M=t(674),E=t(92770),i=t(71828),S=t(21081).makeColorScaleFuncFromTrace,A=t(32354).makePullColorFn,g=t(32354).generateExtendedColors,v=t(21081).calc,e=t(50606).ALMOST_EQUAL,r={},f={},n={};U.calc=function(o,h){var y=o._fullLayout,p=h.ids,x=i.isArrayOrTypedArray(p),s=h.labels,u=h.parents,c=h.values,T=i.isArrayOrTypedArray(c),k=[],_={},b={},P=function(G,et){_[G]?_[G].push(et):_[G]=[et],b[et]=1},l=function(G){return G||typeof G=="number"},d=function(G){return!T||E(c[G])&&c[G]>=0},L,w,I;x?(L=Math.min(p.length,u.length),w=function(G){return l(p[G])&&d(G)},I=function(G){return String(p[G])}):(L=Math.min(s.length,u.length),w=function(G){return l(s[G])&&d(G)},I=function(G){return String(s[G])}),T&&(L=Math.min(L,c.length));for(var z=0;z<L;z++)if(w(z)){var B=I(z),O=l(u[z])?String(u[z]):"",R={i:z,id:B,pid:O,label:l(s[z])?String(s[z]):""};T&&(R.v=+c[z]),k.push(R),P(O,B)}if(_[""]){if(_[""].length>1){for(var C=i.randstr(),F=0;F<k.length;F++)k[F].pid===""&&(k[F].pid=C);k.unshift({hasMultipleRoots:!0,id:C,pid:"",label:""})}}else{var N=[],V;for(V in _)b[V]||N.push(V);if(N.length===1)V=N[0],k.unshift({hasImpliedRoot:!0,id:V,pid:"",label:V});else return i.warn(["Multiple implied roots, cannot build",h.type,"hierarchy of",h.name+".","These roots include:",N.join(", ")].join(" "))}var K;try{K=M.stratify().id(function(G){return G.id}).parentId(function(G){return G.pid})(k)}catch(G){return i.warn(["Failed to build",h.type,"hierarchy of",h.name+".","Error:",G.message].join(" "))}var Q=M.hierarchy(K),at=!1;if(T)switch(h.branchvalues){case"remainder":Q.sum(function(G){return G.data.v});break;case"total":Q.each(function(G){var et=G.data.data,nt=et.v;if(G.children){var X=G.children.reduce(function(Y,ot){return Y+ot.data.data.v},0);if((et.hasImpliedRoot||et.hasMultipleRoots)&&(nt=X),nt<X*e)return at=!0,i.warn(["Total value for node",G.data.data.id,"of",h.name,"is smaller than the sum of its children.",`
parent value =`,nt,`
children sum =`,X].join(" "))}G.value=nt});break}else a(Q,h,{branches:h.count.indexOf("branches")!==-1,leaves:h.count.indexOf("leaves")!==-1});if(!at){h.sort&&Q.sort(function(G,et){return et.value-G.value});var it,q,W=h.marker.colors||[],Z=!!W.length;return h._hasColorscale?(Z||(W=T?h.values:h._values),v(o,h,{vals:W,containerStr:"marker",cLetter:"c"}),q=S(h.marker)):it=A(y["_"+h.type+"colormap"]),Q.each(function(G){var et=G.data.data;et.color=h._hasColorscale?q(W[et.i]):it(W[et.i],et.id)}),k[0].hierarchy=Q,k}},U._runCrossTraceCalc=function(o,h){var y=h._fullLayout,p=h.calcdata,x=y[o+"colorway"],s=y["_"+o+"colormap"];y["extend"+o+"colors"]&&(x=g(x,o==="icicle"?n:o==="treemap"?f:r));var u=0,c;function T(P){var l=P.data.data,d=l.id;l.color===!1&&(s[d]?l.color=s[d]:P.parent?P.parent.parent?l.color=P.parent.data.data.color:(s[d]=l.color=x[u%x.length],u++):l.color=c)}for(var k=0;k<p.length;k++){var _=p[k],b=_[0];b.trace.type===o&&b.hierarchy&&(c=b.trace.root.color,b.hierarchy.each(T))}},U.crossTraceCalc=function(o){return U._runCrossTraceCalc("sunburst",o)};function a(o,h,y){var p=0,x=o.children;if(x){for(var s=x.length,u=0;u<s;u++)p+=a(x[u],h,y);y.branches&&p++}else y.leaves&&p++;return o.value=o.data.data.value=p,h._values||(h._values=[]),h._values[o.data.data.i]=p,p}},7055:function($){$.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},17094:function($,U,t){var M=t(71828),E=t(57564),i=t(27670).c,S=t(90769).handleText,A=t(37434).handleMarkerDefaults,g=t(21081),v=g.hasColorscale,e=g.handleDefaults;$.exports=function(r,f,n,a){function o(c,T){return M.coerce(r,f,E,c,T)}var h=o("labels"),y=o("parents");if(!h||!h.length||!y||!y.length){f.visible=!1;return}var p=o("values");p&&p.length?o("branchvalues"):o("count"),o("level"),o("maxdepth"),A(r,f,a,o);var x=f._hasColorscale=v(r,"marker","colors")||(r.marker||{}).coloraxis;x&&e(r,f,a,o,{prefix:"marker.",cLetter:"c"}),o("leaf.opacity",x?1:.7);var s=o("text");o("texttemplate"),f.texttemplate||o("textinfo",Array.isArray(s)?"text+label":"label"),o("hovertext"),o("hovertemplate");var u="auto";S(r,f,a,o,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),o("insidetextorientation"),o("sort"),o("rotation"),o("root.color"),i(f,a,o),f._length=null}},43467:function($,U,t){var M=t(91424),E=t(7901);$.exports=function(i,S,A,g,v){var e=S.data.data,r=e.i,f=v||e.color;if(r>=0){S.i=e.i;var n=A.marker;n.pattern?(!n.colors||!n.pattern.shape)&&(n.color=f,S.color=f):(n.color=f,S.color=f),M.pointStyle(i,A,g,S)}else E.fill(i,f)}},83523:function($,U,t){var M=t(39898),E=t(73972),i=t(23469).appendArrayPointValue,S=t(30211),A=t(71828),g=t(11086),v=t(2791),e=t(53581),r=e.formatPieValue;$.exports=function(n,a,o,h,y){var p=h[0],x=p.trace,s=p.hierarchy,u=x.type==="sunburst",c=x.type==="treemap"||x.type==="icicle";"_hasHoverLabel"in x||(x._hasHoverLabel=!1),"_hasHoverEvent"in x||(x._hasHoverEvent=!1);var T=function(b){var P=o._fullLayout;if(!(o._dragging||P.hovermode===!1)){var l=o._fullData[x.index],d=b.data.data,L=d.i,w=v.isHierarchyRoot(b),I=v.getParent(s,b),z=v.getValue(b),B=function(X){return A.castOption(l,L,X)},O=B("hovertemplate"),R=S.castHoverinfo(l,P,L),C=P.separators,F;if(O||R&&R!=="none"&&R!=="skip"){var N,V;u&&(N=p.cx+b.pxmid[0]*(1-b.rInscribed),V=p.cy+b.pxmid[1]*(1-b.rInscribed)),c&&(N=b._hoverX,V=b._hoverY);var K={},Q=[],at=[],it=function(X){return Q.indexOf(X)!==-1};R&&(Q=R==="all"?l._module.attributes.hoverinfo.flags:R.split("+")),K.label=d.label,it("label")&&K.label&&at.push(K.label),d.hasOwnProperty("v")&&(K.value=d.v,K.valueLabel=r(K.value,C),it("value")&&at.push(K.valueLabel)),K.currentPath=b.currentPath=v.getPath(b.data),it("current path")&&!w&&at.push(K.currentPath);var q,W=[],Z=function(){W.indexOf(q)===-1&&(at.push(q),W.push(q))};K.percentParent=b.percentParent=z/v.getValue(I),K.parent=b.parentString=v.getPtLabel(I),it("percent parent")&&(q=v.formatPercent(K.percentParent,C)+" of "+K.parent,Z()),K.percentEntry=b.percentEntry=z/v.getValue(a),K.entry=b.entry=v.getPtLabel(a),it("percent entry")&&!w&&!b.onPathbar&&(q=v.formatPercent(K.percentEntry,C)+" of "+K.entry,Z()),K.percentRoot=b.percentRoot=z/v.getValue(s),K.root=b.root=v.getPtLabel(s),it("percent root")&&!w&&(q=v.formatPercent(K.percentRoot,C)+" of "+K.root,Z()),K.text=B("hovertext")||B("text"),it("text")&&(q=K.text,A.isValidTextValue(q)&&at.push(q)),F=[f(b,l,y.eventDataKeys)];var G={trace:l,y:V,_x0:b._x0,_x1:b._x1,_y0:b._y0,_y1:b._y1,text:at.join("<br>"),name:O||it("name")?l.name:void 0,color:B("hoverlabel.bgcolor")||d.color,borderColor:B("hoverlabel.bordercolor"),fontFamily:B("hoverlabel.font.family"),fontSize:B("hoverlabel.font.size"),fontColor:B("hoverlabel.font.color"),nameLength:B("hoverlabel.namelength"),textAlign:B("hoverlabel.align"),hovertemplate:O,hovertemplateLabels:K,eventData:F};u&&(G.x0=N-b.rInscribed*b.rpx1,G.x1=N+b.rInscribed*b.rpx1,G.idealAlign=b.pxmid[0]<0?"left":"right"),c&&(G.x=N,G.idealAlign=N<0?"left":"right");var et=[];S.loneHover(G,{container:P._hoverlayer.node(),outerContainer:P._paper.node(),gd:o,inOut_bbox:et}),F[0].bbox=et[0],x._hasHoverLabel=!0}if(c){var nt=n.select("path.surface");y.styleOne(nt,b,l,o,{hovered:!0})}x._hasHoverEvent=!0,o.emit("plotly_hover",{points:F||[f(b,l,y.eventDataKeys)],event:M.event})}},k=function(b){var P=o._fullLayout,l=o._fullData[x.index],d=M.select(this).datum();if(x._hasHoverEvent&&(b.originalEvent=M.event,o.emit("plotly_unhover",{points:[f(d,l,y.eventDataKeys)],event:M.event}),x._hasHoverEvent=!1),x._hasHoverLabel&&(S.loneUnhover(P._hoverlayer.node()),x._hasHoverLabel=!1),c){var L=n.select("path.surface");y.styleOne(L,d,l,o,{hovered:!1})}},_=function(b){var P=o._fullLayout,l=o._fullData[x.index],d=u&&(v.isHierarchyRoot(b)||v.isLeaf(b)),L=v.getPtId(b),w=v.isEntry(b)?v.findEntryWithChild(s,L):v.findEntryWithLevel(s,L),I=v.getPtId(w),z={points:[f(b,l,y.eventDataKeys)],event:M.event};d||(z.nextLevel=I);var B=g.triggerHandler(o,"plotly_"+x.type+"click",z);if(B!==!1&&P.hovermode&&(o._hoverdata=[f(b,l,y.eventDataKeys)],S.click(o,M.event)),!d&&B!==!1&&!o._dragging&&!o._transitioning){E.call("_storeDirectGUIEdit",l,P._tracePreGUI[l.uid],{level:l.level});var O={data:[{level:I}],traces:[x.index]},R={frame:{redraw:!1,duration:y.transitionTime},transition:{duration:y.transitionTime,easing:y.transitionEasing},mode:"immediate",fromcurrent:!0};S.loneUnhover(P._hoverlayer.node()),E.call("animate",o,O,R)}};n.on("mouseover",T),n.on("mouseout",k),n.on("click",_)};function f(n,a,o){for(var h=n.data.data,y={curveNumber:a.index,pointNumber:h.i,data:a._input,fullData:a},p=0;p<o.length;p++){var x=o[p];x in n&&(y[x]=n[x])}return"parentString"in n&&!v.isHierarchyRoot(n)&&(y.parent=n.parentString),i(y,a,h.i),y}},2791:function($,U,t){var M=t(71828),E=t(7901),i=t(6964),S=t(53581);U.findEntryWithLevel=function(e,r){var f;return r&&e.eachAfter(function(n){if(U.getPtId(n)===r)return f=n.copy()}),f||e},U.findEntryWithChild=function(e,r){var f;return e.eachAfter(function(n){for(var a=n.children||[],o=0;o<a.length;o++){var h=a[o];if(U.getPtId(h)===r)return f=n.copy()}}),f||e},U.isEntry=function(e){return!e.parent},U.isLeaf=function(e){return!e.children},U.getPtId=function(e){return e.data.data.id},U.getPtLabel=function(e){return e.data.data.label},U.getValue=function(e){return e.value},U.isHierarchyRoot=function(e){return v(e)===""},U.setSliceCursor=function(e,r,f){var n=f.isTransitioning;if(!n){var a=e.datum();n=f.hideOnRoot&&U.isHierarchyRoot(a)||f.hideOnLeaves&&U.isLeaf(a)}i(e,n?null:"pointer")};function A(e,r,f){return{color:U.getOutsideTextFontKey("color",e,r,f),family:U.getOutsideTextFontKey("family",e,r,f),size:U.getOutsideTextFontKey("size",e,r,f)}}function g(e,r,f,n){var a=(n||{}).onPathbar,o=r.data.data,h=o.i,y=M.castOption(e,h,(a?"pathbar.textfont":"insidetextfont")+".color");return!y&&e._input.textfont&&(y=M.castOption(e._input,h,"textfont.color")),{color:y||E.contrast(o.color),family:U.getInsideTextFontKey("family",e,r,f,n),size:U.getInsideTextFontKey("size",e,r,f,n)}}U.getInsideTextFontKey=function(e,r,f,n,a){var o=(a||{}).onPathbar,h=o?"pathbar.textfont":"insidetextfont",y=f.data.data.i;return M.castOption(r,y,h+"."+e)||M.castOption(r,y,"textfont."+e)||n.size},U.getOutsideTextFontKey=function(e,r,f,n){var a=f.data.data.i;return M.castOption(r,a,"outsidetextfont."+e)||M.castOption(r,a,"textfont."+e)||n.size},U.isOutsideText=function(e,r){return!e._hasColorscale&&U.isHierarchyRoot(r)},U.determineTextFont=function(e,r,f,n){return U.isOutsideText(e,r)?A(e,r,f):g(e,r,f,n)},U.hasTransition=function(e){return!!(e&&e.duration>0)},U.getMaxDepth=function(e){return e.maxdepth>=0?e.maxdepth:1/0},U.isHeader=function(e,r){return!(U.isLeaf(e)||e.depth===r._maxDepth-1)};function v(e){return e.data.data.pid}U.getParent=function(e,r){return U.findEntryWithLevel(e,v(r))},U.listPath=function(e,r){var f=e.parent;if(!f)return[];var n=r?[f.data[r]]:[f];return U.listPath(f,r).concat(n)},U.getPath=function(e){return U.listPath(e,"label").join("/")+"/"},U.formatValue=S.formatPieValue,U.formatPercent=function(e,r){var f=M.formatPercent(e,0);return f==="0%"&&(f=S.formatPiePercent(e,r)),f}},87619:function($,U,t){$.exports={moduleType:"trace",name:"sunburst",basePlotModule:t(66888),categories:[],animatable:!0,attributes:t(57564),layoutAttributes:t(2654),supplyDefaults:t(17094),supplyLayoutDefaults:t(57034),calc:t(52147).calc,crossTraceCalc:t(52147).crossTraceCalc,plot:t(24714).plot,style:t(29969).style,colorbar:t(4898),meta:{}}},2654:function($){$.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57034:function($,U,t){var M=t(71828),E=t(2654);$.exports=function(i,S){function A(g,v){return M.coerce(i,S,E,g,v)}A("sunburstcolorway",S.colorway),A("extendsunburstcolors")}},24714:function($,U,t){var M=t(39898),E=t(674),i=t(81684).sX,S=t(91424),A=t(71828),g=t(63893),v=t(72597),e=v.recordMinTextSize,r=v.clearMinTextSize,f=t(14575),n=t(53581).getRotationAngle,a=f.computeTransform,o=f.transformInsideText,h=t(29969).styleOne,y=t(16688).resizeText,p=t(83523),x=t(7055),s=t(2791);U.plot=function(b,P,l,d){var L=b._fullLayout,w=L._sunburstlayer,I,z,B=!l,O=!L.uniformtext.mode&&s.hasTransition(l);if(r("sunburst",L),I=w.selectAll("g.trace.sunburst").data(P,function(C){return C[0].trace.uid}),I.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),I.order(),O){d&&(z=d());var R=M.transition().duration(l.duration).ease(l.easing).each("end",function(){z&&z()}).each("interrupt",function(){z&&z()});R.each(function(){w.selectAll("g.trace").each(function(C){u(b,C,this,l)})})}else I.each(function(C){u(b,C,this,l)}),L.uniformtext.mode&&y(b,L._sunburstlayer.selectAll(".trace"),"sunburst");B&&I.exit().remove()};function u(b,P,l,d){var L=b._context.staticPlot,w=b._fullLayout,I=!w.uniformtext.mode&&s.hasTransition(d),z=M.select(l),B=z.selectAll("g.slice"),O=P[0],R=O.trace,C=O.hierarchy,F=s.findEntryWithLevel(C,R.level),N=s.getMaxDepth(R),V=w._size,K=R.domain,Q=V.w*(K.x[1]-K.x[0]),at=V.h*(K.y[1]-K.y[0]),it=.5*Math.min(Q,at),q=O.cx=V.l+V.w*(K.x[1]+K.x[0])/2,W=O.cy=V.t+V.h*(1-K.y[0])-at/2;if(!F)return B.remove();var Z=null,G={};I&&B.each(function(jt){G[s.getPtId(jt)]={rpx0:jt.rpx0,rpx1:jt.rpx1,x0:jt.x0,x1:jt.x1,transform:jt.transform},!Z&&s.isEntry(jt)&&(Z=jt)});var et=c(F).descendants(),nt=F.height+1,X=0,Y=N;O.hasMultipleRoots&&s.isHierarchyRoot(F)&&(et=et.slice(1),nt-=1,X=1,Y+=1),et=et.filter(function(jt){return jt.y1<=Y});var ot=n(R.rotation);ot&&et.forEach(function(jt){jt.x0+=ot,jt.x1+=ot});var rt=Math.min(nt,N),ht=function(jt){return(jt-X)/rt*it},pt=function(jt,Ht){return[jt*Math.cos(Ht),-jt*Math.sin(Ht)]},yt=function(jt){return A.pathAnnulus(jt.rpx0,jt.rpx1,jt.x0,jt.x1,q,W)},xt=function(jt){return q+k(jt)[0]*(jt.transform.rCenter||0)+(jt.transform.x||0)},Ft=function(jt){return W+k(jt)[1]*(jt.transform.rCenter||0)+(jt.transform.y||0)};B=B.data(et,s.getPtId),B.enter().append("g").classed("slice",!0),I?B.exit().transition().each(function(){var jt=M.select(this),Ht=jt.select("path.surface");Ht.transition().attrTween("d",function(ee){var te=wt(ee);return function(ae){return yt(te(ae))}});var Vt=jt.select("g.slicetext");Vt.attr("opacity",0)}).remove():B.exit().remove(),B.order();var Et=null;if(I&&Z){var mt=s.getPtId(Z);B.each(function(jt){Et===null&&s.getPtId(jt)===mt&&(Et=jt.x1)})}var gt=B;I&&(gt=gt.transition().each("end",function(){var jt=M.select(this);s.setSliceCursor(jt,b,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),gt.each(function(jt){var Ht=M.select(this),Vt=A.ensureSingle(Ht,"path","surface",function(pe){pe.style("pointer-events",L?"none":"all")});jt.rpx0=ht(jt.y0),jt.rpx1=ht(jt.y1),jt.xmid=(jt.x0+jt.x1)/2,jt.pxmid=pt(jt.rpx1,jt.xmid),jt.midangle=-(jt.xmid-Math.PI/2),jt.startangle=-(jt.x0-Math.PI/2),jt.stopangle=-(jt.x1-Math.PI/2),jt.halfangle=.5*Math.min(A.angleDelta(jt.x0,jt.x1)||Math.PI,Math.PI),jt.ring=1-jt.rpx0/jt.rpx1,jt.rInscribed=T(jt),I?Vt.transition().attrTween("d",function(pe){var we=Pt(pe);return function(ve){return yt(we(ve))}}):Vt.attr("d",yt),Ht.call(p,F,b,P,{eventDataKeys:x.eventDataKeys,transitionTime:x.CLICK_TRANSITION_TIME,transitionEasing:x.CLICK_TRANSITION_EASING}).call(s.setSliceCursor,b,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:b._transitioning}),Vt.call(h,jt,R,b);var ee=A.ensureSingle(Ht,"g","slicetext"),te=A.ensureSingle(ee,"text","",function(pe){pe.attr("data-notex",1)}),ae=A.ensureUniformFontSize(b,s.determineTextFont(R,jt,w.font));te.text(U.formatSliceLabel(jt,F,R,P,w)).classed("slicetext",!0).attr("text-anchor","middle").call(S.font,ae).call(g.convertToTspans,b);var le=S.bBox(te.node());jt.transform=o(le,jt,O),jt.transform.targetX=xt(jt),jt.transform.targetY=Ft(jt);var ce=function(pe,we){var ve=pe.transform;return a(ve,we),ve.fontSize=ae.size,e(R.type,ve,w),A.getTextTransform(ve)};I?te.transition().attrTween("transform",function(pe){var we=Bt(pe);return function(ve){return ce(we(ve),le)}}):te.attr("transform",ce(jt,le))});function wt(jt){var Ht=s.getPtId(jt),Vt=G[Ht],ee=G[s.getPtId(F)],te;if(ee){var ae=(jt.x1>ee.x1?2*Math.PI:0)+ot;te=jt.rpx1<ee.rpx1?{x0:jt.x0,x1:jt.x1,rpx0:0,rpx1:0}:{x0:ae,x1:ae,rpx0:jt.rpx0,rpx1:jt.rpx1}}else{var le,ce=s.getPtId(jt.parent);B.each(function(It){if(s.getPtId(It)===ce)return le=It});var pe=le.children,we;pe.forEach(function(It,Rt){if(s.getPtId(It)===Ht)return we=Rt});var ve=pe.length,Mt=i(le.x0,le.x1);te={rpx0:it,rpx1:it,x0:Mt(we/ve),x1:Mt((we+1)/ve)}}return i(Vt,te)}function Pt(jt){var Ht=G[s.getPtId(jt)],Vt,ee={x0:jt.x0,x1:jt.x1,rpx0:jt.rpx0,rpx1:jt.rpx1};if(Ht)Vt=Ht;else if(Z)if(jt.parent)if(Et){var te=(jt.x1>Et?2*Math.PI:0)+ot;Vt={x0:te,x1:te}}else Vt={rpx0:it,rpx1:it},A.extendFlat(Vt,kt(jt));else Vt={rpx0:0,rpx1:0};else Vt={x0:ot,x1:ot};return i(Vt,ee)}function Bt(jt){var Ht=G[s.getPtId(jt)],Vt,ee=jt.transform;if(Ht)Vt=Ht;else if(Vt={rpx1:jt.rpx1,transform:{textPosAngle:ee.textPosAngle,scale:0,rotate:ee.rotate,rCenter:ee.rCenter,x:ee.x,y:ee.y}},Z)if(jt.parent)if(Et){var te=jt.x1>Et?2*Math.PI:0;Vt.x0=Vt.x1=te}else A.extendFlat(Vt,kt(jt));else Vt.x0=Vt.x1=ot;else Vt.x0=Vt.x1=ot;var ae=i(Vt.transform.textPosAngle,jt.transform.textPosAngle),le=i(Vt.rpx1,jt.rpx1),ce=i(Vt.x0,jt.x0),pe=i(Vt.x1,jt.x1),we=i(Vt.transform.scale,ee.scale),ve=i(Vt.transform.rotate,ee.rotate),Mt=ee.rCenter===0?3:Vt.transform.rCenter===0?1/3:1,It=i(Vt.transform.rCenter,ee.rCenter),Rt=function(zt){return It(Math.pow(zt,Mt))};return function(zt){var Tt=le(zt),ft=ce(zt),ut=pe(zt),vt=Rt(zt),St=pt(Tt,(ft+ut)/2),Ot=ae(zt),Xt={pxmid:St,rpx1:Tt,transform:{textPosAngle:Ot,rCenter:vt,x:ee.x,y:ee.y}};return e(R.type,ee,w),{transform:{targetX:xt(Xt),targetY:Ft(Xt),scale:we(zt),rotate:ve(zt),rCenter:vt}}}}function kt(jt){var Ht=jt.parent,Vt=G[s.getPtId(Ht)],ee={};if(Vt){var te=Ht.children,ae=te.indexOf(jt),le=te.length,ce=i(Vt.x0,Vt.x1);ee.x0=ce(ae/le),ee.x1=ce(ae/le)}else ee.x0=ee.x1=0;return ee}}function c(b){return E.partition().size([2*Math.PI,b.height+1])(b)}U.formatSliceLabel=function(b,P,l,d,L){var w=l.texttemplate,I=l.textinfo;if(!w&&(!I||I==="none"))return"";var z=L.separators,B=d[0],O=b.data.data,R=B.hierarchy,C=s.isHierarchyRoot(b),F=s.getParent(R,b),N=s.getValue(b);if(!w){var V=I.split("+"),K=function(X){return V.indexOf(X)!==-1},Q=[],at;if(K("label")&&O.label&&Q.push(O.label),O.hasOwnProperty("v")&&K("value")&&Q.push(s.formatValue(O.v,z)),!C){K("current path")&&Q.push(s.getPath(b.data));var it=0;K("percent parent")&&it++,K("percent entry")&&it++,K("percent root")&&it++;var q=it>1;if(it){var W,Z=function(X){at=s.formatPercent(W,z),q&&(at+=" of "+X),Q.push(at)};K("percent parent")&&!C&&(W=N/s.getValue(F),Z("parent")),K("percent entry")&&(W=N/s.getValue(P),Z("entry")),K("percent root")&&(W=N/s.getValue(R),Z("root"))}}return K("text")&&(at=A.castOption(l,O.i,"text"),A.isValidTextValue(at)&&Q.push(at)),Q.join("<br>")}var G=A.castOption(l,O.i,"texttemplate");if(!G)return"";var et={};O.label&&(et.label=O.label),O.hasOwnProperty("v")&&(et.value=O.v,et.valueLabel=s.formatValue(O.v,z)),et.currentPath=s.getPath(b.data),C||(et.percentParent=N/s.getValue(F),et.percentParentLabel=s.formatPercent(et.percentParent,z),et.parent=s.getPtLabel(F)),et.percentEntry=N/s.getValue(P),et.percentEntryLabel=s.formatPercent(et.percentEntry,z),et.entry=s.getPtLabel(P),et.percentRoot=N/s.getValue(R),et.percentRootLabel=s.formatPercent(et.percentRoot,z),et.root=s.getPtLabel(R),O.hasOwnProperty("color")&&(et.color=O.color);var nt=A.castOption(l,O.i,"text");return(A.isValidTextValue(nt)||nt==="")&&(et.text=nt),et.customdata=A.castOption(l,O.i,"customdata"),A.texttemplateString(G,et,L._d3locale,et,l._meta||{})};function T(b){return b.rpx0===0&&A.isFullCircle([b.x0,b.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(b.halfangle)),b.ring/2))}function k(b){return _(b.rpx1,b.transform.textPosAngle)}function _(b,P){return[b*Math.sin(P),-b*Math.cos(P)]}},29969:function($,U,t){var M=t(39898),E=t(7901),i=t(71828),S=t(72597).resizeText,A=t(43467);function g(e){var r=e._fullLayout._sunburstlayer.selectAll(".trace");S(e,r,"sunburst"),r.each(function(f){var n=M.select(this),a=f[0],o=a.trace;n.style("opacity",o.opacity),n.selectAll("path.surface").each(function(h){M.select(this).call(v,h,o,e)})})}function v(e,r,f,n){var a=r.data.data,o=!r.children,h=a.i,y=i.castOption(f,h,"marker.line.color")||E.defaultLine,p=i.castOption(f,h,"marker.line.width")||0;e.call(A,r,f,n).style("stroke-width",p).call(E.stroke,y).style("opacity",o?f.leaf.opacity:null)}$.exports={style:g,styleOne:v}},54532:function($,U,t){var M=t(7901),E=t(50693),i=t(12663).axisHoverFormat,S=t(5386).fF,A=t(9012),g=t(1426).extendFlat,v=t(30962).overrideAll;function e(n){return{valType:"boolean",dflt:!1}}function r(n){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:e(),y:e(),z:e()},color:{valType:"color",dflt:M.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:M.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var f=$.exports=v(g({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:S(),xhoverformat:i("x"),yhoverformat:i("y"),zhoverformat:i("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},E("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:r(),y:r(),z:r()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:g({},E.zauto,{}),zmin:g({},E.zmin,{}),zmax:g({},E.zmax,{})},hoverinfo:g({},A.hoverinfo),showlegend:g({},A.showlegend,{dflt:!1})}),"calc","nested");f.x.editType=f.y.editType=f.z.editType="calc+clearAxisTypes",f.transforms=void 0},18396:function($,U,t){var M=t(78803);$.exports=function(E,i){i.surfacecolor?M(E,i,{vals:i.surfacecolor,containerStr:"",cLetter:"c"}):M(E,i,{vals:i.z,containerStr:"",cLetter:"c"})}},43768:function($,U,t){var M=t(9330).gl_surface3d,E=t(9330).ndarray,i=t(9330).ndarray_linear_interpolate.d2,S=t(824),A=t(43907),g=t(71828).isArrayOrTypedArray,v=t(81697).parseColorScale,e=t(78614),r=t(21081).extractOpts;function f(d,L,w){this.scene=d,this.uid=w,this.surface=L,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var n=f.prototype;n.getXat=function(d,L,w,I){var z=g(this.data.x)?g(this.data.x[0])?this.data.x[L][d]:this.data.x[d]:d;return w===void 0?z:I.d2l(z,0,w)},n.getYat=function(d,L,w,I){var z=g(this.data.y)?g(this.data.y[0])?this.data.y[L][d]:this.data.y[L]:L;return w===void 0?z:I.d2l(z,0,w)},n.getZat=function(d,L,w,I){var z=this.data.z[L][d];return z===null&&this.data.connectgaps&&this.data._interpolatedZ&&(z=this.data._interpolatedZ[L][d]),w===void 0?z:I.d2l(z,0,w)},n.handlePick=function(d){if(d.object===this.surface){var L=(d.data.index[0]-1)/this.dataScaleX-1,w=(d.data.index[1]-1)/this.dataScaleY-1,I=Math.max(Math.min(Math.round(L),this.data.z[0].length-1),0),z=Math.max(Math.min(Math.round(w),this.data._ylength-1),0);d.index=[I,z],d.traceCoordinate=[this.getXat(I,z),this.getYat(I,z),this.getZat(I,z)],d.dataCoordinate=[this.getXat(I,z,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(I,z,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(I,z,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var B=0;B<3;B++){var O=d.dataCoordinate[B];O!=null&&(d.dataCoordinate[B]*=this.scene.dataScale[B])}var R=this.data.hovertext||this.data.text;return Array.isArray(R)&&R[z]&&R[z][I]!==void 0?d.textLabel=R[z][I]:R?d.textLabel=R:d.textLabel="",d.data.dataCoordinate=d.dataCoordinate.slice(),this.surface.highlight(d.data),this.scene.glplot.spikes.position=d.dataCoordinate,!0}};function a(d){var L=d[0].rgb,w=d[d.length-1].rgb;return L[0]===w[0]&&L[1]===w[1]&&L[2]===w[2]&&L[3]===w[3]}var o=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function h(d,L){if(d<L)return 0;for(var w=0;Math.floor(d%L)===0;)d/=L,w++;return w}function y(d){for(var L=[],w=0;w<o.length;w++){var I=o[w];L.push(h(d,I))}return L}function p(d){for(var L=y(d),w=d,I=0;I<o.length;I++)if(L[I]>0){w=o[I];break}return w}function x(d,L){if(!(d<1||L<1)){for(var w=y(d),I=y(L),z=1,B=0;B<o.length;B++)z*=Math.pow(o[B],Math.max(w[B],I[B]));return z}}function s(d){if(d.length!==0){for(var L=1,w=0;w<d.length;w++)L=x(L,d[w]);return L}}n.calcXnums=function(d){var L,w=[];for(L=1;L<d;L++){var I=this.getXat(L-1,0),z=this.getXat(L,0);z!==I&&I!==void 0&&I!==null&&z!==void 0&&z!==null?w[L-1]=Math.abs(z-I):w[L-1]=0}var B=0;for(L=1;L<d;L++)B+=w[L-1];for(L=1;L<d;L++)w[L-1]===0?w[L-1]=1:w[L-1]=Math.round(B/w[L-1]);return w},n.calcYnums=function(d){var L,w=[];for(L=1;L<d;L++){var I=this.getYat(0,L-1),z=this.getYat(0,L);z!==I&&I!==void 0&&I!==null&&z!==void 0&&z!==null?w[L-1]=Math.abs(z-I):w[L-1]=0}var B=0;for(L=1;L<d;L++)B+=w[L-1];for(L=1;L<d;L++)w[L-1]===0?w[L-1]=1:w[L-1]=Math.round(B/w[L-1]);return w};var u=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],c=u[9],T=u[13];n.estimateScale=function(d,L){for(var w=L===0?this.calcXnums(d):this.calcYnums(d),I=1+s(w);I<c;)I*=2;for(;I>T;)I--,I/=p(I),I++,I<c&&(I=T);var z=Math.round(I/d);return z>1?z:1};function k(d,L,w){var I=w[8]+w[2]*L[0]+w[5]*L[1];return d[0]=(w[6]+w[0]*L[0]+w[3]*L[1])/I,d[1]=(w[7]+w[1]*L[0]+w[4]*L[1])/I,d}function _(d,L,w){return b(d,L,k,w),d}function b(d,L,w,I){for(var z=[0,0],B=d.shape[0],O=d.shape[1],R=0;R<B;R++)for(var C=0;C<O;C++)w(z,[R,C],I),d.set(R,C,i(L,z[0],z[1]));return d}n.refineCoords=function(d){for(var L=this.dataScaleX,w=this.dataScaleY,I=d[0].shape[0],z=d[0].shape[1],B=Math.floor(d[0].shape[0]*L+1)|0,O=Math.floor(d[0].shape[1]*w+1)|0,R=1+I+1,C=1+z+1,F=E(new Float32Array(R*C),[R,C]),N=[1/L,0,0,0,1/w,0,0,0,1],V=0;V<d.length;++V){this.surface.padField(F,d[V]);var K=E(new Float32Array(B*O),[B,O]);_(K,F,N),d[V]=K}};function P(d,L){for(var w=!1,I=0;I<d.length;I++)if(L===d[I]){w=!0;break}w===!1&&d.push(L)}n.setContourLevels=function(){var d=[[],[],[]],L=[!1,!1,!1],w=!1,I,z,B;for(I=0;I<3;++I)if(this.showContour[I]&&(w=!0,this.contourSize[I]>0&&this.contourStart[I]!==null&&this.contourEnd[I]!==null&&this.contourEnd[I]>this.contourStart[I]))for(L[I]=!0,z=this.contourStart[I];z<this.contourEnd[I];z+=this.contourSize[I])B=z*this.scene.dataScale[I],P(d[I],B);if(w){var O=[[],[],[]];for(I=0;I<3;++I)this.showContour[I]&&(O[I]=L[I]?d[I]:this.scene.contourLevels[I]);this.surface.update({levels:O})}},n.update=function(d){var L=this.scene,w=L.fullSceneLayout,I=this.surface,z=v(d),B=L.dataScale,O=d.z[0].length,R=d._ylength,C=L.contourLevels;this.data=d;var F,N,V,K,Q=[];for(F=0;F<3;F++)for(Q[F]=[],N=0;N<O;N++)Q[F][N]=[];for(N=0;N<O;N++)for(V=0;V<R;V++)Q[0][N][V]=this.getXat(N,V,d.xcalendar,w.xaxis),Q[1][N][V]=this.getYat(N,V,d.ycalendar,w.yaxis),Q[2][N][V]=this.getZat(N,V,d.zcalendar,w.zaxis);if(d.connectgaps)for(d._emptypoints=A(Q[2]),S(Q[2],d._emptypoints),d._interpolatedZ=[],N=0;N<O;N++)for(d._interpolatedZ[N]=[],V=0;V<R;V++)d._interpolatedZ[N][V]=Q[2][N][V];for(F=0;F<3;F++)for(N=0;N<O;N++)for(V=0;V<R;V++)K=Q[F][N][V],K==null?Q[F][N][V]=NaN:K=Q[F][N][V]*=B[F];for(F=0;F<3;F++)for(N=0;N<O;N++)for(V=0;V<R;V++)K=Q[F][N][V],K!=null&&(this.minValues[F]>K&&(this.minValues[F]=K),this.maxValues[F]<K&&(this.maxValues[F]=K));for(F=0;F<3;F++)this.objectOffset[F]=.5*(this.minValues[F]+this.maxValues[F]);for(F=0;F<3;F++)for(N=0;N<O;N++)for(V=0;V<R;V++)K=Q[F][N][V],K!=null&&(Q[F][N][V]-=this.objectOffset[F]);var at=[E(new Float32Array(O*R),[O,R]),E(new Float32Array(O*R),[O,R]),E(new Float32Array(O*R),[O,R])];for(F=0;F<3;F++)for(N=0;N<O;N++)for(V=0;V<R;V++)at[F].set(N,V,Q[F][N][V]);Q=[];var it={colormap:z,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!d.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:d.opacityscale,opacity:d.opacity},q=r(d);if(it.intensityBounds=[q.min,q.max],d.surfacecolor){var W=E(new Float32Array(O*R),[O,R]);for(N=0;N<O;N++)for(V=0;V<R;V++)W.set(N,V,d.surfacecolor[V][N]);at.push(W)}else it.intensityBounds[0]*=B[2],it.intensityBounds[1]*=B[2];(T<at[0].shape[0]||T<at[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(at[0].shape[0],0),this.dataScaleY=this.estimateScale(at[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(at)),d.surfacecolor&&(it.intensity=at.pop());var Z=[!0,!0,!0],G=["x","y","z"];for(F=0;F<3;++F){var et=d.contours[G[F]];Z[F]=et.highlight,it.showContour[F]=et.show||et.highlight,it.showContour[F]&&(it.contourProject[F]=[et.project.x,et.project.y,et.project.z],et.show?(this.showContour[F]=!0,it.levels[F]=C[F],I.highlightColor[F]=it.contourColor[F]=e(et.color),et.usecolormap?I.highlightTint[F]=it.contourTint[F]=0:I.highlightTint[F]=it.contourTint[F]=1,it.contourWidth[F]=et.width,this.contourStart[F]=et.start,this.contourEnd[F]=et.end,this.contourSize[F]=et.size):(this.showContour[F]=!1,this.contourStart[F]=null,this.contourEnd[F]=null,this.contourSize[F]=0),et.highlight&&(it.dynamicColor[F]=e(et.highlightcolor),it.dynamicWidth[F]=et.highlightwidth))}a(z)&&(it.vertexColor=!0),it.objectOffset=this.objectOffset,it.coords=at,I.update(it),I.visible=d.visible,I.enableDynamic=Z,I.enableHighlight=Z,I.snapToData=!0,"lighting"in d&&(I.ambientLight=d.lighting.ambient,I.diffuseLight=d.lighting.diffuse,I.specularLight=d.lighting.specular,I.roughness=d.lighting.roughness,I.fresnel=d.lighting.fresnel),"lightposition"in d&&(I.lightPosition=[d.lightposition.x,d.lightposition.y,d.lightposition.z])},n.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function l(d,L){var w=d.glplot.gl,I=M({gl:w}),z=new f(d,I,L.uid);return I._trace=z,z.update(L),d.glplot.add(I),z}$.exports=l},91831:function($,U,t){var M=t(73972),E=t(71828),i=t(1586),S=t(54532),A=.1;function g(n,a){for(var o=[],h=32,y=0;y<h;y++){var p=y/(h-1),x=a+(1-a)*(1-Math.pow(Math.sin(n*p*Math.PI),2));o.push([p,Math.max(0,Math.min(1,x))])}return o}function v(n){var a=0;if(!Array.isArray(n)||n.length<2||!n[0]||!n[n.length-1]||+n[0][0]!=0||+n[n.length-1][0]!=1)return!1;for(var o=0;o<n.length;o++){var h=n[o];if(h.length!==2||+h[0]<a)return!1;a=+h[0]}return!0}function e(n,a,o,h){var y,p;function x(d,L){return E.coerce(n,a,S,d,L)}var s=x("x"),u=x("y"),c=x("z");if(!c||!c.length||s&&s.length<1||u&&u.length<1){a.visible=!1;return}a._xlength=Array.isArray(s)&&E.isArrayOrTypedArray(s[0])?c.length:c[0].length,a._ylength=c.length;var T=M.getComponentMethod("calendars","handleTraceDefaults");T(n,a,["x","y","z"],h),x("text"),x("hovertext"),x("hovertemplate"),x("xhoverformat"),x("yhoverformat"),x("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(d){x(d)});var k=x("surfacecolor"),_=["x","y","z"];for(y=0;y<3;++y){var b="contours."+_[y],P=x(b+".show"),l=x(b+".highlight");if(P||l)for(p=0;p<3;++p)x(b+".project."+_[p]);P&&(x(b+".color"),x(b+".width"),x(b+".usecolormap")),l&&(x(b+".highlightcolor"),x(b+".highlightwidth")),x(b+".start"),x(b+".end"),x(b+".size")}k||(f(n,"zmin","cmin"),f(n,"zmax","cmax"),f(n,"zauto","cauto")),i(n,a,h,x,{prefix:"",cLetter:"c"}),r(n,a,h,x),a._length=null}function r(n,a,o,h){var y=h("opacityscale");y==="max"?a.opacityscale=[[0,A],[1,1]]:y==="min"?a.opacityscale=[[0,1],[1,A]]:y==="extremes"?a.opacityscale=g(1,A):v(y)||(a.opacityscale=void 0)}function f(n,a,o){a in n&&!(o in n)&&(n[o]=n[a])}$.exports={supplyDefaults:e,opacityscaleDefaults:r}},93601:function($,U,t){$.exports={attributes:t(54532),supplyDefaults:t(91831).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:t(18396),plot:t(43768),moduleType:"trace",name:"surface",basePlotModule:t(58547),categories:["gl3d","2dMap","showLegend"],meta:{}}},44464:function($,U,t){var M=t(50215),E=t(1426).extendFlat,i=t(30962).overrideAll,S=t(41940),A=t(27670).Y,g=t(12663).descriptionOnlyNumbers,v=$.exports=i({domain:A({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:g("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:E({},M.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:E({},S({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:g("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:E({},M.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:E({},S({arrayOk:!0}))}},"calc","from-root");v.transforms=void 0},99469:function($,U,t){var M=t(27659).a0,E=t(36736),i="table";U.name=i,U.plot=function(S){var A=M(S.calcdata,i)[0];A.length&&E(S,A)},U.clean=function(S,A,g,v){var e=v._has&&v._has(i),r=A._has&&A._has(i);e&&!r&&v._paperdiv.selectAll(".table").remove()}},76333:function($,U,t){var M=t(28984).wrap;$.exports=function(){return M({})}},49850:function($){$.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},51018:function($,U,t){var M=t(49850),E=t(1426).extendFlat,i=t(92770);$.exports=function(a,o){var h=g(o.cells.values),y=function(F){return F.slice(o.header.values.length,F.length)},p=g(o.header.values);p.length&&!p[0].length&&(p[0]=[""],p=g(p));var x=p.concat(y(h).map(function(){return v((p[0]||[""]).length)})),s=o.domain,u=Math.floor(a._fullLayout._size.w*(s.x[1]-s.x[0])),c=Math.floor(a._fullLayout._size.h*(s.y[1]-s.y[0])),T=o.header.values.length?x[0].map(function(){return o.header.height}):[M.emptyHeaderHeight],k=h.length?h[0].map(function(){return o.cells.height}):[],_=T.reduce(A,0),b=c-_,P=b+M.uplift,l=f(k,P),d=f(T,_),L=r(d,[]),w=r(l,L),I={},z=o._fullInput.columnorder.concat(y(h.map(function(F,N){return N}))),B=x.map(function(F,N){var V=Array.isArray(o.columnwidth)?o.columnwidth[Math.min(N,o.columnwidth.length-1)]:o.columnwidth;return i(V)?Number(V):1}),O=B.reduce(A,0);B=B.map(function(F){return F/O*u});var R=Math.max(S(o.header.line.width),S(o.cells.line.width)),C={key:o.uid+a._context.staticPlot,translateX:s.x[0]*a._fullLayout._size.w,translateY:a._fullLayout._size.h*(1-s.y[1]),size:a._fullLayout._size,width:u,maxLineWidth:R,height:c,columnOrder:z,groupHeight:c,rowBlocks:w,headerRowBlocks:L,scrollY:0,cells:E({},o.cells,{values:h}),headerCells:E({},o.header,{values:x}),gdColumns:x.map(function(F){return F[0]}),gdColumnsOriginalOrder:x.map(function(F){return F[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:x.map(function(F,N){var V=I[F];I[F]=(V||0)+1;var K=F+"__"+I[F];return{key:K,label:F,specIndex:N,xIndex:z[N],xScale:e,x:void 0,calcdata:void 0,columnWidth:B[N]}})};return C.columns.forEach(function(F){F.calcdata=C,F.x=e(F)}),C};function S(a){if(Array.isArray(a)){for(var o=0,h=0;h<a.length;h++)o=Math.max(o,S(a[h]));return o}return a}function A(a,o){return a+o}function g(a){var o=a.slice(),h=1/0,y=0,p;for(p=0;p<o.length;p++)Array.isArray(o[p])||(o[p]=[o[p]]),h=Math.min(h,o[p].length),y=Math.max(y,o[p].length);if(h!==y)for(p=0;p<o.length;p++){var x=y-o[p].length;x&&(o[p]=o[p].concat(v(x)))}return o}function v(a){for(var o=new Array(a),h=0;h<a;h++)o[h]="";return o}function e(a){return a.calcdata.columns.reduce(function(o,h){return h.xIndex<a.xIndex?o+h.columnWidth:o},0)}function r(a,o){var h=Object.keys(a);return h.map(function(y){return E({},a[y],{auxiliaryBlocks:o})})}function f(a,o){for(var h={},y,p=0,x=0,s=n(),u=0,c=0,T=0;T<a.length;T++)y=a[T],s.rows.push({rowIndex:T,rowHeight:y}),x+=y,(x>=o||T===a.length-1)&&(h[p]=s,s.key=c++,s.firstRowIndex=u,s.lastRowIndex=T,s=n(),p+=x,u=T+1,x=0);return h}function n(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}},56269:function($,U,t){var M=t(1426).extendFlat;U.splitToPanels=function(i){var S=[0,0],A=M({},i,{key:"header",type:"header",page:0,prevPages:S,currentRepaint:[null,null],dragHandle:!0,values:i.calcdata.headerCells.values[i.specIndex],rowBlocks:i.calcdata.headerRowBlocks,calcdata:M({},i.calcdata,{cells:i.calcdata.headerCells})}),g=M({},i,{key:"cells1",type:"cells",page:0,prevPages:S,currentRepaint:[null,null],dragHandle:!1,values:i.calcdata.cells.values[i.specIndex],rowBlocks:i.calcdata.rowBlocks}),v=M({},i,{key:"cells2",type:"cells",page:1,prevPages:S,currentRepaint:[null,null],dragHandle:!1,values:i.calcdata.cells.values[i.specIndex],rowBlocks:i.calcdata.rowBlocks});return[g,v,A]},U.splitToCells=function(i){var S=E(i);return(i.values||[]).slice(S[0],S[1]).map(function(A,g){var v=typeof A=="string"&&A.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:g+v,key:S[0]+g,column:i,calcdata:i.calcdata,page:i.page,rowBlocks:i.rowBlocks,value:A}})};function E(i){var S=i.rowBlocks[i.page],A=S?S.rows[0].rowIndex:0,g=S?A+S.rows.length:0;return[A,g]}},39754:function($,U,t){var M=t(71828),E=t(44464),i=t(27670).c;function S(A,g){for(var v=A.columnorder||[],e=A.header.values.length,r=v.slice(0,e),f=r.slice().sort(function(o,h){return o-h}),n=r.map(function(o){return f.indexOf(o)}),a=n.length;a<e;a++)n.push(a);g("columnorder",n)}$.exports=function(A,g,v,e){function r(f,n){return M.coerce(A,g,E,f,n)}i(g,e,r),r("columnwidth"),r("header.values"),r("header.format"),r("header.align"),r("header.prefix"),r("header.suffix"),r("header.height"),r("header.line.width"),r("header.line.color"),r("header.fill.color"),M.coerceFont(r,"header.font",M.extendFlat({},e.font)),S(g,r),r("cells.values"),r("cells.format"),r("cells.align"),r("cells.prefix"),r("cells.suffix"),r("cells.height"),r("cells.line.width"),r("cells.line.color"),r("cells.fill.color"),M.coerceFont(r,"cells.font",M.extendFlat({},e.font)),g._length=null}},96595:function($,U,t){$.exports={attributes:t(44464),supplyDefaults:t(39754),calc:t(76333),plot:t(36736),moduleType:"trace",name:"table",basePlotModule:t(99469),categories:["noOpacity"],meta:{}}},36736:function($,U,t){var M=t(49850),E=t(39898),i=t(71828),S=i.numberFormat,A=t(28984),g=t(91424),v=t(63893),e=t(71828).raiseToTop,r=t(71828).strTranslate,f=t(71828).cancelTransition,n=t(51018),a=t(56269),o=t(7901);$.exports=function(Y,ot){var rt=!Y._context.staticPlot,ht=Y._fullLayout._paper.selectAll("."+M.cn.table).data(ot.map(function(Vt){var ee=A.unwrap(Vt),te=ee.trace;return n(Y,te)}),A.keyFun);ht.exit().remove(),ht.enter().append("g").classed(M.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),ht.attr("width",function(Vt){return Vt.width+Vt.size.l+Vt.size.r}).attr("height",function(Vt){return Vt.height+Vt.size.t+Vt.size.b}).attr("transform",function(Vt){return r(Vt.translateX,Vt.translateY)});var pt=ht.selectAll("."+M.cn.tableControlView).data(A.repeat,A.keyFun),yt=pt.enter().append("g").classed(M.cn.tableControlView,!0).style("box-sizing","content-box");if(rt){var xt="onwheel"in document?"wheel":"mousewheel";yt.on("mousemove",function(Vt){pt.filter(function(ee){return Vt===ee}).call(s,Y)}).on(xt,function(Vt){if(!Vt.scrollbarState.wheeling){Vt.scrollbarState.wheeling=!0;var ee=Vt.scrollY+E.event.deltaY,te=K(Y,pt,null,ee)(Vt);te||(E.event.stopPropagation(),E.event.preventDefault()),Vt.scrollbarState.wheeling=!1}}).call(s,Y,!0)}pt.attr("transform",function(Vt){return r(Vt.size.l,Vt.size.t)});var Ft=pt.selectAll("."+M.cn.scrollBackground).data(A.repeat,A.keyFun);Ft.enter().append("rect").classed(M.cn.scrollBackground,!0).attr("fill","none"),Ft.attr("width",function(Vt){return Vt.width}).attr("height",function(Vt){return Vt.height}),pt.each(function(Vt){g.setClipUrl(E.select(this),y(Y,Vt),Y)});var Et=pt.selectAll("."+M.cn.yColumn).data(function(Vt){return Vt.columns},A.keyFun);Et.enter().append("g").classed(M.cn.yColumn,!0),Et.exit().remove(),Et.attr("transform",function(Vt){return r(Vt.x,0)}),rt&&Et.call(E.behavior.drag().origin(function(Vt){var ee=E.select(this);return O(ee,Vt,-M.uplift),e(this),Vt.calcdata.columnDragInProgress=!0,s(pt.filter(function(te){return Vt.calcdata.key===te.key}),Y),Vt}).on("drag",function(Vt){var ee=E.select(this),te=function(ce){return(Vt===ce?E.event.x:ce.x)+ce.columnWidth/2};Vt.x=Math.max(-M.overdrag,Math.min(Vt.calcdata.width+M.overdrag-Vt.columnWidth,E.event.x));var ae=x(Et).filter(function(ce){return ce.calcdata.key===Vt.calcdata.key}),le=ae.sort(function(ce,pe){return te(ce)-te(pe)});le.forEach(function(ce,pe){ce.xIndex=pe,ce.x=Vt===ce?ce.x:ce.xScale(ce)}),Et.filter(function(ce){return Vt!==ce}).transition().ease(M.transitionEase).duration(M.transitionDuration).attr("transform",function(ce){return r(ce.x,0)}),ee.call(f).attr("transform",r(Vt.x,-M.uplift))}).on("dragend",function(Vt){var ee=E.select(this),te=Vt.calcdata;Vt.x=Vt.xScale(Vt),Vt.calcdata.columnDragInProgress=!1,O(ee,Vt,0),z(Y,te,te.columns.map(function(ae){return ae.xIndex}))})),Et.each(function(Vt){g.setClipUrl(E.select(this),p(Y,Vt),Y)});var mt=Et.selectAll("."+M.cn.columnBlock).data(a.splitToPanels,A.keyFun);mt.enter().append("g").classed(M.cn.columnBlock,!0).attr("id",function(Vt){return Vt.key}),mt.style("cursor",function(Vt){return Vt.dragHandle?"ew-resize":Vt.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var gt=mt.filter(C),wt=mt.filter(R);rt&&wt.call(E.behavior.drag().origin(function(Vt){return E.event.stopPropagation(),Vt}).on("drag",K(Y,pt,-1)).on("dragend",function(){})),u(Y,pt,gt,mt),u(Y,pt,wt,mt);var Pt=pt.selectAll("."+M.cn.scrollAreaClip).data(A.repeat,A.keyFun);Pt.enter().append("clipPath").classed(M.cn.scrollAreaClip,!0).attr("id",function(Vt){return y(Y,Vt)});var Bt=Pt.selectAll("."+M.cn.scrollAreaClipRect).data(A.repeat,A.keyFun);Bt.enter().append("rect").classed(M.cn.scrollAreaClipRect,!0).attr("x",-M.overdrag).attr("y",-M.uplift).attr("fill","none"),Bt.attr("width",function(Vt){return Vt.width+2*M.overdrag}).attr("height",function(Vt){return Vt.height+M.uplift});var kt=Et.selectAll("."+M.cn.columnBoundary).data(A.repeat,A.keyFun);kt.enter().append("g").classed(M.cn.columnBoundary,!0);var jt=Et.selectAll("."+M.cn.columnBoundaryClippath).data(A.repeat,A.keyFun);jt.enter().append("clipPath").classed(M.cn.columnBoundaryClippath,!0),jt.attr("id",function(Vt){return p(Y,Vt)});var Ht=jt.selectAll("."+M.cn.columnBoundaryRect).data(A.repeat,A.keyFun);Ht.enter().append("rect").classed(M.cn.columnBoundaryRect,!0).attr("fill","none"),Ht.attr("width",function(Vt){return Vt.columnWidth+2*h(Vt)}).attr("height",function(Vt){return Vt.calcdata.height+2*h(Vt)+M.uplift}).attr("x",function(Vt){return-h(Vt)}).attr("y",function(Vt){return-h(Vt)}),V(null,wt,pt)};function h(Y){return Math.ceil(Y.calcdata.maxLineWidth/2)}function y(Y,ot){return"clip"+Y._fullLayout._uid+"_scrollAreaBottomClip_"+ot.key}function p(Y,ot){return"clip"+Y._fullLayout._uid+"_columnBoundaryClippath_"+ot.calcdata.key+"_"+ot.specIndex}function x(Y){return[].concat.apply([],Y.map(function(ot){return ot})).map(function(ot){return ot.__data__})}function s(Y,ot,rt){function ht(mt){var gt=mt.rowBlocks;return Z(gt,gt.length-1)+(gt.length?G(gt[gt.length-1],1/0):1)}var pt=Y.selectAll("."+M.cn.scrollbarKit).data(A.repeat,A.keyFun);pt.enter().append("g").classed(M.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),pt.each(function(mt){var gt=mt.scrollbarState;gt.totalHeight=ht(mt),gt.scrollableAreaHeight=mt.groupHeight-F(mt),gt.currentlyVisibleHeight=Math.min(gt.totalHeight,gt.scrollableAreaHeight),gt.ratio=gt.currentlyVisibleHeight/gt.totalHeight,gt.barLength=Math.max(gt.ratio*gt.currentlyVisibleHeight,M.goldenRatio*M.scrollbarWidth),gt.barWiggleRoom=gt.currentlyVisibleHeight-gt.barLength,gt.wiggleRoom=Math.max(0,gt.totalHeight-gt.scrollableAreaHeight),gt.topY=gt.barWiggleRoom===0?0:mt.scrollY/gt.wiggleRoom*gt.barWiggleRoom,gt.bottomY=gt.topY+gt.barLength,gt.dragMultiplier=gt.wiggleRoom/gt.barWiggleRoom}).attr("transform",function(mt){var gt=mt.width+M.scrollbarWidth/2+M.scrollbarOffset;return r(gt,F(mt))});var yt=pt.selectAll("."+M.cn.scrollbar).data(A.repeat,A.keyFun);yt.enter().append("g").classed(M.cn.scrollbar,!0);var xt=yt.selectAll("."+M.cn.scrollbarSlider).data(A.repeat,A.keyFun);xt.enter().append("g").classed(M.cn.scrollbarSlider,!0),xt.attr("transform",function(mt){return r(0,mt.scrollbarState.topY||0)});var Ft=xt.selectAll("."+M.cn.scrollbarGlyph).data(A.repeat,A.keyFun);Ft.enter().append("line").classed(M.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",M.scrollbarWidth).attr("stroke-linecap","round").attr("y1",M.scrollbarWidth/2),Ft.attr("y2",function(mt){return mt.scrollbarState.barLength-M.scrollbarWidth/2}).attr("stroke-opacity",function(mt){return mt.columnDragInProgress||!mt.scrollbarState.barWiggleRoom||rt?0:.4}),Ft.transition().delay(0).duration(0),Ft.transition().delay(M.scrollbarHideDelay).duration(M.scrollbarHideDuration).attr("stroke-opacity",0);var Et=yt.selectAll("."+M.cn.scrollbarCaptureZone).data(A.repeat,A.keyFun);Et.enter().append("line").classed(M.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",M.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(mt){var gt=E.event.y,wt=this.getBoundingClientRect(),Pt=mt.scrollbarState,Bt=gt-wt.top,kt=E.scale.linear().domain([0,Pt.scrollableAreaHeight]).range([0,Pt.totalHeight]).clamp(!0);Pt.topY<=Bt&&Bt<=Pt.bottomY||K(ot,Y,null,kt(Bt-Pt.barLength/2))(mt)}).call(E.behavior.drag().origin(function(mt){return E.event.stopPropagation(),mt.scrollbarState.scrollbarScrollInProgress=!0,mt}).on("drag",K(ot,Y)).on("dragend",function(){})),Et.attr("y2",function(mt){return mt.scrollbarState.scrollableAreaHeight}),ot._context.staticPlot&&(Ft.remove(),Et.remove())}function u(Y,ot,rt,ht){var pt=c(rt),yt=T(pt);P(yt);var xt=k(yt);d(xt);var Ft=b(yt),Et=_(Ft);l(Et),L(Et,ot,ht,Y),W(yt)}function c(Y){var ot=Y.selectAll("."+M.cn.columnCells).data(A.repeat,A.keyFun);return ot.enter().append("g").classed(M.cn.columnCells,!0),ot.exit().remove(),ot}function T(Y){var ot=Y.selectAll("."+M.cn.columnCell).data(a.splitToCells,function(rt){return rt.keyWithinBlock});return ot.enter().append("g").classed(M.cn.columnCell,!0),ot.exit().remove(),ot}function k(Y){var ot=Y.selectAll("."+M.cn.cellRect).data(A.repeat,function(rt){return rt.keyWithinBlock});return ot.enter().append("rect").classed(M.cn.cellRect,!0),ot}function _(Y){var ot=Y.selectAll("."+M.cn.cellText).data(A.repeat,function(rt){return rt.keyWithinBlock});return ot.enter().append("text").classed(M.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){E.event.stopPropagation()}),ot}function b(Y){var ot=Y.selectAll("."+M.cn.cellTextHolder).data(A.repeat,function(rt){return rt.keyWithinBlock});return ot.enter().append("g").classed(M.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ot}function P(Y){Y.each(function(ot,rt){var ht=ot.calcdata.cells.font,pt=ot.column.specIndex,yt={size:B(ht.size,pt,rt),color:B(ht.color,pt,rt),family:B(ht.family,pt,rt)};ot.rowNumber=ot.key,ot.align=B(ot.calcdata.cells.align,pt,rt),ot.cellBorderWidth=B(ot.calcdata.cells.line.width,pt,rt),ot.font=yt})}function l(Y){Y.each(function(ot){g.font(E.select(this),ot.font)})}function d(Y){Y.attr("width",function(ot){return ot.column.columnWidth}).attr("stroke-width",function(ot){return ot.cellBorderWidth}).each(function(ot){var rt=E.select(this);o.stroke(rt,B(ot.calcdata.cells.line.color,ot.column.specIndex,ot.rowNumber)),o.fill(rt,B(ot.calcdata.cells.fill.color,ot.column.specIndex,ot.rowNumber))})}function L(Y,ot,rt,ht){Y.text(function(pt){var yt=pt.column.specIndex,xt=pt.rowNumber,Ft=pt.value,Et=typeof Ft=="string",mt=Et&&Ft.match(/<br>/i),gt=!Et||mt;pt.mayHaveMarkup=Et&&Ft.match(/[<&>]/);var wt=w(Ft);pt.latex=wt;var Pt=wt?"":B(pt.calcdata.cells.prefix,yt,xt)||"",Bt=wt?"":B(pt.calcdata.cells.suffix,yt,xt)||"",kt=wt?null:B(pt.calcdata.cells.format,yt,xt)||null,jt=Pt+(kt?S(kt)(pt.value):pt.value)+Bt,Ht;pt.wrappingNeeded=!pt.wrapped&&!gt&&!wt&&(Ht=I(jt)),pt.cellHeightMayIncrease=mt||wt||pt.mayHaveMarkup||(Ht===void 0?I(jt):Ht),pt.needsConvertToTspans=pt.mayHaveMarkup||pt.wrappingNeeded||pt.latex;var Vt;if(pt.wrappingNeeded){var ee=M.wrapSplitCharacter===" "?jt.replace(/<a href=/ig,"<a_href="):jt,te=ee.split(M.wrapSplitCharacter),ae=M.wrapSplitCharacter===" "?te.map(function(le){return le.replace(/<a_href=/ig,"<a href=")}):te;pt.fragments=ae.map(function(le){return{text:le,width:null}}),pt.fragments.push({fragment:M.wrapSpacer,width:null}),Vt=ae.join(M.lineBreaker)+M.lineBreaker+M.wrapSpacer}else delete pt.fragments,Vt=jt;return Vt}).attr("dy",function(pt){return pt.needsConvertToTspans?0:"0.75em"}).each(function(pt){var yt=this,xt=E.select(yt),Ft=pt.wrappingNeeded?at:it;pt.needsConvertToTspans?v.convertToTspans(xt,ht,Ft(rt,yt,ot,ht,pt)):E.select(yt.parentNode).attr("transform",function(Et){return r(q(Et),M.cellPad)}).attr("text-anchor",function(Et){return{left:"start",center:"middle",right:"end"}[Et.align]})})}function w(Y){return typeof Y=="string"&&Y.match(M.latexCheck)}function I(Y){return Y.indexOf(M.wrapSplitCharacter)!==-1}function z(Y,ot,rt){var ht=ot.gdColumnsOriginalOrder;ot.gdColumns.sort(function(pt,yt){return rt[ht.indexOf(pt)]-rt[ht.indexOf(yt)]}),ot.columnorder=rt,Y.emit("plotly_restyle")}function B(Y,ot,rt){if(Array.isArray(Y)){var ht=Y[Math.min(ot,Y.length-1)];return Array.isArray(ht)?ht[Math.min(rt,ht.length-1)]:ht}else return Y}function O(Y,ot,rt){Y.transition().ease(M.releaseTransitionEase).duration(M.releaseTransitionDuration).attr("transform",r(ot.x,rt))}function R(Y){return Y.type==="cells"}function C(Y){return Y.type==="header"}function F(Y){var ot=Y.rowBlocks.length?Y.rowBlocks[0].auxiliaryBlocks:[];return ot.reduce(function(rt,ht){return rt+G(ht,1/0)},0)}function N(Y,ot,rt){for(var ht=[],pt=0,yt=0;yt<Y.length;yt++){for(var xt=Y[yt],Ft=xt.rows,Et=0,mt=0;mt<Ft.length;mt++)Et+=Ft[mt].rowHeight;xt.allRowsHeight=Et;var gt=pt+Et,wt=ot,Pt=wt+rt;wt<gt&&Pt>pt&&ht.push(yt),pt+=Et}return ht}function V(Y,ot,rt){var ht=x(ot)[0];if(ht!==void 0){var pt=ht.rowBlocks,yt=ht.calcdata,xt=Z(pt,pt.length),Ft=ht.calcdata.groupHeight-F(ht),Et=yt.scrollY=Math.max(0,Math.min(xt-Ft,yt.scrollY)),mt=N(pt,Et,Ft);mt.length===1&&(mt[0]===pt.length-1?mt.unshift(mt[0]-1):mt.push(mt[0]+1)),mt[0]%2&&mt.reverse(),ot.each(function(gt,wt){gt.page=mt[wt],gt.scrollY=Et}),ot.attr("transform",function(gt){var wt=Z(gt.rowBlocks,gt.page)-gt.scrollY;return r(0,wt)}),Y&&(Q(Y,rt,ot,mt,ht.prevPages,ht,0),Q(Y,rt,ot,mt,ht.prevPages,ht,1),s(rt,Y))}}function K(Y,ot,rt,ht){return function(pt){var yt=pt.calcdata?pt.calcdata:pt,xt=ot.filter(function(gt){return yt.key===gt.key}),Ft=rt||yt.scrollbarState.dragMultiplier,Et=yt.scrollY;yt.scrollY=ht===void 0?yt.scrollY+Ft*E.event.dy:ht;var mt=xt.selectAll("."+M.cn.yColumn).selectAll("."+M.cn.columnBlock).filter(R);return V(Y,mt,xt),yt.scrollY===Et}}function Q(Y,ot,rt,ht,pt,yt,xt){var Ft=ht[xt]!==pt[xt];Ft&&(clearTimeout(yt.currentRepaint[xt]),yt.currentRepaint[xt]=setTimeout(function(){var Et=rt.filter(function(mt,gt){return gt===xt&&ht[gt]!==pt[gt]});u(Y,ot,Et,rt),pt[xt]=ht[xt]}))}function at(Y,ot,rt,ht){return function(){var pt=E.select(ot.parentNode);pt.each(function(yt){var xt=yt.fragments;pt.selectAll("tspan.line").each(function(kt,jt){xt[jt].width=this.getComputedTextLength()});var Ft=xt[xt.length-1].width,Et=xt.slice(0,-1),mt=[],gt,wt,Pt=0,Bt=yt.column.columnWidth-2*M.cellPad;for(yt.value="";Et.length;)gt=Et.shift(),wt=gt.width+Ft,Pt+wt>Bt&&(yt.value+=mt.join(M.wrapSpacer)+M.lineBreaker,mt=[],Pt=0),mt.push(gt.text),Pt+=wt;Pt&&(yt.value+=mt.join(M.wrapSpacer)),yt.wrapped=!0}),pt.selectAll("tspan.line").remove(),L(pt.select("."+M.cn.cellText),rt,Y,ht),E.select(ot.parentNode.parentNode).call(W)}}function it(Y,ot,rt,ht,pt){return function(){if(!pt.settledY){var yt=E.select(ot.parentNode),xt=nt(pt),Ft=pt.key-xt.firstRowIndex,Et=xt.rows[Ft].rowHeight,mt=pt.cellHeightMayIncrease?ot.parentNode.getBoundingClientRect().height+2*M.cellPad:Et,gt=Math.max(mt,Et),wt=gt-xt.rows[Ft].rowHeight;wt&&(xt.rows[Ft].rowHeight=gt,Y.selectAll("."+M.cn.columnCell).call(W),V(null,Y.filter(R),0),s(rt,ht,!0)),yt.attr("transform",function(){var Pt=this,Bt=Pt.parentNode,kt=Bt.getBoundingClientRect(),jt=E.select(Pt.parentNode).select("."+M.cn.cellRect).node().getBoundingClientRect(),Ht=Pt.transform.baseVal.consolidate(),Vt=jt.top-kt.top+(Ht?Ht.matrix.f:M.cellPad);return r(q(pt,E.select(Pt.parentNode).select("."+M.cn.cellTextHolder).node().getBoundingClientRect().width),Vt)}),pt.settledY=!0}}}function q(Y,ot){switch(Y.align){case"left":return M.cellPad;case"right":return Y.column.columnWidth-(ot||0)-M.cellPad;case"center":return(Y.column.columnWidth-(ot||0))/2;default:return M.cellPad}}function W(Y){Y.attr("transform",function(ot){var rt=ot.rowBlocks[0].auxiliaryBlocks.reduce(function(xt,Ft){return xt+G(Ft,1/0)},0),ht=nt(ot),pt=G(ht,ot.key),yt=pt+rt;return r(0,yt)}).selectAll("."+M.cn.cellRect).attr("height",function(ot){return X(nt(ot),ot.key).rowHeight})}function Z(Y,ot){for(var rt=0,ht=ot-1;ht>=0;ht--)rt+=et(Y[ht]);return rt}function G(Y,ot){for(var rt=0,ht=0;ht<Y.rows.length&&Y.rows[ht].rowIndex<ot;ht++)rt+=Y.rows[ht].rowHeight;return rt}function et(Y){var ot=Y.allRowsHeight;if(ot!==void 0)return ot;for(var rt=0,ht=0;ht<Y.rows.length;ht++)rt+=Y.rows[ht].rowHeight;return Y.allRowsHeight=rt,rt}function nt(Y){return Y.rowBlocks[Y.page]}function X(Y,ot){return Y.rows[ot-Y.firstRowIndex]}},45802:function($,U,t){var M=t(5386).fF,E=t(5386).si,i=t(50693),S=t(27670).Y,A=t(34e3),g=t(57564),v=t(43473),e=t(1426).extendFlat,r=t(79952).u;$.exports={labels:g.labels,parents:g.parents,values:g.values,branchvalues:g.branchvalues,count:g.count,level:g.level,maxdepth:g.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:e({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:g.marker.colors,pattern:r,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:g.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},i("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:e({},A.textfont,{}),editType:"calc"},text:A.text,textinfo:g.textinfo,texttemplate:E({editType:"plot"},{keys:v.eventDataKeys.concat(["label","value"])}),hovertext:A.hovertext,hoverinfo:g.hoverinfo,hovertemplate:M({},{keys:v.eventDataKeys}),textfont:A.textfont,insidetextfont:A.insidetextfont,outsidetextfont:e({},A.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:A.sort,root:g.root,domain:S({name:"treemap",trace:!0,editType:"calc"})}},78018:function($,U,t){var M=t(74875);U.name="treemap",U.plot=function(E,i,S,A){M.plotBasePlot(U.name,E,i,S,A)},U.clean=function(E,i,S,A){M.cleanBasePlot(U.name,E,i,S,A)}},65039:function($,U,t){var M=t(52147);U.y=function(E,i){return M.calc(E,i)},U.T=function(E){return M._runCrossTraceCalc("treemap",E)}},43473:function($){$.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},91174:function($,U,t){var M=t(71828),E=t(45802),i=t(7901),S=t(27670).c,A=t(90769).handleText,g=t(97313).TEXTPAD,v=t(37434).handleMarkerDefaults,e=t(21081),r=e.hasColorscale,f=e.handleDefaults;$.exports=function(n,a,o,h){function y(l,d){return M.coerce(n,a,E,l,d)}var p=y("labels"),x=y("parents");if(!p||!p.length||!x||!x.length){a.visible=!1;return}var s=y("values");s&&s.length?y("branchvalues"):y("count"),y("level"),y("maxdepth");var u=y("tiling.packing");u==="squarify"&&y("tiling.squarifyratio"),y("tiling.flip"),y("tiling.pad");var c=y("text");y("texttemplate"),a.texttemplate||y("textinfo",Array.isArray(c)?"text+label":"label"),y("hovertext"),y("hovertemplate");var T=y("pathbar.visible"),k="auto";A(n,a,h,y,k,{hasPathbar:T,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),y("textposition");var _=a.textposition.indexOf("bottom")!==-1;v(n,a,h,y);var b=a._hasColorscale=r(n,"marker","colors")||(n.marker||{}).coloraxis;b?f(n,a,h,y,{prefix:"marker.",cLetter:"c"}):y("marker.depthfade",!(a.marker.colors||[]).length);var P=a.textfont.size*2;y("marker.pad.t",_?P/4:P),y("marker.pad.l",P/4),y("marker.pad.r",P/4),y("marker.pad.b",_?P:P/4),y("marker.cornerradius"),a._hovered={marker:{line:{width:2,color:i.contrast(h.paper_bgcolor)}}},T&&(y("pathbar.thickness",a.pathbar.textfont.size+2*g),y("pathbar.side"),y("pathbar.edgeshape")),y("sort"),y("root.color"),S(a,h,y),a._length=null}},80694:function($,U,t){var M=t(39898),E=t(2791),i=t(72597),S=i.clearMinTextSize,A=t(16688).resizeText,g=t(46650);$.exports=function(v,e,r,f,n){var a=n.type,o=n.drawDescendants,h=v._fullLayout,y=h["_"+a+"layer"],p,x,s=!r;if(S(a,h),p=y.selectAll("g.trace."+a).data(e,function(c){return c[0].trace.uid}),p.enter().append("g").classed("trace",!0).classed(a,!0),p.order(),!h.uniformtext.mode&&E.hasTransition(r)){f&&(x=f());var u=M.transition().duration(r.duration).ease(r.easing).each("end",function(){x&&x()}).each("interrupt",function(){x&&x()});u.each(function(){y.selectAll("g.trace").each(function(c){g(v,c,this,r,o)})})}else p.each(function(c){g(v,c,this,r,o)}),h.uniformtext.mode&&A(v,y.selectAll(".trace"),a);s&&p.exit().remove()}},66209:function($,U,t){var M=t(39898),E=t(71828),i=t(91424),S=t(63893),A=t(37210),g=t(96362).styleOne,v=t(43473),e=t(2791),r=t(83523),f=!0;$.exports=function(n,a,o,h,y){var p=y.barDifY,x=y.width,s=y.height,u=y.viewX,c=y.viewY,T=y.pathSlice,k=y.toMoveInsideSlice,_=y.strTransform,b=y.hasTransition,P=y.handleSlicesExit,l=y.makeUpdateSliceInterpolator,d=y.makeUpdateTextInterpolator,L={},w=n._context.staticPlot,I=n._fullLayout,z=a[0],B=z.trace,O=z.hierarchy,R=x/B._entryDepth,C=e.listPath(o.data,"id"),F=A(O.copy(),[x,s],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();F=F.filter(function(V){var K=C.indexOf(V.data.id);return K===-1?!1:(V.x0=R*K,V.x1=R*(K+1),V.y0=p,V.y1=p+s,V.onPathbar=!0,!0)}),F.reverse(),h=h.data(F,e.getPtId),h.enter().append("g").classed("pathbar",!0),P(h,f,L,[x,s],T),h.order();var N=h;b&&(N=N.transition().each("end",function(){var V=M.select(this);e.setSliceCursor(V,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),N.each(function(V){V._x0=u(V.x0),V._x1=u(V.x1),V._y0=c(V.y0),V._y1=c(V.y1),V._hoverX=u(V.x1-Math.min(x,s)/2),V._hoverY=c(V.y1-s/2);var K=M.select(this),Q=E.ensureSingle(K,"path","surface",function(W){W.style("pointer-events",w?"none":"all")});b?Q.transition().attrTween("d",function(W){var Z=l(W,f,L,[x,s]);return function(G){return T(Z(G))}}):Q.attr("d",T),K.call(r,o,n,a,{styleOne:g,eventDataKeys:v.eventDataKeys,transitionTime:v.CLICK_TRANSITION_TIME,transitionEasing:v.CLICK_TRANSITION_EASING}).call(e.setSliceCursor,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:n._transitioning}),Q.call(g,V,B,n,{hovered:!1}),V._text=(e.getPtLabel(V)||"").split("<br>").join(" ")||"";var at=E.ensureSingle(K,"g","slicetext"),it=E.ensureSingle(at,"text","",function(W){W.attr("data-notex",1)}),q=E.ensureUniformFontSize(n,e.determineTextFont(B,V,I.font,{onPathbar:!0}));it.text(V._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(i.font,q).call(S.convertToTspans,n),V.textBB=i.bBox(it.node()),V.transform=k(V,{fontSize:q.size,onPathbar:!0}),V.transform.fontSize=q.size,b?it.transition().attrTween("transform",function(W){var Z=d(W,f,L,[x,s]);return function(G){return _(Z(G))}}):it.attr("transform",_(V))})}},52583:function($,U,t){var M=t(39898),E=t(71828),i=t(91424),S=t(63893),A=t(37210),g=t(96362).styleOne,v=t(43473),e=t(2791),r=t(83523),f=t(24714).formatSliceLabel,n=!1;$.exports=function(a,o,h,y,p){var x=p.width,s=p.height,u=p.viewX,c=p.viewY,T=p.pathSlice,k=p.toMoveInsideSlice,_=p.strTransform,b=p.hasTransition,P=p.handleSlicesExit,l=p.makeUpdateSliceInterpolator,d=p.makeUpdateTextInterpolator,L=p.prevEntry,w={},I=a._context.staticPlot,z=a._fullLayout,B=o[0],O=B.trace,R=O.textposition.indexOf("left")!==-1,C=O.textposition.indexOf("right")!==-1,F=O.textposition.indexOf("bottom")!==-1,N=!F&&!O.marker.pad.t||F&&!O.marker.pad.b,V=A(h,[x,s],{packing:O.tiling.packing,squarifyratio:O.tiling.squarifyratio,flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1,pad:{inner:O.tiling.pad,top:O.marker.pad.t,left:O.marker.pad.l,right:O.marker.pad.r,bottom:O.marker.pad.b}}),K=V.descendants(),Q=1/0,at=-1/0;K.forEach(function(G){var et=G.depth;et>=O._maxDepth?(G.x0=G.x1=(G.x0+G.x1)/2,G.y0=G.y1=(G.y0+G.y1)/2):(Q=Math.min(Q,et),at=Math.max(at,et))}),y=y.data(K,e.getPtId),O._maxVisibleLayers=isFinite(at)?at-Q+1:0,y.enter().append("g").classed("slice",!0),P(y,n,w,[x,s],T),y.order();var it=null;if(b&&L){var q=e.getPtId(L);y.each(function(G){it===null&&e.getPtId(G)===q&&(it={x0:G.x0,x1:G.x1,y0:G.y0,y1:G.y1})})}var W=function(){return it||{x0:0,x1:x,y0:0,y1:s}},Z=y;return b&&(Z=Z.transition().each("end",function(){var G=M.select(this);e.setSliceCursor(G,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),Z.each(function(G){var et=e.isHeader(G,O);G._x0=u(G.x0),G._x1=u(G.x1),G._y0=c(G.y0),G._y1=c(G.y1),G._hoverX=u(G.x1-O.marker.pad.r),G._hoverY=c(F?G.y1-O.marker.pad.b/2:G.y0+O.marker.pad.t/2);var nt=M.select(this),X=E.ensureSingle(nt,"path","surface",function(ht){ht.style("pointer-events",I?"none":"all")});b?X.transition().attrTween("d",function(ht){var pt=l(ht,n,W(),[x,s]);return function(yt){return T(pt(yt))}}):X.attr("d",T),nt.call(r,h,a,o,{styleOne:g,eventDataKeys:v.eventDataKeys,transitionTime:v.CLICK_TRANSITION_TIME,transitionEasing:v.CLICK_TRANSITION_EASING}).call(e.setSliceCursor,a,{isTransitioning:a._transitioning}),X.call(g,G,O,a,{hovered:!1}),G.x0===G.x1||G.y0===G.y1?G._text="":et?G._text=N?"":e.getPtLabel(G)||"":G._text=f(G,h,O,o,z)||"";var Y=E.ensureSingle(nt,"g","slicetext"),ot=E.ensureSingle(Y,"text","",function(ht){ht.attr("data-notex",1)}),rt=E.ensureUniformFontSize(a,e.determineTextFont(O,G,z.font));ot.text(G._text||" ").classed("slicetext",!0).attr("text-anchor",C?"end":R||et?"start":"middle").call(i.font,rt).call(S.convertToTspans,a),G.textBB=i.bBox(ot.node()),G.transform=k(G,{fontSize:rt.size,isHeader:et}),G.transform.fontSize=rt.size,b?ot.transition().attrTween("transform",function(ht){var pt=d(ht,n,W(),[x,s]);return function(yt){return _(pt(yt))}}):ot.attr("transform",_(G))}),it}},14102:function($){$.exports=function U(t,M,E){var i;E.swapXY&&(i=t.x0,t.x0=t.y0,t.y0=i,i=t.x1,t.x1=t.y1,t.y1=i),E.flipX&&(i=t.x0,t.x0=M[0]-t.x1,t.x1=M[0]-i),E.flipY&&(i=t.y0,t.y0=M[1]-t.y1,t.y1=M[1]-i);var S=t.children;if(S)for(var A=0;A<S.length;A++)U(S[A],M,E)}},70954:function($,U,t){$.exports={moduleType:"trace",name:"treemap",basePlotModule:t(78018),categories:[],animatable:!0,attributes:t(45802),layoutAttributes:t(55479),supplyDefaults:t(91174),supplyLayoutDefaults:t(77182),calc:t(65039).y,crossTraceCalc:t(65039).T,plot:t(5893),style:t(96362).style,colorbar:t(4898),meta:{}}},55479:function($){$.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77182:function($,U,t){var M=t(71828),E=t(55479);$.exports=function(i,S){function A(g,v){return M.coerce(i,S,E,g,v)}A("treemapcolorway",S.colorway),A("extendtreemapcolors")}},37210:function($,U,t){var M=t(674),E=t(14102);$.exports=function(S,A,g){var v=g.flipX,e=g.flipY,r=g.packing==="dice-slice",f=g.pad[e?"bottom":"top"],n=g.pad[v?"right":"left"],a=g.pad[v?"left":"right"],o=g.pad[e?"top":"bottom"],h;r&&(h=n,n=f,f=h,h=a,a=o,o=h);var y=M.treemap().tile(i(g.packing,g.squarifyratio)).paddingInner(g.pad.inner).paddingLeft(n).paddingRight(a).paddingTop(f).paddingBottom(o).size(r?[A[1],A[0]]:A)(S);return(r||v||e)&&E(y,A,{swapXY:r,flipX:v,flipY:e}),y};function i(S,A){switch(S){case"squarify":return M.treemapSquarify.ratio(A);case"binary":return M.treemapBinary;case"dice":return M.treemapDice;case"slice":return M.treemapSlice;default:return M.treemapSliceDice}}},5893:function($,U,t){var M=t(80694),E=t(52583);$.exports=function(i,S,A,g){return M(i,S,A,g,{type:"treemap",drawDescendants:E})}},46650:function($,U,t){var M=t(39898),E=t(81684).sX,i=t(2791),S=t(71828),A=t(97313).TEXTPAD,g=t(17295),v=g.toMoveInsideBar,e=t(72597),r=e.recordMinTextSize,f=t(43473),n=t(66209);function a(o){return i.isHierarchyRoot(o)?"":i.getPtId(o)}$.exports=function(o,h,y,p,x){var s=o._fullLayout,u=h[0],c=u.trace,T=c.type,k=T==="icicle",_=u.hierarchy,b=i.findEntryWithLevel(_,c.level),P=M.select(y),l=P.selectAll("g.pathbar"),d=P.selectAll("g.slice");if(!b){l.remove(),d.remove();return}var L=i.isHierarchyRoot(b),w=!s.uniformtext.mode&&i.hasTransition(p),I=i.getMaxDepth(c),z=function(ve){return ve.data.depth-b.data.depth<I},B=s._size,O=c.domain,R=B.w*(O.x[1]-O.x[0]),C=B.h*(O.y[1]-O.y[0]),F=R,N=c.pathbar.thickness,V=c.marker.line.width+f.gapWithPathbar,K=c.pathbar.visible?c.pathbar.side.indexOf("bottom")>-1?C+V:-(N+V):0,Q={x0:F,x1:F,y0:K,y1:K+N},at=function(ve,Mt,It){var Rt=c.tiling.pad,zt=function(vt){return vt-Rt<=Mt.x0},Tt=function(vt){return vt+Rt>=Mt.x1},ft=function(vt){return vt-Rt<=Mt.y0},ut=function(vt){return vt+Rt>=Mt.y1};return ve.x0===Mt.x0&&ve.x1===Mt.x1&&ve.y0===Mt.y0&&ve.y1===Mt.y1?{x0:ve.x0,x1:ve.x1,y0:ve.y0,y1:ve.y1}:{x0:zt(ve.x0-Rt)?0:Tt(ve.x0-Rt)?It[0]:ve.x0,x1:zt(ve.x1+Rt)?0:Tt(ve.x1+Rt)?It[0]:ve.x1,y0:ft(ve.y0-Rt)?0:ut(ve.y0-Rt)?It[1]:ve.y0,y1:ft(ve.y1+Rt)?0:ut(ve.y1+Rt)?It[1]:ve.y1}},it=null,q={},W={},Z=null,G=function(ve,Mt){return Mt?q[a(ve)]:W[a(ve)]},et=function(ve,Mt,It,Rt){if(Mt)return q[a(_)]||Q;var zt=W[c.level]||It;return z(ve)?at(ve,zt,Rt):{}};u.hasMultipleRoots&&L&&I++,c._maxDepth=I,c._backgroundColor=s.paper_bgcolor,c._entryDepth=b.data.depth,c._atRootLevel=L;var nt=-R/2+B.l+B.w*(O.x[1]+O.x[0])/2,X=-C/2+B.t+B.h*(1-(O.y[1]+O.y[0])/2),Y=function(ve){return nt+ve},ot=function(ve){return X+ve},rt=ot(0),ht=Y(0),pt=function(ve){return ht+ve},yt=function(ve){return rt+ve};function xt(ve,Mt){return ve+","+Mt}var Ft=pt(0),Et=function(ve){ve.x=Math.max(Ft,ve.x)},mt=c.pathbar.edgeshape,gt=function(ve){var Mt=pt(Math.max(Math.min(ve.x0,ve.x0),0)),It=pt(Math.min(Math.max(ve.x1,ve.x1),F)),Rt=yt(ve.y0),zt=yt(ve.y1),Tt=N/2,ft={},ut={};ft.x=Mt,ut.x=It,ft.y=ut.y=(Rt+zt)/2;var vt={x:Mt,y:Rt},St={x:It,y:Rt},Ot={x:It,y:zt},Xt={x:Mt,y:zt};return mt===">"?(vt.x-=Tt,St.x-=Tt,Ot.x-=Tt,Xt.x-=Tt):mt==="/"?(Ot.x-=Tt,Xt.x-=Tt,ft.x-=Tt/2,ut.x-=Tt/2):mt==="\\"?(vt.x-=Tt,St.x-=Tt,ft.x-=Tt/2,ut.x-=Tt/2):mt==="<"&&(ft.x-=Tt,ut.x-=Tt),Et(vt),Et(Xt),Et(ft),Et(St),Et(Ot),Et(ut),"M"+xt(vt.x,vt.y)+"L"+xt(St.x,St.y)+"L"+xt(ut.x,ut.y)+"L"+xt(Ot.x,Ot.y)+"L"+xt(Xt.x,Xt.y)+"L"+xt(ft.x,ft.y)+"Z"},wt=c[k?"tiling":"marker"].pad,Pt=function(ve){return c.textposition.indexOf(ve)!==-1},Bt=Pt("top"),kt=Pt("left"),jt=Pt("right"),Ht=Pt("bottom"),Vt=function(ve){var Mt=Y(ve.x0),It=Y(ve.x1),Rt=ot(ve.y0),zt=ot(ve.y1),Tt=It-Mt,ft=zt-Rt;if(!Tt||!ft)return"";var ut=c.marker.cornerradius||0,vt=Math.min(ut,Tt/2,ft/2);vt&&ve.data&&ve.data.data&&ve.data.data.label&&(Bt&&(vt=Math.min(vt,wt.t)),kt&&(vt=Math.min(vt,wt.l)),jt&&(vt=Math.min(vt,wt.r)),Ht&&(vt=Math.min(vt,wt.b)));var St=function(Ot,Xt){return vt?"a"+xt(vt,vt)+" 0 0 1 "+xt(Ot,Xt):""};return"M"+xt(Mt,Rt+vt)+St(vt,-vt)+"L"+xt(It-vt,Rt)+St(vt,vt)+"L"+xt(It,zt-vt)+St(-vt,vt)+"L"+xt(Mt+vt,zt)+St(-vt,-vt)+"Z"},ee=function(ve,Mt){var It=ve.x0,Rt=ve.x1,zt=ve.y0,Tt=ve.y1,ft=ve.textBB,ut=Bt||Mt.isHeader&&!Ht,vt=ut?"start":Ht?"end":"middle",St=Pt("right"),Ot=Pt("left")||Mt.onPathbar,Xt=Ot?-1:St?1:0;if(Mt.isHeader){if(It+=(k?wt:wt.l)-A,Rt-=(k?wt:wt.r)-A,It>=Rt){var $t=(It+Rt)/2;It=$t,Rt=$t}var de;Ht?(de=Tt-(k?wt:wt.b),zt<de&&de<Tt&&(zt=de)):(de=zt+(k?wt:wt.t),zt<de&&de<Tt&&(Tt=de))}var Me=v(It,Rt,zt,Tt,ft,{isHorizontal:!1,constrained:!0,angle:0,anchor:vt,leftToRight:Xt});return Me.fontSize=Mt.fontSize,Me.targetX=Y(Me.targetX),Me.targetY=ot(Me.targetY),isNaN(Me.targetX)||isNaN(Me.targetY)?{}:(It!==Rt&&zt!==Tt&&r(c.type,Me,s),{scale:Me.scale,rotate:Me.rotate,textX:Me.textX,textY:Me.textY,anchorX:Me.anchorX,anchorY:Me.anchorY,targetX:Me.targetX,targetY:Me.targetY})},te=function(ve,Mt){for(var It,Rt=0,zt=ve;!It&&Rt<I;)Rt++,zt=zt.parent,zt?It=G(zt,Mt):Rt=I;return It||{}},ae=function(ve,Mt,It,Rt){var zt=G(ve,Mt),Tt;if(Mt)Tt=Q;else{var ft=G(b,Mt);ft?Tt=at(ve,ft,Rt):Tt={}}return E(zt,Tt)},le=function(ve,Mt,It,Rt,zt){var Tt=G(ve,Mt),ft;if(Tt)ft=Tt;else if(Mt)ft=Q;else if(it)if(ve.parent){var ut=Z||It;ut&&!Mt?ft=at(ve,ut,Rt):(ft={},S.extendFlat(ft,te(ve,Mt)))}else ft=S.extendFlat({},ve),k&&(zt.orientation==="h"?zt.flipX?ft.x0=ve.x1:ft.x1=0:zt.flipY?ft.y0=ve.y1:ft.y1=0);else ft={};return E(ft,{x0:ve.x0,x1:ve.x1,y0:ve.y0,y1:ve.y1})},ce=function(ve,Mt,It,Rt){var zt=G(ve,Mt),Tt={},ft=et(ve,Mt,It,Rt);S.extendFlat(Tt,{transform:ee({x0:ft.x0,x1:ft.x1,y0:ft.y0,y1:ft.y1,textBB:ve.textBB,_text:ve._text},{isHeader:i.isHeader(ve,c)})}),zt?Tt=zt:ve.parent&&S.extendFlat(Tt,te(ve,Mt));var ut=ve.transform;return ve.x0!==ve.x1&&ve.y0!==ve.y1&&r(c.type,ut,s),E(Tt,{transform:{scale:ut.scale,rotate:ut.rotate,textX:ut.textX,textY:ut.textY,anchorX:ut.anchorX,anchorY:ut.anchorY,targetX:ut.targetX,targetY:ut.targetY}})},pe=function(ve,Mt,It,Rt,zt){var Tt=Rt[0],ft=Rt[1];w?ve.exit().transition().each(function(){var ut=M.select(this),vt=ut.select("path.surface");vt.transition().attrTween("d",function(Ot){var Xt=ae(Ot,Mt,It,[Tt,ft]);return function($t){return zt(Xt($t))}});var St=ut.select("g.slicetext");St.attr("opacity",0)}).remove():ve.exit().remove()},we=function(ve){var Mt=ve.transform;return ve.x0!==ve.x1&&ve.y0!==ve.y1&&r(c.type,Mt,s),S.getTextTransform({textX:Mt.textX,textY:Mt.textY,anchorX:Mt.anchorX,anchorY:Mt.anchorY,targetX:Mt.targetX,targetY:Mt.targetY,scale:Mt.scale,rotate:Mt.rotate})};w&&(l.each(function(ve){q[a(ve)]={x0:ve.x0,x1:ve.x1,y0:ve.y0,y1:ve.y1},ve.transform&&(q[a(ve)].transform={textX:ve.transform.textX,textY:ve.transform.textY,anchorX:ve.transform.anchorX,anchorY:ve.transform.anchorY,targetX:ve.transform.targetX,targetY:ve.transform.targetY,scale:ve.transform.scale,rotate:ve.transform.rotate})}),d.each(function(ve){W[a(ve)]={x0:ve.x0,x1:ve.x1,y0:ve.y0,y1:ve.y1},ve.transform&&(W[a(ve)].transform={textX:ve.transform.textX,textY:ve.transform.textY,anchorX:ve.transform.anchorX,anchorY:ve.transform.anchorY,targetX:ve.transform.targetX,targetY:ve.transform.targetY,scale:ve.transform.scale,rotate:ve.transform.rotate}),!it&&i.isEntry(ve)&&(it=ve)})),Z=x(o,h,b,d,{width:R,height:C,viewX:Y,viewY:ot,pathSlice:Vt,toMoveInsideSlice:ee,prevEntry:it,makeUpdateSliceInterpolator:le,makeUpdateTextInterpolator:ce,handleSlicesExit:pe,hasTransition:w,strTransform:we}),c.pathbar.visible?n(o,h,b,l,{barDifY:K,width:F,height:N,viewX:pt,viewY:yt,pathSlice:gt,toMoveInsideSlice:ee,makeUpdateSliceInterpolator:le,makeUpdateTextInterpolator:ce,handleSlicesExit:pe,hasTransition:w,strTransform:we}):l.remove()}},96362:function($,U,t){var M=t(39898),E=t(7901),i=t(71828),S=t(2791),A=t(72597).resizeText,g=t(43467);function v(r){var f=r._fullLayout._treemaplayer.selectAll(".trace");A(r,f,"treemap"),f.each(function(n){var a=M.select(this),o=n[0],h=o.trace;a.style("opacity",h.opacity),a.selectAll("path.surface").each(function(y){M.select(this).call(e,y,h,r,{hovered:!1})})})}function e(r,f,n,a,o){var h=(o||{}).hovered,y=f.data.data,p=y.i,x,s,u=y.color,c=S.isHierarchyRoot(f),T=1;if(h)x=n._hovered.marker.line.color,s=n._hovered.marker.line.width;else if(c&&u===n.root.color)T=100,x="rgba(0,0,0,0)",s=0;else if(x=i.castOption(n,p,"marker.line.color")||E.defaultLine,s=i.castOption(n,p,"marker.line.width")||0,!n._hasColorscale&&!f.onPathbar){var k=n.marker.depthfade;if(k){var _=E.combine(E.addOpacity(n._backgroundColor,.75),u),b;if(k===!0){var P=S.getMaxDepth(n);isFinite(P)?S.isLeaf(f)?b=0:b=n._maxVisibleLayers-(f.data.depth-n._entryDepth):b=f.data.height+1}else b=f.data.depth-n._entryDepth,n._atRootLevel||b++;if(b>0)for(var l=0;l<b;l++){var d=.5*l/b;u=E.combine(E.addOpacity(_,d),u)}}}r.call(g,f,n,a,u).style("stroke-width",s).call(E.stroke,x).style("opacity",T)}$.exports={style:v,styleOne:e}},68875:function($,U,t){var M=t(53522),E=t(1426).extendFlat,i=t(12663).axisHoverFormat;$.exports={y:M.y,x:M.x,x0:M.x0,y0:M.y0,xhoverformat:i("x"),yhoverformat:i("y"),name:E({},M.name,{}),orientation:E({},M.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:M.fillcolor,points:E({},M.boxpoints,{}),jitter:E({},M.jitter,{}),pointpos:E({},M.pointpos,{}),width:E({},M.width,{}),marker:M.marker,text:M.text,hovertext:M.hovertext,hovertemplate:M.hovertemplate,quartilemethod:M.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:M.selected,unselected:M.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},38603:function($,U,t){var M=t(71828),E=t(89298),i=t(48518),S=t(60168),A=t(50606).BADNUM;$.exports=function(r,f){var n=i(r,f);if(n[0].t.empty)return n;for(var a=r._fullLayout,o=E.getFromId(r,f[f.orientation==="h"?"xaxis":"yaxis"]),h=1/0,y=-1/0,p=0,x=0,s=0;s<n.length;s++){var u=n[s],c=u.pts.map(S.extractVal),T=u.bandwidth=v(f,u,c),k=u.span=e(f,u,o,T);if(u.min===u.max&&T===0)k=u.span=[u.min,u.max],u.density=[{v:1,t:k[0]}],u.bandwidth=T,p=Math.max(p,1);else{var _=k[1]-k[0],b=Math.ceil(_/(T/3)),P=_/b;if(!isFinite(P)||!isFinite(b))return M.error("Something went wrong with computing the violin span"),n[0].t.empty=!0,n;var l=S.makeKDE(u,f,c);u.density=new Array(b);for(var d=0,L=k[0];L<k[1]+P/2;d++,L+=P){var w=l(L);u.density[d]={v:w,t:L},p=Math.max(p,w)}}x=Math.max(x,c.length),h=Math.min(h,k[0]),y=Math.max(y,k[1])}var I=E.findExtremes(o,[h,y],{padded:!0});if(f._extremes[o._id]=I,f.width)n[0].t.maxKDE=p;else{var z=a._violinScaleGroupStats,B=f.scalegroup,O=z[B];O?(O.maxKDE=Math.max(O.maxKDE,p),O.maxCount=Math.max(O.maxCount,x)):z[B]={maxKDE:p,maxCount:x}}return n[0].t.labels.kde=M._(r,"kde:"),n};function g(r,f,n){var a=Math.min(f,n/1.349);return 1.059*a*Math.pow(r,-.2)}function v(r,f,n){var a=f.max-f.min;if(!a)return r.bandwidth?r.bandwidth:0;if(r.bandwidth)return Math.max(r.bandwidth,a/1e4);var o=n.length,h=M.stdev(n,o-1,f.mean);return Math.max(g(o,h,f.q3-f.q1),a/100)}function e(r,f,n,a){var o=r.spanmode,h=r.span||[],y=[f.min,f.max],p=[f.min-2*a,f.max+2*a],x;function s(c){var T=h[c],k=n.type==="multicategory"?n.r2c(T):n.d2c(T,0,r[f.valLetter+"calendar"]);return k===A?p[c]:k}o==="soft"?x=p:o==="hard"?x=y:x=[s(0),s(1)];var u={type:"linear",range:x};return E.setConvert(u),u.cleanRange(),x}},86403:function($,U,t){var M=t(37188).setPositionOffset,E=["v","h"];$.exports=function(i,S){for(var A=i.calcdata,g=S.xaxis,v=S.yaxis,e=0;e<E.length;e++){for(var r=E[e],f=r==="h"?v:g,n=[],a=0;a<A.length;a++){var o=A[a],h=o[0].t,y=o[0].trace;y.visible===!0&&y.type==="violin"&&!h.empty&&y.orientation===r&&y.xaxis===g._id&&y.yaxis===v._id&&n.push(a)}M("violin",i,n,f)}}},15899:function($,U,t){var M=t(71828),E=t(7901),i=t(36411),S=t(68875);$.exports=function(A,g,v,e){function r(P,l){return M.coerce(A,g,S,P,l)}function f(P,l){return M.coerce2(A,g,S,P,l)}if(i.handleSampleDefaults(A,g,r,e),g.visible!==!1){r("bandwidth"),r("side");var n=r("width");n||(r("scalegroup",g.name),r("scalemode"));var a=r("span"),o;Array.isArray(a)&&(o="manual"),r("spanmode",o);var h=r("line.color",(A.marker||{}).color||v),y=r("line.width"),p=r("fillcolor",E.addOpacity(g.line.color,.5));i.handlePointsDefaults(A,g,r,{prefix:""});var x=f("box.width"),s=f("box.fillcolor",p),u=f("box.line.color",h),c=f("box.line.width",y),T=r("box.visible",!!(x||s||u||c));T||(g.box={visible:!1});var k=f("meanline.color",h),_=f("meanline.width",y),b=r("meanline.visible",!!(k||_));b||(g.meanline={visible:!1}),r("quartilemethod")}}},60168:function($,U,t){var M=t(71828),E={gaussian:function(i){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*i*i)}};U.makeKDE=function(i,S,A){var g=A.length,v=E.gaussian,e=i.bandwidth,r=1/(g*e);return function(f){for(var n=0,a=0;a<g;a++)n+=v((f-A[a])/e);return r*n}},U.getPositionOnKdePath=function(i,S,A){var g,v;S.orientation==="h"?(g="y",v="x"):(g="x",v="y");var e=M.findPointOnPath(i.path,A,v,{pathLength:i.pathLength}),r=i.posCenterPx,f=e[g],n=S.side==="both"?2*r-f:r;return[f,n]},U.getKdeValue=function(i,S,A){var g=i.pts.map(U.extractVal),v=U.makeKDE(i,S,g);return v(A)/i.posDensityScale},U.extractVal=function(i){return i.v}},57634:function($,U,t){var M=t(7901),E=t(71828),i=t(89298),S=t(41868),A=t(60168);$.exports=function(g,v,e,r,f){f||(f={});var n=f.hoverLayer,a=g.cd,o=a[0].trace,h=o.hoveron,y=h.indexOf("violins")!==-1,p=h.indexOf("kde")!==-1,x=[],s,u;if(y||p){var c=S.hoverOnBoxes(g,v,e,r);if(p&&c.length>0){var T=g.xa,k=g.ya,_,b,P,l,d;o.orientation==="h"?(d=v,_="y",P=k,b="x",l=T):(d=e,_="x",P=T,b="y",l=k);var L=a[g.index];if(d>=L.span[0]&&d<=L.span[1]){var w=E.extendFlat({},g),I=l.c2p(d,!0),z=A.getKdeValue(L,o,d),B=A.getPositionOnKdePath(L,o,I),O=P._offset,R=P._length;w[_+"0"]=B[0],w[_+"1"]=B[1],w[b+"0"]=w[b+"1"]=I,w[b+"Label"]=b+": "+i.hoverLabelText(l,d,o[b+"hoverformat"])+", "+a[0].t.labels.kde+" "+z.toFixed(3);for(var C=0,F=0;F<c.length;F++)if(c[F].attr==="med"){C=F;break}w.spikeDistance=c[C].spikeDistance;var N=_+"Spike";w[N]=c[C][N],c[C].spikeDistance=void 0,c[C][N]=void 0,w.hovertemplate=!1,x.push(w),u={},u[_+"1"]=E.constrain(O+B[0],O,O+R),u[_+"2"]=E.constrain(O+B[1],O,O+R),u[b+"1"]=u[b+"2"]=l._offset+I}}y&&(x=x.concat(c))}h.indexOf("points")!==-1&&(s=S.hoverOnPoints(g,v,e));var V=n.selectAll(".violinline-"+o.uid).data(u?[0]:[]);return V.enter().append("line").classed("violinline-"+o.uid,!0).attr("stroke-width",1.5),V.exit().remove(),V.attr(u).call(M.stroke,g.color),r==="closest"?s?[s]:x:(s&&x.push(s),x)}},47462:function($,U,t){$.exports={attributes:t(68875),layoutAttributes:t(9228),supplyDefaults:t(15899),crossTraceDefaults:t(36411).crossTraceDefaults,supplyLayoutDefaults:t(33598),calc:t(38603),crossTraceCalc:t(86403),plot:t(28443),style:t(31847),styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(57634),selectPoints:t(24626),moduleType:"trace",name:"violin",basePlotModule:t(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},9228:function($,U,t){var M=t(40094),E=t(71828).extendFlat;$.exports={violinmode:E({},M.boxmode,{}),violingap:E({},M.boxgap,{}),violingroupgap:E({},M.boxgroupgap,{})}},33598:function($,U,t){var M=t(71828),E=t(9228),i=t(4199);$.exports=function(S,A,g){function v(e,r){return M.coerce(S,A,E,e,r)}i._supply(S,A,g,v,"violin")}},28443:function($,U,t){var M=t(39898),E=t(71828),i=t(91424),S=t(86047),A=t(34621),g=t(60168);$.exports=function(v,e,r,f){var n=v._context.staticPlot,a=v._fullLayout,o=e.xaxis,h=e.yaxis;function y(p,x){var s=A(p,{xaxis:o,yaxis:h,trace:x,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return i.smoothopen(s[0],1)}E.makeTraceGroups(f,r,"trace violins").each(function(p){var x=M.select(this),s=p[0],u=s.t,c=s.trace;if(c.visible!==!0||u.empty){x.remove();return}var T=u.bPos,k=u.bdPos,_=e[u.valLetter+"axis"],b=e[u.posLetter+"axis"],P=c.side==="both",l=P||c.side==="positive",d=P||c.side==="negative",L=x.selectAll("path.violin").data(E.identity);L.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","violin"),L.exit().remove(),L.each(function(F){var N=M.select(this),V=F.density,K=V.length,Q=b.c2l(F.pos+T,!0),at=b.l2p(Q),it;if(c.width)it=u.maxKDE/k;else{var q=a._violinScaleGroupStats[c.scalegroup];it=c.scalemode==="count"?q.maxKDE/k*(q.maxCount/F.pts.length):q.maxKDE/k}var W,Z,G,et,nt,X,Y;if(l){for(X=new Array(K),et=0;et<K;et++)Y=X[et]={},Y[u.posLetter]=Q+V[et].v/it,Y[u.valLetter]=_.c2l(V[et].t,!0);W=y(X,c)}if(d){for(X=new Array(K),nt=0,et=K-1;nt<K;nt++,et--)Y=X[nt]={},Y[u.posLetter]=Q-V[et].v/it,Y[u.valLetter]=_.c2l(V[et].t,!0);Z=y(X,c)}if(P)G=W+"L"+Z.substr(1)+"Z";else{var ot=[at,_.c2p(V[0].t)],rt=[at,_.c2p(V[K-1].t)];c.orientation==="h"&&(ot.reverse(),rt.reverse()),l?G="M"+ot+"L"+W.substr(1)+"L"+rt:G="M"+rt+"L"+Z.substr(1)+"L"+ot}N.attr("d",G),F.posCenterPx=at,F.posDensityScale=it*k,F.path=N.node(),F.pathLength=F.path.getTotalLength()/(P?2:1)});var w=c.box,I=w.width,z=(w.line||{}).width,B,O;P?(B=k*I,O=0):l?(B=[0,k*I/2],O=z*{x:1,y:-1}[u.posLetter]):(B=[k*I/2,0],O=z*{x:-1,y:1}[u.posLetter]),S.plotBoxAndWhiskers(x,{pos:b,val:_},c,{bPos:T,bdPos:B,bPosPxOffset:O}),S.plotBoxMean(x,{pos:b,val:_},c,{bPos:T,bdPos:B,bPosPxOffset:O});var R;!c.box.visible&&c.meanline.visible&&(R=E.identity);var C=x.selectAll("path.meanline").data(R||[]);C.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",n?"none":"non-scaling-stroke"),C.exit().remove(),C.each(function(F){var N=_.c2p(F.mean,!0),V=g.getPositionOnKdePath(F,c,N);M.select(this).attr("d",c.orientation==="h"?"M"+N+","+V[0]+"V"+V[1]:"M"+V[0]+","+N+"H"+V[1])}),S.plotPoints(x,{x:o,y:h},c,u)})}},31847:function($,U,t){var M=t(39898),E=t(7901),i=t(16296).stylePoints;$.exports=function(S){var A=M.select(S).selectAll("g.trace.violins");A.style("opacity",function(g){return g[0].trace.opacity}),A.each(function(g){var v=g[0].trace,e=M.select(this),r=v.box||{},f=r.line||{},n=v.meanline||{},a=n.width;e.selectAll("path.violin").style("stroke-width",v.line.width+"px").call(E.stroke,v.line.color).call(E.fill,v.fillcolor),e.selectAll("path.box").style("stroke-width",f.width+"px").call(E.stroke,f.color).call(E.fill,r.fillcolor);var o={"stroke-width":a+"px","stroke-dasharray":2*a+"px,"+a+"px"};e.selectAll("path.mean").style(o).call(E.stroke,n.color),e.selectAll("path.meanline").style(o).call(E.stroke,n.color),i(e,v,S)})}},16336:function($,U,t){var M=t(50693),E=t(16249),i=t(54532),S=t(9012),A=t(1426).extendFlat,g=t(30962).overrideAll,v=$.exports=g(A({x:E.x,y:E.y,z:E.z,value:E.value,isomin:E.isomin,isomax:E.isomax,surface:E.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:E.slices,caps:E.caps,text:E.text,hovertext:E.hovertext,xhoverformat:E.xhoverformat,yhoverformat:E.yhoverformat,zhoverformat:E.zhoverformat,valuehoverformat:E.valuehoverformat,hovertemplate:E.hovertemplate},M("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:E.colorbar,opacity:E.opacity,opacityscale:i.opacityscale,lightposition:E.lightposition,lighting:E.lighting,flatshading:E.flatshading,contour:E.contour,hoverinfo:A({},S.hoverinfo),showlegend:A({},S.showlegend,{dflt:!1})}),"calc","nested");v.x.editType=v.y.editType=v.z.editType=v.value.editType="calc+clearAxisTypes",v.transforms=void 0},64809:function($,U,t){var M=t(9330).gl_mesh3d,E=t(81697).parseColorScale,i=t(78614),S=t(21081).extractOpts,A=t(90060),g=t(22674).findNearestOnAxis,v=t(22674).generateIsoMeshes;function e(n,a,o){this.scene=n,this.uid=o,this.mesh=a,this.name="",this.data=null,this.showContour=!1}var r=e.prototype;r.handlePick=function(n){if(n.object===this.mesh){var a=n.data.index,o=this.data._meshX[a],h=this.data._meshY[a],y=this.data._meshZ[a],p=this.data._Ys.length,x=this.data._Zs.length,s=g(o,this.data._Xs).id,u=g(h,this.data._Ys).id,c=g(y,this.data._Zs).id,T=n.index=c+x*u+x*p*s;n.traceCoordinate=[this.data._meshX[T],this.data._meshY[T],this.data._meshZ[T],this.data._value[T]];var k=this.data.hovertext||this.data.text;return Array.isArray(k)&&k[T]!==void 0?n.textLabel=k[T]:k&&(n.textLabel=k),!0}},r.update=function(n){var a=this.scene,o=a.fullSceneLayout;this.data=v(n);function h(u,c,T,k){return c.map(function(_){return u.d2l(_,0,k)*T})}var y=A(h(o.xaxis,n._meshX,a.dataScale[0],n.xcalendar),h(o.yaxis,n._meshY,a.dataScale[1],n.ycalendar),h(o.zaxis,n._meshZ,a.dataScale[2],n.zcalendar)),p=A(n._meshI,n._meshJ,n._meshK),x={positions:y,cells:p,lightPosition:[n.lightposition.x,n.lightposition.y,n.lightposition.z],ambient:n.lighting.ambient,diffuse:n.lighting.diffuse,specular:n.lighting.specular,roughness:n.lighting.roughness,fresnel:n.lighting.fresnel,vertexNormalsEpsilon:n.lighting.vertexnormalsepsilon,faceNormalsEpsilon:n.lighting.facenormalsepsilon,opacity:n.opacity,opacityscale:n.opacityscale,contourEnable:n.contour.show,contourColor:i(n.contour.color).slice(0,3),contourWidth:n.contour.width,useFacetNormals:n.flatshading},s=S(n);x.vertexIntensity=n._meshIntensity,x.vertexIntensityBounds=[s.min,s.max],x.colormap=E(n),this.mesh.update(x)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function f(n,a){var o=n.glplot.gl,h=M({gl:o}),y=new e(n,h,a.uid);return h._trace=y,y.update(a),n.glplot.add(h),y}$.exports=f},47651:function($,U,t){var M=t(71828),E=t(16336),i=t(82738).supplyIsoDefaults,S=t(91831).opacityscaleDefaults;$.exports=function(A,g,v,e){function r(f,n){return M.coerce(A,g,E,f,n)}i(A,g,v,e,r),S(A,g,e,r)}},17659:function($,U,t){$.exports={attributes:t(16336),supplyDefaults:t(47651),calc:t(56959),colorbar:{min:"cmin",max:"cmax"},plot:t(64809),moduleType:"trace",name:"volume",basePlotModule:t(58547),categories:["gl3d","showLegend"],meta:{}}},43037:function($,U,t){var M=t(1486),E=t(82196).line,i=t(9012),S=t(12663).axisHoverFormat,A=t(5386).fF,g=t(5386).si,v=t(48334),e=t(1426).extendFlat,r=t(7901);function f(n){return{marker:{color:e({},M.marker.color,{arrayOk:!1,editType:"style"}),line:{color:e({},M.marker.line.color,{arrayOk:!1,editType:"style"}),width:e({},M.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}$.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:S("x"),yhoverformat:S("y"),hovertext:M.hovertext,hovertemplate:A({},{keys:v.eventDataKeys}),hoverinfo:e({},i.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:g({editType:"plot"},{keys:v.eventDataKeys.concat(["label"])}),text:M.text,textposition:M.textposition,insidetextanchor:M.insidetextanchor,textangle:M.textangle,textfont:M.textfont,insidetextfont:M.insidetextfont,outsidetextfont:M.outsidetextfont,constraintext:M.constraintext,cliponaxis:M.cliponaxis,orientation:M.orientation,offset:M.offset,width:M.width,increasing:f(),decreasing:f(),totals:f(),connector:{line:{color:e({},E.color,{dflt:r.defaultLine}),width:e({},E.width,{editType:"plot"}),dash:E.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup}},52752:function($,U,t){var M=t(89298),E=t(42973),i=t(71828).mergeArray,S=t(66279),A=t(50606).BADNUM;function g(e){return e==="a"||e==="absolute"}function v(e){return e==="t"||e==="total"}$.exports=function(e,r){var f=M.getFromId(e,r.xaxis||"x"),n=M.getFromId(e,r.yaxis||"y"),a,o,h,y,p,x;r.orientation==="h"?(a=f.makeCalcdata(r,"x"),h=n.makeCalcdata(r,"y"),y=E(r,n,"y",h),p=!!r.yperiodalignment,x="y"):(a=n.makeCalcdata(r,"y"),h=f.makeCalcdata(r,"x"),y=E(r,f,"x",h),p=!!r.xperiodalignment,x="x"),o=y.vals;for(var s=Math.min(o.length,a.length),u=new Array(s),c=0,T,k=!1,_=0;_<s;_++){var b=a[_]||0,P=!1;(a[_]!==A||v(r.measure[_])||g(r.measure[_]))&&_+1<s&&(a[_+1]!==A||v(r.measure[_+1])||g(r.measure[_+1]))&&(P=!0);var l=u[_]={i:_,p:o[_],s:b,rawS:b,cNext:P};g(r.measure[_])?(c=l.s,l.isSum=!0,l.dir="totals",l.s=c):v(r.measure[_])?(l.isSum=!0,l.dir="totals",l.s=c):(l.isSum=!1,l.dir=l.rawS<0?"decreasing":"increasing",T=l.s,l.s=c+T,c+=T),l.dir==="totals"&&(k=!0),p&&(u[_].orig_p=h[_],u[_][x+"End"]=y.ends[_],u[_][x+"Start"]=y.starts[_]),r.ids&&(l.id=String(r.ids[_])),l.v=(r.base||0)+c}return u.length&&(u[0].hasTotals=k),i(r.text,u,"tx"),i(r.hovertext,u,"htx"),S(u,r),u}},48334:function($){$.exports={eventDataKeys:["initial","delta","final"]}},70766:function($,U,t){var M=t(11661).setGroupPositions;$.exports=function(E,i){var S=E._fullLayout,A=E._fullData,g=E.calcdata,v=i.xaxis,e=i.yaxis,r=[],f=[],n=[],a,o;for(o=0;o<A.length;o++){var h=A[o];h.visible===!0&&h.xaxis===v._id&&h.yaxis===e._id&&h.type==="waterfall"&&(a=g[o],h.orientation==="h"?n.push(a):f.push(a),r.push(a))}var y={mode:S.waterfallmode,norm:S.waterfallnorm,gap:S.waterfallgap,groupgap:S.waterfallgroupgap};for(M(E,v,e,f,y),M(E,e,v,n,y),o=0;o<r.length;o++){a=r[o];for(var p=0;p<a.length;p++){var x=a[p];x.isSum===!1&&(x.s0+=p===0?0:a[p-1].s),p+1<a.length&&(a[p].nextP0=a[p+1].p0,a[p].nextS0=a[p+1].s0)}}}},83266:function($,U,t){var M=t(71828),E=t(26125),i=t(90769).handleText,S=t(67513),A=t(73927),g=t(43037),v=t(7901),e=t(22372),r=e.INCREASING.COLOR,f=e.DECREASING.COLOR,n="#4499FF";function a(y,p,x){y(p+".marker.color",x),y(p+".marker.line.color",v.defaultLine),y(p+".marker.line.width")}function o(y,p,x,s){function u(b,P){return M.coerce(y,p,g,b,P)}var c=S(y,p,s,u);if(!c){p.visible=!1;return}A(y,p,s,u),u("xhoverformat"),u("yhoverformat"),u("measure"),u("orientation",p.x&&!p.y?"h":"v"),u("base"),u("offset"),u("width"),u("text"),u("hovertext"),u("hovertemplate");var T=u("textposition");i(y,p,s,u,T,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),p.textposition!=="none"&&(u("texttemplate"),p.texttemplate||u("textinfo")),a(u,"increasing",r),a(u,"decreasing",f),a(u,"totals",n);var k=u("connector.visible");if(k){u("connector.mode");var _=u("connector.line.width");_&&(u("connector.line.color"),u("connector.line.dash"))}}function h(y,p){var x,s;function u(T){return M.coerce(s._input,s,g,T)}if(p.waterfallmode==="group")for(var c=0;c<y.length;c++)s=y[c],x=s._input,E(x,s,p,u)}$.exports={supplyDefaults:o,crossTraceDefaults:h}},58593:function($){$.exports=function(U,t){return U.x="xVal"in t?t.xVal:t.x,U.y="yVal"in t?t.yVal:t.y,"initial"in t&&(U.initial=t.initial),"delta"in t&&(U.delta=t.delta),"final"in t&&(U.final=t.final),t.xa&&(U.xaxis=t.xa),t.ya&&(U.yaxis=t.ya),U}},61326:function($,U,t){var M=t(89298).hoverLabelText,E=t(7901).opacity,i=t(95423).hoverOnBars,S=t(22372),A={increasing:S.INCREASING.SYMBOL,decreasing:S.DECREASING.SYMBOL};$.exports=function(v,e,r,f,n){var a=i(v,e,r,f,n);if(!a)return;var o=a.cd,h=o[0].trace,y=h.orientation==="h",p=y?"x":"y",x=y?v.xa:v.ya;function s(L){return M(x,L,h[p+"hoverformat"])}var u=a.index,c=o[u],T=c.isSum?c.b+c.s:c.rawS;a.initial=c.b+c.s-T,a.delta=T,a.final=a.initial+a.delta;var k=s(Math.abs(a.delta));a.deltaLabel=T<0?"("+k+")":k,a.finalLabel=s(a.final),a.initialLabel=s(a.initial);var _=c.hi||h.hoverinfo,b=[];if(_&&_!=="none"&&_!=="skip"){var P=_==="all",l=_.split("+"),d=function(L){return P||l.indexOf(L)!==-1};c.isSum||(d("final")&&(y?!d("x"):!d("y"))&&b.push(a.finalLabel),d("delta")&&(T<0?b.push(a.deltaLabel+" "+A.decreasing):b.push(a.deltaLabel+" "+A.increasing)),d("initial")&&b.push("Initial: "+a.initialLabel))}return b.length&&(a.extraText=b.join("<br>")),a.color=g(h,c),[a]};function g(v,e){var r=v[e.dir].marker,f=r.color,n=r.line.color,a=r.line.width;if(E(f))return f;if(E(n)&&a)return n}},19990:function($,U,t){$.exports={attributes:t(43037),layoutAttributes:t(13494),supplyDefaults:t(83266).supplyDefaults,crossTraceDefaults:t(83266).crossTraceDefaults,supplyLayoutDefaults:t(5176),calc:t(52752),crossTraceCalc:t(70766),plot:t(30436),style:t(55750).style,hoverPoints:t(61326),eventData:t(58593),selectPoints:t(81974),moduleType:"trace",name:"waterfall",basePlotModule:t(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},13494:function($){$.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},5176:function($,U,t){var M=t(71828),E=t(13494);$.exports=function(i,S,A){var g=!1;function v(f,n){return M.coerce(i,S,E,f,n)}for(var e=0;e<A.length;e++){var r=A[e];if(r.visible&&r.type==="waterfall"){g=!0;break}}g&&(v("waterfallmode"),v("waterfallgap",.2),v("waterfallgroupgap"))}},30436:function($,U,t){var M=t(39898),E=t(71828),i=t(91424),S=t(50606).BADNUM,A=t(17295),g=t(72597).clearMinTextSize;$.exports=function(r,f,n,a){var o=r._fullLayout;g("waterfall",o),A.plot(r,f,n,a,{mode:o.waterfallmode,norm:o.waterfallmode,gap:o.waterfallgap,groupgap:o.waterfallgroupgap}),v(r,f,n,a)};function v(r,f,n,a){var o=f.xaxis,h=f.yaxis;E.makeTraceGroups(a,n,"trace bars").each(function(y){var p=M.select(this),x=y[0].trace,s=E.ensureSingle(p,"g","lines");if(!x.connector||!x.connector.visible){s.remove();return}var u=x.orientation==="h",c=x.connector.mode,T=s.selectAll("g.line").data(E.identity);T.enter().append("g").classed("line",!0),T.exit().remove();var k=T.size();T.each(function(_,b){if(!(b!==k-1&&!_.cNext)){var P=e(_,o,h,u),l=P[0],d=P[1],L="";l[0]!==S&&d[0]!==S&&l[1]!==S&&d[1]!==S&&(c==="spanning"&&!_.isSum&&b>0&&(u?L+="M"+l[0]+","+d[1]+"V"+d[0]:L+="M"+l[1]+","+d[0]+"H"+l[0]),c!=="between"&&(_.isSum||b<k-1)&&(u?L+="M"+l[1]+","+d[0]+"V"+d[1]:L+="M"+l[0]+","+d[1]+"H"+l[1]),l[2]!==S&&d[2]!==S&&(u?L+="M"+l[1]+","+d[1]+"V"+d[2]:L+="M"+l[1]+","+d[1]+"H"+l[2])),L===""&&(L="M0,0Z"),E.ensureSingle(M.select(this),"path").attr("d",L).call(i.setClipUrl,f.layerClipId,r)}})})}function e(r,f,n,a){var o=[],h=[],y=a?f:n,p=a?n:f;return o[0]=y.c2p(r.s0,!0),h[0]=p.c2p(r.p0,!0),o[1]=y.c2p(r.s1,!0),h[1]=p.c2p(r.p1,!0),o[2]=y.c2p(r.nextS0,!0),h[2]=p.c2p(r.nextP0,!0),a?[o,h]:[h,o]}},55750:function($,U,t){var M=t(39898),E=t(91424),i=t(7901),S=t(37822).DESELECTDIM,A=t(16688),g=t(72597).resizeText,v=A.styleTextPoints;function e(r,f,n){var a=n||M.select(r).selectAll("g.waterfalllayer").selectAll("g.trace");g(r,a,"waterfall"),a.style("opacity",function(o){return o[0].trace.opacity}),a.each(function(o){var h=M.select(this),y=o[0].trace;h.selectAll(".point > path").each(function(p){if(!p.isBlank){var x=y[p.dir].marker;M.select(this).call(i.fill,x.color).call(i.stroke,x.line.color).call(E.dashLine,x.line.dash,x.line.width).style("opacity",y.selectedpoints&&!p.selected?S:1)}}),v(h,y,r),h.selectAll(".lines").each(function(){var p=y.connector.line;E.lineGroupStyle(M.select(this).selectAll("path"),p.width,p.color,p.dash)})})}$.exports={style:e}},82887:function($,U,t){var M=t(89298),E=t(71828),i=t(86281),S=t(79344).p,A=t(50606).BADNUM;U.moduleType="transform",U.name="aggregate";var g=U.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},v=g.aggregations;U.supplyDefaults=function(o,h){var y={},p;function x(w,I){return E.coerce(o,y,g,w,I)}var s=x("enabled");if(!s)return y;var u=i.findArrayAttributes(h),c={};for(p=0;p<u.length;p++)c[u[p]]=1;var T=x("groups");if(!Array.isArray(T)){if(!c[T])return y.enabled=!1,y;c[T]=0}var k=o.aggregations||[],_=y.aggregations=new Array(k.length),b;function P(w,I){return E.coerce(k[p],b,v,w,I)}for(p=0;p<k.length;p++){b={_index:p};var l=P("target"),d=P("func"),L=P("enabled");L&&l&&(c[l]||d==="count"&&c[l]===void 0)?(d==="stddev"&&P("funcmode"),c[l]=0,_[p]=b):_[p]={enabled:!1,_index:p}}for(p=0;p<u.length;p++)c[u[p]]&&_.push({target:u[p],func:v.func.dflt,enabled:!0,_index:-1});return y},U.calcTransform=function(o,h,y){if(y.enabled){var p=y.groups,x=E.getTargetArray(h,{target:p});if(x){var s,u,c,T,k={},_={},b=[],P=S(h.transforms,y),l=x.length;for(h._length&&(l=Math.min(l,h._length)),s=0;s<l;s++)u=x[s],c=k[u],c===void 0?(k[u]=b.length,T=[s],b.push(T),_[k[u]]=P(s)):(b[c].push(s),_[k[u]]=(_[k[u]]||[]).concat(P(s)));y._indexToPoints=_;var d=y.aggregations;for(s=0;s<d.length;s++)e(o,h,b,d[s]);typeof p=="string"&&e(o,h,b,{target:p,func:"first",enabled:!0}),h._length=b.length}}};function e(o,h,y,p){if(p.enabled){for(var x=p.target,s=E.nestedProperty(h,x),u=s.get(),c=M.getDataConversions(o,h,x,u),T=r(p,c),k=new Array(y.length),_=0;_<y.length;_++)k[_]=T(u,y[_]);s.set(k),p.func==="count"&&E.pushUnique(h._arrayAttrs,x)}}function r(o,h){var y=o.func,p=h.d2c,x=h.c2d;switch(y){case"count":return f;case"first":return n;case"last":return a;case"sum":return function(s,u){for(var c=0,T=0;T<u.length;T++){var k=p(s[u[T]]);k!==A&&(c+=k)}return x(c)};case"avg":return function(s,u){for(var c=0,T=0,k=0;k<u.length;k++){var _=p(s[u[k]]);_!==A&&(c+=_,T++)}return T?x(c/T):A};case"min":return function(s,u){for(var c=1/0,T=0;T<u.length;T++){var k=p(s[u[T]]);k!==A&&(c=Math.min(c,k))}return c===1/0?A:x(c)};case"max":return function(s,u){for(var c=-1/0,T=0;T<u.length;T++){var k=p(s[u[T]]);k!==A&&(c=Math.max(c,k))}return c===-1/0?A:x(c)};case"range":return function(s,u){for(var c=1/0,T=-1/0,k=0;k<u.length;k++){var _=p(s[u[k]]);_!==A&&(c=Math.min(c,_),T=Math.max(T,_))}return T===-1/0||c===1/0?A:x(T-c)};case"change":return function(s,u){var c=p(s[u[0]]),T=p(s[u[u.length-1]]);return c===A||T===A?A:x(T-c)};case"median":return function(s,u){for(var c=[],T=0;T<u.length;T++){var k=p(s[u[T]]);k!==A&&c.push(k)}if(!c.length)return A;c.sort(E.sorterAsc);var _=(c.length-1)/2;return x((c[Math.floor(_)]+c[Math.ceil(_)])/2)};case"mode":return function(s,u){for(var c={},T=0,k=A,_=0;_<u.length;_++){var b=p(s[u[_]]);if(b!==A){var P=c[b]=(c[b]||0)+1;P>T&&(T=P,k=b)}}return T?x(k):A};case"rms":return function(s,u){for(var c=0,T=0,k=0;k<u.length;k++){var _=p(s[u[k]]);_!==A&&(c+=_*_,T++)}return T?x(Math.sqrt(c/T)):A};case"stddev":return function(s,u){var c=0,T=0,k=1,_=A,b;for(b=0;b<u.length&&_===A;b++)_=p(s[u[b]]);if(_===A)return A;for(;b<u.length;b++){var P=p(s[u[b]]);if(P!==A){var l=P-_;c+=l,T+=l*l,k++}}var d=o.funcmode==="sample"?k-1:k;return d?Math.sqrt((T-c*c/k)/d):0}}}function f(o,h){return h.length}function n(o,h){return o[h[0]]}function a(o,h){return o[h[h.length-1]]}},14382:function($,U,t){var M=t(71828),E=t(73972),i=t(89298),S=t(79344).p,A=t(74808),g=A.COMPARISON_OPS,v=A.INTERVAL_OPS,e=A.SET_OPS;U.moduleType="transform",U.name="filter",U.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(g).concat(v).concat(e),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},U.supplyDefaults=function(f){var n={};function a(p,x){return M.coerce(f,n,U.attributes,p,x)}var o=a("enabled");if(o){var h=a("target");if(M.isArrayOrTypedArray(h)&&h.length===0)return n.enabled=!1,n;a("preservegaps"),a("operation"),a("value");var y=E.getComponentMethod("calendars","handleDefaults");y(f,n,"valuecalendar",null),y(f,n,"targetcalendar",null)}return n},U.calcTransform=function(f,n,a){if(!a.enabled)return;var o=M.getTargetArray(n,a);if(!o)return;var h=a.target,y=o.length;n._length&&(y=Math.min(y,n._length));var p=a.targetcalendar,x=n._arrayAttrs,s=a.preservegaps;if(typeof h=="string"){var u=M.nestedProperty(n,h+"calendar").get();u&&(p=u)}var c=i.getDataToCoordFunc(f,n,h,o),T=r(a,c,p),k={},_={},b=0;function P(z,B){for(var O=0;O<x.length;O++){var R=M.nestedProperty(n,x[O]);z(R,B)}}var l,d;s?(l=function(z){k[z.astr]=M.extendDeep([],z.get()),z.set(new Array(y))},d=function(z,B){var O=k[z.astr][B];z.get()[B]=O}):(l=function(z){k[z.astr]=M.extendDeep([],z.get()),z.set([])},d=function(z,B){var O=k[z.astr][B];z.get().push(O)}),P(l);for(var L=S(n.transforms,a),w=0;w<y;w++){var I=T(o[w]);I?(P(d,w),_[b++]=L(w)):s&&b++}a._indexToPoints=_,n._length=b};function r(f,n,a){var o=f.operation,h=f.value,y=Array.isArray(h);function p(c){return c.indexOf(o)!==-1}var x=function(c){return n(c,0,f.valuecalendar)},s=function(c){return n(c,0,a)},u;switch(p(g)?u=x(y?h[0]:h):p(v)?u=y?[x(h[0]),x(h[1])]:[x(h),x(h)]:p(e)&&(u=y?h.map(x):[x(h)]),o){case"=":return function(c){return s(c)===u};case"!=":return function(c){return s(c)!==u};case"<":return function(c){return s(c)<u};case"<=":return function(c){return s(c)<=u};case">":return function(c){return s(c)>u};case">=":return function(c){return s(c)>=u};case"[]":return function(c){var T=s(c);return T>=u[0]&&T<=u[1]};case"()":return function(c){var T=s(c);return T>u[0]&&T<u[1]};case"[)":return function(c){var T=s(c);return T>=u[0]&&T<u[1]};case"(]":return function(c){var T=s(c);return T>u[0]&&T<=u[1]};case"][":return function(c){var T=s(c);return T<=u[0]||T>=u[1]};case")(":return function(c){var T=s(c);return T<u[0]||T>u[1]};case"](":return function(c){var T=s(c);return T<=u[0]||T>u[1]};case")[":return function(c){var T=s(c);return T<u[0]||T>=u[1]};case"{}":return function(c){return u.indexOf(s(c))!==-1};case"}{":return function(c){return u.indexOf(s(c))===-1}}}},43102:function($,U,t){var M=t(71828),E=t(86281),i=t(74875),S=t(79344).p;U.moduleType="transform",U.name="groupby",U.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},U.supplyDefaults=function(g,v,e){var r,f={};function n(x,s){return M.coerce(g,f,U.attributes,x,s)}var a=n("enabled");if(!a)return f;n("groups"),n("nameformat",e._dataLength>1?"%{group} (%{trace})":"%{group}");var o=g.styles,h=f.styles=[];if(o)for(r=0;r<o.length;r++){var y=h[r]={};M.coerce(o[r],h[r],U.attributes.styles,"target");var p=M.coerce(o[r],h[r],U.attributes.styles,"value");M.isPlainObject(p)?y.value=M.extendDeep({},p):p&&delete y.value}return f},U.transform=function(g,v){var e,r,f,n=[];for(r=0;r<g.length;r++)for(e=A(g[r],v),f=0;f<e.length;f++)n.push(e[f]);return n};function A(g,v){var e,r,f,n,a,o,h,y,p,x,s=v.transform,u=v.transformIndex,c=g.transforms[u].groups,T=S(g.transforms,s);if(!M.isArrayOrTypedArray(c)||c.length===0)return[g];var k=M.filterUnique(c),_=new Array(k.length),b=c.length,P=E.findArrayAttributes(g),l=s.styles||[],d={};for(e=0;e<l.length;e++)d[l[e].target]=l[e].value;s.styles&&(x=M.keyedContainer(s,"styles","target","value.name"));var L={},w={};for(e=0;e<k.length;e++){o=k[e],L[o]=e,w[o]=0,h=_[e]=M.extendDeepNoArrays({},g),h._group=o,h.transforms[u]._indexToPoints={};var I=null;for(x&&(I=x.get(o)),I||I===""?h.name=I:h.name=M.templateString(s.nameformat,{trace:g.name,group:o}),y=h.transforms,h.transforms=[],r=0;r<y.length;r++)h.transforms[r]=M.extendDeepNoArrays({},y[r]);for(r=0;r<P.length;r++)M.nestedProperty(h,P[r]).set([])}for(f=0;f<P.length;f++){for(n=P[f],r=0,p=[];r<k.length;r++)p[r]=M.nestedProperty(_[r],n).get();for(a=M.nestedProperty(g,n).get(),r=0;r<b;r++)p[L[c[r]]].push(a[r])}for(r=0;r<b;r++){h=_[L[c[r]]];var z=h.transforms[u]._indexToPoints;z[w[c[r]]]=T(r),w[c[r]]++}for(e=0;e<k.length;e++)o=k[e],h=_[e],i.clearExpandedTraceDefaultColors(h),h=M.extendDeepNoArrays(h,d[o]||{});return _}},79344:function($,U){U.p=function(t,M){for(var E,i,S=0;S<t.length&&(E=t[S],E!==M);S++)!E._indexToPoints||E.enabled===!1||(i=E._indexToPoints);var A=i?function(g){return i[g]}:function(g){return[g]};return A}},32275:function($,U,t){var M=t(71828),E=t(89298),i=t(79344).p,S=t(50606).BADNUM;U.moduleType="transform",U.name="sort",U.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},U.supplyDefaults=function(v){var e={};function r(n,a){return M.coerce(v,e,U.attributes,n,a)}var f=r("enabled");return f&&(r("target"),r("order")),e},U.calcTransform=function(v,e,r){if(r.enabled){var f=M.getTargetArray(e,r);if(f){var n=r.target,a=f.length;e._length&&(a=Math.min(a,e._length));var o=e._arrayAttrs,h=E.getDataToCoordFunc(v,e,n,f),y=A(r,f,h,a),p=i(e.transforms,r),x={},s,u;for(s=0;s<o.length;s++){var c=M.nestedProperty(e,o[s]),T=c.get(),k=new Array(a);for(u=0;u<a;u++)k[u]=T[y[u]];c.set(k)}for(u=0;u<a;u++)x[u]=p(y[u]);r._indexToPoints=x,e._length=a}}};function A(v,e,r,f){var n=new Array(f),a=new Array(f),o;for(o=0;o<f;o++)n[o]={v:e[o],i:o};for(n.sort(g(v,r)),o=0;o<f;o++)a[o]=n[o].i;return a}function g(v,e){switch(v.order){case"ascending":return function(r,f){var n=e(r.v),a=e(f.v);return n===S?1:a===S?-1:n-a};case"descending":return function(r,f){var n=e(r.v),a=e(f.v);return n===S?1:a===S?-1:a-n}}}},11506:function($,U){U.version="2.25.0"},9330:function($,U,t){var M=t(90386);(function(E,i){$.exports=i()})(self,function(){return function(){var E={7386:function(g,v,e){g.exports={alpha_shape:e(2350),convex_hull:e(5537),delaunay_triangulate:e(4419),gl_cone3d:e(1140),gl_error3d:e(3110),gl_heatmap2d:e(6386),gl_line3d:e(6086),gl_mesh3d:e(8116),gl_plot2d:e(2117),gl_plot3d:e(1059),gl_pointcloud2d:e(8271),gl_scatter3d:e(2182),gl_select_box:e(6623),gl_spikes2d:e(3050),gl_streamtube3d:e(7307),gl_surface3d:e(3754),ndarray:e(5050),ndarray_linear_interpolate:e(3581)}},2146:function(g,v,e){function r(ft,ut){if(!(ft instanceof ut))throw new TypeError("Cannot call a class as a function")}function f(ft,ut){for(var vt=0;vt<ut.length;vt++){var St=ut[vt];St.enumerable=St.enumerable||!1,St.configurable=!0,"value"in St&&(St.writable=!0),Object.defineProperty(ft,St.key,St)}}function n(ft,ut,vt){return ut&&f(ft.prototype,ut),vt&&f(ft,vt),Object.defineProperty(ft,"prototype",{writable:!1}),ft}function a(ft,ut){if(typeof ut!="function"&&ut!==null)throw new TypeError("Super expression must either be null or a function");ft.prototype=Object.create(ut&&ut.prototype,{constructor:{value:ft,writable:!0,configurable:!0}}),Object.defineProperty(ft,"prototype",{writable:!1}),ut&&o(ft,ut)}function o(ft,ut){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(vt,St){return vt.__proto__=St,vt},o(ft,ut)}function h(ft){var ut=x();return function(){var vt=s(ft),St;if(ut){var Ot=s(this).constructor;St=Reflect.construct(vt,arguments,Ot)}else St=vt.apply(this,arguments);return y(this,St)}}function y(ft,ut){if(ut&&(u(ut)==="object"||typeof ut=="function"))return ut;if(ut!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p(ft)}function p(ft){if(ft===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ft}function x(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function s(ft){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ut){return ut.__proto__||Object.getPrototypeOf(ut)},s(ft)}function u(ft){"@babel/helpers - typeof";return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ut){return typeof ut}:function(ut){return ut&&typeof Symbol=="function"&&ut.constructor===Symbol&&ut!==Symbol.prototype?"symbol":typeof ut},u(ft)}var c=e(3910),T=e(3187),k=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;v.lW=l,v.h2=50;var _=2147483647;l.TYPED_ARRAY_SUPPORT=b(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function b(){try{var ft=new Uint8Array(1),ut={foo:function(){return 42}};return Object.setPrototypeOf(ut,Uint8Array.prototype),Object.setPrototypeOf(ft,ut),ft.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function P(ft){if(ft>_)throw new RangeError('The value "'+ft+'" is invalid for option "size"');var ut=new Uint8Array(ft);return Object.setPrototypeOf(ut,l.prototype),ut}function l(ft,ut,vt){if(typeof ft=="number"){if(typeof ut=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return I(ft)}return d(ft,ut,vt)}l.poolSize=8192;function d(ft,ut,vt){if(typeof ft=="string")return z(ft,ut);if(ArrayBuffer.isView(ft))return O(ft);if(ft==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(ft));if(Mt(ft,ArrayBuffer)||ft&&Mt(ft.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Mt(ft,SharedArrayBuffer)||ft&&Mt(ft.buffer,SharedArrayBuffer)))return R(ft,ut,vt);if(typeof ft=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var St=ft.valueOf&&ft.valueOf();if(St!=null&&St!==ft)return l.from(St,ut,vt);var Ot=C(ft);if(Ot)return Ot;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ft[Symbol.toPrimitive]=="function")return l.from(ft[Symbol.toPrimitive]("string"),ut,vt);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(ft))}l.from=function(ft,ut,vt){return d(ft,ut,vt)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function L(ft){if(typeof ft!="number")throw new TypeError('"size" argument must be of type number');if(ft<0)throw new RangeError('The value "'+ft+'" is invalid for option "size"')}function w(ft,ut,vt){return L(ft),ft<=0?P(ft):ut!==void 0?typeof vt=="string"?P(ft).fill(ut,vt):P(ft).fill(ut):P(ft)}l.alloc=function(ft,ut,vt){return w(ft,ut,vt)};function I(ft){return L(ft),P(ft<0?0:F(ft)|0)}l.allocUnsafe=function(ft){return I(ft)},l.allocUnsafeSlow=function(ft){return I(ft)};function z(ft,ut){if((typeof ut!="string"||ut==="")&&(ut="utf8"),!l.isEncoding(ut))throw new TypeError("Unknown encoding: "+ut);var vt=N(ft,ut)|0,St=P(vt),Ot=St.write(ft,ut);return Ot!==vt&&(St=St.slice(0,Ot)),St}function B(ft){for(var ut=ft.length<0?0:F(ft.length)|0,vt=P(ut),St=0;St<ut;St+=1)vt[St]=ft[St]&255;return vt}function O(ft){if(Mt(ft,Uint8Array)){var ut=new Uint8Array(ft);return R(ut.buffer,ut.byteOffset,ut.byteLength)}return B(ft)}function R(ft,ut,vt){if(ut<0||ft.byteLength<ut)throw new RangeError('"offset" is outside of buffer bounds');if(ft.byteLength<ut+(vt||0))throw new RangeError('"length" is outside of buffer bounds');var St;return ut===void 0&&vt===void 0?St=new Uint8Array(ft):vt===void 0?St=new Uint8Array(ft,ut):St=new Uint8Array(ft,ut,vt),Object.setPrototypeOf(St,l.prototype),St}function C(ft){if(l.isBuffer(ft)){var ut=F(ft.length)|0,vt=P(ut);return vt.length===0||ft.copy(vt,0,0,ut),vt}if(ft.length!==void 0)return typeof ft.length!="number"||It(ft.length)?P(0):B(ft);if(ft.type==="Buffer"&&Array.isArray(ft.data))return B(ft.data)}function F(ft){if(ft>=_)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+_.toString(16)+" bytes");return ft|0}l.isBuffer=function(ft){return ft!=null&&ft._isBuffer===!0&&ft!==l.prototype},l.compare=function(ft,ut){if(Mt(ft,Uint8Array)&&(ft=l.from(ft,ft.offset,ft.byteLength)),Mt(ut,Uint8Array)&&(ut=l.from(ut,ut.offset,ut.byteLength)),!l.isBuffer(ft)||!l.isBuffer(ut))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ft===ut)return 0;for(var vt=ft.length,St=ut.length,Ot=0,Xt=Math.min(vt,St);Ot<Xt;++Ot)if(ft[Ot]!==ut[Ot]){vt=ft[Ot],St=ut[Ot];break}return vt<St?-1:St<vt?1:0},l.isEncoding=function(ft){switch(String(ft).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(ft,ut){if(!Array.isArray(ft))throw new TypeError('"list" argument must be an Array of Buffers');if(ft.length===0)return l.alloc(0);var vt;if(ut===void 0)for(ut=0,vt=0;vt<ft.length;++vt)ut+=ft[vt].length;var St=l.allocUnsafe(ut),Ot=0;for(vt=0;vt<ft.length;++vt){var Xt=ft[vt];if(Mt(Xt,Uint8Array))Ot+Xt.length>St.length?(l.isBuffer(Xt)||(Xt=l.from(Xt)),Xt.copy(St,Ot)):Uint8Array.prototype.set.call(St,Xt,Ot);else if(l.isBuffer(Xt))Xt.copy(St,Ot);else throw new TypeError('"list" argument must be an Array of Buffers');Ot+=Xt.length}return St};function N(ft,ut){if(l.isBuffer(ft))return ft.length;if(ArrayBuffer.isView(ft)||Mt(ft,ArrayBuffer))return ft.byteLength;if(typeof ft!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+u(ft));var vt=ft.length,St=arguments.length>2&&arguments[2]===!0;if(!St&&vt===0)return 0;for(var Ot=!1;;)switch(ut){case"ascii":case"latin1":case"binary":return vt;case"utf8":case"utf-8":return le(ft).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return vt*2;case"hex":return vt>>>1;case"base64":return we(ft).length;default:if(Ot)return St?-1:le(ft).length;ut=(""+ut).toLowerCase(),Ot=!0}}l.byteLength=N;function V(ft,ut,vt){var St=!1;if((ut===void 0||ut<0)&&(ut=0),ut>this.length||((vt===void 0||vt>this.length)&&(vt=this.length),vt<=0)||(vt>>>=0,ut>>>=0,vt<=ut))return"";for(ft||(ft="utf8");;)switch(ft){case"hex":return ht(this,ut,vt);case"utf8":case"utf-8":return nt(this,ut,vt);case"ascii":return ot(this,ut,vt);case"latin1":case"binary":return rt(this,ut,vt);case"base64":return et(this,ut,vt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pt(this,ut,vt);default:if(St)throw new TypeError("Unknown encoding: "+ft);ft=(ft+"").toLowerCase(),St=!0}}l.prototype._isBuffer=!0;function K(ft,ut,vt){var St=ft[ut];ft[ut]=ft[vt],ft[vt]=St}l.prototype.swap16=function(){var ft=this.length;if(ft%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ut=0;ut<ft;ut+=2)K(this,ut,ut+1);return this},l.prototype.swap32=function(){var ft=this.length;if(ft%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ut=0;ut<ft;ut+=4)K(this,ut,ut+3),K(this,ut+1,ut+2);return this},l.prototype.swap64=function(){var ft=this.length;if(ft%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ut=0;ut<ft;ut+=8)K(this,ut,ut+7),K(this,ut+1,ut+6),K(this,ut+2,ut+5),K(this,ut+3,ut+4);return this},l.prototype.toString=function(){var ft=this.length;return ft===0?"":arguments.length===0?nt(this,0,ft):V.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(ft){if(!l.isBuffer(ft))throw new TypeError("Argument must be a Buffer");return this===ft?!0:l.compare(this,ft)===0},l.prototype.inspect=function(){var ft="",ut=v.h2;return ft=this.toString("hex",0,ut).replace(/(.{2})/g,"$1 ").trim(),this.length>ut&&(ft+=" ... "),"<Buffer "+ft+">"},k&&(l.prototype[k]=l.prototype.inspect),l.prototype.compare=function(ft,ut,vt,St,Ot){if(Mt(ft,Uint8Array)&&(ft=l.from(ft,ft.offset,ft.byteLength)),!l.isBuffer(ft))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+u(ft));if(ut===void 0&&(ut=0),vt===void 0&&(vt=ft?ft.length:0),St===void 0&&(St=0),Ot===void 0&&(Ot=this.length),ut<0||vt>ft.length||St<0||Ot>this.length)throw new RangeError("out of range index");if(St>=Ot&&ut>=vt)return 0;if(St>=Ot)return-1;if(ut>=vt)return 1;if(ut>>>=0,vt>>>=0,St>>>=0,Ot>>>=0,this===ft)return 0;for(var Xt=Ot-St,$t=vt-ut,de=Math.min(Xt,$t),Me=this.slice(St,Ot),Fe=ft.slice(ut,vt),De=0;De<de;++De)if(Me[De]!==Fe[De]){Xt=Me[De],$t=Fe[De];break}return Xt<$t?-1:$t<Xt?1:0};function Q(ft,ut,vt,St,Ot){if(ft.length===0)return-1;if(typeof vt=="string"?(St=vt,vt=0):vt>2147483647?vt=2147483647:vt<-2147483648&&(vt=-2147483648),vt=+vt,It(vt)&&(vt=Ot?0:ft.length-1),vt<0&&(vt=ft.length+vt),vt>=ft.length){if(Ot)return-1;vt=ft.length-1}else if(vt<0)if(Ot)vt=0;else return-1;if(typeof ut=="string"&&(ut=l.from(ut,St)),l.isBuffer(ut))return ut.length===0?-1:at(ft,ut,vt,St,Ot);if(typeof ut=="number")return ut=ut&255,typeof Uint8Array.prototype.indexOf=="function"?Ot?Uint8Array.prototype.indexOf.call(ft,ut,vt):Uint8Array.prototype.lastIndexOf.call(ft,ut,vt):at(ft,[ut],vt,St,Ot);throw new TypeError("val must be string, number or Buffer")}function at(ft,ut,vt,St,Ot){var Xt=1,$t=ft.length,de=ut.length;if(St!==void 0&&(St=String(St).toLowerCase(),St==="ucs2"||St==="ucs-2"||St==="utf16le"||St==="utf-16le")){if(ft.length<2||ut.length<2)return-1;Xt=2,$t/=2,de/=2,vt/=2}function Me(Qe,Sr){return Xt===1?Qe[Sr]:Qe.readUInt16BE(Sr*Xt)}var Fe;if(Ot){var De=-1;for(Fe=vt;Fe<$t;Fe++)if(Me(ft,Fe)===Me(ut,De===-1?0:Fe-De)){if(De===-1&&(De=Fe),Fe-De+1===de)return De*Xt}else De!==-1&&(Fe-=Fe-De),De=-1}else for(vt+de>$t&&(vt=$t-de),Fe=vt;Fe>=0;Fe--){for(var Ae=!0,Ve=0;Ve<de;Ve++)if(Me(ft,Fe+Ve)!==Me(ut,Ve)){Ae=!1;break}if(Ae)return Fe}return-1}l.prototype.includes=function(ft,ut,vt){return this.indexOf(ft,ut,vt)!==-1},l.prototype.indexOf=function(ft,ut,vt){return Q(this,ft,ut,vt,!0)},l.prototype.lastIndexOf=function(ft,ut,vt){return Q(this,ft,ut,vt,!1)};function it(ft,ut,vt,St){vt=Number(vt)||0;var Ot=ft.length-vt;St?(St=Number(St),St>Ot&&(St=Ot)):St=Ot;var Xt=ut.length;St>Xt/2&&(St=Xt/2);var $t;for($t=0;$t<St;++$t){var de=parseInt(ut.substr($t*2,2),16);if(It(de))return $t;ft[vt+$t]=de}return $t}function q(ft,ut,vt,St){return ve(le(ut,ft.length-vt),ft,vt,St)}function W(ft,ut,vt,St){return ve(ce(ut),ft,vt,St)}function Z(ft,ut,vt,St){return ve(we(ut),ft,vt,St)}function G(ft,ut,vt,St){return ve(pe(ut,ft.length-vt),ft,vt,St)}l.prototype.write=function(ft,ut,vt,St){if(ut===void 0)St="utf8",vt=this.length,ut=0;else if(vt===void 0&&typeof ut=="string")St=ut,vt=this.length,ut=0;else if(isFinite(ut))ut=ut>>>0,isFinite(vt)?(vt=vt>>>0,St===void 0&&(St="utf8")):(St=vt,vt=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Ot=this.length-ut;if((vt===void 0||vt>Ot)&&(vt=Ot),ft.length>0&&(vt<0||ut<0)||ut>this.length)throw new RangeError("Attempt to write outside buffer bounds");St||(St="utf8");for(var Xt=!1;;)switch(St){case"hex":return it(this,ft,ut,vt);case"utf8":case"utf-8":return q(this,ft,ut,vt);case"ascii":case"latin1":case"binary":return W(this,ft,ut,vt);case"base64":return Z(this,ft,ut,vt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,ft,ut,vt);default:if(Xt)throw new TypeError("Unknown encoding: "+St);St=(""+St).toLowerCase(),Xt=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function et(ft,ut,vt){return ut===0&&vt===ft.length?c.fromByteArray(ft):c.fromByteArray(ft.slice(ut,vt))}function nt(ft,ut,vt){vt=Math.min(ft.length,vt);for(var St=[],Ot=ut;Ot<vt;){var Xt=ft[Ot],$t=null,de=Xt>239?4:Xt>223?3:Xt>191?2:1;if(Ot+de<=vt){var Me=void 0,Fe=void 0,De=void 0,Ae=void 0;switch(de){case 1:Xt<128&&($t=Xt);break;case 2:Me=ft[Ot+1],(Me&192)===128&&(Ae=(Xt&31)<<6|Me&63,Ae>127&&($t=Ae));break;case 3:Me=ft[Ot+1],Fe=ft[Ot+2],(Me&192)===128&&(Fe&192)===128&&(Ae=(Xt&15)<<12|(Me&63)<<6|Fe&63,Ae>2047&&(Ae<55296||Ae>57343)&&($t=Ae));break;case 4:Me=ft[Ot+1],Fe=ft[Ot+2],De=ft[Ot+3],(Me&192)===128&&(Fe&192)===128&&(De&192)===128&&(Ae=(Xt&15)<<18|(Me&63)<<12|(Fe&63)<<6|De&63,Ae>65535&&Ae<1114112&&($t=Ae))}}$t===null?($t=65533,de=1):$t>65535&&($t-=65536,St.push($t>>>10&1023|55296),$t=56320|$t&1023),St.push($t),Ot+=de}return Y(St)}var X=4096;function Y(ft){var ut=ft.length;if(ut<=X)return String.fromCharCode.apply(String,ft);for(var vt="",St=0;St<ut;)vt+=String.fromCharCode.apply(String,ft.slice(St,St+=X));return vt}function ot(ft,ut,vt){var St="";vt=Math.min(ft.length,vt);for(var Ot=ut;Ot<vt;++Ot)St+=String.fromCharCode(ft[Ot]&127);return St}function rt(ft,ut,vt){var St="";vt=Math.min(ft.length,vt);for(var Ot=ut;Ot<vt;++Ot)St+=String.fromCharCode(ft[Ot]);return St}function ht(ft,ut,vt){var St=ft.length;(!ut||ut<0)&&(ut=0),(!vt||vt<0||vt>St)&&(vt=St);for(var Ot="",Xt=ut;Xt<vt;++Xt)Ot+=Rt[ft[Xt]];return Ot}function pt(ft,ut,vt){for(var St=ft.slice(ut,vt),Ot="",Xt=0;Xt<St.length-1;Xt+=2)Ot+=String.fromCharCode(St[Xt]+St[Xt+1]*256);return Ot}l.prototype.slice=function(ft,ut){var vt=this.length;ft=~~ft,ut=ut===void 0?vt:~~ut,ft<0?(ft+=vt,ft<0&&(ft=0)):ft>vt&&(ft=vt),ut<0?(ut+=vt,ut<0&&(ut=0)):ut>vt&&(ut=vt),ut<ft&&(ut=ft);var St=this.subarray(ft,ut);return Object.setPrototypeOf(St,l.prototype),St};function yt(ft,ut,vt){if(ft%1!==0||ft<0)throw new RangeError("offset is not uint");if(ft+ut>vt)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(ft,ut,vt){ft=ft>>>0,ut=ut>>>0,vt||yt(ft,ut,this.length);for(var St=this[ft],Ot=1,Xt=0;++Xt<ut&&(Ot*=256);)St+=this[ft+Xt]*Ot;return St},l.prototype.readUintBE=l.prototype.readUIntBE=function(ft,ut,vt){ft=ft>>>0,ut=ut>>>0,vt||yt(ft,ut,this.length);for(var St=this[ft+--ut],Ot=1;ut>0&&(Ot*=256);)St+=this[ft+--ut]*Ot;return St},l.prototype.readUint8=l.prototype.readUInt8=function(ft,ut){return ft=ft>>>0,ut||yt(ft,1,this.length),this[ft]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(ft,ut){return ft=ft>>>0,ut||yt(ft,2,this.length),this[ft]|this[ft+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(ft,ut){return ft=ft>>>0,ut||yt(ft,2,this.length),this[ft]<<8|this[ft+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(ft,ut){return ft=ft>>>0,ut||yt(ft,4,this.length),(this[ft]|this[ft+1]<<8|this[ft+2]<<16)+this[ft+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(ft,ut){return ft=ft>>>0,ut||yt(ft,4,this.length),this[ft]*16777216+(this[ft+1]<<16|this[ft+2]<<8|this[ft+3])},l.prototype.readBigUInt64LE=zt(function(ft){ft=ft>>>0,Vt(ft,"offset");var ut=this[ft],vt=this[ft+7];(ut===void 0||vt===void 0)&&ee(ft,this.length-8);var St=ut+this[++ft]*Math.pow(2,8)+this[++ft]*Math.pow(2,16)+this[++ft]*Math.pow(2,24),Ot=this[++ft]+this[++ft]*Math.pow(2,8)+this[++ft]*Math.pow(2,16)+vt*Math.pow(2,24);return BigInt(St)+(BigInt(Ot)<<BigInt(32))}),l.prototype.readBigUInt64BE=zt(function(ft){ft=ft>>>0,Vt(ft,"offset");var ut=this[ft],vt=this[ft+7];(ut===void 0||vt===void 0)&&ee(ft,this.length-8);var St=ut*Math.pow(2,24)+this[++ft]*Math.pow(2,16)+this[++ft]*Math.pow(2,8)+this[++ft],Ot=this[++ft]*Math.pow(2,24)+this[++ft]*Math.pow(2,16)+this[++ft]*Math.pow(2,8)+vt;return(BigInt(St)<<BigInt(32))+BigInt(Ot)}),l.prototype.readIntLE=function(ft,ut,vt){ft=ft>>>0,ut=ut>>>0,vt||yt(ft,ut,this.length);for(var St=this[ft],Ot=1,Xt=0;++Xt<ut&&(Ot*=256);)St+=this[ft+Xt]*Ot;return Ot*=128,St>=Ot&&(St-=Math.pow(2,8*ut)),St},l.prototype.readIntBE=function(ft,ut,vt){ft=ft>>>0,ut=ut>>>0,vt||yt(ft,ut,this.length);for(var St=ut,Ot=1,Xt=this[ft+--St];St>0&&(Ot*=256);)Xt+=this[ft+--St]*Ot;return Ot*=128,Xt>=Ot&&(Xt-=Math.pow(2,8*ut)),Xt},l.prototype.readInt8=function(ft,ut){return ft=ft>>>0,ut||yt(ft,1,this.length),this[ft]&128?(255-this[ft]+1)*-1:this[ft]},l.prototype.readInt16LE=function(ft,ut){ft=ft>>>0,ut||yt(ft,2,this.length);var vt=this[ft]|this[ft+1]<<8;return vt&32768?vt|4294901760:vt},l.prototype.readInt16BE=function(ft,ut){ft=ft>>>0,ut||yt(ft,2,this.length);var vt=this[ft+1]|this[ft]<<8;return vt&32768?vt|4294901760:vt},l.prototype.readInt32LE=function(ft,ut){return ft=ft>>>0,ut||yt(ft,4,this.length),this[ft]|this[ft+1]<<8|this[ft+2]<<16|this[ft+3]<<24},l.prototype.readInt32BE=function(ft,ut){return ft=ft>>>0,ut||yt(ft,4,this.length),this[ft]<<24|this[ft+1]<<16|this[ft+2]<<8|this[ft+3]},l.prototype.readBigInt64LE=zt(function(ft){ft=ft>>>0,Vt(ft,"offset");var ut=this[ft],vt=this[ft+7];(ut===void 0||vt===void 0)&&ee(ft,this.length-8);var St=this[ft+4]+this[ft+5]*Math.pow(2,8)+this[ft+6]*Math.pow(2,16)+(vt<<24);return(BigInt(St)<<BigInt(32))+BigInt(ut+this[++ft]*Math.pow(2,8)+this[++ft]*Math.pow(2,16)+this[++ft]*Math.pow(2,24))}),l.prototype.readBigInt64BE=zt(function(ft){ft=ft>>>0,Vt(ft,"offset");var ut=this[ft],vt=this[ft+7];(ut===void 0||vt===void 0)&&ee(ft,this.length-8);var St=(ut<<24)+this[++ft]*Math.pow(2,16)+this[++ft]*Math.pow(2,8)+this[++ft];return(BigInt(St)<<BigInt(32))+BigInt(this[++ft]*Math.pow(2,24)+this[++ft]*Math.pow(2,16)+this[++ft]*Math.pow(2,8)+vt)}),l.prototype.readFloatLE=function(ft,ut){return ft=ft>>>0,ut||yt(ft,4,this.length),T.read(this,ft,!0,23,4)},l.prototype.readFloatBE=function(ft,ut){return ft=ft>>>0,ut||yt(ft,4,this.length),T.read(this,ft,!1,23,4)},l.prototype.readDoubleLE=function(ft,ut){return ft=ft>>>0,ut||yt(ft,8,this.length),T.read(this,ft,!0,52,8)},l.prototype.readDoubleBE=function(ft,ut){return ft=ft>>>0,ut||yt(ft,8,this.length),T.read(this,ft,!1,52,8)};function xt(ft,ut,vt,St,Ot,Xt){if(!l.isBuffer(ft))throw new TypeError('"buffer" argument must be a Buffer instance');if(ut>Ot||ut<Xt)throw new RangeError('"value" argument is out of bounds');if(vt+St>ft.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(ft,ut,vt,St){if(ft=+ft,ut=ut>>>0,vt=vt>>>0,!St){var Ot=Math.pow(2,8*vt)-1;xt(this,ft,ut,vt,Ot,0)}var Xt=1,$t=0;for(this[ut]=ft&255;++$t<vt&&(Xt*=256);)this[ut+$t]=ft/Xt&255;return ut+vt},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(ft,ut,vt,St){if(ft=+ft,ut=ut>>>0,vt=vt>>>0,!St){var Ot=Math.pow(2,8*vt)-1;xt(this,ft,ut,vt,Ot,0)}var Xt=vt-1,$t=1;for(this[ut+Xt]=ft&255;--Xt>=0&&($t*=256);)this[ut+Xt]=ft/$t&255;return ut+vt},l.prototype.writeUint8=l.prototype.writeUInt8=function(ft,ut,vt){return ft=+ft,ut=ut>>>0,vt||xt(this,ft,ut,1,255,0),this[ut]=ft&255,ut+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(ft,ut,vt){return ft=+ft,ut=ut>>>0,vt||xt(this,ft,ut,2,65535,0),this[ut]=ft&255,this[ut+1]=ft>>>8,ut+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(ft,ut,vt){return ft=+ft,ut=ut>>>0,vt||xt(this,ft,ut,2,65535,0),this[ut]=ft>>>8,this[ut+1]=ft&255,ut+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(ft,ut,vt){return ft=+ft,ut=ut>>>0,vt||xt(this,ft,ut,4,4294967295,0),this[ut+3]=ft>>>24,this[ut+2]=ft>>>16,this[ut+1]=ft>>>8,this[ut]=ft&255,ut+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(ft,ut,vt){return ft=+ft,ut=ut>>>0,vt||xt(this,ft,ut,4,4294967295,0),this[ut]=ft>>>24,this[ut+1]=ft>>>16,this[ut+2]=ft>>>8,this[ut+3]=ft&255,ut+4};function Ft(ft,ut,vt,St,Ot){Ht(ut,St,Ot,ft,vt,7);var Xt=Number(ut&BigInt(4294967295));ft[vt++]=Xt,Xt=Xt>>8,ft[vt++]=Xt,Xt=Xt>>8,ft[vt++]=Xt,Xt=Xt>>8,ft[vt++]=Xt;var $t=Number(ut>>BigInt(32)&BigInt(4294967295));return ft[vt++]=$t,$t=$t>>8,ft[vt++]=$t,$t=$t>>8,ft[vt++]=$t,$t=$t>>8,ft[vt++]=$t,vt}function Et(ft,ut,vt,St,Ot){Ht(ut,St,Ot,ft,vt,7);var Xt=Number(ut&BigInt(4294967295));ft[vt+7]=Xt,Xt=Xt>>8,ft[vt+6]=Xt,Xt=Xt>>8,ft[vt+5]=Xt,Xt=Xt>>8,ft[vt+4]=Xt;var $t=Number(ut>>BigInt(32)&BigInt(4294967295));return ft[vt+3]=$t,$t=$t>>8,ft[vt+2]=$t,$t=$t>>8,ft[vt+1]=$t,$t=$t>>8,ft[vt]=$t,vt+8}l.prototype.writeBigUInt64LE=zt(function(ft){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Ft(this,ft,ut,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=zt(function(ft){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Et(this,ft,ut,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(ft,ut,vt,St){if(ft=+ft,ut=ut>>>0,!St){var Ot=Math.pow(2,8*vt-1);xt(this,ft,ut,vt,Ot-1,-Ot)}var Xt=0,$t=1,de=0;for(this[ut]=ft&255;++Xt<vt&&($t*=256);)ft<0&&de===0&&this[ut+Xt-1]!==0&&(de=1),this[ut+Xt]=(ft/$t>>0)-de&255;return ut+vt},l.prototype.writeIntBE=function(ft,ut,vt,St){if(ft=+ft,ut=ut>>>0,!St){var Ot=Math.pow(2,8*vt-1);xt(this,ft,ut,vt,Ot-1,-Ot)}var Xt=vt-1,$t=1,de=0;for(this[ut+Xt]=ft&255;--Xt>=0&&($t*=256);)ft<0&&de===0&&this[ut+Xt+1]!==0&&(de=1),this[ut+Xt]=(ft/$t>>0)-de&255;return ut+vt},l.prototype.writeInt8=function(ft,ut,vt){return ft=+ft,ut=ut>>>0,vt||xt(this,ft,ut,1,127,-128),ft<0&&(ft=255+ft+1),this[ut]=ft&255,ut+1},l.prototype.writeInt16LE=function(ft,ut,vt){return ft=+ft,ut=ut>>>0,vt||xt(this,ft,ut,2,32767,-32768),this[ut]=ft&255,this[ut+1]=ft>>>8,ut+2},l.prototype.writeInt16BE=function(ft,ut,vt){return ft=+ft,ut=ut>>>0,vt||xt(this,ft,ut,2,32767,-32768),this[ut]=ft>>>8,this[ut+1]=ft&255,ut+2},l.prototype.writeInt32LE=function(ft,ut,vt){return ft=+ft,ut=ut>>>0,vt||xt(this,ft,ut,4,2147483647,-2147483648),this[ut]=ft&255,this[ut+1]=ft>>>8,this[ut+2]=ft>>>16,this[ut+3]=ft>>>24,ut+4},l.prototype.writeInt32BE=function(ft,ut,vt){return ft=+ft,ut=ut>>>0,vt||xt(this,ft,ut,4,2147483647,-2147483648),ft<0&&(ft=4294967295+ft+1),this[ut]=ft>>>24,this[ut+1]=ft>>>16,this[ut+2]=ft>>>8,this[ut+3]=ft&255,ut+4},l.prototype.writeBigInt64LE=zt(function(ft){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Ft(this,ft,ut,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=zt(function(ft){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Et(this,ft,ut,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function mt(ft,ut,vt,St,Ot,Xt){if(vt+St>ft.length)throw new RangeError("Index out of range");if(vt<0)throw new RangeError("Index out of range")}function gt(ft,ut,vt,St,Ot){return ut=+ut,vt=vt>>>0,Ot||mt(ft,ut,vt,4),T.write(ft,ut,vt,St,23,4),vt+4}l.prototype.writeFloatLE=function(ft,ut,vt){return gt(this,ft,ut,!0,vt)},l.prototype.writeFloatBE=function(ft,ut,vt){return gt(this,ft,ut,!1,vt)};function wt(ft,ut,vt,St,Ot){return ut=+ut,vt=vt>>>0,Ot||mt(ft,ut,vt,8),T.write(ft,ut,vt,St,52,8),vt+8}l.prototype.writeDoubleLE=function(ft,ut,vt){return wt(this,ft,ut,!0,vt)},l.prototype.writeDoubleBE=function(ft,ut,vt){return wt(this,ft,ut,!1,vt)},l.prototype.copy=function(ft,ut,vt,St){if(!l.isBuffer(ft))throw new TypeError("argument should be a Buffer");if(vt||(vt=0),!St&&St!==0&&(St=this.length),ut>=ft.length&&(ut=ft.length),ut||(ut=0),St>0&&St<vt&&(St=vt),St===vt||ft.length===0||this.length===0)return 0;if(ut<0)throw new RangeError("targetStart out of bounds");if(vt<0||vt>=this.length)throw new RangeError("Index out of range");if(St<0)throw new RangeError("sourceEnd out of bounds");St>this.length&&(St=this.length),ft.length-ut<St-vt&&(St=ft.length-ut+vt);var Ot=St-vt;return this===ft&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ut,vt,St):Uint8Array.prototype.set.call(ft,this.subarray(vt,St),ut),Ot},l.prototype.fill=function(ft,ut,vt,St){if(typeof ft=="string"){if(typeof ut=="string"?(St=ut,ut=0,vt=this.length):typeof vt=="string"&&(St=vt,vt=this.length),St!==void 0&&typeof St!="string")throw new TypeError("encoding must be a string");if(typeof St=="string"&&!l.isEncoding(St))throw new TypeError("Unknown encoding: "+St);if(ft.length===1){var Ot=ft.charCodeAt(0);(St==="utf8"&&Ot<128||St==="latin1")&&(ft=Ot)}}else typeof ft=="number"?ft=ft&255:typeof ft=="boolean"&&(ft=Number(ft));if(ut<0||this.length<ut||this.length<vt)throw new RangeError("Out of range index");if(vt<=ut)return this;ut=ut>>>0,vt=vt===void 0?this.length:vt>>>0,ft||(ft=0);var Xt;if(typeof ft=="number")for(Xt=ut;Xt<vt;++Xt)this[Xt]=ft;else{var $t=l.isBuffer(ft)?ft:l.from(ft,St),de=$t.length;if(de===0)throw new TypeError('The value "'+ft+'" is invalid for argument "value"');for(Xt=0;Xt<vt-ut;++Xt)this[Xt+ut]=$t[Xt%de]}return this};var Pt={};function Bt(ft,ut,vt){Pt[ft]=function(St){a(Xt,St);var Ot=h(Xt);function Xt(){var $t;return r(this,Xt),$t=Ot.call(this),Object.defineProperty(p($t),"message",{value:ut.apply(p($t),arguments),writable:!0,configurable:!0}),$t.name="".concat($t.name," [").concat(ft,"]"),$t.stack,delete $t.name,$t}return n(Xt,[{key:"code",get:function(){return ft},set:function($t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:$t,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(ft,"]: ").concat(this.message)}}]),Xt}(vt)}Bt("ERR_BUFFER_OUT_OF_BOUNDS",function(ft){return ft?"".concat(ft," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),Bt("ERR_INVALID_ARG_TYPE",function(ft,ut){return'The "'.concat(ft,'" argument must be of type number. Received type ').concat(u(ut))},TypeError),Bt("ERR_OUT_OF_RANGE",function(ft,ut,vt){var St='The value of "'.concat(ft,'" is out of range.'),Ot=vt;return Number.isInteger(vt)&&Math.abs(vt)>Math.pow(2,32)?Ot=kt(String(vt)):typeof vt=="bigint"&&(Ot=String(vt),(vt>Math.pow(BigInt(2),BigInt(32))||vt<-Math.pow(BigInt(2),BigInt(32)))&&(Ot=kt(Ot)),Ot+="n"),St+=" It must be ".concat(ut,". Received ").concat(Ot),St},RangeError);function kt(ft){for(var ut="",vt=ft.length,St=ft[0]==="-"?1:0;vt>=St+4;vt-=3)ut="_".concat(ft.slice(vt-3,vt)).concat(ut);return"".concat(ft.slice(0,vt)).concat(ut)}function jt(ft,ut,vt){Vt(ut,"offset"),(ft[ut]===void 0||ft[ut+vt]===void 0)&&ee(ut,ft.length-(vt+1))}function Ht(ft,ut,vt,St,Ot,Xt){if(ft>vt||ft<ut){var $t=typeof ut=="bigint"?"n":"",de;throw Xt>3?ut===0||ut===BigInt(0)?de=">= 0".concat($t," and < 2").concat($t," ** ").concat((Xt+1)*8).concat($t):de=">= -(2".concat($t," ** ").concat((Xt+1)*8-1).concat($t,") and < 2 ** ")+"".concat((Xt+1)*8-1).concat($t):de=">= ".concat(ut).concat($t," and <= ").concat(vt).concat($t),new Pt.ERR_OUT_OF_RANGE("value",de,ft)}jt(St,Ot,Xt)}function Vt(ft,ut){if(typeof ft!="number")throw new Pt.ERR_INVALID_ARG_TYPE(ut,"number",ft)}function ee(ft,ut,vt){throw Math.floor(ft)!==ft?(Vt(ft,vt),new Pt.ERR_OUT_OF_RANGE(vt||"offset","an integer",ft)):ut<0?new Pt.ERR_BUFFER_OUT_OF_BOUNDS:new Pt.ERR_OUT_OF_RANGE(vt||"offset",">= ".concat(vt?1:0," and <= ").concat(ut),ft)}var te=/[^+/0-9A-Za-z-_]/g;function ae(ft){if(ft=ft.split("=")[0],ft=ft.trim().replace(te,""),ft.length<2)return"";for(;ft.length%4!==0;)ft=ft+"=";return ft}function le(ft,ut){ut=ut||1/0;for(var vt,St=ft.length,Ot=null,Xt=[],$t=0;$t<St;++$t){if(vt=ft.charCodeAt($t),vt>55295&&vt<57344){if(!Ot){if(vt>56319){(ut-=3)>-1&&Xt.push(239,191,189);continue}else if($t+1===St){(ut-=3)>-1&&Xt.push(239,191,189);continue}Ot=vt;continue}if(vt<56320){(ut-=3)>-1&&Xt.push(239,191,189),Ot=vt;continue}vt=(Ot-55296<<10|vt-56320)+65536}else Ot&&(ut-=3)>-1&&Xt.push(239,191,189);if(Ot=null,vt<128){if((ut-=1)<0)break;Xt.push(vt)}else if(vt<2048){if((ut-=2)<0)break;Xt.push(vt>>6|192,vt&63|128)}else if(vt<65536){if((ut-=3)<0)break;Xt.push(vt>>12|224,vt>>6&63|128,vt&63|128)}else if(vt<1114112){if((ut-=4)<0)break;Xt.push(vt>>18|240,vt>>12&63|128,vt>>6&63|128,vt&63|128)}else throw new Error("Invalid code point")}return Xt}function ce(ft){for(var ut=[],vt=0;vt<ft.length;++vt)ut.push(ft.charCodeAt(vt)&255);return ut}function pe(ft,ut){for(var vt,St,Ot,Xt=[],$t=0;$t<ft.length&&!((ut-=2)<0);++$t)vt=ft.charCodeAt($t),St=vt>>8,Ot=vt%256,Xt.push(Ot),Xt.push(St);return Xt}function we(ft){return c.toByteArray(ae(ft))}function ve(ft,ut,vt,St){var Ot;for(Ot=0;Ot<St&&!(Ot+vt>=ut.length||Ot>=ft.length);++Ot)ut[Ot+vt]=ft[Ot];return Ot}function Mt(ft,ut){return ft instanceof ut||ft!=null&&ft.constructor!=null&&ft.constructor.name!=null&&ft.constructor.name===ut.name}function It(ft){return ft!==ft}var Rt=function(){for(var ft="0123456789abcdef",ut=new Array(256),vt=0;vt<16;++vt)for(var St=vt*16,Ot=0;Ot<16;++Ot)ut[St+Ot]=ft[vt]+ft[Ot];return ut}();function zt(ft){return typeof BigInt>"u"?Tt:ft}function Tt(){throw new Error("BigInt not supported")}},2321:function(g){g.exports=f,g.exports.isMobile=f,g.exports.default=f;var v=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,r=/android|ipad|playbook|silk/i;function f(n){n||(n={});var a=n.ua;if(!a&&typeof navigator<"u"&&(a=navigator.userAgent),a&&a.headers&&typeof a.headers["user-agent"]=="string"&&(a=a.headers["user-agent"]),typeof a!="string")return!1;var o=v.test(a)&&!e.test(a)||!!n.tablet&&r.test(a);return!o&&n.tablet&&n.featureDetect&&navigator&&navigator.maxTouchPoints>1&&a.indexOf("Macintosh")!==-1&&a.indexOf("Safari")!==-1&&(o=!0),o}},3910:function(g,v){v.byteLength=y,v.toByteArray=x,v.fromByteArray=c;for(var e=[],r=[],f=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,o=n.length;a<o;++a)e[a]=n[a],r[n.charCodeAt(a)]=a;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function h(T){var k=T.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=T.indexOf("=");_===-1&&(_=k);var b=_===k?0:4-_%4;return[_,b]}function y(T){var k=h(T),_=k[0],b=k[1];return(_+b)*3/4-b}function p(T,k,_){return(k+_)*3/4-_}function x(T){var k,_=h(T),b=_[0],P=_[1],l=new f(p(T,b,P)),d=0,L=P>0?b-4:b,w;for(w=0;w<L;w+=4)k=r[T.charCodeAt(w)]<<18|r[T.charCodeAt(w+1)]<<12|r[T.charCodeAt(w+2)]<<6|r[T.charCodeAt(w+3)],l[d++]=k>>16&255,l[d++]=k>>8&255,l[d++]=k&255;return P===2&&(k=r[T.charCodeAt(w)]<<2|r[T.charCodeAt(w+1)]>>4,l[d++]=k&255),P===1&&(k=r[T.charCodeAt(w)]<<10|r[T.charCodeAt(w+1)]<<4|r[T.charCodeAt(w+2)]>>2,l[d++]=k>>8&255,l[d++]=k&255),l}function s(T){return e[T>>18&63]+e[T>>12&63]+e[T>>6&63]+e[T&63]}function u(T,k,_){for(var b,P=[],l=k;l<_;l+=3)b=(T[l]<<16&16711680)+(T[l+1]<<8&65280)+(T[l+2]&255),P.push(s(b));return P.join("")}function c(T){for(var k,_=T.length,b=_%3,P=[],l=16383,d=0,L=_-b;d<L;d+=l)P.push(u(T,d,d+l>L?L:d+l));return b===1?(k=T[_-1],P.push(e[k>>2]+e[k<<4&63]+"==")):b===2&&(k=(T[_-2]<<8)+T[_-1],P.push(e[k>>10]+e[k>>4&63]+e[k<<2&63]+"=")),P.join("")}},3187:function(g,v){v.read=function(e,r,f,n,a){var o,h,y=a*8-n-1,p=(1<<y)-1,x=p>>1,s=-7,u=f?a-1:0,c=f?-1:1,T=e[r+u];for(u+=c,o=T&(1<<-s)-1,T>>=-s,s+=y;s>0;o=o*256+e[r+u],u+=c,s-=8);for(h=o&(1<<-s)-1,o>>=-s,s+=n;s>0;h=h*256+e[r+u],u+=c,s-=8);if(o===0)o=1-x;else{if(o===p)return h?NaN:(T?-1:1)*(1/0);h=h+Math.pow(2,n),o=o-x}return(T?-1:1)*h*Math.pow(2,o-n)},v.write=function(e,r,f,n,a,o){var h,y,p,x=o*8-a-1,s=(1<<x)-1,u=s>>1,c=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=n?0:o-1,k=n?1:-1,_=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(y=isNaN(r)?1:0,h=s):(h=Math.floor(Math.log(r)/Math.LN2),r*(p=Math.pow(2,-h))<1&&(h--,p*=2),h+u>=1?r+=c/p:r+=c*Math.pow(2,1-u),r*p>=2&&(h++,p/=2),h+u>=s?(y=0,h=s):h+u>=1?(y=(r*p-1)*Math.pow(2,a),h=h+u):(y=r*Math.pow(2,u-1)*Math.pow(2,a),h=0));a>=8;e[f+T]=y&255,T+=k,y/=256,a-=8);for(h=h<<a|y,x+=a;x>0;e[f+T]=h&255,T+=k,h/=256,x-=8);e[f+T-k]|=_*128}},1152:function(g,v,e){g.exports=h;var r=e(3440),f=e(7774),n=e(9298);function a(y,p){this._controllerNames=Object.keys(y),this._controllerList=this._controllerNames.map(function(x){return y[x]}),this._mode=p,this._active=y[p],this._active||(this._mode="turntable",this._active=y.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var o=a.prototype;o.flush=function(y){for(var p=this._controllerList,x=0;x<p.length;++x)p[x].flush(y)},o.idle=function(y){for(var p=this._controllerList,x=0;x<p.length;++x)p[x].idle(y)},o.lookAt=function(y,p,x,s){for(var u=this._controllerList,c=0;c<u.length;++c)u[c].lookAt(y,p,x,s)},o.rotate=function(y,p,x,s){for(var u=this._controllerList,c=0;c<u.length;++c)u[c].rotate(y,p,x,s)},o.pan=function(y,p,x,s){for(var u=this._controllerList,c=0;c<u.length;++c)u[c].pan(y,p,x,s)},o.translate=function(y,p,x,s){for(var u=this._controllerList,c=0;c<u.length;++c)u[c].translate(y,p,x,s)},o.setMatrix=function(y,p){for(var x=this._controllerList,s=0;s<x.length;++s)x[s].setMatrix(y,p)},o.setDistanceLimits=function(y,p){for(var x=this._controllerList,s=0;s<x.length;++s)x[s].setDistanceLimits(y,p)},o.setDistance=function(y,p){for(var x=this._controllerList,s=0;s<x.length;++s)x[s].setDistance(y,p)},o.recalcMatrix=function(y){this._active.recalcMatrix(y)},o.getDistance=function(y){return this._active.getDistance(y)},o.getDistanceLimits=function(y){return this._active.getDistanceLimits(y)},o.lastT=function(){return this._active.lastT()},o.setMode=function(y){if(y!==this._mode){var p=this._controllerNames.indexOf(y);if(!(p<0)){var x=this._active,s=this._controllerList[p],u=Math.max(x.lastT(),s.lastT());x.recalcMatrix(u),s.setMatrix(u,x.computedMatrix),this._active=s,this._mode=y,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},o.getMode=function(){return this._mode};function h(y){y=y||{};var p=y.eye||[0,0,1],x=y.center||[0,0,0],s=y.up||[0,1,0],u=y.distanceLimits||[0,1/0],c=y.mode||"turntable",T=r(),k=f(),_=n();return T.setDistanceLimits(u[0],u[1]),T.lookAt(0,p,x,s),k.setDistanceLimits(u[0],u[1]),k.lookAt(0,p,x,s),_.setDistanceLimits(u[0],u[1]),_.lookAt(0,p,x,s),new a({turntable:T,orbit:k,matrix:_},c)}},8126:function(g,v,e){var r=typeof WeakMap>"u"?e(5346):WeakMap,f=e(5827),n=e(2944),a=new r;function o(h){var y=a.get(h),p=y&&(y._triangleBuffer.handle||y._triangleBuffer.buffer);if(!p||!h.isBuffer(p)){var x=f(h,new Float32Array([-1,-1,-1,4,4,-1]));y=n(h,[{buffer:x,type:h.FLOAT,size:2}]),y._triangleBuffer=x,a.set(h,y)}y.bind(),h.drawArrays(h.TRIANGLES,0,3),y.unbind()}g.exports=o},8008:function(g,v,e){var r=e(4930);g.exports=f;function f(n,a,o){a=typeof a=="number"?a:1,o=o||": ";var h=n.split(/\r?\n/),y=String(h.length+a-1).length;return h.map(function(p,x){var s=x+a,u=String(s).length,c=r(s,y-u);return c+o+p}).join(`
`)}},2153:function(g,v,e){g.exports=n;var r=e(417);function f(a,o){for(var h=new Array(o+1),y=0;y<a.length;++y)h[y]=a[y];for(var y=0;y<=a.length;++y){for(var p=a.length;p<=o;++p){for(var x=new Array(o),s=0;s<o;++s)x[s]=Math.pow(p+1-y,s);h[p]=x}var u=r.apply(void 0,h);if(u)return!0}return!1}function n(a){var o=a.length;if(o===0)return[];if(o===1)return[0];for(var h=a[0].length,y=[a[0]],p=[0],x=1;x<o;++x){if(y.push(a[x]),!f(y,h)){y.pop();continue}if(p.push(x),p.length===h+1)return p}return p}},4653:function(g,v,e){g.exports=n;var r=e(4419),f=e(1778);function n(a,o){return r(o).filter(function(h){for(var y=new Array(h.length),p=0;p<h.length;++p)y[p]=o[h[p]];return f(y)*a<1})}},2350:function(g,v,e){g.exports=n;var r=e(4653),f=e(8691);function n(a,o){return f(r(a,o))}},7896:function(g){g.exports=function(v){return atob(v)}},957:function(g,v,e){g.exports=n;var r=e(6606);function f(a){for(var o=0,h=0;h<a.length;++h)o+=a[h];return o}function n(a,o){for(var h=o.length,y=new Array(h+1),p=0;p<h;++p){for(var x=new Array(h+1),s=0;s<=h;++s)x[s]=a[s][p];y[p]=x}y[h]=new Array(h+1);for(var p=0;p<=h;++p)y[h][p]=1;for(var u=new Array(h+1),p=0;p<h;++p)u[p]=o[p];u[h]=1;var c=r(y,u),T=f(c[h+1]);T===0&&(T=1);for(var k=new Array(h+1),p=0;p<=h;++p)k[p]=f(c[p])/T;return k}},1539:function(g,v,e){var r=e(8524);g.exports=f;function f(n,a){return r(n[0].mul(a[1]).add(a[0].mul(n[1])),n[1].mul(a[1]))}},8846:function(g){g.exports=v;function v(e,r){return e[0].mul(r[1]).cmp(r[0].mul(e[1]))}},9189:function(g,v,e){var r=e(8524);g.exports=f;function f(n,a){return r(n[0].mul(a[1]),n[1].mul(a[0]))}},5125:function(g,v,e){var r=e(234),f=e(3218),n=e(5514),a=e(2813),o=e(8524),h=e(9189);g.exports=y;function y(p,x){if(r(p))return x?h(p,y(x)):[p[0].clone(),p[1].clone()];var s=0,u,c;if(f(p))u=p.clone();else if(typeof p=="string")u=a(p);else{if(p===0)return[n(0),n(1)];if(p===Math.floor(p))u=n(p);else{for(;p!==Math.floor(p);)p=p*Math.pow(2,256),s-=256;u=n(p)}}if(r(x))u.mul(x[1]),c=x[0].clone();else if(f(x))c=x.clone();else if(typeof x=="string")c=a(x);else if(!x)c=n(1);else if(x===Math.floor(x))c=n(x);else{for(;x!==Math.floor(x);)x=x*Math.pow(2,256),s+=256;c=n(x)}return s>0?u=u.ushln(s):s<0&&(c=c.ushln(-s)),o(u,c)}},234:function(g,v,e){var r=e(3218);g.exports=f;function f(n){return Array.isArray(n)&&n.length===2&&r(n[0])&&r(n[1])}},4275:function(g,v,e){var r=e(1928);g.exports=f;function f(n){return n.cmp(new r(0))}},9958:function(g,v,e){var r=e(4275);g.exports=f;function f(n){var a=n.length,o=n.words,h=0;if(a===1)h=o[0];else if(a===2)h=o[0]+o[1]*67108864;else for(var y=0;y<a;y++){var p=o[y];h+=p*Math.pow(67108864,y)}return r(n)*h}},1112:function(g,v,e){var r=e(8362),f=e(2288).countTrailingZeros;g.exports=n;function n(a){var o=f(r.lo(a));if(o<32)return o;var h=f(r.hi(a));return h>20?52:h+32}},3218:function(g,v,e){e(1928),g.exports=r;function r(f){return f&&typeof f=="object"&&!!f.words}},5514:function(g,v,e){var r=e(1928),f=e(8362);g.exports=n;function n(a){var o=f.exponent(a);return o<52?new r(a):new r(a*Math.pow(2,52-o)).ushln(o-52)}},8524:function(g,v,e){var r=e(5514),f=e(4275);g.exports=n;function n(a,o){var h=f(a),y=f(o);if(h===0)return[r(0),r(1)];if(y===0)return[r(0),r(0)];y<0&&(a=a.neg(),o=o.neg());var p=a.gcd(o);return p.cmpn(1)?[a.div(p),o.div(p)]:[a,o]}},2813:function(g,v,e){var r=e(1928);g.exports=f;function f(n){return new r(n)}},3962:function(g,v,e){var r=e(8524);g.exports=f;function f(n,a){return r(n[0].mul(a[0]),n[1].mul(a[1]))}},4951:function(g,v,e){var r=e(4275);g.exports=f;function f(n){return r(n[0])*r(n[1])}},4354:function(g,v,e){var r=e(8524);g.exports=f;function f(n,a){return r(n[0].mul(a[1]).sub(n[1].mul(a[0])),n[1].mul(a[1]))}},7999:function(g,v,e){var r=e(9958),f=e(1112);g.exports=n;function n(a){var o=a[0],h=a[1];if(o.cmpn(0)===0)return 0;var y=o.abs().divmod(h.abs()),p=y.div,x=r(p),s=y.mod,u=o.negative!==h.negative?-1:1;if(s.cmpn(0)===0)return u*x;if(x){var c=f(x)+4,T=r(s.ushln(c).divRound(h));return u*(x+T*Math.pow(2,-c))}else{var k=h.bitLength()-s.bitLength()+53,T=r(s.ushln(k).divRound(h));return k<1023?u*T*Math.pow(2,-k):(T*=Math.pow(2,-1023),u*T*Math.pow(2,1023-k))}}},5070:function(g){function v(o,h,y,p,x){for(var s=x+1;p<=x;){var u=p+x>>>1,c=o[u],T=y!==void 0?y(c,h):c-h;T>=0?(s=u,x=u-1):p=u+1}return s}function e(o,h,y,p,x){for(var s=x+1;p<=x;){var u=p+x>>>1,c=o[u],T=y!==void 0?y(c,h):c-h;T>0?(s=u,x=u-1):p=u+1}return s}function r(o,h,y,p,x){for(var s=p-1;p<=x;){var u=p+x>>>1,c=o[u],T=y!==void 0?y(c,h):c-h;T<0?(s=u,p=u+1):x=u-1}return s}function f(o,h,y,p,x){for(var s=p-1;p<=x;){var u=p+x>>>1,c=o[u],T=y!==void 0?y(c,h):c-h;T<=0?(s=u,p=u+1):x=u-1}return s}function n(o,h,y,p,x){for(;p<=x;){var s=p+x>>>1,u=o[s],c=y!==void 0?y(u,h):u-h;if(c===0)return s;c<=0?p=s+1:x=s-1}return-1}function a(o,h,y,p,x,s){return typeof y=="function"?s(o,h,y,p===void 0?0:p|0,x===void 0?o.length-1:x|0):s(o,h,void 0,y===void 0?0:y|0,p===void 0?o.length-1:p|0)}g.exports={ge:function(o,h,y,p,x){return a(o,h,y,p,x,v)},gt:function(o,h,y,p,x){return a(o,h,y,p,x,e)},lt:function(o,h,y,p,x){return a(o,h,y,p,x,r)},le:function(o,h,y,p,x){return a(o,h,y,p,x,f)},eq:function(o,h,y,p,x){return a(o,h,y,p,x,n)}}},2288:function(g,v){"use restrict";var e=32;v.INT_BITS=e,v.INT_MAX=2147483647,v.INT_MIN=-1<<e-1,v.sign=function(n){return(n>0)-(n<0)},v.abs=function(n){var a=n>>e-1;return(n^a)-a},v.min=function(n,a){return a^(n^a)&-(n<a)},v.max=function(n,a){return n^(n^a)&-(n<a)},v.isPow2=function(n){return!(n&n-1)&&!!n},v.log2=function(n){var a,o;return a=(n>65535)<<4,n>>>=a,o=(n>255)<<3,n>>>=o,a|=o,o=(n>15)<<2,n>>>=o,a|=o,o=(n>3)<<1,n>>>=o,a|=o,a|n>>1},v.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},v.popCount=function(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),(n+(n>>>4)&252645135)*16843009>>>24};function r(n){var a=32;return n&=-n,n&&a--,n&65535&&(a-=16),n&16711935&&(a-=8),n&252645135&&(a-=4),n&858993459&&(a-=2),n&1431655765&&(a-=1),a}v.countTrailingZeros=r,v.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1},v.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n-(n>>>1)},v.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,n&=15,27030>>>n&1};var f=new Array(256);(function(n){for(var a=0;a<256;++a){var o=a,h=a,y=7;for(o>>>=1;o;o>>>=1)h<<=1,h|=o&1,--y;n[a]=h<<y&255}})(f),v.reverse=function(n){return f[n&255]<<24|f[n>>>8&255]<<16|f[n>>>16&255]<<8|f[n>>>24&255]},v.interleave2=function(n,a){return n&=65535,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,a&=65535,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,n|a<<1},v.deinterleave2=function(n,a){return n=n>>>a&1431655765,n=(n|n>>>1)&858993459,n=(n|n>>>2)&252645135,n=(n|n>>>4)&16711935,n=(n|n>>>16)&65535,n<<16>>16},v.interleave3=function(n,a,o){return n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,a&=1023,a=(a|a<<16)&4278190335,a=(a|a<<8)&251719695,a=(a|a<<4)&3272356035,a=(a|a<<2)&1227133513,n|=a<<1,o&=1023,o=(o|o<<16)&4278190335,o=(o|o<<8)&251719695,o=(o|o<<4)&3272356035,o=(o|o<<2)&1227133513,n|o<<2},v.deinterleave3=function(n,a){return n=n>>>a&1227133513,n=(n|n>>>2)&3272356035,n=(n|n>>>4)&251719695,n=(n|n>>>8)&4278190335,n=(n|n>>>16)&1023,n<<22>>22},v.nextCombination=function(n){var a=n|n-1;return a+1|(~a&-~a)-1>>>r(n)+1}},1928:function(g,v,e){g=e.nmd(g),function(r,f){function n(C,F){if(!C)throw new Error(F||"Assertion failed")}function a(C,F){C.super_=F;var N=function(){};N.prototype=F.prototype,C.prototype=new N,C.prototype.constructor=C}function o(C,F,N){if(o.isBN(C))return C;this.negative=0,this.words=null,this.length=0,this.red=null,C!==null&&((F==="le"||F==="be")&&(N=F,F=10),this._init(C||0,F||10,N||"be"))}typeof r=="object"?r.exports=o:f.BN=o,o.BN=o,o.wordSize=26;var h;try{typeof window<"u"&&typeof window.Buffer<"u"?h=window.Buffer:h=e(6601).Buffer}catch{}o.isBN=function(C){return C instanceof o?!0:C!==null&&typeof C=="object"&&C.constructor.wordSize===o.wordSize&&Array.isArray(C.words)},o.max=function(C,F){return C.cmp(F)>0?C:F},o.min=function(C,F){return C.cmp(F)<0?C:F},o.prototype._init=function(C,F,N){if(typeof C=="number")return this._initNumber(C,F,N);if(typeof C=="object")return this._initArray(C,F,N);F==="hex"&&(F=16),n(F===(F|0)&&F>=2&&F<=36),C=C.toString().replace(/\s+/g,"");var V=0;C[0]==="-"&&(V++,this.negative=1),V<C.length&&(F===16?this._parseHex(C,V,N):(this._parseBase(C,F,V),N==="le"&&this._initArray(this.toArray(),F,N)))},o.prototype._initNumber=function(C,F,N){C<0&&(this.negative=1,C=-C),C<67108864?(this.words=[C&67108863],this.length=1):C<4503599627370496?(this.words=[C&67108863,C/67108864&67108863],this.length=2):(n(C<9007199254740992),this.words=[C&67108863,C/67108864&67108863,1],this.length=3),N==="le"&&this._initArray(this.toArray(),F,N)},o.prototype._initArray=function(C,F,N){if(n(typeof C.length=="number"),C.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(C.length/3),this.words=new Array(this.length);for(var V=0;V<this.length;V++)this.words[V]=0;var K,Q,at=0;if(N==="be")for(V=C.length-1,K=0;V>=0;V-=3)Q=C[V]|C[V-1]<<8|C[V-2]<<16,this.words[K]|=Q<<at&67108863,this.words[K+1]=Q>>>26-at&67108863,at+=24,at>=26&&(at-=26,K++);else if(N==="le")for(V=0,K=0;V<C.length;V+=3)Q=C[V]|C[V+1]<<8|C[V+2]<<16,this.words[K]|=Q<<at&67108863,this.words[K+1]=Q>>>26-at&67108863,at+=24,at>=26&&(at-=26,K++);return this.strip()};function y(C,F){var N=C.charCodeAt(F);return N>=65&&N<=70?N-55:N>=97&&N<=102?N-87:N-48&15}function p(C,F,N){var V=y(C,N);return N-1>=F&&(V|=y(C,N-1)<<4),V}o.prototype._parseHex=function(C,F,N){this.length=Math.ceil((C.length-F)/6),this.words=new Array(this.length);for(var V=0;V<this.length;V++)this.words[V]=0;var K=0,Q=0,at;if(N==="be")for(V=C.length-1;V>=F;V-=2)at=p(C,F,V)<<K,this.words[Q]|=at&67108863,K>=18?(K-=18,Q+=1,this.words[Q]|=at>>>26):K+=8;else{var it=C.length-F;for(V=it%2===0?F+1:F;V<C.length;V+=2)at=p(C,F,V)<<K,this.words[Q]|=at&67108863,K>=18?(K-=18,Q+=1,this.words[Q]|=at>>>26):K+=8}this.strip()};function x(C,F,N,V){for(var K=0,Q=Math.min(C.length,N),at=F;at<Q;at++){var it=C.charCodeAt(at)-48;K*=V,it>=49?K+=it-49+10:it>=17?K+=it-17+10:K+=it}return K}o.prototype._parseBase=function(C,F,N){this.words=[0],this.length=1;for(var V=0,K=1;K<=67108863;K*=F)V++;V--,K=K/F|0;for(var Q=C.length-N,at=Q%V,it=Math.min(Q,Q-at)+N,q=0,W=N;W<it;W+=V)q=x(C,W,W+V,F),this.imuln(K),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q);if(at!==0){var Z=1;for(q=x(C,W,C.length,F),W=0;W<at;W++)Z*=F;this.imuln(Z),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q)}this.strip()},o.prototype.copy=function(C){C.words=new Array(this.length);for(var F=0;F<this.length;F++)C.words[F]=this.words[F];C.length=this.length,C.negative=this.negative,C.red=this.red},o.prototype.clone=function(){var C=new o(null);return this.copy(C),C},o.prototype._expand=function(C){for(;this.length<C;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var s=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(C,F){C=C||10,F=F|0||1;var N;if(C===16||C==="hex"){N="";for(var V=0,K=0,Q=0;Q<this.length;Q++){var at=this.words[Q],it=((at<<V|K)&16777215).toString(16);K=at>>>24-V&16777215,K!==0||Q!==this.length-1?N=s[6-it.length]+it+N:N=it+N,V+=2,V>=26&&(V-=26,Q--)}for(K!==0&&(N=K.toString(16)+N);N.length%F!==0;)N="0"+N;return this.negative!==0&&(N="-"+N),N}if(C===(C|0)&&C>=2&&C<=36){var q=u[C],W=c[C];N="";var Z=this.clone();for(Z.negative=0;!Z.isZero();){var G=Z.modn(W).toString(C);Z=Z.idivn(W),Z.isZero()?N=G+N:N=s[q-G.length]+G+N}for(this.isZero()&&(N="0"+N);N.length%F!==0;)N="0"+N;return this.negative!==0&&(N="-"+N),N}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var C=this.words[0];return this.length===2?C+=this.words[1]*67108864:this.length===3&&this.words[2]===1?C+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-C:C},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(C,F){return n(typeof h<"u"),this.toArrayLike(h,C,F)},o.prototype.toArray=function(C,F){return this.toArrayLike(Array,C,F)},o.prototype.toArrayLike=function(C,F,N){var V=this.byteLength(),K=N||Math.max(1,V);n(V<=K,"byte array longer than desired length"),n(K>0,"Requested array length <= 0"),this.strip();var Q=F==="le",at=new C(K),it,q,W=this.clone();if(Q){for(q=0;!W.isZero();q++)it=W.andln(255),W.iushrn(8),at[q]=it;for(;q<K;q++)at[q]=0}else{for(q=0;q<K-V;q++)at[q]=0;for(q=0;!W.isZero();q++)it=W.andln(255),W.iushrn(8),at[K-q-1]=it}return at},Math.clz32?o.prototype._countBits=function(C){return 32-Math.clz32(C)}:o.prototype._countBits=function(C){var F=C,N=0;return F>=4096&&(N+=13,F>>>=13),F>=64&&(N+=7,F>>>=7),F>=8&&(N+=4,F>>>=4),F>=2&&(N+=2,F>>>=2),N+F},o.prototype._zeroBits=function(C){if(C===0)return 26;var F=C,N=0;return F&8191||(N+=13,F>>>=13),F&127||(N+=7,F>>>=7),F&15||(N+=4,F>>>=4),F&3||(N+=2,F>>>=2),F&1||N++,N},o.prototype.bitLength=function(){var C=this.words[this.length-1],F=this._countBits(C);return(this.length-1)*26+F};function T(C){for(var F=new Array(C.bitLength()),N=0;N<F.length;N++){var V=N/26|0,K=N%26;F[N]=(C.words[V]&1<<K)>>>K}return F}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var C=0,F=0;F<this.length;F++){var N=this._zeroBits(this.words[F]);if(C+=N,N!==26)break}return C},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(C){return this.negative!==0?this.abs().inotn(C).iaddn(1):this.clone()},o.prototype.fromTwos=function(C){return this.testn(C-1)?this.notn(C).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(C){for(;this.length<C.length;)this.words[this.length++]=0;for(var F=0;F<C.length;F++)this.words[F]=this.words[F]|C.words[F];return this.strip()},o.prototype.ior=function(C){return n((this.negative|C.negative)===0),this.iuor(C)},o.prototype.or=function(C){return this.length>C.length?this.clone().ior(C):C.clone().ior(this)},o.prototype.uor=function(C){return this.length>C.length?this.clone().iuor(C):C.clone().iuor(this)},o.prototype.iuand=function(C){var F;this.length>C.length?F=C:F=this;for(var N=0;N<F.length;N++)this.words[N]=this.words[N]&C.words[N];return this.length=F.length,this.strip()},o.prototype.iand=function(C){return n((this.negative|C.negative)===0),this.iuand(C)},o.prototype.and=function(C){return this.length>C.length?this.clone().iand(C):C.clone().iand(this)},o.prototype.uand=function(C){return this.length>C.length?this.clone().iuand(C):C.clone().iuand(this)},o.prototype.iuxor=function(C){var F,N;this.length>C.length?(F=this,N=C):(F=C,N=this);for(var V=0;V<N.length;V++)this.words[V]=F.words[V]^N.words[V];if(this!==F)for(;V<F.length;V++)this.words[V]=F.words[V];return this.length=F.length,this.strip()},o.prototype.ixor=function(C){return n((this.negative|C.negative)===0),this.iuxor(C)},o.prototype.xor=function(C){return this.length>C.length?this.clone().ixor(C):C.clone().ixor(this)},o.prototype.uxor=function(C){return this.length>C.length?this.clone().iuxor(C):C.clone().iuxor(this)},o.prototype.inotn=function(C){n(typeof C=="number"&&C>=0);var F=Math.ceil(C/26)|0,N=C%26;this._expand(F),N>0&&F--;for(var V=0;V<F;V++)this.words[V]=~this.words[V]&67108863;return N>0&&(this.words[V]=~this.words[V]&67108863>>26-N),this.strip()},o.prototype.notn=function(C){return this.clone().inotn(C)},o.prototype.setn=function(C,F){n(typeof C=="number"&&C>=0);var N=C/26|0,V=C%26;return this._expand(N+1),F?this.words[N]=this.words[N]|1<<V:this.words[N]=this.words[N]&~(1<<V),this.strip()},o.prototype.iadd=function(C){var F;if(this.negative!==0&&C.negative===0)return this.negative=0,F=this.isub(C),this.negative^=1,this._normSign();if(this.negative===0&&C.negative!==0)return C.negative=0,F=this.isub(C),C.negative=1,F._normSign();var N,V;this.length>C.length?(N=this,V=C):(N=C,V=this);for(var K=0,Q=0;Q<V.length;Q++)F=(N.words[Q]|0)+(V.words[Q]|0)+K,this.words[Q]=F&67108863,K=F>>>26;for(;K!==0&&Q<N.length;Q++)F=(N.words[Q]|0)+K,this.words[Q]=F&67108863,K=F>>>26;if(this.length=N.length,K!==0)this.words[this.length]=K,this.length++;else if(N!==this)for(;Q<N.length;Q++)this.words[Q]=N.words[Q];return this},o.prototype.add=function(C){var F;return C.negative!==0&&this.negative===0?(C.negative=0,F=this.sub(C),C.negative^=1,F):C.negative===0&&this.negative!==0?(this.negative=0,F=C.sub(this),this.negative=1,F):this.length>C.length?this.clone().iadd(C):C.clone().iadd(this)},o.prototype.isub=function(C){if(C.negative!==0){C.negative=0;var F=this.iadd(C);return C.negative=1,F._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(C),this.negative=1,this._normSign();var N=this.cmp(C);if(N===0)return this.negative=0,this.length=1,this.words[0]=0,this;var V,K;N>0?(V=this,K=C):(V=C,K=this);for(var Q=0,at=0;at<K.length;at++)F=(V.words[at]|0)-(K.words[at]|0)+Q,Q=F>>26,this.words[at]=F&67108863;for(;Q!==0&&at<V.length;at++)F=(V.words[at]|0)+Q,Q=F>>26,this.words[at]=F&67108863;if(Q===0&&at<V.length&&V!==this)for(;at<V.length;at++)this.words[at]=V.words[at];return this.length=Math.max(this.length,at),V!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(C){return this.clone().isub(C)};function k(C,F,N){N.negative=F.negative^C.negative;var V=C.length+F.length|0;N.length=V,V=V-1|0;var K=C.words[0]|0,Q=F.words[0]|0,at=K*Q,it=at&67108863,q=at/67108864|0;N.words[0]=it;for(var W=1;W<V;W++){for(var Z=q>>>26,G=q&67108863,et=Math.min(W,F.length-1),nt=Math.max(0,W-C.length+1);nt<=et;nt++){var X=W-nt|0;K=C.words[X]|0,Q=F.words[nt]|0,at=K*Q+G,Z+=at/67108864|0,G=at&67108863}N.words[W]=G|0,q=Z|0}return q!==0?N.words[W]=q|0:N.length--,N.strip()}var _=function(C,F,N){var V=C.words,K=F.words,Q=N.words,at=0,it,q,W,Z=V[0]|0,G=Z&8191,et=Z>>>13,nt=V[1]|0,X=nt&8191,Y=nt>>>13,ot=V[2]|0,rt=ot&8191,ht=ot>>>13,pt=V[3]|0,yt=pt&8191,xt=pt>>>13,Ft=V[4]|0,Et=Ft&8191,mt=Ft>>>13,gt=V[5]|0,wt=gt&8191,Pt=gt>>>13,Bt=V[6]|0,kt=Bt&8191,jt=Bt>>>13,Ht=V[7]|0,Vt=Ht&8191,ee=Ht>>>13,te=V[8]|0,ae=te&8191,le=te>>>13,ce=V[9]|0,pe=ce&8191,we=ce>>>13,ve=K[0]|0,Mt=ve&8191,It=ve>>>13,Rt=K[1]|0,zt=Rt&8191,Tt=Rt>>>13,ft=K[2]|0,ut=ft&8191,vt=ft>>>13,St=K[3]|0,Ot=St&8191,Xt=St>>>13,$t=K[4]|0,de=$t&8191,Me=$t>>>13,Fe=K[5]|0,De=Fe&8191,Ae=Fe>>>13,Ve=K[6]|0,Qe=Ve&8191,Sr=Ve>>>13,he=K[7]|0,je=he&8191,Re=he>>>13,_r=K[8]|0,tr=_r&8191,Gt=_r>>>13,re=K[9]|0,fe=re&8191,ye=re>>>13;N.negative=C.negative^F.negative,N.length=19,it=Math.imul(G,Mt),q=Math.imul(G,It),q=q+Math.imul(et,Mt)|0,W=Math.imul(et,It);var Le=(at+it|0)+((q&8191)<<13)|0;at=(W+(q>>>13)|0)+(Le>>>26)|0,Le&=67108863,it=Math.imul(X,Mt),q=Math.imul(X,It),q=q+Math.imul(Y,Mt)|0,W=Math.imul(Y,It),it=it+Math.imul(G,zt)|0,q=q+Math.imul(G,Tt)|0,q=q+Math.imul(et,zt)|0,W=W+Math.imul(et,Tt)|0;var _e=(at+it|0)+((q&8191)<<13)|0;at=(W+(q>>>13)|0)+(_e>>>26)|0,_e&=67108863,it=Math.imul(rt,Mt),q=Math.imul(rt,It),q=q+Math.imul(ht,Mt)|0,W=Math.imul(ht,It),it=it+Math.imul(X,zt)|0,q=q+Math.imul(X,Tt)|0,q=q+Math.imul(Y,zt)|0,W=W+Math.imul(Y,Tt)|0,it=it+Math.imul(G,ut)|0,q=q+Math.imul(G,vt)|0,q=q+Math.imul(et,ut)|0,W=W+Math.imul(et,vt)|0;var Ce=(at+it|0)+((q&8191)<<13)|0;at=(W+(q>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,it=Math.imul(yt,Mt),q=Math.imul(yt,It),q=q+Math.imul(xt,Mt)|0,W=Math.imul(xt,It),it=it+Math.imul(rt,zt)|0,q=q+Math.imul(rt,Tt)|0,q=q+Math.imul(ht,zt)|0,W=W+Math.imul(ht,Tt)|0,it=it+Math.imul(X,ut)|0,q=q+Math.imul(X,vt)|0,q=q+Math.imul(Y,ut)|0,W=W+Math.imul(Y,vt)|0,it=it+Math.imul(G,Ot)|0,q=q+Math.imul(G,Xt)|0,q=q+Math.imul(et,Ot)|0,W=W+Math.imul(et,Xt)|0;var ze=(at+it|0)+((q&8191)<<13)|0;at=(W+(q>>>13)|0)+(ze>>>26)|0,ze&=67108863,it=Math.imul(Et,Mt),q=Math.imul(Et,It),q=q+Math.imul(mt,Mt)|0,W=Math.imul(mt,It),it=it+Math.imul(yt,zt)|0,q=q+Math.imul(yt,Tt)|0,q=q+Math.imul(xt,zt)|0,W=W+Math.imul(xt,Tt)|0,it=it+Math.imul(rt,ut)|0,q=q+Math.imul(rt,vt)|0,q=q+Math.imul(ht,ut)|0,W=W+Math.imul(ht,vt)|0,it=it+Math.imul(X,Ot)|0,q=q+Math.imul(X,Xt)|0,q=q+Math.imul(Y,Ot)|0,W=W+Math.imul(Y,Xt)|0,it=it+Math.imul(G,de)|0,q=q+Math.imul(G,Me)|0,q=q+Math.imul(et,de)|0,W=W+Math.imul(et,Me)|0;var We=(at+it|0)+((q&8191)<<13)|0;at=(W+(q>>>13)|0)+(We>>>26)|0,We&=67108863,it=Math.imul(wt,Mt),q=Math.imul(wt,It),q=q+Math.imul(Pt,Mt)|0,W=Math.imul(Pt,It),it=it+Math.imul(Et,zt)|0,q=q+Math.imul(Et,Tt)|0,q=q+Math.imul(mt,zt)|0,W=W+Math.imul(mt,Tt)|0,it=it+Math.imul(yt,ut)|0,q=q+Math.imul(yt,vt)|0,q=q+Math.imul(xt,ut)|0,W=W+Math.imul(xt,vt)|0,it=it+Math.imul(rt,Ot)|0,q=q+Math.imul(rt,Xt)|0,q=q+Math.imul(ht,Ot)|0,W=W+Math.imul(ht,Xt)|0,it=it+Math.imul(X,de)|0,q=q+Math.imul(X,Me)|0,q=q+Math.imul(Y,de)|0,W=W+Math.imul(Y,Me)|0,it=it+Math.imul(G,De)|0,q=q+Math.imul(G,Ae)|0,q=q+Math.imul(et,De)|0,W=W+Math.imul(et,Ae)|0;var qe=(at+it|0)+((q&8191)<<13)|0;at=(W+(q>>>13)|0)+(qe>>>26)|0,qe&=67108863,it=Math.imul(kt,Mt),q=Math.imul(kt,It),q=q+Math.imul(jt,Mt)|0,W=Math.imul(jt,It),it=it+Math.imul(wt,zt)|0,q=q+Math.imul(wt,Tt)|0,q=q+Math.imul(Pt,zt)|0,W=W+Math.imul(Pt,Tt)|0,it=it+Math.imul(Et,ut)|0,q=q+Math.imul(Et,vt)|0,q=q+Math.imul(mt,ut)|0,W=W+Math.imul(mt,vt)|0,it=it+Math.imul(yt,Ot)|0,q=q+Math.imul(yt,Xt)|0,q=q+Math.imul(xt,Ot)|0,W=W+Math.imul(xt,Xt)|0,it=it+Math.imul(rt,de)|0,q=q+Math.imul(rt,Me)|0,q=q+Math.imul(ht,de)|0,W=W+Math.imul(ht,Me)|0,it=it+Math.imul(X,De)|0,q=q+Math.imul(X,Ae)|0,q=q+Math.imul(Y,De)|0,W=W+Math.imul(Y,Ae)|0,it=it+Math.imul(G,Qe)|0,q=q+Math.imul(G,Sr)|0,q=q+Math.imul(et,Qe)|0,W=W+Math.imul(et,Sr)|0;var ir=(at+it|0)+((q&8191)<<13)|0;at=(W+(q>>>13)|0)+(ir>>>26)|0,ir&=67108863,it=Math.imul(Vt,Mt),q=Math.imul(Vt,It),q=q+Math.imul(ee,Mt)|0,W=Math.imul(ee,It),it=it+Math.imul(kt,zt)|0,q=q+Math.imul(kt,Tt)|0,q=q+Math.imul(jt,zt)|0,W=W+Math.imul(jt,Tt)|0,it=it+Math.imul(wt,ut)|0,q=q+Math.imul(wt,vt)|0,q=q+Math.imul(Pt,ut)|0,W=W+Math.imul(Pt,vt)|0,it=it+Math.imul(Et,Ot)|0,q=q+Math.imul(Et,Xt)|0,q=q+Math.imul(mt,Ot)|0,W=W+Math.imul(mt,Xt)|0,it=it+Math.imul(yt,de)|0,q=q+Math.imul(yt,Me)|0,q=q+Math.imul(xt,de)|0,W=W+Math.imul(xt,Me)|0,it=it+Math.imul(rt,De)|0,q=q+Math.imul(rt,Ae)|0,q=q+Math.imul(ht,De)|0,W=W+Math.imul(ht,Ae)|0,it=it+Math.imul(X,Qe)|0,q=q+Math.imul(X,Sr)|0,q=q+Math.imul(Y,Qe)|0,W=W+Math.imul(Y,Sr)|0,it=it+Math.imul(G,je)|0,q=q+Math.imul(G,Re)|0,q=q+Math.imul(et,je)|0,W=W+Math.imul(et,Re)|0;var xr=(at+it|0)+((q&8191)<<13)|0;at=(W+(q>>>13)|0)+(xr>>>26)|0,xr&=67108863,it=Math.imul(ae,Mt),q=Math.imul(ae,It),q=q+Math.imul(le,Mt)|0,W=Math.imul(le,It),it=it+Math.imul(Vt,zt)|0,q=q+Math.imul(Vt,Tt)|0,q=q+Math.imul(ee,zt)|0,W=W+Math.imul(ee,Tt)|0,it=it+Math.imul(kt,ut)|0,q=q+Math.imul(kt,vt)|0,q=q+Math.imul(jt,ut)|0,W=W+Math.imul(jt,vt)|0,it=it+Math.imul(wt,Ot)|0,q=q+Math.imul(wt,Xt)|0,q=q+Math.imul(Pt,Ot)|0,W=W+Math.imul(Pt,Xt)|0,it=it+Math.imul(Et,de)|0,q=q+Math.imul(Et,Me)|0,q=q+Math.imul(mt,de)|0,W=W+Math.imul(mt,Me)|0,it=it+Math.imul(yt,De)|0,q=q+Math.imul(yt,Ae)|0,q=q+Math.imul(xt,De)|0,W=W+Math.imul(xt,Ae)|0,it=it+Math.imul(rt,Qe)|0,q=q+Math.imul(rt,Sr)|0,q=q+Math.imul(ht,Qe)|0,W=W+Math.imul(ht,Sr)|0,it=it+Math.imul(X,je)|0,q=q+Math.imul(X,Re)|0,q=q+Math.imul(Y,je)|0,W=W+Math.imul(Y,Re)|0,it=it+Math.imul(G,tr)|0,q=q+Math.imul(G,Gt)|0,q=q+Math.imul(et,tr)|0,W=W+Math.imul(et,Gt)|0;var Dt=(at+it|0)+((q&8191)<<13)|0;at=(W+(q>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,it=Math.imul(pe,Mt),q=Math.imul(pe,It),q=q+Math.imul(we,Mt)|0,W=Math.imul(we,It),it=it+Math.imul(ae,zt)|0,q=q+Math.imul(ae,Tt)|0,q=q+Math.imul(le,zt)|0,W=W+Math.imul(le,Tt)|0,it=it+Math.imul(Vt,ut)|0,q=q+Math.imul(Vt,vt)|0,q=q+Math.imul(ee,ut)|0,W=W+Math.imul(ee,vt)|0,it=it+Math.imul(kt,Ot)|0,q=q+Math.imul(kt,Xt)|0,q=q+Math.imul(jt,Ot)|0,W=W+Math.imul(jt,Xt)|0,it=it+Math.imul(wt,de)|0,q=q+Math.imul(wt,Me)|0,q=q+Math.imul(Pt,de)|0,W=W+Math.imul(Pt,Me)|0,it=it+Math.imul(Et,De)|0,q=q+Math.imul(Et,Ae)|0,q=q+Math.imul(mt,De)|0,W=W+Math.imul(mt,Ae)|0,it=it+Math.imul(yt,Qe)|0,q=q+Math.imul(yt,Sr)|0,q=q+Math.imul(xt,Qe)|0,W=W+Math.imul(xt,Sr)|0,it=it+Math.imul(rt,je)|0,q=q+Math.imul(rt,Re)|0,q=q+Math.imul(ht,je)|0,W=W+Math.imul(ht,Re)|0,it=it+Math.imul(X,tr)|0,q=q+Math.imul(X,Gt)|0,q=q+Math.imul(Y,tr)|0,W=W+Math.imul(Y,Gt)|0,it=it+Math.imul(G,fe)|0,q=q+Math.imul(G,ye)|0,q=q+Math.imul(et,fe)|0,W=W+Math.imul(et,ye)|0;var Ut=(at+it|0)+((q&8191)<<13)|0;at=(W+(q>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,it=Math.imul(pe,zt),q=Math.imul(pe,Tt),q=q+Math.imul(we,zt)|0,W=Math.imul(we,Tt),it=it+Math.imul(ae,ut)|0,q=q+Math.imul(ae,vt)|0,q=q+Math.imul(le,ut)|0,W=W+Math.imul(le,vt)|0,it=it+Math.imul(Vt,Ot)|0,q=q+Math.imul(Vt,Xt)|0,q=q+Math.imul(ee,Ot)|0,W=W+Math.imul(ee,Xt)|0,it=it+Math.imul(kt,de)|0,q=q+Math.imul(kt,Me)|0,q=q+Math.imul(jt,de)|0,W=W+Math.imul(jt,Me)|0,it=it+Math.imul(wt,De)|0,q=q+Math.imul(wt,Ae)|0,q=q+Math.imul(Pt,De)|0,W=W+Math.imul(Pt,Ae)|0,it=it+Math.imul(Et,Qe)|0,q=q+Math.imul(Et,Sr)|0,q=q+Math.imul(mt,Qe)|0,W=W+Math.imul(mt,Sr)|0,it=it+Math.imul(yt,je)|0,q=q+Math.imul(yt,Re)|0,q=q+Math.imul(xt,je)|0,W=W+Math.imul(xt,Re)|0,it=it+Math.imul(rt,tr)|0,q=q+Math.imul(rt,Gt)|0,q=q+Math.imul(ht,tr)|0,W=W+Math.imul(ht,Gt)|0,it=it+Math.imul(X,fe)|0,q=q+Math.imul(X,ye)|0,q=q+Math.imul(Y,fe)|0,W=W+Math.imul(Y,ye)|0;var Te=(at+it|0)+((q&8191)<<13)|0;at=(W+(q>>>13)|0)+(Te>>>26)|0,Te&=67108863,it=Math.imul(pe,ut),q=Math.imul(pe,vt),q=q+Math.imul(we,ut)|0,W=Math.imul(we,vt),it=it+Math.imul(ae,Ot)|0,q=q+Math.imul(ae,Xt)|0,q=q+Math.imul(le,Ot)|0,W=W+Math.imul(le,Xt)|0,it=it+Math.imul(Vt,de)|0,q=q+Math.imul(Vt,Me)|0,q=q+Math.imul(ee,de)|0,W=W+Math.imul(ee,Me)|0,it=it+Math.imul(kt,De)|0,q=q+Math.imul(kt,Ae)|0,q=q+Math.imul(jt,De)|0,W=W+Math.imul(jt,Ae)|0,it=it+Math.imul(wt,Qe)|0,q=q+Math.imul(wt,Sr)|0,q=q+Math.imul(Pt,Qe)|0,W=W+Math.imul(Pt,Sr)|0,it=it+Math.imul(Et,je)|0,q=q+Math.imul(Et,Re)|0,q=q+Math.imul(mt,je)|0,W=W+Math.imul(mt,Re)|0,it=it+Math.imul(yt,tr)|0,q=q+Math.imul(yt,Gt)|0,q=q+Math.imul(xt,tr)|0,W=W+Math.imul(xt,Gt)|0,it=it+Math.imul(rt,fe)|0,q=q+Math.imul(rt,ye)|0,q=q+Math.imul(ht,fe)|0,W=W+Math.imul(ht,ye)|0;var Se=(at+it|0)+((q&8191)<<13)|0;at=(W+(q>>>13)|0)+(Se>>>26)|0,Se&=67108863,it=Math.imul(pe,Ot),q=Math.imul(pe,Xt),q=q+Math.imul(we,Ot)|0,W=Math.imul(we,Xt),it=it+Math.imul(ae,de)|0,q=q+Math.imul(ae,Me)|0,q=q+Math.imul(le,de)|0,W=W+Math.imul(le,Me)|0,it=it+Math.imul(Vt,De)|0,q=q+Math.imul(Vt,Ae)|0,q=q+Math.imul(ee,De)|0,W=W+Math.imul(ee,Ae)|0,it=it+Math.imul(kt,Qe)|0,q=q+Math.imul(kt,Sr)|0,q=q+Math.imul(jt,Qe)|0,W=W+Math.imul(jt,Sr)|0,it=it+Math.imul(wt,je)|0,q=q+Math.imul(wt,Re)|0,q=q+Math.imul(Pt,je)|0,W=W+Math.imul(Pt,Re)|0,it=it+Math.imul(Et,tr)|0,q=q+Math.imul(Et,Gt)|0,q=q+Math.imul(mt,tr)|0,W=W+Math.imul(mt,Gt)|0,it=it+Math.imul(yt,fe)|0,q=q+Math.imul(yt,ye)|0,q=q+Math.imul(xt,fe)|0,W=W+Math.imul(xt,ye)|0;var Be=(at+it|0)+((q&8191)<<13)|0;at=(W+(q>>>13)|0)+(Be>>>26)|0,Be&=67108863,it=Math.imul(pe,de),q=Math.imul(pe,Me),q=q+Math.imul(we,de)|0,W=Math.imul(we,Me),it=it+Math.imul(ae,De)|0,q=q+Math.imul(ae,Ae)|0,q=q+Math.imul(le,De)|0,W=W+Math.imul(le,Ae)|0,it=it+Math.imul(Vt,Qe)|0,q=q+Math.imul(Vt,Sr)|0,q=q+Math.imul(ee,Qe)|0,W=W+Math.imul(ee,Sr)|0,it=it+Math.imul(kt,je)|0,q=q+Math.imul(kt,Re)|0,q=q+Math.imul(jt,je)|0,W=W+Math.imul(jt,Re)|0,it=it+Math.imul(wt,tr)|0,q=q+Math.imul(wt,Gt)|0,q=q+Math.imul(Pt,tr)|0,W=W+Math.imul(Pt,Gt)|0,it=it+Math.imul(Et,fe)|0,q=q+Math.imul(Et,ye)|0,q=q+Math.imul(mt,fe)|0,W=W+Math.imul(mt,ye)|0;var Je=(at+it|0)+((q&8191)<<13)|0;at=(W+(q>>>13)|0)+(Je>>>26)|0,Je&=67108863,it=Math.imul(pe,De),q=Math.imul(pe,Ae),q=q+Math.imul(we,De)|0,W=Math.imul(we,Ae),it=it+Math.imul(ae,Qe)|0,q=q+Math.imul(ae,Sr)|0,q=q+Math.imul(le,Qe)|0,W=W+Math.imul(le,Sr)|0,it=it+Math.imul(Vt,je)|0,q=q+Math.imul(Vt,Re)|0,q=q+Math.imul(ee,je)|0,W=W+Math.imul(ee,Re)|0,it=it+Math.imul(kt,tr)|0,q=q+Math.imul(kt,Gt)|0,q=q+Math.imul(jt,tr)|0,W=W+Math.imul(jt,Gt)|0,it=it+Math.imul(wt,fe)|0,q=q+Math.imul(wt,ye)|0,q=q+Math.imul(Pt,fe)|0,W=W+Math.imul(Pt,ye)|0;var $e=(at+it|0)+((q&8191)<<13)|0;at=(W+(q>>>13)|0)+($e>>>26)|0,$e&=67108863,it=Math.imul(pe,Qe),q=Math.imul(pe,Sr),q=q+Math.imul(we,Qe)|0,W=Math.imul(we,Sr),it=it+Math.imul(ae,je)|0,q=q+Math.imul(ae,Re)|0,q=q+Math.imul(le,je)|0,W=W+Math.imul(le,Re)|0,it=it+Math.imul(Vt,tr)|0,q=q+Math.imul(Vt,Gt)|0,q=q+Math.imul(ee,tr)|0,W=W+Math.imul(ee,Gt)|0,it=it+Math.imul(kt,fe)|0,q=q+Math.imul(kt,ye)|0,q=q+Math.imul(jt,fe)|0,W=W+Math.imul(jt,ye)|0;var Xe=(at+it|0)+((q&8191)<<13)|0;at=(W+(q>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,it=Math.imul(pe,je),q=Math.imul(pe,Re),q=q+Math.imul(we,je)|0,W=Math.imul(we,Re),it=it+Math.imul(ae,tr)|0,q=q+Math.imul(ae,Gt)|0,q=q+Math.imul(le,tr)|0,W=W+Math.imul(le,Gt)|0,it=it+Math.imul(Vt,fe)|0,q=q+Math.imul(Vt,ye)|0,q=q+Math.imul(ee,fe)|0,W=W+Math.imul(ee,ye)|0;var Oe=(at+it|0)+((q&8191)<<13)|0;at=(W+(q>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,it=Math.imul(pe,tr),q=Math.imul(pe,Gt),q=q+Math.imul(we,tr)|0,W=Math.imul(we,Gt),it=it+Math.imul(ae,fe)|0,q=q+Math.imul(ae,ye)|0,q=q+Math.imul(le,fe)|0,W=W+Math.imul(le,ye)|0;var ar=(at+it|0)+((q&8191)<<13)|0;at=(W+(q>>>13)|0)+(ar>>>26)|0,ar&=67108863,it=Math.imul(pe,fe),q=Math.imul(pe,ye),q=q+Math.imul(we,fe)|0,W=Math.imul(we,ye);var cr=(at+it|0)+((q&8191)<<13)|0;return at=(W+(q>>>13)|0)+(cr>>>26)|0,cr&=67108863,Q[0]=Le,Q[1]=_e,Q[2]=Ce,Q[3]=ze,Q[4]=We,Q[5]=qe,Q[6]=ir,Q[7]=xr,Q[8]=Dt,Q[9]=Ut,Q[10]=Te,Q[11]=Se,Q[12]=Be,Q[13]=Je,Q[14]=$e,Q[15]=Xe,Q[16]=Oe,Q[17]=ar,Q[18]=cr,at!==0&&(Q[19]=at,N.length++),N};Math.imul||(_=k);function b(C,F,N){N.negative=F.negative^C.negative,N.length=C.length+F.length;for(var V=0,K=0,Q=0;Q<N.length-1;Q++){var at=K;K=0;for(var it=V&67108863,q=Math.min(Q,F.length-1),W=Math.max(0,Q-C.length+1);W<=q;W++){var Z=Q-W,G=C.words[Z]|0,et=F.words[W]|0,nt=G*et,X=nt&67108863;at=at+(nt/67108864|0)|0,X=X+it|0,it=X&67108863,at=at+(X>>>26)|0,K+=at>>>26,at&=67108863}N.words[Q]=it,V=at,at=K}return V!==0?N.words[Q]=V:N.length--,N.strip()}function P(C,F,N){var V=new l;return V.mulp(C,F,N)}o.prototype.mulTo=function(C,F){var N,V=this.length+C.length;return this.length===10&&C.length===10?N=_(this,C,F):V<63?N=k(this,C,F):V<1024?N=b(this,C,F):N=P(this,C,F),N};function l(C,F){this.x=C,this.y=F}l.prototype.makeRBT=function(C){for(var F=new Array(C),N=o.prototype._countBits(C)-1,V=0;V<C;V++)F[V]=this.revBin(V,N,C);return F},l.prototype.revBin=function(C,F,N){if(C===0||C===N-1)return C;for(var V=0,K=0;K<F;K++)V|=(C&1)<<F-K-1,C>>=1;return V},l.prototype.permute=function(C,F,N,V,K,Q){for(var at=0;at<Q;at++)V[at]=F[C[at]],K[at]=N[C[at]]},l.prototype.transform=function(C,F,N,V,K,Q){this.permute(Q,C,F,N,V,K);for(var at=1;at<K;at<<=1)for(var it=at<<1,q=Math.cos(2*Math.PI/it),W=Math.sin(2*Math.PI/it),Z=0;Z<K;Z+=it)for(var G=q,et=W,nt=0;nt<at;nt++){var X=N[Z+nt],Y=V[Z+nt],ot=N[Z+nt+at],rt=V[Z+nt+at],ht=G*ot-et*rt;rt=G*rt+et*ot,ot=ht,N[Z+nt]=X+ot,V[Z+nt]=Y+rt,N[Z+nt+at]=X-ot,V[Z+nt+at]=Y-rt,nt!==it&&(ht=q*G-W*et,et=q*et+W*G,G=ht)}},l.prototype.guessLen13b=function(C,F){var N=Math.max(F,C)|1,V=N&1,K=0;for(N=N/2|0;N;N=N>>>1)K++;return 1<<K+1+V},l.prototype.conjugate=function(C,F,N){if(!(N<=1))for(var V=0;V<N/2;V++){var K=C[V];C[V]=C[N-V-1],C[N-V-1]=K,K=F[V],F[V]=-F[N-V-1],F[N-V-1]=-K}},l.prototype.normalize13b=function(C,F){for(var N=0,V=0;V<F/2;V++){var K=Math.round(C[2*V+1]/F)*8192+Math.round(C[2*V]/F)+N;C[V]=K&67108863,K<67108864?N=0:N=K/67108864|0}return C},l.prototype.convert13b=function(C,F,N,V){for(var K=0,Q=0;Q<F;Q++)K=K+(C[Q]|0),N[2*Q]=K&8191,K=K>>>13,N[2*Q+1]=K&8191,K=K>>>13;for(Q=2*F;Q<V;++Q)N[Q]=0;n(K===0),n((K&-8192)===0)},l.prototype.stub=function(C){for(var F=new Array(C),N=0;N<C;N++)F[N]=0;return F},l.prototype.mulp=function(C,F,N){var V=2*this.guessLen13b(C.length,F.length),K=this.makeRBT(V),Q=this.stub(V),at=new Array(V),it=new Array(V),q=new Array(V),W=new Array(V),Z=new Array(V),G=new Array(V),et=N.words;et.length=V,this.convert13b(C.words,C.length,at,V),this.convert13b(F.words,F.length,W,V),this.transform(at,Q,it,q,V,K),this.transform(W,Q,Z,G,V,K);for(var nt=0;nt<V;nt++){var X=it[nt]*Z[nt]-q[nt]*G[nt];q[nt]=it[nt]*G[nt]+q[nt]*Z[nt],it[nt]=X}return this.conjugate(it,q,V),this.transform(it,q,et,Q,V,K),this.conjugate(et,Q,V),this.normalize13b(et,V),N.negative=C.negative^F.negative,N.length=C.length+F.length,N.strip()},o.prototype.mul=function(C){var F=new o(null);return F.words=new Array(this.length+C.length),this.mulTo(C,F)},o.prototype.mulf=function(C){var F=new o(null);return F.words=new Array(this.length+C.length),P(this,C,F)},o.prototype.imul=function(C){return this.clone().mulTo(C,this)},o.prototype.imuln=function(C){n(typeof C=="number"),n(C<67108864);for(var F=0,N=0;N<this.length;N++){var V=(this.words[N]|0)*C,K=(V&67108863)+(F&67108863);F>>=26,F+=V/67108864|0,F+=K>>>26,this.words[N]=K&67108863}return F!==0&&(this.words[N]=F,this.length++),this},o.prototype.muln=function(C){return this.clone().imuln(C)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(C){var F=T(C);if(F.length===0)return new o(1);for(var N=this,V=0;V<F.length&&F[V]===0;V++,N=N.sqr());if(++V<F.length)for(var K=N.sqr();V<F.length;V++,K=K.sqr())F[V]!==0&&(N=N.mul(K));return N},o.prototype.iushln=function(C){n(typeof C=="number"&&C>=0);var F=C%26,N=(C-F)/26,V=67108863>>>26-F<<26-F,K;if(F!==0){var Q=0;for(K=0;K<this.length;K++){var at=this.words[K]&V,it=(this.words[K]|0)-at<<F;this.words[K]=it|Q,Q=at>>>26-F}Q&&(this.words[K]=Q,this.length++)}if(N!==0){for(K=this.length-1;K>=0;K--)this.words[K+N]=this.words[K];for(K=0;K<N;K++)this.words[K]=0;this.length+=N}return this.strip()},o.prototype.ishln=function(C){return n(this.negative===0),this.iushln(C)},o.prototype.iushrn=function(C,F,N){n(typeof C=="number"&&C>=0);var V;F?V=(F-F%26)/26:V=0;var K=C%26,Q=Math.min((C-K)/26,this.length),at=67108863^67108863>>>K<<K,it=N;if(V-=Q,V=Math.max(0,V),it){for(var q=0;q<Q;q++)it.words[q]=this.words[q];it.length=Q}if(Q!==0)if(this.length>Q)for(this.length-=Q,q=0;q<this.length;q++)this.words[q]=this.words[q+Q];else this.words[0]=0,this.length=1;var W=0;for(q=this.length-1;q>=0&&(W!==0||q>=V);q--){var Z=this.words[q]|0;this.words[q]=W<<26-K|Z>>>K,W=Z&at}return it&&W!==0&&(it.words[it.length++]=W),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(C,F,N){return n(this.negative===0),this.iushrn(C,F,N)},o.prototype.shln=function(C){return this.clone().ishln(C)},o.prototype.ushln=function(C){return this.clone().iushln(C)},o.prototype.shrn=function(C){return this.clone().ishrn(C)},o.prototype.ushrn=function(C){return this.clone().iushrn(C)},o.prototype.testn=function(C){n(typeof C=="number"&&C>=0);var F=C%26,N=(C-F)/26,V=1<<F;if(this.length<=N)return!1;var K=this.words[N];return!!(K&V)},o.prototype.imaskn=function(C){n(typeof C=="number"&&C>=0);var F=C%26,N=(C-F)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=N)return this;if(F!==0&&N++,this.length=Math.min(N,this.length),F!==0){var V=67108863^67108863>>>F<<F;this.words[this.length-1]&=V}return this.strip()},o.prototype.maskn=function(C){return this.clone().imaskn(C)},o.prototype.iaddn=function(C){return n(typeof C=="number"),n(C<67108864),C<0?this.isubn(-C):this.negative!==0?this.length===1&&(this.words[0]|0)<C?(this.words[0]=C-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(C),this.negative=1,this):this._iaddn(C)},o.prototype._iaddn=function(C){this.words[0]+=C;for(var F=0;F<this.length&&this.words[F]>=67108864;F++)this.words[F]-=67108864,F===this.length-1?this.words[F+1]=1:this.words[F+1]++;return this.length=Math.max(this.length,F+1),this},o.prototype.isubn=function(C){if(n(typeof C=="number"),n(C<67108864),C<0)return this.iaddn(-C);if(this.negative!==0)return this.negative=0,this.iaddn(C),this.negative=1,this;if(this.words[0]-=C,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var F=0;F<this.length&&this.words[F]<0;F++)this.words[F]+=67108864,this.words[F+1]-=1;return this.strip()},o.prototype.addn=function(C){return this.clone().iaddn(C)},o.prototype.subn=function(C){return this.clone().isubn(C)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(C,F,N){var V=C.length+N,K;this._expand(V);var Q,at=0;for(K=0;K<C.length;K++){Q=(this.words[K+N]|0)+at;var it=(C.words[K]|0)*F;Q-=it&67108863,at=(Q>>26)-(it/67108864|0),this.words[K+N]=Q&67108863}for(;K<this.length-N;K++)Q=(this.words[K+N]|0)+at,at=Q>>26,this.words[K+N]=Q&67108863;if(at===0)return this.strip();for(n(at===-1),at=0,K=0;K<this.length;K++)Q=-(this.words[K]|0)+at,at=Q>>26,this.words[K]=Q&67108863;return this.negative=1,this.strip()},o.prototype._wordDiv=function(C,F){var N=this.length-C.length,V=this.clone(),K=C,Q=K.words[K.length-1]|0,at=this._countBits(Q);N=26-at,N!==0&&(K=K.ushln(N),V.iushln(N),Q=K.words[K.length-1]|0);var it=V.length-K.length,q;if(F!=="mod"){q=new o(null),q.length=it+1,q.words=new Array(q.length);for(var W=0;W<q.length;W++)q.words[W]=0}var Z=V.clone()._ishlnsubmul(K,1,it);Z.negative===0&&(V=Z,q&&(q.words[it]=1));for(var G=it-1;G>=0;G--){var et=(V.words[K.length+G]|0)*67108864+(V.words[K.length+G-1]|0);for(et=Math.min(et/Q|0,67108863),V._ishlnsubmul(K,et,G);V.negative!==0;)et--,V.negative=0,V._ishlnsubmul(K,1,G),V.isZero()||(V.negative^=1);q&&(q.words[G]=et)}return q&&q.strip(),V.strip(),F!=="div"&&N!==0&&V.iushrn(N),{div:q||null,mod:V}},o.prototype.divmod=function(C,F,N){if(n(!C.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var V,K,Q;return this.negative!==0&&C.negative===0?(Q=this.neg().divmod(C,F),F!=="mod"&&(V=Q.div.neg()),F!=="div"&&(K=Q.mod.neg(),N&&K.negative!==0&&K.iadd(C)),{div:V,mod:K}):this.negative===0&&C.negative!==0?(Q=this.divmod(C.neg(),F),F!=="mod"&&(V=Q.div.neg()),{div:V,mod:Q.mod}):this.negative&C.negative?(Q=this.neg().divmod(C.neg(),F),F!=="div"&&(K=Q.mod.neg(),N&&K.negative!==0&&K.isub(C)),{div:Q.div,mod:K}):C.length>this.length||this.cmp(C)<0?{div:new o(0),mod:this}:C.length===1?F==="div"?{div:this.divn(C.words[0]),mod:null}:F==="mod"?{div:null,mod:new o(this.modn(C.words[0]))}:{div:this.divn(C.words[0]),mod:new o(this.modn(C.words[0]))}:this._wordDiv(C,F)},o.prototype.div=function(C){return this.divmod(C,"div",!1).div},o.prototype.mod=function(C){return this.divmod(C,"mod",!1).mod},o.prototype.umod=function(C){return this.divmod(C,"mod",!0).mod},o.prototype.divRound=function(C){var F=this.divmod(C);if(F.mod.isZero())return F.div;var N=F.div.negative!==0?F.mod.isub(C):F.mod,V=C.ushrn(1),K=C.andln(1),Q=N.cmp(V);return Q<0||K===1&&Q===0?F.div:F.div.negative!==0?F.div.isubn(1):F.div.iaddn(1)},o.prototype.modn=function(C){n(C<=67108863);for(var F=67108864%C,N=0,V=this.length-1;V>=0;V--)N=(F*N+(this.words[V]|0))%C;return N},o.prototype.idivn=function(C){n(C<=67108863);for(var F=0,N=this.length-1;N>=0;N--){var V=(this.words[N]|0)+F*67108864;this.words[N]=V/C|0,F=V%C}return this.strip()},o.prototype.divn=function(C){return this.clone().idivn(C)},o.prototype.egcd=function(C){n(C.negative===0),n(!C.isZero());var F=this,N=C.clone();F.negative!==0?F=F.umod(C):F=F.clone();for(var V=new o(1),K=new o(0),Q=new o(0),at=new o(1),it=0;F.isEven()&&N.isEven();)F.iushrn(1),N.iushrn(1),++it;for(var q=N.clone(),W=F.clone();!F.isZero();){for(var Z=0,G=1;!(F.words[0]&G)&&Z<26;++Z,G<<=1);if(Z>0)for(F.iushrn(Z);Z-- >0;)(V.isOdd()||K.isOdd())&&(V.iadd(q),K.isub(W)),V.iushrn(1),K.iushrn(1);for(var et=0,nt=1;!(N.words[0]&nt)&&et<26;++et,nt<<=1);if(et>0)for(N.iushrn(et);et-- >0;)(Q.isOdd()||at.isOdd())&&(Q.iadd(q),at.isub(W)),Q.iushrn(1),at.iushrn(1);F.cmp(N)>=0?(F.isub(N),V.isub(Q),K.isub(at)):(N.isub(F),Q.isub(V),at.isub(K))}return{a:Q,b:at,gcd:N.iushln(it)}},o.prototype._invmp=function(C){n(C.negative===0),n(!C.isZero());var F=this,N=C.clone();F.negative!==0?F=F.umod(C):F=F.clone();for(var V=new o(1),K=new o(0),Q=N.clone();F.cmpn(1)>0&&N.cmpn(1)>0;){for(var at=0,it=1;!(F.words[0]&it)&&at<26;++at,it<<=1);if(at>0)for(F.iushrn(at);at-- >0;)V.isOdd()&&V.iadd(Q),V.iushrn(1);for(var q=0,W=1;!(N.words[0]&W)&&q<26;++q,W<<=1);if(q>0)for(N.iushrn(q);q-- >0;)K.isOdd()&&K.iadd(Q),K.iushrn(1);F.cmp(N)>=0?(F.isub(N),V.isub(K)):(N.isub(F),K.isub(V))}var Z;return F.cmpn(1)===0?Z=V:Z=K,Z.cmpn(0)<0&&Z.iadd(C),Z},o.prototype.gcd=function(C){if(this.isZero())return C.abs();if(C.isZero())return this.abs();var F=this.clone(),N=C.clone();F.negative=0,N.negative=0;for(var V=0;F.isEven()&&N.isEven();V++)F.iushrn(1),N.iushrn(1);do{for(;F.isEven();)F.iushrn(1);for(;N.isEven();)N.iushrn(1);var K=F.cmp(N);if(K<0){var Q=F;F=N,N=Q}else if(K===0||N.cmpn(1)===0)break;F.isub(N)}while(!0);return N.iushln(V)},o.prototype.invm=function(C){return this.egcd(C).a.umod(C)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(C){return this.words[0]&C},o.prototype.bincn=function(C){n(typeof C=="number");var F=C%26,N=(C-F)/26,V=1<<F;if(this.length<=N)return this._expand(N+1),this.words[N]|=V,this;for(var K=V,Q=N;K!==0&&Q<this.length;Q++){var at=this.words[Q]|0;at+=K,K=at>>>26,at&=67108863,this.words[Q]=at}return K!==0&&(this.words[Q]=K,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(C){var F=C<0;if(this.negative!==0&&!F)return-1;if(this.negative===0&&F)return 1;this.strip();var N;if(this.length>1)N=1;else{F&&(C=-C),n(C<=67108863,"Number is too big");var V=this.words[0]|0;N=V===C?0:V<C?-1:1}return this.negative!==0?-N|0:N},o.prototype.cmp=function(C){if(this.negative!==0&&C.negative===0)return-1;if(this.negative===0&&C.negative!==0)return 1;var F=this.ucmp(C);return this.negative!==0?-F|0:F},o.prototype.ucmp=function(C){if(this.length>C.length)return 1;if(this.length<C.length)return-1;for(var F=0,N=this.length-1;N>=0;N--){var V=this.words[N]|0,K=C.words[N]|0;if(V!==K){V<K?F=-1:V>K&&(F=1);break}}return F},o.prototype.gtn=function(C){return this.cmpn(C)===1},o.prototype.gt=function(C){return this.cmp(C)===1},o.prototype.gten=function(C){return this.cmpn(C)>=0},o.prototype.gte=function(C){return this.cmp(C)>=0},o.prototype.ltn=function(C){return this.cmpn(C)===-1},o.prototype.lt=function(C){return this.cmp(C)===-1},o.prototype.lten=function(C){return this.cmpn(C)<=0},o.prototype.lte=function(C){return this.cmp(C)<=0},o.prototype.eqn=function(C){return this.cmpn(C)===0},o.prototype.eq=function(C){return this.cmp(C)===0},o.red=function(C){return new O(C)},o.prototype.toRed=function(C){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),C.convertTo(this)._forceRed(C)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(C){return this.red=C,this},o.prototype.forceRed=function(C){return n(!this.red,"Already a number in reduction context"),this._forceRed(C)},o.prototype.redAdd=function(C){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,C)},o.prototype.redIAdd=function(C){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,C)},o.prototype.redSub=function(C){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,C)},o.prototype.redISub=function(C){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,C)},o.prototype.redShl=function(C){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,C)},o.prototype.redMul=function(C){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,C),this.red.mul(this,C)},o.prototype.redIMul=function(C){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,C),this.red.imul(this,C)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(C){return n(this.red&&!C.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,C)};var d={k256:null,p224:null,p192:null,p25519:null};function L(C,F){this.name=C,this.p=new o(F,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}L.prototype._tmp=function(){var C=new o(null);return C.words=new Array(Math.ceil(this.n/13)),C},L.prototype.ireduce=function(C){var F=C,N;do this.split(F,this.tmp),F=this.imulK(F),F=F.iadd(this.tmp),N=F.bitLength();while(N>this.n);var V=N<this.n?-1:F.ucmp(this.p);return V===0?(F.words[0]=0,F.length=1):V>0?F.isub(this.p):F.strip!==void 0?F.strip():F._strip(),F},L.prototype.split=function(C,F){C.iushrn(this.n,0,F)},L.prototype.imulK=function(C){return C.imul(this.k)};function w(){L.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}a(w,L),w.prototype.split=function(C,F){for(var N=4194303,V=Math.min(C.length,9),K=0;K<V;K++)F.words[K]=C.words[K];if(F.length=V,C.length<=9){C.words[0]=0,C.length=1;return}var Q=C.words[9];for(F.words[F.length++]=Q&N,K=10;K<C.length;K++){var at=C.words[K]|0;C.words[K-10]=(at&N)<<4|Q>>>22,Q=at}Q>>>=22,C.words[K-10]=Q,Q===0&&C.length>10?C.length-=10:C.length-=9},w.prototype.imulK=function(C){C.words[C.length]=0,C.words[C.length+1]=0,C.length+=2;for(var F=0,N=0;N<C.length;N++){var V=C.words[N]|0;F+=V*977,C.words[N]=F&67108863,F=V*64+(F/67108864|0)}return C.words[C.length-1]===0&&(C.length--,C.words[C.length-1]===0&&C.length--),C};function I(){L.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}a(I,L);function z(){L.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}a(z,L);function B(){L.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}a(B,L),B.prototype.imulK=function(C){for(var F=0,N=0;N<C.length;N++){var V=(C.words[N]|0)*19+F,K=V&67108863;V>>>=26,C.words[N]=K,F=V}return F!==0&&(C.words[C.length++]=F),C},o._prime=function(C){if(d[C])return d[C];var F;if(C==="k256")F=new w;else if(C==="p224")F=new I;else if(C==="p192")F=new z;else if(C==="p25519")F=new B;else throw new Error("Unknown prime "+C);return d[C]=F,F};function O(C){if(typeof C=="string"){var F=o._prime(C);this.m=F.p,this.prime=F}else n(C.gtn(1),"modulus must be greater than 1"),this.m=C,this.prime=null}O.prototype._verify1=function(C){n(C.negative===0,"red works only with positives"),n(C.red,"red works only with red numbers")},O.prototype._verify2=function(C,F){n((C.negative|F.negative)===0,"red works only with positives"),n(C.red&&C.red===F.red,"red works only with red numbers")},O.prototype.imod=function(C){return this.prime?this.prime.ireduce(C)._forceRed(this):C.umod(this.m)._forceRed(this)},O.prototype.neg=function(C){return C.isZero()?C.clone():this.m.sub(C)._forceRed(this)},O.prototype.add=function(C,F){this._verify2(C,F);var N=C.add(F);return N.cmp(this.m)>=0&&N.isub(this.m),N._forceRed(this)},O.prototype.iadd=function(C,F){this._verify2(C,F);var N=C.iadd(F);return N.cmp(this.m)>=0&&N.isub(this.m),N},O.prototype.sub=function(C,F){this._verify2(C,F);var N=C.sub(F);return N.cmpn(0)<0&&N.iadd(this.m),N._forceRed(this)},O.prototype.isub=function(C,F){this._verify2(C,F);var N=C.isub(F);return N.cmpn(0)<0&&N.iadd(this.m),N},O.prototype.shl=function(C,F){return this._verify1(C),this.imod(C.ushln(F))},O.prototype.imul=function(C,F){return this._verify2(C,F),this.imod(C.imul(F))},O.prototype.mul=function(C,F){return this._verify2(C,F),this.imod(C.mul(F))},O.prototype.isqr=function(C){return this.imul(C,C.clone())},O.prototype.sqr=function(C){return this.mul(C,C)},O.prototype.sqrt=function(C){if(C.isZero())return C.clone();var F=this.m.andln(3);if(n(F%2===1),F===3){var N=this.m.add(new o(1)).iushrn(2);return this.pow(C,N)}for(var V=this.m.subn(1),K=0;!V.isZero()&&V.andln(1)===0;)K++,V.iushrn(1);n(!V.isZero());var Q=new o(1).toRed(this),at=Q.redNeg(),it=this.m.subn(1).iushrn(1),q=this.m.bitLength();for(q=new o(2*q*q).toRed(this);this.pow(q,it).cmp(at)!==0;)q.redIAdd(at);for(var W=this.pow(q,V),Z=this.pow(C,V.addn(1).iushrn(1)),G=this.pow(C,V),et=K;G.cmp(Q)!==0;){for(var nt=G,X=0;nt.cmp(Q)!==0;X++)nt=nt.redSqr();n(X<et);var Y=this.pow(W,new o(1).iushln(et-X-1));Z=Z.redMul(Y),W=Y.redSqr(),G=G.redMul(W),et=X}return Z},O.prototype.invm=function(C){var F=C._invmp(this.m);return F.negative!==0?(F.negative=0,this.imod(F).redNeg()):this.imod(F)},O.prototype.pow=function(C,F){if(F.isZero())return new o(1).toRed(this);if(F.cmpn(1)===0)return C.clone();var N=4,V=new Array(1<<N);V[0]=new o(1).toRed(this),V[1]=C;for(var K=2;K<V.length;K++)V[K]=this.mul(V[K-1],C);var Q=V[0],at=0,it=0,q=F.bitLength()%26;for(q===0&&(q=26),K=F.length-1;K>=0;K--){for(var W=F.words[K],Z=q-1;Z>=0;Z--){var G=W>>Z&1;if(Q!==V[0]&&(Q=this.sqr(Q)),G===0&&at===0){it=0;continue}at<<=1,at|=G,it++,!(it!==N&&(K!==0||Z!==0))&&(Q=this.mul(Q,V[at]),it=0,at=0)}q=26}return Q},O.prototype.convertTo=function(C){var F=C.umod(this.m);return F===C?F.clone():F},O.prototype.convertFrom=function(C){var F=C.clone();return F.red=null,F},o.mont=function(C){return new R(C)};function R(C){O.call(this,C),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}a(R,O),R.prototype.convertTo=function(C){return this.imod(C.ushln(this.shift))},R.prototype.convertFrom=function(C){var F=this.imod(C.mul(this.rinv));return F.red=null,F},R.prototype.imul=function(C,F){if(C.isZero()||F.isZero())return C.words[0]=0,C.length=1,C;var N=C.imul(F),V=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),K=N.isub(V).iushrn(this.shift),Q=K;return K.cmp(this.m)>=0?Q=K.isub(this.m):K.cmpn(0)<0&&(Q=K.iadd(this.m)),Q._forceRed(this)},R.prototype.mul=function(C,F){if(C.isZero()||F.isZero())return new o(0)._forceRed(this);var N=C.mul(F),V=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),K=N.isub(V).iushrn(this.shift),Q=K;return K.cmp(this.m)>=0?Q=K.isub(this.m):K.cmpn(0)<0&&(Q=K.iadd(this.m)),Q._forceRed(this)},R.prototype.invm=function(C){var F=this.imod(C._invmp(this.m).mul(this.r2));return F._forceRed(this)}}(g,this)},2692:function(g){g.exports=v;function v(e){var r,f,n,a=e.length,o=0;for(r=0;r<a;++r)o+=e[r].length;var h=new Array(o),y=0;for(r=0;r<a;++r){var p=e[r],x=p.length;for(f=0;f<x;++f){var s=h[y++]=new Array(x-1),u=0;for(n=0;n<x;++n)n!==f&&(s[u++]=p[n]);if(f&1){var c=s[1];s[1]=s[0],s[0]=c}}}return h}},2569:function(g,v,e){g.exports=u;var r=e(5306),f=e(1390),n=e(2337);function a(c,T){for(var k=0;k<c;++k)if(!(T[k]<=T[k+c]))return!0;return!1}function o(c,T,k,_){for(var b=0,P=0,l=0,d=c.length;l<d;++l){var L=c[l];if(!a(T,L)){for(var w=0;w<2*T;++w)k[b++]=L[w];_[P++]=l}}return P}function h(c,T,k,_){var b=c.length,P=T.length;if(!(b<=0||P<=0)){var l=c[0].length>>>1;if(!(l<=0)){var d,L=r.mallocDouble(2*l*b),w=r.mallocInt32(b);if(b=o(c,l,L,w),b>0){if(l===1&&_)f.init(b),d=f.sweepComplete(l,k,0,b,L,w,0,b,L,w);else{var I=r.mallocDouble(2*l*P),z=r.mallocInt32(P);P=o(T,l,I,z),P>0&&(f.init(b+P),l===1?d=f.sweepBipartite(l,k,0,b,L,w,0,P,I,z):d=n(l,k,_,b,L,w,P,I,z),r.free(I),r.free(z))}r.free(L),r.free(w)}return d}}}var y;function p(c,T){y.push([c,T])}function x(c){return y=[],h(c,c,p,!0),y}function s(c,T){return y=[],h(c,T,p,!1),y}function u(c,T,k){switch(arguments.length){case 1:return x(c);case 2:return typeof T=="function"?h(c,c,T,!0):s(c,T);case 3:return h(c,T,k,!1);default:throw new Error("box-intersect: Invalid arguments")}}},7333:function(g,v){function e(){function n(h,y,p,x,s,u,c,T,k,_,b){for(var P=2*h,l=x,d=P*x;l<s;++l,d+=P){var L=u[y+d],w=u[y+d+h],I=c[l];t:for(var z=T,B=P*T;z<k;++z,B+=P){var O=_[y+B],R=_[y+B+h],C=b[z];if(!(R<L||w<O)){for(var F=y+1;F<h;++F){var N=u[F+d],V=u[F+h+d],K=_[F+B],Q=_[F+h+B];if(V<K||Q<N)continue t}var at=p(I,C);if(at!==void 0)return at}}}}function a(h,y,p,x,s,u,c,T,k,_,b){for(var P=2*h,l=T,d=P*T;l<k;++l,d+=P){var L=_[y+d],w=_[y+d+h],I=b[l];t:for(var z=x,B=P*x;z<s;++z,B+=P){var O=u[y+B],R=u[y+B+h],C=c[z];if(!(w<O||R<L)){for(var F=y+1;F<h;++F){var N=u[F+B],V=u[F+h+B],K=_[F+d],Q=_[F+h+d];if(V<K||Q<N)continue t}var at=p(C,I);if(at!==void 0)return at}}}}function o(h,y,p,x,s,u,c,T,k,_,b){return s-x>k-T?n(h,y,p,x,s,u,c,T,k,_,b):a(h,y,p,x,s,u,c,T,k,_,b)}return o}function r(){function n(p,x,s,u,c,T,k,_,b,P,l){for(var d=2*p,L=u,w=d*u;L<c;++L,w+=d){var I=T[x+w],z=T[x+w+p],B=k[L];t:for(var O=_,R=d*_;O<b;++O,R+=d){var C=P[x+R],F=l[O];if(!(C<=I||z<C)){for(var N=x+1;N<p;++N){var V=T[N+w],K=T[N+p+w],Q=P[N+R],at=P[N+p+R];if(K<Q||at<V)continue t}var it=s(F,B);if(it!==void 0)return it}}}}function a(p,x,s,u,c,T,k,_,b,P,l){for(var d=2*p,L=u,w=d*u;L<c;++L,w+=d){var I=T[x+w],z=T[x+w+p],B=k[L];t:for(var O=_,R=d*_;O<b;++O,R+=d){var C=P[x+R],F=l[O];if(!(C<I||z<C)){for(var N=x+1;N<p;++N){var V=T[N+w],K=T[N+p+w],Q=P[N+R],at=P[N+p+R];if(K<Q||at<V)continue t}var it=s(B,F);if(it!==void 0)return it}}}}function o(p,x,s,u,c,T,k,_,b,P,l){for(var d=2*p,L=_,w=d*_;L<b;++L,w+=d){var I=P[x+w],z=l[L];t:for(var B=u,O=d*u;B<c;++B,O+=d){var R=T[x+O],C=T[x+O+p],F=k[B];if(!(I<=R||C<I)){for(var N=x+1;N<p;++N){var V=T[N+O],K=T[N+p+O],Q=P[N+w],at=P[N+p+w];if(K<Q||at<V)continue t}var it=s(z,F);if(it!==void 0)return it}}}}function h(p,x,s,u,c,T,k,_,b,P,l){for(var d=2*p,L=_,w=d*_;L<b;++L,w+=d){var I=P[x+w],z=l[L];t:for(var B=u,O=d*u;B<c;++B,O+=d){var R=T[x+O],C=T[x+O+p],F=k[B];if(!(I<R||C<I)){for(var N=x+1;N<p;++N){var V=T[N+O],K=T[N+p+O],Q=P[N+w],at=P[N+p+w];if(K<Q||at<V)continue t}var it=s(F,z);if(it!==void 0)return it}}}}function y(p,x,s,u,c,T,k,_,b,P,l,d){return T-c>P-b?u?n(p,x,s,c,T,k,_,b,P,l,d):a(p,x,s,c,T,k,_,b,P,l,d):u?o(p,x,s,c,T,k,_,b,P,l,d):h(p,x,s,c,T,k,_,b,P,l,d)}return y}function f(n){return n?e():r()}v.partial=f(!1),v.full=f(!0)},2337:function(g,v,e){g.exports=C;var r=e(5306),f=e(2288),n=e(7333),a=n.partial,o=n.full,h=e(1390),y=e(2464),p=e(122),x=128,s=1<<22,u=1<<22,c=p("!(lo>=p0)&&!(p1>=hi)"),T=p("lo===p0"),k=p("lo<p0"),_=p("hi<=p0"),b=p("lo<=p0&&p0<=hi"),P=p("lo<p0&&p0<=hi"),l=6,d=2,L=1024,w=r.mallocInt32(L),I=r.mallocDouble(L);function z(F,N){var V=8*f.log2(N+1)*(F+1)|0,K=f.nextPow2(l*V);w.length<K&&(r.free(w),w=r.mallocInt32(K));var Q=f.nextPow2(d*V);I.length<Q&&(r.free(I),I=r.mallocDouble(Q))}function B(F,N,V,K,Q,at,it,q,W){var Z=l*F;w[Z]=N,w[Z+1]=V,w[Z+2]=K,w[Z+3]=Q,w[Z+4]=at,w[Z+5]=it;var G=d*F;I[G]=q,I[G+1]=W}function O(F,N,V,K,Q,at,it,q,W,Z,G){var et=2*F,nt=W*et,X=Z[nt+N];t:for(var Y=Q,ot=Q*et;Y<at;++Y,ot+=et){var rt=it[ot+N],ht=it[ot+N+F];if(!(X<rt||ht<X)&&!(K&&X===rt)){for(var pt=q[Y],yt=N+1;yt<F;++yt){var rt=it[ot+yt],ht=it[ot+yt+F],xt=Z[nt+yt],Ft=Z[nt+yt+F];if(ht<xt||Ft<rt)continue t}var Et;if(K?Et=V(G,pt):Et=V(pt,G),Et!==void 0)return Et}}}function R(F,N,V,K,Q,at,it,q,W,Z){var G=2*F,et=q*G,nt=W[et+N];t:for(var X=K,Y=K*G;X<Q;++X,Y+=G){var ot=it[X];if(ot!==Z){var rt=at[Y+N],ht=at[Y+N+F];if(!(nt<rt||ht<nt)){for(var pt=N+1;pt<F;++pt){var rt=at[Y+pt],ht=at[Y+pt+F],yt=W[et+pt],xt=W[et+pt+F];if(ht<yt||xt<rt)continue t}var Ft=V(ot,Z);if(Ft!==void 0)return Ft}}}}function C(F,N,V,K,Q,at,it,q,W){z(F,K+it);var Z=0,G=2*F,et;for(B(Z++,0,0,K,0,it,V?16:0,-1/0,1/0),V||B(Z++,0,0,it,0,K,1,-1/0,1/0);Z>0;){Z-=1;var nt=Z*l,X=w[nt],Y=w[nt+1],ot=w[nt+2],rt=w[nt+3],ht=w[nt+4],pt=w[nt+5],yt=Z*d,xt=I[yt],Ft=I[yt+1],Et=pt&1,mt=!!(pt&16),gt=Q,wt=at,Pt=q,Bt=W;if(Et&&(gt=q,wt=W,Pt=Q,Bt=at),!(pt&2&&(ot=k(F,X,Y,ot,gt,wt,Ft),Y>=ot))&&!(pt&4&&(Y=_(F,X,Y,ot,gt,wt,xt),Y>=ot))){var kt=ot-Y,jt=ht-rt;if(mt){if(F*kt*(kt+jt)<u){if(et=h.scanComplete(F,X,N,Y,ot,gt,wt,rt,ht,Pt,Bt),et!==void 0)return et;continue}}else if(F*Math.min(kt,jt)<x){if(et=a(F,X,N,Et,Y,ot,gt,wt,rt,ht,Pt,Bt),et!==void 0)return et;continue}else if(F*kt*jt<s){if(et=h.scanBipartite(F,X,N,Et,Y,ot,gt,wt,rt,ht,Pt,Bt),et!==void 0)return et;continue}var Ht=c(F,X,Y,ot,gt,wt,xt,Ft);if(Y<Ht)if(F*(Ht-Y)<x){if(et=o(F,X+1,N,Y,Ht,gt,wt,rt,ht,Pt,Bt),et!==void 0)return et}else if(X===F-2){if(Et?et=h.sweepBipartite(F,N,rt,ht,Pt,Bt,Y,Ht,gt,wt):et=h.sweepBipartite(F,N,Y,Ht,gt,wt,rt,ht,Pt,Bt),et!==void 0)return et}else B(Z++,X+1,Y,Ht,rt,ht,Et,-1/0,1/0),B(Z++,X+1,rt,ht,Y,Ht,Et^1,-1/0,1/0);if(Ht<ot){var Vt=y(F,X,rt,ht,Pt,Bt),ee=Pt[G*Vt+X],te=T(F,X,Vt,ht,Pt,Bt,ee);if(te<ht&&B(Z++,X,Ht,ot,te,ht,(Et|4)+(mt?16:0),ee,Ft),rt<Vt&&B(Z++,X,Ht,ot,rt,Vt,(Et|2)+(mt?16:0),xt,ee),Vt+1===te){if(mt?et=R(F,X,N,Ht,ot,gt,wt,Vt,Pt,Bt[Vt]):et=O(F,X,N,Et,Ht,ot,gt,wt,Vt,Pt,Bt[Vt]),et!==void 0)return et}else if(Vt<te){var ae;if(mt){if(ae=b(F,X,Ht,ot,gt,wt,ee),Ht<ae){var le=T(F,X,Ht,ae,gt,wt,ee);if(X===F-2){if(Ht<le&&(et=h.sweepComplete(F,N,Ht,le,gt,wt,Vt,te,Pt,Bt),et!==void 0)||le<ae&&(et=h.sweepBipartite(F,N,le,ae,gt,wt,Vt,te,Pt,Bt),et!==void 0))return et}else Ht<le&&B(Z++,X+1,Ht,le,Vt,te,16,-1/0,1/0),le<ae&&(B(Z++,X+1,le,ae,Vt,te,0,-1/0,1/0),B(Z++,X+1,Vt,te,le,ae,1,-1/0,1/0))}}else Et?ae=P(F,X,Ht,ot,gt,wt,ee):ae=b(F,X,Ht,ot,gt,wt,ee),Ht<ae&&(X===F-2?Et?et=h.sweepBipartite(F,N,Vt,te,Pt,Bt,Ht,ae,gt,wt):et=h.sweepBipartite(F,N,Ht,ae,gt,wt,Vt,te,Pt,Bt):(B(Z++,X+1,Ht,ae,Vt,te,Et,-1/0,1/0),B(Z++,X+1,Vt,te,Ht,ae,Et^1,-1/0,1/0)))}}}}}},2464:function(g,v,e){g.exports=o;var r=e(122),f=r("lo<p0"),n=8;function a(h,y,p,x,s,u){for(var c=2*h,T=c*(p+1)+y,k=p+1;k<x;++k,T+=c)for(var _=s[T],b=k,P=c*(k-1);b>p&&s[P+y]>_;--b,P-=c){for(var l=P,d=P+c,L=0;L<c;++L,++l,++d){var w=s[l];s[l]=s[d],s[d]=w}var I=u[b];u[b]=u[b-1],u[b-1]=I}}function o(h,y,p,x,s,u){if(x<=p+1)return p;for(var c=p,T=x,k=x+p>>>1,_=2*h,b=k,P=s[_*k+y];c<T;){if(T-c<n){a(h,y,c,T,s,u),P=s[_*k+y];break}var l=T-c,d=Math.random()*l+c|0,L=s[_*d+y],w=Math.random()*l+c|0,I=s[_*w+y],z=Math.random()*l+c|0,B=s[_*z+y];L<=I?B>=I?(b=w,P=I):L>=B?(b=d,P=L):(b=z,P=B):I>=B?(b=w,P=I):B>=L?(b=d,P=L):(b=z,P=B);for(var O=_*(T-1),R=_*b,C=0;C<_;++C,++O,++R){var F=s[O];s[O]=s[R],s[R]=F}var N=u[T-1];u[T-1]=u[b],u[b]=N,b=f(h,y,c,T-1,s,u,P);for(var O=_*(T-1),R=_*b,C=0;C<_;++C,++O,++R){var F=s[O];s[O]=s[R],s[R]=F}var N=u[T-1];if(u[T-1]=u[b],u[b]=N,k<b){for(T=b-1;c<T&&s[_*(T-1)+y]===P;)T-=1;T+=1}else if(b<k)for(c=b+1;c<T&&s[_*c+y]===P;)c+=1;else break}return f(h,y,p,k,s,u,s[_*k+y])}},122:function(g){g.exports=e;var v={"lo===p0":r,"lo<p0":f,"lo<=p0":n,"hi<=p0":a,"lo<p0&&p0<=hi":h,"lo<=p0&&p0<=hi":o,"!(lo>=p0)&&!(p1>=hi)":y};function e(p){return v[p]}function r(p,x,s,u,c,T,k){for(var _=2*p,b=_*s,P=b,l=s,d=x,L=p+x,w=s;u>w;++w,b+=_){var I=c[b+d];if(I===k)if(l===w)l+=1,P+=_;else{for(var z=0;_>z;++z){var B=c[b+z];c[b+z]=c[P],c[P++]=B}var O=T[w];T[w]=T[l],T[l++]=O}}return l}function f(p,x,s,u,c,T,k){for(var _=2*p,b=_*s,P=b,l=s,d=x,L=p+x,w=s;u>w;++w,b+=_){var I=c[b+d];if(I<k)if(l===w)l+=1,P+=_;else{for(var z=0;_>z;++z){var B=c[b+z];c[b+z]=c[P],c[P++]=B}var O=T[w];T[w]=T[l],T[l++]=O}}return l}function n(p,x,s,u,c,T,k){for(var _=2*p,b=_*s,P=b,l=s,d=x,L=p+x,w=s;u>w;++w,b+=_){var I=c[b+L];if(I<=k)if(l===w)l+=1,P+=_;else{for(var z=0;_>z;++z){var B=c[b+z];c[b+z]=c[P],c[P++]=B}var O=T[w];T[w]=T[l],T[l++]=O}}return l}function a(p,x,s,u,c,T,k){for(var _=2*p,b=_*s,P=b,l=s,d=x,L=p+x,w=s;u>w;++w,b+=_){var I=c[b+L];if(I<=k)if(l===w)l+=1,P+=_;else{for(var z=0;_>z;++z){var B=c[b+z];c[b+z]=c[P],c[P++]=B}var O=T[w];T[w]=T[l],T[l++]=O}}return l}function o(p,x,s,u,c,T,k){for(var _=2*p,b=_*s,P=b,l=s,d=x,L=p+x,w=s;u>w;++w,b+=_){var I=c[b+d],z=c[b+L];if(I<=k&&k<=z)if(l===w)l+=1,P+=_;else{for(var B=0;_>B;++B){var O=c[b+B];c[b+B]=c[P],c[P++]=O}var R=T[w];T[w]=T[l],T[l++]=R}}return l}function h(p,x,s,u,c,T,k){for(var _=2*p,b=_*s,P=b,l=s,d=x,L=p+x,w=s;u>w;++w,b+=_){var I=c[b+d],z=c[b+L];if(I<k&&k<=z)if(l===w)l+=1,P+=_;else{for(var B=0;_>B;++B){var O=c[b+B];c[b+B]=c[P],c[P++]=O}var R=T[w];T[w]=T[l],T[l++]=R}}return l}function y(p,x,s,u,c,T,k,_){for(var b=2*p,P=b*s,l=P,d=s,L=x,w=p+x,I=s;u>I;++I,P+=b){var z=c[P+L],B=c[P+w];if(!(z>=k)&&!(_>=B))if(d===I)d+=1,l+=b;else{for(var O=0;b>O;++O){var R=c[P+O];c[P+O]=c[l],c[l++]=R}var C=T[I];T[I]=T[d],T[d++]=C}}return d}},309:function(g){g.exports=e;var v=32;function e(x,s){s<=4*v?r(0,s-1,x):p(0,s-1,x)}function r(x,s,u){for(var c=2*(x+1),T=x+1;T<=s;++T){for(var k=u[c++],_=u[c++],b=T,P=c-2;b-- >x;){var l=u[P-2],d=u[P-1];if(l<k||l===k&&d<_)break;u[P]=l,u[P+1]=d,P-=2}u[P]=k,u[P+1]=_}}function f(x,s,u){x*=2,s*=2;var c=u[x],T=u[x+1];u[x]=u[s],u[x+1]=u[s+1],u[s]=c,u[s+1]=T}function n(x,s,u){x*=2,s*=2,u[x]=u[s],u[x+1]=u[s+1]}function a(x,s,u,c){x*=2,s*=2,u*=2;var T=c[x],k=c[x+1];c[x]=c[s],c[x+1]=c[s+1],c[s]=c[u],c[s+1]=c[u+1],c[u]=T,c[u+1]=k}function o(x,s,u,c,T){x*=2,s*=2,T[x]=T[s],T[s]=u,T[x+1]=T[s+1],T[s+1]=c}function h(x,s,u){x*=2,s*=2;var c=u[x],T=u[s];return c<T?!1:c===T?u[x+1]>u[s+1]:!0}function y(x,s,u,c){x*=2;var T=c[x];return T<s?!0:T===s?c[x+1]<u:!1}function p(x,s,u){var c=(s-x+1)/6|0,T=x+c,k=s-c,_=x+s>>1,b=_-c,P=_+c,l=T,d=b,L=_,w=P,I=k,z=x+1,B=s-1,O=0;h(l,d,u)&&(O=l,l=d,d=O),h(w,I,u)&&(O=w,w=I,I=O),h(l,L,u)&&(O=l,l=L,L=O),h(d,L,u)&&(O=d,d=L,L=O),h(l,w,u)&&(O=l,l=w,w=O),h(L,w,u)&&(O=L,L=w,w=O),h(d,I,u)&&(O=d,d=I,I=O),h(d,L,u)&&(O=d,d=L,L=O),h(w,I,u)&&(O=w,w=I,I=O);for(var R=u[2*d],C=u[2*d+1],F=u[2*w],N=u[2*w+1],V=2*l,K=2*L,Q=2*I,at=2*T,it=2*_,q=2*k,W=0;W<2;++W){var Z=u[V+W],G=u[K+W],et=u[Q+W];u[at+W]=Z,u[it+W]=G,u[q+W]=et}n(b,x,u),n(P,s,u);for(var nt=z;nt<=B;++nt)if(y(nt,R,C,u))nt!==z&&f(nt,z,u),++z;else if(!y(nt,F,N,u))for(;;)if(y(B,F,N,u)){y(B,R,C,u)?(a(nt,z,B,u),++z,--B):(f(nt,B,u),--B);break}else{if(--B<nt)break;continue}o(x,z-1,R,C,u),o(s,B+1,F,N,u),z-2-x<=v?r(x,z-2,u):p(x,z-2,u),s-(B+2)<=v?r(B+2,s,u):p(B+2,s,u),B-z<=v?r(z,B,u):p(z,B,u)}},1390:function(g,v,e){g.exports={init:T,sweepBipartite:b,sweepComplete:P,scanBipartite:l,scanComplete:d};var r=e(5306),f=e(2288),n=e(309),a=1<<28,o=1024,h=r.mallocInt32(o),y=r.mallocInt32(o),p=r.mallocInt32(o),x=r.mallocInt32(o),s=r.mallocInt32(o),u=r.mallocInt32(o),c=r.mallocDouble(o*8);function T(L){var w=f.nextPow2(L);h.length<w&&(r.free(h),h=r.mallocInt32(w)),y.length<w&&(r.free(y),y=r.mallocInt32(w)),p.length<w&&(r.free(p),p=r.mallocInt32(w)),x.length<w&&(r.free(x),x=r.mallocInt32(w)),s.length<w&&(r.free(s),s=r.mallocInt32(w)),u.length<w&&(r.free(u),u=r.mallocInt32(w));var I=8*w;c.length<I&&(r.free(c),c=r.mallocDouble(I))}function k(L,w,I,z){var B=w[z],O=L[I-1];L[B]=O,w[O]=B}function _(L,w,I,z){L[I]=z,w[z]=I}function b(L,w,I,z,B,O,R,C,F,N){for(var V=0,K=2*L,Q=L-1,at=K-1,it=I;it<z;++it){var q=O[it],W=K*it;c[V++]=B[W+Q],c[V++]=-(q+1),c[V++]=B[W+at],c[V++]=q}for(var it=R;it<C;++it){var q=N[it]+a,Z=K*it;c[V++]=F[Z+Q],c[V++]=-q,c[V++]=F[Z+at],c[V++]=q}var G=V>>>1;n(c,G);for(var et=0,nt=0,it=0;it<G;++it){var X=c[2*it+1]|0;if(X>=a)X=X-a|0,k(p,x,nt--,X);else if(X>=0)k(h,y,et--,X);else if(X<=-a){X=-X-a|0;for(var Y=0;Y<et;++Y){var ot=w(h[Y],X);if(ot!==void 0)return ot}_(p,x,nt++,X)}else{X=-X-1|0;for(var Y=0;Y<nt;++Y){var ot=w(X,p[Y]);if(ot!==void 0)return ot}_(h,y,et++,X)}}}function P(L,w,I,z,B,O,R,C,F,N){for(var V=0,K=2*L,Q=L-1,at=K-1,it=I;it<z;++it){var q=O[it]+1<<1,W=K*it;c[V++]=B[W+Q],c[V++]=-q,c[V++]=B[W+at],c[V++]=q}for(var it=R;it<C;++it){var q=N[it]+1<<1,Z=K*it;c[V++]=F[Z+Q],c[V++]=-q|1,c[V++]=F[Z+at],c[V++]=q|1}var G=V>>>1;n(c,G);for(var et=0,nt=0,X=0,it=0;it<G;++it){var Y=c[2*it+1]|0,ot=Y&1;if(it<G-1&&Y>>1===c[2*it+3]>>1&&(ot=2,it+=1),Y<0){for(var rt=-(Y>>1)-1,ht=0;ht<X;++ht){var pt=w(s[ht],rt);if(pt!==void 0)return pt}if(ot!==0)for(var ht=0;ht<et;++ht){var pt=w(h[ht],rt);if(pt!==void 0)return pt}if(ot!==1)for(var ht=0;ht<nt;++ht){var pt=w(p[ht],rt);if(pt!==void 0)return pt}ot===0?_(h,y,et++,rt):ot===1?_(p,x,nt++,rt):ot===2&&_(s,u,X++,rt)}else{var rt=(Y>>1)-1;ot===0?k(h,y,et--,rt):ot===1?k(p,x,nt--,rt):ot===2&&k(s,u,X--,rt)}}}function l(L,w,I,z,B,O,R,C,F,N,V,K){var Q=0,at=2*L,it=w,q=w+L,W=1,Z=1;z?Z=a:W=a;for(var G=B;G<O;++G){var et=G+W,nt=at*G;c[Q++]=R[nt+it],c[Q++]=-et,c[Q++]=R[nt+q],c[Q++]=et}for(var G=F;G<N;++G){var et=G+Z,X=at*G;c[Q++]=V[X+it],c[Q++]=-et}var Y=Q>>>1;n(c,Y);for(var ot=0,G=0;G<Y;++G){var rt=c[2*G+1]|0;if(rt<0){var et=-rt,ht=!1;if(et>=a?(ht=!z,et-=a):(ht=!!z,et-=1),ht)_(h,y,ot++,et);else{var pt=K[et],yt=at*et,xt=V[yt+w+1],Ft=V[yt+w+1+L];t:for(var Et=0;Et<ot;++Et){var mt=h[Et],gt=at*mt;if(!(Ft<R[gt+w+1]||R[gt+w+1+L]<xt)){for(var wt=w+2;wt<L;++wt)if(V[yt+wt+L]<R[gt+wt]||R[gt+wt+L]<V[yt+wt])continue t;var Pt=C[mt],Bt;if(z?Bt=I(pt,Pt):Bt=I(Pt,pt),Bt!==void 0)return Bt}}}}else k(h,y,ot--,rt-W)}}function d(L,w,I,z,B,O,R,C,F,N,V){for(var K=0,Q=2*L,at=w,it=w+L,q=z;q<B;++q){var W=q+a,Z=Q*q;c[K++]=O[Z+at],c[K++]=-W,c[K++]=O[Z+it],c[K++]=W}for(var q=C;q<F;++q){var W=q+1,G=Q*q;c[K++]=N[G+at],c[K++]=-W}var et=K>>>1;n(c,et);for(var nt=0,q=0;q<et;++q){var X=c[2*q+1]|0;if(X<0){var W=-X;if(W>=a)h[nt++]=W-a;else{W-=1;var Y=V[W],ot=Q*W,rt=N[ot+w+1],ht=N[ot+w+1+L];t:for(var pt=0;pt<nt;++pt){var yt=h[pt],xt=R[yt];if(xt===Y)break;var Ft=Q*yt;if(!(ht<O[Ft+w+1]||O[Ft+w+1+L]<rt)){for(var Et=w+2;Et<L;++Et)if(N[ot+Et+L]<O[Ft+Et]||O[Ft+Et+L]<N[ot+Et])continue t;var mt=I(xt,Y);if(mt!==void 0)return mt}}}}else{for(var W=X-a,pt=nt-1;pt>=0;--pt)if(h[pt]===W){for(var Et=pt+1;Et<nt;++Et)h[Et-1]=h[Et];break}--nt}}}},7761:function(g,v,e){var r=e(9971),f=e(743),n=e(2161),a=e(7098);g.exports=x;function o(s){return[Math.min(s[0],s[1]),Math.max(s[0],s[1])]}function h(s,u){return s[0]-u[0]||s[1]-u[1]}function y(s){return s.map(o).sort(h)}function p(s,u,c){return u in s?s[u]:c}function x(s,u,c){Array.isArray(u)?(c=c||{},u=u||[]):(c=u||{},u=[]);var T=!!p(c,"delaunay",!0),k=!!p(c,"interior",!0),_=!!p(c,"exterior",!0),b=!!p(c,"infinity",!1);if(!k&&!_||s.length===0)return[];var P=r(s,u);if(T||k!==_||b){for(var l=f(s.length,y(u)),d=0;d<P.length;++d){var L=P[d];l.addTriangle(L[0],L[1],L[2])}return T&&n(s,l),_?k?b?a(l,0,b):l.cells():a(l,1,b):a(l,-1)}else return P}},2161:function(g,v,e){var r=e(2227)[4];e(5070),g.exports=n;function f(a,o,h,y,p,x){var s=o.opposite(y,p);if(!(s<0)){if(p<y){var u=y;y=p,p=u,u=x,x=s,s=u}o.isConstraint(y,p)||r(a[y],a[p],a[x],a[s])<0&&h.push(y,p)}}function n(a,o){for(var h=[],y=a.length,p=o.stars,x=0;x<y;++x)for(var s=p[x],u=1;u<s.length;u+=2){var c=s[u];if(!(c<x)&&!o.isConstraint(x,c)){for(var T=s[u-1],k=-1,_=1;_<s.length;_+=2)if(s[_-1]===c){k=s[_];break}k<0||r(a[x],a[c],a[T],a[k])<0&&h.push(x,c)}}for(;h.length>0;){for(var c=h.pop(),x=h.pop(),T=-1,k=-1,s=p[x],b=1;b<s.length;b+=2){var P=s[b-1],l=s[b];P===c?k=l:l===c&&(T=P)}T<0||k<0||r(a[x],a[c],a[T],a[k])>=0||(o.flip(x,c),f(a,o,h,T,x,k),f(a,o,h,x,k,T),f(a,o,h,k,c,T),f(a,o,h,c,T,k))}}},7098:function(g,v,e){var r=e(5070);g.exports=y;function f(p,x,s,u,c,T,k){this.cells=p,this.neighbor=x,this.flags=u,this.constraint=s,this.active=c,this.next=T,this.boundary=k}var n=f.prototype;function a(p,x){return p[0]-x[0]||p[1]-x[1]||p[2]-x[2]}n.locate=function(){var p=[0,0,0];return function(x,s,u){var c=x,T=s,k=u;return s<u?s<x&&(c=s,T=u,k=x):u<x&&(c=u,T=x,k=s),c<0?-1:(p[0]=c,p[1]=T,p[2]=k,r.eq(this.cells,p,a))}}();function o(p,x){for(var s=p.cells(),u=s.length,c=0;c<u;++c){var T=s[c],k=T[0],_=T[1],b=T[2];_<b?_<k&&(T[0]=_,T[1]=b,T[2]=k):b<k&&(T[0]=b,T[1]=k,T[2]=_)}s.sort(a);for(var P=new Array(u),c=0;c<P.length;++c)P[c]=0;var l=[],d=[],L=new Array(3*u),w=new Array(3*u),I=null;x&&(I=[]);for(var z=new f(s,L,w,P,l,d,I),c=0;c<u;++c)for(var T=s[c],B=0;B<3;++B){var k=T[B],_=T[(B+1)%3],O=L[3*c+B]=z.locate(_,k,p.opposite(_,k)),R=w[3*c+B]=p.isConstraint(k,_);O<0&&(R?d.push(c):(l.push(c),P[c]=1),x&&I.push([_,k,-1]))}return z}function h(p,x,s){for(var u=0,c=0;c<p.length;++c)x[c]===s&&(p[u++]=p[c]);return p.length=u,p}function y(p,x,s){var u=o(p,s);if(x===0)return s?u.cells.concat(u.boundary):u.cells;for(var c=1,T=u.active,k=u.next,_=u.flags,b=u.cells,P=u.constraint,l=u.neighbor;T.length>0||k.length>0;){for(;T.length>0;){var d=T.pop();if(_[d]!==-c){_[d]=c,b[d];for(var L=0;L<3;++L){var w=l[3*d+L];w>=0&&_[w]===0&&(P[3*d+L]?k.push(w):(T.push(w),_[w]=c))}}}var I=k;k=T,T=I,k.length=0,c=-c}var z=h(b,_,x);return s?z.concat(u.boundary):z}},9971:function(g,v,e){var r=e(5070),f=e(417)[3],n=0,a=1,o=2;g.exports=k;function h(_,b,P,l,d){this.a=_,this.b=b,this.idx=P,this.lowerIds=l,this.upperIds=d}function y(_,b,P,l){this.a=_,this.b=b,this.type=P,this.idx=l}function p(_,b){var P=_.a[0]-b.a[0]||_.a[1]-b.a[1]||_.type-b.type;return P||_.type!==n&&(P=f(_.a,_.b,b.b),P)?P:_.idx-b.idx}function x(_,b){return f(_.a,_.b,b)}function s(_,b,P,l,d){for(var L=r.lt(b,l,x),w=r.gt(b,l,x),I=L;I<w;++I){for(var z=b[I],B=z.lowerIds,O=B.length;O>1&&f(P[B[O-2]],P[B[O-1]],l)>0;)_.push([B[O-1],B[O-2],d]),O-=1;B.length=O,B.push(d);for(var R=z.upperIds,O=R.length;O>1&&f(P[R[O-2]],P[R[O-1]],l)<0;)_.push([R[O-2],R[O-1],d]),O-=1;R.length=O,R.push(d)}}function u(_,b){var P;return _.a[0]<b.a[0]?P=f(_.a,_.b,b.a):P=f(b.b,b.a,_.a),P||(b.b[0]<_.b[0]?P=f(_.a,_.b,b.b):P=f(b.b,b.a,_.b),P||_.idx-b.idx)}function c(_,b,P){var l=r.le(_,P,u),d=_[l],L=d.upperIds,w=L[L.length-1];d.upperIds=[w],_.splice(l+1,0,new h(P.a,P.b,P.idx,[w],L))}function T(_,b,P){var l=P.a;P.a=P.b,P.b=l;var d=r.eq(_,P,u),L=_[d],w=_[d-1];w.upperIds=L.upperIds,_.splice(d,1)}function k(_,b){for(var P=_.length,l=b.length,d=[],L=0;L<P;++L)d.push(new y(_[L],null,n,L));for(var L=0;L<l;++L){var w=b[L],I=_[w[0]],z=_[w[1]];I[0]<z[0]?d.push(new y(I,z,o,L),new y(z,I,a,L)):I[0]>z[0]&&d.push(new y(z,I,o,L),new y(I,z,a,L))}d.sort(p);for(var B=d[0].a[0]-(1+Math.abs(d[0].a[0]))*Math.pow(2,-52),O=[new h([B,1],[B,0],-1,[],[])],R=[],L=0,C=d.length;L<C;++L){var F=d[L],N=F.type;N===n?s(R,O,_,F.a,F.idx):N===o?c(O,_,F):T(O,_,F)}return R}},743:function(g,v,e){var r=e(5070);g.exports=o;function f(h,y){this.stars=h,this.edges=y}var n=f.prototype;function a(h,y,p){for(var x=1,s=h.length;x<s;x+=2)if(h[x-1]===y&&h[x]===p){h[x-1]=h[s-2],h[x]=h[s-1],h.length=s-2;return}}n.isConstraint=function(){var h=[0,0];function y(p,x){return p[0]-x[0]||p[1]-x[1]}return function(p,x){return h[0]=Math.min(p,x),h[1]=Math.max(p,x),r.eq(this.edges,h,y)>=0}}(),n.removeTriangle=function(h,y,p){var x=this.stars;a(x[h],y,p),a(x[y],p,h),a(x[p],h,y)},n.addTriangle=function(h,y,p){var x=this.stars;x[h].push(y,p),x[y].push(p,h),x[p].push(h,y)},n.opposite=function(h,y){for(var p=this.stars[y],x=1,s=p.length;x<s;x+=2)if(p[x]===h)return p[x-1];return-1},n.flip=function(h,y){var p=this.opposite(h,y),x=this.opposite(y,h);this.removeTriangle(h,y,p),this.removeTriangle(y,h,x),this.addTriangle(h,x,p),this.addTriangle(y,p,x)},n.edges=function(){for(var h=this.stars,y=[],p=0,x=h.length;p<x;++p)for(var s=h[p],u=0,c=s.length;u<c;u+=2)y.push([s[u],s[u+1]]);return y},n.cells=function(){for(var h=this.stars,y=[],p=0,x=h.length;p<x;++p)for(var s=h[p],u=0,c=s.length;u<c;u+=2){var T=s[u],k=s[u+1];p<Math.min(T,k)&&y.push([p,T,k])}return y};function o(h,y){for(var p=new Array(h),x=0;x<h;++x)p[x]=[];return new f(p,y)}},9887:function(g){g.exports=v;function v(e){for(var r=1,f=1;f<e.length;++f)for(var n=0;n<f;++n)if(e[f]<e[n])r=-r;else if(e[n]===e[f])return 0;return r}},9243:function(g,v,e){var r=e(3094),f=e(6606);function n(h,y){for(var p=0,x=h.length,s=0;s<x;++s)p+=h[s]*y[s];return p}function a(h){var y=h.length;if(y===0)return[];h[0].length;var p=r([h.length+1,h.length+1],1),x=r([h.length+1],1);p[y][y]=0;for(var s=0;s<y;++s){for(var u=0;u<=s;++u)p[u][s]=p[s][u]=2*n(h[s],h[u]);x[s]=n(h[s],h[s])}for(var c=f(p,x),T=0,k=c[y+1],s=0;s<k.length;++s)T+=k[s];for(var _=new Array(y),s=0;s<y;++s){for(var k=c[s],b=0,u=0;u<k.length;++u)b+=k[u];_[s]=b/T}return _}function o(h){if(h.length===0)return[];for(var y=h[0].length,p=r([y]),x=a(h),s=0;s<h.length;++s)for(var u=0;u<y;++u)p[u]+=h[s][u]*x[s];return p}o.barycenetric=a,g.exports=o},1778:function(g,v,e){g.exports=f;var r=e(9243);function f(n){for(var a=r(n),o=0,h=0;h<n.length;++h)for(var y=n[h],p=0;p<a.length;++p)o+=Math.pow(y[p]-a[p],2);return Math.sqrt(o/n.length)}},197:function(g,v,e){g.exports=I;var r=e(1731),f=e(2569),n=e(4434),a=e(5125),o=e(8846),h=e(7999),y=e(2826),p=e(8551),x=e(5528);function s(z){var B=h(z);return[p(B,-1/0),p(B,1/0)]}function u(z,B){for(var O=new Array(B.length),R=0;R<B.length;++R){var C=B[R],F=z[C[0]],N=z[C[1]];O[R]=[p(Math.min(F[0],N[0]),-1/0),p(Math.min(F[1],N[1]),-1/0),p(Math.max(F[0],N[0]),1/0),p(Math.max(F[1],N[1]),1/0)]}return O}function c(z){for(var B=new Array(z.length),O=0;O<z.length;++O){var R=z[O];B[O]=[p(R[0],-1/0),p(R[1],-1/0),p(R[0],1/0),p(R[1],1/0)]}return B}function T(z,B,O){var R=[];return f(O,function(C,F){var N=B[C],V=B[F];if(!(N[0]===V[0]||N[0]===V[1]||N[1]===V[0]||N[1]===V[1])){var K=z[N[0]],Q=z[N[1]],at=z[V[0]],it=z[V[1]];n(K,Q,at,it)&&R.push([C,F])}}),R}function k(z,B,O,R){var C=[];return f(O,R,function(F,N){var V=B[F];if(!(V[0]===N||V[1]===N)){var K=z[N],Q=z[V[0]],at=z[V[1]];n(Q,at,K,K)&&C.push([F,N])}}),C}function _(z,B,O,R,C){var F,N,V=z.map(function(yt){return[a(yt[0]),a(yt[1])]});for(F=0;F<O.length;++F){var K=O[F];N=K[0];var Q=K[1],at=B[N],it=B[Q],q=x(y(z[at[0]]),y(z[at[1]]),y(z[it[0]]),y(z[it[1]]));if(q){var W=z.length;z.push([h(q[0]),h(q[1])]),V.push(q),R.push([N,W],[Q,W])}}for(R.sort(function(yt,xt){if(yt[0]!==xt[0])return yt[0]-xt[0];var Ft=V[yt[1]],Et=V[xt[1]];return o(Ft[0],Et[0])||o(Ft[1],Et[1])}),F=R.length-1;F>=0;--F){var Z=R[F];N=Z[0];var G=B[N],et=G[0],nt=G[1],X=z[et],Y=z[nt];if((X[0]-Y[0]||X[1]-Y[1])<0){var ot=et;et=nt,nt=ot}G[0]=et;var rt=G[1]=Z[1],ht;for(C&&(ht=G[2]);F>0&&R[F-1][0]===N;){var Z=R[--F],pt=Z[1];C?B.push([rt,pt,ht]):B.push([rt,pt]),rt=pt}C?B.push([rt,nt,ht]):B.push([rt,nt])}return V}function b(z,B,O){for(var R=B.length,C=new r(R),F=[],N=0;N<B.length;++N){var V=B[N],K=s(V[0]),Q=s(V[1]);F.push([p(K[0],-1/0),p(Q[0],-1/0),p(K[1],1/0),p(Q[1],1/0)])}f(F,function(Z,G){C.link(Z,G)});for(var at=!0,it=new Array(R),N=0;N<R;++N){var q=C.find(N);q!==N&&(at=!1,z[q]=[Math.min(z[N][0],z[q][0]),Math.min(z[N][1],z[q][1])])}if(at)return null;for(var W=0,N=0;N<R;++N){var q=C.find(N);q===N?(it[N]=W,z[W++]=z[N]):it[N]=-1}z.length=W;for(var N=0;N<R;++N)it[N]<0&&(it[N]=it[C.find(N)]);return it}function P(z,B){return z[0]-B[0]||z[1]-B[1]}function l(z,B){var O=z[0]-B[0]||z[1]-B[1];return O||(z[2]<B[2]?-1:z[2]>B[2]?1:0)}function d(z,B,O){if(z.length!==0){if(B)for(var R=0;R<z.length;++R){var C=z[R],F=B[C[0]],N=B[C[1]];C[0]=Math.min(F,N),C[1]=Math.max(F,N)}else for(var R=0;R<z.length;++R){var C=z[R],F=C[0],N=C[1];C[0]=Math.min(F,N),C[1]=Math.max(F,N)}O?z.sort(l):z.sort(P);for(var V=1,R=1;R<z.length;++R){var K=z[R-1],Q=z[R];Q[0]===K[0]&&Q[1]===K[1]&&(!O||Q[2]===K[2])||(z[V++]=Q)}z.length=V}}function L(z,B,O){var R=b(z,[],c(z));return d(B,R,O),!!R}function w(z,B,O){var R=u(z,B),C=T(z,B,R),F=c(z),N=k(z,B,R,F),V=_(z,B,C,N,O),K=b(z,V);return d(B,K,O),K?!0:C.length>0||N.length>0}function I(z,B,O){var R;if(O){R=B;for(var C=new Array(B.length),F=0;F<B.length;++F){var N=B[F];C[F]=[N[0],N[1],O[F]]}B=C}for(var V=L(z,B,!!O);w(z,B,!!O);)V=!0;if(O&&V){R.length=0,O.length=0;for(var F=0;F<B.length;++F){var N=B[F];R.push([N[0],N[1]]),O.push(N[2])}}return V}},5528:function(g,v,e){g.exports=x;var r=e(3962),f=e(9189),n=e(4354),a=e(4951),o=e(6695),h=e(7584),y=e(4469);function p(s,u){return n(r(s[0],u[1]),r(s[1],u[0]))}function x(s,u,c,T){var k=o(u,s),_=o(T,c),b=p(k,_);if(a(b)===0)return null;var P=o(s,c),l=p(_,P),d=f(l,b),L=y(k,d),w=h(s,L);return w}},5692:function(g){g.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},9156:function(g,v,e){var r=e(5692),f=e(3578);g.exports=n;function n(y){var p,x,s,u,c,T,k,_,d,b,P;if(y||(y={}),_=(y.nshades||72)-1,k=y.format||"hex",T=y.colormap,T||(T="jet"),typeof T=="string"){if(T=T.toLowerCase(),!r[T])throw Error(T+" not a supported colorscale");c=r[T]}else if(Array.isArray(T))c=T.slice();else throw Error("unsupported colormap option",T);if(c.length>_+1)throw new Error(T+" map requires nshades to be at least size "+c.length);Array.isArray(y.alpha)?y.alpha.length!==2?b=[1,1]:b=y.alpha.slice():typeof y.alpha=="number"?b=[y.alpha,y.alpha]:b=[1,1],p=c.map(function(I){return Math.round(I.index*_)}),b[0]=Math.min(Math.max(b[0],0),1),b[1]=Math.min(Math.max(b[1],0),1);var l=c.map(function(I,z){var B=c[z].index,O=c[z].rgb.slice();return O.length===4&&O[3]>=0&&O[3]<=1||(O[3]=b[0]+(b[1]-b[0])*B),O}),d=[];for(P=0;P<p.length-1;++P){u=p[P+1]-p[P],x=l[P],s=l[P+1];for(var L=0;L<u;L++){var w=L/u;d.push([Math.round(f(x[0],s[0],w)),Math.round(f(x[1],s[1],w)),Math.round(f(x[2],s[2],w)),f(x[3],s[3],w)])}}return d.push(c[c.length-1].rgb.concat(b[1])),k==="hex"?d=d.map(o):k==="rgbaString"?d=d.map(h):k==="float"&&(d=d.map(a)),d}function a(y){return[y[0]/255,y[1]/255,y[2]/255,y[3]]}function o(y){for(var p,x="#",s=0;s<3;++s)p=y[s],p=p.toString(16),x+=("00"+p).substr(p.length);return x}function h(y){return"rgba("+y.join(",")+")"}},9398:function(g,v,e){g.exports=y;var r=e(417),f=e(7538),n=e(87),a=e(2019),o=e(9662);function h(p,x,s){var u=n(p[0],-x[0]),c=n(p[1],-x[1]),T=n(s[0],-x[0]),k=n(s[1],-x[1]),_=o(a(u,T),a(c,k));return _[_.length-1]>=0}function y(p,x,s,u){var c=r(x,s,u);if(c===0){var T=f(r(p,x,s)),k=f(r(p,x,u));if(T===k){if(T===0){var _=h(p,x,s),b=h(p,x,u);return _===b?0:_?1:-1}return 0}else{if(k===0)return T>0||h(p,x,u)?-1:1;if(T===0)return k>0||h(p,x,s)?1:-1}return f(k-T)}var P=r(p,x,s);if(P>0)return c>0&&r(p,x,u)>0?1:-1;if(P<0)return c>0||r(p,x,u)>0?1:-1;var l=r(p,x,u);return l>0||h(p,x,s)?1:-1}},7538:function(g){g.exports=function(v){return v<0?-1:v>0?1:0}},9209:function(g){g.exports=r;var v=Math.min;function e(f,n){return f-n}function r(f,n){var a=f.length,o=f.length-n.length;if(o)return o;switch(a){case 0:return 0;case 1:return f[0]-n[0];case 2:return f[0]+f[1]-n[0]-n[1]||v(f[0],f[1])-v(n[0],n[1]);case 3:var h=f[0]+f[1],y=n[0]+n[1];if(o=h+f[2]-(y+n[2]),o)return o;var p=v(f[0],f[1]),x=v(n[0],n[1]);return v(p,f[2])-v(x,n[2])||v(p+f[2],h)-v(x+n[2],y);case 4:var s=f[0],u=f[1],c=f[2],T=f[3],k=n[0],_=n[1],b=n[2],P=n[3];return s+u+c+T-(k+_+b+P)||v(s,u,c,T)-v(k,_,b,P,k)||v(s+u,s+c,s+T,u+c,u+T,c+T)-v(k+_,k+b,k+P,_+b,_+P,b+P)||v(s+u+c,s+u+T,s+c+T,u+c+T)-v(k+_+b,k+_+P,k+b+P,_+b+P);default:for(var l=f.slice().sort(e),d=n.slice().sort(e),L=0;L<a;++L)if(o=l[L]-d[L],o)return o;return 0}}},1284:function(g,v,e){var r=e(9209),f=e(9887);g.exports=n;function n(a,o){return r(a,o)||f(a)-f(o)}},5537:function(g,v,e){var r=e(8950),f=e(8722),n=e(3332);g.exports=a;function a(o){var h=o.length;if(h===0)return[];if(h===1)return[[0]];var y=o[0].length;return y===0?[]:y===1?r(o):y===2?f(o):n(o,y)}},8950:function(g){g.exports=v;function v(e){for(var r=0,f=0,n=1;n<e.length;++n)e[n][0]<e[r][0]&&(r=n),e[n][0]>e[f][0]&&(f=n);return r<f?[[r],[f]]:r>f?[[f],[r]]:[[r]]}},8722:function(g,v,e){g.exports=f;var r=e(3266);function f(n){var a=r(n),o=a.length;if(o<=2)return[];for(var h=new Array(o),y=a[o-1],p=0;p<o;++p){var x=a[p];h[p]=[y,x],y=x}return h}},3332:function(g,v,e){g.exports=o;var r=e(2183),f=e(2153);function n(h,y){for(var p=h.length,x=new Array(p),s=0;s<y.length;++s)x[s]=h[y[s]];for(var u=y.length,s=0;s<p;++s)y.indexOf(s)<0&&(x[u++]=h[s]);return x}function a(h,y){for(var p=h.length,x=y.length,s=0;s<p;++s)for(var u=h[s],c=0;c<u.length;++c){var T=u[c];if(T<x)u[c]=y[T];else{T=T-x;for(var k=0;k<x;++k)T>=y[k]&&(T+=1);u[c]=T}}return h}function o(h,y){try{return r(h,!0)}catch{var p=f(h);if(p.length<=y)return[];var x=n(h,p),s=r(x,!0);return a(s,p)}}},9680:function(g){function v(r,f,n,a,o,h){var y=6*o*o-6*o,p=3*o*o-4*o+1,x=-6*o*o+6*o,s=3*o*o-2*o;if(r.length){h||(h=new Array(r.length));for(var u=r.length-1;u>=0;--u)h[u]=y*r[u]+p*f[u]+x*n[u]+s*a[u];return h}return y*r+p*f+x*n[u]+s*a}function e(r,f,n,a,o,h){var y=o-1,p=o*o,x=y*y,s=(1+2*o)*x,u=o*x,c=p*(3-2*o),T=p*y;if(r.length){h||(h=new Array(r.length));for(var k=r.length-1;k>=0;--k)h[k]=s*r[k]+u*f[k]+c*n[k]+T*a[k];return h}return s*r+u*f+c*n+T*a}g.exports=e,g.exports.derivative=v},4419:function(g,v,e){var r=e(2183),f=e(1215);g.exports=h;function n(y,p){this.point=y,this.index=p}function a(y,p){for(var x=y.point,s=p.point,u=x.length,c=0;c<u;++c){var T=s[c]-x[c];if(T)return T}return 0}function o(y,p,x){if(y===1)return x?[[-1,0]]:[];var s=p.map(function(_,b){return[_[0],b]});s.sort(function(_,b){return _[0]-b[0]});for(var u=new Array(y-1),c=1;c<y;++c){var T=s[c-1],k=s[c];u[c-1]=[T[1],k[1]]}return x&&u.push([-1,u[0][1]],[u[y-1][1],-1]),u}function h(y,p){var x=y.length;if(x===0)return[];var s=y[0].length;if(s<1)return[];if(s===1)return o(x,y,p);for(var u=new Array(x),c=1,T=0;T<x;++T){for(var k=y[T],_=new Array(s+1),b=0,P=0;P<s;++P){var l=k[P];_[P]=l,b+=l*l}_[s]=b,u[T]=new n(_,T),c=Math.max(b,c)}f(u,a),x=u.length;for(var d=new Array(x+s+1),L=new Array(x+s+1),w=(s+1)*(s+1)*c,I=new Array(s+1),T=0;T<=s;++T)I[T]=0;I[s]=w,d[0]=I.slice(),L[0]=-1;for(var T=0;T<=s;++T){var _=I.slice();_[T]=1,d[T+1]=_,L[T+1]=-1}for(var T=0;T<x;++T){var z=u[T];d[T+s+1]=z.point,L[T+s+1]=z.index}var B=r(d,!1);if(p?B=B.filter(function(O){for(var R=0,C=0;C<=s;++C){var F=L[O[C]];if(F<0&&++R>=2)return!1;O[C]=F}return!0}):B=B.filter(function(O){for(var R=0;R<=s;++R){var C=L[O[R]];if(C<0)return!1;O[R]=C}return!0}),s&1)for(var T=0;T<B.length;++T){var z=B[T],_=z[0];z[0]=z[1],z[1]=_}return B}},8362:function(g){var v=!1;if(typeof Float64Array<"u"){var e=new Float64Array(1),r=new Uint32Array(e.buffer);if(e[0]=1,v=!0,r[1]===1072693248){let n=function(h,y){return r[0]=h,r[1]=y,e[0]},a=function(h){return e[0]=h,r[0]},o=function(h){return e[0]=h,r[1]};g.exports=function(h){return e[0]=h,[r[0],r[1]]},g.exports.pack=n,g.exports.lo=a,g.exports.hi=o}else if(r[0]===1072693248){let n=function(h,y){return r[1]=h,r[0]=y,e[0]},a=function(h){return e[0]=h,r[1]},o=function(h){return e[0]=h,r[0]};g.exports=function(h){return e[0]=h,[r[1],r[0]]},g.exports.pack=n,g.exports.lo=a,g.exports.hi=o}else v=!1}if(!v){let n=function(h,y){return f.writeUInt32LE(h,0,!0),f.writeUInt32LE(y,4,!0),f.readDoubleLE(0,!0)},a=function(h){return f.writeDoubleLE(h,0,!0),f.readUInt32LE(0,!0)},o=function(h){return f.writeDoubleLE(h,0,!0),f.readUInt32LE(4,!0)};var f=new Buffer(8);g.exports=function(h){return f.writeDoubleLE(h,0,!0),[f.readUInt32LE(0,!0),f.readUInt32LE(4,!0)]},g.exports.pack=n,g.exports.lo=a,g.exports.hi=o}g.exports.sign=function(n){return g.exports.hi(n)>>>31},g.exports.exponent=function(n){var a=g.exports.hi(n);return(a<<1>>>21)-1023},g.exports.fraction=function(n){var a=g.exports.lo(n),o=g.exports.hi(n),h=o&(1<<20)-1;return o&2146435072&&(h+=1048576),[a,h]},g.exports.denormalized=function(n){var a=g.exports.hi(n);return!(a&2146435072)}},3094:function(g){function v(f,n,a){var o=f[a]|0;if(o<=0)return[];var h=new Array(o),y;if(a===f.length-1)for(y=0;y<o;++y)h[y]=n;else for(y=0;y<o;++y)h[y]=v(f,n,a+1);return h}function e(f,n){var a,o;for(a=new Array(f),o=0;o<f;++o)a[o]=n;return a}function r(f,n){switch(typeof n>"u"&&(n=0),typeof f){case"number":if(f>0)return e(f|0,n);break;case"object":if(typeof f.length=="number")return v(f,n,0);break}return[]}g.exports=r},8348:function(g,v,e){g.exports=f;var r=e(1215);function f(n,a){var o=n.length;if(typeof a!="number"){a=0;for(var h=0;h<o;++h){var y=n[h];a=Math.max(a,y[0],y[1])}a=(a|0)+1}a=a|0;for(var p=new Array(a),h=0;h<a;++h)p[h]=[];for(var h=0;h<o;++h){var y=n[h];p[y[0]].push(y[1]),p[y[1]].push(y[0])}for(var x=0;x<a;++x)r(p[x],function(s,u){return s-u});return p}},5795:function(g){g.exports=v;function v(e,r,f){var n=r||0,a=f||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[n*e[12]+e[8],n*e[13]+e[9],n*e[14]+e[10],n*e[15]+e[11]],[a*e[12]-e[8],a*e[13]-e[9],a*e[14]-e[10],a*e[15]-e[11]]]}},8444:function(g,v,e){g.exports=y;var r=e(9680),f=e(5070);function n(p,x,s){return Math.min(x,Math.max(p,s))}function a(p,x,s){this.dimension=p.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var u=0;u<this.dimension;++u)this.bounds[0][u]=-1/0,this.bounds[1][u]=1/0;this._state=p.slice().reverse(),this._velocity=x.slice().reverse(),this._time=[s],this._scratch=[p.slice(),p.slice(),p.slice(),p.slice(),p.slice()]}var o=a.prototype;o.flush=function(p){var x=f.gt(this._time,p)-1;x<=0||(this._time.splice(0,x),this._state.splice(0,x*this.dimension),this._velocity.splice(0,x*this.dimension))},o.curve=function(p){var x=this._time,s=x.length,u=f.le(x,p),c=this._scratch[0],T=this._state,k=this._velocity,_=this.dimension,b=this.bounds;if(u<0)for(var P=_-1,l=0;l<_;++l,--P)c[l]=T[P];else if(u>=s-1)for(var P=T.length-1,d=p-x[s-1],l=0;l<_;++l,--P)c[l]=T[P]+d*k[P];else{for(var P=_*(u+1)-1,L=x[u],w=x[u+1],I=w-L||1,z=this._scratch[1],B=this._scratch[2],O=this._scratch[3],R=this._scratch[4],C=!0,l=0;l<_;++l,--P)z[l]=T[P],O[l]=k[P]*I,B[l]=T[P+_],R[l]=k[P+_]*I,C=C&&z[l]===B[l]&&O[l]===R[l]&&O[l]===0;if(C)for(var l=0;l<_;++l)c[l]=z[l];else r(z,O,B,R,(p-L)/I,c)}for(var F=b[0],N=b[1],l=0;l<_;++l)c[l]=n(F[l],N[l],c[l]);return c},o.dcurve=function(p){var x=this._time,s=x.length,u=f.le(x,p),c=this._scratch[0],T=this._state,k=this._velocity,_=this.dimension;if(u>=s-1){var b=T.length-1;p-x[s-1];for(var P=0;P<_;++P,--b)c[P]=k[b]}else{for(var b=_*(u+1)-1,l=x[u],d=x[u+1],L=d-l||1,w=this._scratch[1],I=this._scratch[2],z=this._scratch[3],B=this._scratch[4],O=!0,P=0;P<_;++P,--b)w[P]=T[b],z[P]=k[b]*L,I[P]=T[b+_],B[P]=k[b+_]*L,O=O&&w[P]===I[P]&&z[P]===B[P]&&z[P]===0;if(O)for(var P=0;P<_;++P)c[P]=0;else{r.derivative(w,z,I,B,(p-l)/L,c);for(var P=0;P<_;++P)c[P]/=L}}return c},o.lastT=function(){var p=this._time;return p[p.length-1]},o.stable=function(){for(var p=this._velocity,x=p.length,s=this.dimension-1;s>=0;--s)if(p[--x])return!1;return!0},o.jump=function(p){var x=this.lastT(),s=this.dimension;if(!(p<x||arguments.length!==s+1)){var u=this._state,c=this._velocity,T=u.length-this.dimension,k=this.bounds,_=k[0],b=k[1];this._time.push(x,p);for(var P=0;P<2;++P)for(var l=0;l<s;++l)u.push(u[T++]),c.push(0);this._time.push(p);for(var l=s;l>0;--l)u.push(n(_[l-1],b[l-1],arguments[l])),c.push(0)}},o.push=function(p){var x=this.lastT(),s=this.dimension;if(!(p<x||arguments.length!==s+1)){var u=this._state,c=this._velocity,T=u.length-this.dimension,k=p-x,_=this.bounds,b=_[0],P=_[1],l=k>1e-6?1/k:0;this._time.push(p);for(var d=s;d>0;--d){var L=n(b[d-1],P[d-1],arguments[d]);u.push(L),c.push((L-u[T++])*l)}}},o.set=function(p){var x=this.dimension;if(!(p<this.lastT()||arguments.length!==x+1)){var s=this._state,u=this._velocity,c=this.bounds,T=c[0],k=c[1];this._time.push(p);for(var _=x;_>0;--_)s.push(n(T[_-1],k[_-1],arguments[_])),u.push(0)}},o.move=function(p){var x=this.lastT(),s=this.dimension;if(!(p<=x||arguments.length!==s+1)){var u=this._state,c=this._velocity,T=u.length-this.dimension,k=this.bounds,_=k[0],b=k[1],P=p-x,l=P>1e-6?1/P:0;this._time.push(p);for(var d=s;d>0;--d){var L=arguments[d];u.push(n(_[d-1],b[d-1],u[T++]+L)),c.push(L*l)}}},o.idle=function(p){var x=this.lastT();if(!(p<x)){var s=this.dimension,u=this._state,c=this._velocity,T=u.length-s,k=this.bounds,_=k[0],b=k[1],P=p-x;this._time.push(p);for(var l=s-1;l>=0;--l)u.push(n(_[l],b[l],u[T]+P*c[T])),c.push(0),T+=1}};function h(p){for(var x=new Array(p),s=0;s<p;++s)x[s]=0;return x}function y(p,x,s){switch(arguments.length){case 0:return new a([0],[0],0);case 1:if(typeof p=="number"){var u=h(p);return new a(u,u,0)}else return new a(p,h(p.length),0);case 2:if(typeof x=="number"){var u=h(p.length);return new a(p,u,+x)}else s=0;case 3:if(p.length!==x.length)throw new Error("state and velocity lengths must match");return new a(p,x,s)}}},7080:function(g){g.exports=_;var v=0,e=1;function r(b,P,l,d,L,w){this._color=b,this.key=P,this.value=l,this.left=d,this.right=L,this._count=w}function f(b){return new r(b._color,b.key,b.value,b.left,b.right,b._count)}function n(b,P){return new r(b,P.key,P.value,P.left,P.right,P._count)}function a(b){b._count=1+(b.left?b.left._count:0)+(b.right?b.right._count:0)}function o(b,P){this._compare=b,this.root=P}var h=o.prototype;Object.defineProperty(h,"keys",{get:function(){var b=[];return this.forEach(function(P,l){b.push(P)}),b}}),Object.defineProperty(h,"values",{get:function(){var b=[];return this.forEach(function(P,l){b.push(l)}),b}}),Object.defineProperty(h,"length",{get:function(){return this.root?this.root._count:0}}),h.insert=function(b,P){for(var l=this._compare,d=this.root,L=[],w=[];d;){var I=l(b,d.key);L.push(d),w.push(I),I<=0?d=d.left:d=d.right}L.push(new r(v,b,P,null,null,1));for(var z=L.length-2;z>=0;--z){var d=L[z];w[z]<=0?L[z]=new r(d._color,d.key,d.value,L[z+1],d.right,d._count+1):L[z]=new r(d._color,d.key,d.value,d.left,L[z+1],d._count+1)}for(var z=L.length-1;z>1;--z){var B=L[z-1],d=L[z];if(B._color===e||d._color===e)break;var O=L[z-2];if(O.left===B)if(B.left===d){var R=O.right;if(R&&R._color===v)B._color=e,O.right=n(e,R),O._color=v,z-=1;else{if(O._color=v,O.left=B.right,B._color=e,B.right=O,L[z-2]=B,L[z-1]=d,a(O),a(B),z>=3){var C=L[z-3];C.left===O?C.left=B:C.right=B}break}}else{var R=O.right;if(R&&R._color===v)B._color=e,O.right=n(e,R),O._color=v,z-=1;else{if(B.right=d.left,O._color=v,O.left=d.right,d._color=e,d.left=B,d.right=O,L[z-2]=d,L[z-1]=B,a(O),a(B),a(d),z>=3){var C=L[z-3];C.left===O?C.left=d:C.right=d}break}}else if(B.right===d){var R=O.left;if(R&&R._color===v)B._color=e,O.left=n(e,R),O._color=v,z-=1;else{if(O._color=v,O.right=B.left,B._color=e,B.left=O,L[z-2]=B,L[z-1]=d,a(O),a(B),z>=3){var C=L[z-3];C.right===O?C.right=B:C.left=B}break}}else{var R=O.left;if(R&&R._color===v)B._color=e,O.left=n(e,R),O._color=v,z-=1;else{if(B.left=d.right,O._color=v,O.right=d.left,d._color=e,d.right=B,d.left=O,L[z-2]=d,L[z-1]=B,a(O),a(B),a(d),z>=3){var C=L[z-3];C.right===O?C.right=d:C.left=d}break}}}return L[0]._color=e,new o(l,L[0])};function y(b,P){if(P.left){var l=y(b,P.left);if(l)return l}var l=b(P.key,P.value);if(l)return l;if(P.right)return y(b,P.right)}function p(b,P,l,d){var L=P(b,d.key);if(L<=0){if(d.left){var w=p(b,P,l,d.left);if(w)return w}var w=l(d.key,d.value);if(w)return w}if(d.right)return p(b,P,l,d.right)}function x(b,P,l,d,L){var w=l(b,L.key),I=l(P,L.key),z;if(w<=0&&(L.left&&(z=x(b,P,l,d,L.left),z)||I>0&&(z=d(L.key,L.value),z)))return z;if(I>0&&L.right)return x(b,P,l,d,L.right)}h.forEach=function(b,P,l){if(this.root)switch(arguments.length){case 1:return y(b,this.root);case 2:return p(P,this._compare,b,this.root);case 3:return this._compare(P,l)>=0?void 0:x(P,l,this._compare,b,this.root)}},Object.defineProperty(h,"begin",{get:function(){for(var b=[],P=this.root;P;)b.push(P),P=P.left;return new s(this,b)}}),Object.defineProperty(h,"end",{get:function(){for(var b=[],P=this.root;P;)b.push(P),P=P.right;return new s(this,b)}}),h.at=function(b){if(b<0)return new s(this,[]);for(var P=this.root,l=[];;){if(l.push(P),P.left){if(b<P.left._count){P=P.left;continue}b-=P.left._count}if(!b)return new s(this,l);if(b-=1,P.right){if(b>=P.right._count)break;P=P.right}else break}return new s(this,[])},h.ge=function(b){for(var P=this._compare,l=this.root,d=[],L=0;l;){var w=P(b,l.key);d.push(l),w<=0&&(L=d.length),w<=0?l=l.left:l=l.right}return d.length=L,new s(this,d)},h.gt=function(b){for(var P=this._compare,l=this.root,d=[],L=0;l;){var w=P(b,l.key);d.push(l),w<0&&(L=d.length),w<0?l=l.left:l=l.right}return d.length=L,new s(this,d)},h.lt=function(b){for(var P=this._compare,l=this.root,d=[],L=0;l;){var w=P(b,l.key);d.push(l),w>0&&(L=d.length),w<=0?l=l.left:l=l.right}return d.length=L,new s(this,d)},h.le=function(b){for(var P=this._compare,l=this.root,d=[],L=0;l;){var w=P(b,l.key);d.push(l),w>=0&&(L=d.length),w<0?l=l.left:l=l.right}return d.length=L,new s(this,d)},h.find=function(b){for(var P=this._compare,l=this.root,d=[];l;){var L=P(b,l.key);if(d.push(l),L===0)return new s(this,d);L<=0?l=l.left:l=l.right}return new s(this,[])},h.remove=function(b){var P=this.find(b);return P?P.remove():this},h.get=function(b){for(var P=this._compare,l=this.root;l;){var d=P(b,l.key);if(d===0)return l.value;d<=0?l=l.left:l=l.right}};function s(b,P){this.tree=b,this._stack=P}var u=s.prototype;Object.defineProperty(u,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(u,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),u.clone=function(){return new s(this.tree,this._stack.slice())};function c(b,P){b.key=P.key,b.value=P.value,b.left=P.left,b.right=P.right,b._color=P._color,b._count=P._count}function T(b){for(var P,l,d,L,w=b.length-1;w>=0;--w){if(P=b[w],w===0){P._color=e;return}if(l=b[w-1],l.left===P){if(d=l.right,d.right&&d.right._color===v){if(d=l.right=f(d),L=d.right=f(d.right),l.right=d.left,d.left=l,d.right=L,d._color=l._color,P._color=e,l._color=e,L._color=e,a(l),a(d),w>1){var I=b[w-2];I.left===l?I.left=d:I.right=d}b[w-1]=d;return}else if(d.left&&d.left._color===v){if(d=l.right=f(d),L=d.left=f(d.left),l.right=L.left,d.left=L.right,L.left=l,L.right=d,L._color=l._color,l._color=e,d._color=e,P._color=e,a(l),a(d),a(L),w>1){var I=b[w-2];I.left===l?I.left=L:I.right=L}b[w-1]=L;return}if(d._color===e)if(l._color===v){l._color=e,l.right=n(v,d);return}else{l.right=n(v,d);continue}else{if(d=f(d),l.right=d.left,d.left=l,d._color=l._color,l._color=v,a(l),a(d),w>1){var I=b[w-2];I.left===l?I.left=d:I.right=d}b[w-1]=d,b[w]=l,w+1<b.length?b[w+1]=P:b.push(P),w=w+2}}else{if(d=l.left,d.left&&d.left._color===v){if(d=l.left=f(d),L=d.left=f(d.left),l.left=d.right,d.right=l,d.left=L,d._color=l._color,P._color=e,l._color=e,L._color=e,a(l),a(d),w>1){var I=b[w-2];I.right===l?I.right=d:I.left=d}b[w-1]=d;return}else if(d.right&&d.right._color===v){if(d=l.left=f(d),L=d.right=f(d.right),l.left=L.right,d.right=L.left,L.right=l,L.left=d,L._color=l._color,l._color=e,d._color=e,P._color=e,a(l),a(d),a(L),w>1){var I=b[w-2];I.right===l?I.right=L:I.left=L}b[w-1]=L;return}if(d._color===e)if(l._color===v){l._color=e,l.left=n(v,d);return}else{l.left=n(v,d);continue}else{if(d=f(d),l.left=d.right,d.right=l,d._color=l._color,l._color=v,a(l),a(d),w>1){var I=b[w-2];I.right===l?I.right=d:I.left=d}b[w-1]=d,b[w]=l,w+1<b.length?b[w+1]=P:b.push(P),w=w+2}}}}u.remove=function(){var b=this._stack;if(b.length===0)return this.tree;var P=new Array(b.length),l=b[b.length-1];P[P.length-1]=new r(l._color,l.key,l.value,l.left,l.right,l._count);for(var d=b.length-2;d>=0;--d){var l=b[d];l.left===b[d+1]?P[d]=new r(l._color,l.key,l.value,P[d+1],l.right,l._count):P[d]=new r(l._color,l.key,l.value,l.left,P[d+1],l._count)}if(l=P[P.length-1],l.left&&l.right){var L=P.length;for(l=l.left;l.right;)P.push(l),l=l.right;var w=P[L-1];P.push(new r(l._color,w.key,w.value,l.left,l.right,l._count)),P[L-1].key=l.key,P[L-1].value=l.value;for(var d=P.length-2;d>=L;--d)l=P[d],P[d]=new r(l._color,l.key,l.value,l.left,P[d+1],l._count);P[L-1].left=P[L]}if(l=P[P.length-1],l._color===v){var I=P[P.length-2];I.left===l?I.left=null:I.right===l&&(I.right=null),P.pop();for(var d=0;d<P.length;++d)P[d]._count--;return new o(this.tree._compare,P[0])}else if(l.left||l.right){l.left?c(l,l.left):l.right&&c(l,l.right),l._color=e;for(var d=0;d<P.length-1;++d)P[d]._count--;return new o(this.tree._compare,P[0])}else{if(P.length===1)return new o(this.tree._compare,null);for(var d=0;d<P.length;++d)P[d]._count--;var z=P[P.length-2];T(P),z.left===l?z.left=null:z.right=null}return new o(this.tree._compare,P[0])},Object.defineProperty(u,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(u,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(u,"index",{get:function(){var b=0,P=this._stack;if(P.length===0){var l=this.tree.root;return l?l._count:0}else P[P.length-1].left&&(b=P[P.length-1].left._count);for(var d=P.length-2;d>=0;--d)P[d+1]===P[d].right&&(++b,P[d].left&&(b+=P[d].left._count));return b},enumerable:!0}),u.next=function(){var b=this._stack;if(b.length!==0){var P=b[b.length-1];if(P.right)for(P=P.right;P;)b.push(P),P=P.left;else for(b.pop();b.length>0&&b[b.length-1].right===P;)P=b[b.length-1],b.pop()}},Object.defineProperty(u,"hasNext",{get:function(){var b=this._stack;if(b.length===0)return!1;if(b[b.length-1].right)return!0;for(var P=b.length-1;P>0;--P)if(b[P-1].left===b[P])return!0;return!1}}),u.update=function(b){var P=this._stack;if(P.length===0)throw new Error("Can't update empty node!");var l=new Array(P.length),d=P[P.length-1];l[l.length-1]=new r(d._color,d.key,b,d.left,d.right,d._count);for(var L=P.length-2;L>=0;--L)d=P[L],d.left===P[L+1]?l[L]=new r(d._color,d.key,d.value,l[L+1],d.right,d._count):l[L]=new r(d._color,d.key,d.value,d.left,l[L+1],d._count);return new o(this.tree._compare,l[0])},u.prev=function(){var b=this._stack;if(b.length!==0){var P=b[b.length-1];if(P.left)for(P=P.left;P;)b.push(P),P=P.right;else for(b.pop();b.length>0&&b[b.length-1].left===P;)P=b[b.length-1],b.pop()}},Object.defineProperty(u,"hasPrev",{get:function(){var b=this._stack;if(b.length===0)return!1;if(b[b.length-1].left)return!0;for(var P=b.length-1;P>0;--P)if(b[P-1].right===b[P])return!0;return!1}});function k(b,P){return b<P?-1:b>P?1:0}function _(b){return new o(b||k,null)}},7453:function(g,v,e){g.exports=d;var r=e(9557),f=e(1681),n=e(1011),a=e(2864),o=e(8468),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function y(L,w){return L[0]=w[0],L[1]=w[1],L[2]=w[2],L}function p(L){this.gl=L,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=n(L)}var x=p.prototype;x.update=function(L){L=L||{};function w(at,it,q){if(q in L){var W=L[q],Z=this[q],G;(at?Array.isArray(W)&&Array.isArray(W[0]):Array.isArray(W))?this[q]=G=[it(W[0]),it(W[1]),it(W[2])]:this[q]=G=[it(W),it(W),it(W)];for(var et=0;et<3;++et)if(G[et]!==Z[et])return!0}return!1}var I=w.bind(this,!1,Number),z=w.bind(this,!1,Boolean),B=w.bind(this,!1,String),O=w.bind(this,!0,function(at){if(Array.isArray(at)){if(at.length===3)return[+at[0],+at[1],+at[2],1];if(at.length===4)return[+at[0],+at[1],+at[2],+at[3]]}return[0,0,0,1]}),R,C=!1,F=!1;if("bounds"in L)for(var N=L.bounds,V=0;V<2;++V)for(var K=0;K<3;++K)N[V][K]!==this.bounds[V][K]&&(F=!0),this.bounds[V][K]=N[V][K];if("ticks"in L){R=L.ticks,C=!0,this.autoTicks=!1;for(var V=0;V<3;++V)this.tickSpacing[V]=0}else I("tickSpacing")&&(this.autoTicks=!0,F=!0);if(this._firstInit&&("ticks"in L||"tickSpacing"in L||(this.autoTicks=!0),F=!0,C=!0,this._firstInit=!1),F&&this.autoTicks&&(R=o.create(this.bounds,this.tickSpacing),C=!0),C){for(var V=0;V<3;++V)R[V].sort(function(it,q){return it.x-q.x});o.equal(R,this.ticks)?C=!1:this.ticks=R}z("tickEnable"),B("tickFont")&&(C=!0),I("tickSize"),I("tickAngle"),I("tickPad"),O("tickColor");var Q=B("labels");B("labelFont")&&(Q=!0),z("labelEnable"),I("labelSize"),I("labelPad"),O("labelColor"),z("lineEnable"),z("lineMirror"),I("lineWidth"),O("lineColor"),z("lineTickEnable"),z("lineTickMirror"),I("lineTickLength"),I("lineTickWidth"),O("lineTickColor"),z("gridEnable"),I("gridWidth"),O("gridColor"),z("zeroEnable"),O("zeroLineColor"),I("zeroLineWidth"),z("backgroundEnable"),O("backgroundColor"),this._text?this._text&&(Q||C)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=r(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&C&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=f(this.gl,this.bounds,this.ticks))};function s(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var u=[new s,new s,new s];function c(L,w,I,z,B){for(var O=L.primalOffset,R=L.primalMinor,C=L.mirrorOffset,F=L.mirrorMinor,N=z[w],V=0;V<3;++V)if(w!==V){var K=O,Q=C,at=R,it=F;N&1<<V&&(K=C,Q=O,at=F,it=R),K[V]=I[0][V],Q[V]=I[1][V],B[V]>0?(at[V]=-1,it[V]=0):(at[V]=0,it[V]=1)}}var T=[0,0,0],k={model:h,view:h,projection:h,_ortho:!1};x.isOpaque=function(){return!0},x.isTransparent=function(){return!1},x.drawTransparent=function(L){};var _=0,b=[0,0,0],P=[0,0,0],l=[0,0,0];x.draw=function(L){L=L||k;for(var w=this.gl,I=L.model||h,z=L.view||h,B=L.projection||h,O=this.bounds,R=L._ortho||!1,C=a(I,z,B,O,R),F=C.cubeEdges,N=C.axis,V=z[12],K=z[13],Q=z[14],at=z[15],it=R?2:1,q=it*this.pixelRatio*(B[3]*V+B[7]*K+B[11]*Q+B[15]*at)/w.drawingBufferHeight,W=0;W<3;++W)this.lastCubeProps.cubeEdges[W]=F[W],this.lastCubeProps.axis[W]=N[W];for(var Z=u,W=0;W<3;++W)c(u[W],W,this.bounds,F,N);for(var w=this.gl,G=T,W=0;W<3;++W)this.backgroundEnable[W]?G[W]=N[W]:G[W]=0;this._background.draw(I,z,B,O,G,this.backgroundColor),this._lines.bind(I,z,B,this);for(var W=0;W<3;++W){var et=[0,0,0];N[W]>0?et[W]=O[1][W]:et[W]=O[0][W];for(var nt=0;nt<2;++nt){var X=(W+1+nt)%3,Y=(W+1+(nt^1))%3;this.gridEnable[X]&&this._lines.drawGrid(X,Y,this.bounds,et,this.gridColor[X],this.gridWidth[X]*this.pixelRatio)}for(var nt=0;nt<2;++nt){var X=(W+1+nt)%3,Y=(W+1+(nt^1))%3;this.zeroEnable[Y]&&Math.min(O[0][Y],O[1][Y])<=0&&Math.max(O[0][Y],O[1][Y])>=0&&this._lines.drawZero(X,Y,this.bounds,et,this.zeroLineColor[Y],this.zeroLineWidth[Y]*this.pixelRatio)}}for(var W=0;W<3;++W){this.lineEnable[W]&&this._lines.drawAxisLine(W,this.bounds,Z[W].primalOffset,this.lineColor[W],this.lineWidth[W]*this.pixelRatio),this.lineMirror[W]&&this._lines.drawAxisLine(W,this.bounds,Z[W].mirrorOffset,this.lineColor[W],this.lineWidth[W]*this.pixelRatio);for(var ot=y(b,Z[W].primalMinor),rt=y(P,Z[W].mirrorMinor),ht=this.lineTickLength,nt=0;nt<3;++nt){var pt=q/I[5*nt];ot[nt]*=ht[nt]*pt,rt[nt]*=ht[nt]*pt}this.lineTickEnable[W]&&this._lines.drawAxisTicks(W,Z[W].primalOffset,ot,this.lineTickColor[W],this.lineTickWidth[W]*this.pixelRatio),this.lineTickMirror[W]&&this._lines.drawAxisTicks(W,Z[W].mirrorOffset,rt,this.lineTickColor[W],this.lineTickWidth[W]*this.pixelRatio)}this._lines.unbind(),this._text.bind(I,z,B,this.pixelRatio);var yt,xt=.5,Ft,Et;function mt(jt){Et=[0,0,0],Et[jt]=1}function gt(jt,Ht,Vt){var ee=(jt+1)%3,te=(jt+2)%3,ae=Ht[ee],le=Ht[te],ce=Vt[ee],pe=Vt[te];if(ae>0&&pe>0){mt(ee);return}else if(ae>0&&pe<0){mt(ee);return}else if(ae<0&&pe>0){mt(ee);return}else if(ae<0&&pe<0){mt(ee);return}else if(le>0&&ce>0){mt(te);return}else if(le>0&&ce<0){mt(te);return}else if(le<0&&ce>0){mt(te);return}else if(le<0&&ce<0){mt(te);return}}for(var W=0;W<3;++W){for(var wt=Z[W].primalMinor,Pt=Z[W].mirrorMinor,Bt=y(l,Z[W].primalOffset),nt=0;nt<3;++nt)this.lineTickEnable[W]&&(Bt[nt]+=q*wt[nt]*Math.max(this.lineTickLength[nt],0)/I[5*nt]);var kt=[0,0,0];if(kt[W]=1,this.tickEnable[W]){this.tickAngle[W]===-3600?(this.tickAngle[W]=0,this.tickAlign[W]="auto"):this.tickAlign[W]=-1,Ft=1,yt=[this.tickAlign[W],xt,Ft],yt[0]==="auto"?yt[0]=_:yt[0]=parseInt(""+yt[0]),Et=[0,0,0],gt(W,wt,Pt);for(var nt=0;nt<3;++nt)Bt[nt]+=q*wt[nt]*this.tickPad[nt]/I[5*nt];this._text.drawTicks(W,this.tickSize[W],this.tickAngle[W],Bt,this.tickColor[W],kt,Et,yt)}if(this.labelEnable[W]){Ft=0,Et=[0,0,0],this.labels[W].length>4&&(mt(W),Ft=1),yt=[this.labelAlign[W],xt,Ft],yt[0]==="auto"?yt[0]=_:yt[0]=parseInt(""+yt[0]);for(var nt=0;nt<3;++nt)Bt[nt]+=q*wt[nt]*this.labelPad[nt]/I[5*nt];Bt[W]+=.5*(O[0][W]+O[1][W]),this._text.drawLabel(W,this.labelSize[W],this.labelAngle[W],Bt,this.labelColor[W],[0,0,0],Et,yt)}}this._text.unbind()},x.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function d(L,w){var I=new p(L);return I.update(w),I}},1011:function(g,v,e){g.exports=h;var r=e(5827),f=e(2944),n=e(1943).bg;function a(y,p,x,s){this.gl=y,this.buffer=p,this.vao=x,this.shader=s}var o=a.prototype;o.draw=function(y,p,x,s,u,c){for(var T=!1,k=0;k<3;++k)T=T||u[k];if(T){var _=this.gl;_.enable(_.POLYGON_OFFSET_FILL),_.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:y,view:p,projection:x,bounds:s,enable:u,colors:c},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),_.disable(_.POLYGON_OFFSET_FILL)}},o.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function h(y){for(var p=[],x=[],s=0,u=0;u<3;++u)for(var c=(u+1)%3,T=(u+2)%3,k=[0,0,0],_=[0,0,0],b=-1;b<=1;b+=2){x.push(s,s+2,s+1,s+1,s+2,s+3),k[u]=b,_[u]=b;for(var P=-1;P<=1;P+=2){k[c]=P;for(var l=-1;l<=1;l+=2)k[T]=l,p.push(k[0],k[1],k[2],_[0],_[1],_[2]),s+=1}var d=c;c=T,T=d}var L=r(y,new Float32Array(p)),w=r(y,new Uint16Array(x),y.ELEMENT_ARRAY_BUFFER),I=f(y,[{buffer:L,type:y.FLOAT,size:3,offset:0,stride:24},{buffer:L,type:y.FLOAT,size:3,offset:12,stride:24}],w),z=n(y);return z.attributes.position.location=0,z.attributes.normal.location=1,new a(y,L,I,z)}},2864:function(g,v,e){g.exports=b;var r=e(2288),f=e(104),n=e(4670),a=e(417),o=new Array(16),h=new Array(8),y=new Array(8),p=new Array(3),x=[0,0,0];(function(){for(var P=0;P<8;++P)h[P]=[1,1,1,1],y[P]=[1,1,1]})();function s(P,l,d){for(var L=0;L<4;++L){P[L]=d[12+L];for(var w=0;w<3;++w)P[L]+=l[w]*d[4*w+L]}}var u=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function c(P){for(var l=0;l<u.length;++l)if(P=n.positive(P,u[l]),P.length<3)return 0;for(var d=P[0],L=d[0]/d[3],w=d[1]/d[3],I=0,l=1;l+1<P.length;++l){var z=P[l],B=P[l+1],O=z[0]/z[3],R=z[1]/z[3],C=B[0]/B[3],F=B[1]/B[3],N=O-L,V=R-w,K=C-L,Q=F-w;I+=Math.abs(N*Q-V*K)}return I}var T=[1,1,1],k=[0,0,0],_={cubeEdges:T,axis:k};function b(P,l,d,L,w){f(o,l,P),f(o,d,o);for(var I=0,z=0;z<2;++z){p[2]=L[z][2];for(var B=0;B<2;++B){p[1]=L[B][1];for(var O=0;O<2;++O)p[0]=L[O][0],s(h[I],p,o),I+=1}}for(var R=-1,z=0;z<8;++z){for(var C=h[z][3],F=0;F<3;++F)y[z][F]=h[z][F]/C;w&&(y[z][2]*=-1),C<0&&(R<0||y[z][2]<y[R][2])&&(R=z)}if(R<0){R=0;for(var N=0;N<3;++N){for(var V=(N+2)%3,K=(N+1)%3,Q=-1,at=-1,it=0;it<2;++it){var q=it<<N,W=q+(it<<V)+(1-it<<K),Z=q+(1-it<<V)+(it<<K);a(y[q],y[W],y[Z],x)<0||(it?Q=1:at=1)}if(Q<0||at<0){at>Q&&(R|=1<<N);continue}for(var it=0;it<2;++it){var q=it<<N,W=q+(it<<V)+(1-it<<K),Z=q+(1-it<<V)+(it<<K),G=c([h[q],h[W],h[Z],h[q+(1<<V)+(1<<K)]]);it?Q=G:at=G}if(at>Q){R|=1<<N;continue}}}for(var et=7^R,nt=-1,z=0;z<8;++z)z===R||z===et||(nt<0||y[nt][1]>y[z][1])&&(nt=z);for(var X=-1,z=0;z<3;++z){var Y=nt^1<<z;if(!(Y===R||Y===et)){X<0&&(X=Y);var K=y[Y];K[0]<y[X][0]&&(X=Y)}}for(var ot=-1,z=0;z<3;++z){var Y=nt^1<<z;if(!(Y===R||Y===et||Y===X)){ot<0&&(ot=Y);var K=y[Y];K[0]>y[ot][0]&&(ot=Y)}}var rt=T;rt[0]=rt[1]=rt[2]=0,rt[r.log2(X^nt)]=nt&X,rt[r.log2(nt^ot)]=nt&ot;var ht=ot^7;ht===R||ht===et?(ht=X^7,rt[r.log2(ot^ht)]=ht&ot):rt[r.log2(X^ht)]=ht&X;for(var pt=k,yt=R,N=0;N<3;++N)yt&1<<N?pt[N]=-1:pt[N]=1;return _}},1681:function(g,v,e){g.exports=T;var r=e(5827),f=e(2944),n=e(1943).j,a=[0,0,0],o=[0,0,0],h=[0,0,0],y=[0,0,0],p=[1,1];function x(k){return k[0]=k[1]=k[2]=0,k}function s(k,_){return k[0]=_[0],k[1]=_[1],k[2]=_[2],k}function u(k,_,b,P,l,d,L,w){this.gl=k,this.vertBuffer=_,this.vao=b,this.shader=P,this.tickCount=l,this.tickOffset=d,this.gridCount=L,this.gridOffset=w}var c=u.prototype;c.bind=function(k,_,b){this.shader.bind(),this.shader.uniforms.model=k,this.shader.uniforms.view=_,this.shader.uniforms.projection=b,p[0]=this.gl.drawingBufferWidth,p[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=p,this.vao.bind()},c.unbind=function(){this.vao.unbind()},c.drawAxisLine=function(k,_,b,P,l){var d=x(o);this.shader.uniforms.majorAxis=o,d[k]=_[1][k]-_[0][k],this.shader.uniforms.minorAxis=d;var L=s(y,b);L[k]+=_[0][k],this.shader.uniforms.offset=L,this.shader.uniforms.lineWidth=l,this.shader.uniforms.color=P;var w=x(h);w[(k+2)%3]=1,this.shader.uniforms.screenAxis=w,this.vao.draw(this.gl.TRIANGLES,6);var w=x(h);w[(k+1)%3]=1,this.shader.uniforms.screenAxis=w,this.vao.draw(this.gl.TRIANGLES,6)},c.drawAxisTicks=function(k,_,b,P,l){if(this.tickCount[k]){var d=x(a);d[k]=1,this.shader.uniforms.majorAxis=d,this.shader.uniforms.offset=_,this.shader.uniforms.minorAxis=b,this.shader.uniforms.color=P,this.shader.uniforms.lineWidth=l;var L=x(h);L[k]=1,this.shader.uniforms.screenAxis=L,this.vao.draw(this.gl.TRIANGLES,this.tickCount[k],this.tickOffset[k])}},c.drawGrid=function(k,_,b,P,l,d){if(this.gridCount[k]){var L=x(o);L[_]=b[1][_]-b[0][_],this.shader.uniforms.minorAxis=L;var w=s(y,P);w[_]+=b[0][_],this.shader.uniforms.offset=w;var I=x(a);I[k]=1,this.shader.uniforms.majorAxis=I;var z=x(h);z[k]=1,this.shader.uniforms.screenAxis=z,this.shader.uniforms.lineWidth=d,this.shader.uniforms.color=l,this.vao.draw(this.gl.TRIANGLES,this.gridCount[k],this.gridOffset[k])}},c.drawZero=function(k,_,b,P,l,d){var L=x(o);this.shader.uniforms.majorAxis=L,L[k]=b[1][k]-b[0][k],this.shader.uniforms.minorAxis=L;var w=s(y,P);w[k]+=b[0][k],this.shader.uniforms.offset=w;var I=x(h);I[_]=1,this.shader.uniforms.screenAxis=I,this.shader.uniforms.lineWidth=d,this.shader.uniforms.color=l,this.vao.draw(this.gl.TRIANGLES,6)},c.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function T(k,_,b){var P=[],l=[0,0,0],d=[0,0,0],L=[0,0,0],w=[0,0,0];P.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var I=0;I<3;++I){for(var z=P.length/3|0,B=0;B<b[I].length;++B){var O=+b[I][B].x;P.push(O,0,1,O,1,1,O,0,-1,O,0,-1,O,1,1,O,1,-1)}var C=P.length/3|0;l[I]=z,d[I]=C-z;for(var z=P.length/3|0,R=0;R<b[I].length;++R){var O=+b[I][R].x;P.push(O,0,1,O,1,1,O,0,-1,O,0,-1,O,1,1,O,1,-1)}var C=P.length/3|0;L[I]=z,w[I]=C-z}var F=r(k,new Float32Array(P)),N=f(k,[{buffer:F,type:k.FLOAT,size:3,stride:0,offset:0}]),V=n(k);return V.attributes.position.location=0,new u(k,F,N,V,d,l,w,L)}},1943:function(g,v,e){var r=e(6832),f=e(5158),n=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),a=r([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);v.j=function(x){return f(x,n,a,null,[{name:"position",type:"vec3"}])};var o=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),h=r([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);v.f=function(x){return f(x,o,h,null,[{name:"position",type:"vec3"}])};var y=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),p=r([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);v.bg=function(x){return f(x,y,p,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},9557:function(g,v,e){g.exports=c;var r=e(5827),f=e(2944),n=e(875),a=e(1943).f,o=window||M.global||{},h=o.__TEXT_CACHE||{};o.__TEXT_CACHE={};var y=3;function p(T,k,_,b){this.gl=T,this.shader=k,this.buffer=_,this.vao=b,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var x=p.prototype,s=[0,0];x.bind=function(T,k,_,b){this.vao.bind(),this.shader.bind();var P=this.shader.uniforms;P.model=T,P.view=k,P.projection=_,P.pixelScale=b,s[0]=this.gl.drawingBufferWidth,s[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=s},x.unbind=function(){this.vao.unbind()},x.update=function(T,k,_,b,P){var l=[];function d(F,N,V,K,Q,at){var it=h[V];it||(it=h[V]={});var q=it[N];q||(q=it[N]=u(N,{triangles:!0,font:V,textAlign:"center",textBaseline:"middle",lineSpacing:Q,styletags:at}));for(var W=(K||12)/12,Z=q.positions,G=q.cells,et=0,nt=G.length;et<nt;++et)for(var X=G[et],Y=2;Y>=0;--Y){var ot=Z[X[Y]];l.push(W*ot[0],-W*ot[1],F)}}for(var L=[0,0,0],w=[0,0,0],I=[0,0,0],z=[0,0,0],B=1.25,O={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},R=0;R<3;++R){I[R]=l.length/y|0,d(.5*(T[0][R]+T[1][R]),k[R],_[R],12,B,O),z[R]=(l.length/y|0)-I[R],L[R]=l.length/y|0;for(var C=0;C<b[R].length;++C)b[R][C].text&&d(b[R][C].x,b[R][C].text,b[R][C].font||P,b[R][C].fontSize||12,B,O);w[R]=(l.length/y|0)-L[R]}this.buffer.update(l),this.tickOffset=L,this.tickCount=w,this.labelOffset=I,this.labelCount=z},x.drawTicks=function(T,k,_,b,P,l,d,L){this.tickCount[T]&&(this.shader.uniforms.axis=l,this.shader.uniforms.color=P,this.shader.uniforms.angle=_,this.shader.uniforms.scale=k,this.shader.uniforms.offset=b,this.shader.uniforms.alignDir=d,this.shader.uniforms.alignOpt=L,this.vao.draw(this.gl.TRIANGLES,this.tickCount[T],this.tickOffset[T]))},x.drawLabel=function(T,k,_,b,P,l,d,L){this.labelCount[T]&&(this.shader.uniforms.axis=l,this.shader.uniforms.color=P,this.shader.uniforms.angle=_,this.shader.uniforms.scale=k,this.shader.uniforms.offset=b,this.shader.uniforms.alignDir=d,this.shader.uniforms.alignOpt=L,this.vao.draw(this.gl.TRIANGLES,this.labelCount[T],this.labelOffset[T]))},x.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function u(T,k){try{return n(T,k)}catch(_){return console.warn('error vectorizing text:"'+T+'" error:',_),{cells:[],positions:[]}}}function c(T,k,_,b,P,l){var d=r(T),L=f(T,[{buffer:d,size:3}]),w=a(T);w.attributes.position.location=0;var I=new p(T,w,d,L);return I.update(k,_,b,P,l),I}},8468:function(g,v){v.create=r,v.equal=f;function e(n,a){var o=n+"",h=o.indexOf("."),y=0;h>=0&&(y=o.length-h-1);var p=Math.pow(10,y),x=Math.round(n*a*p),s=x+"";if(s.indexOf("e")>=0)return s;var u=x/p,c=x%p;x<0?(u=-Math.ceil(u)|0,c=-c|0):(u=Math.floor(u)|0,c=c|0);var T=""+u;if(x<0&&(T="-"+T),y){for(var k=""+c;k.length<y;)k="0"+k;return T+"."+k}else return T}function r(n,a){for(var o=[],h=0;h<3;++h){var y=[];.5*(n[0][h]+n[1][h]);for(var p=0;p*a[h]<=n[1][h];++p)y.push({x:p*a[h],text:e(a[h],p)});for(var p=-1;p*a[h]>=n[0][h];--p)y.push({x:p*a[h],text:e(a[h],p)});o.push(y)}return o}function f(n,a){for(var o=0;o<3;++o){if(n[o].length!==a[o].length)return!1;for(var h=0;h<n[o].length;++h){var y=n[o][h],p=a[o][h];if(y.x!==p.x||y.text!==p.text||y.font!==p.font||y.fontColor!==p.fontColor||y.fontSize!==p.fontSize||y.dx!==p.dx||y.dy!==p.dy)return!1}}return!0}},2771:function(g,v,e){g.exports=_;var r=e(5795),f=e(4670),n=e(2864),a=e(104),o=e(2142),h=e(6342),y=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),p=new Float32Array(16);function x(b,P,l){this.lo=b,this.hi=P,this.pixelsPerDataUnit=l}var s=[0,0,0,1],u=[0,0,0,1];function c(b,P,l,d,L){for(var w=0;w<3;++w){for(var I=s,z=u,B=0;B<3;++B)z[B]=I[B]=l[B];z[3]=I[3]=1,z[w]+=1,h(z,z,P),z[3]<0&&(b[w]=1/0),I[w]-=1,h(I,I,P),I[3]<0&&(b[w]=1/0);var O=(I[0]/I[3]-z[0]/z[3])*d,R=(I[1]/I[3]-z[1]/z[3])*L;b[w]=.25*Math.sqrt(O*O+R*R)}return b}var T=[new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0)],k=[0,0,0];function _(b,P,l,d,R){var w=P.model||y,I=P.view||y,z=P.projection||y,B=P._ortho||!1,O=b.bounds,R=R||n(w,I,z,O,B),C=R.axis;a(p,I,w),a(p,z,p);for(var F=T,N=0;N<3;++N)F[N].lo=1/0,F[N].hi=-1/0,F[N].pixelsPerDataUnit=1/0;var V=r(o(p,p));o(p,p);for(var K=0;K<3;++K){var Q=(K+1)%3,at=(K+2)%3,it=k;t:for(var N=0;N<2;++N){var q=[];if(C[K]<0!=!!N){it[K]=O[N][K];for(var W=0;W<2;++W){it[Q]=O[W^N][Q];for(var Z=0;Z<2;++Z)it[at]=O[Z^W^N][at],q.push(it.slice())}for(var G=B?5:4,W=G;W===G;++W){if(q.length===0)continue t;q=f.positive(q,V[W])}for(var W=0;W<q.length;++W)for(var at=q[W],et=c(k,p,at,l,d),Z=0;Z<3;++Z)F[Z].lo=Math.min(F[Z].lo,at[Z]),F[Z].hi=Math.max(F[Z].hi,at[Z]),Z!==K&&(F[Z].pixelsPerDataUnit=Math.min(F[Z].pixelsPerDataUnit,Math.abs(et[Z])))}}}return F}},5827:function(g,v,e){var r=e(5306),f=e(7498),n=e(5050),a=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function o(u,c,T,k,_){this.gl=u,this.type=c,this.handle=T,this.length=k,this.usage=_}var h=o.prototype;h.bind=function(){this.gl.bindBuffer(this.type,this.handle)},h.unbind=function(){this.gl.bindBuffer(this.type,null)},h.dispose=function(){this.gl.deleteBuffer(this.handle)};function y(u,c,T,k,_,b){var P=_.length*_.BYTES_PER_ELEMENT;if(b<0)return u.bufferData(c,_,k),P;if(P+b>T)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return u.bufferSubData(c,b,_),T}function p(u,c){for(var T=r.malloc(u.length,c),k=u.length,_=0;_<k;++_)T[_]=u[_];return T}function x(u,c){for(var T=1,k=c.length-1;k>=0;--k){if(c[k]!==T)return!1;T*=u[k]}return!0}h.update=function(u,c){if(typeof c!="number"&&(c=-1),this.bind(),typeof u=="object"&&typeof u.shape<"u"){var T=u.dtype;if(a.indexOf(T)<0&&(T="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var k=gl.getExtension("OES_element_index_uint");k&&T!=="uint16"?T="uint32":T="uint16"}if(T===u.dtype&&x(u.shape,u.stride))u.offset===0&&u.data.length===u.shape[0]?this.length=y(this.gl,this.type,this.length,this.usage,u.data,c):this.length=y(this.gl,this.type,this.length,this.usage,u.data.subarray(u.offset,u.shape[0]),c);else{var _=r.malloc(u.size,T),b=n(_,u.shape);f.assign(b,u),c<0?this.length=y(this.gl,this.type,this.length,this.usage,_,c):this.length=y(this.gl,this.type,this.length,this.usage,_.subarray(0,u.size),c),r.free(_)}}else if(Array.isArray(u)){var P;this.type===this.gl.ELEMENT_ARRAY_BUFFER?P=p(u,"uint16"):P=p(u,"float32"),c<0?this.length=y(this.gl,this.type,this.length,this.usage,P,c):this.length=y(this.gl,this.type,this.length,this.usage,P.subarray(0,u.length),c),r.free(P)}else if(typeof u=="object"&&typeof u.length=="number")this.length=y(this.gl,this.type,this.length,this.usage,u,c);else if(typeof u=="number"||u===void 0){if(c>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");u=u|0,u<=0&&(u=1),this.gl.bufferData(this.type,u|0,this.usage),this.length=u}else throw new Error("gl-buffer: Invalid data type")};function s(u,c,T,k){if(T=T||u.ARRAY_BUFFER,k=k||u.DYNAMIC_DRAW,T!==u.ARRAY_BUFFER&&T!==u.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(k!==u.DYNAMIC_DRAW&&k!==u.STATIC_DRAW&&k!==u.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var _=u.createBuffer(),b=new o(u,T,_,0,k);return b.update(c),b}g.exports=s},1140:function(g,v,e){var r=e(2858);g.exports=function(n,a){var o=n.positions,h=n.vectors,y={positions:[],vertexIntensity:[],vertexIntensityBounds:n.vertexIntensityBounds,vectors:[],cells:[],coneOffset:n.coneOffset,colormap:n.colormap};if(n.positions.length===0)return a&&(a[0]=[0,0,0],a[1]=[0,0,0]),y;for(var p=0,x=1/0,s=-1/0,u=1/0,c=-1/0,T=1/0,k=-1/0,_=null,b=null,P=[],l=1/0,d=!1,L=0;L<o.length;L++){var w=o[L];x=Math.min(w[0],x),s=Math.max(w[0],s),u=Math.min(w[1],u),c=Math.max(w[1],c),T=Math.min(w[2],T),k=Math.max(w[2],k);var I=h[L];if(r.length(I)>p&&(p=r.length(I)),L){var z=2*r.distance(_,w)/(r.length(b)+r.length(I));z?(l=Math.min(l,z),d=!1):d=!0}d||(_=w,b=I),P.push(I)}var B=[x,u,T],O=[s,c,k];a&&(a[0]=B,a[1]=O),p===0&&(p=1);var R=1/p;isFinite(l)||(l=1),y.vectorScale=l;var C=n.coneSize||.5;n.absoluteConeSize&&(C=n.absoluteConeSize*R),y.coneScale=C;for(var L=0,F=0;L<o.length;L++)for(var w=o[L],N=w[0],V=w[1],K=w[2],Q=P[L],at=r.length(Q)*R,it=0,q=8;it<q;it++){y.positions.push([N,V,K,F++]),y.positions.push([N,V,K,F++]),y.positions.push([N,V,K,F++]),y.positions.push([N,V,K,F++]),y.positions.push([N,V,K,F++]),y.positions.push([N,V,K,F++]),y.vectors.push(Q),y.vectors.push(Q),y.vectors.push(Q),y.vectors.push(Q),y.vectors.push(Q),y.vectors.push(Q),y.vertexIntensity.push(at,at,at),y.vertexIntensity.push(at,at,at);var W=y.positions.length;y.cells.push([W-6,W-5,W-4],[W-3,W-2,W-1])}return y};var f=e(7234);g.exports.createMesh=e(5028),g.exports.createConeMesh=function(n,a){return g.exports.createMesh(n,a,{shaders:f,traceType:"cone"})}},5028:function(g,v,e){var r=e(5158),f=e(5827),n=e(2944),a=e(8931),o=e(104),h=e(7437),y=e(5050),p=e(9156),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(P,l,d,L,w,I,z,B,O,R,C){this.gl=P,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=l,this.dirty=!0,this.triShader=d,this.pickShader=L,this.trianglePositions=w,this.triangleVectors=I,this.triangleColors=B,this.triangleUVs=O,this.triangleIds=z,this.triangleVAO=R,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=C,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=x,this._view=x,this._projection=x,this._resolution=[1,1]}var u=s.prototype;u.isOpaque=function(){return this.opacity>=1},u.isTransparent=function(){return this.opacity<1},u.pickSlots=1,u.setPickBase=function(P){this.pickId=P};function c(P){for(var l=p({colormap:P,nshades:256,format:"rgba"}),d=new Uint8Array(1024),L=0;L<256;++L){for(var w=l[L],I=0;I<3;++I)d[4*L+I]=w[I];d[4*L+3]=w[3]*255}return y(d,[256,256,4],[4,0,1])}function T(P){for(var l=P.length,d=new Array(l),L=0;L<l;++L)d[L]=P[L][2];return d}u.update=function(P){P=P||{};var l=this.gl;this.dirty=!0,"lightPosition"in P&&(this.lightPosition=P.lightPosition),"opacity"in P&&(this.opacity=P.opacity),"ambient"in P&&(this.ambientLight=P.ambient),"diffuse"in P&&(this.diffuseLight=P.diffuse),"specular"in P&&(this.specularLight=P.specular),"roughness"in P&&(this.roughness=P.roughness),"fresnel"in P&&(this.fresnel=P.fresnel),P.tubeScale!==void 0&&(this.tubeScale=P.tubeScale),P.vectorScale!==void 0&&(this.vectorScale=P.vectorScale),P.coneScale!==void 0&&(this.coneScale=P.coneScale),P.coneOffset!==void 0&&(this.coneOffset=P.coneOffset),P.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=l.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=l.LINEAR,this.texture.setPixels(c(P.colormap)),this.texture.generateMipmap());var d=P.cells,L=P.positions,w=P.vectors;if(!(!L||!d||!w)){var I=[],z=[],B=[],O=[],R=[];this.cells=d,this.positions=L,this.vectors=w;var C=P.meshColor||[1,1,1,1],F=P.vertexIntensity,N=1/0,V=-1/0;if(F)if(P.vertexIntensityBounds)N=+P.vertexIntensityBounds[0],V=+P.vertexIntensityBounds[1];else for(var K=0;K<F.length;++K){var Q=F[K];N=Math.min(N,Q),V=Math.max(V,Q)}else for(var K=0;K<L.length;++K){var Q=L[K][2];N=Math.min(N,Q),V=Math.max(V,Q)}F?this.intensity=F:this.intensity=T(L),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var K=0;K<L.length;++K)for(var at=L[K],it=0;it<3;++it)isNaN(at[it])||!isFinite(at[it])||(this.bounds[0][it]=Math.min(this.bounds[0][it],at[it]),this.bounds[1][it]=Math.max(this.bounds[1][it],at[it]));var q=0;t:for(var K=0;K<d.length;++K){var W=d[K];switch(W.length){case 3:for(var it=0;it<3;++it)for(var Z=W[it],at=L[Z],G=0;G<3;++G)if(isNaN(at[G])||!isFinite(at[G]))continue t;for(var it=0;it<3;++it){var Z=W[2-it],at=L[Z];I.push(at[0],at[1],at[2],at[3]);var et=w[Z];z.push(et[0],et[1],et[2],et[3]||0);var nt=C;nt.length===3?B.push(nt[0],nt[1],nt[2],1):B.push(nt[0],nt[1],nt[2],nt[3]);var X;F?X=[(F[Z]-N)/(V-N),0]:X=[(at[2]-N)/(V-N),0],O.push(X[0],X[1]),R.push(K)}q+=1;break}}this.triangleCount=q,this.trianglePositions.update(I),this.triangleVectors.update(z),this.triangleColors.update(B),this.triangleUVs.update(O),this.triangleIds.update(new Uint32Array(R))}},u.drawTransparent=u.draw=function(P){P=P||{};for(var l=this.gl,d=P.model||x,L=P.view||x,w=P.projection||x,I=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],z=0;z<3;++z)I[0][z]=Math.max(I[0][z],this.clipBounds[0][z]),I[1][z]=Math.min(I[1][z],this.clipBounds[1][z]);var B={model:d,view:L,projection:w,inverseModel:x.slice(),clipBounds:I,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};B.inverseModel=h(B.inverseModel,B.model),l.disable(l.CULL_FACE),this.texture.bind(0);var O=new Array(16);o(O,B.view,B.model),o(O,B.projection,O),h(O,O);for(var z=0;z<3;++z)B.eyePosition[z]=O[12+z]/O[15];for(var R=O[15],z=0;z<3;++z)R+=this.lightPosition[z]*O[4*z+3];for(var z=0;z<3;++z){for(var C=O[12+z],F=0;F<3;++F)C+=O[4*F+z]*this.lightPosition[F];B.lightPosition[z]=C/R}if(this.triangleCount>0){var N=this.triShader;N.bind(),N.uniforms=B,this.triangleVAO.bind(),l.drawArrays(l.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},u.drawPick=function(P){P=P||{};for(var l=this.gl,d=P.model||x,L=P.view||x,w=P.projection||x,I=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],z=0;z<3;++z)I[0][z]=Math.max(I[0][z],this.clipBounds[0][z]),I[1][z]=Math.min(I[1][z],this.clipBounds[1][z]);this._model=[].slice.call(d),this._view=[].slice.call(L),this._projection=[].slice.call(w),this._resolution=[l.drawingBufferWidth,l.drawingBufferHeight];var B={model:d,view:L,projection:w,clipBounds:I,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},O=this.pickShader;O.bind(),O.uniforms=B,this.triangleCount>0&&(this.triangleVAO.bind(),l.drawArrays(l.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},u.pick=function(P){if(!P||P.id!==this.pickId)return null;var l=P.value[0]+256*P.value[1]+65536*P.value[2],d=this.cells[l],L=this.positions[d[1]].slice(0,3),w={position:L,dataCoordinate:L,index:Math.floor(d[1]/48)};return this.traceType==="cone"?w.index=Math.floor(d[1]/48):this.traceType==="streamtube"&&(w.intensity=this.intensity[d[1]],w.velocity=this.vectors[d[1]].slice(0,3),w.divergence=this.vectors[d[1]][3],w.index=l),w},u.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function k(P,l){var d=r(P,l.meshShader.vertex,l.meshShader.fragment,null,l.meshShader.attributes);return d.attributes.position.location=0,d.attributes.color.location=2,d.attributes.uv.location=3,d.attributes.vector.location=4,d}function _(P,l){var d=r(P,l.pickShader.vertex,l.pickShader.fragment,null,l.pickShader.attributes);return d.attributes.position.location=0,d.attributes.id.location=1,d.attributes.vector.location=4,d}function b(P,l,d){var L=d.shaders;arguments.length===1&&(l=P,P=l.gl);var w=k(P,L),I=_(P,L),z=a(P,y(new Uint8Array([255,255,255,255]),[1,1,4]));z.generateMipmap(),z.minFilter=P.LINEAR_MIPMAP_LINEAR,z.magFilter=P.LINEAR;var B=f(P),O=f(P),R=f(P),C=f(P),F=f(P),N=n(P,[{buffer:B,type:P.FLOAT,size:4},{buffer:F,type:P.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:R,type:P.FLOAT,size:4},{buffer:C,type:P.FLOAT,size:2},{buffer:O,type:P.FLOAT,size:4}]),V=new s(P,z,w,I,B,O,F,R,C,N,d.traceType||"cone");return V.update(l),V}g.exports=b},7234:function(g,v,e){var r=e(6832),f=r([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=r([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),a=r([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),o=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);v.meshShader={vertex:f,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},v.pickShader={vertex:a,fragment:o,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},1950:function(g){g.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},6603:function(g,v,e){var r=e(1950);g.exports=function(f){return r[f]}},3110:function(g,v,e){g.exports=s;var r=e(5827),f=e(2944),n=e(7667),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function o(u,c,T,k){this.gl=u,this.shader=k,this.buffer=c,this.vao=T,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var h=o.prototype;h.isOpaque=function(){return!this.hasAlpha},h.isTransparent=function(){return this.hasAlpha},h.drawTransparent=h.draw=function(u){var c=this.gl,T=this.shader.uniforms;this.shader.bind();var k=T.view=u.view||a,_=T.projection=u.projection||a;T.model=u.model||a,T.clipBounds=this.clipBounds,T.opacity=this.opacity;var b=k[12],P=k[13],l=k[14],d=k[15],L=u._ortho||!1,w=L?2:1,I=w*this.pixelRatio*(_[3]*b+_[7]*P+_[11]*l+_[15]*d)/c.drawingBufferHeight;this.vao.bind();for(var z=0;z<3;++z)c.lineWidth(this.lineWidth[z]*this.pixelRatio),T.capSize=this.capSize[z]*I,this.lineCount[z]&&c.drawArrays(c.LINES,this.lineOffset[z],this.lineCount[z]);this.vao.unbind()};function y(u,c){for(var T=0;T<3;++T)u[0][T]=Math.min(u[0][T],c[T]),u[1][T]=Math.max(u[1][T],c[T])}var p=function(){for(var u=new Array(3),c=0;c<3;++c){for(var T=[],k=1;k<=2;++k)for(var _=-1;_<=1;_+=2){var b=(k+c)%3,P=[0,0,0];P[b]=_,T.push(P)}u[c]=T}return u}();function x(u,c,T,k){for(var _=p[k],b=0;b<_.length;++b){var P=_[b];u.push(c[0],c[1],c[2],T[0],T[1],T[2],T[3],P[0],P[1],P[2])}return _.length}h.update=function(u){u=u||{},"lineWidth"in u&&(this.lineWidth=u.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in u&&(this.capSize=u.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in u&&(this.opacity=+u.opacity,this.opacity<1&&(this.hasAlpha=!0));var c=u.color||[[0,0,0],[0,0,0],[0,0,0]],T=u.position,k=u.error;if(Array.isArray(c[0])||(c=[c,c,c]),T&&k){var _=[],b=T.length,P=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var l=0;l<3;++l){this.lineOffset[l]=P;t:for(var d=0;d<b;++d){for(var L=T[d],w=0;w<3;++w)if(isNaN(L[w])||!isFinite(L[w]))continue t;var I=k[d],z=c[l];if(Array.isArray(z[0])&&(z=c[d]),z.length===3?z=[z[0],z[1],z[2],1]:z.length===4&&(z=[z[0],z[1],z[2],z[3]],!this.hasAlpha&&z[3]<1&&(this.hasAlpha=!0)),!(isNaN(I[0][l])||isNaN(I[1][l]))){if(I[0][l]<0){var B=L.slice();B[l]+=I[0][l],_.push(L[0],L[1],L[2],z[0],z[1],z[2],z[3],0,0,0,B[0],B[1],B[2],z[0],z[1],z[2],z[3],0,0,0),y(this.bounds,B),P+=2+x(_,B,z,l)}if(I[1][l]>0){var B=L.slice();B[l]+=I[1][l],_.push(L[0],L[1],L[2],z[0],z[1],z[2],z[3],0,0,0,B[0],B[1],B[2],z[0],z[1],z[2],z[3],0,0,0),y(this.bounds,B),P+=2+x(_,B,z,l)}}}this.lineCount[l]=P-this.lineOffset[l]}this.buffer.update(_)}},h.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function s(u){var c=u.gl,T=r(c),k=f(c,[{buffer:T,type:c.FLOAT,size:3,offset:0,stride:40},{buffer:T,type:c.FLOAT,size:4,offset:12,stride:40},{buffer:T,type:c.FLOAT,size:3,offset:28,stride:40}]),_=n(c);_.attributes.position.location=0,_.attributes.color.location=1,_.attributes.offset.location=2;var b=new o(c,T,k,_);return b.update(u),b}},7667:function(g,v,e){var r=e(6832),f=e(5158),n=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),a=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);g.exports=function(o){return f(o,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},4234:function(g,v,e){var r=e(8931);g.exports=P;var f=null,n,a,o,h;function y(l){var d=l.getParameter(l.FRAMEBUFFER_BINDING),L=l.getParameter(l.RENDERBUFFER_BINDING),w=l.getParameter(l.TEXTURE_BINDING_2D);return[d,L,w]}function p(l,d){l.bindFramebuffer(l.FRAMEBUFFER,d[0]),l.bindRenderbuffer(l.RENDERBUFFER,d[1]),l.bindTexture(l.TEXTURE_2D,d[2])}function x(l,d){var L=l.getParameter(d.MAX_COLOR_ATTACHMENTS_WEBGL);f=new Array(L+1);for(var w=0;w<=L;++w){for(var I=new Array(L),z=0;z<w;++z)I[z]=l.COLOR_ATTACHMENT0+z;for(var z=w;z<L;++z)I[z]=l.NONE;f[w]=I}}function s(l){switch(l){case n:throw new Error("gl-fbo: Framebuffer unsupported");case a:throw new Error("gl-fbo: Framebuffer incomplete attachment");case o:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case h:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function u(l,d,L,w,I,z){if(!w)return null;var B=r(l,d,L,I,w);return B.magFilter=l.NEAREST,B.minFilter=l.NEAREST,B.mipSamples=1,B.bind(),l.framebufferTexture2D(l.FRAMEBUFFER,z,l.TEXTURE_2D,B.handle,0),B}function c(l,d,L,w,I){var z=l.createRenderbuffer();return l.bindRenderbuffer(l.RENDERBUFFER,z),l.renderbufferStorage(l.RENDERBUFFER,w,d,L),l.framebufferRenderbuffer(l.FRAMEBUFFER,I,l.RENDERBUFFER,z),z}function T(l){var d=y(l.gl),L=l.gl,w=l.handle=L.createFramebuffer(),I=l._shape[0],z=l._shape[1],B=l.color.length,O=l._ext,R=l._useStencil,C=l._useDepth,F=l._colorType;L.bindFramebuffer(L.FRAMEBUFFER,w);for(var N=0;N<B;++N)l.color[N]=u(L,I,z,F,L.RGBA,L.COLOR_ATTACHMENT0+N);B===0?(l._color_rb=c(L,I,z,L.RGBA4,L.COLOR_ATTACHMENT0),O&&O.drawBuffersWEBGL(f[0])):B>1&&O.drawBuffersWEBGL(f[B]);var V=L.getExtension("WEBGL_depth_texture");V?R?l.depth=u(L,I,z,V.UNSIGNED_INT_24_8_WEBGL,L.DEPTH_STENCIL,L.DEPTH_STENCIL_ATTACHMENT):C&&(l.depth=u(L,I,z,L.UNSIGNED_SHORT,L.DEPTH_COMPONENT,L.DEPTH_ATTACHMENT)):C&&R?l._depth_rb=c(L,I,z,L.DEPTH_STENCIL,L.DEPTH_STENCIL_ATTACHMENT):C?l._depth_rb=c(L,I,z,L.DEPTH_COMPONENT16,L.DEPTH_ATTACHMENT):R&&(l._depth_rb=c(L,I,z,L.STENCIL_INDEX,L.STENCIL_ATTACHMENT));var K=L.checkFramebufferStatus(L.FRAMEBUFFER);if(K!==L.FRAMEBUFFER_COMPLETE){l._destroyed=!0,L.bindFramebuffer(L.FRAMEBUFFER,null),L.deleteFramebuffer(l.handle),l.handle=null,l.depth&&(l.depth.dispose(),l.depth=null),l._depth_rb&&(L.deleteRenderbuffer(l._depth_rb),l._depth_rb=null);for(var N=0;N<l.color.length;++N)l.color[N].dispose(),l.color[N]=null;l._color_rb&&(L.deleteRenderbuffer(l._color_rb),l._color_rb=null),p(L,d),s(K)}p(L,d)}function k(l,d,L,w,I,z,B,O){this.gl=l,this._shape=[d|0,L|0],this._destroyed=!1,this._ext=O,this.color=new Array(I);for(var R=0;R<I;++R)this.color[R]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=w,this._useDepth=z,this._useStencil=B;var C=this,F=[d|0,L|0];Object.defineProperties(F,{0:{get:function(){return C._shape[0]},set:function(N){return C.width=N}},1:{get:function(){return C._shape[1]},set:function(N){return C.height=N}}}),this._shapeVector=F,T(this)}var _=k.prototype;function b(l,d,L){if(l._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(l._shape[0]===d&&l._shape[1]===L)){var w=l.gl,I=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(d<0||d>I||L<0||L>I)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");l._shape[0]=d,l._shape[1]=L;for(var z=y(w),B=0;B<l.color.length;++B)l.color[B].shape=l._shape;l._color_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,l._color_rb),w.renderbufferStorage(w.RENDERBUFFER,w.RGBA4,l._shape[0],l._shape[1])),l.depth&&(l.depth.shape=l._shape),l._depth_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,l._depth_rb),l._useDepth&&l._useStencil?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_STENCIL,l._shape[0],l._shape[1]):l._useDepth?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_COMPONENT16,l._shape[0],l._shape[1]):l._useStencil&&w.renderbufferStorage(w.RENDERBUFFER,w.STENCIL_INDEX,l._shape[0],l._shape[1])),w.bindFramebuffer(w.FRAMEBUFFER,l.handle);var O=w.checkFramebufferStatus(w.FRAMEBUFFER);O!==w.FRAMEBUFFER_COMPLETE&&(l.dispose(),p(w,z),s(O)),p(w,z)}}Object.defineProperties(_,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(l){if(Array.isArray(l)||(l=[l|0,l|0]),l.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var d=l[0]|0,L=l[1]|0;return b(this,d,L),[d,L]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(l){return l=l|0,b(this,l,this._shape[1]),l},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(l){return l=l|0,b(this,this._shape[0],l),l},enumerable:!1}}),_.bind=function(){if(!this._destroyed){var l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,this.handle),l.viewport(0,0,this._shape[0],this._shape[1])}},_.dispose=function(){if(!this._destroyed){this._destroyed=!0;var l=this.gl;l.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(l.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var d=0;d<this.color.length;++d)this.color[d].dispose(),this.color[d]=null;this._color_rb&&(l.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function P(l,d,L,w){n||(n=l.FRAMEBUFFER_UNSUPPORTED,a=l.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,o=l.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,h=l.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var I=l.getExtension("WEBGL_draw_buffers");if(!f&&I&&x(l,I),Array.isArray(d)&&(w=L,L=d[1]|0,d=d[0]|0),typeof d!="number")throw new Error("gl-fbo: Missing shape parameter");var z=l.getParameter(l.MAX_RENDERBUFFER_SIZE);if(d<0||d>z||L<0||L>z)throw new Error("gl-fbo: Parameters are too large for FBO");w=w||{};var B=1;if("color"in w){if(B=Math.max(w.color|0,0),B<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(B>1)if(I){if(B>l.getParameter(I.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+B+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var O=l.UNSIGNED_BYTE,R=l.getExtension("OES_texture_float");if(w.float&&B>0){if(!R)throw new Error("gl-fbo: Context does not support floating point textures");O=l.FLOAT}else w.preferFloat&&B>0&&R&&(O=l.FLOAT);var C=!0;"depth"in w&&(C=!!w.depth);var F=!1;return"stencil"in w&&(F=!!w.stencil),new k(l,d,L,O,B,C,F,I)}},3530:function(g,v,e){var r=e(8974).sprintf,f=e(6603),n=e(9365),a=e(8008);g.exports=o;function o(h,y,p){var x=n(y)||"of unknown name (see npm glsl-shader-name)",s="unknown type";p!==void 0&&(s=p===f.FRAGMENT_SHADER?"fragment":"vertex");for(var u=r(`Error compiling %s shader %s:
`,s,x),c=r("%s%s",u,h),T=h.split(`
`),k={},_=0;_<T.length;_++){var b=T[_];if(!(b===""||b==="\0")){var P=parseInt(b.split(":")[2]);if(isNaN(P))throw new Error(r("Could not parse error: %s",b));k[P]=b}}for(var l=a(y).split(`
`),_=0;_<l.length;_++)if(!(!k[_+3]&&!k[_+2]&&!k[_+1])){var d=l[_];if(u+=d+`
`,k[_+1]){var L=k[_+1];L=L.substr(L.split(":",3).join(":").length+1).trim(),u+=r(`^^^ %s

`,L)}}return{long:u.trim(),short:c.trim()}}},6386:function(g,v,e){g.exports=s;var r=e(5070),f=e(9560),n=e(5306),a=e(5158),o=e(5827),h=e(1292);function y(u,c,T,k,_,b,P){this.plot=u,this.shader=c,this.pickShader=T,this.positionBuffer=k,this.weightBuffer=_,this.colorBuffer=b,this.idBuffer=P,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var p=y.prototype,x=[0,0,1,0,0,1,1,0,1,1,0,1];p.draw=function(){var u=[1,0,0,0,1,0,0,0,1];return function(){var c=this.plot,T=this.shader,k=this.bounds,_=this.numVertices;if(!(_<=0)){var b=c.gl,P=c.dataBox,l=k[2]-k[0],d=k[3]-k[1],L=P[2]-P[0],w=P[3]-P[1];u[0]=2*l/L,u[4]=2*d/w,u[6]=2*(k[0]-P[0])/L-1,u[7]=2*(k[1]-P[1])/w-1,T.bind();var I=T.uniforms;I.viewTransform=u,I.shape=this.shape;var z=T.attributes;this.positionBuffer.bind(),z.position.pointer(),this.weightBuffer.bind(),z.weight.pointer(b.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),z.color.pointer(b.UNSIGNED_BYTE,!0),b.drawArrays(b.TRIANGLES,0,_)}}}(),p.drawPick=function(){var u=[1,0,0,0,1,0,0,0,1],c=[0,0,0,0];return function(T){var k=this.plot,_=this.pickShader,b=this.bounds,P=this.numVertices;if(!(P<=0)){var l=k.gl,d=k.dataBox,L=b[2]-b[0],w=b[3]-b[1],I=d[2]-d[0],z=d[3]-d[1];u[0]=2*L/I,u[4]=2*w/z,u[6]=2*(b[0]-d[0])/I-1,u[7]=2*(b[1]-d[1])/z-1;for(var B=0;B<4;++B)c[B]=T>>B*8&255;this.pickOffset=T,_.bind();var O=_.uniforms;O.viewTransform=u,O.pickOffset=c,O.shape=this.shape;var R=_.attributes;return this.positionBuffer.bind(),R.position.pointer(),this.weightBuffer.bind(),R.weight.pointer(l.UNSIGNED_BYTE,!1),this.idBuffer.bind(),R.pickId.pointer(l.UNSIGNED_BYTE,!1),l.drawArrays(l.TRIANGLES,0,P),T+this.shape[0]*this.shape[1]}}}(),p.pick=function(u,c,T){var k=this.pickOffset,_=this.shape[0]*this.shape[1];if(T<k||T>=k+_)return null;var b=T-k,P=this.xData,l=this.yData;return{object:this,pointId:b,dataCoord:[P[b%this.shape[0]],l[b/this.shape[0]|0]]}},p.update=function(u){u=u||{};var c=u.shape||[0,0],T=u.x||f(c[0]),k=u.y||f(c[1]),_=u.z||new Float32Array(c[0]*c[1]),b=u.zsmooth!==!1;this.xData=T,this.yData=k;var P=u.colorLevels||[0],l=u.colorValues||[0,0,0,1],d=P.length,L=this.bounds,w,I,z,B;b?(w=L[0]=T[0],I=L[1]=k[0],z=L[2]=T[T.length-1],B=L[3]=k[k.length-1]):(w=L[0]=T[0]+(T[1]-T[0])/2,I=L[1]=k[0]+(k[1]-k[0])/2,z=L[2]=T[T.length-1]+(T[T.length-1]-T[T.length-2])/2,B=L[3]=k[k.length-1]+(k[k.length-1]-k[k.length-2])/2);var O=1/(z-w),R=1/(B-I),C=c[0],F=c[1];this.shape=[C,F];var N=(b?(C-1)*(F-1):C*F)*(x.length>>>1);this.numVertices=N;for(var V=n.mallocUint8(N*4),K=n.mallocFloat32(N*2),Q=n.mallocUint8(N*2),at=n.mallocUint32(N),it=0,q=b?C-1:C,W=b?F-1:F,Z=0;Z<W;++Z){var G,et;b?(G=R*(k[Z]-I),et=R*(k[Z+1]-I)):(G=Z<F-1?R*(k[Z]-(k[Z+1]-k[Z])/2-I):R*(k[Z]-(k[Z]-k[Z-1])/2-I),et=Z<F-1?R*(k[Z]+(k[Z+1]-k[Z])/2-I):R*(k[Z]+(k[Z]-k[Z-1])/2-I));for(var nt=0;nt<q;++nt){var X,Y;b?(X=O*(T[nt]-w),Y=O*(T[nt+1]-w)):(X=nt<C-1?O*(T[nt]-(T[nt+1]-T[nt])/2-w):O*(T[nt]-(T[nt]-T[nt-1])/2-w),Y=nt<C-1?O*(T[nt]+(T[nt+1]-T[nt])/2-w):O*(T[nt]+(T[nt]-T[nt-1])/2-w));for(var ot=0;ot<x.length;ot+=2){var rt=x[ot],ht=x[ot+1],pt=b?(Z+ht)*C+(nt+rt):Z*C+nt,yt=_[pt],xt=r.le(P,yt),Ft,Et,mt,gt;if(xt<0)Ft=l[0],Et=l[1],mt=l[2],gt=l[3];else if(xt===d-1)Ft=l[4*d-4],Et=l[4*d-3],mt=l[4*d-2],gt=l[4*d-1];else{var wt=(yt-P[xt])/(P[xt+1]-P[xt]),Pt=1-wt,Bt=4*xt,kt=4*(xt+1);Ft=Pt*l[Bt]+wt*l[kt],Et=Pt*l[Bt+1]+wt*l[kt+1],mt=Pt*l[Bt+2]+wt*l[kt+2],gt=Pt*l[Bt+3]+wt*l[kt+3]}V[4*it]=255*Ft,V[4*it+1]=255*Et,V[4*it+2]=255*mt,V[4*it+3]=255*gt,K[2*it]=X*.5+Y*.5,K[2*it+1]=G*.5+et*.5,Q[2*it]=rt,Q[2*it+1]=ht,at[it]=Z*C+nt,it+=1}}}this.positionBuffer.update(K),this.weightBuffer.update(Q),this.colorBuffer.update(V),this.idBuffer.update(at),n.free(K),n.free(V),n.free(Q),n.free(at)},p.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function s(u,c){var T=u.gl,k=a(T,h.vertex,h.fragment),_=a(T,h.pickVertex,h.pickFragment),b=o(T),P=o(T),l=o(T),d=o(T),L=new y(u,k,_,b,P,l,d);return L.update(c),u.addObject(L),L}},1292:function(g,v,e){var r=e(6832);g.exports={fragment:r([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:r([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},248:function(g,v,e){var r=e(6832),f=e(5158),n=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),a=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),o=r([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),h=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];v.createShader=function(y){return f(y,n,a,null,h)},v.createPickShader=function(y){return f(y,n,o,null,h)}},6086:function(g,v,e){g.exports=l;var r=e(5827),f=e(2944),n=e(8931),a=new Uint8Array(4),o=new Float32Array(a.buffer);function h(d,L,w,I){return a[0]=I,a[1]=w,a[2]=L,a[3]=d,o[0]}var y=e(5070),p=e(5050),x=e(248),s=x.createShader,u=x.createPickShader,c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function T(d,L){for(var w=0,I=0;I<3;++I){var z=d[I]-L[I];w+=z*z}return Math.sqrt(w)}function k(d){for(var L=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)L[0][w]=Math.max(d[0][w],L[0][w]),L[1][w]=Math.min(d[1][w],L[1][w]);return L}function _(d,L,w,I){this.arcLength=d,this.position=L,this.index=w,this.dataCoordinate=I}function b(d,L,w,I,z,B){this.gl=d,this.shader=L,this.pickShader=w,this.buffer=I,this.vao=z,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=B,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var P=b.prototype;P.isTransparent=function(){return this.hasAlpha},P.isOpaque=function(){return!this.hasAlpha},P.pickSlots=1,P.setPickBase=function(d){this.pickId=d},P.drawTransparent=P.draw=function(d){if(this.vertexCount){var L=this.gl,w=this.shader,I=this.vao;w.bind(),w.uniforms={model:d.model||c,view:d.view||c,projection:d.projection||c,clipBounds:k(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[L.drawingBufferWidth,L.drawingBufferHeight],pixelRatio:this.pixelRatio},I.bind(),I.draw(L.TRIANGLE_STRIP,this.vertexCount),I.unbind()}},P.drawPick=function(d){if(this.vertexCount){var L=this.gl,w=this.pickShader,I=this.vao;w.bind(),w.uniforms={model:d.model||c,view:d.view||c,projection:d.projection||c,pickId:this.pickId,clipBounds:k(this.clipBounds),screenShape:[L.drawingBufferWidth,L.drawingBufferHeight],pixelRatio:this.pixelRatio},I.bind(),I.draw(L.TRIANGLE_STRIP,this.vertexCount),I.unbind()}},P.update=function(d){var L,w;this.dirty=!0;var I=!!d.connectGaps;"dashScale"in d&&(this.dashScale=d.dashScale),this.hasAlpha=!1,"opacity"in d&&(this.opacity=+d.opacity,this.opacity<1&&(this.hasAlpha=!0));var z=[],B=[],O=[],R=0,C=0,F=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],N=d.position||d.positions;if(N){var V=d.color||d.colors||[0,0,0,1],K=d.lineWidth||1,Q=!1;t:for(L=1;L<N.length;++L){var at=N[L-1],it=N[L];for(B.push(R),O.push(at.slice()),w=0;w<3;++w){if(isNaN(at[w])||isNaN(it[w])||!isFinite(at[w])||!isFinite(it[w])){if(!I&&z.length>0){for(var q=0;q<24;++q)z.push(z[z.length-12]);C+=2,Q=!0}continue t}F[0][w]=Math.min(F[0][w],at[w],it[w]),F[1][w]=Math.max(F[1][w],at[w],it[w])}var W,Z;Array.isArray(V[0])?(W=V.length>L-1?V[L-1]:V.length>0?V[V.length-1]:[0,0,0,1],Z=V.length>L?V[L]:V.length>0?V[V.length-1]:[0,0,0,1]):W=Z=V,W.length===3&&(W=[W[0],W[1],W[2],1]),Z.length===3&&(Z=[Z[0],Z[1],Z[2],1]),!this.hasAlpha&&W[3]<1&&(this.hasAlpha=!0);var G;Array.isArray(K)?G=K.length>L-1?K[L-1]:K.length>0?K[K.length-1]:[0,0,0,1]:G=K;var et=R;if(R+=T(at,it),Q){for(w=0;w<2;++w)z.push(at[0],at[1],at[2],it[0],it[1],it[2],et,G,W[0],W[1],W[2],W[3]);C+=2,Q=!1}z.push(at[0],at[1],at[2],it[0],it[1],it[2],et,G,W[0],W[1],W[2],W[3],at[0],at[1],at[2],it[0],it[1],it[2],et,-G,W[0],W[1],W[2],W[3],it[0],it[1],it[2],at[0],at[1],at[2],R,-G,Z[0],Z[1],Z[2],Z[3],it[0],it[1],it[2],at[0],at[1],at[2],R,G,Z[0],Z[1],Z[2],Z[3]),C+=4}}if(this.buffer.update(z),B.push(R),O.push(N[N.length-1].slice()),this.bounds=F,this.vertexCount=C,this.points=O,this.arcLength=B,"dashes"in d){var nt=d.dashes,X=nt.slice();for(X.unshift(0),L=1;L<X.length;++L)X[L]=X[L-1]+X[L];var Y=p(new Array(256*4),[256,1,4]);for(L=0;L<256;++L){for(w=0;w<4;++w)Y.set(L,0,w,0);y.le(X,X[X.length-1]*L/255)&1?Y.set(L,0,0,0):Y.set(L,0,0,255)}this.texture.setPixels(Y)}},P.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},P.pick=function(d){if(!d||d.id!==this.pickId)return null;var L=h(d.value[0],d.value[1],d.value[2],0),w=y.le(this.arcLength,L);if(w<0)return null;if(w===this.arcLength.length-1)return new _(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),w);for(var I=this.points[w],z=this.points[Math.min(w+1,this.points.length-1)],B=(L-this.arcLength[w])/(this.arcLength[w+1]-this.arcLength[w]),O=1-B,R=[0,0,0],C=0;C<3;++C)R[C]=O*I[C]+B*z[C];var F=Math.min(B<.5?w:w+1,this.points.length-1);return new _(L,R,F,this.points[F])};function l(d){var L=d.gl||d.scene&&d.scene.gl,w=s(L);w.attributes.position.location=0,w.attributes.nextPosition.location=1,w.attributes.arcLength.location=2,w.attributes.lineWidth.location=3,w.attributes.color.location=4;var I=u(L);I.attributes.position.location=0,I.attributes.nextPosition.location=1,I.attributes.arcLength.location=2,I.attributes.lineWidth.location=3,I.attributes.color.location=4;for(var z=r(L),B=f(L,[{buffer:z,size:3,offset:0,stride:48},{buffer:z,size:3,offset:12,stride:48},{buffer:z,size:1,offset:24,stride:48},{buffer:z,size:1,offset:28,stride:48},{buffer:z,size:4,offset:32,stride:48}]),O=p(new Array(1024),[256,1,4]),R=0;R<1024;++R)O.data[R]=255;var C=n(L,O);C.wrap=L.REPEAT;var F=new b(L,w,I,z,B,C);return F.update(d),F}},7332:function(g){g.exports=v;function v(e){var r=new Float32Array(16);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}},9823:function(g){g.exports=v;function v(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},7787:function(g){g.exports=v;function v(e){var r=e[0],f=e[1],n=e[2],a=e[3],o=e[4],h=e[5],y=e[6],p=e[7],x=e[8],s=e[9],u=e[10],c=e[11],T=e[12],k=e[13],_=e[14],b=e[15],P=r*h-f*o,l=r*y-n*o,d=r*p-a*o,L=f*y-n*h,w=f*p-a*h,I=n*p-a*y,z=x*k-s*T,B=x*_-u*T,O=x*b-c*T,R=s*_-u*k,C=s*b-c*k,F=u*b-c*_;return P*F-l*C+d*R+L*O-w*B+I*z}},5950:function(g){g.exports=v;function v(e,r){var f=r[0],n=r[1],a=r[2],o=r[3],h=f+f,y=n+n,p=a+a,x=f*h,s=n*h,u=n*y,c=a*h,T=a*y,k=a*p,_=o*h,b=o*y,P=o*p;return e[0]=1-u-k,e[1]=s+P,e[2]=c-b,e[3]=0,e[4]=s-P,e[5]=1-x-k,e[6]=T+_,e[7]=0,e[8]=c+b,e[9]=T-_,e[10]=1-x-u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},7280:function(g){g.exports=v;function v(e,r,f){var n=r[0],a=r[1],o=r[2],h=r[3],y=n+n,p=a+a,x=o+o,s=n*y,u=n*p,c=n*x,T=a*p,k=a*x,_=o*x,b=h*y,P=h*p,l=h*x;return e[0]=1-(T+_),e[1]=u+l,e[2]=c-P,e[3]=0,e[4]=u-l,e[5]=1-(s+_),e[6]=k+b,e[7]=0,e[8]=c+P,e[9]=k-b,e[10]=1-(s+T),e[11]=0,e[12]=f[0],e[13]=f[1],e[14]=f[2],e[15]=1,e}},9947:function(g){g.exports=v;function v(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},7437:function(g){g.exports=v;function v(e,r){var f=r[0],n=r[1],a=r[2],o=r[3],h=r[4],y=r[5],p=r[6],x=r[7],s=r[8],u=r[9],c=r[10],T=r[11],k=r[12],_=r[13],b=r[14],P=r[15],l=f*y-n*h,d=f*p-a*h,L=f*x-o*h,w=n*p-a*y,I=n*x-o*y,z=a*x-o*p,B=s*_-u*k,O=s*b-c*k,R=s*P-T*k,C=u*b-c*_,F=u*P-T*_,N=c*P-T*b,V=l*N-d*F+L*C+w*R-I*O+z*B;return V?(V=1/V,e[0]=(y*N-p*F+x*C)*V,e[1]=(a*F-n*N-o*C)*V,e[2]=(_*z-b*I+P*w)*V,e[3]=(c*I-u*z-T*w)*V,e[4]=(p*R-h*N-x*O)*V,e[5]=(f*N-a*R+o*O)*V,e[6]=(b*L-k*z-P*d)*V,e[7]=(s*z-c*L+T*d)*V,e[8]=(h*F-y*R+x*B)*V,e[9]=(n*R-f*F-o*B)*V,e[10]=(k*I-_*L+P*l)*V,e[11]=(u*L-s*I-T*l)*V,e[12]=(y*O-h*C-p*B)*V,e[13]=(f*C-n*O+a*B)*V,e[14]=(_*d-k*w-b*l)*V,e[15]=(s*w-u*d+c*l)*V,e):null}},3012:function(g,v,e){var r=e(9947);g.exports=f;function f(n,a,o,h){var y,p,x,s,u,c,T,k,_,b,P=a[0],l=a[1],d=a[2],L=h[0],w=h[1],I=h[2],z=o[0],B=o[1],O=o[2];return Math.abs(P-z)<1e-6&&Math.abs(l-B)<1e-6&&Math.abs(d-O)<1e-6?r(n):(T=P-z,k=l-B,_=d-O,b=1/Math.sqrt(T*T+k*k+_*_),T*=b,k*=b,_*=b,y=w*_-I*k,p=I*T-L*_,x=L*k-w*T,b=Math.sqrt(y*y+p*p+x*x),b?(b=1/b,y*=b,p*=b,x*=b):(y=0,p=0,x=0),s=k*x-_*p,u=_*y-T*x,c=T*p-k*y,b=Math.sqrt(s*s+u*u+c*c),b?(b=1/b,s*=b,u*=b,c*=b):(s=0,u=0,c=0),n[0]=y,n[1]=s,n[2]=T,n[3]=0,n[4]=p,n[5]=u,n[6]=k,n[7]=0,n[8]=x,n[9]=c,n[10]=_,n[11]=0,n[12]=-(y*P+p*l+x*d),n[13]=-(s*P+u*l+c*d),n[14]=-(T*P+k*l+_*d),n[15]=1,n)}},104:function(g){g.exports=v;function v(e,r,f){var n=r[0],a=r[1],o=r[2],h=r[3],y=r[4],p=r[5],x=r[6],s=r[7],u=r[8],c=r[9],T=r[10],k=r[11],_=r[12],b=r[13],P=r[14],l=r[15],d=f[0],L=f[1],w=f[2],I=f[3];return e[0]=d*n+L*y+w*u+I*_,e[1]=d*a+L*p+w*c+I*b,e[2]=d*o+L*x+w*T+I*P,e[3]=d*h+L*s+w*k+I*l,d=f[4],L=f[5],w=f[6],I=f[7],e[4]=d*n+L*y+w*u+I*_,e[5]=d*a+L*p+w*c+I*b,e[6]=d*o+L*x+w*T+I*P,e[7]=d*h+L*s+w*k+I*l,d=f[8],L=f[9],w=f[10],I=f[11],e[8]=d*n+L*y+w*u+I*_,e[9]=d*a+L*p+w*c+I*b,e[10]=d*o+L*x+w*T+I*P,e[11]=d*h+L*s+w*k+I*l,d=f[12],L=f[13],w=f[14],I=f[15],e[12]=d*n+L*y+w*u+I*_,e[13]=d*a+L*p+w*c+I*b,e[14]=d*o+L*x+w*T+I*P,e[15]=d*h+L*s+w*k+I*l,e}},5268:function(g){g.exports=v;function v(e,r,f,n,a,o,h){var y=1/(r-f),p=1/(n-a),x=1/(o-h);return e[0]=-2*y,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*p,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*x,e[11]=0,e[12]=(r+f)*y,e[13]=(a+n)*p,e[14]=(h+o)*x,e[15]=1,e}},1120:function(g){g.exports=v;function v(e,r,f,n,a){var o=1/Math.tan(r/2),h=1/(n-a);return e[0]=o/f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(a+n)*h,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*a*n*h,e[15]=0,e}},4422:function(g){g.exports=v;function v(e,r,f,n){var a=n[0],o=n[1],h=n[2],y=Math.sqrt(a*a+o*o+h*h),p,x,s,u,c,T,k,_,b,P,l,d,L,w,I,z,B,O,R,C,F,N,V,K;return Math.abs(y)<1e-6?null:(y=1/y,a*=y,o*=y,h*=y,p=Math.sin(f),x=Math.cos(f),s=1-x,u=r[0],c=r[1],T=r[2],k=r[3],_=r[4],b=r[5],P=r[6],l=r[7],d=r[8],L=r[9],w=r[10],I=r[11],z=a*a*s+x,B=o*a*s+h*p,O=h*a*s-o*p,R=a*o*s-h*p,C=o*o*s+x,F=h*o*s+a*p,N=a*h*s+o*p,V=o*h*s-a*p,K=h*h*s+x,e[0]=u*z+_*B+d*O,e[1]=c*z+b*B+L*O,e[2]=T*z+P*B+w*O,e[3]=k*z+l*B+I*O,e[4]=u*R+_*C+d*F,e[5]=c*R+b*C+L*F,e[6]=T*R+P*C+w*F,e[7]=k*R+l*C+I*F,e[8]=u*N+_*V+d*K,e[9]=c*N+b*V+L*K,e[10]=T*N+P*V+w*K,e[11]=k*N+l*V+I*K,r!==e&&(e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e)}},6109:function(g){g.exports=v;function v(e,r,f){var n=Math.sin(f),a=Math.cos(f),o=r[4],h=r[5],y=r[6],p=r[7],x=r[8],s=r[9],u=r[10],c=r[11];return r!==e&&(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[4]=o*a+x*n,e[5]=h*a+s*n,e[6]=y*a+u*n,e[7]=p*a+c*n,e[8]=x*a-o*n,e[9]=s*a-h*n,e[10]=u*a-y*n,e[11]=c*a-p*n,e}},7115:function(g){g.exports=v;function v(e,r,f){var n=Math.sin(f),a=Math.cos(f),o=r[0],h=r[1],y=r[2],p=r[3],x=r[8],s=r[9],u=r[10],c=r[11];return r!==e&&(e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=o*a-x*n,e[1]=h*a-s*n,e[2]=y*a-u*n,e[3]=p*a-c*n,e[8]=o*n+x*a,e[9]=h*n+s*a,e[10]=y*n+u*a,e[11]=p*n+c*a,e}},5240:function(g){g.exports=v;function v(e,r,f){var n=Math.sin(f),a=Math.cos(f),o=r[0],h=r[1],y=r[2],p=r[3],x=r[4],s=r[5],u=r[6],c=r[7];return r!==e&&(e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=o*a+x*n,e[1]=h*a+s*n,e[2]=y*a+u*n,e[3]=p*a+c*n,e[4]=x*a-o*n,e[5]=s*a-h*n,e[6]=u*a-y*n,e[7]=c*a-p*n,e}},3668:function(g){g.exports=v;function v(e,r,f){var n=f[0],a=f[1],o=f[2];return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e[3]=r[3]*n,e[4]=r[4]*a,e[5]=r[5]*a,e[6]=r[6]*a,e[7]=r[7]*a,e[8]=r[8]*o,e[9]=r[9]*o,e[10]=r[10]*o,e[11]=r[11]*o,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}},998:function(g){g.exports=v;function v(e,r,f){var n=f[0],a=f[1],o=f[2],h,y,p,x,s,u,c,T,k,_,b,P;return r===e?(e[12]=r[0]*n+r[4]*a+r[8]*o+r[12],e[13]=r[1]*n+r[5]*a+r[9]*o+r[13],e[14]=r[2]*n+r[6]*a+r[10]*o+r[14],e[15]=r[3]*n+r[7]*a+r[11]*o+r[15]):(h=r[0],y=r[1],p=r[2],x=r[3],s=r[4],u=r[5],c=r[6],T=r[7],k=r[8],_=r[9],b=r[10],P=r[11],e[0]=h,e[1]=y,e[2]=p,e[3]=x,e[4]=s,e[5]=u,e[6]=c,e[7]=T,e[8]=k,e[9]=_,e[10]=b,e[11]=P,e[12]=h*n+s*a+k*o+r[12],e[13]=y*n+u*a+_*o+r[13],e[14]=p*n+c*a+b*o+r[14],e[15]=x*n+T*a+P*o+r[15]),e}},2142:function(g){g.exports=v;function v(e,r){if(e===r){var f=r[1],n=r[2],a=r[3],o=r[6],h=r[7],y=r[11];e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=f,e[6]=r[9],e[7]=r[13],e[8]=n,e[9]=o,e[11]=r[14],e[12]=a,e[13]=h,e[14]=y}else e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=r[1],e[5]=r[5],e[6]=r[9],e[7]=r[13],e[8]=r[2],e[9]=r[6],e[10]=r[10],e[11]=r[14],e[12]=r[3],e[13]=r[7],e[14]=r[11],e[15]=r[15];return e}},4340:function(g,v,e){var r=e(957),f=e(7309);g.exports=y;function n(p,x){for(var s=[0,0,0,0],u=0;u<4;++u)for(var c=0;c<4;++c)s[c]+=p[4*u+c]*x[u];return s}function a(p,x,s,u,c){for(var T=n(u,n(s,n(x,[p[0],p[1],p[2],1]))),k=0;k<3;++k)T[k]/=T[3];return[.5*c[0]*(1+T[0]),.5*c[1]*(1-T[1])]}function o(p,x){if(p.length===2){for(var s=0,u=0,c=0;c<2;++c)s+=Math.pow(x[c]-p[0][c],2),u+=Math.pow(x[c]-p[1][c],2);return s=Math.sqrt(s),u=Math.sqrt(u),s+u<1e-6?[1,0]:[u/(s+u),s/(u+s)]}else if(p.length===3){var T=[0,0];return f(p[0],p[1],p[2],x,T),r(p,T)}return[]}function h(p,x){for(var s=[0,0,0],u=0;u<p.length;++u)for(var c=p[u],T=x[u],k=0;k<3;++k)s[k]+=T*c[k];return s}function y(p,x,s,u,c,T){if(p.length===1)return[0,p[0].slice()];for(var k=new Array(p.length),_=0;_<p.length;++_)k[_]=a(p[_],s,u,c,T);for(var b=0,P=1/0,_=0;_<k.length;++_){for(var l=0,d=0;d<2;++d)l+=Math.pow(k[_][d]-x[d],2);l<P&&(P=l,b=_)}for(var L=o(k,x),w=0,_=0;_<3;++_){if(L[_]<-.001||L[_]>1.0001)return null;w+=L[_]}return Math.abs(w-1)>.001?null:[b,h(p,L),L]}},2056:function(g,v,e){var r=e(6832),f=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),n=r([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),a=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),o=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),h=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),y=r([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),p=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),x=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),s=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),u=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),c=r([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);v.meshShader={vertex:f,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},v.wireShader={vertex:a,fragment:o,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},v.pointShader={vertex:h,fragment:y,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},v.pickShader={vertex:p,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},v.pointPickShader={vertex:s,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},v.contourShader={vertex:u,fragment:c,attributes:[{name:"position",type:"vec3"}]}},8116:function(g,v,e){var r=1e-6,f=1e-6,n=e(5158),a=e(5827),o=e(2944),h=e(8931),y=e(115),p=e(104),x=e(7437),s=e(5050),u=e(9156),c=e(7212),T=e(5306),k=e(2056),_=e(4340),b=k.meshShader,P=k.wireShader,l=k.pointShader,d=k.pickShader,L=k.pointPickShader,w=k.contourShader,I=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function z(q,W,Z,G,et,nt,X,Y,ot,rt,ht,pt,yt,xt,Ft,Et,mt,gt,wt,Pt,Bt,kt,jt,Ht,Vt,ee,te){this.gl=q,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=W,this.dirty=!0,this.triShader=Z,this.lineShader=G,this.pointShader=et,this.pickShader=nt,this.pointPickShader=X,this.contourShader=Y,this.trianglePositions=ot,this.triangleColors=ht,this.triangleNormals=yt,this.triangleUVs=pt,this.triangleIds=rt,this.triangleVAO=xt,this.triangleCount=0,this.lineWidth=1,this.edgePositions=Ft,this.edgeColors=mt,this.edgeUVs=gt,this.edgeIds=Et,this.edgeVAO=wt,this.edgeCount=0,this.pointPositions=Pt,this.pointColors=kt,this.pointUVs=jt,this.pointSizes=Ht,this.pointIds=Bt,this.pointVAO=Vt,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=ee,this.contourVAO=te,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=I,this._view=I,this._projection=I,this._resolution=[1,1]}var B=z.prototype;B.isOpaque=function(){return!this.hasAlpha},B.isTransparent=function(){return this.hasAlpha},B.pickSlots=1,B.setPickBase=function(q){this.pickId=q};function O(q,W){if(!W||!W.length)return 1;for(var Z=0;Z<W.length;++Z){if(W.length<2)return 1;if(W[Z][0]===q)return W[Z][1];if(W[Z][0]>q&&Z>0){var G=(W[Z][0]-q)/(W[Z][0]-W[Z-1][0]);return W[Z][1]*(1-G)+G*W[Z-1][1]}}return 1}function R(q,W){for(var Z=u({colormap:q,nshades:256,format:"rgba"}),G=new Uint8Array(1024),et=0;et<256;++et){for(var nt=Z[et],X=0;X<3;++X)G[4*et+X]=nt[X];W?G[4*et+3]=255*O(et/255,W):G[4*et+3]=255*nt[3]}return s(G,[256,256,4],[4,0,1])}function C(q){for(var W=q.length,Z=new Array(W),G=0;G<W;++G)Z[G]=q[G][2];return Z}B.highlight=function(q){if(!q||!this.contourEnable){this.contourCount=0;return}for(var W=c(this.cells,this.intensity,q.intensity),Z=W.cells,G=W.vertexIds,et=W.vertexWeights,nt=Z.length,X=T.mallocFloat32(6*nt),Y=0,ot=0;ot<nt;++ot)for(var rt=Z[ot],ht=0;ht<2;++ht){var pt=rt[0];rt.length===2&&(pt=rt[ht]);for(var yt=G[pt][0],xt=G[pt][1],Ft=et[pt],Et=1-Ft,mt=this.positions[yt],gt=this.positions[xt],wt=0;wt<3;++wt)X[Y++]=Ft*mt[wt]+Et*gt[wt]}this.contourCount=Y/3|0,this.contourPositions.update(X.subarray(0,Y)),T.free(X)},B.update=function(q){q=q||{};var W=this.gl;this.dirty=!0,"contourEnable"in q&&(this.contourEnable=q.contourEnable),"contourColor"in q&&(this.contourColor=q.contourColor),"lineWidth"in q&&(this.lineWidth=q.lineWidth),"lightPosition"in q&&(this.lightPosition=q.lightPosition),this.hasAlpha=!1,"opacity"in q&&(this.opacity=q.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in q&&(this.opacityscale=q.opacityscale,this.hasAlpha=!0),"ambient"in q&&(this.ambientLight=q.ambient),"diffuse"in q&&(this.diffuseLight=q.diffuse),"specular"in q&&(this.specularLight=q.specular),"roughness"in q&&(this.roughness=q.roughness),"fresnel"in q&&(this.fresnel=q.fresnel),q.texture?(this.texture.dispose(),this.texture=h(W,q.texture)):q.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=W.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=W.LINEAR,this.texture.setPixels(R(q.colormap,this.opacityscale)),this.texture.generateMipmap());var Z=q.cells,G=q.positions;if(!(!G||!Z)){var et=[],nt=[],X=[],Y=[],ot=[],rt=[],ht=[],pt=[],yt=[],xt=[],Ft=[],Et=[],mt=[],gt=[];this.cells=Z,this.positions=G;var wt=q.vertexNormals,Pt=q.cellNormals,Bt=q.vertexNormalsEpsilon===void 0?r:q.vertexNormalsEpsilon,kt=q.faceNormalsEpsilon===void 0?f:q.faceNormalsEpsilon;q.useFacetNormals&&!Pt&&(Pt=y.faceNormals(Z,G,kt)),!Pt&&!wt&&(wt=y.vertexNormals(Z,G,Bt));var jt=q.vertexColors,Ht=q.cellColors,Vt=q.meshColor||[1,1,1,1],ee=q.vertexUVs,te=q.vertexIntensity,ae=q.cellUVs,le=q.cellIntensity,ce=1/0,pe=-1/0;if(!ee&&!ae)if(te)if(q.vertexIntensityBounds)ce=+q.vertexIntensityBounds[0],pe=+q.vertexIntensityBounds[1];else for(var we=0;we<te.length;++we){var ve=te[we];ce=Math.min(ce,ve),pe=Math.max(pe,ve)}else if(le)if(q.cellIntensityBounds)ce=+q.cellIntensityBounds[0],pe=+q.cellIntensityBounds[1];else for(var we=0;we<le.length;++we){var ve=le[we];ce=Math.min(ce,ve),pe=Math.max(pe,ve)}else for(var we=0;we<G.length;++we){var ve=G[we][2];ce=Math.min(ce,ve),pe=Math.max(pe,ve)}te?this.intensity=te:le?this.intensity=le:this.intensity=C(G),this.pickVertex=!(le||Ht);var Mt=q.pointSizes,It=q.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var we=0;we<G.length;++we)for(var Rt=G[we],zt=0;zt<3;++zt)isNaN(Rt[zt])||!isFinite(Rt[zt])||(this.bounds[0][zt]=Math.min(this.bounds[0][zt],Rt[zt]),this.bounds[1][zt]=Math.max(this.bounds[1][zt],Rt[zt]));var Tt=0,ft=0,ut=0;t:for(var we=0;we<Z.length;++we){var vt=Z[we];switch(vt.length){case 1:for(var St=vt[0],Rt=G[St],zt=0;zt<3;++zt)if(isNaN(Rt[zt])||!isFinite(Rt[zt]))continue t;xt.push(Rt[0],Rt[1],Rt[2]);var Ot;jt?Ot=jt[St]:Ht?Ot=Ht[we]:Ot=Vt,this.opacityscale&&te?nt.push(Ot[0],Ot[1],Ot[2],this.opacity*O((te[St]-ce)/(pe-ce),this.opacityscale)):Ot.length===3?Ft.push(Ot[0],Ot[1],Ot[2],this.opacity):(Ft.push(Ot[0],Ot[1],Ot[2],Ot[3]*this.opacity),Ot[3]<1&&(this.hasAlpha=!0));var Xt;ee?Xt=ee[St]:te?Xt=[(te[St]-ce)/(pe-ce),0]:ae?Xt=ae[we]:le?Xt=[(le[we]-ce)/(pe-ce),0]:Xt=[(Rt[2]-ce)/(pe-ce),0],Et.push(Xt[0],Xt[1]),Mt?mt.push(Mt[St]):mt.push(It),gt.push(we),ut+=1;break;case 2:for(var zt=0;zt<2;++zt)for(var St=vt[zt],Rt=G[St],$t=0;$t<3;++$t)if(isNaN(Rt[$t])||!isFinite(Rt[$t]))continue t;for(var zt=0;zt<2;++zt){var St=vt[zt],Rt=G[St];rt.push(Rt[0],Rt[1],Rt[2]);var Ot;jt?Ot=jt[St]:Ht?Ot=Ht[we]:Ot=Vt,this.opacityscale&&te?nt.push(Ot[0],Ot[1],Ot[2],this.opacity*O((te[St]-ce)/(pe-ce),this.opacityscale)):Ot.length===3?ht.push(Ot[0],Ot[1],Ot[2],this.opacity):(ht.push(Ot[0],Ot[1],Ot[2],Ot[3]*this.opacity),Ot[3]<1&&(this.hasAlpha=!0));var Xt;ee?Xt=ee[St]:te?Xt=[(te[St]-ce)/(pe-ce),0]:ae?Xt=ae[we]:le?Xt=[(le[we]-ce)/(pe-ce),0]:Xt=[(Rt[2]-ce)/(pe-ce),0],pt.push(Xt[0],Xt[1]),yt.push(we)}ft+=1;break;case 3:for(var zt=0;zt<3;++zt)for(var St=vt[zt],Rt=G[St],$t=0;$t<3;++$t)if(isNaN(Rt[$t])||!isFinite(Rt[$t]))continue t;for(var zt=0;zt<3;++zt){var St=vt[2-zt],Rt=G[St];et.push(Rt[0],Rt[1],Rt[2]);var Ot;jt?Ot=jt[St]:Ht?Ot=Ht[we]:Ot=Vt,Ot?this.opacityscale&&te?nt.push(Ot[0],Ot[1],Ot[2],this.opacity*O((te[St]-ce)/(pe-ce),this.opacityscale)):Ot.length===3?nt.push(Ot[0],Ot[1],Ot[2],this.opacity):(nt.push(Ot[0],Ot[1],Ot[2],Ot[3]*this.opacity),Ot[3]<1&&(this.hasAlpha=!0)):nt.push(.5,.5,.5,1);var Xt;ee?Xt=ee[St]:te?Xt=[(te[St]-ce)/(pe-ce),0]:ae?Xt=ae[we]:le?Xt=[(le[we]-ce)/(pe-ce),0]:Xt=[(Rt[2]-ce)/(pe-ce),0],Y.push(Xt[0],Xt[1]);var de;wt?de=wt[St]:de=Pt[we],X.push(de[0],de[1],de[2]),ot.push(we)}Tt+=1;break}}this.pointCount=ut,this.edgeCount=ft,this.triangleCount=Tt,this.pointPositions.update(xt),this.pointColors.update(Ft),this.pointUVs.update(Et),this.pointSizes.update(mt),this.pointIds.update(new Uint32Array(gt)),this.edgePositions.update(rt),this.edgeColors.update(ht),this.edgeUVs.update(pt),this.edgeIds.update(new Uint32Array(yt)),this.trianglePositions.update(et),this.triangleColors.update(nt),this.triangleUVs.update(Y),this.triangleNormals.update(X),this.triangleIds.update(new Uint32Array(ot))}},B.drawTransparent=B.draw=function(q){q=q||{};for(var W=this.gl,Z=q.model||I,G=q.view||I,et=q.projection||I,nt=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],X=0;X<3;++X)nt[0][X]=Math.max(nt[0][X],this.clipBounds[0][X]),nt[1][X]=Math.min(nt[1][X],this.clipBounds[1][X]);var Y={model:Z,view:G,projection:et,inverseModel:I.slice(),clipBounds:nt,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};Y.inverseModel=x(Y.inverseModel,Y.model),W.disable(W.CULL_FACE),this.texture.bind(0);var ot=new Array(16);p(ot,Y.view,Y.model),p(ot,Y.projection,ot),x(ot,ot);for(var X=0;X<3;++X)Y.eyePosition[X]=ot[12+X]/ot[15];for(var rt=ot[15],X=0;X<3;++X)rt+=this.lightPosition[X]*ot[4*X+3];for(var X=0;X<3;++X){for(var ht=ot[12+X],pt=0;pt<3;++pt)ht+=ot[4*pt+X]*this.lightPosition[pt];Y.lightPosition[X]=ht/rt}if(this.triangleCount>0){var yt=this.triShader;yt.bind(),yt.uniforms=Y,this.triangleVAO.bind(),W.drawArrays(W.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var yt=this.lineShader;yt.bind(),yt.uniforms=Y,this.edgeVAO.bind(),W.lineWidth(this.lineWidth*this.pixelRatio),W.drawArrays(W.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var yt=this.pointShader;yt.bind(),yt.uniforms=Y,this.pointVAO.bind(),W.drawArrays(W.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var yt=this.contourShader;yt.bind(),yt.uniforms=Y,this.contourVAO.bind(),W.drawArrays(W.LINES,0,this.contourCount),this.contourVAO.unbind()}},B.drawPick=function(q){q=q||{};for(var W=this.gl,Z=q.model||I,G=q.view||I,et=q.projection||I,nt=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],X=0;X<3;++X)nt[0][X]=Math.max(nt[0][X],this.clipBounds[0][X]),nt[1][X]=Math.min(nt[1][X],this.clipBounds[1][X]);this._model=[].slice.call(Z),this._view=[].slice.call(G),this._projection=[].slice.call(et),this._resolution=[W.drawingBufferWidth,W.drawingBufferHeight];var Y={model:Z,view:G,projection:et,clipBounds:nt,pickId:this.pickId/255},ot=this.pickShader;if(ot.bind(),ot.uniforms=Y,this.triangleCount>0&&(this.triangleVAO.bind(),W.drawArrays(W.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),W.lineWidth(this.lineWidth*this.pixelRatio),W.drawArrays(W.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var ot=this.pointPickShader;ot.bind(),ot.uniforms=Y,this.pointVAO.bind(),W.drawArrays(W.POINTS,0,this.pointCount),this.pointVAO.unbind()}},B.pick=function(q){if(!q||q.id!==this.pickId)return null;for(var W=q.value[0]+256*q.value[1]+65536*q.value[2],Z=this.cells[W],G=this.positions,et=new Array(Z.length),nt=0;nt<Z.length;++nt)et[nt]=G[Z[nt]];var X=q.coord[0],Y=q.coord[1];if(!this.pickVertex){var ot=this.positions[Z[0]],rt=this.positions[Z[1]],ht=this.positions[Z[2]],pt=[(ot[0]+rt[0]+ht[0])/3,(ot[1]+rt[1]+ht[1])/3,(ot[2]+rt[2]+ht[2])/3];return{_cellCenter:!0,position:[X,Y],index:W,cell:Z,cellId:W,intensity:this.intensity[W],dataCoordinate:pt}}var yt=_(et,[X*this.pixelRatio,this._resolution[1]-Y*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!yt)return null;for(var xt=yt[2],Ft=0,nt=0;nt<Z.length;++nt)Ft+=xt[nt]*this.intensity[Z[nt]];return{position:yt[1],index:Z[yt[0]],cell:Z,cellId:W,intensity:Ft,dataCoordinate:this.positions[Z[yt[0]]]}},B.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function F(q){var W=n(q,b.vertex,b.fragment);return W.attributes.position.location=0,W.attributes.color.location=2,W.attributes.uv.location=3,W.attributes.normal.location=4,W}function N(q){var W=n(q,P.vertex,P.fragment);return W.attributes.position.location=0,W.attributes.color.location=2,W.attributes.uv.location=3,W}function V(q){var W=n(q,l.vertex,l.fragment);return W.attributes.position.location=0,W.attributes.color.location=2,W.attributes.uv.location=3,W.attributes.pointSize.location=4,W}function K(q){var W=n(q,d.vertex,d.fragment);return W.attributes.position.location=0,W.attributes.id.location=1,W}function Q(q){var W=n(q,L.vertex,L.fragment);return W.attributes.position.location=0,W.attributes.id.location=1,W.attributes.pointSize.location=4,W}function at(q){var W=n(q,w.vertex,w.fragment);return W.attributes.position.location=0,W}function it(q,W){arguments.length===1&&(W=q,q=W.gl);var Z=q.getExtension("OES_standard_derivatives")||q.getExtension("MOZ_OES_standard_derivatives")||q.getExtension("WEBKIT_OES_standard_derivatives");if(!Z)throw new Error("derivatives not supported");var G=F(q),et=N(q),nt=V(q),X=K(q),Y=Q(q),ot=at(q),rt=h(q,s(new Uint8Array([255,255,255,255]),[1,1,4]));rt.generateMipmap(),rt.minFilter=q.LINEAR_MIPMAP_LINEAR,rt.magFilter=q.LINEAR;var ht=a(q),pt=a(q),yt=a(q),xt=a(q),Ft=a(q),Et=o(q,[{buffer:ht,type:q.FLOAT,size:3},{buffer:Ft,type:q.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:pt,type:q.FLOAT,size:4},{buffer:yt,type:q.FLOAT,size:2},{buffer:xt,type:q.FLOAT,size:3}]),mt=a(q),gt=a(q),wt=a(q),Pt=a(q),Bt=o(q,[{buffer:mt,type:q.FLOAT,size:3},{buffer:Pt,type:q.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:gt,type:q.FLOAT,size:4},{buffer:wt,type:q.FLOAT,size:2}]),kt=a(q),jt=a(q),Ht=a(q),Vt=a(q),ee=a(q),te=o(q,[{buffer:kt,type:q.FLOAT,size:3},{buffer:ee,type:q.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:jt,type:q.FLOAT,size:4},{buffer:Ht,type:q.FLOAT,size:2},{buffer:Vt,type:q.FLOAT,size:1}]),ae=a(q),le=o(q,[{buffer:ae,type:q.FLOAT,size:3}]),ce=new z(q,rt,G,et,nt,X,Y,ot,ht,Ft,pt,yt,xt,Et,mt,Pt,gt,wt,Bt,kt,ee,jt,Ht,Vt,te,ae,le);return ce.update(W),ce}g.exports=it},4554:function(g,v,e){g.exports=h;var r=e(5827),f=e(5158),n=e(2709);function a(y,p,x){this.plot=y,this.vbo=p,this.shader=x}var o=a.prototype;o.bind=function(){var y=this.shader;this.vbo.bind(),this.shader.bind(),y.attributes.coord.pointer(),y.uniforms.screenBox=this.plot.screenBox},o.drawBox=function(){var y=[0,0],p=[0,0];return function(x,s,u,c,T){var k=this.plot,_=this.shader,b=k.gl;y[0]=x,y[1]=s,p[0]=u,p[1]=c,_.uniforms.lo=y,_.uniforms.hi=p,_.uniforms.color=T,b.drawArrays(b.TRIANGLE_STRIP,0,4)}}(),o.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function h(y){var p=y.gl,x=r(p,[0,0,0,1,1,0,1,1]),s=f(p,n.boxVert,n.lineFrag);return new a(y,x,s)}},3016:function(g,v,e){g.exports=p;var r=e(5827),f=e(5158),n=e(5070),a=e(2709);function o(x,s,u,c){this.plot=x,this.vbo=s,this.shader=u,this.tickShader=c,this.ticks=[[],[]]}function h(x,s){return x-s}var y=o.prototype;y.draw=function(){var x=[0,0],s=[0,0],u=[0,0];return function(){for(var c=this.plot,T=this.vbo,k=this.shader,_=this.ticks,b=c.gl,P=c._tickBounds,l=c.dataBox,d=c.viewBox,L=c.gridLineWidth,w=c.gridLineColor,I=c.gridLineEnable,z=c.pixelRatio,B=0;B<2;++B){var O=P[B],R=P[B+2],C=R-O,F=.5*(l[B+2]+l[B]),N=l[B+2]-l[B];s[B]=2*C/N,x[B]=2*(O-F)/N}k.bind(),T.bind(),k.attributes.dataCoord.pointer(),k.uniforms.dataShift=x,k.uniforms.dataScale=s;for(var V=0,B=0;B<2;++B){u[0]=u[1]=0,u[B]=1,k.uniforms.dataAxis=u,k.uniforms.lineWidth=L[B]/(d[B+2]-d[B])*z,k.uniforms.color=w[B];var K=_[B].length*6;I[B]&&K&&b.drawArrays(b.TRIANGLES,V,K),V+=K}}}(),y.drawTickMarks=function(){var x=[0,0],s=[0,0],u=[1,0],c=[0,1],T=[0,0],k=[0,0];return function(){for(var _=this.plot,b=this.vbo,P=this.tickShader,l=this.ticks,d=_.gl,L=_._tickBounds,w=_.dataBox,I=_.viewBox,z=_.pixelRatio,B=_.screenBox,O=B[2]-B[0],R=B[3]-B[1],C=I[2]-I[0],F=I[3]-I[1],N=0;N<2;++N){var V=L[N],K=L[N+2],Q=K-V,at=.5*(w[N+2]+w[N]),it=w[N+2]-w[N];s[N]=2*Q/it,x[N]=2*(V-at)/it}s[0]*=C/O,x[0]*=C/O,s[1]*=F/R,x[1]*=F/R,P.bind(),b.bind(),P.attributes.dataCoord.pointer();var q=P.uniforms;q.dataShift=x,q.dataScale=s;var W=_.tickMarkLength,Z=_.tickMarkWidth,G=_.tickMarkColor,et=0,nt=l[0].length*6,X=Math.min(n.ge(l[0],(w[0]-L[0])/(L[2]-L[0]),h),l[0].length),Y=Math.min(n.gt(l[0],(w[2]-L[0])/(L[2]-L[0]),h),l[0].length),ot=et+6*X,rt=6*Math.max(0,Y-X),ht=Math.min(n.ge(l[1],(w[1]-L[1])/(L[3]-L[1]),h),l[1].length),pt=Math.min(n.gt(l[1],(w[3]-L[1])/(L[3]-L[1]),h),l[1].length),yt=nt+6*ht,xt=6*Math.max(0,pt-ht);T[0]=2*(I[0]-W[1])/O-1,T[1]=(I[3]+I[1])/R-1,k[0]=W[1]*z/O,k[1]=Z[1]*z/R,xt&&(q.color=G[1],q.tickScale=k,q.dataAxis=c,q.screenOffset=T,d.drawArrays(d.TRIANGLES,yt,xt)),T[0]=(I[2]+I[0])/O-1,T[1]=2*(I[1]-W[0])/R-1,k[0]=Z[0]*z/O,k[1]=W[0]*z/R,rt&&(q.color=G[0],q.tickScale=k,q.dataAxis=u,q.screenOffset=T,d.drawArrays(d.TRIANGLES,ot,rt)),T[0]=2*(I[2]+W[3])/O-1,T[1]=(I[3]+I[1])/R-1,k[0]=W[3]*z/O,k[1]=Z[3]*z/R,xt&&(q.color=G[3],q.tickScale=k,q.dataAxis=c,q.screenOffset=T,d.drawArrays(d.TRIANGLES,yt,xt)),T[0]=(I[2]+I[0])/O-1,T[1]=2*(I[3]+W[2])/R-1,k[0]=Z[2]*z/O,k[1]=W[2]*z/R,rt&&(q.color=G[2],q.tickScale=k,q.dataAxis=u,q.screenOffset=T,d.drawArrays(d.TRIANGLES,ot,rt))}}(),y.update=function(){var x=[1,1,-1,-1,1,-1],s=[1,-1,1,1,-1,-1];return function(u){var c=u.ticks,T=u.bounds,k=new Float32Array(6*3*(c[0].length+c[1].length));this.plot.zeroLineEnable;for(var _=0,b=[[],[]],P=0;P<2;++P)for(var l=b[P],d=c[P],L=T[P],w=T[P+2],I=0;I<d.length;++I){var z=(d[I].x-L)/(w-L);l.push(z);for(var B=0;B<6;++B)k[_++]=z,k[_++]=x[B],k[_++]=s[B]}this.ticks=b,this.vbo.update(k)}}(),y.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function p(x){var s=x.gl,u=r(s),c=f(s,a.gridVert,a.gridFrag),T=f(s,a.tickVert,a.gridFrag),k=new o(x,u,c,T);return k}},1154:function(g,v,e){g.exports=h;var r=e(5827),f=e(5158),n=e(2709);function a(y,p,x){this.plot=y,this.vbo=p,this.shader=x}var o=a.prototype;o.bind=function(){var y=this.shader;this.vbo.bind(),this.shader.bind(),y.attributes.coord.pointer(),y.uniforms.screenBox=this.plot.screenBox},o.drawLine=function(){var y=[0,0],p=[0,0];return function(x,s,u,c,T,k){var _=this.plot,b=this.shader,P=_.gl;y[0]=x,y[1]=s,p[0]=u,p[1]=c,b.uniforms.start=y,b.uniforms.end=p,b.uniforms.width=T*_.pixelRatio,b.uniforms.color=k,P.drawArrays(P.TRIANGLE_STRIP,0,4)}}(),o.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function h(y){var p=y.gl,x=r(p,[-1,-1,-1,1,1,-1,1,1]),s=f(p,n.lineVert,n.lineFrag),u=new a(y,x,s);return u}},2709:function(g,v,e){var r=e(6832),f=r([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);g.exports={lineVert:r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:f,textVert:r([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:f,gridVert:r([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:f,boxVert:r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:r([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},5613:function(g,v,e){g.exports=p;var r=e(5827),f=e(5158),n=e(6946),a=e(5070),o=e(2709);function h(x,s,u){this.plot=x,this.vbo=s,this.shader=u,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var y=h.prototype;y.drawTicks=function(){var x=[0,0],s=[0,0],u=[0,0];return function(c){var T=this.plot,k=this.shader,_=this.tickX[c],b=this.tickOffset[c],P=T.gl,l=T.viewBox,d=T.dataBox,L=T.screenBox,w=T.pixelRatio,I=T.tickEnable,z=T.tickPad,B=T.tickColor,O=T.tickAngle,R=T.labelEnable,C=T.labelPad,F=T.labelColor,N=T.labelAngle,V=this.labelOffset[c],K=this.labelCount[c],Q=a.lt(_,d[c]),at=a.le(_,d[c+2]);x[0]=x[1]=0,x[c]=1,s[c]=(l[2+c]+l[c])/(L[2+c]-L[c])-1;var it=2/L[2+(c^1)]-L[c^1];s[c^1]=it*l[c^1]-1,I[c]&&(s[c^1]-=it*w*z[c],Q<at&&b[at]>b[Q]&&(k.uniforms.dataAxis=x,k.uniforms.screenOffset=s,k.uniforms.color=B[c],k.uniforms.angle=O[c],P.drawArrays(P.TRIANGLES,b[Q],b[at]-b[Q]))),R[c]&&K&&(s[c^1]-=it*w*C[c],k.uniforms.dataAxis=u,k.uniforms.screenOffset=s,k.uniforms.color=F[c],k.uniforms.angle=N[c],P.drawArrays(P.TRIANGLES,V,K)),s[c^1]=it*l[2+(c^1)]-1,I[c+2]&&(s[c^1]+=it*w*z[c+2],Q<at&&b[at]>b[Q]&&(k.uniforms.dataAxis=x,k.uniforms.screenOffset=s,k.uniforms.color=B[c+2],k.uniforms.angle=O[c+2],P.drawArrays(P.TRIANGLES,b[Q],b[at]-b[Q]))),R[c+2]&&K&&(s[c^1]+=it*w*C[c+2],k.uniforms.dataAxis=u,k.uniforms.screenOffset=s,k.uniforms.color=F[c+2],k.uniforms.angle=N[c+2],P.drawArrays(P.TRIANGLES,V,K))}}(),y.drawTitle=function(){var x=[0,0],s=[0,0];return function(){var u=this.plot,c=this.shader,T=u.gl,k=u.screenBox,_=u.titleCenter,b=u.titleAngle,P=u.titleColor,l=u.pixelRatio;if(this.titleCount){for(var d=0;d<2;++d)s[d]=2*(_[d]*l-k[d])/(k[2+d]-k[d])-1;c.bind(),c.uniforms.dataAxis=x,c.uniforms.screenOffset=s,c.uniforms.angle=b,c.uniforms.color=P,T.drawArrays(T.TRIANGLES,this.titleOffset,this.titleCount)}}}(),y.bind=function(){var x=[0,0],s=[0,0],u=[0,0];return function(){var c=this.plot,T=this.shader,k=c._tickBounds,_=c.dataBox,b=c.screenBox,P=c.viewBox;T.bind();for(var l=0;l<2;++l){var d=k[l],L=k[l+2],w=L-d,I=.5*(_[l+2]+_[l]),z=_[l+2]-_[l],B=P[l],O=P[l+2],R=O-B,C=b[l],F=b[l+2],N=F-C;s[l]=2*w/z*R/N,x[l]=2*(d-I)/z*R/N}u[1]=2*c.pixelRatio/(b[3]-b[1]),u[0]=u[1]*(b[3]-b[1])/(b[2]-b[0]),T.uniforms.dataScale=s,T.uniforms.dataShift=x,T.uniforms.textScale=u,this.vbo.bind(),T.attributes.textCoordinate.pointer()}}(),y.update=function(x){var s=[],u=x.ticks,c=x.bounds,T,k,_,b,P;for(P=0;P<2;++P){var l=[Math.floor(s.length/3)],d=[-1/0],L=u[P];for(T=0;T<L.length;++T){var w=L[T],I=w.x,z=w.text,B=w.font||"sans-serif";b=w.fontSize||12;for(var O=1/(c[P+2]-c[P]),R=c[P],C=z.split(`
`),F=0;F<C.length;F++)for(_=n(B,C[F]).data,k=0;k<_.length;k+=2)s.push(_[k]*b,-_[k+1]*b-F*b*1.2,(I-R)*O);l.push(Math.floor(s.length/3)),d.push(I)}this.tickOffset[P]=l,this.tickX[P]=d}for(P=0;P<2;++P){for(this.labelOffset[P]=Math.floor(s.length/3),_=n(x.labelFont[P],x.labels[P],{textAlign:"center"}).data,b=x.labelSize[P],T=0;T<_.length;T+=2)s.push(_[T]*b,-_[T+1]*b,0);this.labelCount[P]=Math.floor(s.length/3)-this.labelOffset[P]}for(this.titleOffset=Math.floor(s.length/3),_=n(x.titleFont,x.title).data,b=x.titleSize,T=0;T<_.length;T+=2)s.push(_[T]*b,-_[T+1]*b,0);this.titleCount=Math.floor(s.length/3)-this.titleOffset,this.vbo.update(s)},y.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function p(x){var s=x.gl,u=r(s),c=f(s,o.textVert,o.textFrag),T=new h(x,u,c);return T}},2117:function(g,v,e){g.exports=s;var r=e(2611),f=e(3016),n=e(5613),a=e(1154),o=e(4554);function h(u,c){this.gl=u,this.pickBuffer=c,this.screenBox=[0,0,u.drawingBufferWidth,u.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var y=h.prototype;y.setDirty=function(){this.dirty=this.pickDirty=!0},y.setOverlayDirty=function(){this.dirty=!0},y.nextDepthValue=function(){return this._depthCounter++/65536},y.draw=function(){return function(){var u=this.gl,c=this.screenBox,T=this.viewBox,k=this.dataBox,_=this.pixelRatio,b=this.grid,P=this.line,l=this.text,d=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,u.bindFramebuffer(u.FRAMEBUFFER,null),u.enable(u.SCISSOR_TEST),u.disable(u.DEPTH_TEST),u.depthFunc(u.LESS),u.depthMask(!1),u.enable(u.BLEND),u.blendEquation(u.FUNC_ADD,u.FUNC_ADD),u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA),this.borderColor){u.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);var L=this.borderColor;u.clearColor(L[0]*L[3],L[1]*L[3],L[2]*L[3],L[3]),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT)}u.scissor(T[0],T[1],T[2]-T[0],T[3]-T[1]),u.viewport(T[0],T[1],T[2]-T[0],T[3]-T[1]);var w=this.backgroundColor;u.clearColor(w[0]*w[3],w[1]*w[3],w[2]*w[3],w[3]),u.clear(u.COLOR_BUFFER_BIT),b.draw();var I=this.zeroLineEnable,z=this.zeroLineColor,B=this.zeroLineWidth;if(I[0]||I[1]){P.bind();for(var O=0;O<2;++O)if(!(!I[O]||!(k[O]<=0&&k[O+2]>=0))){var R=c[O]-k[O]*(c[O+2]-c[O])/(k[O+2]-k[O]);O===0?P.drawLine(R,c[1],R,c[3],B[O],z[O]):P.drawLine(c[0],R,c[2],R,B[O],z[O])}}for(var O=0;O<d.length;++O)d[O].draw();u.viewport(c[0],c[1],c[2]-c[0],c[3]-c[1]),u.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]),this.grid.drawTickMarks(),P.bind();var C=this.borderLineEnable,F=this.borderLineWidth,N=this.borderLineColor;C[1]&&P.drawLine(T[0],T[1]-.5*F[1]*_,T[0],T[3]+.5*F[3]*_,F[1],N[1]),C[0]&&P.drawLine(T[0]-.5*F[0]*_,T[1],T[2]+.5*F[2]*_,T[1],F[0],N[0]),C[3]&&P.drawLine(T[2],T[1]-.5*F[1]*_,T[2],T[3]+.5*F[3]*_,F[3],N[3]),C[2]&&P.drawLine(T[0]-.5*F[0]*_,T[3],T[2]+.5*F[2]*_,T[3],F[2],N[2]),l.bind();for(var O=0;O<2;++O)l.drawTicks(O);this.titleEnable&&l.drawTitle();for(var V=this.overlays,O=0;O<V.length;++O)V[O].draw();u.disable(u.SCISSOR_TEST),u.disable(u.BLEND),u.depthMask(!0)}}}(),y.drawPick=function(){return function(){if(!this.static){var u=this.pickBuffer;this.gl,this._pickTimeout=null,u.begin();for(var c=1,T=this.objects,k=0;k<T.length;++k)c=T[k].drawPick(c);u.end()}}}(),y.pick=function(){return function(u,c){if(!this.static){var T=this.pixelRatio,k=this.pickPixelRatio,_=this.viewBox,b=Math.round((u-_[0]/T)*k)|0,P=Math.round((c-_[1]/T)*k)|0,l=this.pickBuffer.query(b,P,this.pickRadius);if(!l)return null;for(var d=l.id+(l.value[0]<<8)+(l.value[1]<<16)+(l.value[2]<<24),L=this.objects,w=0;w<L.length;++w){var I=L[w].pick(b,P,d);if(I)return I}return null}}}();function p(u){for(var c=u.slice(),T=0;T<c.length;++T)c[T]=c[T].slice();return c}function x(u,c){return u.x-c.x}y.setScreenBox=function(u){var c=this.screenBox,T=this.pixelRatio;c[0]=Math.round(u[0]*T)|0,c[1]=Math.round(u[1]*T)|0,c[2]=Math.round(u[2]*T)|0,c[3]=Math.round(u[3]*T)|0,this.setDirty()},y.setDataBox=function(u){var c=this.dataBox,T=c[0]!==u[0]||c[1]!==u[1]||c[2]!==u[2]||c[3]!==u[3];T&&(c[0]=u[0],c[1]=u[1],c[2]=u[2],c[3]=u[3],this.setDirty())},y.setViewBox=function(u){var c=this.pixelRatio,T=this.viewBox;T[0]=Math.round(u[0]*c)|0,T[1]=Math.round(u[1]*c)|0,T[2]=Math.round(u[2]*c)|0,T[3]=Math.round(u[3]*c)|0;var k=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((u[2]-u[0])*k)|0,Math.round((u[3]-u[1])*k)|0],this.setDirty()},y.update=function(u){u=u||{};var c=this.gl;this.pixelRatio=u.pixelRatio||1;var T=this.pixelRatio;this.pickPixelRatio=Math.max(T,1),this.setScreenBox(u.screenBox||[0,0,c.drawingBufferWidth/T,c.drawingBufferHeight/T]),this.screenBox,this.setViewBox(u.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/T,.125*(this.screenBox[3]-this.screenBox[1])/T,.875*(this.screenBox[2]-this.screenBox[0])/T,.875*(this.screenBox[3]-this.screenBox[1])/T]);var k=this.viewBox,_=(k[2]-k[0])/(k[3]-k[1]);this.setDataBox(u.dataBox||[-10,-10/_,10,10/_]),this.borderColor=u.borderColor!==!1?(u.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(u.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(u.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(u.gridLineWidth||[1,1]).slice(),this.gridLineColor=p(u.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(u.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(u.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=p(u.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(u.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(u.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=p(u.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(u.titleCenter||[.5*(k[0]+k[2])/T,(k[3]+120)/T]).slice(),this.titleEnable=!("titleEnable"in u)||!!u.titleEnable,this.titleAngle=u.titleAngle||0,this.titleColor=(u.titleColor||[0,0,0,1]).slice(),this.labelPad=(u.labelPad||[15,15,15,15]).slice(),this.labelAngle=(u.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(u.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=p(u.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(u.tickPad||[15,15,15,15]).slice(),this.tickAngle=(u.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(u.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=p(u.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(u.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(u.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=p(u.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var b=u.ticks||[[],[]],P=this._tickBounds;P[0]=P[1]=1/0,P[2]=P[3]=-1/0;for(var l=0;l<2;++l){var d=b[l].slice(0);d.length!==0&&(d.sort(x),P[l]=Math.min(P[l],d[0].x),P[l+2]=Math.max(P[l+2],d[d.length-1].x))}this.grid.update({bounds:P,ticks:b}),this.text.update({bounds:P,ticks:b,labels:u.labels||["x","y"],labelSize:u.labelSize||[12,12],labelFont:u.labelFont||["sans-serif","sans-serif"],title:u.title||"",titleSize:u.titleSize||18,titleFont:u.titleFont||"sans-serif"}),this.static=!!u.static,this.setDirty()},y.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var u=this.objects.length-1;u>=0;--u)this.objects[u].dispose();this.objects.length=0;for(var u=this.overlays.length-1;u>=0;--u)this.overlays[u].dispose();this.overlays.length=0,this.gl=null},y.addObject=function(u){this.objects.indexOf(u)<0&&(this.objects.push(u),this.setDirty())},y.removeObject=function(u){for(var c=this.objects,T=0;T<c.length;++T)if(c[T]===u){c.splice(T,1),this.setDirty();break}},y.addOverlay=function(u){this.overlays.indexOf(u)<0&&(this.overlays.push(u),this.setOverlayDirty())},y.removeOverlay=function(u){for(var c=this.overlays,T=0;T<c.length;++T)if(c[T]===u){c.splice(T,1),this.setOverlayDirty();break}};function s(u){var c=u.gl,T=r(c,[c.drawingBufferWidth,c.drawingBufferHeight]),k=new h(c,T);return k.grid=f(k),k.text=n(k),k.line=a(k),k.box=o(k),k.update(u),k}},4296:function(g,v,e){g.exports=y;var r=e(8161),f=e(1152),n=e(6145),a=e(6475),o=e(2565),h=e(5233);function y(p,x){p=p||document.body,x=x||{};var s=[.01,1/0];"distanceLimits"in x&&(s[0]=x.distanceLimits[0],s[1]=x.distanceLimits[1]),"zoomMin"in x&&(s[0]=x.zoomMin),"zoomMax"in x&&(s[1]=x.zoomMax);var u=f({center:x.center||[0,0,0],up:x.up||[0,1,0],eye:x.eye||[0,0,10],mode:x.mode||"orbit",distanceLimits:s}),c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T=0,k=p.clientWidth,_=p.clientHeight,b={keyBindingMode:"rotate",enableWheel:!0,view:u,element:p,delay:x.delay||16,rotateSpeed:x.rotateSpeed||1,zoomSpeed:x.zoomSpeed||1,translateSpeed:x.translateSpeed||1,flipX:!!x.flipX,flipY:!!x.flipY,modes:u.modes,_ortho:x._ortho||x.projection&&x.projection.type==="orthographic"||!1,tick:function(){var P=r(),l=this.delay,d=P-2*l;u.idle(P-l),u.recalcMatrix(d),u.flush(P-(100+l*2));for(var L=!0,w=u.computedMatrix,I=0;I<16;++I)L=L&&c[I]===w[I],c[I]=w[I];var z=p.clientWidth===k&&p.clientHeight===_;return k=p.clientWidth,_=p.clientHeight,L?!z:(T=Math.exp(u.computedRadius[0]),!0)},lookAt:function(P,l,d){u.lookAt(u.lastT(),P,l,d)},rotate:function(P,l,d){u.rotate(u.lastT(),P,l,d)},pan:function(P,l,d){u.pan(u.lastT(),P,l,d)},translate:function(P,l,d){u.translate(u.lastT(),P,l,d)}};return Object.defineProperties(b,{matrix:{get:function(){return u.computedMatrix},set:function(P){return u.setMatrix(u.lastT(),P),u.computedMatrix},enumerable:!0},mode:{get:function(){return u.getMode()},set:function(P){var l=u.computedUp.slice(),d=u.computedEye.slice(),L=u.computedCenter.slice();if(u.setMode(P),P==="turntable"){var w=r();u._active.lookAt(w,d,L,l),u._active.lookAt(w+500,d,L,[0,0,1]),u._active.flush(w)}return u.getMode()},enumerable:!0},center:{get:function(){return u.computedCenter},set:function(P){return u.lookAt(u.lastT(),null,P),u.computedCenter},enumerable:!0},eye:{get:function(){return u.computedEye},set:function(P){return u.lookAt(u.lastT(),P),u.computedEye},enumerable:!0},up:{get:function(){return u.computedUp},set:function(P){return u.lookAt(u.lastT(),null,null,P),u.computedUp},enumerable:!0},distance:{get:function(){return T},set:function(P){return u.setDistance(u.lastT(),P),P},enumerable:!0},distanceLimits:{get:function(){return u.getDistanceLimits(s)},set:function(P){return u.setDistanceLimits(P),P},enumerable:!0}}),p.addEventListener("contextmenu",function(P){return P.preventDefault(),!1}),b._lastX=-1,b._lastY=-1,b._lastMods={shift:!1,control:!1,alt:!1,meta:!1},b.enableMouseListeners=function(){b.mouseListener=n(p,P),p.addEventListener("touchstart",function(l){var d=o(l.changedTouches[0],p);P(0,d[0],d[1],b._lastMods),P(1,d[0],d[1],b._lastMods)},h?{passive:!0}:!1),p.addEventListener("touchmove",function(l){var d=o(l.changedTouches[0],p);P(1,d[0],d[1],b._lastMods),l.preventDefault()},h?{passive:!1}:!1),p.addEventListener("touchend",function(l){P(0,b._lastX,b._lastY,b._lastMods)},h?{passive:!0}:!1);function P(l,d,L,w){var I=b.keyBindingMode;if(I!==!1){var z=I==="rotate",B=I==="pan",O=I==="zoom",R=!!w.control,C=!!w.alt,F=!!w.shift,N=!!(l&1),V=!!(l&2),K=!!(l&4),Q=1/p.clientHeight,at=Q*(d-b._lastX),it=Q*(L-b._lastY),q=b.flipX?1:-1,W=b.flipY?1:-1,Z=Math.PI*b.rotateSpeed,G=r();if(b._lastX!==-1&&b._lastY!==-1&&((z&&N&&!R&&!C&&!F||N&&!R&&!C&&F)&&u.rotate(G,q*Z*at,-W*Z*it,0),(B&&N&&!R&&!C&&!F||V||N&&R&&!C&&!F)&&u.pan(G,-b.translateSpeed*at*T,b.translateSpeed*it*T,0),O&&N&&!R&&!C&&!F||K||N&&!R&&C&&!F)){var et=-b.zoomSpeed*it/window.innerHeight*(G-u.lastT())*100;u.pan(G,0,0,T*(Math.exp(et)-1))}return b._lastX=d,b._lastY=L,b._lastMods=w,!0}}b.wheelListener=a(p,function(l,d){if(b.keyBindingMode!==!1&&b.enableWheel){var L=b.flipX?1:-1,w=b.flipY?1:-1,I=r();if(Math.abs(l)>Math.abs(d))u.rotate(I,0,0,-l*L*Math.PI*b.rotateSpeed/window.innerWidth);else if(!b._ortho){var z=-b.zoomSpeed*w*d/window.innerHeight*(I-u.lastT())/20;u.pan(I,0,0,T*(Math.exp(z)-1))}}},!0)},b.enableMouseListeners(),b}},8245:function(g,v,e){var r=e(6832),f=e(5158),n=r([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),a=r([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);g.exports=function(o){return f(o,n,a,null,[{name:"position",type:"vec2"}])}},1059:function(g,v,e){var r=e(4296),f=e(7453),n=e(2771),a=e(6496),o=e(2611),h=e(4234),y=e(8126),p=e(6145),x=e(1120),s=e(5268),u=e(8245),c=e(2321)({tablet:!0,featureDetect:!0});g.exports={createScene:P,createCamera:r};function T(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function k(d,L){var w=null;try{w=d.getContext("webgl",L),w||(w=d.getContext("experimental-webgl",L))}catch{return null}return w}function _(d){var L=Math.round(Math.log(Math.abs(d))/Math.log(10));if(L<0){var w=Math.round(Math.pow(10,-L));return Math.ceil(d*w)/w}else if(L>0){var w=Math.round(Math.pow(10,L));return Math.ceil(d/w)*w}return Math.ceil(d)}function b(d){return typeof d=="boolean"?d:!0}function P(d){d=d||{},d.camera=d.camera||{};var L=d.canvas;if(!L)if(L=document.createElement("canvas"),d.container){var w=d.container;w.appendChild(L)}else document.body.appendChild(L);var I=d.gl;if(I||(d.glOptions&&(c=!!d.glOptions.preserveDrawingBuffer),I=k(L,d.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:c})),!I)throw new Error("webgl not supported");var z=d.bounds||[[-10,-10,-10],[10,10,10]],B=new T,O=h(I,I.drawingBufferWidth,I.drawingBufferHeight,{preferFloat:!c}),R=u(I),C=d.cameraObject&&d.cameraObject._ortho===!0||d.camera.projection&&d.camera.projection.type==="orthographic"||!1,F={eye:d.camera.eye||[2,0,0],center:d.camera.center||[0,0,0],up:d.camera.up||[0,1,0],zoomMin:d.camera.zoomMax||.1,zoomMax:d.camera.zoomMin||100,mode:d.camera.mode||"turntable",_ortho:C},N=d.axes||{},V=f(I,N);V.enable=!N.disable;var K=d.spikes||{},Q=a(I,K),at=[],it=[],q=[],W=[],Z=!0,X=!0,G=new Array(16),et=new Array(16),nt={view:null,projection:G,model:et,_ortho:!1},X=!0,Y=[I.drawingBufferWidth,I.drawingBufferHeight],ot=d.cameraObject||r(L,F),rt={gl:I,contextLost:!1,pixelRatio:d.pixelRatio||1,canvas:L,selection:B,camera:ot,axes:V,axesPixels:null,spikes:Q,bounds:z,objects:at,shape:Y,aspect:d.aspectRatio||[1,1,1],pickRadius:d.pickRadius||10,zNear:d.zNear||.01,zFar:d.zFar||1e3,fovy:d.fovy||Math.PI/4,clearColor:d.clearColor||[0,0,0,0],autoResize:b(d.autoResize),autoBounds:b(d.autoBounds),autoScale:!!d.autoScale,autoCenter:b(d.autoCenter),clipToBounds:b(d.clipToBounds),snapToData:!!d.snapToData,onselect:d.onselect||null,onrender:d.onrender||null,onclick:d.onclick||null,cameraParams:nt,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(Pt){this.aspect[0]=Pt.x,this.aspect[1]=Pt.y,this.aspect[2]=Pt.z,X=!0},setBounds:function(Pt,Bt){this.bounds[0][Pt]=Bt.min,this.bounds[1][Pt]=Bt.max},setClearColor:function(Pt){this.clearColor=Pt},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ht=[I.drawingBufferWidth/rt.pixelRatio|0,I.drawingBufferHeight/rt.pixelRatio|0];function pt(){if(!rt._stopped&&rt.autoResize){var Pt=L.parentNode,Bt=1,kt=1;Pt&&Pt!==document.body?(Bt=Pt.clientWidth,kt=Pt.clientHeight):(Bt=window.innerWidth,kt=window.innerHeight);var jt=Math.ceil(Bt*rt.pixelRatio)|0,Ht=Math.ceil(kt*rt.pixelRatio)|0;if(jt!==L.width||Ht!==L.height){L.width=jt,L.height=Ht;var Vt=L.style;Vt.position=Vt.position||"absolute",Vt.left="0px",Vt.top="0px",Vt.width=Bt+"px",Vt.height=kt+"px",Z=!0}}}rt.autoResize&&pt(),window.addEventListener("resize",pt);function yt(){for(var Pt=at.length,Bt=W.length,kt=0;kt<Bt;++kt)q[kt]=0;t:for(var kt=0;kt<Pt;++kt){var jt=at[kt],Ht=jt.pickSlots;if(!Ht){it[kt]=-1;continue}for(var Vt=0;Vt<Bt;++Vt)if(q[Vt]+Ht<255){it[kt]=Vt,jt.setPickBase(q[Vt]+1),q[Vt]+=Ht;continue t}var ee=o(I,Y);it[kt]=Bt,W.push(ee),q.push(Ht),jt.setPickBase(1),Bt+=1}for(;Bt>0&&q[Bt-1]===0;)q.pop(),W.pop().dispose()}rt.update=function(Pt){rt._stopped||(Z=!0,X=!0)},rt.add=function(Pt){rt._stopped||(Pt.axes=V,at.push(Pt),it.push(-1),Z=!0,X=!0,yt())},rt.remove=function(Pt){if(!rt._stopped){var Bt=at.indexOf(Pt);Bt<0||(at.splice(Bt,1),it.pop(),Z=!0,X=!0,yt())}},rt.dispose=function(){if(!rt._stopped&&(rt._stopped=!0,window.removeEventListener("resize",pt),L.removeEventListener("webglcontextlost",xt),rt.mouseListener.enabled=!1,!rt.contextLost)){V.dispose(),Q.dispose();for(var Pt=0;Pt<at.length;++Pt)at[Pt].dispose();O.dispose();for(var Pt=0;Pt<W.length;++Pt)W[Pt].dispose();R.dispose(),I=null,V=null,Q=null,at=[]}},rt._mouseRotating=!1,rt._prevButtons=0,rt.enableMouseListeners=function(){rt.mouseListener=p(L,function(Pt,Bt,kt){if(!rt._stopped){var jt=W.length,Ht=at.length,Vt=B.object;B.distance=1/0,B.mouse[0]=Bt,B.mouse[1]=kt,B.object=null,B.screen=null,B.dataCoordinate=B.dataPosition=null;var ee=!1;if(Pt&&rt._prevButtons)rt._mouseRotating=!0;else{rt._mouseRotating&&(X=!0),rt._mouseRotating=!1;for(var te=0;te<jt;++te){var ae=W[te].query(Bt,ht[1]-kt-1,rt.pickRadius);if(ae){if(ae.distance>B.distance)continue;for(var le=0;le<Ht;++le){var ce=at[le];if(it[le]===te){var pe=ce.pick(ae);pe&&(B.buttons=Pt,B.screen=ae.coord,B.distance=ae.distance,B.object=ce,B.index=pe.distance,B.dataPosition=pe.position,B.dataCoordinate=pe.dataCoordinate,B.data=pe,ee=!0)}}}}}Vt&&Vt!==B.object&&(Vt.highlight&&Vt.highlight(null),Z=!0),B.object&&(B.object.highlight&&B.object.highlight(B.data),Z=!0),ee=ee||B.object!==Vt,ee&&rt.onselect&&rt.onselect(B),Pt&1&&!(rt._prevButtons&1)&&rt.onclick&&rt.onclick(B),rt._prevButtons=Pt}})};function xt(){if(rt.contextLost)return!0;I.isContextLost()&&(rt.contextLost=!0,rt.mouseListener.enabled=!1,rt.selection.object=null,rt.oncontextloss&&rt.oncontextloss())}L.addEventListener("webglcontextlost",xt);function Ft(){if(!xt()){I.colorMask(!0,!0,!0,!0),I.depthMask(!0),I.disable(I.BLEND),I.enable(I.DEPTH_TEST),I.depthFunc(I.LEQUAL);for(var Pt=at.length,Bt=W.length,kt=0;kt<Bt;++kt){var jt=W[kt];jt.shape=ht,jt.begin();for(var Ht=0;Ht<Pt;++Ht)if(it[Ht]===kt){var Vt=at[Ht];Vt.drawPick&&(Vt.pixelRatio=1,Vt.drawPick(nt))}jt.end()}}}var Et=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],mt=[Et[0].slice(),Et[1].slice()];function gt(){if(!xt()){pt();var Pt=rt.camera.tick();nt.view=rt.camera.matrix,Z=Z||Pt,X=X||Pt,V.pixelRatio=rt.pixelRatio,Q.pixelRatio=rt.pixelRatio;var Bt=at.length,kt=Et[0],jt=Et[1];kt[0]=kt[1]=kt[2]=1/0,jt[0]=jt[1]=jt[2]=-1/0;for(var Ht=0;Ht<Bt;++Ht){var Vt=at[Ht];Vt.pixelRatio=rt.pixelRatio,Vt.axes=rt.axes,Z=Z||!!Vt.dirty,X=X||!!Vt.dirty;var ee=Vt.bounds;if(ee)for(var te=ee[0],ae=ee[1],le=0;le<3;++le)kt[le]=Math.min(kt[le],te[le]),jt[le]=Math.max(jt[le],ae[le])}var ce=rt.bounds;if(rt.autoBounds)for(var le=0;le<3;++le){if(jt[le]<kt[le])kt[le]=-1,jt[le]=1;else{kt[le]===jt[le]&&(kt[le]-=1,jt[le]+=1);var pe=.05*(jt[le]-kt[le]);kt[le]=kt[le]-pe,jt[le]=jt[le]+pe}ce[0][le]=kt[le],ce[1][le]=jt[le]}for(var we=!1,le=0;le<3;++le)we=we||mt[0][le]!==ce[0][le]||mt[1][le]!==ce[1][le],mt[0][le]=ce[0][le],mt[1][le]=ce[1][le];if(X=X||we,Z=Z||we,!!Z){if(we){for(var ve=[0,0,0],Ht=0;Ht<3;++Ht)ve[Ht]=_((ce[1][Ht]-ce[0][Ht])/10);V.autoTicks?V.update({bounds:ce,tickSpacing:ve}):V.update({bounds:ce})}var Mt=I.drawingBufferWidth,It=I.drawingBufferHeight;Y[0]=Mt,Y[1]=It,ht[0]=Math.max(Mt/rt.pixelRatio,1)|0,ht[1]=Math.max(It/rt.pixelRatio,1)|0,l(rt,C);for(var Ht=0;Ht<Bt;++Ht){var Vt=at[Ht];Vt.axesBounds=ce,rt.clipToBounds&&(Vt.clipBounds=ce)}B.object&&(rt.snapToData?Q.position=B.dataCoordinate:Q.position=B.dataPosition,Q.bounds=ce),X&&(X=!1,Ft()),rt.axesPixels=n(rt.axes,nt,Mt,It),rt.onrender&&rt.onrender(),I.bindFramebuffer(I.FRAMEBUFFER,null),I.viewport(0,0,Mt,It),rt.clearRGBA(),I.depthMask(!0),I.colorMask(!0,!0,!0,!0),I.enable(I.DEPTH_TEST),I.depthFunc(I.LEQUAL),I.disable(I.BLEND),I.disable(I.CULL_FACE);var Rt=!1;V.enable&&(Rt=Rt||V.isTransparent(),V.draw(nt)),Q.axes=V,B.object&&Q.draw(nt),I.disable(I.CULL_FACE);for(var Ht=0;Ht<Bt;++Ht){var Vt=at[Ht];Vt.axes=V,Vt.pixelRatio=rt.pixelRatio,Vt.isOpaque&&Vt.isOpaque()&&Vt.draw(nt),Vt.isTransparent&&Vt.isTransparent()&&(Rt=!0)}if(Rt){O.shape=Y,O.bind(),I.clear(I.DEPTH_BUFFER_BIT),I.colorMask(!1,!1,!1,!1),I.depthMask(!0),I.depthFunc(I.LESS),V.enable&&V.isTransparent()&&V.drawTransparent(nt);for(var Ht=0;Ht<Bt;++Ht){var Vt=at[Ht];Vt.isOpaque&&Vt.isOpaque()&&Vt.draw(nt)}I.enable(I.BLEND),I.blendEquation(I.FUNC_ADD),I.blendFunc(I.ONE,I.ONE_MINUS_SRC_ALPHA),I.colorMask(!0,!0,!0,!0),I.depthMask(!1),I.clearColor(0,0,0,0),I.clear(I.COLOR_BUFFER_BIT),V.isTransparent()&&V.drawTransparent(nt);for(var Ht=0;Ht<Bt;++Ht){var Vt=at[Ht];Vt.isTransparent&&Vt.isTransparent()&&Vt.drawTransparent(nt)}I.bindFramebuffer(I.FRAMEBUFFER,null),I.blendFunc(I.ONE,I.ONE_MINUS_SRC_ALPHA),I.disable(I.DEPTH_TEST),R.bind(),O.color[0].bind(0),R.uniforms.accumBuffer=0,y(I),I.disable(I.BLEND)}Z=!1;for(var Ht=0;Ht<Bt;++Ht)at[Ht].dirty=!1}}}function wt(){rt._stopped||rt.contextLost||(gt(),requestAnimationFrame(wt))}return rt.enableMouseListeners(),wt(),rt.redraw=function(){rt._stopped||(Z=!0,gt())},rt}function l(d,L){var w=d.bounds,I=d.cameraParams,z=I.projection,B=I.model,O=d.gl.drawingBufferWidth,R=d.gl.drawingBufferHeight,C=d.zNear,F=d.zFar,N=d.fovy,V=O/R;L?(s(z,-V,V,-1,1,C,F),I._ortho=!0):(x(z,N,V,C,F),I._ortho=!1);for(var K=0;K<16;++K)B[K]=0;B[15]=1;for(var Q=0,K=0;K<3;++K)Q=Math.max(Q,w[1][K]-w[0][K]);for(var K=0;K<3;++K)d.autoScale?B[5*K]=d.aspect[K]/(w[1][K]-w[0][K]):B[5*K]=1/Q,d.autoCenter&&(B[12+K]=-B[5*K]*.5*(w[0][K]+w[1][K]))}},8023:function(g,v,e){var r=e(6832);v.pointVertex=r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),v.pointFragment=r([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),v.pickVertex=r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),v.pickFragment=r([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},8271:function(g,v,e){var r=e(5158),f=e(5827),n=e(5306),a=e(8023);g.exports=p;function o(x,s,u,c,T){this.plot=x,this.offsetBuffer=s,this.pickBuffer=u,this.shader=c,this.pickShader=T,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var h=o.prototype;h.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},h.update=function(x){var s;x=x||{};function u(l,d){return l in x?x[l]:d}this.sizeMin=u("sizeMin",.5),this.sizeMax=u("sizeMax",20),this.color=u("color",[1,0,0,1]).slice(),this.areaRatio=u("areaRatio",1),this.borderColor=u("borderColor",[0,0,0,1]).slice(),this.blend=u("blend",!1);var c=x.positions.length>>>1,T=x.positions instanceof Float32Array,k=x.idToIndex instanceof Int32Array&&x.idToIndex.length>=c,_=x.positions,b=T?_:n.mallocFloat32(_.length),P=k?x.idToIndex:n.mallocInt32(c);if(T||b.set(_),!k)for(b.set(_),s=0;s<c;s++)P[s]=s;this.points=_,this.offsetBuffer.update(b),this.pickBuffer.update(P),T||n.free(b),k||n.free(P),this.pointCount=c,this.pickOffset=0};function y(x,s){var u=0,c=x.length>>>1,T;for(T=0;T<c;T++){var k=x[T*2],_=x[T*2+1];k>=s[0]&&k<=s[2]&&_>=s[1]&&_<=s[3]&&u++}return u}h.unifiedDraw=function(){var x=[1,0,0,0,1,0,0,0,1],s=[0,0,0,0];return function(u){var c=u!==void 0,T=c?this.pickShader:this.shader,k=this.plot.gl,_=this.plot.dataBox;if(this.pointCount===0)return u;var b=_[2]-_[0],P=_[3]-_[1],l=y(this.points,_),d=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(l,.33333)));x[0]=2/b,x[4]=2/P,x[6]=-2*_[0]/b-1,x[7]=-2*_[1]/P-1,this.offsetBuffer.bind(),T.bind(),T.attributes.position.pointer(),T.uniforms.matrix=x,T.uniforms.color=this.color,T.uniforms.borderColor=this.borderColor,T.uniforms.pointCloud=d<5,T.uniforms.pointSize=d,T.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),c&&(s[0]=u&255,s[1]=u>>8&255,s[2]=u>>16&255,s[3]=u>>24&255,this.pickBuffer.bind(),T.attributes.pickId.pointer(k.UNSIGNED_BYTE),T.uniforms.pickOffset=s,this.pickOffset=u);var L=k.getParameter(k.BLEND),w=k.getParameter(k.DITHER);return L&&!this.blend&&k.disable(k.BLEND),w&&k.disable(k.DITHER),k.drawArrays(k.POINTS,0,this.pointCount),L&&!this.blend&&k.enable(k.BLEND),w&&k.enable(k.DITHER),u+this.pointCount}}(),h.draw=h.unifiedDraw,h.drawPick=h.unifiedDraw,h.pick=function(x,s,u){var c=this.pickOffset,T=this.pointCount;if(u<c||u>=c+T)return null;var k=u-c,_=this.points;return{object:this,pointId:k,dataCoord:[_[2*k],_[2*k+1]]}};function p(x,s){var u=x.gl,c=f(u),T=f(u),k=r(u,a.pointVertex,a.pointFragment),_=r(u,a.pickVertex,a.pickFragment),b=new o(x,c,T,k,_);return b.update(s),x.addObject(b),b}},6093:function(g){g.exports=v;function v(e,r,f,n){var a=r[0],o=r[1],h=r[2],y=r[3],p=f[0],x=f[1],s=f[2],u=f[3],c,T,k,_,b;return T=a*p+o*x+h*s+y*u,T<0&&(T=-T,p=-p,x=-x,s=-s,u=-u),1-T>1e-6?(c=Math.acos(T),k=Math.sin(c),_=Math.sin((1-n)*c)/k,b=Math.sin(n*c)/k):(_=1-n,b=n),e[0]=_*a+b*p,e[1]=_*o+b*x,e[2]=_*h+b*s,e[3]=_*y+b*u,e}},8240:function(g){g.exports=function(v){return!v&&v!==0?"":v.toString()}},4123:function(g,v,e){var r=e(875);g.exports=n;var f={};function n(a,o,h){var y=f[o];if(y||(y=f[o]={}),a in y)return y[a];var p={textAlign:"center",textBaseline:"middle",lineHeight:1,font:o,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};p.triangles=!0;var x=r(a,p);p.triangles=!1;var s=r(a,p),u,c;if(h&&h!==1){for(u=0;u<x.positions.length;++u)for(c=0;c<x.positions[u].length;++c)x.positions[u][c]/=h;for(u=0;u<s.positions.length;++u)for(c=0;c<s.positions[u].length;++c)s.positions[u][c]/=h}var T=[[1/0,1/0],[-1/0,-1/0]],k=s.positions.length;for(u=0;u<k;++u){var _=s.positions[u];for(c=0;c<2;++c)T[0][c]=Math.min(T[0][c],_[c]),T[1][c]=Math.max(T[1][c],_[c])}return y[a]=[x,s,T]}},9282:function(g,v,e){var r=e(5158),f=e(6832),n=f([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),a=f([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),o=f([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),h=f([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),y=f([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),p=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],x={vertex:n,fragment:h,attributes:p},s={vertex:a,fragment:h,attributes:p},u={vertex:o,fragment:h,attributes:p},c={vertex:n,fragment:y,attributes:p},T={vertex:a,fragment:y,attributes:p},k={vertex:o,fragment:y,attributes:p};function _(b,P){var l=r(b,P),d=l.attributes;return d.position.location=0,d.color.location=1,d.glyph.location=2,d.id.location=3,l}v.createPerspective=function(b){return _(b,x)},v.createOrtho=function(b){return _(b,s)},v.createProject=function(b){return _(b,u)},v.createPickPerspective=function(b){return _(b,c)},v.createPickOrtho=function(b){return _(b,T)},v.createPickProject=function(b){return _(b,k)}},2182:function(g,v,e){var r=e(3596),f=e(5827),n=e(2944),a=e(5306),o=e(104),h=e(9282),y=e(4123),p=e(8240),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];g.exports=it;function s(q,W){var Z=q[0],G=q[1],et=q[2],nt=q[3];return q[0]=W[0]*Z+W[4]*G+W[8]*et+W[12]*nt,q[1]=W[1]*Z+W[5]*G+W[9]*et+W[13]*nt,q[2]=W[2]*Z+W[6]*G+W[10]*et+W[14]*nt,q[3]=W[3]*Z+W[7]*G+W[11]*et+W[15]*nt,q}function u(q,W,Z,G){return s(G,G),s(G,G),s(G,G)}function c(q,W){this.index=q,this.dataCoordinate=this.position=W}function T(q){return q===!0||q>1?1:q}function k(q,W,Z,G,et,nt,X,Y,ot,rt,ht,pt){this.gl=q,this.pixelRatio=1,this.shader=W,this.orthoShader=Z,this.projectShader=G,this.pointBuffer=et,this.colorBuffer=nt,this.glyphBuffer=X,this.idBuffer=Y,this.vao=ot,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=rt,this.pickOrthoShader=ht,this.pickProjectShader=pt,this.points=[],this._selectResult=new c(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var _=k.prototype;_.pickSlots=1,_.setPickBase=function(q){this.pickId=q},_.isTransparent=function(){if(this.hasAlpha)return!0;for(var q=0;q<3;++q)if(this.axesProject[q]&&this.projectHasAlpha)return!0;return!1},_.isOpaque=function(){if(!this.hasAlpha)return!0;for(var q=0;q<3;++q)if(this.axesProject[q]&&!this.projectHasAlpha)return!0;return!1};var b=[0,0],P=[0,0,0],l=[0,0,0],d=[0,0,0,1],L=[0,0,0,1],w=x.slice(),I=[0,0,0],z=[[0,0,0],[0,0,0]];function B(q){return q[0]=q[1]=q[2]=0,q}function O(q,W){return q[0]=W[0],q[1]=W[1],q[2]=W[2],q[3]=1,q}function R(q,W,Z,G){return q[0]=W[0],q[1]=W[1],q[2]=W[2],q[Z]=G,q}function C(q){for(var W=z,Z=0;Z<2;++Z)for(var G=0;G<3;++G)W[Z][G]=Math.max(Math.min(q[Z][G],1e8),-1e8);return W}function F(q,W,Z,G){var et=W.axesProject,nt=W.gl,X=q.uniforms,Y=Z.model||x,ot=Z.view||x,rt=Z.projection||x,ht=W.axesBounds,pt=C(W.clipBounds),yt;W.axes&&W.axes.lastCubeProps?yt=W.axes.lastCubeProps.axis:yt=[1,1,1],b[0]=2/nt.drawingBufferWidth,b[1]=2/nt.drawingBufferHeight,q.bind(),X.view=ot,X.projection=rt,X.screenSize=b,X.highlightId=W.highlightId,X.highlightScale=W.highlightScale,X.clipBounds=pt,X.pickGroup=W.pickId/255,X.pixelRatio=G;for(var xt=0;xt<3;++xt)if(et[xt]){X.scale=W.projectScale[xt],X.opacity=W.projectOpacity[xt];for(var Ft=w,Et=0;Et<16;++Et)Ft[Et]=0;for(var Et=0;Et<4;++Et)Ft[5*Et]=1;Ft[5*xt]=0,yt[xt]<0?Ft[12+xt]=ht[0][xt]:Ft[12+xt]=ht[1][xt],o(Ft,Y,Ft),X.model=Ft;var mt=(xt+1)%3,gt=(xt+2)%3,wt=B(P),Pt=B(l);wt[mt]=1,Pt[gt]=1;var Bt=u(rt,ot,Y,O(d,wt)),kt=u(rt,ot,Y,O(L,Pt));if(Math.abs(Bt[1])>Math.abs(kt[1])){var jt=Bt;Bt=kt,kt=jt,jt=wt,wt=Pt,Pt=jt;var Ht=mt;mt=gt,gt=Ht}Bt[0]<0&&(wt[mt]=-1),kt[1]>0&&(Pt[gt]=-1);for(var Vt=0,ee=0,Et=0;Et<4;++Et)Vt+=Math.pow(Y[4*mt+Et],2),ee+=Math.pow(Y[4*gt+Et],2);wt[mt]/=Math.sqrt(Vt),Pt[gt]/=Math.sqrt(ee),X.axes[0]=wt,X.axes[1]=Pt,X.fragClipBounds[0]=R(I,pt[0],xt,-1e8),X.fragClipBounds[1]=R(I,pt[1],xt,1e8),W.vao.bind(),W.vao.draw(nt.TRIANGLES,W.vertexCount),W.lineWidth>0&&(nt.lineWidth(W.lineWidth*G),W.vao.draw(nt.LINES,W.lineVertexCount,W.vertexCount)),W.vao.unbind()}}var N=[-1e8,-1e8,-1e8],V=[1e8,1e8,1e8],K=[N,V];function Q(q,W,Z,G,et,nt,X){var Y=Z.gl;if((nt===Z.projectHasAlpha||X)&&F(W,Z,G,et),nt===Z.hasAlpha||X){q.bind();var ot=q.uniforms;ot.model=G.model||x,ot.view=G.view||x,ot.projection=G.projection||x,b[0]=2/Y.drawingBufferWidth,b[1]=2/Y.drawingBufferHeight,ot.screenSize=b,ot.highlightId=Z.highlightId,ot.highlightScale=Z.highlightScale,ot.fragClipBounds=K,ot.clipBounds=Z.axes.bounds,ot.opacity=Z.opacity,ot.pickGroup=Z.pickId/255,ot.pixelRatio=et,Z.vao.bind(),Z.vao.draw(Y.TRIANGLES,Z.vertexCount),Z.lineWidth>0&&(Y.lineWidth(Z.lineWidth*et),Z.vao.draw(Y.LINES,Z.lineVertexCount,Z.vertexCount)),Z.vao.unbind()}}_.draw=function(q){var W=this.useOrtho?this.orthoShader:this.shader;Q(W,this.projectShader,this,q,this.pixelRatio,!1,!1)},_.drawTransparent=function(q){var W=this.useOrtho?this.orthoShader:this.shader;Q(W,this.projectShader,this,q,this.pixelRatio,!0,!1)},_.drawPick=function(q){var W=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;Q(W,this.pickProjectShader,this,q,1,!0,!0)},_.pick=function(q){if(!q||q.id!==this.pickId)return null;var W=q.value[2]+(q.value[1]<<8)+(q.value[0]<<16);if(W>=this.pointCount||W<0)return null;var Z=this.points[W],G=this._selectResult;G.index=W;for(var et=0;et<3;++et)G.position[et]=G.dataCoordinate[et]=Z[et];return G},_.highlight=function(q){if(!q)this.highlightId=[1,1,1,1];else{var W=q.index,Z=W&255,G=W>>8&255,et=W>>16&255;this.highlightId=[Z/255,G/255,et/255,0]}};function at(q,W,Z,G){var et;Array.isArray(q)?W<q.length?et=q[W]:et=void 0:et=q,et=p(et);var nt=!0;r(et)&&(et="\u25BC",nt=!1);var X=y(et,Z,G);return{mesh:X[0],lines:X[1],bounds:X[2],visible:nt}}_.update=function(q){if(q=q||{},"perspective"in q&&(this.useOrtho=!q.perspective),"orthographic"in q&&(this.useOrtho=!!q.orthographic),"lineWidth"in q&&(this.lineWidth=q.lineWidth),"project"in q)if(Array.isArray(q.project))this.axesProject=q.project;else{var W=!!q.project;this.axesProject=[W,W,W]}if("projectScale"in q)if(Array.isArray(q.projectScale))this.projectScale=q.projectScale.slice();else{var Z=+q.projectScale;this.projectScale=[Z,Z,Z]}if(this.projectHasAlpha=!1,"projectOpacity"in q){if(Array.isArray(q.projectOpacity))this.projectOpacity=q.projectOpacity.slice();else{var Z=+q.projectOpacity;this.projectOpacity=[Z,Z,Z]}for(var G=0;G<3;++G)this.projectOpacity[G]=T(this.projectOpacity[G]),this.projectOpacity[G]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in q&&(this.opacity=T(q.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var et=q.position,nt=q.font||"normal",X=q.alignment||[0,0],Y,ot;if(X.length===2)Y=X[0],ot=X[1];else{Y=[],ot=[];for(var G=0;G<X.length;++G)Y[G]=X[G][0],ot[G]=X[G][1]}var rt=[1/0,1/0,1/0],ht=[-1/0,-1/0,-1/0],pt=q.glyph,yt=q.color,xt=q.size,Ft=q.angle,Et=q.lineColor,mt=-1,gt=0,wt=0,Pt=0;if(et.length){Pt=et.length;t:for(var G=0;G<Pt;++G){for(var Bt=et[G],kt=0;kt<3;++kt)if(isNaN(Bt[kt])||!isFinite(Bt[kt]))continue t;var jt=at(pt,G,nt,this.pixelRatio),Ht=jt.mesh,Vt=jt.lines,ee=jt.bounds;gt+=Ht.cells.length*3,wt+=Vt.edges.length*2}}var te=gt+wt,ae=a.mallocFloat(3*te),le=a.mallocFloat(4*te),ce=a.mallocFloat(2*te),pe=a.mallocUint32(te);if(te>0){var we=0,ve=gt,Mt=[0,0,0,1],It=[0,0,0,1],Rt=Array.isArray(yt)&&Array.isArray(yt[0]),zt=Array.isArray(Et)&&Array.isArray(Et[0]);t:for(var G=0;G<Pt;++G){mt+=1;for(var Bt=et[G],kt=0;kt<3;++kt){if(isNaN(Bt[kt])||!isFinite(Bt[kt]))continue t;ht[kt]=Math.max(ht[kt],Bt[kt]),rt[kt]=Math.min(rt[kt],Bt[kt])}var jt=at(pt,G,nt,this.pixelRatio),Ht=jt.mesh,Vt=jt.lines,ee=jt.bounds,Tt=jt.visible;if(!Tt)Mt=[1,1,1,0];else if(Array.isArray(yt)){var ft;if(Rt?G<yt.length?ft=yt[G]:ft=[0,0,0,0]:ft=yt,ft.length===3){for(var kt=0;kt<3;++kt)Mt[kt]=ft[kt];Mt[3]=1}else if(ft.length===4){for(var kt=0;kt<4;++kt)Mt[kt]=ft[kt];!this.hasAlpha&&ft[3]<1&&(this.hasAlpha=!0)}}else Mt[0]=Mt[1]=Mt[2]=0,Mt[3]=1;if(!Tt)It=[1,1,1,0];else if(Array.isArray(Et)){var ft;if(zt?G<Et.length?ft=Et[G]:ft=[0,0,0,0]:ft=Et,ft.length===3){for(var kt=0;kt<3;++kt)It[kt]=ft[kt];It[kt]=1}else if(ft.length===4){for(var kt=0;kt<4;++kt)It[kt]=ft[kt];!this.hasAlpha&&ft[3]<1&&(this.hasAlpha=!0)}}else It[0]=It[1]=It[2]=0,It[3]=1;var ut=.5;Tt?Array.isArray(xt)?G<xt.length?ut=+xt[G]:ut=12:xt?ut=+xt:this.useOrtho&&(ut=12):ut=0;var vt=0;Array.isArray(Ft)?G<Ft.length?vt=+Ft[G]:vt=0:Ft&&(vt=+Ft);for(var St=Math.cos(vt),Ot=Math.sin(vt),Bt=et[G],kt=0;kt<3;++kt)ht[kt]=Math.max(ht[kt],Bt[kt]),rt[kt]=Math.min(rt[kt],Bt[kt]);var Xt=Y,$t=ot,Xt=0;Array.isArray(Y)?G<Y.length?Xt=Y[G]:Xt=0:Y&&(Xt=Y);var $t=0;Array.isArray(ot)?G<ot.length?$t=ot[G]:$t=0:ot&&($t=ot),Xt*=Xt>0?1-ee[0][0]:Xt<0?1+ee[1][0]:1,$t*=$t>0?1-ee[0][1]:$t<0?1+ee[1][1]:1;for(var de=[Xt,$t],Me=Ht.cells||[],Fe=Ht.positions||[],kt=0;kt<Me.length;++kt)for(var De=Me[kt],Ae=0;Ae<3;++Ae){for(var Ve=0;Ve<3;++Ve)ae[3*we+Ve]=Bt[Ve];for(var Ve=0;Ve<4;++Ve)le[4*we+Ve]=Mt[Ve];pe[we]=mt;var Qe=Fe[De[Ae]];ce[2*we]=ut*(St*Qe[0]-Ot*Qe[1]+de[0]),ce[2*we+1]=ut*(Ot*Qe[0]+St*Qe[1]+de[1]),we+=1}for(var Me=Vt.edges,Fe=Vt.positions,kt=0;kt<Me.length;++kt)for(var De=Me[kt],Ae=0;Ae<2;++Ae){for(var Ve=0;Ve<3;++Ve)ae[3*ve+Ve]=Bt[Ve];for(var Ve=0;Ve<4;++Ve)le[4*ve+Ve]=It[Ve];pe[ve]=mt;var Qe=Fe[De[Ae]];ce[2*ve]=ut*(St*Qe[0]-Ot*Qe[1]+de[0]),ce[2*ve+1]=ut*(Ot*Qe[0]+St*Qe[1]+de[1]),ve+=1}}}this.bounds=[rt,ht],this.points=et,this.pointCount=et.length,this.vertexCount=gt,this.lineVertexCount=wt,this.pointBuffer.update(ae),this.colorBuffer.update(le),this.glyphBuffer.update(ce),this.idBuffer.update(pe),a.free(ae),a.free(le),a.free(ce),a.free(pe)},_.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function it(q){var W=q.gl,Z=h.createPerspective(W),G=h.createOrtho(W),et=h.createProject(W),nt=h.createPickPerspective(W),X=h.createPickOrtho(W),Y=h.createPickProject(W),ot=f(W),rt=f(W),ht=f(W),pt=f(W),yt=n(W,[{buffer:ot,size:3,type:W.FLOAT},{buffer:rt,size:4,type:W.FLOAT},{buffer:ht,size:2,type:W.FLOAT},{buffer:pt,size:4,type:W.UNSIGNED_BYTE,normalized:!0}]),xt=new k(W,Z,G,et,ot,rt,ht,pt,yt,nt,X,Y);return xt.update(q),xt}},1884:function(g,v,e){var r=e(6832);v.boxVertex=r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),v.boxFragment=r([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},6623:function(g,v,e){var r=e(5158),f=e(5827),n=e(1884);g.exports=h;function a(y,p,x){this.plot=y,this.boxBuffer=p,this.boxShader=x,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var o=a.prototype;o.draw=function(){if(this.enabled){var y=this.plot,p=this.selectBox,x=this.borderWidth;this.innerFill;var s=this.innerColor;this.outerFill;var u=this.outerColor,c=this.borderColor,T=y.box,k=y.screenBox,_=y.dataBox,b=y.viewBox,P=y.pixelRatio,l=(p[0]-_[0])*(b[2]-b[0])/(_[2]-_[0])+b[0],d=(p[1]-_[1])*(b[3]-b[1])/(_[3]-_[1])+b[1],L=(p[2]-_[0])*(b[2]-b[0])/(_[2]-_[0])+b[0],w=(p[3]-_[1])*(b[3]-b[1])/(_[3]-_[1])+b[1];if(l=Math.max(l,b[0]),d=Math.max(d,b[1]),L=Math.min(L,b[2]),w=Math.min(w,b[3]),!(L<l||w<d)){T.bind();var I=k[2]-k[0],z=k[3]-k[1];if(this.outerFill&&(T.drawBox(0,0,I,d,u),T.drawBox(0,d,l,w,u),T.drawBox(0,w,I,z,u),T.drawBox(L,d,I,w,u)),this.innerFill&&T.drawBox(l,d,L,w,s),x>0){var B=x*P;T.drawBox(l-B,d-B,L+B,d+B,c),T.drawBox(l-B,w-B,L+B,w+B,c),T.drawBox(l-B,d-B,l+B,w+B,c),T.drawBox(L-B,d-B,L+B,w+B,c)}}}},o.update=function(y){y=y||{},this.innerFill=!!y.innerFill,this.outerFill=!!y.outerFill,this.innerColor=(y.innerColor||[0,0,0,.5]).slice(),this.outerColor=(y.outerColor||[0,0,0,.5]).slice(),this.borderColor=(y.borderColor||[0,0,0,1]).slice(),this.borderWidth=y.borderWidth||0,this.selectBox=(y.selectBox||this.selectBox).slice()},o.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function h(y,p){var x=y.gl,s=f(x,[0,0,0,1,1,0,1,1]),u=r(x,n.boxVertex,n.boxFragment),c=new a(y,s,u);return c.update(p),y.addOverlay(c),c}},2611:function(g,v,e){g.exports=x;var r=e(4234),f=e(5306),n=e(5050),a=e(2288).nextPow2,o=function(s,u,c){for(var T=1e8,k=-1,_=-1,b=s.shape[0],P=s.shape[1],l=0;l<b;l++)for(var d=0;d<P;d++){var L=s.get(l,d,0),w=s.get(l,d,1),I=s.get(l,d,2),z=s.get(l,d,3);if(L<255||w<255||I<255||z<255){var B=u-l,O=c-d,R=B*B+O*O;R<T&&(T=R,k=l,_=d)}}return[k,_,T]};function h(s,u,c,T,k){this.coord=[s,u],this.id=c,this.value=T,this.distance=k}function y(s,u,c){this.gl=s,this.fbo=u,this.buffer=c,this._readTimeout=null;var T=this;this._readCallback=function(){T.gl&&(u.bind(),s.readPixels(0,0,u.shape[0],u.shape[1],s.RGBA,s.UNSIGNED_BYTE,T.buffer),T._readTimeout=null)}}var p=y.prototype;Object.defineProperty(p,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(s){if(this.gl){this.fbo.shape=s;var u=this.fbo.shape[0],c=this.fbo.shape[1];if(c*u*4>this.buffer.length){f.free(this.buffer);for(var T=this.buffer=f.mallocUint8(a(c*u*4)),k=0;k<c*u*4;++k)T[k]=255}return s}}}),p.begin=function(){var s=this.gl;this.shape,s&&(this.fbo.bind(),s.clearColor(1,1,1,1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT))},p.end=function(){var s=this.gl;s&&(s.bindFramebuffer(s.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},p.query=function(s,u,c){if(!this.gl)return null;var T=this.fbo.shape.slice();s=s|0,u=u|0,typeof c!="number"&&(c=1);var k=Math.min(Math.max(s-c,0),T[0])|0,_=Math.min(Math.max(s+c,0),T[0])|0,b=Math.min(Math.max(u-c,0),T[1])|0,P=Math.min(Math.max(u+c,0),T[1])|0;if(_<=k||P<=b)return null;var l=[_-k,P-b],d=n(this.buffer,[l[0],l[1],4],[4,T[0]*4,1],4*(k+T[0]*b)),L=o(d.hi(l[0],l[1],1),c,c),w=L[0],I=L[1];if(w<0||Math.pow(this.radius,2)<L[2])return null;var z=d.get(w,I,0),B=d.get(w,I,1),O=d.get(w,I,2),R=d.get(w,I,3);return new h(w+k|0,I+b|0,z,[B,O,R],Math.sqrt(L[2]))},p.dispose=function(){this.gl&&(this.fbo.dispose(),f.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function x(s,u){var c=u[0],T=u[1],k={},_=r(s,c,T,k),b=f.mallocUint8(c*T*4);return new y(s,_,b)}},5158:function(g,v,e){var r=e(9016),f=e(4280),n=e(3984),a=e(1628),o=e(2631),h=e(9068);function y(u){this.gl=u,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var p=y.prototype;p.bind=function(){this.program||this._relink();var u,c=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),T=this.gl.lastAttribCount;if(c>T)for(u=T;u<c;u++)this.gl.enableVertexAttribArray(u);else if(T>c)for(u=c;u<T;u++)this.gl.disableVertexAttribArray(u);this.gl.lastAttribCount=c,this.gl.useProgram(this.program)},p.dispose=function(){for(var u=this.gl.lastAttribCount,c=0;c<u;c++)this.gl.disableVertexAttribArray(c);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function x(u,c){return u.name<c.name?-1:1}p.update=function(u,c,T,k){if(!c||arguments.length===1){var _=u;u=_.vertex,c=_.fragment,T=_.uniforms,k=_.attributes}var b=this,P=b.gl,l=b._vref;b._vref=a.shader(P,P.VERTEX_SHADER,u),l&&l.dispose(),b.vertShader=b._vref.shader;var d=this._fref;if(b._fref=a.shader(P,P.FRAGMENT_SHADER,c),d&&d.dispose(),b.fragShader=b._fref.shader,!T||!k){var L=P.createProgram();if(P.attachShader(L,b.fragShader),P.attachShader(L,b.vertShader),P.linkProgram(L),!P.getProgramParameter(L,P.LINK_STATUS)){var w=P.getProgramInfoLog(L);throw new h(w,"Error linking program:"+w)}T=T||o.uniforms(P,L),k=k||o.attributes(P,L),P.deleteProgram(L)}k=k.slice(),k.sort(x);var I=[],z=[],B=[],O;for(O=0;O<k.length;++O){var R=k[O];if(R.type.indexOf("mat")>=0){for(var C=R.type.charAt(R.type.length-1)|0,F=new Array(C),N=0;N<C;++N)F[N]=B.length,z.push(R.name+"["+N+"]"),typeof R.location=="number"?B.push(R.location+N):Array.isArray(R.location)&&R.location.length===C&&typeof R.location[N]=="number"?B.push(R.location[N]|0):B.push(-1);I.push({name:R.name,type:R.type,locations:F})}else I.push({name:R.name,type:R.type,locations:[B.length]}),z.push(R.name),typeof R.location=="number"?B.push(R.location|0):B.push(-1)}var V=0;for(O=0;O<B.length;++O)if(B[O]<0){for(;B.indexOf(V)>=0;)V+=1;B[O]=V}var K=new Array(T.length);function Q(){b.program=a.program(P,b._vref,b._fref,z,B);for(var at=0;at<T.length;++at)K[at]=P.getUniformLocation(b.program,T[at].name)}Q(),b._relink=Q,b.types={uniforms:n(T),attributes:n(k)},b.attributes=f(P,b,I,B),Object.defineProperty(b,"uniforms",r(P,b,T,K))};function s(u,c,T,k,_){var b=new y(u);return b.update(c,T,k,_),b}g.exports=s},9068:function(g){function v(e,r,f){this.shortMessage=r||"",this.longMessage=f||"",this.rawError=e||"",this.message="gl-shader: "+(r||e||"")+(f?`
`+f:""),this.stack=new Error().stack}v.prototype=new Error,v.prototype.name="GLError",v.prototype.constructor=v,g.exports=v},4280:function(g,v,e){g.exports=y;var r=e(9068);function f(p,x,s,u,c,T){this._gl=p,this._wrapper=x,this._index=s,this._locations=u,this._dimension=c,this._constFunc=T}var n=f.prototype;n.pointer=function(p,x,s,u){var c=this,T=c._gl,k=c._locations[c._index];T.vertexAttribPointer(k,c._dimension,p||T.FLOAT,!!x,s||0,u||0),T.enableVertexAttribArray(k)},n.set=function(p,x,s,u){return this._constFunc(this._locations[this._index],p,x,s,u)},Object.defineProperty(n,"location",{get:function(){return this._locations[this._index]},set:function(p){return p!==this._locations[this._index]&&(this._locations[this._index]=p|0,this._wrapper.program=null),p|0}});var a=[function(p,x,s){return s.length===void 0?p.vertexAttrib1f(x,s):p.vertexAttrib1fv(x,s)},function(p,x,s,u){return s.length===void 0?p.vertexAttrib2f(x,s,u):p.vertexAttrib2fv(x,s)},function(p,x,s,u,c){return s.length===void 0?p.vertexAttrib3f(x,s,u,c):p.vertexAttrib3fv(x,s)},function(p,x,s,u,c,T){return s.length===void 0?p.vertexAttrib4f(x,s,u,c,T):p.vertexAttrib4fv(x,s)}];function o(p,x,s,u,c,T,k){var _=a[c],b=new f(p,x,s,u,c,_);Object.defineProperty(T,k,{set:function(P){return p.disableVertexAttribArray(u[s]),_(p,u[s],P),P},get:function(){return b},enumerable:!0})}function h(p,x,s,u,c,T,k){for(var _=new Array(c),b=new Array(c),P=0;P<c;++P)o(p,x,s[P],u,c,_,P),b[P]=_[P];Object.defineProperty(_,"location",{set:function(L){if(Array.isArray(L))for(var w=0;w<c;++w)b[w].location=L[w];else for(var w=0;w<c;++w)b[w].location=L+w;return L},get:function(){for(var L=new Array(c),w=0;w<c;++w)L[w]=u[s[w]];return L},enumerable:!0}),_.pointer=function(L,w,I,z){L=L||p.FLOAT,w=!!w,I=I||c*c,z=z||0;for(var B=0;B<c;++B){var O=u[s[B]];p.vertexAttribPointer(O,c,L,w,I,z+B*c),p.enableVertexAttribArray(O)}};var l=new Array(c),d=p["vertexAttrib"+c+"fv"];Object.defineProperty(T,k,{set:function(L){for(var w=0;w<c;++w){var I=u[s[w]];if(p.disableVertexAttribArray(I),Array.isArray(L[0]))d.call(p,I,L[w]);else{for(var z=0;z<c;++z)l[z]=L[c*w+z];d.call(p,I,l)}}return L},get:function(){return _},enumerable:!0})}function y(p,x,s,u){for(var c={},T=0,k=s.length;T<k;++T){var _=s[T],b=_.name,P=_.type,l=_.locations;switch(P){case"bool":case"int":case"float":o(p,x,l[0],u,1,c,b);break;default:if(P.indexOf("vec")>=0){var d=P.charCodeAt(P.length-1)-48;if(d<2||d>4)throw new r("","Invalid data type for attribute "+b+": "+P);o(p,x,l[0],u,d,c,b)}else if(P.indexOf("mat")>=0){var d=P.charCodeAt(P.length-1)-48;if(d<2||d>4)throw new r("","Invalid data type for attribute "+b+": "+P);h(p,x,l,u,d,c,b)}else throw new r("","Unknown data type for attribute "+b+": "+P);break}}return c}},9016:function(g,v,e){var r=e(3984),f=e(9068);g.exports=o;function n(h){return function(){return h}}function a(h,y){for(var p=new Array(h),x=0;x<h;++x)p[x]=y;return p}function o(h,y,p,x){function s(P){return function(l,d,L){return l.getUniform(d.program,L[P])}}function u(P){return function(l){for(var d=c("",P),L=0;L<d.length;++L){var w=d[L],I=w[0],z=w[1];if(x[z]){var B=l;if(typeof I=="string"&&(I.indexOf(".")===0||I.indexOf("[")===0)){var O=I;if(I.indexOf(".")===0&&(O=I.slice(1)),O.indexOf("]")===O.length-1){var R=O.indexOf("["),C=O.slice(0,R),F=O.slice(R+1,O.length-1);B=C?l[C][F]:l[F]}else B=l[O]}var N=p[z].type,V;switch(N){case"bool":case"int":case"sampler2D":case"samplerCube":h.uniform1i(x[z],B);break;case"float":h.uniform1f(x[z],B);break;default:var K=N.indexOf("vec");if(0<=K&&K<=1&&N.length===4+K){if(V=N.charCodeAt(N.length-1)-48,V<2||V>4)throw new f("","Invalid data type");switch(N.charAt(0)){case"b":case"i":h["uniform"+V+"iv"](x[z],B);break;case"v":h["uniform"+V+"fv"](x[z],B);break;default:throw new f("","Unrecognized data type for vector "+name+": "+N)}}else if(N.indexOf("mat")===0&&N.length===4){if(V=N.charCodeAt(N.length-1)-48,V<2||V>4)throw new f("","Invalid uniform dimension type for matrix "+name+": "+N);h["uniformMatrix"+V+"fv"](x[z],!1,B);break}else throw new f("","Unknown uniform data type for "+name+": "+N)}}}}}function c(P,l){if(typeof l!="object")return[[P,l]];var d=[];for(var L in l){var w=l[L],I=P;parseInt(L)+""===L?I+="["+L+"]":I+="."+L,typeof w=="object"?d.push.apply(d,c(I,w)):d.push([I,w])}return d}function T(P){switch(P){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var l=P.indexOf("vec");if(0<=l&&l<=1&&P.length===4+l){var d=P.charCodeAt(P.length-1)-48;if(d<2||d>4)throw new f("","Invalid data type");return P.charAt(0)==="b"?a(d,!1):a(d,0)}else if(P.indexOf("mat")===0&&P.length===4){var d=P.charCodeAt(P.length-1)-48;if(d<2||d>4)throw new f("","Invalid uniform dimension type for matrix "+name+": "+P);return a(d*d,0)}else throw new f("","Unknown uniform data type for "+name+": "+P)}}function k(P,l,d){if(typeof d=="object"){var L=_(d);Object.defineProperty(P,l,{get:n(L),set:u(d),enumerable:!0,configurable:!1})}else x[d]?Object.defineProperty(P,l,{get:s(d),set:u(d),enumerable:!0,configurable:!1}):P[l]=T(p[d].type)}function _(P){var l;if(Array.isArray(P)){l=new Array(P.length);for(var d=0;d<P.length;++d)k(l,d,P[d])}else{l={};for(var L in P)k(l,L,P[L])}return l}var b=r(p,!0);return{get:n(_(b)),set:u(b),enumerable:!0,configurable:!0}}},3984:function(g){g.exports=v;function v(e,r){for(var f={},n=0;n<e.length;++n)for(var a=e[n].name,o=a.split("."),h=f,y=0;y<o.length;++y){var p=o[y].split("[");if(p.length>1){p[0]in h||(h[p[0]]=[]),h=h[p[0]];for(var x=1;x<p.length;++x){var s=parseInt(p[x]);x<p.length-1||y<o.length-1?(s in h||(x<p.length-1?h[s]=[]:h[s]={}),h=h[s]):r?h[s]=n:h[s]=e[n].type}}else y<o.length-1?(p[0]in h||(h[p[0]]={}),h=h[p[0]]):r?h[p[0]]=n:h[p[0]]=e[n].type}return f}},2631:function(g,v){v.uniforms=n,v.attributes=a;var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},r=null;function f(o,h){if(!r){var y=Object.keys(e);r={};for(var p=0;p<y.length;++p){var x=y[p];r[o[x]]=e[x]}}return r[h]}function n(o,h){for(var y=o.getProgramParameter(h,o.ACTIVE_UNIFORMS),p=[],x=0;x<y;++x){var s=o.getActiveUniform(h,x);if(s){var u=f(o,s.type);if(s.size>1)for(var c=0;c<s.size;++c)p.push({name:s.name.replace("[0]","["+c+"]"),type:u});else p.push({name:s.name,type:u})}}return p}function a(o,h){for(var y=o.getProgramParameter(h,o.ACTIVE_ATTRIBUTES),p=[],x=0;x<y;++x){var s=o.getActiveAttrib(h,x);s&&p.push({name:s.name,type:f(o,s.type)})}return p}},1628:function(g,v,e){v.shader=c,v.program=T;var r=e(9068),f=e(3530),n=typeof WeakMap>"u"?e(4037):WeakMap,a=new n,o=0;function h(k,_,b,P,l,d,L){this.id=k,this.src=_,this.type=b,this.shader=P,this.count=d,this.programs=[],this.cache=L}h.prototype.dispose=function(){if(--this.count===0){for(var k=this.cache,_=k.gl,b=this.programs,P=0,l=b.length;P<l;++P){var d=k.programs[b[P]];d&&(delete k.programs[P],_.deleteProgram(d))}_.deleteShader(this.shader),delete k.shaders[this.type===_.FRAGMENT_SHADER|0][this.src]}};function y(k){this.gl=k,this.shaders=[{},{}],this.programs={}}var p=y.prototype;function x(k,_,b){var P=k.createShader(_);if(k.shaderSource(P,b),k.compileShader(P),!k.getShaderParameter(P,k.COMPILE_STATUS)){var l=k.getShaderInfoLog(P);try{var d=f(l,b,_)}catch(L){throw console.warn("Failed to format compiler error: "+L),new r(l,`Error compiling shader:
`+l)}throw new r(l,d.short,d.long)}return P}p.getShaderReference=function(k,_){var b=this.gl,P=this.shaders[k===b.FRAGMENT_SHADER|0],l=P[_];if(!l||!b.isShader(l.shader)){var d=x(b,k,_);l=P[_]=new h(o++,_,k,d,[],1,this)}else l.count+=1;return l};function s(k,_,b,P,l){var d=k.createProgram();k.attachShader(d,_),k.attachShader(d,b);for(var L=0;L<P.length;++L)k.bindAttribLocation(d,l[L],P[L]);if(k.linkProgram(d),!k.getProgramParameter(d,k.LINK_STATUS)){var w=k.getProgramInfoLog(d);throw new r(w,"Error linking program: "+w)}return d}p.getProgram=function(k,_,b,P){var l=[k.id,_.id,b.join(":"),P.join(":")].join("@"),d=this.programs[l];return(!d||!this.gl.isProgram(d))&&(this.programs[l]=d=s(this.gl,k.shader,_.shader,b,P),k.programs.push(l),_.programs.push(l)),d};function u(k){var _=a.get(k);return _||(_=new y(k),a.set(k,_)),_}function c(k,_,b){return u(k).getShaderReference(_,b)}function T(k,_,b,P,l){return u(k).getProgram(_,b,P,l)}},3050:function(g){g.exports=r;function v(f){this.plot=f,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var e=v.prototype;e.update=function(f){f=f||{},this.enable=(f.enable||[!0,!0,!1,!1]).slice(),this.width=(f.width||[1,1,1,1]).slice(),this.color=(f.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(n){return n.slice()}),this.center=(f.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},e.draw=function(){var f=this.enable,n=this.width,a=this.color,o=this.center,h=this.plot,y=h.line,p=h.dataBox,x=h.viewBox;if(y.bind(),p[0]<=o[0]&&o[0]<=p[2]&&p[1]<=o[1]&&o[1]<=p[3]){var s=x[0]+(o[0]-p[0])/(p[2]-p[0])*(x[2]-x[0]),u=x[1]+(o[1]-p[1])/(p[3]-p[1])*(x[3]-x[1]);f[0]&&y.drawLine(s,u,x[0],u,n[0],a[0]),f[1]&&y.drawLine(s,u,s,x[1],n[1],a[1]),f[2]&&y.drawLine(s,u,x[2],u,n[2],a[2]),f[3]&&y.drawLine(s,u,s,x[3],n[3],a[3])}},e.dispose=function(){this.plot.removeOverlay(this)};function r(f,n){var a=new v(f);return a.update(n),f.addOverlay(a),a}},3540:function(g,v,e){var r=e(6832),f=e(5158),n=r([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),a=r([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);g.exports=function(o){return f(o,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},6496:function(g,v,e){var r=e(5827),f=e(2944),n=e(3540);g.exports=s;var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function o(u,c,T,k){this.gl=u,this.buffer=c,this.vao=T,this.shader=k,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var h=o.prototype,y=[0,0,0],p=[0,0,0],x=[0,0];h.isTransparent=function(){return!1},h.drawTransparent=function(u){},h.draw=function(u){var c=this.gl,T=this.vao,k=this.shader;T.bind(),k.bind();var _=u.model||a,b=u.view||a,P=u.projection||a,l;this.axes&&(l=this.axes.lastCubeProps.axis);for(var d=y,L=p,w=0;w<3;++w)l&&l[w]<0?(d[w]=this.bounds[0][w],L[w]=this.bounds[1][w]):(d[w]=this.bounds[1][w],L[w]=this.bounds[0][w]);x[0]=c.drawingBufferWidth,x[1]=c.drawingBufferHeight,k.uniforms.model=_,k.uniforms.view=b,k.uniforms.projection=P,k.uniforms.coordinates=[this.position,d,L],k.uniforms.colors=this.colors,k.uniforms.screenShape=x;for(var w=0;w<3;++w)k.uniforms.lineWidth=this.lineWidth[w]*this.pixelRatio,this.enabled[w]&&(T.draw(c.TRIANGLES,6,6*w),this.drawSides[w]&&T.draw(c.TRIANGLES,12,18+12*w));T.unbind()},h.update=function(u){u&&("bounds"in u&&(this.bounds=u.bounds),"position"in u&&(this.position=u.position),"lineWidth"in u&&(this.lineWidth=u.lineWidth),"colors"in u&&(this.colors=u.colors),"enabled"in u&&(this.enabled=u.enabled),"drawSides"in u&&(this.drawSides=u.drawSides))},h.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function s(u,c){var T=[];function k(d,L,w,I,z,B){var O=[d,L,w,0,0,0,1];O[I+3]=1,O[I]=z,T.push.apply(T,O),O[6]=-1,T.push.apply(T,O),O[I]=B,T.push.apply(T,O),T.push.apply(T,O),O[6]=1,T.push.apply(T,O),O[I]=z,T.push.apply(T,O)}k(0,0,0,0,0,1),k(0,0,0,1,0,1),k(0,0,0,2,0,1),k(1,0,0,1,-1,1),k(1,0,0,2,-1,1),k(0,1,0,0,-1,1),k(0,1,0,2,-1,1),k(0,0,1,0,-1,1),k(0,0,1,1,-1,1);var _=r(u,T),b=f(u,[{type:u.FLOAT,buffer:_,size:3,offset:0,stride:28},{type:u.FLOAT,buffer:_,size:3,offset:12,stride:28},{type:u.FLOAT,buffer:_,size:1,offset:24,stride:28}]),P=n(u);P.attributes.position.location=0,P.attributes.color.location=1,P.attributes.weight.location=2;var l=new o(u,_,b,P);return l.update(c),l}},9578:function(g,v,e){var r=e(6832),f=r([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=r([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),a=r([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),o=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);v.meshShader={vertex:f,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},v.pickShader={vertex:a,fragment:o,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7307:function(g,v,e){var r=e(2858),f=e(4020),n=["xyz","xzy","yxz","yzx","zxy","zyx"],a=function(T,k,_,b){for(var P=T.points,l=T.velocities,d=T.divergences,L=[],w=[],I=[],z=[],B=[],O=[],R=0,C=0,F=f.create(),N=f.create(),V=8,K=0;K<P.length;K++){var Q=P[K],at=l[K],it=d[K];k===0&&(it=_*.05),C=r.length(at)/b,F=f.create(),r.copy(F,at),F[3]=it;for(var q=0;q<V;q++)B[q]=[Q[0],Q[1],Q[2],q];if(z.length>0)for(var q=0;q<V;q++){var W=(q+1)%V;L.push(z[q],B[q],B[W],B[W],z[W],z[q]),I.push(N,F,F,F,N,N),O.push(R,C,C,C,R,R);var Z=L.length;w.push([Z-6,Z-5,Z-4],[Z-3,Z-2,Z-1])}var G=z;z=B,B=G;var et=N;N=F,F=et;var nt=R;R=C,C=nt}return{positions:L,cells:w,vectors:I,vertexIntensity:O}},o=function(T,k,_,b){for(var P=0,l=0;l<T.length;l++)for(var d=T[l].velocities,L=0;L<d.length;L++)P=Math.max(P,r.length(d[L]));for(var w=T.map(function(Q){return a(Q,_,b,P)}),I=[],z=[],B=[],O=[],l=0;l<w.length;l++){var R=w[l],C=I.length;I=I.concat(R.positions),B=B.concat(R.vectors),O=O.concat(R.vertexIntensity);for(var L=0;L<R.cells.length;L++){var F=R.cells[L],N=[];z.push(N);for(var V=0;V<F.length;V++)N.push(F[V]+C)}}return{positions:I,cells:z,vectors:B,vertexIntensity:O,colormap:k}},h=function(T,k){var _=T.length,b;for(b=0;b<_;b++){var P=T[b];if(P===k)return b;if(P>k)return b-1}return b},y=function(T,k,_){return T<k?k:T>_?_:T},p=function(T,k,_){var b=k.vectors,P=k.meshgrid,l=T[0],d=T[1],L=T[2],w=P[0].length,I=P[1].length,z=P[2].length,B=h(P[0],l),O=h(P[1],d),R=h(P[2],L),C=B+1,F=O+1,N=R+1;if(B=y(B,0,w-1),C=y(C,0,w-1),O=y(O,0,I-1),F=y(F,0,I-1),R=y(R,0,z-1),N=y(N,0,z-1),B<0||O<0||R<0||C>w-1||F>I-1||N>z-1)return r.create();var V=P[0][B],K=P[0][C],Q=P[1][O],at=P[1][F],it=P[2][R],q=P[2][N],W=(l-V)/(K-V),Z=(d-Q)/(at-Q),G=(L-it)/(q-it);isFinite(W)||(W=.5),isFinite(Z)||(Z=.5),isFinite(G)||(G=.5);var et,nt,X,Y,ot,rt;switch(_.reversedX&&(B=w-1-B,C=w-1-C),_.reversedY&&(O=I-1-O,F=I-1-F),_.reversedZ&&(R=z-1-R,N=z-1-N),_.filled){case 5:ot=R,rt=N,X=O*z,Y=F*z,et=B*z*I,nt=C*z*I;break;case 4:ot=R,rt=N,et=B*z,nt=C*z,X=O*z*w,Y=F*z*w;break;case 3:X=O,Y=F,ot=R*I,rt=N*I,et=B*I*z,nt=C*I*z;break;case 2:X=O,Y=F,et=B*I,nt=C*I,ot=R*I*w,rt=N*I*w;break;case 1:et=B,nt=C,ot=R*w,rt=N*w,X=O*w*z,Y=F*w*z;break;default:et=B,nt=C,X=O*w,Y=F*w,ot=R*w*I,rt=N*w*I;break}var ht=b[et+X+ot],pt=b[et+X+rt],yt=b[et+Y+ot],xt=b[et+Y+rt],Ft=b[nt+X+ot],Et=b[nt+X+rt],mt=b[nt+Y+ot],gt=b[nt+Y+rt],wt=r.create(),Pt=r.create(),Bt=r.create(),kt=r.create();r.lerp(wt,ht,Ft,W),r.lerp(Pt,pt,Et,W),r.lerp(Bt,yt,mt,W),r.lerp(kt,xt,gt,W);var jt=r.create(),Ht=r.create();r.lerp(jt,wt,Bt,Z),r.lerp(Ht,Pt,kt,Z);var Vt=r.create();return r.lerp(Vt,jt,Ht,G),Vt},x=function(T){var k=1/0;T.sort(function(l,d){return l-d});for(var _=T.length,b=1;b<_;b++){var P=Math.abs(T[b]-T[b-1]);P<k&&(k=P)}return k},s=function(T){for(var k=[],_=[],b=[],P={},l={},d={},L=T.length,w=0;w<L;w++){var I=T[w],z=I[0],B=I[1],O=I[2];P[z]||(k.push(z),P[z]=!0),l[B]||(_.push(B),l[B]=!0),d[O]||(b.push(O),d[O]=!0)}var R=x(k),C=x(_),F=x(b),N=Math.min(R,C,F);return isFinite(N)?N:1};g.exports=function(T,k){var _=T.startingPositions,b=T.maxLength||1e3,P=T.tubeSize||1,l=T.absoluteTubeSize,d=T.gridFill||"+x+y+z",L={};d.indexOf("-x")!==-1&&(L.reversedX=!0),d.indexOf("-y")!==-1&&(L.reversedY=!0),d.indexOf("-z")!==-1&&(L.reversedZ=!0),L.filled=n.indexOf(d.replace(/-/g,"").replace(/\+/g,""));var w=T.getVelocity||function(Et){return p(Et,T,L)},I=T.getDivergence||function(Et,mt){var gt=r.create(),wt=1e-4;r.add(gt,Et,[wt,0,0]);var Pt=w(gt);r.subtract(Pt,Pt,mt),r.scale(Pt,Pt,1/wt),r.add(gt,Et,[0,wt,0]);var Bt=w(gt);r.subtract(Bt,Bt,mt),r.scale(Bt,Bt,1/wt),r.add(gt,Et,[0,0,wt]);var kt=w(gt);return r.subtract(kt,kt,mt),r.scale(kt,kt,1/wt),r.add(gt,Pt,Bt),r.add(gt,gt,kt),gt},z=[],B=k[0][0],O=k[0][1],R=k[0][2],C=k[1][0],F=k[1][1],N=k[1][2],V=function(Et){var mt=Et[0],gt=Et[1],wt=Et[2];return!(mt<B||mt>C||gt<O||gt>F||wt<R||wt>N)},K=r.distance(k[0],k[1]),Q=10*K/b,at=Q*Q,it=1,q=0,W=_.length;W>1&&(it=s(_));for(var Z=0;Z<W;Z++){var G=r.create();r.copy(G,_[Z]);var et=[G],nt=[],X=w(G),Y=G;nt.push(X);var ot=[],rt=I(G,X),ht=r.length(rt);isFinite(ht)&&ht>q&&(q=ht),ot.push(ht),z.push({points:et,velocities:nt,divergences:ot});for(var pt=0;pt<b*100&&et.length<b&&V(G);){pt++;var yt=r.clone(X),xt=r.squaredLength(yt);if(xt===0)break;if(xt>at&&r.scale(yt,yt,Q/Math.sqrt(xt)),r.add(yt,yt,G),X=w(yt),r.squaredDistance(Y,yt)-at>-1e-4*at){et.push(yt),Y=yt,nt.push(X);var rt=I(yt,X),ht=r.length(rt);isFinite(ht)&&ht>q&&(q=ht),ot.push(ht)}G=yt}}var Ft=o(z,T.colormap,q,it);return l?Ft.tubeScale=l:(q===0&&(q=1),Ft.tubeScale=P*.5*it/q),Ft};var u=e(9578),c=e(1140).createMesh;g.exports.createTubeMesh=function(T,k){return c(T,k,{shaders:u,traceType:"streamtube"})}},9054:function(g,v,e){var r=e(5158),f=e(6832),n=f([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),a=f([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),o=f([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),h=f([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);v.createShader=function(y){var p=r(y,n,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return p.attributes.uv.location=0,p.attributes.f.location=1,p.attributes.normal.location=2,p},v.createPickShader=function(y){var p=r(y,n,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return p.attributes.uv.location=0,p.attributes.f.location=1,p.attributes.normal.location=2,p},v.createContourShader=function(y){var p=r(y,o,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return p.attributes.uv.location=0,p.attributes.f.location=1,p},v.createPickContourShader=function(y){var p=r(y,o,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return p.attributes.uv.location=0,p.attributes.f.location=1,p}},3754:function(g,v,e){g.exports=nt;var r=e(2288),f=e(5827),n=e(2944),a=e(8931),o=e(5306),h=e(9156),y=e(7498),p=e(7382),x=e(5050),s=e(4162),u=e(104),c=e(7437),T=e(5070),k=e(9144),_=e(9054),b=_.createShader,P=_.createContourShader,l=_.createPickShader,d=_.createPickContourShader,L=4*(4+3+3),w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],I=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],z=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var X=0;X<3;++X){var Y=z[X],ot=(X+1)%3,rt=(X+2)%3;Y[ot+0]=1,Y[rt+3]=1,Y[X+6]=1}})();function B(X,Y,ot,rt,ht){this.position=X,this.index=Y,this.uv=ot,this.level=rt,this.dataCoordinate=ht}var O=256;function R(X,Y,ot,rt,ht,pt,yt,xt,Ft,Et,mt,gt,wt,Pt,Bt){this.gl=X,this.shape=Y,this.bounds=ot,this.objectOffset=Bt,this.intensityBounds=[],this._shader=rt,this._pickShader=ht,this._coordinateBuffer=pt,this._vao=yt,this._colorMap=xt,this._contourShader=Ft,this._contourPickShader=Et,this._contourBuffer=mt,this._contourVAO=gt,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new B([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=wt,this._dynamicVAO=Pt,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[x(o.mallocFloat(1024),[0,0]),x(o.mallocFloat(1024),[0,0]),x(o.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var C=R.prototype;C.genColormap=function(X,Y){var ot=!1,rt=p([h({colormap:X,nshades:O,format:"rgba"}).map(function(ht,pt){var yt=Y?F(pt/255,Y):ht[3];return yt<1&&(ot=!0),[ht[0],ht[1],ht[2],255*yt]})]);return y.divseq(rt,255),this.hasAlphaScale=ot,rt},C.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},C.isOpaque=function(){return!this.isTransparent()},C.pickSlots=1,C.setPickBase=function(X){this.pickId=X};function F(X,Y){if(!Y||!Y.length)return 1;for(var ot=0;ot<Y.length;++ot){if(Y.length<2)return 1;if(Y[ot][0]===X)return Y[ot][1];if(Y[ot][0]>X&&ot>0){var rt=(Y[ot][0]-X)/(Y[ot][0]-Y[ot-1][0]);return Y[ot][1]*(1-rt)+rt*Y[ot-1][1]}}return 1}var N=[0,0,0],V={showSurface:!1,showContour:!1,projections:[w.slice(),w.slice(),w.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function K(X,Y){var ot,rt,ht,pt=Y.axes&&Y.axes.lastCubeProps.axis||N,yt=Y.showSurface,xt=Y.showContour;for(ot=0;ot<3;++ot)for(yt=yt||Y.surfaceProject[ot],rt=0;rt<3;++rt)xt=xt||Y.contourProject[ot][rt];for(ot=0;ot<3;++ot){var Ft=V.projections[ot];for(rt=0;rt<16;++rt)Ft[rt]=0;for(rt=0;rt<4;++rt)Ft[5*rt]=1;Ft[5*ot]=0,Ft[12+ot]=Y.axesBounds[+(pt[ot]>0)][ot],u(Ft,X.model,Ft);var Et=V.clipBounds[ot];for(ht=0;ht<2;++ht)for(rt=0;rt<3;++rt)Et[ht][rt]=X.clipBounds[ht][rt];Et[0][ot]=-1e8,Et[1][ot]=1e8}return V.showSurface=yt,V.showContour=xt,V}var Q={model:w,view:w,projection:w,inverseModel:w.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},at=w.slice(),it=[1,0,0,0,1,0,0,0,1];function q(X,Y){X=X||{};var ot=this.gl;ot.disable(ot.CULL_FACE),this._colorMap.bind(0);var rt=Q;rt.model=X.model||w,rt.view=X.view||w,rt.projection=X.projection||w,rt.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],rt.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],rt.objectOffset=this.objectOffset,rt.contourColor=this.contourColor[0],rt.inverseModel=c(rt.inverseModel,rt.model);for(var ht=0;ht<2;++ht)for(var pt=rt.clipBounds[ht],yt=0;yt<3;++yt)pt[yt]=Math.min(Math.max(this.clipBounds[ht][yt],-1e8),1e8);rt.kambient=this.ambientLight,rt.kdiffuse=this.diffuseLight,rt.kspecular=this.specularLight,rt.roughness=this.roughness,rt.fresnel=this.fresnel,rt.opacity=this.opacity,rt.height=0,rt.permutation=it,rt.vertexColor=this.vertexColor;var xt=at;for(u(xt,rt.view,rt.model),u(xt,rt.projection,xt),c(xt,xt),ht=0;ht<3;++ht)rt.eyePosition[ht]=xt[12+ht]/xt[15];var Ft=xt[15];for(ht=0;ht<3;++ht)Ft+=this.lightPosition[ht]*xt[4*ht+3];for(ht=0;ht<3;++ht){var Et=xt[12+ht];for(yt=0;yt<3;++yt)Et+=xt[4*yt+ht]*this.lightPosition[yt];rt.lightPosition[ht]=Et/Ft}var mt=K(rt,this);if(mt.showSurface){for(this._shader.bind(),this._shader.uniforms=rt,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ot.TRIANGLES,this._vertexCount),ht=0;ht<3;++ht)!this.surfaceProject[ht]||!this.vertexCount||(this._shader.uniforms.model=mt.projections[ht],this._shader.uniforms.clipBounds=mt.clipBounds[ht],this._vao.draw(ot.TRIANGLES,this._vertexCount));this._vao.unbind()}if(mt.showContour){var gt=this._contourShader;rt.kambient=1,rt.kdiffuse=0,rt.kspecular=0,rt.opacity=1,gt.bind(),gt.uniforms=rt;var wt=this._contourVAO;for(wt.bind(),ht=0;ht<3;++ht)for(gt.uniforms.permutation=z[ht],ot.lineWidth(this.contourWidth[ht]*this.pixelRatio),yt=0;yt<this.contourLevels[ht].length;++yt)yt===this.highlightLevel[ht]?(gt.uniforms.contourColor=this.highlightColor[ht],gt.uniforms.contourTint=this.highlightTint[ht]):(yt===0||yt-1===this.highlightLevel[ht])&&(gt.uniforms.contourColor=this.contourColor[ht],gt.uniforms.contourTint=this.contourTint[ht]),this._contourCounts[ht][yt]&&(gt.uniforms.height=this.contourLevels[ht][yt],wt.draw(ot.LINES,this._contourCounts[ht][yt],this._contourOffsets[ht][yt]));for(ht=0;ht<3;++ht)for(gt.uniforms.model=mt.projections[ht],gt.uniforms.clipBounds=mt.clipBounds[ht],yt=0;yt<3;++yt)if(this.contourProject[ht][yt]){gt.uniforms.permutation=z[yt],ot.lineWidth(this.contourWidth[yt]*this.pixelRatio);for(var Pt=0;Pt<this.contourLevels[yt].length;++Pt)Pt===this.highlightLevel[yt]?(gt.uniforms.contourColor=this.highlightColor[yt],gt.uniforms.contourTint=this.highlightTint[yt]):(Pt===0||Pt-1===this.highlightLevel[yt])&&(gt.uniforms.contourColor=this.contourColor[yt],gt.uniforms.contourTint=this.contourTint[yt]),this._contourCounts[yt][Pt]&&(gt.uniforms.height=this.contourLevels[yt][Pt],wt.draw(ot.LINES,this._contourCounts[yt][Pt],this._contourOffsets[yt][Pt]))}for(wt.unbind(),wt=this._dynamicVAO,wt.bind(),ht=0;ht<3;++ht)if(this._dynamicCounts[ht]!==0)for(gt.uniforms.model=rt.model,gt.uniforms.clipBounds=rt.clipBounds,gt.uniforms.permutation=z[ht],ot.lineWidth(this.dynamicWidth[ht]*this.pixelRatio),gt.uniforms.contourColor=this.dynamicColor[ht],gt.uniforms.contourTint=this.dynamicTint[ht],gt.uniforms.height=this.dynamicLevel[ht],wt.draw(ot.LINES,this._dynamicCounts[ht],this._dynamicOffsets[ht]),yt=0;yt<3;++yt)this.contourProject[yt][ht]&&(gt.uniforms.model=mt.projections[yt],gt.uniforms.clipBounds=mt.clipBounds[yt],wt.draw(ot.LINES,this._dynamicCounts[ht],this._dynamicOffsets[ht]));wt.unbind()}}C.draw=function(X){return q.call(this,X,!1)},C.drawTransparent=function(X){return q.call(this,X,!0)};var W={model:w,view:w,projection:w,inverseModel:w,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};C.drawPick=function(X){X=X||{};var Y=this.gl;Y.disable(Y.CULL_FACE);var ot=W;ot.model=X.model||w,ot.view=X.view||w,ot.projection=X.projection||w,ot.shape=this._field[2].shape,ot.pickId=this.pickId/255,ot.lowerBound=this.bounds[0],ot.upperBound=this.bounds[1],ot.objectOffset=this.objectOffset,ot.permutation=it;for(var rt=0;rt<2;++rt)for(var ht=ot.clipBounds[rt],pt=0;pt<3;++pt)ht[pt]=Math.min(Math.max(this.clipBounds[rt][pt],-1e8),1e8);var yt=K(ot,this);if(yt.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ot,this._vao.bind(),this._vao.draw(Y.TRIANGLES,this._vertexCount),rt=0;rt<3;++rt)this.surfaceProject[rt]&&(this._pickShader.uniforms.model=yt.projections[rt],this._pickShader.uniforms.clipBounds=yt.clipBounds[rt],this._vao.draw(Y.TRIANGLES,this._vertexCount));this._vao.unbind()}if(yt.showContour){var xt=this._contourPickShader;xt.bind(),xt.uniforms=ot;var Ft=this._contourVAO;for(Ft.bind(),pt=0;pt<3;++pt)for(Y.lineWidth(this.contourWidth[pt]*this.pixelRatio),xt.uniforms.permutation=z[pt],rt=0;rt<this.contourLevels[pt].length;++rt)this._contourCounts[pt][rt]&&(xt.uniforms.height=this.contourLevels[pt][rt],Ft.draw(Y.LINES,this._contourCounts[pt][rt],this._contourOffsets[pt][rt]));for(rt=0;rt<3;++rt)for(xt.uniforms.model=yt.projections[rt],xt.uniforms.clipBounds=yt.clipBounds[rt],pt=0;pt<3;++pt)if(this.contourProject[rt][pt]){xt.uniforms.permutation=z[pt],Y.lineWidth(this.contourWidth[pt]*this.pixelRatio);for(var Et=0;Et<this.contourLevels[pt].length;++Et)this._contourCounts[pt][Et]&&(xt.uniforms.height=this.contourLevels[pt][Et],Ft.draw(Y.LINES,this._contourCounts[pt][Et],this._contourOffsets[pt][Et]))}Ft.unbind()}},C.pick=function(X){if(!X||X.id!==this.pickId)return null;var Y=this._field[2].shape,ot=this._pickResult,rt=Y[0]*(X.value[0]+(X.value[2]>>4)/16)/255,ht=Math.floor(rt),pt=rt-ht,yt=Y[1]*(X.value[1]+(X.value[2]&15)/16)/255,xt=Math.floor(yt),Ft=yt-xt;ht+=1,xt+=1;var Et=ot.position;Et[0]=Et[1]=Et[2]=0;for(var mt=0;mt<2;++mt)for(var gt=mt?pt:1-pt,wt=0;wt<2;++wt)for(var Pt=wt?Ft:1-Ft,Bt=ht+mt,kt=xt+wt,jt=gt*Pt,Ht=0;Ht<3;++Ht)Et[Ht]+=this._field[Ht].get(Bt,kt)*jt;for(var Vt=this._pickResult.level,ee=0;ee<3;++ee)if(Vt[ee]=T.le(this.contourLevels[ee],Et[ee]),Vt[ee]<0)this.contourLevels[ee].length>0&&(Vt[ee]=0);else if(Vt[ee]<this.contourLevels[ee].length-1){var te=this.contourLevels[ee][Vt[ee]],ae=this.contourLevels[ee][Vt[ee]+1];Math.abs(te-Et[ee])>Math.abs(ae-Et[ee])&&(Vt[ee]+=1)}for(ot.index[0]=pt<.5?ht:ht+1,ot.index[1]=Ft<.5?xt:xt+1,ot.uv[0]=rt/Y[0],ot.uv[1]=yt/Y[1],Ht=0;Ht<3;++Ht)ot.dataCoordinate[Ht]=this._field[Ht].get(ot.index[0],ot.index[1]);return ot},C.padField=function(X,Y){var ot=Y.shape.slice(),rt=X.shape.slice();y.assign(X.lo(1,1).hi(ot[0],ot[1]),Y),y.assign(X.lo(1).hi(ot[0],1),Y.hi(ot[0],1)),y.assign(X.lo(1,rt[1]-1).hi(ot[0],1),Y.lo(0,ot[1]-1).hi(ot[0],1)),y.assign(X.lo(0,1).hi(1,ot[1]),Y.hi(1)),y.assign(X.lo(rt[0]-1,1).hi(1,ot[1]),Y.lo(ot[0]-1)),X.set(0,0,Y.get(0,0)),X.set(0,rt[1]-1,Y.get(0,ot[1]-1)),X.set(rt[0]-1,0,Y.get(ot[0]-1,0)),X.set(rt[0]-1,rt[1]-1,Y.get(ot[0]-1,ot[1]-1))};function Z(X,Y){return Array.isArray(X)?[Y(X[0]),Y(X[1]),Y(X[2])]:[Y(X),Y(X),Y(X)]}function G(X){return Array.isArray(X)?X.length===3?[X[0],X[1],X[2],1]:[X[0],X[1],X[2],X[3]]:[0,0,0,1]}function et(X){if(Array.isArray(X)){if(Array.isArray(X))return[G(X[0]),G(X[1]),G(X[2])];var Y=G(X);return[Y.slice(),Y.slice(),Y.slice()]}}C.update=function(X){X=X||{},this.objectOffset=X.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in X&&(this.contourWidth=Z(X.contourWidth,Number)),"showContour"in X&&(this.showContour=Z(X.showContour,Boolean)),"showSurface"in X&&(this.showSurface=!!X.showSurface),"contourTint"in X&&(this.contourTint=Z(X.contourTint,Boolean)),"contourColor"in X&&(this.contourColor=et(X.contourColor)),"contourProject"in X&&(this.contourProject=Z(X.contourProject,function(Se){return Z(Se,Boolean)})),"surfaceProject"in X&&(this.surfaceProject=X.surfaceProject),"dynamicColor"in X&&(this.dynamicColor=et(X.dynamicColor)),"dynamicTint"in X&&(this.dynamicTint=Z(X.dynamicTint,Number)),"dynamicWidth"in X&&(this.dynamicWidth=Z(X.dynamicWidth,Number)),"opacity"in X&&(this.opacity=X.opacity),"opacityscale"in X&&(this.opacityscale=X.opacityscale),"colorBounds"in X&&(this.colorBounds=X.colorBounds),"vertexColor"in X&&(this.vertexColor=X.vertexColor?1:0),"colormap"in X&&this._colorMap.setPixels(this.genColormap(X.colormap,this.opacityscale));var Y=X.field||X.coords&&X.coords[2]||null,ot=!1;if(Y||(this._field[2].shape[0]||this._field[2].shape[2]?Y=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):Y=this._field[2].hi(0,0)),"field"in X||"coords"in X){var rt=(Y.shape[0]+2)*(Y.shape[1]+2);rt>this._field[2].data.length&&(o.freeFloat(this._field[2].data),this._field[2].data=o.mallocFloat(r.nextPow2(rt))),this._field[2]=x(this._field[2].data,[Y.shape[0]+2,Y.shape[1]+2]),this.padField(this._field[2],Y),this.shape=Y.shape.slice();for(var ht=this.shape,pt=0;pt<2;++pt)this._field[2].size>this._field[pt].data.length&&(o.freeFloat(this._field[pt].data),this._field[pt].data=o.mallocFloat(this._field[2].size)),this._field[pt]=x(this._field[pt].data,[ht[0]+2,ht[1]+2]);if(X.coords){var yt=X.coords;if(!Array.isArray(yt)||yt.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(pt=0;pt<2;++pt){var xt=yt[pt];for(wt=0;wt<2;++wt)if(xt.shape[wt]!==ht[wt])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[pt],xt)}}else if(X.ticks){var Ft=X.ticks;if(!Array.isArray(Ft)||Ft.length!==2)throw new Error("gl-surface: invalid ticks");for(pt=0;pt<2;++pt){var Et=Ft[pt];if((Array.isArray(Et)||Et.length)&&(Et=x(Et)),Et.shape[0]!==ht[pt])throw new Error("gl-surface: invalid tick length");var mt=x(Et.data,ht);mt.stride[pt]=Et.stride[0],mt.stride[pt^1]=0,this.padField(this._field[pt],mt)}}else{for(pt=0;pt<2;++pt){var gt=[0,0];gt[pt]=1,this._field[pt]=x(this._field[pt].data,[ht[0]+2,ht[1]+2],gt,0)}this._field[0].set(0,0,0);for(var wt=0;wt<ht[0];++wt)this._field[0].set(wt+1,0,wt);for(this._field[0].set(ht[0]+1,0,ht[0]-1),this._field[1].set(0,0,0),wt=0;wt<ht[1];++wt)this._field[1].set(0,wt+1,wt);this._field[1].set(0,ht[1]+1,ht[1]-1)}var Pt=this._field,Bt=x(o.mallocFloat(Pt[2].size*3*2),[3,ht[0]+2,ht[1]+2,2]);for(pt=0;pt<3;++pt)k(Bt.pick(pt),Pt[pt],"mirror");var kt=x(o.mallocFloat(Pt[2].size*3),[ht[0]+2,ht[1]+2,3]);for(pt=0;pt<ht[0]+2;++pt)for(wt=0;wt<ht[1]+2;++wt){var jt=Bt.get(0,pt,wt,0),Ht=Bt.get(0,pt,wt,1),Vt=Bt.get(1,pt,wt,0),ee=Bt.get(1,pt,wt,1),te=Bt.get(2,pt,wt,0),ae=Bt.get(2,pt,wt,1),le=Vt*ae-ee*te,ce=te*Ht-ae*jt,pe=jt*ee-Ht*Vt,we=Math.sqrt(le*le+ce*ce+pe*pe);we<1e-8?(we=Math.max(Math.abs(le),Math.abs(ce),Math.abs(pe)),we<1e-8?(pe=1,ce=le=0,we=1):we=1/we):we=1/Math.sqrt(we),kt.set(pt,wt,0,le*we),kt.set(pt,wt,1,ce*we),kt.set(pt,wt,2,pe*we)}o.free(Bt.data);var ve=[1/0,1/0,1/0],Mt=[-1/0,-1/0,-1/0],It=1/0,Rt=-1/0,zt=(ht[0]-1)*(ht[1]-1)*6,Tt=o.mallocFloat(r.nextPow2(10*zt)),ft=0,ut=0;for(pt=0;pt<ht[0]-1;++pt)t:for(wt=0;wt<ht[1]-1;++wt){for(var vt=0;vt<2;++vt)for(var St=0;St<2;++St)for(var Ot=0;Ot<3;++Ot){var Xt=this._field[Ot].get(1+pt+vt,1+wt+St);if(isNaN(Xt)||!isFinite(Xt))continue t}for(Ot=0;Ot<6;++Ot){var $t=pt+I[Ot][0],de=wt+I[Ot][1],Me=this._field[0].get($t+1,de+1),Fe=this._field[1].get($t+1,de+1);Xt=this._field[2].get($t+1,de+1),le=kt.get($t+1,de+1,0),ce=kt.get($t+1,de+1,1),pe=kt.get($t+1,de+1,2),X.intensity&&(De=X.intensity.get($t,de));var De=X.intensity?X.intensity.get($t,de):Xt+this.objectOffset[2];Tt[ft++]=$t,Tt[ft++]=de,Tt[ft++]=Me,Tt[ft++]=Fe,Tt[ft++]=Xt,Tt[ft++]=0,Tt[ft++]=De,Tt[ft++]=le,Tt[ft++]=ce,Tt[ft++]=pe,ve[0]=Math.min(ve[0],Me+this.objectOffset[0]),ve[1]=Math.min(ve[1],Fe+this.objectOffset[1]),ve[2]=Math.min(ve[2],Xt+this.objectOffset[2]),It=Math.min(It,De),Mt[0]=Math.max(Mt[0],Me+this.objectOffset[0]),Mt[1]=Math.max(Mt[1],Fe+this.objectOffset[1]),Mt[2]=Math.max(Mt[2],Xt+this.objectOffset[2]),Rt=Math.max(Rt,De),ut+=1}}for(X.intensityBounds&&(It=+X.intensityBounds[0],Rt=+X.intensityBounds[1]),pt=6;pt<ft;pt+=10)Tt[pt]=(Tt[pt]-It)/(Rt-It);this._vertexCount=ut,this._coordinateBuffer.update(Tt.subarray(0,ft)),o.freeFloat(Tt),o.free(kt.data),this.bounds=[ve,Mt],this.intensity=X.intensity||this._field[2],(this.intensityBounds[0]!==It||this.intensityBounds[1]!==Rt)&&(ot=!0),this.intensityBounds=[It,Rt]}if("levels"in X){var Ae=X.levels;for(Array.isArray(Ae[0])?Ae=Ae.slice():Ae=[[],[],Ae],pt=0;pt<3;++pt)Ae[pt]=Ae[pt].slice(),Ae[pt].sort(function(Se,Be){return Se-Be});for(pt=0;pt<3;++pt)for(wt=0;wt<Ae[pt].length;++wt)Ae[pt][wt]-=this.objectOffset[pt];t:for(pt=0;pt<3;++pt){if(Ae[pt].length!==this.contourLevels[pt].length){ot=!0;break}for(wt=0;wt<Ae[pt].length;++wt)if(Ae[pt][wt]!==this.contourLevels[pt][wt]){ot=!0;break t}}this.contourLevels=Ae}if(ot){Pt=this._field,ht=this.shape;for(var Ve=[],Qe=0;Qe<3;++Qe){var Sr=this.contourLevels[Qe],he=[],je=[],Re=[0,0,0];for(pt=0;pt<Sr.length;++pt){var _r=s(this._field[Qe],Sr[pt]);he.push(Ve.length/5|0),ut=0;t:for(wt=0;wt<_r.cells.length;++wt){var tr=_r.cells[wt];for(Ot=0;Ot<2;++Ot){var Gt=_r.positions[tr[Ot]],re=Gt[0],fe=Math.floor(re)|0,ye=re-fe,Le=Gt[1],_e=Math.floor(Le)|0,Ce=Le-_e,ze=!1;e:for(var We=0;We<3;++We){Re[We]=0;var qe=(Qe+We+1)%3;for(vt=0;vt<2;++vt){var ir=vt?ye:1-ye;for($t=Math.min(Math.max(fe+vt,0),ht[0])|0,St=0;St<2;++St){var xr=St?Ce:1-Ce;if(de=Math.min(Math.max(_e+St,0),ht[1])|0,We<2?Xt=this._field[qe].get($t,de):Xt=(this.intensity.get($t,de)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Xt)||isNaN(Xt)){ze=!0;break e}var Dt=ir*xr;Re[We]+=Dt*Xt}}}if(!ze)Ve.push(Re[0],Re[1],Gt[0],Gt[1],Re[2]),ut+=1;else{if(Ot>0){for(var Ut=0;Ut<5;++Ut)Ve.pop();ut-=1}continue t}}}je.push(ut)}this._contourOffsets[Qe]=he,this._contourCounts[Qe]=je}var Te=o.mallocFloat(Ve.length);for(pt=0;pt<Ve.length;++pt)Te[pt]=Ve[pt];this._contourBuffer.update(Te),o.freeFloat(Te)}},C.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var X=0;X<3;++X)o.freeFloat(this._field[X].data)},C.highlight=function(X){var Y;if(!X){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(Y=0;Y<3;++Y)this.enableHighlight[Y]?this.highlightLevel[Y]=X.level[Y]:this.highlightLevel[Y]=-1;var ot;for(this.snapToData?ot=X.dataCoordinate:ot=X.position,Y=0;Y<3;++Y)ot[Y]-=this.objectOffset[Y];if(!((!this.enableDynamic[0]||ot[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||ot[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||ot[2]===this.dynamicLevel[2]))){for(var rt=0,ht=this.shape,pt=o.mallocFloat(12*ht[0]*ht[1]),yt=0;yt<3;++yt){if(!this.enableDynamic[yt]){this.dynamicLevel[yt]=NaN,this._dynamicCounts[yt]=0;continue}this.dynamicLevel[yt]=ot[yt];var xt=(yt+1)%3,Ft=(yt+2)%3,Et=this._field[yt],mt=this._field[xt],gt=this._field[Ft],wt=s(Et,ot[yt]),Pt=wt.cells,Bt=wt.positions;for(this._dynamicOffsets[yt]=rt,Y=0;Y<Pt.length;++Y)for(var kt=Pt[Y],jt=0;jt<2;++jt){var Ht=Bt[kt[jt]],Vt=+Ht[0],ee=Vt|0,te=Math.min(ee+1,ht[0])|0,ae=Vt-ee,le=1-ae,ce=+Ht[1],pe=ce|0,we=Math.min(pe+1,ht[1])|0,ve=ce-pe,Mt=1-ve,It=le*Mt,Rt=le*ve,zt=ae*Mt,Tt=ae*ve,ft=It*mt.get(ee,pe)+Rt*mt.get(ee,we)+zt*mt.get(te,pe)+Tt*mt.get(te,we),ut=It*gt.get(ee,pe)+Rt*gt.get(ee,we)+zt*gt.get(te,pe)+Tt*gt.get(te,we);if(isNaN(ft)||isNaN(ut)){jt&&(rt-=1);break}pt[2*rt+0]=ft,pt[2*rt+1]=ut,rt+=1}this._dynamicCounts[yt]=rt-this._dynamicOffsets[yt]}this._dynamicBuffer.update(pt.subarray(0,2*rt)),o.freeFloat(pt)}};function nt(X){var Y=X.gl,ot=b(Y),rt=l(Y),ht=P(Y),pt=d(Y),yt=f(Y),xt=n(Y,[{buffer:yt,size:4,stride:L,offset:0},{buffer:yt,size:3,stride:L,offset:16},{buffer:yt,size:3,stride:L,offset:28}]),Ft=f(Y),Et=n(Y,[{buffer:Ft,size:4,stride:20,offset:0},{buffer:Ft,size:1,stride:20,offset:16}]),mt=f(Y),gt=n(Y,[{buffer:mt,size:2,type:Y.FLOAT}]),wt=a(Y,1,O,Y.RGBA,Y.UNSIGNED_BYTE);wt.minFilter=Y.LINEAR,wt.magFilter=Y.LINEAR;var Pt=new R(Y,[0,0],[[0,0,0],[0,0,0]],ot,rt,yt,xt,wt,ht,pt,Ft,Et,mt,gt,[0,0,0]),Bt={levels:[[],[],[]]};for(var kt in X)Bt[kt]=X[kt];return Bt.colormap=Bt.colormap||"jet",Pt.update(Bt),Pt}},8931:function(g,v,e){var r=e(5050),f=e(7498),n=e(5306);g.exports=d;var a=null,o=null,h=null;function y(L){a=[L.LINEAR,L.NEAREST_MIPMAP_LINEAR,L.LINEAR_MIPMAP_NEAREST,L.LINEAR_MIPMAP_NEAREST],o=[L.NEAREST,L.LINEAR,L.NEAREST_MIPMAP_NEAREST,L.NEAREST_MIPMAP_LINEAR,L.LINEAR_MIPMAP_NEAREST,L.LINEAR_MIPMAP_LINEAR],h=[L.REPEAT,L.CLAMP_TO_EDGE,L.MIRRORED_REPEAT]}function p(L){return typeof HTMLCanvasElement<"u"&&L instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&L instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&L instanceof HTMLVideoElement||typeof ImageData<"u"&&L instanceof ImageData}var x=function(L,w){f.muls(L,w,255)};function s(L,w,I){var z=L.gl,B=z.getParameter(z.MAX_TEXTURE_SIZE);if(w<0||w>B||I<0||I>B)throw new Error("gl-texture2d: Invalid texture size");return L._shape=[w,I],L.bind(),z.texImage2D(z.TEXTURE_2D,0,L.format,w,I,0,L.format,L.type,null),L._mipLevels=[0],L}function u(L,w,I,z,B,O){this.gl=L,this.handle=w,this.format=B,this.type=O,this._shape=[I,z],this._mipLevels=[0],this._magFilter=L.NEAREST,this._minFilter=L.NEAREST,this._wrapS=L.CLAMP_TO_EDGE,this._wrapT=L.CLAMP_TO_EDGE,this._anisoSamples=1;var R=this,C=[this._wrapS,this._wrapT];Object.defineProperties(C,[{get:function(){return R._wrapS},set:function(N){return R.wrapS=N}},{get:function(){return R._wrapT},set:function(N){return R.wrapT=N}}]),this._wrapVector=C;var F=[this._shape[0],this._shape[1]];Object.defineProperties(F,[{get:function(){return R._shape[0]},set:function(N){return R.width=N}},{get:function(){return R._shape[1]},set:function(N){return R.height=N}}]),this._shapeVector=F}var c=u.prototype;Object.defineProperties(c,{minFilter:{get:function(){return this._minFilter},set:function(L){this.bind();var w=this.gl;if(this.type===w.FLOAT&&a.indexOf(L)>=0&&(w.getExtension("OES_texture_float_linear")||(L=w.NEAREST)),o.indexOf(L)<0)throw new Error("gl-texture2d: Unknown filter mode "+L);return w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,L),this._minFilter=L}},magFilter:{get:function(){return this._magFilter},set:function(L){this.bind();var w=this.gl;if(this.type===w.FLOAT&&a.indexOf(L)>=0&&(w.getExtension("OES_texture_float_linear")||(L=w.NEAREST)),o.indexOf(L)<0)throw new Error("gl-texture2d: Unknown filter mode "+L);return w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,L),this._magFilter=L}},mipSamples:{get:function(){return this._anisoSamples},set:function(L){var w=this._anisoSamples;if(this._anisoSamples=Math.max(L,1)|0,w!==this._anisoSamples){var I=this.gl.getExtension("EXT_texture_filter_anisotropic");I&&this.gl.texParameterf(this.gl.TEXTURE_2D,I.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(L){if(this.bind(),h.indexOf(L)<0)throw new Error("gl-texture2d: Unknown wrap mode "+L);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,L),this._wrapS=L}},wrapT:{get:function(){return this._wrapT},set:function(L){if(this.bind(),h.indexOf(L)<0)throw new Error("gl-texture2d: Unknown wrap mode "+L);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,L),this._wrapT=L}},wrap:{get:function(){return this._wrapVector},set:function(L){if(Array.isArray(L)||(L=[L,L]),L.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var w=0;w<2;++w)if(h.indexOf(L[w])<0)throw new Error("gl-texture2d: Unknown wrap mode "+L);this._wrapS=L[0],this._wrapT=L[1];var I=this.gl;return this.bind(),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,this._wrapS),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,this._wrapT),L}},shape:{get:function(){return this._shapeVector},set:function(L){if(!Array.isArray(L))L=[L|0,L|0];else if(L.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return s(this,L[0]|0,L[1]|0),[L[0]|0,L[1]|0]}},width:{get:function(){return this._shape[0]},set:function(L){return L=L|0,s(this,L,this._shape[1]),L}},height:{get:function(){return this._shape[1]},set:function(L){return L=L|0,s(this,this._shape[0],L),L}}}),c.bind=function(L){var w=this.gl;return L!==void 0&&w.activeTexture(w.TEXTURE0+(L|0)),w.bindTexture(w.TEXTURE_2D,this.handle),L!==void 0?L|0:w.getParameter(w.ACTIVE_TEXTURE)-w.TEXTURE0},c.dispose=function(){this.gl.deleteTexture(this.handle)},c.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var L=Math.min(this._shape[0],this._shape[1]),w=0;L>0;++w,L>>>=1)this._mipLevels.indexOf(w)<0&&this._mipLevels.push(w)},c.setPixels=function(L,w,I,z){var B=this.gl;this.bind(),Array.isArray(w)?(z=I,I=w[1]|0,w=w[0]|0):(w=w||0,I=I||0),z=z||0;var O=p(L)?L:L.raw;if(O){var R=this._mipLevels.indexOf(z)<0;R?(B.texImage2D(B.TEXTURE_2D,0,this.format,this.format,this.type,O),this._mipLevels.push(z)):B.texSubImage2D(B.TEXTURE_2D,z,w,I,this.format,this.type,O)}else if(L.shape&&L.stride&&L.data){if(L.shape.length<2||w+L.shape[1]>this._shape[1]>>>z||I+L.shape[0]>this._shape[0]>>>z||w<0||I<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");k(B,w,I,z,this.format,this.type,this._mipLevels,L)}else throw new Error("gl-texture2d: Unsupported data type")};function T(L,w){return L.length===3?w[2]===1&&w[1]===L[0]*L[2]&&w[0]===L[2]:w[0]===1&&w[1]===L[0]}function k(L,w,I,z,B,O,R,C){var F=C.dtype,N=C.shape.slice();if(N.length<2||N.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var V=0,K=0,Q=T(N,C.stride.slice());if(F==="float32"?V=L.FLOAT:F==="float64"?(V=L.FLOAT,Q=!1,F="float32"):F==="uint8"?V=L.UNSIGNED_BYTE:(V=L.UNSIGNED_BYTE,Q=!1,F="uint8"),N.length===2)K=L.LUMINANCE,N=[N[0],N[1],1],C=r(C.data,N,[C.stride[0],C.stride[1],1],C.offset);else if(N.length===3){if(N[2]===1)K=L.ALPHA;else if(N[2]===2)K=L.LUMINANCE_ALPHA;else if(N[2]===3)K=L.RGB;else if(N[2]===4)K=L.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");N[2]}else throw new Error("gl-texture2d: Invalid shape for texture");if((K===L.LUMINANCE||K===L.ALPHA)&&(B===L.LUMINANCE||B===L.ALPHA)&&(K=B),K!==B)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var at=C.size,it=R.indexOf(z)<0;if(it&&R.push(z),V===O&&Q)C.offset===0&&C.data.length===at?it?L.texImage2D(L.TEXTURE_2D,z,B,N[0],N[1],0,B,O,C.data):L.texSubImage2D(L.TEXTURE_2D,z,w,I,N[0],N[1],B,O,C.data):it?L.texImage2D(L.TEXTURE_2D,z,B,N[0],N[1],0,B,O,C.data.subarray(C.offset,C.offset+at)):L.texSubImage2D(L.TEXTURE_2D,z,w,I,N[0],N[1],B,O,C.data.subarray(C.offset,C.offset+at));else{var q;O===L.FLOAT?q=n.mallocFloat32(at):q=n.mallocUint8(at);var W=r(q,N,[N[2],N[2]*N[0],1]);V===L.FLOAT&&O===L.UNSIGNED_BYTE?x(W,C):f.assign(W,C),it?L.texImage2D(L.TEXTURE_2D,z,B,N[0],N[1],0,B,O,q.subarray(0,at)):L.texSubImage2D(L.TEXTURE_2D,z,w,I,N[0],N[1],B,O,q.subarray(0,at)),O===L.FLOAT?n.freeFloat32(q):n.freeUint8(q)}}function _(L){var w=L.createTexture();return L.bindTexture(L.TEXTURE_2D,w),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MIN_FILTER,L.NEAREST),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MAG_FILTER,L.NEAREST),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,L.CLAMP_TO_EDGE),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,L.CLAMP_TO_EDGE),w}function b(L,w,I,z,B){var O=L.getParameter(L.MAX_TEXTURE_SIZE);if(w<0||w>O||I<0||I>O)throw new Error("gl-texture2d: Invalid texture shape");if(B===L.FLOAT&&!L.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var R=_(L);return L.texImage2D(L.TEXTURE_2D,0,z,w,I,0,z,B,null),new u(L,R,w,I,z,B)}function P(L,w,I,z,B,O){var R=_(L);return L.texImage2D(L.TEXTURE_2D,0,B,B,O,w),new u(L,R,I,z,B,O)}function l(L,w){var I=w.dtype,z=w.shape.slice(),B=L.getParameter(L.MAX_TEXTURE_SIZE);if(z[0]<0||z[0]>B||z[1]<0||z[1]>B)throw new Error("gl-texture2d: Invalid texture size");var O=T(z,w.stride.slice()),R=0;I==="float32"?R=L.FLOAT:I==="float64"?(R=L.FLOAT,O=!1,I="float32"):I==="uint8"?R=L.UNSIGNED_BYTE:(R=L.UNSIGNED_BYTE,O=!1,I="uint8");var C=0;if(z.length===2)C=L.LUMINANCE,z=[z[0],z[1],1],w=r(w.data,z,[w.stride[0],w.stride[1],1],w.offset);else if(z.length===3)if(z[2]===1)C=L.ALPHA;else if(z[2]===2)C=L.LUMINANCE_ALPHA;else if(z[2]===3)C=L.RGB;else if(z[2]===4)C=L.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");R===L.FLOAT&&!L.getExtension("OES_texture_float")&&(R=L.UNSIGNED_BYTE,O=!1);var F,N,V=w.size;if(O)w.offset===0&&w.data.length===V?F=w.data:F=w.data.subarray(w.offset,w.offset+V);else{var K=[z[2],z[2]*z[0],1];N=n.malloc(V,I);var Q=r(N,z,K,0);(I==="float32"||I==="float64")&&R===L.UNSIGNED_BYTE?x(Q,w):f.assign(Q,w),F=N.subarray(0,V)}var at=_(L);return L.texImage2D(L.TEXTURE_2D,0,C,z[0],z[1],0,C,R,F),O||n.free(N),new u(L,at,z[0],z[1],C,R)}function d(L){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(a||y(L),typeof arguments[1]=="number")return b(L,arguments[1],arguments[2],arguments[3]||L.RGBA,arguments[4]||L.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return b(L,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||L.RGBA,arguments[3]||L.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var w=arguments[1],I=p(w)?w:w.raw;if(I)return P(L,I,w.width|0,w.height|0,arguments[2]||L.RGBA,arguments[3]||L.UNSIGNED_BYTE);if(w.shape&&w.data&&w.stride)return l(L,w)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},3056:function(g){function v(e,r,f){r?r.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var n=e.getParameter(e.MAX_VERTEX_ATTRIBS)|0;if(f){if(f.length>n)throw new Error("gl-vao: Too many vertex attributes");for(var a=0;a<f.length;++a){var o=f[a];if(o.buffer){var h=o.buffer,y=o.size||4,p=o.type||e.FLOAT,x=!!o.normalized,s=o.stride||0,u=o.offset||0;h.bind(),e.enableVertexAttribArray(a),e.vertexAttribPointer(a,y,p,x,s,u)}else{if(typeof o=="number")e.vertexAttrib1f(a,o);else if(o.length===1)e.vertexAttrib1f(a,o[0]);else if(o.length===2)e.vertexAttrib2f(a,o[0],o[1]);else if(o.length===3)e.vertexAttrib3f(a,o[0],o[1],o[2]);else if(o.length===4)e.vertexAttrib4f(a,o[0],o[1],o[2],o[3]);else throw new Error("gl-vao: Invalid vertex attribute");e.disableVertexAttribArray(a)}}for(;a<n;++a)e.disableVertexAttribArray(a)}else{e.bindBuffer(e.ARRAY_BUFFER,null);for(var a=0;a<n;++a)e.disableVertexAttribArray(a)}}g.exports=v},7220:function(g,v,e){var r=e(3056);function f(a){this.gl=a,this._elements=null,this._attributes=null,this._elementsType=a.UNSIGNED_SHORT}f.prototype.bind=function(){r(this.gl,this._elements,this._attributes)},f.prototype.update=function(a,o,h){this._elements=o,this._attributes=a,this._elementsType=h||this.gl.UNSIGNED_SHORT},f.prototype.dispose=function(){},f.prototype.unbind=function(){},f.prototype.draw=function(a,o,h){h=h||0;var y=this.gl;this._elements?y.drawElements(a,o,this._elementsType,h):y.drawArrays(a,h,o)};function n(a){return new f(a)}g.exports=n},3778:function(g,v,e){var r=e(3056);function f(o,h,y,p,x,s){this.location=o,this.dimension=h,this.a=y,this.b=p,this.c=x,this.d=s}f.prototype.bind=function(o){switch(this.dimension){case 1:o.vertexAttrib1f(this.location,this.a);break;case 2:o.vertexAttrib2f(this.location,this.a,this.b);break;case 3:o.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:o.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function n(o,h,y){this.gl=o,this._ext=h,this.handle=y,this._attribs=[],this._useElements=!1,this._elementsType=o.UNSIGNED_SHORT}n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var o=0;o<this._attribs.length;++o)this._attribs[o].bind(this.gl)},n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},n.prototype.update=function(o,h,y){if(this.bind(),r(this.gl,h,o),this.unbind(),this._attribs.length=0,o)for(var p=0;p<o.length;++p){var x=o[p];typeof x=="number"?this._attribs.push(new f(p,1,x)):Array.isArray(x)&&this._attribs.push(new f(p,x.length,x[0],x[1],x[2],x[3]))}this._useElements=!!h,this._elementsType=y||this.gl.UNSIGNED_SHORT},n.prototype.draw=function(o,h,y){y=y||0;var p=this.gl;this._useElements?p.drawElements(o,h,this._elementsType,y):p.drawArrays(o,y,h)};function a(o,h){return new n(o,h,h.createVertexArrayOES())}g.exports=a},2944:function(g,v,e){var r=e(3778),f=e(7220);function n(o){this.bindVertexArrayOES=o.bindVertexArray.bind(o),this.createVertexArrayOES=o.createVertexArray.bind(o),this.deleteVertexArrayOES=o.deleteVertexArray.bind(o)}function a(o,h,y,p){var x=o.createVertexArray?new n(o):o.getExtension("OES_vertex_array_object"),s;return x?s=r(o,x):s=f(o),s.update(h,y,p),s}g.exports=a},2598:function(g){g.exports=v;function v(e,r,f){return e[0]=r[0]+f[0],e[1]=r[1]+f[1],e[2]=r[2]+f[2],e}},5879:function(g,v,e){g.exports=a;var r=e(5415),f=e(899),n=e(9305);function a(o,h){var y=r(o[0],o[1],o[2]),p=r(h[0],h[1],h[2]);f(y,y),f(p,p);var x=n(y,p);return x>1?0:Math.acos(x)}},8827:function(g){g.exports=v;function v(e,r){return e[0]=Math.ceil(r[0]),e[1]=Math.ceil(r[1]),e[2]=Math.ceil(r[2]),e}},7622:function(g){g.exports=v;function v(e){var r=new Float32Array(3);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}},8782:function(g){g.exports=v;function v(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}},8501:function(g){g.exports=v;function v(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},903:function(g){g.exports=v;function v(e,r,f){var n=r[0],a=r[1],o=r[2],h=f[0],y=f[1],p=f[2];return e[0]=a*p-o*y,e[1]=o*h-n*p,e[2]=n*y-a*h,e}},5981:function(g,v,e){g.exports=e(8288)},8288:function(g){g.exports=v;function v(e,r){var f=r[0]-e[0],n=r[1]-e[1],a=r[2]-e[2];return Math.sqrt(f*f+n*n+a*a)}},8629:function(g,v,e){g.exports=e(7979)},7979:function(g){g.exports=v;function v(e,r,f){return e[0]=r[0]/f[0],e[1]=r[1]/f[1],e[2]=r[2]/f[2],e}},9305:function(g){g.exports=v;function v(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}},154:function(g){g.exports=1e-6},4932:function(g,v,e){g.exports=f;var r=e(154);function f(n,a){var o=n[0],h=n[1],y=n[2],p=a[0],x=a[1],s=a[2];return Math.abs(o-p)<=r*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(h-x)<=r*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(y-s)<=r*Math.max(1,Math.abs(y),Math.abs(s))}},5777:function(g){g.exports=v;function v(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]}},3306:function(g){g.exports=v;function v(e,r){return e[0]=Math.floor(r[0]),e[1]=Math.floor(r[1]),e[2]=Math.floor(r[2]),e}},7447:function(g,v,e){g.exports=f;var r=e(8501)();function f(n,a,o,h,y,p){var x,s;for(a||(a=3),o||(o=0),h?s=Math.min(h*a+o,n.length):s=n.length,x=o;x<s;x+=a)r[0]=n[x],r[1]=n[x+1],r[2]=n[x+2],y(r,r,p),n[x]=r[0],n[x+1]=r[1],n[x+2]=r[2];return n}},5415:function(g){g.exports=v;function v(e,r,f){var n=new Float32Array(3);return n[0]=e,n[1]=r,n[2]=f,n}},2858:function(g,v,e){g.exports={EPSILON:e(154),create:e(8501),clone:e(7622),angle:e(5879),fromValues:e(5415),copy:e(8782),set:e(831),equals:e(4932),exactEquals:e(5777),add:e(2598),subtract:e(911),sub:e(8921),multiply:e(105),mul:e(5733),divide:e(7979),div:e(8629),min:e(3605),max:e(1716),floor:e(3306),ceil:e(8827),round:e(1624),scale:e(5685),scaleAndAdd:e(6722),distance:e(8288),dist:e(5981),squaredDistance:e(6403),sqrDist:e(5294),length:e(4693),len:e(1468),squaredLength:e(4337),sqrLen:e(3303),negate:e(435),inverse:e(2073),normalize:e(899),dot:e(9305),cross:e(903),lerp:e(1868),random:e(6660),transformMat4:e(3255),transformMat3:e(9908),transformQuat:e(6568),rotateX:e(392),rotateY:e(3222),rotateZ:e(3388),forEach:e(7447)}},2073:function(g){g.exports=v;function v(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e}},1468:function(g,v,e){g.exports=e(4693)},4693:function(g){g.exports=v;function v(e){var r=e[0],f=e[1],n=e[2];return Math.sqrt(r*r+f*f+n*n)}},1868:function(g){g.exports=v;function v(e,r,f,n){var a=r[0],o=r[1],h=r[2];return e[0]=a+n*(f[0]-a),e[1]=o+n*(f[1]-o),e[2]=h+n*(f[2]-h),e}},1716:function(g){g.exports=v;function v(e,r,f){return e[0]=Math.max(r[0],f[0]),e[1]=Math.max(r[1],f[1]),e[2]=Math.max(r[2],f[2]),e}},3605:function(g){g.exports=v;function v(e,r,f){return e[0]=Math.min(r[0],f[0]),e[1]=Math.min(r[1],f[1]),e[2]=Math.min(r[2],f[2]),e}},5733:function(g,v,e){g.exports=e(105)},105:function(g){g.exports=v;function v(e,r,f){return e[0]=r[0]*f[0],e[1]=r[1]*f[1],e[2]=r[2]*f[2],e}},435:function(g){g.exports=v;function v(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e}},899:function(g){g.exports=v;function v(e,r){var f=r[0],n=r[1],a=r[2],o=f*f+n*n+a*a;return o>0&&(o=1/Math.sqrt(o),e[0]=r[0]*o,e[1]=r[1]*o,e[2]=r[2]*o),e}},6660:function(g){g.exports=v;function v(e,r){r=r||1;var f=Math.random()*2*Math.PI,n=Math.random()*2-1,a=Math.sqrt(1-n*n)*r;return e[0]=Math.cos(f)*a,e[1]=Math.sin(f)*a,e[2]=n*r,e}},392:function(g){g.exports=v;function v(e,r,f,n){var a=f[1],o=f[2],h=r[1]-a,y=r[2]-o,p=Math.sin(n),x=Math.cos(n);return e[0]=r[0],e[1]=a+h*x-y*p,e[2]=o+h*p+y*x,e}},3222:function(g){g.exports=v;function v(e,r,f,n){var a=f[0],o=f[2],h=r[0]-a,y=r[2]-o,p=Math.sin(n),x=Math.cos(n);return e[0]=a+y*p+h*x,e[1]=r[1],e[2]=o+y*x-h*p,e}},3388:function(g){g.exports=v;function v(e,r,f,n){var a=f[0],o=f[1],h=r[0]-a,y=r[1]-o,p=Math.sin(n),x=Math.cos(n);return e[0]=a+h*x-y*p,e[1]=o+h*p+y*x,e[2]=r[2],e}},1624:function(g){g.exports=v;function v(e,r){return e[0]=Math.round(r[0]),e[1]=Math.round(r[1]),e[2]=Math.round(r[2]),e}},5685:function(g){g.exports=v;function v(e,r,f){return e[0]=r[0]*f,e[1]=r[1]*f,e[2]=r[2]*f,e}},6722:function(g){g.exports=v;function v(e,r,f,n){return e[0]=r[0]+f[0]*n,e[1]=r[1]+f[1]*n,e[2]=r[2]+f[2]*n,e}},831:function(g){g.exports=v;function v(e,r,f,n){return e[0]=r,e[1]=f,e[2]=n,e}},5294:function(g,v,e){g.exports=e(6403)},3303:function(g,v,e){g.exports=e(4337)},6403:function(g){g.exports=v;function v(e,r){var f=r[0]-e[0],n=r[1]-e[1],a=r[2]-e[2];return f*f+n*n+a*a}},4337:function(g){g.exports=v;function v(e){var r=e[0],f=e[1],n=e[2];return r*r+f*f+n*n}},8921:function(g,v,e){g.exports=e(911)},911:function(g){g.exports=v;function v(e,r,f){return e[0]=r[0]-f[0],e[1]=r[1]-f[1],e[2]=r[2]-f[2],e}},9908:function(g){g.exports=v;function v(e,r,f){var n=r[0],a=r[1],o=r[2];return e[0]=n*f[0]+a*f[3]+o*f[6],e[1]=n*f[1]+a*f[4]+o*f[7],e[2]=n*f[2]+a*f[5]+o*f[8],e}},3255:function(g){g.exports=v;function v(e,r,f){var n=r[0],a=r[1],o=r[2],h=f[3]*n+f[7]*a+f[11]*o+f[15];return h=h||1,e[0]=(f[0]*n+f[4]*a+f[8]*o+f[12])/h,e[1]=(f[1]*n+f[5]*a+f[9]*o+f[13])/h,e[2]=(f[2]*n+f[6]*a+f[10]*o+f[14])/h,e}},6568:function(g){g.exports=v;function v(e,r,f){var n=r[0],a=r[1],o=r[2],h=f[0],y=f[1],p=f[2],x=f[3],s=x*n+y*o-p*a,u=x*a+p*n-h*o,c=x*o+h*a-y*n,T=-h*n-y*a-p*o;return e[0]=s*x+T*-h+u*-p-c*-y,e[1]=u*x+T*-y+c*-h-s*-p,e[2]=c*x+T*-p+s*-y-u*-h,e}},3433:function(g){g.exports=v;function v(e,r,f){return e[0]=r[0]+f[0],e[1]=r[1]+f[1],e[2]=r[2]+f[2],e[3]=r[3]+f[3],e}},1413:function(g){g.exports=v;function v(e){var r=new Float32Array(4);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}},3470:function(g){g.exports=v;function v(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}},5313:function(g){g.exports=v;function v(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},5446:function(g){g.exports=v;function v(e,r){var f=r[0]-e[0],n=r[1]-e[1],a=r[2]-e[2],o=r[3]-e[3];return Math.sqrt(f*f+n*n+a*a+o*o)}},205:function(g){g.exports=v;function v(e,r,f){return e[0]=r[0]/f[0],e[1]=r[1]/f[1],e[2]=r[2]/f[2],e[3]=r[3]/f[3],e}},4242:function(g){g.exports=v;function v(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3]}},5680:function(g){g.exports=v;function v(e,r,f,n){var a=new Float32Array(4);return a[0]=e,a[1]=r,a[2]=f,a[3]=n,a}},4020:function(g,v,e){g.exports={create:e(5313),clone:e(1413),fromValues:e(5680),copy:e(3470),set:e(6453),add:e(3433),subtract:e(2705),multiply:e(746),divide:e(205),min:e(2170),max:e(3030),scale:e(5510),scaleAndAdd:e(4224),distance:e(5446),squaredDistance:e(1542),length:e(8177),squaredLength:e(9037),negate:e(6459),inverse:e(8057),normalize:e(381),dot:e(4242),lerp:e(8746),random:e(3770),transformMat4:e(6342),transformQuat:e(5022)}},8057:function(g){g.exports=v;function v(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e[3]=1/r[3],e}},8177:function(g){g.exports=v;function v(e){var r=e[0],f=e[1],n=e[2],a=e[3];return Math.sqrt(r*r+f*f+n*n+a*a)}},8746:function(g){g.exports=v;function v(e,r,f,n){var a=r[0],o=r[1],h=r[2],y=r[3];return e[0]=a+n*(f[0]-a),e[1]=o+n*(f[1]-o),e[2]=h+n*(f[2]-h),e[3]=y+n*(f[3]-y),e}},3030:function(g){g.exports=v;function v(e,r,f){return e[0]=Math.max(r[0],f[0]),e[1]=Math.max(r[1],f[1]),e[2]=Math.max(r[2],f[2]),e[3]=Math.max(r[3],f[3]),e}},2170:function(g){g.exports=v;function v(e,r,f){return e[0]=Math.min(r[0],f[0]),e[1]=Math.min(r[1],f[1]),e[2]=Math.min(r[2],f[2]),e[3]=Math.min(r[3],f[3]),e}},746:function(g){g.exports=v;function v(e,r,f){return e[0]=r[0]*f[0],e[1]=r[1]*f[1],e[2]=r[2]*f[2],e[3]=r[3]*f[3],e}},6459:function(g){g.exports=v;function v(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e[3]=-r[3],e}},381:function(g){g.exports=v;function v(e,r){var f=r[0],n=r[1],a=r[2],o=r[3],h=f*f+n*n+a*a+o*o;return h>0&&(h=1/Math.sqrt(h),e[0]=f*h,e[1]=n*h,e[2]=a*h,e[3]=o*h),e}},3770:function(g,v,e){var r=e(381),f=e(5510);g.exports=n;function n(a,o){return o=o||1,a[0]=Math.random(),a[1]=Math.random(),a[2]=Math.random(),a[3]=Math.random(),r(a,a),f(a,a,o),a}},5510:function(g){g.exports=v;function v(e,r,f){return e[0]=r[0]*f,e[1]=r[1]*f,e[2]=r[2]*f,e[3]=r[3]*f,e}},4224:function(g){g.exports=v;function v(e,r,f,n){return e[0]=r[0]+f[0]*n,e[1]=r[1]+f[1]*n,e[2]=r[2]+f[2]*n,e[3]=r[3]+f[3]*n,e}},6453:function(g){g.exports=v;function v(e,r,f,n,a){return e[0]=r,e[1]=f,e[2]=n,e[3]=a,e}},1542:function(g){g.exports=v;function v(e,r){var f=r[0]-e[0],n=r[1]-e[1],a=r[2]-e[2],o=r[3]-e[3];return f*f+n*n+a*a+o*o}},9037:function(g){g.exports=v;function v(e){var r=e[0],f=e[1],n=e[2],a=e[3];return r*r+f*f+n*n+a*a}},2705:function(g){g.exports=v;function v(e,r,f){return e[0]=r[0]-f[0],e[1]=r[1]-f[1],e[2]=r[2]-f[2],e[3]=r[3]-f[3],e}},6342:function(g){g.exports=v;function v(e,r,f){var n=r[0],a=r[1],o=r[2],h=r[3];return e[0]=f[0]*n+f[4]*a+f[8]*o+f[12]*h,e[1]=f[1]*n+f[5]*a+f[9]*o+f[13]*h,e[2]=f[2]*n+f[6]*a+f[10]*o+f[14]*h,e[3]=f[3]*n+f[7]*a+f[11]*o+f[15]*h,e}},5022:function(g){g.exports=v;function v(e,r,f){var n=r[0],a=r[1],o=r[2],h=f[0],y=f[1],p=f[2],x=f[3],s=x*n+y*o-p*a,u=x*a+p*n-h*o,c=x*o+h*a-y*n,T=-h*n-y*a-p*o;return e[0]=s*x+T*-h+u*-p-c*-y,e[1]=u*x+T*-y+c*-h-s*-p,e[2]=c*x+T*-p+s*-y-u*-h,e[3]=r[3],e}},9365:function(g,v,e){var r=e(8096),f=e(7896);g.exports=n;function n(a){for(var o=Array.isArray(a)?a:r(a),h=0;h<o.length;h++){var y=o[h];if(y.type==="preprocessor"){var p=y.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(p&&p[2]){var x=p[1],s=p[2];return(x?f(s):s).trim()}}}}},3193:function(g,v,e){g.exports=w;var r=e(399),f=e(9746),n=e(9525),a=e(9458),o=e(3585),h=999,y=9999,p=0,x=1,s=2,u=3,c=4,T=5,k=6,_=7,b=8,P=9,l=10,d=11,L=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function w(I){var z=0,B=0,O=h,R,C,F=[],N=[],V=1,K=0,Q=0,at=!1,it=!1,q="",W;I=I||{};var Z=n,G=r;I.version==="300 es"&&(Z=o,G=a);for(var et={},nt={},z=0;z<Z.length;z++)et[Z[z]]=!0;for(var z=0;z<G.length;z++)nt[G[z]]=!0;return function(Bt){return N=[],Bt!==null?Y(Bt):ot()};function X(Bt){Bt.length&&N.push({type:L[O],data:Bt,position:Q,line:V,column:K})}function Y(Bt){z=0,Bt.toString&&(Bt=Bt.toString()),q+=Bt.replace(/\r\n/g,`
`),W=q.length;for(var kt;R=q[z],z<W;){switch(kt=z,O){case p:z=xt();break;case x:z=yt();break;case s:z=pt();break;case u:z=Ft();break;case c:z=gt();break;case d:z=mt();break;case T:z=wt();break;case y:z=Pt();break;case P:z=ht();break;case h:z=rt();break}if(kt!==z)switch(q[kt]){case`
`:K=0,++V;break;default:++K;break}}return B+=z,q=q.slice(z),N}function ot(Bt){return F.length&&X(F.join("")),O=l,X("(eof)"),N}function rt(){return F=F.length?[]:F,C==="/"&&R==="*"?(Q=B+z-1,O=p,C=R,z+1):C==="/"&&R==="/"?(Q=B+z-1,O=x,C=R,z+1):R==="#"?(O=s,Q=B+z,z):/\s/.test(R)?(O=P,Q=B+z,z):(at=/\d/.test(R),it=/[^\w_]/.test(R),Q=B+z,O=at?c:it?u:y,z)}function ht(){return/[^\s]/g.test(R)?(X(F.join("")),O=h,z):(F.push(R),C=R,z+1)}function pt(){return(R==="\r"||R===`
`)&&C!=="\\"?(X(F.join("")),O=h,z):(F.push(R),C=R,z+1)}function yt(){return pt()}function xt(){return R==="/"&&C==="*"?(F.push(R),X(F.join("")),O=h,z+1):(F.push(R),C=R,z+1)}function Ft(){if(C==="."&&/\d/.test(R))return O=T,z;if(C==="/"&&R==="*")return O=p,z;if(C==="/"&&R==="/")return O=x,z;if(R==="."&&F.length){for(;Et(F););return O=T,z}if(R===";"||R===")"||R==="("){if(F.length)for(;Et(F););return X(R),O=h,z+1}var Bt=F.length===2&&R!=="=";if(/[\w_\d\s]/.test(R)||Bt){for(;Et(F););return O=h,z}return F.push(R),C=R,z+1}function Et(Bt){var kt=0,jt,Ht;do{if(jt=f.indexOf(Bt.slice(0,Bt.length+kt).join("")),Ht=f[jt],jt===-1){if(kt--+Bt.length>0)continue;Ht=Bt.slice(0,1).join("")}return X(Ht),Q+=Ht.length,F=F.slice(Ht.length),F.length}while(1)}function mt(){return/[^a-fA-F0-9]/.test(R)?(X(F.join("")),O=h,z):(F.push(R),C=R,z+1)}function gt(){return R==="."||/[eE]/.test(R)?(F.push(R),O=T,C=R,z+1):R==="x"&&F.length===1&&F[0]==="0"?(O=d,F.push(R),C=R,z+1):/[^\d]/.test(R)?(X(F.join("")),O=h,z):(F.push(R),C=R,z+1)}function wt(){return R==="f"&&(F.push(R),C=R,z+=1),/[eE]/.test(R)||(R==="-"||R==="+")&&/[eE]/.test(C)?(F.push(R),C=R,z+1):/[^\d]/.test(R)?(X(F.join("")),O=h,z):(F.push(R),C=R,z+1)}function Pt(){if(/[^\d\w_]/.test(R)){var Bt=F.join("");return nt[Bt]?O=b:et[Bt]?O=_:O=k,X(F.join("")),O=h,z}return F.push(R),C=R,z+1}}},3585:function(g,v,e){var r=e(9525);r=r.slice().filter(function(f){return!/^(gl\_|texture)/.test(f)}),g.exports=r.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},9525:function(g){g.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},9458:function(g,v,e){var r=e(399);g.exports=r.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},399:function(g){g.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},9746:function(g){g.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},8096:function(g,v,e){var r=e(3193);g.exports=f;function f(n,a){var o=r(a),h=[];return h=h.concat(o(n)),h=h.concat(o(null)),h}},6832:function(g){g.exports=function(v){typeof v=="string"&&(v=[v]);for(var e=[].slice.call(arguments,1),r=[],f=0;f<v.length-1;f++)r.push(v[f],e[f]||"");return r.push(v[f]),r.join("")}},5233:function(g,v,e){var r=e(4846);function f(){var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,a),window.removeEventListener("test",null,a)}catch{n=!1}return n}g.exports=r&&f()},2183:function(g,v,e){g.exports=u;var r=e(417),f=e(8211).H;function n(c,T,k){this.vertices=c,this.adjacent=T,this.boundary=k,this.lastVisited=-1}n.prototype.flip=function(){var c=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=c;var T=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=T};function a(c,T,k){this.vertices=c,this.cell=T,this.index=k}function o(c,T){return f(c.vertices,T.vertices)}function h(c){return function(){var T=this.tuple;return c.apply(this,T)}}function y(c){var T=r[c+1];return T||(T=r),h(T)}var p=[];function x(c,T,k){this.dimension=c,this.vertices=T,this.simplices=k,this.interior=k.filter(function(P){return!P.boundary}),this.tuple=new Array(c+1);for(var _=0;_<=c;++_)this.tuple[_]=this.vertices[_];var b=p[c];b||(b=p[c]=y(c)),this.orient=b}var s=x.prototype;s.handleBoundaryDegeneracy=function(c,T){var k=this.dimension,_=this.vertices.length-1,b=this.tuple,P=this.vertices,l=[c];for(c.lastVisited=-_;l.length>0;){c=l.pop();for(var d=c.adjacent,L=0;L<=k;++L){var w=d[L];if(!(!w.boundary||w.lastVisited<=-_)){for(var I=w.vertices,z=0;z<=k;++z){var B=I[z];B<0?b[z]=T:b[z]=P[B]}var O=this.orient();if(O>0)return w;w.lastVisited=-_,O===0&&l.push(w)}}}return null},s.walk=function(c,T){var k=this.vertices.length-1,_=this.dimension,b=this.vertices,P=this.tuple,l=T?this.interior.length*Math.random()|0:this.interior.length-1,d=this.interior[l];t:for(;!d.boundary;){for(var L=d.vertices,w=d.adjacent,I=0;I<=_;++I)P[I]=b[L[I]];d.lastVisited=k;for(var I=0;I<=_;++I){var z=w[I];if(!(z.lastVisited>=k)){var B=P[I];P[I]=c;var O=this.orient();if(P[I]=B,O<0){d=z;continue t}else z.boundary?z.lastVisited=-k:z.lastVisited=k}}return}return d},s.addPeaks=function(c,T){var k=this.vertices.length-1,_=this.dimension,b=this.vertices,P=this.tuple,l=this.interior,d=this.simplices,L=[T];T.lastVisited=k,T.vertices[T.vertices.indexOf(-1)]=k,T.boundary=!1,l.push(T);for(var w=[];L.length>0;){var T=L.pop(),I=T.vertices,z=T.adjacent,B=I.indexOf(k);if(!(B<0)){for(var O=0;O<=_;++O)if(O!==B){var R=z[O];if(!(!R.boundary||R.lastVisited>=k)){var C=R.vertices;if(R.lastVisited!==-k){for(var F=0,N=0;N<=_;++N)C[N]<0?(F=N,P[N]=c):P[N]=b[C[N]];var V=this.orient();if(V>0){C[F]=k,R.boundary=!1,l.push(R),L.push(R),R.lastVisited=k;continue}else R.lastVisited=-k}var K=R.adjacent,Q=I.slice(),at=z.slice(),it=new n(Q,at,!0);d.push(it);var q=K.indexOf(T);if(!(q<0)){K[q]=it,at[B]=R,Q[O]=-1,at[O]=T,z[O]=it,it.flip();for(var N=0;N<=_;++N){var W=Q[N];if(!(W<0||W===k)){for(var Z=new Array(_-1),G=0,et=0;et<=_;++et){var nt=Q[et];nt<0||et===N||(Z[G++]=nt)}w.push(new a(Z,it,N))}}}}}}}w.sort(o);for(var O=0;O+1<w.length;O+=2){var X=w[O],Y=w[O+1],ot=X.index,rt=Y.index;ot<0||rt<0||(X.cell.adjacent[X.index]=Y.cell,Y.cell.adjacent[Y.index]=X.cell)}},s.insert=function(c,T){var k=this.vertices;k.push(c);var _=this.walk(c,T);if(_){for(var b=this.dimension,P=this.tuple,l=0;l<=b;++l){var d=_.vertices[l];d<0?P[l]=c:P[l]=k[d]}var L=this.orient(P);L<0||L===0&&(_=this.handleBoundaryDegeneracy(_,c),!_)||this.addPeaks(c,_)}},s.boundary=function(){for(var c=this.dimension,T=[],k=this.simplices,_=k.length,b=0;b<_;++b){var P=k[b];if(P.boundary){for(var l=new Array(c),d=P.vertices,L=0,w=0,I=0;I<=c;++I)d[I]>=0?l[L++]=d[I]:w=I&1;if(w===(c&1)){var z=l[0];l[0]=l[1],l[1]=z}T.push(l)}}return T};function u(c,T){var k=c.length;if(k===0)throw new Error("Must have at least d+1 points");var _=c[0].length;if(k<=_)throw new Error("Must input at least d+1 points");var b=c.slice(0,_+1),P=r.apply(void 0,b);if(P===0)throw new Error("Input not in general position");for(var l=new Array(_+1),d=0;d<=_;++d)l[d]=d;P<0&&(l[0]=1,l[1]=0);for(var L=new n(l,new Array(_+1),!1),w=L.adjacent,I=new Array(_+2),d=0;d<=_;++d){for(var z=l.slice(),B=0;B<=_;++B)B===d&&(z[B]=-1);var O=z[0];z[0]=z[1],z[1]=O;var R=new n(z,new Array(_+1),!0);w[d]=R,I[d]=R}I[_+1]=L;for(var d=0;d<=_;++d)for(var z=w[d].vertices,C=w[d].adjacent,B=0;B<=_;++B){var F=z[B];if(F<0){C[B]=L;continue}for(var N=0;N<=_;++N)w[N].vertices.indexOf(F)<0&&(C[B]=w[N])}for(var V=new x(_,b,I),K=!!T,d=_+1;d<k;++d)V.insert(c[d],K);return V.boundary()}},9014:function(g,v,e){var r=e(5070),f=0,n=1,a=2;g.exports=L;function o(w,I,z,B,O){this.mid=w,this.left=I,this.right=z,this.leftPoints=B,this.rightPoints=O,this.count=(I?I.count:0)+(z?z.count:0)+B.length}var h=o.prototype;function y(w,I){w.mid=I.mid,w.left=I.left,w.right=I.right,w.leftPoints=I.leftPoints,w.rightPoints=I.rightPoints,w.count=I.count}function p(w,I){var z=P(I);w.mid=z.mid,w.left=z.left,w.right=z.right,w.leftPoints=z.leftPoints,w.rightPoints=z.rightPoints,w.count=z.count}function x(w,I){var z=w.intervals([]);z.push(I),p(w,z)}function s(w,I){var z=w.intervals([]),B=z.indexOf(I);return B<0?f:(z.splice(B,1),p(w,z),n)}h.intervals=function(w){return w.push.apply(w,this.leftPoints),this.left&&this.left.intervals(w),this.right&&this.right.intervals(w),w},h.insert=function(w){var I=this.count-this.leftPoints.length;if(this.count+=1,w[1]<this.mid)this.left?4*(this.left.count+1)>3*(I+1)?x(this,w):this.left.insert(w):this.left=P([w]);else if(w[0]>this.mid)this.right?4*(this.right.count+1)>3*(I+1)?x(this,w):this.right.insert(w):this.right=P([w]);else{var z=r.ge(this.leftPoints,w,_),B=r.ge(this.rightPoints,w,b);this.leftPoints.splice(z,0,w),this.rightPoints.splice(B,0,w)}},h.remove=function(w){var I=this.count-this.leftPoints;if(w[1]<this.mid){if(!this.left)return f;var z=this.right?this.right.count:0;if(4*z>3*(I-1))return s(this,w);var B=this.left.remove(w);return B===a?(this.left=null,this.count-=1,n):(B===n&&(this.count-=1),B)}else if(w[0]>this.mid){if(!this.right)return f;var O=this.left?this.left.count:0;if(4*O>3*(I-1))return s(this,w);var B=this.right.remove(w);return B===a?(this.right=null,this.count-=1,n):(B===n&&(this.count-=1),B)}else{if(this.count===1)return this.leftPoints[0]===w?a:f;if(this.leftPoints.length===1&&this.leftPoints[0]===w){if(this.left&&this.right){for(var R=this,C=this.left;C.right;)R=C,C=C.right;if(R===this)C.right=this.right;else{var F=this.left,B=this.right;R.count-=C.count,R.right=C.left,C.left=F,C.right=B}y(this,C),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?y(this,this.left):y(this,this.right);return n}for(var F=r.ge(this.leftPoints,w,_);F<this.leftPoints.length&&this.leftPoints[F][0]===w[0];++F)if(this.leftPoints[F]===w){this.count-=1,this.leftPoints.splice(F,1);for(var B=r.ge(this.rightPoints,w,b);B<this.rightPoints.length&&this.rightPoints[B][1]===w[1];++B)if(this.rightPoints[B]===w)return this.rightPoints.splice(B,1),n}return f}};function u(w,I,z){for(var B=0;B<w.length&&w[B][0]<=I;++B){var O=z(w[B]);if(O)return O}}function c(w,I,z){for(var B=w.length-1;B>=0&&w[B][1]>=I;--B){var O=z(w[B]);if(O)return O}}function T(w,I){for(var z=0;z<w.length;++z){var B=I(w[z]);if(B)return B}}h.queryPoint=function(w,I){if(w<this.mid){if(this.left){var z=this.left.queryPoint(w,I);if(z)return z}return u(this.leftPoints,w,I)}else if(w>this.mid){if(this.right){var z=this.right.queryPoint(w,I);if(z)return z}return c(this.rightPoints,w,I)}else return T(this.leftPoints,I)},h.queryInterval=function(w,I,z){if(w<this.mid&&this.left){var B=this.left.queryInterval(w,I,z);if(B)return B}if(I>this.mid&&this.right){var B=this.right.queryInterval(w,I,z);if(B)return B}return I<this.mid?u(this.leftPoints,I,z):w>this.mid?c(this.rightPoints,w,z):T(this.leftPoints,z)};function k(w,I){return w-I}function _(w,I){var z=w[0]-I[0];return z||w[1]-I[1]}function b(w,I){var z=w[1]-I[1];return z||w[0]-I[0]}function P(w){if(w.length===0)return null;for(var I=[],z=0;z<w.length;++z)I.push(w[z][0],w[z][1]);I.sort(k);for(var B=I[I.length>>1],O=[],R=[],C=[],z=0;z<w.length;++z){var F=w[z];F[1]<B?O.push(F):B<F[0]?R.push(F):C.push(F)}var N=C,V=C.slice();return N.sort(_),V.sort(b),new o(B,P(O),P(R),N,V)}function l(w){this.root=w}var d=l.prototype;d.insert=function(w){this.root?this.root.insert(w):this.root=new o(w[0],null,null,[w],[w])},d.remove=function(w){if(this.root){var I=this.root.remove(w);return I===a&&(this.root=null),I!==f}return!1},d.queryPoint=function(w,I){if(this.root)return this.root.queryPoint(w,I)},d.queryInterval=function(w,I,z){if(w<=I&&this.root)return this.root.queryInterval(w,I,z)},Object.defineProperty(d,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(d,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function L(w){return!w||w.length===0?new l(null):new l(P(w))}},9560:function(g){function v(e){for(var r=new Array(e),f=0;f<e;++f)r[f]=f;return r}g.exports=v},4846:function(g){g.exports=!0},4780:function(g){g.exports=function(r){return r!=null&&(v(r)||e(r)||!!r._isBuffer)};function v(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function e(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&v(r.slice(0,0))}},3596:function(g){g.exports=function(v){for(var e=v.length,r,f=0;f<e;f++)if(r=v.charCodeAt(f),(r<9||r>13)&&r!==32&&r!==133&&r!==160&&r!==5760&&r!==6158&&(r<8192||r>8205)&&r!==8232&&r!==8233&&r!==8239&&r!==8287&&r!==8288&&r!==12288&&r!==65279)return!1;return!0}},3578:function(g){function v(e,r,f){return e*(1-f)+r*f}g.exports=v},7191:function(g,v,e){var r=e(4690),f=e(9823),n=e(7332),a=e(7787),o=e(7437),h=e(2142),y={length:e(4693),normalize:e(899),dot:e(9305),cross:e(903)},p=f(),x=f(),s=[0,0,0,0],u=[[0,0,0],[0,0,0],[0,0,0]],c=[0,0,0];g.exports=function(b,P,l,d,L,w){if(P||(P=[0,0,0]),l||(l=[0,0,0]),d||(d=[0,0,0]),L||(L=[0,0,0,1]),w||(w=[0,0,0,1]),!r(p,b)||(n(x,p),x[3]=0,x[7]=0,x[11]=0,x[15]=1,Math.abs(a(x)<1e-8)))return!1;var I=p[3],z=p[7],B=p[11],O=p[12],R=p[13],C=p[14],F=p[15];if(I!==0||z!==0||B!==0){s[0]=I,s[1]=z,s[2]=B,s[3]=F;var N=o(x,x);if(!N)return!1;h(x,x),T(L,s,x)}else L[0]=L[1]=L[2]=0,L[3]=1;if(P[0]=O,P[1]=R,P[2]=C,k(u,p),l[0]=y.length(u[0]),y.normalize(u[0],u[0]),d[0]=y.dot(u[0],u[1]),_(u[1],u[1],u[0],1,-d[0]),l[1]=y.length(u[1]),y.normalize(u[1],u[1]),d[0]/=l[1],d[1]=y.dot(u[0],u[2]),_(u[2],u[2],u[0],1,-d[1]),d[2]=y.dot(u[1],u[2]),_(u[2],u[2],u[1],1,-d[2]),l[2]=y.length(u[2]),y.normalize(u[2],u[2]),d[1]/=l[2],d[2]/=l[2],y.cross(c,u[1],u[2]),y.dot(u[0],c)<0)for(var V=0;V<3;V++)l[V]*=-1,u[V][0]*=-1,u[V][1]*=-1,u[V][2]*=-1;return w[0]=.5*Math.sqrt(Math.max(1+u[0][0]-u[1][1]-u[2][2],0)),w[1]=.5*Math.sqrt(Math.max(1-u[0][0]+u[1][1]-u[2][2],0)),w[2]=.5*Math.sqrt(Math.max(1-u[0][0]-u[1][1]+u[2][2],0)),w[3]=.5*Math.sqrt(Math.max(1+u[0][0]+u[1][1]+u[2][2],0)),u[2][1]>u[1][2]&&(w[0]=-w[0]),u[0][2]>u[2][0]&&(w[1]=-w[1]),u[1][0]>u[0][1]&&(w[2]=-w[2]),!0};function T(b,P,l){var d=P[0],L=P[1],w=P[2],I=P[3];return b[0]=l[0]*d+l[4]*L+l[8]*w+l[12]*I,b[1]=l[1]*d+l[5]*L+l[9]*w+l[13]*I,b[2]=l[2]*d+l[6]*L+l[10]*w+l[14]*I,b[3]=l[3]*d+l[7]*L+l[11]*w+l[15]*I,b}function k(b,P){b[0][0]=P[0],b[0][1]=P[1],b[0][2]=P[2],b[1][0]=P[4],b[1][1]=P[5],b[1][2]=P[6],b[2][0]=P[8],b[2][1]=P[9],b[2][2]=P[10]}function _(b,P,l,d,L){b[0]=P[0]*d+l[0]*L,b[1]=P[1]*d+l[1]*L,b[2]=P[2]*d+l[2]*L}},4690:function(g){g.exports=function(v,e){var r=e[15];if(r===0)return!1;for(var f=1/r,n=0;n<16;n++)v[n]=e[n]*f;return!0}},7649:function(g,v,e){var r=e(1868),f=e(1102),n=e(7191),a=e(7787),o=e(1116),h=s(),y=s(),p=s();g.exports=x;function x(T,k,_,b){if(a(k)===0||a(_)===0)return!1;var P=n(k,h.translate,h.scale,h.skew,h.perspective,h.quaternion),l=n(_,y.translate,y.scale,y.skew,y.perspective,y.quaternion);return!P||!l?!1:(r(p.translate,h.translate,y.translate,b),r(p.skew,h.skew,y.skew,b),r(p.scale,h.scale,y.scale,b),r(p.perspective,h.perspective,y.perspective,b),o(p.quaternion,h.quaternion,y.quaternion,b),f(T,p.translate,p.scale,p.skew,p.perspective,p.quaternion),!0)}function s(){return{translate:u(),scale:u(1),skew:u(),perspective:c(),quaternion:c()}}function u(T){return[T||0,T||0,T||0]}function c(){return[0,0,0,1]}},1102:function(g,v,e){var r={identity:e(9947),translate:e(998),multiply:e(104),create:e(9823),scale:e(3668),fromRotationTranslation:e(7280)};r.create();var f=r.create();g.exports=function(n,a,o,h,y,p){return r.identity(n),r.fromRotationTranslation(n,p,a),n[3]=y[0],n[7]=y[1],n[11]=y[2],n[15]=y[3],r.identity(f),h[2]!==0&&(f[9]=h[2],r.multiply(n,n,f)),h[1]!==0&&(f[9]=0,f[8]=h[1],r.multiply(n,n,f)),h[0]!==0&&(f[8]=0,f[4]=h[0],r.multiply(n,n,f)),r.scale(n,n,o),n}},9298:function(g,v,e){var r=e(5070),f=e(7649),n=e(7437),a=e(6109),o=e(7115),h=e(5240),y=e(3012),p=e(998);e(3668);var x=e(899),s=[0,0,0];g.exports=k;function u(_){this._components=_.slice(),this._time=[0],this.prevMatrix=_.slice(),this.nextMatrix=_.slice(),this.computedMatrix=_.slice(),this.computedInverse=_.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var c=u.prototype;c.recalcMatrix=function(_){var b=this._time,P=r.le(b,_),l=this.computedMatrix;if(!(P<0)){var d=this._components;if(P===b.length-1)for(var L=16*P,w=0;w<16;++w)l[w]=d[L++];else{for(var I=b[P+1]-b[P],L=16*P,z=this.prevMatrix,B=!0,w=0;w<16;++w)z[w]=d[L++];for(var O=this.nextMatrix,w=0;w<16;++w)O[w]=d[L++],B=B&&z[w]===O[w];if(I<1e-6||B)for(var w=0;w<16;++w)l[w]=z[w];else f(l,z,O,(_-b[P])/I)}var R=this.computedUp;R[0]=l[1],R[1]=l[5],R[2]=l[9],x(R,R);var C=this.computedInverse;n(C,l);var F=this.computedEye,N=C[15];F[0]=C[12]/N,F[1]=C[13]/N,F[2]=C[14]/N;for(var V=this.computedCenter,K=Math.exp(this.computedRadius[0]),w=0;w<3;++w)V[w]=F[w]-l[2+4*w]*K}},c.idle=function(_){if(!(_<this.lastT())){for(var b=this._components,P=b.length-16,l=0;l<16;++l)b.push(b[P++]);this._time.push(_)}},c.flush=function(_){var b=r.gt(this._time,_)-2;b<0||(this._time.splice(0,b),this._components.splice(0,16*b))},c.lastT=function(){return this._time[this._time.length-1]},c.lookAt=function(_,b,P,l){this.recalcMatrix(_),b=b||this.computedEye,P=P||s,l=l||this.computedUp,this.setMatrix(_,y(this.computedMatrix,b,P,l));for(var d=0,L=0;L<3;++L)d+=Math.pow(P[L]-b[L],2);d=Math.log(Math.sqrt(d)),this.computedRadius[0]=d},c.rotate=function(_,b,P,l){this.recalcMatrix(_);var d=this.computedInverse;b&&o(d,d,b),P&&a(d,d,P),l&&h(d,d,l),this.setMatrix(_,n(this.computedMatrix,d))};var T=[0,0,0];c.pan=function(_,b,P,l){T[0]=-(b||0),T[1]=-(P||0),T[2]=-(l||0),this.recalcMatrix(_);var d=this.computedInverse;p(d,d,T),this.setMatrix(_,n(d,d))},c.translate=function(_,b,P,l){T[0]=b||0,T[1]=P||0,T[2]=l||0,this.recalcMatrix(_);var d=this.computedMatrix;p(d,d,T),this.setMatrix(_,d)},c.setMatrix=function(_,b){if(!(_<this.lastT())){this._time.push(_);for(var P=0;P<16;++P)this._components.push(b[P])}},c.setDistance=function(_,b){this.computedRadius[0]=b},c.setDistanceLimits=function(_,b){var P=this._limits;P[0]=_,P[1]=b},c.getDistanceLimits=function(_){var b=this._limits;return _?(_[0]=b[0],_[1]=b[1],_):b};function k(_){_=_||{};var b=_.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new u(b)}},3266:function(g,v,e){g.exports=f;var r=e(417)[3];function f(n){var a=n.length;if(a<3){for(var o=new Array(a),h=0;h<a;++h)o[h]=h;return a===2&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:o}for(var y=new Array(a),h=0;h<a;++h)y[h]=h;y.sort(function(b,P){var l=n[b][0]-n[P][0];return l||n[b][1]-n[P][1]});for(var p=[y[0],y[1]],x=[y[0],y[1]],h=2;h<a;++h){for(var s=y[h],u=n[s],c=p.length;c>1&&r(n[p[c-2]],n[p[c-1]],u)<=0;)c-=1,p.pop();for(p.push(s),c=x.length;c>1&&r(n[x[c-2]],n[x[c-1]],u)>=0;)c-=1,x.pop();x.push(s)}for(var o=new Array(x.length+p.length-2),T=0,h=0,k=p.length;h<k;++h)o[T++]=p[h];for(var _=x.length-2;_>0;--_)o[T++]=x[_];return o}},6145:function(g,v,e){g.exports=f;var r=e(4110);function f(n,a){a||(a=n,n=window);var o=0,h=0,y=0,p={shift:!1,alt:!1,control:!1,meta:!1},x=!1;function s(w){var I=!1;return"altKey"in w&&(I=I||w.altKey!==p.alt,p.alt=!!w.altKey),"shiftKey"in w&&(I=I||w.shiftKey!==p.shift,p.shift=!!w.shiftKey),"ctrlKey"in w&&(I=I||w.ctrlKey!==p.control,p.control=!!w.ctrlKey),"metaKey"in w&&(I=I||w.metaKey!==p.meta,p.meta=!!w.metaKey),I}function u(w,I){var z=r.x(I),B=r.y(I);"buttons"in I&&(w=I.buttons|0),(w!==o||z!==h||B!==y||s(I))&&(o=w|0,h=z||0,y=B||0,a&&a(o,h,y,p))}function c(w){u(0,w)}function T(){(o||h||y||p.shift||p.alt||p.meta||p.control)&&(h=y=0,o=0,p.shift=p.alt=p.control=p.meta=!1,a&&a(0,0,0,p))}function k(w){s(w)&&a&&a(o,h,y,p)}function _(w){r.buttons(w)===0?u(0,w):u(o,w)}function b(w){u(o|r.buttons(w),w)}function P(w){u(o&~r.buttons(w),w)}function l(){x||(x=!0,n.addEventListener("mousemove",_),n.addEventListener("mousedown",b),n.addEventListener("mouseup",P),n.addEventListener("mouseleave",c),n.addEventListener("mouseenter",c),n.addEventListener("mouseout",c),n.addEventListener("mouseover",c),n.addEventListener("blur",T),n.addEventListener("keyup",k),n.addEventListener("keydown",k),n.addEventListener("keypress",k),n!==window&&(window.addEventListener("blur",T),window.addEventListener("keyup",k),window.addEventListener("keydown",k),window.addEventListener("keypress",k)))}function d(){x&&(x=!1,n.removeEventListener("mousemove",_),n.removeEventListener("mousedown",b),n.removeEventListener("mouseup",P),n.removeEventListener("mouseleave",c),n.removeEventListener("mouseenter",c),n.removeEventListener("mouseout",c),n.removeEventListener("mouseover",c),n.removeEventListener("blur",T),n.removeEventListener("keyup",k),n.removeEventListener("keydown",k),n.removeEventListener("keypress",k),n!==window&&(window.removeEventListener("blur",T),window.removeEventListener("keyup",k),window.removeEventListener("keydown",k),window.removeEventListener("keypress",k)))}l();var L={element:n};return Object.defineProperties(L,{enabled:{get:function(){return x},set:function(w){w?l():d()},enumerable:!0},buttons:{get:function(){return o},enumerable:!0},x:{get:function(){return h},enumerable:!0},y:{get:function(){return y},enumerable:!0},mods:{get:function(){return p},enumerable:!0}}),L}},2565:function(g){var v={left:0,top:0};g.exports=e;function e(f,n,a){n=n||f.currentTarget||f.srcElement,Array.isArray(a)||(a=[0,0]);var o=f.clientX||0,h=f.clientY||0,y=r(n);return a[0]=o-y.left,a[1]=h-y.top,a}function r(f){return f===window||f===document||f===document.body?v:f.getBoundingClientRect()}},4110:function(g,v){function e(a){if(typeof a=="object"){if("buttons"in a)return a.buttons;if("which"in a){var o=a.which;if(o===2)return 4;if(o===3)return 2;if(o>0)return 1<<o-1}else if("button"in a){var o=a.button;if(o===1)return 4;if(o===2)return 2;if(o>=0)return 1<<o}}return 0}v.buttons=e;function r(a){return a.target||a.srcElement||window}v.element=r;function f(a){if(typeof a=="object"){if("offsetX"in a)return a.offsetX;var o=r(a),h=o.getBoundingClientRect();return a.clientX-h.left}return 0}v.x=f;function n(a){if(typeof a=="object"){if("offsetY"in a)return a.offsetY;var o=r(a),h=o.getBoundingClientRect();return a.clientY-h.top}return 0}v.y=n},6475:function(g,v,e){var r=e(14);g.exports=f;function f(n,a,o){typeof n=="function"&&(o=!!a,a=n,n=window);var h=r("ex",n),y=function(p){o&&p.preventDefault();var x=p.deltaX||0,s=p.deltaY||0,u=p.deltaZ||0,c=p.deltaMode,T=1;switch(c){case 1:T=h;break;case 2:T=window.innerHeight;break}if(x*=T,s*=T,u*=T,x||s||u)return a(x,s,u,p)};return n.addEventListener("wheel",y),y}},9284:function(g,v,e){var r=e(5306);g.exports=a;var f={"false,0,1":function(o,h,y,p,x){return function(s,u,c,T){var k=s.shape[0]|0,_=s.shape[1]|0,b=s.data,P=s.offset|0,l=s.stride[0]|0,d=s.stride[1]|0,L=P,w,I=-l|0,z=0,B=-d|0,O=0,R=-l-d|0,C=0,F=l|0,N=d-l*k|0,V=0,K=0,Q=0,at=2*k|0,it=p(at),q=p(at),W=0,Z=0,G=-1,et=-1,nt=0,X=-k|0,Y=k|0,ot=0,rt=-k-1|0,ht=k-1|0,pt=0,yt=0,xt=0;for(V=0;V<k;++V)it[W++]=y(b[L],u,c,T),L+=F;if(L+=N,_>0){if(K=1,it[W++]=y(b[L],u,c,T),L+=F,k>0)for(V=1,w=b[L],Z=it[W]=y(w,u,c,T),nt=it[W+G],ot=it[W+X],pt=it[W+rt],(Z!==nt||Z!==ot||Z!==pt)&&(z=b[L+I],O=b[L+B],C=b[L+R],o(V,K,w,z,O,C,Z,nt,ot,pt,u,c,T),yt=q[W]=Q++),W+=1,L+=F,V=2;V<k;++V)w=b[L],Z=it[W]=y(w,u,c,T),nt=it[W+G],ot=it[W+X],pt=it[W+rt],(Z!==nt||Z!==ot||Z!==pt)&&(z=b[L+I],O=b[L+B],C=b[L+R],o(V,K,w,z,O,C,Z,nt,ot,pt,u,c,T),yt=q[W]=Q++,pt!==nt&&h(q[W+G],yt,C,z,pt,nt,u,c,T)),W+=1,L+=F;for(L+=N,W=0,xt=G,G=et,et=xt,xt=X,X=Y,Y=xt,xt=rt,rt=ht,ht=xt,K=2;K<_;++K){if(it[W++]=y(b[L],u,c,T),L+=F,k>0)for(V=1,w=b[L],Z=it[W]=y(w,u,c,T),nt=it[W+G],ot=it[W+X],pt=it[W+rt],(Z!==nt||Z!==ot||Z!==pt)&&(z=b[L+I],O=b[L+B],C=b[L+R],o(V,K,w,z,O,C,Z,nt,ot,pt,u,c,T),yt=q[W]=Q++,pt!==ot&&h(q[W+X],yt,O,C,ot,pt,u,c,T)),W+=1,L+=F,V=2;V<k;++V)w=b[L],Z=it[W]=y(w,u,c,T),nt=it[W+G],ot=it[W+X],pt=it[W+rt],(Z!==nt||Z!==ot||Z!==pt)&&(z=b[L+I],O=b[L+B],C=b[L+R],o(V,K,w,z,O,C,Z,nt,ot,pt,u,c,T),yt=q[W]=Q++,pt!==ot&&h(q[W+X],yt,O,C,ot,pt,u,c,T),pt!==nt&&h(q[W+G],yt,C,z,pt,nt,u,c,T)),W+=1,L+=F;K&1&&(W=0),xt=G,G=et,et=xt,xt=X,X=Y,Y=xt,xt=rt,rt=ht,ht=xt,L+=N}}x(q),x(it)}},"false,1,0":function(o,h,y,p,x){return function(s,u,c,T){var k=s.shape[0]|0,_=s.shape[1]|0,b=s.data,P=s.offset|0,l=s.stride[0]|0,d=s.stride[1]|0,L=P,w,I=-l|0,z=0,B=-d|0,O=0,R=-l-d|0,C=0,F=d|0,N=l-d*_|0,V=0,K=0,Q=0,at=2*_|0,it=p(at),q=p(at),W=0,Z=0,G=-1,et=-1,nt=0,X=-_|0,Y=_|0,ot=0,rt=-_-1|0,ht=_-1|0,pt=0,yt=0,xt=0;for(K=0;K<_;++K)it[W++]=y(b[L],u,c,T),L+=F;if(L+=N,k>0){if(V=1,it[W++]=y(b[L],u,c,T),L+=F,_>0)for(K=1,w=b[L],Z=it[W]=y(w,u,c,T),ot=it[W+X],nt=it[W+G],pt=it[W+rt],(Z!==ot||Z!==nt||Z!==pt)&&(z=b[L+I],O=b[L+B],C=b[L+R],o(V,K,w,z,O,C,Z,ot,nt,pt,u,c,T),yt=q[W]=Q++),W+=1,L+=F,K=2;K<_;++K)w=b[L],Z=it[W]=y(w,u,c,T),ot=it[W+X],nt=it[W+G],pt=it[W+rt],(Z!==ot||Z!==nt||Z!==pt)&&(z=b[L+I],O=b[L+B],C=b[L+R],o(V,K,w,z,O,C,Z,ot,nt,pt,u,c,T),yt=q[W]=Q++,pt!==nt&&h(q[W+G],yt,O,C,nt,pt,u,c,T)),W+=1,L+=F;for(L+=N,W=0,xt=X,X=Y,Y=xt,xt=G,G=et,et=xt,xt=rt,rt=ht,ht=xt,V=2;V<k;++V){if(it[W++]=y(b[L],u,c,T),L+=F,_>0)for(K=1,w=b[L],Z=it[W]=y(w,u,c,T),ot=it[W+X],nt=it[W+G],pt=it[W+rt],(Z!==ot||Z!==nt||Z!==pt)&&(z=b[L+I],O=b[L+B],C=b[L+R],o(V,K,w,z,O,C,Z,ot,nt,pt,u,c,T),yt=q[W]=Q++,pt!==ot&&h(q[W+X],yt,C,z,pt,ot,u,c,T)),W+=1,L+=F,K=2;K<_;++K)w=b[L],Z=it[W]=y(w,u,c,T),ot=it[W+X],nt=it[W+G],pt=it[W+rt],(Z!==ot||Z!==nt||Z!==pt)&&(z=b[L+I],O=b[L+B],C=b[L+R],o(V,K,w,z,O,C,Z,ot,nt,pt,u,c,T),yt=q[W]=Q++,pt!==nt&&h(q[W+G],yt,O,C,nt,pt,u,c,T),pt!==ot&&h(q[W+X],yt,C,z,pt,ot,u,c,T)),W+=1,L+=F;V&1&&(W=0),xt=X,X=Y,Y=xt,xt=G,G=et,et=xt,xt=rt,rt=ht,ht=xt,L+=N}}x(q),x(it)}}};function n(o,h,y,p,x,s){var u=[s,x].join(","),c=f[u];return c(o,h,y,r.mallocUint32,r.freeUint32)}function a(o){function h(T){throw new Error("ndarray-extract-contour: "+T)}typeof o!="object"&&h("Must specify arguments");var y=o.order;Array.isArray(y)||h("Must specify order");var p=o.arrayArguments||1;p<1&&h("Must have at least one array argument");var x=o.scalarArguments||0;x<0&&h("Scalar arg count must be > 0"),typeof o.vertex!="function"&&h("Must specify vertex creation function"),typeof o.cell!="function"&&h("Must specify cell creation function"),typeof o.phase!="function"&&h("Must specify phase function");for(var s=o.getters||[],u=new Array(p),c=0;c<p;++c)s.indexOf(c)>=0?u[c]=!0:u[c]=!1;return n(o.vertex,o.cell,o.phase,x,y,u)}},9144:function(g,v,e){var r=e(3094),f={zero:function(k,_,b,P){var l=k[0],d=b[0];P|=0;var L=0,w=d;for(L=0;L<l;++L)_[P]=0,P+=w},fdTemplate1:function(k,_,b,P,l,d,L){var w=k[0],I=b[0],z=d[0],B=-1*I,O=I;P|=0,L|=0;var R=0,C=I,F=z;for(R=0;R<w;++R)l[L]=.5*(_[P+B]-_[P+O]),P+=C,L+=F},fdTemplate2:function(k,_,b,P,l,d,L,w,I,z){var B=k[0],O=k[1],R=b[0],C=b[1],F=d[0],N=d[1],V=I[0],K=I[1],Q=-1*R,at=R,it=-1*C,q=C;P|=0,L|=0,z|=0;var W=0,Z=0,G=C,et=R-O*C,nt=N,X=F-O*N,Y=K,ot=V-O*K;for(Z=0;Z<B;++Z){for(W=0;W<O;++W)l[L]=.5*(_[P+Q]-_[P+at]),w[z]=.5*(_[P+it]-_[P+q]),P+=G,L+=nt,z+=Y;P+=et,L+=X,z+=ot}}},n={cdiff:function(k){var _={};return function(b,P,l){var d=b.dtype,L=b.order,w=P.dtype,I=P.order,z=l.dtype,B=l.order,O=[d,L.join(),w,I.join(),z,B.join()].join(),R=_[O];return R||(_[O]=R=k([d,L,w,I,z,B])),R(b.shape.slice(0),b.data,b.stride,b.offset|0,P.data,P.stride,P.offset|0,l.data,l.stride,l.offset|0)}},zero:function(k){var _={};return function(b){var P=b.dtype,l=b.order,d=[P,l.join()].join(),L=_[d];return L||(_[d]=L=k([P,l])),L(b.shape.slice(0),b.data,b.stride,b.offset|0)}},fdTemplate1:function(k){var _={};return function(b,P){var l=b.dtype,d=b.order,L=P.dtype,w=P.order,I=[l,d.join(),L,w.join()].join(),z=_[I];return z||(_[I]=z=k([l,d,L,w])),z(b.shape.slice(0),b.data,b.stride,b.offset|0,P.data,P.stride,P.offset|0)}},fdTemplate2:function(k){var _={};return function(b,P,l){var d=b.dtype,L=b.order,w=P.dtype,I=P.order,z=l.dtype,B=l.order,O=[d,L.join(),w,I.join(),z,B.join()].join(),R=_[O];return R||(_[O]=R=k([d,L,w,I,z,B])),R(b.shape.slice(0),b.data,b.stride,b.offset|0,P.data,P.stride,P.offset|0,l.data,l.stride,l.offset|0)}}};function a(k){var _=n[k.funcName];return _(o.bind(void 0,k))}function o(k){return f[k.funcName]}function h(k){return a({funcName:k.funcName})}var y={},p={},x=h({funcName:"cdiff"}),s=h({funcName:"zero"});function u(k){return k in y?y[k]:y[k]=h({funcName:"fdTemplate"+k})}function c(k,_,b,P){return function(l,d){var L=d.shape.slice();return L[0]>2&&L[1]>2&&P(d.pick(-1,-1).lo(1,1).hi(L[0]-2,L[1]-2),l.pick(-1,-1,0).lo(1,1).hi(L[0]-2,L[1]-2),l.pick(-1,-1,1).lo(1,1).hi(L[0]-2,L[1]-2)),L[1]>2&&(b(d.pick(0,-1).lo(1).hi(L[1]-2),l.pick(0,-1,1).lo(1).hi(L[1]-2)),_(l.pick(0,-1,0).lo(1).hi(L[1]-2))),L[1]>2&&(b(d.pick(L[0]-1,-1).lo(1).hi(L[1]-2),l.pick(L[0]-1,-1,1).lo(1).hi(L[1]-2)),_(l.pick(L[0]-1,-1,0).lo(1).hi(L[1]-2))),L[0]>2&&(b(d.pick(-1,0).lo(1).hi(L[0]-2),l.pick(-1,0,0).lo(1).hi(L[0]-2)),_(l.pick(-1,0,1).lo(1).hi(L[0]-2))),L[0]>2&&(b(d.pick(-1,L[1]-1).lo(1).hi(L[0]-2),l.pick(-1,L[1]-1,0).lo(1).hi(L[0]-2)),_(l.pick(-1,L[1]-1,1).lo(1).hi(L[0]-2))),l.set(0,0,0,0),l.set(0,0,1,0),l.set(L[0]-1,0,0,0),l.set(L[0]-1,0,1,0),l.set(0,L[1]-1,0,0),l.set(0,L[1]-1,1,0),l.set(L[0]-1,L[1]-1,0,0),l.set(L[0]-1,L[1]-1,1,0),l}}function T(k){var _=k.join(),L=p[_];if(L)return L;for(var b=k.length,P=[x,s],l=1;l<=b;++l)P.push(u(l));var d=c,L=d.apply(void 0,P);return p[_]=L,L}g.exports=function(k,_,b){if(Array.isArray(b)||(typeof b=="string"?b=r(_.dimension,b):b=r(_.dimension,"clamp")),_.size===0)return k;if(_.dimension===0)return k.set(0),k;var P=T(b);return P(k,_)}},3581:function(g){function v(a,o){var h=Math.floor(o),y=o-h,p=0<=h&&h<a.shape[0],x=0<=h+1&&h+1<a.shape[0],s=p?+a.get(h):0,u=x?+a.get(h+1):0;return(1-y)*s+y*u}function e(a,o,h){var y=Math.floor(o),p=o-y,x=0<=y&&y<a.shape[0],s=0<=y+1&&y+1<a.shape[0],u=Math.floor(h),c=h-u,T=0<=u&&u<a.shape[1],k=0<=u+1&&u+1<a.shape[1],_=x&&T?a.get(y,u):0,b=x&&k?a.get(y,u+1):0,P=s&&T?a.get(y+1,u):0,l=s&&k?a.get(y+1,u+1):0;return(1-c)*((1-p)*_+p*P)+c*((1-p)*b+p*l)}function r(a,o,h,y){var p=Math.floor(o),x=o-p,s=0<=p&&p<a.shape[0],u=0<=p+1&&p+1<a.shape[0],c=Math.floor(h),T=h-c,k=0<=c&&c<a.shape[1],_=0<=c+1&&c+1<a.shape[1],b=Math.floor(y),P=y-b,l=0<=b&&b<a.shape[2],d=0<=b+1&&b+1<a.shape[2],L=s&&k&&l?a.get(p,c,b):0,w=s&&_&&l?a.get(p,c+1,b):0,I=u&&k&&l?a.get(p+1,c,b):0,z=u&&_&&l?a.get(p+1,c+1,b):0,B=s&&k&&d?a.get(p,c,b+1):0,O=s&&_&&d?a.get(p,c+1,b+1):0,R=u&&k&&d?a.get(p+1,c,b+1):0,C=u&&_&&d?a.get(p+1,c+1,b+1):0;return(1-P)*((1-T)*((1-x)*L+x*I)+T*((1-x)*w+x*z))+P*((1-T)*((1-x)*B+x*R)+T*((1-x)*O+x*C))}function f(a){var o=a.shape.length|0,h=new Array(o),y=new Array(o),p=new Array(o),x=new Array(o),s,u;for(s=0;s<o;++s)u=+arguments[s+1],h[s]=Math.floor(u),y[s]=u-h[s],p[s]=0<=h[s]&&h[s]<a.shape[s],x[s]=0<=h[s]+1&&h[s]+1<a.shape[s];var c=0,T,k,_;t:for(s=0;s<1<<o;++s){for(k=1,_=a.offset,T=0;T<o;++T)if(s&1<<T){if(!x[T])continue t;k*=y[T],_+=a.stride[T]*(h[T]+1)}else{if(!p[T])continue t;k*=1-y[T],_+=a.stride[T]*h[T]}c+=k*a.data[_]}return c}function n(a,o,h,y){switch(a.shape.length){case 0:return 0;case 1:return v(a,o);case 2:return e(a,o,h);case 3:return r(a,o,h,y);default:return f.apply(void 0,arguments)}}g.exports=n,g.exports.d1=v,g.exports.d2=e,g.exports.d3=r},7498:function(g,v){var e={"float64,2,1,0":function(){return function(y,p,x,s,u){var c=y[0],T=y[1],k=y[2],_=x[0],b=x[1],P=x[2];s|=0;var l=0,d=0,L=0,w=P,I=b-k*P,z=_-T*b;for(L=0;L<c;++L){for(d=0;d<T;++d){for(l=0;l<k;++l)p[s]/=u,s+=w;s+=I}s+=z}}},"uint8,2,0,1,float64,2,1,0":function(){return function(y,p,x,s,u,c,T,k){var _=y[0],b=y[1],P=y[2],l=x[0],d=x[1],L=x[2],w=c[0],I=c[1],z=c[2];s|=0,T|=0;for(var B=s,O=T,R=y[0]|0;R>0;){R<64?(_=R,R=0):(_=64,R-=64);for(var C=y[1]|0;C>0;){C<64?(b=C,C=0):(b=64,C-=64),s=B+R*l+C*d,T=O+R*w+C*I;var F=0,N=0,V=0,K=L,Q=l-P*L,at=d-_*l,it=z,q=w-P*z,W=I-_*w;for(V=0;V<b;++V){for(N=0;N<_;++N){for(F=0;F<P;++F)p[s]=u[T]*k,s+=K,T+=it;s+=Q,T+=q}s+=at,T+=W}}}}},"float32,1,0,float32,1,0":function(){return function(y,p,x,s,u,c,T){var k=y[0],_=y[1],b=x[0],P=x[1],l=c[0],d=c[1];s|=0,T|=0;var L=0,w=0,I=P,z=b-_*P,B=d,O=l-_*d;for(w=0;w<k;++w){for(L=0;L<_;++L)p[s]=u[T],s+=I,T+=B;s+=z,T+=O}}},"float32,1,0,float32,0,1":function(){return function(y,p,x,s,u,c,T){var k=y[0],_=y[1],b=x[0],P=x[1],l=c[0],d=c[1];s|=0,T|=0;for(var L=s,w=T,I=y[1]|0;I>0;){I<64?(_=I,I=0):(_=64,I-=64);for(var z=y[0]|0;z>0;){z<64?(k=z,z=0):(k=64,z-=64),s=L+I*P+z*b,T=w+I*d+z*l;var B=0,O=0,R=P,C=b-_*P,F=d,N=l-_*d;for(O=0;O<k;++O){for(B=0;B<_;++B)p[s]=u[T],s+=R,T+=F;s+=C,T+=N}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(y,p,x,s,u,c,T){var k=y[0],_=y[1],b=y[2],P=x[0],l=x[1],d=x[2],L=c[0],w=c[1],I=c[2];s|=0,T|=0;for(var z=s,B=T,O=y[2]|0;O>0;){O<64?(b=O,O=0):(b=64,O-=64);for(var R=y[0]|0;R>0;){R<64?(k=R,R=0):(k=64,R-=64);for(var C=y[1]|0;C>0;){C<64?(_=C,C=0):(_=64,C-=64),s=z+O*d+R*P+C*l,T=B+O*I+R*L+C*w;var F=0,N=0,V=0,K=d,Q=P-b*d,at=l-k*P,it=I,q=L-b*I,W=w-k*L;for(V=0;V<_;++V){for(N=0;N<k;++N){for(F=0;F<b;++F)p[s]=u[T],s+=K,T+=it;s+=Q,T+=q}s+=at,T+=W}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(y,p,x,s,u,c,T){var k=y[0],_=y[1],b=y[2],P=x[0],l=x[1],d=x[2],L=c[0],w=c[1],I=c[2];s|=0,T|=0;var z=0,B=0,O=0,R=d,C=P-b*d,F=l-k*P,N=I,V=L-b*I,K=w-k*L;for(O=0;O<_;++O){for(B=0;B<k;++B){for(z=0;z<b;++z)p[s]=u[T],s+=R,T+=N;s+=C,T+=V}s+=F,T+=K}}}};function r(y,p){var x=p.join(","),s=e[x];return s()}var f=r,n={mul:function(y){var p={};return function(x,s,u){var c=x.dtype,T=x.order,k=s.dtype,_=s.order,b=u.dtype,P=u.order,l=[c,T.join(),k,_.join(),b,P.join()].join(),d=p[l];return d||(p[l]=d=y([c,T,k,_,b,P])),d(x.shape.slice(0),x.data,x.stride,x.offset|0,s.data,s.stride,s.offset|0,u.data,u.stride,u.offset|0)}},muls:function(y){var p={};return function(x,s,u){var c=x.dtype,T=x.order,k=s.dtype,_=s.order,b=[c,T.join(),k,_.join()].join(),P=p[b];return P||(p[b]=P=y([c,T,k,_])),P(x.shape.slice(0),x.data,x.stride,x.offset|0,s.data,s.stride,s.offset|0,u)}},mulseq:function(y){var p={};return function(x,s){var u=x.dtype,c=x.order,T=[u,c.join()].join(),k=p[T];return k||(p[T]=k=y([u,c])),k(x.shape.slice(0),x.data,x.stride,x.offset|0,s)}},div:function(y){var p={};return function(x,s,u){var c=x.dtype,T=x.order,k=s.dtype,_=s.order,b=u.dtype,P=u.order,l=[c,T.join(),k,_.join(),b,P.join()].join(),d=p[l];return d||(p[l]=d=y([c,T,k,_,b,P])),d(x.shape.slice(0),x.data,x.stride,x.offset|0,s.data,s.stride,s.offset|0,u.data,u.stride,u.offset|0)}},divs:function(y){var p={};return function(x,s,u){var c=x.dtype,T=x.order,k=s.dtype,_=s.order,b=[c,T.join(),k,_.join()].join(),P=p[b];return P||(p[b]=P=y([c,T,k,_])),P(x.shape.slice(0),x.data,x.stride,x.offset|0,s.data,s.stride,s.offset|0,u)}},divseq:function(y){var p={};return function(x,s){var u=x.dtype,c=x.order,T=[u,c.join()].join(),k=p[T];return k||(p[T]=k=y([u,c])),k(x.shape.slice(0),x.data,x.stride,x.offset|0,s)}},assign:function(y){var p={};return function(x,s){var u=x.dtype,c=x.order,T=s.dtype,k=s.order,_=[u,c.join(),T,k.join()].join(),b=p[_];return b||(p[_]=b=y([u,c,T,k])),b(x.shape.slice(0),x.data,x.stride,x.offset|0,s.data,s.stride,s.offset|0)}}};function a(y){var p=n[y.funcName];return p(f.bind(void 0,y))}function o(y){return a({funcName:y.funcName})}var h={mul:"*",div:"/"};(function(){for(var y in h)v[y]=o({funcName:y}),v[y+"s"]=o({funcName:y+"s"}),v[y+"seq"]=o({funcName:y+"seq"})})(),v.assign=o({funcName:"assign"})},7382:function(g,v,e){var r=e(5050),f=e(9262);g.exports=function(n,a){for(var o=[],h=n,y=1;Array.isArray(h);)o.push(h.length),y*=h.length,h=h[0];return o.length===0?r():(a||(a=r(new Float64Array(y),o)),f(a,n),a)}},9262:function(g){function v(){return function(o,h,y,p,x){var s=o[0],u=o[1],c=o[2],T=y[0],k=y[1],_=y[2],b=[0,0,0];p|=0;var P=0,l=0,d=0,L=_,w=k-c*_,I=T-u*k;for(d=0;d<s;++d){for(l=0;l<u;++l){for(P=0;P<c;++P){{var z=x,B;for(B=0;B<b.length-1;++B)z=z[b[B]];h[p]=z[b[b.length-1]]}p+=L,++b[2]}p+=w,b[2]-=c,++b[1]}p+=I,b[1]-=u,++b[0]}}}function e(){return v()}var r=e;function f(o){var h={};return function(y,p){var x=y.dtype,s=y.order,u=[x,s.join()].join(),c=h[u];return c||(h[u]=c=o([x,s])),c(y.shape.slice(0),y.data,y.stride,y.offset|0,p)}}function n(o){return f(r.bind(void 0,o))}function a(o){return n({funcName:o.funcName})}g.exports=a({funcName:"convert"})},8139:function(g,v,e){var r=e(5306);function f(x){switch(x){case"uint32":return[r.mallocUint32,r.freeUint32];default:return null}}var n={"uint32,1,0":function(x,s){return function(u,c,T,k,_,b,P,l,d,L,w){var I,z,B,O=u*_+k,R,C=x(l),F,N,V,K;for(I=u+1;I<=c;++I){for(z=I,O+=_,B=O,F=0,N=O,R=0;R<l;++R)C[F++]=T[N],N+=d;t:for(;z-- >u;){F=0,N=B-_;e:for(R=0;R<l;++R){if(V=T[N],K=C[F],V<K)break t;if(V>K)break e;N+=L,F+=w}for(F=B,N=B-_,R=0;R<l;++R)T[F]=T[N],F+=d,N+=d;B-=_}for(F=B,N=0,R=0;R<l;++R)T[F]=C[N++],F+=d}s(C)}}};function a(x,s){var u=f(s),c=[s,x].join(","),T=n[c];return u?T(u[0],u[1]):T()}var o={"uint32,1,0":function(x,s,u){return function c(T,k,_,b,P,l,d,L,w,I,z){var B=(k-T+1)/6|0,O=T+B,R=k-B,C=T+k>>1,F=C-B,N=C+B,V=O,K=F,Q=C,at=N,it=R,q=T+1,W=k-1,Z=!0,G,et,nt,X,Y,ot,rt,ht,pt,yt=0,xt=0,Ft=0,Et,mt,gt,wt,Pt,Bt,kt,jt,Ht,Vt,ee,te,ae,le,ce,pe,we=L,ve=s(we),Mt=s(we);mt=P*V,gt=P*K,pe=b;t:for(Et=0;Et<L;++Et){if(rt=mt+pe,ht=gt+pe,Ft=_[rt]-_[ht],Ft>0){et=V,V=K,K=et;break t}if(Ft<0)break t;pe+=I}mt=P*at,gt=P*it,pe=b;t:for(Et=0;Et<L;++Et){if(rt=mt+pe,ht=gt+pe,Ft=_[rt]-_[ht],Ft>0){et=at,at=it,it=et;break t}if(Ft<0)break t;pe+=I}mt=P*V,gt=P*Q,pe=b;t:for(Et=0;Et<L;++Et){if(rt=mt+pe,ht=gt+pe,Ft=_[rt]-_[ht],Ft>0){et=V,V=Q,Q=et;break t}if(Ft<0)break t;pe+=I}mt=P*K,gt=P*Q,pe=b;t:for(Et=0;Et<L;++Et){if(rt=mt+pe,ht=gt+pe,Ft=_[rt]-_[ht],Ft>0){et=K,K=Q,Q=et;break t}if(Ft<0)break t;pe+=I}mt=P*V,gt=P*at,pe=b;t:for(Et=0;Et<L;++Et){if(rt=mt+pe,ht=gt+pe,Ft=_[rt]-_[ht],Ft>0){et=V,V=at,at=et;break t}if(Ft<0)break t;pe+=I}mt=P*Q,gt=P*at,pe=b;t:for(Et=0;Et<L;++Et){if(rt=mt+pe,ht=gt+pe,Ft=_[rt]-_[ht],Ft>0){et=Q,Q=at,at=et;break t}if(Ft<0)break t;pe+=I}mt=P*K,gt=P*it,pe=b;t:for(Et=0;Et<L;++Et){if(rt=mt+pe,ht=gt+pe,Ft=_[rt]-_[ht],Ft>0){et=K,K=it,it=et;break t}if(Ft<0)break t;pe+=I}mt=P*K,gt=P*Q,pe=b;t:for(Et=0;Et<L;++Et){if(rt=mt+pe,ht=gt+pe,Ft=_[rt]-_[ht],Ft>0){et=K,K=Q,Q=et;break t}if(Ft<0)break t;pe+=I}mt=P*at,gt=P*it,pe=b;t:for(Et=0;Et<L;++Et){if(rt=mt+pe,ht=gt+pe,Ft=_[rt]-_[ht],Ft>0){et=at,at=it,it=et;break t}if(Ft<0)break t;pe+=I}for(mt=P*V,gt=P*K,wt=P*Q,Pt=P*at,Bt=P*it,kt=P*O,jt=P*C,Ht=P*R,ce=0,pe=b,Et=0;Et<L;++Et)rt=mt+pe,ht=gt+pe,pt=wt+pe,Vt=Pt+pe,ee=Bt+pe,te=kt+pe,ae=jt+pe,le=Ht+pe,ve[ce]=_[ht],Mt[ce]=_[Vt],Z=Z&&ve[ce]===Mt[ce],nt=_[rt],X=_[pt],Y=_[ee],_[te]=nt,_[ae]=X,_[le]=Y,++ce,pe+=w;for(mt=P*F,gt=P*T,pe=b,Et=0;Et<L;++Et)rt=mt+pe,ht=gt+pe,_[rt]=_[ht],pe+=w;for(mt=P*N,gt=P*k,pe=b,Et=0;Et<L;++Et)rt=mt+pe,ht=gt+pe,_[rt]=_[ht],pe+=w;if(Z)for(ot=q;ot<=W;++ot){rt=b+ot*P,ce=0;t:for(Et=0;Et<L;++Et){if(Ft=_[rt]-ve[ce],Ft!==0)break t;ce+=z,rt+=I}if(Ft!==0)if(Ft<0){if(ot!==q)for(mt=P*ot,gt=P*q,pe=b,Et=0;Et<L;++Et)rt=mt+pe,ht=gt+pe,G=_[rt],_[rt]=_[ht],_[ht]=G,pe+=w;++q}else for(;;){rt=b+W*P,ce=0;t:for(Et=0;Et<L;++Et){if(Ft=_[rt]-ve[ce],Ft!==0)break t;ce+=z,rt+=I}if(Ft>0)W--;else if(Ft<0){for(mt=P*ot,gt=P*q,wt=P*W,pe=b,Et=0;Et<L;++Et)rt=mt+pe,ht=gt+pe,pt=wt+pe,G=_[rt],_[rt]=_[ht],_[ht]=_[pt],_[pt]=G,pe+=w;++q,--W;break}else{for(mt=P*ot,gt=P*W,pe=b,Et=0;Et<L;++Et)rt=mt+pe,ht=gt+pe,G=_[rt],_[rt]=_[ht],_[ht]=G,pe+=w;--W;break}}}else for(ot=q;ot<=W;++ot){rt=b+ot*P,ce=0;t:for(Et=0;Et<L;++Et){if(yt=_[rt]-ve[ce],yt!==0)break t;ce+=z,rt+=I}if(yt<0){if(ot!==q)for(mt=P*ot,gt=P*q,pe=b,Et=0;Et<L;++Et)rt=mt+pe,ht=gt+pe,G=_[rt],_[rt]=_[ht],_[ht]=G,pe+=w;++q}else{rt=b+ot*P,ce=0;t:for(Et=0;Et<L;++Et){if(xt=_[rt]-Mt[ce],xt!==0)break t;ce+=z,rt+=I}if(xt>0)for(;;){rt=b+W*P,ce=0;t:for(Et=0;Et<L;++Et){if(Ft=_[rt]-Mt[ce],Ft!==0)break t;ce+=z,rt+=I}if(Ft>0){if(--W<ot)break;continue}else{rt=b+W*P,ce=0;t:for(Et=0;Et<L;++Et){if(Ft=_[rt]-ve[ce],Ft!==0)break t;ce+=z,rt+=I}if(Ft<0){for(mt=P*ot,gt=P*q,wt=P*W,pe=b,Et=0;Et<L;++Et)rt=mt+pe,ht=gt+pe,pt=wt+pe,G=_[rt],_[rt]=_[ht],_[ht]=_[pt],_[pt]=G,pe+=w;++q,--W}else{for(mt=P*ot,gt=P*W,pe=b,Et=0;Et<L;++Et)rt=mt+pe,ht=gt+pe,G=_[rt],_[rt]=_[ht],_[ht]=G,pe+=w;--W}break}}}}for(mt=P*T,gt=P*(q-1),ce=0,pe=b,Et=0;Et<L;++Et)rt=mt+pe,ht=gt+pe,_[rt]=_[ht],_[ht]=ve[ce],++ce,pe+=w;for(mt=P*k,gt=P*(W+1),ce=0,pe=b,Et=0;Et<L;++Et)rt=mt+pe,ht=gt+pe,_[rt]=_[ht],_[ht]=Mt[ce],++ce,pe+=w;if(q-2-T<=32?x(T,q-2,_,b,P,l,d,L,w,I,z):c(T,q-2,_,b,P,l,d,L,w,I,z),k-(W+2)<=32?x(W+2,k,_,b,P,l,d,L,w,I,z):c(W+2,k,_,b,P,l,d,L,w,I,z),Z){u(ve),u(Mt);return}if(q<O&&W>R){t:for(;;){for(rt=b+q*P,ce=0,pe=b,Et=0;Et<L;++Et){if(_[rt]!==ve[ce])break t;++ce,rt+=w}++q}t:for(;;){for(rt=b+W*P,ce=0,pe=b,Et=0;Et<L;++Et){if(_[rt]!==Mt[ce])break t;++ce,rt+=w}--W}for(ot=q;ot<=W;++ot){rt=b+ot*P,ce=0;t:for(Et=0;Et<L;++Et){if(yt=_[rt]-ve[ce],yt!==0)break t;ce+=z,rt+=I}if(yt===0){if(ot!==q)for(mt=P*ot,gt=P*q,pe=b,Et=0;Et<L;++Et)rt=mt+pe,ht=gt+pe,G=_[rt],_[rt]=_[ht],_[ht]=G,pe+=w;++q}else{rt=b+ot*P,ce=0;t:for(Et=0;Et<L;++Et){if(xt=_[rt]-Mt[ce],xt!==0)break t;ce+=z,rt+=I}if(xt===0)for(;;){rt=b+W*P,ce=0;t:for(Et=0;Et<L;++Et){if(Ft=_[rt]-Mt[ce],Ft!==0)break t;ce+=z,rt+=I}if(Ft===0){if(--W<ot)break;continue}else{rt=b+W*P,ce=0;t:for(Et=0;Et<L;++Et){if(Ft=_[rt]-ve[ce],Ft!==0)break t;ce+=z,rt+=I}if(Ft<0){for(mt=P*ot,gt=P*q,wt=P*W,pe=b,Et=0;Et<L;++Et)rt=mt+pe,ht=gt+pe,pt=wt+pe,G=_[rt],_[rt]=_[ht],_[ht]=_[pt],_[pt]=G,pe+=w;++q,--W}else{for(mt=P*ot,gt=P*W,pe=b,Et=0;Et<L;++Et)rt=mt+pe,ht=gt+pe,G=_[rt],_[rt]=_[ht],_[ht]=G,pe+=w;--W}break}}}}}u(ve),u(Mt),W-q<=32?x(q,W,_,b,P,l,d,L,w,I,z):c(q,W,_,b,P,l,d,L,w,I,z)}}};function h(x,s,u){var c=f(s),T=[s,x].join(","),k=o[T];return x.length>1&&c?k(u,c[0],c[1]):k(u)}var y={"uint32,1,0":function(x,s){return function(u){var c=u.data,T=u.offset|0,k=u.shape,_=u.stride,b=_[0]|0,P=k[0]|0,l=_[1]|0,d=k[1]|0,L=l,w=l,I=1;P<=32?x(0,P-1,c,T,b,l,P,d,L,w,I):s(0,P-1,c,T,b,l,P,d,L,w,I)}}};function p(x,s){var u=[s,x].join(","),c=y[u],T=a(x,s),k=h(x,s,T);return c(T,k)}g.exports=p},8729:function(g,v,e){var r=e(8139),f={};function n(a){var o=a.order,h=a.dtype,y=[o,h],p=y.join(":"),x=f[p];return x||(f[p]=x=r(o,h)),x(a),a}g.exports=n},5050:function(g,v,e){var r=e(4780),f=typeof Float64Array<"u";function n(s,u){return s[0]-u[0]}function a(){var s=this.stride,u=new Array(s.length),c;for(c=0;c<u.length;++c)u[c]=[Math.abs(s[c]),c];u.sort(n);var T=new Array(u.length);for(c=0;c<T.length;++c)T[c]=u[c][1];return T}var o={T:function(s){function u(T){this.data=T}var c=u.prototype;return c.dtype=s,c.index=function(){return-1},c.size=0,c.dimension=-1,c.shape=c.stride=c.order=[],c.lo=c.hi=c.transpose=c.step=function(){return new u(this.data)},c.get=c.set=function(){},c.pick=function(){return null},function(T){return new u(T)}},0:function(s,u){function c(k,_){this.data=k,this.offset=_}var T=c.prototype;return T.dtype=s,T.index=function(){return this.offset},T.dimension=0,T.size=1,T.shape=T.stride=T.order=[],T.lo=T.hi=T.transpose=T.step=function(){return new c(this.data,this.offset)},T.pick=function(){return u(this.data)},T.valueOf=T.get=function(){return s==="generic"?this.data.get(this.offset):this.data[this.offset]},T.set=function(k){return s==="generic"?this.data.set(this.offset,k):this.data[this.offset]=k},function(k,_,b,P){return new c(k,P)}},1:function(s,u,c){function T(_,b,P,l){this.data=_,this.shape=[b],this.stride=[P],this.offset=l|0}var k=T.prototype;return k.dtype=s,k.dimension=1,Object.defineProperty(k,"size",{get:function(){return this.shape[0]}}),k.order=[0],k.set=function(_,b){return s==="generic"?this.data.set(this.offset+this.stride[0]*_,b):this.data[this.offset+this.stride[0]*_]=b},k.get=function(_){return s==="generic"?this.data.get(this.offset+this.stride[0]*_):this.data[this.offset+this.stride[0]*_]},k.index=function(_){return this.offset+this.stride[0]*_},k.hi=function(_){return new T(this.data,typeof _!="number"||_<0?this.shape[0]:_|0,this.stride[0],this.offset)},k.lo=function(_){var b=this.offset,P=0,l=this.shape[0],d=this.stride[0];return typeof _=="number"&&_>=0&&(P=_|0,b+=d*P,l-=P),new T(this.data,l,d,b)},k.step=function(_){var b=this.shape[0],P=this.stride[0],l=this.offset,d=0,L=Math.ceil;return typeof _=="number"&&(d=_|0,d<0?(l+=P*(b-1),b=L(-b/d)):b=L(b/d),P*=d),new T(this.data,b,P,l)},k.transpose=function(_){_=_===void 0?0:_|0;var b=this.shape,P=this.stride;return new T(this.data,b[_],P[_],this.offset)},k.pick=function(_){var b=[],P=[],l=this.offset;typeof _=="number"&&_>=0?l=l+this.stride[0]*_|0:(b.push(this.shape[0]),P.push(this.stride[0]));var d=u[b.length+1];return d(this.data,b,P,l)},function(_,b,P,l){return new T(_,b[0],P[0],l)}},2:function(s,u,c){function T(_,b,P,l,d,L){this.data=_,this.shape=[b,P],this.stride=[l,d],this.offset=L|0}var k=T.prototype;return k.dtype=s,k.dimension=2,Object.defineProperty(k,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(k,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),k.set=function(_,b,P){return s==="generic"?this.data.set(this.offset+this.stride[0]*_+this.stride[1]*b,P):this.data[this.offset+this.stride[0]*_+this.stride[1]*b]=P},k.get=function(_,b){return s==="generic"?this.data.get(this.offset+this.stride[0]*_+this.stride[1]*b):this.data[this.offset+this.stride[0]*_+this.stride[1]*b]},k.index=function(_,b){return this.offset+this.stride[0]*_+this.stride[1]*b},k.hi=function(_,b){return new T(this.data,typeof _!="number"||_<0?this.shape[0]:_|0,typeof b!="number"||b<0?this.shape[1]:b|0,this.stride[0],this.stride[1],this.offset)},k.lo=function(_,b){var P=this.offset,l=0,d=this.shape[0],L=this.shape[1],w=this.stride[0],I=this.stride[1];return typeof _=="number"&&_>=0&&(l=_|0,P+=w*l,d-=l),typeof b=="number"&&b>=0&&(l=b|0,P+=I*l,L-=l),new T(this.data,d,L,w,I,P)},k.step=function(_,b){var P=this.shape[0],l=this.shape[1],d=this.stride[0],L=this.stride[1],w=this.offset,I=0,z=Math.ceil;return typeof _=="number"&&(I=_|0,I<0?(w+=d*(P-1),P=z(-P/I)):P=z(P/I),d*=I),typeof b=="number"&&(I=b|0,I<0?(w+=L*(l-1),l=z(-l/I)):l=z(l/I),L*=I),new T(this.data,P,l,d,L,w)},k.transpose=function(_,b){_=_===void 0?0:_|0,b=b===void 0?1:b|0;var P=this.shape,l=this.stride;return new T(this.data,P[_],P[b],l[_],l[b],this.offset)},k.pick=function(_,b){var P=[],l=[],d=this.offset;typeof _=="number"&&_>=0?d=d+this.stride[0]*_|0:(P.push(this.shape[0]),l.push(this.stride[0])),typeof b=="number"&&b>=0?d=d+this.stride[1]*b|0:(P.push(this.shape[1]),l.push(this.stride[1]));var L=u[P.length+1];return L(this.data,P,l,d)},function(_,b,P,l){return new T(_,b[0],b[1],P[0],P[1],l)}},3:function(s,u,c){function T(_,b,P,l,d,L,w,I){this.data=_,this.shape=[b,P,l],this.stride=[d,L,w],this.offset=I|0}var k=T.prototype;return k.dtype=s,k.dimension=3,Object.defineProperty(k,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(k,"order",{get:function(){var _=Math.abs(this.stride[0]),b=Math.abs(this.stride[1]),P=Math.abs(this.stride[2]);return _>b?b>P?[2,1,0]:_>P?[1,2,0]:[1,0,2]:_>P?[2,0,1]:P>b?[0,1,2]:[0,2,1]}}),k.set=function(_,b,P,l){return s==="generic"?this.data.set(this.offset+this.stride[0]*_+this.stride[1]*b+this.stride[2]*P,l):this.data[this.offset+this.stride[0]*_+this.stride[1]*b+this.stride[2]*P]=l},k.get=function(_,b,P){return s==="generic"?this.data.get(this.offset+this.stride[0]*_+this.stride[1]*b+this.stride[2]*P):this.data[this.offset+this.stride[0]*_+this.stride[1]*b+this.stride[2]*P]},k.index=function(_,b,P){return this.offset+this.stride[0]*_+this.stride[1]*b+this.stride[2]*P},k.hi=function(_,b,P){return new T(this.data,typeof _!="number"||_<0?this.shape[0]:_|0,typeof b!="number"||b<0?this.shape[1]:b|0,typeof P!="number"||P<0?this.shape[2]:P|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},k.lo=function(_,b,P){var l=this.offset,d=0,L=this.shape[0],w=this.shape[1],I=this.shape[2],z=this.stride[0],B=this.stride[1],O=this.stride[2];return typeof _=="number"&&_>=0&&(d=_|0,l+=z*d,L-=d),typeof b=="number"&&b>=0&&(d=b|0,l+=B*d,w-=d),typeof P=="number"&&P>=0&&(d=P|0,l+=O*d,I-=d),new T(this.data,L,w,I,z,B,O,l)},k.step=function(_,b,P){var l=this.shape[0],d=this.shape[1],L=this.shape[2],w=this.stride[0],I=this.stride[1],z=this.stride[2],B=this.offset,O=0,R=Math.ceil;return typeof _=="number"&&(O=_|0,O<0?(B+=w*(l-1),l=R(-l/O)):l=R(l/O),w*=O),typeof b=="number"&&(O=b|0,O<0?(B+=I*(d-1),d=R(-d/O)):d=R(d/O),I*=O),typeof P=="number"&&(O=P|0,O<0?(B+=z*(L-1),L=R(-L/O)):L=R(L/O),z*=O),new T(this.data,l,d,L,w,I,z,B)},k.transpose=function(_,b,P){_=_===void 0?0:_|0,b=b===void 0?1:b|0,P=P===void 0?2:P|0;var l=this.shape,d=this.stride;return new T(this.data,l[_],l[b],l[P],d[_],d[b],d[P],this.offset)},k.pick=function(_,b,P){var l=[],d=[],L=this.offset;typeof _=="number"&&_>=0?L=L+this.stride[0]*_|0:(l.push(this.shape[0]),d.push(this.stride[0])),typeof b=="number"&&b>=0?L=L+this.stride[1]*b|0:(l.push(this.shape[1]),d.push(this.stride[1])),typeof P=="number"&&P>=0?L=L+this.stride[2]*P|0:(l.push(this.shape[2]),d.push(this.stride[2]));var w=u[l.length+1];return w(this.data,l,d,L)},function(_,b,P,l){return new T(_,b[0],b[1],b[2],P[0],P[1],P[2],l)}},4:function(s,u,c){function T(_,b,P,l,d,L,w,I,z,B){this.data=_,this.shape=[b,P,l,d],this.stride=[L,w,I,z],this.offset=B|0}var k=T.prototype;return k.dtype=s,k.dimension=4,Object.defineProperty(k,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(k,"order",{get:c}),k.set=function(_,b,P,l,d){return s==="generic"?this.data.set(this.offset+this.stride[0]*_+this.stride[1]*b+this.stride[2]*P+this.stride[3]*l,d):this.data[this.offset+this.stride[0]*_+this.stride[1]*b+this.stride[2]*P+this.stride[3]*l]=d},k.get=function(_,b,P,l){return s==="generic"?this.data.get(this.offset+this.stride[0]*_+this.stride[1]*b+this.stride[2]*P+this.stride[3]*l):this.data[this.offset+this.stride[0]*_+this.stride[1]*b+this.stride[2]*P+this.stride[3]*l]},k.index=function(_,b,P,l){return this.offset+this.stride[0]*_+this.stride[1]*b+this.stride[2]*P+this.stride[3]*l},k.hi=function(_,b,P,l){return new T(this.data,typeof _!="number"||_<0?this.shape[0]:_|0,typeof b!="number"||b<0?this.shape[1]:b|0,typeof P!="number"||P<0?this.shape[2]:P|0,typeof l!="number"||l<0?this.shape[3]:l|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},k.lo=function(_,b,P,l){var d=this.offset,L=0,w=this.shape[0],I=this.shape[1],z=this.shape[2],B=this.shape[3],O=this.stride[0],R=this.stride[1],C=this.stride[2],F=this.stride[3];return typeof _=="number"&&_>=0&&(L=_|0,d+=O*L,w-=L),typeof b=="number"&&b>=0&&(L=b|0,d+=R*L,I-=L),typeof P=="number"&&P>=0&&(L=P|0,d+=C*L,z-=L),typeof l=="number"&&l>=0&&(L=l|0,d+=F*L,B-=L),new T(this.data,w,I,z,B,O,R,C,F,d)},k.step=function(_,b,P,l){var d=this.shape[0],L=this.shape[1],w=this.shape[2],I=this.shape[3],z=this.stride[0],B=this.stride[1],O=this.stride[2],R=this.stride[3],C=this.offset,F=0,N=Math.ceil;return typeof _=="number"&&(F=_|0,F<0?(C+=z*(d-1),d=N(-d/F)):d=N(d/F),z*=F),typeof b=="number"&&(F=b|0,F<0?(C+=B*(L-1),L=N(-L/F)):L=N(L/F),B*=F),typeof P=="number"&&(F=P|0,F<0?(C+=O*(w-1),w=N(-w/F)):w=N(w/F),O*=F),typeof l=="number"&&(F=l|0,F<0?(C+=R*(I-1),I=N(-I/F)):I=N(I/F),R*=F),new T(this.data,d,L,w,I,z,B,O,R,C)},k.transpose=function(_,b,P,l){_=_===void 0?0:_|0,b=b===void 0?1:b|0,P=P===void 0?2:P|0,l=l===void 0?3:l|0;var d=this.shape,L=this.stride;return new T(this.data,d[_],d[b],d[P],d[l],L[_],L[b],L[P],L[l],this.offset)},k.pick=function(_,b,P,l){var d=[],L=[],w=this.offset;typeof _=="number"&&_>=0?w=w+this.stride[0]*_|0:(d.push(this.shape[0]),L.push(this.stride[0])),typeof b=="number"&&b>=0?w=w+this.stride[1]*b|0:(d.push(this.shape[1]),L.push(this.stride[1])),typeof P=="number"&&P>=0?w=w+this.stride[2]*P|0:(d.push(this.shape[2]),L.push(this.stride[2])),typeof l=="number"&&l>=0?w=w+this.stride[3]*l|0:(d.push(this.shape[3]),L.push(this.stride[3]));var I=u[d.length+1];return I(this.data,d,L,w)},function(_,b,P,l){return new T(_,b[0],b[1],b[2],b[3],P[0],P[1],P[2],P[3],l)}},5:function(s,u,c){function T(_,b,P,l,d,L,w,I,z,B,O,R){this.data=_,this.shape=[b,P,l,d,L],this.stride=[w,I,z,B,O],this.offset=R|0}var k=T.prototype;return k.dtype=s,k.dimension=5,Object.defineProperty(k,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(k,"order",{get:c}),k.set=function(_,b,P,l,d,L){return s==="generic"?this.data.set(this.offset+this.stride[0]*_+this.stride[1]*b+this.stride[2]*P+this.stride[3]*l+this.stride[4]*d,L):this.data[this.offset+this.stride[0]*_+this.stride[1]*b+this.stride[2]*P+this.stride[3]*l+this.stride[4]*d]=L},k.get=function(_,b,P,l,d){return s==="generic"?this.data.get(this.offset+this.stride[0]*_+this.stride[1]*b+this.stride[2]*P+this.stride[3]*l+this.stride[4]*d):this.data[this.offset+this.stride[0]*_+this.stride[1]*b+this.stride[2]*P+this.stride[3]*l+this.stride[4]*d]},k.index=function(_,b,P,l,d){return this.offset+this.stride[0]*_+this.stride[1]*b+this.stride[2]*P+this.stride[3]*l+this.stride[4]*d},k.hi=function(_,b,P,l,d){return new T(this.data,typeof _!="number"||_<0?this.shape[0]:_|0,typeof b!="number"||b<0?this.shape[1]:b|0,typeof P!="number"||P<0?this.shape[2]:P|0,typeof l!="number"||l<0?this.shape[3]:l|0,typeof d!="number"||d<0?this.shape[4]:d|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},k.lo=function(_,b,P,l,d){var L=this.offset,w=0,I=this.shape[0],z=this.shape[1],B=this.shape[2],O=this.shape[3],R=this.shape[4],C=this.stride[0],F=this.stride[1],N=this.stride[2],V=this.stride[3],K=this.stride[4];return typeof _=="number"&&_>=0&&(w=_|0,L+=C*w,I-=w),typeof b=="number"&&b>=0&&(w=b|0,L+=F*w,z-=w),typeof P=="number"&&P>=0&&(w=P|0,L+=N*w,B-=w),typeof l=="number"&&l>=0&&(w=l|0,L+=V*w,O-=w),typeof d=="number"&&d>=0&&(w=d|0,L+=K*w,R-=w),new T(this.data,I,z,B,O,R,C,F,N,V,K,L)},k.step=function(_,b,P,l,d){var L=this.shape[0],w=this.shape[1],I=this.shape[2],z=this.shape[3],B=this.shape[4],O=this.stride[0],R=this.stride[1],C=this.stride[2],F=this.stride[3],N=this.stride[4],V=this.offset,K=0,Q=Math.ceil;return typeof _=="number"&&(K=_|0,K<0?(V+=O*(L-1),L=Q(-L/K)):L=Q(L/K),O*=K),typeof b=="number"&&(K=b|0,K<0?(V+=R*(w-1),w=Q(-w/K)):w=Q(w/K),R*=K),typeof P=="number"&&(K=P|0,K<0?(V+=C*(I-1),I=Q(-I/K)):I=Q(I/K),C*=K),typeof l=="number"&&(K=l|0,K<0?(V+=F*(z-1),z=Q(-z/K)):z=Q(z/K),F*=K),typeof d=="number"&&(K=d|0,K<0?(V+=N*(B-1),B=Q(-B/K)):B=Q(B/K),N*=K),new T(this.data,L,w,I,z,B,O,R,C,F,N,V)},k.transpose=function(_,b,P,l,d){_=_===void 0?0:_|0,b=b===void 0?1:b|0,P=P===void 0?2:P|0,l=l===void 0?3:l|0,d=d===void 0?4:d|0;var L=this.shape,w=this.stride;return new T(this.data,L[_],L[b],L[P],L[l],L[d],w[_],w[b],w[P],w[l],w[d],this.offset)},k.pick=function(_,b,P,l,d){var L=[],w=[],I=this.offset;typeof _=="number"&&_>=0?I=I+this.stride[0]*_|0:(L.push(this.shape[0]),w.push(this.stride[0])),typeof b=="number"&&b>=0?I=I+this.stride[1]*b|0:(L.push(this.shape[1]),w.push(this.stride[1])),typeof P=="number"&&P>=0?I=I+this.stride[2]*P|0:(L.push(this.shape[2]),w.push(this.stride[2])),typeof l=="number"&&l>=0?I=I+this.stride[3]*l|0:(L.push(this.shape[3]),w.push(this.stride[3])),typeof d=="number"&&d>=0?I=I+this.stride[4]*d|0:(L.push(this.shape[4]),w.push(this.stride[4]));var z=u[L.length+1];return z(this.data,L,w,I)},function(_,b,P,l){return new T(_,b[0],b[1],b[2],b[3],b[4],P[0],P[1],P[2],P[3],P[4],l)}}};function h(s,u){var c=u===-1?"T":String(u),T=o[c];return u===-1?T(s):u===0?T(s,p[s][0]):T(s,p[s],a)}function y(s){if(r(s))return"buffer";if(f)switch(Object.prototype.toString.call(s)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(s)?"array":"generic"}var p={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function x(s,u,c,T){if(s===void 0){var d=p.array[0];return d([])}else typeof s=="number"&&(s=[s]);u===void 0&&(u=[s.length]);var k=u.length;if(c===void 0){c=new Array(k);for(var _=k-1,b=1;_>=0;--_)c[_]=b,b*=u[_]}if(T===void 0){T=0;for(var _=0;_<k;++_)c[_]<0&&(T-=(u[_]-1)*c[_])}for(var P=y(s),l=p[P];l.length<=k+1;)l.push(h(P,l.length-1));var d=l[k+1];return d(s,u,c,T)}g.exports=x},8551:function(g,v,e){var r=e(8362),f=Math.pow(2,-1074),n=-1>>>0;g.exports=a;function a(o,h){if(isNaN(o)||isNaN(h))return NaN;if(o===h)return o;if(o===0)return h<0?-f:f;var y=r.hi(o),p=r.lo(o);return h>o==o>0?p===n?(y+=1,p=0):p+=1:p===0?(p=n,y-=1):p-=1,r.pack(p,y)}},115:function(g,v){var e=1e-6,r=1e-6;v.vertexNormals=function(f,n,a){for(var o=n.length,h=new Array(o),y=a===void 0?e:a,p=0;p<o;++p)h[p]=[0,0,0];for(var p=0;p<f.length;++p)for(var x=f[p],s=0,u=x[x.length-1],c=x[0],T=0;T<x.length;++T){s=u,u=c,c=x[(T+1)%x.length];for(var k=n[s],_=n[u],b=n[c],P=new Array(3),l=0,d=new Array(3),L=0,w=0;w<3;++w)P[w]=k[w]-_[w],l+=P[w]*P[w],d[w]=b[w]-_[w],L+=d[w]*d[w];if(l*L>y)for(var I=h[u],z=1/Math.sqrt(l*L),w=0;w<3;++w){var B=(w+1)%3,O=(w+2)%3;I[w]+=z*(d[B]*P[O]-d[O]*P[B])}}for(var p=0;p<o;++p){for(var I=h[p],R=0,w=0;w<3;++w)R+=I[w]*I[w];if(R>y)for(var z=1/Math.sqrt(R),w=0;w<3;++w)I[w]*=z;else for(var w=0;w<3;++w)I[w]=0}return h},v.faceNormals=function(f,n,a){for(var o=f.length,h=new Array(o),y=a===void 0?r:a,p=0;p<o;++p){for(var x=f[p],s=new Array(3),u=0;u<3;++u)s[u]=n[x[u]];for(var c=new Array(3),T=new Array(3),u=0;u<3;++u)c[u]=s[1][u]-s[0][u],T[u]=s[2][u]-s[0][u];for(var k=new Array(3),_=0,u=0;u<3;++u){var b=(u+1)%3,P=(u+2)%3;k[u]=c[b]*T[P]-c[P]*T[b],_+=k[u]*k[u]}_>y?_=1/Math.sqrt(_):_=0;for(var u=0;u<3;++u)k[u]*=_;h[p]=k}return h}},567:function(g){g.exports=v;function v(e,r,f,n,a,o,h,y,p,x){var s=r+o+x;if(u>0){var u=Math.sqrt(s+1);e[0]=.5*(h-p)/u,e[1]=.5*(y-n)/u,e[2]=.5*(f-o)/u,e[3]=.5*u}else{var c=Math.max(r,o,x),u=Math.sqrt(2*c-s+1);r>=c?(e[0]=.5*u,e[1]=.5*(a+f)/u,e[2]=.5*(y+n)/u,e[3]=.5*(h-p)/u):o>=c?(e[0]=.5*(f+a)/u,e[1]=.5*u,e[2]=.5*(p+h)/u,e[3]=.5*(y-n)/u):(e[0]=.5*(n+y)/u,e[1]=.5*(h+p)/u,e[2]=.5*u,e[3]=.5*(f-a)/u)}return e}},7774:function(g,v,e){g.exports=u;var r=e(8444),f=e(3012),n=e(5950),a=e(7437),o=e(567);function h(c,T,k){return Math.sqrt(Math.pow(c,2)+Math.pow(T,2)+Math.pow(k,2))}function y(c,T,k,_){return Math.sqrt(Math.pow(c,2)+Math.pow(T,2)+Math.pow(k,2)+Math.pow(_,2))}function p(c,T){var k=T[0],_=T[1],b=T[2],P=T[3],l=y(k,_,b,P);l>1e-6?(c[0]=k/l,c[1]=_/l,c[2]=b/l,c[3]=P/l):(c[0]=c[1]=c[2]=0,c[3]=1)}function x(c,T,k){this.radius=r([k]),this.center=r(T),this.rotation=r(c),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var s=x.prototype;s.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},s.recalcMatrix=function(c){this.radius.curve(c),this.center.curve(c),this.rotation.curve(c);var T=this.computedRotation;p(T,T);var k=this.computedMatrix;n(k,T);var _=this.computedCenter,b=this.computedEye,P=this.computedUp,l=Math.exp(this.computedRadius[0]);b[0]=_[0]+l*k[2],b[1]=_[1]+l*k[6],b[2]=_[2]+l*k[10],P[0]=k[1],P[1]=k[5],P[2]=k[9];for(var d=0;d<3;++d){for(var L=0,w=0;w<3;++w)L+=k[d+4*w]*b[w];k[12+d]=-L}},s.getMatrix=function(c,T){this.recalcMatrix(c);var k=this.computedMatrix;if(T){for(var _=0;_<16;++_)T[_]=k[_];return T}return k},s.idle=function(c){this.center.idle(c),this.radius.idle(c),this.rotation.idle(c)},s.flush=function(c){this.center.flush(c),this.radius.flush(c),this.rotation.flush(c)},s.pan=function(c,T,k,_){T=T||0,k=k||0,_=_||0,this.recalcMatrix(c);var b=this.computedMatrix,P=b[1],l=b[5],d=b[9],L=h(P,l,d);P/=L,l/=L,d/=L;var w=b[0],I=b[4],z=b[8],B=w*P+I*l+z*d;w-=P*B,I-=l*B,z-=d*B;var O=h(w,I,z);w/=O,I/=O,z/=O,b[2],b[6],b[10];var R=w*T+P*k,C=I*T+l*k,F=z*T+d*k;this.center.move(c,R,C,F);var N=Math.exp(this.computedRadius[0]);N=Math.max(1e-4,N+_),this.radius.set(c,Math.log(N))},s.rotate=function(c,T,k,_){this.recalcMatrix(c),T=T||0,k=k||0;var b=this.computedMatrix,P=b[0],l=b[4],d=b[8],L=b[1],w=b[5],I=b[9],z=b[2],B=b[6],O=b[10],R=T*P+k*L,C=T*l+k*w,F=T*d+k*I,N=-(B*F-O*C),V=-(O*R-z*F),K=-(z*C-B*R),Q=Math.sqrt(Math.max(0,1-Math.pow(N,2)-Math.pow(V,2)-Math.pow(K,2))),at=y(N,V,K,Q);at>1e-6?(N/=at,V/=at,K/=at,Q/=at):(N=V=K=0,Q=1);var it=this.computedRotation,q=it[0],W=it[1],Z=it[2],G=it[3],et=q*Q+G*N+W*K-Z*V,nt=W*Q+G*V+Z*N-q*K,X=Z*Q+G*K+q*V-W*N,Y=G*Q-q*N-W*V-Z*K;if(_){N=z,V=B,K=O;var ot=Math.sin(_)/h(N,V,K);N*=ot,V*=ot,K*=ot,Q=Math.cos(T),et=et*Q+Y*N+nt*K-X*V,nt=nt*Q+Y*V+X*N-et*K,X=X*Q+Y*K+et*V-nt*N,Y=Y*Q-et*N-nt*V-X*K}var rt=y(et,nt,X,Y);rt>1e-6?(et/=rt,nt/=rt,X/=rt,Y/=rt):(et=nt=X=0,Y=1),this.rotation.set(c,et,nt,X,Y)},s.lookAt=function(c,T,k,_){this.recalcMatrix(c),k=k||this.computedCenter,T=T||this.computedEye,_=_||this.computedUp;var b=this.computedMatrix;f(b,T,k,_);var P=this.computedRotation;o(P,b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]),p(P,P),this.rotation.set(c,P[0],P[1],P[2],P[3]);for(var l=0,d=0;d<3;++d)l+=Math.pow(k[d]-T[d],2);this.radius.set(c,.5*Math.log(Math.max(l,1e-6))),this.center.set(c,k[0],k[1],k[2])},s.translate=function(c,T,k,_){this.center.move(c,T||0,k||0,_||0)},s.setMatrix=function(c,T){var k=this.computedRotation;o(k,T[0],T[1],T[2],T[4],T[5],T[6],T[8],T[9],T[10]),p(k,k),this.rotation.set(c,k[0],k[1],k[2],k[3]);var _=this.computedMatrix;a(_,T);var b=_[15];if(Math.abs(b)>1e-6){var P=_[12]/b,l=_[13]/b,d=_[14]/b;this.recalcMatrix(c);var L=Math.exp(this.computedRadius[0]);this.center.set(c,P-_[2]*L,l-_[6]*L,d-_[10]*L),this.radius.idle(c)}else this.center.idle(c),this.radius.idle(c)},s.setDistance=function(c,T){T>0&&this.radius.set(c,Math.log(T))},s.setDistanceLimits=function(c,T){c>0?c=Math.log(c):c=-1/0,T>0?T=Math.log(T):T=1/0,T=Math.max(T,c),this.radius.bounds[0][0]=c,this.radius.bounds[1][0]=T},s.getDistanceLimits=function(c){var T=this.radius.bounds;return c?(c[0]=Math.exp(T[0][0]),c[1]=Math.exp(T[1][0]),c):[Math.exp(T[0][0]),Math.exp(T[1][0])]},s.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},s.fromJSON=function(c){var T=this.lastT(),k=c.center;k&&this.center.set(T,k[0],k[1],k[2]);var _=c.rotation;_&&this.rotation.set(T,_[0],_[1],_[2],_[3]);var b=c.distance;b&&b>0&&this.radius.set(T,Math.log(b)),this.setDistanceLimits(c.zoomMin,c.zoomMax)};function u(c){c=c||{};var T=c.center||[0,0,0],k=c.rotation||[0,0,0,1],_=c.radius||1;T=[].slice.call(T,0,3),k=[].slice.call(k,0,4),p(k,k);var b=new x(k,T,Math.log(_));return b.setDistanceLimits(c.zoomMin,c.zoomMax),("eye"in c||"up"in c)&&b.lookAt(0,c.eye,c.center,c.up),b}},4930:function(g,v,e){var r=e(6184);g.exports=function(f,n,a){return a=typeof a<"u"?a+"":" ",r(a,n)+f}},4405:function(g){g.exports=function(v,e){e||(e=[0,""]),v=String(v);var r=parseFloat(v,10);return e[0]=r,e[1]=v.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},4166:function(g,v,e){g.exports=f;var r=e(9398);function f(n,a){for(var o=a.length|0,h=n.length,y=[new Array(o),new Array(o)],p=0;p<o;++p)y[0][p]=[],y[1][p]=[];for(var p=0;p<h;++p){var x=n[p];y[0][x[0]].push(x),y[1][x[1]].push(x)}for(var s=[],p=0;p<o;++p)y[0][p].length+y[1][p].length===0&&s.push([p]);function u(l,d){var L=y[d][l[d]];L.splice(L.indexOf(l),1)}function c(l,d,L){for(var w,I,z,B=0;B<2;++B)if(y[B][d].length>0){w=y[B][d][0],z=B;break}I=w[z^1];for(var O=0;O<2;++O)for(var R=y[O][d],C=0;C<R.length;++C){var F=R[C],N=F[O^1],V=r(a[l],a[d],a[I],a[N]);V>0&&(w=F,I=N,z=O)}return L||w&&u(w,z),I}function T(l,d){var L=y[d][l][0],w=[l];u(L,d);for(var I=L[d^1];;){for(;I!==l;)w.push(I),I=c(w[w.length-2],I,!1);if(y[0][l].length+y[1][l].length===0)break;var z=w[w.length-1],B=l,O=w[1],R=c(z,B,!0);if(r(a[z],a[B],a[O],a[R])<0)break;w.push(l),I=c(z,B)}return w}function k(l,d){return d[1]===d[d.length-1]}for(var p=0;p<o;++p)for(var _=0;_<2;++_){for(var b=[];y[_][p].length>0;){y[0][p].length;var P=T(p,_);k(b,P)?b.push.apply(b,P):(b.length>0&&s.push(b),b=P)}b.length>0&&s.push(b)}return s}},3959:function(g,v,e){g.exports=f;var r=e(8348);function f(n,a){for(var o=r(n,a.length),h=new Array(a.length),y=new Array(a.length),p=[],x=0;x<a.length;++x){var s=o[x].length;y[x]=s,h[x]=!0,s<=1&&p.push(x)}for(;p.length>0;){var u=p.pop();h[u]=!1;for(var c=o[u],x=0;x<c.length;++x){var T=c[x];--y[T]===0&&p.push(T)}}for(var k=new Array(a.length),_=[],x=0;x<a.length;++x)if(h[x]){var u=_.length;k[x]=u,_.push(a[x])}else k[x]=-1;for(var b=[],x=0;x<n.length;++x){var P=n[x];h[P[0]]&&h[P[1]]&&b.push([k[P[0]],k[P[1]]])}return[b,_]}},8040:function(g,v,e){g.exports=s;var r=e(8348),f=e(4166),n=e(211),a=e(9660),o=e(9662),h=e(1215),y=e(3959);function p(u,c){for(var T=new Array(u),k=0;k<u;++k)T[k]=c;return T}function x(u){for(var c=new Array(u),T=0;T<u;++T)c[T]=[];return c}function s(u,c){var T=y(u,c);u=T[0],c=T[1];var k=c.length;u.length;for(var _=r(u,c.length),b=0;b<k;++b)if(_[b].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var P=f(u,c);function l(Ft){for(var Et=Ft.length,mt=[0],gt=0;gt<Et;++gt){var wt=c[Ft[gt]],Pt=c[Ft[(gt+1)%Et]],Bt=a(-wt[0],wt[1]),kt=a(-wt[0],Pt[1]),jt=a(Pt[0],wt[1]),Ht=a(Pt[0],Pt[1]);mt=o(mt,o(o(Bt,kt),o(jt,Ht)))}return mt[mt.length-1]>0}P=P.filter(l);for(var d=P.length,L=new Array(d),w=new Array(d),b=0;b<d;++b){L[b]=b;var I=new Array(d),z=P[b].map(function(Et){return c[Et]}),B=n([z]),O=0;t:for(var R=0;R<d;++R)if(I[R]=0,b!==R){for(var C=P[R],F=C.length,N=0;N<F;++N){var V=B(c[C[N]]);if(V!==0){V<0&&(I[R]=1,O+=1);continue t}}I[R]=1,O+=1}w[b]=[O,b,I]}w.sort(function(Ft,Et){return Et[0]-Ft[0]});for(var b=0;b<d;++b)for(var I=w[b],K=I[1],Q=I[2],R=0;R<d;++R)Q[R]&&(L[R]=K);for(var at=x(d),b=0;b<d;++b)at[b].push(L[b]),at[L[b]].push(b);for(var it={},q=p(k,!1),b=0;b<d;++b)for(var C=P[b],F=C.length,R=0;R<F;++R){var W=C[R],Z=C[(R+1)%F],G=Math.min(W,Z)+":"+Math.max(W,Z);if(G in it){var et=it[G];at[et].push(b),at[b].push(et),q[W]=q[Z]=!0}else it[G]=b}function nt(Ft){for(var Et=Ft.length,mt=0;mt<Et;++mt)if(!q[Ft[mt]])return!1;return!0}for(var X=[],Y=p(d,-1),b=0;b<d;++b)L[b]===b&&!nt(P[b])?(X.push(b),Y[b]=0):Y[b]=-1;for(var T=[];X.length>0;){var ot=X.pop(),rt=at[ot];h(rt,function(Et,mt){return Et-mt});var ht=rt.length,pt=Y[ot],yt;if(pt===0){var C=P[ot];yt=[C]}for(var b=0;b<ht;++b){var xt=rt[b];if(!(Y[xt]>=0)&&(Y[xt]=pt^1,X.push(xt),pt===0)){var C=P[xt];nt(C)||(C.reverse(),yt.push(C))}}pt===0&&T.push(yt)}return T}},211:function(g,v,e){g.exports=c;var r=e(417)[3],f=e(4385),n=e(9014),a=e(5070);function o(){return!0}function h(T){return function(k,_){var b=T[k];return b?!!b.queryPoint(_,o):!1}}function y(T){for(var k={},_=0;_<T.length;++_){var b=T[_],P=b[0][0],l=b[0][1],d=b[1][1],L=[Math.min(l,d),Math.max(l,d)];P in k?k[P].push(L):k[P]=[L]}for(var w={},I=Object.keys(k),_=0;_<I.length;++_){var z=k[I[_]];w[I[_]]=n(z)}return h(w)}function p(T,k){return function(_){var b=a.le(k,_[0]);if(b<0)return 1;var P=T[b];if(!P)if(b>0&&k[b]===_[0])P=T[b-1];else return 1;for(var l=1;P;){var d=P.key,L=r(_,d[0],d[1]);if(d[0][0]<d[1][0])if(L<0)P=P.left;else if(L>0)l=-1,P=P.right;else return 0;else if(L>0)P=P.left;else if(L<0)l=1,P=P.right;else return 0}return l}}function x(T){return 1}function s(T){return function(k){return T(k[0],k[1])?0:1}}function u(T,k){return function(_){return T(_[0],_[1])?0:k(_)}}function c(T){for(var k=T.length,_=[],b=[],P=0;P<k;++P)for(var l=T[P],d=l.length,L=d-1,w=0;w<d;L=w++){var I=l[L],z=l[w];I[0]===z[0]?b.push([I,z]):_.push([I,z])}if(_.length===0)return b.length===0?x:s(y(b));var B=f(_),O=p(B.slabs,B.coordinates);return b.length===0?O:u(y(b),O)}},7309:function(g){var v=new Float64Array(4),e=new Float64Array(4),r=new Float64Array(4);function f(n,a,o,h,y){v.length<h.length&&(v=new Float64Array(h.length),e=new Float64Array(h.length),r=new Float64Array(h.length));for(var p=0;p<h.length;++p)v[p]=n[p]-h[p],e[p]=a[p]-n[p],r[p]=o[p]-n[p];for(var x=0,s=0,u=0,c=0,T=0,k=0,p=0;p<h.length;++p){var _=e[p],b=r[p],P=v[p];x+=_*_,s+=_*b,u+=b*b,c+=P*_,T+=P*b,k+=P*P}var l=Math.abs(x*u-s*s),d=s*T-u*c,L=s*c-x*T,w;if(d+L<=l)if(d<0)L<0&&c<0?(L=0,-c>=x?(d=1,w=x+2*c+k):(d=-c/x,w=c*d+k)):(d=0,T>=0?(L=0,w=k):-T>=u?(L=1,w=u+2*T+k):(L=-T/u,w=T*L+k));else if(L<0)L=0,c>=0?(d=0,w=k):-c>=x?(d=1,w=x+2*c+k):(d=-c/x,w=c*d+k);else{var I=1/l;d*=I,L*=I,w=d*(x*d+s*L+2*c)+L*(s*d+u*L+2*T)+k}else{var z,B,O,R;d<0?(z=s+c,B=u+T,B>z?(O=B-z,R=x-2*s+u,O>=R?(d=1,L=0,w=x+2*c+k):(d=O/R,L=1-d,w=d*(x*d+s*L+2*c)+L*(s*d+u*L+2*T)+k)):(d=0,B<=0?(L=1,w=u+2*T+k):T>=0?(L=0,w=k):(L=-T/u,w=T*L+k))):L<0?(z=s+T,B=x+c,B>z?(O=B-z,R=x-2*s+u,O>=R?(L=1,d=0,w=u+2*T+k):(L=O/R,d=1-L,w=d*(x*d+s*L+2*c)+L*(s*d+u*L+2*T)+k)):(L=0,B<=0?(d=1,w=x+2*c+k):c>=0?(d=0,w=k):(d=-c/x,w=c*d+k))):(O=u+T-s-c,O<=0?(d=0,L=1,w=u+2*T+k):(R=x-2*s+u,O>=R?(d=1,L=0,w=x+2*c+k):(d=O/R,L=1-d,w=d*(x*d+s*L+2*c)+L*(s*d+u*L+2*T)+k)))}for(var C=1-d-L,p=0;p<h.length;++p)y[p]=C*n[p]+d*a[p]+L*o[p];return w<0?0:w}g.exports=f},1116:function(g,v,e){g.exports=e(6093)},7584:function(g,v,e){var r=e(1539);g.exports=f;function f(n,a){for(var o=n.length,h=new Array(o),y=0;y<o;++y)h[y]=r(n[y],a[y]);return h}},2826:function(g,v,e){g.exports=f;var r=e(5125);function f(n){for(var a=new Array(n.length),o=0;o<n.length;++o)a[o]=r(n[o]);return a}},4469:function(g,v,e){var r=e(5125),f=e(3962);g.exports=n;function n(a,o){for(var h=r(o),y=a.length,p=new Array(y),x=0;x<y;++x)p[x]=f(a[x],h);return p}},6695:function(g,v,e){var r=e(4354);g.exports=f;function f(n,a){for(var o=n.length,h=new Array(o),y=0;y<o;++y)h[y]=r(n[y],a[y]);return h}},7037:function(g,v,e){var r=e(9209),f=e(1284),n=e(9887);g.exports=a;function a(o){o.sort(f);for(var h=o.length,y=0,p=0;p<h;++p){var x=o[p],s=n(x);if(s!==0){if(y>0){var u=o[y-1];if(r(x,u)===0&&n(u)!==s){y-=1;continue}}o[y++]=x}}return o.length=y,o}},6184:function(g){var v="",e;g.exports=r;function r(f,n){if(typeof f!="string")throw new TypeError("expected a string");if(n===1)return f;if(n===2)return f+f;var a=f.length*n;if(e!==f||typeof e>"u")e=f,v="";else if(v.length>=a)return v.substr(0,a);for(;a>v.length&&n>1;)n&1&&(v+=f),n>>=1,f+=f;return v+=f,v=v.substr(0,a),v}},8161:function(g,v,e){g.exports=e.g.performance&&e.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},402:function(g){g.exports=v;function v(e){for(var r=e.length,f=e[e.length-1],n=r,a=r-2;a>=0;--a){var o=f,h=e[a];f=o+h;var y=f-o,p=h-y;p&&(e[--n]=f,f=p)}for(var x=0,a=n;a<r;++a){var o=e[a],h=f;f=o+h;var y=f-o,p=h-y;p&&(e[x++]=p)}return e[x++]=f,e.length=x,e}},8167:function(g,v,e){var r=e(9660),f=e(9662),n=e(8289),a=e(402),o=6;function h(k,_,b,P){return function(l){return P(k(b(l[0][0],l[1][1]),b(-l[0][1],l[1][0])))}}function y(k,_,b,P){return function(l){return P(k(_(k(b(l[1][1],l[2][2]),b(-l[1][2],l[2][1])),l[0][0]),k(_(k(b(l[1][0],l[2][2]),b(-l[1][2],l[2][0])),-l[0][1]),_(k(b(l[1][0],l[2][1]),b(-l[1][1],l[2][0])),l[0][2]))))}}function p(k,_,b,P){return function(l){return P(k(k(_(k(_(k(b(l[2][2],l[3][3]),b(-l[2][3],l[3][2])),l[1][1]),k(_(k(b(l[2][1],l[3][3]),b(-l[2][3],l[3][1])),-l[1][2]),_(k(b(l[2][1],l[3][2]),b(-l[2][2],l[3][1])),l[1][3]))),l[0][0]),_(k(_(k(b(l[2][2],l[3][3]),b(-l[2][3],l[3][2])),l[1][0]),k(_(k(b(l[2][0],l[3][3]),b(-l[2][3],l[3][0])),-l[1][2]),_(k(b(l[2][0],l[3][2]),b(-l[2][2],l[3][0])),l[1][3]))),-l[0][1])),k(_(k(_(k(b(l[2][1],l[3][3]),b(-l[2][3],l[3][1])),l[1][0]),k(_(k(b(l[2][0],l[3][3]),b(-l[2][3],l[3][0])),-l[1][1]),_(k(b(l[2][0],l[3][1]),b(-l[2][1],l[3][0])),l[1][3]))),l[0][2]),_(k(_(k(b(l[2][1],l[3][2]),b(-l[2][2],l[3][1])),l[1][0]),k(_(k(b(l[2][0],l[3][2]),b(-l[2][2],l[3][0])),-l[1][1]),_(k(b(l[2][0],l[3][1]),b(-l[2][1],l[3][0])),l[1][2]))),-l[0][3]))))}}function x(k,_,b,P){return function(l){return P(k(k(_(k(k(_(k(_(k(b(l[3][3],l[4][4]),b(-l[3][4],l[4][3])),l[2][2]),k(_(k(b(l[3][2],l[4][4]),b(-l[3][4],l[4][2])),-l[2][3]),_(k(b(l[3][2],l[4][3]),b(-l[3][3],l[4][2])),l[2][4]))),l[1][1]),_(k(_(k(b(l[3][3],l[4][4]),b(-l[3][4],l[4][3])),l[2][1]),k(_(k(b(l[3][1],l[4][4]),b(-l[3][4],l[4][1])),-l[2][3]),_(k(b(l[3][1],l[4][3]),b(-l[3][3],l[4][1])),l[2][4]))),-l[1][2])),k(_(k(_(k(b(l[3][2],l[4][4]),b(-l[3][4],l[4][2])),l[2][1]),k(_(k(b(l[3][1],l[4][4]),b(-l[3][4],l[4][1])),-l[2][2]),_(k(b(l[3][1],l[4][2]),b(-l[3][2],l[4][1])),l[2][4]))),l[1][3]),_(k(_(k(b(l[3][2],l[4][3]),b(-l[3][3],l[4][2])),l[2][1]),k(_(k(b(l[3][1],l[4][3]),b(-l[3][3],l[4][1])),-l[2][2]),_(k(b(l[3][1],l[4][2]),b(-l[3][2],l[4][1])),l[2][3]))),-l[1][4]))),l[0][0]),_(k(k(_(k(_(k(b(l[3][3],l[4][4]),b(-l[3][4],l[4][3])),l[2][2]),k(_(k(b(l[3][2],l[4][4]),b(-l[3][4],l[4][2])),-l[2][3]),_(k(b(l[3][2],l[4][3]),b(-l[3][3],l[4][2])),l[2][4]))),l[1][0]),_(k(_(k(b(l[3][3],l[4][4]),b(-l[3][4],l[4][3])),l[2][0]),k(_(k(b(l[3][0],l[4][4]),b(-l[3][4],l[4][0])),-l[2][3]),_(k(b(l[3][0],l[4][3]),b(-l[3][3],l[4][0])),l[2][4]))),-l[1][2])),k(_(k(_(k(b(l[3][2],l[4][4]),b(-l[3][4],l[4][2])),l[2][0]),k(_(k(b(l[3][0],l[4][4]),b(-l[3][4],l[4][0])),-l[2][2]),_(k(b(l[3][0],l[4][2]),b(-l[3][2],l[4][0])),l[2][4]))),l[1][3]),_(k(_(k(b(l[3][2],l[4][3]),b(-l[3][3],l[4][2])),l[2][0]),k(_(k(b(l[3][0],l[4][3]),b(-l[3][3],l[4][0])),-l[2][2]),_(k(b(l[3][0],l[4][2]),b(-l[3][2],l[4][0])),l[2][3]))),-l[1][4]))),-l[0][1])),k(_(k(k(_(k(_(k(b(l[3][3],l[4][4]),b(-l[3][4],l[4][3])),l[2][1]),k(_(k(b(l[3][1],l[4][4]),b(-l[3][4],l[4][1])),-l[2][3]),_(k(b(l[3][1],l[4][3]),b(-l[3][3],l[4][1])),l[2][4]))),l[1][0]),_(k(_(k(b(l[3][3],l[4][4]),b(-l[3][4],l[4][3])),l[2][0]),k(_(k(b(l[3][0],l[4][4]),b(-l[3][4],l[4][0])),-l[2][3]),_(k(b(l[3][0],l[4][3]),b(-l[3][3],l[4][0])),l[2][4]))),-l[1][1])),k(_(k(_(k(b(l[3][1],l[4][4]),b(-l[3][4],l[4][1])),l[2][0]),k(_(k(b(l[3][0],l[4][4]),b(-l[3][4],l[4][0])),-l[2][1]),_(k(b(l[3][0],l[4][1]),b(-l[3][1],l[4][0])),l[2][4]))),l[1][3]),_(k(_(k(b(l[3][1],l[4][3]),b(-l[3][3],l[4][1])),l[2][0]),k(_(k(b(l[3][0],l[4][3]),b(-l[3][3],l[4][0])),-l[2][1]),_(k(b(l[3][0],l[4][1]),b(-l[3][1],l[4][0])),l[2][3]))),-l[1][4]))),l[0][2]),k(_(k(k(_(k(_(k(b(l[3][2],l[4][4]),b(-l[3][4],l[4][2])),l[2][1]),k(_(k(b(l[3][1],l[4][4]),b(-l[3][4],l[4][1])),-l[2][2]),_(k(b(l[3][1],l[4][2]),b(-l[3][2],l[4][1])),l[2][4]))),l[1][0]),_(k(_(k(b(l[3][2],l[4][4]),b(-l[3][4],l[4][2])),l[2][0]),k(_(k(b(l[3][0],l[4][4]),b(-l[3][4],l[4][0])),-l[2][2]),_(k(b(l[3][0],l[4][2]),b(-l[3][2],l[4][0])),l[2][4]))),-l[1][1])),k(_(k(_(k(b(l[3][1],l[4][4]),b(-l[3][4],l[4][1])),l[2][0]),k(_(k(b(l[3][0],l[4][4]),b(-l[3][4],l[4][0])),-l[2][1]),_(k(b(l[3][0],l[4][1]),b(-l[3][1],l[4][0])),l[2][4]))),l[1][2]),_(k(_(k(b(l[3][1],l[4][2]),b(-l[3][2],l[4][1])),l[2][0]),k(_(k(b(l[3][0],l[4][2]),b(-l[3][2],l[4][0])),-l[2][1]),_(k(b(l[3][0],l[4][1]),b(-l[3][1],l[4][0])),l[2][2]))),-l[1][4]))),-l[0][3]),_(k(k(_(k(_(k(b(l[3][2],l[4][3]),b(-l[3][3],l[4][2])),l[2][1]),k(_(k(b(l[3][1],l[4][3]),b(-l[3][3],l[4][1])),-l[2][2]),_(k(b(l[3][1],l[4][2]),b(-l[3][2],l[4][1])),l[2][3]))),l[1][0]),_(k(_(k(b(l[3][2],l[4][3]),b(-l[3][3],l[4][2])),l[2][0]),k(_(k(b(l[3][0],l[4][3]),b(-l[3][3],l[4][0])),-l[2][2]),_(k(b(l[3][0],l[4][2]),b(-l[3][2],l[4][0])),l[2][3]))),-l[1][1])),k(_(k(_(k(b(l[3][1],l[4][3]),b(-l[3][3],l[4][1])),l[2][0]),k(_(k(b(l[3][0],l[4][3]),b(-l[3][3],l[4][0])),-l[2][1]),_(k(b(l[3][0],l[4][1]),b(-l[3][1],l[4][0])),l[2][3]))),l[1][2]),_(k(_(k(b(l[3][1],l[4][2]),b(-l[3][2],l[4][1])),l[2][0]),k(_(k(b(l[3][0],l[4][2]),b(-l[3][2],l[4][0])),-l[2][1]),_(k(b(l[3][0],l[4][1]),b(-l[3][1],l[4][0])),l[2][2]))),-l[1][3]))),l[0][4])))))}}function s(k){var _=k===2?h:k===3?y:k===4?p:k===5?x:void 0;return _(f,n,r,a)}var u=[function(){return[0]},function(k){return[k[0][0]]}];function c(k,_,b,P,l,d,L,w){return function(I){switch(I.length){case 0:return k(I);case 1:return _(I);case 2:return b(I);case 3:return P(I);case 4:return l(I);case 5:return d(I)}var z=L[I.length];return z||(z=L[I.length]=w(I.length)),z(I)}}function T(){for(;u.length<o;)u.push(s(u.length));g.exports=c.apply(void 0,u.concat([u,s]));for(var k=0;k<u.length;++k)g.exports[k]=u[k]}T()},9130:function(g,v,e){var r=e(9660),f=e(9662);g.exports=n;function n(a,o){for(var h=r(a[0],o[0]),y=1;y<a.length;++y)h=f(h,r(a[y],o[y]));return h}},2227:function(g,v,e){var r=e(9660),f=e(9662),n=e(4078),a=e(8289),o=6;function h(l){var d=l===3?s:l===4?u:l===5?c:T;return d(f,n,r,a)}function y(){return 0}function p(){return 0}function x(){return 0}function s(l,d,L,w){function I(z,B,O){var R=L(z[0],z[0]),C=w(R,B[0]),F=w(R,O[0]),N=L(B[0],B[0]),V=w(N,z[0]),K=w(N,O[0]),Q=L(O[0],O[0]),at=w(Q,z[0]),it=w(Q,B[0]),q=l(d(it,K),d(V,C)),W=d(at,F),Z=d(q,W);return Z[Z.length-1]}return I}function u(l,d,L,w){function I(z,B,O,R){var C=l(L(z[0],z[0]),L(z[1],z[1])),F=w(C,B[0]),N=w(C,O[0]),V=w(C,R[0]),K=l(L(B[0],B[0]),L(B[1],B[1])),Q=w(K,z[0]),at=w(K,O[0]),it=w(K,R[0]),q=l(L(O[0],O[0]),L(O[1],O[1])),W=w(q,z[0]),Z=w(q,B[0]),G=w(q,R[0]),et=l(L(R[0],R[0]),L(R[1],R[1])),nt=w(et,z[0]),X=w(et,B[0]),Y=w(et,O[0]),ot=l(l(w(d(Y,G),B[1]),l(w(d(X,it),-O[1]),w(d(Z,at),R[1]))),l(w(d(X,it),z[1]),l(w(d(nt,V),-B[1]),w(d(Q,F),R[1])))),rt=l(l(w(d(Y,G),z[1]),l(w(d(nt,V),-O[1]),w(d(W,N),R[1]))),l(w(d(Z,at),z[1]),l(w(d(W,N),-B[1]),w(d(Q,F),O[1])))),ht=d(ot,rt);return ht[ht.length-1]}return I}function c(l,d,L,w){function I(z,B,O,R,C){var F=l(L(z[0],z[0]),l(L(z[1],z[1]),L(z[2],z[2]))),N=w(F,B[0]),V=w(F,O[0]),K=w(F,R[0]),Q=w(F,C[0]),at=l(L(B[0],B[0]),l(L(B[1],B[1]),L(B[2],B[2]))),it=w(at,z[0]),q=w(at,O[0]),W=w(at,R[0]),Z=w(at,C[0]),G=l(L(O[0],O[0]),l(L(O[1],O[1]),L(O[2],O[2]))),et=w(G,z[0]),nt=w(G,B[0]),X=w(G,R[0]),Y=w(G,C[0]),ot=l(L(R[0],R[0]),l(L(R[1],R[1]),L(R[2],R[2]))),rt=w(ot,z[0]),ht=w(ot,B[0]),pt=w(ot,O[0]),yt=w(ot,C[0]),xt=l(L(C[0],C[0]),l(L(C[1],C[1]),L(C[2],C[2]))),Ft=w(xt,z[0]),Et=w(xt,B[0]),mt=w(xt,O[0]),gt=w(xt,R[0]),wt=l(l(l(w(l(w(d(gt,yt),O[1]),l(w(d(mt,Y),-R[1]),w(d(pt,X),C[1]))),B[2]),l(w(l(w(d(gt,yt),B[1]),l(w(d(Et,Z),-R[1]),w(d(ht,W),C[1]))),-O[2]),w(l(w(d(mt,Y),B[1]),l(w(d(Et,Z),-O[1]),w(d(nt,q),C[1]))),R[2]))),l(w(l(w(d(pt,X),B[1]),l(w(d(ht,W),-O[1]),w(d(nt,q),R[1]))),-C[2]),l(w(l(w(d(gt,yt),B[1]),l(w(d(Et,Z),-R[1]),w(d(ht,W),C[1]))),z[2]),w(l(w(d(gt,yt),z[1]),l(w(d(Ft,Q),-R[1]),w(d(rt,K),C[1]))),-B[2])))),l(l(w(l(w(d(Et,Z),z[1]),l(w(d(Ft,Q),-B[1]),w(d(it,N),C[1]))),R[2]),l(w(l(w(d(ht,W),z[1]),l(w(d(rt,K),-B[1]),w(d(it,N),R[1]))),-C[2]),w(l(w(d(pt,X),B[1]),l(w(d(ht,W),-O[1]),w(d(nt,q),R[1]))),z[2]))),l(w(l(w(d(pt,X),z[1]),l(w(d(rt,K),-O[1]),w(d(et,V),R[1]))),-B[2]),l(w(l(w(d(ht,W),z[1]),l(w(d(rt,K),-B[1]),w(d(it,N),R[1]))),O[2]),w(l(w(d(nt,q),z[1]),l(w(d(et,V),-B[1]),w(d(it,N),O[1]))),-R[2]))))),Pt=l(l(l(w(l(w(d(gt,yt),O[1]),l(w(d(mt,Y),-R[1]),w(d(pt,X),C[1]))),z[2]),w(l(w(d(gt,yt),z[1]),l(w(d(Ft,Q),-R[1]),w(d(rt,K),C[1]))),-O[2])),l(w(l(w(d(mt,Y),z[1]),l(w(d(Ft,Q),-O[1]),w(d(et,V),C[1]))),R[2]),w(l(w(d(pt,X),z[1]),l(w(d(rt,K),-O[1]),w(d(et,V),R[1]))),-C[2]))),l(l(w(l(w(d(mt,Y),B[1]),l(w(d(Et,Z),-O[1]),w(d(nt,q),C[1]))),z[2]),w(l(w(d(mt,Y),z[1]),l(w(d(Ft,Q),-O[1]),w(d(et,V),C[1]))),-B[2])),l(w(l(w(d(Et,Z),z[1]),l(w(d(Ft,Q),-B[1]),w(d(it,N),C[1]))),O[2]),w(l(w(d(nt,q),z[1]),l(w(d(et,V),-B[1]),w(d(it,N),O[1]))),-C[2])))),Bt=d(wt,Pt);return Bt[Bt.length-1]}return I}function T(l,d,L,w){function I(z,B,O,R,C,F){var N=l(l(L(z[0],z[0]),L(z[1],z[1])),l(L(z[2],z[2]),L(z[3],z[3]))),V=w(N,B[0]),K=w(N,O[0]),Q=w(N,R[0]),at=w(N,C[0]),it=w(N,F[0]),q=l(l(L(B[0],B[0]),L(B[1],B[1])),l(L(B[2],B[2]),L(B[3],B[3]))),W=w(q,z[0]),Z=w(q,O[0]),G=w(q,R[0]),et=w(q,C[0]),nt=w(q,F[0]),X=l(l(L(O[0],O[0]),L(O[1],O[1])),l(L(O[2],O[2]),L(O[3],O[3]))),Y=w(X,z[0]),ot=w(X,B[0]),rt=w(X,R[0]),ht=w(X,C[0]),pt=w(X,F[0]),yt=l(l(L(R[0],R[0]),L(R[1],R[1])),l(L(R[2],R[2]),L(R[3],R[3]))),xt=w(yt,z[0]),Ft=w(yt,B[0]),Et=w(yt,O[0]),mt=w(yt,C[0]),gt=w(yt,F[0]),wt=l(l(L(C[0],C[0]),L(C[1],C[1])),l(L(C[2],C[2]),L(C[3],C[3]))),Pt=w(wt,z[0]),Bt=w(wt,B[0]),kt=w(wt,O[0]),jt=w(wt,R[0]),Ht=w(wt,F[0]),Vt=l(l(L(F[0],F[0]),L(F[1],F[1])),l(L(F[2],F[2]),L(F[3],F[3]))),ee=w(Vt,z[0]),te=w(Vt,B[0]),ae=w(Vt,O[0]),le=w(Vt,R[0]),ce=w(Vt,C[0]),pe=l(l(l(w(l(l(w(l(w(d(ce,Ht),R[1]),l(w(d(le,gt),-C[1]),w(d(jt,mt),F[1]))),O[2]),w(l(w(d(ce,Ht),O[1]),l(w(d(ae,pt),-C[1]),w(d(kt,ht),F[1]))),-R[2])),l(w(l(w(d(le,gt),O[1]),l(w(d(ae,pt),-R[1]),w(d(Et,rt),F[1]))),C[2]),w(l(w(d(jt,mt),O[1]),l(w(d(kt,ht),-R[1]),w(d(Et,rt),C[1]))),-F[2]))),B[3]),l(w(l(l(w(l(w(d(ce,Ht),R[1]),l(w(d(le,gt),-C[1]),w(d(jt,mt),F[1]))),B[2]),w(l(w(d(ce,Ht),B[1]),l(w(d(te,nt),-C[1]),w(d(Bt,et),F[1]))),-R[2])),l(w(l(w(d(le,gt),B[1]),l(w(d(te,nt),-R[1]),w(d(Ft,G),F[1]))),C[2]),w(l(w(d(jt,mt),B[1]),l(w(d(Bt,et),-R[1]),w(d(Ft,G),C[1]))),-F[2]))),-O[3]),w(l(l(w(l(w(d(ce,Ht),O[1]),l(w(d(ae,pt),-C[1]),w(d(kt,ht),F[1]))),B[2]),w(l(w(d(ce,Ht),B[1]),l(w(d(te,nt),-C[1]),w(d(Bt,et),F[1]))),-O[2])),l(w(l(w(d(ae,pt),B[1]),l(w(d(te,nt),-O[1]),w(d(ot,Z),F[1]))),C[2]),w(l(w(d(kt,ht),B[1]),l(w(d(Bt,et),-O[1]),w(d(ot,Z),C[1]))),-F[2]))),R[3]))),l(l(w(l(l(w(l(w(d(le,gt),O[1]),l(w(d(ae,pt),-R[1]),w(d(Et,rt),F[1]))),B[2]),w(l(w(d(le,gt),B[1]),l(w(d(te,nt),-R[1]),w(d(Ft,G),F[1]))),-O[2])),l(w(l(w(d(ae,pt),B[1]),l(w(d(te,nt),-O[1]),w(d(ot,Z),F[1]))),R[2]),w(l(w(d(Et,rt),B[1]),l(w(d(Ft,G),-O[1]),w(d(ot,Z),R[1]))),-F[2]))),-C[3]),w(l(l(w(l(w(d(jt,mt),O[1]),l(w(d(kt,ht),-R[1]),w(d(Et,rt),C[1]))),B[2]),w(l(w(d(jt,mt),B[1]),l(w(d(Bt,et),-R[1]),w(d(Ft,G),C[1]))),-O[2])),l(w(l(w(d(kt,ht),B[1]),l(w(d(Bt,et),-O[1]),w(d(ot,Z),C[1]))),R[2]),w(l(w(d(Et,rt),B[1]),l(w(d(Ft,G),-O[1]),w(d(ot,Z),R[1]))),-C[2]))),F[3])),l(w(l(l(w(l(w(d(ce,Ht),R[1]),l(w(d(le,gt),-C[1]),w(d(jt,mt),F[1]))),B[2]),w(l(w(d(ce,Ht),B[1]),l(w(d(te,nt),-C[1]),w(d(Bt,et),F[1]))),-R[2])),l(w(l(w(d(le,gt),B[1]),l(w(d(te,nt),-R[1]),w(d(Ft,G),F[1]))),C[2]),w(l(w(d(jt,mt),B[1]),l(w(d(Bt,et),-R[1]),w(d(Ft,G),C[1]))),-F[2]))),z[3]),w(l(l(w(l(w(d(ce,Ht),R[1]),l(w(d(le,gt),-C[1]),w(d(jt,mt),F[1]))),z[2]),w(l(w(d(ce,Ht),z[1]),l(w(d(ee,it),-C[1]),w(d(Pt,at),F[1]))),-R[2])),l(w(l(w(d(le,gt),z[1]),l(w(d(ee,it),-R[1]),w(d(xt,Q),F[1]))),C[2]),w(l(w(d(jt,mt),z[1]),l(w(d(Pt,at),-R[1]),w(d(xt,Q),C[1]))),-F[2]))),-B[3])))),l(l(l(w(l(l(w(l(w(d(ce,Ht),B[1]),l(w(d(te,nt),-C[1]),w(d(Bt,et),F[1]))),z[2]),w(l(w(d(ce,Ht),z[1]),l(w(d(ee,it),-C[1]),w(d(Pt,at),F[1]))),-B[2])),l(w(l(w(d(te,nt),z[1]),l(w(d(ee,it),-B[1]),w(d(W,V),F[1]))),C[2]),w(l(w(d(Bt,et),z[1]),l(w(d(Pt,at),-B[1]),w(d(W,V),C[1]))),-F[2]))),R[3]),w(l(l(w(l(w(d(le,gt),B[1]),l(w(d(te,nt),-R[1]),w(d(Ft,G),F[1]))),z[2]),w(l(w(d(le,gt),z[1]),l(w(d(ee,it),-R[1]),w(d(xt,Q),F[1]))),-B[2])),l(w(l(w(d(te,nt),z[1]),l(w(d(ee,it),-B[1]),w(d(W,V),F[1]))),R[2]),w(l(w(d(Ft,G),z[1]),l(w(d(xt,Q),-B[1]),w(d(W,V),R[1]))),-F[2]))),-C[3])),l(w(l(l(w(l(w(d(jt,mt),B[1]),l(w(d(Bt,et),-R[1]),w(d(Ft,G),C[1]))),z[2]),w(l(w(d(jt,mt),z[1]),l(w(d(Pt,at),-R[1]),w(d(xt,Q),C[1]))),-B[2])),l(w(l(w(d(Bt,et),z[1]),l(w(d(Pt,at),-B[1]),w(d(W,V),C[1]))),R[2]),w(l(w(d(Ft,G),z[1]),l(w(d(xt,Q),-B[1]),w(d(W,V),R[1]))),-C[2]))),F[3]),w(l(l(w(l(w(d(le,gt),O[1]),l(w(d(ae,pt),-R[1]),w(d(Et,rt),F[1]))),B[2]),w(l(w(d(le,gt),B[1]),l(w(d(te,nt),-R[1]),w(d(Ft,G),F[1]))),-O[2])),l(w(l(w(d(ae,pt),B[1]),l(w(d(te,nt),-O[1]),w(d(ot,Z),F[1]))),R[2]),w(l(w(d(Et,rt),B[1]),l(w(d(Ft,G),-O[1]),w(d(ot,Z),R[1]))),-F[2]))),z[3]))),l(l(w(l(l(w(l(w(d(le,gt),O[1]),l(w(d(ae,pt),-R[1]),w(d(Et,rt),F[1]))),z[2]),w(l(w(d(le,gt),z[1]),l(w(d(ee,it),-R[1]),w(d(xt,Q),F[1]))),-O[2])),l(w(l(w(d(ae,pt),z[1]),l(w(d(ee,it),-O[1]),w(d(Y,K),F[1]))),R[2]),w(l(w(d(Et,rt),z[1]),l(w(d(xt,Q),-O[1]),w(d(Y,K),R[1]))),-F[2]))),-B[3]),w(l(l(w(l(w(d(le,gt),B[1]),l(w(d(te,nt),-R[1]),w(d(Ft,G),F[1]))),z[2]),w(l(w(d(le,gt),z[1]),l(w(d(ee,it),-R[1]),w(d(xt,Q),F[1]))),-B[2])),l(w(l(w(d(te,nt),z[1]),l(w(d(ee,it),-B[1]),w(d(W,V),F[1]))),R[2]),w(l(w(d(Ft,G),z[1]),l(w(d(xt,Q),-B[1]),w(d(W,V),R[1]))),-F[2]))),O[3])),l(w(l(l(w(l(w(d(ae,pt),B[1]),l(w(d(te,nt),-O[1]),w(d(ot,Z),F[1]))),z[2]),w(l(w(d(ae,pt),z[1]),l(w(d(ee,it),-O[1]),w(d(Y,K),F[1]))),-B[2])),l(w(l(w(d(te,nt),z[1]),l(w(d(ee,it),-B[1]),w(d(W,V),F[1]))),O[2]),w(l(w(d(ot,Z),z[1]),l(w(d(Y,K),-B[1]),w(d(W,V),O[1]))),-F[2]))),-R[3]),w(l(l(w(l(w(d(Et,rt),B[1]),l(w(d(Ft,G),-O[1]),w(d(ot,Z),R[1]))),z[2]),w(l(w(d(Et,rt),z[1]),l(w(d(xt,Q),-O[1]),w(d(Y,K),R[1]))),-B[2])),l(w(l(w(d(Ft,G),z[1]),l(w(d(xt,Q),-B[1]),w(d(W,V),R[1]))),O[2]),w(l(w(d(ot,Z),z[1]),l(w(d(Y,K),-B[1]),w(d(W,V),O[1]))),-R[2]))),F[3]))))),we=l(l(l(w(l(l(w(l(w(d(ce,Ht),R[1]),l(w(d(le,gt),-C[1]),w(d(jt,mt),F[1]))),O[2]),w(l(w(d(ce,Ht),O[1]),l(w(d(ae,pt),-C[1]),w(d(kt,ht),F[1]))),-R[2])),l(w(l(w(d(le,gt),O[1]),l(w(d(ae,pt),-R[1]),w(d(Et,rt),F[1]))),C[2]),w(l(w(d(jt,mt),O[1]),l(w(d(kt,ht),-R[1]),w(d(Et,rt),C[1]))),-F[2]))),z[3]),l(w(l(l(w(l(w(d(ce,Ht),R[1]),l(w(d(le,gt),-C[1]),w(d(jt,mt),F[1]))),z[2]),w(l(w(d(ce,Ht),z[1]),l(w(d(ee,it),-C[1]),w(d(Pt,at),F[1]))),-R[2])),l(w(l(w(d(le,gt),z[1]),l(w(d(ee,it),-R[1]),w(d(xt,Q),F[1]))),C[2]),w(l(w(d(jt,mt),z[1]),l(w(d(Pt,at),-R[1]),w(d(xt,Q),C[1]))),-F[2]))),-O[3]),w(l(l(w(l(w(d(ce,Ht),O[1]),l(w(d(ae,pt),-C[1]),w(d(kt,ht),F[1]))),z[2]),w(l(w(d(ce,Ht),z[1]),l(w(d(ee,it),-C[1]),w(d(Pt,at),F[1]))),-O[2])),l(w(l(w(d(ae,pt),z[1]),l(w(d(ee,it),-O[1]),w(d(Y,K),F[1]))),C[2]),w(l(w(d(kt,ht),z[1]),l(w(d(Pt,at),-O[1]),w(d(Y,K),C[1]))),-F[2]))),R[3]))),l(l(w(l(l(w(l(w(d(le,gt),O[1]),l(w(d(ae,pt),-R[1]),w(d(Et,rt),F[1]))),z[2]),w(l(w(d(le,gt),z[1]),l(w(d(ee,it),-R[1]),w(d(xt,Q),F[1]))),-O[2])),l(w(l(w(d(ae,pt),z[1]),l(w(d(ee,it),-O[1]),w(d(Y,K),F[1]))),R[2]),w(l(w(d(Et,rt),z[1]),l(w(d(xt,Q),-O[1]),w(d(Y,K),R[1]))),-F[2]))),-C[3]),w(l(l(w(l(w(d(jt,mt),O[1]),l(w(d(kt,ht),-R[1]),w(d(Et,rt),C[1]))),z[2]),w(l(w(d(jt,mt),z[1]),l(w(d(Pt,at),-R[1]),w(d(xt,Q),C[1]))),-O[2])),l(w(l(w(d(kt,ht),z[1]),l(w(d(Pt,at),-O[1]),w(d(Y,K),C[1]))),R[2]),w(l(w(d(Et,rt),z[1]),l(w(d(xt,Q),-O[1]),w(d(Y,K),R[1]))),-C[2]))),F[3])),l(w(l(l(w(l(w(d(ce,Ht),O[1]),l(w(d(ae,pt),-C[1]),w(d(kt,ht),F[1]))),B[2]),w(l(w(d(ce,Ht),B[1]),l(w(d(te,nt),-C[1]),w(d(Bt,et),F[1]))),-O[2])),l(w(l(w(d(ae,pt),B[1]),l(w(d(te,nt),-O[1]),w(d(ot,Z),F[1]))),C[2]),w(l(w(d(kt,ht),B[1]),l(w(d(Bt,et),-O[1]),w(d(ot,Z),C[1]))),-F[2]))),z[3]),w(l(l(w(l(w(d(ce,Ht),O[1]),l(w(d(ae,pt),-C[1]),w(d(kt,ht),F[1]))),z[2]),w(l(w(d(ce,Ht),z[1]),l(w(d(ee,it),-C[1]),w(d(Pt,at),F[1]))),-O[2])),l(w(l(w(d(ae,pt),z[1]),l(w(d(ee,it),-O[1]),w(d(Y,K),F[1]))),C[2]),w(l(w(d(kt,ht),z[1]),l(w(d(Pt,at),-O[1]),w(d(Y,K),C[1]))),-F[2]))),-B[3])))),l(l(l(w(l(l(w(l(w(d(ce,Ht),B[1]),l(w(d(te,nt),-C[1]),w(d(Bt,et),F[1]))),z[2]),w(l(w(d(ce,Ht),z[1]),l(w(d(ee,it),-C[1]),w(d(Pt,at),F[1]))),-B[2])),l(w(l(w(d(te,nt),z[1]),l(w(d(ee,it),-B[1]),w(d(W,V),F[1]))),C[2]),w(l(w(d(Bt,et),z[1]),l(w(d(Pt,at),-B[1]),w(d(W,V),C[1]))),-F[2]))),O[3]),w(l(l(w(l(w(d(ae,pt),B[1]),l(w(d(te,nt),-O[1]),w(d(ot,Z),F[1]))),z[2]),w(l(w(d(ae,pt),z[1]),l(w(d(ee,it),-O[1]),w(d(Y,K),F[1]))),-B[2])),l(w(l(w(d(te,nt),z[1]),l(w(d(ee,it),-B[1]),w(d(W,V),F[1]))),O[2]),w(l(w(d(ot,Z),z[1]),l(w(d(Y,K),-B[1]),w(d(W,V),O[1]))),-F[2]))),-C[3])),l(w(l(l(w(l(w(d(kt,ht),B[1]),l(w(d(Bt,et),-O[1]),w(d(ot,Z),C[1]))),z[2]),w(l(w(d(kt,ht),z[1]),l(w(d(Pt,at),-O[1]),w(d(Y,K),C[1]))),-B[2])),l(w(l(w(d(Bt,et),z[1]),l(w(d(Pt,at),-B[1]),w(d(W,V),C[1]))),O[2]),w(l(w(d(ot,Z),z[1]),l(w(d(Y,K),-B[1]),w(d(W,V),O[1]))),-C[2]))),F[3]),w(l(l(w(l(w(d(jt,mt),O[1]),l(w(d(kt,ht),-R[1]),w(d(Et,rt),C[1]))),B[2]),w(l(w(d(jt,mt),B[1]),l(w(d(Bt,et),-R[1]),w(d(Ft,G),C[1]))),-O[2])),l(w(l(w(d(kt,ht),B[1]),l(w(d(Bt,et),-O[1]),w(d(ot,Z),C[1]))),R[2]),w(l(w(d(Et,rt),B[1]),l(w(d(Ft,G),-O[1]),w(d(ot,Z),R[1]))),-C[2]))),z[3]))),l(l(w(l(l(w(l(w(d(jt,mt),O[1]),l(w(d(kt,ht),-R[1]),w(d(Et,rt),C[1]))),z[2]),w(l(w(d(jt,mt),z[1]),l(w(d(Pt,at),-R[1]),w(d(xt,Q),C[1]))),-O[2])),l(w(l(w(d(kt,ht),z[1]),l(w(d(Pt,at),-O[1]),w(d(Y,K),C[1]))),R[2]),w(l(w(d(Et,rt),z[1]),l(w(d(xt,Q),-O[1]),w(d(Y,K),R[1]))),-C[2]))),-B[3]),w(l(l(w(l(w(d(jt,mt),B[1]),l(w(d(Bt,et),-R[1]),w(d(Ft,G),C[1]))),z[2]),w(l(w(d(jt,mt),z[1]),l(w(d(Pt,at),-R[1]),w(d(xt,Q),C[1]))),-B[2])),l(w(l(w(d(Bt,et),z[1]),l(w(d(Pt,at),-B[1]),w(d(W,V),C[1]))),R[2]),w(l(w(d(Ft,G),z[1]),l(w(d(xt,Q),-B[1]),w(d(W,V),R[1]))),-C[2]))),O[3])),l(w(l(l(w(l(w(d(kt,ht),B[1]),l(w(d(Bt,et),-O[1]),w(d(ot,Z),C[1]))),z[2]),w(l(w(d(kt,ht),z[1]),l(w(d(Pt,at),-O[1]),w(d(Y,K),C[1]))),-B[2])),l(w(l(w(d(Bt,et),z[1]),l(w(d(Pt,at),-B[1]),w(d(W,V),C[1]))),O[2]),w(l(w(d(ot,Z),z[1]),l(w(d(Y,K),-B[1]),w(d(W,V),O[1]))),-C[2]))),-R[3]),w(l(l(w(l(w(d(Et,rt),B[1]),l(w(d(Ft,G),-O[1]),w(d(ot,Z),R[1]))),z[2]),w(l(w(d(Et,rt),z[1]),l(w(d(xt,Q),-O[1]),w(d(Y,K),R[1]))),-B[2])),l(w(l(w(d(Ft,G),z[1]),l(w(d(xt,Q),-B[1]),w(d(W,V),R[1]))),O[2]),w(l(w(d(ot,Z),z[1]),l(w(d(Y,K),-B[1]),w(d(W,V),O[1]))),-R[2]))),C[3]))))),ve=d(pe,we);return ve[ve.length-1]}return I}var k=[y,p,x];function _(l){var d=k[l.length];return d||(d=k[l.length]=h(l.length)),d.apply(void 0,l)}function b(l,d,L,w,I,z,B,O){function R(C,F,N,V,K,Q){switch(arguments.length){case 0:case 1:return 0;case 2:return w(C,F);case 3:return I(C,F,N);case 4:return z(C,F,N,V);case 5:return B(C,F,N,V,K);case 6:return O(C,F,N,V,K,Q)}for(var at=new Array(arguments.length),it=0;it<arguments.length;++it)at[it]=arguments[it];return l(at)}return R}function P(){for(;k.length<=o;)k.push(h(k.length));g.exports=b.apply(void 0,[_].concat(k));for(var l=0;l<=o;++l)g.exports[l]=k[l]}P()},6606:function(g,v,e){var r=e(8167),f=6;function n(k){var _=k===2?h:k===3?y:k===4?p:k===5?x:s;return k<6?_(r[k]):_(r)}function a(){return[[0]]}function o(k,_){return[[_[0]],[k[0][0]]]}function h(k){return function(_,b){return[k([[+b[0],+_[0][1]],[+b[1],+_[1][1]]]),k([[+_[0][0],+b[0]],[+_[1][0],+b[1]]]),k(_)]}}function y(k){return function(_,b){return[k([[+b[0],+_[0][1],+_[0][2]],[+b[1],+_[1][1],+_[1][2]],[+b[2],+_[2][1],+_[2][2]]]),k([[+_[0][0],+b[0],+_[0][2]],[+_[1][0],+b[1],+_[1][2]],[+_[2][0],+b[2],+_[2][2]]]),k([[+_[0][0],+_[0][1],+b[0]],[+_[1][0],+_[1][1],+b[1]],[+_[2][0],+_[2][1],+b[2]]]),k(_)]}}function p(k){return function(_,b){return[k([[+b[0],+_[0][1],+_[0][2],+_[0][3]],[+b[1],+_[1][1],+_[1][2],+_[1][3]],[+b[2],+_[2][1],+_[2][2],+_[2][3]],[+b[3],+_[3][1],+_[3][2],+_[3][3]]]),k([[+_[0][0],+b[0],+_[0][2],+_[0][3]],[+_[1][0],+b[1],+_[1][2],+_[1][3]],[+_[2][0],+b[2],+_[2][2],+_[2][3]],[+_[3][0],+b[3],+_[3][2],+_[3][3]]]),k([[+_[0][0],+_[0][1],+b[0],+_[0][3]],[+_[1][0],+_[1][1],+b[1],+_[1][3]],[+_[2][0],+_[2][1],+b[2],+_[2][3]],[+_[3][0],+_[3][1],+b[3],+_[3][3]]]),k([[+_[0][0],+_[0][1],+_[0][2],+b[0]],[+_[1][0],+_[1][1],+_[1][2],+b[1]],[+_[2][0],+_[2][1],+_[2][2],+b[2]],[+_[3][0],+_[3][1],+_[3][2],+b[3]]]),k(_)]}}function x(k){return function(_,b){return[k([[+b[0],+_[0][1],+_[0][2],+_[0][3],+_[0][4]],[+b[1],+_[1][1],+_[1][2],+_[1][3],+_[1][4]],[+b[2],+_[2][1],+_[2][2],+_[2][3],+_[2][4]],[+b[3],+_[3][1],+_[3][2],+_[3][3],+_[3][4]],[+b[4],+_[4][1],+_[4][2],+_[4][3],+_[4][4]]]),k([[+_[0][0],+b[0],+_[0][2],+_[0][3],+_[0][4]],[+_[1][0],+b[1],+_[1][2],+_[1][3],+_[1][4]],[+_[2][0],+b[2],+_[2][2],+_[2][3],+_[2][4]],[+_[3][0],+b[3],+_[3][2],+_[3][3],+_[3][4]],[+_[4][0],+b[4],+_[4][2],+_[4][3],+_[4][4]]]),k([[+_[0][0],+_[0][1],+b[0],+_[0][3],+_[0][4]],[+_[1][0],+_[1][1],+b[1],+_[1][3],+_[1][4]],[+_[2][0],+_[2][1],+b[2],+_[2][3],+_[2][4]],[+_[3][0],+_[3][1],+b[3],+_[3][3],+_[3][4]],[+_[4][0],+_[4][1],+b[4],+_[4][3],+_[4][4]]]),k([[+_[0][0],+_[0][1],+_[0][2],+b[0],+_[0][4]],[+_[1][0],+_[1][1],+_[1][2],+b[1],+_[1][4]],[+_[2][0],+_[2][1],+_[2][2],+b[2],+_[2][4]],[+_[3][0],+_[3][1],+_[3][2],+b[3],+_[3][4]],[+_[4][0],+_[4][1],+_[4][2],+b[4],+_[4][4]]]),k([[+_[0][0],+_[0][1],+_[0][2],+_[0][3],+b[0]],[+_[1][0],+_[1][1],+_[1][2],+_[1][3],+b[1]],[+_[2][0],+_[2][1],+_[2][2],+_[2][3],+b[2]],[+_[3][0],+_[3][1],+_[3][2],+_[3][3],+b[3]],[+_[4][0],+_[4][1],+_[4][2],+_[4][3],+b[4]]]),k(_)]}}function s(k){return function(_,b){return[k([[+b[0],+_[0][1],+_[0][2],+_[0][3],+_[0][4],+_[0][5]],[+b[1],+_[1][1],+_[1][2],+_[1][3],+_[1][4],+_[1][5]],[+b[2],+_[2][1],+_[2][2],+_[2][3],+_[2][4],+_[2][5]],[+b[3],+_[3][1],+_[3][2],+_[3][3],+_[3][4],+_[3][5]],[+b[4],+_[4][1],+_[4][2],+_[4][3],+_[4][4],+_[4][5]],[+b[5],+_[5][1],+_[5][2],+_[5][3],+_[5][4],+_[5][5]]]),k([[+_[0][0],+b[0],+_[0][2],+_[0][3],+_[0][4],+_[0][5]],[+_[1][0],+b[1],+_[1][2],+_[1][3],+_[1][4],+_[1][5]],[+_[2][0],+b[2],+_[2][2],+_[2][3],+_[2][4],+_[2][5]],[+_[3][0],+b[3],+_[3][2],+_[3][3],+_[3][4],+_[3][5]],[+_[4][0],+b[4],+_[4][2],+_[4][3],+_[4][4],+_[4][5]],[+_[5][0],+b[5],+_[5][2],+_[5][3],+_[5][4],+_[5][5]]]),k([[+_[0][0],+_[0][1],+b[0],+_[0][3],+_[0][4],+_[0][5]],[+_[1][0],+_[1][1],+b[1],+_[1][3],+_[1][4],+_[1][5]],[+_[2][0],+_[2][1],+b[2],+_[2][3],+_[2][4],+_[2][5]],[+_[3][0],+_[3][1],+b[3],+_[3][3],+_[3][4],+_[3][5]],[+_[4][0],+_[4][1],+b[4],+_[4][3],+_[4][4],+_[4][5]],[+_[5][0],+_[5][1],+b[5],+_[5][3],+_[5][4],+_[5][5]]]),k([[+_[0][0],+_[0][1],+_[0][2],+b[0],+_[0][4],+_[0][5]],[+_[1][0],+_[1][1],+_[1][2],+b[1],+_[1][4],+_[1][5]],[+_[2][0],+_[2][1],+_[2][2],+b[2],+_[2][4],+_[2][5]],[+_[3][0],+_[3][1],+_[3][2],+b[3],+_[3][4],+_[3][5]],[+_[4][0],+_[4][1],+_[4][2],+b[4],+_[4][4],+_[4][5]],[+_[5][0],+_[5][1],+_[5][2],+b[5],+_[5][4],+_[5][5]]]),k([[+_[0][0],+_[0][1],+_[0][2],+_[0][3],+b[0],+_[0][5]],[+_[1][0],+_[1][1],+_[1][2],+_[1][3],+b[1],+_[1][5]],[+_[2][0],+_[2][1],+_[2][2],+_[2][3],+b[2],+_[2][5]],[+_[3][0],+_[3][1],+_[3][2],+_[3][3],+b[3],+_[3][5]],[+_[4][0],+_[4][1],+_[4][2],+_[4][3],+b[4],+_[4][5]],[+_[5][0],+_[5][1],+_[5][2],+_[5][3],+b[5],+_[5][5]]]),k([[+_[0][0],+_[0][1],+_[0][2],+_[0][3],+_[0][4],+b[0]],[+_[1][0],+_[1][1],+_[1][2],+_[1][3],+_[1][4],+b[1]],[+_[2][0],+_[2][1],+_[2][2],+_[2][3],+_[2][4],+b[2]],[+_[3][0],+_[3][1],+_[3][2],+_[3][3],+_[3][4],+b[3]],[+_[4][0],+_[4][1],+_[4][2],+_[4][3],+_[4][4],+b[4]],[+_[5][0],+_[5][1],+_[5][2],+_[5][3],+_[5][4],+b[5]]]),k(_)]}}var u=[a,o];function c(k,_,b,P,l,d,L,w){return function(I,z){switch(I.length){case 0:return k(I,z);case 1:return _(I,z);case 2:return b(I,z);case 3:return P(I,z);case 4:return l(I,z);case 5:return d(I,z)}var B=L[I.length];return B||(B=L[I.length]=w(I.length)),B(I,z)}}function T(){for(;u.length<f;)u.push(n(u.length));g.exports=c.apply(void 0,u.concat([u,n]));for(var k=0;k<f;++k)g.exports[k]=u[k]}T()},417:function(g,v,e){var r=e(9660),f=e(9662),n=e(8289),a=e(4078),o=5,h=11102230246251563e-32,y=(3+16*h)*h,p=(7+56*h)*h;function x(d,L,w,I){return function(z,B,O){var R=d(d(L(B[1],O[0]),L(-O[1],B[0])),d(L(z[1],B[0]),L(-B[1],z[0]))),C=d(L(z[1],O[0]),L(-O[1],z[0])),F=I(R,C);return F[F.length-1]}}function s(d,L,w,I){return function(z,B,O,R){var C=d(d(w(d(L(O[1],R[0]),L(-R[1],O[0])),B[2]),d(w(d(L(B[1],R[0]),L(-R[1],B[0])),-O[2]),w(d(L(B[1],O[0]),L(-O[1],B[0])),R[2]))),d(w(d(L(B[1],R[0]),L(-R[1],B[0])),z[2]),d(w(d(L(z[1],R[0]),L(-R[1],z[0])),-B[2]),w(d(L(z[1],B[0]),L(-B[1],z[0])),R[2])))),F=d(d(w(d(L(O[1],R[0]),L(-R[1],O[0])),z[2]),d(w(d(L(z[1],R[0]),L(-R[1],z[0])),-O[2]),w(d(L(z[1],O[0]),L(-O[1],z[0])),R[2]))),d(w(d(L(B[1],O[0]),L(-O[1],B[0])),z[2]),d(w(d(L(z[1],O[0]),L(-O[1],z[0])),-B[2]),w(d(L(z[1],B[0]),L(-B[1],z[0])),O[2])))),N=I(C,F);return N[N.length-1]}}function u(d,L,w,I){return function(z,B,O,R,C){var F=d(d(d(w(d(w(d(L(R[1],C[0]),L(-C[1],R[0])),O[2]),d(w(d(L(O[1],C[0]),L(-C[1],O[0])),-R[2]),w(d(L(O[1],R[0]),L(-R[1],O[0])),C[2]))),B[3]),d(w(d(w(d(L(R[1],C[0]),L(-C[1],R[0])),B[2]),d(w(d(L(B[1],C[0]),L(-C[1],B[0])),-R[2]),w(d(L(B[1],R[0]),L(-R[1],B[0])),C[2]))),-O[3]),w(d(w(d(L(O[1],C[0]),L(-C[1],O[0])),B[2]),d(w(d(L(B[1],C[0]),L(-C[1],B[0])),-O[2]),w(d(L(B[1],O[0]),L(-O[1],B[0])),C[2]))),R[3]))),d(w(d(w(d(L(O[1],R[0]),L(-R[1],O[0])),B[2]),d(w(d(L(B[1],R[0]),L(-R[1],B[0])),-O[2]),w(d(L(B[1],O[0]),L(-O[1],B[0])),R[2]))),-C[3]),d(w(d(w(d(L(R[1],C[0]),L(-C[1],R[0])),B[2]),d(w(d(L(B[1],C[0]),L(-C[1],B[0])),-R[2]),w(d(L(B[1],R[0]),L(-R[1],B[0])),C[2]))),z[3]),w(d(w(d(L(R[1],C[0]),L(-C[1],R[0])),z[2]),d(w(d(L(z[1],C[0]),L(-C[1],z[0])),-R[2]),w(d(L(z[1],R[0]),L(-R[1],z[0])),C[2]))),-B[3])))),d(d(w(d(w(d(L(B[1],C[0]),L(-C[1],B[0])),z[2]),d(w(d(L(z[1],C[0]),L(-C[1],z[0])),-B[2]),w(d(L(z[1],B[0]),L(-B[1],z[0])),C[2]))),R[3]),d(w(d(w(d(L(B[1],R[0]),L(-R[1],B[0])),z[2]),d(w(d(L(z[1],R[0]),L(-R[1],z[0])),-B[2]),w(d(L(z[1],B[0]),L(-B[1],z[0])),R[2]))),-C[3]),w(d(w(d(L(O[1],R[0]),L(-R[1],O[0])),B[2]),d(w(d(L(B[1],R[0]),L(-R[1],B[0])),-O[2]),w(d(L(B[1],O[0]),L(-O[1],B[0])),R[2]))),z[3]))),d(w(d(w(d(L(O[1],R[0]),L(-R[1],O[0])),z[2]),d(w(d(L(z[1],R[0]),L(-R[1],z[0])),-O[2]),w(d(L(z[1],O[0]),L(-O[1],z[0])),R[2]))),-B[3]),d(w(d(w(d(L(B[1],R[0]),L(-R[1],B[0])),z[2]),d(w(d(L(z[1],R[0]),L(-R[1],z[0])),-B[2]),w(d(L(z[1],B[0]),L(-B[1],z[0])),R[2]))),O[3]),w(d(w(d(L(B[1],O[0]),L(-O[1],B[0])),z[2]),d(w(d(L(z[1],O[0]),L(-O[1],z[0])),-B[2]),w(d(L(z[1],B[0]),L(-B[1],z[0])),O[2]))),-R[3]))))),N=d(d(d(w(d(w(d(L(R[1],C[0]),L(-C[1],R[0])),O[2]),d(w(d(L(O[1],C[0]),L(-C[1],O[0])),-R[2]),w(d(L(O[1],R[0]),L(-R[1],O[0])),C[2]))),z[3]),w(d(w(d(L(R[1],C[0]),L(-C[1],R[0])),z[2]),d(w(d(L(z[1],C[0]),L(-C[1],z[0])),-R[2]),w(d(L(z[1],R[0]),L(-R[1],z[0])),C[2]))),-O[3])),d(w(d(w(d(L(O[1],C[0]),L(-C[1],O[0])),z[2]),d(w(d(L(z[1],C[0]),L(-C[1],z[0])),-O[2]),w(d(L(z[1],O[0]),L(-O[1],z[0])),C[2]))),R[3]),w(d(w(d(L(O[1],R[0]),L(-R[1],O[0])),z[2]),d(w(d(L(z[1],R[0]),L(-R[1],z[0])),-O[2]),w(d(L(z[1],O[0]),L(-O[1],z[0])),R[2]))),-C[3]))),d(d(w(d(w(d(L(O[1],C[0]),L(-C[1],O[0])),B[2]),d(w(d(L(B[1],C[0]),L(-C[1],B[0])),-O[2]),w(d(L(B[1],O[0]),L(-O[1],B[0])),C[2]))),z[3]),w(d(w(d(L(O[1],C[0]),L(-C[1],O[0])),z[2]),d(w(d(L(z[1],C[0]),L(-C[1],z[0])),-O[2]),w(d(L(z[1],O[0]),L(-O[1],z[0])),C[2]))),-B[3])),d(w(d(w(d(L(B[1],C[0]),L(-C[1],B[0])),z[2]),d(w(d(L(z[1],C[0]),L(-C[1],z[0])),-B[2]),w(d(L(z[1],B[0]),L(-B[1],z[0])),C[2]))),O[3]),w(d(w(d(L(B[1],O[0]),L(-O[1],B[0])),z[2]),d(w(d(L(z[1],O[0]),L(-O[1],z[0])),-B[2]),w(d(L(z[1],B[0]),L(-B[1],z[0])),O[2]))),-C[3])))),V=I(F,N);return V[V.length-1]}}function c(d){var L=d===3?x:d===4?s:u;return L(f,r,n,a)}var T=c(3),k=c(4),_=[function(){return 0},function(){return 0},function(d,L){return L[0]-d[0]},function(d,L,w){var I=(d[1]-w[1])*(L[0]-w[0]),z=(d[0]-w[0])*(L[1]-w[1]),B=I-z,O;if(I>0){if(z<=0)return B;O=I+z}else if(I<0){if(z>=0)return B;O=-(I+z)}else return B;var R=y*O;return B>=R||B<=-R?B:T(d,L,w)},function(d,L,w,I){var z=d[0]-I[0],B=L[0]-I[0],O=w[0]-I[0],R=d[1]-I[1],C=L[1]-I[1],F=w[1]-I[1],N=d[2]-I[2],V=L[2]-I[2],K=w[2]-I[2],Q=B*F,at=O*C,it=O*R,q=z*F,W=z*C,Z=B*R,G=N*(Q-at)+V*(it-q)+K*(W-Z),et=(Math.abs(Q)+Math.abs(at))*Math.abs(N)+(Math.abs(it)+Math.abs(q))*Math.abs(V)+(Math.abs(W)+Math.abs(Z))*Math.abs(K),nt=p*et;return G>nt||-G>nt?G:k(d,L,w,I)}];function b(d){var L=_[d.length];return L||(L=_[d.length]=c(d.length)),L.apply(void 0,d)}function P(d,L,w,I,z,B,O){return function(R,C,F,N,V){switch(arguments.length){case 0:case 1:return 0;case 2:return I(R,C);case 3:return z(R,C,F);case 4:return B(R,C,F,N);case 5:return O(R,C,F,N,V)}for(var K=new Array(arguments.length),Q=0;Q<arguments.length;++Q)K[Q]=arguments[Q];return d(K)}}function l(){for(;_.length<=o;)_.push(c(_.length));g.exports=P.apply(void 0,[b].concat(_));for(var d=0;d<=o;++d)g.exports[d]=_[d]}l()},2019:function(g,v,e){var r=e(9662),f=e(8289);g.exports=n;function n(a,o){if(a.length===1)return f(o,a[0]);if(o.length===1)return f(a,o[0]);if(a.length===0||o.length===0)return[0];var h=[0];if(a.length<o.length)for(var y=0;y<a.length;++y)h=r(h,f(o,a[y]));else for(var y=0;y<o.length;++y)h=r(h,f(a,o[y]));return h}},8289:function(g,v,e){var r=e(9660),f=e(87);g.exports=n;function n(a,o){var h=a.length;if(h===1){var y=r(a[0],o);return y[0]?y:[y[1]]}var p=new Array(2*h),x=[.1,.1],s=[.1,.1],u=0;r(a[0],o,x),x[0]&&(p[u++]=x[0]);for(var c=1;c<h;++c){r(a[c],o,s);var T=x[1];f(T,s[0],x),x[0]&&(p[u++]=x[0]);var k=s[1],_=x[1],b=k+_,P=b-k,l=_-P;x[1]=b,l&&(p[u++]=l)}return x[1]&&(p[u++]=x[1]),u===0&&(p[u++]=0),p.length=u,p}},4434:function(g,v,e){g.exports=n;var r=e(417)[3];function f(a,o,h,y){for(var p=0;p<2;++p){var x=a[p],s=o[p],u=Math.min(x,s),c=Math.max(x,s),T=h[p],k=y[p],_=Math.min(T,k),b=Math.max(T,k);if(b<u||c<_)return!1}return!0}function n(a,o,h,y){var p=r(a,h,y),x=r(o,h,y);if(p>0&&x>0||p<0&&x<0)return!1;var s=r(h,a,o),u=r(y,a,o);return s>0&&u>0||s<0&&u<0?!1:p===0&&x===0&&s===0&&u===0?f(a,o,h,y):!0}},4078:function(g){g.exports=e;function v(r,f){var n=r+f,a=n-r,o=n-a,h=f-a,y=r-o,p=y+h;return p?[p,n]:[n]}function e(r,f){var n=r.length|0,a=f.length|0;if(n===1&&a===1)return v(r[0],-f[0]);var o=n+a,h=new Array(o),y=0,p=0,x=0,s=Math.abs,u=r[p],c=s(u),T=-f[x],k=s(T),_,b;c<k?(b=u,p+=1,p<n&&(u=r[p],c=s(u))):(b=T,x+=1,x<a&&(T=-f[x],k=s(T))),p<n&&c<k||x>=a?(_=u,p+=1,p<n&&(u=r[p],c=s(u))):(_=T,x+=1,x<a&&(T=-f[x],k=s(T)));for(var P=_+b,l=P-_,d=b-l,L=d,w=P,I,z,B,O,R;p<n&&x<a;)c<k?(_=u,p+=1,p<n&&(u=r[p],c=s(u))):(_=T,x+=1,x<a&&(T=-f[x],k=s(T))),b=L,P=_+b,l=P-_,d=b-l,d&&(h[y++]=d),I=w+P,z=I-w,B=I-z,O=P-z,R=w-B,L=R+O,w=I;for(;p<n;)_=u,b=L,P=_+b,l=P-_,d=b-l,d&&(h[y++]=d),I=w+P,z=I-w,B=I-z,O=P-z,R=w-B,L=R+O,w=I,p+=1,p<n&&(u=r[p]);for(;x<a;)_=T,b=L,P=_+b,l=P-_,d=b-l,d&&(h[y++]=d),I=w+P,z=I-w,B=I-z,O=P-z,R=w-B,L=R+O,w=I,x+=1,x<a&&(T=-f[x]);return L&&(h[y++]=L),w&&(h[y++]=w),y||(h[y++]=0),h.length=y,h}},9662:function(g){g.exports=e;function v(r,f){var n=r+f,a=n-r,o=n-a,h=f-a,y=r-o,p=y+h;return p?[p,n]:[n]}function e(r,f){var n=r.length|0,a=f.length|0;if(n===1&&a===1)return v(r[0],f[0]);var o=n+a,h=new Array(o),y=0,p=0,x=0,s=Math.abs,u=r[p],c=s(u),T=f[x],k=s(T),_,b;c<k?(b=u,p+=1,p<n&&(u=r[p],c=s(u))):(b=T,x+=1,x<a&&(T=f[x],k=s(T))),p<n&&c<k||x>=a?(_=u,p+=1,p<n&&(u=r[p],c=s(u))):(_=T,x+=1,x<a&&(T=f[x],k=s(T)));for(var P=_+b,l=P-_,d=b-l,L=d,w=P,I,z,B,O,R;p<n&&x<a;)c<k?(_=u,p+=1,p<n&&(u=r[p],c=s(u))):(_=T,x+=1,x<a&&(T=f[x],k=s(T))),b=L,P=_+b,l=P-_,d=b-l,d&&(h[y++]=d),I=w+P,z=I-w,B=I-z,O=P-z,R=w-B,L=R+O,w=I;for(;p<n;)_=u,b=L,P=_+b,l=P-_,d=b-l,d&&(h[y++]=d),I=w+P,z=I-w,B=I-z,O=P-z,R=w-B,L=R+O,w=I,p+=1,p<n&&(u=r[p]);for(;x<a;)_=T,b=L,P=_+b,l=P-_,d=b-l,d&&(h[y++]=d),I=w+P,z=I-w,B=I-z,O=P-z,R=w-B,L=R+O,w=I,x+=1,x<a&&(T=f[x]);return L&&(h[y++]=L),w&&(h[y++]=w),y||(h[y++]=0),h.length=y,h}},8691:function(g,v,e){g.exports=n;var r=e(2692),f=e(7037);function n(a){return f(r(a))}},7212:function(g,v,e){g.exports=u;var r=e(5050),f=e(5306),n=e(8729),a=e(1168);function o(c){for(var T=c.length,k=0,_=0;_<T;++_)k=Math.max(k,c[_].length)|0;return k-1}function h(c,T){for(var k=c.length,_=f.mallocUint8(k),b=0;b<k;++b)_[b]=c[b]<T|0;return _}function y(c,T){for(var k=c.length,_=T*(T+1)/2*k|0,b=f.mallocUint32(_*2),P=0,l=0;l<k;++l)for(var d=c[l],T=d.length,L=0;L<T;++L)for(var w=0;w<L;++w){var I=d[w],z=d[L];b[P++]=Math.min(I,z)|0,b[P++]=Math.max(I,z)|0}var B=P/2|0;n(r(b,[B,2]));for(var O=2,l=2;l<P;l+=2)b[l-2]===b[l]&&b[l-1]===b[l+1]||(b[O++]=b[l],b[O++]=b[l+1]);return r(b,[O/2|0,2])}function p(c,T,k,_){for(var b=c.data,P=c.shape[0],l=f.mallocDouble(P),d=0,L=0;L<P;++L){var w=b[2*L],I=b[2*L+1];if(k[w]!==k[I]){var z=T[w],B=T[I];b[2*d]=w,b[2*d+1]=I,l[d++]=(B-_)/(B-z)}}return c.shape[0]=d,r(l,[d])}function x(c,T){var k=f.mallocInt32(T*2),_=c.shape[0],b=c.data;k[0]=0;for(var P=0,l=0;l<_;++l){var d=b[2*l];if(d!==P){for(k[2*P+1]=l;++P<d;)k[2*P]=l,k[2*P+1]=l;k[2*P]=l}}for(k[2*P+1]=_;++P<T;)k[2*P]=k[2*P+1]=_;return k}function s(c){for(var T=c.shape[0]|0,k=c.data,_=new Array(T),b=0;b<T;++b)_[b]=[k[2*b],k[2*b+1]];return _}function u(c,T,k,_){k=k||0,typeof _>"u"&&(_=o(c));var b=c.length;if(b===0||_<1)return{cells:[],vertexIds:[],vertexWeights:[]};var P=h(T,+k),l=y(c,_),d=p(l,T,P,+k),L=x(l,T.length|0),w=a(_)(c,l.data,L,P),I=s(l),z=[].slice.call(d.data,0,d.shape[0]);return f.free(P),f.free(l.data),f.free(d.data),f.free(L),{cells:w,vertexIds:I,vertexWeights:z}}},1168:function(g){g.exports=e;var v=[function(){function r(f,n,a,o){for(var h=f.length,y=[],p=0;p<h;++p){var x=f[p];x.length}return y}return r},function(){function r(n,a,o,h){for(var y=Math.min(o,h)|0,p=Math.max(o,h)|0,x=n[2*y],s=n[2*y+1];x<s;){var u=x+s>>1,c=a[2*u+1];if(c===p)return u;p<c?s=u:x=u+1}return x}function f(n,a,o,h){for(var y=n.length,p=[],x=0;x<y;++x){var s=n[x],u=s.length;if(u===2){var c=(h[s[0]]<<0)+(h[s[1]]<<1);if(c===0||c===3)continue;switch(c){case 0:break;case 1:p.push([r(o,a,s[0],s[1])]);break;case 2:p.push([r(o,a,s[1],s[0])]);break}}}return p}return f},function(){function r(n,a,o,h){for(var y=Math.min(o,h)|0,p=Math.max(o,h)|0,x=n[2*y],s=n[2*y+1];x<s;){var u=x+s>>1,c=a[2*u+1];if(c===p)return u;p<c?s=u:x=u+1}return x}function f(n,a,o,h){for(var y=n.length,p=[],x=0;x<y;++x){var s=n[x],u=s.length;if(u===3){var c=(h[s[0]]<<0)+(h[s[1]]<<1)+(h[s[2]]<<2);if(c===0||c===7)continue;switch(c){case 0:break;case 1:p.push([r(o,a,s[0],s[2]),r(o,a,s[0],s[1])]);break;case 2:p.push([r(o,a,s[1],s[0]),r(o,a,s[1],s[2])]);break;case 3:p.push([r(o,a,s[0],s[2]),r(o,a,s[1],s[2])]);break;case 4:p.push([r(o,a,s[2],s[1]),r(o,a,s[2],s[0])]);break;case 5:p.push([r(o,a,s[2],s[1]),r(o,a,s[0],s[1])]);break;case 6:p.push([r(o,a,s[1],s[0]),r(o,a,s[2],s[0])]);break}}else if(u===2){var c=(h[s[0]]<<0)+(h[s[1]]<<1);if(c===0||c===3)continue;switch(c){case 0:break;case 1:p.push([r(o,a,s[0],s[1])]);break;case 2:p.push([r(o,a,s[1],s[0])]);break}}}return p}return f},function(){function r(n,a,o,h){for(var y=Math.min(o,h)|0,p=Math.max(o,h)|0,x=n[2*y],s=n[2*y+1];x<s;){var u=x+s>>1,c=a[2*u+1];if(c===p)return u;p<c?s=u:x=u+1}return x}function f(n,a,o,h){for(var y=n.length,p=[],x=0;x<y;++x){var s=n[x],u=s.length;if(u===4){var c=(h[s[0]]<<0)+(h[s[1]]<<1)+(h[s[2]]<<2)+(h[s[3]]<<3);if(c===0||c===15)continue;switch(c){case 0:break;case 1:p.push([r(o,a,s[0],s[1]),r(o,a,s[0],s[2]),r(o,a,s[0],s[3])]);break;case 2:p.push([r(o,a,s[1],s[2]),r(o,a,s[1],s[0]),r(o,a,s[1],s[3])]);break;case 3:p.push([r(o,a,s[1],s[2]),r(o,a,s[0],s[2]),r(o,a,s[0],s[3])],[r(o,a,s[1],s[3]),r(o,a,s[1],s[2]),r(o,a,s[0],s[3])]);break;case 4:p.push([r(o,a,s[2],s[0]),r(o,a,s[2],s[1]),r(o,a,s[2],s[3])]);break;case 5:p.push([r(o,a,s[0],s[1]),r(o,a,s[2],s[1]),r(o,a,s[0],s[3])],[r(o,a,s[2],s[1]),r(o,a,s[2],s[3]),r(o,a,s[0],s[3])]);break;case 6:p.push([r(o,a,s[2],s[0]),r(o,a,s[1],s[0]),r(o,a,s[1],s[3])],[r(o,a,s[2],s[3]),r(o,a,s[2],s[0]),r(o,a,s[1],s[3])]);break;case 7:p.push([r(o,a,s[0],s[3]),r(o,a,s[1],s[3]),r(o,a,s[2],s[3])]);break;case 8:p.push([r(o,a,s[3],s[1]),r(o,a,s[3],s[0]),r(o,a,s[3],s[2])]);break;case 9:p.push([r(o,a,s[3],s[1]),r(o,a,s[0],s[1]),r(o,a,s[0],s[2])],[r(o,a,s[3],s[2]),r(o,a,s[3],s[1]),r(o,a,s[0],s[2])]);break;case 10:p.push([r(o,a,s[1],s[0]),r(o,a,s[3],s[0]),r(o,a,s[1],s[2])],[r(o,a,s[3],s[0]),r(o,a,s[3],s[2]),r(o,a,s[1],s[2])]);break;case 11:p.push([r(o,a,s[1],s[2]),r(o,a,s[0],s[2]),r(o,a,s[3],s[2])]);break;case 12:p.push([r(o,a,s[3],s[0]),r(o,a,s[2],s[0]),r(o,a,s[2],s[1])],[r(o,a,s[3],s[1]),r(o,a,s[3],s[0]),r(o,a,s[2],s[1])]);break;case 13:p.push([r(o,a,s[0],s[1]),r(o,a,s[2],s[1]),r(o,a,s[3],s[1])]);break;case 14:p.push([r(o,a,s[2],s[0]),r(o,a,s[1],s[0]),r(o,a,s[3],s[0])]);break}}else if(u===3){var c=(h[s[0]]<<0)+(h[s[1]]<<1)+(h[s[2]]<<2);if(c===0||c===7)continue;switch(c){case 0:break;case 1:p.push([r(o,a,s[0],s[2]),r(o,a,s[0],s[1])]);break;case 2:p.push([r(o,a,s[1],s[0]),r(o,a,s[1],s[2])]);break;case 3:p.push([r(o,a,s[0],s[2]),r(o,a,s[1],s[2])]);break;case 4:p.push([r(o,a,s[2],s[1]),r(o,a,s[2],s[0])]);break;case 5:p.push([r(o,a,s[2],s[1]),r(o,a,s[0],s[1])]);break;case 6:p.push([r(o,a,s[1],s[0]),r(o,a,s[2],s[0])]);break}}else if(u===2){var c=(h[s[0]]<<0)+(h[s[1]]<<1);if(c===0||c===3)continue;switch(c){case 0:break;case 1:p.push([r(o,a,s[0],s[1])]);break;case 2:p.push([r(o,a,s[1],s[0])]);break}}}return p}return f}];function e(r){return v[r]()}},8211:function(g,v,e){e(2288),e(1731);function r(f,n){var a=f.length,o=f.length-n.length,h=Math.min;if(o)return o;switch(a){case 0:return 0;case 1:return f[0]-n[0];case 2:var u=f[0]+f[1]-n[0]-n[1];return u||h(f[0],f[1])-h(n[0],n[1]);case 3:var y=f[0]+f[1],p=n[0]+n[1];if(u=y+f[2]-(p+n[2]),u)return u;var x=h(f[0],f[1]),s=h(n[0],n[1]),u=h(x,f[2])-h(s,n[2]);return u||h(x+f[2],y)-h(s+n[2],p);default:var c=f.slice(0);c.sort();var T=n.slice(0);T.sort();for(var k=0;k<a;++k)if(o=c[k]-T[k],o)return o;return 0}}v.H=r},9392:function(g,v){"use restrict";var e=32;v.INT_BITS=e,v.INT_MAX=2147483647,v.INT_MIN=-1<<e-1,v.sign=function(n){return(n>0)-(n<0)},v.abs=function(n){var a=n>>e-1;return(n^a)-a},v.min=function(n,a){return a^(n^a)&-(n<a)},v.max=function(n,a){return n^(n^a)&-(n<a)},v.isPow2=function(n){return!(n&n-1)&&!!n},v.log2=function(n){var a,o;return a=(n>65535)<<4,n>>>=a,o=(n>255)<<3,n>>>=o,a|=o,o=(n>15)<<2,n>>>=o,a|=o,o=(n>3)<<1,n>>>=o,a|=o,a|n>>1},v.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},v.popCount=function(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),(n+(n>>>4)&252645135)*16843009>>>24};function r(n){var a=32;return n&=-n,n&&a--,n&65535&&(a-=16),n&16711935&&(a-=8),n&252645135&&(a-=4),n&858993459&&(a-=2),n&1431655765&&(a-=1),a}v.countTrailingZeros=r,v.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1},v.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n-(n>>>1)},v.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,n&=15,27030>>>n&1};var f=new Array(256);(function(n){for(var a=0;a<256;++a){var o=a,h=a,y=7;for(o>>>=1;o;o>>>=1)h<<=1,h|=o&1,--y;n[a]=h<<y&255}})(f),v.reverse=function(n){return f[n&255]<<24|f[n>>>8&255]<<16|f[n>>>16&255]<<8|f[n>>>24&255]},v.interleave2=function(n,a){return n&=65535,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,a&=65535,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,n|a<<1},v.deinterleave2=function(n,a){return n=n>>>a&1431655765,n=(n|n>>>1)&858993459,n=(n|n>>>2)&252645135,n=(n|n>>>4)&16711935,n=(n|n>>>16)&65535,n<<16>>16},v.interleave3=function(n,a,o){return n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,a&=1023,a=(a|a<<16)&4278190335,a=(a|a<<8)&251719695,a=(a|a<<4)&3272356035,a=(a|a<<2)&1227133513,n|=a<<1,o&=1023,o=(o|o<<16)&4278190335,o=(o|o<<8)&251719695,o=(o|o<<4)&3272356035,o=(o|o<<2)&1227133513,n|o<<2},v.deinterleave3=function(n,a){return n=n>>>a&1227133513,n=(n|n>>>2)&3272356035,n=(n|n>>>4)&251719695,n=(n|n>>>8)&4278190335,n=(n|n>>>16)&1023,n<<22>>22},v.nextCombination=function(n){var a=n|n-1;return a+1|(~a&-~a)-1>>>r(n)+1}},6656:function(g,v,e){"use restrict";var r=e(9392),f=e(9521);function n(d){for(var L=0,w=Math.max,I=0,z=d.length;I<z;++I)L=w(L,d[I].length);return L-1}v.dimension=n;function a(d){for(var L=-1,w=Math.max,I=0,z=d.length;I<z;++I)for(var B=d[I],O=0,R=B.length;O<R;++O)L=w(L,B[O]);return L+1}v.countVertices=a;function o(d){for(var L=new Array(d.length),w=0,I=d.length;w<I;++w)L[w]=d[w].slice(0);return L}v.cloneCells=o;function h(d,L){var w=d.length,I=d.length-L.length,z=Math.min;if(I)return I;switch(w){case 0:return 0;case 1:return d[0]-L[0];case 2:var F=d[0]+d[1]-L[0]-L[1];return F||z(d[0],d[1])-z(L[0],L[1]);case 3:var B=d[0]+d[1],O=L[0]+L[1];if(F=B+d[2]-(O+L[2]),F)return F;var R=z(d[0],d[1]),C=z(L[0],L[1]),F=z(R,d[2])-z(C,L[2]);return F||z(R+d[2],B)-z(C+L[2],O);default:var N=d.slice(0);N.sort();var V=L.slice(0);V.sort();for(var K=0;K<w;++K)if(I=N[K]-V[K],I)return I;return 0}}v.compareCells=h;function y(d,L){return h(d[0],L[0])}function p(d,L){if(L){for(var w=d.length,I=new Array(w),z=0;z<w;++z)I[z]=[d[z],L[z]];I.sort(y);for(var z=0;z<w;++z)d[z]=I[z][0],L[z]=I[z][1];return d}else return d.sort(h),d}v.normalize=p;function x(d){if(d.length===0)return[];for(var L=1,w=d.length,I=1;I<w;++I){var z=d[I];if(h(z,d[I-1])){if(I===L){L++;continue}d[L++]=z}}return d.length=L,d}v.unique=x;function s(d,L){for(var w=0,I=d.length-1,z=-1;w<=I;){var B=w+I>>1,O=h(d[B],L);O<=0?(O===0&&(z=B),w=B+1):O>0&&(I=B-1)}return z}v.findCell=s;function u(d,L){for(var w=new Array(d.length),I=0,z=w.length;I<z;++I)w[I]=[];for(var B=[],I=0,O=L.length;I<O;++I)for(var R=L[I],C=R.length,F=1,N=1<<C;F<N;++F){B.length=r.popCount(F);for(var V=0,K=0;K<C;++K)F&1<<K&&(B[V++]=R[K]);var Q=s(d,B);if(!(Q<0))for(;w[Q++].push(I),!(Q>=d.length||h(d[Q],B)!==0););}return w}v.incidence=u;function c(d,L){if(!L)return u(x(k(d,0)),d);for(var w=new Array(L),I=0;I<L;++I)w[I]=[];for(var I=0,z=d.length;I<z;++I)for(var B=d[I],O=0,R=B.length;O<R;++O)w[B[O]].push(I);return w}v.dual=c;function T(d){for(var L=[],w=0,I=d.length;w<I;++w)for(var z=d[w],B=z.length|0,O=1,R=1<<B;O<R;++O){for(var C=[],F=0;F<B;++F)O>>>F&1&&C.push(z[F]);L.push(C)}return p(L)}v.explode=T;function k(d,L){if(L<0)return[];for(var w=[],I=(1<<L+1)-1,z=0;z<d.length;++z)for(var B=d[z],O=I;O<1<<B.length;O=r.nextCombination(O)){for(var R=new Array(L+1),C=0,F=0;F<B.length;++F)O&1<<F&&(R[C++]=B[F]);w.push(R)}return p(w)}v.skeleton=k;function _(d){for(var L=[],w=0,I=d.length;w<I;++w)for(var z=d[w],B=0,O=z.length;B<O;++B){for(var R=new Array(z.length-1),C=0,F=0;C<O;++C)C!==B&&(R[F++]=z[C]);L.push(R)}return p(L)}v.boundary=_;function b(d,L){for(var w=new f(L),I=0;I<d.length;++I)for(var z=d[I],B=0;B<z.length;++B)for(var O=B+1;O<z.length;++O)w.link(z[B],z[O]);for(var R=[],C=w.ranks,I=0;I<C.length;++I)C[I]=-1;for(var I=0;I<d.length;++I){var F=w.find(d[I][0]);C[F]<0?(C[F]=R.length,R.push([d[I].slice(0)])):R[C[F]].push(d[I].slice(0))}return R}function P(d){for(var L=x(p(k(d,0))),w=new f(L.length),I=0;I<d.length;++I)for(var z=d[I],B=0;B<z.length;++B)for(var O=s(L,[z[B]]),R=B+1;R<z.length;++R)w.link(O,s(L,[z[R]]));for(var C=[],F=w.ranks,I=0;I<F.length;++I)F[I]=-1;for(var I=0;I<d.length;++I){var N=w.find(s(L,[d[I][0]]));F[N]<0?(F[N]=C.length,C.push([d[I].slice(0)])):C[F[N]].push(d[I].slice(0))}return C}function l(d,L){return L?b(d,L):P(d)}v.connectedComponents=l},9521:function(g){"use restrict";g.exports=v;function v(e){this.roots=new Array(e),this.ranks=new Array(e);for(var r=0;r<e;++r)this.roots[r]=r,this.ranks[r]=0}v.prototype.length=function(){return this.roots.length},v.prototype.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},v.prototype.find=function(e){for(var r=this.roots;r[e]!==e;){var f=r[e];r[e]=r[f],e=f}return e},v.prototype.link=function(e,r){var f=this.find(e),n=this.find(r);if(f!==n){var a=this.ranks,o=this.roots,h=a[f],y=a[n];h<y?o[f]=n:y<h?o[n]=f:(o[n]=f,++a[f])}}},8243:function(g,v,e){g.exports=a;var r=e(417),f=e(6656);function n(o,h,y){var p=Math.abs(r(o,h,y)),x=Math.sqrt(Math.pow(h[0]-y[0],2)+Math.pow(h[1]-y[1],2));return p/x}function a(o,h,y){for(var p=h.length,x=o.length,s=new Array(p),u=new Array(p),c=new Array(p),T=new Array(p),k=0;k<p;++k)s[k]=u[k]=-1,c[k]=1/0,T[k]=!1;for(var k=0;k<x;++k){var _=o[k];if(_.length!==2)throw new Error("Input must be a graph");var b=_[1],P=_[0];u[P]!==-1?u[P]=-2:u[P]=b,s[b]!==-1?s[b]=-2:s[b]=P}function l(q){if(T[q])return 1/0;var W=s[q],Z=u[q];return W<0||Z<0?1/0:n(h[q],h[W],h[Z])}function d(q,W){var Z=C[q],G=C[W];C[q]=G,C[W]=Z,F[Z]=W,F[G]=q}function L(q){return c[C[q]]}function w(q){return q&1?q-1>>1:(q>>1)-1}function I(q){for(var W=L(q);;){var Z=W,G=2*q+1,et=2*(q+1),nt=q;if(G<V){var X=L(G);X<Z&&(nt=G,Z=X)}if(et<V){var Y=L(et);Y<Z&&(nt=et)}if(nt===q)return q;d(q,nt),q=nt}}function z(q){for(var W=L(q);q>0;){var Z=w(q);if(Z>=0){var G=L(Z);if(W<G){d(q,Z),q=Z;continue}}return q}}function B(){if(V>0){var q=C[0];return d(0,V-1),V-=1,I(0),q}return-1}function O(q,W){var Z=C[q];return c[Z]===W?q:(c[Z]=-1/0,z(q),B(),c[Z]=W,V+=1,z(V-1))}function R(q){if(!T[q]){T[q]=!0;var W=s[q],Z=u[q];s[Z]>=0&&(s[Z]=W),u[W]>=0&&(u[W]=Z),F[W]>=0&&O(F[W],l(W)),F[Z]>=0&&O(F[Z],l(Z))}}for(var C=[],F=new Array(p),k=0;k<p;++k){var N=c[k]=l(k);N<1/0?(F[k]=C.length,C.push(k)):F[k]=-1}for(var V=C.length,k=V>>1;k>=0;--k)I(k);for(;;){var K=B();if(K<0||c[K]>y)break;R(K)}for(var Q=[],k=0;k<p;++k)T[k]||(F[k]=Q.length,Q.push(h[k].slice()));Q.length;function at(q,W){if(q[W]<0)return W;var Z=W,G=W;do{var et=q[G];if(!T[G]||et<0||et===G||(G=et,et=q[G],!T[G]||et<0||et===G))break;G=et,Z=q[Z]}while(Z!==G);for(var nt=W;nt!==G;nt=q[nt])q[nt]=G;return G}var it=[];return o.forEach(function(q){var W=at(s,q[0]),Z=at(u,q[1]);if(W>=0&&Z>=0&&W!==Z){var G=F[W],et=F[Z];G!==et&&it.push([G,et])}}),f.unique(f.normalize(it)),{positions:Q,edges:it}}},6638:function(g,v,e){g.exports=n;var r=e(417);function f(a,o){var h,y;if(o[0][0]<o[1][0])h=o[0],y=o[1];else if(o[0][0]>o[1][0])h=o[1],y=o[0];else{var p=Math.min(a[0][1],a[1][1]),x=Math.max(a[0][1],a[1][1]),s=Math.min(o[0][1],o[1][1]),u=Math.max(o[0][1],o[1][1]);return x<s?x-s:p>u?p-u:x-u}var c,T;a[0][1]<a[1][1]?(c=a[0],T=a[1]):(c=a[1],T=a[0]);var k=r(y,h,c);return k||(k=r(y,h,T),k)?k:T-y}function n(a,o){var h,y;if(o[0][0]<o[1][0])h=o[0],y=o[1];else if(o[0][0]>o[1][0])h=o[1],y=o[0];else return f(o,a);var p,x;if(a[0][0]<a[1][0])p=a[0],x=a[1];else if(a[0][0]>a[1][0])p=a[1],x=a[0];else return-f(a,o);var s=r(h,y,x),u=r(h,y,p);if(s<0){if(u<=0)return s}else if(s>0){if(u>=0)return s}else if(u)return u;if(s=r(x,p,y),u=r(x,p,h),s<0){if(u<=0)return s}else if(s>0){if(u>=0)return s}else if(u)return u;return y[0]-x[0]}},4385:function(g,v,e){g.exports=u;var r=e(5070),f=e(7080),n=e(417),a=e(6638);function o(c,T,k){this.slabs=c,this.coordinates=T,this.horizontal=k}var h=o.prototype;function y(c,T){return c.y-T}function p(c,T){for(var k=null;c;){var _=c.key,b,P;_[0][0]<_[1][0]?(b=_[0],P=_[1]):(b=_[1],P=_[0]);var l=n(b,P,T);if(l<0)c=c.left;else if(l>0)if(T[0]!==_[1][0])k=c,c=c.right;else{var d=p(c.right,T);if(d)return d;c=c.left}else{if(T[0]!==_[1][0])return c;var d=p(c.right,T);if(d)return d;c=c.left}}return k}h.castUp=function(c){var T=r.le(this.coordinates,c[0]);if(T<0)return-1;this.slabs[T];var k=p(this.slabs[T],c),_=-1;if(k&&(_=k.value),this.coordinates[T]===c[0]){var b=null;if(k&&(b=k.key),T>0){var P=p(this.slabs[T-1],c);P&&(b?a(P.key,b)>0&&(b=P.key,_=P.value):(_=P.value,b=P.key))}var l=this.horizontal[T];if(l.length>0){var d=r.ge(l,c[1],y);if(d<l.length){var L=l[d];if(c[1]===L.y){if(L.closed)return L.index;for(;d<l.length-1&&l[d+1].y===c[1];)if(d=d+1,L=l[d],L.closed)return L.index;if(L.y===c[1]&&!L.start){if(d=d+1,d>=l.length)return _;L=l[d]}}if(L.start)if(b){var w=n(b[0],b[1],[c[0],L.y]);b[0][0]>b[1][0]&&(w=-w),w>0&&(_=L.index)}else _=L.index;else L.y!==c[1]&&(_=L.index)}}}return _};function x(c,T,k,_){this.y=c,this.index=T,this.start=k,this.closed=_}function s(c,T,k,_){this.x=c,this.segment=T,this.create=k,this.index=_}function u(c){for(var T=c.length,k=2*T,_=new Array(k),b=0;b<T;++b){var P=c[b],l=P[0][0]<P[1][0];_[2*b]=new s(P[0][0],P,l,b),_[2*b+1]=new s(P[1][0],P,!l,b)}_.sort(function(R,C){var F=R.x-C.x;return F||(F=R.create-C.create,F)?F:Math.min(R.segment[0][1],R.segment[1][1])-Math.min(C.segment[0][1],C.segment[1][1])});for(var d=f(a),L=[],w=[],I=[],b=0;b<k;){for(var z=_[b].x,B=[];b<k;){var O=_[b];if(O.x!==z)break;b+=1,O.segment[0][0]===O.x&&O.segment[1][0]===O.x?O.create&&(O.segment[0][1]<O.segment[1][1]?(B.push(new x(O.segment[0][1],O.index,!0,!0)),B.push(new x(O.segment[1][1],O.index,!1,!1))):(B.push(new x(O.segment[1][1],O.index,!0,!1)),B.push(new x(O.segment[0][1],O.index,!1,!0)))):O.create?d=d.insert(O.segment,O.index):d=d.remove(O.segment)}L.push(d.root),w.push(z),I.push(B)}return new o(L,w,I)}},4670:function(g,v,e){var r=e(9130),f=e(9662);g.exports=o,g.exports.positive=h,g.exports.negative=y;function n(p,x){var s=f(r(p,x),[x[x.length-1]]);return s[s.length-1]}function a(p,x,s,u){var c=u-x,T=-x/c;T<0?T=0:T>1&&(T=1);for(var k=1-T,_=p.length,b=new Array(_),P=0;P<_;++P)b[P]=T*p[P]+k*s[P];return b}function o(p,x){for(var s=[],u=[],c=n(p[p.length-1],x),T=p[p.length-1],k=p[0],_=0;_<p.length;++_,T=k){k=p[_];var b=n(k,x);if(c<0&&b>0||c>0&&b<0){var P=a(T,b,k,c);s.push(P),u.push(P.slice())}b<0?u.push(k.slice()):b>0?s.push(k.slice()):(s.push(k.slice()),u.push(k.slice())),c=b}return{positive:s,negative:u}}function h(p,x){for(var s=[],u=n(p[p.length-1],x),c=p[p.length-1],T=p[0],k=0;k<p.length;++k,c=T){T=p[k];var _=n(T,x);(u<0&&_>0||u>0&&_<0)&&s.push(a(c,_,T,u)),_>=0&&s.push(T.slice()),u=_}return s}function y(p,x){for(var s=[],u=n(p[p.length-1],x),c=p[p.length-1],T=p[0],k=0;k<p.length;++k,c=T){T=p[k];var _=n(T,x);(u<0&&_>0||u>0&&_<0)&&s.push(a(c,_,T,u)),_<=0&&s.push(T.slice()),u=_}return s}},8974:function(g,v,e){var r;(function(){var f={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(p){return o(y(p),arguments)}function a(p,x){return n.apply(null,[p].concat(x||[]))}function o(p,x){var s=1,u=p.length,c,T="",k,_,b,P,l,d,L,w;for(k=0;k<u;k++)if(typeof p[k]=="string")T+=p[k];else if(typeof p[k]=="object"){if(b=p[k],b.keys)for(c=x[s],_=0;_<b.keys.length;_++){if(c==null)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',b.keys[_],b.keys[_-1]));c=c[b.keys[_]]}else b.param_no?c=x[b.param_no]:c=x[s++];if(f.not_type.test(b.type)&&f.not_primitive.test(b.type)&&c instanceof Function&&(c=c()),f.numeric_arg.test(b.type)&&typeof c!="number"&&isNaN(c))throw new TypeError(n("[sprintf] expecting number but found %T",c));switch(f.number.test(b.type)&&(L=c>=0),b.type){case"b":c=parseInt(c,10).toString(2);break;case"c":c=String.fromCharCode(parseInt(c,10));break;case"d":case"i":c=parseInt(c,10);break;case"j":c=JSON.stringify(c,null,b.width?parseInt(b.width):0);break;case"e":c=b.precision?parseFloat(c).toExponential(b.precision):parseFloat(c).toExponential();break;case"f":c=b.precision?parseFloat(c).toFixed(b.precision):parseFloat(c);break;case"g":c=b.precision?String(Number(c.toPrecision(b.precision))):parseFloat(c);break;case"o":c=(parseInt(c,10)>>>0).toString(8);break;case"s":c=String(c),c=b.precision?c.substring(0,b.precision):c;break;case"t":c=String(!!c),c=b.precision?c.substring(0,b.precision):c;break;case"T":c=Object.prototype.toString.call(c).slice(8,-1).toLowerCase(),c=b.precision?c.substring(0,b.precision):c;break;case"u":c=parseInt(c,10)>>>0;break;case"v":c=c.valueOf(),c=b.precision?c.substring(0,b.precision):c;break;case"x":c=(parseInt(c,10)>>>0).toString(16);break;case"X":c=(parseInt(c,10)>>>0).toString(16).toUpperCase();break}f.json.test(b.type)?T+=c:(f.number.test(b.type)&&(!L||b.sign)?(w=L?"+":"-",c=c.toString().replace(f.sign,"")):w="",l=b.pad_char?b.pad_char==="0"?"0":b.pad_char.charAt(1):" ",d=b.width-(w+c).length,P=b.width&&d>0?l.repeat(d):"",T+=b.align?w+c+P:l==="0"?w+P+c:P+w+c)}return T}var h=Object.create(null);function y(p){if(h[p])return h[p];for(var x=p,s,u=[],c=0;x;){if((s=f.text.exec(x))!==null)u.push(s[0]);else if((s=f.modulo.exec(x))!==null)u.push("%");else if((s=f.placeholder.exec(x))!==null){if(s[2]){c|=1;var T=[],k=s[2],_=[];if((_=f.key.exec(k))!==null)for(T.push(_[1]);(k=k.substring(_[0].length))!=="";)if((_=f.key_access.exec(k))!==null)T.push(_[1]);else if((_=f.index_access.exec(k))!==null)T.push(_[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");s[2]=T}else c|=2;if(c===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");u.push({placeholder:s[0],param_no:s[1],keys:s[2],sign:s[3],pad_char:s[4],align:s[5],width:s[6],precision:s[7],type:s[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");x=x.substring(s[0].length)}return h[p]=u}v.sprintf=n,v.vsprintf=a,typeof window<"u"&&(window.sprintf=n,window.vsprintf=a,r=(function(){return{sprintf:n,vsprintf:a}}).call(v,e,v,g),r!==void 0&&(g.exports=r))})()},4162:function(g,v,e){g.exports=y;var r=e(9284),f=e(9584),n={"2d":function(p,x,s){var u=p({order:x,scalarArguments:3,getters:s==="generic"?[0]:void 0,phase:function(c,T,k,_){return c>_|0},vertex:function(c,T,k,_,b,P,l,d,L,w,I,z,B){var O=(l<<0)+(d<<1)+(L<<2)+(w<<3)|0;if(!(O===0||O===15))switch(O){case 0:I.push([c-.5,T-.5]);break;case 1:I.push([c-.25-.25*(_+k-2*B)/(k-_),T-.25-.25*(b+k-2*B)/(k-b)]);break;case 2:I.push([c-.75-.25*(-_-k+2*B)/(_-k),T-.25-.25*(P+_-2*B)/(_-P)]);break;case 3:I.push([c-.5,T-.5-.5*(b+k+P+_-4*B)/(k-b+_-P)]);break;case 4:I.push([c-.25-.25*(P+b-2*B)/(b-P),T-.75-.25*(-b-k+2*B)/(b-k)]);break;case 5:I.push([c-.5-.5*(_+k+P+b-4*B)/(k-_+b-P),T-.5]);break;case 6:I.push([c-.5-.25*(-_-k+P+b)/(_-k+b-P),T-.5-.25*(-b-k+P+_)/(b-k+_-P)]);break;case 7:I.push([c-.75-.25*(P+b-2*B)/(b-P),T-.75-.25*(P+_-2*B)/(_-P)]);break;case 8:I.push([c-.75-.25*(-P-b+2*B)/(P-b),T-.75-.25*(-P-_+2*B)/(P-_)]);break;case 9:I.push([c-.5-.25*(_+k+-P-b)/(k-_+P-b),T-.5-.25*(b+k+-P-_)/(k-b+P-_)]);break;case 10:I.push([c-.5-.5*(-_-k+-P-b+4*B)/(_-k+P-b),T-.5]);break;case 11:I.push([c-.25-.25*(-P-b+2*B)/(P-b),T-.75-.25*(b+k-2*B)/(k-b)]);break;case 12:I.push([c-.5,T-.5-.5*(-b-k+-P-_+4*B)/(b-k+P-_)]);break;case 13:I.push([c-.75-.25*(_+k-2*B)/(k-_),T-.25-.25*(-P-_+2*B)/(P-_)]);break;case 14:I.push([c-.25-.25*(-_-k+2*B)/(_-k),T-.25-.25*(-b-k+2*B)/(b-k)]);break;case 15:I.push([c-.5,T-.5]);break}},cell:function(c,T,k,_,b,P,l,d,L){b?d.push([c,T]):d.push([T,c])}});return function(c,T){var k=[],_=[];return u(c,k,_,T),{positions:k,cells:_}}}};function a(p,x){var s=p.length+"d",u=n[s];if(u)return u(r,p,x)}function o(p,x){for(var s=f(p,x),u=s.length,c=new Array(u),T=new Array(u),k=0;k<u;++k)c[k]=[s[k]],T[k]=[k];return{positions:c,cells:T}}var h={};function y(p,c){if(p.dimension<=0)return{positions:[],cells:[]};if(p.dimension===1)return o(p,c);var s=p.order.join()+"-"+p.dtype,u=h[s],c=+c||0;return u||(u=h[s]=a(p.order,p.dtype)),u(p,c)}},6946:function(g,v,e){g.exports=o;var r=e(875),f=window||M.global||{},n=f.__TEXT_CACHE||{};f.__TEXT_CACHE={};function a(h){for(var y=h.cells,p=h.positions,x=new Float32Array(y.length*6),s=0,u=0,c=0;c<y.length;++c)for(var T=y[c],k=0;k<3;++k){var _=p[T[k]];x[s++]=_[0],x[s++]=_[1]+1.4,u=Math.max(_[0],u)}return{data:x,shape:u}}function o(h,y,x){var x=x||{},s=n[h];s||(s=n[h]={" ":{data:new Float32Array(0),shape:.2}});var u=s[y];if(!u)if(y.length<=1||!/\d/.test(y))u=s[y]=a(r(y,{triangles:!0,font:h,textAlign:x.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var c=y.split(/(\d|\s)/),T=new Array(c.length),k=0,_=0,b=0;b<c.length;++b)T[b]=o(h,c[b]),k+=T[b].data.length,_+=T[b].shape,b>0&&(_+=.02);for(var P=new Float32Array(k),l=0,d=-.5*_,b=0;b<T.length;++b){for(var L=T[b].data,w=0;w<L.length;w+=2)P[l++]=L[w]+d,P[l++]=L[w+1];d+=T[b].shape+.02}u=s[y]={data:P,shape:_}}return u}},14:function(g,v,e){var r=e(4405);g.exports=o;var f=96;function n(h,y){var p=r(getComputedStyle(h).getPropertyValue(y));return p[0]*o(p[1],h)}function a(h,y){var p=document.createElement("div");p.style["font-size"]="128"+h,y.appendChild(p);var x=n(p,"font-size")/128;return y.removeChild(p),x}function o(h,y){switch(y=y||document.body,h=(h||"px").trim().toLowerCase(),(y===window||y===document)&&(y=document.body),h){case"%":return y.clientHeight/100;case"ch":case"ex":return a(h,y);case"em":return n(y,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return f;case"cm":return f/2.54;case"mm":return f/25.4;case"pt":return f/72;case"pc":return f/6}return 1}},3440:function(g,v,e){g.exports=T;var r=e(8444),f=e(7437),n=e(4422),a=e(903),o=e(899),h=e(9305);function y(k,_,b){return Math.sqrt(Math.pow(k,2)+Math.pow(_,2)+Math.pow(b,2))}function p(k){return Math.min(1,Math.max(-1,k))}function x(k){var _=Math.abs(k[0]),b=Math.abs(k[1]),P=Math.abs(k[2]),l=[0,0,0];_>Math.max(b,P)?l[2]=1:b>Math.max(_,P)?l[0]=1:l[1]=1;for(var d=0,L=0,w=0;w<3;++w)d+=k[w]*k[w],L+=l[w]*k[w];for(var w=0;w<3;++w)l[w]-=L/d*k[w];return o(l,l),l}function s(k,_,b,P,l,d,L,w){this.center=r(b),this.up=r(P),this.right=r(l),this.radius=r([d]),this.angle=r([L,w]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(k,_),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var I=0;I<16;++I)this.computedMatrix[I]=.5;this.recalcMatrix(0)}var u=s.prototype;u.setDistanceLimits=function(k,_){k>0?k=Math.log(k):k=-1/0,_>0?_=Math.log(_):_=1/0,_=Math.max(_,k),this.radius.bounds[0][0]=k,this.radius.bounds[1][0]=_},u.getDistanceLimits=function(k){var _=this.radius.bounds[0];return k?(k[0]=Math.exp(_[0][0]),k[1]=Math.exp(_[1][0]),k):[Math.exp(_[0][0]),Math.exp(_[1][0])]},u.recalcMatrix=function(k){this.center.curve(k),this.up.curve(k),this.right.curve(k),this.radius.curve(k),this.angle.curve(k);for(var _=this.computedUp,b=this.computedRight,P=0,l=0,d=0;d<3;++d)l+=_[d]*b[d],P+=_[d]*_[d];for(var L=Math.sqrt(P),w=0,d=0;d<3;++d)b[d]-=_[d]*l/P,w+=b[d]*b[d],_[d]/=L;for(var I=Math.sqrt(w),d=0;d<3;++d)b[d]/=I;var z=this.computedToward;a(z,_,b),o(z,z);for(var B=Math.exp(this.computedRadius[0]),O=this.computedAngle[0],R=this.computedAngle[1],C=Math.cos(O),F=Math.sin(O),N=Math.cos(R),V=Math.sin(R),K=this.computedCenter,Q=C*N,at=F*N,it=V,q=-C*V,W=-F*V,Z=N,G=this.computedEye,et=this.computedMatrix,d=0;d<3;++d){var nt=Q*b[d]+at*z[d]+it*_[d];et[4*d+1]=q*b[d]+W*z[d]+Z*_[d],et[4*d+2]=nt,et[4*d+3]=0}var X=et[1],Y=et[5],ot=et[9],rt=et[2],ht=et[6],pt=et[10],yt=Y*pt-ot*ht,xt=ot*rt-X*pt,Ft=X*ht-Y*rt,Et=y(yt,xt,Ft);yt/=Et,xt/=Et,Ft/=Et,et[0]=yt,et[4]=xt,et[8]=Ft;for(var d=0;d<3;++d)G[d]=K[d]+et[2+4*d]*B;for(var d=0;d<3;++d){for(var w=0,mt=0;mt<3;++mt)w+=et[d+4*mt]*G[mt];et[12+d]=-w}et[15]=1},u.getMatrix=function(k,_){this.recalcMatrix(k);var b=this.computedMatrix;if(_){for(var P=0;P<16;++P)_[P]=b[P];return _}return b};var c=[0,0,0];u.rotate=function(k,_,b,P){if(this.angle.move(k,_,b),P){this.recalcMatrix(k);var l=this.computedMatrix;c[0]=l[2],c[1]=l[6],c[2]=l[10];for(var d=this.computedUp,L=this.computedRight,w=this.computedToward,I=0;I<3;++I)l[4*I]=d[I],l[4*I+1]=L[I],l[4*I+2]=w[I];n(l,l,P,c);for(var I=0;I<3;++I)d[I]=l[4*I],L[I]=l[4*I+1];this.up.set(k,d[0],d[1],d[2]),this.right.set(k,L[0],L[1],L[2])}},u.pan=function(k,_,b,P){_=_||0,b=b||0,P=P||0,this.recalcMatrix(k);var l=this.computedMatrix;Math.exp(this.computedRadius[0]);var d=l[1],L=l[5],w=l[9],I=y(d,L,w);d/=I,L/=I,w/=I;var z=l[0],B=l[4],O=l[8],R=z*d+B*L+O*w;z-=d*R,B-=L*R,O-=w*R;var C=y(z,B,O);z/=C,B/=C,O/=C;var F=z*_+d*b,N=B*_+L*b,V=O*_+w*b;this.center.move(k,F,N,V);var K=Math.exp(this.computedRadius[0]);K=Math.max(1e-4,K+P),this.radius.set(k,Math.log(K))},u.translate=function(k,_,b,P){this.center.move(k,_||0,b||0,P||0)},u.setMatrix=function(k,_,b,P){var l=1;typeof b=="number"&&(l=b|0),(l<0||l>3)&&(l=1);var d=(l+2)%3;_||(this.recalcMatrix(k),_=this.computedMatrix);var L=_[l],w=_[l+4],I=_[l+8];if(P){var z=Math.abs(L),B=Math.abs(w),O=Math.abs(I),R=Math.max(z,B,O);z===R?(L=L<0?-1:1,w=I=0):O===R?(I=I<0?-1:1,L=w=0):(w=w<0?-1:1,L=I=0)}else{var C=y(L,w,I);L/=C,w/=C,I/=C}var F=_[d],N=_[d+4],V=_[d+8],K=F*L+N*w+V*I;F-=L*K,N-=w*K,V-=I*K;var Q=y(F,N,V);F/=Q,N/=Q,V/=Q;var at=w*V-I*N,it=I*F-L*V,q=L*N-w*F,W=y(at,it,q);at/=W,it/=W,q/=W,this.center.jump(k,Bt,kt,jt),this.radius.idle(k),this.up.jump(k,L,w,I),this.right.jump(k,F,N,V);var Z,G;if(l===2){var et=_[1],nt=_[5],X=_[9],Y=et*F+nt*N+X*V,ot=et*at+nt*it+X*q;yt<0?Z=-Math.PI/2:Z=Math.PI/2,G=Math.atan2(ot,Y)}else{var rt=_[2],ht=_[6],pt=_[10],yt=rt*L+ht*w+pt*I,xt=rt*F+ht*N+pt*V,Ft=rt*at+ht*it+pt*q;Z=Math.asin(p(yt)),G=Math.atan2(Ft,xt)}this.angle.jump(k,G,Z),this.recalcMatrix(k);var Et=_[2],mt=_[6],gt=_[10],wt=this.computedMatrix;f(wt,_);var Pt=wt[15],Bt=wt[12]/Pt,kt=wt[13]/Pt,jt=wt[14]/Pt,Ht=Math.exp(this.computedRadius[0]);this.center.jump(k,Bt-Et*Ht,kt-mt*Ht,jt-gt*Ht)},u.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},u.idle=function(k){this.center.idle(k),this.up.idle(k),this.right.idle(k),this.radius.idle(k),this.angle.idle(k)},u.flush=function(k){this.center.flush(k),this.up.flush(k),this.right.flush(k),this.radius.flush(k),this.angle.flush(k)},u.setDistance=function(k,_){_>0&&this.radius.set(k,Math.log(_))},u.lookAt=function(k,_,b,P){this.recalcMatrix(k),_=_||this.computedEye,b=b||this.computedCenter,P=P||this.computedUp;var l=P[0],d=P[1],L=P[2],w=y(l,d,L);if(!(w<1e-6)){l/=w,d/=w,L/=w;var I=_[0]-b[0],z=_[1]-b[1],B=_[2]-b[2],O=y(I,z,B);if(!(O<1e-6)){I/=O,z/=O,B/=O;var R=this.computedRight,C=R[0],F=R[1],N=R[2],V=l*C+d*F+L*N;C-=V*l,F-=V*d,N-=V*L;var K=y(C,F,N);if(!(K<.01&&(C=d*B-L*z,F=L*I-l*B,N=l*z-d*I,K=y(C,F,N),K<1e-6))){C/=K,F/=K,N/=K,this.up.set(k,l,d,L),this.right.set(k,C,F,N),this.center.set(k,b[0],b[1],b[2]),this.radius.set(k,Math.log(O));var Q=d*N-L*F,at=L*C-l*N,it=l*F-d*C,q=y(Q,at,it);Q/=q,at/=q,it/=q;var W=l*I+d*z+L*B,Z=C*I+F*z+N*B,G=Q*I+at*z+it*B,et=Math.asin(p(W)),nt=Math.atan2(G,Z),X=this.angle._state,Y=X[X.length-1],ot=X[X.length-2];Y=Y%(2*Math.PI);var rt=Math.abs(Y+2*Math.PI-nt),ht=Math.abs(Y-nt),pt=Math.abs(Y-2*Math.PI-nt);rt<ht&&(Y+=2*Math.PI),pt<ht&&(Y-=2*Math.PI),this.angle.jump(this.angle.lastT(),Y,ot),this.angle.set(k,nt,et)}}}};function T(k){k=k||{};var _=k.center||[0,0,0],b=k.up||[0,1,0],P=k.right||x(b),l=k.radius||1,d=k.theta||0,L=k.phi||0;if(_=[].slice.call(_,0,3),b=[].slice.call(b,0,3),o(b,b),P=[].slice.call(P,0,3),o(P,P),"eye"in k){var w=k.eye,I=[w[0]-_[0],w[1]-_[1],w[2]-_[2]];a(P,I,b),y(P[0],P[1],P[2])<1e-6?P=x(b):o(P,P),l=y(I[0],I[1],I[2]);var z=h(b,I)/l,B=h(P,I)/l;L=Math.acos(z),d=Math.acos(B)}return l=Math.log(l),new s(k.zoomMin,k.zoomMax,_,b,P,l,d,L)}},9660:function(g){g.exports=e;var v=+(Math.pow(2,27)+1);function e(r,f,n){var a=r*f,o=v*r,h=o-r,y=o-h,p=r-y,x=v*f,s=x-f,u=x-s,c=f-u,T=a-y*u,k=T-p*u,_=k-y*c,b=p*c-_;return n?(n[0]=b,n[1]=a,n):[b,a]}},87:function(g){g.exports=v;function v(e,r,f){var n=e+r,a=n-e,o=n-a,h=r-a,y=e-o;return f?(f[0]=y+h,f[1]=n,f):[y+h,n]}},5306:function(g,v,e){var r=e(2288),f=e(3094),n=e(2146).lW;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:f([32,0]),UINT16:f([32,0]),UINT32:f([32,0]),BIGUINT64:f([32,0]),INT8:f([32,0]),INT16:f([32,0]),INT32:f([32,0]),BIGINT64:f([32,0]),FLOAT:f([32,0]),DOUBLE:f([32,0]),DATA:f([32,0]),UINT8C:f([32,0]),BUFFER:f([32,0])});var a=typeof Uint8ClampedArray<"u",o=typeof BigUint64Array<"u",h=typeof BigInt64Array<"u",y=e.g.__TYPEDARRAY_POOL;y.UINT8C||(y.UINT8C=f([32,0])),y.BIGUINT64||(y.BIGUINT64=f([32,0])),y.BIGINT64||(y.BIGINT64=f([32,0])),y.BUFFER||(y.BUFFER=f([32,0]));var p=y.DATA,x=y.BUFFER;v.free=function(R){if(n.isBuffer(R))x[r.log2(R.length)].push(R);else{if(Object.prototype.toString.call(R)!=="[object ArrayBuffer]"&&(R=R.buffer),!R)return;var C=R.length||R.byteLength,F=r.log2(C)|0;p[F].push(R)}};function s(R){if(R){var C=R.length||R.byteLength,F=r.log2(C);p[F].push(R)}}function u(R){s(R.buffer)}v.freeUint8=v.freeUint16=v.freeUint32=v.freeBigUint64=v.freeInt8=v.freeInt16=v.freeInt32=v.freeBigInt64=v.freeFloat32=v.freeFloat=v.freeFloat64=v.freeDouble=v.freeUint8Clamped=v.freeDataView=u,v.freeArrayBuffer=s,v.freeBuffer=function(R){x[r.log2(R.length)].push(R)},v.malloc=function(R,C){if(C===void 0||C==="arraybuffer")return c(R);switch(C){case"uint8":return T(R);case"uint16":return k(R);case"uint32":return _(R);case"int8":return b(R);case"int16":return P(R);case"int32":return l(R);case"float":case"float32":return d(R);case"double":case"float64":return L(R);case"uint8_clamped":return w(R);case"bigint64":return z(R);case"biguint64":return I(R);case"buffer":return O(R);case"data":case"dataview":return B(R);default:return null}return null};function c(C){var C=r.nextPow2(C),F=r.log2(C),N=p[F];return N.length>0?N.pop():new ArrayBuffer(C)}v.mallocArrayBuffer=c;function T(R){return new Uint8Array(c(R),0,R)}v.mallocUint8=T;function k(R){return new Uint16Array(c(2*R),0,R)}v.mallocUint16=k;function _(R){return new Uint32Array(c(4*R),0,R)}v.mallocUint32=_;function b(R){return new Int8Array(c(R),0,R)}v.mallocInt8=b;function P(R){return new Int16Array(c(2*R),0,R)}v.mallocInt16=P;function l(R){return new Int32Array(c(4*R),0,R)}v.mallocInt32=l;function d(R){return new Float32Array(c(4*R),0,R)}v.mallocFloat32=v.mallocFloat=d;function L(R){return new Float64Array(c(8*R),0,R)}v.mallocFloat64=v.mallocDouble=L;function w(R){return a?new Uint8ClampedArray(c(R),0,R):T(R)}v.mallocUint8Clamped=w;function I(R){return o?new BigUint64Array(c(8*R),0,R):null}v.mallocBigUint64=I;function z(R){return h?new BigInt64Array(c(8*R),0,R):null}v.mallocBigInt64=z;function B(R){return new DataView(c(R),0,R)}v.mallocDataView=B;function O(R){R=r.nextPow2(R);var C=r.log2(R),F=x[C];return F.length>0?F.pop():new n(R)}v.mallocBuffer=O,v.clearCache=function(){for(var R=0;R<32;++R)y.UINT8[R].length=0,y.UINT16[R].length=0,y.UINT32[R].length=0,y.INT8[R].length=0,y.INT16[R].length=0,y.INT32[R].length=0,y.FLOAT[R].length=0,y.DOUBLE[R].length=0,y.BIGUINT64[R].length=0,y.BIGINT64[R].length=0,y.UINT8C[R].length=0,p[R].length=0,x[R].length=0}},1731:function(g){"use restrict";g.exports=v;function v(r){this.roots=new Array(r),this.ranks=new Array(r);for(var f=0;f<r;++f)this.roots[f]=f,this.ranks[f]=0}var e=v.prototype;Object.defineProperty(e,"length",{get:function(){return this.roots.length}}),e.makeSet=function(){var r=this.roots.length;return this.roots.push(r),this.ranks.push(0),r},e.find=function(r){for(var f=r,n=this.roots;n[r]!==r;)r=n[r];for(;n[f]!==r;){var a=n[f];n[f]=r,f=a}return r},e.link=function(r,f){var n=this.find(r),a=this.find(f);if(n!==a){var o=this.ranks,h=this.roots,y=o[n],p=o[a];y<p?h[n]=a:p<y?h[a]=n:(h[a]=n,++o[n])}}},1215:function(g){function v(f,n){for(var a=1,o=f.length,h=f[0],y=f[0],p=1;p<o;++p)if(y=h,h=f[p],n(h,y)){if(p===a){a++;continue}f[a++]=h}return f.length=a,f}function e(f){for(var n=1,a=f.length,o=f[0],h=f[0],y=1;y<a;++y,h=o)if(h=o,o=f[y],o!==h){if(y===n){n++;continue}f[n++]=o}return f.length=n,f}function r(f,n,a){return f.length===0?f:n?(a||f.sort(n),v(f,n)):(a||f.sort(),e(f))}g.exports=r},875:function(g,v,e){g.exports=a;var r=e(712),f=null,n=null;typeof document<"u"&&(f=document.createElement("canvas"),f.width=8192,f.height=1024,n=f.getContext("2d"));function a(o,h){return(typeof h!="object"||h===null)&&(h={}),r(o,h.canvas||f,h.context||n,h)}},712:function(g,v,e){g.exports=z,g.exports.processPixels=I;var r=e(4162),f=e(5050),n=e(8243),a=e(197),o=e(7761),h=e(8040),y="b",p="b|",x="i",s="i|",u="sup",c="+",T="+1",k="sub",_="-",b="-1";function P(B,O,R,C){for(var F="<"+B+">",N="</"+B+">",V=F.length,K=N.length,Q=O[0]===c||O[0]===_,at=0,it=-K;at>-1&&(at=R.indexOf(F,at),!(at===-1||(it=R.indexOf(N,at+V),it===-1)||it<=at));){for(var q=at;q<it+K;++q)if(q<at+V||q>=it)C[q]=null,R=R.substr(0,q)+" "+R.substr(q+1);else if(C[q]!==null){var W=C[q].indexOf(O[0]);W===-1?C[q]+=O:Q&&(C[q]=C[q].substr(0,W+1)+(1+parseInt(C[q][W+1]))+C[q].substr(W+2))}var Z=at+V,G=R.substr(Z,it-Z),et=G.indexOf(F);et!==-1?at=et:at=it+K}return C}function l(B,O,R){for(var C=O.textAlign||"start",F=O.textBaseline||"alphabetic",N=[1073741824,1073741824],V=[0,0],K=B.length,Q=0;Q<K;++Q)for(var at=B[Q],it=0;it<2;++it)N[it]=Math.min(N[it],at[it])|0,V[it]=Math.max(V[it],at[it])|0;var q=0;switch(C){case"center":q=-.5*(N[0]+V[0]);break;case"right":case"end":q=-V[0];break;case"left":case"start":q=-N[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+C+"'")}var W=0;switch(F){case"hanging":case"top":W=-N[1];break;case"middle":W=-.5*(N[1]+V[1]);break;case"alphabetic":case"ideographic":W=-3*R;break;case"bottom":W=-V[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+F+"'")}var Z=1/R;return"lineHeight"in O?Z*=+O.lineHeight:"width"in O?Z=O.width/(V[0]-N[0]):"height"in O&&(Z=O.height/(V[1]-N[1])),B.map(function(G){return[Z*(G[0]+q),Z*(G[1]+W)]})}function d(B,O,R,C,F,N){R=R.replace(/\n/g,""),N.breaklines===!0?R=R.replace(/\<br\>/g,`
`):R=R.replace(/\<br\>/g," ");var V="",K=[];for(Y=0;Y<R.length;++Y)K[Y]=V;N.bolds===!0&&(K=P(y,p,R,K)),N.italics===!0&&(K=P(x,s,R,K)),N.superscripts===!0&&(K=P(u,T,R,K)),N.subscripts===!0&&(K=P(k,b,R,K));var Q=[],at="";for(Y=0;Y<R.length;++Y)K[Y]!==null&&(at+=R[Y],Q.push(K[Y]));var it=at.split(`
`),q=it.length,W=Math.round(F*C),Z=C,G=C*2,et=0,nt=q*W+G;B.height<nt&&(B.height=nt),O.fillStyle="#000",O.fillRect(0,0,B.width,B.height),O.fillStyle="#fff";var X,Y,ot,rt,ht,pt=0,yt="";function xt(){if(yt!==""){var jt=O.measureText(yt).width;O.fillText(yt,Z+ot,G+rt),ot+=jt}}function Ft(){return""+Math.round(ht)+"px "}function Et(jt,Ht){var Vt=""+O.font;if(N.subscripts===!0){var ee=jt.indexOf(_),te=Ht.indexOf(_),ae=ee>-1?parseInt(jt[1+ee]):0,le=te>-1?parseInt(Ht[1+te]):0;ae!==le&&(Vt=Vt.replace(Ft(),"?px "),ht*=Math.pow(.75,le-ae),Vt=Vt.replace("?px ",Ft())),rt+=.25*W*(le-ae)}if(N.superscripts===!0){var ce=jt.indexOf(c),pe=Ht.indexOf(c),we=ce>-1?parseInt(jt[1+ce]):0,ve=pe>-1?parseInt(Ht[1+pe]):0;we!==ve&&(Vt=Vt.replace(Ft(),"?px "),ht*=Math.pow(.75,ve-we),Vt=Vt.replace("?px ",Ft())),rt-=.25*W*(ve-we)}if(N.bolds===!0){var Mt=jt.indexOf(p)>-1,It=Ht.indexOf(p)>-1;!Mt&&It&&(Rt?Vt=Vt.replace("italic ","italic bold "):Vt="bold "+Vt),Mt&&!It&&(Vt=Vt.replace("bold ",""))}if(N.italics===!0){var Rt=jt.indexOf(s)>-1,zt=Ht.indexOf(s)>-1;!Rt&&zt&&(Vt="italic "+Vt),Rt&&!zt&&(Vt=Vt.replace("italic ",""))}O.font=Vt}for(X=0;X<q;++X){var mt=it[X]+`
`;for(ot=0,rt=X*W,ht=C,yt="",Y=0;Y<mt.length;++Y){var gt=Y+pt<Q.length?Q[Y+pt]:Q[Q.length-1];V===gt?yt+=mt[Y]:(xt(),yt=mt[Y],gt!==void 0&&(Et(V,gt),V=gt))}xt(),pt+=mt.length;var wt=Math.round(ot+2*Z)|0;et<wt&&(et=wt)}var Pt=et,Bt=G+W*q,kt=f(O.getImageData(0,0,Pt,Bt).data,[Bt,Pt,4]);return kt.pick(-1,-1,0).transpose(1,0)}function L(B,O){var R=r(B,128);return O?n(R.cells,R.positions,.25):{edges:R.cells,positions:R.positions}}function w(B,O,R,C){var F=L(B,C),N=l(F.positions,O,R),V=F.edges,K=O.orientation==="ccw";if(a(N,V),O.polygons||O.polygon||O.polyline){for(var Q=h(V,N),at=new Array(Q.length),it=0;it<Q.length;++it){for(var q=Q[it],W=new Array(q.length),Z=0;Z<q.length;++Z){for(var G=q[Z],et=new Array(G.length),nt=0;nt<G.length;++nt)et[nt]=N[G[nt]].slice();K&&et.reverse(),W[Z]=et}at[it]=W}return at}else return O.triangles||O.triangulate||O.triangle?{cells:o(N,V,{delaunay:!1,exterior:!1,interior:!0}),positions:N}:{edges:V,positions:N}}function I(B,O,R){try{return w(B,O,R,!0)}catch{}try{return w(B,O,R,!1)}catch{}return O.polygons||O.polyline||O.polygon?[]:O.triangles||O.triangulate||O.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function z(B,O,R,C){var F=64,N=1.25,V={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};C&&(C.size&&C.size>0&&(F=C.size),C.lineSpacing&&C.lineSpacing>0&&(N=C.lineSpacing),C.styletags&&C.styletags.breaklines&&(V.breaklines=!!C.styletags.breaklines),C.styletags&&C.styletags.bolds&&(V.bolds=!!C.styletags.bolds),C.styletags&&C.styletags.italics&&(V.italics=!!C.styletags.italics),C.styletags&&C.styletags.subscripts&&(V.subscripts=!!C.styletags.subscripts),C.styletags&&C.styletags.superscripts&&(V.superscripts=!!C.styletags.superscripts)),R.font=[C.fontStyle,C.fontVariant,C.fontWeight,F+"px",C.font].filter(function(Q){return Q}).join(" "),R.textAlign="start",R.textBaseline="alphabetic",R.direction="ltr";var K=d(O,R,B,F,N,V);return I(K,C,F)}},5346:function(g){(function(){if(typeof ses<"u"&&ses.ok&&!ses.ok())return;function v(d){d.permitHostObjects___&&d.permitHostObjects___(v)}typeof ses<"u"&&(ses.weakMapPermitHostObjects=v);var e=!1;if(typeof WeakMap=="function"){var r=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var f=new r,n=Object.freeze({});if(f.set(n,1),f.get(n)!==1)e=!0;else{g.exports=WeakMap;return}}}var a=Object.getOwnPropertyNames,o=Object.defineProperty,h=Object.isExtensible,y="weakmap:",p=y+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var x=new ArrayBuffer(25),s=new Uint8Array(x);crypto.getRandomValues(s),p=y+"rand:"+Array.prototype.map.call(s,function(d){return(d%36).toString(36)}).join("")+"___"}function u(d){return!(d.substr(0,y.length)==y&&d.substr(d.length-3)==="___")}if(o(Object,"getOwnPropertyNames",{value:function(d){return a(d).filter(u)}}),"getPropertyNames"in Object){var c=Object.getPropertyNames;o(Object,"getPropertyNames",{value:function(d){return c(d).filter(u)}})}function T(d){if(d!==Object(d))throw new TypeError("Not an object: "+d);var L=d[p];if(L&&L.key===d)return L;if(h(d)){L={key:d};try{return o(d,p,{value:L,writable:!1,enumerable:!1,configurable:!1}),L}catch{return}}}(function(){var d=Object.freeze;o(Object,"freeze",{value:function(I){return T(I),d(I)}});var L=Object.seal;o(Object,"seal",{value:function(I){return T(I),L(I)}});var w=Object.preventExtensions;o(Object,"preventExtensions",{value:function(I){return T(I),w(I)}})})();function k(d){return d.prototype=null,Object.freeze(d)}var _=!1;function b(){!_&&typeof console<"u"&&(_=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var P=0,l=function(){this instanceof l||b();var d=[],L=[],w=P++;function I(R,C){var F,N=T(R);return N?w in N?N[w]:C:(F=d.indexOf(R),F>=0?L[F]:C)}function z(R){var C=T(R);return C?w in C:d.indexOf(R)>=0}function B(R,C){var F,N=T(R);return N?N[w]=C:(F=d.indexOf(R),F>=0?L[F]=C:(F=d.length,L[F]=C,d[F]=R)),this}function O(R){var C=T(R),F,N;return C?w in C&&delete C[w]:(F=d.indexOf(R),F<0?!1:(N=d.length-1,d[F]=void 0,L[F]=L[N],d[F]=d[N],d.length=N,L.length=N,!0))}return Object.create(l.prototype,{get___:{value:k(I)},has___:{value:k(z)},set___:{value:k(B)},delete___:{value:k(O)}})};l.prototype=Object.create(Object.prototype,{get:{value:function(d,L){return this.get___(d,L)},writable:!0,configurable:!0},has:{value:function(d){return this.has___(d)},writable:!0,configurable:!0},set:{value:function(d,L){return this.set___(d,L)},writable:!0,configurable:!0},delete:{value:function(d){return this.delete___(d)},writable:!0,configurable:!0}}),typeof r=="function"?function(){e&&typeof Proxy<"u"&&(Proxy=void 0);function d(){this instanceof l||b();var L=new r,w=void 0,I=!1;function z(C,F){return w?L.has(C)?L.get(C):w.get___(C,F):L.get(C,F)}function B(C){return L.has(C)||(w?w.has___(C):!1)}var O;e?O=function(C,F){return L.set(C,F),L.has(C)||(w||(w=new l),w.set(C,F)),this}:O=function(C,F){if(I)try{L.set(C,F)}catch{w||(w=new l),w.set___(C,F)}else L.set(C,F);return this};function R(C){var F=!!L.delete(C);return w&&w.delete___(C)||F}return Object.create(l.prototype,{get___:{value:k(z)},has___:{value:k(B)},set___:{value:k(O)},delete___:{value:k(R)},permitHostObjects___:{value:k(function(C){if(C===v)I=!0;else throw new Error("bogus call to permitHostObjects___")})}})}d.prototype=l.prototype,g.exports=d,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),g.exports=l)})()},9222:function(g,v,e){var r=e(7178);g.exports=f;function f(){var n={};return function(a){if((typeof a!="object"||a===null)&&typeof a!="function")throw new Error("Weakmap-shim: Key must be object");var o=a.valueOf(n);return o&&o.identity===n?o:r(a,n)}}},7178:function(g){g.exports=v;function v(e,r){var f={identity:r},n=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(a){return a!==r?n.apply(this,arguments):f},writable:!0}),f}},4037:function(g,v,e){var r=e(9222);g.exports=f;function f(){var n=r();return{get:function(a,o){var h=n(a);return h.hasOwnProperty("value")?h.value:o},set:function(a,o){return n(a).value=o,this},has:function(a){return"value"in n(a)},delete:function(a){return delete n(a).value}}}},6183:function(g){function v(){return function(o,h,y,p,x,s){var u=o[0],c=y[0],T=[0],k=c;p|=0;var _=0,b=c;for(_=0;_<u;++_){{var P=h[p]-s,l=h[p+k]-s;P>=0!=l>=0&&x.push(T[0]+.5+.5*(P+l)/(P-l))}p+=b,++T[0]}}}function e(){return v()}var r=e;function f(o){var h={};return function(y,p,x){var s=y.dtype,u=y.order,c=[s,u.join()].join(),T=h[c];return T||(h[c]=T=o([s,u])),T(y.shape.slice(0),y.data,y.stride,y.offset|0,p,x)}}function n(o){return f(r.bind(void 0,o))}function a(o){return n({funcName:o.funcName})}g.exports=a({funcName:"zeroCrossings"})},9584:function(g,v,e){g.exports=f;var r=e(6183);function f(n,a){var o=[];return a=+a||0,r(n.hi(n.shape[0]-1),o,a),o}},6601:function(){}},i={};function S(g){var v=i[g];if(v!==void 0)return v.exports;var e=i[g]={id:g,loaded:!1,exports:{}};return E[g].call(e.exports,e,e.exports,S),e.loaded=!0,e.exports}(function(){S.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()})(),function(){S.nmd=function(g){return g.paths=[],g.children||(g.children=[]),g}}();var A=S(7386);return A}()})},12856:function($,U,t){function M(Mt,It){if(!(Mt instanceof It))throw new TypeError("Cannot call a class as a function")}function E(Mt,It){for(var Rt=0;Rt<It.length;Rt++){var zt=It[Rt];zt.enumerable=zt.enumerable||!1,zt.configurable=!0,"value"in zt&&(zt.writable=!0),Object.defineProperty(Mt,S(zt.key),zt)}}function i(Mt,It,Rt){return It&&E(Mt.prototype,It),Rt&&E(Mt,Rt),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function S(Mt){var It=A(Mt,"string");return o(It)==="symbol"?It:String(It)}function A(Mt,It){if(o(Mt)!=="object"||Mt===null)return Mt;var Rt=Mt[Symbol.toPrimitive];if(Rt!==void 0){var zt=Rt.call(Mt,It||"default");if(o(zt)!=="object")return zt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(It==="string"?String:Number)(Mt)}function g(Mt,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(It&&It.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Object.defineProperty(Mt,"prototype",{writable:!1}),It&&v(Mt,It)}function v(Mt,It){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Rt,zt){return Rt.__proto__=zt,Rt},v(Mt,It)}function e(Mt){var It=n();return function(){var Rt=a(Mt),zt;if(It){var Tt=a(this).constructor;zt=Reflect.construct(Rt,arguments,Tt)}else zt=Rt.apply(this,arguments);return r(this,zt)}}function r(Mt,It){if(It&&(o(It)==="object"||typeof It=="function"))return It;if(It!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f(Mt)}function f(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}function n(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function a(Mt){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(It){return It.__proto__||Object.getPrototypeOf(It)},a(Mt)}function o(Mt){"@babel/helpers - typeof";return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(It){return typeof It}:function(It){return It&&typeof Symbol=="function"&&It.constructor===Symbol&&It!==Symbol.prototype?"symbol":typeof It},o(Mt)}var h=t(95341),y=t(95280),p=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;U.Buffer=c,U.SlowBuffer=z,U.INSPECT_MAX_BYTES=50;var x=2147483647;U.kMaxLength=x,c.TYPED_ARRAY_SUPPORT=s(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var Mt=new Uint8Array(1),It={foo:function(){return 42}};return Object.setPrototypeOf(It,Uint8Array.prototype),Object.setPrototypeOf(Mt,It),Mt.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function u(Mt){if(Mt>x)throw new RangeError('The value "'+Mt+'" is invalid for option "size"');var It=new Uint8Array(Mt);return Object.setPrototypeOf(It,c.prototype),It}function c(Mt,It,Rt){if(typeof Mt=="number"){if(typeof It=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(Mt)}return T(Mt,It,Rt)}c.poolSize=8192;function T(Mt,It,Rt){if(typeof Mt=="string")return P(Mt,It);if(ArrayBuffer.isView(Mt))return d(Mt);if(Mt==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+o(Mt));if(le(Mt,ArrayBuffer)||Mt&&le(Mt.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(le(Mt,SharedArrayBuffer)||Mt&&le(Mt.buffer,SharedArrayBuffer)))return L(Mt,It,Rt);if(typeof Mt=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var zt=Mt.valueOf&&Mt.valueOf();if(zt!=null&&zt!==Mt)return c.from(zt,It,Rt);var Tt=w(Mt);if(Tt)return Tt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Mt[Symbol.toPrimitive]=="function")return c.from(Mt[Symbol.toPrimitive]("string"),It,Rt);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+o(Mt))}c.from=function(Mt,It,Rt){return T(Mt,It,Rt)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function k(Mt){if(typeof Mt!="number")throw new TypeError('"size" argument must be of type number');if(Mt<0)throw new RangeError('The value "'+Mt+'" is invalid for option "size"')}function _(Mt,It,Rt){return k(Mt),Mt<=0?u(Mt):It!==void 0?typeof Rt=="string"?u(Mt).fill(It,Rt):u(Mt).fill(It):u(Mt)}c.alloc=function(Mt,It,Rt){return _(Mt,It,Rt)};function b(Mt){return k(Mt),u(Mt<0?0:I(Mt)|0)}c.allocUnsafe=function(Mt){return b(Mt)},c.allocUnsafeSlow=function(Mt){return b(Mt)};function P(Mt,It){if((typeof It!="string"||It==="")&&(It="utf8"),!c.isEncoding(It))throw new TypeError("Unknown encoding: "+It);var Rt=B(Mt,It)|0,zt=u(Rt),Tt=zt.write(Mt,It);return Tt!==Rt&&(zt=zt.slice(0,Tt)),zt}function l(Mt){for(var It=Mt.length<0?0:I(Mt.length)|0,Rt=u(It),zt=0;zt<It;zt+=1)Rt[zt]=Mt[zt]&255;return Rt}function d(Mt){if(le(Mt,Uint8Array)){var It=new Uint8Array(Mt);return L(It.buffer,It.byteOffset,It.byteLength)}return l(Mt)}function L(Mt,It,Rt){if(It<0||Mt.byteLength<It)throw new RangeError('"offset" is outside of buffer bounds');if(Mt.byteLength<It+(Rt||0))throw new RangeError('"length" is outside of buffer bounds');var zt;return It===void 0&&Rt===void 0?zt=new Uint8Array(Mt):Rt===void 0?zt=new Uint8Array(Mt,It):zt=new Uint8Array(Mt,It,Rt),Object.setPrototypeOf(zt,c.prototype),zt}function w(Mt){if(c.isBuffer(Mt)){var It=I(Mt.length)|0,Rt=u(It);return Rt.length===0||Mt.copy(Rt,0,0,It),Rt}if(Mt.length!==void 0)return typeof Mt.length!="number"||ce(Mt.length)?u(0):l(Mt);if(Mt.type==="Buffer"&&Array.isArray(Mt.data))return l(Mt.data)}function I(Mt){if(Mt>=x)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+x.toString(16)+" bytes");return Mt|0}function z(Mt){return+Mt!=Mt&&(Mt=0),c.alloc(+Mt)}c.isBuffer=function(Mt){return Mt!=null&&Mt._isBuffer===!0&&Mt!==c.prototype},c.compare=function(Mt,It){if(le(Mt,Uint8Array)&&(Mt=c.from(Mt,Mt.offset,Mt.byteLength)),le(It,Uint8Array)&&(It=c.from(It,It.offset,It.byteLength)),!c.isBuffer(Mt)||!c.isBuffer(It))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Mt===It)return 0;for(var Rt=Mt.length,zt=It.length,Tt=0,ft=Math.min(Rt,zt);Tt<ft;++Tt)if(Mt[Tt]!==It[Tt]){Rt=Mt[Tt],zt=It[Tt];break}return Rt<zt?-1:zt<Rt?1:0},c.isEncoding=function(Mt){switch(String(Mt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(Mt,It){if(!Array.isArray(Mt))throw new TypeError('"list" argument must be an Array of Buffers');if(Mt.length===0)return c.alloc(0);var Rt;if(It===void 0)for(It=0,Rt=0;Rt<Mt.length;++Rt)It+=Mt[Rt].length;var zt=c.allocUnsafe(It),Tt=0;for(Rt=0;Rt<Mt.length;++Rt){var ft=Mt[Rt];if(le(ft,Uint8Array))Tt+ft.length>zt.length?(c.isBuffer(ft)||(ft=c.from(ft)),ft.copy(zt,Tt)):Uint8Array.prototype.set.call(zt,ft,Tt);else if(c.isBuffer(ft))ft.copy(zt,Tt);else throw new TypeError('"list" argument must be an Array of Buffers');Tt+=ft.length}return zt};function B(Mt,It){if(c.isBuffer(Mt))return Mt.length;if(ArrayBuffer.isView(Mt)||le(Mt,ArrayBuffer))return Mt.byteLength;if(typeof Mt!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+o(Mt));var Rt=Mt.length,zt=arguments.length>2&&arguments[2]===!0;if(!zt&&Rt===0)return 0;for(var Tt=!1;;)switch(It){case"ascii":case"latin1":case"binary":return Rt;case"utf8":case"utf-8":return Ht(Mt).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Rt*2;case"hex":return Rt>>>1;case"base64":return te(Mt).length;default:if(Tt)return zt?-1:Ht(Mt).length;It=(""+It).toLowerCase(),Tt=!0}}c.byteLength=B;function O(Mt,It,Rt){var zt=!1;if((It===void 0||It<0)&&(It=0),It>this.length||((Rt===void 0||Rt>this.length)&&(Rt=this.length),Rt<=0)||(Rt>>>=0,It>>>=0,Rt<=It))return"";for(Mt||(Mt="utf8");;)switch(Mt){case"hex":return nt(this,It,Rt);case"utf8":case"utf-8":return q(this,It,Rt);case"ascii":return G(this,It,Rt);case"latin1":case"binary":return et(this,It,Rt);case"base64":return it(this,It,Rt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,It,Rt);default:if(zt)throw new TypeError("Unknown encoding: "+Mt);Mt=(Mt+"").toLowerCase(),zt=!0}}c.prototype._isBuffer=!0;function R(Mt,It,Rt){var zt=Mt[It];Mt[It]=Mt[Rt],Mt[Rt]=zt}c.prototype.swap16=function(){var Mt=this.length;if(Mt%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var It=0;It<Mt;It+=2)R(this,It,It+1);return this},c.prototype.swap32=function(){var Mt=this.length;if(Mt%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var It=0;It<Mt;It+=4)R(this,It,It+3),R(this,It+1,It+2);return this},c.prototype.swap64=function(){var Mt=this.length;if(Mt%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var It=0;It<Mt;It+=8)R(this,It,It+7),R(this,It+1,It+6),R(this,It+2,It+5),R(this,It+3,It+4);return this},c.prototype.toString=function(){var Mt=this.length;return Mt===0?"":arguments.length===0?q(this,0,Mt):O.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(Mt){if(!c.isBuffer(Mt))throw new TypeError("Argument must be a Buffer");return this===Mt?!0:c.compare(this,Mt)===0},c.prototype.inspect=function(){var Mt="",It=U.INSPECT_MAX_BYTES;return Mt=this.toString("hex",0,It).replace(/(.{2})/g,"$1 ").trim(),this.length>It&&(Mt+=" ... "),"<Buffer "+Mt+">"},p&&(c.prototype[p]=c.prototype.inspect),c.prototype.compare=function(Mt,It,Rt,zt,Tt){if(le(Mt,Uint8Array)&&(Mt=c.from(Mt,Mt.offset,Mt.byteLength)),!c.isBuffer(Mt))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+o(Mt));if(It===void 0&&(It=0),Rt===void 0&&(Rt=Mt?Mt.length:0),zt===void 0&&(zt=0),Tt===void 0&&(Tt=this.length),It<0||Rt>Mt.length||zt<0||Tt>this.length)throw new RangeError("out of range index");if(zt>=Tt&&It>=Rt)return 0;if(zt>=Tt)return-1;if(It>=Rt)return 1;if(It>>>=0,Rt>>>=0,zt>>>=0,Tt>>>=0,this===Mt)return 0;for(var ft=Tt-zt,ut=Rt-It,vt=Math.min(ft,ut),St=this.slice(zt,Tt),Ot=Mt.slice(It,Rt),Xt=0;Xt<vt;++Xt)if(St[Xt]!==Ot[Xt]){ft=St[Xt],ut=Ot[Xt];break}return ft<ut?-1:ut<ft?1:0};function C(Mt,It,Rt,zt,Tt){if(Mt.length===0)return-1;if(typeof Rt=="string"?(zt=Rt,Rt=0):Rt>2147483647?Rt=2147483647:Rt<-2147483648&&(Rt=-2147483648),Rt=+Rt,ce(Rt)&&(Rt=Tt?0:Mt.length-1),Rt<0&&(Rt=Mt.length+Rt),Rt>=Mt.length){if(Tt)return-1;Rt=Mt.length-1}else if(Rt<0)if(Tt)Rt=0;else return-1;if(typeof It=="string"&&(It=c.from(It,zt)),c.isBuffer(It))return It.length===0?-1:F(Mt,It,Rt,zt,Tt);if(typeof It=="number")return It=It&255,typeof Uint8Array.prototype.indexOf=="function"?Tt?Uint8Array.prototype.indexOf.call(Mt,It,Rt):Uint8Array.prototype.lastIndexOf.call(Mt,It,Rt):F(Mt,[It],Rt,zt,Tt);throw new TypeError("val must be string, number or Buffer")}function F(Mt,It,Rt,zt,Tt){var ft=1,ut=Mt.length,vt=It.length;if(zt!==void 0&&(zt=String(zt).toLowerCase(),zt==="ucs2"||zt==="ucs-2"||zt==="utf16le"||zt==="utf-16le")){if(Mt.length<2||It.length<2)return-1;ft=2,ut/=2,vt/=2,Rt/=2}function St(Me,Fe){return ft===1?Me[Fe]:Me.readUInt16BE(Fe*ft)}var Ot;if(Tt){var Xt=-1;for(Ot=Rt;Ot<ut;Ot++)if(St(Mt,Ot)===St(It,Xt===-1?0:Ot-Xt)){if(Xt===-1&&(Xt=Ot),Ot-Xt+1===vt)return Xt*ft}else Xt!==-1&&(Ot-=Ot-Xt),Xt=-1}else for(Rt+vt>ut&&(Rt=ut-vt),Ot=Rt;Ot>=0;Ot--){for(var $t=!0,de=0;de<vt;de++)if(St(Mt,Ot+de)!==St(It,de)){$t=!1;break}if($t)return Ot}return-1}c.prototype.includes=function(Mt,It,Rt){return this.indexOf(Mt,It,Rt)!==-1},c.prototype.indexOf=function(Mt,It,Rt){return C(this,Mt,It,Rt,!0)},c.prototype.lastIndexOf=function(Mt,It,Rt){return C(this,Mt,It,Rt,!1)};function N(Mt,It,Rt,zt){Rt=Number(Rt)||0;var Tt=Mt.length-Rt;zt?(zt=Number(zt),zt>Tt&&(zt=Tt)):zt=Tt;var ft=It.length;zt>ft/2&&(zt=ft/2);var ut;for(ut=0;ut<zt;++ut){var vt=parseInt(It.substr(ut*2,2),16);if(ce(vt))return ut;Mt[Rt+ut]=vt}return ut}function V(Mt,It,Rt,zt){return ae(Ht(It,Mt.length-Rt),Mt,Rt,zt)}function K(Mt,It,Rt,zt){return ae(Vt(It),Mt,Rt,zt)}function Q(Mt,It,Rt,zt){return ae(te(It),Mt,Rt,zt)}function at(Mt,It,Rt,zt){return ae(ee(It,Mt.length-Rt),Mt,Rt,zt)}c.prototype.write=function(Mt,It,Rt,zt){if(It===void 0)zt="utf8",Rt=this.length,It=0;else if(Rt===void 0&&typeof It=="string")zt=It,Rt=this.length,It=0;else if(isFinite(It))It=It>>>0,isFinite(Rt)?(Rt=Rt>>>0,zt===void 0&&(zt="utf8")):(zt=Rt,Rt=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Tt=this.length-It;if((Rt===void 0||Rt>Tt)&&(Rt=Tt),Mt.length>0&&(Rt<0||It<0)||It>this.length)throw new RangeError("Attempt to write outside buffer bounds");zt||(zt="utf8");for(var ft=!1;;)switch(zt){case"hex":return N(this,Mt,It,Rt);case"utf8":case"utf-8":return V(this,Mt,It,Rt);case"ascii":case"latin1":case"binary":return K(this,Mt,It,Rt);case"base64":return Q(this,Mt,It,Rt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return at(this,Mt,It,Rt);default:if(ft)throw new TypeError("Unknown encoding: "+zt);zt=(""+zt).toLowerCase(),ft=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function it(Mt,It,Rt){return It===0&&Rt===Mt.length?h.fromByteArray(Mt):h.fromByteArray(Mt.slice(It,Rt))}function q(Mt,It,Rt){Rt=Math.min(Mt.length,Rt);for(var zt=[],Tt=It;Tt<Rt;){var ft=Mt[Tt],ut=null,vt=ft>239?4:ft>223?3:ft>191?2:1;if(Tt+vt<=Rt){var St=void 0,Ot=void 0,Xt=void 0,$t=void 0;switch(vt){case 1:ft<128&&(ut=ft);break;case 2:St=Mt[Tt+1],(St&192)===128&&($t=(ft&31)<<6|St&63,$t>127&&(ut=$t));break;case 3:St=Mt[Tt+1],Ot=Mt[Tt+2],(St&192)===128&&(Ot&192)===128&&($t=(ft&15)<<12|(St&63)<<6|Ot&63,$t>2047&&($t<55296||$t>57343)&&(ut=$t));break;case 4:St=Mt[Tt+1],Ot=Mt[Tt+2],Xt=Mt[Tt+3],(St&192)===128&&(Ot&192)===128&&(Xt&192)===128&&($t=(ft&15)<<18|(St&63)<<12|(Ot&63)<<6|Xt&63,$t>65535&&$t<1114112&&(ut=$t))}}ut===null?(ut=65533,vt=1):ut>65535&&(ut-=65536,zt.push(ut>>>10&1023|55296),ut=56320|ut&1023),zt.push(ut),Tt+=vt}return Z(zt)}var W=4096;function Z(Mt){var It=Mt.length;if(It<=W)return String.fromCharCode.apply(String,Mt);for(var Rt="",zt=0;zt<It;)Rt+=String.fromCharCode.apply(String,Mt.slice(zt,zt+=W));return Rt}function G(Mt,It,Rt){var zt="";Rt=Math.min(Mt.length,Rt);for(var Tt=It;Tt<Rt;++Tt)zt+=String.fromCharCode(Mt[Tt]&127);return zt}function et(Mt,It,Rt){var zt="";Rt=Math.min(Mt.length,Rt);for(var Tt=It;Tt<Rt;++Tt)zt+=String.fromCharCode(Mt[Tt]);return zt}function nt(Mt,It,Rt){var zt=Mt.length;(!It||It<0)&&(It=0),(!Rt||Rt<0||Rt>zt)&&(Rt=zt);for(var Tt="",ft=It;ft<Rt;++ft)Tt+=pe[Mt[ft]];return Tt}function X(Mt,It,Rt){for(var zt=Mt.slice(It,Rt),Tt="",ft=0;ft<zt.length-1;ft+=2)Tt+=String.fromCharCode(zt[ft]+zt[ft+1]*256);return Tt}c.prototype.slice=function(Mt,It){var Rt=this.length;Mt=~~Mt,It=It===void 0?Rt:~~It,Mt<0?(Mt+=Rt,Mt<0&&(Mt=0)):Mt>Rt&&(Mt=Rt),It<0?(It+=Rt,It<0&&(It=0)):It>Rt&&(It=Rt),It<Mt&&(It=Mt);var zt=this.subarray(Mt,It);return Object.setPrototypeOf(zt,c.prototype),zt};function Y(Mt,It,Rt){if(Mt%1!==0||Mt<0)throw new RangeError("offset is not uint");if(Mt+It>Rt)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(Mt,It,Rt){Mt=Mt>>>0,It=It>>>0,Rt||Y(Mt,It,this.length);for(var zt=this[Mt],Tt=1,ft=0;++ft<It&&(Tt*=256);)zt+=this[Mt+ft]*Tt;return zt},c.prototype.readUintBE=c.prototype.readUIntBE=function(Mt,It,Rt){Mt=Mt>>>0,It=It>>>0,Rt||Y(Mt,It,this.length);for(var zt=this[Mt+--It],Tt=1;It>0&&(Tt*=256);)zt+=this[Mt+--It]*Tt;return zt},c.prototype.readUint8=c.prototype.readUInt8=function(Mt,It){return Mt=Mt>>>0,It||Y(Mt,1,this.length),this[Mt]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(Mt,It){return Mt=Mt>>>0,It||Y(Mt,2,this.length),this[Mt]|this[Mt+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(Mt,It){return Mt=Mt>>>0,It||Y(Mt,2,this.length),this[Mt]<<8|this[Mt+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(Mt,It){return Mt=Mt>>>0,It||Y(Mt,4,this.length),(this[Mt]|this[Mt+1]<<8|this[Mt+2]<<16)+this[Mt+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(Mt,It){return Mt=Mt>>>0,It||Y(Mt,4,this.length),this[Mt]*16777216+(this[Mt+1]<<16|this[Mt+2]<<8|this[Mt+3])},c.prototype.readBigUInt64LE=we(function(Mt){Mt=Mt>>>0,Pt(Mt,"offset");var It=this[Mt],Rt=this[Mt+7];(It===void 0||Rt===void 0)&&Bt(Mt,this.length-8);var zt=It+this[++Mt]*Math.pow(2,8)+this[++Mt]*Math.pow(2,16)+this[++Mt]*Math.pow(2,24),Tt=this[++Mt]+this[++Mt]*Math.pow(2,8)+this[++Mt]*Math.pow(2,16)+Rt*Math.pow(2,24);return BigInt(zt)+(BigInt(Tt)<<BigInt(32))}),c.prototype.readBigUInt64BE=we(function(Mt){Mt=Mt>>>0,Pt(Mt,"offset");var It=this[Mt],Rt=this[Mt+7];(It===void 0||Rt===void 0)&&Bt(Mt,this.length-8);var zt=It*Math.pow(2,24)+this[++Mt]*Math.pow(2,16)+this[++Mt]*Math.pow(2,8)+this[++Mt],Tt=this[++Mt]*Math.pow(2,24)+this[++Mt]*Math.pow(2,16)+this[++Mt]*Math.pow(2,8)+Rt;return(BigInt(zt)<<BigInt(32))+BigInt(Tt)}),c.prototype.readIntLE=function(Mt,It,Rt){Mt=Mt>>>0,It=It>>>0,Rt||Y(Mt,It,this.length);for(var zt=this[Mt],Tt=1,ft=0;++ft<It&&(Tt*=256);)zt+=this[Mt+ft]*Tt;return Tt*=128,zt>=Tt&&(zt-=Math.pow(2,8*It)),zt},c.prototype.readIntBE=function(Mt,It,Rt){Mt=Mt>>>0,It=It>>>0,Rt||Y(Mt,It,this.length);for(var zt=It,Tt=1,ft=this[Mt+--zt];zt>0&&(Tt*=256);)ft+=this[Mt+--zt]*Tt;return Tt*=128,ft>=Tt&&(ft-=Math.pow(2,8*It)),ft},c.prototype.readInt8=function(Mt,It){return Mt=Mt>>>0,It||Y(Mt,1,this.length),this[Mt]&128?(255-this[Mt]+1)*-1:this[Mt]},c.prototype.readInt16LE=function(Mt,It){Mt=Mt>>>0,It||Y(Mt,2,this.length);var Rt=this[Mt]|this[Mt+1]<<8;return Rt&32768?Rt|4294901760:Rt},c.prototype.readInt16BE=function(Mt,It){Mt=Mt>>>0,It||Y(Mt,2,this.length);var Rt=this[Mt+1]|this[Mt]<<8;return Rt&32768?Rt|4294901760:Rt},c.prototype.readInt32LE=function(Mt,It){return Mt=Mt>>>0,It||Y(Mt,4,this.length),this[Mt]|this[Mt+1]<<8|this[Mt+2]<<16|this[Mt+3]<<24},c.prototype.readInt32BE=function(Mt,It){return Mt=Mt>>>0,It||Y(Mt,4,this.length),this[Mt]<<24|this[Mt+1]<<16|this[Mt+2]<<8|this[Mt+3]},c.prototype.readBigInt64LE=we(function(Mt){Mt=Mt>>>0,Pt(Mt,"offset");var It=this[Mt],Rt=this[Mt+7];(It===void 0||Rt===void 0)&&Bt(Mt,this.length-8);var zt=this[Mt+4]+this[Mt+5]*Math.pow(2,8)+this[Mt+6]*Math.pow(2,16)+(Rt<<24);return(BigInt(zt)<<BigInt(32))+BigInt(It+this[++Mt]*Math.pow(2,8)+this[++Mt]*Math.pow(2,16)+this[++Mt]*Math.pow(2,24))}),c.prototype.readBigInt64BE=we(function(Mt){Mt=Mt>>>0,Pt(Mt,"offset");var It=this[Mt],Rt=this[Mt+7];(It===void 0||Rt===void 0)&&Bt(Mt,this.length-8);var zt=(It<<24)+this[++Mt]*Math.pow(2,16)+this[++Mt]*Math.pow(2,8)+this[++Mt];return(BigInt(zt)<<BigInt(32))+BigInt(this[++Mt]*Math.pow(2,24)+this[++Mt]*Math.pow(2,16)+this[++Mt]*Math.pow(2,8)+Rt)}),c.prototype.readFloatLE=function(Mt,It){return Mt=Mt>>>0,It||Y(Mt,4,this.length),y.read(this,Mt,!0,23,4)},c.prototype.readFloatBE=function(Mt,It){return Mt=Mt>>>0,It||Y(Mt,4,this.length),y.read(this,Mt,!1,23,4)},c.prototype.readDoubleLE=function(Mt,It){return Mt=Mt>>>0,It||Y(Mt,8,this.length),y.read(this,Mt,!0,52,8)},c.prototype.readDoubleBE=function(Mt,It){return Mt=Mt>>>0,It||Y(Mt,8,this.length),y.read(this,Mt,!1,52,8)};function ot(Mt,It,Rt,zt,Tt,ft){if(!c.isBuffer(Mt))throw new TypeError('"buffer" argument must be a Buffer instance');if(It>Tt||It<ft)throw new RangeError('"value" argument is out of bounds');if(Rt+zt>Mt.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(Mt,It,Rt,zt){if(Mt=+Mt,It=It>>>0,Rt=Rt>>>0,!zt){var Tt=Math.pow(2,8*Rt)-1;ot(this,Mt,It,Rt,Tt,0)}var ft=1,ut=0;for(this[It]=Mt&255;++ut<Rt&&(ft*=256);)this[It+ut]=Mt/ft&255;return It+Rt},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(Mt,It,Rt,zt){if(Mt=+Mt,It=It>>>0,Rt=Rt>>>0,!zt){var Tt=Math.pow(2,8*Rt)-1;ot(this,Mt,It,Rt,Tt,0)}var ft=Rt-1,ut=1;for(this[It+ft]=Mt&255;--ft>=0&&(ut*=256);)this[It+ft]=Mt/ut&255;return It+Rt},c.prototype.writeUint8=c.prototype.writeUInt8=function(Mt,It,Rt){return Mt=+Mt,It=It>>>0,Rt||ot(this,Mt,It,1,255,0),this[It]=Mt&255,It+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(Mt,It,Rt){return Mt=+Mt,It=It>>>0,Rt||ot(this,Mt,It,2,65535,0),this[It]=Mt&255,this[It+1]=Mt>>>8,It+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(Mt,It,Rt){return Mt=+Mt,It=It>>>0,Rt||ot(this,Mt,It,2,65535,0),this[It]=Mt>>>8,this[It+1]=Mt&255,It+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(Mt,It,Rt){return Mt=+Mt,It=It>>>0,Rt||ot(this,Mt,It,4,4294967295,0),this[It+3]=Mt>>>24,this[It+2]=Mt>>>16,this[It+1]=Mt>>>8,this[It]=Mt&255,It+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(Mt,It,Rt){return Mt=+Mt,It=It>>>0,Rt||ot(this,Mt,It,4,4294967295,0),this[It]=Mt>>>24,this[It+1]=Mt>>>16,this[It+2]=Mt>>>8,this[It+3]=Mt&255,It+4};function rt(Mt,It,Rt,zt,Tt){wt(It,zt,Tt,Mt,Rt,7);var ft=Number(It&BigInt(4294967295));Mt[Rt++]=ft,ft=ft>>8,Mt[Rt++]=ft,ft=ft>>8,Mt[Rt++]=ft,ft=ft>>8,Mt[Rt++]=ft;var ut=Number(It>>BigInt(32)&BigInt(4294967295));return Mt[Rt++]=ut,ut=ut>>8,Mt[Rt++]=ut,ut=ut>>8,Mt[Rt++]=ut,ut=ut>>8,Mt[Rt++]=ut,Rt}function ht(Mt,It,Rt,zt,Tt){wt(It,zt,Tt,Mt,Rt,7);var ft=Number(It&BigInt(4294967295));Mt[Rt+7]=ft,ft=ft>>8,Mt[Rt+6]=ft,ft=ft>>8,Mt[Rt+5]=ft,ft=ft>>8,Mt[Rt+4]=ft;var ut=Number(It>>BigInt(32)&BigInt(4294967295));return Mt[Rt+3]=ut,ut=ut>>8,Mt[Rt+2]=ut,ut=ut>>8,Mt[Rt+1]=ut,ut=ut>>8,Mt[Rt]=ut,Rt+8}c.prototype.writeBigUInt64LE=we(function(Mt){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return rt(this,Mt,It,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=we(function(Mt){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ht(this,Mt,It,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(Mt,It,Rt,zt){if(Mt=+Mt,It=It>>>0,!zt){var Tt=Math.pow(2,8*Rt-1);ot(this,Mt,It,Rt,Tt-1,-Tt)}var ft=0,ut=1,vt=0;for(this[It]=Mt&255;++ft<Rt&&(ut*=256);)Mt<0&&vt===0&&this[It+ft-1]!==0&&(vt=1),this[It+ft]=(Mt/ut>>0)-vt&255;return It+Rt},c.prototype.writeIntBE=function(Mt,It,Rt,zt){if(Mt=+Mt,It=It>>>0,!zt){var Tt=Math.pow(2,8*Rt-1);ot(this,Mt,It,Rt,Tt-1,-Tt)}var ft=Rt-1,ut=1,vt=0;for(this[It+ft]=Mt&255;--ft>=0&&(ut*=256);)Mt<0&&vt===0&&this[It+ft+1]!==0&&(vt=1),this[It+ft]=(Mt/ut>>0)-vt&255;return It+Rt},c.prototype.writeInt8=function(Mt,It,Rt){return Mt=+Mt,It=It>>>0,Rt||ot(this,Mt,It,1,127,-128),Mt<0&&(Mt=255+Mt+1),this[It]=Mt&255,It+1},c.prototype.writeInt16LE=function(Mt,It,Rt){return Mt=+Mt,It=It>>>0,Rt||ot(this,Mt,It,2,32767,-32768),this[It]=Mt&255,this[It+1]=Mt>>>8,It+2},c.prototype.writeInt16BE=function(Mt,It,Rt){return Mt=+Mt,It=It>>>0,Rt||ot(this,Mt,It,2,32767,-32768),this[It]=Mt>>>8,this[It+1]=Mt&255,It+2},c.prototype.writeInt32LE=function(Mt,It,Rt){return Mt=+Mt,It=It>>>0,Rt||ot(this,Mt,It,4,2147483647,-2147483648),this[It]=Mt&255,this[It+1]=Mt>>>8,this[It+2]=Mt>>>16,this[It+3]=Mt>>>24,It+4},c.prototype.writeInt32BE=function(Mt,It,Rt){return Mt=+Mt,It=It>>>0,Rt||ot(this,Mt,It,4,2147483647,-2147483648),Mt<0&&(Mt=4294967295+Mt+1),this[It]=Mt>>>24,this[It+1]=Mt>>>16,this[It+2]=Mt>>>8,this[It+3]=Mt&255,It+4},c.prototype.writeBigInt64LE=we(function(Mt){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return rt(this,Mt,It,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=we(function(Mt){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ht(this,Mt,It,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function pt(Mt,It,Rt,zt,Tt,ft){if(Rt+zt>Mt.length)throw new RangeError("Index out of range");if(Rt<0)throw new RangeError("Index out of range")}function yt(Mt,It,Rt,zt,Tt){return It=+It,Rt=Rt>>>0,Tt||pt(Mt,It,Rt,4),y.write(Mt,It,Rt,zt,23,4),Rt+4}c.prototype.writeFloatLE=function(Mt,It,Rt){return yt(this,Mt,It,!0,Rt)},c.prototype.writeFloatBE=function(Mt,It,Rt){return yt(this,Mt,It,!1,Rt)};function xt(Mt,It,Rt,zt,Tt){return It=+It,Rt=Rt>>>0,Tt||pt(Mt,It,Rt,8),y.write(Mt,It,Rt,zt,52,8),Rt+8}c.prototype.writeDoubleLE=function(Mt,It,Rt){return xt(this,Mt,It,!0,Rt)},c.prototype.writeDoubleBE=function(Mt,It,Rt){return xt(this,Mt,It,!1,Rt)},c.prototype.copy=function(Mt,It,Rt,zt){if(!c.isBuffer(Mt))throw new TypeError("argument should be a Buffer");if(Rt||(Rt=0),!zt&&zt!==0&&(zt=this.length),It>=Mt.length&&(It=Mt.length),It||(It=0),zt>0&&zt<Rt&&(zt=Rt),zt===Rt||Mt.length===0||this.length===0)return 0;if(It<0)throw new RangeError("targetStart out of bounds");if(Rt<0||Rt>=this.length)throw new RangeError("Index out of range");if(zt<0)throw new RangeError("sourceEnd out of bounds");zt>this.length&&(zt=this.length),Mt.length-It<zt-Rt&&(zt=Mt.length-It+Rt);var Tt=zt-Rt;return this===Mt&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(It,Rt,zt):Uint8Array.prototype.set.call(Mt,this.subarray(Rt,zt),It),Tt},c.prototype.fill=function(Mt,It,Rt,zt){if(typeof Mt=="string"){if(typeof It=="string"?(zt=It,It=0,Rt=this.length):typeof Rt=="string"&&(zt=Rt,Rt=this.length),zt!==void 0&&typeof zt!="string")throw new TypeError("encoding must be a string");if(typeof zt=="string"&&!c.isEncoding(zt))throw new TypeError("Unknown encoding: "+zt);if(Mt.length===1){var Tt=Mt.charCodeAt(0);(zt==="utf8"&&Tt<128||zt==="latin1")&&(Mt=Tt)}}else typeof Mt=="number"?Mt=Mt&255:typeof Mt=="boolean"&&(Mt=Number(Mt));if(It<0||this.length<It||this.length<Rt)throw new RangeError("Out of range index");if(Rt<=It)return this;It=It>>>0,Rt=Rt===void 0?this.length:Rt>>>0,Mt||(Mt=0);var ft;if(typeof Mt=="number")for(ft=It;ft<Rt;++ft)this[ft]=Mt;else{var ut=c.isBuffer(Mt)?Mt:c.from(Mt,zt),vt=ut.length;if(vt===0)throw new TypeError('The value "'+Mt+'" is invalid for argument "value"');for(ft=0;ft<Rt-It;++ft)this[ft+It]=ut[ft%vt]}return this};var Ft={};function Et(Mt,It,Rt){Ft[Mt]=function(zt){g(ft,zt);var Tt=e(ft);function ft(){var ut;return M(this,ft),ut=Tt.call(this),Object.defineProperty(f(ut),"message",{value:It.apply(f(ut),arguments),writable:!0,configurable:!0}),ut.name="".concat(ut.name," [").concat(Mt,"]"),ut.stack,delete ut.name,ut}return i(ft,[{key:"code",get:function(){return Mt},set:function(ut){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ut,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(Mt,"]: ").concat(this.message)}}]),ft}(Rt)}Et("ERR_BUFFER_OUT_OF_BOUNDS",function(Mt){return Mt?"".concat(Mt," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),Et("ERR_INVALID_ARG_TYPE",function(Mt,It){return'The "'.concat(Mt,'" argument must be of type number. Received type ').concat(o(It))},TypeError),Et("ERR_OUT_OF_RANGE",function(Mt,It,Rt){var zt='The value of "'.concat(Mt,'" is out of range.'),Tt=Rt;return Number.isInteger(Rt)&&Math.abs(Rt)>Math.pow(2,32)?Tt=mt(String(Rt)):typeof Rt=="bigint"&&(Tt=String(Rt),(Rt>Math.pow(BigInt(2),BigInt(32))||Rt<-Math.pow(BigInt(2),BigInt(32)))&&(Tt=mt(Tt)),Tt+="n"),zt+=" It must be ".concat(It,". Received ").concat(Tt),zt},RangeError);function mt(Mt){for(var It="",Rt=Mt.length,zt=Mt[0]==="-"?1:0;Rt>=zt+4;Rt-=3)It="_".concat(Mt.slice(Rt-3,Rt)).concat(It);return"".concat(Mt.slice(0,Rt)).concat(It)}function gt(Mt,It,Rt){Pt(It,"offset"),(Mt[It]===void 0||Mt[It+Rt]===void 0)&&Bt(It,Mt.length-(Rt+1))}function wt(Mt,It,Rt,zt,Tt,ft){if(Mt>Rt||Mt<It){var ut=typeof It=="bigint"?"n":"",vt;throw ft>3?It===0||It===BigInt(0)?vt=">= 0".concat(ut," and < 2").concat(ut," ** ").concat((ft+1)*8).concat(ut):vt=">= -(2".concat(ut," ** ").concat((ft+1)*8-1).concat(ut,") and < 2 ** ")+"".concat((ft+1)*8-1).concat(ut):vt=">= ".concat(It).concat(ut," and <= ").concat(Rt).concat(ut),new Ft.ERR_OUT_OF_RANGE("value",vt,Mt)}gt(zt,Tt,ft)}function Pt(Mt,It){if(typeof Mt!="number")throw new Ft.ERR_INVALID_ARG_TYPE(It,"number",Mt)}function Bt(Mt,It,Rt){throw Math.floor(Mt)!==Mt?(Pt(Mt,Rt),new Ft.ERR_OUT_OF_RANGE(Rt||"offset","an integer",Mt)):It<0?new Ft.ERR_BUFFER_OUT_OF_BOUNDS:new Ft.ERR_OUT_OF_RANGE(Rt||"offset",">= ".concat(Rt?1:0," and <= ").concat(It),Mt)}var kt=/[^+/0-9A-Za-z-_]/g;function jt(Mt){if(Mt=Mt.split("=")[0],Mt=Mt.trim().replace(kt,""),Mt.length<2)return"";for(;Mt.length%4!==0;)Mt=Mt+"=";return Mt}function Ht(Mt,It){It=It||1/0;for(var Rt,zt=Mt.length,Tt=null,ft=[],ut=0;ut<zt;++ut){if(Rt=Mt.charCodeAt(ut),Rt>55295&&Rt<57344){if(!Tt){if(Rt>56319){(It-=3)>-1&&ft.push(239,191,189);continue}else if(ut+1===zt){(It-=3)>-1&&ft.push(239,191,189);continue}Tt=Rt;continue}if(Rt<56320){(It-=3)>-1&&ft.push(239,191,189),Tt=Rt;continue}Rt=(Tt-55296<<10|Rt-56320)+65536}else Tt&&(It-=3)>-1&&ft.push(239,191,189);if(Tt=null,Rt<128){if((It-=1)<0)break;ft.push(Rt)}else if(Rt<2048){if((It-=2)<0)break;ft.push(Rt>>6|192,Rt&63|128)}else if(Rt<65536){if((It-=3)<0)break;ft.push(Rt>>12|224,Rt>>6&63|128,Rt&63|128)}else if(Rt<1114112){if((It-=4)<0)break;ft.push(Rt>>18|240,Rt>>12&63|128,Rt>>6&63|128,Rt&63|128)}else throw new Error("Invalid code point")}return ft}function Vt(Mt){for(var It=[],Rt=0;Rt<Mt.length;++Rt)It.push(Mt.charCodeAt(Rt)&255);return It}function ee(Mt,It){for(var Rt,zt,Tt,ft=[],ut=0;ut<Mt.length&&!((It-=2)<0);++ut)Rt=Mt.charCodeAt(ut),zt=Rt>>8,Tt=Rt%256,ft.push(Tt),ft.push(zt);return ft}function te(Mt){return h.toByteArray(jt(Mt))}function ae(Mt,It,Rt,zt){var Tt;for(Tt=0;Tt<zt&&!(Tt+Rt>=It.length||Tt>=Mt.length);++Tt)It[Tt+Rt]=Mt[Tt];return Tt}function le(Mt,It){return Mt instanceof It||Mt!=null&&Mt.constructor!=null&&Mt.constructor.name!=null&&Mt.constructor.name===It.name}function ce(Mt){return Mt!==Mt}var pe=function(){for(var Mt="0123456789abcdef",It=new Array(256),Rt=0;Rt<16;++Rt)for(var zt=Rt*16,Tt=0;Tt<16;++Tt)It[zt+Tt]=Mt[Rt]+Mt[Tt];return It}();function we(Mt){return typeof BigInt>"u"?ve:Mt}function ve(){throw new Error("BigInt not supported")}},35791:function($){$.exports=E,$.exports.isMobile=E,$.exports.default=E;var U=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/CrOS/,M=/android|ipad|playbook|silk/i;function E(i){i||(i={});var S=i.ua;if(!S&&typeof navigator<"u"&&(S=navigator.userAgent),S&&S.headers&&typeof S.headers["user-agent"]=="string"&&(S=S.headers["user-agent"]),typeof S!="string")return!1;var A=U.test(S)&&!t.test(S)||!!i.tablet&&M.test(S);return!A&&i.tablet&&i.featureDetect&&navigator&&navigator.maxTouchPoints>1&&S.indexOf("Macintosh")!==-1&&S.indexOf("Safari")!==-1&&(A=!0),A}},86781:function($,U,t){t.r(U),t.d(U,{sankeyCenter:function(){return f},sankeyCircular:function(){return L},sankeyJustify:function(){return r},sankeyLeft:function(){return v},sankeyRight:function(){return e}});var M=t(33064),E=t(15140),i=t(45879),S=t(2502),A=t.n(S);function g(xt){return xt.target.depth}function v(xt){return xt.depth}function e(xt,Ft){return Ft-1-xt.height}function r(xt,Ft){return xt.sourceLinks.length?xt.depth:Ft-1}function f(xt){return xt.targetLinks.length?xt.depth:xt.sourceLinks.length?(0,M.VV)(xt.sourceLinks,g)-1:0}function n(xt){return function(){return xt}}var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(xt){return typeof xt}:function(xt){return xt&&typeof Symbol=="function"&&xt.constructor===Symbol&&xt!==Symbol.prototype?"symbol":typeof xt};function o(xt,Ft){return y(xt.source,Ft.source)||xt.index-Ft.index}function h(xt,Ft){return y(xt.target,Ft.target)||xt.index-Ft.index}function y(xt,Ft){return xt.partOfCycle===Ft.partOfCycle?xt.y0-Ft.y0:xt.circularLinkType==="top"||Ft.circularLinkType==="bottom"?-1:1}function p(xt){return xt.value}function x(xt){return(xt.y0+xt.y1)/2}function s(xt){return x(xt.source)}function u(xt){return x(xt.target)}function c(xt){return xt.index}function T(xt){return xt.nodes}function k(xt){return xt.links}function _(xt,Ft){var Et=xt.get(Ft);if(!Et)throw new Error("missing: "+Ft);return Et}function b(xt,Ft){return Ft(xt)}var P=25,l=10,d=.3;function L(){var xt=0,Ft=0,Et=1,mt=1,gt=24,wt,Pt=c,Bt=r,kt=T,jt=k,Ht=32,Vt=2,ee,te=null;function ae(){var Rt={nodes:kt.apply(null,arguments),links:jt.apply(null,arguments)};le(Rt),w(Rt,Pt,te),ce(Rt),ve(Rt),I(Rt,Pt),Mt(Rt,Ht,Pt),It(Rt);for(var zt=4,Tt=0;Tt<zt;Tt++)Y(Rt,mt,Pt),ot(Rt,mt,Pt),et(Rt,Ft,mt,Pt),Y(Rt,mt,Pt),ot(Rt,mt,Pt);return yt(Rt,Ft,mt),F(Rt,Vt,mt,Pt),Rt}ae.nodeId=function(Rt){return arguments.length?(Pt=typeof Rt=="function"?Rt:n(Rt),ae):Pt},ae.nodeAlign=function(Rt){return arguments.length?(Bt=typeof Rt=="function"?Rt:n(Rt),ae):Bt},ae.nodeWidth=function(Rt){return arguments.length?(gt=+Rt,ae):gt},ae.nodePadding=function(Rt){return arguments.length?(wt=+Rt,ae):wt},ae.nodes=function(Rt){return arguments.length?(kt=typeof Rt=="function"?Rt:n(Rt),ae):kt},ae.links=function(Rt){return arguments.length?(jt=typeof Rt=="function"?Rt:n(Rt),ae):jt},ae.size=function(Rt){return arguments.length?(xt=Ft=0,Et=+Rt[0],mt=+Rt[1],ae):[Et-xt,mt-Ft]},ae.extent=function(Rt){return arguments.length?(xt=+Rt[0][0],Et=+Rt[1][0],Ft=+Rt[0][1],mt=+Rt[1][1],ae):[[xt,Ft],[Et,mt]]},ae.iterations=function(Rt){return arguments.length?(Ht=+Rt,ae):Ht},ae.circularLinkGap=function(Rt){return arguments.length?(Vt=+Rt,ae):Vt},ae.nodePaddingRatio=function(Rt){return arguments.length?(ee=+Rt,ae):ee},ae.sortNodes=function(Rt){return arguments.length?(te=Rt,ae):te},ae.update=function(Rt){return I(Rt,Pt),It(Rt),Rt.links.forEach(function(zt){zt.circular&&(zt.circularLinkType=zt.y0+zt.y1<mt?"top":"bottom",zt.source.circularLinkType=zt.circularLinkType,zt.target.circularLinkType=zt.circularLinkType)}),Y(Rt,mt,Pt,!1),ot(Rt,mt,Pt),F(Rt,Vt,mt,Pt),Rt};function le(Rt){Rt.nodes.forEach(function(Tt,ft){Tt.index=ft,Tt.sourceLinks=[],Tt.targetLinks=[]});var zt=(0,E.UI)(Rt.nodes,Pt);return Rt.links.forEach(function(Tt,ft){Tt.index=ft;var ut=Tt.source,vt=Tt.target;(typeof ut>"u"?"undefined":a(ut))!=="object"&&(ut=Tt.source=_(zt,ut)),(typeof vt>"u"?"undefined":a(vt))!=="object"&&(vt=Tt.target=_(zt,vt)),ut.sourceLinks.push(Tt),vt.targetLinks.push(Tt)}),Rt}function ce(Rt){Rt.nodes.forEach(function(zt){zt.partOfCycle=!1,zt.value=Math.max((0,M.Sm)(zt.sourceLinks,p),(0,M.Sm)(zt.targetLinks,p)),zt.sourceLinks.forEach(function(Tt){Tt.circular&&(zt.partOfCycle=!0,zt.circularLinkType=Tt.circularLinkType)}),zt.targetLinks.forEach(function(Tt){Tt.circular&&(zt.partOfCycle=!0,zt.circularLinkType=Tt.circularLinkType)})})}function pe(Rt){var zt=0,Tt=0,ft=0,ut=0,vt=(0,M.Fp)(Rt.nodes,function(St){return St.column});return Rt.links.forEach(function(St){St.circular&&(St.circularLinkType=="top"?zt=zt+St.width:Tt=Tt+St.width,St.target.column==0&&(ut=ut+St.width),St.source.column==vt&&(ft=ft+St.width))}),zt=zt>0?zt+P+l:zt,Tt=Tt>0?Tt+P+l:Tt,ft=ft>0?ft+P+l:ft,ut=ut>0?ut+P+l:ut,{top:zt,bottom:Tt,left:ut,right:ft}}function we(Rt,zt){var Tt=(0,M.Fp)(Rt.nodes,function($t){return $t.column}),ft=Et-xt,ut=mt-Ft,vt=ft+zt.right+zt.left,St=ut+zt.top+zt.bottom,Ot=ft/vt,Xt=ut/St;return xt=xt*Ot+zt.left,Et=zt.right==0?Et:Et*Ot,Ft=Ft*Xt+zt.top,mt=mt*Xt,Rt.nodes.forEach(function($t){$t.x0=xt+$t.column*((Et-xt-gt)/Tt),$t.x1=$t.x0+gt}),Xt}function ve(Rt){var zt,Tt,ft;for(zt=Rt.nodes,Tt=[],ft=0;zt.length;++ft,zt=Tt,Tt=[])zt.forEach(function(ut){ut.depth=ft,ut.sourceLinks.forEach(function(vt){Tt.indexOf(vt.target)<0&&!vt.circular&&Tt.push(vt.target)})});for(zt=Rt.nodes,Tt=[],ft=0;zt.length;++ft,zt=Tt,Tt=[])zt.forEach(function(ut){ut.height=ft,ut.targetLinks.forEach(function(vt){Tt.indexOf(vt.source)<0&&!vt.circular&&Tt.push(vt.source)})});Rt.nodes.forEach(function(ut){ut.column=Math.floor(Bt.call(null,ut,ft))})}function Mt(Rt,zt,Tt){var ft=(0,E.b1)().key(function($t){return $t.column}).sortKeys(M.j2).entries(Rt.nodes).map(function($t){return $t.values});St(Tt),Xt();for(var ut=1,vt=zt;vt>0;--vt)Ot(ut*=.99,Tt),Xt();function St($t){if(ee){var de=1/0;ft.forEach(function(Ae){var Ve=mt*ee/(Ae.length+1);de=Ve<de?Ve:de}),wt=de}var Me=(0,M.VV)(ft,function(Ae){return(mt-Ft-(Ae.length-1)*wt)/(0,M.Sm)(Ae,p)});Me=Me*d,Rt.links.forEach(function(Ae){Ae.width=Ae.value*Me});var Fe=pe(Rt),De=we(Rt,Fe);Me=Me*De,Rt.links.forEach(function(Ae){Ae.width=Ae.value*Me}),ft.forEach(function(Ae){var Ve=Ae.length;Ae.forEach(function(Qe,Sr){Qe.depth==ft.length-1&&Ve==1||Qe.depth==0&&Ve==1?(Qe.y0=mt/2-Qe.value*Me,Qe.y1=Qe.y0+Qe.value*Me):Qe.partOfCycle?O(Qe,$t)==0?(Qe.y0=mt/2+Sr,Qe.y1=Qe.y0+Qe.value*Me):Qe.circularLinkType=="top"?(Qe.y0=Ft+Sr,Qe.y1=Qe.y0+Qe.value*Me):(Qe.y0=mt-Qe.value*Me-Sr,Qe.y1=Qe.y0+Qe.value*Me):Fe.top==0||Fe.bottom==0?(Qe.y0=(mt-Ft)/Ve*Sr,Qe.y1=Qe.y0+Qe.value*Me):(Qe.y0=(mt-Ft)/2-Ve/2+Sr,Qe.y1=Qe.y0+Qe.value*Me)})})}function Ot($t,de){var Me=ft.length;ft.forEach(function(Fe){var De=Fe.length,Ae=Fe[0].depth;Fe.forEach(function(Ve){var Qe;if((Ve.sourceLinks.length||Ve.targetLinks.length)&&!(Ve.partOfCycle&&O(Ve,de)>0))if(Ae==0&&De==1)Qe=Ve.y1-Ve.y0,Ve.y0=mt/2-Qe/2,Ve.y1=mt/2+Qe/2;else if(Ae==Me-1&&De==1)Qe=Ve.y1-Ve.y0,Ve.y0=mt/2-Qe/2,Ve.y1=mt/2+Qe/2;else{var Sr=0,he=(0,M.J6)(Ve.sourceLinks,u),je=(0,M.J6)(Ve.targetLinks,s);he&&je?Sr=(he+je)/2:Sr=he||je;var Re=(Sr-x(Ve))*$t;Ve.y0+=Re,Ve.y1+=Re}})})}function Xt(){ft.forEach(function($t){var de,Me,Fe=Ft,De=$t.length,Ae;for($t.sort(y),Ae=0;Ae<De;++Ae)de=$t[Ae],Me=Fe-de.y0,Me>0&&(de.y0+=Me,de.y1+=Me),Fe=de.y1+wt;if(Me=Fe-wt-mt,Me>0)for(Fe=de.y0-=Me,de.y1-=Me,Ae=De-2;Ae>=0;--Ae)de=$t[Ae],Me=de.y1+wt-Fe,Me>0&&(de.y0-=Me,de.y1-=Me),Fe=de.y0})}}function It(Rt){Rt.nodes.forEach(function(zt){zt.sourceLinks.sort(h),zt.targetLinks.sort(o)}),Rt.nodes.forEach(function(zt){var Tt=zt.y0,ft=Tt,ut=zt.y1,vt=ut;zt.sourceLinks.forEach(function(St){St.circular?(St.y0=ut-St.width/2,ut=ut-St.width):(St.y0=Tt+St.width/2,Tt+=St.width)}),zt.targetLinks.forEach(function(St){St.circular?(St.y1=vt-St.width/2,vt=vt-St.width):(St.y1=ft+St.width/2,ft+=St.width)})})}return ae}function w(xt,Ft,Et){var mt=0;if(Et===null){for(var gt=[],wt=0;wt<xt.links.length;wt++){var Pt=xt.links[wt],Bt=Pt.source.index,kt=Pt.target.index;gt[Bt]||(gt[Bt]=[]),gt[kt]||(gt[kt]=[]),gt[Bt].indexOf(kt)===-1&&gt[Bt].push(kt)}var jt=A()(gt);jt.sort(function(te,ae){return te.length-ae.length});var Ht={};for(wt=0;wt<jt.length;wt++){var Vt=jt[wt],ee=Vt.slice(-2);Ht[ee[0]]||(Ht[ee[0]]={}),Ht[ee[0]][ee[1]]=!0}xt.links.forEach(function(te){var ae=te.target.index,le=te.source.index;ae===le||Ht[le]&&Ht[le][ae]?(te.circular=!0,te.circularLinkID=mt,mt=mt+1):te.circular=!1})}else xt.links.forEach(function(te){te.source[Et]<te.target[Et]?te.circular=!1:(te.circular=!0,te.circularLinkID=mt,mt=mt+1)})}function I(xt,Ft){var Et=0,mt=0;xt.links.forEach(function(gt){gt.circular&&(gt.source.circularLinkType||gt.target.circularLinkType?gt.circularLinkType=gt.source.circularLinkType?gt.source.circularLinkType:gt.target.circularLinkType:gt.circularLinkType=Et<mt?"top":"bottom",gt.circularLinkType=="top"?Et=Et+1:mt=mt+1,xt.nodes.forEach(function(wt){(b(wt,Ft)==b(gt.source,Ft)||b(wt,Ft)==b(gt.target,Ft))&&(wt.circularLinkType=gt.circularLinkType)}))}),xt.links.forEach(function(gt){gt.circular&&(gt.source.circularLinkType==gt.target.circularLinkType&&(gt.circularLinkType=gt.source.circularLinkType),pt(gt,Ft)&&(gt.circularLinkType=gt.source.circularLinkType))})}function z(xt){var Ft=Math.abs(xt.y1-xt.y0),Et=Math.abs(xt.target.x0-xt.source.x1);return Math.atan(Et/Ft)}function B(xt,Ft){return xt.source.column<Ft.target.column?!1:!(xt.target.column>Ft.source.column)}function O(xt,Ft){var Et=0;xt.sourceLinks.forEach(function(gt){Et=gt.circular&&!pt(gt,Ft)?Et+1:Et});var mt=0;return xt.targetLinks.forEach(function(gt){mt=gt.circular&&!pt(gt,Ft)?mt+1:mt}),Et+mt}function R(xt){var Ft=xt.source.sourceLinks,Et=0;Ft.forEach(function(wt){Et=wt.circular?Et+1:Et});var mt=xt.target.targetLinks,gt=0;return mt.forEach(function(wt){gt=wt.circular?gt+1:gt}),!(Et>1||gt>1)}function C(xt,Ft,Et){return xt.sort(V),xt.forEach(function(mt,gt){var wt=0;if(pt(mt,Et)&&R(mt))mt.circularPathData.verticalBuffer=wt+mt.width/2;else{var Pt=0;for(Pt;Pt<gt;Pt++)if(B(xt[gt],xt[Pt])){var Bt=xt[Pt].circularPathData.verticalBuffer+xt[Pt].width/2+Ft;wt=Bt>wt?Bt:wt}mt.circularPathData.verticalBuffer=wt+mt.width/2}}),xt}function F(xt,Ft,Et,mt){var gt=5,wt=(0,M.VV)(xt.links,function(kt){return kt.source.y0});xt.links.forEach(function(kt){kt.circular&&(kt.circularPathData={})});var Pt=xt.links.filter(function(kt){return kt.circularLinkType=="top"});C(Pt,Ft,mt);var Bt=xt.links.filter(function(kt){return kt.circularLinkType=="bottom"});C(Bt,Ft,mt),xt.links.forEach(function(kt){if(kt.circular){if(kt.circularPathData.arcRadius=kt.width+l,kt.circularPathData.leftNodeBuffer=gt,kt.circularPathData.rightNodeBuffer=gt,kt.circularPathData.sourceWidth=kt.source.x1-kt.source.x0,kt.circularPathData.sourceX=kt.source.x0+kt.circularPathData.sourceWidth,kt.circularPathData.targetX=kt.target.x0,kt.circularPathData.sourceY=kt.y0,kt.circularPathData.targetY=kt.y1,pt(kt,mt)&&R(kt))kt.circularPathData.leftSmallArcRadius=l+kt.width/2,kt.circularPathData.leftLargeArcRadius=l+kt.width/2,kt.circularPathData.rightSmallArcRadius=l+kt.width/2,kt.circularPathData.rightLargeArcRadius=l+kt.width/2,kt.circularLinkType=="bottom"?(kt.circularPathData.verticalFullExtent=kt.source.y1+P+kt.circularPathData.verticalBuffer,kt.circularPathData.verticalLeftInnerExtent=kt.circularPathData.verticalFullExtent-kt.circularPathData.leftLargeArcRadius,kt.circularPathData.verticalRightInnerExtent=kt.circularPathData.verticalFullExtent-kt.circularPathData.rightLargeArcRadius):(kt.circularPathData.verticalFullExtent=kt.source.y0-P-kt.circularPathData.verticalBuffer,kt.circularPathData.verticalLeftInnerExtent=kt.circularPathData.verticalFullExtent+kt.circularPathData.leftLargeArcRadius,kt.circularPathData.verticalRightInnerExtent=kt.circularPathData.verticalFullExtent+kt.circularPathData.rightLargeArcRadius);else{var jt=kt.source.column,Ht=kt.circularLinkType,Vt=xt.links.filter(function(ae){return ae.source.column==jt&&ae.circularLinkType==Ht});kt.circularLinkType=="bottom"?Vt.sort(Q):Vt.sort(K);var ee=0;Vt.forEach(function(ae,le){ae.circularLinkID==kt.circularLinkID&&(kt.circularPathData.leftSmallArcRadius=l+kt.width/2+ee,kt.circularPathData.leftLargeArcRadius=l+kt.width/2+le*Ft+ee),ee=ee+ae.width}),jt=kt.target.column,Vt=xt.links.filter(function(ae){return ae.target.column==jt&&ae.circularLinkType==Ht}),kt.circularLinkType=="bottom"?Vt.sort(it):Vt.sort(at),ee=0,Vt.forEach(function(ae,le){ae.circularLinkID==kt.circularLinkID&&(kt.circularPathData.rightSmallArcRadius=l+kt.width/2+ee,kt.circularPathData.rightLargeArcRadius=l+kt.width/2+le*Ft+ee),ee=ee+ae.width}),kt.circularLinkType=="bottom"?(kt.circularPathData.verticalFullExtent=Math.max(Et,kt.source.y1,kt.target.y1)+P+kt.circularPathData.verticalBuffer,kt.circularPathData.verticalLeftInnerExtent=kt.circularPathData.verticalFullExtent-kt.circularPathData.leftLargeArcRadius,kt.circularPathData.verticalRightInnerExtent=kt.circularPathData.verticalFullExtent-kt.circularPathData.rightLargeArcRadius):(kt.circularPathData.verticalFullExtent=wt-P-kt.circularPathData.verticalBuffer,kt.circularPathData.verticalLeftInnerExtent=kt.circularPathData.verticalFullExtent+kt.circularPathData.leftLargeArcRadius,kt.circularPathData.verticalRightInnerExtent=kt.circularPathData.verticalFullExtent+kt.circularPathData.rightLargeArcRadius)}kt.circularPathData.leftInnerExtent=kt.circularPathData.sourceX+kt.circularPathData.leftNodeBuffer,kt.circularPathData.rightInnerExtent=kt.circularPathData.targetX-kt.circularPathData.rightNodeBuffer,kt.circularPathData.leftFullExtent=kt.circularPathData.sourceX+kt.circularPathData.leftLargeArcRadius+kt.circularPathData.leftNodeBuffer,kt.circularPathData.rightFullExtent=kt.circularPathData.targetX-kt.circularPathData.rightLargeArcRadius-kt.circularPathData.rightNodeBuffer}if(kt.circular)kt.path=N(kt);else{var te=(0,i.h5)().source(function(ae){var le=ae.source.x0+(ae.source.x1-ae.source.x0),ce=ae.y0;return[le,ce]}).target(function(ae){var le=ae.target.x0,ce=ae.y1;return[le,ce]});kt.path=te(kt)}})}function N(xt){var Ft="";return xt.circularLinkType=="top"?Ft="M"+xt.circularPathData.sourceX+" "+xt.circularPathData.sourceY+" L"+xt.circularPathData.leftInnerExtent+" "+xt.circularPathData.sourceY+" A"+xt.circularPathData.leftLargeArcRadius+" "+xt.circularPathData.leftSmallArcRadius+" 0 0 0 "+xt.circularPathData.leftFullExtent+" "+(xt.circularPathData.sourceY-xt.circularPathData.leftSmallArcRadius)+" L"+xt.circularPathData.leftFullExtent+" "+xt.circularPathData.verticalLeftInnerExtent+" A"+xt.circularPathData.leftLargeArcRadius+" "+xt.circularPathData.leftLargeArcRadius+" 0 0 0 "+xt.circularPathData.leftInnerExtent+" "+xt.circularPathData.verticalFullExtent+" L"+xt.circularPathData.rightInnerExtent+" "+xt.circularPathData.verticalFullExtent+" A"+xt.circularPathData.rightLargeArcRadius+" "+xt.circularPathData.rightLargeArcRadius+" 0 0 0 "+xt.circularPathData.rightFullExtent+" "+xt.circularPathData.verticalRightInnerExtent+" L"+xt.circularPathData.rightFullExtent+" "+(xt.circularPathData.targetY-xt.circularPathData.rightSmallArcRadius)+" A"+xt.circularPathData.rightLargeArcRadius+" "+xt.circularPathData.rightSmallArcRadius+" 0 0 0 "+xt.circularPathData.rightInnerExtent+" "+xt.circularPathData.targetY+" L"+xt.circularPathData.targetX+" "+xt.circularPathData.targetY:Ft="M"+xt.circularPathData.sourceX+" "+xt.circularPathData.sourceY+" L"+xt.circularPathData.leftInnerExtent+" "+xt.circularPathData.sourceY+" A"+xt.circularPathData.leftLargeArcRadius+" "+xt.circularPathData.leftSmallArcRadius+" 0 0 1 "+xt.circularPathData.leftFullExtent+" "+(xt.circularPathData.sourceY+xt.circularPathData.leftSmallArcRadius)+" L"+xt.circularPathData.leftFullExtent+" "+xt.circularPathData.verticalLeftInnerExtent+" A"+xt.circularPathData.leftLargeArcRadius+" "+xt.circularPathData.leftLargeArcRadius+" 0 0 1 "+xt.circularPathData.leftInnerExtent+" "+xt.circularPathData.verticalFullExtent+" L"+xt.circularPathData.rightInnerExtent+" "+xt.circularPathData.verticalFullExtent+" A"+xt.circularPathData.rightLargeArcRadius+" "+xt.circularPathData.rightLargeArcRadius+" 0 0 1 "+xt.circularPathData.rightFullExtent+" "+xt.circularPathData.verticalRightInnerExtent+" L"+xt.circularPathData.rightFullExtent+" "+(xt.circularPathData.targetY+xt.circularPathData.rightSmallArcRadius)+" A"+xt.circularPathData.rightLargeArcRadius+" "+xt.circularPathData.rightSmallArcRadius+" 0 0 1 "+xt.circularPathData.rightInnerExtent+" "+xt.circularPathData.targetY+" L"+xt.circularPathData.targetX+" "+xt.circularPathData.targetY,Ft}function V(xt,Ft){return q(xt)==q(Ft)?xt.circularLinkType=="bottom"?Q(xt,Ft):K(xt,Ft):q(Ft)-q(xt)}function K(xt,Ft){return xt.y0-Ft.y0}function Q(xt,Ft){return Ft.y0-xt.y0}function at(xt,Ft){return xt.y1-Ft.y1}function it(xt,Ft){return Ft.y1-xt.y1}function q(xt){return xt.target.column-xt.source.column}function W(xt){return xt.target.x0-xt.source.x1}function Z(xt,Ft){var Et=z(xt),mt=W(Ft)/Math.tan(Et),gt=ht(xt)=="up"?xt.y1+mt:xt.y1-mt;return gt}function G(xt,Ft){var Et=z(xt),mt=W(Ft)/Math.tan(Et),gt=ht(xt)=="up"?xt.y1-mt:xt.y1+mt;return gt}function et(xt,Ft,Et,mt){xt.links.forEach(function(gt){if(!gt.circular&&gt.target.column-gt.source.column>1){var wt=gt.source.column+1,Pt=gt.target.column-1,Bt=1,kt=Pt-wt+1;for(Bt=1;wt<=Pt;wt++,Bt++)xt.nodes.forEach(function(jt){if(jt.column==wt){var Ht=Bt/(kt+1),Vt=Math.pow(1-Ht,3),ee=3*Ht*Math.pow(1-Ht,2),te=3*Math.pow(Ht,2)*(1-Ht),ae=Math.pow(Ht,3),le=Vt*gt.y0+ee*gt.y0+te*gt.y1+ae*gt.y1,ce=le-gt.width/2,pe=le+gt.width/2,we;ce>jt.y0&&ce<jt.y1?(we=jt.y1-ce+10,we=jt.circularLinkType=="bottom"?we:-we,jt=X(jt,we,Ft,Et),xt.nodes.forEach(function(ve){b(ve,mt)==b(jt,mt)||ve.column!=jt.column||nt(jt,ve)&&X(ve,we,Ft,Et)})):pe>jt.y0&&pe<jt.y1?(we=pe-jt.y0+10,jt=X(jt,we,Ft,Et),xt.nodes.forEach(function(ve){b(ve,mt)==b(jt,mt)||ve.column!=jt.column||ve.y0<jt.y1&&ve.y1>jt.y1&&X(ve,we,Ft,Et)})):ce<jt.y0&&pe>jt.y1&&(we=pe-jt.y0+10,jt=X(jt,we,Ft,Et),xt.nodes.forEach(function(ve){b(ve,mt)==b(jt,mt)||ve.column!=jt.column||ve.y0<jt.y1&&ve.y1>jt.y1&&X(ve,we,Ft,Et)}))}})}})}function nt(xt,Ft){return xt.y0>Ft.y0&&xt.y0<Ft.y1||xt.y1>Ft.y0&&xt.y1<Ft.y1?!0:xt.y0<Ft.y0&&xt.y1>Ft.y1}function X(xt,Ft,Et,mt){return xt.y0+Ft>=Et&&xt.y1+Ft<=mt&&(xt.y0=xt.y0+Ft,xt.y1=xt.y1+Ft,xt.targetLinks.forEach(function(gt){gt.y1=gt.y1+Ft}),xt.sourceLinks.forEach(function(gt){gt.y0=gt.y0+Ft})),xt}function Y(xt,Ft,Et,mt){xt.nodes.forEach(function(gt){mt&&gt.y+(gt.y1-gt.y0)>Ft&&(gt.y=gt.y-(gt.y+(gt.y1-gt.y0)-Ft));var wt=xt.links.filter(function(kt){return b(kt.source,Et)==b(gt,Et)}),Pt=wt.length;Pt>1&&wt.sort(function(kt,jt){if(!kt.circular&&!jt.circular){if(kt.target.column==jt.target.column)return kt.y1-jt.y1;if(rt(kt,jt)){if(kt.target.column>jt.target.column){var Ht=G(jt,kt);return kt.y1-Ht}if(jt.target.column>kt.target.column){var Vt=G(kt,jt);return Vt-jt.y1}}else return kt.y1-jt.y1}if(kt.circular&&!jt.circular)return kt.circularLinkType=="top"?-1:1;if(jt.circular&&!kt.circular)return jt.circularLinkType=="top"?1:-1;if(kt.circular&&jt.circular)return kt.circularLinkType===jt.circularLinkType&&kt.circularLinkType=="top"?kt.target.column===jt.target.column?kt.target.y1-jt.target.y1:jt.target.column-kt.target.column:kt.circularLinkType===jt.circularLinkType&&kt.circularLinkType=="bottom"?kt.target.column===jt.target.column?jt.target.y1-kt.target.y1:kt.target.column-jt.target.column:kt.circularLinkType=="top"?-1:1});var Bt=gt.y0;wt.forEach(function(kt){kt.y0=Bt+kt.width/2,Bt=Bt+kt.width}),wt.forEach(function(kt,jt){if(kt.circularLinkType=="bottom"){var Ht=jt+1,Vt=0;for(Ht;Ht<Pt;Ht++)Vt=Vt+wt[Ht].width;kt.y0=gt.y1-Vt-kt.width/2}})})}function ot(xt,Ft,Et){xt.nodes.forEach(function(mt){var gt=xt.links.filter(function(Bt){return b(Bt.target,Et)==b(mt,Et)}),wt=gt.length;wt>1&&gt.sort(function(Bt,kt){if(!Bt.circular&&!kt.circular){if(Bt.source.column==kt.source.column)return Bt.y0-kt.y0;if(rt(Bt,kt)){if(kt.source.column<Bt.source.column){var jt=Z(kt,Bt);return Bt.y0-jt}if(Bt.source.column<kt.source.column){var Ht=Z(Bt,kt);return Ht-kt.y0}}else return Bt.y0-kt.y0}if(Bt.circular&&!kt.circular)return Bt.circularLinkType=="top"?-1:1;if(kt.circular&&!Bt.circular)return kt.circularLinkType=="top"?1:-1;if(Bt.circular&&kt.circular)return Bt.circularLinkType===kt.circularLinkType&&Bt.circularLinkType=="top"?Bt.source.column===kt.source.column?Bt.source.y1-kt.source.y1:Bt.source.column-kt.source.column:Bt.circularLinkType===kt.circularLinkType&&Bt.circularLinkType=="bottom"?Bt.source.column===kt.source.column?Bt.source.y1-kt.source.y1:kt.source.column-Bt.source.column:Bt.circularLinkType=="top"?-1:1});var Pt=mt.y0;gt.forEach(function(Bt){Bt.y1=Pt+Bt.width/2,Pt=Pt+Bt.width}),gt.forEach(function(Bt,kt){if(Bt.circularLinkType=="bottom"){var jt=kt+1,Ht=0;for(jt;jt<wt;jt++)Ht=Ht+gt[jt].width;Bt.y1=mt.y1-Ht-Bt.width/2}})})}function rt(xt,Ft){return ht(xt)==ht(Ft)}function ht(xt){return xt.y0-xt.y1>0?"up":"down"}function pt(xt,Ft){return b(xt.source,Ft)==b(xt.target,Ft)}function yt(xt,Ft,Et){var mt=xt.nodes,gt=xt.links,wt=!1,Pt=!1;if(gt.forEach(function(ee){ee.circularLinkType=="top"?wt=!0:ee.circularLinkType=="bottom"&&(Pt=!0)}),wt==!1||Pt==!1){var Bt=(0,M.VV)(mt,function(ee){return ee.y0}),kt=(0,M.Fp)(mt,function(ee){return ee.y1}),jt=kt-Bt,Ht=Et-Ft,Vt=Ht/jt;mt.forEach(function(ee){var te=(ee.y1-ee.y0)*Vt;ee.y0=(ee.y0-Bt)*Vt,ee.y1=ee.y0+te}),gt.forEach(function(ee){ee.y0=(ee.y0-Bt)*Vt,ee.y1=(ee.y1-Bt)*Vt,ee.width=ee.width*Vt})}}},30838:function($,U,t){t.r(U),t.d(U,{sankey:function(){return c},sankeyCenter:function(){return v},sankeyJustify:function(){return g},sankeyLeft:function(){return S},sankeyLinkHorizontal:function(){return b},sankeyRight:function(){return A}});var M=t(33064),E=t(15140);function i(P){return P.target.depth}function S(P){return P.depth}function A(P,l){return l-1-P.height}function g(P,l){return P.sourceLinks.length?P.depth:l-1}function v(P){return P.targetLinks.length?P.depth:P.sourceLinks.length?(0,M.VV)(P.sourceLinks,i)-1:0}function e(P){return function(){return P}}function r(P,l){return n(P.source,l.source)||P.index-l.index}function f(P,l){return n(P.target,l.target)||P.index-l.index}function n(P,l){return P.y0-l.y0}function a(P){return P.value}function o(P){return(P.y0+P.y1)/2}function h(P){return o(P.source)*P.value}function y(P){return o(P.target)*P.value}function p(P){return P.index}function x(P){return P.nodes}function s(P){return P.links}function u(P,l){var d=P.get(l);if(!d)throw new Error("missing: "+l);return d}function c(){var P=0,l=0,d=1,L=1,w=24,I=8,z=p,B=g,O=x,R=s,C=32,F=2/3;function N(){var q={nodes:O.apply(null,arguments),links:R.apply(null,arguments)};return V(q),K(q),Q(q),at(q),it(q),q}N.update=function(q){return it(q),q},N.nodeId=function(q){return arguments.length?(z=typeof q=="function"?q:e(q),N):z},N.nodeAlign=function(q){return arguments.length?(B=typeof q=="function"?q:e(q),N):B},N.nodeWidth=function(q){return arguments.length?(w=+q,N):w},N.nodePadding=function(q){return arguments.length?(I=+q,N):I},N.nodes=function(q){return arguments.length?(O=typeof q=="function"?q:e(q),N):O},N.links=function(q){return arguments.length?(R=typeof q=="function"?q:e(q),N):R},N.size=function(q){return arguments.length?(P=l=0,d=+q[0],L=+q[1],N):[d-P,L-l]},N.extent=function(q){return arguments.length?(P=+q[0][0],d=+q[1][0],l=+q[0][1],L=+q[1][1],N):[[P,l],[d,L]]},N.iterations=function(q){return arguments.length?(C=+q,N):C};function V(q){q.nodes.forEach(function(Z,G){Z.index=G,Z.sourceLinks=[],Z.targetLinks=[]});var W=(0,E.UI)(q.nodes,z);q.links.forEach(function(Z,G){Z.index=G;var et=Z.source,nt=Z.target;typeof et!="object"&&(et=Z.source=u(W,et)),typeof nt!="object"&&(nt=Z.target=u(W,nt)),et.sourceLinks.push(Z),nt.targetLinks.push(Z)})}function K(q){q.nodes.forEach(function(W){W.value=Math.max((0,M.Sm)(W.sourceLinks,a),(0,M.Sm)(W.targetLinks,a))})}function Q(q){var W,Z,G;for(W=q.nodes,Z=[],G=0;W.length;++G,W=Z,Z=[])W.forEach(function(nt){nt.depth=G,nt.sourceLinks.forEach(function(X){Z.indexOf(X.target)<0&&Z.push(X.target)})});for(W=q.nodes,Z=[],G=0;W.length;++G,W=Z,Z=[])W.forEach(function(nt){nt.height=G,nt.targetLinks.forEach(function(X){Z.indexOf(X.source)<0&&Z.push(X.source)})});var et=(d-P-w)/(G-1);q.nodes.forEach(function(nt){nt.x1=(nt.x0=P+Math.max(0,Math.min(G-1,Math.floor(B.call(null,nt,G))))*et)+w})}function at(q){var W=(0,E.b1)().key(function(ot){return ot.x0}).sortKeys(M.j2).entries(q.nodes).map(function(ot){return ot.values});et(),Y();for(var Z=1,G=C;G>0;--G)X(Z*=.99),Y(),nt(Z),Y();function et(){var ot=(0,M.Fp)(W,function(pt){return pt.length}),rt=F*(L-l)/(ot-1);I>rt&&(I=rt);var ht=(0,M.VV)(W,function(pt){return(L-l-(pt.length-1)*I)/(0,M.Sm)(pt,a)});W.forEach(function(pt){pt.forEach(function(yt,xt){yt.y1=(yt.y0=xt)+yt.value*ht})}),q.links.forEach(function(pt){pt.width=pt.value*ht})}function nt(ot){W.forEach(function(rt){rt.forEach(function(ht){if(ht.targetLinks.length){var pt=((0,M.Sm)(ht.targetLinks,h)/(0,M.Sm)(ht.targetLinks,a)-o(ht))*ot;ht.y0+=pt,ht.y1+=pt}})})}function X(ot){W.slice().reverse().forEach(function(rt){rt.forEach(function(ht){if(ht.sourceLinks.length){var pt=((0,M.Sm)(ht.sourceLinks,y)/(0,M.Sm)(ht.sourceLinks,a)-o(ht))*ot;ht.y0+=pt,ht.y1+=pt}})})}function Y(){W.forEach(function(ot){var rt,ht,pt=l,yt=ot.length,xt;for(ot.sort(n),xt=0;xt<yt;++xt)rt=ot[xt],ht=pt-rt.y0,ht>0&&(rt.y0+=ht,rt.y1+=ht),pt=rt.y1+I;if(ht=pt-I-L,ht>0)for(pt=rt.y0-=ht,rt.y1-=ht,xt=yt-2;xt>=0;--xt)rt=ot[xt],ht=rt.y1+I-pt,ht>0&&(rt.y0-=ht,rt.y1-=ht),pt=rt.y0})}}function it(q){q.nodes.forEach(function(W){W.sourceLinks.sort(f),W.targetLinks.sort(r)}),q.nodes.forEach(function(W){var Z=W.y0,G=Z;W.sourceLinks.forEach(function(et){et.y0=Z+et.width/2,Z+=et.width}),W.targetLinks.forEach(function(et){et.y1=G+et.width/2,G+=et.width})})}return N}var T=t(45879);function k(P){return[P.source.x1,P.y0]}function _(P){return[P.target.x0,P.y1]}function b(){return(0,T.h5)().source(k).target(_)}},39898:function($,U,t){var M,E;(function(){var i={version:"3.8.0"},S=[].slice,A=function(st){return S.call(st)},g=self.document;function v(st){return st&&(st.ownerDocument||st.document||st).documentElement}function e(st){return st&&(st.ownerDocument&&st.ownerDocument.defaultView||st.document&&st||st.defaultView)}if(g)try{A(g.documentElement.childNodes)[0].nodeType}catch{A=function(st){for(var bt=st.length,Ct=new Array(bt);bt--;)Ct[bt]=st[bt];return Ct}}if(Date.now||(Date.now=function(){return+new Date}),g)try{g.createElement("DIV").style.setProperty("opacity",0,"")}catch{var r=this.Element.prototype,f=r.setAttribute,n=r.setAttributeNS,a=this.CSSStyleDeclaration.prototype,o=a.setProperty;r.setAttribute=function(st,bt){f.call(this,st,bt+"")},r.setAttributeNS=function(st,bt,Ct){n.call(this,st,bt,Ct+"")},a.setProperty=function(st,bt,Ct){o.call(this,st,bt+"",Ct)}}i.ascending=h;function h(st,bt){return st<bt?-1:st>bt?1:st>=bt?0:NaN}i.descending=function(st,bt){return bt<st?-1:bt>st?1:bt>=st?0:NaN},i.min=function(st,bt){var Ct=-1,qt=st.length,Wt,Jt;if(arguments.length===1){for(;++Ct<qt;)if((Jt=st[Ct])!=null&&Jt>=Jt){Wt=Jt;break}for(;++Ct<qt;)(Jt=st[Ct])!=null&&Wt>Jt&&(Wt=Jt)}else{for(;++Ct<qt;)if((Jt=bt.call(st,st[Ct],Ct))!=null&&Jt>=Jt){Wt=Jt;break}for(;++Ct<qt;)(Jt=bt.call(st,st[Ct],Ct))!=null&&Wt>Jt&&(Wt=Jt)}return Wt},i.max=function(st,bt){var Ct=-1,qt=st.length,Wt,Jt;if(arguments.length===1){for(;++Ct<qt;)if((Jt=st[Ct])!=null&&Jt>=Jt){Wt=Jt;break}for(;++Ct<qt;)(Jt=st[Ct])!=null&&Jt>Wt&&(Wt=Jt)}else{for(;++Ct<qt;)if((Jt=bt.call(st,st[Ct],Ct))!=null&&Jt>=Jt){Wt=Jt;break}for(;++Ct<qt;)(Jt=bt.call(st,st[Ct],Ct))!=null&&Jt>Wt&&(Wt=Jt)}return Wt},i.extent=function(st,bt){var Ct=-1,qt=st.length,Wt,Jt,ge;if(arguments.length===1){for(;++Ct<qt;)if((Jt=st[Ct])!=null&&Jt>=Jt){Wt=ge=Jt;break}for(;++Ct<qt;)(Jt=st[Ct])!=null&&(Wt>Jt&&(Wt=Jt),ge<Jt&&(ge=Jt))}else{for(;++Ct<qt;)if((Jt=bt.call(st,st[Ct],Ct))!=null&&Jt>=Jt){Wt=ge=Jt;break}for(;++Ct<qt;)(Jt=bt.call(st,st[Ct],Ct))!=null&&(Wt>Jt&&(Wt=Jt),ge<Jt&&(ge=Jt))}return[Wt,ge]};function y(st){return st===null?NaN:+st}function p(st){return!isNaN(st)}i.sum=function(st,bt){var Ct=0,qt=st.length,Wt,Jt=-1;if(arguments.length===1)for(;++Jt<qt;)p(Wt=+st[Jt])&&(Ct+=Wt);else for(;++Jt<qt;)p(Wt=+bt.call(st,st[Jt],Jt))&&(Ct+=Wt);return Ct},i.mean=function(st,bt){var Ct=0,qt=st.length,Wt,Jt=-1,ge=qt;if(arguments.length===1)for(;++Jt<qt;)p(Wt=y(st[Jt]))?Ct+=Wt:--ge;else for(;++Jt<qt;)p(Wt=y(bt.call(st,st[Jt],Jt)))?Ct+=Wt:--ge;if(ge)return Ct/ge},i.quantile=function(st,bt){var Ct=(st.length-1)*bt+1,qt=Math.floor(Ct),Wt=+st[qt-1],Jt=Ct-qt;return Jt?Wt+Jt*(st[qt]-Wt):Wt},i.median=function(st,bt){var Ct=[],qt=st.length,Wt,Jt=-1;if(arguments.length===1)for(;++Jt<qt;)p(Wt=y(st[Jt]))&&Ct.push(Wt);else for(;++Jt<qt;)p(Wt=y(bt.call(st,st[Jt],Jt)))&&Ct.push(Wt);if(Ct.length)return i.quantile(Ct.sort(h),.5)},i.variance=function(st,bt){var Ct=st.length,qt=0,Wt,Jt,ge=0,ne=-1,Ie=0;if(arguments.length===1)for(;++ne<Ct;)p(Wt=y(st[ne]))&&(Jt=Wt-qt,qt+=Jt/++Ie,ge+=Jt*(Wt-qt));else for(;++ne<Ct;)p(Wt=y(bt.call(st,st[ne],ne)))&&(Jt=Wt-qt,qt+=Jt/++Ie,ge+=Jt*(Wt-qt));if(Ie>1)return ge/(Ie-1)},i.deviation=function(){var st=i.variance.apply(this,arguments);return st&&Math.sqrt(st)};function x(st){return{left:function(bt,Ct,qt,Wt){for(arguments.length<3&&(qt=0),arguments.length<4&&(Wt=bt.length);qt<Wt;){var Jt=qt+Wt>>>1;st(bt[Jt],Ct)<0?qt=Jt+1:Wt=Jt}return qt},right:function(bt,Ct,qt,Wt){for(arguments.length<3&&(qt=0),arguments.length<4&&(Wt=bt.length);qt<Wt;){var Jt=qt+Wt>>>1;st(bt[Jt],Ct)>0?Wt=Jt:qt=Jt+1}return qt}}}var s=x(h);i.bisectLeft=s.left,i.bisect=i.bisectRight=s.right,i.bisector=function(st){return x(st.length===1?function(bt,Ct){return h(st(bt),Ct)}:st)},i.shuffle=function(st,bt,Ct){(qt=arguments.length)<3&&(Ct=st.length,qt<2&&(bt=0));for(var qt=Ct-bt,Wt,Jt;qt;)Jt=Math.random()*qt--|0,Wt=st[qt+bt],st[qt+bt]=st[Jt+bt],st[Jt+bt]=Wt;return st},i.permute=function(st,bt){for(var Ct=bt.length,qt=new Array(Ct);Ct--;)qt[Ct]=st[bt[Ct]];return qt},i.pairs=function(st){for(var bt=0,Ct=st.length-1,qt=st[0],Wt=new Array(Ct<0?0:Ct);bt<Ct;)Wt[bt]=[qt,qt=st[++bt]];return Wt},i.transpose=function(st){if(!(Jt=st.length))return[];for(var bt=-1,Ct=i.min(st,u),qt=new Array(Ct);++bt<Ct;)for(var Wt=-1,Jt,ge=qt[bt]=new Array(Jt);++Wt<Jt;)ge[Wt]=st[Wt][bt];return qt};function u(st){return st.length}i.zip=function(){return i.transpose(arguments)},i.keys=function(st){var bt=[];for(var Ct in st)bt.push(Ct);return bt},i.values=function(st){var bt=[];for(var Ct in st)bt.push(st[Ct]);return bt},i.entries=function(st){var bt=[];for(var Ct in st)bt.push({key:Ct,value:st[Ct]});return bt},i.merge=function(st){for(var bt=st.length,Ct,qt=-1,Wt=0,Jt,ge;++qt<bt;)Wt+=st[qt].length;for(Jt=new Array(Wt);--bt>=0;)for(ge=st[bt],Ct=ge.length;--Ct>=0;)Jt[--Wt]=ge[Ct];return Jt};var c=Math.abs;i.range=function(st,bt,Ct){if(arguments.length<3&&(Ct=1,arguments.length<2&&(bt=st,st=0)),(bt-st)/Ct===1/0)throw new Error("infinite range");var qt=[],Wt=T(c(Ct)),Jt=-1,ge;if(st*=Wt,bt*=Wt,Ct*=Wt,Ct<0)for(;(ge=st+Ct*++Jt)>bt;)qt.push(ge/Wt);else for(;(ge=st+Ct*++Jt)<bt;)qt.push(ge/Wt);return qt};function T(st){for(var bt=1;st*bt%1;)bt*=10;return bt}function k(st,bt){for(var Ct in bt)Object.defineProperty(st.prototype,Ct,{value:bt[Ct],enumerable:!1})}i.map=function(st,bt){var Ct=new _;if(st instanceof _)st.forEach(function(ne,Ie){Ct.set(ne,Ie)});else if(Array.isArray(st)){var qt=-1,Wt=st.length,Jt;if(arguments.length===1)for(;++qt<Wt;)Ct.set(qt,st[qt]);else for(;++qt<Wt;)Ct.set(bt.call(st,Jt=st[qt],qt),Jt)}else for(var ge in st)Ct.set(ge,st[ge]);return Ct};function _(){this._=Object.create(null)}var b="__proto__",P="\0";k(_,{has:L,get:function(st){return this._[l(st)]},set:function(st,bt){return this._[l(st)]=bt},remove:w,keys:I,values:function(){var st=[];for(var bt in this._)st.push(this._[bt]);return st},entries:function(){var st=[];for(var bt in this._)st.push({key:d(bt),value:this._[bt]});return st},size:z,empty:B,forEach:function(st){for(var bt in this._)st.call(this,d(bt),this._[bt])}});function l(st){return(st+="")===b||st[0]===P?P+st:st}function d(st){return(st+="")[0]===P?st.slice(1):st}function L(st){return l(st)in this._}function w(st){return(st=l(st))in this._&&delete this._[st]}function I(){var st=[];for(var bt in this._)st.push(d(bt));return st}function z(){var st=0;for(var bt in this._)++st;return st}function B(){for(var st in this._)return!1;return!0}i.nest=function(){var st={},bt=[],Ct=[],qt,Wt;function Jt(ne,Ie,Ge){if(Ge>=bt.length)return Wt?Wt.call(st,Ie):qt?Ie.sort(qt):Ie;for(var Ye=-1,vr=Ie.length,Ar=bt[Ge++],jr,Gr,Tr,Dr=new _,Ur;++Ye<vr;)(Ur=Dr.get(jr=Ar(Gr=Ie[Ye])))?Ur.push(Gr):Dr.set(jr,[Gr]);return ne?(Gr=ne(),Tr=function(Wr,tn){Gr.set(Wr,Jt(ne,tn,Ge))}):(Gr={},Tr=function(Wr,tn){Gr[Wr]=Jt(ne,tn,Ge)}),Dr.forEach(Tr),Gr}function ge(ne,Ie){if(Ie>=bt.length)return ne;var Ge=[],Ye=Ct[Ie++];return ne.forEach(function(vr,Ar){Ge.push({key:vr,values:ge(Ar,Ie)})}),Ye?Ge.sort(function(vr,Ar){return Ye(vr.key,Ar.key)}):Ge}return st.map=function(ne,Ie){return Jt(Ie,ne,0)},st.entries=function(ne){return ge(Jt(i.map,ne,0),0)},st.key=function(ne){return bt.push(ne),st},st.sortKeys=function(ne){return Ct[bt.length-1]=ne,st},st.sortValues=function(ne){return qt=ne,st},st.rollup=function(ne){return Wt=ne,st},st},i.set=function(st){var bt=new O;if(st)for(var Ct=0,qt=st.length;Ct<qt;++Ct)bt.add(st[Ct]);return bt};function O(){this._=Object.create(null)}k(O,{has:L,add:function(st){return this._[l(st+="")]=!0,st},remove:w,values:I,size:z,empty:B,forEach:function(st){for(var bt in this._)st.call(this,d(bt))}}),i.behavior={};function R(st){return st}i.rebind=function(st,bt){for(var Ct=1,qt=arguments.length,Wt;++Ct<qt;)st[Wt=arguments[Ct]]=C(st,bt,bt[Wt]);return st};function C(st,bt,Ct){return function(){var qt=Ct.apply(bt,arguments);return qt===bt?st:qt}}function F(st,bt){if(bt in st)return bt;bt=bt.charAt(0).toUpperCase()+bt.slice(1);for(var Ct=0,qt=N.length;Ct<qt;++Ct){var Wt=N[Ct]+bt;if(Wt in st)return Wt}}var N=["webkit","ms","moz","Moz","o","O"];function V(){}i.dispatch=function(){for(var st=new K,bt=-1,Ct=arguments.length;++bt<Ct;)st[arguments[bt]]=Q(st);return st};function K(){}K.prototype.on=function(st,bt){var Ct=st.indexOf("."),qt="";if(Ct>=0&&(qt=st.slice(Ct+1),st=st.slice(0,Ct)),st)return arguments.length<2?this[st].on(qt):this[st].on(qt,bt);if(arguments.length===2){if(bt==null)for(st in this)this.hasOwnProperty(st)&&this[st].on(qt,null);return this}};function Q(st){var bt=[],Ct=new _;function qt(){for(var Wt=bt,Jt=-1,ge=Wt.length,ne;++Jt<ge;)(ne=Wt[Jt].on)&&ne.apply(this,arguments);return st}return qt.on=function(Wt,Jt){var ge=Ct.get(Wt),ne;return arguments.length<2?ge&&ge.on:(ge&&(ge.on=null,bt=bt.slice(0,ne=bt.indexOf(ge)).concat(bt.slice(ne+1)),Ct.remove(Wt)),Jt&&bt.push(Ct.set(Wt,{on:Jt})),st)},qt}i.event=null;function at(){i.event.preventDefault()}function it(){for(var st=i.event,bt;bt=st.sourceEvent;)st=bt;return st}function q(st){for(var bt=new K,Ct=0,qt=arguments.length;++Ct<qt;)bt[arguments[Ct]]=Q(bt);return bt.of=function(Wt,Jt){return function(ge){try{var ne=ge.sourceEvent=i.event;ge.target=st,i.event=ge,bt[ge.type].apply(Wt,Jt)}finally{i.event=ne}}},bt}i.requote=function(st){return st.replace(W,"\\$&")};var W=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Z={}.__proto__?function(st,bt){st.__proto__=bt}:function(st,bt){for(var Ct in bt)st[Ct]=bt[Ct]};function G(st){return Z(st,Y),st}var et=function(st,bt){return bt.querySelector(st)},nt=function(st,bt){return bt.querySelectorAll(st)},X=function(st,bt){var Ct=st.matches||st[F(st,"matchesSelector")];return X=function(qt,Wt){return Ct.call(qt,Wt)},X(st,bt)};typeof Sizzle=="function"&&(et=function(st,bt){return Sizzle(st,bt)[0]||null},nt=Sizzle,X=Sizzle.matchesSelector),i.selection=function(){return i.select(g.documentElement)};var Y=i.selection.prototype=[];Y.select=function(st){var bt=[],Ct,qt,Wt,Jt;st=ot(st);for(var ge=-1,ne=this.length;++ge<ne;){bt.push(Ct=[]),Ct.parentNode=(Wt=this[ge]).parentNode;for(var Ie=-1,Ge=Wt.length;++Ie<Ge;)(Jt=Wt[Ie])?(Ct.push(qt=st.call(Jt,Jt.__data__,Ie,ge)),qt&&"__data__"in Jt&&(qt.__data__=Jt.__data__)):Ct.push(null)}return G(bt)};function ot(st){return typeof st=="function"?st:function(){return et(st,this)}}Y.selectAll=function(st){var bt=[],Ct,qt;st=rt(st);for(var Wt=-1,Jt=this.length;++Wt<Jt;)for(var ge=this[Wt],ne=-1,Ie=ge.length;++ne<Ie;)(qt=ge[ne])&&(bt.push(Ct=A(st.call(qt,qt.__data__,ne,Wt))),Ct.parentNode=qt);return G(bt)};function rt(st){return typeof st=="function"?st:function(){return nt(st,this)}}var ht="http://www.w3.org/1999/xhtml",pt={svg:"http://www.w3.org/2000/svg",xhtml:ht,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};i.ns={prefix:pt,qualify:function(st){var bt=st.indexOf(":"),Ct=st;return bt>=0&&(Ct=st.slice(0,bt))!=="xmlns"&&(st=st.slice(bt+1)),pt.hasOwnProperty(Ct)?{space:pt[Ct],local:st}:st}},Y.attr=function(st,bt){if(arguments.length<2){if(typeof st=="string"){var Ct=this.node();return st=i.ns.qualify(st),st.local?Ct.getAttributeNS(st.space,st.local):Ct.getAttribute(st)}for(bt in st)this.each(yt(bt,st[bt]));return this}return this.each(yt(st,bt))};function yt(st,bt){st=i.ns.qualify(st);function Ct(){this.removeAttribute(st)}function qt(){this.removeAttributeNS(st.space,st.local)}function Wt(){this.setAttribute(st,bt)}function Jt(){this.setAttributeNS(st.space,st.local,bt)}function ge(){var Ie=bt.apply(this,arguments);Ie==null?this.removeAttribute(st):this.setAttribute(st,Ie)}function ne(){var Ie=bt.apply(this,arguments);Ie==null?this.removeAttributeNS(st.space,st.local):this.setAttributeNS(st.space,st.local,Ie)}return bt==null?st.local?qt:Ct:typeof bt=="function"?st.local?ne:ge:st.local?Jt:Wt}function xt(st){return st.trim().replace(/\s+/g," ")}Y.classed=function(st,bt){if(arguments.length<2){if(typeof st=="string"){var Ct=this.node(),qt=(st=Et(st)).length,Wt=-1;if(bt=Ct.classList){for(;++Wt<qt;)if(!bt.contains(st[Wt]))return!1}else for(bt=Ct.getAttribute("class");++Wt<qt;)if(!Ft(st[Wt]).test(bt))return!1;return!0}for(bt in st)this.each(mt(bt,st[bt]));return this}return this.each(mt(st,bt))};function Ft(st){return new RegExp("(?:^|\\s+)"+i.requote(st)+"(?:\\s+|$)","g")}function Et(st){return(st+"").trim().split(/^|\s+/)}function mt(st,bt){st=Et(st).map(gt);var Ct=st.length;function qt(){for(var Jt=-1;++Jt<Ct;)st[Jt](this,bt)}function Wt(){for(var Jt=-1,ge=bt.apply(this,arguments);++Jt<Ct;)st[Jt](this,ge)}return typeof bt=="function"?Wt:qt}function gt(st){var bt=Ft(st);return function(Ct,qt){if(Wt=Ct.classList)return qt?Wt.add(st):Wt.remove(st);var Wt=Ct.getAttribute("class")||"";qt?(bt.lastIndex=0,bt.test(Wt)||Ct.setAttribute("class",xt(Wt+" "+st))):Ct.setAttribute("class",xt(Wt.replace(bt," ")))}}Y.style=function(st,bt,Ct){var qt=arguments.length;if(qt<3){if(typeof st!="string"){qt<2&&(bt="");for(Ct in st)this.each(wt(Ct,st[Ct],bt));return this}if(qt<2){var Wt=this.node();return e(Wt).getComputedStyle(Wt,null).getPropertyValue(st)}Ct=""}return this.each(wt(st,bt,Ct))};function wt(st,bt,Ct){function qt(){this.style.removeProperty(st)}function Wt(){this.style.setProperty(st,bt,Ct)}function Jt(){var ge=bt.apply(this,arguments);ge==null?this.style.removeProperty(st):this.style.setProperty(st,ge,Ct)}return bt==null?qt:typeof bt=="function"?Jt:Wt}Y.property=function(st,bt){if(arguments.length<2){if(typeof st=="string")return this.node()[st];for(bt in st)this.each(Pt(bt,st[bt]));return this}return this.each(Pt(st,bt))};function Pt(st,bt){function Ct(){delete this[st]}function qt(){this[st]=bt}function Wt(){var Jt=bt.apply(this,arguments);Jt==null?delete this[st]:this[st]=Jt}return bt==null?Ct:typeof bt=="function"?Wt:qt}Y.text=function(st){return arguments.length?this.each(typeof st=="function"?function(){var bt=st.apply(this,arguments);this.textContent=bt??""}:st==null?function(){this.textContent=""}:function(){this.textContent=st}):this.node().textContent},Y.html=function(st){return arguments.length?this.each(typeof st=="function"?function(){var bt=st.apply(this,arguments);this.innerHTML=bt??""}:st==null?function(){this.innerHTML=""}:function(){this.innerHTML=st}):this.node().innerHTML},Y.append=function(st){return st=Bt(st),this.select(function(){return this.appendChild(st.apply(this,arguments))})};function Bt(st){function bt(){var qt=this.ownerDocument,Wt=this.namespaceURI;return Wt===ht&&qt.documentElement.namespaceURI===ht?qt.createElement(st):qt.createElementNS(Wt,st)}function Ct(){return this.ownerDocument.createElementNS(st.space,st.local)}return typeof st=="function"?st:(st=i.ns.qualify(st)).local?Ct:bt}Y.insert=function(st,bt){return st=Bt(st),bt=ot(bt),this.select(function(){return this.insertBefore(st.apply(this,arguments),bt.apply(this,arguments)||null)})},Y.remove=function(){return this.each(kt)};function kt(){var st=this.parentNode;st&&st.removeChild(this)}Y.data=function(st,bt){var Ct=-1,qt=this.length,Wt,Jt;if(!arguments.length){for(st=new Array(qt=(Wt=this[0]).length);++Ct<qt;)(Jt=Wt[Ct])&&(st[Ct]=Jt.__data__);return st}function ge(Ye,vr){var Ar,jr=Ye.length,Gr=vr.length,Tr=Math.min(jr,Gr),Dr=new Array(Gr),Ur=new Array(Gr),Wr=new Array(jr),tn,Nr;if(bt){var Pn=new _,Dn=new Array(jr),Zn;for(Ar=-1;++Ar<jr;)(tn=Ye[Ar])&&(Pn.has(Zn=bt.call(tn,tn.__data__,Ar))?Wr[Ar]=tn:Pn.set(Zn,tn),Dn[Ar]=Zn);for(Ar=-1;++Ar<Gr;)(tn=Pn.get(Zn=bt.call(vr,Nr=vr[Ar],Ar)))?tn!==!0&&(Dr[Ar]=tn,tn.__data__=Nr):Ur[Ar]=jt(Nr),Pn.set(Zn,!0);for(Ar=-1;++Ar<jr;)Ar in Dn&&Pn.get(Dn[Ar])!==!0&&(Wr[Ar]=Ye[Ar])}else{for(Ar=-1;++Ar<Tr;)tn=Ye[Ar],Nr=vr[Ar],tn?(tn.__data__=Nr,Dr[Ar]=tn):Ur[Ar]=jt(Nr);for(;Ar<Gr;++Ar)Ur[Ar]=jt(vr[Ar]);for(;Ar<jr;++Ar)Wr[Ar]=Ye[Ar]}Ur.update=Dr,Ur.parentNode=Dr.parentNode=Wr.parentNode=Ye.parentNode,ne.push(Ur),Ie.push(Dr),Ge.push(Wr)}var ne=te([]),Ie=G([]),Ge=G([]);if(typeof st=="function")for(;++Ct<qt;)ge(Wt=this[Ct],st.call(Wt,Wt.parentNode.__data__,Ct));else for(;++Ct<qt;)ge(Wt=this[Ct],st);return Ie.enter=function(){return ne},Ie.exit=function(){return Ge},Ie};function jt(st){return{__data__:st}}Y.datum=function(st){return arguments.length?this.property("__data__",st):this.property("__data__")},Y.filter=function(st){var bt=[],Ct,qt,Wt;typeof st!="function"&&(st=Ht(st));for(var Jt=0,ge=this.length;Jt<ge;Jt++){bt.push(Ct=[]),Ct.parentNode=(qt=this[Jt]).parentNode;for(var ne=0,Ie=qt.length;ne<Ie;ne++)(Wt=qt[ne])&&st.call(Wt,Wt.__data__,ne,Jt)&&Ct.push(Wt)}return G(bt)};function Ht(st){return function(){return X(this,st)}}Y.order=function(){for(var st=-1,bt=this.length;++st<bt;)for(var Ct=this[st],qt=Ct.length-1,Wt=Ct[qt],Jt;--qt>=0;)(Jt=Ct[qt])&&(Wt&&Wt!==Jt.nextSibling&&Wt.parentNode.insertBefore(Jt,Wt),Wt=Jt);return this},Y.sort=function(st){st=Vt.apply(this,arguments);for(var bt=-1,Ct=this.length;++bt<Ct;)this[bt].sort(st);return this.order()};function Vt(st){return arguments.length||(st=h),function(bt,Ct){return bt&&Ct?st(bt.__data__,Ct.__data__):!bt-!Ct}}Y.each=function(st){return ee(this,function(bt,Ct,qt){st.call(bt,bt.__data__,Ct,qt)})};function ee(st,bt){for(var Ct=0,qt=st.length;Ct<qt;Ct++)for(var Wt=st[Ct],Jt=0,ge=Wt.length,ne;Jt<ge;Jt++)(ne=Wt[Jt])&&bt(ne,Jt,Ct);return st}Y.call=function(st){var bt=A(arguments);return st.apply(bt[0]=this,bt),this},Y.empty=function(){return!this.node()},Y.node=function(){for(var st=0,bt=this.length;st<bt;st++)for(var Ct=this[st],qt=0,Wt=Ct.length;qt<Wt;qt++){var Jt=Ct[qt];if(Jt)return Jt}return null},Y.size=function(){var st=0;return ee(this,function(){++st}),st};function te(st){return Z(st,ae),st}var ae=[];i.selection.enter=te,i.selection.enter.prototype=ae,ae.append=Y.append,ae.empty=Y.empty,ae.node=Y.node,ae.call=Y.call,ae.size=Y.size,ae.select=function(st){for(var bt=[],Ct,qt,Wt,Jt,ge,ne=-1,Ie=this.length;++ne<Ie;){Wt=(Jt=this[ne]).update,bt.push(Ct=[]),Ct.parentNode=Jt.parentNode;for(var Ge=-1,Ye=Jt.length;++Ge<Ye;)(ge=Jt[Ge])?(Ct.push(Wt[Ge]=qt=st.call(Jt.parentNode,ge.__data__,Ge,ne)),qt.__data__=ge.__data__):Ct.push(null)}return G(bt)},ae.insert=function(st,bt){return arguments.length<2&&(bt=le(this)),Y.insert.call(this,st,bt)};function le(st){var bt,Ct;return function(qt,Wt,Jt){var ge=st[Jt].update,ne=ge.length,Ie;for(Jt!=Ct&&(Ct=Jt,bt=0),Wt>=bt&&(bt=Wt+1);!(Ie=ge[bt])&&++bt<ne;);return Ie}}i.select=function(st){var bt;return typeof st=="string"?(bt=[et(st,g)],bt.parentNode=g.documentElement):(bt=[st],bt.parentNode=v(st)),G([bt])},i.selectAll=function(st){var bt;return typeof st=="string"?(bt=A(nt(st,g)),bt.parentNode=g.documentElement):(bt=A(st),bt.parentNode=null),G([bt])},Y.on=function(st,bt,Ct){var qt=arguments.length;if(qt<3){if(typeof st!="string"){qt<2&&(bt=!1);for(Ct in st)this.each(ce(Ct,st[Ct],bt));return this}if(qt<2)return(qt=this.node()["__on"+st])&&qt._;Ct=!1}return this.each(ce(st,bt,Ct))};function ce(st,bt,Ct){var qt="__on"+st,Wt=st.indexOf("."),Jt=we;Wt>0&&(st=st.slice(0,Wt));var ge=pe.get(st);ge&&(st=ge,Jt=ve);function ne(){var Ye=this[qt];Ye&&(this.removeEventListener(st,Ye,Ye.$),delete this[qt])}function Ie(){var Ye=Jt(bt,A(arguments));ne.call(this),this.addEventListener(st,this[qt]=Ye,Ye.$=Ct),Ye._=bt}function Ge(){var Ye=new RegExp("^__on([^.]+)"+i.requote(st)+"$"),vr;for(var Ar in this)if(vr=Ar.match(Ye)){var jr=this[Ar];this.removeEventListener(vr[1],jr,jr.$),delete this[Ar]}}return Wt?bt?Ie:ne:bt?V:Ge}var pe=i.map({mouseenter:"mouseover",mouseleave:"mouseout"});g&&pe.forEach(function(st){"on"+st in g&&pe.remove(st)});function we(st,bt){return function(Ct){var qt=i.event;i.event=Ct,bt[0]=this.__data__;try{st.apply(this,bt)}finally{i.event=qt}}}function ve(st,bt){var Ct=we(st,bt);return function(qt){var Wt=this,Jt=qt.relatedTarget;(!Jt||Jt!==Wt&&!(Jt.compareDocumentPosition(Wt)&8))&&Ct.call(Wt,qt)}}var Mt,It=0;function Rt(st){var bt=".dragsuppress-"+ ++It,Ct="click"+bt,qt=i.select(e(st)).on("touchmove"+bt,at).on("dragstart"+bt,at).on("selectstart"+bt,at);if(Mt==null&&(Mt="onselectstart"in st?!1:F(st.style,"userSelect")),Mt){var Wt=v(st).style,Jt=Wt[Mt];Wt[Mt]="none"}return function(ge){if(qt.on(bt,null),Mt&&(Wt[Mt]=Jt),ge){var ne=function(){qt.on(Ct,null)};qt.on(Ct,function(){at(),ne()},!0),setTimeout(ne,0)}}}i.mouse=function(st){return Tt(st,it())};var zt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Tt(st,bt){bt.changedTouches&&(bt=bt.changedTouches[0]);var Ct=st.ownerSVGElement||st;if(Ct.createSVGPoint){var qt=Ct.createSVGPoint();if(zt<0){var Wt=e(st);if(Wt.scrollX||Wt.scrollY){Ct=i.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Jt=Ct[0][0].getScreenCTM();zt=!(Jt.f||Jt.e),Ct.remove()}}return zt?(qt.x=bt.pageX,qt.y=bt.pageY):(qt.x=bt.clientX,qt.y=bt.clientY),qt=qt.matrixTransform(st.getScreenCTM().inverse()),[qt.x,qt.y]}var ge=st.getBoundingClientRect();return[bt.clientX-ge.left-st.clientLeft,bt.clientY-ge.top-st.clientTop]}i.touch=function(st,bt,Ct){if(arguments.length<3&&(Ct=bt,bt=it().changedTouches),bt){for(var qt=0,Wt=bt.length,Jt;qt<Wt;++qt)if((Jt=bt[qt]).identifier===Ct)return Tt(st,Jt)}},i.behavior.drag=function(){var st=q(Wt,"drag","dragstart","dragend"),bt=null,Ct=Jt(V,i.mouse,e,"mousemove","mouseup"),qt=Jt(ft,i.touch,R,"touchmove","touchend");function Wt(){this.on("mousedown.drag",Ct).on("touchstart.drag",qt)}function Jt(ge,ne,Ie,Ge,Ye){return function(){var vr=this,Ar=i.event.target.correspondingElement||i.event.target,jr=vr.parentNode,Gr=st.of(vr,arguments),Tr=0,Dr=ge(),Ur=".drag"+(Dr==null?"":"-"+Dr),Wr,tn=i.select(Ie(Ar)).on(Ge+Ur,Dn).on(Ye+Ur,Zn),Nr=Rt(Ar),Pn=ne(jr,Dr);bt?(Wr=bt.apply(vr,arguments),Wr=[Wr.x-Pn[0],Wr.y-Pn[1]]):Wr=[0,0],Gr({type:"dragstart"});function Dn(){var Yn=ne(jr,Dr),li,si;Yn&&(li=Yn[0]-Pn[0],si=Yn[1]-Pn[1],Tr|=li|si,Pn=Yn,Gr({type:"drag",x:Yn[0]+Wr[0],y:Yn[1]+Wr[1],dx:li,dy:si}))}function Zn(){ne(jr,Dr)&&(tn.on(Ge+Ur,null).on(Ye+Ur,null),Nr(Tr),Gr({type:"dragend"}))}}}return Wt.origin=function(ge){return arguments.length?(bt=ge,Wt):bt},i.rebind(Wt,st,"on")};function ft(){return i.event.changedTouches[0].identifier}i.touches=function(st,bt){return arguments.length<2&&(bt=it().touches),bt?A(bt).map(function(Ct){var qt=Tt(st,Ct);return qt.identifier=Ct.identifier,qt}):[]};var ut=1e-6,vt=ut*ut,St=Math.PI,Ot=2*St,Xt=Ot-ut,$t=St/2,de=St/180,Me=180/St;function Fe(st,bt,Ct){return(bt[0]-st[0])*(Ct[1]-st[1])-(bt[1]-st[1])*(Ct[0]-st[0])}function De(st){return st>1?$t:st<-1?-$t:Math.asin(st)}function Ae(st){return((st=Math.exp(st))-1/st)/2}function Ve(st){return((st=Math.exp(st))+1/st)/2}function Qe(st){return((st=Math.exp(2*st))-1)/(st+1)}var Sr=Math.SQRT2,he=2,je=4;i.interpolateZoom=function(st,bt){var Ct=st[0],qt=st[1],Wt=st[2],Jt=bt[0],ge=bt[1],ne=bt[2],Ie=Jt-Ct,Ge=ge-qt,Ye=Ie*Ie+Ge*Ge,vr,Ar;if(Ye<vt)Ar=Math.log(ne/Wt)/Sr,vr=function(Wr){return[Ct+Wr*Ie,qt+Wr*Ge,Wt*Math.exp(Sr*Wr*Ar)]};else{var jr=Math.sqrt(Ye),Gr=(ne*ne-Wt*Wt+je*Ye)/(2*Wt*he*jr),Tr=(ne*ne-Wt*Wt-je*Ye)/(2*ne*he*jr),Dr=Math.log(Math.sqrt(Gr*Gr+1)-Gr),Ur=Math.log(Math.sqrt(Tr*Tr+1)-Tr);Ar=(Ur-Dr)/Sr,vr=function(Wr){var tn=Wr*Ar,Nr=Ve(Dr),Pn=Wt/(he*jr)*(Nr*Qe(Sr*tn+Dr)-Ae(Dr));return[Ct+Pn*Ie,qt+Pn*Ge,Wt*Nr/Ve(Sr*tn+Dr)]}}return vr.duration=Ar*1e3,vr},i.behavior.zoom=function(){var st={x:0,y:0,k:1},bt,Ct,qt,Wt=[960,500],Jt=Re,ge=250,ne=0,Ie="mousedown.zoom",Ge="mousemove.zoom",Ye="mouseup.zoom",vr,Ar="touchstart.zoom",jr,Gr=q(tn,"zoomstart","zoom","zoomend"),Tr,Dr,Ur,Wr;tr||(tr="onwheel"in g?(_r=function(){return-i.event.deltaY*(i.event.deltaMode?120:1)},"wheel"):"onmousewheel"in g?(_r=function(){return i.event.wheelDelta},"mousewheel"):(_r=function(){return-i.event.detail},"MozMousePixelScroll"));function tn(In){In.on(Ie,Li).on(tr+".zoom",Gi).on("dblclick.zoom",Xi).on(Ar,Zi)}tn.event=function(In){In.each(function(){var Pi=Gr.of(this,arguments),Si=st;br?i.select(this).transition().each("start.zoom",function(){st=this.__chart__||{x:0,y:0,k:1},si(Pi)}).tween("zoom:zoom",function(){var zi=Wt[0],ua=Wt[1],ba=Ct?Ct[0]:zi/2,Ta=Ct?Ct[1]:ua/2,aa=i.interpolateZoom([(ba-st.x)/st.k,(Ta-st.y)/st.k,zi/st.k],[(ba-Si.x)/Si.k,(Ta-Si.y)/Si.k,zi/Si.k]);return function(Ki){var oi=aa(Ki),pi=zi/oi[2];this.__chart__=st={x:ba-oi[0]*pi,y:Ta-oi[1]*pi,k:pi},Ei(Pi)}}).each("interrupt.zoom",function(){di(Pi)}).each("end.zoom",function(){di(Pi)}):(this.__chart__=st,si(Pi),Ei(Pi),di(Pi))})},tn.translate=function(In){return arguments.length?(st={x:+In[0],y:+In[1],k:st.k},li(),tn):[st.x,st.y]},tn.scale=function(In){return arguments.length?(st={x:st.x,y:st.y,k:null},Dn(+In),li(),tn):st.k},tn.scaleExtent=function(In){return arguments.length?(Jt=In==null?Re:[+In[0],+In[1]],tn):Jt},tn.center=function(In){return arguments.length?(qt=In&&[+In[0],+In[1]],tn):qt},tn.size=function(In){return arguments.length?(Wt=In&&[+In[0],+In[1]],tn):Wt},tn.duration=function(In){return arguments.length?(ge=+In,tn):ge},tn.x=function(In){return arguments.length?(Dr=In,Tr=In.copy(),st={x:0,y:0,k:1},tn):Dr},tn.y=function(In){return arguments.length?(Wr=In,Ur=In.copy(),st={x:0,y:0,k:1},tn):Wr};function Nr(In){return[(In[0]-st.x)/st.k,(In[1]-st.y)/st.k]}function Pn(In){return[In[0]*st.k+st.x,In[1]*st.k+st.y]}function Dn(In){st.k=Math.max(Jt[0],Math.min(Jt[1],In))}function Zn(In,Pi){Pi=Pn(Pi),st.x+=In[0]-Pi[0],st.y+=In[1]-Pi[1]}function Yn(In,Pi,Si,zi){In.__chart__={x:st.x,y:st.y,k:st.k},Dn(Math.pow(2,zi)),Zn(Ct=Pi,Si),In=i.select(In),ge>0&&(In=In.transition().duration(ge)),In.call(tn.event)}function li(){Dr&&Dr.domain(Tr.range().map(function(In){return(In-st.x)/st.k}).map(Tr.invert)),Wr&&Wr.domain(Ur.range().map(function(In){return(In-st.y)/st.k}).map(Ur.invert))}function si(In){ne++||In({type:"zoomstart"})}function Ei(In){li(),In({type:"zoom",scale:st.k,translate:[st.x,st.y]})}function di(In){--ne||(In({type:"zoomend"}),Ct=null)}function Li(){var In=this,Pi=Gr.of(In,arguments),Si=0,zi=i.select(e(In)).on(Ge,Ta).on(Ye,aa),ua=Nr(i.mouse(In)),ba=Rt(In);Pe.call(In),si(Pi);function Ta(){Si=1,Zn(i.mouse(In),ua),Ei(Pi)}function aa(){zi.on(Ge,null).on(Ye,null),ba(Si),di(Pi)}}function Zi(){var In=this,Pi=Gr.of(In,arguments),Si={},zi=0,ua,ba=".zoom-"+i.event.changedTouches[0].identifier,Ta="touchmove"+ba,aa="touchend"+ba,Ki=[],oi=i.select(In),pi=Rt(In);Aa(),si(Pi),oi.on(Ie,null).on(Ar,Aa);function oa(){var Ya=i.touches(In);return ua=st.k,Ya.forEach(function(pa){pa.identifier in Si&&(Si[pa.identifier]=Nr(pa))}),Ya}function Aa(){var Ya=i.event.target;i.select(Ya).on(Ta,so).on(aa,Oa),Ki.push(Ya);for(var pa=i.event.changedTouches,po=0,ta=pa.length;po<ta;++po)Si[pa[po].identifier]=null;var No=oa(),vo=Date.now();if(No.length===1){if(vo-jr<500){var Bi=No[0];Yn(In,Bi,Si[Bi.identifier],Math.floor(Math.log(st.k)/Math.LN2)+1),at()}jr=vo}else if(No.length>1){var Bi=No[0],sa=No[1],Ru=Bi[0]-sa[0],du=Bi[1]-sa[1];zi=Ru*Ru+du*du}}function so(){var Ya=i.touches(In),pa,po,ta,No;Pe.call(In);for(var vo=0,Bi=Ya.length;vo<Bi;++vo,No=null)if(ta=Ya[vo],No=Si[ta.identifier]){if(po)break;pa=ta,po=No}if(No){var sa=(sa=ta[0]-pa[0])*sa+(sa=ta[1]-pa[1])*sa,Ru=zi&&Math.sqrt(sa/zi);pa=[(pa[0]+ta[0])/2,(pa[1]+ta[1])/2],po=[(po[0]+No[0])/2,(po[1]+No[1])/2],Dn(Ru*ua)}jr=null,Zn(pa,po),Ei(Pi)}function Oa(){if(i.event.touches.length){for(var Ya=i.event.changedTouches,pa=0,po=Ya.length;pa<po;++pa)delete Si[Ya[pa].identifier];for(var ta in Si)return void oa()}i.selectAll(Ki).on(ba,null),oi.on(Ie,Li).on(Ar,Zi),pi(),di(Pi)}}function Gi(){var In=Gr.of(this,arguments);vr?clearTimeout(vr):(Pe.call(this),bt=Nr(Ct=qt||i.mouse(this)),si(In)),vr=setTimeout(function(){vr=null,di(In)},50),at(),Dn(Math.pow(2,_r()*.002)*st.k),Zn(Ct,bt),Ei(In)}function Xi(){var In=i.mouse(this),Pi=Math.log(st.k)/Math.LN2;Yn(this,In,Nr(In),i.event.shiftKey?Math.ceil(Pi)-1:Math.floor(Pi)+1)}return i.rebind(tn,Gr,"on")};var Re=[0,1/0],_r,tr;i.color=Gt;function Gt(){}Gt.prototype.toString=function(){return this.rgb()+""},i.hsl=re;function re(st,bt,Ct){return this instanceof re?(this.h=+st,this.s=+bt,void(this.l=+Ct)):arguments.length<2?st instanceof re?new re(st.h,st.s,st.l):sr(""+st,lr,re):new re(st,bt,Ct)}var fe=re.prototype=new Gt;fe.brighter=function(st){return st=Math.pow(.7,arguments.length?st:1),new re(this.h,this.s,this.l/st)},fe.darker=function(st){return st=Math.pow(.7,arguments.length?st:1),new re(this.h,this.s,st*this.l)},fe.rgb=function(){return ye(this.h,this.s,this.l)};function ye(st,bt,Ct){var qt,Wt;st=isNaN(st)?0:(st%=360)<0?st+360:st,bt=isNaN(bt)||bt<0?0:bt>1?1:bt,Ct=Ct<0?0:Ct>1?1:Ct,Wt=Ct<=.5?Ct*(1+bt):Ct+bt-Ct*bt,qt=2*Ct-Wt;function Jt(ne){return ne>360?ne-=360:ne<0&&(ne+=360),ne<60?qt+(Wt-qt)*ne/60:ne<180?Wt:ne<240?qt+(Wt-qt)*(240-ne)/60:qt}function ge(ne){return Math.round(Jt(ne)*255)}return new $e(ge(st+120),ge(st),ge(st-120))}i.hcl=Le;function Le(st,bt,Ct){return this instanceof Le?(this.h=+st,this.c=+bt,void(this.l=+Ct)):arguments.length<2?st instanceof Le?new Le(st.h,st.c,st.l):st instanceof ze?Te(st.l,st.a,st.b):Te((st=Or((st=i.rgb(st)).r,st.g,st.b)).l,st.a,st.b):new Le(st,bt,Ct)}var _e=Le.prototype=new Gt;_e.brighter=function(st){return new Le(this.h,this.c,Math.min(100,this.l+We*(arguments.length?st:1)))},_e.darker=function(st){return new Le(this.h,this.c,Math.max(0,this.l-We*(arguments.length?st:1)))},_e.rgb=function(){return Ce(this.h,this.c,this.l).rgb()};function Ce(st,bt,Ct){return isNaN(st)&&(st=0),isNaN(bt)&&(bt=0),new ze(Ct,Math.cos(st*=de)*bt,Math.sin(st)*bt)}i.lab=ze;function ze(st,bt,Ct){return this instanceof ze?(this.l=+st,this.a=+bt,void(this.b=+Ct)):arguments.length<2?st instanceof ze?new ze(st.l,st.a,st.b):st instanceof Le?Ce(st.h,st.c,st.l):Or((st=$e(st)).r,st.g,st.b):new ze(st,bt,Ct)}var We=18,qe=.95047,ir=1,xr=1.08883,Dt=ze.prototype=new Gt;Dt.brighter=function(st){return new ze(Math.min(100,this.l+We*(arguments.length?st:1)),this.a,this.b)},Dt.darker=function(st){return new ze(Math.max(0,this.l-We*(arguments.length?st:1)),this.a,this.b)},Dt.rgb=function(){return Ut(this.l,this.a,this.b)};function Ut(st,bt,Ct){var qt=(st+16)/116,Wt=qt+bt/500,Jt=qt-Ct/200;return Wt=Se(Wt)*qe,qt=Se(qt)*ir,Jt=Se(Jt)*xr,new $e(Je(3.2404542*Wt-1.5371385*qt-.4985314*Jt),Je(-.969266*Wt+1.8760108*qt+.041556*Jt),Je(.0556434*Wt-.2040259*qt+1.0572252*Jt))}function Te(st,bt,Ct){return st>0?new Le(Math.atan2(Ct,bt)*Me,Math.sqrt(bt*bt+Ct*Ct),st):new Le(NaN,NaN,st)}function Se(st){return st>.206893034?st*st*st:(st-.13793103448275862)/7.787037}function Be(st){return st>.008856?Math.pow(st,.3333333333333333):7.787037*st+.13793103448275862}function Je(st){return Math.round(255*(st<=.00304?12.92*st:1.055*Math.pow(st,.4166666666666667)-.055))}i.rgb=$e;function $e(st,bt,Ct){return this instanceof $e?(this.r=~~st,this.g=~~bt,void(this.b=~~Ct)):arguments.length<2?st instanceof $e?new $e(st.r,st.g,st.b):sr(""+st,$e,ye):new $e(st,bt,Ct)}function Xe(st){return new $e(st>>16,st>>8&255,st&255)}function Oe(st){return Xe(st)+""}var ar=$e.prototype=new Gt;ar.brighter=function(st){st=Math.pow(.7,arguments.length?st:1);var bt=this.r,Ct=this.g,qt=this.b,Wt=30;return!bt&&!Ct&&!qt?new $e(Wt,Wt,Wt):(bt&&bt<Wt&&(bt=Wt),Ct&&Ct<Wt&&(Ct=Wt),qt&&qt<Wt&&(qt=Wt),new $e(Math.min(255,bt/st),Math.min(255,Ct/st),Math.min(255,qt/st)))},ar.darker=function(st){return st=Math.pow(.7,arguments.length?st:1),new $e(st*this.r,st*this.g,st*this.b)},ar.hsl=function(){return lr(this.r,this.g,this.b)},ar.toString=function(){return"#"+cr(this.r)+cr(this.g)+cr(this.b)};function cr(st){return st<16?"0"+Math.max(0,st).toString(16):Math.min(255,st).toString(16)}function sr(st,bt,Ct){var qt=0,Wt=0,Jt=0,ge,ne,Ie;if(ge=/([a-z]+)\((.*)\)/.exec(st=st.toLowerCase()),ge)switch(ne=ge[2].split(","),ge[1]){case"hsl":return Ct(parseFloat(ne[0]),parseFloat(ne[1])/100,parseFloat(ne[2])/100);case"rgb":return bt(Pr(ne[0]),Pr(ne[1]),Pr(ne[2]))}return(Ie=rn.get(st))?bt(Ie.r,Ie.g,Ie.b):(st!=null&&st.charAt(0)==="#"&&!isNaN(Ie=parseInt(st.slice(1),16))&&(st.length===4?(qt=(Ie&3840)>>4,qt=qt>>4|qt,Wt=Ie&240,Wt=Wt>>4|Wt,Jt=Ie&15,Jt=Jt<<4|Jt):st.length===7&&(qt=(Ie&16711680)>>16,Wt=(Ie&65280)>>8,Jt=Ie&255)),bt(qt,Wt,Jt))}function lr(st,bt,Ct){var qt=Math.min(st/=255,bt/=255,Ct/=255),Wt=Math.max(st,bt,Ct),Jt=Wt-qt,ge,ne,Ie=(Wt+qt)/2;return Jt?(ne=Ie<.5?Jt/(Wt+qt):Jt/(2-Wt-qt),st==Wt?ge=(bt-Ct)/Jt+(bt<Ct?6:0):bt==Wt?ge=(Ct-st)/Jt+2:ge=(st-bt)/Jt+4,ge*=60):(ge=NaN,ne=Ie>0&&Ie<1?0:ge),new re(ge,ne,Ie)}function Or(st,bt,Ct){st=Ir(st),bt=Ir(bt),Ct=Ir(Ct);var qt=Be((.4124564*st+.3575761*bt+.1804375*Ct)/qe),Wt=Be((.2126729*st+.7151522*bt+.072175*Ct)/ir),Jt=Be((.0193339*st+.119192*bt+.9503041*Ct)/xr);return ze(116*Wt-16,500*(qt-Wt),200*(Wt-Jt))}function Ir(st){return(st/=255)<=.04045?st/12.92:Math.pow((st+.055)/1.055,2.4)}function Pr(st){var bt=parseFloat(st);return st.charAt(st.length-1)==="%"?Math.round(bt*2.55):bt}var rn=i.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});rn.forEach(function(st,bt){rn.set(st,Xe(bt))});function Zr(st){return typeof st=="function"?st:function(){return st}}i.functor=Zr,i.xhr=yn(R);function yn(st){return function(bt,Ct,qt){return arguments.length===2&&typeof Ct=="function"&&(qt=Ct,Ct=null),Tn(bt,Ct,st,qt)}}function Tn(st,bt,Ct,qt){var Wt={},Jt=i.dispatch("beforesend","progress","load","error"),ge={},ne=new XMLHttpRequest,Ie=null;self.XDomainRequest&&!("withCredentials"in ne)&&/^(http(s)?:)?\/\//.test(st)&&(ne=new XDomainRequest),"onload"in ne?ne.onload=ne.onerror=Ge:ne.onreadystatechange=function(){ne.readyState>3&&Ge()};function Ge(){var Ye=ne.status,vr;if(!Ye&&dr(ne)||Ye>=200&&Ye<300||Ye===304){try{vr=Ct.call(Wt,ne)}catch(Ar){Jt.error.call(Wt,Ar);return}Jt.load.call(Wt,vr)}else Jt.error.call(Wt,ne)}return ne.onprogress=function(Ye){var vr=i.event;i.event=Ye;try{Jt.progress.call(Wt,ne)}finally{i.event=vr}},Wt.header=function(Ye,vr){return Ye=(Ye+"").toLowerCase(),arguments.length<2?ge[Ye]:(vr==null?delete ge[Ye]:ge[Ye]=vr+"",Wt)},Wt.mimeType=function(Ye){return arguments.length?(bt=Ye==null?null:Ye+"",Wt):bt},Wt.responseType=function(Ye){return arguments.length?(Ie=Ye,Wt):Ie},Wt.response=function(Ye){return Ct=Ye,Wt},["get","post"].forEach(function(Ye){Wt[Ye]=function(){return Wt.send.apply(Wt,[Ye].concat(A(arguments)))}}),Wt.send=function(Ye,vr,Ar){if(arguments.length===2&&typeof vr=="function"&&(Ar=vr,vr=null),ne.open(Ye,st,!0),bt!=null&&!("accept"in ge)&&(ge.accept=bt+",*/*"),ne.setRequestHeader)for(var jr in ge)ne.setRequestHeader(jr,ge[jr]);return bt!=null&&ne.overrideMimeType&&ne.overrideMimeType(bt),Ie!=null&&(ne.responseType=Ie),Ar!=null&&Wt.on("error",Ar).on("load",function(Gr){Ar(null,Gr)}),Jt.beforesend.call(Wt,ne),ne.send(vr??null),Wt},Wt.abort=function(){return ne.abort(),Wt},i.rebind(Wt,Jt,"on"),qt==null?Wt:Wt.get(hr(qt))}function hr(st){return st.length===1?function(bt,Ct){st(bt==null?Ct:null)}:st}function dr(st){var bt=st.responseType;return bt&&bt!=="text"?st.response:st.responseText}i.dsv=function(st,bt){var Ct=new RegExp('["'+st+`
]`),qt=st.charCodeAt(0);function Wt(Ge,Ye,vr){arguments.length<3&&(vr=Ye,Ye=null);var Ar=Tn(Ge,bt,Ye==null?Jt:ge(Ye),vr);return Ar.row=function(jr){return arguments.length?Ar.response((Ye=jr)==null?Jt:ge(jr)):Ye},Ar}function Jt(Ge){return Wt.parse(Ge.responseText)}function ge(Ge){return function(Ye){return Wt.parse(Ye.responseText,Ge)}}Wt.parse=function(Ge,Ye){var vr;return Wt.parseRows(Ge,function(Ar,jr){if(vr)return vr(Ar,jr-1);var Gr=function(Tr){for(var Dr={},Ur=Ar.length,Wr=0;Wr<Ur;++Wr)Dr[Ar[Wr]]=Tr[Wr];return Dr};vr=Ye?function(Tr,Dr){return Ye(Gr(Tr),Dr)}:Gr})},Wt.parseRows=function(Ge,Ye){var vr={},Ar={},jr=[],Gr=Ge.length,Tr=0,Dr=0,Ur,Wr;function tn(){if(Tr>=Gr)return Ar;if(Wr)return Wr=!1,vr;var Pn=Tr;if(Ge.charCodeAt(Pn)===34){for(var Dn=Pn;Dn++<Gr;)if(Ge.charCodeAt(Dn)===34){if(Ge.charCodeAt(Dn+1)!==34)break;++Dn}Tr=Dn+2;var Zn=Ge.charCodeAt(Dn+1);return Zn===13?(Wr=!0,Ge.charCodeAt(Dn+2)===10&&++Tr):Zn===10&&(Wr=!0),Ge.slice(Pn+1,Dn).replace(/""/g,'"')}for(;Tr<Gr;){var Zn=Ge.charCodeAt(Tr++),Yn=1;if(Zn===10)Wr=!0;else if(Zn===13)Wr=!0,Ge.charCodeAt(Tr)===10&&(++Tr,++Yn);else if(Zn!==qt)continue;return Ge.slice(Pn,Tr-Yn)}return Ge.slice(Pn)}for(;(Ur=tn())!==Ar;){for(var Nr=[];Ur!==vr&&Ur!==Ar;)Nr.push(Ur),Ur=tn();Ye&&(Nr=Ye(Nr,Dr++))==null||jr.push(Nr)}return jr},Wt.format=function(Ge){if(Array.isArray(Ge[0]))return Wt.formatRows(Ge);var Ye=new O,vr=[];return Ge.forEach(function(Ar){for(var jr in Ar)Ye.has(jr)||vr.push(Ye.add(jr))}),[vr.map(Ie).join(st)].concat(Ge.map(function(Ar){return vr.map(function(jr){return Ie(Ar[jr])}).join(st)})).join(`
`)},Wt.formatRows=function(Ge){return Ge.map(ne).join(`
`)};function ne(Ge){return Ge.map(Ie).join(st)}function Ie(Ge){return Ct.test(Ge)?'"'+Ge.replace(/\"/g,'""')+'"':Ge}return Wt},i.csv=i.dsv(",","text/csv"),i.tsv=i.dsv("	","text/tab-separated-values");var Lr,Cr,Hr,sn,Yr=this[F(this,"requestAnimationFrame")]||function(st){setTimeout(st,17)};i.timer=function(){xn.apply(this,arguments)};function xn(st,bt,Ct){var qt=arguments.length;qt<2&&(bt=0),qt<3&&(Ct=Date.now());var Wt=Ct+bt,Jt={c:st,t:Wt,n:null};return Cr?Cr.n=Jt:Lr=Jt,Cr=Jt,Hr||(sn=clearTimeout(sn),Hr=1,Yr(wn)),Jt}function wn(){var st=Un(),bt=qn()-st;bt>24?(isFinite(bt)&&(clearTimeout(sn),sn=setTimeout(wn,bt)),Hr=0):(Hr=1,Yr(wn))}i.timer.flush=function(){Un(),qn()};function Un(){for(var st=Date.now(),bt=Lr;bt;)st>=bt.t&&bt.c(st-bt.t)&&(bt.c=null),bt=bt.n;return st}function qn(){for(var st,bt=Lr,Ct=1/0;bt;)bt.c?(bt.t<Ct&&(Ct=bt.t),bt=(st=bt).n):bt=st?st.n=bt.n:Lr=bt.n;return Cr=st,Ct}i.round=function(st,bt){return bt?Math.round(st*(bt=Math.pow(10,bt)))/bt:Math.round(st)},i.geom={};function ei(st){return st[0]}function Gn(st){return st[1]}i.geom.hull=function(st){var bt=ei,Ct=Gn;if(arguments.length)return qt(st);function qt(Wt){if(Wt.length<3)return[];var Jt=Zr(bt),ge=Zr(Ct),ne,Ie=Wt.length,Ge=[],Ye=[];for(ne=0;ne<Ie;ne++)Ge.push([+Jt.call(this,Wt[ne],ne),+ge.call(this,Wt[ne],ne),ne]);for(Ge.sort(gr),ne=0;ne<Ie;ne++)Ye.push([Ge[ne][0],-Ge[ne][1]]);var vr=Hn(Ge),Ar=Hn(Ye),jr=Ar[0]===vr[0],Gr=Ar[Ar.length-1]===vr[vr.length-1],Tr=[];for(ne=vr.length-1;ne>=0;--ne)Tr.push(Wt[Ge[vr[ne]][2]]);for(ne=+jr;ne<Ar.length-Gr;++ne)Tr.push(Wt[Ge[Ar[ne]][2]]);return Tr}return qt.x=function(Wt){return arguments.length?(bt=Wt,qt):bt},qt.y=function(Wt){return arguments.length?(Ct=Wt,qt):Ct},qt};function Hn(st){for(var bt=st.length,Ct=[0,1],qt=2,Wt=2;Wt<bt;Wt++){for(;qt>1&&Fe(st[Ct[qt-2]],st[Ct[qt-1]],st[Wt])<=0;)--qt;Ct[qt++]=Wt}return Ct.slice(0,qt)}function gr(st,bt){return st[0]-bt[0]||st[1]-bt[1]}i.geom.polygon=function(st){return Z(st,$r),st};var $r=i.geom.polygon.prototype=[];$r.area=function(){for(var st=-1,bt=this.length,Ct,qt=this[bt-1],Wt=0;++st<bt;)Ct=qt,qt=this[st],Wt+=Ct[1]*qt[0]-Ct[0]*qt[1];return Wt*.5},$r.centroid=function(st){var bt=-1,Ct=this.length,qt=0,Wt=0,Jt,ge=this[Ct-1],ne;for(arguments.length||(st=-1/(6*this.area()));++bt<Ct;)Jt=ge,ge=this[bt],ne=Jt[0]*ge[1]-ge[0]*Jt[1],qt+=(Jt[0]+ge[0])*ne,Wt+=(Jt[1]+ge[1])*ne;return[qt*st,Wt*st]},$r.clip=function(st){for(var bt,Ct=zn(st),qt=-1,Wt=this.length-zn(this),Jt,ge,ne=this[Wt-1],Ie,Ge,Ye;++qt<Wt;){for(bt=st.slice(),st.length=0,Ie=this[qt],Ge=bt[(ge=bt.length-Ct)-1],Jt=-1;++Jt<ge;)Ye=bt[Jt],Jr(Ye,ne,Ie)?(Jr(Ge,ne,Ie)||st.push(ln(Ge,Ye,ne,Ie)),st.push(Ye)):Jr(Ge,ne,Ie)&&st.push(ln(Ge,Ye,ne,Ie)),Ge=Ye;Ct&&st.push(st[0]),ne=Ie}return st};function Jr(st,bt,Ct){return(Ct[0]-bt[0])*(st[1]-bt[1])<(Ct[1]-bt[1])*(st[0]-bt[0])}function ln(st,bt,Ct,qt){var Wt=st[0],Jt=Ct[0],ge=bt[0]-Wt,ne=qt[0]-Jt,Ie=st[1],Ge=Ct[1],Ye=bt[1]-Ie,vr=qt[1]-Ge,Ar=(ne*(Ie-Ge)-vr*(Wt-Jt))/(vr*ge-ne*Ye);return[Wt+Ar*ge,Ie+Ar*Ye]}function zn(st){var bt=st[0],Ct=st[st.length-1];return!(bt[0]-Ct[0]||bt[1]-Ct[1])}var mn,Mn,On,Xn=[],gi,Ri,Ue=[];function fr(){Ga(this),this.edge=this.site=this.circle=null}function Qr(st){var bt=Xn.pop()||new fr;return bt.site=st,bt}function cn(st){Rn(st),On.remove(st),Xn.push(st),Ga(st)}function nn(st){var bt=st.circle,Ct=bt.x,qt=bt.cy,Wt={x:Ct,y:qt},Jt=st.P,ge=st.N,ne=[st];cn(st);for(var Ie=Jt;Ie.circle&&c(Ct-Ie.circle.x)<ut&&c(qt-Ie.circle.cy)<ut;)Jt=Ie.P,ne.unshift(Ie),cn(Ie),Ie=Jt;ne.unshift(Ie),Rn(Ie);for(var Ge=ge;Ge.circle&&c(Ct-Ge.circle.x)<ut&&c(qt-Ge.circle.cy)<ut;)ge=Ge.N,ne.push(Ge),cn(Ge),Ge=ge;ne.push(Ge),Rn(Ge);var Ye=ne.length,vr;for(vr=1;vr<Ye;++vr)Ge=ne[vr],Ie=ne[vr-1],ii(Ge.edge,Ie.site,Ge.site,Wt);Ie=ne[0],Ge=ne[Ye-1],Ge.edge=Kn(Ie.site,Ge.site,null,Wt),kn(Ie),kn(Ge)}function _n(st){for(var bt=st.x,Ct=st.y,qt,Wt,Jt,ge,ne=On._;ne;)if(Jt=gn(ne,Ct)-bt,Jt>ut)ne=ne.L;else if(ge=bt-en(ne,Ct),ge>ut){if(!ne.R){qt=ne;break}ne=ne.R}else{Jt>-ut?(qt=ne.P,Wt=ne):ge>-ut?(qt=ne,Wt=ne.N):qt=Wt=ne;break}var Ie=Qr(st);if(On.insert(qt,Ie),!(!qt&&!Wt)){if(qt===Wt){Rn(qt),Wt=Qr(qt.site),On.insert(Ie,Wt),Ie.edge=Wt.edge=Kn(qt.site,Ie.site),kn(qt),kn(Wt);return}if(!Wt){Ie.edge=Kn(qt.site,Ie.site);return}Rn(qt),Rn(Wt);var Ge=qt.site,Ye=Ge.x,vr=Ge.y,Ar=st.x-Ye,jr=st.y-vr,Gr=Wt.site,Tr=Gr.x-Ye,Dr=Gr.y-vr,Ur=2*(Ar*Dr-jr*Tr),Wr=Ar*Ar+jr*jr,tn=Tr*Tr+Dr*Dr,Nr={x:(Dr*Wr-jr*tn)/Ur+Ye,y:(Ar*tn-Tr*Wr)/Ur+vr};ii(Wt.edge,Ge,Gr,Nr),Ie.edge=Kn(Ge,st,null,Nr),Wt.edge=Kn(st,Gr,null,Nr),kn(qt),kn(Wt)}}function gn(st,bt){var Ct=st.site,qt=Ct.x,Wt=Ct.y,Jt=Wt-bt;if(!Jt)return qt;var ge=st.P;if(!ge)return-1/0;Ct=ge.site;var ne=Ct.x,Ie=Ct.y,Ge=Ie-bt;if(!Ge)return ne;var Ye=ne-qt,vr=1/Jt-1/Ge,Ar=Ye/Ge;return vr?(-Ar+Math.sqrt(Ar*Ar-2*vr*(Ye*Ye/(-2*Ge)-Ie+Ge/2+Wt-Jt/2)))/vr+qt:(qt+ne)/2}function en(st,bt){var Ct=st.N;if(Ct)return gn(Ct,bt);var qt=st.site;return qt.y===bt?qt.x:1/0}function wr(st){this.site=st,this.edges=[]}wr.prototype.prepare=function(){for(var st=this.edges,bt=st.length,Ct;bt--;)Ct=st[bt].edge,(!Ct.b||!Ct.a)&&st.splice(bt,1);return st.sort(Mr),st.length};function mr(st){for(var bt=st[0][0],Ct=st[1][0],qt=st[0][1],Wt=st[1][1],Jt,ge,ne,Ie,Ge=Mn,Ye=Ge.length,vr,Ar,jr,Gr,Tr,Dr;Ye--;)if(vr=Ge[Ye],!(!vr||!vr.prepare()))for(jr=vr.edges,Gr=jr.length,Ar=0;Ar<Gr;)Dr=jr[Ar].end(),ne=Dr.x,Ie=Dr.y,Tr=jr[++Ar%Gr].start(),Jt=Tr.x,ge=Tr.y,(c(ne-Jt)>ut||c(Ie-ge)>ut)&&(jr.splice(Ar,0,new Pa(Jn(vr.site,Dr,c(ne-bt)<ut&&Wt-Ie>ut?{x:bt,y:c(Jt-bt)<ut?ge:Wt}:c(Ie-Wt)<ut&&Ct-ne>ut?{x:c(ge-Wt)<ut?Jt:Ct,y:Wt}:c(ne-Ct)<ut&&Ie-qt>ut?{x:Ct,y:c(Jt-Ct)<ut?ge:qt}:c(Ie-qt)<ut&&ne-bt>ut?{x:c(ge-qt)<ut?Jt:bt,y:qt}:null),vr.site,null)),++Gr)}function Mr(st,bt){return bt.angle-st.angle}function an(){Ga(this),this.x=this.y=this.arc=this.site=this.cy=null}function kn(st){var bt=st.P,Ct=st.N;if(!(!bt||!Ct)){var qt=bt.site,Wt=st.site,Jt=Ct.site;if(qt!==Jt){var ge=Wt.x,ne=Wt.y,Ie=qt.x-ge,Ge=qt.y-ne,Ye=Jt.x-ge,vr=Jt.y-ne,Ar=2*(Ie*vr-Ge*Ye);if(!(Ar>=-vt)){var jr=Ie*Ie+Ge*Ge,Gr=Ye*Ye+vr*vr,Tr=(vr*jr-Ge*Gr)/Ar,Dr=(Ie*Gr-Ye*jr)/Ar,vr=Dr+ne,Ur=Ue.pop()||new an;Ur.arc=st,Ur.site=Wt,Ur.x=Tr+ge,Ur.y=vr+Math.sqrt(Tr*Tr+Dr*Dr),Ur.cy=vr,st.circle=Ur;for(var Wr=null,tn=Ri._;tn;)if(Ur.y<tn.y||Ur.y===tn.y&&Ur.x<=tn.x)if(tn.L)tn=tn.L;else{Wr=tn.P;break}else if(tn.R)tn=tn.R;else{Wr=tn;break}Ri.insert(Wr,Ur),Wr||(gi=Ur)}}}}function Rn(st){var bt=st.circle;bt&&(bt.P||(gi=bt.N),Ri.remove(bt),Ue.push(bt),Ga(bt),st.circle=null)}function fn(st,bt,Ct,qt){return function(Wt){var Jt=Wt.a,ge=Wt.b,ne=Jt.x,Ie=Jt.y,Ge=ge.x,Ye=ge.y,vr=0,Ar=1,jr=Ge-ne,Gr=Ye-Ie,Tr;if(Tr=st-ne,!(!jr&&Tr>0)){if(Tr/=jr,jr<0){if(Tr<vr)return;Tr<Ar&&(Ar=Tr)}else if(jr>0){if(Tr>Ar)return;Tr>vr&&(vr=Tr)}if(Tr=Ct-ne,!(!jr&&Tr<0)){if(Tr/=jr,jr<0){if(Tr>Ar)return;Tr>vr&&(vr=Tr)}else if(jr>0){if(Tr<vr)return;Tr<Ar&&(Ar=Tr)}if(Tr=bt-Ie,!(!Gr&&Tr>0)){if(Tr/=Gr,Gr<0){if(Tr<vr)return;Tr<Ar&&(Ar=Tr)}else if(Gr>0){if(Tr>Ar)return;Tr>vr&&(vr=Tr)}if(Tr=qt-Ie,!(!Gr&&Tr<0)){if(Tr/=Gr,Gr<0){if(Tr>Ar)return;Tr>vr&&(vr=Tr)}else if(Gr>0){if(Tr<vr)return;Tr<Ar&&(Ar=Tr)}return vr>0&&(Wt.a={x:ne+vr*jr,y:Ie+vr*Gr}),Ar<1&&(Wt.b={x:ne+Ar*jr,y:Ie+Ar*Gr}),Wt}}}}}}function Sn(st){for(var bt=mn,Ct=fn(st[0][0],st[0][1],st[1][0],st[1][1]),qt=bt.length,Wt;qt--;)Wt=bt[qt],(!Vn(Wt,st)||!Ct(Wt)||c(Wt.a.x-Wt.b.x)<ut&&c(Wt.a.y-Wt.b.y)<ut)&&(Wt.a=Wt.b=null,bt.splice(qt,1))}function Vn(st,bt){var Ct=st.b;if(Ct)return!0;var qt=st.a,Wt=bt[0][0],Jt=bt[1][0],ge=bt[0][1],ne=bt[1][1],Ie=st.l,Ge=st.r,Ye=Ie.x,vr=Ie.y,Ar=Ge.x,jr=Ge.y,Gr=(Ye+Ar)/2,Tr=(vr+jr)/2,Dr,Ur;if(jr===vr){if(Gr<Wt||Gr>=Jt)return;if(Ye>Ar){if(!qt)qt={x:Gr,y:ge};else if(qt.y>=ne)return;Ct={x:Gr,y:ne}}else{if(!qt)qt={x:Gr,y:ne};else if(qt.y<ge)return;Ct={x:Gr,y:ge}}}else if(Dr=(Ye-Ar)/(jr-vr),Ur=Tr-Dr*Gr,Dr<-1||Dr>1)if(Ye>Ar){if(!qt)qt={x:(ge-Ur)/Dr,y:ge};else if(qt.y>=ne)return;Ct={x:(ne-Ur)/Dr,y:ne}}else{if(!qt)qt={x:(ne-Ur)/Dr,y:ne};else if(qt.y<ge)return;Ct={x:(ge-Ur)/Dr,y:ge}}else if(vr<jr){if(!qt)qt={x:Wt,y:Dr*Wt+Ur};else if(qt.x>=Jt)return;Ct={x:Jt,y:Dr*Jt+Ur}}else{if(!qt)qt={x:Jt,y:Dr*Jt+Ur};else if(qt.x<Wt)return;Ct={x:Wt,y:Dr*Wt+Ur}}return st.a=qt,st.b=Ct,!0}function $n(st,bt){this.l=st,this.r=bt,this.a=this.b=null}function Kn(st,bt,Ct,qt){var Wt=new $n(st,bt);return mn.push(Wt),Ct&&ii(Wt,st,bt,Ct),qt&&ii(Wt,bt,st,qt),Mn[st.i].edges.push(new Pa(Wt,st,bt)),Mn[bt.i].edges.push(new Pa(Wt,bt,st)),Wt}function Jn(st,bt,Ct){var qt=new $n(st,null);return qt.a=bt,qt.b=Ct,mn.push(qt),qt}function ii(st,bt,Ct,qt){!st.a&&!st.b?(st.a=qt,st.l=bt,st.r=Ct):st.l===Ct?st.b=qt:st.a=qt}function Pa(st,bt,Ct){var qt=st.a,Wt=st.b;this.edge=st,this.site=bt,this.angle=Ct?Math.atan2(Ct.y-bt.y,Ct.x-bt.x):st.l===bt?Math.atan2(Wt.x-qt.x,qt.y-Wt.y):Math.atan2(qt.x-Wt.x,Wt.y-qt.y)}Pa.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function Za(){this._=null}function Ga(st){st.U=st.C=st.L=st.R=st.P=st.N=null}Za.prototype={insert:function(st,bt){var Ct,qt,Wt;if(st){if(bt.P=st,bt.N=st.N,st.N&&(st.N.P=bt),st.N=bt,st.R){for(st=st.R;st.L;)st=st.L;st.L=bt}else st.R=bt;Ct=st}else this._?(st=Vl(this._),bt.P=null,bt.N=st,st.P=st.L=bt,Ct=st):(bt.P=bt.N=null,this._=bt,Ct=null);for(bt.L=bt.R=null,bt.U=Ct,bt.C=!0,st=bt;Ct&&Ct.C;)qt=Ct.U,Ct===qt.L?(Wt=qt.R,Wt&&Wt.C?(Ct.C=Wt.C=!1,qt.C=!0,st=qt):(st===Ct.R&&(Ja(this,Ct),st=Ct,Ct=st.U),Ct.C=!1,qt.C=!0,Wa(this,qt))):(Wt=qt.L,Wt&&Wt.C?(Ct.C=Wt.C=!1,qt.C=!0,st=qt):(st===Ct.L&&(Wa(this,Ct),st=Ct,Ct=st.U),Ct.C=!1,qt.C=!0,Ja(this,qt))),Ct=st.U;this._.C=!1},remove:function(st){st.N&&(st.N.P=st.P),st.P&&(st.P.N=st.N),st.N=st.P=null;var bt=st.U,Ct,qt=st.L,Wt=st.R,Jt,ge;if(qt?Wt?Jt=Vl(Wt):Jt=qt:Jt=Wt,bt?bt.L===st?bt.L=Jt:bt.R=Jt:this._=Jt,qt&&Wt?(ge=Jt.C,Jt.C=st.C,Jt.L=qt,qt.U=Jt,Jt!==Wt?(bt=Jt.U,Jt.U=st.U,st=Jt.R,bt.L=st,Jt.R=Wt,Wt.U=Jt):(Jt.U=bt,bt=Jt,st=Jt.R)):(ge=st.C,st=Jt),st&&(st.U=bt),!ge){if(st&&st.C){st.C=!1;return}do{if(st===this._)break;if(st===bt.L){if(Ct=bt.R,Ct.C&&(Ct.C=!1,bt.C=!0,Ja(this,bt),Ct=bt.R),Ct.L&&Ct.L.C||Ct.R&&Ct.R.C){(!Ct.R||!Ct.R.C)&&(Ct.L.C=!1,Ct.C=!0,Wa(this,Ct),Ct=bt.R),Ct.C=bt.C,bt.C=Ct.R.C=!1,Ja(this,bt),st=this._;break}}else if(Ct=bt.L,Ct.C&&(Ct.C=!1,bt.C=!0,Wa(this,bt),Ct=bt.L),Ct.L&&Ct.L.C||Ct.R&&Ct.R.C){(!Ct.L||!Ct.L.C)&&(Ct.R.C=!1,Ct.C=!0,Ja(this,Ct),Ct=bt.L),Ct.C=bt.C,bt.C=Ct.L.C=!1,Wa(this,bt),st=this._;break}Ct.C=!0,st=bt,bt=bt.U}while(!st.C);st&&(st.C=!1)}}};function Ja(st,bt){var Ct=bt,qt=bt.R,Wt=Ct.U;Wt?Wt.L===Ct?Wt.L=qt:Wt.R=qt:st._=qt,qt.U=Wt,Ct.U=qt,Ct.R=qt.L,Ct.R&&(Ct.R.U=Ct),qt.L=Ct}function Wa(st,bt){var Ct=bt,qt=bt.L,Wt=Ct.U;Wt?Wt.L===Ct?Wt.L=qt:Wt.R=qt:st._=qt,qt.U=Wt,Ct.U=qt,Ct.L=qt.R,Ct.L&&(Ct.L.U=Ct),qt.R=Ct}function Vl(st){for(;st.L;)st=st.L;return st}function Hi(st,bt){var Ct=st.sort(Gs).pop(),qt,Wt,Jt;for(mn=[],Mn=new Array(st.length),On=new Za,Ri=new Za;;)if(Jt=gi,Ct&&(!Jt||Ct.y<Jt.y||Ct.y===Jt.y&&Ct.x<Jt.x))(Ct.x!==qt||Ct.y!==Wt)&&(Mn[Ct.i]=new wr(Ct),_n(Ct),qt=Ct.x,Wt=Ct.y),Ct=st.pop();else if(Jt)nn(Jt.arc);else break;bt&&(Sn(bt),mr(bt));var ge={cells:Mn,edges:mn};return On=Ri=mn=Mn=null,ge}function Gs(st,bt){return bt.y-st.y||bt.x-st.x}i.geom.voronoi=function(st){var bt=ei,Ct=Gn,qt=bt,Wt=Ct,Jt=Os;if(st)return ge(st);function ge(Ie){var Ge=new Array(Ie.length),Ye=Jt[0][0],vr=Jt[0][1],Ar=Jt[1][0],jr=Jt[1][1];return Hi(ne(Ie),Jt).cells.forEach(function(Gr,Tr){var Dr=Gr.edges,Ur=Gr.site,Wr=Ge[Tr]=Dr.length?Dr.map(function(tn){var Nr=tn.start();return[Nr.x,Nr.y]}):Ur.x>=Ye&&Ur.x<=Ar&&Ur.y>=vr&&Ur.y<=jr?[[Ye,jr],[Ar,jr],[Ar,vr],[Ye,vr]]:[];Wr.point=Ie[Tr]}),Ge}function ne(Ie){return Ie.map(function(Ge,Ye){return{x:Math.round(qt(Ge,Ye)/ut)*ut,y:Math.round(Wt(Ge,Ye)/ut)*ut,i:Ye}})}return ge.links=function(Ie){return Hi(ne(Ie)).edges.filter(function(Ge){return Ge.l&&Ge.r}).map(function(Ge){return{source:Ie[Ge.l.i],target:Ie[Ge.r.i]}})},ge.triangles=function(Ie){var Ge=[];return Hi(ne(Ie)).cells.forEach(function(Ye,vr){for(var Ar=Ye.site,jr=Ye.edges.sort(Mr),Gr=-1,Tr=jr.length,Dr,Ur=jr[Tr-1].edge,Wr=Ur.l===Ar?Ur.r:Ur.l;++Gr<Tr;)Dr=Wr,Ur=jr[Gr].edge,Wr=Ur.l===Ar?Ur.r:Ur.l,vr<Dr.i&&vr<Wr.i&&Ea(Ar,Dr,Wr)<0&&Ge.push([Ie[vr],Ie[Dr.i],Ie[Wr.i]])}),Ge},ge.x=function(Ie){return arguments.length?(qt=Zr(bt=Ie),ge):bt},ge.y=function(Ie){return arguments.length?(Wt=Zr(Ct=Ie),ge):Ct},ge.clipExtent=function(Ie){return arguments.length?(Jt=Ie??Os,ge):Jt===Os?null:Jt},ge.size=function(Ie){return arguments.length?ge.clipExtent(Ie&&[[0,0],Ie]):Jt===Os?null:Jt&&Jt[1]},ge};var Os=[[-1e6,-1e6],[1e6,1e6]];function Ea(st,bt,Ct){return(st.x-Ct.x)*(bt.y-st.y)-(st.x-bt.x)*(Ct.y-st.y)}i.geom.delaunay=function(st){return i.geom.voronoi().triangles(st)},i.geom.quadtree=function(st,bt,Ct,qt,Wt){var Jt=ei,ge=Gn,ne;if(ne=arguments.length)return Jt=Qa,ge=xu,ne===3&&(Wt=Ct,qt=bt,Ct=bt=0),Ie(st);function Ie(Ge){var Ye,vr=Zr(Jt),Ar=Zr(ge),jr,Gr,Tr,Dr,Ur,Wr,tn,Nr;if(bt!=null)Ur=bt,Wr=Ct,tn=qt,Nr=Wt;else if(tn=Nr=-(Ur=Wr=1/0),jr=[],Gr=[],Dr=Ge.length,ne)for(Tr=0;Tr<Dr;++Tr)Ye=Ge[Tr],Ye.x<Ur&&(Ur=Ye.x),Ye.y<Wr&&(Wr=Ye.y),Ye.x>tn&&(tn=Ye.x),Ye.y>Nr&&(Nr=Ye.y),jr.push(Ye.x),Gr.push(Ye.y);else for(Tr=0;Tr<Dr;++Tr){var Pn=+vr(Ye=Ge[Tr],Tr),Dn=+Ar(Ye,Tr);Pn<Ur&&(Ur=Pn),Dn<Wr&&(Wr=Dn),Pn>tn&&(tn=Pn),Dn>Nr&&(Nr=Dn),jr.push(Pn),Gr.push(Dn)}var Zn=tn-Ur,Yn=Nr-Wr;Zn>Yn?Nr=Wr+Zn:tn=Ur+Yn;function li(di,Li,Zi,Gi,Xi,In,Pi,Si){if(!(isNaN(Zi)||isNaN(Gi)))if(di.leaf){var zi=di.x,ua=di.y;if(zi!=null)if(c(zi-Zi)+c(ua-Gi)<.01)si(di,Li,Zi,Gi,Xi,In,Pi,Si);else{var ba=di.point;di.x=di.y=di.point=null,si(di,ba,zi,ua,Xi,In,Pi,Si),si(di,Li,Zi,Gi,Xi,In,Pi,Si)}else di.x=Zi,di.y=Gi,di.point=Li}else si(di,Li,Zi,Gi,Xi,In,Pi,Si)}function si(di,Li,Zi,Gi,Xi,In,Pi,Si){var zi=(Xi+Pi)*.5,ua=(In+Si)*.5,ba=Zi>=zi,Ta=Gi>=ua,aa=Ta<<1|ba;di.leaf=!1,di=di.nodes[aa]||(di.nodes[aa]=Ws()),ba?Xi=zi:Pi=zi,Ta?In=ua:Si=ua,li(di,Li,Zi,Gi,Xi,In,Pi,Si)}var Ei=Ws();if(Ei.add=function(di){li(Ei,di,+vr(di,++Tr),+Ar(di,Tr),Ur,Wr,tn,Nr)},Ei.visit=function(di){va(di,Ei,Ur,Wr,tn,Nr)},Ei.find=function(di){return Ys(Ei,di[0],di[1],Ur,Wr,tn,Nr)},Tr=-1,bt==null){for(;++Tr<Dr;)li(Ei,Ge[Tr],jr[Tr],Gr[Tr],Ur,Wr,tn,Nr);--Tr}else Ge.forEach(Ei.add);return jr=Gr=Ge=Ye=null,Ei}return Ie.x=function(Ge){return arguments.length?(Jt=Ge,Ie):Jt},Ie.y=function(Ge){return arguments.length?(ge=Ge,Ie):ge},Ie.extent=function(Ge){return arguments.length?(Ge==null?bt=Ct=qt=Wt=null:(bt=+Ge[0][0],Ct=+Ge[0][1],qt=+Ge[1][0],Wt=+Ge[1][1]),Ie):bt==null?null:[[bt,Ct],[qt,Wt]]},Ie.size=function(Ge){return arguments.length?(Ge==null?bt=Ct=qt=Wt=null:(bt=Ct=0,qt=+Ge[0],Wt=+Ge[1]),Ie):bt==null?null:[qt-bt,Wt-Ct]},Ie};function Qa(st){return st.x}function xu(st){return st.y}function Ws(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function va(st,bt,Ct,qt,Wt,Jt){if(!st(bt,Ct,qt,Wt,Jt)){var ge=(Ct+Wt)*.5,ne=(qt+Jt)*.5,Ie=bt.nodes;Ie[0]&&va(st,Ie[0],Ct,qt,ge,ne),Ie[1]&&va(st,Ie[1],ge,qt,Wt,ne),Ie[2]&&va(st,Ie[2],Ct,ne,ge,Jt),Ie[3]&&va(st,Ie[3],ge,ne,Wt,Jt)}}function Ys(st,bt,Ct,qt,Wt,Jt,ge){var ne=1/0,Ie;return function Ge(Ye,vr,Ar,jr,Gr){if(!(vr>Jt||Ar>ge||jr<qt||Gr<Wt)){if(Tr=Ye.point){var Tr,Dr=bt-Ye.x,Ur=Ct-Ye.y,Wr=Dr*Dr+Ur*Ur;if(Wr<ne){var tn=Math.sqrt(ne=Wr);qt=bt-tn,Wt=Ct-tn,Jt=bt+tn,ge=Ct+tn,Ie=Tr}}for(var Nr=Ye.nodes,Pn=(vr+jr)*.5,Dn=(Ar+Gr)*.5,Zn=bt>=Pn,Yn=Ct>=Dn,li=Yn<<1|Zn,si=li+4;li<si;++li)if(Ye=Nr[li&3])switch(li&3){case 0:Ge(Ye,vr,Ar,Pn,Dn);break;case 1:Ge(Ye,Pn,Ar,jr,Dn);break;case 2:Ge(Ye,vr,Dn,Pn,Gr);break;case 3:Ge(Ye,Pn,Dn,jr,Gr);break}}}(st,qt,Wt,Jt,ge),Ie}i.interpolateRgb=io;function io(st,bt){st=i.rgb(st),bt=i.rgb(bt);var Ct=st.r,qt=st.g,Wt=st.b,Jt=bt.r-Ct,ge=bt.g-qt,ne=bt.b-Wt;return function(Ie){return"#"+cr(Math.round(Ct+Jt*Ie))+cr(Math.round(qt+ge*Ie))+cr(Math.round(Wt+ne*Ie))}}i.interpolateObject=Ma;function Ma(st,bt){var Ct={},qt={},Wt;for(Wt in st)Wt in bt?Ct[Wt]=Ho(st[Wt],bt[Wt]):qt[Wt]=st[Wt];for(Wt in bt)Wt in st||(qt[Wt]=bt[Wt]);return function(Jt){for(Wt in Ct)qt[Wt]=Ct[Wt](Jt);return qt}}i.interpolateNumber=ao;function ao(st,bt){return st=+st,bt=+bt,function(Ct){return st*(1-Ct)+bt*Ct}}i.interpolateString=qa;function qa(st,bt){var Ct=fo.lastIndex=Oo.lastIndex=0,qt,Wt,Jt,ge=-1,ne=[],Ie=[];for(st=st+"",bt=bt+"";(qt=fo.exec(st))&&(Wt=Oo.exec(bt));)(Jt=Wt.index)>Ct&&(Jt=bt.slice(Ct,Jt),ne[ge]?ne[ge]+=Jt:ne[++ge]=Jt),(qt=qt[0])===(Wt=Wt[0])?ne[ge]?ne[ge]+=Wt:ne[++ge]=Wt:(ne[++ge]=null,Ie.push({i:ge,x:ao(qt,Wt)})),Ct=Oo.lastIndex;return Ct<bt.length&&(Jt=bt.slice(Ct),ne[ge]?ne[ge]+=Jt:ne[++ge]=Jt),ne.length<2?Ie[0]?(bt=Ie[0].x,function(Ge){return bt(Ge)+""}):function(){return bt}:(bt=Ie.length,function(Ge){for(var Ye=0,vr;Ye<bt;++Ye)ne[(vr=Ie[Ye]).i]=vr.x(Ge);return ne.join("")})}var fo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Oo=new RegExp(fo.source,"g");i.interpolate=Ho;function Ho(st,bt){for(var Ct=i.interpolators.length,qt;--Ct>=0&&!(qt=i.interpolators[Ct](st,bt)););return qt}i.interpolators=[function(st,bt){var Ct=typeof bt;return(Ct==="string"?rn.has(bt.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(bt)?io:qa:bt instanceof Gt?io:Array.isArray(bt)?Ia:Ct==="object"&&isNaN(bt)?Ma:ao)(st,bt)}],i.interpolateArray=Ia;function Ia(st,bt){var Ct=[],qt=[],Wt=st.length,Jt=bt.length,ge=Math.min(st.length,bt.length),ne;for(ne=0;ne<ge;++ne)Ct.push(Ho(st[ne],bt[ne]));for(;ne<Wt;++ne)qt[ne]=st[ne];for(;ne<Jt;++ne)qt[ne]=bt[ne];return function(Ie){for(ne=0;ne<ge;++ne)qt[ne]=Ct[ne](Ie);return qt}}var bu=function(){return R},Io=i.map({linear:bu,poly:Xs,quad:function(){return Gl},cubic:function(){return Wl},sin:function(){return $u},exp:function(){return tc},circle:function(){return ec},elastic:Yl,back:rc,bounce:function(){return nc}}),za=i.map({in:R,out:Go,"in-out":zo,"out-in":function(st){return zo(Go(st))}});i.ease=function(st){var bt=st.indexOf("-"),Ct=bt>=0?st.slice(0,bt):st,qt=bt>=0?st.slice(bt+1):"in";return Ct=Io.get(Ct)||bu,qt=za.get(qt)||R,Hl(qt(Ct.apply(null,S.call(arguments,1))))};function Hl(st){return function(bt){return bt<=0?0:bt>=1?1:st(bt)}}function Go(st){return function(bt){return 1-st(1-bt)}}function zo(st){return function(bt){return .5*(bt<.5?st(2*bt):2-st(2-2*bt))}}function Gl(st){return st*st}function Wl(st){return st*st*st}function Qu(st){if(st<=0)return 0;if(st>=1)return 1;var bt=st*st,Ct=bt*st;return 4*(st<.5?Ct:3*(st-bt)+Ct-.75)}function Xs(st){return function(bt){return Math.pow(bt,st)}}function $u(st){return 1-Math.cos(st*$t)}function tc(st){return Math.pow(2,10*(st-1))}function ec(st){return 1-Math.sqrt(1-st*st)}function Yl(st,bt){var Ct;return arguments.length<2&&(bt=.45),arguments.length?Ct=bt/Ot*Math.asin(1/st):(st=1,Ct=bt/4),function(qt){return 1+st*Math.pow(2,-10*qt)*Math.sin((qt-Ct)*Ot/bt)}}function rc(st){return st||(st=1.70158),function(bt){return bt*bt*((st+1)*bt-st)}}function nc(st){return st<.3636363636363637?7.5625*st*st:st<.7272727272727273?7.5625*(st-=.5454545454545454)*st+.75:st<.9090909090909092?7.5625*(st-=.8181818181818182)*st+.9375:7.5625*(st-=.9545454545454546)*st+.984375}i.interpolateHcl=_u;function _u(st,bt){st=i.hcl(st),bt=i.hcl(bt);var Ct=st.h,qt=st.c,Wt=st.l,Jt=bt.h-Ct,ge=bt.c-qt,ne=bt.l-Wt;return isNaN(ge)&&(ge=0,qt=isNaN(qt)?bt.c:qt),isNaN(Jt)?(Jt=0,Ct=isNaN(Ct)?bt.h:Ct):Jt>180?Jt-=360:Jt<-180&&(Jt+=360),function(Ie){return Ce(Ct+Jt*Ie,qt+ge*Ie,Wt+ne*Ie)+""}}i.interpolateHsl=ic;function ic(st,bt){st=i.hsl(st),bt=i.hsl(bt);var Ct=st.h,qt=st.s,Wt=st.l,Jt=bt.h-Ct,ge=bt.s-qt,ne=bt.l-Wt;return isNaN(ge)&&(ge=0,qt=isNaN(qt)?bt.s:qt),isNaN(Jt)?(Jt=0,Ct=isNaN(Ct)?bt.h:Ct):Jt>180?Jt-=360:Jt<-180&&(Jt+=360),function(Ie){return ye(Ct+Jt*Ie,qt+ge*Ie,Wt+ne*Ie)+""}}i.interpolateLab=ac;function ac(st,bt){st=i.lab(st),bt=i.lab(bt);var Ct=st.l,qt=st.a,Wt=st.b,Jt=bt.l-Ct,ge=bt.a-qt,ne=bt.b-Wt;return function(Ie){return Ut(Ct+Jt*Ie,qt+ge*Ie,Wt+ne*Ie)+""}}i.interpolateRound=Xl;function Xl(st,bt){return bt-=st,function(Ct){return Math.round(st+bt*Ct)}}i.transform=function(st){var bt=g.createElementNS(i.ns.prefix.svg,"g");return(i.transform=function(Ct){if(Ct!=null){bt.setAttribute("transform",Ct);var qt=bt.transform.baseVal.consolidate()}return new ms(qt?qt.matrix:oc)})(st)};function ms(st){var bt=[st.a,st.b],Ct=[st.c,st.d],qt=Is(bt),Wt=ys(bt,Ct),Jt=Is(yl(Ct,bt,-Wt))||0;bt[0]*Ct[1]<Ct[0]*bt[1]&&(bt[0]*=-1,bt[1]*=-1,qt*=-1,Wt*=-1),this.rotate=(qt?Math.atan2(bt[1],bt[0]):Math.atan2(-Ct[0],Ct[1]))*Me,this.translate=[st.e,st.f],this.scale=[qt,Jt],this.skew=Jt?Math.atan2(Wt,Jt)*Me:0}ms.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function ys(st,bt){return st[0]*bt[0]+st[1]*bt[1]}function Is(st){var bt=Math.sqrt(ys(st,st));return bt&&(st[0]/=bt,st[1]/=bt),bt}function yl(st,bt,Ct){return st[0]+=Ct*bt[0],st[1]+=Ct*bt[1],st}var oc={a:1,b:0,c:0,d:1,e:0,f:0};i.interpolateTransform=xs;function Wo(st){return st.length?st.pop()+",":""}function wu(st,bt,Ct,qt){if(st[0]!==bt[0]||st[1]!==bt[1]){var Wt=Ct.push("translate(",null,",",null,")");qt.push({i:Wt-4,x:ao(st[0],bt[0])},{i:Wt-2,x:ao(st[1],bt[1])})}else(bt[0]||bt[1])&&Ct.push("translate("+bt+")")}function Kl(st,bt,Ct,qt){st!==bt?(st-bt>180?bt+=360:bt-st>180&&(st+=360),qt.push({i:Ct.push(Wo(Ct)+"rotate(",null,")")-2,x:ao(st,bt)})):bt&&Ct.push(Wo(Ct)+"rotate("+bt+")")}function sc(st,bt,Ct,qt){st!==bt?qt.push({i:Ct.push(Wo(Ct)+"skewX(",null,")")-2,x:ao(st,bt)}):bt&&Ct.push(Wo(Ct)+"skewX("+bt+")")}function ho(st,bt,Ct,qt){if(st[0]!==bt[0]||st[1]!==bt[1]){var Wt=Ct.push(Wo(Ct)+"scale(",null,",",null,")");qt.push({i:Wt-4,x:ao(st[0],bt[0])},{i:Wt-2,x:ao(st[1],bt[1])})}else(bt[0]!==1||bt[1]!==1)&&Ct.push(Wo(Ct)+"scale("+bt+")")}function xs(st,bt){var Ct=[],qt=[];return st=i.transform(st),bt=i.transform(bt),wu(st.translate,bt.translate,Ct,qt),Kl(st.rotate,bt.rotate,Ct,qt),sc(st.skew,bt.skew,Ct,qt),ho(st.scale,bt.scale,Ct,qt),st=bt=null,function(Wt){for(var Jt=-1,ge=qt.length,ne;++Jt<ge;)Ct[(ne=qt[Jt]).i]=ne.x(Wt);return Ct.join("")}}function Ks(st,bt){return bt=(bt-=st=+st)||1/bt,function(Ct){return(Ct-st)/bt}}function zs(st,bt){return bt=(bt-=st=+st)||1/bt,function(Ct){return Math.max(0,Math.min(1,(Ct-st)/bt))}}i.layout={},i.layout.bundle=function(){return function(st){for(var bt=[],Ct=-1,qt=st.length;++Ct<qt;)bt.push(Do(st[Ct]));return bt}};function Do(st){for(var bt=st.source,Ct=st.target,qt=Jl(bt,Ct),Wt=[bt];bt!==qt;)bt=bt.parent,Wt.push(bt);for(var Jt=Wt.length;Ct!==qt;)Wt.splice(Jt,0,Ct),Ct=Ct.parent;return Wt}function Yo(st){for(var bt=[],Ct=st.parent;Ct!=null;)bt.push(st),st=Ct,Ct=Ct.parent;return bt.push(st),bt}function Jl(st,bt){if(st===bt)return st;for(var Ct=Yo(st),qt=Yo(bt),Wt=Ct.pop(),Jt=qt.pop(),ge=null;Wt===Jt;)ge=Wt,Wt=Ct.pop(),Jt=qt.pop();return ge}i.layout.chord=function(){var st={},bt,Ct,qt,Wt,Jt=0,ge,ne,Ie;function Ge(){var vr={},Ar=[],jr=i.range(Wt),Gr=[],Tr,Dr,Ur,Wr,tn;for(bt=[],Ct=[],Tr=0,Wr=-1;++Wr<Wt;){for(Dr=0,tn=-1;++tn<Wt;)Dr+=qt[Wr][tn];Ar.push(Dr),Gr.push(i.range(Wt)),Tr+=Dr}for(ge&&jr.sort(function(Ei,di){return ge(Ar[Ei],Ar[di])}),ne&&Gr.forEach(function(Ei,di){Ei.sort(function(Li,Zi){return ne(qt[di][Li],qt[di][Zi])})}),Tr=(Ot-Jt*Wt)/Tr,Dr=0,Wr=-1;++Wr<Wt;){for(Ur=Dr,tn=-1;++tn<Wt;){var Nr=jr[Wr],Pn=Gr[Nr][tn],Dn=qt[Nr][Pn],Zn=Dr,Yn=Dr+=Dn*Tr;vr[Nr+"-"+Pn]={index:Nr,subindex:Pn,startAngle:Zn,endAngle:Yn,value:Dn}}Ct[Nr]={index:Nr,startAngle:Ur,endAngle:Dr,value:Ar[Nr]},Dr+=Jt}for(Wr=-1;++Wr<Wt;)for(tn=Wr-1;++tn<Wt;){var li=vr[Wr+"-"+tn],si=vr[tn+"-"+Wr];(li.value||si.value)&&bt.push(li.value<si.value?{source:si,target:li}:{source:li,target:si})}Ie&&Ye()}function Ye(){bt.sort(function(vr,Ar){return Ie((vr.source.value+vr.target.value)/2,(Ar.source.value+Ar.target.value)/2)})}return st.matrix=function(vr){return arguments.length?(Wt=(qt=vr)&&qt.length,bt=Ct=null,st):qt},st.padding=function(vr){return arguments.length?(Jt=vr,bt=Ct=null,st):Jt},st.sortGroups=function(vr){return arguments.length?(ge=vr,bt=Ct=null,st):ge},st.sortSubgroups=function(vr){return arguments.length?(ne=vr,bt=null,st):ne},st.sortChords=function(vr){return arguments.length?(Ie=vr,bt&&Ye(),st):Ie},st.chords=function(){return bt||Ge(),bt},st.groups=function(){return Ct||Ge(),Ct},st},i.layout.force=function(){var st={},bt=i.dispatch("start","tick","end"),Ct,qt=[1,1],Wt,Jt,ge=.9,ne=Fs,Ie=Au,Ge=-30,Ye=Tu,vr=.1,Ar=.64,jr=[],Gr=[],Tr,Dr,Ur;function Wr(Nr){return function(Pn,Dn,Zn,Yn){if(Pn.point!==Nr){var li=Pn.cx-Nr.x,si=Pn.cy-Nr.y,Ei=Yn-Dn,di=li*li+si*si;if(Ei*Ei/Ar<di){if(di<Ye){var Li=Pn.charge/di;Nr.px-=li*Li,Nr.py-=si*Li}return!0}if(Pn.point&&di&&di<Ye){var Li=Pn.pointCharge/di;Nr.px-=li*Li,Nr.py-=si*Li}}return!Pn.charge}}st.tick=function(){if((Jt*=.99)<.005)return Ct=null,bt.end({type:"end",alpha:Jt=0}),!0;var Nr=jr.length,Pn=Gr.length,Dn,Zn,Yn,li,si,Ei,di,Li,Zi;for(Zn=0;Zn<Pn;++Zn)Yn=Gr[Zn],li=Yn.source,si=Yn.target,Li=si.x-li.x,Zi=si.y-li.y,(Ei=Li*Li+Zi*Zi)&&(Ei=Jt*Dr[Zn]*((Ei=Math.sqrt(Ei))-Tr[Zn])/Ei,Li*=Ei,Zi*=Ei,si.x-=Li*(di=li.weight+si.weight?li.weight/(li.weight+si.weight):.5),si.y-=Zi*di,li.x+=Li*(di=1-di),li.y+=Zi*di);if((di=Jt*vr)&&(Li=qt[0]/2,Zi=qt[1]/2,Zn=-1,di))for(;++Zn<Nr;)Yn=jr[Zn],Yn.x+=(Li-Yn.x)*di,Yn.y+=(Zi-Yn.y)*di;if(Ge)for(xl(Dn=i.geom.quadtree(jr),Jt,Ur),Zn=-1;++Zn<Nr;)(Yn=jr[Zn]).fixed||Dn.visit(Wr(Yn));for(Zn=-1;++Zn<Nr;)Yn=jr[Zn],Yn.fixed?(Yn.x=Yn.px,Yn.y=Yn.py):(Yn.x-=(Yn.px-(Yn.px=Yn.x))*ge,Yn.y-=(Yn.py-(Yn.py=Yn.y))*ge);bt.tick({type:"tick",alpha:Jt})},st.nodes=function(Nr){return arguments.length?(jr=Nr,st):jr},st.links=function(Nr){return arguments.length?(Gr=Nr,st):Gr},st.size=function(Nr){return arguments.length?(qt=Nr,st):qt},st.linkDistance=function(Nr){return arguments.length?(ne=typeof Nr=="function"?Nr:+Nr,st):ne},st.distance=st.linkDistance,st.linkStrength=function(Nr){return arguments.length?(Ie=typeof Nr=="function"?Nr:+Nr,st):Ie},st.friction=function(Nr){return arguments.length?(ge=+Nr,st):ge},st.charge=function(Nr){return arguments.length?(Ge=typeof Nr=="function"?Nr:+Nr,st):Ge},st.chargeDistance=function(Nr){return arguments.length?(Ye=Nr*Nr,st):Math.sqrt(Ye)},st.gravity=function(Nr){return arguments.length?(vr=+Nr,st):vr},st.theta=function(Nr){return arguments.length?(Ar=Nr*Nr,st):Math.sqrt(Ar)},st.alpha=function(Nr){return arguments.length?(Nr=+Nr,Jt?Nr>0?Jt=Nr:(Ct.c=null,Ct.t=NaN,Ct=null,bt.end({type:"end",alpha:Jt=0})):Nr>0&&(bt.start({type:"start",alpha:Jt=Nr}),Ct=xn(st.tick)),st):Jt},st.start=function(){var Nr,Pn=jr.length,Dn=Gr.length,Zn=qt[0],Yn=qt[1],li,si;for(Nr=0;Nr<Pn;++Nr)(si=jr[Nr]).index=Nr,si.weight=0;for(Nr=0;Nr<Dn;++Nr)si=Gr[Nr],typeof si.source=="number"&&(si.source=jr[si.source]),typeof si.target=="number"&&(si.target=jr[si.target]),++si.source.weight,++si.target.weight;for(Nr=0;Nr<Pn;++Nr)si=jr[Nr],isNaN(si.x)&&(si.x=Ei("x",Zn)),isNaN(si.y)&&(si.y=Ei("y",Yn)),isNaN(si.px)&&(si.px=si.x),isNaN(si.py)&&(si.py=si.y);if(Tr=[],typeof ne=="function")for(Nr=0;Nr<Dn;++Nr)Tr[Nr]=+ne.call(this,Gr[Nr],Nr);else for(Nr=0;Nr<Dn;++Nr)Tr[Nr]=ne;if(Dr=[],typeof Ie=="function")for(Nr=0;Nr<Dn;++Nr)Dr[Nr]=+Ie.call(this,Gr[Nr],Nr);else for(Nr=0;Nr<Dn;++Nr)Dr[Nr]=Ie;if(Ur=[],typeof Ge=="function")for(Nr=0;Nr<Pn;++Nr)Ur[Nr]=+Ge.call(this,jr[Nr],Nr);else for(Nr=0;Nr<Pn;++Nr)Ur[Nr]=Ge;function Ei(di,Li){if(!li){for(li=new Array(Pn),Xi=0;Xi<Pn;++Xi)li[Xi]=[];for(Xi=0;Xi<Dn;++Xi){var Zi=Gr[Xi];li[Zi.source.index].push(Zi.target),li[Zi.target.index].push(Zi.source)}}for(var Gi=li[Nr],Xi=-1,In=Gi.length,Pi;++Xi<In;)if(!isNaN(Pi=Gi[Xi][di]))return Pi;return Math.random()*Li}return st.resume()},st.resume=function(){return st.alpha(.1)},st.stop=function(){return st.alpha(0)},st.drag=function(){if(Wt||(Wt=i.behavior.drag().origin(R).on("dragstart.force",Ds).on("drag.force",tn).on("dragend.force",as)),!arguments.length)return Wt;this.on("mouseover.force",xa).on("mouseout.force",Ql).call(Wt)};function tn(Nr){Nr.px=i.event.x,Nr.py=i.event.y,st.resume()}return i.rebind(st,bt,"on")};function Ds(st){st.fixed|=2}function as(st){st.fixed&=-7}function xa(st){st.fixed|=4,st.px=st.x,st.py=st.y}function Ql(st){st.fixed&=-5}function xl(st,bt,Ct){var qt=0,Wt=0;if(st.charge=0,!st.leaf)for(var Jt=st.nodes,ge=Jt.length,ne=-1,Ie;++ne<ge;)Ie=Jt[ne],Ie!=null&&(xl(Ie,bt,Ct),st.charge+=Ie.charge,qt+=Ie.charge*Ie.cx,Wt+=Ie.charge*Ie.cy);if(st.point){st.leaf||(st.point.x+=Math.random()-.5,st.point.y+=Math.random()-.5);var Ge=bt*Ct[st.point.index];st.charge+=st.pointCharge=Ge,qt+=Ge*st.point.x,Wt+=Ge*st.point.y}st.cx=qt/st.charge,st.cy=Wt/st.charge}var Fs=20,Au=1,Tu=1/0;i.layout.hierarchy=function(){var st=$l,bt=bl,Ct=lc;function qt(Wt){var Jt=[Wt],ge=[],ne;for(Wt.depth=0;(ne=Jt.pop())!=null;)if(ge.push(ne),(Ge=bt.call(qt,ne,ne.depth))&&(Ie=Ge.length)){for(var Ie,Ge,Ye;--Ie>=0;)Jt.push(Ye=Ge[Ie]),Ye.parent=ne,Ye.depth=ne.depth+1;Ct&&(ne.value=0),ne.children=Ge}else Ct&&(ne.value=+Ct.call(qt,ne,ne.depth)||0),delete ne.children;return Ca(Wt,function(vr){var Ar,jr;st&&(Ar=vr.children)&&Ar.sort(st),Ct&&(jr=vr.parent)&&(jr.value+=vr.value)}),ge}return qt.sort=function(Wt){return arguments.length?(st=Wt,qt):st},qt.children=function(Wt){return arguments.length?(bt=Wt,qt):bt},qt.value=function(Wt){return arguments.length?(Ct=Wt,qt):Ct},qt.revalue=function(Wt){return Ct&&(Bs(Wt,function(Jt){Jt.children&&(Jt.value=0)}),Ca(Wt,function(Jt){var ge;Jt.children||(Jt.value=+Ct.call(qt,Jt,Jt.depth)||0),(ge=Jt.parent)&&(ge.value+=Jt.value)})),Wt},qt};function Rs(st,bt){return i.rebind(st,bt,"sort","children","value"),st.nodes=st,st.links=uc,st}function Bs(st,bt){for(var Ct=[st];(st=Ct.pop())!=null;)if(bt(st),(Wt=st.children)&&(qt=Wt.length))for(var qt,Wt;--qt>=0;)Ct.push(Wt[qt])}function Ca(st,bt){for(var Ct=[st],qt=[];(st=Ct.pop())!=null;)if(qt.push(st),(ge=st.children)&&(Jt=ge.length))for(var Wt=-1,Jt,ge;++Wt<Jt;)Ct.push(ge[Wt]);for(;(st=qt.pop())!=null;)bt(st)}function bl(st){return st.children}function lc(st){return st.value}function $l(st,bt){return bt.value-st.value}function uc(st){return i.merge(st.map(function(bt){return(bt.children||[]).map(function(Ct){return{source:bt,target:Ct}})}))}i.layout.partition=function(){var st=i.layout.hierarchy(),bt=[1,1];function Ct(Jt,ge,ne,Ie){var Ge=Jt.children;if(Jt.x=ge,Jt.y=Jt.depth*Ie,Jt.dx=ne,Jt.dy=Ie,Ge&&(vr=Ge.length)){var Ye=-1,vr,Ar,jr;for(ne=Jt.value?ne/Jt.value:0;++Ye<vr;)Ct(Ar=Ge[Ye],ge,jr=Ar.value*ne,Ie),ge+=jr}}function qt(Jt){var ge=Jt.children,ne=0;if(ge&&(Ge=ge.length))for(var Ie=-1,Ge;++Ie<Ge;)ne=Math.max(ne,qt(ge[Ie]));return 1+ne}function Wt(Jt,ge){var ne=st.call(this,Jt,ge);return Ct(ne[0],0,bt[0],bt[1]/qt(ne[0])),ne}return Wt.size=function(Jt){return arguments.length?(bt=Jt,Wt):bt},Rs(Wt,st)},i.layout.pie=function(){var st=Number,bt=_l,Ct=0,qt=Ot,Wt=0;function Jt(ge){var ne=ge.length,Ie=ge.map(function(Wr,tn){return+st.call(Jt,Wr,tn)}),Ge=+(typeof Ct=="function"?Ct.apply(this,arguments):Ct),Ye=(typeof qt=="function"?qt.apply(this,arguments):qt)-Ge,vr=Math.min(Math.abs(Ye)/ne,+(typeof Wt=="function"?Wt.apply(this,arguments):Wt)),Ar=vr*(Ye<0?-1:1),jr=i.sum(Ie),Gr=jr?(Ye-ne*Ar)/jr:0,Tr=i.range(ne),Dr=[],Ur;return bt!=null&&Tr.sort(bt===_l?function(Wr,tn){return Ie[tn]-Ie[Wr]}:function(Wr,tn){return bt(ge[Wr],ge[tn])}),Tr.forEach(function(Wr){Dr[Wr]={data:ge[Wr],value:Ur=Ie[Wr],startAngle:Ge,endAngle:Ge+=Ur*Gr+Ar,padAngle:vr}}),Dr}return Jt.value=function(ge){return arguments.length?(st=ge,Jt):st},Jt.sort=function(ge){return arguments.length?(bt=ge,Jt):bt},Jt.startAngle=function(ge){return arguments.length?(Ct=ge,Jt):Ct},Jt.endAngle=function(ge){return arguments.length?(qt=ge,Jt):qt},Jt.padAngle=function(ge){return arguments.length?(Wt=ge,Jt):Wt},Jt};var _l={};i.layout.stack=function(){var st=R,bt=wl,Ct=nu,qt=eu,Wt=Js,Jt=tu;function ge(ne,Ie){if(!(Gr=ne.length))return ne;var Ge=ne.map(function(Wr,tn){return st.call(ge,Wr,tn)}),Ye=Ge.map(function(Wr){return Wr.map(function(tn,Nr){return[Wt.call(ge,tn,Nr),Jt.call(ge,tn,Nr)]})}),vr=bt.call(ge,Ye,Ie);Ge=i.permute(Ge,vr),Ye=i.permute(Ye,vr);var Ar=Ct.call(ge,Ye,Ie),jr=Ge[0].length,Gr,Tr,Dr,Ur;for(Dr=0;Dr<jr;++Dr)for(qt.call(ge,Ge[0][Dr],Ur=Ar[Dr],Ye[0][Dr][1]),Tr=1;Tr<Gr;++Tr)qt.call(ge,Ge[Tr][Dr],Ur+=Ye[Tr-1][Dr][1],Ye[Tr][Dr][1]);return ne}return ge.values=function(ne){return arguments.length?(st=ne,ge):st},ge.order=function(ne){return arguments.length?(bt=typeof ne=="function"?ne:Qs.get(ne)||wl,ge):bt},ge.offset=function(ne){return arguments.length?(Ct=typeof ne=="function"?ne:ru.get(ne)||nu,ge):Ct},ge.x=function(ne){return arguments.length?(Wt=ne,ge):Wt},ge.y=function(ne){return arguments.length?(Jt=ne,ge):Jt},ge.out=function(ne){return arguments.length?(qt=ne,ge):qt},ge};function Js(st){return st.x}function tu(st){return st.y}function eu(st,bt,Ct){st.y0=bt,st.y=Ct}var Qs=i.map({"inside-out":function(st){var bt=st.length,Ct,qt,Wt=st.map(Qi),Jt=st.map(ku),ge=i.range(bt).sort(function(vr,Ar){return Wt[vr]-Wt[Ar]}),ne=0,Ie=0,Ge=[],Ye=[];for(Ct=0;Ct<bt;++Ct)qt=ge[Ct],ne<Ie?(ne+=Jt[qt],Ge.push(qt)):(Ie+=Jt[qt],Ye.push(qt));return Ye.reverse().concat(Ge)},reverse:function(st){return i.range(st.length).reverse()},default:wl}),ru=i.map({silhouette:function(st){var bt=st.length,Ct=st[0].length,qt=[],Wt=0,Jt,ge,ne,Ie=[];for(ge=0;ge<Ct;++ge){for(Jt=0,ne=0;Jt<bt;Jt++)ne+=st[Jt][ge][1];ne>Wt&&(Wt=ne),qt.push(ne)}for(ge=0;ge<Ct;++ge)Ie[ge]=(Wt-qt[ge])/2;return Ie},wiggle:function(st){var bt=st.length,Ct=st[0],qt=Ct.length,Wt,Jt,ge,ne,Ie,Ge,Ye,vr,Ar,jr=[];for(jr[0]=vr=Ar=0,Jt=1;Jt<qt;++Jt){for(Wt=0,ne=0;Wt<bt;++Wt)ne+=st[Wt][Jt][1];for(Wt=0,Ie=0,Ye=Ct[Jt][0]-Ct[Jt-1][0];Wt<bt;++Wt){for(ge=0,Ge=(st[Wt][Jt][1]-st[Wt][Jt-1][1])/(2*Ye);ge<Wt;++ge)Ge+=(st[ge][Jt][1]-st[ge][Jt-1][1])/Ye;Ie+=Ge*st[Wt][Jt][1]}jr[Jt]=vr-=ne?Ie/ne*Ye:0,vr<Ar&&(Ar=vr)}for(Jt=0;Jt<qt;++Jt)jr[Jt]-=Ar;return jr},expand:function(st){var bt=st.length,Ct=st[0].length,qt=1/bt,Wt,Jt,ge,ne=[];for(Jt=0;Jt<Ct;++Jt){for(Wt=0,ge=0;Wt<bt;Wt++)ge+=st[Wt][Jt][1];if(ge)for(Wt=0;Wt<bt;Wt++)st[Wt][Jt][1]/=ge;else for(Wt=0;Wt<bt;Wt++)st[Wt][Jt][1]=qt}for(Jt=0;Jt<Ct;++Jt)ne[Jt]=0;return ne},zero:nu});function wl(st){return i.range(st.length)}function nu(st){for(var bt=-1,Ct=st[0].length,qt=[];++bt<Ct;)qt[bt]=0;return qt}function Qi(st){for(var bt=1,Ct=0,qt=st[0][1],Wt,Jt=st.length;bt<Jt;++bt)(Wt=st[bt][1])>qt&&(Ct=bt,qt=Wt);return Ct}function ku(st){return st.reduce(Ao,0)}function Ao(st,bt){return st+bt[1]}i.layout.histogram=function(){var st=!0,bt=Number,Ct=iu,qt=Ns;function Wt(Jt,ge){for(var ne=[],Ie=Jt.map(bt,this),Ge=Ct.call(this,Ie,ge),Ye=qt.call(this,Ge,Ie,ge),vr,ge=-1,Ar=Ie.length,jr=Ye.length-1,Gr=st?1:1/Ar,Tr;++ge<jr;)vr=ne[ge]=[],vr.dx=Ye[ge+1]-(vr.x=Ye[ge]),vr.y=0;if(jr>0)for(ge=-1;++ge<Ar;)Tr=Ie[ge],Tr>=Ge[0]&&Tr<=Ge[1]&&(vr=ne[i.bisect(Ye,Tr,1,jr)-1],vr.y+=Gr,vr.push(Jt[ge]));return ne}return Wt.value=function(Jt){return arguments.length?(bt=Jt,Wt):bt},Wt.range=function(Jt){return arguments.length?(Ct=Zr(Jt),Wt):Ct},Wt.bins=function(Jt){return arguments.length?(qt=typeof Jt=="number"?function(ge){return bs(ge,Jt)}:Zr(Jt),Wt):qt},Wt.frequency=function(Jt){return arguments.length?(st=!!Jt,Wt):st},Wt};function Ns(st,bt){return bs(st,Math.ceil(Math.log(bt.length)/Math.LN2+1))}function bs(st,bt){for(var Ct=-1,qt=+st[0],Wt=(st[1]-qt)/bt,Jt=[];++Ct<=bt;)Jt[Ct]=Wt*Ct+qt;return Jt}function iu(st){return[i.min(st),i.max(st)]}i.layout.pack=function(){var st=i.layout.hierarchy().sort(_a),bt=0,Ct=[1,1],qt;function Wt(Jt,ge){var ne=st.call(this,Jt,ge),Ie=ne[0],Ge=Ct[0],Ye=Ct[1],vr=qt==null?Math.sqrt:typeof qt=="function"?qt:function(){return qt};if(Ie.x=Ie.y=0,Ca(Ie,function(jr){jr.r=+vr(jr.value)}),Ca(Ie,Ko),bt){var Ar=bt*(qt?1:Math.max(2*Ie.r/Ge,2*Ie.r/Ye))/2;Ca(Ie,function(jr){jr.r+=Ar}),Ca(Ie,Ko),Ca(Ie,function(jr){jr.r-=Ar})}return ls(Ie,Ge/2,Ye/2,qt?1:1/Math.max(2*Ie.r/Ge,2*Ie.r/Ye)),ne}return Wt.size=function(Jt){return arguments.length?(Ct=Jt,Wt):Ct},Wt.radius=function(Jt){return arguments.length?(qt=Jt==null||typeof Jt=="function"?Jt:+Jt,Wt):qt},Wt.padding=function(Jt){return arguments.length?(bt=+Jt,Wt):bt},Rs(Wt,st)};function _a(st,bt){return st.value-bt.value}function $s(st,bt){var Ct=st._pack_next;st._pack_next=bt,bt._pack_prev=st,bt._pack_next=Ct,Ct._pack_prev=bt}function $a(st,bt){st._pack_next=bt,bt._pack_prev=st}function Xo(st,bt){var Ct=bt.x-st.x,qt=bt.y-st.y,Wt=st.r+bt.r;return .999*Wt*Wt>Ct*Ct+qt*qt}function Ko(st){if(!(bt=st.children)||!(Ar=bt.length))return;var bt,Ct=1/0,qt=-1/0,Wt=1/0,Jt=-1/0,ge,ne,Ie,Ge,Ye,vr,Ar;function jr(Nr){Ct=Math.min(Nr.x-Nr.r,Ct),qt=Math.max(Nr.x+Nr.r,qt),Wt=Math.min(Nr.y-Nr.r,Wt),Jt=Math.max(Nr.y+Nr.r,Jt)}if(bt.forEach(os),ge=bt[0],ge.x=-ge.r,ge.y=0,jr(ge),Ar>1&&(ne=bt[1],ne.x=ne.r,ne.y=0,jr(ne),Ar>2))for(Ie=bt[2],To(ge,ne,Ie),jr(Ie),$s(ge,Ie),ge._pack_prev=Ie,$s(Ie,ne),ne=ge._pack_next,Ge=3;Ge<Ar;Ge++){To(ge,ne,Ie=bt[Ge]);var Gr=0,Tr=1,Dr=1;for(Ye=ne._pack_next;Ye!==ne;Ye=Ye._pack_next,Tr++)if(Xo(Ye,Ie)){Gr=1;break}if(Gr==1)for(vr=ge._pack_prev;vr!==Ye._pack_prev&&!Xo(vr,Ie);vr=vr._pack_prev,Dr++);Gr?(Tr<Dr||Tr==Dr&&ne.r<ge.r?$a(ge,ne=Ye):$a(ge=vr,ne),Ge--):($s(ge,Ie),ne=Ie,jr(Ie))}var Ur=(Ct+qt)/2,Wr=(Wt+Jt)/2,tn=0;for(Ge=0;Ge<Ar;Ge++)Ie=bt[Ge],Ie.x-=Ur,Ie.y-=Wr,tn=Math.max(tn,Ie.r+Math.sqrt(Ie.x*Ie.x+Ie.y*Ie.y));st.r=tn,bt.forEach(ss)}function os(st){st._pack_next=st._pack_prev=st}function ss(st){delete st._pack_next,delete st._pack_prev}function ls(st,bt,Ct,qt){var Wt=st.children;if(st.x=bt+=qt*st.x,st.y=Ct+=qt*st.y,st.r*=qt,Wt)for(var Jt=-1,ge=Wt.length;++Jt<ge;)ls(Wt[Jt],bt,Ct,qt)}function To(st,bt,Ct){var qt=st.r+Ct.r,Wt=bt.x-st.x,Jt=bt.y-st.y;if(qt&&(Wt||Jt)){var ge=bt.r+Ct.r,ne=Wt*Wt+Jt*Jt;ge*=ge,qt*=qt;var Ie=.5+(qt-ge)/(2*ne),Ge=Math.sqrt(Math.max(0,2*ge*(qt+ne)-(qt-=ne)*qt-ge*ge))/(2*ne);Ct.x=st.x+Ie*Wt+Ge*Jt,Ct.y=st.y+Ie*Jt-Ge*Wt}else Ct.x=st.x+qt,Ct.y=st.y}i.layout.tree=function(){var st=i.layout.hierarchy().sort(null).value(null),bt=Fo,Ct=[1,1],qt=null;function Wt(Ye,vr){var Ar=st.call(this,Ye,vr),jr=Ar[0],Gr=Jt(jr);if(Ca(Gr,ge),Gr.parent.m=-Gr.z,Bs(Gr,ne),qt)Bs(jr,Ge);else{var Tr=jr,Dr=jr,Ur=jr;Bs(jr,function(Pn){Pn.x<Tr.x&&(Tr=Pn),Pn.x>Dr.x&&(Dr=Pn),Pn.depth>Ur.depth&&(Ur=Pn)});var Wr=bt(Tr,Dr)/2-Tr.x,tn=Ct[0]/(Dr.x+bt(Dr,Tr)/2+Wr),Nr=Ct[1]/(Ur.depth||1);Bs(jr,function(Pn){Pn.x=(Pn.x+Wr)*tn,Pn.y=Pn.depth*Nr})}return Ar}function Jt(Ye){for(var vr={A:null,children:[Ye]},Ar=[vr],jr;(jr=Ar.pop())!=null;)for(var Gr=jr.children,Tr,Dr=0,Ur=Gr.length;Dr<Ur;++Dr)Ar.push((Gr[Dr]=Tr={_:Gr[Dr],parent:jr,children:(Tr=Gr[Dr].children)&&Tr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Dr}).a=Tr);return vr.children[0]}function ge(Ye){var vr=Ye.children,Ar=Ye.parent.children,jr=Ye.i?Ar[Ye.i-1]:null;if(vr.length){cc(Ye);var Gr=(vr[0].z+vr[vr.length-1].z)/2;jr?(Ye.z=jr.z+bt(Ye._,jr._),Ye.m=Ye.z-Gr):Ye.z=Gr}else jr&&(Ye.z=jr.z+bt(Ye._,jr._));Ye.parent.A=Ie(Ye,jr,Ye.parent.A||Ar[0])}function ne(Ye){Ye._.x=Ye.z+Ye.parent.m,Ye.m+=Ye.parent.m}function Ie(Ye,vr,Ar){if(vr){for(var jr=Ye,Gr=Ye,Tr=vr,Dr=jr.parent.children[0],Ur=jr.m,Wr=Gr.m,tn=Tr.m,Nr=Dr.m,Pn;Tr=el(Tr),jr=tl(jr),Tr&&jr;)Dr=tl(Dr),Gr=el(Gr),Gr.a=Ye,Pn=Tr.z+tn-jr.z-Ur+bt(Tr._,jr._),Pn>0&&(Al(fc(Tr,Ye,Ar),Ye,Pn),Ur+=Pn,Wr+=Pn),tn+=Tr.m,Ur+=jr.m,Nr+=Dr.m,Wr+=Gr.m;Tr&&!el(Gr)&&(Gr.t=Tr,Gr.m+=tn-Wr),jr&&!tl(Dr)&&(Dr.t=jr,Dr.m+=Ur-Nr,Ar=Ye)}return Ar}function Ge(Ye){Ye.x*=Ct[0],Ye.y=Ye.depth*Ct[1]}return Wt.separation=function(Ye){return arguments.length?(bt=Ye,Wt):bt},Wt.size=function(Ye){return arguments.length?(qt=(Ct=Ye)==null?Ge:null,Wt):qt?null:Ct},Wt.nodeSize=function(Ye){return arguments.length?(qt=(Ct=Ye)==null?null:Ge,Wt):qt?Ct:null},Rs(Wt,st)};function Fo(st,bt){return st.parent==bt.parent?1:2}function tl(st){var bt=st.children;return bt.length?bt[0]:st.t}function el(st){var bt=st.children,Ct;return(Ct=bt.length)?bt[Ct-1]:st.t}function Al(st,bt,Ct){var qt=Ct/(bt.i-st.i);bt.c-=qt,bt.s+=Ct,st.c+=qt,bt.z+=Ct,bt.m+=Ct}function cc(st){for(var bt=0,Ct=0,qt=st.children,Wt=qt.length,Jt;--Wt>=0;)Jt=qt[Wt],Jt.z+=bt,Jt.m+=bt,bt+=Jt.s+(Ct+=Jt.c)}function fc(st,bt,Ct){return st.a.parent===bt.parent?st.a:Ct}i.layout.cluster=function(){var st=i.layout.hierarchy().sort(null).value(null),bt=Fo,Ct=[1,1],qt=!1;function Wt(Jt,ge){var ne=st.call(this,Jt,ge),Ie=ne[0],Ge,Ye=0;Ca(Ie,function(Tr){var Dr=Tr.children;Dr&&Dr.length?(Tr.x=pc(Dr),Tr.y=hc(Dr)):(Tr.x=Ge?Ye+=bt(Tr,Ge):0,Tr.y=0,Ge=Tr)});var vr=Tl(Ie),Ar=Mu(Ie),jr=vr.x-bt(vr,Ar)/2,Gr=Ar.x+bt(Ar,vr)/2;return Ca(Ie,qt?function(Tr){Tr.x=(Tr.x-Ie.x)*Ct[0],Tr.y=(Ie.y-Tr.y)*Ct[1]}:function(Tr){Tr.x=(Tr.x-jr)/(Gr-jr)*Ct[0],Tr.y=(1-(Ie.y?Tr.y/Ie.y:1))*Ct[1]}),ne}return Wt.separation=function(Jt){return arguments.length?(bt=Jt,Wt):bt},Wt.size=function(Jt){return arguments.length?(qt=(Ct=Jt)==null,Wt):qt?null:Ct},Wt.nodeSize=function(Jt){return arguments.length?(qt=(Ct=Jt)!=null,Wt):qt?Ct:null},Rs(Wt,st)};function hc(st){return 1+i.max(st,function(bt){return bt.y})}function pc(st){return st.reduce(function(bt,Ct){return bt+Ct.x},0)/st.length}function Tl(st){var bt=st.children;return bt&&bt.length?Tl(bt[0]):st}function Mu(st){var bt=st.children,Ct;return bt&&(Ct=bt.length)?Mu(bt[Ct-1]):st}i.layout.treemap=function(){var st=i.layout.hierarchy(),bt=Math.round,Ct=[1,1],qt=null,Wt=js,Jt=!1,ge,ne="squarify",Ie=.5*(1+Math.sqrt(5));function Ge(Tr,Dr){for(var Ur=-1,Wr=Tr.length,tn,Nr;++Ur<Wr;)Nr=(tn=Tr[Ur]).value*(Dr<0?0:Dr),tn.area=isNaN(Nr)||Nr<=0?0:Nr}function Ye(Tr){var Dr=Tr.children;if(Dr&&Dr.length){var Ur=Wt(Tr),Wr=[],tn=Dr.slice(),Nr,Pn=1/0,Dn,Zn=ne==="slice"?Ur.dx:ne==="dice"?Ur.dy:ne==="slice-dice"?Tr.depth&1?Ur.dy:Ur.dx:Math.min(Ur.dx,Ur.dy),Yn;for(Ge(tn,Ur.dx*Ur.dy/Tr.value),Wr.area=0;(Yn=tn.length)>0;)Wr.push(Nr=tn[Yn-1]),Wr.area+=Nr.area,ne!=="squarify"||(Dn=Ar(Wr,Zn))<=Pn?(tn.pop(),Pn=Dn):(Wr.area-=Wr.pop().area,jr(Wr,Zn,Ur,!1),Zn=Math.min(Ur.dx,Ur.dy),Wr.length=Wr.area=0,Pn=1/0);Wr.length&&(jr(Wr,Zn,Ur,!0),Wr.length=Wr.area=0),Dr.forEach(Ye)}}function vr(Tr){var Dr=Tr.children;if(Dr&&Dr.length){var Ur=Wt(Tr),Wr=Dr.slice(),tn,Nr=[];for(Ge(Wr,Ur.dx*Ur.dy/Tr.value),Nr.area=0;tn=Wr.pop();)Nr.push(tn),Nr.area+=tn.area,tn.z!=null&&(jr(Nr,tn.z?Ur.dx:Ur.dy,Ur,!Wr.length),Nr.length=Nr.area=0);Dr.forEach(vr)}}function Ar(Tr,Dr){for(var Ur=Tr.area,Wr,tn=0,Nr=1/0,Pn=-1,Dn=Tr.length;++Pn<Dn;)(Wr=Tr[Pn].area)&&(Wr<Nr&&(Nr=Wr),Wr>tn&&(tn=Wr));return Ur*=Ur,Dr*=Dr,Ur?Math.max(Dr*tn*Ie/Ur,Ur/(Dr*Nr*Ie)):1/0}function jr(Tr,Dr,Ur,Wr){var tn=-1,Nr=Tr.length,Pn=Ur.x,Dn=Ur.y,Zn=Dr?bt(Tr.area/Dr):0,Yn;if(Dr==Ur.dx){for((Wr||Zn>Ur.dy)&&(Zn=Ur.dy);++tn<Nr;)Yn=Tr[tn],Yn.x=Pn,Yn.y=Dn,Yn.dy=Zn,Pn+=Yn.dx=Math.min(Ur.x+Ur.dx-Pn,Zn?bt(Yn.area/Zn):0);Yn.z=!0,Yn.dx+=Ur.x+Ur.dx-Pn,Ur.y+=Zn,Ur.dy-=Zn}else{for((Wr||Zn>Ur.dx)&&(Zn=Ur.dx);++tn<Nr;)Yn=Tr[tn],Yn.x=Pn,Yn.y=Dn,Yn.dx=Zn,Dn+=Yn.dy=Math.min(Ur.y+Ur.dy-Dn,Zn?bt(Yn.area/Zn):0);Yn.z=!1,Yn.dy+=Ur.y+Ur.dy-Dn,Ur.x+=Zn,Ur.dx-=Zn}}function Gr(Tr){var Dr=ge||st(Tr),Ur=Dr[0];return Ur.x=Ur.y=0,Ur.value?(Ur.dx=Ct[0],Ur.dy=Ct[1]):Ur.dx=Ur.dy=0,ge&&st.revalue(Ur),Ge([Ur],Ur.dx*Ur.dy/Ur.value),(ge?vr:Ye)(Ur),Jt&&(ge=Dr),Dr}return Gr.size=function(Tr){return arguments.length?(Ct=Tr,Gr):Ct},Gr.padding=function(Tr){if(!arguments.length)return qt;function Dr(tn){var Nr=Tr.call(Gr,tn,tn.depth);return Nr==null?js(tn):Da(tn,typeof Nr=="number"?[Nr,Nr,Nr,Nr]:Nr)}function Ur(tn){return Da(tn,Tr)}var Wr;return Wt=(qt=Tr)==null?js:(Wr=typeof Tr)=="function"?Dr:(Wr==="number"&&(Tr=[Tr,Tr,Tr,Tr]),Ur),Gr},Gr.round=function(Tr){return arguments.length?(bt=Tr?Math.round:Number,Gr):bt!=Number},Gr.sticky=function(Tr){return arguments.length?(Jt=Tr,ge=null,Gr):Jt},Gr.ratio=function(Tr){return arguments.length?(Ie=Tr,Gr):Ie},Gr.mode=function(Tr){return arguments.length?(ne=Tr+"",Gr):ne},Rs(Gr,st)};function js(st){return{x:st.x,y:st.y,dx:st.dx,dy:st.dy}}function Da(st,bt){var Ct=st.x+bt[3],qt=st.y+bt[0],Wt=st.dx-bt[1]-bt[3],Jt=st.dy-bt[0]-bt[2];return Wt<0&&(Ct+=Wt/2,Wt=0),Jt<0&&(qt+=Jt/2,Jt=0),{x:Ct,y:qt,dx:Wt,dy:Jt}}i.random={normal:function(st,bt){var Ct=arguments.length;return Ct<2&&(bt=1),Ct<1&&(st=0),function(){var qt,Wt,Jt;do qt=Math.random()*2-1,Wt=Math.random()*2-1,Jt=qt*qt+Wt*Wt;while(!Jt||Jt>1);return st+bt*qt*Math.sqrt(-2*Math.log(Jt)/Jt)}},logNormal:function(){var st=i.random.normal.apply(i,arguments);return function(){return Math.exp(st())}},bates:function(st){var bt=i.random.irwinHall(st);return function(){return bt()/st}},irwinHall:function(st){return function(){for(var bt=0,Ct=0;Ct<st;Ct++)bt+=Math.random();return bt}}},i.scale={};function to(st){var bt=st[0],Ct=st[st.length-1];return bt<Ct?[bt,Ct]:[Ct,bt]}function rl(st){return st.rangeExtent?st.rangeExtent():to(st.range())}function _s(st,bt,Ct,qt){var Wt=Ct(st[0],st[1]),Jt=qt(bt[0],bt[1]);return function(ge){return Jt(Wt(ge))}}function nl(st,bt){var Ct=0,qt=st.length-1,Wt=st[Ct],Jt=st[qt],ge;return Jt<Wt&&(ge=Ct,Ct=qt,qt=ge,ge=Wt,Wt=Jt,Jt=ge),st[Ct]=bt.floor(Wt),st[qt]=bt.ceil(Jt),st}function kl(st){return st?{floor:function(bt){return Math.floor(bt/st)*st},ceil:function(bt){return Math.ceil(bt/st)*st}}:dc}var dc={floor:R,ceil:R};function Su(st,bt,Ct,qt){var Wt=[],Jt=[],ge=0,ne=Math.min(st.length,bt.length)-1;for(st[ne]<st[0]&&(st=st.slice().reverse(),bt=bt.slice().reverse());++ge<=ne;)Wt.push(Ct(st[ge-1],st[ge])),Jt.push(qt(bt[ge-1],bt[ge]));return function(Ie){var Ge=i.bisect(st,Ie,1,ne)-1;return Jt[Ge](Wt[Ge](Ie))}}i.scale.linear=function(){return Lu([0,1],[0,1],Ho,!1)};function Lu(st,bt,Ct,qt){var Wt,Jt;function ge(){var Ie=Math.min(st.length,bt.length)>2?Su:_s,Ge=qt?zs:Ks;return Wt=Ie(st,bt,Ge,Ct),Jt=Ie(bt,st,Ge,Ho),ne}function ne(Ie){return Wt(Ie)}return ne.invert=function(Ie){return Jt(Ie)},ne.domain=function(Ie){return arguments.length?(st=Ie.map(Number),ge()):st},ne.range=function(Ie){return arguments.length?(bt=Ie,ge()):bt},ne.rangeRound=function(Ie){return ne.range(Ie).interpolate(Xl)},ne.clamp=function(Ie){return arguments.length?(qt=Ie,ge()):qt},ne.interpolate=function(Ie){return arguments.length?(Ct=Ie,ge()):Ct},ne.ticks=function(Ie){return Ro(st,Ie)},ne.tickFormat=function(Ie,Ge){return d3_scale_linearTickFormat(st,Ie,Ge)},ne.nice=function(Ie){return us(st,Ie),ge()},ne.copy=function(){return Lu(st,bt,Ct,qt)},ge()}function au(st,bt){return i.rebind(st,bt,"range","rangeRound","interpolate","clamp")}function us(st,bt){return nl(st,kl(wa(st,bt)[2])),nl(st,kl(wa(st,bt)[2])),st}function wa(st,bt){bt==null&&(bt=10);var Ct=to(st),qt=Ct[1]-Ct[0],Wt=Math.pow(10,Math.floor(Math.log(qt/bt)/Math.LN10)),Jt=bt/qt*Wt;return Jt<=.15?Wt*=10:Jt<=.35?Wt*=5:Jt<=.75&&(Wt*=2),Ct[0]=Math.ceil(Ct[0]/Wt)*Wt,Ct[1]=Math.floor(Ct[1]/Wt)*Wt+Wt*.5,Ct[2]=Wt,Ct}function Ro(st,bt){return i.range.apply(i,wa(st,bt))}i.scale.log=function(){return ou(i.scale.linear().domain([0,1]),10,!0,[1,10])};function ou(st,bt,Ct,qt){function Wt(ne){return(Ct?Math.log(ne<0?0:ne):-Math.log(ne>0?0:-ne))/Math.log(bt)}function Jt(ne){return Ct?Math.pow(bt,ne):-Math.pow(bt,-ne)}function ge(ne){return st(Wt(ne))}return ge.invert=function(ne){return Jt(st.invert(ne))},ge.domain=function(ne){return arguments.length?(Ct=ne[0]>=0,st.domain((qt=ne.map(Number)).map(Wt)),ge):qt},ge.base=function(ne){return arguments.length?(bt=+ne,st.domain(qt.map(Wt)),ge):bt},ge.nice=function(){var ne=nl(qt.map(Wt),Ct?Math:Pu);return st.domain(ne),qt=ne.map(Jt),ge},ge.ticks=function(){var ne=to(qt),Ie=[],Ge=ne[0],Ye=ne[1],vr=Math.floor(Wt(Ge)),Ar=Math.ceil(Wt(Ye)),jr=bt%1?2:bt;if(isFinite(Ar-vr)){if(Ct){for(;vr<Ar;vr++)for(var Gr=1;Gr<jr;Gr++)Ie.push(Jt(vr)*Gr);Ie.push(Jt(vr))}else for(Ie.push(Jt(vr));vr++<Ar;)for(var Gr=jr-1;Gr>0;Gr--)Ie.push(Jt(vr)*Gr);for(vr=0;Ie[vr]<Ge;vr++);for(Ar=Ie.length;Ie[Ar-1]>Ye;Ar--);Ie=Ie.slice(vr,Ar)}return Ie},ge.copy=function(){return ou(st.copy(),bt,Ct,qt)},au(ge,st)}var Pu={floor:function(st){return-Math.ceil(-st)},ceil:function(st){return-Math.floor(-st)}};i.scale.pow=function(){return ws(i.scale.linear(),1,[0,1])};function ws(st,bt,Ct){var qt=Ml(bt),Wt=Ml(1/bt);function Jt(ge){return st(qt(ge))}return Jt.invert=function(ge){return Wt(st.invert(ge))},Jt.domain=function(ge){return arguments.length?(st.domain((Ct=ge.map(Number)).map(qt)),Jt):Ct},Jt.ticks=function(ge){return Ro(Ct,ge)},Jt.tickFormat=function(ge,ne){return d3_scale_linearTickFormat(Ct,ge,ne)},Jt.nice=function(ge){return Jt.domain(us(Ct,ge))},Jt.exponent=function(ge){return arguments.length?(qt=Ml(bt=ge),Wt=Ml(1/bt),st.domain(Ct.map(qt)),Jt):bt},Jt.copy=function(){return ws(st.copy(),bt,Ct)},au(Jt,st)}function Ml(st){return function(bt){return bt<0?-Math.pow(-bt,st):Math.pow(bt,st)}}i.scale.sqrt=function(){return i.scale.pow().exponent(.5)},i.scale.ordinal=function(){return ko([],{t:"range",a:[[]]})};function ko(st,bt){var Ct,qt,Wt;function Jt(ne){return qt[((Ct.get(ne)||(bt.t==="range"?Ct.set(ne,st.push(ne)):NaN))-1)%qt.length]}function ge(ne,Ie){return i.range(st.length).map(function(Ge){return ne+Ie*Ge})}return Jt.domain=function(ne){if(!arguments.length)return st;st=[],Ct=new _;for(var Ie=-1,Ge=ne.length,Ye;++Ie<Ge;)Ct.has(Ye=ne[Ie])||Ct.set(Ye,st.push(Ye));return Jt[bt.t].apply(Jt,bt.a)},Jt.range=function(ne){return arguments.length?(qt=ne,Wt=0,bt={t:"range",a:arguments},Jt):qt},Jt.rangePoints=function(ne,Ie){arguments.length<2&&(Ie=0);var Ge=ne[0],Ye=ne[1],vr=st.length<2?(Ge=(Ge+Ye)/2,0):(Ye-Ge)/(st.length-1+Ie);return qt=ge(Ge+vr*Ie/2,vr),Wt=0,bt={t:"rangePoints",a:arguments},Jt},Jt.rangeRoundPoints=function(ne,Ie){arguments.length<2&&(Ie=0);var Ge=ne[0],Ye=ne[1],vr=st.length<2?(Ge=Ye=Math.round((Ge+Ye)/2),0):(Ye-Ge)/(st.length-1+Ie)|0;return qt=ge(Ge+Math.round(vr*Ie/2+(Ye-Ge-(st.length-1+Ie)*vr)/2),vr),Wt=0,bt={t:"rangeRoundPoints",a:arguments},Jt},Jt.rangeBands=function(ne,Ie,Ge){arguments.length<2&&(Ie=0),arguments.length<3&&(Ge=Ie);var Ye=ne[1]<ne[0],vr=ne[Ye-0],Ar=ne[1-Ye],jr=(Ar-vr)/(st.length-Ie+2*Ge);return qt=ge(vr+jr*Ge,jr),Ye&&qt.reverse(),Wt=jr*(1-Ie),bt={t:"rangeBands",a:arguments},Jt},Jt.rangeRoundBands=function(ne,Ie,Ge){arguments.length<2&&(Ie=0),arguments.length<3&&(Ge=Ie);var Ye=ne[1]<ne[0],vr=ne[Ye-0],Ar=ne[1-Ye],jr=Math.floor((Ar-vr)/(st.length-Ie+2*Ge));return qt=ge(vr+Math.round((Ar-vr-(st.length-Ie)*jr)/2),jr),Ye&&qt.reverse(),Wt=Math.round(jr*(1-Ie)),bt={t:"rangeRoundBands",a:arguments},Jt},Jt.rangeBand=function(){return Wt},Jt.rangeExtent=function(){return to(bt.a[0])},Jt.copy=function(){return ko(st,bt)},Jt.domain(st)}i.scale.category10=function(){return i.scale.ordinal().range(Sl)},i.scale.category20=function(){return i.scale.ordinal().range(Jo)},i.scale.category20b=function(){return i.scale.ordinal().range(Qo)},i.scale.category20c=function(){return i.scale.ordinal().range(su)};var Sl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Oe),Jo=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Oe),Qo=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Oe),su=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Oe);i.scale.quantile=function(){return Us([],[])};function Us(st,bt){var Ct;function qt(){var Jt=0,ge=bt.length;for(Ct=[];++Jt<ge;)Ct[Jt-1]=i.quantile(st,Jt/ge);return Wt}function Wt(Jt){if(!isNaN(Jt=+Jt))return bt[i.bisect(Ct,Jt)]}return Wt.domain=function(Jt){return arguments.length?(st=Jt.map(y).filter(p).sort(h),qt()):st},Wt.range=function(Jt){return arguments.length?(bt=Jt,qt()):bt},Wt.quantiles=function(){return Ct},Wt.invertExtent=function(Jt){return Jt=bt.indexOf(Jt),Jt<0?[NaN,NaN]:[Jt>0?Ct[Jt-1]:st[0],Jt<Ct.length?Ct[Jt]:st[st.length-1]]},Wt.copy=function(){return Us(st,bt)},qt()}i.scale.quantize=function(){return Yi(0,1,[0,1])};function Yi(st,bt,Ct){var qt,Wt;function Jt(ne){return Ct[Math.max(0,Math.min(Wt,Math.floor(qt*(ne-st))))]}function ge(){return qt=Ct.length/(bt-st),Wt=Ct.length-1,Jt}return Jt.domain=function(ne){return arguments.length?(st=+ne[0],bt=+ne[ne.length-1],ge()):[st,bt]},Jt.range=function(ne){return arguments.length?(Ct=ne,ge()):Ct},Jt.invertExtent=function(ne){return ne=Ct.indexOf(ne),ne=ne<0?NaN:ne/qt+st,[ne,ne+1/qt]},Jt.copy=function(){return Yi(st,bt,Ct)},ge()}i.scale.threshold=function(){return As([.5],[0,1])};function As(st,bt){function Ct(qt){if(qt<=qt)return bt[i.bisect(st,qt)]}return Ct.domain=function(qt){return arguments.length?(st=qt,Ct):st},Ct.range=function(qt){return arguments.length?(bt=qt,Ct):bt},Ct.invertExtent=function(qt){return qt=bt.indexOf(qt),[st[qt-1],st[qt]]},Ct.copy=function(){return As(st,bt)},Ct}i.scale.identity=function(){return Ll([0,1])};function Ll(st){function bt(Ct){return+Ct}return bt.invert=bt,bt.domain=bt.range=function(Ct){return arguments.length?(st=Ct.map(bt),bt):st},bt.ticks=function(Ct){return Ro(st,Ct)},bt.tickFormat=function(Ct,qt){return d3_scale_linearTickFormat(st,Ct,qt)},bt.copy=function(){return Ll(st)},bt}i.svg={};function Pl(){return 0}i.svg.arc=function(){var st=vc,bt=lu,Ct=Pl,qt=cs,Wt=Zs,Jt=uu,ge=Eu;function ne(){var Ge=Math.max(0,+st.apply(this,arguments)),Ye=Math.max(0,+bt.apply(this,arguments)),vr=Wt.apply(this,arguments)-$t,Ar=Jt.apply(this,arguments)-$t,jr=Math.abs(Ar-vr),Gr=vr>Ar?0:1;if(Ye<Ge&&(Tr=Ye,Ye=Ge,Ge=Tr),jr>=Xt)return Ie(Ye,Gr)+(Ge?Ie(Ge,1-Gr):"")+"Z";var Tr,Dr,Ur,Wr,tn=0,Nr=0,Pn,Dn,Zn,Yn,li,si,Ei,di,Li=[];if((Wr=(+ge.apply(this,arguments)||0)/2)&&(Ur=qt===cs?Math.sqrt(Ge*Ge+Ye*Ye):+qt.apply(this,arguments),Gr||(Nr*=-1),Ye&&(Nr=De(Ur/Ye*Math.sin(Wr))),Ge&&(tn=De(Ur/Ge*Math.sin(Wr)))),Ye){Pn=Ye*Math.cos(vr+Nr),Dn=Ye*Math.sin(vr+Nr),Zn=Ye*Math.cos(Ar-Nr),Yn=Ye*Math.sin(Ar-Nr);var Zi=Math.abs(Ar-vr-2*Nr)<=St?0:1;if(Nr&&$o(Pn,Dn,Zn,Yn)===Gr^Zi){var Gi=(vr+Ar)/2;Pn=Ye*Math.cos(Gi),Dn=Ye*Math.sin(Gi),Zn=Yn=null}}else Pn=Dn=0;if(Ge){li=Ge*Math.cos(Ar-tn),si=Ge*Math.sin(Ar-tn),Ei=Ge*Math.cos(vr+tn),di=Ge*Math.sin(vr+tn);var Xi=Math.abs(vr-Ar+2*tn)<=St?0:1;if(tn&&$o(li,si,Ei,di)===1-Gr^Xi){var In=(vr+Ar)/2;li=Ge*Math.cos(In),si=Ge*Math.sin(In),Ei=di=null}}else li=si=0;if(jr>ut&&(Tr=Math.min(Math.abs(Ye-Ge)/2,+Ct.apply(this,arguments)))>.001){Dr=Ge<Ye^Gr?0:1;var Pi=Tr,Si=Tr;if(jr<St){var zi=Ei==null?[li,si]:Zn==null?[Pn,Dn]:ln([Pn,Dn],[Ei,di],[Zn,Yn],[li,si]),ua=Pn-zi[0],ba=Dn-zi[1],Ta=Zn-zi[0],aa=Yn-zi[1],Ki=1/Math.sin(Math.acos((ua*Ta+ba*aa)/(Math.sqrt(ua*ua+ba*ba)*Math.sqrt(Ta*Ta+aa*aa)))/2),oi=Math.sqrt(zi[0]*zi[0]+zi[1]*zi[1]);Si=Math.min(Tr,(Ge-oi)/(Ki-1)),Pi=Math.min(Tr,(Ye-oi)/(Ki+1))}if(Zn!=null){var pi=fs(Ei==null?[li,si]:[Ei,di],[Pn,Dn],Ye,Pi,Gr),oa=fs([Zn,Yn],[li,si],Ye,Pi,Gr);Tr===Pi?Li.push("M",pi[0],"A",Pi,",",Pi," 0 0,",Dr," ",pi[1],"A",Ye,",",Ye," 0 ",1-Gr^$o(pi[1][0],pi[1][1],oa[1][0],oa[1][1]),",",Gr," ",oa[1],"A",Pi,",",Pi," 0 0,",Dr," ",oa[0]):Li.push("M",pi[0],"A",Pi,",",Pi," 0 1,",Dr," ",oa[0])}else Li.push("M",Pn,",",Dn);if(Ei!=null){var Aa=fs([Pn,Dn],[Ei,di],Ge,-Si,Gr),so=fs([li,si],Zn==null?[Pn,Dn]:[Zn,Yn],Ge,-Si,Gr);Tr===Si?Li.push("L",so[0],"A",Si,",",Si," 0 0,",Dr," ",so[1],"A",Ge,",",Ge," 0 ",Gr^$o(so[1][0],so[1][1],Aa[1][0],Aa[1][1]),",",1-Gr," ",Aa[1],"A",Si,",",Si," 0 0,",Dr," ",Aa[0]):Li.push("L",so[0],"A",Si,",",Si," 0 0,",Dr," ",Aa[0])}else Li.push("L",li,",",si)}else Li.push("M",Pn,",",Dn),Zn!=null&&Li.push("A",Ye,",",Ye," 0 ",Zi,",",Gr," ",Zn,",",Yn),Li.push("L",li,",",si),Ei!=null&&Li.push("A",Ge,",",Ge," 0 ",Xi,",",1-Gr," ",Ei,",",di);return Li.push("Z"),Li.join("")}function Ie(Ge,Ye){return"M0,"+Ge+"A"+Ge+","+Ge+" 0 1,"+Ye+" 0,"+-Ge+"A"+Ge+","+Ge+" 0 1,"+Ye+" 0,"+Ge}return ne.innerRadius=function(Ge){return arguments.length?(st=Zr(Ge),ne):st},ne.outerRadius=function(Ge){return arguments.length?(bt=Zr(Ge),ne):bt},ne.cornerRadius=function(Ge){return arguments.length?(Ct=Zr(Ge),ne):Ct},ne.padRadius=function(Ge){return arguments.length?(qt=Ge==cs?cs:Zr(Ge),ne):qt},ne.startAngle=function(Ge){return arguments.length?(Wt=Zr(Ge),ne):Wt},ne.endAngle=function(Ge){return arguments.length?(Jt=Zr(Ge),ne):Jt},ne.padAngle=function(Ge){return arguments.length?(ge=Zr(Ge),ne):ge},ne.centroid=function(){var Ge=(+st.apply(this,arguments)+ +bt.apply(this,arguments))/2,Ye=(+Wt.apply(this,arguments)+ +Jt.apply(this,arguments))/2-$t;return[Math.cos(Ye)*Ge,Math.sin(Ye)*Ge]},ne};var cs="auto";function vc(st){return st.innerRadius}function lu(st){return st.outerRadius}function Zs(st){return st.startAngle}function uu(st){return st.endAngle}function Eu(st){return st&&st.padAngle}function $o(st,bt,Ct,qt){return(st-Ct)*bt-(bt-qt)*st>0?0:1}function fs(st,bt,Ct,qt,Wt){var Jt=st[0]-bt[0],ge=st[1]-bt[1],ne=(Wt?qt:-qt)/Math.sqrt(Jt*Jt+ge*ge),Ie=ne*ge,Ge=-ne*Jt,Ye=st[0]+Ie,vr=st[1]+Ge,Ar=bt[0]+Ie,jr=bt[1]+Ge,Gr=(Ye+Ar)/2,Tr=(vr+jr)/2,Dr=Ar-Ye,Ur=jr-vr,Wr=Dr*Dr+Ur*Ur,tn=Ct-qt,Nr=Ye*jr-Ar*vr,Pn=(Ur<0?-1:1)*Math.sqrt(Math.max(0,tn*tn*Wr-Nr*Nr)),Dn=(Nr*Ur-Dr*Pn)/Wr,Zn=(-Nr*Dr-Ur*Pn)/Wr,Yn=(Nr*Ur+Dr*Pn)/Wr,li=(-Nr*Dr+Ur*Pn)/Wr,si=Dn-Gr,Ei=Zn-Tr,di=Yn-Gr,Li=li-Tr;return si*si+Ei*Ei>di*di+Li*Li&&(Dn=Yn,Zn=li),[[Dn-Ie,Zn-Ge],[Dn*Ct/tn,Zn*Ct/tn]]}function Ts(){return!0}function ks(st){var bt=ei,Ct=Gn,qt=Ts,Wt=oo,Jt=Wt.key,ge=.7;function ne(Ie){var Ge=[],Ye=[],vr=-1,Ar=Ie.length,jr,Gr=Zr(bt),Tr=Zr(Ct);function Dr(){Ge.push("M",Wt(st(Ye),ge))}for(;++vr<Ar;)qt.call(this,jr=Ie[vr],vr)?Ye.push([+Gr.call(this,jr,vr),+Tr.call(this,jr,vr)]):Ye.length&&(Dr(),Ye=[]);return Ye.length&&Dr(),Ge.length?Ge.join(""):null}return ne.x=function(Ie){return arguments.length?(bt=Ie,ne):bt},ne.y=function(Ie){return arguments.length?(Ct=Ie,ne):Ct},ne.defined=function(Ie){return arguments.length?(qt=Ie,ne):qt},ne.interpolate=function(Ie){return arguments.length?(typeof Ie=="function"?Jt=Wt=Ie:Jt=(Wt=eo.get(Ie)||oo).key,ne):Jt},ne.tension=function(Ie){return arguments.length?(ge=Ie,ne):ge},ne}i.svg.line=function(){return ks(R)};var eo=i.map({linear:oo,"linear-closed":Ms,step:Cu,"step-before":qs,"step-after":El,basis:ts,"basis-open":gc,"basis-closed":fu,bundle:Cl,cardinal:cu,"cardinal-open":Ou,"cardinal-closed":Mo,monotone:hu});eo.forEach(function(st,bt){bt.key=st,bt.closed=/-closed$/.test(st)});function oo(st){return st.length>1?st.join("L"):st+"Z"}function Ms(st){return st.join("L")+"Z"}function Cu(st){for(var bt=0,Ct=st.length,qt=st[0],Wt=[qt[0],",",qt[1]];++bt<Ct;)Wt.push("H",(qt[0]+(qt=st[bt])[0])/2,"V",qt[1]);return Ct>1&&Wt.push("H",qt[0]),Wt.join("")}function qs(st){for(var bt=0,Ct=st.length,qt=st[0],Wt=[qt[0],",",qt[1]];++bt<Ct;)Wt.push("V",(qt=st[bt])[1],"H",qt[0]);return Wt.join("")}function El(st){for(var bt=0,Ct=st.length,qt=st[0],Wt=[qt[0],",",qt[1]];++bt<Ct;)Wt.push("H",(qt=st[bt])[0],"V",qt[1]);return Wt.join("")}function Ou(st,bt){return st.length<4?oo(st):st[1]+hs(st.slice(1,-1),il(st,bt))}function Mo(st,bt){return st.length<3?Ms(st):st[0]+hs((st.push(st[0]),st),il([st[st.length-2]].concat(st,[st[1]]),bt))}function cu(st,bt){return st.length<3?oo(st):st[0]+hs(st,il(st,bt))}function hs(st,bt){if(bt.length<1||st.length!=bt.length&&st.length!=bt.length+2)return oo(st);var Ct=st.length!=bt.length,qt="",Wt=st[0],Jt=st[1],ge=bt[0],ne=ge,Ie=1;if(Ct&&(qt+="Q"+(Jt[0]-ge[0]*2/3)+","+(Jt[1]-ge[1]*2/3)+","+Jt[0]+","+Jt[1],Wt=st[1],Ie=2),bt.length>1){ne=bt[1],Jt=st[Ie],Ie++,qt+="C"+(Wt[0]+ge[0])+","+(Wt[1]+ge[1])+","+(Jt[0]-ne[0])+","+(Jt[1]-ne[1])+","+Jt[0]+","+Jt[1];for(var Ge=2;Ge<bt.length;Ge++,Ie++)Jt=st[Ie],ne=bt[Ge],qt+="S"+(Jt[0]-ne[0])+","+(Jt[1]-ne[1])+","+Jt[0]+","+Jt[1]}if(Ct){var Ye=st[Ie];qt+="Q"+(Jt[0]+ne[0]*2/3)+","+(Jt[1]+ne[1]*2/3)+","+Ye[0]+","+Ye[1]}return qt}function il(st,bt){for(var Ct=[],qt=(1-bt)/2,Wt,Jt=st[0],ge=st[1],ne=1,Ie=st.length;++ne<Ie;)Wt=Jt,Jt=ge,ge=st[ne],Ct.push([qt*(ge[0]-Wt[0]),qt*(ge[1]-Wt[1])]);return Ct}function ts(st){if(st.length<3)return oo(st);var bt=1,Ct=st.length,qt=st[0],Wt=qt[0],Jt=qt[1],ge=[Wt,Wt,Wt,(qt=st[1])[0]],ne=[Jt,Jt,Jt,qt[1]],Ie=[Wt,",",Jt,"L",Va(Bo,ge),",",Va(Bo,ne)];for(st.push(st[Ct-1]);++bt<=Ct;)qt=st[bt],ge.shift(),ge.push(qt[0]),ne.shift(),ne.push(qt[1]),ol(Ie,ge,ne);return st.pop(),Ie.push("L",qt),Ie.join("")}function gc(st){if(st.length<4)return oo(st);for(var bt=[],Ct=-1,qt=st.length,Wt,Jt=[0],ge=[0];++Ct<3;)Wt=st[Ct],Jt.push(Wt[0]),ge.push(Wt[1]);for(bt.push(Va(Bo,Jt)+","+Va(Bo,ge)),--Ct;++Ct<qt;)Wt=st[Ct],Jt.shift(),Jt.push(Wt[0]),ge.shift(),ge.push(Wt[1]),ol(bt,Jt,ge);return bt.join("")}function fu(st){for(var bt,Ct=-1,qt=st.length,Wt=qt+4,Jt,ge=[],ne=[];++Ct<4;)Jt=st[Ct%qt],ge.push(Jt[0]),ne.push(Jt[1]);for(bt=[Va(Bo,ge),",",Va(Bo,ne)],--Ct;++Ct<Wt;)Jt=st[Ct%qt],ge.shift(),ge.push(Jt[0]),ne.shift(),ne.push(Jt[1]),ol(bt,ge,ne);return bt.join("")}function Cl(st,bt){var Ct=st.length-1;if(Ct)for(var qt=st[0][0],Wt=st[0][1],Jt=st[Ct][0]-qt,ge=st[Ct][1]-Wt,ne=-1,Ie,Ge;++ne<=Ct;)Ie=st[ne],Ge=ne/Ct,Ie[0]=bt*Ie[0]+(1-bt)*(qt+Ge*Jt),Ie[1]=bt*Ie[1]+(1-bt)*(Wt+Ge*ge);return ts(st)}function Va(st,bt){return st[0]*bt[0]+st[1]*bt[1]+st[2]*bt[2]+st[3]*bt[3]}var Iu=[0,2/3,1/3,0],al=[0,1/3,2/3,0],Bo=[0,1/6,2/3,1/6];function ol(st,bt,Ct){st.push("C",Va(Iu,bt),",",Va(Iu,Ct),",",Va(al,bt),",",Va(al,Ct),",",Va(Bo,bt),",",Va(Bo,Ct))}function ps(st,bt){return(bt[1]-st[1])/(bt[0]-st[0])}function Ol(st){for(var bt=0,Ct=st.length-1,qt=[],Wt=st[0],Jt=st[1],ge=qt[0]=ps(Wt,Jt);++bt<Ct;)qt[bt]=(ge+(ge=ps(Wt=Jt,Jt=st[bt+1])))/2;return qt[bt]=ge,qt}function zu(st){for(var bt=[],Ct,qt,Wt,Jt,ge=Ol(st),ne=-1,Ie=st.length-1;++ne<Ie;)Ct=ps(st[ne],st[ne+1]),c(Ct)<ut?ge[ne]=ge[ne+1]=0:(qt=ge[ne]/Ct,Wt=ge[ne+1]/Ct,Jt=qt*qt+Wt*Wt,Jt>9&&(Jt=Ct*3/Math.sqrt(Jt),ge[ne]=Jt*qt,ge[ne+1]=Jt*Wt));for(ne=-1;++ne<=Ie;)Jt=(st[Math.min(Ie,ne+1)][0]-st[Math.max(0,ne-1)][0])/(6*(1+ge[ne]*ge[ne])),bt.push([Jt||0,ge[ne]*Jt||0]);return bt}function hu(st){return st.length<3?oo(st):st[0]+hs(st,zu(st))}i.svg.line.radial=function(){var st=ks(pu);return st.radius=st.x,delete st.x,st.angle=st.y,delete st.y,st};function pu(st){for(var bt,Ct=-1,qt=st.length,Wt,Jt;++Ct<qt;)bt=st[Ct],Wt=bt[0],Jt=bt[1]-$t,bt[0]=Wt*Math.cos(Jt),bt[1]=Wt*Math.sin(Jt);return st}function Ss(st){var bt=ei,Ct=ei,qt=0,Wt=Gn,Jt=Ts,ge=oo,ne=ge.key,Ie=ge,Ge="L",Ye=.7;function vr(Ar){var jr=[],Gr=[],Tr=[],Dr=-1,Ur=Ar.length,Wr,tn=Zr(bt),Nr=Zr(qt),Pn=bt===Ct?function(){return Zn}:Zr(Ct),Dn=qt===Wt?function(){return Yn}:Zr(Wt),Zn,Yn;function li(){jr.push("M",ge(st(Tr),Ye),Ge,Ie(st(Gr.reverse()),Ye),"Z")}for(;++Dr<Ur;)Jt.call(this,Wr=Ar[Dr],Dr)?(Gr.push([Zn=+tn.call(this,Wr,Dr),Yn=+Nr.call(this,Wr,Dr)]),Tr.push([+Pn.call(this,Wr,Dr),+Dn.call(this,Wr,Dr)])):Gr.length&&(li(),Gr=[],Tr=[]);return Gr.length&&li(),jr.length?jr.join(""):null}return vr.x=function(Ar){return arguments.length?(bt=Ct=Ar,vr):Ct},vr.x0=function(Ar){return arguments.length?(bt=Ar,vr):bt},vr.x1=function(Ar){return arguments.length?(Ct=Ar,vr):Ct},vr.y=function(Ar){return arguments.length?(qt=Wt=Ar,vr):Wt},vr.y0=function(Ar){return arguments.length?(qt=Ar,vr):qt},vr.y1=function(Ar){return arguments.length?(Wt=Ar,vr):Wt},vr.defined=function(Ar){return arguments.length?(Jt=Ar,vr):Jt},vr.interpolate=function(Ar){return arguments.length?(typeof Ar=="function"?ne=ge=Ar:ne=(ge=eo.get(Ar)||oo).key,Ie=ge.reverse||ge,Ge=ge.closed?"M":"L",vr):ne},vr.tension=function(Ar){return arguments.length?(Ye=Ar,vr):Ye},vr}qs.reverse=El,El.reverse=qs,i.svg.area=function(){return Ss(R)},i.svg.area.radial=function(){var st=Ss(pu);return st.radius=st.x,delete st.x,st.innerRadius=st.x0,delete st.x0,st.outerRadius=st.x1,delete st.x1,st.angle=st.y,delete st.y,st.startAngle=st.y0,delete st.y0,st.endAngle=st.y1,delete st.y1,st};function Il(st){return st.source}function sl(st){return st.target}i.svg.chord=function(){var st=Il,bt=sl,Ct=Du,qt=Zs,Wt=uu;function Jt(Ye,vr){var Ar=ge(this,st,Ye,vr),jr=ge(this,bt,Ye,vr);return"M"+Ar.p0+Ie(Ar.r,Ar.p1,Ar.a1-Ar.a0)+(ne(Ar,jr)?Ge(Ar.r,Ar.p1,Ar.r,Ar.p0):Ge(Ar.r,Ar.p1,jr.r,jr.p0)+Ie(jr.r,jr.p1,jr.a1-jr.a0)+Ge(jr.r,jr.p1,Ar.r,Ar.p0))+"Z"}function ge(Ye,vr,Ar,jr){var Gr=vr.call(Ye,Ar,jr),Tr=Ct.call(Ye,Gr,jr),Dr=qt.call(Ye,Gr,jr)-$t,Ur=Wt.call(Ye,Gr,jr)-$t;return{r:Tr,a0:Dr,a1:Ur,p0:[Tr*Math.cos(Dr),Tr*Math.sin(Dr)],p1:[Tr*Math.cos(Ur),Tr*Math.sin(Ur)]}}function ne(Ye,vr){return Ye.a0==vr.a0&&Ye.a1==vr.a1}function Ie(Ye,vr,Ar){return"A"+Ye+","+Ye+" 0 "+ +(Ar>St)+",1 "+vr}function Ge(Ye,vr,Ar,jr){return"Q 0,0 "+jr}return Jt.radius=function(Ye){return arguments.length?(Ct=Zr(Ye),Jt):Ct},Jt.source=function(Ye){return arguments.length?(st=Zr(Ye),Jt):st},Jt.target=function(Ye){return arguments.length?(bt=Zr(Ye),Jt):bt},Jt.startAngle=function(Ye){return arguments.length?(qt=Zr(Ye),Jt):qt},Jt.endAngle=function(Ye){return arguments.length?(Wt=Zr(Ye),Jt):Wt},Jt};function Du(st){return st.radius}i.svg.diagonal=function(){var st=Il,bt=sl,Ct=ll;function qt(Wt,Jt){var ge=st.call(this,Wt,Jt),ne=bt.call(this,Wt,Jt),Ie=(ge.y+ne.y)/2,Ge=[ge,{x:ge.x,y:Ie},{x:ne.x,y:Ie},ne];return Ge=Ge.map(Ct),"M"+Ge[0]+"C"+Ge[1]+" "+Ge[2]+" "+Ge[3]}return qt.source=function(Wt){return arguments.length?(st=Zr(Wt),qt):st},qt.target=function(Wt){return arguments.length?(bt=Zr(Wt),qt):bt},qt.projection=function(Wt){return arguments.length?(Ct=Wt,qt):Ct},qt};function ll(st){return[st.x,st.y]}i.svg.diagonal.radial=function(){var st=i.svg.diagonal(),bt=ll,Ct=st.projection;return st.projection=function(qt){return arguments.length?Ct(Fu(bt=qt)):bt},st};function Fu(st){return function(){var bt=st.apply(this,arguments),Ct=bt[0],qt=bt[1]-$t;return[Ct*Math.cos(qt),Ct*Math.sin(qt)]}}i.svg.symbol=function(){var st=Yt,bt=Zt;function Ct(qt,Wt){return(ue.get(st.call(this,qt,Wt))||ie)(bt.call(this,qt,Wt))}return Ct.type=function(qt){return arguments.length?(st=Zr(qt),Ct):st},Ct.size=function(qt){return arguments.length?(bt=Zr(qt),Ct):bt},Ct};function Zt(){return 64}function Yt(){return"circle"}function ie(st){var bt=Math.sqrt(st/St);return"M0,"+bt+"A"+bt+","+bt+" 0 1,1 0,"+-bt+"A"+bt+","+bt+" 0 1,1 0,"+bt+"Z"}var ue=i.map({circle:ie,cross:function(st){var bt=Math.sqrt(st/5)/2;return"M"+-3*bt+","+-bt+"H"+-bt+"V"+-3*bt+"H"+bt+"V"+-bt+"H"+3*bt+"V"+bt+"H"+bt+"V"+3*bt+"H"+-bt+"V"+bt+"H"+-3*bt+"Z"},diamond:function(st){var bt=Math.sqrt(st/(2*xe)),Ct=bt*xe;return"M0,"+-bt+"L"+Ct+",0 0,"+bt+" "+-Ct+",0Z"},square:function(st){var bt=Math.sqrt(st)/2;return"M"+-bt+","+-bt+"L"+bt+","+-bt+" "+bt+","+bt+" "+-bt+","+bt+"Z"},"triangle-down":function(st){var bt=Math.sqrt(st/ke),Ct=bt*ke/2;return"M0,"+Ct+"L"+bt+","+-Ct+" "+-bt+","+-Ct+"Z"},"triangle-up":function(st){var bt=Math.sqrt(st/ke),Ct=bt*ke/2;return"M0,"+-Ct+"L"+bt+","+Ct+" "+-bt+","+Ct+"Z"}});i.svg.symbolTypes=ue.keys();var ke=Math.sqrt(3),xe=Math.tan(30*de);Y.transition=function(st){for(var bt=br||++pr,Ct=dn(st),qt=[],Wt,Jt,ge=Br||{time:Date.now(),ease:Qu,delay:0,duration:250},ne=-1,Ie=this.length;++ne<Ie;){qt.push(Wt=[]);for(var Ge=this[ne],Ye=-1,vr=Ge.length;++Ye<vr;)(Jt=Ge[Ye])&&An(Jt,Ye,Ct,bt,ge),Wt.push(Jt)}return ur(qt,Ct,bt)},Y.interrupt=function(st){return this.each(st==null?Pe:rr(dn(st)))};var Pe=rr(dn());function rr(st){return function(){var bt,Ct,qt;(bt=this[st])&&(qt=bt[Ct=bt.active])&&(qt.timer.c=null,qt.timer.t=NaN,--bt.count?delete bt[Ct]:delete this[st],bt.active+=.5,qt.event&&qt.event.interrupt.call(this,this.__data__,qt.index))}}function ur(st,bt,Ct){return Z(st,Ke),st.namespace=bt,st.id=Ct,st}var Ke=[],pr=0,br,Br;Ke.call=Y.call,Ke.empty=Y.empty,Ke.node=Y.node,Ke.size=Y.size,i.transition=function(st,bt){return st&&st.transition?br?st.transition(bt):st:i.selection().transition(st)},i.transition.prototype=Ke,Ke.select=function(st){var bt=this.id,Ct=this.namespace,qt=[],Wt,Jt,ge;st=ot(st);for(var ne=-1,Ie=this.length;++ne<Ie;){qt.push(Wt=[]);for(var Ge=this[ne],Ye=-1,vr=Ge.length;++Ye<vr;)(ge=Ge[Ye])&&(Jt=st.call(ge,ge.__data__,Ye,ne))?("__data__"in ge&&(Jt.__data__=ge.__data__),An(Jt,Ye,Ct,bt,ge[Ct][bt]),Wt.push(Jt)):Wt.push(null)}return ur(qt,Ct,bt)},Ke.selectAll=function(st){var bt=this.id,Ct=this.namespace,qt=[],Wt,Jt,ge,ne,Ie;st=rt(st);for(var Ge=-1,Ye=this.length;++Ge<Ye;)for(var vr=this[Ge],Ar=-1,jr=vr.length;++Ar<jr;)if(ge=vr[Ar]){Ie=ge[Ct][bt],Jt=st.call(ge,ge.__data__,Ar,Ge),qt.push(Wt=[]);for(var Gr=-1,Tr=Jt.length;++Gr<Tr;)(ne=Jt[Gr])&&An(ne,Gr,Ct,bt,Ie),Wt.push(ne)}return ur(qt,Ct,bt)},Ke.filter=function(st){var bt=[],Ct,qt,Wt;typeof st!="function"&&(st=Ht(st));for(var Jt=0,ge=this.length;Jt<ge;Jt++){bt.push(Ct=[]);for(var qt=this[Jt],ne=0,Ie=qt.length;ne<Ie;ne++)(Wt=qt[ne])&&st.call(Wt,Wt.__data__,ne,Jt)&&Ct.push(Wt)}return ur(bt,this.namespace,this.id)},Ke.tween=function(st,bt){var Ct=this.id,qt=this.namespace;return arguments.length<2?this.node()[qt][Ct].tween.get(st):ee(this,bt==null?function(Wt){Wt[qt][Ct].tween.remove(st)}:function(Wt){Wt[qt][Ct].tween.set(st,bt)})};function Vr(st,bt,Ct,qt){var Wt=st.id,Jt=st.namespace;return ee(st,typeof Ct=="function"?function(ge,ne,Ie){ge[Jt][Wt].tween.set(bt,qt(Ct.call(ge,ge.__data__,ne,Ie)))}:(Ct=qt(Ct),function(ge){ge[Jt][Wt].tween.set(bt,Ct)}))}Ke.attr=function(st,bt){if(arguments.length<2){for(bt in st)this.attr(bt,st[bt]);return this}var Ct=st=="transform"?xs:Ho,qt=i.ns.qualify(st);function Wt(){this.removeAttribute(qt)}function Jt(){this.removeAttributeNS(qt.space,qt.local)}function ge(Ie){return Ie==null?Wt:(Ie+="",function(){var Ge=this.getAttribute(qt),Ye;return Ge!==Ie&&(Ye=Ct(Ge,Ie),function(vr){this.setAttribute(qt,Ye(vr))})})}function ne(Ie){return Ie==null?Jt:(Ie+="",function(){var Ge=this.getAttributeNS(qt.space,qt.local),Ye;return Ge!==Ie&&(Ye=Ct(Ge,Ie),function(vr){this.setAttributeNS(qt.space,qt.local,Ye(vr))})})}return Vr(this,"attr."+st,bt,qt.local?ne:ge)},Ke.attrTween=function(st,bt){var Ct=i.ns.qualify(st);function qt(Jt,ge){var ne=bt.call(this,Jt,ge,this.getAttribute(Ct));return ne&&function(Ie){this.setAttribute(Ct,ne(Ie))}}function Wt(Jt,ge){var ne=bt.call(this,Jt,ge,this.getAttributeNS(Ct.space,Ct.local));return ne&&function(Ie){this.setAttributeNS(Ct.space,Ct.local,ne(Ie))}}return this.tween("attr."+st,Ct.local?Wt:qt)},Ke.style=function(st,bt,Ct){var qt=arguments.length;if(qt<3){if(typeof st!="string"){qt<2&&(bt="");for(Ct in st)this.style(Ct,st[Ct],bt);return this}Ct=""}function Wt(){this.style.removeProperty(st)}function Jt(ge){return ge==null?Wt:(ge+="",function(){var ne=e(this).getComputedStyle(this,null).getPropertyValue(st),Ie;return ne!==ge&&(Ie=Ho(ne,ge),function(Ge){this.style.setProperty(st,Ie(Ge),Ct)})})}return Vr(this,"style."+st,bt,Jt)},Ke.styleTween=function(st,bt,Ct){arguments.length<3&&(Ct="");function qt(Wt,Jt){var ge=bt.call(this,Wt,Jt,e(this).getComputedStyle(this,null).getPropertyValue(st));return ge&&function(ne){this.style.setProperty(st,ge(ne),Ct)}}return this.tween("style."+st,qt)},Ke.text=function(st){return Vr(this,"text",st,hn)};function hn(st){return st==null&&(st=""),function(){this.textContent=st}}Ke.remove=function(){var st=this.namespace;return this.each("end.transition",function(){var bt;this[st].count<2&&(bt=this.parentNode)&&bt.removeChild(this)})},Ke.ease=function(st){var bt=this.id,Ct=this.namespace;return arguments.length<1?this.node()[Ct][bt].ease:(typeof st!="function"&&(st=i.ease.apply(i,arguments)),ee(this,function(qt){qt[Ct][bt].ease=st}))},Ke.delay=function(st){var bt=this.id,Ct=this.namespace;return arguments.length<1?this.node()[Ct][bt].delay:ee(this,typeof st=="function"?function(qt,Wt,Jt){qt[Ct][bt].delay=+st.call(qt,qt.__data__,Wt,Jt)}:(st=+st,function(qt){qt[Ct][bt].delay=st}))},Ke.duration=function(st){var bt=this.id,Ct=this.namespace;return arguments.length<1?this.node()[Ct][bt].duration:ee(this,typeof st=="function"?function(qt,Wt,Jt){qt[Ct][bt].duration=Math.max(1,st.call(qt,qt.__data__,Wt,Jt))}:(st=Math.max(1,st),function(qt){qt[Ct][bt].duration=st}))},Ke.each=function(st,bt){var Ct=this.id,qt=this.namespace;if(arguments.length<2){var Wt=Br,Jt=br;try{br=Ct,ee(this,function(ge,ne,Ie){Br=ge[qt][Ct],st.call(ge,ge.__data__,ne,Ie)})}finally{Br=Wt,br=Jt}}else ee(this,function(ge){var ne=ge[qt][Ct];(ne.event||(ne.event=i.dispatch("start","end","interrupt"))).on(st,bt)});return this},Ke.transition=function(){for(var st=this.id,bt=++pr,Ct=this.namespace,qt=[],Wt,Jt,ge,ne,Ie=0,Ge=this.length;Ie<Ge;Ie++){qt.push(Wt=[]);for(var Jt=this[Ie],Ye=0,vr=Jt.length;Ye<vr;Ye++)(ge=Jt[Ye])&&(ne=ge[Ct][st],An(ge,Ye,Ct,bt,{time:ne.time,ease:ne.ease,delay:ne.delay+ne.duration,duration:ne.duration})),Wt.push(ge)}return ur(qt,Ct,bt)};function dn(st){return st==null?"__transition__":"__transition_"+st+"__"}function An(st,bt,Ct,qt,Wt){var Jt=st[Ct]||(st[Ct]={active:0,count:0}),ge=Jt[qt],ne,Ie,Ge,Ye,vr;function Ar(Tr){var Dr=ge.delay;if(Ie.t=Dr+ne,Dr<=Tr)return jr(Tr-Dr);Ie.c=jr}function jr(Tr){var Dr=Jt.active,Ur=Jt[Dr];Ur&&(Ur.timer.c=null,Ur.timer.t=NaN,--Jt.count,delete Jt[Dr],Ur.event&&Ur.event.interrupt.call(st,st.__data__,Ur.index));for(var Wr in Jt)if(+Wr<qt){var tn=Jt[Wr];tn.timer.c=null,tn.timer.t=NaN,--Jt.count,delete Jt[Wr]}Ie.c=Gr,xn(function(){return Ie.c&&Gr(Tr||1)&&(Ie.c=null,Ie.t=NaN),1},0,ne),Jt.active=qt,ge.event&&ge.event.start.call(st,st.__data__,bt),vr=[],ge.tween.forEach(function(Nr,Pn){(Pn=Pn.call(st,st.__data__,bt))&&vr.push(Pn)}),Ye=ge.ease,Ge=ge.duration}function Gr(Tr){for(var Dr=Tr/Ge,Ur=Ye(Dr),Wr=vr.length;Wr>0;)vr[--Wr].call(st,Ur);if(Dr>=1)return ge.event&&ge.event.end.call(st,st.__data__,bt),--Jt.count?delete Jt[qt]:delete st[Ct],1}ge||(ne=Wt.time,Ie=xn(Ar,0,ne),ge=Jt[qt]={tween:new _,time:ne,timer:Ie,delay:Wt.delay,duration:Wt.duration,ease:Wt.ease,index:bt},Wt=null,++Jt.count)}i.svg.axis=function(){var st=i.scale.linear(),bt=ri,Ct=6,qt=6,Wt=3,Jt=[10],ge=null,ne;function Ie(Ge){Ge.each(function(){var Ye=i.select(this),vr=this.__chart__||st,Ar=this.__chart__=st.copy(),jr=ge??(Ar.ticks?Ar.ticks.apply(Ar,Jt):Ar.domain()),Gr=ne??(Ar.tickFormat?Ar.tickFormat.apply(Ar,Jt):R),Tr=Ye.selectAll(".tick").data(jr,Ar),Dr=Tr.enter().insert("g",".domain").attr("class","tick").style("opacity",ut),Ur=i.transition(Tr.exit()).style("opacity",ut).remove(),Wr=i.transition(Tr.order()).style("opacity",1),tn=Math.max(Ct,0)+Wt,Nr,Pn=rl(Ar),Dn=Ye.selectAll(".domain").data([0]),Zn=(Dn.enter().append("path").attr("class","domain"),i.transition(Dn));Dr.append("line"),Dr.append("text");var Yn=Dr.select("line"),li=Wr.select("line"),si=Tr.select("text").text(Gr),Ei=Dr.select("text"),di=Wr.select("text"),Li=bt==="top"||bt==="left"?-1:1,Zi,Gi,Xi,In;if(bt==="bottom"||bt==="top"?(Nr=bi,Zi="x",Xi="y",Gi="x2",In="y2",si.attr("dy",Li<0?"0em":".71em").style("text-anchor","middle"),Zn.attr("d","M"+Pn[0]+","+Li*qt+"V0H"+Pn[1]+"V"+Li*qt)):(Nr=wi,Zi="y",Xi="x",Gi="y2",In="x2",si.attr("dy",".32em").style("text-anchor",Li<0?"end":"start"),Zn.attr("d","M"+Li*qt+","+Pn[0]+"H0V"+Pn[1]+"H"+Li*qt)),Yn.attr(In,Li*Ct),Ei.attr(Xi,Li*tn),li.attr(Gi,0).attr(In,Li*Ct),di.attr(Zi,0).attr(Xi,Li*tn),Ar.rangeBand){var Pi=Ar,Si=Pi.rangeBand()/2;vr=Ar=function(zi){return Pi(zi)+Si}}else vr.rangeBand?vr=Ar:Ur.call(Nr,Ar,vr);Dr.call(Nr,vr,Ar),Wr.call(Nr,Ar,Ar)})}return Ie.scale=function(Ge){return arguments.length?(st=Ge,Ie):st},Ie.orient=function(Ge){return arguments.length?(bt=Ge in vi?Ge+"":ri,Ie):bt},Ie.ticks=function(){return arguments.length?(Jt=A(arguments),Ie):Jt},Ie.tickValues=function(Ge){return arguments.length?(ge=Ge,Ie):ge},Ie.tickFormat=function(Ge){return arguments.length?(ne=Ge,Ie):ne},Ie.tickSize=function(Ge){var Ye=arguments.length;return Ye?(Ct=+Ge,qt=+arguments[Ye-1],Ie):Ct},Ie.innerTickSize=function(Ge){return arguments.length?(Ct=+Ge,Ie):Ct},Ie.outerTickSize=function(Ge){return arguments.length?(qt=+Ge,Ie):qt},Ie.tickPadding=function(Ge){return arguments.length?(Wt=+Ge,Ie):Wt},Ie.tickSubdivide=function(){return arguments.length&&Ie},Ie};var ri="bottom",vi={top:1,right:1,bottom:1,left:1};function bi(st,bt,Ct){st.attr("transform",function(qt){var Wt=bt(qt);return"translate("+(isFinite(Wt)?Wt:Ct(qt))+",0)"})}function wi(st,bt,Ct){st.attr("transform",function(qt){var Wt=bt(qt);return"translate(0,"+(isFinite(Wt)?Wt:Ct(qt))+")"})}i.svg.brush=function(){var st=q(Ye,"brushstart","brush","brushend"),bt=null,Ct=null,qt=[0,0],Wt=[0,0],Jt,ge,ne=!0,Ie=!0,Ge=Wi[0];function Ye(Tr){Tr.each(function(){var Dr=i.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Gr).on("touchstart.brush",Gr),Ur=Dr.selectAll(".background").data([0]);Ur.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Dr.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Wr=Dr.selectAll(".resize").data(Ge,R);Wr.exit().remove(),Wr.enter().append("g").attr("class",function(Dn){return"resize "+Dn}).style("cursor",function(Dn){return Ti[Dn]}).append("rect").attr("x",function(Dn){return/[ew]$/.test(Dn)?-3:null}).attr("y",function(Dn){return/^[ns]/.test(Dn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Wr.style("display",Ye.empty()?"none":null);var tn=i.transition(Dr),Nr=i.transition(Ur),Pn;bt&&(Pn=rl(bt),Nr.attr("x",Pn[0]).attr("width",Pn[1]-Pn[0]),Ar(tn)),Ct&&(Pn=rl(Ct),Nr.attr("y",Pn[0]).attr("height",Pn[1]-Pn[0]),jr(tn)),vr(tn)})}Ye.event=function(Tr){Tr.each(function(){var Dr=st.of(this,arguments),Ur={x:qt,y:Wt,i:Jt,j:ge},Wr=this.__chart__||Ur;this.__chart__=Ur,br?i.select(this).transition().each("start.brush",function(){Jt=Wr.i,ge=Wr.j,qt=Wr.x,Wt=Wr.y,Dr({type:"brushstart"})}).tween("brush:brush",function(){var tn=Ia(qt,Ur.x),Nr=Ia(Wt,Ur.y);return Jt=ge=null,function(Pn){qt=Ur.x=tn(Pn),Wt=Ur.y=Nr(Pn),Dr({type:"brush",mode:"resize"})}}).each("end.brush",function(){Jt=Ur.i,ge=Ur.j,Dr({type:"brush",mode:"resize"}),Dr({type:"brushend"})}):(Dr({type:"brushstart"}),Dr({type:"brush",mode:"resize"}),Dr({type:"brushend"}))})};function vr(Tr){Tr.selectAll(".resize").attr("transform",function(Dr){return"translate("+qt[+/e$/.test(Dr)]+","+Wt[+/^s/.test(Dr)]+")"})}function Ar(Tr){Tr.select(".extent").attr("x",qt[0]),Tr.selectAll(".extent,.n>rect,.s>rect").attr("width",qt[1]-qt[0])}function jr(Tr){Tr.select(".extent").attr("y",Wt[0]),Tr.selectAll(".extent,.e>rect,.w>rect").attr("height",Wt[1]-Wt[0])}function Gr(){var Tr=this,Dr=i.select(i.event.target),Ur=st.of(Tr,arguments),Wr=i.select(Tr),tn=Dr.datum(),Nr=!/^(n|s)$/.test(tn)&&bt,Pn=!/^(e|w)$/.test(tn)&&Ct,Dn=Dr.classed("extent"),Zn=Rt(Tr),Yn,li=i.mouse(Tr),si,Ei=i.select(e(Tr)).on("keydown.brush",Zi).on("keyup.brush",Gi);if(i.event.changedTouches?Ei.on("touchmove.brush",Xi).on("touchend.brush",Pi):Ei.on("mousemove.brush",Xi).on("mouseup.brush",Pi),Wr.interrupt().selectAll("*").interrupt(),Dn)li[0]=qt[0]-li[0],li[1]=Wt[0]-li[1];else if(tn){var di=+/w$/.test(tn),Li=+/^n/.test(tn);si=[qt[1-di]-li[0],Wt[1-Li]-li[1]],li[0]=qt[di],li[1]=Wt[Li]}else i.event.altKey&&(Yn=li.slice());Wr.style("pointer-events","none").selectAll(".resize").style("display",null),i.select("body").style("cursor",Dr.style("cursor")),Ur({type:"brushstart"}),Xi();function Zi(){i.event.keyCode==32&&(Dn||(Yn=null,li[0]-=qt[1],li[1]-=Wt[1],Dn=2),at())}function Gi(){i.event.keyCode==32&&Dn==2&&(li[0]+=qt[1],li[1]+=Wt[1],Dn=0,at())}function Xi(){var Si=i.mouse(Tr),zi=!1;si&&(Si[0]+=si[0],Si[1]+=si[1]),Dn||(i.event.altKey?(Yn||(Yn=[(qt[0]+qt[1])/2,(Wt[0]+Wt[1])/2]),li[0]=qt[+(Si[0]<Yn[0])],li[1]=Wt[+(Si[1]<Yn[1])]):Yn=null),Nr&&In(Si,bt,0)&&(Ar(Wr),zi=!0),Pn&&In(Si,Ct,1)&&(jr(Wr),zi=!0),zi&&(vr(Wr),Ur({type:"brush",mode:Dn?"move":"resize"}))}function In(Si,zi,ua){var ba=rl(zi),Ta=ba[0],aa=ba[1],Ki=li[ua],oi=ua?Wt:qt,pi=oi[1]-oi[0],oa,Aa;if(Dn&&(Ta-=Ki,aa-=pi+Ki),oa=(ua?Ie:ne)?Math.max(Ta,Math.min(aa,Si[ua])):Si[ua],Dn?Aa=(oa+=Ki)+pi:(Yn&&(Ki=Math.max(Ta,Math.min(aa,2*Yn[ua]-oa))),Ki<oa?(Aa=oa,oa=Ki):Aa=Ki),oi[0]!=oa||oi[1]!=Aa)return ua?ge=null:Jt=null,oi[0]=oa,oi[1]=Aa,!0}function Pi(){Xi(),Wr.style("pointer-events","all").selectAll(".resize").style("display",Ye.empty()?"none":null),i.select("body").style("cursor",null),Ei.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Zn(),Ur({type:"brushend"})}}return Ye.x=function(Tr){return arguments.length?(bt=Tr,Ge=Wi[!bt<<1|!Ct],Ye):bt},Ye.y=function(Tr){return arguments.length?(Ct=Tr,Ge=Wi[!bt<<1|!Ct],Ye):Ct},Ye.clamp=function(Tr){return arguments.length?(bt&&Ct?(ne=!!Tr[0],Ie=!!Tr[1]):bt?ne=!!Tr:Ct&&(Ie=!!Tr),Ye):bt&&Ct?[ne,Ie]:bt?ne:Ct?Ie:null},Ye.extent=function(Tr){var Dr,Ur,Wr,tn,Nr;return arguments.length?(bt&&(Dr=Tr[0],Ur=Tr[1],Ct&&(Dr=Dr[0],Ur=Ur[0]),Jt=[Dr,Ur],bt.invert&&(Dr=bt(Dr),Ur=bt(Ur)),Ur<Dr&&(Nr=Dr,Dr=Ur,Ur=Nr),(Dr!=qt[0]||Ur!=qt[1])&&(qt=[Dr,Ur])),Ct&&(Wr=Tr[0],tn=Tr[1],bt&&(Wr=Wr[1],tn=tn[1]),ge=[Wr,tn],Ct.invert&&(Wr=Ct(Wr),tn=Ct(tn)),tn<Wr&&(Nr=Wr,Wr=tn,tn=Nr),(Wr!=Wt[0]||tn!=Wt[1])&&(Wt=[Wr,tn])),Ye):(bt&&(Jt?(Dr=Jt[0],Ur=Jt[1]):(Dr=qt[0],Ur=qt[1],bt.invert&&(Dr=bt.invert(Dr),Ur=bt.invert(Ur)),Ur<Dr&&(Nr=Dr,Dr=Ur,Ur=Nr))),Ct&&(ge?(Wr=ge[0],tn=ge[1]):(Wr=Wt[0],tn=Wt[1],Ct.invert&&(Wr=Ct.invert(Wr),tn=Ct.invert(tn)),tn<Wr&&(Nr=Wr,Wr=tn,tn=Nr))),bt&&Ct?[[Dr,Wr],[Ur,tn]]:bt?[Dr,Ur]:Ct&&[Wr,tn])},Ye.clear=function(){return Ye.empty()||(qt=[0,0],Wt=[0,0],Jt=ge=null),Ye},Ye.empty=function(){return!!bt&&qt[0]==qt[1]||!!Ct&&Wt[0]==Wt[1]},i.rebind(Ye,st,"on")};var Ti={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Wi=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];i.text=yn(function(st){return st.responseText}),i.json=function(st,bt){return Tn(st,"application/json",ga,bt)};function ga(st){return JSON.parse(st.responseText)}i.html=function(st,bt){return Tn(st,"text/html",$i,bt)};function $i(st){var bt=g.createRange();return bt.selectNode(g.body),bt.createContextualFragment(st.responseText)}i.xml=yn(function(st){return st.responseXML}),M=i,E=typeof M=="function"?M.call(U,t,U,$):M,E!==void 0&&($.exports=E)}).apply(self)},88294:function($,U,t){$.exports=t(62849)},62849:function($,U,t){var M=t(91358),E=t(53435),i=t(18863),S=t(21527),A=t(71299),g=t(46775),v=t(30120),e=t(64941),r=t(90660),f=t(27084),n=1073741824;$.exports=function(o,h){h||(h={}),o=v(o,"float64"),h=A(h,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var y=g(h.maxDepth,255),p=g(h.bounds,S(o,2));p[0]===p[2]&&p[2]++,p[1]===p[3]&&p[3]++;var x=a(o,p),s=o.length>>>1,u;h.dtype||(h.dtype="array"),typeof h.dtype=="string"?u=new(r(h.dtype))(s):h.dtype&&(u=h.dtype,Array.isArray(u)&&(u.length=s));for(var c=0;c<s;++c)u[c]=c;var T=[],k=[],_=[],b=[];z(0,0,1,u,0,1);for(var P=0,l=0;l<T.length;l++){var d=T[l];if(u.set)u.set(d,P);else for(var L=0,w=d.length;L<w;L++)u[L+P]=d[L];var I=P+T[l].length;b[l]=[P,I],P=I}return u.range=B,u;function z(C,F,N,V,K,Q){if(!V.length)return null;var at=T[K]||(T[K]=[]),it=_[K]||(_[K]=[]),q=k[K]||(k[K]=[]),W=at.length;if(K++,K>y||Q>n){for(var Z=0;Z<V.length;Z++)at.push(V[Z]),it.push(Q),q.push(null,null,null,null);return W}if(at.push(V[0]),it.push(Q),V.length<=1)return q.push(null,null,null,null),W;for(var G=N*.5,et=C+G,nt=F+G,X=[],Y=[],ot=[],rt=[],ht=1,pt=V.length;ht<pt;ht++){var yt=V[ht],xt=x[yt*2],Ft=x[yt*2+1];xt<et?Ft<nt?X.push(yt):Y.push(yt):Ft<nt?ot.push(yt):rt.push(yt)}return Q<<=2,q.push(z(C,F,G,X,K,Q),z(C,nt,G,Y,K,Q+1),z(et,F,G,ot,K,Q+2),z(et,nt,G,rt,K,Q+3)),W}function B(){for(var C=[],F=arguments.length;F--;)C[F]=arguments[F];var N;if(e(C[C.length-1])){var V=C.pop();!C.length&&(V.x!=null||V.l!=null||V.left!=null)&&(C=[V],N={}),N=A(V,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else N={};C.length||(C=p);var K=i.apply(void 0,C),Q=[Math.min(K.x,K.x+K.width),Math.min(K.y,K.y+K.height),Math.max(K.x,K.x+K.width),Math.max(K.y,K.y+K.height)],at=Q[0],it=Q[1],q=Q[2],W=Q[3],Z=a([at,it,q,W],p),G=Z[0],et=Z[1],nt=Z[2],X=Z[3],Y=g(N.level,T.length);if(N.d!=null){var ot;typeof N.d=="number"?ot=[N.d,N.d]:N.d.length&&(ot=N.d),Y=Math.min(Math.max(Math.ceil(-f(Math.abs(ot[0])/(p[2]-p[0]))),Math.ceil(-f(Math.abs(ot[1])/(p[3]-p[1])))),Y)}if(Y=Math.min(Y,T.length),N.lod)return O(G,et,nt,X,Y);var rt=[];ht(0,0,1,0,0,1);function ht(yt,xt,Ft,Et,mt,gt){if(!(mt===null||gt===null)){var wt=yt+Ft,Pt=xt+Ft;if(!(G>wt||et>Pt||nt<yt||X<xt)&&!(Et>=Y)&&mt!==gt){var Bt=T[Et];gt===void 0&&(gt=Bt.length);for(var kt=mt;kt<gt;kt++){var jt=Bt[kt],Ht=o[jt*2],Vt=o[jt*2+1];Ht>=at&&Ht<=q&&Vt>=it&&Vt<=W&&rt.push(jt)}var ee=k[Et],te=ee[mt*4+0],ae=ee[mt*4+1],le=ee[mt*4+2],ce=ee[mt*4+3],pe=pt(ee,mt+1),we=Ft*.5,ve=Et+1;ht(yt,xt,we,ve,te,ae||le||ce||pe),ht(yt,xt+we,we,ve,ae,le||ce||pe),ht(yt+we,xt,we,ve,le,ce||pe),ht(yt+we,xt+we,we,ve,ce,pe)}}}function pt(yt,xt){for(var Ft=null,Et=0;Ft===null;)if(Ft=yt[xt*4+Et],Et++,Et>yt.length)return null;return Ft}return rt}function O(C,F,N,V,K){for(var Q=[],at=0;at<K;at++){var it=_[at],q=b[at][0],W=R(C,F,at),Z=R(N,V,at),G=M.ge(it,W),et=M.gt(it,Z,G,it.length-1);Q[at]=[G+q,et+q]}return Q}function R(C,F,N){for(var V=1,K=.5,Q=.5,at=.5,it=0;it<N;it++)V<<=2,V+=C<K?F<Q?0:1:F<Q?2:3,at*=.5,K+=C<K?-at:at,Q+=F<Q?-at:at;return V}};function a(o,h){for(var y=h[0],p=h[1],x=h[2],s=h[3],u=1/(x-y),c=1/(s-p),T=new Array(o.length),k=0,_=o.length/2;k<_;k++)T[2*k]=E((o[2*k]-y)*u,0,1),T[2*k+1]=E((o[2*k+1]-p)*c,0,1);return T}},30774:function($,U,t){Object.defineProperty(U,"__esModule",{value:!0});var M=t(60302),E=6378137;function i(e){return M.geomReduce(e,function(r,f){return r+S(f)},0)}U.default=i;function S(e){var r=0,f;switch(e.type){case"Polygon":return A(e.coordinates);case"MultiPolygon":for(f=0;f<e.coordinates.length;f++)r+=A(e.coordinates[f]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function A(e){var r=0;if(e&&e.length>0){r+=Math.abs(g(e[0]));for(var f=1;f<e.length;f++)r-=Math.abs(g(e[f]))}return r}function g(e){var r,f,n,a,o,h,y,p=0,x=e.length;if(x>2){for(y=0;y<x;y++)y===x-2?(a=x-2,o=x-1,h=0):y===x-1?(a=x-1,o=0,h=1):(a=y,o=y+1,h=y+2),r=e[a],f=e[o],n=e[h],p+=(v(n[0])-v(r[0]))*Math.sin(v(f[1]));p=p*E*E/2}return p}function v(e){return e*Math.PI/180}},23132:function($,U){Object.defineProperty(U,"__esModule",{value:!0}),U.earthRadius=63710088e-1,U.factors={centimeters:U.earthRadius*100,centimetres:U.earthRadius*100,degrees:U.earthRadius/111325,feet:U.earthRadius*3.28084,inches:U.earthRadius*39.37,kilometers:U.earthRadius/1e3,kilometres:U.earthRadius/1e3,meters:U.earthRadius,metres:U.earthRadius,miles:U.earthRadius/1609.344,millimeters:U.earthRadius*1e3,millimetres:U.earthRadius*1e3,nauticalmiles:U.earthRadius/1852,radians:1,yards:U.earthRadius*1.0936},U.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/U.earthRadius,yards:1.0936133},U.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function t(l,d,L){L===void 0&&(L={});var w={type:"Feature"};return(L.id===0||L.id)&&(w.id=L.id),L.bbox&&(w.bbox=L.bbox),w.properties=d||{},w.geometry=l,w}U.feature=t;function M(l,d,L){switch(l){case"Point":return E(d).geometry;case"LineString":return g(d).geometry;case"Polygon":return S(d).geometry;case"MultiPoint":return f(d).geometry;case"MultiLineString":return r(d).geometry;case"MultiPolygon":return n(d).geometry;default:throw new Error(l+" is invalid")}}U.geometry=M;function E(l,d,L){if(L===void 0&&(L={}),!l)throw new Error("coordinates is required");if(!Array.isArray(l))throw new Error("coordinates must be an Array");if(l.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!k(l[0])||!k(l[1]))throw new Error("coordinates must contain numbers");var w={type:"Point",coordinates:l};return t(w,d,L)}U.point=E;function i(l,d,L){return L===void 0&&(L={}),e(l.map(function(w){return E(w,d)}),L)}U.points=i;function S(l,d,L){L===void 0&&(L={});for(var w=0,I=l;w<I.length;w++){var z=I[w];if(z.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var B=0;B<z[z.length-1].length;B++)if(z[z.length-1][B]!==z[0][B])throw new Error("First and last Position are not equivalent.")}var O={type:"Polygon",coordinates:l};return t(O,d,L)}U.polygon=S;function A(l,d,L){return L===void 0&&(L={}),e(l.map(function(w){return S(w,d)}),L)}U.polygons=A;function g(l,d,L){if(L===void 0&&(L={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");var w={type:"LineString",coordinates:l};return t(w,d,L)}U.lineString=g;function v(l,d,L){return L===void 0&&(L={}),e(l.map(function(w){return g(w,d)}),L)}U.lineStrings=v;function e(l,d){d===void 0&&(d={});var L={type:"FeatureCollection"};return d.id&&(L.id=d.id),d.bbox&&(L.bbox=d.bbox),L.features=l,L}U.featureCollection=e;function r(l,d,L){L===void 0&&(L={});var w={type:"MultiLineString",coordinates:l};return t(w,d,L)}U.multiLineString=r;function f(l,d,L){L===void 0&&(L={});var w={type:"MultiPoint",coordinates:l};return t(w,d,L)}U.multiPoint=f;function n(l,d,L){L===void 0&&(L={});var w={type:"MultiPolygon",coordinates:l};return t(w,d,L)}U.multiPolygon=n;function a(l,d,L){L===void 0&&(L={});var w={type:"GeometryCollection",geometries:l};return t(w,d,L)}U.geometryCollection=a;function o(l,d){if(d===void 0&&(d=0),d&&!(d>=0))throw new Error("precision must be a positive number");var L=Math.pow(10,d||0);return Math.round(l*L)/L}U.round=o;function h(l,d){d===void 0&&(d="kilometers");var L=U.factors[d];if(!L)throw new Error(d+" units is invalid");return l*L}U.radiansToLength=h;function y(l,d){d===void 0&&(d="kilometers");var L=U.factors[d];if(!L)throw new Error(d+" units is invalid");return l/L}U.lengthToRadians=y;function p(l,d){return s(y(l,d))}U.lengthToDegrees=p;function x(l){var d=l%360;return d<0&&(d+=360),d}U.bearingToAzimuth=x;function s(l){var d=l%(2*Math.PI);return d*180/Math.PI}U.radiansToDegrees=s;function u(l){var d=l%360;return d*Math.PI/180}U.degreesToRadians=u;function c(l,d,L){if(d===void 0&&(d="kilometers"),L===void 0&&(L="kilometers"),!(l>=0))throw new Error("length must be a positive number");return h(y(l,d),L)}U.convertLength=c;function T(l,d,L){if(d===void 0&&(d="meters"),L===void 0&&(L="kilometers"),!(l>=0))throw new Error("area must be a positive number");var w=U.areaFactors[d];if(!w)throw new Error("invalid original units");var I=U.areaFactors[L];if(!I)throw new Error("invalid final units");return l/w*I}U.convertArea=T;function k(l){return!isNaN(l)&&l!==null&&!Array.isArray(l)}U.isNumber=k;function _(l){return!!l&&l.constructor===Object}U.isObject=_;function b(l){if(!l)throw new Error("bbox is required");if(!Array.isArray(l))throw new Error("bbox must be an Array");if(l.length!==4&&l.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");l.forEach(function(d){if(!k(d))throw new Error("bbox must only contain numbers")})}U.validateBBox=b;function P(l){if(!l)throw new Error("id is required");if(["string","number"].indexOf(typeof l)===-1)throw new Error("id must be a number or a string")}U.validateId=P},60302:function($,U,t){Object.defineProperty(U,"__esModule",{value:!0});var M=t(23132);function E(u,c,T){if(u!==null)for(var k,_,b,P,l,d,L,w=0,I=0,z,B=u.type,O=B==="FeatureCollection",R=B==="Feature",C=O?u.features.length:1,F=0;F<C;F++){L=O?u.features[F].geometry:R?u.geometry:u,z=L?L.type==="GeometryCollection":!1,l=z?L.geometries.length:1;for(var N=0;N<l;N++){var V=0,K=0;if(P=z?L.geometries[N]:L,P!==null){d=P.coordinates;var Q=P.type;switch(w=T&&(Q==="Polygon"||Q==="MultiPolygon")?1:0,Q){case null:break;case"Point":if(c(d,I,F,V,K)===!1)return!1;I++,V++;break;case"LineString":case"MultiPoint":for(k=0;k<d.length;k++){if(c(d[k],I,F,V,K)===!1)return!1;I++,Q==="MultiPoint"&&V++}Q==="LineString"&&V++;break;case"Polygon":case"MultiLineString":for(k=0;k<d.length;k++){for(_=0;_<d[k].length-w;_++){if(c(d[k][_],I,F,V,K)===!1)return!1;I++}Q==="MultiLineString"&&V++,Q==="Polygon"&&K++}Q==="Polygon"&&V++;break;case"MultiPolygon":for(k=0;k<d.length;k++){for(K=0,_=0;_<d[k].length;_++){for(b=0;b<d[k][_].length-w;b++){if(c(d[k][_][b],I,F,V,K)===!1)return!1;I++}K++}V++}break;case"GeometryCollection":for(k=0;k<P.geometries.length;k++)if(E(P.geometries[k],c,T)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(u,c,T,k){var _=T;return E(u,function(b,P,l,d,L){P===0&&T===void 0?_=b:_=c(_,b,P,l,d,L)},k),_}function S(u,c){var T;switch(u.type){case"FeatureCollection":for(T=0;T<u.features.length&&c(u.features[T].properties,T)!==!1;T++);break;case"Feature":c(u.properties,0);break}}function A(u,c,T){var k=T;return S(u,function(_,b){b===0&&T===void 0?k=_:k=c(k,_,b)}),k}function g(u,c){if(u.type==="Feature")c(u,0);else if(u.type==="FeatureCollection")for(var T=0;T<u.features.length&&c(u.features[T],T)!==!1;T++);}function v(u,c,T){var k=T;return g(u,function(_,b){b===0&&T===void 0?k=_:k=c(k,_,b)}),k}function e(u){var c=[];return E(u,function(T){c.push(T)}),c}function r(u,c){var T,k,_,b,P,l,d,L,w,I,z=0,B=u.type==="FeatureCollection",O=u.type==="Feature",R=B?u.features.length:1;for(T=0;T<R;T++){for(l=B?u.features[T].geometry:O?u.geometry:u,L=B?u.features[T].properties:O?u.properties:{},w=B?u.features[T].bbox:O?u.bbox:void 0,I=B?u.features[T].id:O?u.id:void 0,d=l?l.type==="GeometryCollection":!1,P=d?l.geometries.length:1,_=0;_<P;_++){if(b=d?l.geometries[_]:l,b===null){if(c(null,z,L,w,I)===!1)return!1;continue}switch(b.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(c(b,z,L,w,I)===!1)return!1;break}case"GeometryCollection":{for(k=0;k<b.geometries.length;k++)if(c(b.geometries[k],z,L,w,I)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}z++}}function f(u,c,T){var k=T;return r(u,function(_,b,P,l,d){b===0&&T===void 0?k=_:k=c(k,_,b,P,l,d)}),k}function n(u,c){r(u,function(T,k,_,b,P){var l=T===null?null:T.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return c(M.feature(T,_,{bbox:b,id:P}),k,0)===!1?!1:void 0}var d;switch(l){case"MultiPoint":d="Point";break;case"MultiLineString":d="LineString";break;case"MultiPolygon":d="Polygon";break}for(var L=0;L<T.coordinates.length;L++){var w=T.coordinates[L],I={type:d,coordinates:w};if(c(M.feature(I,_),k,L)===!1)return!1}})}function a(u,c,T){var k=T;return n(u,function(_,b,P){b===0&&P===0&&T===void 0?k=_:k=c(k,_,b,P)}),k}function o(u,c){n(u,function(T,k,_){var b=0;if(T.geometry){var P=T.geometry.type;if(!(P==="Point"||P==="MultiPoint")){var l,d=0,L=0,w=0;if(E(T,function(I,z,B,O,R){if(l===void 0||k>d||O>L||R>w){l=I,d=k,L=O,w=R,b=0;return}var C=M.lineString([l,I],T.properties);if(c(C,k,_,R,b)===!1)return!1;b++,l=I})===!1)return!1}}})}function h(u,c,T){var k=T,_=!1;return o(u,function(b,P,l,d,L){_===!1&&T===void 0?k=b:k=c(k,b,P,l,d,L),_=!0}),k}function y(u,c){if(!u)throw new Error("geojson is required");n(u,function(T,k,_){if(T.geometry!==null){var b=T.geometry.type,P=T.geometry.coordinates;switch(b){case"LineString":if(c(T,k,_,0,0)===!1)return!1;break;case"Polygon":for(var l=0;l<P.length;l++)if(c(M.lineString(P[l],T.properties),k,_,l)===!1)return!1;break}}})}function p(u,c,T){var k=T;return y(u,function(_,b,P,l){b===0&&T===void 0?k=_:k=c(k,_,b,P,l)}),k}function x(u,c){if(c=c||{},!M.isObject(c))throw new Error("options is invalid");var T=c.featureIndex||0,k=c.multiFeatureIndex||0,_=c.geometryIndex||0,b=c.segmentIndex||0,P=c.properties,l;switch(u.type){case"FeatureCollection":T<0&&(T=u.features.length+T),P=P||u.features[T].properties,l=u.features[T].geometry;break;case"Feature":P=P||u.properties,l=u.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=u;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var d=l.coordinates;switch(l.type){case"Point":case"MultiPoint":return null;case"LineString":return b<0&&(b=d.length+b-1),M.lineString([d[b],d[b+1]],P,c);case"Polygon":return _<0&&(_=d.length+_),b<0&&(b=d[_].length+b-1),M.lineString([d[_][b],d[_][b+1]],P,c);case"MultiLineString":return k<0&&(k=d.length+k),b<0&&(b=d[k].length+b-1),M.lineString([d[k][b],d[k][b+1]],P,c);case"MultiPolygon":return k<0&&(k=d.length+k),_<0&&(_=d[k].length+_),b<0&&(b=d[k][_].length-b-1),M.lineString([d[k][_][b],d[k][_][b+1]],P,c)}throw new Error("geojson is invalid")}function s(u,c){if(c=c||{},!M.isObject(c))throw new Error("options is invalid");var T=c.featureIndex||0,k=c.multiFeatureIndex||0,_=c.geometryIndex||0,b=c.coordIndex||0,P=c.properties,l;switch(u.type){case"FeatureCollection":T<0&&(T=u.features.length+T),P=P||u.features[T].properties,l=u.features[T].geometry;break;case"Feature":P=P||u.properties,l=u.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=u;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var d=l.coordinates;switch(l.type){case"Point":return M.point(d,P,c);case"MultiPoint":return k<0&&(k=d.length+k),M.point(d[k],P,c);case"LineString":return b<0&&(b=d.length+b),M.point(d[b],P,c);case"Polygon":return _<0&&(_=d.length+_),b<0&&(b=d[_].length+b),M.point(d[_][b],P,c);case"MultiLineString":return k<0&&(k=d.length+k),b<0&&(b=d[k].length+b),M.point(d[k][b],P,c);case"MultiPolygon":return k<0&&(k=d.length+k),_<0&&(_=d[k].length+_),b<0&&(b=d[k][_].length-b),M.point(d[k][_][b],P,c)}throw new Error("geojson is invalid")}U.coordEach=E,U.coordReduce=i,U.propEach=S,U.propReduce=A,U.featureEach=g,U.featureReduce=v,U.coordAll=e,U.geomEach=r,U.geomReduce=f,U.flattenEach=n,U.flattenReduce=a,U.segmentEach=o,U.segmentReduce=h,U.lineEach=y,U.lineReduce=p,U.findSegment=x,U.findPoint=s},85268:function($,U,t){Object.defineProperty(U,"__esModule",{value:!0});var M=t(27138);function E(i){var S=[1/0,1/0,-1/0,-1/0];return M.coordEach(i,function(A){S[0]>A[0]&&(S[0]=A[0]),S[1]>A[1]&&(S[1]=A[1]),S[2]<A[0]&&(S[2]=A[0]),S[3]<A[1]&&(S[3]=A[1])}),S}E.default=E,U.default=E},94228:function($,U){Object.defineProperty(U,"__esModule",{value:!0}),U.earthRadius=63710088e-1,U.factors={centimeters:U.earthRadius*100,centimetres:U.earthRadius*100,degrees:U.earthRadius/111325,feet:U.earthRadius*3.28084,inches:U.earthRadius*39.37,kilometers:U.earthRadius/1e3,kilometres:U.earthRadius/1e3,meters:U.earthRadius,metres:U.earthRadius,miles:U.earthRadius/1609.344,millimeters:U.earthRadius*1e3,millimetres:U.earthRadius*1e3,nauticalmiles:U.earthRadius/1852,radians:1,yards:U.earthRadius*1.0936},U.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/U.earthRadius,yards:1.0936133},U.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function t(l,d,L){L===void 0&&(L={});var w={type:"Feature"};return(L.id===0||L.id)&&(w.id=L.id),L.bbox&&(w.bbox=L.bbox),w.properties=d||{},w.geometry=l,w}U.feature=t;function M(l,d,L){switch(l){case"Point":return E(d).geometry;case"LineString":return g(d).geometry;case"Polygon":return S(d).geometry;case"MultiPoint":return f(d).geometry;case"MultiLineString":return r(d).geometry;case"MultiPolygon":return n(d).geometry;default:throw new Error(l+" is invalid")}}U.geometry=M;function E(l,d,L){if(L===void 0&&(L={}),!l)throw new Error("coordinates is required");if(!Array.isArray(l))throw new Error("coordinates must be an Array");if(l.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!k(l[0])||!k(l[1]))throw new Error("coordinates must contain numbers");var w={type:"Point",coordinates:l};return t(w,d,L)}U.point=E;function i(l,d,L){return L===void 0&&(L={}),e(l.map(function(w){return E(w,d)}),L)}U.points=i;function S(l,d,L){L===void 0&&(L={});for(var w=0,I=l;w<I.length;w++){var z=I[w];if(z.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var B=0;B<z[z.length-1].length;B++)if(z[z.length-1][B]!==z[0][B])throw new Error("First and last Position are not equivalent.")}var O={type:"Polygon",coordinates:l};return t(O,d,L)}U.polygon=S;function A(l,d,L){return L===void 0&&(L={}),e(l.map(function(w){return S(w,d)}),L)}U.polygons=A;function g(l,d,L){if(L===void 0&&(L={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");var w={type:"LineString",coordinates:l};return t(w,d,L)}U.lineString=g;function v(l,d,L){return L===void 0&&(L={}),e(l.map(function(w){return g(w,d)}),L)}U.lineStrings=v;function e(l,d){d===void 0&&(d={});var L={type:"FeatureCollection"};return d.id&&(L.id=d.id),d.bbox&&(L.bbox=d.bbox),L.features=l,L}U.featureCollection=e;function r(l,d,L){L===void 0&&(L={});var w={type:"MultiLineString",coordinates:l};return t(w,d,L)}U.multiLineString=r;function f(l,d,L){L===void 0&&(L={});var w={type:"MultiPoint",coordinates:l};return t(w,d,L)}U.multiPoint=f;function n(l,d,L){L===void 0&&(L={});var w={type:"MultiPolygon",coordinates:l};return t(w,d,L)}U.multiPolygon=n;function a(l,d,L){L===void 0&&(L={});var w={type:"GeometryCollection",geometries:l};return t(w,d,L)}U.geometryCollection=a;function o(l,d){if(d===void 0&&(d=0),d&&!(d>=0))throw new Error("precision must be a positive number");var L=Math.pow(10,d||0);return Math.round(l*L)/L}U.round=o;function h(l,d){d===void 0&&(d="kilometers");var L=U.factors[d];if(!L)throw new Error(d+" units is invalid");return l*L}U.radiansToLength=h;function y(l,d){d===void 0&&(d="kilometers");var L=U.factors[d];if(!L)throw new Error(d+" units is invalid");return l/L}U.lengthToRadians=y;function p(l,d){return s(y(l,d))}U.lengthToDegrees=p;function x(l){var d=l%360;return d<0&&(d+=360),d}U.bearingToAzimuth=x;function s(l){var d=l%(2*Math.PI);return d*180/Math.PI}U.radiansToDegrees=s;function u(l){var d=l%360;return d*Math.PI/180}U.degreesToRadians=u;function c(l,d,L){if(d===void 0&&(d="kilometers"),L===void 0&&(L="kilometers"),!(l>=0))throw new Error("length must be a positive number");return h(y(l,d),L)}U.convertLength=c;function T(l,d,L){if(d===void 0&&(d="meters"),L===void 0&&(L="kilometers"),!(l>=0))throw new Error("area must be a positive number");var w=U.areaFactors[d];if(!w)throw new Error("invalid original units");var I=U.areaFactors[L];if(!I)throw new Error("invalid final units");return l/w*I}U.convertArea=T;function k(l){return!isNaN(l)&&l!==null&&!Array.isArray(l)}U.isNumber=k;function _(l){return!!l&&l.constructor===Object}U.isObject=_;function b(l){if(!l)throw new Error("bbox is required");if(!Array.isArray(l))throw new Error("bbox must be an Array");if(l.length!==4&&l.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");l.forEach(function(d){if(!k(d))throw new Error("bbox must only contain numbers")})}U.validateBBox=b;function P(l){if(!l)throw new Error("id is required");if(["string","number"].indexOf(typeof l)===-1)throw new Error("id must be a number or a string")}U.validateId=P},27138:function($,U,t){Object.defineProperty(U,"__esModule",{value:!0});var M=t(94228);function E(u,c,T){if(u!==null)for(var k,_,b,P,l,d,L,w=0,I=0,z,B=u.type,O=B==="FeatureCollection",R=B==="Feature",C=O?u.features.length:1,F=0;F<C;F++){L=O?u.features[F].geometry:R?u.geometry:u,z=L?L.type==="GeometryCollection":!1,l=z?L.geometries.length:1;for(var N=0;N<l;N++){var V=0,K=0;if(P=z?L.geometries[N]:L,P!==null){d=P.coordinates;var Q=P.type;switch(w=T&&(Q==="Polygon"||Q==="MultiPolygon")?1:0,Q){case null:break;case"Point":if(c(d,I,F,V,K)===!1)return!1;I++,V++;break;case"LineString":case"MultiPoint":for(k=0;k<d.length;k++){if(c(d[k],I,F,V,K)===!1)return!1;I++,Q==="MultiPoint"&&V++}Q==="LineString"&&V++;break;case"Polygon":case"MultiLineString":for(k=0;k<d.length;k++){for(_=0;_<d[k].length-w;_++){if(c(d[k][_],I,F,V,K)===!1)return!1;I++}Q==="MultiLineString"&&V++,Q==="Polygon"&&K++}Q==="Polygon"&&V++;break;case"MultiPolygon":for(k=0;k<d.length;k++){for(K=0,_=0;_<d[k].length;_++){for(b=0;b<d[k][_].length-w;b++){if(c(d[k][_][b],I,F,V,K)===!1)return!1;I++}K++}V++}break;case"GeometryCollection":for(k=0;k<P.geometries.length;k++)if(E(P.geometries[k],c,T)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(u,c,T,k){var _=T;return E(u,function(b,P,l,d,L){P===0&&T===void 0?_=b:_=c(_,b,P,l,d,L)},k),_}function S(u,c){var T;switch(u.type){case"FeatureCollection":for(T=0;T<u.features.length&&c(u.features[T].properties,T)!==!1;T++);break;case"Feature":c(u.properties,0);break}}function A(u,c,T){var k=T;return S(u,function(_,b){b===0&&T===void 0?k=_:k=c(k,_,b)}),k}function g(u,c){if(u.type==="Feature")c(u,0);else if(u.type==="FeatureCollection")for(var T=0;T<u.features.length&&c(u.features[T],T)!==!1;T++);}function v(u,c,T){var k=T;return g(u,function(_,b){b===0&&T===void 0?k=_:k=c(k,_,b)}),k}function e(u){var c=[];return E(u,function(T){c.push(T)}),c}function r(u,c){var T,k,_,b,P,l,d,L,w,I,z=0,B=u.type==="FeatureCollection",O=u.type==="Feature",R=B?u.features.length:1;for(T=0;T<R;T++){for(l=B?u.features[T].geometry:O?u.geometry:u,L=B?u.features[T].properties:O?u.properties:{},w=B?u.features[T].bbox:O?u.bbox:void 0,I=B?u.features[T].id:O?u.id:void 0,d=l?l.type==="GeometryCollection":!1,P=d?l.geometries.length:1,_=0;_<P;_++){if(b=d?l.geometries[_]:l,b===null){if(c(null,z,L,w,I)===!1)return!1;continue}switch(b.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(c(b,z,L,w,I)===!1)return!1;break}case"GeometryCollection":{for(k=0;k<b.geometries.length;k++)if(c(b.geometries[k],z,L,w,I)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}z++}}function f(u,c,T){var k=T;return r(u,function(_,b,P,l,d){b===0&&T===void 0?k=_:k=c(k,_,b,P,l,d)}),k}function n(u,c){r(u,function(T,k,_,b,P){var l=T===null?null:T.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return c(M.feature(T,_,{bbox:b,id:P}),k,0)===!1?!1:void 0}var d;switch(l){case"MultiPoint":d="Point";break;case"MultiLineString":d="LineString";break;case"MultiPolygon":d="Polygon";break}for(var L=0;L<T.coordinates.length;L++){var w=T.coordinates[L],I={type:d,coordinates:w};if(c(M.feature(I,_),k,L)===!1)return!1}})}function a(u,c,T){var k=T;return n(u,function(_,b,P){b===0&&P===0&&T===void 0?k=_:k=c(k,_,b,P)}),k}function o(u,c){n(u,function(T,k,_){var b=0;if(T.geometry){var P=T.geometry.type;if(!(P==="Point"||P==="MultiPoint")){var l,d=0,L=0,w=0;if(E(T,function(I,z,B,O,R){if(l===void 0||k>d||O>L||R>w){l=I,d=k,L=O,w=R,b=0;return}var C=M.lineString([l,I],T.properties);if(c(C,k,_,R,b)===!1)return!1;b++,l=I})===!1)return!1}}})}function h(u,c,T){var k=T,_=!1;return o(u,function(b,P,l,d,L){_===!1&&T===void 0?k=b:k=c(k,b,P,l,d,L),_=!0}),k}function y(u,c){if(!u)throw new Error("geojson is required");n(u,function(T,k,_){if(T.geometry!==null){var b=T.geometry.type,P=T.geometry.coordinates;switch(b){case"LineString":if(c(T,k,_,0,0)===!1)return!1;break;case"Polygon":for(var l=0;l<P.length;l++)if(c(M.lineString(P[l],T.properties),k,_,l)===!1)return!1;break}}})}function p(u,c,T){var k=T;return y(u,function(_,b,P,l){b===0&&T===void 0?k=_:k=c(k,_,b,P,l)}),k}function x(u,c){if(c=c||{},!M.isObject(c))throw new Error("options is invalid");var T=c.featureIndex||0,k=c.multiFeatureIndex||0,_=c.geometryIndex||0,b=c.segmentIndex||0,P=c.properties,l;switch(u.type){case"FeatureCollection":T<0&&(T=u.features.length+T),P=P||u.features[T].properties,l=u.features[T].geometry;break;case"Feature":P=P||u.properties,l=u.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=u;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var d=l.coordinates;switch(l.type){case"Point":case"MultiPoint":return null;case"LineString":return b<0&&(b=d.length+b-1),M.lineString([d[b],d[b+1]],P,c);case"Polygon":return _<0&&(_=d.length+_),b<0&&(b=d[_].length+b-1),M.lineString([d[_][b],d[_][b+1]],P,c);case"MultiLineString":return k<0&&(k=d.length+k),b<0&&(b=d[k].length+b-1),M.lineString([d[k][b],d[k][b+1]],P,c);case"MultiPolygon":return k<0&&(k=d.length+k),_<0&&(_=d[k].length+_),b<0&&(b=d[k][_].length-b-1),M.lineString([d[k][_][b],d[k][_][b+1]],P,c)}throw new Error("geojson is invalid")}function s(u,c){if(c=c||{},!M.isObject(c))throw new Error("options is invalid");var T=c.featureIndex||0,k=c.multiFeatureIndex||0,_=c.geometryIndex||0,b=c.coordIndex||0,P=c.properties,l;switch(u.type){case"FeatureCollection":T<0&&(T=u.features.length+T),P=P||u.features[T].properties,l=u.features[T].geometry;break;case"Feature":P=P||u.properties,l=u.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=u;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var d=l.coordinates;switch(l.type){case"Point":return M.point(d,P,c);case"MultiPoint":return k<0&&(k=d.length+k),M.point(d[k],P,c);case"LineString":return b<0&&(b=d.length+b),M.point(d[b],P,c);case"Polygon":return _<0&&(_=d.length+_),b<0&&(b=d[_].length+b),M.point(d[_][b],P,c);case"MultiLineString":return k<0&&(k=d.length+k),b<0&&(b=d[k].length+b),M.point(d[k][b],P,c);case"MultiPolygon":return k<0&&(k=d.length+k),_<0&&(_=d[k].length+_),b<0&&(b=d[k][_].length-b),M.point(d[k][_][b],P,c)}throw new Error("geojson is invalid")}U.coordEach=E,U.coordReduce=i,U.propEach=S,U.propReduce=A,U.featureEach=g,U.featureReduce=v,U.coordAll=e,U.geomEach=r,U.geomReduce=f,U.flattenEach=n,U.flattenReduce=a,U.segmentEach=o,U.segmentReduce=h,U.lineEach=y,U.lineReduce=p,U.findSegment=x,U.findPoint=s},29261:function($,U,t){Object.defineProperty(U,"__esModule",{value:!0});var M=t(88553),E=t(64182);function i(S,A){A===void 0&&(A={});var g=0,v=0,e=0;return M.coordEach(S,function(r){g+=r[0],v+=r[1],e++}),E.point([g/e,v/e],A.properties)}U.default=i},64182:function($,U){Object.defineProperty(U,"__esModule",{value:!0}),U.earthRadius=63710088e-1,U.factors={centimeters:U.earthRadius*100,centimetres:U.earthRadius*100,degrees:U.earthRadius/111325,feet:U.earthRadius*3.28084,inches:U.earthRadius*39.37,kilometers:U.earthRadius/1e3,kilometres:U.earthRadius/1e3,meters:U.earthRadius,metres:U.earthRadius,miles:U.earthRadius/1609.344,millimeters:U.earthRadius*1e3,millimetres:U.earthRadius*1e3,nauticalmiles:U.earthRadius/1852,radians:1,yards:U.earthRadius/1.0936},U.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/U.earthRadius,yards:.91441111923921},U.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function t(O,R,C){C===void 0&&(C={});var F={type:"Feature"};return(C.id===0||C.id)&&(F.id=C.id),C.bbox&&(F.bbox=C.bbox),F.properties=R||{},F.geometry=O,F}U.feature=t;function M(O,R,C){switch(O){case"Point":return E(R).geometry;case"LineString":return g(R).geometry;case"Polygon":return S(R).geometry;case"MultiPoint":return f(R).geometry;case"MultiLineString":return r(R).geometry;case"MultiPolygon":return n(R).geometry;default:throw new Error(O+" is invalid")}}U.geometry=M;function E(O,R,C){C===void 0&&(C={});var F={type:"Point",coordinates:O};return t(F,R,C)}U.point=E;function i(O,R,C){return C===void 0&&(C={}),e(O.map(function(F){return E(F,R)}),C)}U.points=i;function S(O,R,C){C===void 0&&(C={});for(var F=0,N=O;F<N.length;F++){var V=N[F];if(V.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var K=0;K<V[V.length-1].length;K++)if(V[V.length-1][K]!==V[0][K])throw new Error("First and last Position are not equivalent.")}var Q={type:"Polygon",coordinates:O};return t(Q,R,C)}U.polygon=S;function A(O,R,C){return C===void 0&&(C={}),e(O.map(function(F){return S(F,R)}),C)}U.polygons=A;function g(O,R,C){if(C===void 0&&(C={}),O.length<2)throw new Error("coordinates must be an array of two or more positions");var F={type:"LineString",coordinates:O};return t(F,R,C)}U.lineString=g;function v(O,R,C){return C===void 0&&(C={}),e(O.map(function(F){return g(F,R)}),C)}U.lineStrings=v;function e(O,R){R===void 0&&(R={});var C={type:"FeatureCollection"};return R.id&&(C.id=R.id),R.bbox&&(C.bbox=R.bbox),C.features=O,C}U.featureCollection=e;function r(O,R,C){C===void 0&&(C={});var F={type:"MultiLineString",coordinates:O};return t(F,R,C)}U.multiLineString=r;function f(O,R,C){C===void 0&&(C={});var F={type:"MultiPoint",coordinates:O};return t(F,R,C)}U.multiPoint=f;function n(O,R,C){C===void 0&&(C={});var F={type:"MultiPolygon",coordinates:O};return t(F,R,C)}U.multiPolygon=n;function a(O,R,C){C===void 0&&(C={});var F={type:"GeometryCollection",geometries:O};return t(F,R,C)}U.geometryCollection=a;function o(O,R){if(R===void 0&&(R=0),R&&!(R>=0))throw new Error("precision must be a positive number");var C=Math.pow(10,R||0);return Math.round(O*C)/C}U.round=o;function h(O,R){R===void 0&&(R="kilometers");var C=U.factors[R];if(!C)throw new Error(R+" units is invalid");return O*C}U.radiansToLength=h;function y(O,R){R===void 0&&(R="kilometers");var C=U.factors[R];if(!C)throw new Error(R+" units is invalid");return O/C}U.lengthToRadians=y;function p(O,R){return s(y(O,R))}U.lengthToDegrees=p;function x(O){var R=O%360;return R<0&&(R+=360),R}U.bearingToAzimuth=x;function s(O){var R=O%(2*Math.PI);return R*180/Math.PI}U.radiansToDegrees=s;function u(O){var R=O%360;return R*Math.PI/180}U.degreesToRadians=u;function c(O,R,C){if(R===void 0&&(R="kilometers"),C===void 0&&(C="kilometers"),!(O>=0))throw new Error("length must be a positive number");return h(y(O,R),C)}U.convertLength=c;function T(O,R,C){if(R===void 0&&(R="meters"),C===void 0&&(C="kilometers"),!(O>=0))throw new Error("area must be a positive number");var F=U.areaFactors[R];if(!F)throw new Error("invalid original units");var N=U.areaFactors[C];if(!N)throw new Error("invalid final units");return O/F*N}U.convertArea=T;function k(O){return!isNaN(O)&&O!==null&&!Array.isArray(O)&&!/^\s*$/.test(O)}U.isNumber=k;function _(O){return!!O&&O.constructor===Object}U.isObject=_;function b(O){if(!O)throw new Error("bbox is required");if(!Array.isArray(O))throw new Error("bbox must be an Array");if(O.length!==4&&O.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");O.forEach(function(R){if(!k(R))throw new Error("bbox must only contain numbers")})}U.validateBBox=b;function P(O){if(!O)throw new Error("id is required");if(["string","number"].indexOf(typeof O)===-1)throw new Error("id must be a number or a string")}U.validateId=P;function l(){throw new Error("method has been renamed to `radiansToDegrees`")}U.radians2degrees=l;function d(){throw new Error("method has been renamed to `degreesToRadians`")}U.degrees2radians=d;function L(){throw new Error("method has been renamed to `lengthToDegrees`")}U.distanceToDegrees=L;function w(){throw new Error("method has been renamed to `lengthToRadians`")}U.distanceToRadians=w;function I(){throw new Error("method has been renamed to `radiansToLength`")}U.radiansToDistance=I;function z(){throw new Error("method has been renamed to `bearingToAzimuth`")}U.bearingToAngle=z;function B(){throw new Error("method has been renamed to `convertLength`")}U.convertDistance=B},88553:function($,U,t){Object.defineProperty(U,"__esModule",{value:!0});var M=t(64182);function E(u,c,T){if(u!==null)for(var k,_,b,P,l,d,L,w=0,I=0,z,B=u.type,O=B==="FeatureCollection",R=B==="Feature",C=O?u.features.length:1,F=0;F<C;F++){L=O?u.features[F].geometry:R?u.geometry:u,z=L?L.type==="GeometryCollection":!1,l=z?L.geometries.length:1;for(var N=0;N<l;N++){var V=0,K=0;if(P=z?L.geometries[N]:L,P!==null){d=P.coordinates;var Q=P.type;switch(w=T&&(Q==="Polygon"||Q==="MultiPolygon")?1:0,Q){case null:break;case"Point":if(c(d,I,F,V,K)===!1)return!1;I++,V++;break;case"LineString":case"MultiPoint":for(k=0;k<d.length;k++){if(c(d[k],I,F,V,K)===!1)return!1;I++,Q==="MultiPoint"&&V++}Q==="LineString"&&V++;break;case"Polygon":case"MultiLineString":for(k=0;k<d.length;k++){for(_=0;_<d[k].length-w;_++){if(c(d[k][_],I,F,V,K)===!1)return!1;I++}Q==="MultiLineString"&&V++,Q==="Polygon"&&K++}Q==="Polygon"&&V++;break;case"MultiPolygon":for(k=0;k<d.length;k++){for(K=0,_=0;_<d[k].length;_++){for(b=0;b<d[k][_].length-w;b++){if(c(d[k][_][b],I,F,V,K)===!1)return!1;I++}K++}V++}break;case"GeometryCollection":for(k=0;k<P.geometries.length;k++)if(E(P.geometries[k],c,T)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(u,c,T,k){var _=T;return E(u,function(b,P,l,d,L){P===0&&T===void 0?_=b:_=c(_,b,P,l,d,L)},k),_}function S(u,c){var T;switch(u.type){case"FeatureCollection":for(T=0;T<u.features.length&&c(u.features[T].properties,T)!==!1;T++);break;case"Feature":c(u.properties,0);break}}function A(u,c,T){var k=T;return S(u,function(_,b){b===0&&T===void 0?k=_:k=c(k,_,b)}),k}function g(u,c){if(u.type==="Feature")c(u,0);else if(u.type==="FeatureCollection")for(var T=0;T<u.features.length&&c(u.features[T],T)!==!1;T++);}function v(u,c,T){var k=T;return g(u,function(_,b){b===0&&T===void 0?k=_:k=c(k,_,b)}),k}function e(u){var c=[];return E(u,function(T){c.push(T)}),c}function r(u,c){var T,k,_,b,P,l,d,L,w,I,z=0,B=u.type==="FeatureCollection",O=u.type==="Feature",R=B?u.features.length:1;for(T=0;T<R;T++){for(l=B?u.features[T].geometry:O?u.geometry:u,L=B?u.features[T].properties:O?u.properties:{},w=B?u.features[T].bbox:O?u.bbox:void 0,I=B?u.features[T].id:O?u.id:void 0,d=l?l.type==="GeometryCollection":!1,P=d?l.geometries.length:1,_=0;_<P;_++){if(b=d?l.geometries[_]:l,b===null){if(c(null,z,L,w,I)===!1)return!1;continue}switch(b.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(c(b,z,L,w,I)===!1)return!1;break}case"GeometryCollection":{for(k=0;k<b.geometries.length;k++)if(c(b.geometries[k],z,L,w,I)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}z++}}function f(u,c,T){var k=T;return r(u,function(_,b,P,l,d){b===0&&T===void 0?k=_:k=c(k,_,b,P,l,d)}),k}function n(u,c){r(u,function(T,k,_,b,P){var l=T===null?null:T.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return c(M.feature(T,_,{bbox:b,id:P}),k,0)===!1?!1:void 0}var d;switch(l){case"MultiPoint":d="Point";break;case"MultiLineString":d="LineString";break;case"MultiPolygon":d="Polygon";break}for(var L=0;L<T.coordinates.length;L++){var w=T.coordinates[L],I={type:d,coordinates:w};if(c(M.feature(I,_),k,L)===!1)return!1}})}function a(u,c,T){var k=T;return n(u,function(_,b,P){b===0&&P===0&&T===void 0?k=_:k=c(k,_,b,P)}),k}function o(u,c){n(u,function(T,k,_){var b=0;if(T.geometry){var P=T.geometry.type;if(!(P==="Point"||P==="MultiPoint")){var l,d=0,L=0,w=0;if(E(T,function(I,z,B,O,R){if(l===void 0||k>d||O>L||R>w){l=I,d=k,L=O,w=R,b=0;return}var C=M.lineString([l,I],T.properties);if(c(C,k,_,R,b)===!1)return!1;b++,l=I})===!1)return!1}}})}function h(u,c,T){var k=T,_=!1;return o(u,function(b,P,l,d,L){_===!1&&T===void 0?k=b:k=c(k,b,P,l,d,L),_=!0}),k}function y(u,c){if(!u)throw new Error("geojson is required");n(u,function(T,k,_){if(T.geometry!==null){var b=T.geometry.type,P=T.geometry.coordinates;switch(b){case"LineString":if(c(T,k,_,0,0)===!1)return!1;break;case"Polygon":for(var l=0;l<P.length;l++)if(c(M.lineString(P[l],T.properties),k,_,l)===!1)return!1;break}}})}function p(u,c,T){var k=T;return y(u,function(_,b,P,l){b===0&&T===void 0?k=_:k=c(k,_,b,P,l)}),k}function x(u,c){if(c=c||{},!M.isObject(c))throw new Error("options is invalid");var T=c.featureIndex||0,k=c.multiFeatureIndex||0,_=c.geometryIndex||0,b=c.segmentIndex||0,P=c.properties,l;switch(u.type){case"FeatureCollection":T<0&&(T=u.features.length+T),P=P||u.features[T].properties,l=u.features[T].geometry;break;case"Feature":P=P||u.properties,l=u.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=u;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var d=l.coordinates;switch(l.type){case"Point":case"MultiPoint":return null;case"LineString":return b<0&&(b=d.length+b-1),M.lineString([d[b],d[b+1]],P,c);case"Polygon":return _<0&&(_=d.length+_),b<0&&(b=d[_].length+b-1),M.lineString([d[_][b],d[_][b+1]],P,c);case"MultiLineString":return k<0&&(k=d.length+k),b<0&&(b=d[k].length+b-1),M.lineString([d[k][b],d[k][b+1]],P,c);case"MultiPolygon":return k<0&&(k=d.length+k),_<0&&(_=d[k].length+_),b<0&&(b=d[k][_].length-b-1),M.lineString([d[k][_][b],d[k][_][b+1]],P,c)}throw new Error("geojson is invalid")}function s(u,c){if(c=c||{},!M.isObject(c))throw new Error("options is invalid");var T=c.featureIndex||0,k=c.multiFeatureIndex||0,_=c.geometryIndex||0,b=c.coordIndex||0,P=c.properties,l;switch(u.type){case"FeatureCollection":T<0&&(T=u.features.length+T),P=P||u.features[T].properties,l=u.features[T].geometry;break;case"Feature":P=P||u.properties,l=u.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=u;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var d=l.coordinates;switch(l.type){case"Point":return M.point(d,P,c);case"MultiPoint":return k<0&&(k=d.length+k),M.point(d[k],P,c);case"LineString":return b<0&&(b=d.length+b),M.point(d[b],P,c);case"Polygon":return _<0&&(_=d.length+_),b<0&&(b=d[_].length+b),M.point(d[_][b],P,c);case"MultiLineString":return k<0&&(k=d.length+k),b<0&&(b=d[k].length+b),M.point(d[k][b],P,c);case"MultiPolygon":return k<0&&(k=d.length+k),_<0&&(_=d[k].length+_),b<0&&(b=d[k][_].length-b),M.point(d[k][_][b],P,c)}throw new Error("geojson is invalid")}U.coordEach=E,U.coordReduce=i,U.propEach=S,U.propReduce=A,U.featureEach=g,U.featureReduce=v,U.coordAll=e,U.geomEach=r,U.geomReduce=f,U.flattenEach=n,U.flattenReduce=a,U.segmentEach=o,U.segmentReduce=h,U.lineEach=y,U.lineReduce=p,U.findSegment=x,U.findPoint=s},65185:function($){$.exports=U;function U(t){var M=0,E=0,i=0,S=0;return t.map(function(A){A=A.slice();var g=A[0],v=g.toUpperCase();if(g!=v)switch(A[0]=v,g){case"a":A[6]+=i,A[7]+=S;break;case"v":A[1]+=S;break;case"h":A[1]+=i;break;default:for(var e=1;e<A.length;)A[e++]+=i,A[e++]+=S}switch(v){case"Z":i=M,S=E;break;case"H":i=A[1];break;case"V":S=A[1];break;case"M":i=M=A[1],S=E=A[2];break;default:i=A[A.length-2],S=A[A.length-1]}return A})}},21527:function($){$.exports=U;function U(t,M){if(!t||t.length==null)throw Error("Argument should be an array");M==null?M=1:M=Math.floor(M);for(var E=Array(M*2),i=0;i<M;i++){for(var S=-1/0,A=1/0,g=i,v=t.length;g<v;g+=M)t[g]>S&&(S=t[g]),t[g]<A&&(A=t[g]);E[i]=A,E[M+i]=S}return E}},6851:function($){$.exports=function(U,t,M){if(typeof Array.prototype.findIndex=="function")return U.findIndex(t,M);if(typeof t!="function")throw new TypeError("predicate must be a function");var E=Object(U),i=E.length;if(i===0)return-1;for(var S=0;S<i;S++)if(t.call(M,E[S],S,E))return S;return-1}},54:function($,U,t){var M=t(21527);$.exports=E;function E(i,S,A){if(!i||i.length==null)throw Error("Argument should be an array");S==null&&(S=1),A==null&&(A=M(i,S));for(var g=0;g<S;g++){var v=A[S+g],e=A[g],r=g,f=i.length;if(v===1/0&&e===-1/0)for(r=g;r<f;r+=S)i[r]=i[r]===v?1:i[r]===e?0:.5;else if(v===1/0)for(r=g;r<f;r+=S)i[r]=i[r]===v?1:0;else if(e===-1/0)for(r=g;r<f;r+=S)i[r]=i[r]===e?0:1;else{var n=v-e;for(r=g;r<f;r+=S)isNaN(i[r])||(i[r]=n===0?.5:(i[r]-e)/n)}}return i}},57471:function($){$.exports=function(U,t){var M=typeof U=="number",E=typeof t=="number";M&&!E?(t=U,U=0):!M&&!E&&(U=0,t=0),U=U|0,t=t|0;var i=t-U;if(i<0)throw new Error("array length must be positive");for(var S=new Array(i),A=0,g=U;A<i;A++,g++)S[A]=g;return S}},32791:function($,U,t){var M=t(90386);function E(K){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(Q){return typeof Q}:E=function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},E(K)}function i(K,Q){if(!(K instanceof Q))throw new TypeError("Cannot call a class as a function")}var S=t(79616),A=S.codes,g=A.ERR_AMBIGUOUS_ARGUMENT,v=A.ERR_INVALID_ARG_TYPE,e=A.ERR_INVALID_ARG_VALUE,r=A.ERR_INVALID_RETURN_VALUE,f=A.ERR_MISSING_ARGS,n=t(73894),a=t(43827),o=a.inspect,h=t(43827).types,y=h.isPromise,p=h.isRegExp,x=Object.assign?Object.assign:t(73523).assign,s=Object.is?Object.is:t(64003),u,c;function T(){var K=t(74061);u=K.isDeepEqual,c=K.isDeepStrictEqual}var k=!1,_=$.exports=L,b={};function P(K){throw K.message instanceof Error?K.message:new n(K)}function l(K,Q,at,it,q){var W=arguments.length,Z;if(W===0)Z="Failed";else if(W===1)at=K,K=void 0;else{if(k===!1){k=!0;var G=M.emitWarning?M.emitWarning:console.warn.bind(console);G("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}W===2&&(it="!=")}if(at instanceof Error)throw at;var et={actual:K,expected:Q,operator:it===void 0?"fail":it,stackStartFn:q||l};at!==void 0&&(et.message=at);var nt=new n(et);throw Z&&(nt.message=Z,nt.generatedMessage=!0),nt}_.fail=l,_.AssertionError=n;function d(K,Q,at,it){if(!at){var q=!1;if(Q===0)q=!0,it="No value argument passed to `assert.ok()`";else if(it instanceof Error)throw it;var W=new n({actual:at,expected:!0,message:it,operator:"==",stackStartFn:K});throw W.generatedMessage=q,W}}function L(){for(var K=arguments.length,Q=new Array(K),at=0;at<K;at++)Q[at]=arguments[at];d.apply(void 0,[L,Q.length].concat(Q))}_.ok=L,_.equal=function K(Q,at,it){if(arguments.length<2)throw new f("actual","expected");Q!=at&&P({actual:Q,expected:at,message:it,operator:"==",stackStartFn:K})},_.notEqual=function K(Q,at,it){if(arguments.length<2)throw new f("actual","expected");Q==at&&P({actual:Q,expected:at,message:it,operator:"!=",stackStartFn:K})},_.deepEqual=function K(Q,at,it){if(arguments.length<2)throw new f("actual","expected");u===void 0&&T(),u(Q,at)||P({actual:Q,expected:at,message:it,operator:"deepEqual",stackStartFn:K})},_.notDeepEqual=function K(Q,at,it){if(arguments.length<2)throw new f("actual","expected");u===void 0&&T(),u(Q,at)&&P({actual:Q,expected:at,message:it,operator:"notDeepEqual",stackStartFn:K})},_.deepStrictEqual=function K(Q,at,it){if(arguments.length<2)throw new f("actual","expected");u===void 0&&T(),c(Q,at)||P({actual:Q,expected:at,message:it,operator:"deepStrictEqual",stackStartFn:K})},_.notDeepStrictEqual=w;function w(K,Q,at){if(arguments.length<2)throw new f("actual","expected");u===void 0&&T(),c(K,Q)&&P({actual:K,expected:Q,message:at,operator:"notDeepStrictEqual",stackStartFn:w})}_.strictEqual=function K(Q,at,it){if(arguments.length<2)throw new f("actual","expected");s(Q,at)||P({actual:Q,expected:at,message:it,operator:"strictEqual",stackStartFn:K})},_.notStrictEqual=function K(Q,at,it){if(arguments.length<2)throw new f("actual","expected");s(Q,at)&&P({actual:Q,expected:at,message:it,operator:"notStrictEqual",stackStartFn:K})};var I=function K(Q,at,it){var q=this;i(this,K),at.forEach(function(W){W in Q&&(it!==void 0&&typeof it[W]=="string"&&p(Q[W])&&Q[W].test(it[W])?q[W]=it[W]:q[W]=Q[W])})};function z(K,Q,at,it,q,W){if(!(at in K)||!c(K[at],Q[at])){if(!it){var Z=new I(K,q),G=new I(Q,q,K),et=new n({actual:Z,expected:G,operator:"deepStrictEqual",stackStartFn:W});throw et.actual=K,et.expected=Q,et.operator=W.name,et}P({actual:K,expected:Q,message:it,operator:W.name,stackStartFn:W})}}function B(K,Q,at,it){if(typeof Q!="function"){if(p(Q))return Q.test(K);if(arguments.length===2)throw new v("expected",["Function","RegExp"],Q);if(E(K)!=="object"||K===null){var q=new n({actual:K,expected:Q,message:at,operator:"deepStrictEqual",stackStartFn:it});throw q.operator=it.name,q}var W=Object.keys(Q);if(Q instanceof Error)W.push("name","message");else if(W.length===0)throw new e("error",Q,"may not be an empty object");return u===void 0&&T(),W.forEach(function(Z){typeof K[Z]=="string"&&p(Q[Z])&&Q[Z].test(K[Z])||z(K,Q,Z,at,W,it)}),!0}return Q.prototype!==void 0&&K instanceof Q?!0:Error.isPrototypeOf(Q)?!1:Q.call({},K)===!0}function O(K){if(typeof K!="function")throw new v("fn","Function",K);try{K()}catch(Q){return Q}return b}function R(K){return y(K)||K!==null&&E(K)==="object"&&typeof K.then=="function"&&typeof K.catch=="function"}function C(K){return Promise.resolve().then(function(){var Q;if(typeof K=="function"){if(Q=K(),!R(Q))throw new r("instance of Promise","promiseFn",Q)}else if(R(K))Q=K;else throw new v("promiseFn",["Function","Promise"],K);return Promise.resolve().then(function(){return Q}).then(function(){return b}).catch(function(at){return at})})}function F(K,Q,at,it){if(typeof at=="string"){if(arguments.length===4)throw new v("error",["Object","Error","Function","RegExp"],at);if(E(Q)==="object"&&Q!==null){if(Q.message===at)throw new g("error/message",'The error message "'.concat(Q.message,'" is identical to the message.'))}else if(Q===at)throw new g("error/message",'The error "'.concat(Q,'" is identical to the message.'));it=at,at=void 0}else if(at!=null&&E(at)!=="object"&&typeof at!="function")throw new v("error",["Object","Error","Function","RegExp"],at);if(Q===b){var q="";at&&at.name&&(q+=" (".concat(at.name,")")),q+=it?": ".concat(it):".";var W=K.name==="rejects"?"rejection":"exception";P({actual:void 0,expected:at,operator:K.name,message:"Missing expected ".concat(W).concat(q),stackStartFn:K})}if(at&&!B(Q,at,it,K))throw Q}function N(K,Q,at,it){if(Q!==b){if(typeof at=="string"&&(it=at,at=void 0),!at||B(Q,at)){var q=it?": ".concat(it):".",W=K.name==="doesNotReject"?"rejection":"exception";P({actual:Q,expected:at,operator:K.name,message:"Got unwanted ".concat(W).concat(q,`
`)+'Actual message: "'.concat(Q&&Q.message,'"'),stackStartFn:K})}throw Q}}_.throws=function K(Q){for(var at=arguments.length,it=new Array(at>1?at-1:0),q=1;q<at;q++)it[q-1]=arguments[q];F.apply(void 0,[K,O(Q)].concat(it))},_.rejects=function K(Q){for(var at=arguments.length,it=new Array(at>1?at-1:0),q=1;q<at;q++)it[q-1]=arguments[q];return C(Q).then(function(W){return F.apply(void 0,[K,W].concat(it))})},_.doesNotThrow=function K(Q){for(var at=arguments.length,it=new Array(at>1?at-1:0),q=1;q<at;q++)it[q-1]=arguments[q];N.apply(void 0,[K,O(Q)].concat(it))},_.doesNotReject=function K(Q){for(var at=arguments.length,it=new Array(at>1?at-1:0),q=1;q<at;q++)it[q-1]=arguments[q];return C(Q).then(function(W){return N.apply(void 0,[K,W].concat(it))})},_.ifError=function K(Q){if(Q!=null){var at="ifError got unwanted exception: ";E(Q)==="object"&&typeof Q.message=="string"?Q.message.length===0&&Q.constructor?at+=Q.constructor.name:at+=Q.message:at+=o(Q);var it=new n({actual:Q,expected:null,operator:"ifError",message:at,stackStartFn:K}),q=Q.stack;if(typeof q=="string"){var W=q.split(`
`);W.shift();for(var Z=it.stack.split(`
`),G=0;G<W.length;G++){var et=Z.indexOf(W[G]);if(et!==-1){Z=Z.slice(0,et);break}}it.stack="".concat(Z.join(`
`),`
`).concat(W.join(`
`))}throw it}};function V(){for(var K=arguments.length,Q=new Array(K),at=0;at<K;at++)Q[at]=arguments[at];d.apply(void 0,[V,Q.length].concat(Q))}_.strict=x(V,_,{equal:_.strictEqual,deepEqual:_.deepStrictEqual,notEqual:_.notStrictEqual,notDeepEqual:_.notDeepStrictEqual}),_.strict.strict=_.strict},73894:function($,U,t){var M=t(90386);function E(O){for(var R=1;R<arguments.length;R++){var C=arguments[R]!=null?arguments[R]:{},F=Object.keys(C);typeof Object.getOwnPropertySymbols=="function"&&(F=F.concat(Object.getOwnPropertySymbols(C).filter(function(N){return Object.getOwnPropertyDescriptor(C,N).enumerable}))),F.forEach(function(N){i(O,N,C[N])})}return O}function i(O,R,C){return R in O?Object.defineProperty(O,R,{value:C,enumerable:!0,configurable:!0,writable:!0}):O[R]=C,O}function S(O,R){if(!(O instanceof R))throw new TypeError("Cannot call a class as a function")}function A(O,R){for(var C=0;C<R.length;C++){var F=R[C];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(O,F.key,F)}}function g(O,R,C){return R&&A(O.prototype,R),C&&A(O,C),O}function v(O,R){return R&&(p(R)==="object"||typeof R=="function")?R:e(O)}function e(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function r(O,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(R&&R.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),R&&h(O,R)}function f(O){var R=typeof Map=="function"?new Map:void 0;return f=function(C){if(C===null||!o(C))return C;if(typeof C!="function")throw new TypeError("Super expression must either be null or a function");if(typeof R<"u"){if(R.has(C))return R.get(C);R.set(C,F)}function F(){return a(C,arguments,y(this).constructor)}return F.prototype=Object.create(C.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),h(F,C)},f(O)}function n(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function a(O,R,C){return n()?a=Reflect.construct:a=function(F,N,V){var K=[null];K.push.apply(K,N);var Q=Function.bind.apply(F,K),at=new Q;return V&&h(at,V.prototype),at},a.apply(null,arguments)}function o(O){return Function.toString.call(O).indexOf("[native code]")!==-1}function h(O,R){return h=Object.setPrototypeOf||function(C,F){return C.__proto__=F,C},h(O,R)}function y(O){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},y(O)}function p(O){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?p=function(R){return typeof R}:p=function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},p(O)}var x=t(43827),s=x.inspect,u=t(79616),c=u.codes.ERR_INVALID_ARG_TYPE;function T(O,R,C){return(C===void 0||C>O.length)&&(C=O.length),O.substring(C-R.length,C)===R}function k(O,R){if(R=Math.floor(R),O.length==0||R==0)return"";var C=O.length*R;for(R=Math.floor(Math.log(R)/Math.log(2));R;)O+=O,R--;return O+=O.substring(0,C-O.length),O}var _="",b="",P="",l="",d={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},L=10;function w(O){var R=Object.keys(O),C=Object.create(Object.getPrototypeOf(O));return R.forEach(function(F){C[F]=O[F]}),Object.defineProperty(C,"message",{value:O.message}),C}function I(O){return s(O,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function z(O,R,C){var F="",N="",V=0,K="",Q=!1,at=I(O),it=at.split(`
`),q=I(R).split(`
`),W=0,Z="";if(C==="strictEqual"&&p(O)==="object"&&p(R)==="object"&&O!==null&&R!==null&&(C="strictEqualObject"),it.length===1&&q.length===1&&it[0]!==q[0]){var G=it[0].length+q[0].length;if(G<=L){if((p(O)!=="object"||O===null)&&(p(R)!=="object"||R===null)&&(O!==0||R!==0))return"".concat(d[C],`

`)+"".concat(it[0]," !== ").concat(q[0],`
`)}else if(C!=="strictEqualObject"){var et=M.stderr&&M.stderr.isTTY?M.stderr.columns:80;if(G<et){for(;it[0][W]===q[0][W];)W++;W>2&&(Z=`
  `.concat(k(" ",W),"^"),W=0)}}}for(var nt=it[it.length-1],X=q[q.length-1];nt===X&&(W++<2?K=`
  `.concat(nt).concat(K):F=nt,it.pop(),q.pop(),!(it.length===0||q.length===0));)nt=it[it.length-1],X=q[q.length-1];var Y=Math.max(it.length,q.length);if(Y===0){var ot=at.split(`
`);if(ot.length>30)for(ot[26]="".concat(_,"...").concat(l);ot.length>27;)ot.pop();return"".concat(d.notIdentical,`

`).concat(ot.join(`
`),`
`)}W>3&&(K=`
`.concat(_,"...").concat(l).concat(K),Q=!0),F!==""&&(K=`
  `.concat(F).concat(K),F="");var rt=0,ht=d[C]+`
`.concat(b,"+ actual").concat(l," ").concat(P,"- expected").concat(l),pt=" ".concat(_,"...").concat(l," Lines skipped");for(W=0;W<Y;W++){var yt=W-V;if(it.length<W+1)yt>1&&W>2&&(yt>4?(N+=`
`.concat(_,"...").concat(l),Q=!0):yt>3&&(N+=`
  `.concat(q[W-2]),rt++),N+=`
  `.concat(q[W-1]),rt++),V=W,F+=`
`.concat(P,"-").concat(l," ").concat(q[W]),rt++;else if(q.length<W+1)yt>1&&W>2&&(yt>4?(N+=`
`.concat(_,"...").concat(l),Q=!0):yt>3&&(N+=`
  `.concat(it[W-2]),rt++),N+=`
  `.concat(it[W-1]),rt++),V=W,N+=`
`.concat(b,"+").concat(l," ").concat(it[W]),rt++;else{var xt=q[W],Ft=it[W],Et=Ft!==xt&&(!T(Ft,",")||Ft.slice(0,-1)!==xt);Et&&T(xt,",")&&xt.slice(0,-1)===Ft&&(Et=!1,Ft+=","),Et?(yt>1&&W>2&&(yt>4?(N+=`
`.concat(_,"...").concat(l),Q=!0):yt>3&&(N+=`
  `.concat(it[W-2]),rt++),N+=`
  `.concat(it[W-1]),rt++),V=W,N+=`
`.concat(b,"+").concat(l," ").concat(Ft),F+=`
`.concat(P,"-").concat(l," ").concat(xt),rt+=2):(N+=F,F="",(yt===1||W===0)&&(N+=`
  `.concat(Ft),rt++))}if(rt>20&&W<Y-2)return"".concat(ht).concat(pt,`
`).concat(N,`
`).concat(_,"...").concat(l).concat(F,`
`)+"".concat(_,"...").concat(l)}return"".concat(ht).concat(Q?pt:"",`
`).concat(N).concat(F).concat(K).concat(Z)}var B=function(O){r(R,O);function R(C){var F;if(S(this,R),p(C)!=="object"||C===null)throw new c("options","Object",C);var N=C.message,V=C.operator,K=C.stackStartFn,Q=C.actual,at=C.expected,it=Error.stackTraceLimit;if(Error.stackTraceLimit=0,N!=null)F=v(this,y(R).call(this,String(N)));else if(M.stderr&&M.stderr.isTTY&&(M.stderr&&M.stderr.getColorDepth&&M.stderr.getColorDepth()!==1?(_="\x1B[34m",b="\x1B[32m",l="\x1B[39m",P="\x1B[31m"):(_="",b="",l="",P="")),p(Q)==="object"&&Q!==null&&p(at)==="object"&&at!==null&&"stack"in Q&&Q instanceof Error&&"stack"in at&&at instanceof Error&&(Q=w(Q),at=w(at)),V==="deepStrictEqual"||V==="strictEqual")F=v(this,y(R).call(this,z(Q,at,V)));else if(V==="notDeepStrictEqual"||V==="notStrictEqual"){var q=d[V],W=I(Q).split(`
`);if(V==="notStrictEqual"&&p(Q)==="object"&&Q!==null&&(q=d.notStrictEqualObject),W.length>30)for(W[26]="".concat(_,"...").concat(l);W.length>27;)W.pop();W.length===1?F=v(this,y(R).call(this,"".concat(q," ").concat(W[0]))):F=v(this,y(R).call(this,"".concat(q,`

`).concat(W.join(`
`),`
`)))}else{var Z=I(Q),G="",et=d[V];V==="notDeepEqual"||V==="notEqual"?(Z="".concat(d[V],`

`).concat(Z),Z.length>1024&&(Z="".concat(Z.slice(0,1021),"..."))):(G="".concat(I(at)),Z.length>512&&(Z="".concat(Z.slice(0,509),"...")),G.length>512&&(G="".concat(G.slice(0,509),"...")),V==="deepEqual"||V==="equal"?Z="".concat(et,`

`).concat(Z,`

should equal

`):G=" ".concat(V," ").concat(G)),F=v(this,y(R).call(this,"".concat(Z).concat(G)))}return Error.stackTraceLimit=it,F.generatedMessage=!N,Object.defineProperty(e(F),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),F.code="ERR_ASSERTION",F.actual=Q,F.expected=at,F.operator=V,Error.captureStackTrace&&Error.captureStackTrace(e(F),K),F.stack,F.name="AssertionError",v(F)}return g(R,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:s.custom,value:function(C,F){return s(this,E({},F,{customInspect:!1,depth:0}))}}]),R}(f(Error));$.exports=B},79616:function($,U,t){function M(p){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?M=function(x){return typeof x}:M=function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},M(p)}function E(p,x){if(!(p instanceof x))throw new TypeError("Cannot call a class as a function")}function i(p,x){return x&&(M(x)==="object"||typeof x=="function")?x:S(p)}function S(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function A(p){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)},A(p)}function g(p,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(x&&x.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),x&&v(p,x)}function v(p,x){return v=Object.setPrototypeOf||function(s,u){return s.__proto__=u,s},v(p,x)}var e={},r,f;function n(p,x,s){s||(s=Error);function u(T,k,_){return typeof x=="string"?x:x(T,k,_)}var c=function(T){g(k,T);function k(_,b,P){var l;return E(this,k),l=i(this,A(k).call(this,u(_,b,P))),l.code=p,l}return k}(s);e[p]=c}function a(p,x){if(Array.isArray(p)){var s=p.length;return p=p.map(function(u){return String(u)}),s>2?"one of ".concat(x," ").concat(p.slice(0,s-1).join(", "),", or ")+p[s-1]:s===2?"one of ".concat(x," ").concat(p[0]," or ").concat(p[1]):"of ".concat(x," ").concat(p[0])}else return"of ".concat(x," ").concat(String(p))}function o(p,x,s){return p.substr(!s||s<0?0:+s,x.length)===x}function h(p,x,s){return(s===void 0||s>p.length)&&(s=p.length),p.substring(s-x.length,s)===x}function y(p,x,s){return typeof s!="number"&&(s=0),s+x.length>p.length?!1:p.indexOf(x,s)!==-1}n("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),n("ERR_INVALID_ARG_TYPE",function(p,x,s){r===void 0&&(r=t(32791)),r(typeof p=="string","'name' must be a string");var u;typeof x=="string"&&o(x,"not ")?(u="must not be",x=x.replace(/^not /,"")):u="must be";var c;if(h(p," argument"))c="The ".concat(p," ").concat(u," ").concat(a(x,"type"));else{var T=y(p,".")?"property":"argument";c='The "'.concat(p,'" ').concat(T," ").concat(u," ").concat(a(x,"type"))}return c+=". Received type ".concat(M(s)),c},TypeError),n("ERR_INVALID_ARG_VALUE",function(p,x){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";f===void 0&&(f=t(43827));var u=f.inspect(x);return u.length>128&&(u="".concat(u.slice(0,128),"...")),"The argument '".concat(p,"' ").concat(s,". Received ").concat(u)},TypeError),n("ERR_INVALID_RETURN_VALUE",function(p,x,s){var u;return s&&s.constructor&&s.constructor.name?u="instance of ".concat(s.constructor.name):u="type ".concat(M(s)),"Expected ".concat(p,' to be returned from the "').concat(x,'"')+" function but got ".concat(u,".")},TypeError),n("ERR_MISSING_ARGS",function(){for(var p=arguments.length,x=new Array(p),s=0;s<p;s++)x[s]=arguments[s];r===void 0&&(r=t(32791)),r(x.length>0,"At least one arg needs to be specified");var u="The ",c=x.length;switch(x=x.map(function(T){return'"'.concat(T,'"')}),c){case 1:u+="".concat(x[0]," argument");break;case 2:u+="".concat(x[0]," and ").concat(x[1]," arguments");break;default:u+=x.slice(0,c-1).join(", "),u+=", and ".concat(x[c-1]," arguments");break}return"".concat(u," must be specified")},TypeError),$.exports.codes=e},74061:function($,U,t){function M(mt,gt){return S(mt)||i(mt,gt)||E()}function E(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(mt,gt){var wt=[],Pt=!0,Bt=!1,kt=void 0;try{for(var jt=mt[Symbol.iterator](),Ht;!(Pt=(Ht=jt.next()).done)&&(wt.push(Ht.value),!(gt&&wt.length===gt));Pt=!0);}catch(Vt){Bt=!0,kt=Vt}finally{try{!Pt&&jt.return!=null&&jt.return()}finally{if(Bt)throw kt}}return wt}function S(mt){if(Array.isArray(mt))return mt}function A(mt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?A=function(gt){return typeof gt}:A=function(gt){return gt&&typeof Symbol=="function"&&gt.constructor===Symbol&&gt!==Symbol.prototype?"symbol":typeof gt},A(mt)}var g=/a/g.flags!==void 0,v=function(mt){var gt=[];return mt.forEach(function(wt){return gt.push(wt)}),gt},e=function(mt){var gt=[];return mt.forEach(function(wt,Pt){return gt.push([Pt,wt])}),gt},r=Object.is?Object.is:t(64003),f=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},n=Number.isNaN?Number.isNaN:t(15567);function a(mt){return mt.call.bind(mt)}var o=a(Object.prototype.hasOwnProperty),h=a(Object.prototype.propertyIsEnumerable),y=a(Object.prototype.toString),p=t(43827).types,x=p.isAnyArrayBuffer,s=p.isArrayBufferView,u=p.isDate,c=p.isMap,T=p.isRegExp,k=p.isSet,_=p.isNativeError,b=p.isBoxedPrimitive,P=p.isNumberObject,l=p.isStringObject,d=p.isBooleanObject,L=p.isBigIntObject,w=p.isSymbolObject,I=p.isFloat32Array,z=p.isFloat64Array;function B(mt){if(mt.length===0||mt.length>10)return!0;for(var gt=0;gt<mt.length;gt++){var wt=mt.charCodeAt(gt);if(wt<48||wt>57)return!0}return mt.length===10&&mt>=Math.pow(2,32)}function O(mt){return Object.keys(mt).filter(B).concat(f(mt).filter(Object.prototype.propertyIsEnumerable.bind(mt)))}function R(mt,gt){if(mt===gt)return 0;for(var wt=mt.length,Pt=gt.length,Bt=0,kt=Math.min(wt,Pt);Bt<kt;++Bt)if(mt[Bt]!==gt[Bt]){wt=mt[Bt],Pt=gt[Bt];break}return wt<Pt?-1:Pt<wt?1:0}var C=!0,F=!1,N=0,V=1,K=2,Q=3;function at(mt,gt){return g?mt.source===gt.source&&mt.flags===gt.flags:RegExp.prototype.toString.call(mt)===RegExp.prototype.toString.call(gt)}function it(mt,gt){if(mt.byteLength!==gt.byteLength)return!1;for(var wt=0;wt<mt.byteLength;wt++)if(mt[wt]!==gt[wt])return!1;return!0}function q(mt,gt){return mt.byteLength!==gt.byteLength?!1:R(new Uint8Array(mt.buffer,mt.byteOffset,mt.byteLength),new Uint8Array(gt.buffer,gt.byteOffset,gt.byteLength))===0}function W(mt,gt){return mt.byteLength===gt.byteLength&&R(new Uint8Array(mt),new Uint8Array(gt))===0}function Z(mt,gt){return P(mt)?P(gt)&&r(Number.prototype.valueOf.call(mt),Number.prototype.valueOf.call(gt)):l(mt)?l(gt)&&String.prototype.valueOf.call(mt)===String.prototype.valueOf.call(gt):d(mt)?d(gt)&&Boolean.prototype.valueOf.call(mt)===Boolean.prototype.valueOf.call(gt):L(mt)?L(gt)&&BigInt.prototype.valueOf.call(mt)===BigInt.prototype.valueOf.call(gt):w(gt)&&Symbol.prototype.valueOf.call(mt)===Symbol.prototype.valueOf.call(gt)}function G(mt,gt,wt,Pt){if(mt===gt)return mt!==0?!0:wt?r(mt,gt):!0;if(wt){if(A(mt)!=="object")return typeof mt=="number"&&n(mt)&&n(gt);if(A(gt)!=="object"||mt===null||gt===null||Object.getPrototypeOf(mt)!==Object.getPrototypeOf(gt))return!1}else{if(mt===null||A(mt)!=="object")return gt===null||A(gt)!=="object"?mt==gt:!1;if(gt===null||A(gt)!=="object")return!1}var Bt=y(mt),kt=y(gt);if(Bt!==kt)return!1;if(Array.isArray(mt)){if(mt.length!==gt.length)return!1;var jt=O(mt),Ht=O(gt);return jt.length!==Ht.length?!1:nt(mt,gt,wt,Pt,V,jt)}if(Bt==="[object Object]"&&(!c(mt)&&c(gt)||!k(mt)&&k(gt)))return!1;if(u(mt)){if(!u(gt)||Date.prototype.getTime.call(mt)!==Date.prototype.getTime.call(gt))return!1}else if(T(mt)){if(!T(gt)||!at(mt,gt))return!1}else if(_(mt)||mt instanceof Error){if(mt.message!==gt.message||mt.name!==gt.name)return!1}else if(s(mt)){if(!wt&&(I(mt)||z(mt))){if(!it(mt,gt))return!1}else if(!q(mt,gt))return!1;var Vt=O(mt),ee=O(gt);return Vt.length!==ee.length?!1:nt(mt,gt,wt,Pt,N,Vt)}else{if(k(mt))return!k(gt)||mt.size!==gt.size?!1:nt(mt,gt,wt,Pt,K);if(c(mt))return!c(gt)||mt.size!==gt.size?!1:nt(mt,gt,wt,Pt,Q);if(x(mt)){if(!W(mt,gt))return!1}else if(b(mt)&&!Z(mt,gt))return!1}return nt(mt,gt,wt,Pt,N)}function et(mt,gt){return gt.filter(function(wt){return h(mt,wt)})}function nt(mt,gt,wt,Pt,Bt,kt){if(arguments.length===5){kt=Object.keys(mt);var jt=Object.keys(gt);if(kt.length!==jt.length)return!1}for(var Ht=0;Ht<kt.length;Ht++)if(!o(gt,kt[Ht]))return!1;if(wt&&arguments.length===5){var Vt=f(mt);if(Vt.length!==0){var ee=0;for(Ht=0;Ht<Vt.length;Ht++){var te=Vt[Ht];if(h(mt,te)){if(!h(gt,te))return!1;kt.push(te),ee++}else if(h(gt,te))return!1}var ae=f(gt);if(Vt.length!==ae.length&&et(gt,ae).length!==ee)return!1}else{var le=f(gt);if(le.length!==0&&et(gt,le).length!==0)return!1}}if(kt.length===0&&(Bt===N||Bt===V&&mt.length===0||mt.size===0))return!0;if(Pt===void 0)Pt={val1:new Map,val2:new Map,position:0};else{var ce=Pt.val1.get(mt);if(ce!==void 0){var pe=Pt.val2.get(gt);if(pe!==void 0)return ce===pe}Pt.position++}Pt.val1.set(mt,Pt.position),Pt.val2.set(gt,Pt.position);var we=xt(mt,gt,wt,kt,Pt,Bt);return Pt.val1.delete(mt),Pt.val2.delete(gt),we}function X(mt,gt,wt,Pt){for(var Bt=v(mt),kt=0;kt<Bt.length;kt++){var jt=Bt[kt];if(G(gt,jt,wt,Pt))return mt.delete(jt),!0}return!1}function Y(mt){switch(A(mt)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":mt=+mt;case"number":if(n(mt))return!1}return!0}function ot(mt,gt,wt){var Pt=Y(wt);return Pt??(gt.has(Pt)&&!mt.has(Pt))}function rt(mt,gt,wt,Pt,Bt){var kt=Y(wt);if(kt!=null)return kt;var jt=gt.get(kt);return jt===void 0&&!gt.has(kt)||!G(Pt,jt,!1,Bt)?!1:!mt.has(kt)&&G(Pt,jt,!1,Bt)}function ht(mt,gt,wt,Pt){for(var Bt=null,kt=v(mt),jt=0;jt<kt.length;jt++){var Ht=kt[jt];if(A(Ht)==="object"&&Ht!==null)Bt===null&&(Bt=new Set),Bt.add(Ht);else if(!gt.has(Ht)){if(wt||!ot(mt,gt,Ht))return!1;Bt===null&&(Bt=new Set),Bt.add(Ht)}}if(Bt!==null){for(var Vt=v(gt),ee=0;ee<Vt.length;ee++){var te=Vt[ee];if(A(te)==="object"&&te!==null){if(!X(Bt,te,wt,Pt))return!1}else if(!wt&&!mt.has(te)&&!X(Bt,te,wt,Pt))return!1}return Bt.size===0}return!0}function pt(mt,gt,wt,Pt,Bt,kt){for(var jt=v(mt),Ht=0;Ht<jt.length;Ht++){var Vt=jt[Ht];if(G(wt,Vt,Bt,kt)&&G(Pt,gt.get(Vt),Bt,kt))return mt.delete(Vt),!0}return!1}function yt(mt,gt,wt,Pt){for(var Bt=null,kt=e(mt),jt=0;jt<kt.length;jt++){var Ht=M(kt[jt],2),Vt=Ht[0],ee=Ht[1];if(A(Vt)==="object"&&Vt!==null)Bt===null&&(Bt=new Set),Bt.add(Vt);else{var te=gt.get(Vt);if(te===void 0&&!gt.has(Vt)||!G(ee,te,wt,Pt)){if(wt||!rt(mt,gt,Vt,ee,Pt))return!1;Bt===null&&(Bt=new Set),Bt.add(Vt)}}}if(Bt!==null){for(var ae=e(gt),le=0;le<ae.length;le++){var ce=M(ae[le],2),Vt=ce[0],pe=ce[1];if(A(Vt)==="object"&&Vt!==null){if(!pt(Bt,mt,Vt,pe,wt,Pt))return!1}else if(!wt&&(!mt.has(Vt)||!G(mt.get(Vt),pe,!1,Pt))&&!pt(Bt,mt,Vt,pe,!1,Pt))return!1}return Bt.size===0}return!0}function xt(mt,gt,wt,Pt,Bt,kt){var jt=0;if(kt===K){if(!ht(mt,gt,wt,Bt))return!1}else if(kt===Q){if(!yt(mt,gt,wt,Bt))return!1}else if(kt===V)for(;jt<mt.length;jt++)if(o(mt,jt)){if(!o(gt,jt)||!G(mt[jt],gt[jt],wt,Bt))return!1}else{if(o(gt,jt))return!1;for(var Ht=Object.keys(mt);jt<Ht.length;jt++){var Vt=Ht[jt];if(!o(gt,Vt)||!G(mt[Vt],gt[Vt],wt,Bt))return!1}return Ht.length===Object.keys(gt).length}for(jt=0;jt<Pt.length;jt++){var ee=Pt[jt];if(!G(mt[ee],gt[ee],wt,Bt))return!1}return!0}function Ft(mt,gt){return G(mt,gt,F)}function Et(mt,gt){return G(mt,gt,C)}$.exports={isDeepEqual:Ft,isDeepStrictEqual:Et}},95341:function($,U){U.byteLength=v,U.toByteArray=r,U.fromByteArray=a;for(var t=[],M=[],E=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S=0,A=i.length;S<A;++S)t[S]=i[S],M[i.charCodeAt(S)]=S;M["-".charCodeAt(0)]=62,M["_".charCodeAt(0)]=63;function g(o){var h=o.length;if(h%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=o.indexOf("=");y===-1&&(y=h);var p=y===h?0:4-y%4;return[y,p]}function v(o){var h=g(o),y=h[0],p=h[1];return(y+p)*3/4-p}function e(o,h,y){return(h+y)*3/4-y}function r(o){var h,y=g(o),p=y[0],x=y[1],s=new E(e(o,p,x)),u=0,c=x>0?p-4:p,T;for(T=0;T<c;T+=4)h=M[o.charCodeAt(T)]<<18|M[o.charCodeAt(T+1)]<<12|M[o.charCodeAt(T+2)]<<6|M[o.charCodeAt(T+3)],s[u++]=h>>16&255,s[u++]=h>>8&255,s[u++]=h&255;return x===2&&(h=M[o.charCodeAt(T)]<<2|M[o.charCodeAt(T+1)]>>4,s[u++]=h&255),x===1&&(h=M[o.charCodeAt(T)]<<10|M[o.charCodeAt(T+1)]<<4|M[o.charCodeAt(T+2)]>>2,s[u++]=h>>8&255,s[u++]=h&255),s}function f(o){return t[o>>18&63]+t[o>>12&63]+t[o>>6&63]+t[o&63]}function n(o,h,y){for(var p,x=[],s=h;s<y;s+=3)p=(o[s]<<16&16711680)+(o[s+1]<<8&65280)+(o[s+2]&255),x.push(f(p));return x.join("")}function a(o){for(var h,y=o.length,p=y%3,x=[],s=16383,u=0,c=y-p;u<c;u+=s)x.push(n(o,u,u+s>c?c:u+s));return p===1?(h=o[y-1],x.push(t[h>>2]+t[h<<4&63]+"==")):p===2&&(h=(o[y-2]<<8)+o[y-1],x.push(t[h>>10]+t[h>>4&63]+t[h<<2&63]+"=")),x.join("")}},91358:function($){function U(A,g,v,e,r){for(var f=r+1;e<=r;){var n=e+r>>>1,a=A[n],o=v!==void 0?v(a,g):a-g;o>=0?(f=n,r=n-1):e=n+1}return f}function t(A,g,v,e,r){for(var f=r+1;e<=r;){var n=e+r>>>1,a=A[n],o=v!==void 0?v(a,g):a-g;o>0?(f=n,r=n-1):e=n+1}return f}function M(A,g,v,e,r){for(var f=e-1;e<=r;){var n=e+r>>>1,a=A[n],o=v!==void 0?v(a,g):a-g;o<0?(f=n,e=n+1):r=n-1}return f}function E(A,g,v,e,r){for(var f=e-1;e<=r;){var n=e+r>>>1,a=A[n],o=v!==void 0?v(a,g):a-g;o<=0?(f=n,e=n+1):r=n-1}return f}function i(A,g,v,e,r){for(;e<=r;){var f=e+r>>>1,n=A[f],a=v!==void 0?v(n,g):n-g;if(a===0)return f;a<=0?e=f+1:r=f-1}return-1}function S(A,g,v,e,r,f){return typeof v=="function"?f(A,g,v,e===void 0?0:e|0,r===void 0?A.length-1:r|0):f(A,g,void 0,v===void 0?0:v|0,e===void 0?A.length-1:e|0)}$.exports={ge:function(A,g,v,e,r){return S(A,g,v,e,r,U)},gt:function(A,g,v,e,r){return S(A,g,v,e,r,t)},lt:function(A,g,v,e,r){return S(A,g,v,e,r,M)},le:function(A,g,v,e,r){return S(A,g,v,e,r,E)},eq:function(A,g,v,e,r){return S(A,g,v,e,r,i)}}},13547:function($,U){"use restrict";var t=32;U.INT_BITS=t,U.INT_MAX=2147483647,U.INT_MIN=-1<<t-1,U.sign=function(i){return(i>0)-(i<0)},U.abs=function(i){var S=i>>t-1;return(i^S)-S},U.min=function(i,S){return S^(i^S)&-(i<S)},U.max=function(i,S){return i^(i^S)&-(i<S)},U.isPow2=function(i){return!(i&i-1)&&!!i},U.log2=function(i){var S,A;return S=(i>65535)<<4,i>>>=S,A=(i>255)<<3,i>>>=A,S|=A,A=(i>15)<<2,i>>>=A,S|=A,A=(i>3)<<1,i>>>=A,S|=A,S|i>>1},U.log10=function(i){return i>=1e9?9:i>=1e8?8:i>=1e7?7:i>=1e6?6:i>=1e5?5:i>=1e4?4:i>=1e3?3:i>=100?2:i>=10?1:0},U.popCount=function(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),(i+(i>>>4)&252645135)*16843009>>>24};function M(i){var S=32;return i&=-i,i&&S--,i&65535&&(S-=16),i&16711935&&(S-=8),i&252645135&&(S-=4),i&858993459&&(S-=2),i&1431655765&&(S-=1),S}U.countTrailingZeros=M,U.nextPow2=function(i){return i+=i===0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1},U.prevPow2=function(i){return i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i-(i>>>1)},U.parity=function(i){return i^=i>>>16,i^=i>>>8,i^=i>>>4,i&=15,27030>>>i&1};var E=new Array(256);(function(i){for(var S=0;S<256;++S){var A=S,g=S,v=7;for(A>>>=1;A;A>>>=1)g<<=1,g|=A&1,--v;i[S]=g<<v&255}})(E),U.reverse=function(i){return E[i&255]<<24|E[i>>>8&255]<<16|E[i>>>16&255]<<8|E[i>>>24&255]},U.interleave2=function(i,S){return i&=65535,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,S&=65535,S=(S|S<<8)&16711935,S=(S|S<<4)&252645135,S=(S|S<<2)&858993459,S=(S|S<<1)&1431655765,i|S<<1},U.deinterleave2=function(i,S){return i=i>>>S&1431655765,i=(i|i>>>1)&858993459,i=(i|i>>>2)&252645135,i=(i|i>>>4)&16711935,i=(i|i>>>16)&65535,i<<16>>16},U.interleave3=function(i,S,A){return i&=1023,i=(i|i<<16)&4278190335,i=(i|i<<8)&251719695,i=(i|i<<4)&3272356035,i=(i|i<<2)&1227133513,S&=1023,S=(S|S<<16)&4278190335,S=(S|S<<8)&251719695,S=(S|S<<4)&3272356035,S=(S|S<<2)&1227133513,i|=S<<1,A&=1023,A=(A|A<<16)&4278190335,A=(A|A<<8)&251719695,A=(A|A<<4)&3272356035,A=(A|A<<2)&1227133513,i|A<<2},U.deinterleave3=function(i,S){return i=i>>>S&1227133513,i=(i|i>>>2)&3272356035,i=(i|i>>>4)&251719695,i=(i|i>>>8)&4278190335,i=(i|i>>>16)&1023,i<<22>>22},U.nextCombination=function(i){var S=i|i-1;return S+1|(~S&-~S)-1>>>M(i)+1}},44781:function($,U,t){var M=t(53435);$.exports=i;var E=1e20;function i(g,v){v||(v={});var e=v.cutoff==null?.25:v.cutoff,r=v.radius==null?8:v.radius,f=v.channel||0,n,a,o,h,y,p,x,s,u,c,T;if(ArrayBuffer.isView(g)||Array.isArray(g)){if(!v.width||!v.height)throw Error("For raw data width and height should be provided by options");n=v.width,a=v.height,h=g,v.stride?p=v.stride:p=Math.floor(g.length/n/a)}else window.HTMLCanvasElement&&g instanceof window.HTMLCanvasElement?(s=g,x=s.getContext("2d"),n=s.width,a=s.height,u=x.getImageData(0,0,n,a),h=u.data,p=4):window.CanvasRenderingContext2D&&g instanceof window.CanvasRenderingContext2D?(s=g.canvas,x=g,n=s.width,a=s.height,u=x.getImageData(0,0,n,a),h=u.data,p=4):window.ImageData&&g instanceof window.ImageData&&(u=g,n=g.width,a=g.height,h=u.data,p=4);if(o=Math.max(n,a),window.Uint8ClampedArray&&h instanceof window.Uint8ClampedArray||window.Uint8Array&&h instanceof window.Uint8Array)for(y=h,h=Array(n*a),c=0,T=y.length;c<T;c++)h[c]=y[c*p+f]/255;else if(p!==1)throw Error("Raw data can have only 1 value per pixel");var k=Array(n*a),_=Array(n*a),b=Array(o),P=Array(o),l=Array(o+1),d=Array(o);for(c=0,T=n*a;c<T;c++){var L=h[c];k[c]=L===1?0:L===0?E:Math.pow(Math.max(0,.5-L),2),_[c]=L===1?E:L===0?0:Math.pow(Math.max(0,L-.5),2)}S(k,n,a,b,P,d,l),S(_,n,a,b,P,d,l);var w=window.Float32Array?new Float32Array(n*a):new Array(n*a);for(c=0,T=n*a;c<T;c++)w[c]=M(1-((k[c]-_[c])/r+e),0,1);return w}function S(g,v,e,r,f,n,a){for(var o=0;o<v;o++){for(var h=0;h<e;h++)r[h]=g[h*v+o];for(A(r,f,n,a,e),h=0;h<e;h++)g[h*v+o]=f[h]}for(h=0;h<e;h++){for(o=0;o<v;o++)r[o]=g[h*v+o];for(A(r,f,n,a,v),o=0;o<v;o++)g[h*v+o]=Math.sqrt(f[o])}}function A(g,v,e,r,f){e[0]=0,r[0]=-E,r[1]=+E;for(var n=1,a=0;n<f;n++){for(var o=(g[n]+n*n-(g[e[a]]+e[a]*e[a]))/(2*n-2*e[a]);o<=r[a];)a--,o=(g[n]+n*n-(g[e[a]]+e[a]*e[a]))/(2*n-2*e[a]);a++,e[a]=n,r[a]=o,r[a+1]=+E}for(n=0,a=0;n<f;n++){for(;r[a+1]<n;)a++;v[n]=(n-e[a])*(n-e[a])+g[e[a]]}}},6614:function($,U,t){var M=t(68318),E=t(68222),i=E(M("String.prototype.indexOf"));$.exports=function(S,A){var g=M(S,!!A);return typeof g=="function"&&i(S,".prototype.")>-1?E(g):g}},68222:function($,U,t){var M=t(77575),E=t(68318),i=E("%Function.prototype.apply%"),S=E("%Function.prototype.call%"),A=E("%Reflect.apply%",!0)||M.call(S,i),g=E("%Object.getOwnPropertyDescriptor%",!0),v=E("%Object.defineProperty%",!0),e=E("%Math.max%");if(v)try{v({},"a",{value:1})}catch{v=null}$.exports=function(f){var n=A(M,S,arguments);if(g&&v){var a=g(n,"length");a.configurable&&v(n,"length",{value:1+e(0,f.length-(arguments.length-1))})}return n};var r=function(){return A(M,i,arguments)};v?v($.exports,"apply",{value:r}):$.exports.apply=r},53435:function($){$.exports=U;function U(t,M,E){return M<E?t<M?M:t>E?E:t:t<E?E:t>M?M:t}},6475:function($,U,t){var M=t(53435);$.exports=E,$.exports.to=E,$.exports.from=i;function E(S,A){A==null&&(A=!0);var g=S[0],v=S[1],e=S[2],r=S[3];r==null&&(r=A?1:255),A&&(g*=255,v*=255,e*=255,r*=255),g=M(g,0,255)&255,v=M(v,0,255)&255,e=M(e,0,255)&255,r=M(r,0,255)&255;var f=g*16777216+(v<<16)+(e<<8)+r;return f}function i(S,A){S=+S;var g=S>>>24,v=(S&16711680)>>>16,e=(S&65280)>>>8,r=S&255;return A===!1?[g,v,e,r]:[g/255,v/255,e/255,r/255]}},76857:function($){$.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},25075:function($,U,t){var M=t(36652),E=t(53435),i=t(90660);$.exports=function(A,g){(g==="float"||!g)&&(g="array"),g==="uint"&&(g="uint8"),g==="uint_clamped"&&(g="uint8_clamped");var v=i(g),e=new v(4),r=g!=="uint8"&&g!=="uint8_clamped";return(!A.length||typeof A=="string")&&(A=M(A),A[0]/=255,A[1]/=255,A[2]/=255),S(A)?(e[0]=A[0],e[1]=A[1],e[2]=A[2],e[3]=A[3]!=null?A[3]:255,r&&(e[0]/=255,e[1]/=255,e[2]/=255,e[3]/=255),e):(r?(e[0]=A[0],e[1]=A[1],e[2]=A[2],e[3]=A[3]!=null?A[3]:1):(e[0]=E(Math.floor(A[0]*255),0,255),e[1]=E(Math.floor(A[1]*255),0,255),e[2]=E(Math.floor(A[2]*255),0,255),e[3]=A[3]==null?255:E(Math.floor(A[3]*255),0,255)),e)};function S(A){return!!(A instanceof Uint8Array||A instanceof Uint8ClampedArray||Array.isArray(A)&&(A[0]>1||A[0]===0)&&(A[1]>1||A[1]===0)&&(A[2]>1||A[2]===0)&&(!A[3]||A[3]>1))}},90736:function($,U,t){var M=t(76857),E=t(10973),i=t(46775);$.exports=A;var S={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function A(g){var v,e=[],r=1,f;if(typeof g=="string")if(M[g])e=M[g].slice(),f="rgb";else if(g==="transparent")r=0,f="rgb",e=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(g)){var n=g.slice(1),a=n.length,o=a<=4;r=1,o?(e=[parseInt(n[0]+n[0],16),parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16)],a===4&&(r=parseInt(n[3]+n[3],16)/255)):(e=[parseInt(n[0]+n[1],16),parseInt(n[2]+n[3],16),parseInt(n[4]+n[5],16)],a===8&&(r=parseInt(n[6]+n[7],16)/255)),e[0]||(e[0]=0),e[1]||(e[1]=0),e[2]||(e[2]=0),f="rgb"}else if(v=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(g)){var h=v[1],y=h==="rgb",n=h.replace(/a$/,"");f=n;var a=n==="cmyk"?4:n==="gray"?1:3;e=v[2].trim().split(/\s*,\s*/).map(function(u,c){if(/%$/.test(u))return c===a?parseFloat(u)/100:n==="rgb"?parseFloat(u)*255/100:parseFloat(u);if(n[c]==="h"){if(/deg$/.test(u))return parseFloat(u);if(S[u]!==void 0)return S[u]}return parseFloat(u)}),h===n&&e.push(1),r=y||e[a]===void 0?1:e[a],e=e.slice(0,a)}else g.length>10&&/[0-9](?:\s|\/)/.test(g)&&(e=g.match(/([0-9]+)/g).map(function(x){return parseFloat(x)}),f=g.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(g))f="rgb",e=[g>>>16,(g&65280)>>>8,g&255];else if(E(g)){var p=i(g.r,g.red,g.R,null);p!==null?(f="rgb",e=[p,i(g.g,g.green,g.G),i(g.b,g.blue,g.B)]):(f="hsl",e=[i(g.h,g.hue,g.H),i(g.s,g.saturation,g.S),i(g.l,g.lightness,g.L,g.b,g.brightness)]),r=i(g.a,g.alpha,g.opacity,1),g.opacity!=null&&(r/=100)}else(Array.isArray(g)||t.g.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(g))&&(e=[g[0],g[1],g[2]],f="rgb",r=g.length===4?g[3]:1);return{space:f,values:e,alpha:r}}},36652:function($,U,t){var M=t(90736),E=t(80009),i=t(53435);$.exports=function(S){var A,g=M(S);return g.space?(A=Array(3),A[0]=i(g.values[0],0,255),A[1]=i(g.values[1],0,255),A[2]=i(g.values[2],0,255),g.space[0]==="h"&&(A=E.rgb(A)),A.push(i(g.alpha,0,1)),A):[]}},80009:function($,U,t){var M=t(6866);$.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(E){var i=E[0]/360,S=E[1]/100,A=E[2]/100,g,v,e,r,f;if(S===0)return f=A*255,[f,f,f];A<.5?v=A*(1+S):v=A+S-A*S,g=2*A-v,r=[0,0,0];for(var n=0;n<3;n++)e=i+.3333333333333333*-(n-1),e<0?e++:e>1&&e--,6*e<1?f=g+(v-g)*6*e:2*e<1?f=v:3*e<2?f=g+(v-g)*(.6666666666666666-e)*6:f=g,r[n]=f*255;return r}},M.hsl=function(E){var i=E[0]/255,S=E[1]/255,A=E[2]/255,g=Math.min(i,S,A),v=Math.max(i,S,A),e=v-g,r,f,n;return v===g?r=0:i===v?r=(S-A)/e:S===v?r=2+(A-i)/e:A===v&&(r=4+(i-S)/e),r=Math.min(r*60,360),r<0&&(r+=360),n=(g+v)/2,v===g?f=0:n<=.5?f=e/(v+g):f=e/(2-v-g),[r,f*100,n*100]}},6866:function($){$.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},24138:function($){$.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},72791:function($,U,t){$.exports={parse:t(41004),stringify:t(53313)}},63625:function($,U,t){var M=t(40402);$.exports={isSize:function(E){return/^[\d\.]/.test(E)||E.indexOf("/")!==-1||M.indexOf(E)!==-1}}},41004:function($,U,t){var M=t(90448),E=t(38732),i=t(41901),S=t(15659),A=t(96209),g=t(83794),v=t(99011),e=t(63625).isSize;$.exports=f;var r=f.cache={};function f(a){if(typeof a!="string")throw new Error("Font argument must be a string.");if(r[a])return r[a];if(a==="")throw new Error("Cannot parse an empty string.");if(i.indexOf(a)!==-1)return r[a]={system:a};for(var o={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},h=v(a,/\s+/),y;y=h.shift();){if(E.indexOf(y)!==-1)return["style","variant","weight","stretch"].forEach(function(x){o[x]=y}),r[a]=o;if(A.indexOf(y)!==-1){o.style=y;continue}if(y==="normal"||y==="small-caps"){o.variant=y;continue}if(g.indexOf(y)!==-1){o.stretch=y;continue}if(S.indexOf(y)!==-1){o.weight=y;continue}if(e(y)){var p=v(y,"/");if(o.size=p[0],p[1]!=null?o.lineHeight=n(p[1]):h[0]==="/"&&(h.shift(),o.lineHeight=n(h.shift())),!h.length)throw new Error("Missing required font-family.");return o.family=v(h.join(" "),/\s*,\s*/).map(M),r[a]=o}throw new Error("Unknown or unsupported font token: "+y)}throw new Error("Missing required font-size.")}function n(a){var o=parseFloat(a);return o.toString()===a?o:a}},53313:function($,U,t){var M=t(71299),E=t(63625).isSize,i=a(t(38732)),S=a(t(41901)),A=a(t(15659)),g=a(t(96209)),v=a(t(83794)),e={normal:1,"small-caps":1},r={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},f={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};$.exports=function(o){if(o=M(o,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),o.system)return o.system&&n(o.system,S),o.system;if(n(o.style,g),n(o.variant,e),n(o.weight,A),n(o.stretch,v),o.size==null&&(o.size=f.size),typeof o.size=="number"&&(o.size+="px"),!E)throw Error("Bad size value `"+o.size+"`");o.family||(o.family=f.family),Array.isArray(o.family)&&(o.family.length||(o.family=[f.family]),o.family=o.family.map(function(y){return r[y]?y:'"'+y+'"'}).join(", "));var h=[];return h.push(o.style),o.variant!==o.style&&h.push(o.variant),o.weight!==o.variant&&o.weight!==o.style&&h.push(o.weight),o.stretch!==o.weight&&o.stretch!==o.variant&&o.stretch!==o.style&&h.push(o.stretch),h.push(o.size+(o.lineHeight==null||o.lineHeight==="normal"||o.lineHeight+""=="1"?"":"/"+o.lineHeight)),h.push(o.family),h.filter(Boolean).join(" ")};function n(o,h){if(o&&!h[o]&&!i[o])throw Error("Unknown keyword `"+o+"`");return o}function a(o){for(var h={},y=0;y<o.length;y++)h[o[y]]=1;return h}},55174:function($,U,t){var M=t(24582),E=t(10424),i=t(82527),S=t(19012),A=t(21780),g=t(16906),v=Function.prototype.bind,e=Object.defineProperty,r=Object.prototype.hasOwnProperty,f;f=function(n,a,o){var h=E(a)&&i(a.value),y;return y=S(a),delete y.writable,delete y.value,y.get=function(){return!o.overwriteDefinition&&r.call(this,n)?h:(a.value=v.call(h,o.resolveContext?o.resolveContext(this):this),e(this,n,a),this[n])},y},$.exports=function(n){var a=A(arguments[1]);return M(a.resolveContext)&&i(a.resolveContext),g(n,function(o,h){return f(h,o,a)})}},62072:function($,U,t){var M=t(24582),E=t(84985),i=t(95879),S=t(21780),A=t(66741),g=$.exports=function(v,e){var r,f,n,a,o;return arguments.length<2||typeof v!="string"?(a=e,e=v,v=null):a=arguments[2],M(v)?(r=A.call(v,"c"),f=A.call(v,"e"),n=A.call(v,"w")):(r=n=!0,f=!1),o={value:e,configurable:r,enumerable:f,writable:n},a?i(S(a),o):o};g.gs=function(v,e,r){var f,n,a,o;return typeof v!="string"?(a=r,r=e,e=v,v=null):a=arguments[3],M(e)?E(e)?M(r)?E(r)||(a=r,r=void 0):r=void 0:(a=e,e=r=void 0):e=void 0,M(v)?(f=A.call(v,"c"),n=A.call(v,"e")):(f=!0,n=!1),o={get:e,set:r,configurable:f,enumerable:n},a?i(S(a),o):o}},33064:function($,U,t){t.d(U,{j2:function(){return M},Fp:function(){return S},J6:function(){return g},TS:function(){return v},VV:function(){return e},w6:function(){return r},Sm:function(){return f}});function M(n,a){return n<a?-1:n>a?1:n>=a?0:NaN}function E(n){return n.length===1&&(n=i(n)),{left:function(a,o,h,y){for(h==null&&(h=0),y==null&&(y=a.length);h<y;){var p=h+y>>>1;n(a[p],o)<0?h=p+1:y=p}return h},right:function(a,o,h,y){for(h==null&&(h=0),y==null&&(y=a.length);h<y;){var p=h+y>>>1;n(a[p],o)>0?y=p:h=p+1}return h}}}function i(n){return function(a,o){return M(n(a),o)}}E(M);function S(n,a){var o=n.length,h=-1,y,p;if(a==null){for(;++h<o;)if((y=n[h])!=null&&y>=y)for(p=y;++h<o;)(y=n[h])!=null&&y>p&&(p=y)}else for(;++h<o;)if((y=a(n[h],h,n))!=null&&y>=y)for(p=y;++h<o;)(y=a(n[h],h,n))!=null&&y>p&&(p=y);return p}function A(n){return n===null?NaN:+n}function g(n,a){var o=n.length,h=o,y=-1,p,x=0;if(a==null)for(;++y<o;)isNaN(p=A(n[y]))?--h:x+=p;else for(;++y<o;)isNaN(p=A(a(n[y],y,n)))?--h:x+=p;if(h)return x/h}function v(n){for(var a=n.length,o,h=-1,y=0,p,x;++h<a;)y+=n[h].length;for(p=new Array(y);--a>=0;)for(x=n[a],o=x.length;--o>=0;)p[--y]=x[o];return p}function e(n,a){var o=n.length,h=-1,y,p;if(a==null){for(;++h<o;)if((y=n[h])!=null&&y>=y)for(p=y;++h<o;)(y=n[h])!=null&&p>y&&(p=y)}else for(;++h<o;)if((y=a(n[h],h,n))!=null&&y>=y)for(p=y;++h<o;)(y=a(n[h],h,n))!=null&&p>y&&(p=y);return p}function r(n,a,o){n=+n,a=+a,o=(y=arguments.length)<2?(a=n,n=0,1):y<3?1:+o;for(var h=-1,y=Math.max(0,Math.ceil((a-n)/o))|0,p=new Array(y);++h<y;)p[h]=n+h*o;return p}function f(n,a){var o=n.length,h=-1,y,p=0;if(a==null)for(;++h<o;)(y=+n[h])&&(p+=y);else for(;++h<o;)(y=+a(n[h],h,n))&&(p+=y);return p}},15140:function($,U,t){t.d(U,{UI:function(){return S},b1:function(){return A}});var M="$";function E(){}E.prototype=i.prototype={constructor:E,has:function(a){return M+a in this},get:function(a){return this[M+a]},set:function(a,o){return this[M+a]=o,this},remove:function(a){var o=M+a;return o in this&&delete this[o]},clear:function(){for(var a in this)a[0]===M&&delete this[a]},keys:function(){var a=[];for(var o in this)o[0]===M&&a.push(o.slice(1));return a},values:function(){var a=[];for(var o in this)o[0]===M&&a.push(this[o]);return a},entries:function(){var a=[];for(var o in this)o[0]===M&&a.push({key:o.slice(1),value:this[o]});return a},size:function(){var a=0;for(var o in this)o[0]===M&&++a;return a},empty:function(){for(var a in this)if(a[0]===M)return!1;return!0},each:function(a){for(var o in this)o[0]===M&&a(this[o],o.slice(1),this)}};function i(a,o){var h=new E;if(a instanceof E)a.each(function(u,c){h.set(c,u)});else if(Array.isArray(a)){var y=-1,p=a.length,x;if(o==null)for(;++y<p;)h.set(y,a[y]);else for(;++y<p;)h.set(o(x=a[y],y,a),x)}else if(a)for(var s in a)h.set(s,a[s]);return h}var S=i;function A(){var a=[],o=[],h,y,p;function x(u,c,T,k){if(c>=a.length)return h!=null&&u.sort(h),y!=null?y(u):u;for(var _=-1,b=u.length,P=a[c++],l,d,L=S(),w,I=T();++_<b;)(w=L.get(l=P(d=u[_])+""))?w.push(d):L.set(l,[d]);return L.each(function(z,B){k(I,B,x(z,c,T,k))}),I}function s(u,c){if(++c>a.length)return u;var T,k=o[c-1];return y!=null&&c>=a.length?T=u.entries():(T=[],u.each(function(_,b){T.push({key:b,values:s(_,c)})})),k!=null?T.sort(function(_,b){return k(_.key,b.key)}):T}return p={object:function(u){return x(u,0,g,v)},map:function(u){return x(u,0,e,r)},entries:function(u){return s(x(u,0,e,r),0)},key:function(u){return a.push(u),p},sortKeys:function(u){return o[a.length-1]=u,p},sortValues:function(u){return h=u,p},rollup:function(u){return y=u,p}}}function g(){return{}}function v(a,o,h){a[o]=h}function e(){return S()}function r(a,o,h){a.set(o,h)}function f(){}var n=S.prototype;f.prototype={constructor:f,has:n.has,add:function(a){return a+="",this[M+a]=a,this},remove:n.remove,clear:n.clear,values:n.keys,size:n.size,empty:n.empty,each:n.each}},49887:function($,U,t){t.r(U),t.d(U,{forceCenter:function(){return M},forceCollide:function(){return L},forceLink:function(){return B},forceManyBody:function(){return jt},forceRadial:function(){return Ht},forceSimulation:function(){return kt},forceX:function(){return Vt},forceY:function(){return ee}});function M(te,ae){var le;te==null&&(te=0),ae==null&&(ae=0);function ce(){var pe,we=le.length,ve,Mt=0,It=0;for(pe=0;pe<we;++pe)ve=le[pe],Mt+=ve.x,It+=ve.y;for(Mt=Mt/we-te,It=It/we-ae,pe=0;pe<we;++pe)ve=le[pe],ve.x-=Mt,ve.y-=It}return ce.initialize=function(pe){le=pe},ce.x=function(pe){return arguments.length?(te=+pe,ce):te},ce.y=function(pe){return arguments.length?(ae=+pe,ce):ae},ce}function E(te){return function(){return te}}function i(){return(Math.random()-.5)*1e-6}function S(te){var ae=+this._x.call(null,te),le=+this._y.call(null,te);return A(this.cover(ae,le),ae,le,te)}function A(te,ae,le,ce){if(isNaN(ae)||isNaN(le))return te;var pe,we=te._root,ve={data:ce},Mt=te._x0,It=te._y0,Rt=te._x1,zt=te._y1,Tt,ft,ut,vt,St,Ot,Xt,$t;if(!we)return te._root=ve,te;for(;we.length;)if((St=ae>=(Tt=(Mt+Rt)/2))?Mt=Tt:Rt=Tt,(Ot=le>=(ft=(It+zt)/2))?It=ft:zt=ft,pe=we,!(we=we[Xt=Ot<<1|St]))return pe[Xt]=ve,te;if(ut=+te._x.call(null,we.data),vt=+te._y.call(null,we.data),ae===ut&&le===vt)return ve.next=we,pe?pe[Xt]=ve:te._root=ve,te;do pe=pe?pe[Xt]=new Array(4):te._root=new Array(4),(St=ae>=(Tt=(Mt+Rt)/2))?Mt=Tt:Rt=Tt,(Ot=le>=(ft=(It+zt)/2))?It=ft:zt=ft;while((Xt=Ot<<1|St)===($t=(vt>=ft)<<1|ut>=Tt));return pe[$t]=we,pe[Xt]=ve,te}function g(te){var ae,le,ce=te.length,pe,we,ve=new Array(ce),Mt=new Array(ce),It=1/0,Rt=1/0,zt=-1/0,Tt=-1/0;for(le=0;le<ce;++le)isNaN(pe=+this._x.call(null,ae=te[le]))||isNaN(we=+this._y.call(null,ae))||(ve[le]=pe,Mt[le]=we,pe<It&&(It=pe),pe>zt&&(zt=pe),we<Rt&&(Rt=we),we>Tt&&(Tt=we));if(It>zt||Rt>Tt)return this;for(this.cover(It,Rt).cover(zt,Tt),le=0;le<ce;++le)A(this,ve[le],Mt[le],te[le]);return this}function v(te,ae){if(isNaN(te=+te)||isNaN(ae=+ae))return this;var le=this._x0,ce=this._y0,pe=this._x1,we=this._y1;if(isNaN(le))pe=(le=Math.floor(te))+1,we=(ce=Math.floor(ae))+1;else{for(var ve=pe-le,Mt=this._root,It,Rt;le>te||te>=pe||ce>ae||ae>=we;)switch(Rt=(ae<ce)<<1|te<le,It=new Array(4),It[Rt]=Mt,Mt=It,ve*=2,Rt){case 0:pe=le+ve,we=ce+ve;break;case 1:le=pe-ve,we=ce+ve;break;case 2:pe=le+ve,ce=we-ve;break;case 3:le=pe-ve,ce=we-ve;break}this._root&&this._root.length&&(this._root=Mt)}return this._x0=le,this._y0=ce,this._x1=pe,this._y1=we,this}function e(){var te=[];return this.visit(function(ae){if(!ae.length)do te.push(ae.data);while(ae=ae.next)}),te}function r(te){return arguments.length?this.cover(+te[0][0],+te[0][1]).cover(+te[1][0],+te[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function f(te,ae,le,ce,pe){this.node=te,this.x0=ae,this.y0=le,this.x1=ce,this.y1=pe}function n(te,ae,le){var ce,pe=this._x0,we=this._y0,ve,Mt,It,Rt,zt=this._x1,Tt=this._y1,ft=[],ut=this._root,vt,St;for(ut&&ft.push(new f(ut,pe,we,zt,Tt)),le==null?le=1/0:(pe=te-le,we=ae-le,zt=te+le,Tt=ae+le,le*=le);vt=ft.pop();)if(!(!(ut=vt.node)||(ve=vt.x0)>zt||(Mt=vt.y0)>Tt||(It=vt.x1)<pe||(Rt=vt.y1)<we))if(ut.length){var Ot=(ve+It)/2,Xt=(Mt+Rt)/2;ft.push(new f(ut[3],Ot,Xt,It,Rt),new f(ut[2],ve,Xt,Ot,Rt),new f(ut[1],Ot,Mt,It,Xt),new f(ut[0],ve,Mt,Ot,Xt)),(St=(ae>=Xt)<<1|te>=Ot)&&(vt=ft[ft.length-1],ft[ft.length-1]=ft[ft.length-1-St],ft[ft.length-1-St]=vt)}else{var $t=te-+this._x.call(null,ut.data),de=ae-+this._y.call(null,ut.data),Me=$t*$t+de*de;if(Me<le){var Fe=Math.sqrt(le=Me);pe=te-Fe,we=ae-Fe,zt=te+Fe,Tt=ae+Fe,ce=ut.data}}return ce}function a(te){if(isNaN(zt=+this._x.call(null,te))||isNaN(Tt=+this._y.call(null,te)))return this;var ae,le=this._root,ce,pe,we,ve=this._x0,Mt=this._y0,It=this._x1,Rt=this._y1,zt,Tt,ft,ut,vt,St,Ot,Xt;if(!le)return this;if(le.length)for(;;){if((vt=zt>=(ft=(ve+It)/2))?ve=ft:It=ft,(St=Tt>=(ut=(Mt+Rt)/2))?Mt=ut:Rt=ut,ae=le,!(le=le[Ot=St<<1|vt]))return this;if(!le.length)break;(ae[Ot+1&3]||ae[Ot+2&3]||ae[Ot+3&3])&&(ce=ae,Xt=Ot)}for(;le.data!==te;)if(pe=le,!(le=le.next))return this;return(we=le.next)&&delete le.next,pe?(we?pe.next=we:delete pe.next,this):ae?(we?ae[Ot]=we:delete ae[Ot],(le=ae[0]||ae[1]||ae[2]||ae[3])&&le===(ae[3]||ae[2]||ae[1]||ae[0])&&!le.length&&(ce?ce[Xt]=le:this._root=le),this):(this._root=we,this)}function o(te){for(var ae=0,le=te.length;ae<le;++ae)this.remove(te[ae]);return this}function h(){return this._root}function y(){var te=0;return this.visit(function(ae){if(!ae.length)do++te;while(ae=ae.next)}),te}function p(te){var ae=[],le,ce=this._root,pe,we,ve,Mt,It;for(ce&&ae.push(new f(ce,this._x0,this._y0,this._x1,this._y1));le=ae.pop();)if(!te(ce=le.node,we=le.x0,ve=le.y0,Mt=le.x1,It=le.y1)&&ce.length){var Rt=(we+Mt)/2,zt=(ve+It)/2;(pe=ce[3])&&ae.push(new f(pe,Rt,zt,Mt,It)),(pe=ce[2])&&ae.push(new f(pe,we,zt,Rt,It)),(pe=ce[1])&&ae.push(new f(pe,Rt,ve,Mt,zt)),(pe=ce[0])&&ae.push(new f(pe,we,ve,Rt,zt))}return this}function x(te){var ae=[],le=[],ce;for(this._root&&ae.push(new f(this._root,this._x0,this._y0,this._x1,this._y1));ce=ae.pop();){var pe=ce.node;if(pe.length){var we,ve=ce.x0,Mt=ce.y0,It=ce.x1,Rt=ce.y1,zt=(ve+It)/2,Tt=(Mt+Rt)/2;(we=pe[0])&&ae.push(new f(we,ve,Mt,zt,Tt)),(we=pe[1])&&ae.push(new f(we,zt,Mt,It,Tt)),(we=pe[2])&&ae.push(new f(we,ve,Tt,zt,Rt)),(we=pe[3])&&ae.push(new f(we,zt,Tt,It,Rt))}le.push(ce)}for(;ce=le.pop();)te(ce.node,ce.x0,ce.y0,ce.x1,ce.y1);return this}function s(te){return te[0]}function u(te){return arguments.length?(this._x=te,this):this._x}function c(te){return te[1]}function T(te){return arguments.length?(this._y=te,this):this._y}function k(te,ae,le){var ce=new _(ae??s,le??c,NaN,NaN,NaN,NaN);return te==null?ce:ce.addAll(te)}function _(te,ae,le,ce,pe,we){this._x=te,this._y=ae,this._x0=le,this._y0=ce,this._x1=pe,this._y1=we,this._root=void 0}function b(te){for(var ae={data:te.data},le=ae;te=te.next;)le=le.next={data:te.data};return ae}var P=k.prototype=_.prototype;P.copy=function(){var te=new _(this._x,this._y,this._x0,this._y0,this._x1,this._y1),ae=this._root,le,ce;if(!ae)return te;if(!ae.length)return te._root=b(ae),te;for(le=[{source:ae,target:te._root=new Array(4)}];ae=le.pop();)for(var pe=0;pe<4;++pe)(ce=ae.source[pe])&&(ce.length?le.push({source:ce,target:ae.target[pe]=new Array(4)}):ae.target[pe]=b(ce));return te},P.add=S,P.addAll=g,P.cover=v,P.data=e,P.extent=r,P.find=n,P.remove=a,P.removeAll=o,P.root=h,P.size=y,P.visit=p,P.visitAfter=x,P.x=u,P.y=T;function l(te){return te.x+te.vx}function d(te){return te.y+te.vy}function L(te){var ae,le,ce=1,pe=1;typeof te!="function"&&(te=E(te==null?1:+te));function we(){for(var It,Rt=ae.length,zt,Tt,ft,ut,vt,St,Ot=0;Ot<pe;++Ot)for(zt=k(ae,l,d).visitAfter(ve),It=0;It<Rt;++It)Tt=ae[It],vt=le[Tt.index],St=vt*vt,ft=Tt.x+Tt.vx,ut=Tt.y+Tt.vy,zt.visit(Xt);function Xt($t,de,Me,Fe,De){var Ae=$t.data,Ve=$t.r,Qe=vt+Ve;if(Ae){if(Ae.index>Tt.index){var Sr=ft-Ae.x-Ae.vx,he=ut-Ae.y-Ae.vy,je=Sr*Sr+he*he;je<Qe*Qe&&(Sr===0&&(Sr=i(),je+=Sr*Sr),he===0&&(he=i(),je+=he*he),je=(Qe-(je=Math.sqrt(je)))/je*ce,Tt.vx+=(Sr*=je)*(Qe=(Ve*=Ve)/(St+Ve)),Tt.vy+=(he*=je)*Qe,Ae.vx-=Sr*(Qe=1-Qe),Ae.vy-=he*Qe)}return}return de>ft+Qe||Fe<ft-Qe||Me>ut+Qe||De<ut-Qe}}function ve(It){if(It.data)return It.r=le[It.data.index];for(var Rt=It.r=0;Rt<4;++Rt)It[Rt]&&It[Rt].r>It.r&&(It.r=It[Rt].r)}function Mt(){if(ae){var It,Rt=ae.length,zt;for(le=new Array(Rt),It=0;It<Rt;++It)zt=ae[It],le[zt.index]=+te(zt,It,ae)}}return we.initialize=function(It){ae=It,Mt()},we.iterations=function(It){return arguments.length?(pe=+It,we):pe},we.strength=function(It){return arguments.length?(ce=+It,we):ce},we.radius=function(It){return arguments.length?(te=typeof It=="function"?It:E(+It),Mt(),we):te},we}var w=t(15140);function I(te){return te.index}function z(te,ae){var le=te.get(ae);if(!le)throw new Error("missing: "+ae);return le}function B(te){var ae=I,le=zt,ce,pe=E(30),we,ve,Mt,It,Rt=1;te==null&&(te=[]);function zt(St){return 1/Math.min(Mt[St.source.index],Mt[St.target.index])}function Tt(St){for(var Ot=0,Xt=te.length;Ot<Rt;++Ot)for(var $t=0,de,Me,Fe,De,Ae,Ve,Qe;$t<Xt;++$t)de=te[$t],Me=de.source,Fe=de.target,De=Fe.x+Fe.vx-Me.x-Me.vx||i(),Ae=Fe.y+Fe.vy-Me.y-Me.vy||i(),Ve=Math.sqrt(De*De+Ae*Ae),Ve=(Ve-we[$t])/Ve*St*ce[$t],De*=Ve,Ae*=Ve,Fe.vx-=De*(Qe=It[$t]),Fe.vy-=Ae*Qe,Me.vx+=De*(Qe=1-Qe),Me.vy+=Ae*Qe}function ft(){if(ve){var St,Ot=ve.length,Xt=te.length,$t=(0,w.UI)(ve,ae),de;for(St=0,Mt=new Array(Ot);St<Xt;++St)de=te[St],de.index=St,typeof de.source!="object"&&(de.source=z($t,de.source)),typeof de.target!="object"&&(de.target=z($t,de.target)),Mt[de.source.index]=(Mt[de.source.index]||0)+1,Mt[de.target.index]=(Mt[de.target.index]||0)+1;for(St=0,It=new Array(Xt);St<Xt;++St)de=te[St],It[St]=Mt[de.source.index]/(Mt[de.source.index]+Mt[de.target.index]);ce=new Array(Xt),ut(),we=new Array(Xt),vt()}}function ut(){if(ve)for(var St=0,Ot=te.length;St<Ot;++St)ce[St]=+le(te[St],St,te)}function vt(){if(ve)for(var St=0,Ot=te.length;St<Ot;++St)we[St]=+pe(te[St],St,te)}return Tt.initialize=function(St){ve=St,ft()},Tt.links=function(St){return arguments.length?(te=St,ft(),Tt):te},Tt.id=function(St){return arguments.length?(ae=St,Tt):ae},Tt.iterations=function(St){return arguments.length?(Rt=+St,Tt):Rt},Tt.strength=function(St){return arguments.length?(le=typeof St=="function"?St:E(+St),ut(),Tt):le},Tt.distance=function(St){return arguments.length?(pe=typeof St=="function"?St:E(+St),vt(),Tt):pe},Tt}var O={value:function(){}};function R(){for(var te=0,ae=arguments.length,le={},ce;te<ae;++te){if(!(ce=arguments[te]+"")||ce in le||/[\s.]/.test(ce))throw new Error("illegal type: "+ce);le[ce]=[]}return new C(le)}function C(te){this._=te}function F(te,ae){return te.trim().split(/^|\s+/).map(function(le){var ce="",pe=le.indexOf(".");if(pe>=0&&(ce=le.slice(pe+1),le=le.slice(0,pe)),le&&!ae.hasOwnProperty(le))throw new Error("unknown type: "+le);return{type:le,name:ce}})}C.prototype=R.prototype={constructor:C,on:function(te,ae){var le=this._,ce=F(te+"",le),pe,we=-1,ve=ce.length;if(arguments.length<2){for(;++we<ve;)if((pe=(te=ce[we]).type)&&(pe=N(le[pe],te.name)))return pe;return}if(ae!=null&&typeof ae!="function")throw new Error("invalid callback: "+ae);for(;++we<ve;)if(pe=(te=ce[we]).type)le[pe]=V(le[pe],te.name,ae);else if(ae==null)for(pe in le)le[pe]=V(le[pe],te.name,null);return this},copy:function(){var te={},ae=this._;for(var le in ae)te[le]=ae[le].slice();return new C(te)},call:function(te,ae){if((pe=arguments.length-2)>0)for(var le=new Array(pe),ce=0,pe,we;ce<pe;++ce)le[ce]=arguments[ce+2];if(!this._.hasOwnProperty(te))throw new Error("unknown type: "+te);for(we=this._[te],ce=0,pe=we.length;ce<pe;++ce)we[ce].value.apply(ae,le)},apply:function(te,ae,le){if(!this._.hasOwnProperty(te))throw new Error("unknown type: "+te);for(var ce=this._[te],pe=0,we=ce.length;pe<we;++pe)ce[pe].value.apply(ae,le)}};function N(te,ae){for(var le=0,ce=te.length,pe;le<ce;++le)if((pe=te[le]).name===ae)return pe.value}function V(te,ae,le){for(var ce=0,pe=te.length;ce<pe;++ce)if(te[ce].name===ae){te[ce]=O,te=te.slice(0,ce).concat(te.slice(ce+1));break}return le!=null&&te.push({name:ae,value:le}),te}var K=R,Q=0,at=0,it=0,q=1e3,W,Z,G=0,et=0,nt=0,X=typeof performance=="object"&&performance.now?performance:Date,Y=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(te){setTimeout(te,17)};function ot(){return et||(Y(rt),et=X.now()+nt)}function rt(){et=0}function ht(){this._call=this._time=this._next=null}ht.prototype=pt.prototype={constructor:ht,restart:function(te,ae,le){if(typeof te!="function")throw new TypeError("callback is not a function");le=(le==null?ot():+le)+(ae==null?0:+ae),!this._next&&Z!==this&&(Z?Z._next=this:W=this,Z=this),this._call=te,this._time=le,mt()},stop:function(){this._call&&(this._call=null,this._time=1/0,mt())}};function pt(te,ae,le){var ce=new ht;return ce.restart(te,ae,le),ce}function yt(){ot(),++Q;for(var te=W,ae;te;)(ae=et-te._time)>=0&&te._call.call(null,ae),te=te._next;--Q}function xt(){et=(G=X.now())+nt,Q=at=0;try{yt()}finally{Q=0,Et(),et=0}}function Ft(){var te=X.now(),ae=te-G;ae>q&&(nt-=ae,G=te)}function Et(){for(var te,ae=W,le,ce=1/0;ae;)ae._call?(ce>ae._time&&(ce=ae._time),te=ae,ae=ae._next):(le=ae._next,ae._next=null,ae=te?te._next=le:W=le);Z=te,mt(ce)}function mt(te){if(!Q){at&&(at=clearTimeout(at));var ae=te-et;ae>24?(te<1/0&&(at=setTimeout(xt,te-X.now()-nt)),it&&(it=clearInterval(it))):(it||(G=X.now(),it=setInterval(Ft,q)),Q=1,Y(xt))}}function gt(te){return te.x}function wt(te){return te.y}var Pt=10,Bt=Math.PI*(3-Math.sqrt(5));function kt(te){var ae,le=1,ce=.001,pe=1-Math.pow(ce,1/300),we=0,ve=.6,Mt=(0,w.UI)(),It=pt(zt),Rt=K("tick","end");te==null&&(te=[]);function zt(){Tt(),Rt.call("tick",ae),le<ce&&(It.stop(),Rt.call("end",ae))}function Tt(vt){var St,Ot=te.length,Xt;vt===void 0&&(vt=1);for(var $t=0;$t<vt;++$t)for(le+=(we-le)*pe,Mt.each(function(de){de(le)}),St=0;St<Ot;++St)Xt=te[St],Xt.fx==null?Xt.x+=Xt.vx*=ve:(Xt.x=Xt.fx,Xt.vx=0),Xt.fy==null?Xt.y+=Xt.vy*=ve:(Xt.y=Xt.fy,Xt.vy=0);return ae}function ft(){for(var vt=0,St=te.length,Ot;vt<St;++vt){if(Ot=te[vt],Ot.index=vt,Ot.fx!=null&&(Ot.x=Ot.fx),Ot.fy!=null&&(Ot.y=Ot.fy),isNaN(Ot.x)||isNaN(Ot.y)){var Xt=Pt*Math.sqrt(vt),$t=vt*Bt;Ot.x=Xt*Math.cos($t),Ot.y=Xt*Math.sin($t)}(isNaN(Ot.vx)||isNaN(Ot.vy))&&(Ot.vx=Ot.vy=0)}}function ut(vt){return vt.initialize&&vt.initialize(te),vt}return ft(),ae={tick:Tt,restart:function(){return It.restart(zt),ae},stop:function(){return It.stop(),ae},nodes:function(vt){return arguments.length?(te=vt,ft(),Mt.each(ut),ae):te},alpha:function(vt){return arguments.length?(le=+vt,ae):le},alphaMin:function(vt){return arguments.length?(ce=+vt,ae):ce},alphaDecay:function(vt){return arguments.length?(pe=+vt,ae):+pe},alphaTarget:function(vt){return arguments.length?(we=+vt,ae):we},velocityDecay:function(vt){return arguments.length?(ve=1-vt,ae):1-ve},force:function(vt,St){return arguments.length>1?(St==null?Mt.remove(vt):Mt.set(vt,ut(St)),ae):Mt.get(vt)},find:function(vt,St,Ot){var Xt=0,$t=te.length,de,Me,Fe,De,Ae;for(Ot==null?Ot=1/0:Ot*=Ot,Xt=0;Xt<$t;++Xt)De=te[Xt],de=vt-De.x,Me=St-De.y,Fe=de*de+Me*Me,Fe<Ot&&(Ae=De,Ot=Fe);return Ae},on:function(vt,St){return arguments.length>1?(Rt.on(vt,St),ae):Rt.on(vt)}}}function jt(){var te,ae,le,ce=E(-30),pe,we=1,ve=1/0,Mt=.81;function It(ft){var ut,vt=te.length,St=k(te,gt,wt).visitAfter(zt);for(le=ft,ut=0;ut<vt;++ut)ae=te[ut],St.visit(Tt)}function Rt(){if(te){var ft,ut=te.length,vt;for(pe=new Array(ut),ft=0;ft<ut;++ft)vt=te[ft],pe[vt.index]=+ce(vt,ft,te)}}function zt(ft){var ut=0,vt,St,Ot=0,Xt,$t,de;if(ft.length){for(Xt=$t=de=0;de<4;++de)(vt=ft[de])&&(St=Math.abs(vt.value))&&(ut+=vt.value,Ot+=St,Xt+=St*vt.x,$t+=St*vt.y);ft.x=Xt/Ot,ft.y=$t/Ot}else{vt=ft,vt.x=vt.data.x,vt.y=vt.data.y;do ut+=pe[vt.data.index];while(vt=vt.next)}ft.value=ut}function Tt(ft,ut,vt,St){if(!ft.value)return!0;var Ot=ft.x-ae.x,Xt=ft.y-ae.y,$t=St-ut,de=Ot*Ot+Xt*Xt;if($t*$t/Mt<de)return de<ve&&(Ot===0&&(Ot=i(),de+=Ot*Ot),Xt===0&&(Xt=i(),de+=Xt*Xt),de<we&&(de=Math.sqrt(we*de)),ae.vx+=Ot*ft.value*le/de,ae.vy+=Xt*ft.value*le/de),!0;if(!(ft.length||de>=ve)){(ft.data!==ae||ft.next)&&(Ot===0&&(Ot=i(),de+=Ot*Ot),Xt===0&&(Xt=i(),de+=Xt*Xt),de<we&&(de=Math.sqrt(we*de)));do ft.data!==ae&&($t=pe[ft.data.index]*le/de,ae.vx+=Ot*$t,ae.vy+=Xt*$t);while(ft=ft.next)}}return It.initialize=function(ft){te=ft,Rt()},It.strength=function(ft){return arguments.length?(ce=typeof ft=="function"?ft:E(+ft),Rt(),It):ce},It.distanceMin=function(ft){return arguments.length?(we=ft*ft,It):Math.sqrt(we)},It.distanceMax=function(ft){return arguments.length?(ve=ft*ft,It):Math.sqrt(ve)},It.theta=function(ft){return arguments.length?(Mt=ft*ft,It):Math.sqrt(Mt)},It}function Ht(te,ae,le){var ce,pe=E(.1),we,ve;typeof te!="function"&&(te=E(+te)),ae==null&&(ae=0),le==null&&(le=0);function Mt(Rt){for(var zt=0,Tt=ce.length;zt<Tt;++zt){var ft=ce[zt],ut=ft.x-ae||1e-6,vt=ft.y-le||1e-6,St=Math.sqrt(ut*ut+vt*vt),Ot=(ve[zt]-St)*we[zt]*Rt/St;ft.vx+=ut*Ot,ft.vy+=vt*Ot}}function It(){if(ce){var Rt,zt=ce.length;for(we=new Array(zt),ve=new Array(zt),Rt=0;Rt<zt;++Rt)ve[Rt]=+te(ce[Rt],Rt,ce),we[Rt]=isNaN(ve[Rt])?0:+pe(ce[Rt],Rt,ce)}}return Mt.initialize=function(Rt){ce=Rt,It()},Mt.strength=function(Rt){return arguments.length?(pe=typeof Rt=="function"?Rt:E(+Rt),It(),Mt):pe},Mt.radius=function(Rt){return arguments.length?(te=typeof Rt=="function"?Rt:E(+Rt),It(),Mt):te},Mt.x=function(Rt){return arguments.length?(ae=+Rt,Mt):ae},Mt.y=function(Rt){return arguments.length?(le=+Rt,Mt):le},Mt}function Vt(te){var ae=E(.1),le,ce,pe;typeof te!="function"&&(te=E(te==null?0:+te));function we(Mt){for(var It=0,Rt=le.length,zt;It<Rt;++It)zt=le[It],zt.vx+=(pe[It]-zt.x)*ce[It]*Mt}function ve(){if(le){var Mt,It=le.length;for(ce=new Array(It),pe=new Array(It),Mt=0;Mt<It;++Mt)ce[Mt]=isNaN(pe[Mt]=+te(le[Mt],Mt,le))?0:+ae(le[Mt],Mt,le)}}return we.initialize=function(Mt){le=Mt,ve()},we.strength=function(Mt){return arguments.length?(ae=typeof Mt=="function"?Mt:E(+Mt),ve(),we):ae},we.x=function(Mt){return arguments.length?(te=typeof Mt=="function"?Mt:E(+Mt),ve(),we):te},we}function ee(te){var ae=E(.1),le,ce,pe;typeof te!="function"&&(te=E(te==null?0:+te));function we(Mt){for(var It=0,Rt=le.length,zt;It<Rt;++It)zt=le[It],zt.vy+=(pe[It]-zt.y)*ce[It]*Mt}function ve(){if(le){var Mt,It=le.length;for(ce=new Array(It),pe=new Array(It),Mt=0;Mt<It;++Mt)ce[Mt]=isNaN(pe[Mt]=+te(le[Mt],Mt,le))?0:+ae(le[Mt],Mt,le)}}return we.initialize=function(Mt){le=Mt,ve()},we.strength=function(Mt){return arguments.length?(ae=typeof Mt=="function"?Mt:E(+Mt),ve(),we):ae},we.y=function(Mt){return arguments.length?(te=typeof Mt=="function"?Mt:E(+Mt),ve(),we):te},we}},60721:function($,U,t){t.d(U,{WU:function(){return u},FF:function(){return x}});function M(T){return Math.abs(T=Math.round(T))>=1e21?T.toLocaleString("en").replace(/,/g,""):T.toString(10)}function E(T,k){if((_=(T=k?T.toExponential(k-1):T.toExponential()).indexOf("e"))<0)return null;var _,b=T.slice(0,_);return[b.length>1?b[0]+b.slice(2):b,+T.slice(_+1)]}function i(T){return T=E(Math.abs(T)),T?T[1]:NaN}function S(T,k){return function(_,b){for(var P=_.length,l=[],d=0,L=T[0],w=0;P>0&&L>0&&(w+L+1>b&&(L=Math.max(1,b-w)),l.push(_.substring(P-=L,P+L)),!((w+=L+1)>b));)L=T[d=(d+1)%T.length];return l.reverse().join(k)}}function A(T){return function(k){return k.replace(/[0-9]/g,function(_){return T[+_]})}}var g=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function v(T){if(!(k=g.exec(T)))throw new Error("invalid format: "+T);var k;return new e({fill:k[1],align:k[2],sign:k[3],symbol:k[4],zero:k[5],width:k[6],comma:k[7],precision:k[8]&&k[8].slice(1),trim:k[9],type:k[10]})}v.prototype=e.prototype;function e(T){this.fill=T.fill===void 0?" ":T.fill+"",this.align=T.align===void 0?">":T.align+"",this.sign=T.sign===void 0?"-":T.sign+"",this.symbol=T.symbol===void 0?"":T.symbol+"",this.zero=!!T.zero,this.width=T.width===void 0?void 0:+T.width,this.comma=!!T.comma,this.precision=T.precision===void 0?void 0:+T.precision,this.trim=!!T.trim,this.type=T.type===void 0?"":T.type+""}e.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function r(T){t:for(var k=T.length,_=1,b=-1,P;_<k;++_)switch(T[_]){case".":b=P=_;break;case"0":b===0&&(b=_),P=_;break;default:if(!+T[_])break t;b>0&&(b=0);break}return b>0?T.slice(0,b)+T.slice(P+1):T}var f;function n(T,k){var _=E(T,k);if(!_)return T+"";var b=_[0],P=_[1],l=P-(f=Math.max(-8,Math.min(8,Math.floor(P/3)))*3)+1,d=b.length;return l===d?b:l>d?b+new Array(l-d+1).join("0"):l>0?b.slice(0,l)+"."+b.slice(l):"0."+new Array(1-l).join("0")+E(T,Math.max(0,k+l-1))[0]}function a(T,k){var _=E(T,k);if(!_)return T+"";var b=_[0],P=_[1];return P<0?"0."+new Array(-P).join("0")+b:b.length>P+1?b.slice(0,P+1)+"."+b.slice(P+1):b+new Array(P-b.length+2).join("0")}var o={"%":function(T,k){return(T*100).toFixed(k)},b:function(T){return Math.round(T).toString(2)},c:function(T){return T+""},d:M,e:function(T,k){return T.toExponential(k)},f:function(T,k){return T.toFixed(k)},g:function(T,k){return T.toPrecision(k)},o:function(T){return Math.round(T).toString(8)},p:function(T,k){return a(T*100,k)},r:a,s:n,X:function(T){return Math.round(T).toString(16).toUpperCase()},x:function(T){return Math.round(T).toString(16)}};function h(T){return T}var y=Array.prototype.map,p=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function x(T){var k=T.grouping===void 0||T.thousands===void 0?h:S(y.call(T.grouping,Number),T.thousands+""),_=T.currency===void 0?"":T.currency[0]+"",b=T.currency===void 0?"":T.currency[1]+"",P=T.decimal===void 0?".":T.decimal+"",l=T.numerals===void 0?h:A(y.call(T.numerals,String)),d=T.percent===void 0?"%":T.percent+"",L=T.minus===void 0?"-":T.minus+"",w=T.nan===void 0?"NaN":T.nan+"";function I(B){B=v(B);var O=B.fill,R=B.align,C=B.sign,F=B.symbol,N=B.zero,V=B.width,K=B.comma,Q=B.precision,at=B.trim,it=B.type;it==="n"?(K=!0,it="g"):o[it]||(Q===void 0&&(Q=12),at=!0,it="g"),(N||O==="0"&&R==="=")&&(N=!0,O="0",R="=");var q=F==="$"?_:F==="#"&&/[boxX]/.test(it)?"0"+it.toLowerCase():"",W=F==="$"?b:/[%p]/.test(it)?d:"",Z=o[it],G=/[defgprs%]/.test(it);Q=Q===void 0?6:/[gprs]/.test(it)?Math.max(1,Math.min(21,Q)):Math.max(0,Math.min(20,Q));function et(nt){var X=q,Y=W,ot,rt,ht;if(it==="c")Y=Z(nt)+Y,nt="";else{nt=+nt;var pt=nt<0||1/nt<0;if(nt=isNaN(nt)?w:Z(Math.abs(nt),Q),at&&(nt=r(nt)),pt&&+nt==0&&C!=="+"&&(pt=!1),X=(pt?C==="("?C:L:C==="-"||C==="("?"":C)+X,Y=(it==="s"?p[8+f/3]:"")+Y+(pt&&C==="("?")":""),G){for(ot=-1,rt=nt.length;++ot<rt;)if(ht=nt.charCodeAt(ot),48>ht||ht>57){Y=(ht===46?P+nt.slice(ot+1):nt.slice(ot))+Y,nt=nt.slice(0,ot);break}}}K&&!N&&(nt=k(nt,1/0));var yt=X.length+nt.length+Y.length,xt=yt<V?new Array(V-yt+1).join(O):"";switch(K&&N&&(nt=k(xt+nt,xt.length?V-Y.length:1/0),xt=""),R){case"<":nt=X+nt+Y+xt;break;case"=":nt=X+xt+nt+Y;break;case"^":nt=xt.slice(0,yt=xt.length>>1)+X+nt+Y+xt.slice(yt);break;default:nt=xt+X+nt+Y;break}return l(nt)}return et.toString=function(){return B+""},et}function z(B,O){var R=I((B=v(B),B.type="f",B)),C=Math.max(-8,Math.min(8,Math.floor(i(O)/3)))*3,F=Math.pow(10,-C),N=p[8+C/3];return function(V){return R(F*V)+N}}return{format:I,formatPrefix:z}}var s,u;c({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function c(T){return s=x(T),u=s.format,s.formatPrefix,s}},65704:function($,U,t){t.r(U),t.d(U,{geoAiry:function(){return N},geoAiryRaw:function(){return F},geoAitoff:function(){return K},geoAitoffRaw:function(){return V},geoArmadillo:function(){return at},geoArmadilloRaw:function(){return Q},geoAugust:function(){return q},geoAugustRaw:function(){return it},geoBaker:function(){return et},geoBakerRaw:function(){return G},geoBerghaus:function(){return Y},geoBerghausRaw:function(){return X},geoBertin1953:function(){return Et},geoBertin1953Raw:function(){return Ft},geoBoggs:function(){return Ht},geoBoggsRaw:function(){return jt},geoBonne:function(){return le},geoBonneRaw:function(){return ae},geoBottomley:function(){return pe},geoBottomleyRaw:function(){return ce},geoBromley:function(){return ve},geoBromleyRaw:function(){return we},geoChamberlin:function(){return St},geoChamberlinAfrica:function(){return vt},geoChamberlinRaw:function(){return ft},geoCollignon:function(){return Xt},geoCollignonRaw:function(){return Ot},geoCraig:function(){return de},geoCraigRaw:function(){return $t},geoCraster:function(){return De},geoCrasterRaw:function(){return Fe},geoCylindricalEqualArea:function(){return Ve},geoCylindricalEqualAreaRaw:function(){return Ae},geoCylindricalStereographic:function(){return Sr},geoCylindricalStereographicRaw:function(){return Qe},geoEckert1:function(){return je},geoEckert1Raw:function(){return he},geoEckert2:function(){return _r},geoEckert2Raw:function(){return Re},geoEckert3:function(){return Gt},geoEckert3Raw:function(){return tr},geoEckert4:function(){return fe},geoEckert4Raw:function(){return re},geoEckert5:function(){return Le},geoEckert5Raw:function(){return ye},geoEckert6:function(){return Ce},geoEckert6Raw:function(){return _e},geoEisenlohr:function(){return qe},geoEisenlohrRaw:function(){return We},geoFahey:function(){return Dt},geoFaheyRaw:function(){return xr},geoFoucaut:function(){return Te},geoFoucautRaw:function(){return Ut},geoFoucautSinusoidal:function(){return Be},geoFoucautSinusoidalRaw:function(){return Se},geoGilbert:function(){return ar},geoGingery:function(){return Or},geoGingeryRaw:function(){return cr},geoGinzburg4:function(){return rn},geoGinzburg4Raw:function(){return Pr},geoGinzburg5:function(){return yn},geoGinzburg5Raw:function(){return Zr},geoGinzburg6:function(){return hr},geoGinzburg6Raw:function(){return Tn},geoGinzburg8:function(){return Lr},geoGinzburg8Raw:function(){return dr},geoGinzburg9:function(){return Hr},geoGinzburg9Raw:function(){return Cr},geoGringorten:function(){return Un},geoGringortenQuincuncial:function(){return dc},geoGringortenRaw:function(){return Yr},geoGuyou:function(){return ln},geoGuyouRaw:function(){return gr},geoHammer:function(){return pt},geoHammerRaw:function(){return rt},geoHammerRetroazimuthal:function(){return On},geoHammerRetroazimuthalRaw:function(){return mn},geoHealpix:function(){return en},geoHealpixRaw:function(){return Qr},geoHill:function(){return mr},geoHillRaw:function(){return wr},geoHomolosine:function(){return Sn},geoHomolosineRaw:function(){return fn},geoHufnagel:function(){return $n},geoHufnagelRaw:function(){return Vn},geoHyperelliptical:function(){return Pa},geoHyperellipticalRaw:function(){return ii},geoInterrupt:function(){return Wa},geoInterruptedBoggs:function(){return Hi},geoInterruptedHomolosine:function(){return Os},geoInterruptedMollweide:function(){return Qa},geoInterruptedMollweideHemispheres:function(){return Ws},geoInterruptedQuarticAuthalic:function(){return Jl},geoInterruptedSinuMollweide:function(){return Ys},geoInterruptedSinusoidal:function(){return Ma},geoKavrayskiy7:function(){return qa},geoKavrayskiy7Raw:function(){return ao},geoLagrange:function(){return Oo},geoLagrangeRaw:function(){return fo},geoLarrivee:function(){return bu},geoLarriveeRaw:function(){return Ia},geoLaskowski:function(){return za},geoLaskowskiRaw:function(){return Io},geoLittrow:function(){return Go},geoLittrowRaw:function(){return Hl},geoLoximuthal:function(){return Gl},geoLoximuthalRaw:function(){return zo},geoMiller:function(){return Qu},geoMillerRaw:function(){return Wl},geoModifiedStereographic:function(){return ms},geoModifiedStereographicAlaska:function(){return nc},geoModifiedStereographicGs48:function(){return _u},geoModifiedStereographicGs50:function(){return ic},geoModifiedStereographicLee:function(){return Xl},geoModifiedStereographicMiller:function(){return ac},geoModifiedStereographicRaw:function(){return Xs},geoMollweide:function(){return Pt},geoMollweideRaw:function(){return wt},geoMtFlatPolarParabolic:function(){return oc},geoMtFlatPolarParabolicRaw:function(){return yl},geoMtFlatPolarQuartic:function(){return wu},geoMtFlatPolarQuarticRaw:function(){return Wo},geoMtFlatPolarSinusoidal:function(){return sc},geoMtFlatPolarSinusoidalRaw:function(){return Kl},geoNaturalEarth:function(){return ho.Z},geoNaturalEarth2:function(){return Ks},geoNaturalEarth2Raw:function(){return xs},geoNaturalEarthRaw:function(){return ho.K},geoNellHammer:function(){return Do},geoNellHammerRaw:function(){return zs},geoNicolosi:function(){return as},geoNicolosiRaw:function(){return Ds},geoPatterson:function(){return lc},geoPattersonRaw:function(){return bl},geoPeirceQuincuncial:function(){return Su},geoPierceQuincuncial:function(){return Su},geoPolyconic:function(){return uc},geoPolyconicRaw:function(){return $l},geoPolyhedral:function(){return Qi},geoPolyhedralButterfly:function(){return Xo},geoPolyhedralCollignon:function(){return ss},geoPolyhedralWaterman:function(){return ls},geoProject:function(){return hc},geoQuantize:function(){return Lu},geoQuincuncial:function(){return kl},geoRectangularPolyconic:function(){return us},geoRectangularPolyconicRaw:function(){return au},geoRobinson:function(){return ou},geoRobinsonRaw:function(){return Ro},geoSatellite:function(){return Ml},geoSatelliteRaw:function(){return ws},geoSinuMollweide:function(){return Rn},geoSinuMollweideRaw:function(){return kn},geoSinusoidal:function(){return te},geoSinusoidalRaw:function(){return ee},geoStitch:function(){return ks},geoTimes:function(){return oo},geoTimesRaw:function(){return eo},geoTwoPointAzimuthal:function(){return El},geoTwoPointAzimuthalRaw:function(){return Cu},geoTwoPointAzimuthalUsa:function(){return qs},geoTwoPointEquidistant:function(){return cu},geoTwoPointEquidistantRaw:function(){return Ou},geoTwoPointEquidistantUsa:function(){return Mo},geoVanDerGrinten:function(){return il},geoVanDerGrinten2:function(){return gc},geoVanDerGrinten2Raw:function(){return ts},geoVanDerGrinten3:function(){return Cl},geoVanDerGrinten3Raw:function(){return fu},geoVanDerGrinten4:function(){return Iu},geoVanDerGrinten4Raw:function(){return Va},geoVanDerGrintenRaw:function(){return hs},geoWagner:function(){return ol},geoWagner4:function(){return pu},geoWagner4Raw:function(){return hu},geoWagner6:function(){return Il},geoWagner6Raw:function(){return Ss},geoWagner7:function(){return ps},geoWagnerRaw:function(){return Bo},geoWiechel:function(){return Du},geoWiechelRaw:function(){return sl},geoWinkel3:function(){return Fu},geoWinkel3Raw:function(){return ll}});var M=t(15002),E=Math.abs,i=Math.atan,S=Math.atan2,A=Math.cos,g=Math.exp,v=Math.floor,e=Math.log,r=Math.max,f=Math.min,n=Math.pow,a=Math.round,o=Math.sign||function(Zt){return Zt>0?1:Zt<0?-1:0},h=Math.sin,y=Math.tan,p=1e-6,x=1e-12,s=Math.PI,u=s/2,c=s/4,T=Math.SQRT1_2,k=I(2),_=I(s),b=s*2,P=180/s,l=s/180;function d(Zt){return Zt?Zt/Math.sin(Zt):1}function L(Zt){return Zt>1?u:Zt<-1?-u:Math.asin(Zt)}function w(Zt){return Zt>1?0:Zt<-1?s:Math.acos(Zt)}function I(Zt){return Zt>0?Math.sqrt(Zt):0}function z(Zt){return Zt=g(2*Zt),(Zt-1)/(Zt+1)}function B(Zt){return(g(Zt)-g(-Zt))/2}function O(Zt){return(g(Zt)+g(-Zt))/2}function R(Zt){return e(Zt+I(Zt*Zt+1))}function C(Zt){return e(Zt+I(Zt*Zt-1))}function F(Zt){var Yt=y(Zt/2),ie=2*e(A(Zt/2))/(Yt*Yt);function ue(ke,xe){var Pe=A(ke),rr=A(xe),ur=h(xe),Ke=rr*Pe,pr=-((1-Ke?e((1+Ke)/2)/(1-Ke):-.5)+ie/(1+Ke));return[pr*rr*h(ke),pr*ur]}return ue.invert=function(ke,xe){var Pe=I(ke*ke+xe*xe),rr=-Zt/2,ur=50,Ke;if(!Pe)return[0,0];do{var pr=rr/2,br=A(pr),Br=h(pr),Vr=Br/br,hn=-e(E(br));rr-=Ke=(2/Vr*hn-ie*Vr-Pe)/(-hn/(Br*Br)+1-ie/(2*br*br))*(br<0?.7:1)}while(E(Ke)>p&&--ur>0);var dn=h(rr);return[S(ke*dn,Pe*A(rr)),L(xe*dn/Pe)]},ue}function N(){var Zt=u,Yt=(0,M.r)(F),ie=Yt(Zt);return ie.radius=function(ue){return arguments.length?Yt(Zt=ue*l):Zt*P},ie.scale(179.976).clipAngle(147)}function V(Zt,Yt){var ie=A(Yt),ue=d(w(ie*A(Zt/=2)));return[2*ie*h(Zt)*ue,h(Yt)*ue]}V.invert=function(Zt,Yt){if(!(Zt*Zt+4*Yt*Yt>s*s+p)){var ie=Zt,ue=Yt,ke=25;do{var xe=h(ie),Pe=h(ie/2),rr=A(ie/2),ur=h(ue),Ke=A(ue),pr=h(2*ue),br=ur*ur,Br=Ke*Ke,Vr=Pe*Pe,hn=1-Br*rr*rr,dn=hn?w(Ke*rr)*I(An=1/hn):An=0,An,ri=2*dn*Ke*Pe-Zt,vi=dn*ur-Yt,bi=An*(Br*Vr+dn*Ke*rr*br),wi=An*(.5*xe*pr-dn*2*ur*Pe),Ti=An*.25*(pr*Pe-dn*ur*Br*xe),Wi=An*(br*rr+dn*Vr*Ke),ga=wi*Ti-Wi*bi;if(!ga)break;var $i=(vi*wi-ri*Wi)/ga,st=(ri*Ti-vi*bi)/ga;ie-=$i,ue-=st}while((E($i)>p||E(st)>p)&&--ke>0);return[ie,ue]}};function K(){return(0,M.Z)(V).scale(152.63)}function Q(Zt){var Yt=h(Zt),ie=A(Zt),ue=Zt>=0?1:-1,ke=y(ue*Zt),xe=(1+Yt-ie)/2;function Pe(rr,ur){var Ke=A(ur),pr=A(rr/=2);return[(1+Ke)*h(rr),(ue*ur>-S(pr,ke)-.001?0:-ue*10)+xe+h(ur)*ie-(1+Ke)*Yt*pr]}return Pe.invert=function(rr,ur){var Ke=0,pr=0,br=50;do{var Br=A(Ke),Vr=h(Ke),hn=A(pr),dn=h(pr),An=1+hn,ri=An*Vr-rr,vi=xe+dn*ie-An*Yt*Br-ur,bi=An*Br/2,wi=-Vr*dn,Ti=Yt*An*Vr/2,Wi=ie*hn+Yt*Br*dn,ga=wi*Ti-Wi*bi,$i=(vi*wi-ri*Wi)/ga/2,st=(ri*Ti-vi*bi)/ga;E(st)>2&&(st/=2),Ke-=$i,pr-=st}while((E($i)>p||E(st)>p)&&--br>0);return ue*pr>-S(A(Ke),ke)-.001?[Ke*2,pr]:null},Pe}function at(){var Zt=20*l,Yt=Zt>=0?1:-1,ie=y(Yt*Zt),ue=(0,M.r)(Q),ke=ue(Zt),xe=ke.stream;return ke.parallel=function(Pe){return arguments.length?(ie=y((Yt=(Zt=Pe*l)>=0?1:-1)*Zt),ue(Zt)):Zt*P},ke.stream=function(Pe){var rr=ke.rotate(),ur=xe(Pe),Ke=(ke.rotate([0,0]),xe(Pe)),pr=ke.precision();return ke.rotate(rr),ur.sphere=function(){Ke.polygonStart(),Ke.lineStart();for(var br=Yt*-180;Yt*br<180;br+=Yt*90)Ke.point(br,Yt*90);if(Zt)for(;Yt*(br-=3*Yt*pr)>=-180;)Ke.point(br,Yt*-S(A(br*l/2),ie)*P);Ke.lineEnd(),Ke.polygonEnd()},ur},ke.scale(218.695).center([0,28.0974])}function it(Zt,Yt){var ie=y(Yt/2),ue=I(1-ie*ie),ke=1+ue*A(Zt/=2),xe=h(Zt)*ue/ke,Pe=ie/ke,rr=xe*xe,ur=Pe*Pe;return[1.3333333333333333*xe*(3+rr-3*ur),1.3333333333333333*Pe*(3+3*rr-ur)]}it.invert=function(Zt,Yt){if(Zt*=.375,Yt*=.375,!Zt&&E(Yt)>1)return null;var ie=Zt*Zt,ue=Yt*Yt,ke=1+ie+ue,xe=I((ke-I(ke*ke-4*Yt*Yt))/2),Pe=L(xe)/3,rr=xe?C(E(Yt/xe))/3:R(E(Zt))/3,ur=A(Pe),Ke=O(rr),pr=Ke*Ke-ur*ur;return[o(Zt)*2*S(B(rr)*ur,.25-pr),o(Yt)*2*S(Ke*h(Pe),.25+pr)]};function q(){return(0,M.Z)(it).scale(66.1603)}var W=I(8),Z=e(1+k);function G(Zt,Yt){var ie=E(Yt);return ie<c?[Zt,e(y(c+Yt/2))]:[Zt*A(ie)*(2*k-1/h(ie)),o(Yt)*(2*k*(ie-c)-e(y(ie/2)))]}G.invert=function(Zt,Yt){if((xe=E(Yt))<Z)return[Zt,2*i(g(Yt))-u];var ie=c,ue=25,ke,xe;do{var Pe=A(ie/2),rr=y(ie/2);ie-=ke=(W*(ie-c)-e(rr)-xe)/(W-Pe*Pe/(2*rr))}while(E(ke)>x&&--ue>0);return[Zt/(A(ie)*(W-1/h(ie))),o(Yt)*ie]};function et(){return(0,M.Z)(G).scale(112.314)}var nt=t(17889);function X(Zt){var Yt=2*s/Zt;function ie(ue,ke){var xe=(0,nt.N)(ue,ke);if(E(ue)>u){var Pe=S(xe[1],xe[0]),rr=I(xe[0]*xe[0]+xe[1]*xe[1]),ur=Yt*a((Pe-u)/Yt)+u,Ke=S(h(Pe-=ur),2-A(Pe));Pe=ur+L(s/rr*h(Ke))-Ke,xe[0]=rr*A(Pe),xe[1]=rr*h(Pe)}return xe}return ie.invert=function(ue,ke){var xe=I(ue*ue+ke*ke);if(xe>u){var Pe=S(ke,ue),rr=Yt*a((Pe-u)/Yt)+u,ur=Pe>rr?-1:1,Ke=xe*A(rr-Pe),pr=1/y(ur*w((Ke-s)/I(s*(s-2*Ke)+xe*xe)));Pe=rr+2*i((pr+ur*I(pr*pr-3))/3),ue=xe*A(Pe),ke=xe*h(Pe)}return nt.N.invert(ue,ke)},ie}function Y(){var Zt=5,Yt=(0,M.r)(X),ie=Yt(Zt),ue=ie.stream,ke=.01,xe=-A(ke*l),Pe=h(ke*l);return ie.lobes=function(rr){return arguments.length?Yt(Zt=+rr):Zt},ie.stream=function(rr){var ur=ie.rotate(),Ke=ue(rr),pr=(ie.rotate([0,0]),ue(rr));return ie.rotate(ur),Ke.sphere=function(){pr.polygonStart(),pr.lineStart();for(var br=0,Br=360/Zt,Vr=2*s/Zt,hn=90-180/Zt,dn=u;br<Zt;++br,hn-=Br,dn-=Vr)pr.point(S(Pe*A(dn),xe)*P,L(Pe*h(dn))*P),hn<-90?(pr.point(-90,-180-hn-ke),pr.point(-90,-180-hn+ke)):(pr.point(90,hn+ke),pr.point(90,hn-ke));pr.lineEnd(),pr.polygonEnd()},Ke},ie.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var ot=t(12956);function rt(Zt,Yt){if(arguments.length<2&&(Yt=Zt),Yt===1)return ot.l;if(Yt===1/0)return ht;function ie(ue,ke){var xe=(0,ot.l)(ue/Yt,ke);return xe[0]*=Zt,xe}return ie.invert=function(ue,ke){var xe=ot.l.invert(ue/Zt,ke);return xe[0]*=Yt,xe},ie}function ht(Zt,Yt){return[Zt*A(Yt)/A(Yt/=2),2*h(Yt)]}ht.invert=function(Zt,Yt){var ie=2*L(Yt/2);return[Zt*A(ie/2)/A(ie),ie]};function pt(){var Zt=2,Yt=(0,M.r)(rt),ie=Yt(Zt);return ie.coefficient=function(ue){return arguments.length?Yt(Zt=+ue):Zt},ie.scale(169.529)}function yt(Zt,Yt,ie){var ue=100,ke,xe,Pe;ie=ie===void 0?0:+ie,Yt=+Yt;do xe=Zt(ie),Pe=Zt(ie+p),xe===Pe&&(Pe=xe+p),ie-=ke=-1*p*(xe-Yt)/(xe-Pe);while(ue-- >0&&E(ke)>p);return ue<0?NaN:ie}function xt(Zt,Yt,ie){return Yt===void 0&&(Yt=40),ie===void 0&&(ie=x),function(ue,ke,xe,Pe){var rr,ur,Ke;xe=xe===void 0?0:+xe,Pe=Pe===void 0?0:+Pe;for(var pr=0;pr<Yt;pr++){var br=Zt(xe,Pe),Br=br[0]-ue,Vr=br[1]-ke;if(E(Br)<ie&&E(Vr)<ie)break;var hn=Br*Br+Vr*Vr;if(hn>rr){xe-=ur/=2,Pe-=Ke/=2;continue}rr=hn;var dn=(xe>0?-1:1)*ie,An=(Pe>0?-1:1)*ie,ri=Zt(xe+dn,Pe),vi=Zt(xe,Pe+An),bi=(ri[0]-br[0])/dn,wi=(ri[1]-br[1])/dn,Ti=(vi[0]-br[0])/An,Wi=(vi[1]-br[1])/An,ga=Wi*bi-wi*Ti,$i=(E(ga)<.5?.5:1)/ga;if(ur=(Vr*Ti-Br*Wi)*$i,Ke=(Br*wi-Vr*bi)*$i,xe+=ur,Pe+=Ke,E(ur)<ie&&E(Ke)<ie)break}return[xe,Pe]}}function Ft(){var Zt=rt(1.68,2),Yt=1.4,ie=12;function ue(ke,xe){if(ke+xe<-Yt){var Pe=(ke-xe+1.6)*(ke+xe+Yt)/8;ke+=Pe,xe-=.8*Pe*h(xe+s/2)}var rr=Zt(ke,xe),ur=(1-A(ke*xe))/ie;return rr[1]<0&&(rr[0]*=1+ur),rr[1]>0&&(rr[1]*=1+ur/1.5*rr[0]*rr[0]),rr}return ue.invert=xt(ue),ue}function Et(){return(0,M.Z)(Ft()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function mt(Zt,Yt){var ie=Zt*h(Yt),ue=30,ke;do Yt-=ke=(Yt+h(Yt)-ie)/(1+A(Yt));while(E(ke)>p&&--ue>0);return Yt/2}function gt(Zt,Yt,ie){function ue(ke,xe){return[Zt*ke*A(xe=mt(ie,xe)),Yt*h(xe)]}return ue.invert=function(ke,xe){return xe=L(xe/Yt),[ke/(Zt*A(xe)),L((2*xe+h(2*xe))/ie)]},ue}var wt=gt(k/u,k,s);function Pt(){return(0,M.Z)(wt).scale(169.529)}var Bt=2.00276,kt=1.11072;function jt(Zt,Yt){var ie=mt(s,Yt);return[Bt*Zt/(1/A(Yt)+kt/A(ie)),(Yt+k*h(ie))/Bt]}jt.invert=function(Zt,Yt){var ie=Bt*Yt,ue=Yt<0?-c:c,ke=25,xe,Pe;do Pe=ie-k*h(ue),ue-=xe=(h(2*ue)+2*ue-s*h(Pe))/(2*A(2*ue)+2+s*A(Pe)*k*A(ue));while(E(xe)>p&&--ke>0);return Pe=ie-k*h(ue),[Zt*(1/A(Pe)+kt/A(ue))/Bt,Pe]};function Ht(){return(0,M.Z)(jt).scale(160.857)}function Vt(Zt){var Yt=0,ie=(0,M.r)(Zt),ue=ie(Yt);return ue.parallel=function(ke){return arguments.length?ie(Yt=ke*l):Yt*P},ue}function ee(Zt,Yt){return[Zt*A(Yt),Yt]}ee.invert=function(Zt,Yt){return[Zt/A(Yt),Yt]};function te(){return(0,M.Z)(ee).scale(152.63)}function ae(Zt){if(!Zt)return ee;var Yt=1/y(Zt);function ie(ue,ke){var xe=Yt+Zt-ke,Pe=xe&&ue*A(ke)/xe;return[xe*h(Pe),Yt-xe*A(Pe)]}return ie.invert=function(ue,ke){var xe=I(ue*ue+(ke=Yt-ke)*ke),Pe=Yt+Zt-xe;return[xe/A(Pe)*S(ue,ke),Pe]},ie}function le(){return Vt(ae).scale(123.082).center([0,26.1441]).parallel(45)}function ce(Zt){function Yt(ie,ue){var ke=u-ue,xe=ke&&ie*Zt*h(ke)/ke;return[ke*h(xe)/Zt,u-ke*A(xe)]}return Yt.invert=function(ie,ue){var ke=ie*Zt,xe=u-ue,Pe=I(ke*ke+xe*xe),rr=S(ke,xe);return[(Pe?Pe/h(Pe):1)*rr/Zt,u-Pe]},Yt}function pe(){var Zt=.5,Yt=(0,M.r)(ce),ie=Yt(Zt);return ie.fraction=function(ue){return arguments.length?Yt(Zt=+ue):Zt},ie.scale(158.837)}var we=gt(1,4/s,s);function ve(){return(0,M.Z)(we).scale(152.63)}var Mt=t(66624),It=t(49386);function Rt(Zt,Yt,ie,ue,ke,xe){var Pe=A(xe),rr;if(E(Zt)>1||E(xe)>1)rr=w(ie*ke+Yt*ue*Pe);else{var ur=h(Zt/2),Ke=h(xe/2);rr=2*L(I(ur*ur+Yt*ue*Ke*Ke))}return E(rr)>p?[rr,S(ue*h(xe),Yt*ke-ie*ue*Pe)]:[0,0]}function zt(Zt,Yt,ie){return w((Zt*Zt+Yt*Yt-ie*ie)/(2*Zt*Yt))}function Tt(Zt){return Zt-2*s*v((Zt+s)/(2*s))}function ft(Zt,Yt,ie){for(var ue=[[Zt[0],Zt[1],h(Zt[1]),A(Zt[1])],[Yt[0],Yt[1],h(Yt[1]),A(Yt[1])],[ie[0],ie[1],h(ie[1]),A(ie[1])]],ke=ue[2],xe,Pe=0;Pe<3;++Pe,ke=xe)xe=ue[Pe],ke.v=Rt(xe[1]-ke[1],ke[3],ke[2],xe[3],xe[2],xe[0]-ke[0]),ke.point=[0,0];var rr=zt(ue[0].v[0],ue[2].v[0],ue[1].v[0]),ur=zt(ue[0].v[0],ue[1].v[0],ue[2].v[0]),Ke=s-rr;ue[2].point[1]=0,ue[0].point[0]=-(ue[1].point[0]=ue[0].v[0]/2);var pr=[ue[2].point[0]=ue[0].point[0]+ue[2].v[0]*A(rr),2*(ue[0].point[1]=ue[1].point[1]=ue[2].v[0]*h(rr))];function br(Br,Vr){var hn=h(Vr),dn=A(Vr),An=new Array(3),ri;for(ri=0;ri<3;++ri){var vi=ue[ri];if(An[ri]=Rt(Vr-vi[1],vi[3],vi[2],dn,hn,Br-vi[0]),!An[ri][0])return vi.point;An[ri][1]=Tt(An[ri][1]-vi.v[1])}var bi=pr.slice();for(ri=0;ri<3;++ri){var wi=ri==2?0:ri+1,Ti=zt(ue[ri].v[0],An[ri][0],An[wi][0]);An[ri][1]<0&&(Ti=-Ti),ri?ri==1?(Ti=ur-Ti,bi[0]-=An[ri][0]*A(Ti),bi[1]-=An[ri][0]*h(Ti)):(Ti=Ke-Ti,bi[0]+=An[ri][0]*A(Ti),bi[1]+=An[ri][0]*h(Ti)):(bi[0]+=An[ri][0]*A(Ti),bi[1]-=An[ri][0]*h(Ti))}return bi[0]/=3,bi[1]/=3,bi}return br}function ut(Zt){return Zt[0]*=l,Zt[1]*=l,Zt}function vt(){return St([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function St(Zt,Yt,ie){var ue=(0,Mt.Z)({type:"MultiPoint",coordinates:[Zt,Yt,ie]}),ke=[-ue[0],-ue[1]],xe=(0,It.Z)(ke),Pe=ft(ut(xe(Zt)),ut(xe(Yt)),ut(xe(ie)));Pe.invert=xt(Pe);var rr=(0,M.Z)(Pe).rotate(ke),ur=rr.center;return delete rr.rotate,rr.center=function(Ke){return arguments.length?ur(xe(Ke)):xe.invert(ur())},rr.clipAngle(90)}function Ot(Zt,Yt){var ie=I(1-h(Yt));return[2/_*Zt*ie,_*(1-ie)]}Ot.invert=function(Zt,Yt){var ie=(ie=Yt/_-1)*ie;return[ie>0?Zt*I(s/ie)/2:0,L(1-ie)]};function Xt(){return(0,M.Z)(Ot).scale(95.6464).center([0,30])}function $t(Zt){var Yt=y(Zt);function ie(ue,ke){return[ue,(ue?ue/h(ue):1)*(h(ke)*A(ue)-Yt*A(ke))]}return ie.invert=Yt?function(ue,ke){ue&&(ke*=h(ue)/ue);var xe=A(ue);return[ue,2*S(I(xe*xe+Yt*Yt-ke*ke)-xe,Yt-ke)]}:function(ue,ke){return[ue,L(ue?ke*y(ue)/ue:ke)]},ie}function de(){return Vt($t).scale(249.828).clipAngle(90)}var Me=I(3);function Fe(Zt,Yt){return[Me*Zt*(2*A(2*Yt/3)-1)/_,Me*_*h(Yt/3)]}Fe.invert=function(Zt,Yt){var ie=3*L(Yt/(Me*_));return[_*Zt/(Me*(2*A(2*ie/3)-1)),ie]};function De(){return(0,M.Z)(Fe).scale(156.19)}function Ae(Zt){var Yt=A(Zt);function ie(ue,ke){return[ue*Yt,h(ke)/Yt]}return ie.invert=function(ue,ke){return[ue/Yt,L(ke*Yt)]},ie}function Ve(){return Vt(Ae).parallel(38.58).scale(195.044)}function Qe(Zt){var Yt=A(Zt);function ie(ue,ke){return[ue*Yt,(1+Yt)*y(ke/2)]}return ie.invert=function(ue,ke){return[ue/Yt,i(ke/(1+Yt))*2]},ie}function Sr(){return Vt(Qe).scale(124.75)}function he(Zt,Yt){var ie=I(8/(3*s));return[ie*Zt*(1-E(Yt)/s),ie*Yt]}he.invert=function(Zt,Yt){var ie=I(8/(3*s)),ue=Yt/ie;return[Zt/(ie*(1-E(ue)/s)),ue]};function je(){return(0,M.Z)(he).scale(165.664)}function Re(Zt,Yt){var ie=I(4-3*h(E(Yt)));return[2/I(6*s)*Zt*ie,o(Yt)*I(2*s/3)*(2-ie)]}Re.invert=function(Zt,Yt){var ie=2-E(Yt)/I(2*s/3);return[Zt*I(6*s)/(2*ie),o(Yt)*L((4-ie*ie)/3)]};function _r(){return(0,M.Z)(Re).scale(165.664)}function tr(Zt,Yt){var ie=I(s*(4+s));return[2/ie*Zt*(1+I(1-4*Yt*Yt/(s*s))),4/ie*Yt]}tr.invert=function(Zt,Yt){var ie=I(s*(4+s))/2;return[Zt*ie/(1+I(1-Yt*Yt*(4+s)/(4*s))),Yt*ie/2]};function Gt(){return(0,M.Z)(tr).scale(180.739)}function re(Zt,Yt){var ie=(2+u)*h(Yt);Yt/=2;for(var ue=0,ke=1/0;ue<10&&E(ke)>p;ue++){var xe=A(Yt);Yt-=ke=(Yt+h(Yt)*(xe+2)-ie)/(2*xe*(1+xe))}return[2/I(s*(4+s))*Zt*(1+A(Yt)),2*I(s/(4+s))*h(Yt)]}re.invert=function(Zt,Yt){var ie=Yt*I((4+s)/s)/2,ue=L(ie),ke=A(ue);return[Zt/(2/I(s*(4+s))*(1+ke)),L((ue+ie*(ke+2))/(2+u))]};function fe(){return(0,M.Z)(re).scale(180.739)}function ye(Zt,Yt){return[Zt*(1+A(Yt))/I(2+s),2*Yt/I(2+s)]}ye.invert=function(Zt,Yt){var ie=I(2+s),ue=Yt*ie/2;return[ie*Zt/(1+A(ue)),ue]};function Le(){return(0,M.Z)(ye).scale(173.044)}function _e(Zt,Yt){for(var ie=(1+u)*h(Yt),ue=0,ke=1/0;ue<10&&E(ke)>p;ue++)Yt-=ke=(Yt+h(Yt)-ie)/(1+A(Yt));return ie=I(2+s),[Zt*(1+A(Yt))/ie,2*Yt/ie]}_e.invert=function(Zt,Yt){var ie=1+u,ue=I(ie/2);return[Zt*2*ue/(1+A(Yt*=ue)),L((Yt+h(Yt))/ie)]};function Ce(){return(0,M.Z)(_e).scale(173.044)}var ze=3+2*k;function We(Zt,Yt){var ie=h(Zt/=2),ue=A(Zt),ke=I(A(Yt)),xe=A(Yt/=2),Pe=h(Yt)/(xe+k*ue*ke),rr=I(2/(1+Pe*Pe)),ur=I((k*xe+(ue+ie)*ke)/(k*xe+(ue-ie)*ke));return[ze*(rr*(ur-1/ur)-2*e(ur)),ze*(rr*Pe*(ur+1/ur)-2*i(Pe))]}We.invert=function(Zt,Yt){if(!(xe=it.invert(Zt/1.2,Yt*1.065)))return null;var ie=xe[0],ue=xe[1],ke=20,xe;Zt/=ze,Yt/=ze;do{var Pe=ie/2,rr=ue/2,ur=h(Pe),Ke=A(Pe),pr=h(rr),br=A(rr),Br=A(ue),Vr=I(Br),hn=pr/(br+k*Ke*Vr),dn=hn*hn,An=I(2/(1+dn)),ri=k*br+(Ke+ur)*Vr,vi=k*br+(Ke-ur)*Vr,bi=ri/vi,wi=I(bi),Ti=wi-1/wi,Wi=wi+1/wi,ga=An*Ti-2*e(wi)-Zt,$i=An*hn*Wi-2*i(hn)-Yt,st=pr&&T*Vr*ur*dn/pr,bt=(k*Ke*br+Vr)/(2*(br+k*Ke*Vr)*(br+k*Ke*Vr)*Vr),Ct=-.5*hn*An*An*An,qt=Ct*st,Wt=Ct*bt,Jt=(Jt=2*br+k*Vr*(Ke-ur))*Jt*wi,ge=(k*Ke*br*Vr+Br)/Jt,ne=-(k*ur*pr)/(Vr*Jt),Ie=Ti*qt-2*ge/wi+An*(ge+ge/bi),Ge=Ti*Wt-2*ne/wi+An*(ne+ne/bi),Ye=hn*Wi*qt-2*st/(1+dn)+An*Wi*st+An*hn*(ge-ge/bi),vr=hn*Wi*Wt-2*bt/(1+dn)+An*Wi*bt+An*hn*(ne-ne/bi),Ar=Ge*Ye-vr*Ie;if(!Ar)break;var jr=($i*Ge-ga*vr)/Ar,Gr=(ga*Ye-$i*Ie)/Ar;ie-=jr,ue=r(-u,f(u,ue-Gr))}while((E(jr)>p||E(Gr)>p)&&--ke>0);return E(E(ue)-u)<p?[0,ue]:ke&&[ie,ue]};function qe(){return(0,M.Z)(We).scale(62.5271)}var ir=A(35*l);function xr(Zt,Yt){var ie=y(Yt/2);return[Zt*ir*I(1-ie*ie),(1+ir)*ie]}xr.invert=function(Zt,Yt){var ie=Yt/(1+ir);return[Zt&&Zt/(ir*I(1-ie*ie)),2*i(ie)]};function Dt(){return(0,M.Z)(xr).scale(137.152)}function Ut(Zt,Yt){var ie=Yt/2,ue=A(ie);return[2*Zt/_*A(Yt)*ue*ue,_*y(ie)]}Ut.invert=function(Zt,Yt){var ie=i(Yt/_),ue=A(ie),ke=2*ie;return[Zt*_/2/(A(ke)*ue*ue),ke]};function Te(){return(0,M.Z)(Ut).scale(135.264)}function Se(Zt){var Yt=1-Zt,ie=xe(s,0)[0]-xe(-s,0)[0],ue=xe(0,u)[1]-xe(0,-u)[1],ke=I(2*ue/ie);function xe(ur,Ke){var pr=A(Ke),br=h(Ke);return[pr/(Yt+Zt*pr)*ur,Yt*Ke+Zt*br]}function Pe(ur,Ke){var pr=xe(ur,Ke);return[pr[0]*ke,pr[1]/ke]}function rr(ur){return Pe(0,ur)[1]}return Pe.invert=function(ur,Ke){var pr=yt(rr,Ke),br=ur/ke*(Zt+Yt/A(pr));return[br,pr]},Pe}function Be(){var Zt=.5,Yt=(0,M.r)(Se),ie=Yt(Zt);return ie.alpha=function(ue){return arguments.length?Yt(Zt=+ue):Zt},ie.scale(168.725)}var Je=t(57962),$e=t(97492);function Xe(Zt){return[Zt[0]/2,L(y(Zt[1]/2*l))*P]}function Oe(Zt){return[Zt[0]*2,2*i(h(Zt[1]*l))*P]}function ar(Zt){Zt==null&&(Zt=Je.Z);var Yt=Zt(),ie=(0,$e.Z)().scale(P).precision(0).clipAngle(null).translate([0,0]);function ue(xe){return Yt(Xe(xe))}Yt.invert&&(ue.invert=function(xe){return Oe(Yt.invert(xe))}),ue.stream=function(xe){var Pe=Yt.stream(xe),rr=ie.stream({point:function(ur,Ke){Pe.point(ur/2,L(y(-Ke/2*l))*P)},lineStart:function(){Pe.lineStart()},lineEnd:function(){Pe.lineEnd()},polygonStart:function(){Pe.polygonStart()},polygonEnd:function(){Pe.polygonEnd()}});return rr.sphere=Pe.sphere,rr};function ke(xe){ue[xe]=function(){return arguments.length?(Yt[xe].apply(Yt,arguments),ue):Yt[xe]()}}return ue.rotate=function(xe){return arguments.length?(ie.rotate(xe),ue):ie.rotate()},ue.center=function(xe){return arguments.length?(Yt.center(Xe(xe)),ue):Oe(Yt.center())},ke("angle"),ke("clipAngle"),ke("clipExtent"),ke("fitExtent"),ke("fitHeight"),ke("fitSize"),ke("fitWidth"),ke("scale"),ke("translate"),ke("precision"),ue.scale(249.5)}function cr(Zt,Yt){var ie=2*s/Yt,ue=Zt*Zt;function ke(xe,Pe){var rr=(0,nt.N)(xe,Pe),ur=rr[0],Ke=rr[1],pr=ur*ur+Ke*Ke;if(pr>ue){var br=I(pr),Br=S(Ke,ur),Vr=ie*a(Br/ie),hn=Br-Vr,dn=Zt*A(hn),An=(Zt*h(hn)-hn*h(dn))/(u-dn),ri=sr(hn,An),vi=(s-Zt)/lr(ri,dn,s);ur=br;var bi=50,wi;do ur-=wi=(Zt+lr(ri,dn,ur)*vi-br)/(ri(ur)*vi);while(E(wi)>p&&--bi>0);Ke=hn*h(ur),ur<u&&(Ke-=An*(ur-u));var Ti=h(Vr),Wi=A(Vr);rr[0]=ur*Wi-Ke*Ti,rr[1]=ur*Ti+Ke*Wi}return rr}return ke.invert=function(xe,Pe){var rr=xe*xe+Pe*Pe;if(rr>ue){var ur=I(rr),Ke=S(Pe,xe),pr=ie*a(Ke/ie),br=Ke-pr;xe=ur*A(br),Pe=ur*h(br);for(var Br=xe-u,Vr=h(xe),hn=Pe/Vr,dn=xe<u?1/0:0,An=10;;){var ri=Zt*h(hn),vi=Zt*A(hn),bi=h(vi),wi=u-vi,Ti=(ri-hn*bi)/wi,Wi=sr(hn,Ti);if(E(dn)<x||!--An)break;hn-=dn=(hn*Vr-Ti*Br-Pe)/(Vr-Br*2*(wi*(vi+hn*ri*A(vi)-bi)-ri*(ri-hn*bi))/(wi*wi))}ur=Zt+lr(Wi,vi,xe)*(s-Zt)/lr(Wi,vi,s),Ke=pr+hn,xe=ur*A(Ke),Pe=ur*h(Ke)}return nt.N.invert(xe,Pe)},ke}function sr(Zt,Yt){return function(ie){var ue=Zt*A(ie);return ie<u&&(ue-=Yt),I(1+ue*ue)}}function lr(Zt,Yt,ie){for(var ue=50,ke=(ie-Yt)/ue,xe=Zt(Yt)+Zt(ie),Pe=1,rr=Yt;Pe<ue;++Pe)xe+=2*Zt(rr+=ke);return xe*.5*ke}function Or(){var Zt=6,Yt=30*l,ie=A(Yt),ue=h(Yt),ke=(0,M.r)(cr),xe=ke(Yt,Zt),Pe=xe.stream,rr=.01,ur=-A(rr*l),Ke=h(rr*l);return xe.radius=function(pr){return arguments.length?(ie=A(Yt=pr*l),ue=h(Yt),ke(Yt,Zt)):Yt*P},xe.lobes=function(pr){return arguments.length?ke(Yt,Zt=+pr):Zt},xe.stream=function(pr){var br=xe.rotate(),Br=Pe(pr),Vr=(xe.rotate([0,0]),Pe(pr));return xe.rotate(br),Br.sphere=function(){Vr.polygonStart(),Vr.lineStart();for(var hn=0,dn=2*s/Zt,An=0;hn<Zt;++hn,An-=dn)Vr.point(S(Ke*A(An),ur)*P,L(Ke*h(An))*P),Vr.point(S(ue*A(An-dn/2),ie)*P,L(ue*h(An-dn/2))*P);Vr.lineEnd(),Vr.polygonEnd()},Br},xe.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function Ir(Zt,Yt,ie,ue,ke,xe,Pe,rr){arguments.length<8&&(rr=0);function ur(Ke,pr){if(!pr)return[Zt*Ke/s,0];var br=pr*pr,Br=Zt+br*(Yt+br*(ie+br*ue)),Vr=pr*(ke-1+br*(xe-rr+br*Pe)),hn=(Br*Br+Vr*Vr)/(2*Vr),dn=Ke*L(Br/hn)/s;return[hn*h(dn),pr*(1+br*rr)+hn*(1-A(dn))]}return ur.invert=function(Ke,pr){var br=s*Ke/Zt,Br=pr,Vr,hn,dn=50;do{var An=Br*Br,ri=Zt+An*(Yt+An*(ie+An*ue)),vi=Br*(ke-1+An*(xe-rr+An*Pe)),bi=ri*ri+vi*vi,wi=2*vi,Ti=bi/wi,Wi=Ti*Ti,ga=L(ri/Ti)/s,$i=br*ga,st=ri*ri,bt=(2*Yt+An*(4*ie+An*6*ue))*Br,Ct=ke+An*(3*xe+An*5*Pe),qt=2*(ri*bt+vi*(Ct-1)),Wt=2*(Ct-1),Jt=(qt*wi-bi*Wt)/(wi*wi),ge=A($i),ne=h($i),Ie=Ti*ge,Ge=Ti*ne,Ye=br/s*(1/I(1-st/Wi))*(bt*Ti-ri*Jt)/Wi,vr=Ge-Ke,Ar=Br*(1+An*rr)+Ti-Ie-pr,jr=Jt*ne+Ie*Ye,Gr=Ie*ga,Tr=1+Jt-(Jt*ge-Ge*Ye),Dr=Ge*ga,Ur=jr*Dr-Tr*Gr;if(!Ur)break;br-=Vr=(Ar*jr-vr*Tr)/Ur,Br-=hn=(vr*Dr-Ar*Gr)/Ur}while((E(Vr)>p||E(hn)>p)&&--dn>0);return[br,Br]},ur}var Pr=Ir(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function rn(){return(0,M.Z)(Pr).scale(149.995)}var Zr=Ir(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function yn(){return(0,M.Z)(Zr).scale(153.93)}var Tn=Ir(5/6*s,-.62636,-.0344,0,1.3493,-.05524,0,.045);function hr(){return(0,M.Z)(Tn).scale(130.945)}function dr(Zt,Yt){var ie=Zt*Zt,ue=Yt*Yt;return[Zt*(1-.162388*ue)*(.87-952426e-9*ie*ie),Yt*(1+ue/12)]}dr.invert=function(Zt,Yt){var ie=Zt,ue=Yt,ke=50,xe;do{var Pe=ue*ue;ue-=xe=(ue*(1+Pe/12)-Yt)/(1+Pe/4)}while(E(xe)>p&&--ke>0);ke=50,Zt/=1-.162388*Pe;do{var rr=(rr=ie*ie)*rr;ie-=xe=(ie*(.87-952426e-9*rr)-Zt)/(.87-.00476213*rr)}while(E(xe)>p&&--ke>0);return[ie,ue]};function Lr(){return(0,M.Z)(dr).scale(131.747)}var Cr=Ir(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Hr(){return(0,M.Z)(Cr).scale(131.087)}function sn(Zt){var Yt=Zt(u,0)[0]-Zt(-u,0)[0];function ie(ue,ke){var xe=ue>0?-.5:.5,Pe=Zt(ue+xe*s,ke);return Pe[0]-=xe*Yt,Pe}return Zt.invert&&(ie.invert=function(ue,ke){var xe=ue>0?-.5:.5,Pe=Zt.invert(ue+xe*Yt,ke),rr=Pe[0]-xe*s;return rr<-s?rr+=2*s:rr>s&&(rr-=2*s),Pe[0]=rr,Pe}),ie}function Yr(Zt,Yt){var ie=o(Zt),ue=o(Yt),ke=A(Yt),xe=A(Zt)*ke,Pe=h(Zt)*ke,rr=h(ue*Yt);Zt=E(S(Pe,rr)),Yt=L(xe),E(Zt-u)>p&&(Zt%=u);var ur=xn(Zt>s/4?u-Zt:Zt,Yt);return Zt>s/4&&(rr=ur[0],ur[0]=-ur[1],ur[1]=-rr),ur[0]*=ie,ur[1]*=-ue,ur}Yr.invert=function(Zt,Yt){E(Zt)>1&&(Zt=o(Zt)*2-Zt),E(Yt)>1&&(Yt=o(Yt)*2-Yt);var ie=o(Zt),ue=o(Yt),ke=-ie*Zt,xe=-ue*Yt,Pe=xe/ke<1,rr=wn(Pe?xe:ke,Pe?ke:xe),ur=rr[0],Ke=rr[1],pr=A(Ke);return Pe&&(ur=-u-ur),[ie*(S(h(ur)*pr,-h(Ke))+s),ue*L(A(ur)*pr)]};function xn(Zt,Yt){if(Yt===u)return[0,0];var ie=h(Yt),ue=ie*ie,ke=ue*ue,xe=1+ke,Pe=1+3*ke,rr=1-ke,ur=L(1/I(xe)),Ke=rr+ue*xe*ur,pr=(1-ie)/Ke,br=I(pr),Br=pr*xe,Vr=I(Br),hn=br*rr,dn,An;if(Zt===0)return[0,-(hn+ue*Vr)];var ri=A(Yt),vi=1/ri,bi=2*ie*ri,wi=(-3*ue+ur*Pe)*bi,Ti=(-Ke*ri-(1-ie)*wi)/(Ke*Ke),Wi=.5*Ti/br,ga=rr*Wi-2*ue*br*bi,$i=ue*xe*Ti+pr*Pe*bi,st=-vi*bi,bt=-vi*$i,Ct=-2*vi*ga,qt=4*Zt/s,Wt;if(Zt>.222*s||Yt<s/4&&Zt>.175*s){if(dn=(hn+ue*I(Br*(1+ke)-hn*hn))/(1+ke),Zt>s/4)return[dn,dn];var Jt=dn,ge=.5*dn;dn=.5*(ge+Jt),An=50;do{var ne=I(Br-dn*dn),Ie=dn*(Ct+st*ne)+bt*L(dn/Vr)-qt;if(!Ie)break;Ie<0?ge=dn:Jt=dn,dn=.5*(ge+Jt)}while(E(Jt-ge)>p&&--An>0)}else{dn=p,An=25;do{var Ge=dn*dn,Ye=I(Br-Ge),vr=Ct+st*Ye,Ar=dn*vr+bt*L(dn/Vr)-qt,jr=vr+(bt-st*Ge)/Ye;dn-=Wt=Ye?Ar/jr:0}while(E(Wt)>p&&--An>0)}return[dn,-hn-ue*I(Br-dn*dn)]}function wn(Zt,Yt){for(var ie=0,ue=1,ke=.5,xe=50;;){var Pe=ke*ke,rr=I(ke),ur=L(1/I(1+Pe)),Ke=1-Pe+ke*(1+Pe)*ur,pr=(1-rr)/Ke,br=I(pr),Br=pr*(1+Pe),Vr=br*(1-Pe),hn=Br-Zt*Zt,dn=I(hn),An=Yt+Vr+ke*dn;if(E(ue-ie)<x||--xe===0||An===0)break;An>0?ie=ke:ue=ke,ke=.5*(ie+ue)}if(!xe)return null;var ri=L(rr),vi=A(ri),bi=1/vi,wi=2*rr*vi,Ti=(-3*ke+ur*(1+3*Pe))*wi,Wi=(-Ke*vi-(1-rr)*Ti)/(Ke*Ke),ga=.5*Wi/br,$i=(1-Pe)*ga-2*ke*br*wi,st=-2*bi*$i,bt=-bi*wi,Ct=-bi*(ke*(1+Pe)*Wi+pr*(1+3*Pe)*wi);return[s/4*(Zt*(st+bt*dn)+Ct*L(Zt/I(Br))),ri]}function Un(){return(0,M.Z)(sn(Yr)).scale(239.75)}function qn(Zt,Yt,ie){var ue,ke,xe;return Zt?(ue=ei(Zt,ie),Yt?(ke=ei(Yt,1-ie),xe=ke[1]*ke[1]+ie*ue[0]*ue[0]*ke[0]*ke[0],[[ue[0]*ke[2]/xe,ue[1]*ue[2]*ke[0]*ke[1]/xe],[ue[1]*ke[1]/xe,-ue[0]*ue[2]*ke[0]*ke[2]/xe],[ue[2]*ke[1]*ke[2]/xe,-ie*ue[0]*ue[1]*ke[0]/xe]]):[[ue[0],0],[ue[1],0],[ue[2],0]]):(ke=ei(Yt,1-ie),[[0,ke[0]/ke[1]],[1/ke[1],0],[ke[2]/ke[1],0]])}function ei(Zt,Yt){var ie,ue,ke,xe,Pe;if(Yt<p)return xe=h(Zt),ue=A(Zt),ie=Yt*(Zt-xe*ue)/4,[xe-ie*ue,ue+ie*xe,1-Yt*xe*xe/2,Zt-ie];if(Yt>=1-p)return ie=(1-Yt)/4,ue=O(Zt),xe=z(Zt),ke=1/ue,Pe=ue*B(Zt),[xe+ie*(Pe-Zt)/(ue*ue),ke-ie*xe*ke*(Pe-Zt),ke+ie*xe*ke*(Pe+Zt),2*i(g(Zt))-u+ie*(Pe-Zt)/ue];var rr=[1,0,0,0,0,0,0,0,0],ur=[I(Yt),0,0,0,0,0,0,0,0],Ke=0;for(ue=I(1-Yt),Pe=1;E(ur[Ke]/rr[Ke])>p&&Ke<8;)ie=rr[Ke++],ur[Ke]=(ie-ue)/2,rr[Ke]=(ie+ue)/2,ue=I(ie*ue),Pe*=2;ke=Pe*rr[Ke]*Zt;do xe=ur[Ke]*h(ue=ke)/rr[Ke],ke=(L(xe)+ke)/2;while(--Ke);return[h(ke),xe=A(ke),xe/A(ke-ue),ke]}function Gn(Zt,Yt,ie){var ue=E(Zt),ke=E(Yt),xe=B(ke);if(ue){var Pe=1/h(ue),rr=1/(y(ue)*y(ue)),ur=-(rr+ie*(xe*xe*Pe*Pe)-1+ie),Ke=(ie-1)*rr,pr=(-ur+I(ur*ur-4*Ke))/2;return[Hn(i(1/I(pr)),ie)*o(Zt),Hn(i(I((pr/rr-1)/ie)),1-ie)*o(Yt)]}return[0,Hn(i(xe),1-ie)*o(Yt)]}function Hn(Zt,Yt){if(!Yt)return Zt;if(Yt===1)return e(y(Zt/2+c));for(var ie=1,ue=I(1-Yt),ke=I(Yt),xe=0;E(ke)>p;xe++){if(Zt%s){var Pe=i(ue*y(Zt)/ie);Pe<0&&(Pe+=s),Zt+=Pe+~~(Zt/s)*s}else Zt+=Zt;ke=(ie+ue)/2,ue=I(ie*ue),ke=((ie=ke)-ue)/2}return Zt/(n(2,xe)*ie)}function gr(Zt,Yt){var ie=(k-1)/(k+1),ue=I(1-ie*ie),ke=Hn(u,ue*ue),xe=-1,Pe=e(y(s/4+E(Yt)/2)),rr=g(xe*Pe)/I(ie),ur=$r(rr*A(xe*Zt),rr*h(xe*Zt)),Ke=Gn(ur[0],ur[1],ue*ue);return[-Ke[1],(Yt>=0?1:-1)*(.5*ke-Ke[0])]}function $r(Zt,Yt){var ie=Zt*Zt,ue=Yt+1,ke=1-ie-Yt*Yt;return[.5*((Zt>=0?u:-u)-S(ke,2*Zt)),-.25*e(ke*ke+4*ie)+.5*e(ue*ue+ie)]}function Jr(Zt,Yt){var ie=Yt[0]*Yt[0]+Yt[1]*Yt[1];return[(Zt[0]*Yt[0]+Zt[1]*Yt[1])/ie,(Zt[1]*Yt[0]-Zt[0]*Yt[1])/ie]}gr.invert=function(Zt,Yt){var ie=(k-1)/(k+1),ue=I(1-ie*ie),ke=Hn(u,ue*ue),xe=-1,Pe=qn(.5*ke-Yt,-Zt,ue*ue),rr=Jr(Pe[0],Pe[1]),ur=S(rr[1],rr[0])/xe;return[ur,2*i(g(.5/xe*e(ie*rr[0]*rr[0]+ie*rr[1]*rr[1])))-u]};function ln(){return(0,M.Z)(sn(gr)).scale(151.496)}var zn=t(7613);function mn(Zt){var Yt=h(Zt),ie=A(Zt),ue=Mn(Zt);ue.invert=Mn(-Zt);function ke(xe,Pe){var rr=ue(xe,Pe);xe=rr[0],Pe=rr[1];var ur=h(Pe),Ke=A(Pe),pr=A(xe),br=w(Yt*ur+ie*Ke*pr),Br=h(br),Vr=E(Br)>p?br/Br:1;return[Vr*ie*h(xe),(E(xe)>u?Vr:-Vr)*(Yt*Ke-ie*ur*pr)]}return ke.invert=function(xe,Pe){var rr=I(xe*xe+Pe*Pe),ur=-h(rr),Ke=A(rr),pr=rr*Ke,br=-Pe*ur,Br=rr*Yt,Vr=I(pr*pr+br*br-Br*Br),hn=S(pr*Br+br*Vr,br*Br-pr*Vr),dn=(rr>u?-1:1)*S(xe*ur,rr*A(hn)*Ke+Pe*h(hn)*ur);return ue.invert(dn,hn)},ke}function Mn(Zt){var Yt=h(Zt),ie=A(Zt);return function(ue,ke){var xe=A(ke),Pe=A(ue)*xe,rr=h(ue)*xe,ur=h(ke);return[S(rr,Pe*ie-ur*Yt),L(ur*ie+Pe*Yt)]}}function On(){var Zt=0,Yt=(0,M.r)(mn),ie=Yt(Zt),ue=ie.rotate,ke=ie.stream,xe=(0,zn.Z)();return ie.parallel=function(Pe){if(!arguments.length)return Zt*P;var rr=ie.rotate();return Yt(Zt=Pe*l).rotate(rr)},ie.rotate=function(Pe){return arguments.length?(ue.call(ie,[Pe[0],Pe[1]-Zt*P]),xe.center([-Pe[0],-Pe[1]]),ie):(Pe=ue.call(ie),Pe[1]+=Zt*P,Pe)},ie.stream=function(Pe){return Pe=ke(Pe),Pe.sphere=function(){Pe.polygonStart();var rr=.01,ur=xe.radius(90-rr)().coordinates[0],Ke=ur.length-1,pr=-1,br;for(Pe.lineStart();++pr<Ke;)Pe.point((br=ur[pr])[0],br[1]);for(Pe.lineEnd(),ur=xe.radius(90+rr)().coordinates[0],Ke=ur.length-1,Pe.lineStart();--pr>=0;)Pe.point((br=ur[pr])[0],br[1]);Pe.lineEnd(),Pe.polygonEnd()},Pe},ie.scale(79.4187).parallel(45).clipAngle(179.999)}var Xn=t(33064),gi=t(72736),Ri=3,Ue=L(1-1/Ri)*P,fr=Ae(0);function Qr(Zt){var Yt=Ue*l,ie=Ot(s,Yt)[0]-Ot(-s,Yt)[0],ue=fr(0,Yt)[1],ke=Ot(0,Yt)[1],xe=_-ke,Pe=b/Zt,rr=4/b,ur=ue+xe*xe*4/b;function Ke(pr,br){var Br,Vr=E(br);if(Vr>Yt){var hn=f(Zt-1,r(0,v((pr+s)/Pe)));pr+=s*(Zt-1)/Zt-hn*Pe,Br=Ot(pr,Vr),Br[0]=Br[0]*b/ie-b*(Zt-1)/(2*Zt)+hn*b/Zt,Br[1]=ue+(Br[1]-ke)*4*xe/b,br<0&&(Br[1]=-Br[1])}else Br=fr(pr,br);return Br[0]*=rr,Br[1]/=ur,Br}return Ke.invert=function(pr,br){pr/=rr,br*=ur;var Br=E(br);if(Br>ue){var Vr=f(Zt-1,r(0,v((pr+s)/Pe)));pr=(pr+s*(Zt-1)/Zt-Vr*Pe)*ie/b;var hn=Ot.invert(pr,.25*(Br-ue)*b/xe+ke);return hn[0]-=s*(Zt-1)/Zt-Vr*Pe,br<0&&(hn[1]=-hn[1]),hn}return fr.invert(pr,br)},Ke}function cn(Zt,Yt){return[Zt,Yt&1?90-p:Ue]}function nn(Zt,Yt){return[Zt,Yt&1?-90+p:-Ue]}function _n(Zt){return[Zt[0]*(1-p),Zt[1]]}function gn(Zt){var Yt=[].concat((0,Xn.w6)(-180,180+Zt/2,Zt).map(cn),(0,Xn.w6)(180,-180-Zt/2,-Zt).map(nn));return{type:"Polygon",coordinates:[Zt===180?Yt.map(_n):Yt]}}function en(){var Zt=4,Yt=(0,M.r)(Qr),ie=Yt(Zt),ue=ie.stream;return ie.lobes=function(ke){return arguments.length?Yt(Zt=+ke):Zt},ie.stream=function(ke){var xe=ie.rotate(),Pe=ue(ke),rr=(ie.rotate([0,0]),ue(ke));return ie.rotate(xe),Pe.sphere=function(){(0,gi.Z)(gn(180/Zt),rr)},Pe},ie.scale(239.75)}function wr(Zt){var Yt=1+Zt,ie=h(1/Yt),ue=L(ie),ke=2*I(s/(xe=s+4*ue*Yt)),xe,Pe=.5*ke*(Yt+I(Zt*(2+Zt))),rr=Zt*Zt,ur=Yt*Yt;function Ke(pr,br){var Br=1-h(br),Vr,hn;if(Br&&Br<2){var dn=u-br,An=25,ri;do{var vi=h(dn),bi=A(dn),wi=ue+S(vi,Yt-bi),Ti=1+ur-2*Yt*bi;dn-=ri=(dn-rr*ue-Yt*vi+Ti*wi-.5*Br*xe)/(2*Yt*vi*wi)}while(E(ri)>x&&--An>0);Vr=ke*I(Ti),hn=pr*wi/s}else Vr=ke*(Zt+Br),hn=pr*ue/s;return[Vr*h(hn),Pe-Vr*A(hn)]}return Ke.invert=function(pr,br){var Br=pr*pr+(br-=Pe)*br,Vr=(1+ur-Br/(ke*ke))/(2*Yt),hn=w(Vr),dn=h(hn),An=ue+S(dn,Yt-Vr);return[L(pr/I(Br))*s/An,L(1-2*(hn-rr*ue-Yt*dn+(1+ur-2*Yt*Vr)*An)/xe)]},Ke}function mr(){var Zt=1,Yt=(0,M.r)(wr),ie=Yt(Zt);return ie.ratio=function(ue){return arguments.length?Yt(Zt=+ue):Zt},ie.scale(167.774).center([0,18.67])}var Mr=.7109889596207567,an=.0528035274542;function kn(Zt,Yt){return Yt>-Mr?(Zt=wt(Zt,Yt),Zt[1]+=an,Zt):ee(Zt,Yt)}kn.invert=function(Zt,Yt){return Yt>-Mr?wt.invert(Zt,Yt-an):ee.invert(Zt,Yt)};function Rn(){return(0,M.Z)(kn).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function fn(Zt,Yt){return E(Yt)>Mr?(Zt=wt(Zt,Yt),Zt[1]-=Yt>0?an:-an,Zt):ee(Zt,Yt)}fn.invert=function(Zt,Yt){return E(Yt)>Mr?wt.invert(Zt,Yt+(Yt>0?an:-an)):ee.invert(Zt,Yt)};function Sn(){return(0,M.Z)(fn).scale(152.63)}function Vn(Zt,Yt,ie,ue){var ke=I(4*s/(2*ie+(1+Zt-Yt/2)*h(2*ie)+(Zt+Yt)/2*h(4*ie)+Yt/2*h(6*ie))),xe=I(ue*h(ie)*I((1+Zt*A(2*ie)+Yt*A(4*ie))/(1+Zt+Yt))),Pe=ie*ur(1);function rr(br){return I(1+Zt*A(2*br)+Yt*A(4*br))}function ur(br){var Br=br*ie;return(2*Br+(1+Zt-Yt/2)*h(2*Br)+(Zt+Yt)/2*h(4*Br)+Yt/2*h(6*Br))/ie}function Ke(br){return rr(br)*h(br)}var pr=function(br,Br){var Vr=ie*yt(ur,Pe*h(Br)/ie,Br/s);isNaN(Vr)&&(Vr=ie*o(Br));var hn=ke*rr(Vr);return[hn*xe*br/s*A(Vr),hn/xe*h(Vr)]};return pr.invert=function(br,Br){var Vr=yt(Ke,Br*xe/ke);return[br*s/(A(Vr)*ke*xe*rr(Vr)),L(ie*ur(Vr/ie)/Pe)]},ie===0&&(ke=I(ue/s),pr=function(br,Br){return[br*ke,h(Br)/ke]},pr.invert=function(br,Br){return[br/ke,L(Br*ke)]}),pr}function $n(){var Zt=1,Yt=0,ie=45*l,ue=2,ke=(0,M.r)(Vn),xe=ke(Zt,Yt,ie,ue);return xe.a=function(Pe){return arguments.length?ke(Zt=+Pe,Yt,ie,ue):Zt},xe.b=function(Pe){return arguments.length?ke(Zt,Yt=+Pe,ie,ue):Yt},xe.psiMax=function(Pe){return arguments.length?ke(Zt,Yt,ie=+Pe*l,ue):ie*P},xe.ratio=function(Pe){return arguments.length?ke(Zt,Yt,ie,ue=+Pe):ue},xe.scale(180.739)}function Kn(Zt,Yt,ie,ue,ke,xe,Pe,rr,ur,Ke,pr){if(pr.nanEncountered)return NaN;var br,Br,Vr,hn,dn,An,ri,vi,bi,wi;if(br=ie-Yt,Br=Zt(Yt+br*.25),Vr=Zt(ie-br*.25),isNaN(Br)){pr.nanEncountered=!0;return}if(isNaN(Vr)){pr.nanEncountered=!0;return}return hn=br*(ue+4*Br+ke)/12,dn=br*(ke+4*Vr+xe)/12,An=hn+dn,wi=(An-Pe)/15,Ke>ur?(pr.maxDepthCount++,An+wi):Math.abs(wi)<rr?An+wi:(ri=Yt+br*.5,vi=Kn(Zt,Yt,ri,ue,Br,ke,hn,rr*.5,ur,Ke+1,pr),isNaN(vi)?(pr.nanEncountered=!0,NaN):(bi=Kn(Zt,ri,ie,ke,Vr,xe,dn,rr*.5,ur,Ke+1,pr),isNaN(bi)?(pr.nanEncountered=!0,NaN):vi+bi))}function Jn(Zt,Yt,ie,ue,ke){var xe={maxDepthCount:0,nanEncountered:!1};ue===void 0&&(ue=1e-8),ke===void 0&&(ke=20);var Pe=Zt(Yt),rr=Zt(.5*(Yt+ie)),ur=Zt(ie),Ke=(Pe+4*rr+ur)*(ie-Yt)/6,pr=Kn(Zt,Yt,ie,Pe,rr,ur,Ke,ue,ke,1,xe);return pr}function ii(Zt,Yt,ie){function ue(Vr){return Zt+(1-Zt)*n(1-n(Vr,Yt),1/Yt)}function ke(Vr){return Jn(ue,0,Vr,1e-4)}for(var xe=1/ke(1),Pe=1e3,rr=1.00000001*xe,ur=[],Ke=0;Ke<=Pe;Ke++)ur.push(ke(Ke/Pe)*rr);function pr(Vr){var hn=0,dn=Pe,An=Pe>>1;do ur[An]>Vr?dn=An:hn=An,An=hn+dn>>1;while(An>hn);var ri=ur[An+1]-ur[An];return ri&&(ri=(Vr-ur[An+1])/ri),(An+1+ri)/Pe}var br=2*pr(1)/s*xe/ie,Br=function(Vr,hn){var dn=pr(E(h(hn))),An=ue(dn)*Vr;return dn/=br,[An,hn>=0?dn:-dn]};return Br.invert=function(Vr,hn){var dn;return hn*=br,E(hn)<1&&(dn=o(hn)*L(ke(E(hn))*xe)),[Vr/ue(E(hn)),dn]},Br}function Pa(){var Zt=0,Yt=2.5,ie=1.183136,ue=(0,M.r)(ii),ke=ue(Zt,Yt,ie);return ke.alpha=function(xe){return arguments.length?ue(Zt=+xe,Yt,ie):Zt},ke.k=function(xe){return arguments.length?ue(Zt,Yt=+xe,ie):Yt},ke.gamma=function(xe){return arguments.length?ue(Zt,Yt,ie=+xe):ie},ke.scale(152.63)}function Za(Zt,Yt){return E(Zt[0]-Yt[0])<p&&E(Zt[1]-Yt[1])<p}function Ga(Zt,Yt){for(var ie=-1,ue=Zt.length,ke=Zt[0],xe,Pe,rr,ur=[];++ie<ue;){xe=Zt[ie],Pe=(xe[0]-ke[0])/Yt,rr=(xe[1]-ke[1])/Yt;for(var Ke=0;Ke<Yt;++Ke)ur.push([ke[0]+Ke*Pe,ke[1]+Ke*rr]);ke=xe}return ur.push(xe),ur}function Ja(Zt){var Yt=[],ie,ue,ke,xe,Pe,rr,ur,Ke=Zt[0].length;for(ur=0;ur<Ke;++ur)ie=Zt[0][ur],ue=ie[0][0],ke=ie[0][1],xe=ie[1][1],Pe=ie[2][0],rr=ie[2][1],Yt.push(Ga([[ue+p,ke+p],[ue+p,xe-p],[Pe-p,xe-p],[Pe-p,rr+p]],30));for(ur=Zt[1].length-1;ur>=0;--ur)ie=Zt[1][ur],ue=ie[0][0],ke=ie[0][1],xe=ie[1][1],Pe=ie[2][0],rr=ie[2][1],Yt.push(Ga([[Pe-p,rr-p],[Pe-p,xe+p],[ue+p,xe+p],[ue+p,ke-p]],30));return{type:"Polygon",coordinates:[(0,Xn.TS)(Yt)]}}function Wa(Zt,Yt,ie){var ue,ke;function xe(ur,Ke){for(var pr=Ke<0?-1:1,br=Yt[+(Ke<0)],Br=0,Vr=br.length-1;Br<Vr&&ur>br[Br][2][0];++Br);var hn=Zt(ur-br[Br][1][0],Ke);return hn[0]+=Zt(br[Br][1][0],pr*Ke>pr*br[Br][0][1]?br[Br][0][1]:Ke)[0],hn}ie?xe.invert=ie(xe):Zt.invert&&(xe.invert=function(ur,Ke){for(var pr=ke[+(Ke<0)],br=Yt[+(Ke<0)],Br=0,Vr=pr.length;Br<Vr;++Br){var hn=pr[Br];if(hn[0][0]<=ur&&ur<hn[1][0]&&hn[0][1]<=Ke&&Ke<hn[1][1]){var dn=Zt.invert(ur-Zt(br[Br][1][0],0)[0],Ke);return dn[0]+=br[Br][1][0],Za(xe(dn[0],dn[1]),[ur,Ke])?dn:null}}});var Pe=(0,M.Z)(xe),rr=Pe.stream;return Pe.stream=function(ur){var Ke=Pe.rotate(),pr=rr(ur),br=(Pe.rotate([0,0]),rr(ur));return Pe.rotate(Ke),pr.sphere=function(){(0,gi.Z)(ue,br)},pr},Pe.lobes=function(ur){return arguments.length?(ue=Ja(ur),Yt=ur.map(function(Ke){return Ke.map(function(pr){return[[pr[0][0]*l,pr[0][1]*l],[pr[1][0]*l,pr[1][1]*l],[pr[2][0]*l,pr[2][1]*l]]})}),ke=Yt.map(function(Ke){return Ke.map(function(pr){var br=Zt(pr[0][0],pr[0][1])[0],Br=Zt(pr[2][0],pr[2][1])[0],Vr=Zt(pr[1][0],pr[0][1])[1],hn=Zt(pr[1][0],pr[1][1])[1],dn;return Vr>hn&&(dn=Vr,Vr=hn,hn=dn),[[br,Vr],[Br,hn]]})}),Pe):Yt.map(function(Ke){return Ke.map(function(pr){return[[pr[0][0]*P,pr[0][1]*P],[pr[1][0]*P,pr[1][1]*P],[pr[2][0]*P,pr[2][1]*P]]})})},Yt!=null&&Pe.lobes(Yt),Pe}var Vl=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Hi(){return Wa(jt,Vl).scale(160.857)}var Gs=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Os(){return Wa(fn,Gs).scale(152.63)}var Ea=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Qa(){return Wa(wt,Ea).scale(169.529)}var xu=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Ws(){return Wa(wt,xu).scale(169.529).rotate([20,0])}var va=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Ys(){return Wa(kn,va,xt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var io=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Ma(){return Wa(ee,io).scale(152.63).rotate([-20,0])}function ao(Zt,Yt){return[3/b*Zt*I(s*s/3-Yt*Yt),Yt]}ao.invert=function(Zt,Yt){return[b/3*Zt/I(s*s/3-Yt*Yt),Yt]};function qa(){return(0,M.Z)(ao).scale(158.837)}function fo(Zt){function Yt(ie,ue){if(E(E(ue)-u)<p)return[0,ue<0?-2:2];var ke=h(ue),xe=n((1+ke)/(1-ke),Zt/2),Pe=.5*(xe+1/xe)+A(ie*=Zt);return[2*h(ie)/Pe,(xe-1/xe)/Pe]}return Yt.invert=function(ie,ue){var ke=E(ue);if(E(ke-2)<p)return ie?null:[0,o(ue)*u];if(ke>2)return null;ie/=2,ue/=2;var xe=ie*ie,Pe=ue*ue,rr=2*ue/(1+xe+Pe);return rr=n((1+rr)/(1-rr),1/Zt),[S(2*ie,1-xe-Pe)/Zt,L((rr-1)/(rr+1))]},Yt}function Oo(){var Zt=.5,Yt=(0,M.r)(fo),ie=Yt(Zt);return ie.spacing=function(ue){return arguments.length?Yt(Zt=+ue):Zt},ie.scale(124.75)}var Ho=s/k;function Ia(Zt,Yt){return[Zt*(1+I(A(Yt)))/2,Yt/(A(Yt/2)*A(Zt/6))]}Ia.invert=function(Zt,Yt){var ie=E(Zt),ue=E(Yt),ke=p,xe=u;ue<Ho?xe*=ue/Ho:ke+=6*w(Ho/ue);for(var Pe=0;Pe<25;Pe++){var rr=h(xe),ur=I(A(xe)),Ke=h(xe/2),pr=A(xe/2),br=h(ke/6),Br=A(ke/6),Vr=.5*ke*(1+ur)-ie,hn=xe/(pr*Br)-ue,dn=ur?-.25*ke*rr/ur:0,An=.5*(1+ur),ri=(1+.5*xe*Ke/pr)/(pr*Br),vi=xe/pr*(br/6)/(Br*Br),bi=dn*vi-ri*An,wi=(Vr*vi-hn*An)/bi,Ti=(hn*dn-Vr*ri)/bi;if(xe-=wi,ke-=Ti,E(wi)<p&&E(Ti)<p)break}return[Zt<0?-ke:ke,Yt<0?-xe:xe]};function bu(){return(0,M.Z)(Ia).scale(97.2672)}function Io(Zt,Yt){var ie=Zt*Zt,ue=Yt*Yt;return[Zt*(.975534+ue*(-.119161+ie*-.0143059+ue*-.0547009)),Yt*(1.00384+ie*(.0802894+ue*-.02855+ie*199025e-9)+ue*(.0998909+ue*-.0491032))]}Io.invert=function(Zt,Yt){var ie=o(Zt)*s,ue=Yt/2,ke=50;do{var xe=ie*ie,Pe=ue*ue,rr=ie*ue,ur=ie*(.975534+Pe*(-.119161+xe*-.0143059+Pe*-.0547009))-Zt,Ke=ue*(1.00384+xe*(.0802894+Pe*-.02855+xe*199025e-9)+Pe*(.0998909+Pe*-.0491032))-Yt,pr=.975534-Pe*(.119161+3*xe*.0143059+Pe*.0547009),br=-rr*(2*.119161+4*.0547009*Pe+2*.0143059*xe),Br=rr*(2*.0802894+4*199025e-9*xe+2*-.02855*Pe),Vr=1.00384+xe*(.0802894+199025e-9*xe)+Pe*(3*(.0998909-.02855*xe)-5*.0491032*Pe),hn=br*Br-Vr*pr,dn=(Ke*br-ur*Vr)/hn,An=(ur*Br-Ke*pr)/hn;ie-=dn,ue-=An}while((E(dn)>p||E(An)>p)&&--ke>0);return ke&&[ie,ue]};function za(){return(0,M.Z)(Io).scale(139.98)}function Hl(Zt,Yt){return[h(Zt)/A(Yt),y(Yt)*A(Zt)]}Hl.invert=function(Zt,Yt){var ie=Zt*Zt,ue=Yt*Yt,ke=ue+1,xe=ie+ke,Pe=Zt?T*I((xe-I(xe*xe-4*ie))/ie):1/I(ke);return[L(Zt*Pe),o(Yt)*w(Pe)]};function Go(){return(0,M.Z)(Hl).scale(144.049).clipAngle(89.999)}function zo(Zt){var Yt=A(Zt),ie=y(c+Zt/2);function ue(ke,xe){var Pe=xe-Zt,rr=E(Pe)<p?ke*Yt:E(rr=c+xe/2)<p||E(E(rr)-u)<p?0:ke*Pe/e(y(rr)/ie);return[rr,Pe]}return ue.invert=function(ke,xe){var Pe,rr=xe+Zt;return[E(xe)<p?ke/Yt:E(Pe=c+rr/2)<p||E(E(Pe)-u)<p?0:ke*e(y(Pe)/ie)/xe,rr]},ue}function Gl(){return Vt(zo).parallel(40).scale(158.837)}function Wl(Zt,Yt){return[Zt,1.25*e(y(c+.4*Yt))]}Wl.invert=function(Zt,Yt){return[Zt,2.5*i(g(.8*Yt))-.625*s]};function Qu(){return(0,M.Z)(Wl).scale(108.318)}function Xs(Zt){var Yt=Zt.length-1;function ie(ue,ke){for(var xe=A(ke),Pe=2/(1+xe*A(ue)),rr=Pe*xe*h(ue),ur=Pe*h(ke),Ke=Yt,pr=Zt[Ke],br=pr[0],Br=pr[1],Vr;--Ke>=0;)pr=Zt[Ke],br=pr[0]+rr*(Vr=br)-ur*Br,Br=pr[1]+rr*Br+ur*Vr;return br=rr*(Vr=br)-ur*Br,Br=rr*Br+ur*Vr,[br,Br]}return ie.invert=function(ue,ke){var xe=20,Pe=ue,rr=ke;do{for(var ur=Yt,Ke=Zt[ur],pr=Ke[0],br=Ke[1],Br=0,Vr=0,hn;--ur>=0;)Ke=Zt[ur],Br=pr+Pe*(hn=Br)-rr*Vr,Vr=br+Pe*Vr+rr*hn,pr=Ke[0]+Pe*(hn=pr)-rr*br,br=Ke[1]+Pe*br+rr*hn;Br=pr+Pe*(hn=Br)-rr*Vr,Vr=br+Pe*Vr+rr*hn,pr=Pe*(hn=pr)-rr*br-ue,br=Pe*br+rr*hn-ke;var dn=Br*Br+Vr*Vr,An,ri;Pe-=An=(pr*Br+br*Vr)/dn,rr-=ri=(br*Br-pr*Vr)/dn}while(E(An)+E(ri)>p*p&&--xe>0);if(xe){var vi=I(Pe*Pe+rr*rr),bi=2*i(vi*.5),wi=h(bi);return[S(Pe*wi,vi*A(bi)),vi?L(rr*wi/vi):0]}},ie}var $u=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],tc=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],ec=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Yl=[[.9245,0],[0,0],[.01943,0]],rc=[[.721316,0],[0,0],[-.00881625,-.00617325]];function nc(){return ms($u,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function _u(){return ms(tc,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function ic(){return ms(ec,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function ac(){return ms(Yl,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Xl(){return ms(rc,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function ms(Zt,Yt){var ie=(0,M.Z)(Xs(Zt)).rotate(Yt).clipAngle(90),ue=(0,It.Z)(Yt),ke=ie.center;return delete ie.rotate,ie.center=function(xe){return arguments.length?ke(ue(xe)):ue.invert(ke())},ie}var ys=I(6),Is=I(7);function yl(Zt,Yt){var ie=L(7*h(Yt)/(3*ys));return[ys*Zt*(2*A(2*ie/3)-1)/Is,9*h(ie/3)/Is]}yl.invert=function(Zt,Yt){var ie=3*L(Yt*Is/9);return[Zt*Is/(ys*(2*A(2*ie/3)-1)),L(h(ie)*3*ys/7)]};function oc(){return(0,M.Z)(yl).scale(164.859)}function Wo(Zt,Yt){for(var ie=(1+T)*h(Yt),ue=Yt,ke=0,xe;ke<25&&(ue-=xe=(h(ue/2)+h(ue)-ie)/(.5*A(ue/2)+A(ue)),!(E(xe)<p));ke++);return[Zt*(1+2*A(ue)/A(ue/2))/(3*k),2*I(3)*h(ue/2)/I(2+k)]}Wo.invert=function(Zt,Yt){var ie=Yt*I(2+k)/(2*I(3)),ue=2*L(ie);return[3*k*Zt/(1+2*A(ue)/A(ue/2)),L((ie+h(ue))/(1+T))]};function wu(){return(0,M.Z)(Wo).scale(188.209)}function Kl(Zt,Yt){for(var ie=I(6/(4+s)),ue=(1+s/4)*h(Yt),ke=Yt/2,xe=0,Pe;xe<25&&(ke-=Pe=(ke/2+h(ke)-ue)/(.5+A(ke)),!(E(Pe)<p));xe++);return[ie*(.5+A(ke))*Zt/1.5,ie*ke]}Kl.invert=function(Zt,Yt){var ie=I(6/(4+s)),ue=Yt/ie;return E(E(ue)-u)<p&&(ue=ue<0?-u:u),[1.5*Zt/(ie*(.5+A(ue))),L((ue/2+h(ue))/(1+s/4))]};function sc(){return(0,M.Z)(Kl).scale(166.518)}var ho=t(26867);function xs(Zt,Yt){var ie=Yt*Yt,ue=ie*ie,ke=ie*ue;return[Zt*(.84719-.13063*ie+ke*ke*(-.04515+.05494*ie-.02326*ue+.00331*ke)),Yt*(1.01183+ue*ue*(-.02625+.01926*ie-.00396*ue))]}xs.invert=function(Zt,Yt){var ie=Yt,ue=25,ke,xe,Pe,rr;do xe=ie*ie,Pe=xe*xe,ie-=ke=(ie*(1.01183+Pe*Pe*(-.02625+.01926*xe-.00396*Pe))-Yt)/(1.01183+Pe*Pe*(-.23625+.21186*xe+-.05148*Pe));while(E(ke)>x&&--ue>0);return xe=ie*ie,Pe=xe*xe,rr=xe*Pe,[Zt/(.84719-.13063*xe+rr*rr*(-.04515+.05494*xe-.02326*Pe+.00331*rr)),ie]};function Ks(){return(0,M.Z)(xs).scale(175.295)}function zs(Zt,Yt){return[Zt*(1+A(Yt))/2,2*(Yt-y(Yt/2))]}zs.invert=function(Zt,Yt){for(var ie=Yt/2,ue=0,ke=1/0;ue<10&&E(ke)>p;++ue){var xe=A(Yt/2);Yt-=ke=(Yt-y(Yt/2)-ie)/(1-.5/(xe*xe))}return[2*Zt/(1+A(Yt)),Yt]};function Do(){return(0,M.Z)(zs).scale(152.63)}var Yo=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Jl(){return Wa(rt(1/0),Yo).rotate([20,0]).scale(152.63)}function Ds(Zt,Yt){var ie=h(Yt),ue=A(Yt),ke=o(Zt);if(Zt===0||E(Yt)===u)return[0,Yt];if(Yt===0)return[Zt,0];if(E(Zt)===u)return[Zt*ue,u*ie];var xe=s/(2*Zt)-2*Zt/s,Pe=2*Yt/s,rr=(1-Pe*Pe)/(ie-Pe),ur=xe*xe,Ke=rr*rr,pr=1+ur/Ke,br=1+Ke/ur,Br=(xe*ie/rr-xe/2)/pr,Vr=(Ke*ie/ur+rr/2)/br,hn=Br*Br+ue*ue/pr,dn=Vr*Vr-(Ke*ie*ie/ur+rr*ie-1)/br;return[u*(Br+I(hn)*ke),u*(Vr+I(dn<0?0:dn)*o(-Yt*xe)*ke)]}Ds.invert=function(Zt,Yt){Zt/=u,Yt/=u;var ie=Zt*Zt,ue=Yt*Yt,ke=ie+ue,xe=s*s;return[Zt?(ke-1+I((1-ke)*(1-ke)+4*ie))/(2*Zt)*u:0,yt(function(Pe){return ke*(s*h(Pe)-2*Pe)*s+4*Pe*Pe*(Yt-h(Pe))+2*s*Pe-xe*Yt},0)]};function as(){return(0,M.Z)(Ds).scale(127.267)}var xa=1.0148,Ql=.23185,xl=-.14499,Fs=.02406,Au=xa,Tu=5*Ql,Rs=7*xl,Bs=9*Fs,Ca=1.790857183;function bl(Zt,Yt){var ie=Yt*Yt;return[Zt,Yt*(xa+ie*ie*(Ql+ie*(xl+Fs*ie)))]}bl.invert=function(Zt,Yt){Yt>Ca?Yt=Ca:Yt<-Ca&&(Yt=-Ca);var ie=Yt,ue;do{var ke=ie*ie;ie-=ue=(ie*(xa+ke*ke*(Ql+ke*(xl+Fs*ke)))-Yt)/(Au+ke*ke*(Tu+ke*(Rs+Bs*ke)))}while(E(ue)>p);return[Zt,ie]};function lc(){return(0,M.Z)(bl).scale(139.319)}function $l(Zt,Yt){if(E(Yt)<p)return[Zt,0];var ie=y(Yt),ue=Zt*h(Yt);return[h(ue)/ie,Yt+(1-A(ue))/ie]}$l.invert=function(Zt,Yt){if(E(Yt)<p)return[Zt,0];var ie=Zt*Zt+Yt*Yt,ue=Yt*.5,ke=10,xe;do{var Pe=y(ue),rr=1/A(ue),ur=ie-2*Yt*ue+ue*ue;ue-=xe=(Pe*ur+2*(ue-Yt))/(2+ur*rr*rr+2*(ue-Yt)*Pe)}while(E(xe)>p&&--ke>0);return Pe=y(ue),[(E(Yt)<E(ue+1/Pe)?L(Zt*Pe):o(Yt)*o(Zt)*(w(E(Zt*Pe))+u))/h(ue),ue]};function uc(){return(0,M.Z)($l).scale(103.74)}var _l=t(77338),Js=t(83074);function tu(Zt,Yt){var ie=ru(Zt[1],Zt[0]),ue=ru(Yt[1],Yt[0]),ke=nu(ie,ue),xe=wl(ie)/wl(ue);return Qs([1,0,Zt[0][0],0,1,Zt[0][1]],Qs([xe,0,0,0,xe,0],Qs([A(ke),h(ke),0,-h(ke),A(ke),0],[1,0,-Yt[0][0],0,1,-Yt[0][1]])))}function eu(Zt){var Yt=1/(Zt[0]*Zt[4]-Zt[1]*Zt[3]);return[Yt*Zt[4],-Yt*Zt[1],Yt*(Zt[1]*Zt[5]-Zt[2]*Zt[4]),-Yt*Zt[3],Yt*Zt[0],Yt*(Zt[2]*Zt[3]-Zt[0]*Zt[5])]}function Qs(Zt,Yt){return[Zt[0]*Yt[0]+Zt[1]*Yt[3],Zt[0]*Yt[1]+Zt[1]*Yt[4],Zt[0]*Yt[2]+Zt[1]*Yt[5]+Zt[2],Zt[3]*Yt[0]+Zt[4]*Yt[3],Zt[3]*Yt[1]+Zt[4]*Yt[4],Zt[3]*Yt[2]+Zt[4]*Yt[5]+Zt[5]]}function ru(Zt,Yt){return[Zt[0]-Yt[0],Zt[1]-Yt[1]]}function wl(Zt){return I(Zt[0]*Zt[0]+Zt[1]*Zt[1])}function nu(Zt,Yt){return S(Zt[0]*Yt[1]-Zt[1]*Yt[0],Zt[0]*Yt[0]+Zt[1]*Yt[1])}function Qi(Zt,Yt,ie){ue(Zt,{transform:null});function ue(Ke,pr){if(Ke.edges=bs(Ke.face),pr.face){var br=Ke.shared=Ns(Ke.face,pr.face),Br=tu(br.map(pr.project),br.map(Ke.project));Ke.transform=pr.transform?Qs(pr.transform,Br):Br;for(var Vr=pr.edges,hn=0,dn=Vr.length;hn<dn;++hn)Ao(br[0],Vr[hn][1])&&Ao(br[1],Vr[hn][0])&&(Vr[hn]=Ke),Ao(br[0],Vr[hn][0])&&Ao(br[1],Vr[hn][1])&&(Vr[hn]=Ke);for(Vr=Ke.edges,hn=0,dn=Vr.length;hn<dn;++hn)Ao(br[0],Vr[hn][0])&&Ao(br[1],Vr[hn][1])&&(Vr[hn]=pr),Ao(br[0],Vr[hn][1])&&Ao(br[1],Vr[hn][0])&&(Vr[hn]=pr)}else Ke.transform=pr.transform;return Ke.children&&Ke.children.forEach(function(An){ue(An,Ke)}),Ke}function ke(Ke,pr){var br=Yt(Ke,pr),Br=br.project([Ke*P,pr*P]),Vr;return(Vr=br.transform)?[Vr[0]*Br[0]+Vr[1]*Br[1]+Vr[2],-(Vr[3]*Br[0]+Vr[4]*Br[1]+Vr[5])]:(Br[1]=-Br[1],Br)}iu(Zt)&&(ke.invert=function(Ke,pr){var br=xe(Zt,[Ke,-pr]);return br&&(br[0]*=l,br[1]*=l,br)});function xe(Ke,pr){var br=Ke.project.invert,Br=Ke.transform,Vr=pr;if(Br&&(Br=eu(Br),Vr=[Br[0]*Vr[0]+Br[1]*Vr[1]+Br[2],Br[3]*Vr[0]+Br[4]*Vr[1]+Br[5]]),br&&Ke===Pe(hn=br(Vr)))return hn;for(var hn,dn=Ke.children,An=0,ri=dn&&dn.length;An<ri;++An)if(hn=xe(dn[An],pr))return hn}function Pe(Ke){return Yt(Ke[0]*l,Ke[1]*l)}var rr=(0,M.Z)(ke),ur=rr.stream;return rr.stream=function(Ke){var pr=rr.rotate(),br=ur(Ke),Br=(rr.rotate([0,0]),ur(Ke));return rr.rotate(pr),br.sphere=function(){Br.polygonStart(),Br.lineStart(),ku(Br,Zt),Br.lineEnd(),Br.polygonEnd()},br},rr.angle(ie==null?-30:ie*P)}function ku(Zt,Yt,ie){var ue,ke=Yt.edges,xe=ke.length,Pe,rr={type:"MultiPoint",coordinates:Yt.face},ur=Yt.face.filter(function(dn){return E(dn[1])!==90}),Ke=(0,_l.Z)({type:"MultiPoint",coordinates:ur}),pr=!1,br=-1,Br=Ke[1][0]-Ke[0][0],Vr=Br===180||Br===360?[(Ke[0][0]+Ke[1][0])/2,(Ke[0][1]+Ke[1][1])/2]:(0,Mt.Z)(rr);if(ie)for(;++br<xe&&ke[br]!==ie;);++br;for(var hn=0;hn<xe;++hn)Pe=ke[(hn+br)%xe],Array.isArray(Pe)?(pr||(Zt.point((ue=(0,Js.Z)(Pe[0],Vr)(p))[0],ue[1]),pr=!0),Zt.point((ue=(0,Js.Z)(Pe[1],Vr)(p))[0],ue[1])):(pr=!1,Pe!==ie&&ku(Zt,Pe,Yt))}function Ao(Zt,Yt){return Zt&&Yt&&Zt[0]===Yt[0]&&Zt[1]===Yt[1]}function Ns(Zt,Yt){for(var ie,ue,ke=Zt.length,xe=null,Pe=0;Pe<ke;++Pe){ie=Zt[Pe];for(var rr=Yt.length;--rr>=0;)if(ue=Yt[rr],ie[0]===ue[0]&&ie[1]===ue[1]){if(xe)return[xe,ie];xe=ie}}}function bs(Zt){for(var Yt=Zt.length,ie=[],ue=Zt[Yt-1],ke=0;ke<Yt;++ke)ie.push([ue,ue=Zt[ke]]);return ie}function iu(Zt){return Zt.project.invert||Zt.children&&Zt.children.some(iu)}var _a=t(98936),$s=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],$a=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Zt){return Zt.map(function(Yt){return $s[Yt]})});function Xo(Zt){Zt=Zt||function(ie){var ue=(0,Mt.Z)({type:"MultiPoint",coordinates:ie});return(0,_a.Z)().scale(1).translate([0,0]).rotate([-ue[0],-ue[1]])};var Yt=$a.map(function(ie){return{face:ie,project:Zt(ie)}});return[-1,0,0,1,0,1,4,5].forEach(function(ie,ue){var ke=Yt[ie];ke&&(ke.children||(ke.children=[])).push(Yt[ue])}),Qi(Yt[0],function(ie,ue){return Yt[ie<-s/2?ue<0?6:4:ie<0?ue<0?2:0:ie<s/2?ue<0?3:1:ue<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Ko=2/I(3);function os(Zt,Yt){var ie=Ot(Zt,Yt);return[ie[0]*Ko,ie[1]]}os.invert=function(Zt,Yt){return Ot.invert(Zt/Ko,Yt)};function ss(Zt){Zt=Zt||function(ie){var ue=(0,Mt.Z)({type:"MultiPoint",coordinates:ie});return(0,M.Z)(os).translate([0,0]).scale(1).rotate(ue[1]>0?[-ue[0],0]:[180-ue[0],180])};var Yt=$a.map(function(ie){return{face:ie,project:Zt(ie)}});return[-1,0,0,1,0,1,4,5].forEach(function(ie,ue){var ke=Yt[ie];ke&&(ke.children||(ke.children=[])).push(Yt[ue])}),Qi(Yt[0],function(ie,ue){return Yt[ie<-s/2?ue<0?6:4:ie<0?ue<0?2:0:ie<s/2?ue<0?3:1:ue<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function ls(Zt){Zt=Zt||function(Pe){var rr=Pe.length===6?(0,Mt.Z)({type:"MultiPoint",coordinates:Pe}):Pe[0];return(0,_a.Z)().scale(1).translate([0,0]).rotate([-rr[0],-rr[1]])};var Yt=$a.map(function(Pe){for(var rr=Pe.map(el),ur=rr.length,Ke=rr[ur-1],pr,br=[],Br=0;Br<ur;++Br)pr=rr[Br],br.push(tl([Ke[0]*.9486832980505138+pr[0]*.31622776601683794,Ke[1]*.9486832980505138+pr[1]*.31622776601683794,Ke[2]*.9486832980505138+pr[2]*.31622776601683794]),tl([pr[0]*.9486832980505138+Ke[0]*.31622776601683794,pr[1]*.9486832980505138+Ke[1]*.31622776601683794,pr[2]*.9486832980505138+Ke[2]*.31622776601683794])),Ke=pr;return br}),ie=[],ue=[-1,0,0,1,0,1,4,5];Yt.forEach(function(Pe,rr){for(var ur=$a[rr],Ke=ur.length,pr=ie[rr]=[],br=0;br<Ke;++br)Yt.push([ur[br],Pe[(br*2+2)%(2*Ke)],Pe[(br*2+1)%(2*Ke)]]),ue.push(rr),pr.push(Fo(el(Pe[(br*2+2)%(2*Ke)]),el(Pe[(br*2+1)%(2*Ke)])))});var ke=Yt.map(function(Pe){return{project:Zt(Pe),face:Pe}});ue.forEach(function(Pe,rr){var ur=ke[Pe];ur&&(ur.children||(ur.children=[])).push(ke[rr])});function xe(Pe,rr){var ur=A(rr),Ke=[ur*A(Pe),ur*h(Pe),h(rr)],pr=Pe<-s/2?rr<0?6:4:Pe<0?rr<0?2:0:Pe<s/2?rr<0?3:1:rr<0?7:5,br=ie[pr];return ke[To(br[0],Ke)<0?8+3*pr:To(br[1],Ke)<0?8+3*pr+1:To(br[2],Ke)<0?8+3*pr+2:pr]}return Qi(ke[0],xe).angle(-30).scale(110.625).center([0,45])}function To(Zt,Yt){for(var ie=0,ue=Zt.length,ke=0;ie<ue;++ie)ke+=Zt[ie]*Yt[ie];return ke}function Fo(Zt,Yt){return[Zt[1]*Yt[2]-Zt[2]*Yt[1],Zt[2]*Yt[0]-Zt[0]*Yt[2],Zt[0]*Yt[1]-Zt[1]*Yt[0]]}function tl(Zt){return[S(Zt[1],Zt[0])*P,L(r(-1,f(1,Zt[2])))*P]}function el(Zt){var Yt=Zt[0]*l,ie=Zt[1]*l,ue=A(ie);return[ue*A(Yt),ue*h(Yt),h(ie)]}function Al(){}function cc(Zt){if((ie=Zt.length)<4)return!1;for(var Yt=0,ie,ue=Zt[ie-1][1]*Zt[0][0]-Zt[ie-1][0]*Zt[0][1];++Yt<ie;)ue+=Zt[Yt-1][1]*Zt[Yt][0]-Zt[Yt-1][0]*Zt[Yt][1];return ue<=0}function fc(Zt,Yt){for(var ie=Yt[0],ue=Yt[1],ke=!1,xe=0,Pe=Zt.length,rr=Pe-1;xe<Pe;rr=xe++){var ur=Zt[xe],Ke=ur[0],pr=ur[1],br=Zt[rr],Br=br[0],Vr=br[1];pr>ue^Vr>ue&&ie<(Br-Ke)*(ue-pr)/(Vr-pr)+Ke&&(ke=!ke)}return ke}function hc(Zt,Yt){var ie=Yt.stream,ue;if(!ie)throw new Error("invalid projection");switch(Zt&&Zt.type){case"Feature":ue=Tl;break;case"FeatureCollection":ue=pc;break;default:ue=js;break}return ue(Zt,ie)}function pc(Zt,Yt){return{type:"FeatureCollection",features:Zt.features.map(function(ie){return Tl(ie,Yt)})}}function Tl(Zt,Yt){return{type:"Feature",id:Zt.id,properties:Zt.properties,geometry:js(Zt.geometry,Yt)}}function Mu(Zt,Yt){return{type:"GeometryCollection",geometries:Zt.geometries.map(function(ie){return js(ie,Yt)})}}function js(Zt,Yt){if(!Zt)return null;if(Zt.type==="GeometryCollection")return Mu(Zt,Yt);var ie;switch(Zt.type){case"Point":ie=rl;break;case"MultiPoint":ie=rl;break;case"LineString":ie=_s;break;case"MultiLineString":ie=_s;break;case"Polygon":ie=nl;break;case"MultiPolygon":ie=nl;break;case"Sphere":ie=nl;break;default:return null}return(0,gi.Z)(Zt,Yt(ie)),ie.result()}var Da=[],to=[],rl={point:function(Zt,Yt){Da.push([Zt,Yt])},result:function(){var Zt=Da.length?Da.length<2?{type:"Point",coordinates:Da[0]}:{type:"MultiPoint",coordinates:Da}:null;return Da=[],Zt}},_s={lineStart:Al,point:function(Zt,Yt){Da.push([Zt,Yt])},lineEnd:function(){Da.length&&(to.push(Da),Da=[])},result:function(){var Zt=to.length?to.length<2?{type:"LineString",coordinates:to[0]}:{type:"MultiLineString",coordinates:to}:null;return to=[],Zt}},nl={polygonStart:Al,lineStart:Al,point:function(Zt,Yt){Da.push([Zt,Yt])},lineEnd:function(){var Zt=Da.length;if(Zt){do Da.push(Da[0].slice());while(++Zt<4);to.push(Da),Da=[]}},polygonEnd:Al,result:function(){if(!to.length)return null;var Zt=[],Yt=[];return to.forEach(function(ie){cc(ie)?Zt.push([ie]):Yt.push(ie)}),Yt.forEach(function(ie){var ue=ie[0];Zt.some(function(ke){if(fc(ke[0],ue))return ke.push(ie),!0})||Zt.push([ie])}),to=[],Zt.length?Zt.length>1?{type:"MultiPolygon",coordinates:Zt}:{type:"Polygon",coordinates:Zt[0]}:null}};function kl(Zt){var Yt=Zt(u,0)[0]-Zt(-u,0)[0];function ie(ue,ke){var xe=E(ue)<u,Pe=Zt(xe?ue:ue>0?ue-s:ue+s,ke),rr=(Pe[0]-Pe[1])*T,ur=(Pe[0]+Pe[1])*T;if(xe)return[rr,ur];var Ke=Yt*T,pr=rr>0^ur>0?-1:1;return[pr*rr-o(ur)*Ke,pr*ur-o(rr)*Ke]}return Zt.invert&&(ie.invert=function(ue,ke){var xe=(ue+ke)*T,Pe=(ke-ue)*T,rr=E(xe)<.5*Yt&&E(Pe)<.5*Yt;if(!rr){var ur=Yt*T,Ke=xe>0^Pe>0?-1:1,pr=-Ke*ue+(Pe>0?1:-1)*ur,br=-Ke*ke+(xe>0?1:-1)*ur;xe=(-pr-br)*T,Pe=(pr-br)*T}var Br=Zt.invert(xe,Pe);return rr||(Br[0]+=xe>0?s:-s),Br}),(0,M.Z)(ie).rotate([-90,-90,45]).clipAngle(179.999)}function dc(){return kl(Yr).scale(176.423)}function Su(){return kl(gr).scale(111.48)}function Lu(Zt,Yt){if(!(0<=(Yt=+Yt)&&Yt<=20))throw new Error("invalid digits");function ie(Ke){var pr=Ke.length,br=2,Br=new Array(pr);for(Br[0]=+Ke[0].toFixed(Yt),Br[1]=+Ke[1].toFixed(Yt);br<pr;)Br[br]=Ke[br],++br;return Br}function ue(Ke){return Ke.map(ie)}function ke(Ke){for(var pr=ie(Ke[0]),br=[pr],Br=1;Br<Ke.length;Br++){var Vr=ie(Ke[Br]);(Vr.length>2||Vr[0]!=pr[0]||Vr[1]!=pr[1])&&(br.push(Vr),pr=Vr)}return br.length===1&&Ke.length>1&&br.push(ie(Ke[Ke.length-1])),br}function xe(Ke){return Ke.map(ke)}function Pe(Ke){if(Ke==null)return Ke;var pr;switch(Ke.type){case"GeometryCollection":pr={type:"GeometryCollection",geometries:Ke.geometries.map(Pe)};break;case"Point":pr={type:"Point",coordinates:ie(Ke.coordinates)};break;case"MultiPoint":pr={type:Ke.type,coordinates:ue(Ke.coordinates)};break;case"LineString":pr={type:Ke.type,coordinates:ke(Ke.coordinates)};break;case"MultiLineString":case"Polygon":pr={type:Ke.type,coordinates:xe(Ke.coordinates)};break;case"MultiPolygon":pr={type:"MultiPolygon",coordinates:Ke.coordinates.map(xe)};break;default:return Ke}return Ke.bbox!=null&&(pr.bbox=Ke.bbox),pr}function rr(Ke){var pr={type:"Feature",properties:Ke.properties,geometry:Pe(Ke.geometry)};return Ke.id!=null&&(pr.id=Ke.id),Ke.bbox!=null&&(pr.bbox=Ke.bbox),pr}if(Zt!=null)switch(Zt.type){case"Feature":return rr(Zt);case"FeatureCollection":{var ur={type:"FeatureCollection",features:Zt.features.map(rr)};return Zt.bbox!=null&&(ur.bbox=Zt.bbox),ur}default:return Pe(Zt)}return Zt}function au(Zt){var Yt=h(Zt);function ie(ue,ke){var xe=Yt?y(ue*Yt/2)/Yt:ue/2;if(!ke)return[2*xe,-Zt];var Pe=2*i(xe*h(ke)),rr=1/y(ke);return[h(Pe)*rr,ke+(1-A(Pe))*rr-Zt]}return ie.invert=function(ue,ke){if(E(ke+=Zt)<p)return[Yt?2*i(Yt*ue/2)/Yt:ue,0];var xe=ue*ue+ke*ke,Pe=0,rr=10,ur;do{var Ke=y(Pe),pr=1/A(Pe),br=xe-2*ke*Pe+Pe*Pe;Pe-=ur=(Ke*br+2*(Pe-ke))/(2+br*pr*pr+2*(Pe-ke)*Ke)}while(E(ur)>p&&--rr>0);var Br=ue*(Ke=y(Pe)),Vr=y(E(ke)<E(Pe+1/Ke)?L(Br)*.5:w(Br)*.5+s/4)/h(Pe);return[Yt?2*i(Yt*Vr)/Yt:2*Vr,Pe]},ie}function us(){return Vt(au).scale(131.215)}var wa=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];wa.forEach(function(Zt){Zt[1]*=1.0144});function Ro(Zt,Yt){var ie=f(18,E(Yt)*36/s),ue=v(ie),ke=ie-ue,xe=(br=wa[ue])[0],Pe=br[1],rr=(br=wa[++ue])[0],ur=br[1],Ke=(br=wa[f(19,++ue)])[0],pr=br[1],br;return[Zt*(rr+ke*(Ke-xe)/2+ke*ke*(Ke-2*rr+xe)/2),(Yt>0?u:-u)*(ur+ke*(pr-Pe)/2+ke*ke*(pr-2*ur+Pe)/2)]}Ro.invert=function(Zt,Yt){var ie=Yt/u,ue=ie*90,ke=f(18,E(ue/5)),xe=r(0,v(ke));do{var Pe=wa[xe][1],rr=wa[xe+1][1],ur=wa[f(19,xe+2)][1],Ke=ur-Pe,pr=ur-2*rr+Pe,br=2*(E(ie)-rr)/Ke,Br=pr/Ke,Vr=br*(1-Br*br*(1-2*Br*br));if(Vr>=0||xe===1){ue=(Yt>=0?5:-5)*(Vr+ke);var hn=50,dn;do ke=f(18,E(ue)/5),xe=v(ke),Vr=ke-xe,Pe=wa[xe][1],rr=wa[xe+1][1],ur=wa[f(19,xe+2)][1],ue-=(dn=(Yt>=0?u:-u)*(rr+Vr*(ur-Pe)/2+Vr*Vr*(ur-2*rr+Pe)/2)-Yt)*P;while(E(dn)>x&&--hn>0);break}}while(--xe>=0);var An=wa[xe][0],ri=wa[xe+1][0],vi=wa[f(19,xe+2)][0];return[Zt/(ri+Vr*(vi-An)/2+Vr*Vr*(vi-2*ri+An)/2),ue*l]};function ou(){return(0,M.Z)(Ro).scale(152.63)}function Pu(Zt){function Yt(ie,ue){var ke=A(ue),xe=(Zt-1)/(Zt-ke*A(ie));return[xe*ke*h(ie),xe*h(ue)]}return Yt.invert=function(ie,ue){var ke=ie*ie+ue*ue,xe=I(ke),Pe=(Zt-I(1-ke*(Zt+1)/(Zt-1)))/((Zt-1)/xe+xe/(Zt-1));return[S(ie*Pe,xe*I(1-Pe*Pe)),xe?L(ue*Pe/xe):0]},Yt}function ws(Zt,Yt){var ie=Pu(Zt);if(!Yt)return ie;var ue=A(Yt),ke=h(Yt);function xe(Pe,rr){var ur=ie(Pe,rr),Ke=ur[1],pr=Ke*ke/(Zt-1)+ue;return[ur[0]*ue/pr,Ke/pr]}return xe.invert=function(Pe,rr){var ur=(Zt-1)/(Zt-1-rr*ke);return ie.invert(ur*Pe,ur*rr*ue)},xe}function Ml(){var Zt=2,Yt=0,ie=(0,M.r)(ws),ue=ie(Zt,Yt);return ue.distance=function(ke){return arguments.length?ie(Zt=+ke,Yt):Zt},ue.tilt=function(ke){return arguments.length?ie(Zt,Yt=ke*l):Yt*P},ue.scale(432.147).clipAngle(w(1/Zt)*P-1e-6)}var ko=1e-4,Sl=1e4,Jo=-180,Qo=Jo+ko,su=180,Us=su-ko,Yi=-90,As=Yi+ko,Ll=90,Pl=Ll-ko;function cs(Zt){return Zt.length>0}function vc(Zt){return Math.floor(Zt*Sl)/Sl}function lu(Zt){return Zt===Yi||Zt===Ll?[0,Zt]:[Jo,vc(Zt)]}function Zs(Zt){var Yt=Zt[0],ie=Zt[1],ue=!1;return Yt<=Qo?(Yt=Jo,ue=!0):Yt>=Us&&(Yt=su,ue=!0),ie<=As?(ie=Yi,ue=!0):ie>=Pl&&(ie=Ll,ue=!0),ue?[Yt,ie]:Zt}function uu(Zt){return Zt.map(Zs)}function Eu(Zt,Yt,ie){for(var ue=0,ke=Zt.length;ue<ke;++ue){var xe=Zt[ue].slice();ie.push({index:-1,polygon:Yt,ring:xe});for(var Pe=0,rr=xe.length;Pe<rr;++Pe){var ur=xe[Pe],Ke=ur[0],pr=ur[1];if(Ke<=Qo||Ke>=Us||pr<=As||pr>=Pl){xe[Pe]=Zs(ur);for(var br=Pe+1;br<rr;++br){var Br=xe[br],Vr=Br[0],hn=Br[1];if(Vr>Qo&&Vr<Us&&hn>As&&hn<Pl)break}if(br===Pe+1)continue;if(Pe){var dn={index:-1,polygon:Yt,ring:xe.slice(0,Pe+1)};dn.ring[dn.ring.length-1]=lu(pr),ie[ie.length-1]=dn}else ie.pop();if(br>=rr)break;ie.push({index:-1,polygon:Yt,ring:xe=xe.slice(br-1)}),xe[0]=lu(xe[0][1]),Pe=-1,rr=xe.length}}}}function $o(Zt){var Yt,ie=Zt.length,ue={},ke={},xe,Pe,rr,ur,Ke;for(Yt=0;Yt<ie;++Yt){if(xe=Zt[Yt],Pe=xe.ring[0],ur=xe.ring[xe.ring.length-1],Pe[0]===ur[0]&&Pe[1]===ur[1]){xe.polygon.push(xe.ring),Zt[Yt]=null;continue}xe.index=Yt,ue[Pe]=ke[ur]=xe}for(Yt=0;Yt<ie;++Yt)if(xe=Zt[Yt],xe){if(Pe=xe.ring[0],ur=xe.ring[xe.ring.length-1],rr=ke[Pe],Ke=ue[ur],delete ue[Pe],delete ke[ur],Pe[0]===ur[0]&&Pe[1]===ur[1]){xe.polygon.push(xe.ring);continue}rr?(delete ke[Pe],delete ue[rr.ring[0]],rr.ring.pop(),Zt[rr.index]=null,xe={index:-1,polygon:rr.polygon,ring:rr.ring.concat(xe.ring)},rr===Ke?xe.polygon.push(xe.ring):(xe.index=ie++,Zt.push(ue[xe.ring[0]]=ke[xe.ring[xe.ring.length-1]]=xe))):Ke?(delete ue[ur],delete ke[Ke.ring[Ke.ring.length-1]],xe.ring.pop(),xe={index:ie++,polygon:Ke.polygon,ring:xe.ring.concat(Ke.ring)},Zt[Ke.index]=null,Zt.push(ue[xe.ring[0]]=ke[xe.ring[xe.ring.length-1]]=xe)):(xe.ring.push(xe.ring[0]),xe.polygon.push(xe.ring))}}function fs(Zt){var Yt={type:"Feature",geometry:Ts(Zt.geometry)};return Zt.id!=null&&(Yt.id=Zt.id),Zt.bbox!=null&&(Yt.bbox=Zt.bbox),Zt.properties!=null&&(Yt.properties=Zt.properties),Yt}function Ts(Zt){if(Zt==null)return Zt;var Yt,ie,ue,ke;switch(Zt.type){case"GeometryCollection":Yt={type:"GeometryCollection",geometries:Zt.geometries.map(Ts)};break;case"Point":Yt={type:"Point",coordinates:Zs(Zt.coordinates)};break;case"MultiPoint":case"LineString":Yt={type:Zt.type,coordinates:uu(Zt.coordinates)};break;case"MultiLineString":Yt={type:"MultiLineString",coordinates:Zt.coordinates.map(uu)};break;case"Polygon":{var xe=[];Eu(Zt.coordinates,xe,ie=[]),$o(ie),Yt={type:"Polygon",coordinates:xe};break}case"MultiPolygon":{ie=[],ue=-1,ke=Zt.coordinates.length;for(var Pe=new Array(ke);++ue<ke;)Eu(Zt.coordinates[ue],Pe[ue]=[],ie);$o(ie),Yt={type:"MultiPolygon",coordinates:Pe.filter(cs)};break}default:return Zt}return Zt.bbox!=null&&(Yt.bbox=Zt.bbox),Yt}function ks(Zt){if(Zt==null)return Zt;switch(Zt.type){case"Feature":return fs(Zt);case"FeatureCollection":{var Yt={type:"FeatureCollection",features:Zt.features.map(fs)};return Zt.bbox!=null&&(Yt.bbox=Zt.bbox),Yt}default:return Ts(Zt)}}function eo(Zt,Yt){var ie=y(Yt/2),ue=h(c*ie);return[Zt*(.74482-.34588*ue*ue),1.70711*ie]}eo.invert=function(Zt,Yt){var ie=Yt/1.70711,ue=h(c*ie);return[Zt/(.74482-.34588*ue*ue),2*i(ie)]};function oo(){return(0,M.Z)(eo).scale(146.153)}function Ms(Zt,Yt,ie){var ue=(0,Js.Z)(Yt,ie),ke=ue(.5),xe=(0,It.Z)([-ke[0],-ke[1]])(Yt),Pe=ue.distance/2,rr=-L(h(xe[1]*l)/h(Pe)),ur=[-ke[0],-ke[1],-(xe[0]>0?s-rr:rr)*P],Ke=(0,M.Z)(Zt(Pe)).rotate(ur),pr=(0,It.Z)(ur),br=Ke.center;return delete Ke.rotate,Ke.center=function(Br){return arguments.length?br(pr(Br)):pr.invert(br())},Ke.clipAngle(90)}function Cu(Zt){var Yt=A(Zt);function ie(ue,ke){var xe=(0,_a.M)(ue,ke);return xe[0]*=Yt,xe}return ie.invert=function(ue,ke){return _a.M.invert(ue/Yt,ke)},ie}function qs(){return El([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function El(Zt,Yt){return Ms(Cu,Zt,Yt)}function Ou(Zt){if(!(Zt*=2))return nt.N;var Yt=-Zt/2,ie=-Yt,ue=Zt*Zt,ke=y(ie),xe=.5/h(ie);function Pe(rr,ur){var Ke=w(A(ur)*A(rr-Yt)),pr=w(A(ur)*A(rr-ie)),br=ur<0?-1:1;return Ke*=Ke,pr*=pr,[(Ke-pr)/(2*Zt),br*I(4*ue*pr-(ue-Ke+pr)*(ue-Ke+pr))/(2*Zt)]}return Pe.invert=function(rr,ur){var Ke=ur*ur,pr=A(I(Ke+(Br=rr+Yt)*Br)),br=A(I(Ke+(Br=rr+ie)*Br)),Br,Vr;return[S(Vr=pr-br,Br=(pr+br)*ke),(ur<0?-1:1)*w(I(Br*Br+Vr*Vr)*xe)]},Pe}function Mo(){return cu([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function cu(Zt,Yt){return Ms(Ou,Zt,Yt)}function hs(Zt,Yt){if(E(Yt)<p)return[Zt,0];var ie=E(Yt/u),ue=L(ie);if(E(Zt)<p||E(E(Yt)-u)<p)return[0,o(Yt)*s*y(ue/2)];var ke=A(ue),xe=E(s/Zt-Zt/s)/2,Pe=xe*xe,rr=ke/(ie+ke-1),ur=rr*(2/ie-1),Ke=ur*ur,pr=Ke+Pe,br=rr-Ke,Br=Pe+rr;return[o(Zt)*s*(xe*br+I(Pe*br*br-pr*(rr*rr-Ke)))/pr,o(Yt)*s*(ur*Br-xe*I((Pe+1)*pr-Br*Br))/pr]}hs.invert=function(Zt,Yt){if(E(Yt)<p)return[Zt,0];if(E(Zt)<p)return[0,u*h(2*i(Yt/s))];var ie=(Zt/=s)*Zt,ue=(Yt/=s)*Yt,ke=ie+ue,xe=ke*ke,Pe=-E(Yt)*(1+ke),rr=Pe-2*ue+ie,ur=-2*Pe+1+2*ue+xe,Ke=ue/ur+(2*rr*rr*rr/(ur*ur*ur)-9*Pe*rr/(ur*ur))/27,pr=(Pe-rr*rr/(3*ur))/ur,br=2*I(-pr/3),Br=w(3*Ke/(pr*br))/3;return[s*(ke-1+I(1+2*(ie-ue)+xe))/(2*Zt),o(Yt)*s*(-br*A(Br+s/3)-rr/(3*ur))]};function il(){return(0,M.Z)(hs).scale(79.4183)}function ts(Zt,Yt){if(E(Yt)<p)return[Zt,0];var ie=E(Yt/u),ue=L(ie);if(E(Zt)<p||E(E(Yt)-u)<p)return[0,o(Yt)*s*y(ue/2)];var ke=A(ue),xe=E(s/Zt-Zt/s)/2,Pe=xe*xe,rr=ke*(I(1+Pe)-xe*ke)/(1+Pe*ie*ie);return[o(Zt)*s*rr,o(Yt)*s*I(1-rr*(2*xe+rr))]}ts.invert=function(Zt,Yt){if(!Zt)return[0,u*h(2*i(Yt/s))];var ie=E(Zt/s),ue=(1-ie*ie-(Yt/=s)*Yt)/(2*ie),ke=ue*ue,xe=I(ke+1);return[o(Zt)*s*(xe-ue),o(Yt)*u*h(2*S(I((1-2*ue*ie)*(ue+xe)-ie),I(xe+ue+ie)))]};function gc(){return(0,M.Z)(ts).scale(79.4183)}function fu(Zt,Yt){if(E(Yt)<p)return[Zt,0];var ie=Yt/u,ue=L(ie);if(E(Zt)<p||E(E(Yt)-u)<p)return[0,s*y(ue/2)];var ke=(s/Zt-Zt/s)/2,xe=ie/(1+A(ue));return[s*(o(Zt)*I(ke*ke+1-xe*xe)-ke),s*xe]}fu.invert=function(Zt,Yt){if(!Yt)return[Zt,0];var ie=Yt/s,ue=(s*s*(1-ie*ie)-Zt*Zt)/(2*s*Zt);return[Zt?s*(o(Zt)*I(ue*ue+1)-ue):0,u*h(2*i(ie))]};function Cl(){return(0,M.Z)(fu).scale(79.4183)}function Va(Zt,Yt){if(!Yt)return[Zt,0];var ie=E(Yt);if(!Zt||ie===u)return[0,Yt];var ue=ie/u,ke=ue*ue,xe=(8*ue-ke*(ke+2)-5)/(2*ke*(ue-1)),Pe=xe*xe,rr=ue*xe,ur=ke+Pe+2*rr,Ke=ue+3*xe,pr=Zt/u,br=pr+1/pr,Br=o(E(Zt)-u)*I(br*br-4),Vr=Br*Br,hn=ur*(ke+Pe*Vr-1)+(1-ke)*(ke*(Ke*Ke+4*Pe)+12*rr*Pe+4*Pe*Pe),dn=(Br*(ur+Pe-1)+2*I(hn))/(4*ur+Vr);return[o(Zt)*u*dn,o(Yt)*u*I(1+Br*E(dn)-dn*dn)]}Va.invert=function(Zt,Yt){var ie;if(!Zt||!Yt)return[Zt,Yt];Yt/=s;var ue=o(Zt)*Zt/u,ke=(ue*ue-1+4*Yt*Yt)/E(ue),xe=ke*ke,Pe=2*Yt,rr=50;do{var ur=Pe*Pe,Ke=(8*Pe-ur*(ur+2)-5)/(2*ur*(Pe-1)),pr=(3*Pe-ur*Pe-10)/(2*ur*Pe),br=Ke*Ke,Br=Pe*Ke,Vr=Pe+Ke,hn=Vr*Vr,dn=Pe+3*Ke,An=hn*(ur+br*xe-1)+(1-ur)*(ur*(dn*dn+4*br)+br*(12*Br+4*br)),ri=-2*Vr*(4*Br*br+(1-4*ur+3*ur*ur)*(1+pr)+br*(-6+14*ur-xe+(-8+8*ur-2*xe)*pr)+Br*(-8+12*ur+(-10+10*ur-xe)*pr)),vi=I(An),bi=ke*(hn+br-1)+2*vi-ue*(4*hn+xe),wi=ke*(2*Ke*pr+2*Vr*(1+pr))+ri/vi-8*Vr*(ke*(-1+br+hn)+2*vi)*(1+pr)/(xe+4*hn);Pe-=ie=bi/wi}while(ie>p&&--rr>0);return[o(Zt)*(I(ke*ke+4)+ke)*s/4,u*Pe]};function Iu(){return(0,M.Z)(Va).scale(127.16)}function al(Zt,Yt,ie,ue,ke){function xe(Pe,rr){var ur=ie*h(ue*rr),Ke=I(1-ur*ur),pr=I(2/(1+Ke*A(Pe*=ke)));return[Zt*Ke*pr*h(Pe),Yt*ur*pr]}return xe.invert=function(Pe,rr){var ur=Pe/Zt,Ke=rr/Yt,pr=I(ur*ur+Ke*Ke),br=2*L(pr/2);return[S(Pe*y(br),Zt*pr)/ke,pr&&L(rr*h(br)/(Yt*ie*pr))/ue]},xe}function Bo(Zt,Yt,ie,ue){var ke=s/3;Zt=r(Zt,p),Yt=r(Yt,p),Zt=f(Zt,u),Yt=f(Yt,s-p),ie=r(ie,0),ie=f(ie,100-p),ue=r(ue,p);var xe=ie/100+1,Pe=ue/100,rr=w(xe*A(ke))/ke,ur=h(Zt)/h(rr*u),Ke=Yt/s,pr=I(Pe*h(Zt/2)/h(Yt/2)),br=pr/I(Ke*ur*rr),Br=1/(pr*I(Ke*ur*rr));return al(br,Br,ur,rr,Ke)}function ol(){var Zt=65*l,Yt=60*l,ie=20,ue=200,ke=(0,M.r)(Bo),xe=ke(Zt,Yt,ie,ue);return xe.poleline=function(Pe){return arguments.length?ke(Zt=+Pe*l,Yt,ie,ue):Zt*P},xe.parallels=function(Pe){return arguments.length?ke(Zt,Yt=+Pe*l,ie,ue):Yt*P},xe.inflation=function(Pe){return arguments.length?ke(Zt,Yt,ie=+Pe,ue):ie},xe.ratio=function(Pe){return arguments.length?ke(Zt,Yt,ie,ue=+Pe):ue},xe.scale(163.775)}function ps(){return ol().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var Ol=4*s+3*I(3),zu=2*I(2*s*I(3)/Ol),hu=gt(zu*I(3)/s,zu,Ol/6);function pu(){return(0,M.Z)(hu).scale(176.84)}function Ss(Zt,Yt){return[Zt*I(1-3*Yt*Yt/(s*s)),Yt]}Ss.invert=function(Zt,Yt){return[Zt/I(1-3*Yt*Yt/(s*s)),Yt]};function Il(){return(0,M.Z)(Ss).scale(152.63)}function sl(Zt,Yt){var ie=A(Yt),ue=A(Zt)*ie,ke=1-ue,xe=A(Zt=S(h(Zt)*ie,-h(Yt))),Pe=h(Zt);return ie=I(1-ue*ue),[Pe*ie-xe*ke,-xe*ie-Pe*ke]}sl.invert=function(Zt,Yt){var ie=(Zt*Zt+Yt*Yt)/-2,ue=I(-ie*(2+ie)),ke=Yt*ie+Zt*ue,xe=Zt*ie-Yt*ue,Pe=I(xe*xe+ke*ke);return[S(ue*ke,Pe*(1+ie)),Pe?-L(ue*xe/Pe):0]};function Du(){return(0,M.Z)(sl).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function ll(Zt,Yt){var ie=V(Zt,Yt);return[(ie[0]+Zt/u)/2,(ie[1]+Yt)/2]}ll.invert=function(Zt,Yt){var ie=Zt,ue=Yt,ke=25;do{var xe=A(ue),Pe=h(ue),rr=h(2*ue),ur=Pe*Pe,Ke=xe*xe,pr=h(ie),br=A(ie/2),Br=h(ie/2),Vr=Br*Br,hn=1-Ke*br*br,dn=hn?w(xe*br)*I(An=1/hn):An=0,An,ri=.5*(2*dn*xe*Br+ie/u)-Zt,vi=.5*(dn*Pe+ue)-Yt,bi=.5*An*(Ke*Vr+dn*xe*br*ur)+.5/u,wi=An*(pr*rr/4-dn*Pe*Br),Ti=.125*An*(rr*Br-dn*Pe*Ke*pr),Wi=.5*An*(ur*br+dn*Vr*xe)+.5,ga=wi*Ti-Wi*bi,$i=(vi*wi-ri*Wi)/ga,st=(ri*Ti-vi*bi)/ga;ie-=$i,ue-=st}while((E($i)>p||E(st)>p)&&--ke>0);return[ie,ue]};function Fu(){return(0,M.Z)(ll).scale(158.837)}},33940:function($,U,t){t.d(U,{Z:function(){return M}});function M(){return new E}function E(){this.reset()}E.prototype={constructor:E,reset:function(){this.s=this.t=0},add:function(A){S(i,A,this.t),S(this,i.s,this.s),this.s?this.t+=i.t:this.s=i.t},valueOf:function(){return this.s}};var i=new E;function S(A,g,v){var e=A.s=g+v,r=e-g,f=e-r;A.t=g-f+(v-r)}},97860:function($,U,t){t.d(U,{L9:function(){return A},ZP:function(){return x},gL:function(){return a}});var M=t(33940),E=t(39695),i=t(73182),S=t(72736),A=(0,M.Z)(),g=(0,M.Z)(),v,e,r,f,n,a={point:i.Z,lineStart:i.Z,lineEnd:i.Z,polygonStart:function(){A.reset(),a.lineStart=o,a.lineEnd=h},polygonEnd:function(){var s=+A;g.add(s<0?E.BZ+s:s),this.lineStart=this.lineEnd=this.point=i.Z},sphere:function(){g.add(E.BZ)}};function o(){a.point=y}function h(){p(v,e)}function y(s,u){a.point=p,v=s,e=u,s*=E.uR,u*=E.uR,r=s,f=(0,E.mC)(u=u/2+E.pu),n=(0,E.O$)(u)}function p(s,u){s*=E.uR,u*=E.uR,u=u/2+E.pu;var c=s-r,T=c>=0?1:-1,k=T*c,_=(0,E.mC)(u),b=(0,E.O$)(u),P=n*b,l=f*_+P*(0,E.mC)(k),d=P*T*(0,E.O$)(k);A.add((0,E.fv)(d,l)),r=s,f=_,n=b}function x(s){return g.reset(),(0,S.Z)(s,a),g*2}},77338:function($,U,t){t.d(U,{Z:function(){return L}});var M=t(33940),E=t(97860),i=t(7620),S=t(39695),A=t(72736),g,v,e,r,f,n,a,o,h=(0,M.Z)(),y,p,x={point:s,lineStart:c,lineEnd:T,polygonStart:function(){x.point=k,x.lineStart=_,x.lineEnd=b,h.reset(),E.gL.polygonStart()},polygonEnd:function(){E.gL.polygonEnd(),x.point=s,x.lineStart=c,x.lineEnd=T,E.L9<0?(g=-(e=180),v=-(r=90)):h>S.Ho?r=90:h<-S.Ho&&(v=-90),p[0]=g,p[1]=e},sphere:function(){g=-(e=180),v=-(r=90)}};function s(w,I){y.push(p=[g=w,e=w]),I<v&&(v=I),I>r&&(r=I)}function u(w,I){var z=(0,i.Og)([w*S.uR,I*S.uR]);if(o){var B=(0,i.T5)(o,z),O=[B[1],-B[0],0],R=(0,i.T5)(O,B);(0,i.iJ)(R),R=(0,i.Y1)(R);var C=w-f,F=C>0?1:-1,N=R[0]*S.RW*F,V,K=(0,S.Wn)(C)>180;K^(F*f<N&&N<F*w)?(V=R[1]*S.RW,V>r&&(r=V)):(N=(N+360)%360-180,K^(F*f<N&&N<F*w)?(V=-R[1]*S.RW,V<v&&(v=V)):(I<v&&(v=I),I>r&&(r=I))),K?w<f?P(g,w)>P(g,e)&&(e=w):P(w,e)>P(g,e)&&(g=w):e>=g?(w<g&&(g=w),w>e&&(e=w)):w>f?P(g,w)>P(g,e)&&(e=w):P(w,e)>P(g,e)&&(g=w)}else y.push(p=[g=w,e=w]);I<v&&(v=I),I>r&&(r=I),o=z,f=w}function c(){x.point=u}function T(){p[0]=g,p[1]=e,x.point=s,o=null}function k(w,I){if(o){var z=w-f;h.add((0,S.Wn)(z)>180?z+(z>0?360:-360):z)}else n=w,a=I;E.gL.point(w,I),u(w,I)}function _(){E.gL.lineStart()}function b(){k(n,a),E.gL.lineEnd(),(0,S.Wn)(h)>S.Ho&&(g=-(e=180)),p[0]=g,p[1]=e,o=null}function P(w,I){return(I-=w)<0?I+360:I}function l(w,I){return w[0]-I[0]}function d(w,I){return w[0]<=w[1]?w[0]<=I&&I<=w[1]:I<w[0]||w[1]<I}function L(w){var I,z,B,O,R,C,F;if(r=e=-(g=v=1/0),y=[],(0,A.Z)(w,x),z=y.length){for(y.sort(l),I=1,B=y[0],R=[B];I<z;++I)O=y[I],d(B,O[0])||d(B,O[1])?(P(B[0],O[1])>P(B[0],B[1])&&(B[1]=O[1]),P(O[0],B[1])>P(B[0],B[1])&&(B[0]=O[0])):R.push(B=O);for(C=-1/0,z=R.length-1,I=0,B=R[z];I<=z;B=O,++I)O=R[I],(F=P(B[1],O[0]))>C&&(C=F,g=O[0],e=B[1])}return y=p=null,g===1/0||v===1/0?[[NaN,NaN],[NaN,NaN]]:[[g,v],[e,r]]}},7620:function($,U,t){t.d(U,{Og:function(){return i},T:function(){return v},T5:function(){return A},Y1:function(){return E},iJ:function(){return e},j9:function(){return S},s0:function(){return g}});var M=t(39695);function E(r){return[(0,M.fv)(r[1],r[0]),(0,M.ZR)(r[2])]}function i(r){var f=r[0],n=r[1],a=(0,M.mC)(n);return[a*(0,M.mC)(f),a*(0,M.O$)(f),(0,M.O$)(n)]}function S(r,f){return r[0]*f[0]+r[1]*f[1]+r[2]*f[2]}function A(r,f){return[r[1]*f[2]-r[2]*f[1],r[2]*f[0]-r[0]*f[2],r[0]*f[1]-r[1]*f[0]]}function g(r,f){r[0]+=f[0],r[1]+=f[1],r[2]+=f[2]}function v(r,f){return[r[0]*f,r[1]*f,r[2]*f]}function e(r){var f=(0,M._b)(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);r[0]/=f,r[1]/=f,r[2]/=f}},66624:function($,U,t){t.d(U,{Z:function(){return z}});var M=t(39695),E=t(73182),i=t(72736),S,A,g,v,e,r,f,n,a,o,h,y,p,x,s,u,c={sphere:E.Z,point:T,lineStart:_,lineEnd:l,polygonStart:function(){c.lineStart=d,c.lineEnd=L},polygonEnd:function(){c.lineStart=_,c.lineEnd=l}};function T(B,O){B*=M.uR,O*=M.uR;var R=(0,M.mC)(O);k(R*(0,M.mC)(B),R*(0,M.O$)(B),(0,M.O$)(O))}function k(B,O,R){++S,g+=(B-g)/S,v+=(O-v)/S,e+=(R-e)/S}function _(){c.point=b}function b(B,O){B*=M.uR,O*=M.uR;var R=(0,M.mC)(O);x=R*(0,M.mC)(B),s=R*(0,M.O$)(B),u=(0,M.O$)(O),c.point=P,k(x,s,u)}function P(B,O){B*=M.uR,O*=M.uR;var R=(0,M.mC)(O),C=R*(0,M.mC)(B),F=R*(0,M.O$)(B),N=(0,M.O$)(O),V=(0,M.fv)((0,M._b)((V=s*N-u*F)*V+(V=u*C-x*N)*V+(V=x*F-s*C)*V),x*C+s*F+u*N);A+=V,r+=V*(x+(x=C)),f+=V*(s+(s=F)),n+=V*(u+(u=N)),k(x,s,u)}function l(){c.point=T}function d(){c.point=w}function L(){I(y,p),c.point=T}function w(B,O){y=B,p=O,B*=M.uR,O*=M.uR,c.point=I;var R=(0,M.mC)(O);x=R*(0,M.mC)(B),s=R*(0,M.O$)(B),u=(0,M.O$)(O),k(x,s,u)}function I(B,O){B*=M.uR,O*=M.uR;var R=(0,M.mC)(O),C=R*(0,M.mC)(B),F=R*(0,M.O$)(B),N=(0,M.O$)(O),V=s*N-u*F,K=u*C-x*N,Q=x*F-s*C,at=(0,M._b)(V*V+K*K+Q*Q),it=(0,M.ZR)(at),q=at&&-it/at;a+=q*V,o+=q*K,h+=q*Q,A+=it,r+=it*(x+(x=C)),f+=it*(s+(s=F)),n+=it*(u+(u=N)),k(x,s,u)}function z(B){S=A=g=v=e=r=f=n=a=o=h=0,(0,i.Z)(B,c);var O=a,R=o,C=h,F=O*O+R*R+C*C;return F<M.aW&&(O=r,R=f,C=n,A<M.Ho&&(O=g,R=v,C=e),F=O*O+R*R+C*C,F<M.aW)?[NaN,NaN]:[(0,M.fv)(R,O)*M.RW,(0,M.ZR)(C/(0,M._b)(F))*M.RW]}},7613:function($,U,t){t.d(U,{m:function(){return A},Z:function(){return v}});var M=t(7620);function E(e){return function(){return e}}var i=t(39695),S=t(49386);function A(e,r,f,n,a,o){if(f){var h=(0,i.mC)(r),y=(0,i.O$)(r),p=n*f;a==null?(a=r+n*i.BZ,o=r-p/2):(a=g(h,a),o=g(h,o),(n>0?a<o:a>o)&&(a+=n*i.BZ));for(var x,s=a;n>0?s>o:s<o;s-=p)x=(0,M.Y1)([h,-y*(0,i.mC)(s),-y*(0,i.O$)(s)]),e.point(x[0],x[1])}}function g(e,r){r=(0,M.Og)(r),r[0]-=e,(0,M.iJ)(r);var f=(0,i.Kh)(-r[1]);return((-r[2]<0?-f:f)+i.BZ-i.Ho)%i.BZ}function v(){var e=E([0,0]),r=E(90),f=E(6),n,a,o={point:h};function h(p,x){n.push(p=a(p,x)),p[0]*=i.RW,p[1]*=i.RW}function y(){var p=e.apply(this,arguments),x=r.apply(this,arguments)*i.uR,s=f.apply(this,arguments)*i.uR;return n=[],a=(0,S.I)(-p[0]*i.uR,-p[1]*i.uR,0).invert,A(o,x,s,1),p={type:"Polygon",coordinates:[n]},n=a=null,p}return y.center=function(p){return arguments.length?(e=typeof p=="function"?p:E([+p[0],+p[1]]),y):e},y.radius=function(p){return arguments.length?(r=typeof p=="function"?p:E(+p),y):r},y.precision=function(p){return arguments.length?(f=typeof p=="function"?p:E(+p),y):f},y}},87070:function($,U,t){var M=t(97023),E=t(39695);U.Z=(0,M.Z)(function(){return!0},i,A,[-E.pi,-E.ou]);function i(g){var v=NaN,e=NaN,r=NaN,f;return{lineStart:function(){g.lineStart(),f=1},point:function(n,a){var o=n>0?E.pi:-E.pi,h=(0,E.Wn)(n-v);(0,E.Wn)(h-E.pi)<E.Ho?(g.point(v,e=(e+a)/2>0?E.ou:-E.ou),g.point(r,e),g.lineEnd(),g.lineStart(),g.point(o,e),g.point(n,e),f=0):r!==o&&h>=E.pi&&((0,E.Wn)(v-r)<E.Ho&&(v-=r*E.Ho),(0,E.Wn)(n-o)<E.Ho&&(n-=o*E.Ho),e=S(v,e,n,a),g.point(r,e),g.lineEnd(),g.lineStart(),g.point(o,e),f=0),g.point(v=n,e=a),r=o},lineEnd:function(){g.lineEnd(),v=e=NaN},clean:function(){return 2-f}}}function S(g,v,e,r){var f,n,a=(0,E.O$)(g-e);return(0,E.Wn)(a)>E.Ho?(0,E.z4)(((0,E.O$)(v)*(n=(0,E.mC)(r))*(0,E.O$)(e)-(0,E.O$)(r)*(f=(0,E.mC)(v))*(0,E.O$)(g))/(f*n*a)):(v+r)/2}function A(g,v,e,r){var f;if(g==null)f=e*E.ou,r.point(-E.pi,f),r.point(0,f),r.point(E.pi,f),r.point(E.pi,0),r.point(E.pi,-f),r.point(0,-f),r.point(-E.pi,-f),r.point(-E.pi,0),r.point(-E.pi,f);else if((0,E.Wn)(g[0]-v[0])>E.Ho){var n=g[0]<v[0]?E.pi:-E.pi;f=e*n/2,r.point(-n,f),r.point(0,f),r.point(n,f)}else r.point(v[0],v[1])}},85272:function($,U,t){t.d(U,{Z:function(){return E}});var M=t(73182);function E(){var i=[],S;return{point:function(A,g,v){S.push([A,g,v])},lineStart:function(){i.push(S=[])},lineEnd:M.Z,rejoin:function(){i.length>1&&i.push(i.pop().concat(i.shift()))},result:function(){var A=i;return i=[],S=null,A}}}},1457:function($,U,t){t.d(U,{Z:function(){return g}});var M=t(7620),E=t(7613),i=t(39695),S=t(67108),A=t(97023);function g(v){var e=(0,i.mC)(v),r=6*i.uR,f=e>0,n=(0,i.Wn)(e)>i.Ho;function a(x,s,u,c){(0,E.m)(c,v,r,u,x,s)}function o(x,s){return(0,i.mC)(x)*(0,i.mC)(s)>e}function h(x){var s,u,c,T,k;return{lineStart:function(){T=c=!1,k=1},point:function(_,b){var P=[_,b],l,d=o(_,b),L=f?d?0:p(_,b):d?p(_+(_<0?i.pi:-i.pi),b):0;if(!s&&(T=c=d)&&x.lineStart(),d!==c&&(l=y(s,P),(!l||(0,S.Z)(s,l)||(0,S.Z)(P,l))&&(P[2]=1)),d!==c)k=0,d?(x.lineStart(),l=y(P,s),x.point(l[0],l[1])):(l=y(s,P),x.point(l[0],l[1],2),x.lineEnd()),s=l;else if(n&&s&&f^d){var w;!(L&u)&&(w=y(P,s,!0))&&(k=0,f?(x.lineStart(),x.point(w[0][0],w[0][1]),x.point(w[1][0],w[1][1]),x.lineEnd()):(x.point(w[1][0],w[1][1]),x.lineEnd(),x.lineStart(),x.point(w[0][0],w[0][1],3)))}d&&(!s||!(0,S.Z)(s,P))&&x.point(P[0],P[1]),s=P,c=d,u=L},lineEnd:function(){c&&x.lineEnd(),s=null},clean:function(){return k|(T&&c)<<1}}}function y(x,s,u){var c=(0,M.Og)(x),T=(0,M.Og)(s),k=[1,0,0],_=(0,M.T5)(c,T),b=(0,M.j9)(_,_),P=_[0],l=b-P*P;if(!l)return!u&&x;var d=e*b/l,L=-e*P/l,w=(0,M.T5)(k,_),I=(0,M.T)(k,d),z=(0,M.T)(_,L);(0,M.s0)(I,z);var B=w,O=(0,M.j9)(I,B),R=(0,M.j9)(B,B),C=O*O-R*((0,M.j9)(I,I)-1);if(!(C<0)){var F=(0,i._b)(C),N=(0,M.T)(B,(-O-F)/R);if((0,M.s0)(N,I),N=(0,M.Y1)(N),!u)return N;var V=x[0],K=s[0],Q=x[1],at=s[1],it;K<V&&(it=V,V=K,K=it);var q=K-V,W=(0,i.Wn)(q-i.pi)<i.Ho,Z=W||q<i.Ho;if(!W&&at<Q&&(it=Q,Q=at,at=it),Z?W?Q+at>0^N[1]<((0,i.Wn)(N[0]-V)<i.Ho?Q:at):Q<=N[1]&&N[1]<=at:q>i.pi^(V<=N[0]&&N[0]<=K)){var G=(0,M.T)(B,(-O+F)/R);return(0,M.s0)(G,I),[N,(0,M.Y1)(G)]}}}function p(x,s){var u=f?v:i.pi-v,c=0;return x<-u?c|=1:x>u&&(c|=2),s<-u?c|=4:s>u&&(c|=8),c}return(0,A.Z)(o,h,a,f?[0,-v]:[-i.pi,v-i.pi])}},97023:function($,U,t){t.d(U,{Z:function(){return g}});var M=t(85272),E=t(46225),i=t(39695),S=t(23071),A=t(33064);function g(r,f,n,a){return function(o){var h=f(o),y=(0,M.Z)(),p=f(y),x=!1,s,u,c,T={point:k,lineStart:b,lineEnd:P,polygonStart:function(){T.point=l,T.lineStart=d,T.lineEnd=L,u=[],s=[]},polygonEnd:function(){T.point=k,T.lineStart=b,T.lineEnd=P,u=(0,A.TS)(u);var w=(0,S.Z)(s,a);u.length?(x||(o.polygonStart(),x=!0),(0,E.Z)(u,e,w,n,o)):w&&(x||(o.polygonStart(),x=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),u=s=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function k(w,I){r(w,I)&&o.point(w,I)}function _(w,I){h.point(w,I)}function b(){T.point=_,h.lineStart()}function P(){T.point=k,h.lineEnd()}function l(w,I){c.push([w,I]),p.point(w,I)}function d(){p.lineStart(),c=[]}function L(){l(c[0][0],c[0][1]),p.lineEnd();var w=p.clean(),I=y.result(),z,B=I.length,O,R,C;if(c.pop(),s.push(c),c=null,!!B){if(w&1){if(R=I[0],(O=R.length-1)>0){for(x||(o.polygonStart(),x=!0),o.lineStart(),z=0;z<O;++z)o.point((C=R[z])[0],C[1]);o.lineEnd()}return}B>1&&w&2&&I.push(I.pop().concat(I.shift())),u.push(I.filter(v))}}return T}}function v(r){return r.length>1}function e(r,f){return((r=r.x)[0]<0?r[1]-i.ou-i.Ho:i.ou-r[1])-((f=f.x)[0]<0?f[1]-i.ou-i.Ho:i.ou-f[1])}},87605:function($,U,t){t.d(U,{Z:function(){return e}});var M=t(39695),E=t(85272);function i(r,f,n,a,o,h){var y=r[0],p=r[1],x=f[0],s=f[1],u=0,c=1,T=x-y,k=s-p,_;if(_=n-y,!(!T&&_>0)){if(_/=T,T<0){if(_<u)return;_<c&&(c=_)}else if(T>0){if(_>c)return;_>u&&(u=_)}if(_=o-y,!(!T&&_<0)){if(_/=T,T<0){if(_>c)return;_>u&&(u=_)}else if(T>0){if(_<u)return;_<c&&(c=_)}if(_=a-p,!(!k&&_>0)){if(_/=k,k<0){if(_<u)return;_<c&&(c=_)}else if(k>0){if(_>c)return;_>u&&(u=_)}if(_=h-p,!(!k&&_<0)){if(_/=k,k<0){if(_>c)return;_>u&&(u=_)}else if(k>0){if(_<u)return;_<c&&(c=_)}return u>0&&(r[0]=y+u*T,r[1]=p+u*k),c<1&&(f[0]=y+c*T,f[1]=p+c*k),!0}}}}}var S=t(46225),A=t(33064),g=1e9,v=-g;function e(r,f,n,a){function o(s,u){return r<=s&&s<=n&&f<=u&&u<=a}function h(s,u,c,T){var k=0,_=0;if(s==null||(k=y(s,c))!==(_=y(u,c))||x(s,u)<0^c>0)do T.point(k===0||k===3?r:n,k>1?a:f);while((k=(k+c+4)%4)!==_);else T.point(u[0],u[1])}function y(s,u){return(0,M.Wn)(s[0]-r)<M.Ho?u>0?0:3:(0,M.Wn)(s[0]-n)<M.Ho?u>0?2:1:(0,M.Wn)(s[1]-f)<M.Ho?u>0?1:0:u>0?3:2}function p(s,u){return x(s.x,u.x)}function x(s,u){var c=y(s,1),T=y(u,1);return c!==T?c-T:c===0?u[1]-s[1]:c===1?s[0]-u[0]:c===2?s[1]-u[1]:u[0]-s[0]}return function(s){var u=s,c=(0,E.Z)(),T,k,_,b,P,l,d,L,w,I,z,B={point:O,lineStart:N,lineEnd:V,polygonStart:C,polygonEnd:F};function O(Q,at){o(Q,at)&&u.point(Q,at)}function R(){for(var Q=0,at=0,it=k.length;at<it;++at)for(var q=k[at],W=1,Z=q.length,G=q[0],et,nt,X=G[0],Y=G[1];W<Z;++W)et=X,nt=Y,G=q[W],X=G[0],Y=G[1],nt<=a?Y>a&&(X-et)*(a-nt)>(Y-nt)*(r-et)&&++Q:Y<=a&&(X-et)*(a-nt)<(Y-nt)*(r-et)&&--Q;return Q}function C(){u=c,T=[],k=[],z=!0}function F(){var Q=R(),at=z&&Q,it=(T=(0,A.TS)(T)).length;(at||it)&&(s.polygonStart(),at&&(s.lineStart(),h(null,null,1,s),s.lineEnd()),it&&(0,S.Z)(T,p,Q,h,s),s.polygonEnd()),u=s,T=k=_=null}function N(){B.point=K,k&&k.push(_=[]),I=!0,w=!1,d=L=NaN}function V(){T&&(K(b,P),l&&w&&c.rejoin(),T.push(c.result())),B.point=O,w&&u.lineEnd()}function K(Q,at){var it=o(Q,at);if(k&&_.push([Q,at]),I)b=Q,P=at,l=it,I=!1,it&&(u.lineStart(),u.point(Q,at));else if(it&&w)u.point(Q,at);else{var q=[d=Math.max(v,Math.min(g,d)),L=Math.max(v,Math.min(g,L))],W=[Q=Math.max(v,Math.min(g,Q)),at=Math.max(v,Math.min(g,at))];i(q,W,r,f,n,a)?(w||(u.lineStart(),u.point(q[0],q[1])),u.point(W[0],W[1]),it||u.lineEnd(),z=!1):it&&(u.lineStart(),u.point(Q,at),z=!1)}d=Q,L=at,w=it}return B}}},46225:function($,U,t){t.d(U,{Z:function(){return S}});var M=t(67108),E=t(39695);function i(g,v,e,r){this.x=g,this.z=v,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function S(g,v,e,r,f){var n=[],a=[],o,h;if(g.forEach(function(c){if(!((T=c.length-1)<=0)){var T,k=c[0],_=c[T],b;if((0,M.Z)(k,_)){if(!k[2]&&!_[2]){for(f.lineStart(),o=0;o<T;++o)f.point((k=c[o])[0],k[1]);f.lineEnd();return}_[0]+=2*E.Ho}n.push(b=new i(k,c,null,!0)),a.push(b.o=new i(k,null,b,!1)),n.push(b=new i(_,c,null,!1)),a.push(b.o=new i(_,null,b,!0))}}),!!n.length){for(a.sort(v),A(n),A(a),o=0,h=a.length;o<h;++o)a[o].e=e=!e;for(var y=n[0],p,x;;){for(var s=y,u=!0;s.v;)if((s=s.n)===y)return;p=s.z,f.lineStart();do{if(s.v=s.o.v=!0,s.e){if(u)for(o=0,h=p.length;o<h;++o)f.point((x=p[o])[0],x[1]);else r(s.x,s.n.x,1,f);s=s.n}else{if(u)for(p=s.p.z,o=p.length-1;o>=0;--o)f.point((x=p[o])[0],x[1]);else r(s.x,s.p.x,-1,f);s=s.p}s=s.o,p=s.z,u=!u}while(!s.v);f.lineEnd()}}}function A(g){if(v=g.length){for(var v,e=0,r=g[0],f;++e<v;)r.n=f=g[e],f.p=r,r=f;r.n=f=g[0],f.p=r}}},96059:function($,U,t){t.d(U,{Z:function(){return M}});function M(E,i){function S(A,g){return A=E(A,g),i(A[0],A[1])}return E.invert&&i.invert&&(S.invert=function(A,g){return A=i.invert(A,g),A&&E.invert(A[0],A[1])}),S}},8593:function($,U,t){t.d(U,{Z:function(){return M}});function M(E){return E}},27362:function($,U,t){t.r(U),t.d(U,{geoAlbers:function(){return _r},geoAlbersUsa:function(){return re},geoArea:function(){return M.ZP},geoAzimuthalEqualArea:function(){return fe.Z},geoAzimuthalEqualAreaRaw:function(){return fe.l},geoAzimuthalEquidistant:function(){return ye.Z},geoAzimuthalEquidistantRaw:function(){return ye.N},geoBounds:function(){return E.Z},geoCentroid:function(){return i.Z},geoCircle:function(){return S.Z},geoClipAntimeridian:function(){return A.Z},geoClipCircle:function(){return g.Z},geoClipExtent:function(){return e},geoClipRectangle:function(){return v.Z},geoConicConformal:function(){return ir},geoConicConformalRaw:function(){return qe},geoConicEqualArea:function(){return Re},geoConicEqualAreaRaw:function(){return je},geoConicEquidistant:function(){return Ut},geoConicEquidistantRaw:function(){return Dt},geoContains:function(){return C},geoDistance:function(){return l},geoEqualEarth:function(){return ar},geoEqualEarthRaw:function(){return Oe},geoEquirectangular:function(){return xr.Z},geoEquirectangularRaw:function(){return xr.k},geoGnomonic:function(){return cr.Z},geoGnomonicRaw:function(){return cr.M},geoGraticule:function(){return K},geoGraticule10:function(){return Q},geoIdentity:function(){return lr},geoInterpolate:function(){return at.Z},geoLength:function(){return _},geoMercator:function(){return Ce},geoMercatorRaw:function(){return _e},geoNaturalEarth1:function(){return Or.Z},geoNaturalEarth1Raw:function(){return Or.K},geoOrthographic:function(){return Ir.Z},geoOrthographicRaw:function(){return Ir.I},geoPath:function(){return Ve},geoProjection:function(){return Qe.Z},geoProjectionMutator:function(){return Qe.r},geoRotation:function(){return Le.Z},geoStereographic:function(){return Zr},geoStereographicRaw:function(){return rn},geoStream:function(){return o.Z},geoTransform:function(){return sr.Z},geoTransverseMercator:function(){return Tn},geoTransverseMercatorRaw:function(){return yn}});var M=t(97860),E=t(77338),i=t(66624),S=t(7613),A=t(87070),g=t(1457),v=t(87605);function e(){var hr=0,dr=0,Lr=960,Cr=500,Hr,sn,Yr;return Yr={stream:function(xn){return Hr&&sn===xn?Hr:Hr=(0,v.Z)(hr,dr,Lr,Cr)(sn=xn)},extent:function(xn){return arguments.length?(hr=+xn[0][0],dr=+xn[0][1],Lr=+xn[1][0],Cr=+xn[1][1],Hr=sn=null,Yr):[[hr,dr],[Lr,Cr]]}}}var r=t(23071),f=t(33940),n=t(39695),a=t(73182),o=t(72736),h=(0,f.Z)(),y,p,x,s={sphere:a.Z,point:a.Z,lineStart:u,lineEnd:a.Z,polygonStart:a.Z,polygonEnd:a.Z};function u(){s.point=T,s.lineEnd=c}function c(){s.point=s.lineEnd=a.Z}function T(hr,dr){hr*=n.uR,dr*=n.uR,y=hr,p=(0,n.O$)(dr),x=(0,n.mC)(dr),s.point=k}function k(hr,dr){hr*=n.uR,dr*=n.uR;var Lr=(0,n.O$)(dr),Cr=(0,n.mC)(dr),Hr=(0,n.Wn)(hr-y),sn=(0,n.mC)(Hr),Yr=(0,n.O$)(Hr),xn=Cr*Yr,wn=x*Lr-p*Cr*sn,Un=p*Lr+x*Cr*sn;h.add((0,n.fv)((0,n._b)(xn*xn+wn*wn),Un)),y=hr,p=Lr,x=Cr}function _(hr){return h.reset(),(0,o.Z)(hr,s),+h}var b=[null,null],P={type:"LineString",coordinates:b};function l(hr,dr){return b[0]=hr,b[1]=dr,_(P)}var d={Feature:function(hr,dr){return w(hr.geometry,dr)},FeatureCollection:function(hr,dr){for(var Lr=hr.features,Cr=-1,Hr=Lr.length;++Cr<Hr;)if(w(Lr[Cr].geometry,dr))return!0;return!1}},L={Sphere:function(){return!0},Point:function(hr,dr){return I(hr.coordinates,dr)},MultiPoint:function(hr,dr){for(var Lr=hr.coordinates,Cr=-1,Hr=Lr.length;++Cr<Hr;)if(I(Lr[Cr],dr))return!0;return!1},LineString:function(hr,dr){return z(hr.coordinates,dr)},MultiLineString:function(hr,dr){for(var Lr=hr.coordinates,Cr=-1,Hr=Lr.length;++Cr<Hr;)if(z(Lr[Cr],dr))return!0;return!1},Polygon:function(hr,dr){return B(hr.coordinates,dr)},MultiPolygon:function(hr,dr){for(var Lr=hr.coordinates,Cr=-1,Hr=Lr.length;++Cr<Hr;)if(B(Lr[Cr],dr))return!0;return!1},GeometryCollection:function(hr,dr){for(var Lr=hr.geometries,Cr=-1,Hr=Lr.length;++Cr<Hr;)if(w(Lr[Cr],dr))return!0;return!1}};function w(hr,dr){return hr&&L.hasOwnProperty(hr.type)?L[hr.type](hr,dr):!1}function I(hr,dr){return l(hr,dr)===0}function z(hr,dr){for(var Lr,Cr,Hr,sn=0,Yr=hr.length;sn<Yr;sn++){if(Cr=l(hr[sn],dr),Cr===0||sn>0&&(Hr=l(hr[sn],hr[sn-1]),Hr>0&&Lr<=Hr&&Cr<=Hr&&(Lr+Cr-Hr)*(1-Math.pow((Lr-Cr)/Hr,2))<n.aW*Hr))return!0;Lr=Cr}return!1}function B(hr,dr){return!!(0,r.Z)(hr.map(O),R(dr))}function O(hr){return hr=hr.map(R),hr.pop(),hr}function R(hr){return[hr[0]*n.uR,hr[1]*n.uR]}function C(hr,dr){return(hr&&d.hasOwnProperty(hr.type)?d[hr.type]:w)(hr,dr)}var F=t(33064);function N(hr,dr,Lr){var Cr=(0,F.w6)(hr,dr-n.Ho,Lr).concat(dr);return function(Hr){return Cr.map(function(sn){return[Hr,sn]})}}function V(hr,dr,Lr){var Cr=(0,F.w6)(hr,dr-n.Ho,Lr).concat(dr);return function(Hr){return Cr.map(function(sn){return[sn,Hr]})}}function K(){var hr,dr,Lr,Cr,Hr,sn,Yr,xn,wn=10,Un=wn,qn=90,ei=360,Gn,Hn,gr,$r,Jr=2.5;function ln(){return{type:"MultiLineString",coordinates:zn()}}function zn(){return(0,F.w6)((0,n.mD)(Cr/qn)*qn,Lr,qn).map(gr).concat((0,F.w6)((0,n.mD)(xn/ei)*ei,Yr,ei).map($r)).concat((0,F.w6)((0,n.mD)(dr/wn)*wn,hr,wn).filter(function(mn){return(0,n.Wn)(mn%qn)>n.Ho}).map(Gn)).concat((0,F.w6)((0,n.mD)(sn/Un)*Un,Hr,Un).filter(function(mn){return(0,n.Wn)(mn%ei)>n.Ho}).map(Hn))}return ln.lines=function(){return zn().map(function(mn){return{type:"LineString",coordinates:mn}})},ln.outline=function(){return{type:"Polygon",coordinates:[gr(Cr).concat($r(Yr).slice(1),gr(Lr).reverse().slice(1),$r(xn).reverse().slice(1))]}},ln.extent=function(mn){return arguments.length?ln.extentMajor(mn).extentMinor(mn):ln.extentMinor()},ln.extentMajor=function(mn){return arguments.length?(Cr=+mn[0][0],Lr=+mn[1][0],xn=+mn[0][1],Yr=+mn[1][1],Cr>Lr&&(mn=Cr,Cr=Lr,Lr=mn),xn>Yr&&(mn=xn,xn=Yr,Yr=mn),ln.precision(Jr)):[[Cr,xn],[Lr,Yr]]},ln.extentMinor=function(mn){return arguments.length?(dr=+mn[0][0],hr=+mn[1][0],sn=+mn[0][1],Hr=+mn[1][1],dr>hr&&(mn=dr,dr=hr,hr=mn),sn>Hr&&(mn=sn,sn=Hr,Hr=mn),ln.precision(Jr)):[[dr,sn],[hr,Hr]]},ln.step=function(mn){return arguments.length?ln.stepMajor(mn).stepMinor(mn):ln.stepMinor()},ln.stepMajor=function(mn){return arguments.length?(qn=+mn[0],ei=+mn[1],ln):[qn,ei]},ln.stepMinor=function(mn){return arguments.length?(wn=+mn[0],Un=+mn[1],ln):[wn,Un]},ln.precision=function(mn){return arguments.length?(Jr=+mn,Gn=N(sn,Hr,90),Hn=V(dr,hr,Jr),gr=N(xn,Yr,90),$r=V(Cr,Lr,Jr),ln):Jr},ln.extentMajor([[-180,-90+n.Ho],[180,90-n.Ho]]).extentMinor([[-180,-80-n.Ho],[180,80+n.Ho]])}function Q(){return K()()}var at=t(83074),it=t(8593),q=(0,f.Z)(),W=(0,f.Z)(),Z,G,et,nt,X={point:a.Z,lineStart:a.Z,lineEnd:a.Z,polygonStart:function(){X.lineStart=Y,X.lineEnd=ht},polygonEnd:function(){X.lineStart=X.lineEnd=X.point=a.Z,q.add((0,n.Wn)(W)),W.reset()},result:function(){var hr=q/2;return q.reset(),hr}};function Y(){X.point=ot}function ot(hr,dr){X.point=rt,Z=et=hr,G=nt=dr}function rt(hr,dr){W.add(nt*hr-et*dr),et=hr,nt=dr}function ht(){rt(Z,G)}var pt=X,yt=t(3559),xt=0,Ft=0,Et=0,mt=0,gt=0,wt=0,Pt=0,Bt=0,kt=0,jt,Ht,Vt,ee,te={point:ae,lineStart:le,lineEnd:we,polygonStart:function(){te.lineStart=ve,te.lineEnd=Mt},polygonEnd:function(){te.point=ae,te.lineStart=le,te.lineEnd=we},result:function(){var hr=kt?[Pt/kt,Bt/kt]:wt?[mt/wt,gt/wt]:Et?[xt/Et,Ft/Et]:[NaN,NaN];return xt=Ft=Et=mt=gt=wt=Pt=Bt=kt=0,hr}};function ae(hr,dr){xt+=hr,Ft+=dr,++Et}function le(){te.point=ce}function ce(hr,dr){te.point=pe,ae(Vt=hr,ee=dr)}function pe(hr,dr){var Lr=hr-Vt,Cr=dr-ee,Hr=(0,n._b)(Lr*Lr+Cr*Cr);mt+=Hr*(Vt+hr)/2,gt+=Hr*(ee+dr)/2,wt+=Hr,ae(Vt=hr,ee=dr)}function we(){te.point=ae}function ve(){te.point=It}function Mt(){Rt(jt,Ht)}function It(hr,dr){te.point=Rt,ae(jt=Vt=hr,Ht=ee=dr)}function Rt(hr,dr){var Lr=hr-Vt,Cr=dr-ee,Hr=(0,n._b)(Lr*Lr+Cr*Cr);mt+=Hr*(Vt+hr)/2,gt+=Hr*(ee+dr)/2,wt+=Hr,Hr=ee*hr-Vt*dr,Pt+=Hr*(Vt+hr),Bt+=Hr*(ee+dr),kt+=Hr*3,ae(Vt=hr,ee=dr)}var zt=te;function Tt(hr){this._context=hr}Tt.prototype={_radius:4.5,pointRadius:function(hr){return this._radius=hr,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(hr,dr){switch(this._point){case 0:{this._context.moveTo(hr,dr),this._point=1;break}case 1:{this._context.lineTo(hr,dr);break}default:{this._context.moveTo(hr+this._radius,dr),this._context.arc(hr,dr,this._radius,0,n.BZ);break}}},result:a.Z};var ft=(0,f.Z)(),ut,vt,St,Ot,Xt,$t={point:a.Z,lineStart:function(){$t.point=de},lineEnd:function(){ut&&Me(vt,St),$t.point=a.Z},polygonStart:function(){ut=!0},polygonEnd:function(){ut=null},result:function(){var hr=+ft;return ft.reset(),hr}};function de(hr,dr){$t.point=Me,vt=Ot=hr,St=Xt=dr}function Me(hr,dr){Ot-=hr,Xt-=dr,ft.add((0,n._b)(Ot*Ot+Xt*Xt)),Ot=hr,Xt=dr}var Fe=$t;function De(){this._string=[]}De.prototype={_radius:4.5,_circle:Ae(4.5),pointRadius:function(hr){return(hr=+hr)!==this._radius&&(this._radius=hr,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(hr,dr){switch(this._point){case 0:{this._string.push("M",hr,",",dr),this._point=1;break}case 1:{this._string.push("L",hr,",",dr);break}default:{this._circle==null&&(this._circle=Ae(this._radius)),this._string.push("M",hr,",",dr,this._circle);break}}},result:function(){if(this._string.length){var hr=this._string.join("");return this._string=[],hr}else return null}};function Ae(hr){return"m0,"+hr+"a"+hr+","+hr+" 0 1,1 0,"+-2*hr+"a"+hr+","+hr+" 0 1,1 0,"+2*hr+"z"}function Ve(hr,dr){var Lr=4.5,Cr,Hr;function sn(Yr){return Yr&&(typeof Lr=="function"&&Hr.pointRadius(+Lr.apply(this,arguments)),(0,o.Z)(Yr,Cr(Hr))),Hr.result()}return sn.area=function(Yr){return(0,o.Z)(Yr,Cr(pt)),pt.result()},sn.measure=function(Yr){return(0,o.Z)(Yr,Cr(Fe)),Fe.result()},sn.bounds=function(Yr){return(0,o.Z)(Yr,Cr(yt.Z)),yt.Z.result()},sn.centroid=function(Yr){return(0,o.Z)(Yr,Cr(zt)),zt.result()},sn.projection=function(Yr){return arguments.length?(Cr=Yr==null?(hr=null,it.Z):(hr=Yr).stream,sn):hr},sn.context=function(Yr){return arguments.length?(Hr=Yr==null?(dr=null,new De):new Tt(dr=Yr),typeof Lr!="function"&&Hr.pointRadius(Lr),sn):dr},sn.pointRadius=function(Yr){return arguments.length?(Lr=typeof Yr=="function"?Yr:(Hr.pointRadius(+Yr),+Yr),sn):Lr},sn.projection(hr).context(dr)}var Qe=t(15002);function Sr(hr){var dr=0,Lr=n.pi/3,Cr=(0,Qe.r)(hr),Hr=Cr(dr,Lr);return Hr.parallels=function(sn){return arguments.length?Cr(dr=sn[0]*n.uR,Lr=sn[1]*n.uR):[dr*n.RW,Lr*n.RW]},Hr}function he(hr){var dr=(0,n.mC)(hr);function Lr(Cr,Hr){return[Cr*dr,(0,n.O$)(Hr)/dr]}return Lr.invert=function(Cr,Hr){return[Cr/dr,(0,n.ZR)(Hr*dr)]},Lr}function je(hr,dr){var Lr=(0,n.O$)(hr),Cr=(Lr+(0,n.O$)(dr))/2;if((0,n.Wn)(Cr)<n.Ho)return he(hr);var Hr=1+Lr*(2*Cr-Lr),sn=(0,n._b)(Hr)/Cr;function Yr(xn,wn){var Un=(0,n._b)(Hr-2*Cr*(0,n.O$)(wn))/Cr;return[Un*(0,n.O$)(xn*=Cr),sn-Un*(0,n.mC)(xn)]}return Yr.invert=function(xn,wn){var Un=sn-wn,qn=(0,n.fv)(xn,(0,n.Wn)(Un))*(0,n.Xx)(Un);return Un*Cr<0&&(qn-=n.pi*(0,n.Xx)(xn)*(0,n.Xx)(Un)),[qn/Cr,(0,n.ZR)((Hr-(xn*xn+Un*Un)*Cr*Cr)/(2*Cr))]},Yr}function Re(){return Sr(je).scale(155.424).center([0,33.6442])}function _r(){return Re().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var tr=t(47589);function Gt(hr){var dr=hr.length;return{point:function(Lr,Cr){for(var Hr=-1;++Hr<dr;)hr[Hr].point(Lr,Cr)},sphere:function(){for(var Lr=-1;++Lr<dr;)hr[Lr].sphere()},lineStart:function(){for(var Lr=-1;++Lr<dr;)hr[Lr].lineStart()},lineEnd:function(){for(var Lr=-1;++Lr<dr;)hr[Lr].lineEnd()},polygonStart:function(){for(var Lr=-1;++Lr<dr;)hr[Lr].polygonStart()},polygonEnd:function(){for(var Lr=-1;++Lr<dr;)hr[Lr].polygonEnd()}}}function re(){var hr,dr,Lr=_r(),Cr,Hr=Re().rotate([154,0]).center([-2,58.5]).parallels([55,65]),sn,Yr=Re().rotate([157,0]).center([-3,19.9]).parallels([8,18]),xn,wn,Un={point:function(Gn,Hn){wn=[Gn,Hn]}};function qn(Gn){var Hn=Gn[0],gr=Gn[1];return wn=null,Cr.point(Hn,gr),wn||(sn.point(Hn,gr),wn)||(xn.point(Hn,gr),wn)}qn.invert=function(Gn){var Hn=Lr.scale(),gr=Lr.translate(),$r=(Gn[0]-gr[0])/Hn,Jr=(Gn[1]-gr[1])/Hn;return(Jr>=.12&&Jr<.234&&$r>=-.425&&$r<-.214?Hr:Jr>=.166&&Jr<.234&&$r>=-.214&&$r<-.115?Yr:Lr).invert(Gn)},qn.stream=function(Gn){return hr&&dr===Gn?hr:hr=Gt([Lr.stream(dr=Gn),Hr.stream(Gn),Yr.stream(Gn)])},qn.precision=function(Gn){return arguments.length?(Lr.precision(Gn),Hr.precision(Gn),Yr.precision(Gn),ei()):Lr.precision()},qn.scale=function(Gn){return arguments.length?(Lr.scale(Gn),Hr.scale(Gn*.35),Yr.scale(Gn),qn.translate(Lr.translate())):Lr.scale()},qn.translate=function(Gn){if(!arguments.length)return Lr.translate();var Hn=Lr.scale(),gr=+Gn[0],$r=+Gn[1];return Cr=Lr.translate(Gn).clipExtent([[gr-.455*Hn,$r-.238*Hn],[gr+.455*Hn,$r+.238*Hn]]).stream(Un),sn=Hr.translate([gr-.307*Hn,$r+.201*Hn]).clipExtent([[gr-.425*Hn+n.Ho,$r+.12*Hn+n.Ho],[gr-.214*Hn-n.Ho,$r+.234*Hn-n.Ho]]).stream(Un),xn=Yr.translate([gr-.205*Hn,$r+.212*Hn]).clipExtent([[gr-.214*Hn+n.Ho,$r+.166*Hn+n.Ho],[gr-.115*Hn-n.Ho,$r+.234*Hn-n.Ho]]).stream(Un),ei()},qn.fitExtent=function(Gn,Hn){return(0,tr.qg)(qn,Gn,Hn)},qn.fitSize=function(Gn,Hn){return(0,tr.mF)(qn,Gn,Hn)},qn.fitWidth=function(Gn,Hn){return(0,tr.V6)(qn,Gn,Hn)},qn.fitHeight=function(Gn,Hn){return(0,tr.rf)(qn,Gn,Hn)};function ei(){return hr=dr=null,qn}return qn.scale(1070)}var fe=t(12956),ye=t(17889),Le=t(49386);function _e(hr,dr){return[hr,(0,n.cM)((0,n.OR)((n.ou+dr)/2))]}_e.invert=function(hr,dr){return[hr,2*(0,n.z4)((0,n.Qq)(dr))-n.ou]};function Ce(){return ze(_e).scale(961/n.BZ)}function ze(hr){var dr=(0,Qe.Z)(hr),Lr=dr.center,Cr=dr.scale,Hr=dr.translate,sn=dr.clipExtent,Yr=null,xn,wn,Un;dr.scale=function(ei){return arguments.length?(Cr(ei),qn()):Cr()},dr.translate=function(ei){return arguments.length?(Hr(ei),qn()):Hr()},dr.center=function(ei){return arguments.length?(Lr(ei),qn()):Lr()},dr.clipExtent=function(ei){return arguments.length?(ei==null?Yr=xn=wn=Un=null:(Yr=+ei[0][0],xn=+ei[0][1],wn=+ei[1][0],Un=+ei[1][1]),qn()):Yr==null?null:[[Yr,xn],[wn,Un]]};function qn(){var ei=n.pi*Cr(),Gn=dr((0,Le.Z)(dr.rotate()).invert([0,0]));return sn(Yr==null?[[Gn[0]-ei,Gn[1]-ei],[Gn[0]+ei,Gn[1]+ei]]:hr===_e?[[Math.max(Gn[0]-ei,Yr),xn],[Math.min(Gn[0]+ei,wn),Un]]:[[Yr,Math.max(Gn[1]-ei,xn)],[wn,Math.min(Gn[1]+ei,Un)]])}return qn()}function We(hr){return(0,n.OR)((n.ou+hr)/2)}function qe(hr,dr){var Lr=(0,n.mC)(hr),Cr=hr===dr?(0,n.O$)(hr):(0,n.cM)(Lr/(0,n.mC)(dr))/(0,n.cM)(We(dr)/We(hr)),Hr=Lr*(0,n.sQ)(We(hr),Cr)/Cr;if(!Cr)return _e;function sn(Yr,xn){Hr>0?xn<-n.ou+n.Ho&&(xn=-n.ou+n.Ho):xn>n.ou-n.Ho&&(xn=n.ou-n.Ho);var wn=Hr/(0,n.sQ)(We(xn),Cr);return[wn*(0,n.O$)(Cr*Yr),Hr-wn*(0,n.mC)(Cr*Yr)]}return sn.invert=function(Yr,xn){var wn=Hr-xn,Un=(0,n.Xx)(Cr)*(0,n._b)(Yr*Yr+wn*wn),qn=(0,n.fv)(Yr,(0,n.Wn)(wn))*(0,n.Xx)(wn);return wn*Cr<0&&(qn-=n.pi*(0,n.Xx)(Yr)*(0,n.Xx)(wn)),[qn/Cr,2*(0,n.z4)((0,n.sQ)(Hr/Un,1/Cr))-n.ou]},sn}function ir(){return Sr(qe).scale(109.5).parallels([30,30])}var xr=t(97492);function Dt(hr,dr){var Lr=(0,n.mC)(hr),Cr=hr===dr?(0,n.O$)(hr):(Lr-(0,n.mC)(dr))/(dr-hr),Hr=Lr/Cr+hr;if((0,n.Wn)(Cr)<n.Ho)return xr.k;function sn(Yr,xn){var wn=Hr-xn,Un=Cr*Yr;return[wn*(0,n.O$)(Un),Hr-wn*(0,n.mC)(Un)]}return sn.invert=function(Yr,xn){var wn=Hr-xn,Un=(0,n.fv)(Yr,(0,n.Wn)(wn))*(0,n.Xx)(wn);return wn*Cr<0&&(Un-=n.pi*(0,n.Xx)(Yr)*(0,n.Xx)(wn)),[Un/Cr,Hr-(0,n.Xx)(Cr)*(0,n._b)(Yr*Yr+wn*wn)]},sn}function Ut(){return Sr(Dt).scale(131.154).center([0,13.9389])}var Te=1.340264,Se=-.081106,Be=893e-6,Je=.003796,$e=(0,n._b)(3)/2,Xe=12;function Oe(hr,dr){var Lr=(0,n.ZR)($e*(0,n.O$)(dr)),Cr=Lr*Lr,Hr=Cr*Cr*Cr;return[hr*(0,n.mC)(Lr)/($e*(Te+3*Se*Cr+Hr*(7*Be+9*Je*Cr))),Lr*(Te+Se*Cr+Hr*(Be+Je*Cr))]}Oe.invert=function(hr,dr){for(var Lr=dr,Cr=Lr*Lr,Hr=Cr*Cr*Cr,sn=0,Yr,xn,wn;sn<Xe&&(xn=Lr*(Te+Se*Cr+Hr*(Be+Je*Cr))-dr,wn=Te+3*Se*Cr+Hr*(7*Be+9*Je*Cr),Lr-=Yr=xn/wn,Cr=Lr*Lr,Hr=Cr*Cr*Cr,!((0,n.Wn)(Yr)<n.aW));++sn);return[$e*hr*(Te+3*Se*Cr+Hr*(7*Be+9*Je*Cr))/(0,n.mC)(Lr),(0,n.ZR)((0,n.O$)(Lr)/$e)]};function ar(){return(0,Qe.Z)(Oe).scale(177.158)}var cr=t(98936),sr=t(64684);function lr(){var hr=1,dr=0,Lr=0,Cr=1,Hr=1,sn=0,Yr,xn,wn=null,Un,qn,ei,Gn=1,Hn=1,gr=(0,sr.l)({point:function(Mn,On){var Xn=mn([Mn,On]);this.stream.point(Xn[0],Xn[1])}}),$r=it.Z,Jr,ln;function zn(){return Gn=hr*Cr,Hn=hr*Hr,Jr=ln=null,mn}function mn(Mn){var On=Mn[0]*Gn,Xn=Mn[1]*Hn;if(sn){var gi=Xn*Yr-On*xn;On=On*Yr+Xn*xn,Xn=gi}return[On+dr,Xn+Lr]}return mn.invert=function(Mn){var On=Mn[0]-dr,Xn=Mn[1]-Lr;if(sn){var gi=Xn*Yr+On*xn;On=On*Yr-Xn*xn,Xn=gi}return[On/Gn,Xn/Hn]},mn.stream=function(Mn){return Jr&&ln===Mn?Jr:Jr=gr($r(ln=Mn))},mn.postclip=function(Mn){return arguments.length?($r=Mn,wn=Un=qn=ei=null,zn()):$r},mn.clipExtent=function(Mn){return arguments.length?($r=Mn==null?(wn=Un=qn=ei=null,it.Z):(0,v.Z)(wn=+Mn[0][0],Un=+Mn[0][1],qn=+Mn[1][0],ei=+Mn[1][1]),zn()):wn==null?null:[[wn,Un],[qn,ei]]},mn.scale=function(Mn){return arguments.length?(hr=+Mn,zn()):hr},mn.translate=function(Mn){return arguments.length?(dr=+Mn[0],Lr=+Mn[1],zn()):[dr,Lr]},mn.angle=function(Mn){return arguments.length?(sn=Mn%360*n.uR,xn=(0,n.O$)(sn),Yr=(0,n.mC)(sn),zn()):sn*n.RW},mn.reflectX=function(Mn){return arguments.length?(Cr=Mn?-1:1,zn()):Cr<0},mn.reflectY=function(Mn){return arguments.length?(Hr=Mn?-1:1,zn()):Hr<0},mn.fitExtent=function(Mn,On){return(0,tr.qg)(mn,Mn,On)},mn.fitSize=function(Mn,On){return(0,tr.mF)(mn,Mn,On)},mn.fitWidth=function(Mn,On){return(0,tr.V6)(mn,Mn,On)},mn.fitHeight=function(Mn,On){return(0,tr.rf)(mn,Mn,On)},mn}var Or=t(26867),Ir=t(57962),Pr=t(25382);function rn(hr,dr){var Lr=(0,n.mC)(dr),Cr=1+(0,n.mC)(hr)*Lr;return[Lr*(0,n.O$)(hr)/Cr,(0,n.O$)(dr)/Cr]}rn.invert=(0,Pr.O)(function(hr){return 2*(0,n.z4)(hr)});function Zr(){return(0,Qe.Z)(rn).scale(250).clipAngle(142)}function yn(hr,dr){return[(0,n.cM)((0,n.OR)((n.ou+dr)/2)),-hr]}yn.invert=function(hr,dr){return[-dr,2*(0,n.z4)((0,n.Qq)(hr))-n.ou]};function Tn(){var hr=ze(yn),dr=hr.center,Lr=hr.rotate;return hr.center=function(Cr){return arguments.length?dr([-Cr[1],Cr[0]]):(Cr=dr(),[Cr[1],-Cr[0]])},hr.rotate=function(Cr){return arguments.length?Lr([Cr[0],Cr[1],Cr.length>2?Cr[2]+90:90]):(Cr=Lr(),[Cr[0],Cr[1],Cr[2]-90])},Lr([0,0,90]).scale(159.155)}},83074:function($,U,t){t.d(U,{Z:function(){return E}});var M=t(39695);function E(i,S){var A=i[0]*M.uR,g=i[1]*M.uR,v=S[0]*M.uR,e=S[1]*M.uR,r=(0,M.mC)(g),f=(0,M.O$)(g),n=(0,M.mC)(e),a=(0,M.O$)(e),o=r*(0,M.mC)(A),h=r*(0,M.O$)(A),y=n*(0,M.mC)(v),p=n*(0,M.O$)(v),x=2*(0,M.ZR)((0,M._b)((0,M.Jy)(e-g)+r*n*(0,M.Jy)(v-A))),s=(0,M.O$)(x),u=x?function(c){var T=(0,M.O$)(c*=x)/s,k=(0,M.O$)(x-c)/s,_=k*o+T*y,b=k*h+T*p,P=k*f+T*a;return[(0,M.fv)(b,_)*M.RW,(0,M.fv)(P,(0,M._b)(_*_+b*b))*M.RW]}:function(){return[A*M.RW,g*M.RW]};return u.distance=x,u}},39695:function($,U,t){t.d(U,{BZ:function(){return g},Ho:function(){return M},Jy:function(){return _},Kh:function(){return T},O$:function(){return x},OR:function(){return c},Qq:function(){return h},RW:function(){return v},Wn:function(){return r},Xx:function(){return s},ZR:function(){return k},_b:function(){return u},aW:function(){return E},cM:function(){return y},fv:function(){return n},mC:function(){return a},mD:function(){return o},ou:function(){return S},pi:function(){return i},pu:function(){return A},sQ:function(){return p},uR:function(){return e},z4:function(){return f}});var M=1e-6,E=1e-12,i=Math.PI,S=i/2,A=i/4,g=i*2,v=180/i,e=i/180,r=Math.abs,f=Math.atan,n=Math.atan2,a=Math.cos,o=Math.ceil,h=Math.exp,y=Math.log,p=Math.pow,x=Math.sin,s=Math.sign||function(b){return b>0?1:b<0?-1:0},u=Math.sqrt,c=Math.tan;function T(b){return b>1?0:b<-1?i:Math.acos(b)}function k(b){return b>1?S:b<-1?-S:Math.asin(b)}function _(b){return(b=x(b/2))*b}},73182:function($,U,t){t.d(U,{Z:function(){return M}});function M(){}},3559:function($,U,t){var M=t(73182),E=1/0,i=E,S=-E,A=S,g={point:v,lineStart:M.Z,lineEnd:M.Z,polygonStart:M.Z,polygonEnd:M.Z,result:function(){var e=[[E,i],[S,A]];return S=A=-(i=E=1/0),e}};function v(e,r){e<E&&(E=e),e>S&&(S=e),r<i&&(i=r),r>A&&(A=r)}U.Z=g},67108:function($,U,t){t.d(U,{Z:function(){return E}});var M=t(39695);function E(i,S){return(0,M.Wn)(i[0]-S[0])<M.Ho&&(0,M.Wn)(i[1]-S[1])<M.Ho}},23071:function($,U,t){t.d(U,{Z:function(){return g}});var M=t(33940),E=t(7620),i=t(39695),S=(0,M.Z)();function A(v){return(0,i.Wn)(v[0])<=i.pi?v[0]:(0,i.Xx)(v[0])*(((0,i.Wn)(v[0])+i.pi)%i.BZ-i.pi)}function g(v,e){var r=A(e),f=e[1],n=(0,i.O$)(f),a=[(0,i.O$)(r),-(0,i.mC)(r),0],o=0,h=0;S.reset(),n===1?f=i.ou+i.Ho:n===-1&&(f=-i.ou-i.Ho);for(var y=0,p=v.length;y<p;++y)if(s=(x=v[y]).length)for(var x,s,u=x[s-1],c=A(u),T=u[1]/2+i.pu,k=(0,i.O$)(T),_=(0,i.mC)(T),b=0;b<s;++b,c=l,k=L,_=w,u=P){var P=x[b],l=A(P),d=P[1]/2+i.pu,L=(0,i.O$)(d),w=(0,i.mC)(d),I=l-c,z=I>=0?1:-1,B=z*I,O=B>i.pi,R=k*L;if(S.add((0,i.fv)(R*z*(0,i.O$)(B),_*w+R*(0,i.mC)(B))),o+=O?I+z*i.BZ:I,O^c>=r^l>=r){var C=(0,E.T5)((0,E.Og)(u),(0,E.Og)(P));(0,E.iJ)(C);var F=(0,E.T5)(a,C);(0,E.iJ)(F);var N=(O^I>=0?-1:1)*(0,i.ZR)(F[2]);(f>N||f===N&&(C[0]||C[1]))&&(h+=O^I>=0?1:-1)}}return(o<-i.Ho||o<i.Ho&&S<-i.Ho)^h&1}},25382:function($,U,t){t.d(U,{O:function(){return i},W:function(){return E}});var M=t(39695);function E(S){return function(A,g){var v=(0,M.mC)(A),e=(0,M.mC)(g),r=S(v*e);return[r*e*(0,M.O$)(A),r*(0,M.O$)(g)]}}function i(S){return function(A,g){var v=(0,M._b)(A*A+g*g),e=S(v),r=(0,M.O$)(e),f=(0,M.mC)(e);return[(0,M.fv)(A*r,v*f),(0,M.ZR)(v&&g*r/v)]}}},12956:function($,U,t){t.d(U,{Z:function(){return A},l:function(){return S}});var M=t(39695),E=t(25382),i=t(15002),S=(0,E.W)(function(g){return(0,M._b)(2/(1+g))});S.invert=(0,E.O)(function(g){return 2*(0,M.ZR)(g/2)});function A(){return(0,i.Z)(S).scale(124.75).clipAngle(179.999)}},17889:function($,U,t){t.d(U,{N:function(){return S},Z:function(){return A}});var M=t(39695),E=t(25382),i=t(15002),S=(0,E.W)(function(g){return(g=(0,M.Kh)(g))&&g/(0,M.O$)(g)});S.invert=(0,E.O)(function(g){return g});function A(){return(0,i.Z)(S).scale(79.4188).clipAngle(179.999)}},97492:function($,U,t){t.d(U,{Z:function(){return i},k:function(){return E}});var M=t(15002);function E(S,A){return[S,A]}E.invert=E;function i(){return(0,M.Z)(E).scale(152.63)}},47589:function($,U,t){t.d(U,{V6:function(){return g},mF:function(){return A},qg:function(){return S},rf:function(){return v}});var M=t(72736),E=t(3559);function i(e,r,f){var n=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),n!=null&&e.clipExtent(null),(0,M.Z)(f,e.stream(E.Z)),r(E.Z.result()),n!=null&&e.clipExtent(n),e}function S(e,r,f){return i(e,function(n){var a=r[1][0]-r[0][0],o=r[1][1]-r[0][1],h=Math.min(a/(n[1][0]-n[0][0]),o/(n[1][1]-n[0][1])),y=+r[0][0]+(a-h*(n[1][0]+n[0][0]))/2,p=+r[0][1]+(o-h*(n[1][1]+n[0][1]))/2;e.scale(150*h).translate([y,p])},f)}function A(e,r,f){return S(e,[[0,0],r],f)}function g(e,r,f){return i(e,function(n){var a=+r,o=a/(n[1][0]-n[0][0]),h=(a-o*(n[1][0]+n[0][0]))/2,y=-o*n[0][1];e.scale(150*o).translate([h,y])},f)}function v(e,r,f){return i(e,function(n){var a=+r,o=a/(n[1][1]-n[0][1]),h=-o*n[0][0],y=(a-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([h,y])},f)}},98936:function($,U,t){t.d(U,{M:function(){return S},Z:function(){return A}});var M=t(39695),E=t(25382),i=t(15002);function S(g,v){var e=(0,M.mC)(v),r=(0,M.mC)(g)*e;return[e*(0,M.O$)(g)/r,(0,M.O$)(v)/r]}S.invert=(0,E.O)(M.z4);function A(){return(0,i.Z)(S).scale(144.049).clipAngle(60)}},15002:function($,U,t){t.d(U,{Z:function(){return c},r:function(){return T}});var M=t(87070),E=t(1457),i=t(87605),S=t(96059),A=t(8593),g=t(39695),v=t(49386),e=t(64684),r=t(47589),f=t(7620),n=16,a=(0,g.mC)(30*g.uR);function o(k,_){return+_?y(k,_):h(k)}function h(k){return(0,e.l)({point:function(_,b){_=k(_,b),this.stream.point(_[0],_[1])}})}function y(k,_){function b(P,l,d,L,w,I,z,B,O,R,C,F,N,V){var K=z-P,Q=B-l,at=K*K+Q*Q;if(at>4*_&&N--){var it=L+R,q=w+C,W=I+F,Z=(0,g._b)(it*it+q*q+W*W),G=(0,g.ZR)(W/=Z),et=(0,g.Wn)((0,g.Wn)(W)-1)<g.Ho||(0,g.Wn)(d-O)<g.Ho?(d+O)/2:(0,g.fv)(q,it),nt=k(et,G),X=nt[0],Y=nt[1],ot=X-P,rt=Y-l,ht=Q*ot-K*rt;(ht*ht/at>_||(0,g.Wn)((K*ot+Q*rt)/at-.5)>.3||L*R+w*C+I*F<a)&&(b(P,l,d,L,w,I,X,Y,et,it/=Z,q/=Z,W,N,V),V.point(X,Y),b(X,Y,et,it,q,W,z,B,O,R,C,F,N,V))}}return function(P){var l,d,L,w,I,z,B,O,R,C,F,N,V={point:K,lineStart:Q,lineEnd:it,polygonStart:function(){P.polygonStart(),V.lineStart=q},polygonEnd:function(){P.polygonEnd(),V.lineStart=Q}};function K(G,et){G=k(G,et),P.point(G[0],G[1])}function Q(){O=NaN,V.point=at,P.lineStart()}function at(G,et){var nt=(0,f.Og)([G,et]),X=k(G,et);b(O,R,B,C,F,N,O=X[0],R=X[1],B=G,C=nt[0],F=nt[1],N=nt[2],n,P),P.point(O,R)}function it(){V.point=K,P.lineEnd()}function q(){Q(),V.point=W,V.lineEnd=Z}function W(G,et){at(l=G,et),d=O,L=R,w=C,I=F,z=N,V.point=at}function Z(){b(O,R,B,C,F,N,d,L,l,w,I,z,n,P),V.lineEnd=it,it()}return V}}var p=(0,e.l)({point:function(k,_){this.stream.point(k*g.uR,_*g.uR)}});function x(k){return(0,e.l)({point:function(_,b){var P=k(_,b);return this.stream.point(P[0],P[1])}})}function s(k,_,b,P,l){function d(L,w){return L*=P,w*=l,[_+k*L,b-k*w]}return d.invert=function(L,w){return[(L-_)/k*P,(b-w)/k*l]},d}function u(k,_,b,P,l,d){var L=(0,g.mC)(d),w=(0,g.O$)(d),I=L*k,z=w*k,B=L/k,O=w/k,R=(w*b-L*_)/k,C=(w*_+L*b)/k;function F(N,V){return N*=P,V*=l,[I*N-z*V+_,b-z*N-I*V]}return F.invert=function(N,V){return[P*(B*N-O*V+R),l*(C-O*N-B*V)]},F}function c(k){return T(function(){return k})()}function T(k){var _,b=150,P=480,l=250,d=0,L=0,w=0,I=0,z=0,B,O=0,R=1,C=1,F=null,N=M.Z,V=null,K,Q,at,it=A.Z,q=.5,W,Z,G,et,nt;function X(ht){return G(ht[0]*g.uR,ht[1]*g.uR)}function Y(ht){return ht=G.invert(ht[0],ht[1]),ht&&[ht[0]*g.RW,ht[1]*g.RW]}X.stream=function(ht){return et&&nt===ht?et:et=p(x(B)(N(W(it(nt=ht)))))},X.preclip=function(ht){return arguments.length?(N=ht,F=void 0,rt()):N},X.postclip=function(ht){return arguments.length?(it=ht,V=K=Q=at=null,rt()):it},X.clipAngle=function(ht){return arguments.length?(N=+ht?(0,E.Z)(F=ht*g.uR):(F=null,M.Z),rt()):F*g.RW},X.clipExtent=function(ht){return arguments.length?(it=ht==null?(V=K=Q=at=null,A.Z):(0,i.Z)(V=+ht[0][0],K=+ht[0][1],Q=+ht[1][0],at=+ht[1][1]),rt()):V==null?null:[[V,K],[Q,at]]},X.scale=function(ht){return arguments.length?(b=+ht,ot()):b},X.translate=function(ht){return arguments.length?(P=+ht[0],l=+ht[1],ot()):[P,l]},X.center=function(ht){return arguments.length?(d=ht[0]%360*g.uR,L=ht[1]%360*g.uR,ot()):[d*g.RW,L*g.RW]},X.rotate=function(ht){return arguments.length?(w=ht[0]%360*g.uR,I=ht[1]%360*g.uR,z=ht.length>2?ht[2]%360*g.uR:0,ot()):[w*g.RW,I*g.RW,z*g.RW]},X.angle=function(ht){return arguments.length?(O=ht%360*g.uR,ot()):O*g.RW},X.reflectX=function(ht){return arguments.length?(R=ht?-1:1,ot()):R<0},X.reflectY=function(ht){return arguments.length?(C=ht?-1:1,ot()):C<0},X.precision=function(ht){return arguments.length?(W=o(Z,q=ht*ht),rt()):(0,g._b)(q)},X.fitExtent=function(ht,pt){return(0,r.qg)(X,ht,pt)},X.fitSize=function(ht,pt){return(0,r.mF)(X,ht,pt)},X.fitWidth=function(ht,pt){return(0,r.V6)(X,ht,pt)},X.fitHeight=function(ht,pt){return(0,r.rf)(X,ht,pt)};function ot(){var ht=u(b,0,0,R,C,O).apply(null,_(d,L)),pt=(O?u:s)(b,P-ht[0],l-ht[1],R,C,O);return B=(0,v.I)(w,I,z),Z=(0,S.Z)(_,pt),G=(0,S.Z)(B,Z),W=o(Z,q),rt()}function rt(){return et=nt=null,X}return function(){return _=k.apply(this,arguments),X.invert=_.invert&&Y,ot()}}},26867:function($,U,t){t.d(U,{K:function(){return i},Z:function(){return S}});var M=t(15002),E=t(39695);function i(A,g){var v=g*g,e=v*v;return[A*(.8707-.131979*v+e*(-.013791+e*(.003971*v-.001529*e))),g*(1.007226+v*(.015085+e*(-.044475+.028874*v-.005916*e)))]}i.invert=function(A,g){var v=g,e=25,r;do{var f=v*v,n=f*f;v-=r=(v*(1.007226+f*(.015085+n*(-.044475+.028874*f-.005916*n)))-g)/(1.007226+f*(.045255+n*(-.311325+.259866*f-.06507600000000001*n)))}while((0,E.Wn)(r)>E.Ho&&--e>0);return[A/(.8707+(f=v*v)*(-.131979+f*(-.013791+f*f*f*(.003971-.001529*f)))),v]};function S(){return(0,M.Z)(i).scale(175.295)}},57962:function($,U,t){t.d(U,{I:function(){return S},Z:function(){return A}});var M=t(39695),E=t(25382),i=t(15002);function S(g,v){return[(0,M.mC)(v)*(0,M.O$)(g),(0,M.O$)(v)]}S.invert=(0,E.O)(M.ZR);function A(){return(0,i.Z)(S).scale(249.5).clipAngle(90+M.Ho)}},49386:function($,U,t){t.d(U,{I:function(){return S},Z:function(){return e}});var M=t(96059),E=t(39695);function i(r,f){return[(0,E.Wn)(r)>E.pi?r+Math.round(-r/E.BZ)*E.BZ:r,f]}i.invert=i;function S(r,f,n){return(r%=E.BZ)?f||n?(0,M.Z)(g(r),v(f,n)):g(r):f||n?v(f,n):i}function A(r){return function(f,n){return f+=r,[f>E.pi?f-E.BZ:f<-E.pi?f+E.BZ:f,n]}}function g(r){var f=A(r);return f.invert=A(-r),f}function v(r,f){var n=(0,E.mC)(r),a=(0,E.O$)(r),o=(0,E.mC)(f),h=(0,E.O$)(f);function y(p,x){var s=(0,E.mC)(x),u=(0,E.mC)(p)*s,c=(0,E.O$)(p)*s,T=(0,E.O$)(x),k=T*n+u*a;return[(0,E.fv)(c*o-k*h,u*n-T*a),(0,E.ZR)(k*o+c*h)]}return y.invert=function(p,x){var s=(0,E.mC)(x),u=(0,E.mC)(p)*s,c=(0,E.O$)(p)*s,T=(0,E.O$)(x),k=T*o-c*h;return[(0,E.fv)(c*o+T*h,u*n+k*a),(0,E.ZR)(k*n-u*a)]},y}function e(r){r=S(r[0]*E.uR,r[1]*E.uR,r.length>2?r[2]*E.uR:0);function f(n){return n=r(n[0]*E.uR,n[1]*E.uR),n[0]*=E.RW,n[1]*=E.RW,n}return f.invert=function(n){return n=r.invert(n[0]*E.uR,n[1]*E.uR),n[0]*=E.RW,n[1]*=E.RW,n},f}},72736:function($,U,t){t.d(U,{Z:function(){return g}});function M(v,e){v&&i.hasOwnProperty(v.type)&&i[v.type](v,e)}var E={Feature:function(v,e){M(v.geometry,e)},FeatureCollection:function(v,e){for(var r=v.features,f=-1,n=r.length;++f<n;)M(r[f].geometry,e)}},i={Sphere:function(v,e){e.sphere()},Point:function(v,e){v=v.coordinates,e.point(v[0],v[1],v[2])},MultiPoint:function(v,e){for(var r=v.coordinates,f=-1,n=r.length;++f<n;)v=r[f],e.point(v[0],v[1],v[2])},LineString:function(v,e){S(v.coordinates,e,0)},MultiLineString:function(v,e){for(var r=v.coordinates,f=-1,n=r.length;++f<n;)S(r[f],e,0)},Polygon:function(v,e){A(v.coordinates,e)},MultiPolygon:function(v,e){for(var r=v.coordinates,f=-1,n=r.length;++f<n;)A(r[f],e)},GeometryCollection:function(v,e){for(var r=v.geometries,f=-1,n=r.length;++f<n;)M(r[f],e)}};function S(v,e,r){var f=-1,n=v.length-r,a;for(e.lineStart();++f<n;)a=v[f],e.point(a[0],a[1],a[2]);e.lineEnd()}function A(v,e){var r=-1,f=v.length;for(e.polygonStart();++r<f;)S(v[r],e,1);e.polygonEnd()}function g(v,e){v&&E.hasOwnProperty(v.type)?E[v.type](v,e):M(v,e)}},64684:function($,U,t){t.d(U,{Z:function(){return M},l:function(){return E}});function M(S){return{stream:E(S)}}function E(S){return function(A){var g=new i;for(var v in S)g[v]=S[v];return g.stream=A,g}}function i(){}i.prototype={constructor:i,point:function(S,A){this.stream.point(S,A)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},674:function($,U,t){t.r(U),t.d(U,{cluster:function(){return e},hierarchy:function(){return k},pack:function(){return Y},packEnclose:function(){return I},packSiblings:function(){return W},partition:function(){return xt},stratify:function(){return Pt},tree:function(){return le},treemap:function(){return Mt},treemapBinary:function(){return It},treemapDice:function(){return yt},treemapResquarify:function(){return zt},treemapSlice:function(){return ce},treemapSliceDice:function(){return Rt},treemapSquarify:function(){return ve}});function M(Tt,ft){return Tt.parent===ft.parent?1:2}function E(Tt){return Tt.reduce(i,0)/Tt.length}function i(Tt,ft){return Tt+ft.x}function S(Tt){return 1+Tt.reduce(A,0)}function A(Tt,ft){return Math.max(Tt,ft.y)}function g(Tt){for(var ft;ft=Tt.children;)Tt=ft[0];return Tt}function v(Tt){for(var ft;ft=Tt.children;)Tt=ft[ft.length-1];return Tt}function e(){var Tt=M,ft=1,ut=1,vt=!1;function St(Ot){var Xt,$t=0;Ot.eachAfter(function(Ae){var Ve=Ae.children;Ve?(Ae.x=E(Ve),Ae.y=S(Ve)):(Ae.x=Xt?$t+=Tt(Ae,Xt):0,Ae.y=0,Xt=Ae)});var de=g(Ot),Me=v(Ot),Fe=de.x-Tt(de,Me)/2,De=Me.x+Tt(Me,de)/2;return Ot.eachAfter(vt?function(Ae){Ae.x=(Ae.x-Ot.x)*ft,Ae.y=(Ot.y-Ae.y)*ut}:function(Ae){Ae.x=(Ae.x-Fe)/(De-Fe)*ft,Ae.y=(1-(Ot.y?Ae.y/Ot.y:1))*ut})}return St.separation=function(Ot){return arguments.length?(Tt=Ot,St):Tt},St.size=function(Ot){return arguments.length?(vt=!1,ft=+Ot[0],ut=+Ot[1],St):vt?null:[ft,ut]},St.nodeSize=function(Ot){return arguments.length?(vt=!0,ft=+Ot[0],ut=+Ot[1],St):vt?[ft,ut]:null},St}function r(Tt){var ft=0,ut=Tt.children,vt=ut&&ut.length;if(!vt)ft=1;else for(;--vt>=0;)ft+=ut[vt].value;Tt.value=ft}function f(){return this.eachAfter(r)}function n(Tt){var ft=this,ut,vt=[ft],St,Ot,Xt;do for(ut=vt.reverse(),vt=[];ft=ut.pop();)if(Tt(ft),St=ft.children,St)for(Ot=0,Xt=St.length;Ot<Xt;++Ot)vt.push(St[Ot]);while(vt.length);return this}function a(Tt){for(var ft=this,ut=[ft],vt,St;ft=ut.pop();)if(Tt(ft),vt=ft.children,vt)for(St=vt.length-1;St>=0;--St)ut.push(vt[St]);return this}function o(Tt){for(var ft=this,ut=[ft],vt=[],St,Ot,Xt;ft=ut.pop();)if(vt.push(ft),St=ft.children,St)for(Ot=0,Xt=St.length;Ot<Xt;++Ot)ut.push(St[Ot]);for(;ft=vt.pop();)Tt(ft);return this}function h(Tt){return this.eachAfter(function(ft){for(var ut=+Tt(ft.data)||0,vt=ft.children,St=vt&&vt.length;--St>=0;)ut+=vt[St].value;ft.value=ut})}function y(Tt){return this.eachBefore(function(ft){ft.children&&ft.children.sort(Tt)})}function p(Tt){for(var ft=this,ut=x(ft,Tt),vt=[ft];ft!==ut;)ft=ft.parent,vt.push(ft);for(var St=vt.length;Tt!==ut;)vt.splice(St,0,Tt),Tt=Tt.parent;return vt}function x(Tt,ft){if(Tt===ft)return Tt;var ut=Tt.ancestors(),vt=ft.ancestors(),St=null;for(Tt=ut.pop(),ft=vt.pop();Tt===ft;)St=Tt,Tt=ut.pop(),ft=vt.pop();return St}function s(){for(var Tt=this,ft=[Tt];Tt=Tt.parent;)ft.push(Tt);return ft}function u(){var Tt=[];return this.each(function(ft){Tt.push(ft)}),Tt}function c(){var Tt=[];return this.eachBefore(function(ft){ft.children||Tt.push(ft)}),Tt}function T(){var Tt=this,ft=[];return Tt.each(function(ut){ut!==Tt&&ft.push({source:ut.parent,target:ut})}),ft}function k(Tt,ft){var ut=new d(Tt),vt=+Tt.value&&(ut.value=Tt.value),St,Ot=[ut],Xt,$t,de,Me;for(ft==null&&(ft=b);St=Ot.pop();)if(vt&&(St.value=+St.data.value),($t=ft(St.data))&&(Me=$t.length))for(St.children=new Array(Me),de=Me-1;de>=0;--de)Ot.push(Xt=St.children[de]=new d($t[de])),Xt.parent=St,Xt.depth=St.depth+1;return ut.eachBefore(l)}function _(){return k(this).eachBefore(P)}function b(Tt){return Tt.children}function P(Tt){Tt.data=Tt.data.data}function l(Tt){var ft=0;do Tt.height=ft;while((Tt=Tt.parent)&&Tt.height<++ft)}function d(Tt){this.data=Tt,this.depth=this.height=0,this.parent=null}d.prototype=k.prototype={constructor:d,count:f,each:n,eachAfter:o,eachBefore:a,sum:h,sort:y,path:p,ancestors:s,descendants:u,leaves:c,links:T,copy:_};var L=Array.prototype.slice;function w(Tt){for(var ft=Tt.length,ut,vt;ft;)vt=Math.random()*ft--|0,ut=Tt[ft],Tt[ft]=Tt[vt],Tt[vt]=ut;return Tt}function I(Tt){for(var ft=0,ut=(Tt=w(L.call(Tt))).length,vt=[],St,Ot;ft<ut;)St=Tt[ft],Ot&&O(Ot,St)?++ft:(Ot=C(vt=z(vt,St)),ft=0);return Ot}function z(Tt,ft){var ut,vt;if(R(ft,Tt))return[ft];for(ut=0;ut<Tt.length;++ut)if(B(ft,Tt[ut])&&R(N(Tt[ut],ft),Tt))return[Tt[ut],ft];for(ut=0;ut<Tt.length-1;++ut)for(vt=ut+1;vt<Tt.length;++vt)if(B(N(Tt[ut],Tt[vt]),ft)&&B(N(Tt[ut],ft),Tt[vt])&&B(N(Tt[vt],ft),Tt[ut])&&R(V(Tt[ut],Tt[vt],ft),Tt))return[Tt[ut],Tt[vt],ft];throw new Error}function B(Tt,ft){var ut=Tt.r-ft.r,vt=ft.x-Tt.x,St=ft.y-Tt.y;return ut<0||ut*ut<vt*vt+St*St}function O(Tt,ft){var ut=Tt.r-ft.r+1e-6,vt=ft.x-Tt.x,St=ft.y-Tt.y;return ut>0&&ut*ut>vt*vt+St*St}function R(Tt,ft){for(var ut=0;ut<ft.length;++ut)if(!O(Tt,ft[ut]))return!1;return!0}function C(Tt){switch(Tt.length){case 1:return F(Tt[0]);case 2:return N(Tt[0],Tt[1]);case 3:return V(Tt[0],Tt[1],Tt[2])}}function F(Tt){return{x:Tt.x,y:Tt.y,r:Tt.r}}function N(Tt,ft){var ut=Tt.x,vt=Tt.y,St=Tt.r,Ot=ft.x,Xt=ft.y,$t=ft.r,de=Ot-ut,Me=Xt-vt,Fe=$t-St,De=Math.sqrt(de*de+Me*Me);return{x:(ut+Ot+de/De*Fe)/2,y:(vt+Xt+Me/De*Fe)/2,r:(De+St+$t)/2}}function V(Tt,ft,ut){var vt=Tt.x,St=Tt.y,Ot=Tt.r,Xt=ft.x,$t=ft.y,de=ft.r,Me=ut.x,Fe=ut.y,De=ut.r,Ae=vt-Xt,Ve=vt-Me,Qe=St-$t,Sr=St-Fe,he=de-Ot,je=De-Ot,Re=vt*vt+St*St-Ot*Ot,_r=Re-Xt*Xt-$t*$t+de*de,tr=Re-Me*Me-Fe*Fe+De*De,Gt=Ve*Qe-Ae*Sr,re=(Qe*tr-Sr*_r)/(Gt*2)-vt,fe=(Sr*he-Qe*je)/Gt,ye=(Ve*_r-Ae*tr)/(Gt*2)-St,Le=(Ae*je-Ve*he)/Gt,_e=fe*fe+Le*Le-1,Ce=2*(Ot+re*fe+ye*Le),ze=re*re+ye*ye-Ot*Ot,We=-(_e?(Ce+Math.sqrt(Ce*Ce-4*_e*ze))/(2*_e):ze/Ce);return{x:vt+re+fe*We,y:St+ye+Le*We,r:We}}function K(Tt,ft,ut){var vt=Tt.x-ft.x,St,Ot,Xt=Tt.y-ft.y,$t,de,Me=vt*vt+Xt*Xt;Me?(Ot=ft.r+ut.r,Ot*=Ot,de=Tt.r+ut.r,de*=de,Ot>de?(St=(Me+de-Ot)/(2*Me),$t=Math.sqrt(Math.max(0,de/Me-St*St)),ut.x=Tt.x-St*vt-$t*Xt,ut.y=Tt.y-St*Xt+$t*vt):(St=(Me+Ot-de)/(2*Me),$t=Math.sqrt(Math.max(0,Ot/Me-St*St)),ut.x=ft.x+St*vt-$t*Xt,ut.y=ft.y+St*Xt+$t*vt)):(ut.x=ft.x+ut.r,ut.y=ft.y)}function Q(Tt,ft){var ut=Tt.r+ft.r-1e-6,vt=ft.x-Tt.x,St=ft.y-Tt.y;return ut>0&&ut*ut>vt*vt+St*St}function at(Tt){var ft=Tt._,ut=Tt.next._,vt=ft.r+ut.r,St=(ft.x*ut.r+ut.x*ft.r)/vt,Ot=(ft.y*ut.r+ut.y*ft.r)/vt;return St*St+Ot*Ot}function it(Tt){this._=Tt,this.next=null,this.previous=null}function q(Tt){if(!(St=Tt.length))return 0;var ft,ut,vt,St,Ot,Xt,$t,de,Me,Fe,De;if(ft=Tt[0],ft.x=0,ft.y=0,!(St>1))return ft.r;if(ut=Tt[1],ft.x=-ut.r,ut.x=ft.r,ut.y=0,!(St>2))return ft.r+ut.r;K(ut,ft,vt=Tt[2]),ft=new it(ft),ut=new it(ut),vt=new it(vt),ft.next=vt.previous=ut,ut.next=ft.previous=vt,vt.next=ut.previous=ft;t:for($t=3;$t<St;++$t){K(ft._,ut._,vt=Tt[$t]),vt=new it(vt),de=ut.next,Me=ft.previous,Fe=ut._.r,De=ft._.r;do if(Fe<=De){if(Q(de._,vt._)){ut=de,ft.next=ut,ut.previous=ft,--$t;continue t}Fe+=de._.r,de=de.next}else{if(Q(Me._,vt._)){ft=Me,ft.next=ut,ut.previous=ft,--$t;continue t}De+=Me._.r,Me=Me.previous}while(de!==Me.next);for(vt.previous=ft,vt.next=ut,ft.next=ut.previous=ut=vt,Ot=at(ft);(vt=vt.next)!==ut;)(Xt=at(vt))<Ot&&(ft=vt,Ot=Xt);ut=ft.next}for(ft=[ut._],vt=ut;(vt=vt.next)!==ut;)ft.push(vt._);for(vt=I(ft),$t=0;$t<St;++$t)ft=Tt[$t],ft.x-=vt.x,ft.y-=vt.y;return vt.r}function W(Tt){return q(Tt),Tt}function Z(Tt){return Tt==null?null:G(Tt)}function G(Tt){if(typeof Tt!="function")throw new Error;return Tt}function et(){return 0}function nt(Tt){return function(){return Tt}}function X(Tt){return Math.sqrt(Tt.value)}function Y(){var Tt=null,ft=1,ut=1,vt=et;function St(Ot){return Ot.x=ft/2,Ot.y=ut/2,Tt?Ot.eachBefore(ot(Tt)).eachAfter(rt(vt,.5)).eachBefore(ht(1)):Ot.eachBefore(ot(X)).eachAfter(rt(et,1)).eachAfter(rt(vt,Ot.r/Math.min(ft,ut))).eachBefore(ht(Math.min(ft,ut)/(2*Ot.r))),Ot}return St.radius=function(Ot){return arguments.length?(Tt=Z(Ot),St):Tt},St.size=function(Ot){return arguments.length?(ft=+Ot[0],ut=+Ot[1],St):[ft,ut]},St.padding=function(Ot){return arguments.length?(vt=typeof Ot=="function"?Ot:nt(+Ot),St):vt},St}function ot(Tt){return function(ft){ft.children||(ft.r=Math.max(0,+Tt(ft)||0))}}function rt(Tt,ft){return function(ut){if(vt=ut.children){var vt,St,Ot=vt.length,Xt=Tt(ut)*ft||0,$t;if(Xt)for(St=0;St<Ot;++St)vt[St].r+=Xt;if($t=q(vt),Xt)for(St=0;St<Ot;++St)vt[St].r-=Xt;ut.r=$t+Xt}}}function ht(Tt){return function(ft){var ut=ft.parent;ft.r*=Tt,ut&&(ft.x=ut.x+Tt*ft.x,ft.y=ut.y+Tt*ft.y)}}function pt(Tt){Tt.x0=Math.round(Tt.x0),Tt.y0=Math.round(Tt.y0),Tt.x1=Math.round(Tt.x1),Tt.y1=Math.round(Tt.y1)}function yt(Tt,ft,ut,vt,St){for(var Ot=Tt.children,Xt,$t=-1,de=Ot.length,Me=Tt.value&&(vt-ft)/Tt.value;++$t<de;)Xt=Ot[$t],Xt.y0=ut,Xt.y1=St,Xt.x0=ft,Xt.x1=ft+=Xt.value*Me}function xt(){var Tt=1,ft=1,ut=0,vt=!1;function St(Xt){var $t=Xt.height+1;return Xt.x0=Xt.y0=ut,Xt.x1=Tt,Xt.y1=ft/$t,Xt.eachBefore(Ot(ft,$t)),vt&&Xt.eachBefore(pt),Xt}function Ot(Xt,$t){return function(de){de.children&&yt(de,de.x0,Xt*(de.depth+1)/$t,de.x1,Xt*(de.depth+2)/$t);var Me=de.x0,Fe=de.y0,De=de.x1-ut,Ae=de.y1-ut;De<Me&&(Me=De=(Me+De)/2),Ae<Fe&&(Fe=Ae=(Fe+Ae)/2),de.x0=Me,de.y0=Fe,de.x1=De,de.y1=Ae}}return St.round=function(Xt){return arguments.length?(vt=!!Xt,St):vt},St.size=function(Xt){return arguments.length?(Tt=+Xt[0],ft=+Xt[1],St):[Tt,ft]},St.padding=function(Xt){return arguments.length?(ut=+Xt,St):ut},St}var Ft="$",Et={depth:-1},mt={};function gt(Tt){return Tt.id}function wt(Tt){return Tt.parentId}function Pt(){var Tt=gt,ft=wt;function ut(vt){var St,Ot,Xt=vt.length,$t,de,Me,Fe=new Array(Xt),De,Ae,Ve={};for(Ot=0;Ot<Xt;++Ot)St=vt[Ot],Me=Fe[Ot]=new d(St),(De=Tt(St,Ot,vt))!=null&&(De+="")&&(Ae=Ft+(Me.id=De),Ve[Ae]=Ae in Ve?mt:Me);for(Ot=0;Ot<Xt;++Ot)if(Me=Fe[Ot],De=ft(vt[Ot],Ot,vt),De==null||!(De+="")){if($t)throw new Error("multiple roots");$t=Me}else{if(de=Ve[Ft+De],!de)throw new Error("missing: "+De);if(de===mt)throw new Error("ambiguous: "+De);de.children?de.children.push(Me):de.children=[Me],Me.parent=de}if(!$t)throw new Error("no root");if($t.parent=Et,$t.eachBefore(function(Qe){Qe.depth=Qe.parent.depth+1,--Xt}).eachBefore(l),$t.parent=null,Xt>0)throw new Error("cycle");return $t}return ut.id=function(vt){return arguments.length?(Tt=G(vt),ut):Tt},ut.parentId=function(vt){return arguments.length?(ft=G(vt),ut):ft},ut}function Bt(Tt,ft){return Tt.parent===ft.parent?1:2}function kt(Tt){var ft=Tt.children;return ft?ft[0]:Tt.t}function jt(Tt){var ft=Tt.children;return ft?ft[ft.length-1]:Tt.t}function Ht(Tt,ft,ut){var vt=ut/(ft.i-Tt.i);ft.c-=vt,ft.s+=ut,Tt.c+=vt,ft.z+=ut,ft.m+=ut}function Vt(Tt){for(var ft=0,ut=0,vt=Tt.children,St=vt.length,Ot;--St>=0;)Ot=vt[St],Ot.z+=ft,Ot.m+=ft,ft+=Ot.s+(ut+=Ot.c)}function ee(Tt,ft,ut){return Tt.a.parent===ft.parent?Tt.a:ut}function te(Tt,ft){this._=Tt,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=ft}te.prototype=Object.create(d.prototype);function ae(Tt){for(var ft=new te(Tt,0),ut,vt=[ft],St,Ot,Xt,$t;ut=vt.pop();)if(Ot=ut._.children)for(ut.children=new Array($t=Ot.length),Xt=$t-1;Xt>=0;--Xt)vt.push(St=ut.children[Xt]=new te(Ot[Xt],Xt)),St.parent=ut;return(ft.parent=new te(null,0)).children=[ft],ft}function le(){var Tt=Bt,ft=1,ut=1,vt=null;function St(Me){var Fe=ae(Me);if(Fe.eachAfter(Ot),Fe.parent.m=-Fe.z,Fe.eachBefore(Xt),vt)Me.eachBefore(de);else{var De=Me,Ae=Me,Ve=Me;Me.eachBefore(function(Re){Re.x<De.x&&(De=Re),Re.x>Ae.x&&(Ae=Re),Re.depth>Ve.depth&&(Ve=Re)});var Qe=De===Ae?1:Tt(De,Ae)/2,Sr=Qe-De.x,he=ft/(Ae.x+Qe+Sr),je=ut/(Ve.depth||1);Me.eachBefore(function(Re){Re.x=(Re.x+Sr)*he,Re.y=Re.depth*je})}return Me}function Ot(Me){var Fe=Me.children,De=Me.parent.children,Ae=Me.i?De[Me.i-1]:null;if(Fe){Vt(Me);var Ve=(Fe[0].z+Fe[Fe.length-1].z)/2;Ae?(Me.z=Ae.z+Tt(Me._,Ae._),Me.m=Me.z-Ve):Me.z=Ve}else Ae&&(Me.z=Ae.z+Tt(Me._,Ae._));Me.parent.A=$t(Me,Ae,Me.parent.A||De[0])}function Xt(Me){Me._.x=Me.z+Me.parent.m,Me.m+=Me.parent.m}function $t(Me,Fe,De){if(Fe){for(var Ae=Me,Ve=Me,Qe=Fe,Sr=Ae.parent.children[0],he=Ae.m,je=Ve.m,Re=Qe.m,_r=Sr.m,tr;Qe=jt(Qe),Ae=kt(Ae),Qe&&Ae;)Sr=kt(Sr),Ve=jt(Ve),Ve.a=Me,tr=Qe.z+Re-Ae.z-he+Tt(Qe._,Ae._),tr>0&&(Ht(ee(Qe,Me,De),Me,tr),he+=tr,je+=tr),Re+=Qe.m,he+=Ae.m,_r+=Sr.m,je+=Ve.m;Qe&&!jt(Ve)&&(Ve.t=Qe,Ve.m+=Re-je),Ae&&!kt(Sr)&&(Sr.t=Ae,Sr.m+=he-_r,De=Me)}return De}function de(Me){Me.x*=ft,Me.y=Me.depth*ut}return St.separation=function(Me){return arguments.length?(Tt=Me,St):Tt},St.size=function(Me){return arguments.length?(vt=!1,ft=+Me[0],ut=+Me[1],St):vt?null:[ft,ut]},St.nodeSize=function(Me){return arguments.length?(vt=!0,ft=+Me[0],ut=+Me[1],St):vt?[ft,ut]:null},St}function ce(Tt,ft,ut,vt,St){for(var Ot=Tt.children,Xt,$t=-1,de=Ot.length,Me=Tt.value&&(St-ut)/Tt.value;++$t<de;)Xt=Ot[$t],Xt.x0=ft,Xt.x1=vt,Xt.y0=ut,Xt.y1=ut+=Xt.value*Me}var pe=(1+Math.sqrt(5))/2;function we(Tt,ft,ut,vt,St,Ot){for(var Xt=[],$t=ft.children,de,Me,Fe=0,De=0,Ae=$t.length,Ve,Qe,Sr=ft.value,he,je,Re,_r,tr,Gt,re;Fe<Ae;){Ve=St-ut,Qe=Ot-vt;do he=$t[De++].value;while(!he&&De<Ae);for(je=Re=he,Gt=Math.max(Qe/Ve,Ve/Qe)/(Sr*Tt),re=he*he*Gt,tr=Math.max(Re/re,re/je);De<Ae;++De){if(he+=Me=$t[De].value,Me<je&&(je=Me),Me>Re&&(Re=Me),re=he*he*Gt,_r=Math.max(Re/re,re/je),_r>tr){he-=Me;break}tr=_r}Xt.push(de={value:he,dice:Ve<Qe,children:$t.slice(Fe,De)}),de.dice?yt(de,ut,vt,St,Sr?vt+=Qe*he/Sr:Ot):ce(de,ut,vt,Sr?ut+=Ve*he/Sr:St,Ot),Sr-=he,Fe=De}return Xt}var ve=function Tt(ft){function ut(vt,St,Ot,Xt,$t){we(ft,vt,St,Ot,Xt,$t)}return ut.ratio=function(vt){return Tt((vt=+vt)>1?vt:1)},ut}(pe);function Mt(){var Tt=ve,ft=!1,ut=1,vt=1,St=[0],Ot=et,Xt=et,$t=et,de=et,Me=et;function Fe(Ae){return Ae.x0=Ae.y0=0,Ae.x1=ut,Ae.y1=vt,Ae.eachBefore(De),St=[0],ft&&Ae.eachBefore(pt),Ae}function De(Ae){var Ve=St[Ae.depth],Qe=Ae.x0+Ve,Sr=Ae.y0+Ve,he=Ae.x1-Ve,je=Ae.y1-Ve;he<Qe&&(Qe=he=(Qe+he)/2),je<Sr&&(Sr=je=(Sr+je)/2),Ae.x0=Qe,Ae.y0=Sr,Ae.x1=he,Ae.y1=je,Ae.children&&(Ve=St[Ae.depth+1]=Ot(Ae)/2,Qe+=Me(Ae)-Ve,Sr+=Xt(Ae)-Ve,he-=$t(Ae)-Ve,je-=de(Ae)-Ve,he<Qe&&(Qe=he=(Qe+he)/2),je<Sr&&(Sr=je=(Sr+je)/2),Tt(Ae,Qe,Sr,he,je))}return Fe.round=function(Ae){return arguments.length?(ft=!!Ae,Fe):ft},Fe.size=function(Ae){return arguments.length?(ut=+Ae[0],vt=+Ae[1],Fe):[ut,vt]},Fe.tile=function(Ae){return arguments.length?(Tt=G(Ae),Fe):Tt},Fe.padding=function(Ae){return arguments.length?Fe.paddingInner(Ae).paddingOuter(Ae):Fe.paddingInner()},Fe.paddingInner=function(Ae){return arguments.length?(Ot=typeof Ae=="function"?Ae:nt(+Ae),Fe):Ot},Fe.paddingOuter=function(Ae){return arguments.length?Fe.paddingTop(Ae).paddingRight(Ae).paddingBottom(Ae).paddingLeft(Ae):Fe.paddingTop()},Fe.paddingTop=function(Ae){return arguments.length?(Xt=typeof Ae=="function"?Ae:nt(+Ae),Fe):Xt},Fe.paddingRight=function(Ae){return arguments.length?($t=typeof Ae=="function"?Ae:nt(+Ae),Fe):$t},Fe.paddingBottom=function(Ae){return arguments.length?(de=typeof Ae=="function"?Ae:nt(+Ae),Fe):de},Fe.paddingLeft=function(Ae){return arguments.length?(Me=typeof Ae=="function"?Ae:nt(+Ae),Fe):Me},Fe}function It(Tt,ft,ut,vt,St){var Ot=Tt.children,Xt,$t=Ot.length,de,Me=new Array($t+1);for(Me[0]=de=Xt=0;Xt<$t;++Xt)Me[Xt+1]=de+=Ot[Xt].value;Fe(0,$t,Tt.value,ft,ut,vt,St);function Fe(De,Ae,Ve,Qe,Sr,he,je){if(De>=Ae-1){var Re=Ot[De];Re.x0=Qe,Re.y0=Sr,Re.x1=he,Re.y1=je;return}for(var _r=Me[De],tr=Ve/2+_r,Gt=De+1,re=Ae-1;Gt<re;){var fe=Gt+re>>>1;Me[fe]<tr?Gt=fe+1:re=fe}tr-Me[Gt-1]<Me[Gt]-tr&&De+1<Gt&&--Gt;var ye=Me[Gt]-_r,Le=Ve-ye;if(he-Qe>je-Sr){var _e=(Qe*Le+he*ye)/Ve;Fe(De,Gt,ye,Qe,Sr,_e,je),Fe(Gt,Ae,Le,_e,Sr,he,je)}else{var Ce=(Sr*Le+je*ye)/Ve;Fe(De,Gt,ye,Qe,Sr,he,Ce),Fe(Gt,Ae,Le,Qe,Ce,he,je)}}}function Rt(Tt,ft,ut,vt,St){(Tt.depth&1?ce:yt)(Tt,ft,ut,vt,St)}var zt=function Tt(ft){function ut(vt,St,Ot,Xt,$t){if((de=vt._squarify)&&de.ratio===ft)for(var de,Me,Fe,De,Ae=-1,Ve,Qe=de.length,Sr=vt.value;++Ae<Qe;){for(Me=de[Ae],Fe=Me.children,De=Me.value=0,Ve=Fe.length;De<Ve;++De)Me.value+=Fe[De].value;Me.dice?yt(Me,St,Ot,Xt,Ot+=($t-Ot)*Me.value/Sr):ce(Me,St,Ot,St+=(Xt-St)*Me.value/Sr,$t),Sr-=Me.value}else vt._squarify=de=we(ft,vt,St,Ot,Xt,$t),de.ratio=ft}return ut.ratio=function(vt){return Tt((vt=+vt)>1?vt:1)},ut}(pe)},45879:function($,U,t){t.d(U,{h5:function(){return p}});var M=Math.PI,E=2*M,i=1e-6,S=E-i;function A(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function g(){return new A}A.prototype=g.prototype={constructor:A,moveTo:function(x,s){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+s)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(x,s){this._+="L"+(this._x1=+x)+","+(this._y1=+s)},quadraticCurveTo:function(x,s,u,c){this._+="Q"+ +x+","+ +s+","+(this._x1=+u)+","+(this._y1=+c)},bezierCurveTo:function(x,s,u,c,T,k){this._+="C"+ +x+","+ +s+","+ +u+","+ +c+","+(this._x1=+T)+","+(this._y1=+k)},arcTo:function(x,s,u,c,T){x=+x,s=+s,u=+u,c=+c,T=+T;var k=this._x1,_=this._y1,b=u-x,P=c-s,l=k-x,d=_-s,L=l*l+d*d;if(T<0)throw new Error("negative radius: "+T);if(this._x1===null)this._+="M"+(this._x1=x)+","+(this._y1=s);else if(L>i)if(!(Math.abs(d*b-P*l)>i)||!T)this._+="L"+(this._x1=x)+","+(this._y1=s);else{var w=u-k,I=c-_,z=b*b+P*P,B=w*w+I*I,O=Math.sqrt(z),R=Math.sqrt(L),C=T*Math.tan((M-Math.acos((z+L-B)/(2*O*R)))/2),F=C/R,N=C/O;Math.abs(F-1)>i&&(this._+="L"+(x+F*l)+","+(s+F*d)),this._+="A"+T+","+T+",0,0,"+ +(d*w>l*I)+","+(this._x1=x+N*b)+","+(this._y1=s+N*P)}},arc:function(x,s,u,c,T,k){x=+x,s=+s,u=+u,k=!!k;var _=u*Math.cos(c),b=u*Math.sin(c),P=x+_,l=s+b,d=1^k,L=k?c-T:T-c;if(u<0)throw new Error("negative radius: "+u);this._x1===null?this._+="M"+P+","+l:(Math.abs(this._x1-P)>i||Math.abs(this._y1-l)>i)&&(this._+="L"+P+","+l),u&&(L<0&&(L=L%E+E),L>S?this._+="A"+u+","+u+",0,1,"+d+","+(x-_)+","+(s-b)+"A"+u+","+u+",0,1,"+d+","+(this._x1=P)+","+(this._y1=l):L>i&&(this._+="A"+u+","+u+",0,"+ +(L>=M)+","+d+","+(this._x1=x+u*Math.cos(T))+","+(this._y1=s+u*Math.sin(T))))},rect:function(x,s,u,c){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+s)+"h"+ +u+"v"+ +c+"h"+-u+"Z"},toString:function(){return this._}};var v=g,e=Array.prototype.slice;function r(x){return function(){return x}}function f(x){return x[0]}function n(x){return x[1]}function a(x){return x.source}function o(x){return x.target}function h(x){var s=a,u=o,c=f,T=n,k=null;function _(){var b,P=e.call(arguments),l=s.apply(this,P),d=u.apply(this,P);if(k||(k=b=v()),x(k,+c.apply(this,(P[0]=l,P)),+T.apply(this,P),+c.apply(this,(P[0]=d,P)),+T.apply(this,P)),b)return k=null,b+""||null}return _.source=function(b){return arguments.length?(s=b,_):s},_.target=function(b){return arguments.length?(u=b,_):u},_.x=function(b){return arguments.length?(c=typeof b=="function"?b:r(+b),_):c},_.y=function(b){return arguments.length?(T=typeof b=="function"?b:r(+b),_):T},_.context=function(b){return arguments.length?(k=b??null,_):k},_}function y(x,s,u,c,T){x.moveTo(s,u),x.bezierCurveTo(s=(s+c)/2,u,s,T,c,T)}function p(){return h(y)}},84096:function($,U,t){t.d(U,{i$:function(){return It},Dq:function(){return f},g0:function(){return Rt}});var M=t(58176),E=t(48480),i=t(59879),S=t(82301),A=t(34823),g=t(79791);function v(Tt){if(0<=Tt.y&&Tt.y<100){var ft=new Date(-1,Tt.m,Tt.d,Tt.H,Tt.M,Tt.S,Tt.L);return ft.setFullYear(Tt.y),ft}return new Date(Tt.y,Tt.m,Tt.d,Tt.H,Tt.M,Tt.S,Tt.L)}function e(Tt){if(0<=Tt.y&&Tt.y<100){var ft=new Date(Date.UTC(-1,Tt.m,Tt.d,Tt.H,Tt.M,Tt.S,Tt.L));return ft.setUTCFullYear(Tt.y),ft}return new Date(Date.UTC(Tt.y,Tt.m,Tt.d,Tt.H,Tt.M,Tt.S,Tt.L))}function r(Tt,ft,ut){return{y:Tt,m:ft,d:ut,H:0,M:0,S:0,L:0}}function f(Tt){var ft=Tt.dateTime,ut=Tt.date,vt=Tt.time,St=Tt.periods,Ot=Tt.days,Xt=Tt.shortDays,$t=Tt.months,de=Tt.shortMonths,Me=x(St),Fe=s(St),De=x(Ot),Ae=s(Ot),Ve=x(Xt),Qe=s(Xt),Sr=x($t),he=s($t),je=x(de),Re=s(de),_r={a:Dt,A:Ut,b:Te,B:Se,c:null,d:K,e:K,f:W,H:Q,I:at,j:it,L:q,m:Z,M:G,p:Be,q:Je,Q:we,s:ve,S:et,u:nt,U:X,V:Y,w:ot,W:rt,x:null,X:null,y:ht,Y:pt,Z:yt,"%":pe},tr={a:$e,A:Xe,b:Oe,B:ar,c:null,d:xt,e:xt,f:wt,H:Ft,I:Et,j:mt,L:gt,m:Pt,M:Bt,p:cr,q:sr,Q:we,s:ve,S:kt,u:jt,U:Ht,V:Vt,w:ee,W:te,x:null,X:null,y:ae,Y:le,Z:ce,"%":pe},Gt={a:_e,A:Ce,b:ze,B:We,c:qe,d:w,e:w,f:C,H:z,I:z,j:I,L:R,m:L,M:B,p:Le,q:d,Q:N,s:V,S:O,u:c,U:T,V:k,w:u,W:_,x:ir,X:xr,y:P,Y:b,Z:l,"%":F};_r.x=re(ut,_r),_r.X=re(vt,_r),_r.c=re(ft,_r),tr.x=re(ut,tr),tr.X=re(vt,tr),tr.c=re(ft,tr);function re(lr,Or){return function(Ir){var Pr=[],rn=-1,Zr=0,yn=lr.length,Tn,hr,dr;for(Ir instanceof Date||(Ir=new Date(+Ir));++rn<yn;)lr.charCodeAt(rn)===37&&(Pr.push(lr.slice(Zr,rn)),(hr=n[Tn=lr.charAt(++rn)])!=null?Tn=lr.charAt(++rn):hr=Tn==="e"?" ":"0",(dr=Or[Tn])&&(Tn=dr(Ir,hr)),Pr.push(Tn),Zr=rn+1);return Pr.push(lr.slice(Zr,rn)),Pr.join("")}}function fe(lr,Or){return function(Ir){var Pr=r(1900,void 0,1),rn=ye(Pr,lr,Ir+="",0),Zr,yn;if(rn!=Ir.length)return null;if("Q"in Pr)return new Date(Pr.Q);if("s"in Pr)return new Date(Pr.s*1e3+("L"in Pr?Pr.L:0));if(Or&&!("Z"in Pr)&&(Pr.Z=0),"p"in Pr&&(Pr.H=Pr.H%12+Pr.p*12),Pr.m===void 0&&(Pr.m="q"in Pr?Pr.q:0),"V"in Pr){if(Pr.V<1||Pr.V>53)return null;"w"in Pr||(Pr.w=1),"Z"in Pr?(Zr=e(r(Pr.y,0,1)),yn=Zr.getUTCDay(),Zr=yn>4||yn===0?M.l6.ceil(Zr):(0,M.l6)(Zr),Zr=E.Z.offset(Zr,(Pr.V-1)*7),Pr.y=Zr.getUTCFullYear(),Pr.m=Zr.getUTCMonth(),Pr.d=Zr.getUTCDate()+(Pr.w+6)%7):(Zr=v(r(Pr.y,0,1)),yn=Zr.getDay(),Zr=yn>4||yn===0?i.wA.ceil(Zr):(0,i.wA)(Zr),Zr=S.Z.offset(Zr,(Pr.V-1)*7),Pr.y=Zr.getFullYear(),Pr.m=Zr.getMonth(),Pr.d=Zr.getDate()+(Pr.w+6)%7)}else("W"in Pr||"U"in Pr)&&("w"in Pr||(Pr.w="u"in Pr?Pr.u%7:"W"in Pr?1:0),yn="Z"in Pr?e(r(Pr.y,0,1)).getUTCDay():v(r(Pr.y,0,1)).getDay(),Pr.m=0,Pr.d="W"in Pr?(Pr.w+6)%7+Pr.W*7-(yn+5)%7:Pr.w+Pr.U*7-(yn+6)%7);return"Z"in Pr?(Pr.H+=Pr.Z/100|0,Pr.M+=Pr.Z%100,e(Pr)):v(Pr)}}function ye(lr,Or,Ir,Pr){for(var rn=0,Zr=Or.length,yn=Ir.length,Tn,hr;rn<Zr;){if(Pr>=yn)return-1;if(Tn=Or.charCodeAt(rn++),Tn===37){if(Tn=Or.charAt(rn++),hr=Gt[Tn in n?Or.charAt(rn++):Tn],!hr||(Pr=hr(lr,Ir,Pr))<0)return-1}else if(Tn!=Ir.charCodeAt(Pr++))return-1}return Pr}function Le(lr,Or,Ir){var Pr=Me.exec(Or.slice(Ir));return Pr?(lr.p=Fe[Pr[0].toLowerCase()],Ir+Pr[0].length):-1}function _e(lr,Or,Ir){var Pr=Ve.exec(Or.slice(Ir));return Pr?(lr.w=Qe[Pr[0].toLowerCase()],Ir+Pr[0].length):-1}function Ce(lr,Or,Ir){var Pr=De.exec(Or.slice(Ir));return Pr?(lr.w=Ae[Pr[0].toLowerCase()],Ir+Pr[0].length):-1}function ze(lr,Or,Ir){var Pr=je.exec(Or.slice(Ir));return Pr?(lr.m=Re[Pr[0].toLowerCase()],Ir+Pr[0].length):-1}function We(lr,Or,Ir){var Pr=Sr.exec(Or.slice(Ir));return Pr?(lr.m=he[Pr[0].toLowerCase()],Ir+Pr[0].length):-1}function qe(lr,Or,Ir){return ye(lr,ft,Or,Ir)}function ir(lr,Or,Ir){return ye(lr,ut,Or,Ir)}function xr(lr,Or,Ir){return ye(lr,vt,Or,Ir)}function Dt(lr){return Xt[lr.getDay()]}function Ut(lr){return Ot[lr.getDay()]}function Te(lr){return de[lr.getMonth()]}function Se(lr){return $t[lr.getMonth()]}function Be(lr){return St[+(lr.getHours()>=12)]}function Je(lr){return 1+~~(lr.getMonth()/3)}function $e(lr){return Xt[lr.getUTCDay()]}function Xe(lr){return Ot[lr.getUTCDay()]}function Oe(lr){return de[lr.getUTCMonth()]}function ar(lr){return $t[lr.getUTCMonth()]}function cr(lr){return St[+(lr.getUTCHours()>=12)]}function sr(lr){return 1+~~(lr.getUTCMonth()/3)}return{format:function(lr){var Or=re(lr+="",_r);return Or.toString=function(){return lr},Or},parse:function(lr){var Or=fe(lr+="",!1);return Or.toString=function(){return lr},Or},utcFormat:function(lr){var Or=re(lr+="",tr);return Or.toString=function(){return lr},Or},utcParse:function(lr){var Or=fe(lr+="",!0);return Or.toString=function(){return lr},Or}}}var n={"-":"",_:" ",0:"0"},a=/^\s*\d+/,o=/^%/,h=/[\\^$*+?|[\]().{}]/g;function y(Tt,ft,ut){var vt=Tt<0?"-":"",St=(vt?-Tt:Tt)+"",Ot=St.length;return vt+(Ot<ut?new Array(ut-Ot+1).join(ft)+St:St)}function p(Tt){return Tt.replace(h,"\\$&")}function x(Tt){return new RegExp("^(?:"+Tt.map(p).join("|")+")","i")}function s(Tt){for(var ft={},ut=-1,vt=Tt.length;++ut<vt;)ft[Tt[ut].toLowerCase()]=ut;return ft}function u(Tt,ft,ut){var vt=a.exec(ft.slice(ut,ut+1));return vt?(Tt.w=+vt[0],ut+vt[0].length):-1}function c(Tt,ft,ut){var vt=a.exec(ft.slice(ut,ut+1));return vt?(Tt.u=+vt[0],ut+vt[0].length):-1}function T(Tt,ft,ut){var vt=a.exec(ft.slice(ut,ut+2));return vt?(Tt.U=+vt[0],ut+vt[0].length):-1}function k(Tt,ft,ut){var vt=a.exec(ft.slice(ut,ut+2));return vt?(Tt.V=+vt[0],ut+vt[0].length):-1}function _(Tt,ft,ut){var vt=a.exec(ft.slice(ut,ut+2));return vt?(Tt.W=+vt[0],ut+vt[0].length):-1}function b(Tt,ft,ut){var vt=a.exec(ft.slice(ut,ut+4));return vt?(Tt.y=+vt[0],ut+vt[0].length):-1}function P(Tt,ft,ut){var vt=a.exec(ft.slice(ut,ut+2));return vt?(Tt.y=+vt[0]+(+vt[0]>68?1900:2e3),ut+vt[0].length):-1}function l(Tt,ft,ut){var vt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(ft.slice(ut,ut+6));return vt?(Tt.Z=vt[1]?0:-(vt[2]+(vt[3]||"00")),ut+vt[0].length):-1}function d(Tt,ft,ut){var vt=a.exec(ft.slice(ut,ut+1));return vt?(Tt.q=vt[0]*3-3,ut+vt[0].length):-1}function L(Tt,ft,ut){var vt=a.exec(ft.slice(ut,ut+2));return vt?(Tt.m=vt[0]-1,ut+vt[0].length):-1}function w(Tt,ft,ut){var vt=a.exec(ft.slice(ut,ut+2));return vt?(Tt.d=+vt[0],ut+vt[0].length):-1}function I(Tt,ft,ut){var vt=a.exec(ft.slice(ut,ut+3));return vt?(Tt.m=0,Tt.d=+vt[0],ut+vt[0].length):-1}function z(Tt,ft,ut){var vt=a.exec(ft.slice(ut,ut+2));return vt?(Tt.H=+vt[0],ut+vt[0].length):-1}function B(Tt,ft,ut){var vt=a.exec(ft.slice(ut,ut+2));return vt?(Tt.M=+vt[0],ut+vt[0].length):-1}function O(Tt,ft,ut){var vt=a.exec(ft.slice(ut,ut+2));return vt?(Tt.S=+vt[0],ut+vt[0].length):-1}function R(Tt,ft,ut){var vt=a.exec(ft.slice(ut,ut+3));return vt?(Tt.L=+vt[0],ut+vt[0].length):-1}function C(Tt,ft,ut){var vt=a.exec(ft.slice(ut,ut+6));return vt?(Tt.L=Math.floor(vt[0]/1e3),ut+vt[0].length):-1}function F(Tt,ft,ut){var vt=o.exec(ft.slice(ut,ut+1));return vt?ut+vt[0].length:-1}function N(Tt,ft,ut){var vt=a.exec(ft.slice(ut));return vt?(Tt.Q=+vt[0],ut+vt[0].length):-1}function V(Tt,ft,ut){var vt=a.exec(ft.slice(ut));return vt?(Tt.s=+vt[0],ut+vt[0].length):-1}function K(Tt,ft){return y(Tt.getDate(),ft,2)}function Q(Tt,ft){return y(Tt.getHours(),ft,2)}function at(Tt,ft){return y(Tt.getHours()%12||12,ft,2)}function it(Tt,ft){return y(1+S.Z.count((0,A.Z)(Tt),Tt),ft,3)}function q(Tt,ft){return y(Tt.getMilliseconds(),ft,3)}function W(Tt,ft){return q(Tt,ft)+"000"}function Z(Tt,ft){return y(Tt.getMonth()+1,ft,2)}function G(Tt,ft){return y(Tt.getMinutes(),ft,2)}function et(Tt,ft){return y(Tt.getSeconds(),ft,2)}function nt(Tt){var ft=Tt.getDay();return ft===0?7:ft}function X(Tt,ft){return y(i.OM.count((0,A.Z)(Tt)-1,Tt),ft,2)}function Y(Tt,ft){var ut=Tt.getDay();return Tt=ut>=4||ut===0?(0,i.bL)(Tt):i.bL.ceil(Tt),y(i.bL.count((0,A.Z)(Tt),Tt)+((0,A.Z)(Tt).getDay()===4),ft,2)}function ot(Tt){return Tt.getDay()}function rt(Tt,ft){return y(i.wA.count((0,A.Z)(Tt)-1,Tt),ft,2)}function ht(Tt,ft){return y(Tt.getFullYear()%100,ft,2)}function pt(Tt,ft){return y(Tt.getFullYear()%1e4,ft,4)}function yt(Tt){var ft=Tt.getTimezoneOffset();return(ft>0?"-":(ft*=-1,"+"))+y(ft/60|0,"0",2)+y(ft%60,"0",2)}function xt(Tt,ft){return y(Tt.getUTCDate(),ft,2)}function Ft(Tt,ft){return y(Tt.getUTCHours(),ft,2)}function Et(Tt,ft){return y(Tt.getUTCHours()%12||12,ft,2)}function mt(Tt,ft){return y(1+E.Z.count((0,g.Z)(Tt),Tt),ft,3)}function gt(Tt,ft){return y(Tt.getUTCMilliseconds(),ft,3)}function wt(Tt,ft){return gt(Tt,ft)+"000"}function Pt(Tt,ft){return y(Tt.getUTCMonth()+1,ft,2)}function Bt(Tt,ft){return y(Tt.getUTCMinutes(),ft,2)}function kt(Tt,ft){return y(Tt.getUTCSeconds(),ft,2)}function jt(Tt){var ft=Tt.getUTCDay();return ft===0?7:ft}function Ht(Tt,ft){return y(M.Ox.count((0,g.Z)(Tt)-1,Tt),ft,2)}function Vt(Tt,ft){var ut=Tt.getUTCDay();return Tt=ut>=4||ut===0?(0,M.hB)(Tt):M.hB.ceil(Tt),y(M.hB.count((0,g.Z)(Tt),Tt)+((0,g.Z)(Tt).getUTCDay()===4),ft,2)}function ee(Tt){return Tt.getUTCDay()}function te(Tt,ft){return y(M.l6.count((0,g.Z)(Tt)-1,Tt),ft,2)}function ae(Tt,ft){return y(Tt.getUTCFullYear()%100,ft,2)}function le(Tt,ft){return y(Tt.getUTCFullYear()%1e4,ft,4)}function ce(){return"+0000"}function pe(){return"%"}function we(Tt){return+Tt}function ve(Tt){return Math.floor(+Tt/1e3)}var Mt,It,Rt;zt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zt(Tt){return Mt=f(Tt),It=Mt.format,Mt.parse,Rt=Mt.utcFormat,Mt.utcParse,Mt}},82301:function($,U,t){t.d(U,{a:function(){return S}});var M=t(30052),E=t(54263),i=(0,M.Z)(function(A){A.setHours(0,0,0,0)},function(A,g){A.setDate(A.getDate()+g)},function(A,g){return(g-A-(g.getTimezoneOffset()-A.getTimezoneOffset())*E.yB)/E.UD},function(A){return A.getDate()-1});U.Z=i;var S=i.range},54263:function($,U,t){t.d(U,{UD:function(){return S},Y2:function(){return i},Ym:function(){return M},iM:function(){return A},yB:function(){return E}});var M=1e3,E=6e4,i=36e5,S=864e5,A=6048e5},81041:function($,U,t){t.r(U),t.d(U,{timeDay:function(){return y.Z},timeDays:function(){return y.a},timeFriday:function(){return p.mC},timeFridays:function(){return p.b$},timeHour:function(){return o},timeHours:function(){return h},timeInterval:function(){return M.Z},timeMillisecond:function(){return i},timeMilliseconds:function(){return S},timeMinute:function(){return f},timeMinutes:function(){return n},timeMonday:function(){return p.wA},timeMondays:function(){return p.bJ},timeMonth:function(){return s},timeMonths:function(){return u},timeSaturday:function(){return p.EY},timeSaturdays:function(){return p.Ff},timeSecond:function(){return v},timeSeconds:function(){return e},timeSunday:function(){return p.OM},timeSundays:function(){return p.vm},timeThursday:function(){return p.bL},timeThursdays:function(){return p.$t},timeTuesday:function(){return p.sy},timeTuesdays:function(){return p.aU},timeWednesday:function(){return p.zg},timeWednesdays:function(){return p.Ld},timeWeek:function(){return p.OM},timeWeeks:function(){return p.vm},timeYear:function(){return c.Z},timeYears:function(){return c.g},utcDay:function(){return d.Z},utcDays:function(){return d.y},utcFriday:function(){return L.QQ},utcFridays:function(){return L.fz},utcHour:function(){return P},utcHours:function(){return l},utcMillisecond:function(){return i},utcMilliseconds:function(){return S},utcMinute:function(){return k},utcMinutes:function(){return _},utcMonday:function(){return L.l6},utcMondays:function(){return L.$3},utcMonth:function(){return I},utcMonths:function(){return z},utcSaturday:function(){return L.g4},utcSaturdays:function(){return L.Q_},utcSecond:function(){return v},utcSeconds:function(){return e},utcSunday:function(){return L.Ox},utcSundays:function(){return L.SU},utcThursday:function(){return L.hB},utcThursdays:function(){return L.xj},utcTuesday:function(){return L.J1},utcTuesdays:function(){return L.DK},utcWednesday:function(){return L.b3},utcWednesdays:function(){return L.uy},utcWeek:function(){return L.Ox},utcWeeks:function(){return L.SU},utcYear:function(){return B.Z},utcYears:function(){return B.D}});var M=t(30052),E=(0,M.Z)(function(){},function(O,R){O.setTime(+O+R)},function(O,R){return R-O});E.every=function(O){return O=Math.floor(O),!isFinite(O)||!(O>0)?null:O>1?(0,M.Z)(function(R){R.setTime(Math.floor(R/O)*O)},function(R,C){R.setTime(+R+C*O)},function(R,C){return(C-R)/O}):E};var i=E,S=E.range,A=t(54263),g=(0,M.Z)(function(O){O.setTime(O-O.getMilliseconds())},function(O,R){O.setTime(+O+R*A.Ym)},function(O,R){return(R-O)/A.Ym},function(O){return O.getUTCSeconds()}),v=g,e=g.range,r=(0,M.Z)(function(O){O.setTime(O-O.getMilliseconds()-O.getSeconds()*A.Ym)},function(O,R){O.setTime(+O+R*A.yB)},function(O,R){return(R-O)/A.yB},function(O){return O.getMinutes()}),f=r,n=r.range,a=(0,M.Z)(function(O){O.setTime(O-O.getMilliseconds()-O.getSeconds()*A.Ym-O.getMinutes()*A.yB)},function(O,R){O.setTime(+O+R*A.Y2)},function(O,R){return(R-O)/A.Y2},function(O){return O.getHours()}),o=a,h=a.range,y=t(82301),p=t(59879),x=(0,M.Z)(function(O){O.setDate(1),O.setHours(0,0,0,0)},function(O,R){O.setMonth(O.getMonth()+R)},function(O,R){return R.getMonth()-O.getMonth()+(R.getFullYear()-O.getFullYear())*12},function(O){return O.getMonth()}),s=x,u=x.range,c=t(34823),T=(0,M.Z)(function(O){O.setUTCSeconds(0,0)},function(O,R){O.setTime(+O+R*A.yB)},function(O,R){return(R-O)/A.yB},function(O){return O.getUTCMinutes()}),k=T,_=T.range,b=(0,M.Z)(function(O){O.setUTCMinutes(0,0,0)},function(O,R){O.setTime(+O+R*A.Y2)},function(O,R){return(R-O)/A.Y2},function(O){return O.getUTCHours()}),P=b,l=b.range,d=t(48480),L=t(58176),w=(0,M.Z)(function(O){O.setUTCDate(1),O.setUTCHours(0,0,0,0)},function(O,R){O.setUTCMonth(O.getUTCMonth()+R)},function(O,R){return R.getUTCMonth()-O.getUTCMonth()+(R.getUTCFullYear()-O.getUTCFullYear())*12},function(O){return O.getUTCMonth()}),I=w,z=w.range,B=t(79791)},30052:function($,U,t){t.d(U,{Z:function(){return i}});var M=new Date,E=new Date;function i(S,A,g,v){function e(r){return S(r=arguments.length===0?new Date:new Date(+r)),r}return e.floor=function(r){return S(r=new Date(+r)),r},e.ceil=function(r){return S(r=new Date(r-1)),A(r,1),S(r),r},e.round=function(r){var f=e(r),n=e.ceil(r);return r-f<n-r?f:n},e.offset=function(r,f){return A(r=new Date(+r),f==null?1:Math.floor(f)),r},e.range=function(r,f,n){var a=[],o;if(r=e.ceil(r),n=n==null?1:Math.floor(n),!(r<f)||!(n>0))return a;do a.push(o=new Date(+r)),A(r,n),S(r);while(o<r&&r<f);return a},e.filter=function(r){return i(function(f){if(f>=f)for(;S(f),!r(f);)f.setTime(f-1)},function(f,n){if(f>=f)if(n<0)for(;++n<=0;)for(;A(f,-1),!r(f););else for(;--n>=0;)for(;A(f,1),!r(f););})},g&&(e.count=function(r,f){return M.setTime(+r),E.setTime(+f),S(M),S(E),Math.floor(g(M,E))},e.every=function(r){return r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?e.filter(v?function(f){return v(f)%r===0}:function(f){return e.count(0,f)%r===0}):e}),e}},48480:function($,U,t){t.d(U,{y:function(){return S}});var M=t(30052),E=t(54263),i=(0,M.Z)(function(A){A.setUTCHours(0,0,0,0)},function(A,g){A.setUTCDate(A.getUTCDate()+g)},function(A,g){return(g-A)/E.UD},function(A){return A.getUTCDate()-1});U.Z=i;var S=i.range},58176:function($,U,t){t.d(U,{$3:function(){return a},DK:function(){return o},J1:function(){return g},Ox:function(){return S},QQ:function(){return r},Q_:function(){return x},SU:function(){return n},b3:function(){return v},fz:function(){return p},g4:function(){return f},hB:function(){return e},l6:function(){return A},uy:function(){return h},xj:function(){return y}});var M=t(30052),E=t(54263);function i(s){return(0,M.Z)(function(u){u.setUTCDate(u.getUTCDate()-(u.getUTCDay()+7-s)%7),u.setUTCHours(0,0,0,0)},function(u,c){u.setUTCDate(u.getUTCDate()+c*7)},function(u,c){return(c-u)/E.iM})}var S=i(0),A=i(1),g=i(2),v=i(3),e=i(4),r=i(5),f=i(6),n=S.range,a=A.range,o=g.range,h=v.range,y=e.range,p=r.range,x=f.range},79791:function($,U,t){t.d(U,{D:function(){return i}});var M=t(30052),E=(0,M.Z)(function(S){S.setUTCMonth(0,1),S.setUTCHours(0,0,0,0)},function(S,A){S.setUTCFullYear(S.getUTCFullYear()+A)},function(S,A){return A.getUTCFullYear()-S.getUTCFullYear()},function(S){return S.getUTCFullYear()});E.every=function(S){return!isFinite(S=Math.floor(S))||!(S>0)?null:(0,M.Z)(function(A){A.setUTCFullYear(Math.floor(A.getUTCFullYear()/S)*S),A.setUTCMonth(0,1),A.setUTCHours(0,0,0,0)},function(A,g){A.setUTCFullYear(A.getUTCFullYear()+g*S)})},U.Z=E;var i=E.range},59879:function($,U,t){t.d(U,{$t:function(){return y},EY:function(){return f},Ff:function(){return x},Ld:function(){return h},OM:function(){return S},aU:function(){return o},b$:function(){return p},bJ:function(){return a},bL:function(){return e},mC:function(){return r},sy:function(){return g},vm:function(){return n},wA:function(){return A},zg:function(){return v}});var M=t(30052),E=t(54263);function i(s){return(0,M.Z)(function(u){u.setDate(u.getDate()-(u.getDay()+7-s)%7),u.setHours(0,0,0,0)},function(u,c){u.setDate(u.getDate()+c*7)},function(u,c){return(c-u-(c.getTimezoneOffset()-u.getTimezoneOffset())*E.yB)/E.iM})}var S=i(0),A=i(1),g=i(2),v=i(3),e=i(4),r=i(5),f=i(6),n=S.range,a=A.range,o=g.range,h=v.range,y=e.range,p=r.range,x=f.range},34823:function($,U,t){t.d(U,{g:function(){return i}});var M=t(30052),E=(0,M.Z)(function(S){S.setMonth(0,1),S.setHours(0,0,0,0)},function(S,A){S.setFullYear(S.getFullYear()+A)},function(S,A){return A.getFullYear()-S.getFullYear()},function(S){return S.getFullYear()});E.every=function(S){return!isFinite(S=Math.floor(S))||!(S>0)?null:(0,M.Z)(function(A){A.setFullYear(Math.floor(A.getFullYear()/S)*S),A.setMonth(0,1),A.setHours(0,0,0,0)},function(A,g){A.setFullYear(A.getFullYear()+g*S)})},U.Z=E;var i=E.range},17045:function($,U,t){var M=t(8709),E=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",i=Object.prototype.toString,S=Array.prototype.concat,A=Object.defineProperty,g=function(n){return typeof n=="function"&&i.call(n)==="[object Function]"},v=t(55622)(),e=A&&v,r=function(n,a,o,h){if(a in n){if(h===!0){if(n[a]===o)return}else if(!g(h)||!h())return}e?A(n,a,{configurable:!0,enumerable:!1,value:o,writable:!0}):n[a]=o},f=function(n,a){var o=arguments.length>2?arguments[2]:{},h=M(a);E&&(h=S.call(h,Object.getOwnPropertySymbols(a)));for(var y=0;y<h.length;y+=1)r(n,h[y],a[h[y]],o[h[y]])};f.supportsDescriptors=!!e,$.exports=f},46775:function($){$.exports=function(){for(var U=0;U<arguments.length;U++)if(arguments[U]!==void 0)return arguments[U]}},53545:function($){$.exports=E;var U=E.canvas=document.createElement("canvas"),t=U.getContext("2d"),M=i([32,126]);E.createPairs=i,E.ascii=M;function E(S,A){Array.isArray(S)&&(S=S.join(", "));var g={},v,e=16,r=.05;A&&(A.length===2&&typeof A[0]=="number"?v=i(A):Array.isArray(A)?v=A:(A.o?v=i(A.o):A.pairs&&(v=A.pairs),A.fontSize&&(e=A.fontSize),A.threshold!=null&&(r=A.threshold))),v||(v=M),t.font=e+"px "+S;for(var f=0;f<v.length;f++){var n=v[f],a=t.measureText(n[0]).width+t.measureText(n[1]).width,o=t.measureText(n).width;if(Math.abs(a-o)>e*r){var h=(o-a)/e;g[n]=h*1e3}}return g}function i(S){for(var A=[],g=S[0];g<=S[1];g++)for(var v=String.fromCharCode(g),e=S[0];e<S[1];e++){var r=String.fromCharCode(e),f=v+r;A.push(f)}return A}},31457:function($,U,t){var M=t(65185),E=t(18625),i={M:"moveTo",C:"bezierCurveTo"};$.exports=function(S,A){S.beginPath(),E(M(A)).forEach(function(g){var v=g[0],e=g.slice(1);S[i[v]].apply(S,e)}),S.closePath()}},90660:function($){$.exports=function(U){switch(U){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},12129:function($){function U(E,i,S){var A=E[S]|0;if(A<=0)return[];var g=new Array(A),v;if(S===E.length-1)for(v=0;v<A;++v)g[v]=i;else for(v=0;v<A;++v)g[v]=U(E,i,S+1);return g}function t(E,i){var S,A;for(S=new Array(E),A=0;A<E;++A)S[A]=i;return S}function M(E,i){switch(typeof i>"u"&&(i=0),typeof E){case"number":if(E>0)return t(E|0,i);break;case"object":if(typeof E.length=="number")return U(E,i,0);break}return[]}$.exports=M},11474:function($){$.exports=U,$.exports.default=U;function U(z,B,O){O=O||2;var R=B&&B.length,C=R?B[0]*O:z.length,F=t(z,0,C,O,!0),N=[];if(!F||F.next===F.prev)return N;var V,K,Q,at,it,q,W;if(R&&(F=v(z,B,F,O)),z.length>80*O){V=Q=z[0],K=at=z[1];for(var Z=O;Z<C;Z+=O)it=z[Z],q=z[Z+1],it<V&&(V=it),q<K&&(K=q),it>Q&&(Q=it),q>at&&(at=q);W=Math.max(Q-V,at-K),W=W!==0?1/W:0}return E(F,N,O,V,K,W),N}function t(z,B,O,R,C){var F,N;if(C===I(z,B,O,R)>0)for(F=B;F<O;F+=R)N=d(F,z[F],z[F+1],N);else for(F=O-R;F>=B;F-=R)N=d(F,z[F],z[F+1],N);return N&&u(N,N.next)&&(L(N),N=N.next),N}function M(z,B){if(!z)return z;B||(B=z);var O=z,R;do if(R=!1,!O.steiner&&(u(O,O.next)||s(O.prev,O,O.next)===0)){if(L(O),O=B=O.prev,O===O.next)break;R=!0}else O=O.next;while(R||O!==B);return B}function E(z,B,O,R,C,F,N){if(z){!N&&F&&a(z,R,C,F);for(var V=z,K,Q;z.prev!==z.next;){if(K=z.prev,Q=z.next,F?S(z,R,C,F):i(z)){B.push(K.i/O),B.push(z.i/O),B.push(Q.i/O),L(z),z=Q.next,V=Q.next;continue}if(z=Q,z===V){N?N===1?(z=A(M(z),B,O),E(z,B,O,R,C,F,2)):N===2&&g(z,B,O,R,C,F):E(M(z),B,O,R,C,F,1);break}}}}function i(z){var B=z.prev,O=z,R=z.next;if(s(B,O,R)>=0)return!1;for(var C=z.next.next;C!==z.prev;){if(p(B.x,B.y,O.x,O.y,R.x,R.y,C.x,C.y)&&s(C.prev,C,C.next)>=0)return!1;C=C.next}return!0}function S(z,B,O,R){var C=z.prev,F=z,N=z.next;if(s(C,F,N)>=0)return!1;for(var V=C.x<F.x?C.x<N.x?C.x:N.x:F.x<N.x?F.x:N.x,K=C.y<F.y?C.y<N.y?C.y:N.y:F.y<N.y?F.y:N.y,Q=C.x>F.x?C.x>N.x?C.x:N.x:F.x>N.x?F.x:N.x,at=C.y>F.y?C.y>N.y?C.y:N.y:F.y>N.y?F.y:N.y,it=h(V,K,B,O,R),q=h(Q,at,B,O,R),W=z.prevZ,Z=z.nextZ;W&&W.z>=it&&Z&&Z.z<=q;){if(W!==z.prev&&W!==z.next&&p(C.x,C.y,F.x,F.y,N.x,N.y,W.x,W.y)&&s(W.prev,W,W.next)>=0||(W=W.prevZ,Z!==z.prev&&Z!==z.next&&p(C.x,C.y,F.x,F.y,N.x,N.y,Z.x,Z.y)&&s(Z.prev,Z,Z.next)>=0))return!1;Z=Z.nextZ}for(;W&&W.z>=it;){if(W!==z.prev&&W!==z.next&&p(C.x,C.y,F.x,F.y,N.x,N.y,W.x,W.y)&&s(W.prev,W,W.next)>=0)return!1;W=W.prevZ}for(;Z&&Z.z<=q;){if(Z!==z.prev&&Z!==z.next&&p(C.x,C.y,F.x,F.y,N.x,N.y,Z.x,Z.y)&&s(Z.prev,Z,Z.next)>=0)return!1;Z=Z.nextZ}return!0}function A(z,B,O){var R=z;do{var C=R.prev,F=R.next.next;!u(C,F)&&c(C,R,R.next,F)&&b(C,F)&&b(F,C)&&(B.push(C.i/O),B.push(R.i/O),B.push(F.i/O),L(R),L(R.next),R=z=F),R=R.next}while(R!==z);return M(R)}function g(z,B,O,R,C,F){var N=z;do{for(var V=N.next.next;V!==N.prev;){if(N.i!==V.i&&x(N,V)){var K=l(N,V);N=M(N,N.next),K=M(K,K.next),E(N,B,O,R,C,F),E(K,B,O,R,C,F);return}V=V.next}N=N.next}while(N!==z)}function v(z,B,O,R){var C=[],F,N,V,K,Q;for(F=0,N=B.length;F<N;F++)V=B[F]*R,K=F<N-1?B[F+1]*R:z.length,Q=t(z,V,K,R,!1),Q===Q.next&&(Q.steiner=!0),C.push(y(Q));for(C.sort(e),F=0;F<C.length;F++)r(C[F],O),O=M(O,O.next);return O}function e(z,B){return z.x-B.x}function r(z,B){if(B=f(z,B),B){var O=l(B,z);M(B,B.next),M(O,O.next)}}function f(z,B){var O=B,R=z.x,C=z.y,F=-1/0,N;do{if(C<=O.y&&C>=O.next.y&&O.next.y!==O.y){var V=O.x+(C-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(V<=R&&V>F){if(F=V,V===R){if(C===O.y)return O;if(C===O.next.y)return O.next}N=O.x<O.next.x?O:O.next}}O=O.next}while(O!==B);if(!N)return null;if(R===F)return N;var K=N,Q=N.x,at=N.y,it=1/0,q;O=N;do R>=O.x&&O.x>=Q&&R!==O.x&&p(C<at?R:F,C,Q,at,C<at?F:R,C,O.x,O.y)&&(q=Math.abs(C-O.y)/(R-O.x),b(O,z)&&(q<it||q===it&&(O.x>N.x||O.x===N.x&&n(N,O)))&&(N=O,it=q)),O=O.next;while(O!==K);return N}function n(z,B){return s(z.prev,z,B.prev)<0&&s(B.next,z,z.next)<0}function a(z,B,O,R){var C=z;do C.z===null&&(C.z=h(C.x,C.y,B,O,R)),C.prevZ=C.prev,C.nextZ=C.next,C=C.next;while(C!==z);C.prevZ.nextZ=null,C.prevZ=null,o(C)}function o(z){var B,O,R,C,F,N,V,K,Q=1;do{for(O=z,z=null,F=null,N=0;O;){for(N++,R=O,V=0,B=0;B<Q&&(V++,R=R.nextZ,!!R);B++);for(K=Q;V>0||K>0&&R;)V!==0&&(K===0||!R||O.z<=R.z)?(C=O,O=O.nextZ,V--):(C=R,R=R.nextZ,K--),F?F.nextZ=C:z=C,C.prevZ=F,F=C;O=R}F.nextZ=null,Q*=2}while(N>1);return z}function h(z,B,O,R,C){return z=32767*(z-O)*C,B=32767*(B-R)*C,z=(z|z<<8)&16711935,z=(z|z<<4)&252645135,z=(z|z<<2)&858993459,z=(z|z<<1)&1431655765,B=(B|B<<8)&16711935,B=(B|B<<4)&252645135,B=(B|B<<2)&858993459,B=(B|B<<1)&1431655765,z|B<<1}function y(z){var B=z,O=z;do(B.x<O.x||B.x===O.x&&B.y<O.y)&&(O=B),B=B.next;while(B!==z);return O}function p(z,B,O,R,C,F,N,V){return(C-N)*(B-V)-(z-N)*(F-V)>=0&&(z-N)*(R-V)-(O-N)*(B-V)>=0&&(O-N)*(F-V)-(C-N)*(R-V)>=0}function x(z,B){return z.next.i!==B.i&&z.prev.i!==B.i&&!_(z,B)&&(b(z,B)&&b(B,z)&&P(z,B)&&(s(z.prev,z,B.prev)||s(z,B.prev,B))||u(z,B)&&s(z.prev,z,z.next)>0&&s(B.prev,B,B.next)>0)}function s(z,B,O){return(B.y-z.y)*(O.x-B.x)-(B.x-z.x)*(O.y-B.y)}function u(z,B){return z.x===B.x&&z.y===B.y}function c(z,B,O,R){var C=k(s(z,B,O)),F=k(s(z,B,R)),N=k(s(O,R,z)),V=k(s(O,R,B));return!!(C!==F&&N!==V||C===0&&T(z,O,B)||F===0&&T(z,R,B)||N===0&&T(O,z,R)||V===0&&T(O,B,R))}function T(z,B,O){return B.x<=Math.max(z.x,O.x)&&B.x>=Math.min(z.x,O.x)&&B.y<=Math.max(z.y,O.y)&&B.y>=Math.min(z.y,O.y)}function k(z){return z>0?1:z<0?-1:0}function _(z,B){var O=z;do{if(O.i!==z.i&&O.next.i!==z.i&&O.i!==B.i&&O.next.i!==B.i&&c(O,O.next,z,B))return!0;O=O.next}while(O!==z);return!1}function b(z,B){return s(z.prev,z,z.next)<0?s(z,B,z.next)>=0&&s(z,z.prev,B)>=0:s(z,B,z.prev)<0||s(z,z.next,B)<0}function P(z,B){var O=z,R=!1,C=(z.x+B.x)/2,F=(z.y+B.y)/2;do O.y>F!=O.next.y>F&&O.next.y!==O.y&&C<(O.next.x-O.x)*(F-O.y)/(O.next.y-O.y)+O.x&&(R=!R),O=O.next;while(O!==z);return R}function l(z,B){var O=new w(z.i,z.x,z.y),R=new w(B.i,B.x,B.y),C=z.next,F=B.prev;return z.next=B,B.prev=z,O.next=C,C.prev=O,R.next=O,O.prev=R,F.next=R,R.prev=F,R}function d(z,B,O,R){var C=new w(z,B,O);return R?(C.next=R.next,C.prev=R,R.next.prev=C,R.next=C):(C.prev=C,C.next=C),C}function L(z){z.next.prev=z.prev,z.prev.next=z.next,z.prevZ&&(z.prevZ.nextZ=z.nextZ),z.nextZ&&(z.nextZ.prevZ=z.prevZ)}function w(z,B,O){this.i=z,this.x=B,this.y=O,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}U.deviation=function(z,B,O,R){var C=B&&B.length,F=C?B[0]*O:z.length,N=Math.abs(I(z,0,F,O));if(C)for(var V=0,K=B.length;V<K;V++){var Q=B[V]*O,at=V<K-1?B[V+1]*O:z.length;N-=Math.abs(I(z,Q,at,O))}var it=0;for(V=0;V<R.length;V+=3){var q=R[V]*O,W=R[V+1]*O,Z=R[V+2]*O;it+=Math.abs((z[q]-z[Z])*(z[W+1]-z[q+1])-(z[q]-z[W])*(z[Z+1]-z[q+1]))}return N===0&&it===0?0:Math.abs((it-N)/N)};function I(z,B,O,R){for(var C=0,F=B,N=O-R;F<O;F+=R)C+=(z[N]-z[F])*(z[F+1]+z[N+1]),N=F;return C}U.flatten=function(z){for(var B=z[0][0].length,O={vertices:[],holes:[],dimensions:B},R=0,C=0;C<z.length;C++){for(var F=0;F<z[C].length;F++)for(var N=0;N<B;N++)O.vertices.push(z[C][F][N]);C>0&&(R+=z[C-1].length,O.holes.push(R))}return O}},2502:function($,U,t){var M=t(68664);$.exports=function(E,i){var S=[],A=[],g=[],v={},e=[],r;function f(c){g[c]=!1,v.hasOwnProperty(c)&&Object.keys(v[c]).forEach(function(T){delete v[c][T],g[T]&&f(T)})}function n(c){var T=!1;A.push(c),g[c]=!0;var k,_;for(k=0;k<e[c].length;k++)_=e[c][k],_===r?(a(r,A),T=!0):g[_]||(T=n(_));if(T)f(c);else for(k=0;k<e[c].length;k++){_=e[c][k];var b=v[_];b||(b={},v[_]=b),b[_]=!0}return A.pop(),T}function a(c,T){var k=[].concat(T).concat(c);i?i(n):S.push(k)}function o(c){for(var T=0;T<E.length;T++)T<c&&(E[T]=[]),E[T]=E[T].filter(function(k){return k>=c})}function h(c){o(c);for(var T=E,k=M(T),_=k.components.filter(function(I){return I.length>1}),b=1/0,P,l=0;l<_.length;l++)for(var d=0;d<_[l].length;d++)_[l][d]<b&&(b=_[l][d],P=l);var L=_[P];if(!L)return!1;var w=E.map(function(I,z){return L.indexOf(z)===-1?[]:I.filter(function(B){return L.indexOf(B)!==-1})});return{leastVertex:b,adjList:w}}r=0;for(var y=E.length;r<y;){var p=h(r);if(r=p.leastVertex,e=p.adjList,e){for(var x=0;x<e.length;x++)for(var s=0;s<e[x].length;s++){var u=e[x][s];g[+u]=!1,v[u]={}}n(r),r=r+1}else r=y}if(!i)return S}},16134:function($,U,t){var M=t(36672);$.exports=function(){return M(this).length=0,this}},4892:function($,U,t){$.exports=t(64404)()?Array.from:t(49441)},64404:function($){$.exports=function(){var U=Array.from,t,M;return typeof U!="function"?!1:(t=["raz","dwa"],M=U(t),!!(M&&M!==t&&M[1]==="dwa"))}},49441:function($,U,t){var M=t(8260).iterator,E=t(73051),i=t(33717),S=t(35976),A=t(78513),g=t(36672),v=t(95296),e=t(87963),r=Array.isArray,f=Function.prototype.call,n={configurable:!0,enumerable:!0,writable:!0,value:null},a=Object.defineProperty;$.exports=function(o){var h=arguments[1],y=arguments[2],p,x,s,u,c,T,k,_,b,P;if(o=Object(g(o)),v(h)&&A(h),!this||this===Array||!i(this)){if(!h){if(E(o))return c=o.length,c!==1?Array.apply(null,o):(u=new Array(1),u[0]=o[0],u);if(r(o)){for(u=new Array(c=o.length),x=0;x<c;++x)u[x]=o[x];return u}}u=[]}else p=this;if(!r(o)){if((b=o[M])!==void 0){for(k=A(b).call(o),p&&(u=new p),_=k.next(),x=0;!_.done;)P=h?f.call(h,y,_.value,x):_.value,p?(n.value=P,a(u,x,n)):u[x]=P,_=k.next(),++x;c=x}else if(e(o)){for(c=o.length,p&&(u=new p),x=0,s=0;x<c;++x)P=o[x],x+1<c&&(T=P.charCodeAt(0),T>=55296&&T<=56319&&(P+=o[++x])),P=h?f.call(h,y,P,s):P,p?(n.value=P,a(u,s,n)):u[s]=P,++s;c=s}}if(c===void 0)for(c=S(o.length),p&&(u=new p(c)),x=0;x<c;++x)P=h?f.call(h,y,o[x],x):o[x],p?(n.value=P,a(u,x,n)):u[x]=P;return p&&(n.value=null,u.length=c),u}},73051:function($){var U=Object.prototype.toString,t=U.call(function(){return arguments}());$.exports=function(M){return U.call(M)===t}},33717:function($){var U=Object.prototype.toString,t=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);$.exports=function(M){return typeof M=="function"&&t(U.call(M))}},52345:function($){$.exports=function(){}},9953:function($,U,t){$.exports=t(90436)()?Math.sign:t(6069)},90436:function($){$.exports=function(){var U=Math.sign;return typeof U!="function"?!1:U(10)===1&&U(-20)===-1}},6069:function($){$.exports=function(U){return U=Number(U),isNaN(U)||U===0?U:U>0?1:-1}},56247:function($,U,t){var M=t(9953),E=Math.abs,i=Math.floor;$.exports=function(S){return isNaN(S)?0:(S=Number(S),S===0||!isFinite(S)?S:M(S)*i(E(S)))}},35976:function($,U,t){var M=t(56247),E=Math.max;$.exports=function(i){return E(0,M(i))}},67260:function($,U,t){var M=t(78513),E=t(36672),i=Function.prototype.bind,S=Function.prototype.call,A=Object.keys,g=Object.prototype.propertyIsEnumerable;$.exports=function(v,e){return function(r,f){var n,a=arguments[2],o=arguments[3];return r=Object(E(r)),M(f),n=A(r),o&&n.sort(typeof o=="function"?i.call(o,r):void 0),typeof v!="function"&&(v=n[v]),S.call(v,n,function(h,y){return g.call(r,h)?S.call(f,a,r[h],h,r,y):e})}}},95879:function($,U,t){$.exports=t(73583)()?Object.assign:t(34205)},73583:function($){$.exports=function(){var U=Object.assign,t;return typeof U!="function"?!1:(t={foo:"raz"},U(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},34205:function($,U,t){var M=t(68700),E=t(36672),i=Math.max;$.exports=function(S,A){var g,v,e=i(arguments.length,2),r;for(S=Object(E(S)),r=function(f){try{S[f]=A[f]}catch(n){g||(g=n)}},v=1;v<e;++v)A=arguments[v],M(A).forEach(r);if(g!==void 0)throw g;return S}},19012:function($,U,t){var M=t(4892),E=t(95879),i=t(36672);$.exports=function(S){var A=Object(i(S)),g=arguments[1],v=Object(arguments[2]);if(A!==S&&!g)return A;var e={};return g?M(g,function(r){(v.ensure||r in S)&&(e[r]=S[r])}):E(e,S),e}},52818:function($,U,t){var M=Object.create,E;t(33247)()||(E=t(51882)),$.exports=function(){var i,S,A;return!E||E.level!==1?M:(i={},S={},A={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(g){if(g==="__proto__"){S[g]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}S[g]=A}),Object.defineProperties(i,S),Object.defineProperty(E,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:i}),function(g,v){return M(g===null?i:g,v)})}()},96437:function($,U,t){$.exports=t(67260)("forEach")},99611:function($,U,t){var M=t(95296),E={function:!0,object:!0};$.exports=function(i){return M(i)&&E[typeof i]||!1}},95296:function($,U,t){var M=t(52345)();$.exports=function(E){return E!==M&&E!==null}},68700:function($,U,t){$.exports=t(13895)()?Object.keys:t(25217)},13895:function($){$.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},25217:function($,U,t){var M=t(95296),E=Object.keys;$.exports=function(i){return E(M(i)?Object(i):i)}},16906:function($,U,t){var M=t(78513),E=t(96437),i=Function.prototype.call;$.exports=function(S,A){var g={},v=arguments[2];return M(A),E(S,function(e,r,f,n){g[r]=i.call(A,v,e,r,f,n)}),g}},21780:function($,U,t){var M=t(95296),E=Array.prototype.forEach,i=Object.create,S=function(A,g){var v;for(v in A)g[v]=A[v]};$.exports=function(A){var g=i(null);return E.call(arguments,function(v){M(v)&&S(Object(v),g)}),g}},1496:function($,U,t){$.exports=t(33247)()?Object.setPrototypeOf:t(51882)},33247:function($){var U=Object.create,t=Object.getPrototypeOf,M={};$.exports=function(){var E=Object.setPrototypeOf,i=arguments[0]||U;return typeof E!="function"?!1:t(E(i(null),M))===M}},51882:function($,U,t){var M=t(99611),E=t(36672),i=Object.prototype.isPrototypeOf,S=Object.defineProperty,A={configurable:!0,enumerable:!1,writable:!0,value:void 0},g;g=function(v,e){if(E(v),e===null||M(e))return v;throw new TypeError("Prototype must be null or an object")},$.exports=function(v){var e,r;return v?(v.level===2?v.set?(r=v.set,e=function(f,n){return r.call(g(f,n),n),f}):e=function(f,n){return g(f,n).__proto__=n,f}:e=function f(n,a){var o;return g(n,a),o=i.call(f.nullPolyfill,n),o&&delete f.nullPolyfill.__proto__,a===null&&(a=f.nullPolyfill),n.__proto__=a,o&&S(f.nullPolyfill,"__proto__",A),n},Object.defineProperty(e,"level",{configurable:!1,enumerable:!1,writable:!1,value:v.level})):null}(function(){var v=Object.create(null),e={},r,f=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(f){try{r=f.set,r.call(v,e)}catch{}if(Object.getPrototypeOf(v)===e)return{set:r,level:2}}return v.__proto__=e,Object.getPrototypeOf(v)===e?{level:2}:(v={},v.__proto__=e,Object.getPrototypeOf(v)===e?{level:1}:!1)}()),t(52818)},78513:function($){$.exports=function(U){if(typeof U!="function")throw new TypeError(U+" is not a function");return U}},98976:function($,U,t){var M=t(99611);$.exports=function(E){if(!M(E))throw new TypeError(E+" is not an Object");return E}},36672:function($,U,t){var M=t(95296);$.exports=function(E){if(!M(E))throw new TypeError("Cannot use null or undefined");return E}},66741:function($,U,t){$.exports=t(17557)()?String.prototype.contains:t(60381)},17557:function($){var U="razdwatrzy";$.exports=function(){return typeof U.contains!="function"?!1:U.contains("dwa")===!0&&U.contains("foo")===!1}},60381:function($){var U=String.prototype.indexOf;$.exports=function(t){return U.call(this,t,arguments[1])>-1}},87963:function($){var U=Object.prototype.toString,t=U.call("");$.exports=function(M){return typeof M=="string"||M&&typeof M=="object"&&(M instanceof String||U.call(M)===t)||!1}},43043:function($){var U=Object.create(null),t=Math.random;$.exports=function(){var M;do M=t().toString(36).slice(2);while(U[M]);return M}},32411:function($,U,t){var M=t(1496),E=t(66741),i=t(62072),S=t(8260),A=t(95426),g=Object.defineProperty,v;v=$.exports=function(e,r){if(!(this instanceof v))throw new TypeError("Constructor requires 'new'");A.call(this,e),r?E.call(r,"key+value")?r="key+value":E.call(r,"key")?r="key":r="value":r="value",g(this,"__kind__",i("",r))},M&&M(v,A),delete v.prototype.constructor,v.prototype=Object.create(A.prototype,{_resolve:i(function(e){return this.__kind__==="value"?this.__list__[e]:this.__kind__==="key+value"?[e,this.__list__[e]]:e})}),g(v.prototype,S.toStringTag,i("c","Array Iterator"))},27515:function($,U,t){var M=t(73051),E=t(78513),i=t(87963),S=t(66661),A=Array.isArray,g=Function.prototype.call,v=Array.prototype.some;$.exports=function(e,r){var f,n=arguments[2],a,o,h,y,p,x,s;if(A(e)||M(e)?f="array":i(e)?f="string":e=S(e),E(r),o=function(){h=!0},f==="array"){v.call(e,function(u){return g.call(r,n,u,o),h});return}if(f==="string"){for(p=e.length,y=0;y<p&&(x=e[y],y+1<p&&(s=x.charCodeAt(0),s>=55296&&s<=56319&&(x+=e[++y])),g.call(r,n,x,o),!h);++y);return}for(a=e.next();!a.done;){if(g.call(r,n,a.value,o),h)return;a=e.next()}}},66661:function($,U,t){var M=t(73051),E=t(87963),i=t(32411),S=t(259),A=t(58095),g=t(8260).iterator;$.exports=function(v){return typeof A(v)[g]=="function"?v[g]():M(v)?new i(v):E(v)?new S(v):new i(v)}},95426:function($,U,t){var M=t(16134),E=t(95879),i=t(78513),S=t(36672),A=t(62072),g=t(55174),v=t(8260),e=Object.defineProperty,r=Object.defineProperties,f;$.exports=f=function(n,a){if(!(this instanceof f))throw new TypeError("Constructor requires 'new'");r(this,{__list__:A("w",S(n)),__context__:A("w",a),__nextIndex__:A("w",0)}),a&&(i(a.on),a.on("_add",this._onAdd),a.on("_delete",this._onDelete),a.on("_clear",this._onClear))},delete f.prototype.constructor,r(f.prototype,E({_next:A(function(){var n;if(this.__list__){if(this.__redo__&&(n=this.__redo__.shift(),n!==void 0))return n;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:A(function(){return this._createResult(this._next())}),_createResult:A(function(n){return n===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(n)}}),_resolve:A(function(n){return this.__list__[n]}),_unBind:A(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:A(function(){return"[object "+(this[v.toStringTag]||"Object")+"]"})},g({_onAdd:A(function(n){if(!(n>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){e(this,"__redo__",A("c",[n]));return}this.__redo__.forEach(function(a,o){a>=n&&(this.__redo__[o]=++a)},this),this.__redo__.push(n)}}),_onDelete:A(function(n){var a;n>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(a=this.__redo__.indexOf(n),a!==-1&&this.__redo__.splice(a,1),this.__redo__.forEach(function(o,h){o>n&&(this.__redo__[h]=--o)},this)))}),_onClear:A(function(){this.__redo__&&M.call(this.__redo__),this.__nextIndex__=0})}))),e(f.prototype,v.iterator,A(function(){return this}))},35940:function($,U,t){var M=t(73051),E=t(95296),i=t(87963),S=t(8260).iterator,A=Array.isArray;$.exports=function(g){return E(g)?A(g)||i(g)||M(g)?!0:typeof g[S]=="function":!1}},259:function($,U,t){var M=t(1496),E=t(62072),i=t(8260),S=t(95426),A=Object.defineProperty,g;g=$.exports=function(v){if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");v=String(v),S.call(this,v),A(this,"__length__",E("",v.length))},M&&M(g,S),delete g.prototype.constructor,g.prototype=Object.create(S.prototype,{_next:E(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:E(function(v){var e=this.__list__[v],r;return this.__nextIndex__===this.__length__?e:(r=e.charCodeAt(0),r>=55296&&r<=56319?e+this.__list__[this.__nextIndex__++]:e)})}),A(g.prototype,i.toStringTag,E("c","String Iterator"))},58095:function($,U,t){var M=t(35940);$.exports=function(E){if(!M(E))throw new TypeError(E+" is not iterable");return E}},73523:function($){function U(M,E){if(M==null)throw new TypeError("Cannot convert first argument to object");for(var i=Object(M),S=1;S<arguments.length;S++){var A=arguments[S];if(A!=null)for(var g=Object.keys(Object(A)),v=0,e=g.length;v<e;v++){var r=g[v],f=Object.getOwnPropertyDescriptor(A,r);f!==void 0&&f.enumerable&&(i[r]=A[r])}}return i}function t(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:U})}$.exports={assign:U,polyfill:t}},8260:function($,U,t){$.exports=t(69711)()?t(94908).Symbol:t(18415)},69711:function($,U,t){var M=t(94908),E={object:!0,symbol:!0};$.exports=function(){var i=M.Symbol,S;if(typeof i!="function")return!1;S=i("test symbol");try{String(S)}catch{return!1}return!(!E[typeof i.iterator]||!E[typeof i.toPrimitive]||!E[typeof i.toStringTag])}},82276:function($){$.exports=function(U){return U?typeof U=="symbol"?!0:!U.constructor||U.constructor.name!=="Symbol"?!1:U[U.constructor.toStringTag]==="Symbol":!1}},29366:function($,U,t){var M=t(62072),E=Object.create,i=Object.defineProperty,S=Object.prototype,A=E(null);$.exports=function(g){for(var v=0,e,r;A[g+(v||"")];)++v;return g+=v||"",A[g]=!0,e="@@"+g,i(S,e,M.gs(null,function(f){r||(r=!0,i(this,e,M(f)),r=!1)})),e}},92842:function($,U,t){var M=t(62072),E=t(94908).Symbol;$.exports=function(i){return Object.defineProperties(i,{hasInstance:M("",E&&E.hasInstance||i("hasInstance")),isConcatSpreadable:M("",E&&E.isConcatSpreadable||i("isConcatSpreadable")),iterator:M("",E&&E.iterator||i("iterator")),match:M("",E&&E.match||i("match")),replace:M("",E&&E.replace||i("replace")),search:M("",E&&E.search||i("search")),species:M("",E&&E.species||i("species")),split:M("",E&&E.split||i("split")),toPrimitive:M("",E&&E.toPrimitive||i("toPrimitive")),toStringTag:M("",E&&E.toStringTag||i("toStringTag")),unscopables:M("",E&&E.unscopables||i("unscopables"))})}},13304:function($,U,t){var M=t(62072),E=t(53308),i=Object.create(null);$.exports=function(S){return Object.defineProperties(S,{for:M(function(A){return i[A]?i[A]:i[A]=S(String(A))}),keyFor:M(function(A){var g;E(A);for(g in i)if(i[g]===A)return g})})}},18415:function($,U,t){var M=t(62072),E=t(53308),i=t(94908).Symbol,S=t(29366),A=t(92842),g=t(13304),v=Object.create,e=Object.defineProperties,r=Object.defineProperty,f,n,a;if(typeof i=="function")try{String(i()),a=!0}catch{}else i=null;n=function(o){if(this instanceof n)throw new TypeError("Symbol is not a constructor");return f(o)},$.exports=f=function o(h){var y;if(this instanceof o)throw new TypeError("Symbol is not a constructor");return a?i(h):(y=v(n.prototype),h=h===void 0?"":String(h),e(y,{__description__:M("",h),__name__:M("",S(h))}))},A(f),g(f),e(n.prototype,{constructor:M(f),toString:M("",function(){return this.__name__})}),e(f.prototype,{toString:M(function(){return"Symbol ("+E(this).__description__+")"}),valueOf:M(function(){return E(this)})}),r(f.prototype,f.toPrimitive,M("",function(){var o=E(this);return typeof o=="symbol"?o:o.toString()})),r(f.prototype,f.toStringTag,M("c","Symbol")),r(n.prototype,f.toStringTag,M("c",f.prototype[f.toStringTag])),r(n.prototype,f.toPrimitive,M("c",f.prototype[f.toPrimitive]))},53308:function($,U,t){var M=t(82276);$.exports=function(E){if(!M(E))throw new TypeError(E+" is not a symbol");return E}},83522:function($,U,t){$.exports=t(96402)()?WeakMap:t(329)},96402:function($){$.exports=function(){var U,t;if(typeof WeakMap!="function")return!1;try{U=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(U)!=="[object WeakMap]"||typeof U.set!="function"||U.set({},1)!==U||typeof U.delete!="function"||typeof U.has!="function"||U.get(t)!=="one")}},96416:function($){$.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},329:function($,U,t){var M=t(95296),E=t(1496),i=t(98976),S=t(36672),A=t(43043),g=t(62072),v=t(66661),e=t(27515),r=t(8260).toStringTag,f=t(96416),n=Array.isArray,a=Object.defineProperty,o=Object.prototype.hasOwnProperty,h=Object.getPrototypeOf,y;$.exports=y=function(){var p=arguments[0],x;if(!(this instanceof y))throw new TypeError("Constructor requires 'new'");return x=f&&E&&WeakMap!==y?E(new WeakMap,h(this)):this,M(p)&&(n(p)||(p=v(p))),a(x,"__weakMapData__",g("c","$weakMap$"+A())),p&&e(p,function(s){S(s),x.set(s[0],s[1])}),x},f&&(E&&E(y,WeakMap),y.prototype=Object.create(WeakMap.prototype,{constructor:g(y)})),Object.defineProperties(y.prototype,{delete:g(function(p){return o.call(i(p),this.__weakMapData__)?(delete p[this.__weakMapData__],!0):!1}),get:g(function(p){if(o.call(i(p),this.__weakMapData__))return p[this.__weakMapData__]}),has:g(function(p){return o.call(i(p),this.__weakMapData__)}),set:g(function(p,x){return a(i(p),this.__weakMapData__,g("c",x)),this}),toString:g(function(){return"[object WeakMap]"})}),a(y.prototype,r,g("c","WeakMap"))},15398:function($){var U=typeof Reflect=="object"?Reflect:null,t=U&&typeof U.apply=="function"?U.apply:function(u,c,T){return Function.prototype.apply.call(u,c,T)},M;U&&typeof U.ownKeys=="function"?M=U.ownKeys:Object.getOwnPropertySymbols?M=function(u){return Object.getOwnPropertyNames(u).concat(Object.getOwnPropertySymbols(u))}:M=function(u){return Object.getOwnPropertyNames(u)};function E(u){console&&console.warn&&console.warn(u)}var i=Number.isNaN||function(u){return u!==u};function S(){S.init.call(this)}$.exports=S,$.exports.once=p,S.EventEmitter=S,S.prototype._events=void 0,S.prototype._eventsCount=0,S.prototype._maxListeners=void 0;var A=10;function g(u){if(typeof u!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof u)}Object.defineProperty(S,"defaultMaxListeners",{enumerable:!0,get:function(){return A},set:function(u){if(typeof u!="number"||u<0||i(u))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+u+".");A=u}}),S.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},S.prototype.setMaxListeners=function(u){if(typeof u!="number"||u<0||i(u))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+u+".");return this._maxListeners=u,this};function v(u){return u._maxListeners===void 0?S.defaultMaxListeners:u._maxListeners}S.prototype.getMaxListeners=function(){return v(this)},S.prototype.emit=function(u){for(var c=[],T=1;T<arguments.length;T++)c.push(arguments[T]);var k=u==="error",_=this._events;if(_!==void 0)k=k&&_.error===void 0;else if(!k)return!1;if(k){var b;if(c.length>0&&(b=c[0]),b instanceof Error)throw b;var P=new Error("Unhandled error."+(b?" ("+b.message+")":""));throw P.context=b,P}var l=_[u];if(l===void 0)return!1;if(typeof l=="function")t(l,this,c);else for(var d=l.length,L=o(l,d),T=0;T<d;++T)t(L[T],this,c);return!0};function e(u,c,T,k){var _,b,P;if(g(T),b=u._events,b===void 0?(b=u._events=Object.create(null),u._eventsCount=0):(b.newListener!==void 0&&(u.emit("newListener",c,T.listener?T.listener:T),b=u._events),P=b[c]),P===void 0)P=b[c]=T,++u._eventsCount;else if(typeof P=="function"?P=b[c]=k?[T,P]:[P,T]:k?P.unshift(T):P.push(T),_=v(u),_>0&&P.length>_&&!P.warned){P.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(c)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=u,l.type=c,l.count=P.length,E(l)}return u}S.prototype.addListener=function(u,c){return e(this,u,c,!1)},S.prototype.on=S.prototype.addListener,S.prototype.prependListener=function(u,c){return e(this,u,c,!0)};function r(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(u,c,T){var k={fired:!1,wrapFn:void 0,target:u,type:c,listener:T},_=r.bind(k);return _.listener=T,k.wrapFn=_,_}S.prototype.once=function(u,c){return g(c),this.on(u,f(this,u,c)),this},S.prototype.prependOnceListener=function(u,c){return g(c),this.prependListener(u,f(this,u,c)),this},S.prototype.removeListener=function(u,c){var T,k,_,b,P;if(g(c),k=this._events,k===void 0)return this;if(T=k[u],T===void 0)return this;if(T===c||T.listener===c)--this._eventsCount===0?this._events=Object.create(null):(delete k[u],k.removeListener&&this.emit("removeListener",u,T.listener||c));else if(typeof T!="function"){for(_=-1,b=T.length-1;b>=0;b--)if(T[b]===c||T[b].listener===c){P=T[b].listener,_=b;break}if(_<0)return this;_===0?T.shift():h(T,_),T.length===1&&(k[u]=T[0]),k.removeListener!==void 0&&this.emit("removeListener",u,P||c)}return this},S.prototype.off=S.prototype.removeListener,S.prototype.removeAllListeners=function(u){var c,T,k;if(T=this._events,T===void 0)return this;if(T.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):T[u]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete T[u]),this;if(arguments.length===0){var _=Object.keys(T),b;for(k=0;k<_.length;++k)b=_[k],b!=="removeListener"&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(c=T[u],typeof c=="function")this.removeListener(u,c);else if(c!==void 0)for(k=c.length-1;k>=0;k--)this.removeListener(u,c[k]);return this};function n(u,c,T){var k=u._events;if(k===void 0)return[];var _=k[c];return _===void 0?[]:typeof _=="function"?T?[_.listener||_]:[_]:T?y(_):o(_,_.length)}S.prototype.listeners=function(u){return n(this,u,!0)},S.prototype.rawListeners=function(u){return n(this,u,!1)},S.listenerCount=function(u,c){return typeof u.listenerCount=="function"?u.listenerCount(c):a.call(u,c)},S.prototype.listenerCount=a;function a(u){var c=this._events;if(c!==void 0){var T=c[u];if(typeof T=="function")return 1;if(T!==void 0)return T.length}return 0}S.prototype.eventNames=function(){return this._eventsCount>0?M(this._events):[]};function o(u,c){for(var T=new Array(c),k=0;k<c;++k)T[k]=u[k];return T}function h(u,c){for(;c+1<u.length;c++)u[c]=u[c+1];u.pop()}function y(u){for(var c=new Array(u.length),T=0;T<c.length;++T)c[T]=u[T].listener||u[T];return c}function p(u,c){return new Promise(function(T,k){function _(P){u.removeListener(c,b),k(P)}function b(){typeof u.removeListener=="function"&&u.removeListener("error",_),T([].slice.call(arguments))}s(u,c,b,{once:!0}),c!=="error"&&x(u,_,{once:!0})})}function x(u,c,T){typeof u.on=="function"&&s(u,"error",c,T)}function s(u,c,T,k){if(typeof u.on=="function")k.once?u.once(c,T):u.on(c,T);else if(typeof u.addEventListener=="function")u.addEventListener(c,function _(b){k.once&&u.removeEventListener(c,_),T(b)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof u)}},60774:function($){var U=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};$.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return U()}try{return __global__||U()}finally{delete Object.prototype.__global__}}()},94908:function($,U,t){$.exports=t(51152)()?globalThis:t(60774)},51152:function($){$.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},92770:function($,U,t){var M=t(18546);$.exports=function(E){var i=typeof E;if(i==="string"){var S=E;if(E=+E,E===0&&M(S))return!1}else if(i!=="number")return!1;return E-E<1}},30120:function($,U,t){var M=t(90660);$.exports=E;function E(i,S,A){if(!i)throw new TypeError("must specify data as first parameter");if(A=+(A||0)|0,Array.isArray(i)&&i[0]&&typeof i[0][0]=="number"){var g=i[0].length,v=i.length*g,e,r,f,n;(!S||typeof S=="string")&&(S=new(M(S||"float32"))(v+A));var a=S.length-A;if(v!==a)throw new Error("source length "+v+" ("+g+"x"+i.length+") does not match destination length "+a);for(e=0,f=A;e<i.length;e++)for(r=0;r<g;r++)S[f++]=i[e][r]===null?NaN:i[e][r]}else if(!S||typeof S=="string"){var o=M(S||"float32");if(Array.isArray(i)||S==="array")for(S=new o(i.length+A),e=0,f=A,n=S.length;f<n;f++,e++)S[f]=i[e]===null?NaN:i[e];else A===0?S=new o(i):(S=new o(i.length+A),S.set(i,A))}else S.set(i,A);return S}},68016:function($,U,t){var M=t(53313),E=[32,126];$.exports=i;function i(S){S=S||{};var A=S.shape?S.shape:S.canvas?[S.canvas.width,S.canvas.height]:[512,512],g=S.canvas||document.createElement("canvas"),v=S.font,e=typeof S.step=="number"?[S.step,S.step]:S.step||[32,32],r=S.chars||E;if(v&&typeof v!="string"&&(v=M(v)),!Array.isArray(r))r=String(r).split("");else if(r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"){for(var f=[],n=r[0],a=0;n<=r[1];n++)f[a++]=String.fromCharCode(n);r=f}A=A.slice(),g.width=A[0],g.height=A[1];var o=g.getContext("2d");o.fillStyle="#000",o.fillRect(0,0,g.width,g.height),o.font=v,o.textAlign="center",o.textBaseline="middle",o.fillStyle="#fff";for(var h=e[0]/2,y=e[1]/2,n=0;n<r.length;n++)o.fillText(r[n],h,y),(h+=e[0])>A[0]-e[0]/2&&(h=e[0]/2,y+=e[1]);return g}},32879:function($){$.exports=U,U.canvas=document.createElement("canvas"),U.cache={};function U(r,S){S||(S={}),(typeof r=="string"||Array.isArray(r))&&(S.family=r);var A=Array.isArray(S.family)?S.family.join(", "):S.family;if(!A)throw Error("`family` must be defined");var g=S.size||S.fontSize||S.em||48,v=S.weight||S.fontWeight||"",e=S.style||S.fontStyle||"",r=[e,v,g].join(" ")+"px "+A,f=S.origin||"top";if(U.cache[A]&&g<=U.cache[A].em)return t(U.cache[A],f);var n=S.canvas||U.canvas,a=n.getContext("2d"),o={upper:S.upper!==void 0?S.upper:"H",lower:S.lower!==void 0?S.lower:"x",descent:S.descent!==void 0?S.descent:"p",ascent:S.ascent!==void 0?S.ascent:"h",tittle:S.tittle!==void 0?S.tittle:"i",overshoot:S.overshoot!==void 0?S.overshoot:"O"},h=Math.ceil(g*1.5);n.height=h,n.width=h*.5,a.font=r;var y="H",p={top:0};a.clearRect(0,0,h,h),a.textBaseline="top",a.fillStyle="black",a.fillText(y,0,0);var x=M(a.getImageData(0,0,h,h));a.clearRect(0,0,h,h),a.textBaseline="bottom",a.fillText(y,0,h);var s=M(a.getImageData(0,0,h,h));p.lineHeight=p.bottom=h-s+x,a.clearRect(0,0,h,h),a.textBaseline="alphabetic",a.fillText(y,0,h);var u=M(a.getImageData(0,0,h,h)),c=h-u-1+x;p.baseline=p.alphabetic=c,a.clearRect(0,0,h,h),a.textBaseline="middle",a.fillText(y,0,h*.5);var T=M(a.getImageData(0,0,h,h));p.median=p.middle=h-T-1+x-h*.5,a.clearRect(0,0,h,h),a.textBaseline="hanging",a.fillText(y,0,h*.5);var k=M(a.getImageData(0,0,h,h));p.hanging=h-k-1+x-h*.5,a.clearRect(0,0,h,h),a.textBaseline="ideographic",a.fillText(y,0,h);var _=M(a.getImageData(0,0,h,h));if(p.ideographic=h-_-1+x,o.upper&&(a.clearRect(0,0,h,h),a.textBaseline="top",a.fillText(o.upper,0,0),p.upper=M(a.getImageData(0,0,h,h)),p.capHeight=p.baseline-p.upper),o.lower&&(a.clearRect(0,0,h,h),a.textBaseline="top",a.fillText(o.lower,0,0),p.lower=M(a.getImageData(0,0,h,h)),p.xHeight=p.baseline-p.lower),o.tittle&&(a.clearRect(0,0,h,h),a.textBaseline="top",a.fillText(o.tittle,0,0),p.tittle=M(a.getImageData(0,0,h,h))),o.ascent&&(a.clearRect(0,0,h,h),a.textBaseline="top",a.fillText(o.ascent,0,0),p.ascent=M(a.getImageData(0,0,h,h))),o.descent&&(a.clearRect(0,0,h,h),a.textBaseline="top",a.fillText(o.descent,0,0),p.descent=E(a.getImageData(0,0,h,h))),o.overshoot){a.clearRect(0,0,h,h),a.textBaseline="top",a.fillText(o.overshoot,0,0);var b=E(a.getImageData(0,0,h,h));p.overshoot=b-c}for(var P in p)p[P]/=g;return p.em=g,U.cache[A]=p,t(p,f)}function t(i,S){var A={};typeof S=="string"&&(S=i[S]);for(var g in i)g!=="em"&&(A[g]=i[g]-S);return A}function M(i){for(var S=i.height,A=i.data,g=3;g<A.length;g+=4)if(A[g]!==0)return Math.floor((g-3)*.25/S)}function E(i){for(var S=i.height,A=i.data,g=A.length-1;g>0;g-=4)if(A[g]!==0)return Math.floor((g-3)*.25/S)}},31353:function($,U,t){var M=t(85395),E=Object.prototype.toString,i=Object.prototype.hasOwnProperty,S=function(e,r,f){for(var n=0,a=e.length;n<a;n++)i.call(e,n)&&(f==null?r(e[n],n,e):r.call(f,e[n],n,e))},A=function(e,r,f){for(var n=0,a=e.length;n<a;n++)f==null?r(e.charAt(n),n,e):r.call(f,e.charAt(n),n,e)},g=function(e,r,f){for(var n in e)i.call(e,n)&&(f==null?r(e[n],n,e):r.call(f,e[n],n,e))},v=function(e,r,f){if(!M(r))throw new TypeError("iterator must be a function");var n;arguments.length>=3&&(n=f),E.call(e)==="[object Array]"?S(e,r,n):typeof e=="string"?A(e,r,n):g(e,r,n)};$.exports=v},73047:function($){var U="Function.prototype.bind called on incompatible ",t=Array.prototype.slice,M=Object.prototype.toString,E="[object Function]";$.exports=function(i){var S=this;if(typeof S!="function"||M.call(S)!==E)throw new TypeError(U+S);for(var A=t.call(arguments,1),g,v=function(){if(this instanceof g){var a=S.apply(this,A.concat(t.call(arguments)));return Object(a)===a?a:this}else return S.apply(i,A.concat(t.call(arguments)))},e=Math.max(0,S.length-A.length),r=[],f=0;f<e;f++)r.push("$"+f);if(g=Function("binder","return function ("+r.join(",")+"){ return binder.apply(this,arguments); }")(v),S.prototype){var n=function(){};n.prototype=S.prototype,g.prototype=new n,n.prototype=null}return g}},77575:function($,U,t){var M=t(73047);$.exports=Function.prototype.bind||M},86249:function($){$.exports=U;function U(t,M){if(typeof t!="string")throw new TypeError("must specify type string");if(M=M||{},typeof document>"u"&&!M.canvas)return null;var E=M.canvas||document.createElement("canvas");typeof M.width=="number"&&(E.width=M.width),typeof M.height=="number"&&(E.height=M.height);var i=M,S;try{var A=[t];t.indexOf("webgl")===0&&A.push("experimental-"+t);for(var g=0;g<A.length;g++)if(S=E.getContext(A[g],i),S)return S}catch{S=null}return S||null}},68318:function($,U,t){var M,E=SyntaxError,i=Function,S=TypeError,A=function(L){try{return i('"use strict"; return ('+L+").constructor;")()}catch{}},g=Object.getOwnPropertyDescriptor;if(g)try{g({},"")}catch{g=null}var v=function(){throw new S},e=g?function(){try{return arguments.callee,v}catch{try{return g(arguments,"callee").get}catch{return v}}}():v,r=t(57877)(),f=Object.getPrototypeOf||function(L){return L.__proto__},n={},a=typeof Uint8Array>"u"?M:f(Uint8Array),o={"%AggregateError%":typeof AggregateError>"u"?M:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?M:ArrayBuffer,"%ArrayIteratorPrototype%":r?f([][Symbol.iterator]()):M,"%AsyncFromSyncIteratorPrototype%":M,"%AsyncFunction%":n,"%AsyncGenerator%":n,"%AsyncGeneratorFunction%":n,"%AsyncIteratorPrototype%":n,"%Atomics%":typeof Atomics>"u"?M:Atomics,"%BigInt%":typeof BigInt>"u"?M:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?M:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?M:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?M:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?M:Float32Array,"%Float64Array%":typeof Float64Array>"u"?M:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?M:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":n,"%Int8Array%":typeof Int8Array>"u"?M:Int8Array,"%Int16Array%":typeof Int16Array>"u"?M:Int16Array,"%Int32Array%":typeof Int32Array>"u"?M:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":r?f(f([][Symbol.iterator]())):M,"%JSON%":typeof JSON=="object"?JSON:M,"%Map%":typeof Map>"u"?M:Map,"%MapIteratorPrototype%":typeof Map>"u"||!r?M:f(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?M:Promise,"%Proxy%":typeof Proxy>"u"?M:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?M:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?M:Set,"%SetIteratorPrototype%":typeof Set>"u"||!r?M:f(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?M:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":r?f(""[Symbol.iterator]()):M,"%Symbol%":r?Symbol:M,"%SyntaxError%":E,"%ThrowTypeError%":e,"%TypedArray%":a,"%TypeError%":S,"%Uint8Array%":typeof Uint8Array>"u"?M:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?M:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?M:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?M:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?M:WeakMap,"%WeakRef%":typeof WeakRef>"u"?M:WeakRef,"%WeakSet%":typeof WeakSet>"u"?M:WeakSet};try{null.error}catch(L){var h=f(f(L));o["%Error.prototype%"]=h}var y=function L(w){var I;if(w==="%AsyncFunction%")I=A("async function () {}");else if(w==="%GeneratorFunction%")I=A("function* () {}");else if(w==="%AsyncGeneratorFunction%")I=A("async function* () {}");else if(w==="%AsyncGenerator%"){var z=L("%AsyncGeneratorFunction%");z&&(I=z.prototype)}else if(w==="%AsyncIteratorPrototype%"){var B=L("%AsyncGenerator%");B&&(I=f(B.prototype))}return o[w]=I,I},p={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},x=t(77575),s=t(35065),u=x.call(Function.call,Array.prototype.concat),c=x.call(Function.apply,Array.prototype.splice),T=x.call(Function.call,String.prototype.replace),k=x.call(Function.call,String.prototype.slice),_=x.call(Function.call,RegExp.prototype.exec),b=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,P=/\\(\\)?/g,l=function(L){var w=k(L,0,1),I=k(L,-1);if(w==="%"&&I!=="%")throw new E("invalid intrinsic syntax, expected closing `%`");if(I==="%"&&w!=="%")throw new E("invalid intrinsic syntax, expected opening `%`");var z=[];return T(L,b,function(B,O,R,C){z[z.length]=R?T(C,P,"$1"):O||B}),z},d=function(L,w){var I=L,z;if(s(p,I)&&(z=p[I],I="%"+z[0]+"%"),s(o,I)){var B=o[I];if(B===n&&(B=y(I)),typeof B>"u"&&!w)throw new S("intrinsic "+L+" exists, but is not available. Please file an issue!");return{alias:z,name:I,value:B}}throw new E("intrinsic "+L+" does not exist!")};$.exports=function(L,w){if(typeof L!="string"||L.length===0)throw new S("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof w!="boolean")throw new S('"allowMissing" argument must be a boolean');if(_(/^%?[^%]*%?$/,L)===null)throw new E("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var I=l(L),z=I.length>0?I[0]:"",B=d("%"+z+"%",w),O=B.name,R=B.value,C=!1,F=B.alias;F&&(z=F[0],c(I,u([0,1],F)));for(var N=1,V=!0;N<I.length;N+=1){var K=I[N],Q=k(K,0,1),at=k(K,-1);if((Q==='"'||Q==="'"||Q==="`"||at==='"'||at==="'"||at==="`")&&Q!==at)throw new E("property names with quotes must have matching quotes");if((K==="constructor"||!V)&&(C=!0),z+="."+K,O="%"+z+"%",s(o,O))R=o[O];else if(R!=null){if(!(K in R)){if(!w)throw new S("base intrinsic for "+L+" exists, but the property is not available.");return}if(g&&N+1>=I.length){var it=g(R,K);V=!!it,V&&"get"in it&&!("originalValue"in it.get)?R=it.get:R=R[K]}else V=s(R,K),R=R[K];V&&!C&&(o[O]=R)}}return R}},85400:function($){$.exports=U;function U(t,M){var E=M[0],i=M[1],S=M[2],A=M[3],g=M[4],v=M[5],e=M[6],r=M[7],f=M[8],n=M[9],a=M[10],o=M[11],h=M[12],y=M[13],p=M[14],x=M[15];return t[0]=v*(a*x-o*p)-n*(e*x-r*p)+y*(e*o-r*a),t[1]=-(i*(a*x-o*p)-n*(S*x-A*p)+y*(S*o-A*a)),t[2]=i*(e*x-r*p)-v*(S*x-A*p)+y*(S*r-A*e),t[3]=-(i*(e*o-r*a)-v*(S*o-A*a)+n*(S*r-A*e)),t[4]=-(g*(a*x-o*p)-f*(e*x-r*p)+h*(e*o-r*a)),t[5]=E*(a*x-o*p)-f*(S*x-A*p)+h*(S*o-A*a),t[6]=-(E*(e*x-r*p)-g*(S*x-A*p)+h*(S*r-A*e)),t[7]=E*(e*o-r*a)-g*(S*o-A*a)+f*(S*r-A*e),t[8]=g*(n*x-o*y)-f*(v*x-r*y)+h*(v*o-r*n),t[9]=-(E*(n*x-o*y)-f*(i*x-A*y)+h*(i*o-A*n)),t[10]=E*(v*x-r*y)-g*(i*x-A*y)+h*(i*r-A*v),t[11]=-(E*(v*o-r*n)-g*(i*o-A*n)+f*(i*r-A*v)),t[12]=-(g*(n*p-a*y)-f*(v*p-e*y)+h*(v*a-e*n)),t[13]=E*(n*p-a*y)-f*(i*p-S*y)+h*(i*a-S*n),t[14]=-(E*(v*p-e*y)-g*(i*p-S*y)+h*(i*e-S*v)),t[15]=E*(v*a-e*n)-g*(i*a-S*n)+f*(i*e-S*v),t}},42331:function($){$.exports=U;function U(t){var M=new Float32Array(16);return M[0]=t[0],M[1]=t[1],M[2]=t[2],M[3]=t[3],M[4]=t[4],M[5]=t[5],M[6]=t[6],M[7]=t[7],M[8]=t[8],M[9]=t[9],M[10]=t[10],M[11]=t[11],M[12]=t[12],M[13]=t[13],M[14]=t[14],M[15]=t[15],M}},31042:function($){$.exports=U;function U(t,M){return t[0]=M[0],t[1]=M[1],t[2]=M[2],t[3]=M[3],t[4]=M[4],t[5]=M[5],t[6]=M[6],t[7]=M[7],t[8]=M[8],t[9]=M[9],t[10]=M[10],t[11]=M[11],t[12]=M[12],t[13]=M[13],t[14]=M[14],t[15]=M[15],t}},11902:function($){$.exports=U;function U(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},89887:function($){$.exports=U;function U(t){var M=t[0],E=t[1],i=t[2],S=t[3],A=t[4],g=t[5],v=t[6],e=t[7],r=t[8],f=t[9],n=t[10],a=t[11],o=t[12],h=t[13],y=t[14],p=t[15],x=M*g-E*A,s=M*v-i*A,u=M*e-S*A,c=E*v-i*g,T=E*e-S*g,k=i*e-S*v,_=r*h-f*o,b=r*y-n*o,P=r*p-a*o,l=f*y-n*h,d=f*p-a*h,L=n*p-a*y;return x*L-s*d+u*l+c*P-T*b+k*_}},27812:function($){$.exports=U;function U(t,M){var E=M[0],i=M[1],S=M[2],A=M[3],g=E+E,v=i+i,e=S+S,r=E*g,f=i*g,n=i*v,a=S*g,o=S*v,h=S*e,y=A*g,p=A*v,x=A*e;return t[0]=1-n-h,t[1]=f+x,t[2]=a-p,t[3]=0,t[4]=f-x,t[5]=1-r-h,t[6]=o+y,t[7]=0,t[8]=a+p,t[9]=o-y,t[10]=1-r-n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},34045:function($){$.exports=U;function U(t,M,E){var i,S,A,g=E[0],v=E[1],e=E[2],r=Math.sqrt(g*g+v*v+e*e);return Math.abs(r)<1e-6?null:(r=1/r,g*=r,v*=r,e*=r,i=Math.sin(M),S=Math.cos(M),A=1-S,t[0]=g*g*A+S,t[1]=v*g*A+e*i,t[2]=e*g*A-v*i,t[3]=0,t[4]=g*v*A-e*i,t[5]=v*v*A+S,t[6]=e*v*A+g*i,t[7]=0,t[8]=g*e*A+v*i,t[9]=v*e*A-g*i,t[10]=e*e*A+S,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}},45973:function($){$.exports=U;function U(t,M,E){var i=M[0],S=M[1],A=M[2],g=M[3],v=i+i,e=S+S,r=A+A,f=i*v,n=i*e,a=i*r,o=S*e,h=S*r,y=A*r,p=g*v,x=g*e,s=g*r;return t[0]=1-(o+y),t[1]=n+s,t[2]=a-x,t[3]=0,t[4]=n-s,t[5]=1-(f+y),t[6]=h+p,t[7]=0,t[8]=a+x,t[9]=h-p,t[10]=1-(f+o),t[11]=0,t[12]=E[0],t[13]=E[1],t[14]=E[2],t[15]=1,t}},81472:function($){$.exports=U;function U(t,M){return t[0]=M[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=M[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=M[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},14669:function($){$.exports=U;function U(t,M){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=M[0],t[13]=M[1],t[14]=M[2],t[15]=1,t}},75262:function($){$.exports=U;function U(t,M){var E=Math.sin(M),i=Math.cos(M);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=E,t[7]=0,t[8]=0,t[9]=-E,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},331:function($){$.exports=U;function U(t,M){var E=Math.sin(M),i=Math.cos(M);return t[0]=i,t[1]=0,t[2]=-E,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=E,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},11049:function($){$.exports=U;function U(t,M){var E=Math.sin(M),i=Math.cos(M);return t[0]=i,t[1]=E,t[2]=0,t[3]=0,t[4]=-E,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},75195:function($){$.exports=U;function U(t,M,E,i,S,A,g){var v=1/(E-M),e=1/(S-i),r=1/(A-g);return t[0]=A*2*v,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=A*2*e,t[6]=0,t[7]=0,t[8]=(E+M)*v,t[9]=(S+i)*e,t[10]=(g+A)*r,t[11]=-1,t[12]=0,t[13]=0,t[14]=g*A*2*r,t[15]=0,t}},71551:function($){$.exports=U;function U(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},79576:function($,U,t){$.exports={create:t(11902),clone:t(42331),copy:t(31042),identity:t(71551),transpose:t(88654),invert:t(95874),adjoint:t(85400),determinant:t(89887),multiply:t(91362),translate:t(31283),scale:t(10789),rotate:t(65074),rotateX:t(35545),rotateY:t(94918),rotateZ:t(15692),fromRotation:t(34045),fromRotationTranslation:t(45973),fromScaling:t(81472),fromTranslation:t(14669),fromXRotation:t(75262),fromYRotation:t(331),fromZRotation:t(11049),fromQuat:t(27812),frustum:t(75195),perspective:t(7864),perspectiveFromFieldOfView:t(35279),ortho:t(60378),lookAt:t(65551),str:t(6726)}},95874:function($){$.exports=U;function U(t,M){var E=M[0],i=M[1],S=M[2],A=M[3],g=M[4],v=M[5],e=M[6],r=M[7],f=M[8],n=M[9],a=M[10],o=M[11],h=M[12],y=M[13],p=M[14],x=M[15],s=E*v-i*g,u=E*e-S*g,c=E*r-A*g,T=i*e-S*v,k=i*r-A*v,_=S*r-A*e,b=f*y-n*h,P=f*p-a*h,l=f*x-o*h,d=n*p-a*y,L=n*x-o*y,w=a*x-o*p,I=s*w-u*L+c*d+T*l-k*P+_*b;return I?(I=1/I,t[0]=(v*w-e*L+r*d)*I,t[1]=(S*L-i*w-A*d)*I,t[2]=(y*_-p*k+x*T)*I,t[3]=(a*k-n*_-o*T)*I,t[4]=(e*l-g*w-r*P)*I,t[5]=(E*w-S*l+A*P)*I,t[6]=(p*c-h*_-x*u)*I,t[7]=(f*_-a*c+o*u)*I,t[8]=(g*L-v*l+r*b)*I,t[9]=(i*l-E*L-A*b)*I,t[10]=(h*k-y*c+x*s)*I,t[11]=(n*c-f*k-o*s)*I,t[12]=(v*P-g*d-e*b)*I,t[13]=(E*d-i*P+S*b)*I,t[14]=(y*u-h*T-p*s)*I,t[15]=(f*T-n*u+a*s)*I,t):null}},65551:function($,U,t){var M=t(71551);$.exports=E;function E(i,S,A,g){var v,e,r,f,n,a,o,h,y,p,x=S[0],s=S[1],u=S[2],c=g[0],T=g[1],k=g[2],_=A[0],b=A[1],P=A[2];return Math.abs(x-_)<1e-6&&Math.abs(s-b)<1e-6&&Math.abs(u-P)<1e-6?M(i):(o=x-_,h=s-b,y=u-P,p=1/Math.sqrt(o*o+h*h+y*y),o*=p,h*=p,y*=p,v=T*y-k*h,e=k*o-c*y,r=c*h-T*o,p=Math.sqrt(v*v+e*e+r*r),p?(p=1/p,v*=p,e*=p,r*=p):(v=0,e=0,r=0),f=h*r-y*e,n=y*v-o*r,a=o*e-h*v,p=Math.sqrt(f*f+n*n+a*a),p?(p=1/p,f*=p,n*=p,a*=p):(f=0,n=0,a=0),i[0]=v,i[1]=f,i[2]=o,i[3]=0,i[4]=e,i[5]=n,i[6]=h,i[7]=0,i[8]=r,i[9]=a,i[10]=y,i[11]=0,i[12]=-(v*x+e*s+r*u),i[13]=-(f*x+n*s+a*u),i[14]=-(o*x+h*s+y*u),i[15]=1,i)}},91362:function($){$.exports=U;function U(t,M,E){var i=M[0],S=M[1],A=M[2],g=M[3],v=M[4],e=M[5],r=M[6],f=M[7],n=M[8],a=M[9],o=M[10],h=M[11],y=M[12],p=M[13],x=M[14],s=M[15],u=E[0],c=E[1],T=E[2],k=E[3];return t[0]=u*i+c*v+T*n+k*y,t[1]=u*S+c*e+T*a+k*p,t[2]=u*A+c*r+T*o+k*x,t[3]=u*g+c*f+T*h+k*s,u=E[4],c=E[5],T=E[6],k=E[7],t[4]=u*i+c*v+T*n+k*y,t[5]=u*S+c*e+T*a+k*p,t[6]=u*A+c*r+T*o+k*x,t[7]=u*g+c*f+T*h+k*s,u=E[8],c=E[9],T=E[10],k=E[11],t[8]=u*i+c*v+T*n+k*y,t[9]=u*S+c*e+T*a+k*p,t[10]=u*A+c*r+T*o+k*x,t[11]=u*g+c*f+T*h+k*s,u=E[12],c=E[13],T=E[14],k=E[15],t[12]=u*i+c*v+T*n+k*y,t[13]=u*S+c*e+T*a+k*p,t[14]=u*A+c*r+T*o+k*x,t[15]=u*g+c*f+T*h+k*s,t}},60378:function($){$.exports=U;function U(t,M,E,i,S,A,g){var v=1/(M-E),e=1/(i-S),r=1/(A-g);return t[0]=-2*v,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*r,t[11]=0,t[12]=(M+E)*v,t[13]=(S+i)*e,t[14]=(g+A)*r,t[15]=1,t}},7864:function($){$.exports=U;function U(t,M,E,i,S){var A=1/Math.tan(M/2),g=1/(i-S);return t[0]=A/E,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=A,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(S+i)*g,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*S*i*g,t[15]=0,t}},35279:function($){$.exports=U;function U(t,M,E,i){var S=Math.tan(M.upDegrees*Math.PI/180),A=Math.tan(M.downDegrees*Math.PI/180),g=Math.tan(M.leftDegrees*Math.PI/180),v=Math.tan(M.rightDegrees*Math.PI/180),e=2/(g+v),r=2/(S+A);return t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=-((g-v)*e*.5),t[9]=(S-A)*r*.5,t[10]=i/(E-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*E/(E-i),t[15]=0,t}},65074:function($){$.exports=U;function U(t,M,E,i){var S=i[0],A=i[1],g=i[2],v=Math.sqrt(S*S+A*A+g*g),e,r,f,n,a,o,h,y,p,x,s,u,c,T,k,_,b,P,l,d,L,w,I,z;return Math.abs(v)<1e-6?null:(v=1/v,S*=v,A*=v,g*=v,e=Math.sin(E),r=Math.cos(E),f=1-r,n=M[0],a=M[1],o=M[2],h=M[3],y=M[4],p=M[5],x=M[6],s=M[7],u=M[8],c=M[9],T=M[10],k=M[11],_=S*S*f+r,b=A*S*f+g*e,P=g*S*f-A*e,l=S*A*f-g*e,d=A*A*f+r,L=g*A*f+S*e,w=S*g*f+A*e,I=A*g*f-S*e,z=g*g*f+r,t[0]=n*_+y*b+u*P,t[1]=a*_+p*b+c*P,t[2]=o*_+x*b+T*P,t[3]=h*_+s*b+k*P,t[4]=n*l+y*d+u*L,t[5]=a*l+p*d+c*L,t[6]=o*l+x*d+T*L,t[7]=h*l+s*d+k*L,t[8]=n*w+y*I+u*z,t[9]=a*w+p*I+c*z,t[10]=o*w+x*I+T*z,t[11]=h*w+s*I+k*z,M!==t&&(t[12]=M[12],t[13]=M[13],t[14]=M[14],t[15]=M[15]),t)}},35545:function($){$.exports=U;function U(t,M,E){var i=Math.sin(E),S=Math.cos(E),A=M[4],g=M[5],v=M[6],e=M[7],r=M[8],f=M[9],n=M[10],a=M[11];return M!==t&&(t[0]=M[0],t[1]=M[1],t[2]=M[2],t[3]=M[3],t[12]=M[12],t[13]=M[13],t[14]=M[14],t[15]=M[15]),t[4]=A*S+r*i,t[5]=g*S+f*i,t[6]=v*S+n*i,t[7]=e*S+a*i,t[8]=r*S-A*i,t[9]=f*S-g*i,t[10]=n*S-v*i,t[11]=a*S-e*i,t}},94918:function($){$.exports=U;function U(t,M,E){var i=Math.sin(E),S=Math.cos(E),A=M[0],g=M[1],v=M[2],e=M[3],r=M[8],f=M[9],n=M[10],a=M[11];return M!==t&&(t[4]=M[4],t[5]=M[5],t[6]=M[6],t[7]=M[7],t[12]=M[12],t[13]=M[13],t[14]=M[14],t[15]=M[15]),t[0]=A*S-r*i,t[1]=g*S-f*i,t[2]=v*S-n*i,t[3]=e*S-a*i,t[8]=A*i+r*S,t[9]=g*i+f*S,t[10]=v*i+n*S,t[11]=e*i+a*S,t}},15692:function($){$.exports=U;function U(t,M,E){var i=Math.sin(E),S=Math.cos(E),A=M[0],g=M[1],v=M[2],e=M[3],r=M[4],f=M[5],n=M[6],a=M[7];return M!==t&&(t[8]=M[8],t[9]=M[9],t[10]=M[10],t[11]=M[11],t[12]=M[12],t[13]=M[13],t[14]=M[14],t[15]=M[15]),t[0]=A*S+r*i,t[1]=g*S+f*i,t[2]=v*S+n*i,t[3]=e*S+a*i,t[4]=r*S-A*i,t[5]=f*S-g*i,t[6]=n*S-v*i,t[7]=a*S-e*i,t}},10789:function($){$.exports=U;function U(t,M,E){var i=E[0],S=E[1],A=E[2];return t[0]=M[0]*i,t[1]=M[1]*i,t[2]=M[2]*i,t[3]=M[3]*i,t[4]=M[4]*S,t[5]=M[5]*S,t[6]=M[6]*S,t[7]=M[7]*S,t[8]=M[8]*A,t[9]=M[9]*A,t[10]=M[10]*A,t[11]=M[11]*A,t[12]=M[12],t[13]=M[13],t[14]=M[14],t[15]=M[15],t}},6726:function($){$.exports=U;function U(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}},31283:function($){$.exports=U;function U(t,M,E){var i=E[0],S=E[1],A=E[2],g,v,e,r,f,n,a,o,h,y,p,x;return M===t?(t[12]=M[0]*i+M[4]*S+M[8]*A+M[12],t[13]=M[1]*i+M[5]*S+M[9]*A+M[13],t[14]=M[2]*i+M[6]*S+M[10]*A+M[14],t[15]=M[3]*i+M[7]*S+M[11]*A+M[15]):(g=M[0],v=M[1],e=M[2],r=M[3],f=M[4],n=M[5],a=M[6],o=M[7],h=M[8],y=M[9],p=M[10],x=M[11],t[0]=g,t[1]=v,t[2]=e,t[3]=r,t[4]=f,t[5]=n,t[6]=a,t[7]=o,t[8]=h,t[9]=y,t[10]=p,t[11]=x,t[12]=g*i+f*S+h*A+M[12],t[13]=v*i+n*S+y*A+M[13],t[14]=e*i+a*S+p*A+M[14],t[15]=r*i+o*S+x*A+M[15]),t}},88654:function($){$.exports=U;function U(t,M){if(t===M){var E=M[1],i=M[2],S=M[3],A=M[6],g=M[7],v=M[11];t[1]=M[4],t[2]=M[8],t[3]=M[12],t[4]=E,t[6]=M[9],t[7]=M[13],t[8]=i,t[9]=A,t[11]=M[14],t[12]=S,t[13]=g,t[14]=v}else t[0]=M[0],t[1]=M[4],t[2]=M[8],t[3]=M[12],t[4]=M[1],t[5]=M[5],t[6]=M[9],t[7]=M[13],t[8]=M[2],t[9]=M[6],t[10]=M[10],t[11]=M[14],t[12]=M[3],t[13]=M[7],t[14]=M[11],t[15]=M[15];return t}},42505:function($,U,t){var M=t(72791),E=t(71299),i=t(98580),S=t(12018),A=t(83522),g=t(25075),v=t(68016),e=t(58404),r=t(18863),f=t(10973),n=t(25677),a=t(75686),o=t(53545),h=t(56131),y=t(32879),p=t(30120),x=t(13547),s=x.nextPow2,u=new A,c=!1;if(document.body){var T=document.body.appendChild(document.createElement("div"));T.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(T).fontStretch&&(c=!0),document.body.removeChild(T)}var k=function(b){_(b)?(b={regl:b},this.gl=b.regl._gl):this.gl=S(b),this.shader=u.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=b.regl||i({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),u.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(f(b)?b:{})};k.prototype.createShader=function(){var b=this.regl,P=b({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:b.prop("count"),offset:b.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:b.this("sizeBuffer")},width:{offset:0,stride:8,buffer:b.this("sizeBuffer")},char:b.this("charBuffer"),position:b.this("position")},uniforms:{atlasSize:function(d,L){return[L.atlas.width,L.atlas.height]},atlasDim:function(d,L){return[L.atlas.cols,L.atlas.rows]},atlas:function(d,L){return L.atlas.texture},charStep:function(d,L){return L.atlas.step},em:function(d,L){return L.atlas.em},color:b.prop("color"),opacity:b.prop("opacity"),viewport:b.this("viewportArray"),scale:b.this("scale"),align:b.prop("align"),baseline:b.prop("baseline"),translate:b.this("translate"),positionOffset:b.prop("positionOffset")},primitive:"points",viewport:b.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),l={};return{regl:b,draw:P,atlas:l}},k.prototype.update=function(b){var P=this;if(typeof b=="string")b={text:b};else if(!b)return;b=E(b,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),b.opacity!=null&&(Array.isArray(b.opacity)?this.opacity=b.opacity.map(function(Bt){return parseFloat(Bt)}):this.opacity=parseFloat(b.opacity)),b.viewport!=null&&(this.viewport=r(b.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),b.kerning!=null&&(this.kerning=b.kerning),b.offset!=null&&(typeof b.offset=="number"&&(b.offset=[b.offset,0]),this.positionOffset=p(b.offset)),b.direction&&(this.direction=b.direction),b.range&&(this.range=b.range,this.scale=[1/(b.range[2]-b.range[0]),1/(b.range[3]-b.range[1])],this.translate=[-b.range[0],-b.range[1]]),b.scale&&(this.scale=b.scale),b.translate&&(this.translate=b.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!b.font&&(b.font=k.baseFontSize+"px sans-serif");var l=!1,d=!1;if(b.font&&(Array.isArray(b.font)?b.font:[b.font]).forEach(function(Bt,kt){if(typeof Bt=="string")try{Bt=M.parse(Bt)}catch{Bt=M.parse(k.baseFontSize+"px "+Bt)}else Bt=M.parse(M.stringify(Bt));var jt=M.stringify({size:k.baseFontSize,family:Bt.family,stretch:c?Bt.stretch:void 0,variant:Bt.variant,weight:Bt.weight,style:Bt.style}),Ht=n(Bt.size),Vt=Math.round(Ht[0]*a(Ht[1]));if(Vt!==P.fontSize[kt]&&(d=!0,P.fontSize[kt]=Vt),(!P.font[kt]||jt!=P.font[kt].baseString)&&(l=!0,P.font[kt]=k.fonts[jt],!P.font[kt])){var ee=Bt.family.join(", "),te=[Bt.style];Bt.style!=Bt.variant&&te.push(Bt.variant),Bt.variant!=Bt.weight&&te.push(Bt.weight),c&&Bt.weight!=Bt.stretch&&te.push(Bt.stretch),P.font[kt]={baseString:jt,family:ee,weight:Bt.weight,stretch:Bt.stretch,style:Bt.style,variant:Bt.variant,width:{},kerning:{},metrics:y(ee,{origin:"top",fontSize:k.baseFontSize,fontStyle:te.join(" ")})},k.fonts[jt]=P.font[kt]}}),(l||d)&&this.font.forEach(function(Bt,kt){var jt=M.stringify({size:P.fontSize[kt],family:Bt.family,stretch:c?Bt.stretch:void 0,variant:Bt.variant,weight:Bt.weight,style:Bt.style});if(P.fontAtlas[kt]=P.shader.atlas[jt],!P.fontAtlas[kt]){var Ht=Bt.metrics;P.shader.atlas[jt]=P.fontAtlas[kt]={fontString:jt,step:Math.ceil(P.fontSize[kt]*Ht.bottom*.5)*2,em:P.fontSize[kt],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:P.regl.texture()}}b.text==null&&(b.text=P.text)}),typeof b.text=="string"&&b.position&&b.position.length>2){for(var L=Array(b.position.length*.5),w=0;w<L.length;w++)L[w]=b.text;b.text=L}var I;if(b.text!=null||l){if(this.textOffsets=[0],Array.isArray(b.text)){this.count=b.text[0].length,this.counts=[this.count];for(var z=1;z<b.text.length;z++)this.textOffsets[z]=this.textOffsets[z-1]+b.text[z-1].length,this.count+=b.text[z].length,this.counts.push(b.text[z].length);this.text=b.text.join("")}else this.text=b.text,this.count=this.text.length,this.counts=[this.count];I=[],this.font.forEach(function(Bt,kt){k.atlasContext.font=Bt.baseString;for(var jt=P.fontAtlas[kt],Ht=0;Ht<P.text.length;Ht++){var Vt=P.text.charAt(Ht);if(jt.ids[Vt]==null&&(jt.ids[Vt]=jt.chars.length,jt.chars.push(Vt),I.push(Vt)),Bt.width[Vt]==null&&(Bt.width[Vt]=k.atlasContext.measureText(Vt).width/k.baseFontSize,P.kerning)){var ee=[];for(var te in Bt.width)ee.push(te+Vt,Vt+te);h(Bt.kerning,o(Bt.family,{pairs:ee}))}}})}if(b.position)if(b.position.length>2){for(var B=!b.position[0].length,O=e.mallocFloat(this.count*2),R=0,C=0;R<this.counts.length;R++){var F=this.counts[R];if(B)for(var N=0;N<F;N++)O[C++]=b.position[R*2],O[C++]=b.position[R*2+1];else for(var V=0;V<F;V++)O[C++]=b.position[R][0],O[C++]=b.position[R][1]}this.position.call?this.position({type:"float",data:O}):this.position=this.regl.buffer({type:"float",data:O}),e.freeFloat(O)}else this.position.destroy&&this.position.destroy(),this.position={constant:b.position};if(b.text||l){var K=e.mallocUint8(this.count),Q=e.mallocFloat(this.count*2);this.textWidth=[];for(var at=0,it=0;at<this.counts.length;at++){for(var q=this.counts[at],W=this.font[at]||this.font[0],Z=this.fontAtlas[at]||this.fontAtlas[0],G=0;G<q;G++){var et=this.text.charAt(it),nt=this.text.charAt(it-1);if(K[it]=Z.ids[et],Q[it*2]=W.width[et],G){var X=Q[it*2-2],Y=Q[it*2],ot=Q[it*2-1],rt=ot+X*.5+Y*.5;if(this.kerning){var ht=W.kerning[nt+et];ht&&(rt+=ht*.001)}Q[it*2+1]=rt}else Q[it*2+1]=Q[it*2]*.5;it++}this.textWidth.push(Q.length?Q[it*2-2]*.5+Q[it*2-1]:0)}b.align||(b.align=this.align),this.charBuffer({data:K,type:"uint8",usage:"stream"}),this.sizeBuffer({data:Q,type:"float",usage:"stream"}),e.freeUint8(K),e.freeFloat(Q),I.length&&this.font.forEach(function(Bt,kt){var jt=P.fontAtlas[kt],Ht=jt.step,Vt=Math.floor(k.maxAtlasSize/Ht),ee=Math.min(Vt,jt.chars.length),te=Math.ceil(jt.chars.length/ee),ae=s(ee*Ht),le=s(te*Ht);jt.width=ae,jt.height=le,jt.rows=te,jt.cols=ee,jt.em&&jt.texture({data:v({canvas:k.atlasCanvas,font:jt.fontString,chars:jt.chars,shape:[ae,le],step:[Ht,Ht]})})})}if(b.align&&(this.align=b.align,this.alignOffset=this.textWidth.map(function(Bt,kt){var jt=Array.isArray(P.align)?P.align.length>1?P.align[kt]:P.align[0]:P.align;if(typeof jt=="number")return jt;switch(jt){case"right":case"end":return-Bt;case"center":case"centre":case"middle":return-Bt*.5}return 0})),this.baseline==null&&b.baseline==null&&(b.baseline=0),b.baseline!=null&&(this.baseline=b.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Bt,kt){var jt=(P.font[kt]||P.font[0]).metrics,Ht=0;return Ht+=jt.bottom*.5,typeof Bt=="number"?Ht+=Bt-jt.baseline:Ht+=-jt[Bt],Ht*=-1,Ht})),b.color!=null)if(b.color||(b.color="transparent"),typeof b.color=="string"||!isNaN(b.color))this.color=g(b.color,"uint8");else{var pt;if(typeof b.color[0]=="number"&&b.color.length>this.counts.length){var yt=b.color.length;pt=e.mallocUint8(yt);for(var xt=(b.color.subarray||b.color.slice).bind(b.color),Ft=0;Ft<yt;Ft+=4)pt.set(g(xt(Ft,Ft+4),"uint8"),Ft)}else{var Et=b.color.length;pt=e.mallocUint8(Et*4);for(var mt=0;mt<Et;mt++)pt.set(g(b.color[mt]||0,"uint8"),mt*4)}this.color=pt}if(b.position||b.text||b.color||b.baseline||b.align||b.font||b.offset||b.opacity){var gt=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(gt){var wt=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(wt);for(var Pt=0;Pt<this.batch.length;Pt++)this.batch[Pt]={count:this.counts.length>1?this.counts[Pt]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Pt]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(Pt*4,Pt*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Pt]:this.opacity,baseline:this.baselineOffset[Pt]!=null?this.baselineOffset[Pt]:this.baselineOffset[0],align:this.align?this.alignOffset[Pt]!=null?this.alignOffset[Pt]:this.alignOffset[0]:0,atlas:this.fontAtlas[Pt]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(Pt*2,Pt*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},k.prototype.destroy=function(){},k.prototype.kerning=!0,k.prototype.position={constant:new Float32Array(2)},k.prototype.translate=null,k.prototype.scale=null,k.prototype.font=null,k.prototype.text="",k.prototype.positionOffset=[0,0],k.prototype.opacity=1,k.prototype.color=new Uint8Array([0,0,0,255]),k.prototype.alignOffset=[0,0],k.maxAtlasSize=1024,k.atlasCanvas=document.createElement("canvas"),k.atlasContext=k.atlasCanvas.getContext("2d",{alpha:!1}),k.baseFontSize=64,k.fonts={};function _(b){return typeof b=="function"&&b._gl&&b.prop&&b.texture&&b.buffer}$.exports=k},12018:function($,U,t){var M=t(71299);$.exports=function(v){if(v?typeof v=="string"&&(v={container:v}):v={},i(v)?v={container:v}:S(v)?v={container:v}:A(v)?v={gl:v}:v=M(v,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),v.pixelRatio||(v.pixelRatio=t.g.pixelRatio||1),v.gl)return v.gl;if(v.canvas&&(v.container=v.canvas.parentNode),v.container){if(typeof v.container=="string"){var e=document.querySelector(v.container);if(!e)throw Error("Element "+v.container+" is not found");v.container=e}i(v.container)?(v.canvas=v.container,v.container=v.canvas.parentNode):v.canvas||(v.canvas=g(),v.container.appendChild(v.canvas),E(v))}else if(!v.canvas)if(typeof document<"u")v.container=document.body||document.documentElement,v.canvas=g(),v.container.appendChild(v.canvas),E(v);else throw Error("Not DOM environment. Use headless-gl.");return v.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(r){try{v.gl=v.canvas.getContext(r,v.attrs)}catch{}return v.gl}),v.gl};function E(v){if(v.container)if(v.container==document.body)document.body.style.width||(v.canvas.width=v.width||v.pixelRatio*t.g.innerWidth),document.body.style.height||(v.canvas.height=v.height||v.pixelRatio*t.g.innerHeight);else{var e=v.container.getBoundingClientRect();v.canvas.width=v.width||e.right-e.left,v.canvas.height=v.height||e.bottom-e.top}}function i(v){return typeof v.getContext=="function"&&"width"in v&&"height"in v}function S(v){return typeof v.nodeName=="string"&&typeof v.appendChild=="function"&&typeof v.getBoundingClientRect=="function"}function A(v){return typeof v.drawArrays=="function"||typeof v.drawElements=="function"}function g(){var v=document.createElement("canvas");return v.style.position="absolute",v.style.top=0,v.style.left=0,v}},56068:function($){$.exports=function(U){typeof U=="string"&&(U=[U]);for(var t=[].slice.call(arguments,1),M=[],E=0;E<U.length-1;E++)M.push(U[E],t[E]||"");return M.push(U[E]),M.join("")}},40383:function($,U,t){var M=t(68318),E=M("%Object.getOwnPropertyDescriptor%",!0);if(E)try{E([],"length")}catch{E=null}$.exports=E},57035:function($,U,t){var M=t(54404),E;typeof t.g.matchMedia=="function"?E=!t.g.matchMedia("(hover: none)").matches:E=M,$.exports=E},38520:function($,U,t){var M=t(54404);function E(){var i=!1;try{var S=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,S),window.removeEventListener("test",null,S)}catch{i=!1}return i}$.exports=M&&E()},55622:function($,U,t){var M=t(68318),E=M("%Object.defineProperty%",!0),i=function(){if(E)try{return E({},"a",{value:1}),!0}catch{return!1}return!1};i.hasArrayLengthDefineBug=function(){if(!i())return null;try{return E([],"length",{value:1}).length!==1}catch{return!0}},$.exports=i},57877:function($,U,t){var M=typeof Symbol<"u"&&Symbol,E=t(35638);$.exports=function(){return typeof M!="function"||typeof Symbol!="function"||typeof M("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:E()}},35638:function($){$.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var U={},t=Symbol("test"),M=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(M)!=="[object Symbol]")return!1;var E=42;U[t]=E;for(t in U)return!1;if(typeof Object.keys=="function"&&Object.keys(U).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(U).length!==0)return!1;var i=Object.getOwnPropertySymbols(U);if(i.length!==1||i[0]!==t||!Object.prototype.propertyIsEnumerable.call(U,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var S=Object.getOwnPropertyDescriptor(U,t);if(S.value!==E||S.enumerable!==!0)return!1}return!0}},84543:function($,U,t){var M=t(35638);$.exports=function(){return M()&&!!Symbol.toStringTag}},35065:function($,U,t){var M=t(77575);$.exports=M.call(Function.call,Object.prototype.hasOwnProperty)},95280:function($,U){U.read=function(t,M,E,i,S){var A,g,v=S*8-i-1,e=(1<<v)-1,r=e>>1,f=-7,n=E?S-1:0,a=E?-1:1,o=t[M+n];for(n+=a,A=o&(1<<-f)-1,o>>=-f,f+=v;f>0;A=A*256+t[M+n],n+=a,f-=8);for(g=A&(1<<-f)-1,A>>=-f,f+=i;f>0;g=g*256+t[M+n],n+=a,f-=8);if(A===0)A=1-r;else{if(A===e)return g?NaN:(o?-1:1)*(1/0);g=g+Math.pow(2,i),A=A-r}return(o?-1:1)*g*Math.pow(2,A-i)},U.write=function(t,M,E,i,S,A){var g,v,e,r=A*8-S-1,f=(1<<r)-1,n=f>>1,a=S===23?Math.pow(2,-24)-Math.pow(2,-77):0,o=i?0:A-1,h=i?1:-1,y=M<0||M===0&&1/M<0?1:0;for(M=Math.abs(M),isNaN(M)||M===1/0?(v=isNaN(M)?1:0,g=f):(g=Math.floor(Math.log(M)/Math.LN2),M*(e=Math.pow(2,-g))<1&&(g--,e*=2),g+n>=1?M+=a/e:M+=a*Math.pow(2,1-n),M*e>=2&&(g++,e/=2),g+n>=f?(v=0,g=f):g+n>=1?(v=(M*e-1)*Math.pow(2,S),g=g+n):(v=M*Math.pow(2,n-1)*Math.pow(2,S),g=0));S>=8;t[E+o]=v&255,o+=h,v/=256,S-=8);for(g=g<<S|v,r+=S;r>0;t[E+o]=g&255,o+=h,g/=256,r-=8);t[E+o-h]|=y*128}},42018:function($){typeof Object.create=="function"?$.exports=function(U,t){t&&(U.super_=t,U.prototype=Object.create(t.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}))}:$.exports=function(U,t){if(t){U.super_=t;var M=function(){};M.prototype=t.prototype,U.prototype=new M,U.prototype.constructor=U}}},47216:function($,U,t){var M=t(84543)(),E=t(6614),i=E("Object.prototype.toString"),S=function(v){return M&&v&&typeof v=="object"&&Symbol.toStringTag in v?!1:i(v)==="[object Arguments]"},A=function(v){return S(v)?!0:v!==null&&typeof v=="object"&&typeof v.length=="number"&&v.length>=0&&i(v)!=="[object Array]"&&i(v.callee)==="[object Function]"},g=function(){return S(arguments)}();S.isLegacyArguments=A,$.exports=g?S:A},54404:function($){$.exports=!0},85395:function($){var U=Function.prototype.toString,t=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,M,E;if(typeof t=="function"&&typeof Object.defineProperty=="function")try{M=Object.defineProperty({},"length",{get:function(){throw E}}),E={},t(function(){throw 42},null,M)}catch(x){x!==E&&(t=null)}else t=null;var i=/^\s*class\b/,S=function(x){try{var s=U.call(x);return i.test(s)}catch{return!1}},A=function(x){try{return S(x)?!1:(U.call(x),!0)}catch{return!1}},g=Object.prototype.toString,v="[object Object]",e="[object Function]",r="[object GeneratorFunction]",f="[object HTMLAllCollection]",n="[object HTML document.all class]",a="[object HTMLCollection]",o=typeof Symbol=="function"&&!!Symbol.toStringTag,h=!(0 in[,]),y=function(){return!1};if(typeof document=="object"){var p=document.all;g.call(p)===g.call(document.all)&&(y=function(x){if((h||!x)&&(typeof x>"u"||typeof x=="object"))try{var s=g.call(x);return(s===f||s===n||s===a||s===v)&&x("")==null}catch{}return!1})}$.exports=t?function(x){if(y(x))return!0;if(!x||typeof x!="function"&&typeof x!="object")return!1;try{t(x,null,M)}catch(s){if(s!==E)return!1}return!S(x)&&A(x)}:function(x){if(y(x))return!0;if(!x||typeof x!="function"&&typeof x!="object")return!1;if(o)return A(x);if(S(x))return!1;var s=g.call(x);return s!==e&&s!==r&&!/^\[object HTML/.test(s)?!1:A(x)}},65481:function($,U,t){var M=Object.prototype.toString,E=Function.prototype.toString,i=/^\s*(?:function)?\*/,S=t(84543)(),A=Object.getPrototypeOf,g=function(){if(!S)return!1;try{return Function("return function*() {}")()}catch{}},v;$.exports=function(e){if(typeof e!="function")return!1;if(i.test(E.call(e)))return!0;if(!S){var r=M.call(e);return r==="[object GeneratorFunction]"}if(!A)return!1;if(typeof v>"u"){var f=g();v=f?A(f):!1}return A(e)===v}},62683:function($){$.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},64274:function($){$.exports=function(U){return U!==U}},15567:function($,U,t){var M=t(68222),E=t(17045),i=t(64274),S=t(14922),A=t(22442),g=M(S(),Number);E(g,{getPolyfill:S,implementation:i,shim:A}),$.exports=g},14922:function($,U,t){var M=t(64274);$.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:M}},22442:function($,U,t){var M=t(17045),E=t(14922);$.exports=function(){var i=E();return M(Number,{isNaN:i},{isNaN:function(){return Number.isNaN!==i}}),i}},64941:function($){$.exports=function(U){var t=typeof U;return U!==null&&(t==="object"||t==="function")}},10973:function($){var U=Object.prototype.toString;$.exports=function(t){var M;return U.call(t)==="[object Object]"&&(M=Object.getPrototypeOf(t),M===null||M===Object.getPrototypeOf({}))}},18546:function($){$.exports=function(U){for(var t=U.length,M,E=0;E<t;E++)if(M=U.charCodeAt(E),(M<9||M>13)&&M!==32&&M!==133&&M!==160&&M!==5760&&M!==6158&&(M<8192||M>8205)&&M!==8232&&M!==8233&&M!==8239&&M!==8287&&M!==8288&&M!==12288&&M!==65279)return!1;return!0}},89546:function($){$.exports=function(U){return typeof U!="string"?!1:(U=U.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(U)&&/[\dz]$/i.test(U)&&U.length>4))}},9187:function($,U,t){var M=t(31353),E=t(72077),i=t(6614),S=i("Object.prototype.toString"),A=t(84543)(),g=t(40383),v=typeof globalThis>"u"?t.g:globalThis,e=E(),r=i("Array.prototype.indexOf",!0)||function(h,y){for(var p=0;p<h.length;p+=1)if(h[p]===y)return p;return-1},f=i("String.prototype.slice"),n={},a=Object.getPrototypeOf;A&&g&&a&&M(e,function(h){var y=new v[h];if(Symbol.toStringTag in y){var p=a(y),x=g(p,Symbol.toStringTag);if(!x){var s=a(p);x=g(s,Symbol.toStringTag)}n[h]=x.get}});var o=function(h){var y=!1;return M(n,function(p,x){if(!y)try{y=p.call(h)===x}catch{}}),y};$.exports=function(h){if(!h||typeof h!="object")return!1;if(!A||!(Symbol.toStringTag in h)){var y=f(S(h),8,-1);return r(e,y)>-1}return g?o(h):!1}},44517:function($){(function(U,t){$.exports=t()})(this,function(){var U,t,M;function E(i,S){if(!U)U=S;else if(!t)t=S;else{var A="var sharedChunk = {}; ("+U+")(sharedChunk); ("+t+")(sharedChunk);",g={};U(g),M=S(g),M.workerUrl=window.URL.createObjectURL(new Blob([A],{type:"text/javascript"}))}}return E(["exports"],function(i){function S(m,D){return D={exports:{}},m(D,D.exports),D.exports}var A="1.10.1",g=v;function v(m,D,j,lt){this.cx=3*m,this.bx=3*(j-m)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*D,this.by=3*(lt-D)-this.cy,this.ay=1-this.cy-this.by,this.p1x=m,this.p1y=lt,this.p2x=j,this.p2y=lt}v.prototype.sampleCurveX=function(m){return((this.ax*m+this.bx)*m+this.cx)*m},v.prototype.sampleCurveY=function(m){return((this.ay*m+this.by)*m+this.cy)*m},v.prototype.sampleCurveDerivativeX=function(m){return(3*this.ax*m+2*this.bx)*m+this.cx},v.prototype.solveCurveX=function(m,D){typeof D>"u"&&(D=1e-6);var j,lt,dt,_t,Lt;for(dt=m,Lt=0;Lt<8;Lt++){if(_t=this.sampleCurveX(dt)-m,Math.abs(_t)<D)return dt;var Kt=this.sampleCurveDerivativeX(dt);if(Math.abs(Kt)<1e-6)break;dt=dt-_t/Kt}if(j=0,lt=1,dt=m,dt<j)return j;if(dt>lt)return lt;for(;j<lt;){if(_t=this.sampleCurveX(dt),Math.abs(_t-m)<D)return dt;m>_t?j=dt:lt=dt,dt=(lt-j)*.5+j}return dt},v.prototype.solve=function(m,D){return this.sampleCurveY(this.solveCurveX(m,D))};var e=r;function r(m,D){this.x=m,this.y=D}r.prototype={clone:function(){return new r(this.x,this.y)},add:function(m){return this.clone()._add(m)},sub:function(m){return this.clone()._sub(m)},multByPoint:function(m){return this.clone()._multByPoint(m)},divByPoint:function(m){return this.clone()._divByPoint(m)},mult:function(m){return this.clone()._mult(m)},div:function(m){return this.clone()._div(m)},rotate:function(m){return this.clone()._rotate(m)},rotateAround:function(m,D){return this.clone()._rotateAround(m,D)},matMult:function(m){return this.clone()._matMult(m)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(m){return this.x===m.x&&this.y===m.y},dist:function(m){return Math.sqrt(this.distSqr(m))},distSqr:function(m){var D=m.x-this.x,j=m.y-this.y;return D*D+j*j},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(m){return Math.atan2(this.y-m.y,this.x-m.x)},angleWith:function(m){return this.angleWithSep(m.x,m.y)},angleWithSep:function(m,D){return Math.atan2(this.x*D-this.y*m,this.x*m+this.y*D)},_matMult:function(m){var D=m[0]*this.x+m[1]*this.y,j=m[2]*this.x+m[3]*this.y;return this.x=D,this.y=j,this},_add:function(m){return this.x+=m.x,this.y+=m.y,this},_sub:function(m){return this.x-=m.x,this.y-=m.y,this},_mult:function(m){return this.x*=m,this.y*=m,this},_div:function(m){return this.x/=m,this.y/=m,this},_multByPoint:function(m){return this.x*=m.x,this.y*=m.y,this},_divByPoint:function(m){return this.x/=m.x,this.y/=m.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var m=this.y;return this.y=this.x,this.x=-m,this},_rotate:function(m){var D=Math.cos(m),j=Math.sin(m),lt=D*this.x-j*this.y,dt=j*this.x+D*this.y;return this.x=lt,this.y=dt,this},_rotateAround:function(m,D){var j=Math.cos(m),lt=Math.sin(m),dt=D.x+j*(this.x-D.x)-lt*(this.y-D.y),_t=D.y+lt*(this.x-D.x)+j*(this.y-D.y);return this.x=dt,this.y=_t,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(m){return m instanceof r?m:Array.isArray(m)?new r(m[0],m[1]):m};function f(m,D){if(Array.isArray(m)){if(!Array.isArray(D)||m.length!==D.length)return!1;for(var j=0;j<m.length;j++)if(!f(m[j],D[j]))return!1;return!0}if(typeof m=="object"&&m!==null&&D!==null){if(typeof D!="object")return!1;var lt=Object.keys(m);if(lt.length!==Object.keys(D).length)return!1;for(var dt in m)if(!f(m[dt],D[dt]))return!1;return!0}return m===D}function n(m){if(m<=0)return 0;if(m>=1)return 1;var D=m*m,j=D*m;return 4*(m<.5?j:3*(m-D)+j-.75)}function a(m,D,j,lt){var dt=new g(m,D,j,lt);return function(_t){return dt.solve(_t)}}var o=a(.25,.1,.25,1);function h(m,D,j){return Math.min(j,Math.max(D,m))}function y(m,D,j){var lt=j-D,dt=((m-D)%lt+lt)%lt+D;return dt===D?j:dt}function p(m,D,j){if(!m.length)return j(null,[]);var lt=m.length,dt=new Array(m.length),_t=null;m.forEach(function(Lt,Kt){D(Lt,function(oe,me){oe&&(_t=oe),dt[Kt]=me,--lt===0&&j(_t,dt)})})}function x(m){var D=[];for(var j in m)D.push(m[j]);return D}function s(m,D){var j=[];for(var lt in m)lt in D||j.push(lt);return j}function u(m){for(var D=[],j=arguments.length-1;j-- >0;)D[j]=arguments[j+1];for(var lt=0,dt=D;lt<dt.length;lt+=1){var _t=dt[lt];for(var Lt in _t)m[Lt]=_t[Lt]}return m}function c(m,D){for(var j={},lt=0;lt<D.length;lt++){var dt=D[lt];dt in m&&(j[dt]=m[dt])}return j}var T=1;function k(){return T++}function _(){function m(D){return D?(D^Math.random()*16>>D/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,m)}return m()}function b(m){return m?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(m):!1}function P(m,D){m.forEach(function(j){D[j]&&(D[j]=D[j].bind(D))})}function l(m,D){return m.indexOf(D,m.length-D.length)!==-1}function d(m,D,j){var lt={};for(var dt in m)lt[dt]=D.call(j||this,m[dt],dt,m);return lt}function L(m,D,j){var lt={};for(var dt in m)D.call(j||this,m[dt],dt,m)&&(lt[dt]=m[dt]);return lt}function w(m){return Array.isArray(m)?m.map(w):typeof m=="object"&&m?d(m,w):m}function I(m,D){for(var j=0;j<m.length;j++)if(D.indexOf(m[j])>=0)return!0;return!1}var z={};function B(m){z[m]||(typeof console<"u"&&console.warn(m),z[m]=!0)}function O(m,D,j){return(j.y-m.y)*(D.x-m.x)>(D.y-m.y)*(j.x-m.x)}function R(m){for(var D=0,j=0,lt=m.length,dt=lt-1,_t=void 0,Lt=void 0;j<lt;dt=j++)_t=m[j],Lt=m[dt],D+=(Lt.x-_t.x)*(_t.y+Lt.y);return D}function C(m){var D=m[0],j=m[1],lt=m[2];return j+=90,j*=Math.PI/180,lt*=Math.PI/180,{x:D*Math.cos(j)*Math.sin(lt),y:D*Math.sin(j)*Math.sin(lt),z:D*Math.cos(lt)}}function F(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function N(m){var D=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,j={};if(m.replace(D,function(dt,_t,Lt,Kt){var oe=Lt||Kt;return j[_t]=oe?oe.toLowerCase():!0,""}),j["max-age"]){var lt=parseInt(j["max-age"],10);isNaN(lt)?delete j["max-age"]:j["max-age"]=lt}return j}var V=null;function K(m){if(V==null){var D=m.navigator?m.navigator.userAgent:null;V=!!m.safari||!!(D&&(/\b(iPad|iPhone|iPod)\b/.test(D)||D.match("Safari")&&!D.match("Chrome")))}return V}function Q(m){try{var D=self[m];return D.setItem("_mapbox_test_",1),D.removeItem("_mapbox_test_"),!0}catch{return!1}}function at(m){return self.btoa(encodeURIComponent(m).replace(/%([0-9A-F]{2})/g,function(D,j){return String.fromCharCode(+("0x"+j))}))}function it(m){return decodeURIComponent(self.atob(m).split("").map(function(D){return"%"+("00"+D.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var q=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),W=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,Z=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,G,et,nt={now:q,frame:function(m){var D=W(m);return{cancel:function(){return Z(D)}}},getImageData:function(m,D){D===void 0&&(D=0);var j=self.document.createElement("canvas"),lt=j.getContext("2d");if(!lt)throw new Error("failed to create canvas 2d context");return j.width=m.width,j.height=m.height,lt.drawImage(m,0,0,m.width,m.height),lt.getImageData(-D,-D,m.width+2*D,m.height+2*D)},resolveURL:function(m){return G||(G=self.document.createElement("a")),G.href=m,G.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return self.matchMedia?(et==null&&(et=self.matchMedia("(prefers-reduced-motion: reduce)")),et.matches):!1}},X={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Y={supported:!1,testSupport:yt},ot,rt=!1,ht,pt=!1;self.document&&(ht=self.document.createElement("img"),ht.onload=function(){ot&&xt(ot),ot=null,pt=!0},ht.onerror=function(){rt=!0,ot=null},ht.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function yt(m){rt||!ht||(pt?xt(m):ot=m)}function xt(m){var D=m.createTexture();m.bindTexture(m.TEXTURE_2D,D);try{if(m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,ht),m.isContextLost())return;Y.supported=!0}catch{}m.deleteTexture(D),rt=!0}var Ft="01";function Et(){for(var m="1",D="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",j="",lt=0;lt<10;lt++)j+=D[Math.floor(Math.random()*62)];var dt=12*60*60*1e3,_t=[m,Ft,j].join(""),Lt=Date.now()+dt;return{token:_t,tokenExpiresAt:Lt}}var mt=function(m,D){this._transformRequestFn=m,this._customAccessToken=D,this._createSkuToken()};mt.prototype._createSkuToken=function(){var m=Et();this._skuToken=m.token,this._skuTokenExpiresAt=m.tokenExpiresAt},mt.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},mt.prototype.transformRequest=function(m,D){return this._transformRequestFn?this._transformRequestFn(m,D)||{url:m}:{url:m}},mt.prototype.normalizeStyleURL=function(m,D){if(!gt(m))return m;var j=Ht(m);return j.path="/styles/v1"+j.path,this._makeAPIURL(j,this._customAccessToken||D)},mt.prototype.normalizeGlyphsURL=function(m,D){if(!gt(m))return m;var j=Ht(m);return j.path="/fonts/v1"+j.path,this._makeAPIURL(j,this._customAccessToken||D)},mt.prototype.normalizeSourceURL=function(m,D){if(!gt(m))return m;var j=Ht(m);return j.path="/v4/"+j.authority+".json",j.params.push("secure"),this._makeAPIURL(j,this._customAccessToken||D)},mt.prototype.normalizeSpriteURL=function(m,D,j,lt){var dt=Ht(m);return gt(m)?(dt.path="/styles/v1"+dt.path+"/sprite"+D+j,this._makeAPIURL(dt,this._customAccessToken||lt)):(dt.path+=""+D+j,Vt(dt))},mt.prototype.normalizeTileURL=function(m,D){if(this._isSkuTokenExpired()&&this._createSkuToken(),m&&!gt(m))return m;var j=Ht(m),lt=/(\.(png|jpg)\d*)(?=$)/,dt=/^.+\/v4\//,_t=nt.devicePixelRatio>=2||D===512?"@2x":"",Lt=Y.supported?".webp":"$1";j.path=j.path.replace(lt,""+_t+Lt),j.path=j.path.replace(dt,"/"),j.path="/v4"+j.path;var Kt=this._customAccessToken||kt(j.params)||X.ACCESS_TOKEN;return X.REQUIRE_ACCESS_TOKEN&&Kt&&this._skuToken&&j.params.push("sku="+this._skuToken),this._makeAPIURL(j,Kt)},mt.prototype.canonicalizeTileURL=function(m,D){var j="/v4/",lt=/\.[\w]+$/,dt=Ht(m);if(!dt.path.match(/(^\/v4\/)/)||!dt.path.match(lt))return m;var _t="mapbox://tiles/";_t+=dt.path.replace(j,"");var Lt=dt.params;return D&&(Lt=Lt.filter(function(Kt){return!Kt.match(/^access_token=/)})),Lt.length&&(_t+="?"+Lt.join("&")),_t},mt.prototype.canonicalizeTileset=function(m,D){for(var j=D?gt(D):!1,lt=[],dt=0,_t=m.tiles||[];dt<_t.length;dt+=1){var Lt=_t[dt];Pt(Lt)?lt.push(this.canonicalizeTileURL(Lt,j)):lt.push(Lt)}return lt},mt.prototype._makeAPIURL=function(m,D){var j="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",lt=Ht(X.API_URL);if(m.protocol=lt.protocol,m.authority=lt.authority,lt.path!=="/"&&(m.path=""+lt.path+m.path),!X.REQUIRE_ACCESS_TOKEN)return Vt(m);if(D=D||X.ACCESS_TOKEN,!D)throw new Error("An API access token is required to use Mapbox GL. "+j);if(D[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+j);return m.params=m.params.filter(function(dt){return dt.indexOf("access_token")===-1}),m.params.push("access_token="+D),Vt(m)};function gt(m){return m.indexOf("mapbox:")===0}var wt=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Pt(m){return wt.test(m)}function Bt(m){return m.indexOf("sku=")>0&&Pt(m)}function kt(m){for(var D=0,j=m;D<j.length;D+=1){var lt=j[D],dt=lt.match(/^access_token=(.*)$/);if(dt)return dt[1]}return null}var jt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ht(m){var D=m.match(jt);if(!D)throw new Error("Unable to parse URL object");return{protocol:D[1],authority:D[2],path:D[3]||"/",params:D[4]?D[4].split("&"):[]}}function Vt(m){var D=m.params.length?"?"+m.params.join("&"):"";return m.protocol+"://"+m.authority+m.path+D}var ee="mapbox.eventData";function te(m){if(!m)return null;var D=m.split(".");if(!D||D.length!==3)return null;try{var j=JSON.parse(it(D[1]));return j}catch{return null}}var ae=function(m){this.type=m,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};ae.prototype.getStorageKey=function(m){var D=te(X.ACCESS_TOKEN),j="";return D&&D.u?j=at(D.u):j=X.ACCESS_TOKEN||"",m?ee+"."+m+":"+j:ee+":"+j},ae.prototype.fetchEventData=function(){var m=Q("localStorage"),D=this.getStorageKey(),j=this.getStorageKey("uuid");if(m)try{var lt=self.localStorage.getItem(D);lt&&(this.eventData=JSON.parse(lt));var dt=self.localStorage.getItem(j);dt&&(this.anonId=dt)}catch{B("Unable to read from LocalStorage")}},ae.prototype.saveEventData=function(){var m=Q("localStorage"),D=this.getStorageKey(),j=this.getStorageKey("uuid");if(m)try{self.localStorage.setItem(j,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(D,JSON.stringify(this.eventData))}catch{B("Unable to write to LocalStorage")}},ae.prototype.processRequests=function(m){},ae.prototype.postEvent=function(m,D,j,lt){var dt=this;if(X.EVENTS_URL){var _t=Ht(X.EVENTS_URL);_t.params.push("access_token="+(lt||X.ACCESS_TOKEN||""));var Lt={event:this.type,created:new Date(m).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:A,skuId:Ft,userId:this.anonId},Kt=D?u(Lt,D):Lt,oe={url:Vt(_t),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Kt])};this.pendingRequest=Le(oe,function(me){dt.pendingRequest=null,j(me),dt.saveEventData(),dt.processRequests(lt)})}},ae.prototype.queueRequest=function(m,D){this.queue.push(m),this.processRequests(D)};var le=function(m){function D(){m.call(this,"map.load"),this.success={},this.skuToken=""}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.postMapLoadEvent=function(j,lt,dt,_t){this.skuToken=dt,(X.EVENTS_URL&&_t||X.ACCESS_TOKEN&&Array.isArray(j)&&j.some(function(Lt){return gt(Lt)||Pt(Lt)}))&&this.queueRequest({id:lt,timestamp:Date.now()},_t)},D.prototype.processRequests=function(j){var lt=this;if(!(this.pendingRequest||this.queue.length===0)){var dt=this.queue.shift(),_t=dt.id,Lt=dt.timestamp;_t&&this.success[_t]||(this.anonId||this.fetchEventData(),b(this.anonId)||(this.anonId=_()),this.postEvent(Lt,{skuToken:this.skuToken},function(Kt){Kt||_t&&(lt.success[_t]=!0)},j))}},D}(ae),ce=function(m){function D(j){m.call(this,"appUserTurnstile"),this._customAccessToken=j}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.postTurnstileEvent=function(j,lt){X.EVENTS_URL&&X.ACCESS_TOKEN&&Array.isArray(j)&&j.some(function(dt){return gt(dt)||Pt(dt)})&&this.queueRequest(Date.now(),lt)},D.prototype.processRequests=function(j){var lt=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var dt=te(X.ACCESS_TOKEN),_t=dt?dt.u:X.ACCESS_TOKEN,Lt=_t!==this.eventData.tokenU;b(this.anonId)||(this.anonId=_(),Lt=!0);var Kt=this.queue.shift();if(this.eventData.lastSuccess){var oe=new Date(this.eventData.lastSuccess),me=new Date(Kt),Ee=(Kt-this.eventData.lastSuccess)/(24*60*60*1e3);Lt=Lt||Ee>=1||Ee<-1||oe.getDate()!==me.getDate()}else Lt=!0;if(!Lt)return this.processRequests();this.postEvent(Kt,{"enabled.telemetry":!1},function(Ne){Ne||(lt.eventData.lastSuccess=Kt,lt.eventData.tokenU=_t)},j)}},D}(ae),pe=new ce,we=pe.postTurnstileEvent.bind(pe),ve=new le,Mt=ve.postMapLoadEvent.bind(ve),It="mapbox-tiles",Rt=500,zt=50,Tt=1e3*60*7,ft;function ut(){self.caches&&!ft&&(ft=self.caches.open(It))}var vt;function St(m,D){if(vt===void 0)try{new Response(new ReadableStream),vt=!0}catch{vt=!1}vt?D(m.body):m.blob().then(D)}function Ot(m,D,j){if(ut(),!!ft){var lt={status:D.status,statusText:D.statusText,headers:new self.Headers};D.headers.forEach(function(Lt,Kt){return lt.headers.set(Kt,Lt)});var dt=N(D.headers.get("Cache-Control")||"");if(!dt["no-store"]){dt["max-age"]&&lt.headers.set("Expires",new Date(j+dt["max-age"]*1e3).toUTCString());var _t=new Date(lt.headers.get("Expires")).getTime()-j;_t<Tt||St(D,function(Lt){var Kt=new self.Response(Lt,lt);ut(),ft&&ft.then(function(oe){return oe.put(Xt(m.url),Kt)}).catch(function(oe){return B(oe.message)})})}}}function Xt(m){var D=m.indexOf("?");return D<0?m:m.slice(0,D)}function $t(m,D){if(ut(),!ft)return D(null);var j=Xt(m.url);ft.then(function(lt){lt.match(j).then(function(dt){var _t=de(dt);lt.delete(j),_t&&lt.put(j,dt.clone()),D(null,dt,_t)}).catch(D)}).catch(D)}function de(m){if(!m)return!1;var D=new Date(m.headers.get("Expires")||0),j=N(m.headers.get("Cache-Control")||"");return D>Date.now()&&!j["no-cache"]}var Me=1/0;function Fe(m){Me++,Me>zt&&(m.getActor().send("enforceCacheSizeLimit",Rt),Me=0)}function De(m){ut(),ft&&ft.then(function(D){D.keys().then(function(j){for(var lt=0;lt<j.length-m;lt++)D.delete(j[lt])})})}function Ae(m){var D=self.caches.delete(It);m&&D.catch(m).then(function(){return m()})}function Ve(m,D){Rt=m,zt=D}var Qe;function Sr(){return Qe==null&&(Qe=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Qe}var he={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(he);var je=function(m){function D(j,lt,dt){lt===401&&Pt(dt)&&(j+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),m.call(this,j),this.status=lt,this.url=dt,this.name=this.constructor.name,this.message=j}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},D}(Error),Re=F()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href},_r=function(m){return/^file:/.test(m)||/^file:/.test(Re())&&!/^\w+:/.test(m)};function tr(m,D){var j=new self.AbortController,lt=new self.Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,referrer:Re(),signal:j.signal}),dt=!1,_t=!1,Lt=Bt(lt.url);m.type==="json"&&lt.headers.set("Accept","application/json");var Kt=function(me,Ee,Ne){if(!_t){if(me&&me.message!=="SecurityError"&&B(me),Ee&&Ne)return oe(Ee);var He=Date.now();self.fetch(lt).then(function(er){if(er.ok){var yr=Lt?er.clone():null;return oe(er,yr,He)}else return D(new je(er.statusText,er.status,m.url))}).catch(function(er){er.code!==20&&D(new Error(er.message))})}},oe=function(me,Ee,Ne){(m.type==="arrayBuffer"?me.arrayBuffer():m.type==="json"?me.json():me.text()).then(function(He){_t||(Ee&&Ne&&Ot(lt,Ee,Ne),dt=!0,D(null,He,me.headers.get("Cache-Control"),me.headers.get("Expires")))}).catch(function(He){_t||D(new Error(He.message))})};return Lt?$t(lt,Kt):Kt(null,null),{cancel:function(){_t=!0,dt||j.abort()}}}function Gt(m,D){var j=new self.XMLHttpRequest;j.open(m.method||"GET",m.url,!0),m.type==="arrayBuffer"&&(j.responseType="arraybuffer");for(var lt in m.headers)j.setRequestHeader(lt,m.headers[lt]);return m.type==="json"&&(j.responseType="text",j.setRequestHeader("Accept","application/json")),j.withCredentials=m.credentials==="include",j.onerror=function(){D(new Error(j.statusText))},j.onload=function(){if((j.status>=200&&j.status<300||j.status===0)&&j.response!==null){var dt=j.response;if(m.type==="json")try{dt=JSON.parse(j.response)}catch(_t){return D(_t)}D(null,dt,j.getResponseHeader("Cache-Control"),j.getResponseHeader("Expires"))}else D(new je(j.statusText,j.status,m.url))},j.send(m.body),{cancel:function(){return j.abort()}}}var re=function(m,D){if(!_r(m.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return tr(m,D);if(F()&&self.worker&&self.worker.actor){var j=!0;return self.worker.actor.send("getResource",m,D,void 0,j)}}return Gt(m,D)},fe=function(m,D){return re(u(m,{type:"json"}),D)},ye=function(m,D){return re(u(m,{type:"arrayBuffer"}),D)},Le=function(m,D){return re(u(m,{method:"POST"}),D)};function _e(m){var D=self.document.createElement("a");return D.href=m,D.protocol===self.document.location.protocol&&D.host===self.document.location.host}var Ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ze(m,D,j,lt){var dt=new self.Image,_t=self.URL;dt.onload=function(){D(null,dt),_t.revokeObjectURL(dt.src)},dt.onerror=function(){return D(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Lt=new self.Blob([new Uint8Array(m)],{type:"image/png"});dt.cacheControl=j,dt.expires=lt,dt.src=m.byteLength?_t.createObjectURL(Lt):Ce}function We(m,D){var j=new self.Blob([new Uint8Array(m)],{type:"image/png"});self.createImageBitmap(j).then(function(lt){D(null,lt)}).catch(function(lt){D(new Error("Could not load image because of "+lt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var qe,ir,xr=function(){qe=[],ir=0};xr();var Dt=function(m,D){if(Y.supported&&(m.headers||(m.headers={}),m.headers.accept="image/webp,*/*"),ir>=X.MAX_PARALLEL_IMAGE_REQUESTS){var j={requestParameters:m,callback:D,cancelled:!1,cancel:function(){this.cancelled=!0}};return qe.push(j),j}ir++;var lt=!1,dt=function(){if(!lt)for(lt=!0,ir--;qe.length&&ir<X.MAX_PARALLEL_IMAGE_REQUESTS;){var Lt=qe.shift(),Kt=Lt.requestParameters,oe=Lt.callback,me=Lt.cancelled;me||(Lt.cancel=Dt(Kt,oe).cancel)}},_t=ye(m,function(Lt,Kt,oe,me){dt(),Lt?D(Lt):Kt&&(Sr()?We(Kt,D):ze(Kt,D,oe,me))});return{cancel:function(){_t.cancel(),dt()}}},Ut=function(m,D){var j=self.document.createElement("video");j.muted=!0,j.onloadstart=function(){D(null,j)};for(var lt=0;lt<m.length;lt++){var dt=self.document.createElement("source");_e(m[lt])||(j.crossOrigin="Anonymous"),dt.src=m[lt],j.appendChild(dt)}return{cancel:function(){}}};function Te(m,D,j){var lt=j[m]&&j[m].indexOf(D)!==-1;lt||(j[m]=j[m]||[],j[m].push(D))}function Se(m,D,j){if(j&&j[m]){var lt=j[m].indexOf(D);lt!==-1&&j[m].splice(lt,1)}}var Be=function(m,D){D===void 0&&(D={}),u(this,D),this.type=m},Je=function(m){function D(j,lt){lt===void 0&&(lt={}),m.call(this,"error",u({error:j},lt))}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D}(Be),$e=function(){};$e.prototype.on=function(m,D){return this._listeners=this._listeners||{},Te(m,D,this._listeners),this},$e.prototype.off=function(m,D){return Se(m,D,this._listeners),Se(m,D,this._oneTimeListeners),this},$e.prototype.once=function(m,D){return this._oneTimeListeners=this._oneTimeListeners||{},Te(m,D,this._oneTimeListeners),this},$e.prototype.fire=function(m,D){typeof m=="string"&&(m=new Be(m,D||{}));var j=m.type;if(this.listens(j)){m.target=this;for(var lt=this._listeners&&this._listeners[j]?this._listeners[j].slice():[],dt=0,_t=lt;dt<_t.length;dt+=1){var Lt=_t[dt];Lt.call(this,m)}for(var Kt=this._oneTimeListeners&&this._oneTimeListeners[j]?this._oneTimeListeners[j].slice():[],oe=0,me=Kt;oe<me.length;oe+=1){var Ee=me[oe];Se(j,Ee,this._oneTimeListeners),Ee.call(this,m)}var Ne=this._eventedParent;Ne&&(u(m,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Ne.fire(m))}else m instanceof Je&&console.error(m.error);return this},$e.prototype.listens=function(m){return this._listeners&&this._listeners[m]&&this._listeners[m].length>0||this._oneTimeListeners&&this._oneTimeListeners[m]&&this._oneTimeListeners[m].length>0||this._eventedParent&&this._eventedParent.listens(m)},$e.prototype.setEventedParent=function(m,D){return this._eventedParent=m,this._eventedParentData=D,this};var Xe=8,Oe={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},ar={"*":{type:"source"}},cr=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],sr={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},lr={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},Or={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},Ir={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Pr={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},rn={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Zr={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},yn=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Tn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},hr={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},dr={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Lr={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Cr={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Hr={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},sn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Yr={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},xn={type:"array",value:"*"},wn={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},Un={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},qn={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},ei={type:"array",value:"*",minimum:1},Gn={type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},Hn={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},gr=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],$r={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},Jr={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},ln={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},zn={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},mn={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Mn={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},On={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Xn={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},gi={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},Ri={"*":{type:"string"}},Ue={$version:Xe,$root:Oe,sources:ar,source:cr,source_vector:sr,source_raster:lr,source_raster_dem:Or,source_geojson:Ir,source_video:Pr,source_image:rn,layer:Zr,layout:yn,layout_background:Tn,layout_fill:hr,layout_circle:dr,layout_heatmap:Lr,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:Cr,layout_symbol:Hr,layout_raster:sn,layout_hillshade:Yr,filter:xn,filter_operator:wn,geometry_type:Un,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:qn,expression:ei,expression_name:Gn,light:Hn,paint:gr,paint_fill:$r,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:Jr,paint_circle:ln,paint_heatmap:zn,paint_symbol:mn,paint_raster:Mn,paint_hillshade:On,paint_background:Xn,transition:gi,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:Ri},fr=function(m,D,j,lt){this.message=(m?m+": ":"")+j,lt&&(this.identifier=lt),D!=null&&D.__line__&&(this.line=D.__line__)};function Qr(m){var D=m.key,j=m.value;return j?[new fr(D,j,"constants have been deprecated as of v8")]:[]}function cn(m){for(var D=[],j=arguments.length-1;j-- >0;)D[j]=arguments[j+1];for(var lt=0,dt=D;lt<dt.length;lt+=1){var _t=dt[lt];for(var Lt in _t)m[Lt]=_t[Lt]}return m}function nn(m){return m instanceof Number||m instanceof String||m instanceof Boolean?m.valueOf():m}function _n(m){if(Array.isArray(m))return m.map(_n);if(m instanceof Object&&!(m instanceof Number||m instanceof String||m instanceof Boolean)){var D={};for(var j in m)D[j]=_n(m[j]);return D}return nn(m)}var gn=function(m){function D(j,lt){m.call(this,lt),this.message=lt,this.key=j}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D}(Error),en=function(m,D){D===void 0&&(D=[]),this.parent=m,this.bindings={};for(var j=0,lt=D;j<lt.length;j+=1){var dt=lt[j],_t=dt[0],Lt=dt[1];this.bindings[_t]=Lt}};en.prototype.concat=function(m){return new en(this,m)},en.prototype.get=function(m){if(this.bindings[m])return this.bindings[m];if(this.parent)return this.parent.get(m);throw new Error(m+" not found in scope.")},en.prototype.has=function(m){return this.bindings[m]?!0:this.parent?this.parent.has(m):!1};var wr={kind:"null"},mr={kind:"number"},Mr={kind:"string"},an={kind:"boolean"},kn={kind:"color"},Rn={kind:"object"},fn={kind:"value"},Sn={kind:"error"},Vn={kind:"collator"},$n={kind:"formatted"},Kn={kind:"resolvedImage"};function Jn(m,D){return{kind:"array",itemType:m,N:D}}function ii(m){if(m.kind==="array"){var D=ii(m.itemType);return typeof m.N=="number"?"array<"+D+", "+m.N+">":m.itemType.kind==="value"?"array":"array<"+D+">"}else return m.kind}var Pa=[wr,mr,Mr,an,kn,$n,Rn,Jn(fn),Kn];function Za(m,D){if(D.kind==="error")return null;if(m.kind==="array"){if(D.kind==="array"&&(D.N===0&&D.itemType.kind==="value"||!Za(m.itemType,D.itemType))&&(typeof m.N!="number"||m.N===D.N))return null}else{if(m.kind===D.kind)return null;if(m.kind==="value")for(var j=0,lt=Pa;j<lt.length;j+=1){var dt=lt[j];if(!Za(dt,D))return null}}return"Expected "+ii(m)+" but found "+ii(D)+" instead."}function Ga(m,D){return D.some(function(j){return j.kind===m.kind})}function Ja(m,D){return D.some(function(j){return j==="null"?m===null:j==="array"?Array.isArray(m):j==="object"?m&&!Array.isArray(m)&&typeof m=="object":j===typeof m})}var Wa=S(function(m,D){var j={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function lt(me){return me=Math.round(me),me<0?0:me>255?255:me}function dt(me){return me<0?0:me>1?1:me}function _t(me){return me[me.length-1]==="%"?lt(parseFloat(me)/100*255):lt(parseInt(me))}function Lt(me){return me[me.length-1]==="%"?dt(parseFloat(me)/100):dt(parseFloat(me))}function Kt(me,Ee,Ne){return Ne<0?Ne+=1:Ne>1&&(Ne-=1),Ne*6<1?me+(Ee-me)*Ne*6:Ne*2<1?Ee:Ne*3<2?me+(Ee-me)*(2/3-Ne)*6:me}function oe(me){var Ee=me.replace(/ /g,"").toLowerCase();if(Ee in j)return j[Ee].slice();if(Ee[0]==="#"){if(Ee.length===4){var Ne=parseInt(Ee.substr(1),16);return Ne>=0&&Ne<=4095?[(Ne&3840)>>4|(Ne&3840)>>8,Ne&240|(Ne&240)>>4,Ne&15|(Ne&15)<<4,1]:null}else if(Ee.length===7){var Ne=parseInt(Ee.substr(1),16);return Ne>=0&&Ne<=16777215?[(Ne&16711680)>>16,(Ne&65280)>>8,Ne&255,1]:null}return null}var He=Ee.indexOf("("),er=Ee.indexOf(")");if(He!==-1&&er+1===Ee.length){var yr=Ee.substr(0,He),zr=Ee.substr(He+1,er-(He+1)).split(","),un=1;switch(yr){case"rgba":if(zr.length!==4)return null;un=Lt(zr.pop());case"rgb":return zr.length!==3?null:[_t(zr[0]),_t(zr[1]),_t(zr[2]),un];case"hsla":if(zr.length!==4)return null;un=Lt(zr.pop());case"hsl":if(zr.length!==3)return null;var Kr=(parseFloat(zr[0])%360+360)%360/360,vn=Lt(zr[1]),bn=Lt(zr[2]),pn=bn<=.5?bn*(vn+1):bn+vn-bn*vn,Ln=bn*2-pn;return[lt(Kt(Ln,pn,Kr+1/3)*255),lt(Kt(Ln,pn,Kr)*255),lt(Kt(Ln,pn,Kr-1/3)*255),un];default:return null}}return null}try{D.parseCSSColor=oe}catch{}}),Vl=Wa.parseCSSColor,Hi=function(m,D,j,lt){lt===void 0&&(lt=1),this.r=m,this.g=D,this.b=j,this.a=lt};Hi.parse=function(m){if(m){if(m instanceof Hi)return m;if(typeof m=="string"){var D=Vl(m);if(D)return new Hi(D[0]/255*D[3],D[1]/255*D[3],D[2]/255*D[3],D[3])}}},Hi.prototype.toString=function(){var m=this.toArray(),D=m[0],j=m[1],lt=m[2],dt=m[3];return"rgba("+Math.round(D)+","+Math.round(j)+","+Math.round(lt)+","+dt+")"},Hi.prototype.toArray=function(){var m=this,D=m.r,j=m.g,lt=m.b,dt=m.a;return dt===0?[0,0,0,0]:[D*255/dt,j*255/dt,lt*255/dt,dt]},Hi.black=new Hi(0,0,0,1),Hi.white=new Hi(1,1,1,1),Hi.transparent=new Hi(0,0,0,0),Hi.red=new Hi(1,0,0,1);var Gs=function(m,D,j){m?this.sensitivity=D?"variant":"case":this.sensitivity=D?"accent":"base",this.locale=j,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Gs.prototype.compare=function(m,D){return this.collator.compare(m,D)},Gs.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Os=function(m,D,j,lt,dt){this.text=m,this.image=D,this.scale=j,this.fontStack=lt,this.textColor=dt},Ea=function(m){this.sections=m};Ea.fromString=function(m){return new Ea([new Os(m,null,null,null,null)])},Ea.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(m){return m.text.length!==0||m.image&&m.image.name.length!==0})},Ea.factory=function(m){return m instanceof Ea?m:Ea.fromString(m)},Ea.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(m){return m.text}).join("")},Ea.prototype.serialize=function(){for(var m=["format"],D=0,j=this.sections;D<j.length;D+=1){var lt=j[D];if(lt.image){m.push(["image",lt.image.name]);continue}m.push(lt.text);var dt={};lt.fontStack&&(dt["text-font"]=["literal",lt.fontStack.split(",")]),lt.scale&&(dt["font-scale"]=lt.scale),lt.textColor&&(dt["text-color"]=["rgba"].concat(lt.textColor.toArray())),m.push(dt)}return m};var Qa=function(m){this.name=m.name,this.available=m.available};Qa.prototype.toString=function(){return this.name},Qa.fromString=function(m){return m?new Qa({name:m,available:!1}):null},Qa.prototype.serialize=function(){return["image",this.name]};function xu(m,D,j,lt){if(!(typeof m=="number"&&m>=0&&m<=255&&typeof D=="number"&&D>=0&&D<=255&&typeof j=="number"&&j>=0&&j<=255)){var dt=typeof lt=="number"?[m,D,j,lt]:[m,D,j];return"Invalid rgba value ["+dt.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof lt>"u"||typeof lt=="number"&&lt>=0&&lt<=1?null:"Invalid rgba value ["+[m,D,j,lt].join(", ")+"]: 'a' must be between 0 and 1."}function Ws(m){if(m===null||typeof m=="string"||typeof m=="boolean"||typeof m=="number"||m instanceof Hi||m instanceof Gs||m instanceof Ea||m instanceof Qa)return!0;if(Array.isArray(m)){for(var D=0,j=m;D<j.length;D+=1){var lt=j[D];if(!Ws(lt))return!1}return!0}else if(typeof m=="object"){for(var dt in m)if(!Ws(m[dt]))return!1;return!0}else return!1}function va(m){if(m===null)return wr;if(typeof m=="string")return Mr;if(typeof m=="boolean")return an;if(typeof m=="number")return mr;if(m instanceof Hi)return kn;if(m instanceof Gs)return Vn;if(m instanceof Ea)return $n;if(m instanceof Qa)return Kn;if(Array.isArray(m)){for(var D=m.length,j,lt=0,dt=m;lt<dt.length;lt+=1){var _t=dt[lt],Lt=va(_t);if(!j)j=Lt;else{if(j===Lt)continue;j=fn;break}}return Jn(j||fn,D)}else return Rn}function Ys(m){var D=typeof m;return m===null?"":D==="string"||D==="number"||D==="boolean"?String(m):m instanceof Hi||m instanceof Ea||m instanceof Qa?m.toString():JSON.stringify(m)}var io=function(m,D){this.type=m,this.value=D};io.parse=function(m,D){if(m.length!==2)return D.error("'literal' expression requires exactly one argument, but found "+(m.length-1)+" instead.");if(!Ws(m[1]))return D.error("invalid value");var j=m[1],lt=va(j),dt=D.expectedType;return lt.kind==="array"&&lt.N===0&&dt&&dt.kind==="array"&&(typeof dt.N!="number"||dt.N===0)&&(lt=dt),new io(lt,j)},io.prototype.evaluate=function(){return this.value},io.prototype.eachChild=function(){},io.prototype.outputDefined=function(){return!0},io.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Hi?["rgba"].concat(this.value.toArray()):this.value instanceof Ea?this.value.serialize():this.value};var Ma=function(m){this.name="ExpressionEvaluationError",this.message=m};Ma.prototype.toJSON=function(){return this.message};var ao={string:Mr,number:mr,boolean:an,object:Rn},qa=function(m,D){this.type=m,this.args=D};qa.parse=function(m,D){if(m.length<2)return D.error("Expected at least one argument.");var j=1,lt,dt=m[0];if(dt==="array"){var _t;if(m.length>2){var Lt=m[1];if(typeof Lt!="string"||!(Lt in ao)||Lt==="object")return D.error('The item type argument of "array" must be one of string, number, boolean',1);_t=ao[Lt],j++}else _t=fn;var Kt;if(m.length>3){if(m[2]!==null&&(typeof m[2]!="number"||m[2]<0||m[2]!==Math.floor(m[2])))return D.error('The length argument to "array" must be a positive integer literal',2);Kt=m[2],j++}lt=Jn(_t,Kt)}else lt=ao[dt];for(var oe=[];j<m.length;j++){var me=D.parse(m[j],j,fn);if(!me)return null;oe.push(me)}return new qa(lt,oe)},qa.prototype.evaluate=function(m){for(var D=0;D<this.args.length;D++){var j=this.args[D].evaluate(m),lt=Za(this.type,va(j));if(lt){if(D===this.args.length-1)throw new Ma("Expected value to be of type "+ii(this.type)+", but found "+ii(va(j))+" instead.")}else return j}return null},qa.prototype.eachChild=function(m){this.args.forEach(m)},qa.prototype.outputDefined=function(){return this.args.every(function(m){return m.outputDefined()})},qa.prototype.serialize=function(){var m=this.type,D=[m.kind];if(m.kind==="array"){var j=m.itemType;if(j.kind==="string"||j.kind==="number"||j.kind==="boolean"){D.push(j.kind);var lt=m.N;(typeof lt=="number"||this.args.length>1)&&D.push(lt)}}return D.concat(this.args.map(function(dt){return dt.serialize()}))};var fo=function(m){this.type=$n,this.sections=m};fo.parse=function(m,D){if(m.length<2)return D.error("Expected at least one argument.");var j=m[1];if(!Array.isArray(j)&&typeof j=="object")return D.error("First argument must be an image or text section.");for(var lt=[],dt=!1,_t=1;_t<=m.length-1;++_t){var Lt=m[_t];if(dt&&typeof Lt=="object"&&!Array.isArray(Lt)){dt=!1;var Kt=null;if(Lt["font-scale"]&&(Kt=D.parse(Lt["font-scale"],1,mr),!Kt))return null;var oe=null;if(Lt["text-font"]&&(oe=D.parse(Lt["text-font"],1,Jn(Mr)),!oe))return null;var me=null;if(Lt["text-color"]&&(me=D.parse(Lt["text-color"],1,kn),!me))return null;var Ee=lt[lt.length-1];Ee.scale=Kt,Ee.font=oe,Ee.textColor=me}else{var Ne=D.parse(m[_t],1,fn);if(!Ne)return null;var He=Ne.type.kind;if(He!=="string"&&He!=="value"&&He!=="null"&&He!=="resolvedImage")return D.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");dt=!0,lt.push({content:Ne,scale:null,font:null,textColor:null})}}return new fo(lt)},fo.prototype.evaluate=function(m){var D=function(j){var lt=j.content.evaluate(m);return va(lt)===Kn?new Os("",lt,null,null,null):new Os(Ys(lt),null,j.scale?j.scale.evaluate(m):null,j.font?j.font.evaluate(m).join(","):null,j.textColor?j.textColor.evaluate(m):null)};return new Ea(this.sections.map(D))},fo.prototype.eachChild=function(m){for(var D=0,j=this.sections;D<j.length;D+=1){var lt=j[D];m(lt.content),lt.scale&&m(lt.scale),lt.font&&m(lt.font),lt.textColor&&m(lt.textColor)}},fo.prototype.outputDefined=function(){return!1},fo.prototype.serialize=function(){for(var m=["format"],D=0,j=this.sections;D<j.length;D+=1){var lt=j[D];m.push(lt.content.serialize());var dt={};lt.scale&&(dt["font-scale"]=lt.scale.serialize()),lt.font&&(dt["text-font"]=lt.font.serialize()),lt.textColor&&(dt["text-color"]=lt.textColor.serialize()),m.push(dt)}return m};var Oo=function(m){this.type=Kn,this.input=m};Oo.parse=function(m,D){if(m.length!==2)return D.error("Expected two arguments.");var j=D.parse(m[1],1,Mr);return j?new Oo(j):D.error("No image name provided.")},Oo.prototype.evaluate=function(m){var D=this.input.evaluate(m),j=Qa.fromString(D);return j&&m.availableImages&&(j.available=m.availableImages.indexOf(D)>-1),j},Oo.prototype.eachChild=function(m){m(this.input)},Oo.prototype.outputDefined=function(){return!1},Oo.prototype.serialize=function(){return["image",this.input.serialize()]};var Ho={"to-boolean":an,"to-color":kn,"to-number":mr,"to-string":Mr},Ia=function(m,D){this.type=m,this.args=D};Ia.parse=function(m,D){if(m.length<2)return D.error("Expected at least one argument.");var j=m[0];if((j==="to-boolean"||j==="to-string")&&m.length!==2)return D.error("Expected one argument.");for(var lt=Ho[j],dt=[],_t=1;_t<m.length;_t++){var Lt=D.parse(m[_t],_t,fn);if(!Lt)return null;dt.push(Lt)}return new Ia(lt,dt)},Ia.prototype.evaluate=function(m){if(this.type.kind==="boolean")return!!this.args[0].evaluate(m);if(this.type.kind==="color"){for(var D,j,lt=0,dt=this.args;lt<dt.length;lt+=1){var _t=dt[lt];if(D=_t.evaluate(m),j=null,D instanceof Hi)return D;if(typeof D=="string"){var Lt=m.parseColor(D);if(Lt)return Lt}else if(Array.isArray(D)&&(D.length<3||D.length>4?j="Invalid rbga value "+JSON.stringify(D)+": expected an array containing either three or four numeric values.":j=xu(D[0],D[1],D[2],D[3]),!j))return new Hi(D[0]/255,D[1]/255,D[2]/255,D[3])}throw new Ma(j||"Could not parse color from value '"+(typeof D=="string"?D:String(JSON.stringify(D)))+"'")}else if(this.type.kind==="number"){for(var Kt=null,oe=0,me=this.args;oe<me.length;oe+=1){var Ee=me[oe];if(Kt=Ee.evaluate(m),Kt===null)return 0;var Ne=Number(Kt);if(!isNaN(Ne))return Ne}throw new Ma("Could not convert "+JSON.stringify(Kt)+" to number.")}else return this.type.kind==="formatted"?Ea.fromString(Ys(this.args[0].evaluate(m))):this.type.kind==="resolvedImage"?Qa.fromString(Ys(this.args[0].evaluate(m))):Ys(this.args[0].evaluate(m))},Ia.prototype.eachChild=function(m){this.args.forEach(m)},Ia.prototype.outputDefined=function(){return this.args.every(function(m){return m.outputDefined()})},Ia.prototype.serialize=function(){if(this.type.kind==="formatted")return new fo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Oo(this.args[0]).serialize();var m=["to-"+this.type.kind];return this.eachChild(function(D){m.push(D.serialize())}),m};var bu=["Unknown","Point","LineString","Polygon"],Io=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Io.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Io.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?bu[this.feature.type]:this.feature.type:null},Io.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Io.prototype.canonicalID=function(){return this.canonical},Io.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Io.prototype.parseColor=function(m){var D=this._parseColorCache[m];return D||(D=this._parseColorCache[m]=Hi.parse(m)),D};var za=function(m,D,j,lt){this.name=m,this.type=D,this._evaluate=j,this.args=lt};za.prototype.evaluate=function(m){return this._evaluate(m,this.args)},za.prototype.eachChild=function(m){this.args.forEach(m)},za.prototype.outputDefined=function(){return!1},za.prototype.serialize=function(){return[this.name].concat(this.args.map(function(m){return m.serialize()}))},za.parse=function(m,D){var j,lt=m[0],dt=za.definitions[lt];if(!dt)return D.error('Unknown expression "'+lt+'". If you wanted a literal array, use ["literal", [...]].',0);for(var _t=Array.isArray(dt)?dt[0]:dt.type,Lt=Array.isArray(dt)?[[dt[1],dt[2]]]:dt.overloads,Kt=Lt.filter(function(_i){var ki=_i[0];return!Array.isArray(ki)||ki.length===m.length-1}),oe=null,me=0,Ee=Kt;me<Ee.length;me+=1){var Ne=Ee[me],He=Ne[0],er=Ne[1];oe=new Yo(D.registry,D.path,null,D.scope);for(var yr=[],zr=!1,un=1;un<m.length;un++){var Kr=m[un],vn=Array.isArray(He)?He[un-1]:He.type,bn=oe.parse(Kr,1+yr.length,vn);if(!bn){zr=!0;break}yr.push(bn)}if(!zr){if(Array.isArray(He)&&He.length!==yr.length){oe.error("Expected "+He.length+" arguments, but found "+yr.length+" instead.");continue}for(var pn=0;pn<yr.length;pn++){var Ln=Array.isArray(He)?He[pn]:He.type,Bn=yr[pn];oe.concat(pn+1).checkSubtype(Ln,Bn.type)}if(oe.errors.length===0)return new za(lt,_t,er,yr)}}if(Kt.length===1)(j=D.errors).push.apply(j,oe.errors);else{for(var Wn=Kt.length?Kt:Lt,Qn=Wn.map(function(_i){var ki=_i[0];return Hl(ki)}).join(" | "),ui=[],ci=1;ci<m.length;ci++){var mi=D.parse(m[ci],1+ui.length);if(!mi)return null;ui.push(ii(mi.type))}D.error("Expected arguments of type "+Qn+", but found ("+ui.join(", ")+") instead.")}return null},za.register=function(m,D){za.definitions=D;for(var j in D)m[j]=za};function Hl(m){return Array.isArray(m)?"("+m.map(ii).join(", ")+")":"("+ii(m.type)+"...)"}var Go=function(m,D,j){this.type=Vn,this.locale=j,this.caseSensitive=m,this.diacriticSensitive=D};Go.parse=function(m,D){if(m.length!==2)return D.error("Expected one argument.");var j=m[1];if(typeof j!="object"||Array.isArray(j))return D.error("Collator options argument must be an object.");var lt=D.parse(j["case-sensitive"]===void 0?!1:j["case-sensitive"],1,an);if(!lt)return null;var dt=D.parse(j["diacritic-sensitive"]===void 0?!1:j["diacritic-sensitive"],1,an);if(!dt)return null;var _t=null;return j.locale&&(_t=D.parse(j.locale,1,Mr),!_t)?null:new Go(lt,dt,_t)},Go.prototype.evaluate=function(m){return new Gs(this.caseSensitive.evaluate(m),this.diacriticSensitive.evaluate(m),this.locale?this.locale.evaluate(m):null)},Go.prototype.eachChild=function(m){m(this.caseSensitive),m(this.diacriticSensitive),this.locale&&m(this.locale)},Go.prototype.outputDefined=function(){return!1},Go.prototype.serialize=function(){var m={};return m["case-sensitive"]=this.caseSensitive.serialize(),m["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(m.locale=this.locale.serialize()),["collator",m]};var zo=8192;function Gl(m,D){m[0]=Math.min(m[0],D[0]),m[1]=Math.min(m[1],D[1]),m[2]=Math.max(m[2],D[0]),m[3]=Math.max(m[3],D[1])}function Wl(m){return(180+m)/360}function Qu(m){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+m*Math.PI/360)))/360}function Xs(m,D){return!(m[0]<=D[0]||m[2]>=D[2]||m[1]<=D[1]||m[3]>=D[3])}function $u(m,D){var j=Wl(m[0]),lt=Qu(m[1]),dt=Math.pow(2,D.z);return[Math.round(j*dt*zo),Math.round(lt*dt*zo)]}function tc(m,D,j){var lt=m[0]-D[0],dt=m[1]-D[1],_t=m[0]-j[0],Lt=m[1]-j[1];return lt*Lt-_t*dt===0&&lt*_t<=0&&dt*Lt<=0}function ec(m,D,j){return D[1]>m[1]!=j[1]>m[1]&&m[0]<(j[0]-D[0])*(m[1]-D[1])/(j[1]-D[1])+D[0]}function Yl(m,D){for(var j=!1,lt=0,dt=D.length;lt<dt;lt++)for(var _t=D[lt],Lt=0,Kt=_t.length;Lt<Kt-1;Lt++){if(tc(m,_t[Lt],_t[Lt+1]))return!1;ec(m,_t[Lt],_t[Lt+1])&&(j=!j)}return j}function rc(m,D){for(var j=0;j<D.length;j++)if(Yl(m,D[j]))return!0;return!1}function nc(m,D){return m[0]*D[1]-m[1]*D[0]}function _u(m,D,j,lt){var dt=m[0]-j[0],_t=m[1]-j[1],Lt=D[0]-j[0],Kt=D[1]-j[1],oe=lt[0]-j[0],me=lt[1]-j[1],Ee=dt*me-oe*_t,Ne=Lt*me-oe*Kt;return Ee>0&&Ne<0||Ee<0&&Ne>0}function ic(m,D,j,lt){var dt=[D[0]-m[0],D[1]-m[1]],_t=[lt[0]-j[0],lt[1]-j[1]];return nc(_t,dt)===0?!1:!!(_u(m,D,j,lt)&&_u(j,lt,m,D))}function ac(m,D,j){for(var lt=0,dt=j;lt<dt.length;lt+=1)for(var _t=dt[lt],Lt=0;Lt<_t.length-1;++Lt)if(ic(m,D,_t[Lt],_t[Lt+1]))return!0;return!1}function Xl(m,D){for(var j=0;j<m.length;++j)if(!Yl(m[j],D))return!1;for(var lt=0;lt<m.length-1;++lt)if(ac(m[lt],m[lt+1],D))return!1;return!0}function ms(m,D){for(var j=0;j<D.length;j++)if(Xl(m,D[j]))return!0;return!1}function ys(m,D,j){for(var lt=[],dt=0;dt<m.length;dt++){for(var _t=[],Lt=0;Lt<m[dt].length;Lt++){var Kt=$u(m[dt][Lt],j);Gl(D,Kt),_t.push(Kt)}lt.push(_t)}return lt}function Is(m,D,j){for(var lt=[],dt=0;dt<m.length;dt++){var _t=ys(m[dt],D,j);lt.push(_t)}return lt}function yl(m,D,j,lt){if(m[0]<j[0]||m[0]>j[2]){var dt=lt*.5,_t=m[0]-j[0]>dt?-lt:j[0]-m[0]>dt?lt:0;_t===0&&(_t=m[0]-j[2]>dt?-lt:j[2]-m[0]>dt?lt:0),m[0]+=_t}Gl(D,m)}function oc(m){m[0]=m[1]=1/0,m[2]=m[3]=-1/0}function Wo(m,D,j,lt){for(var dt=Math.pow(2,lt.z)*zo,_t=[lt.x*zo,lt.y*zo],Lt=[],Kt=0,oe=m;Kt<oe.length;Kt+=1)for(var me=oe[Kt],Ee=0,Ne=me;Ee<Ne.length;Ee+=1){var He=Ne[Ee],er=[He.x+_t[0],He.y+_t[1]];yl(er,D,j,dt),Lt.push(er)}return Lt}function wu(m,D,j,lt){for(var dt=Math.pow(2,lt.z)*zo,_t=[lt.x*zo,lt.y*zo],Lt=[],Kt=0,oe=m;Kt<oe.length;Kt+=1){for(var me=oe[Kt],Ee=[],Ne=0,He=me;Ne<He.length;Ne+=1){var er=He[Ne],yr=[er.x+_t[0],er.y+_t[1]];Gl(D,yr),Ee.push(yr)}Lt.push(Ee)}if(D[2]-D[0]<=dt/2){oc(D);for(var zr=0,un=Lt;zr<un.length;zr+=1)for(var Kr=un[zr],vn=0,bn=Kr;vn<bn.length;vn+=1){var pn=bn[vn];yl(pn,D,j,dt)}}return Lt}function Kl(m,D){var j=[1/0,1/0,-1/0,-1/0],lt=[1/0,1/0,-1/0,-1/0],dt=m.canonicalID();if(D.type==="Polygon"){var _t=ys(D.coordinates,lt,dt),Lt=Wo(m.geometry(),j,lt,dt);if(!Xs(j,lt))return!1;for(var Kt=0,oe=Lt;Kt<oe.length;Kt+=1){var me=oe[Kt];if(!Yl(me,_t))return!1}}if(D.type==="MultiPolygon"){var Ee=Is(D.coordinates,lt,dt),Ne=Wo(m.geometry(),j,lt,dt);if(!Xs(j,lt))return!1;for(var He=0,er=Ne;He<er.length;He+=1){var yr=er[He];if(!rc(yr,Ee))return!1}}return!0}function sc(m,D){var j=[1/0,1/0,-1/0,-1/0],lt=[1/0,1/0,-1/0,-1/0],dt=m.canonicalID();if(D.type==="Polygon"){var _t=ys(D.coordinates,lt,dt),Lt=wu(m.geometry(),j,lt,dt);if(!Xs(j,lt))return!1;for(var Kt=0,oe=Lt;Kt<oe.length;Kt+=1){var me=oe[Kt];if(!Xl(me,_t))return!1}}if(D.type==="MultiPolygon"){var Ee=Is(D.coordinates,lt,dt),Ne=wu(m.geometry(),j,lt,dt);if(!Xs(j,lt))return!1;for(var He=0,er=Ne;He<er.length;He+=1){var yr=er[He];if(!ms(yr,Ee))return!1}}return!0}var ho=function(m,D){this.type=an,this.geojson=m,this.geometries=D};ho.parse=function(m,D){if(m.length!==2)return D.error("'within' expression requires exactly one argument, but found "+(m.length-1)+" instead.");if(Ws(m[1])){var j=m[1];if(j.type==="FeatureCollection")for(var lt=0;lt<j.features.length;++lt){var dt=j.features[lt].geometry.type;if(dt==="Polygon"||dt==="MultiPolygon")return new ho(j,j.features[lt].geometry)}else if(j.type==="Feature"){var _t=j.geometry.type;if(_t==="Polygon"||_t==="MultiPolygon")return new ho(j,j.geometry)}else if(j.type==="Polygon"||j.type==="MultiPolygon")return new ho(j,j)}return D.error("'within' expression requires valid geojson object that contains polygon geometry type.")},ho.prototype.evaluate=function(m){if(m.geometry()!=null&&m.canonicalID()!=null){if(m.geometryType()==="Point")return Kl(m,this.geometries);if(m.geometryType()==="LineString")return sc(m,this.geometries)}return!1},ho.prototype.eachChild=function(){},ho.prototype.outputDefined=function(){return!0},ho.prototype.serialize=function(){return["within",this.geojson]};function xs(m){if(m instanceof za&&(m.name==="get"&&m.args.length===1||m.name==="feature-state"||m.name==="has"&&m.args.length===1||m.name==="properties"||m.name==="geometry-type"||m.name==="id"||/^filter-/.test(m.name))||m instanceof ho)return!1;var D=!0;return m.eachChild(function(j){D&&!xs(j)&&(D=!1)}),D}function Ks(m){if(m instanceof za&&m.name==="feature-state")return!1;var D=!0;return m.eachChild(function(j){D&&!Ks(j)&&(D=!1)}),D}function zs(m,D){if(m instanceof za&&D.indexOf(m.name)>=0)return!1;var j=!0;return m.eachChild(function(lt){j&&!zs(lt,D)&&(j=!1)}),j}var Do=function(m,D){this.type=D.type,this.name=m,this.boundExpression=D};Do.parse=function(m,D){if(m.length!==2||typeof m[1]!="string")return D.error("'var' expression requires exactly one string literal argument.");var j=m[1];return D.scope.has(j)?new Do(j,D.scope.get(j)):D.error('Unknown variable "'+j+'". Make sure "'+j+'" has been bound in an enclosing "let" expression before using it.',1)},Do.prototype.evaluate=function(m){return this.boundExpression.evaluate(m)},Do.prototype.eachChild=function(){},Do.prototype.outputDefined=function(){return!1},Do.prototype.serialize=function(){return["var",this.name]};var Yo=function(m,D,j,lt,dt){D===void 0&&(D=[]),lt===void 0&&(lt=new en),dt===void 0&&(dt=[]),this.registry=m,this.path=D,this.key=D.map(function(_t){return"["+_t+"]"}).join(""),this.scope=lt,this.errors=dt,this.expectedType=j};Yo.prototype.parse=function(m,D,j,lt,dt){return dt===void 0&&(dt={}),D?this.concat(D,j,lt)._parse(m,dt):this._parse(m,dt)},Yo.prototype._parse=function(m,D){(m===null||typeof m=="string"||typeof m=="boolean"||typeof m=="number")&&(m=["literal",m]);function j(me,Ee,Ne){return Ne==="assert"?new qa(Ee,[me]):Ne==="coerce"?new Ia(Ee,[me]):me}if(Array.isArray(m)){if(m.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var lt=m[0];if(typeof lt!="string")return this.error("Expression name must be a string, but found "+typeof lt+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var dt=this.registry[lt];if(dt){var _t=dt.parse(m,this);if(!_t)return null;if(this.expectedType){var Lt=this.expectedType,Kt=_t.type;if((Lt.kind==="string"||Lt.kind==="number"||Lt.kind==="boolean"||Lt.kind==="object"||Lt.kind==="array")&&Kt.kind==="value")_t=j(_t,Lt,D.typeAnnotation||"assert");else if((Lt.kind==="color"||Lt.kind==="formatted"||Lt.kind==="resolvedImage")&&(Kt.kind==="value"||Kt.kind==="string"))_t=j(_t,Lt,D.typeAnnotation||"coerce");else if(this.checkSubtype(Lt,Kt))return null}if(!(_t instanceof io)&&_t.type.kind!=="resolvedImage"&&Jl(_t)){var oe=new Io;try{_t=new io(_t.type,_t.evaluate(oe))}catch(me){return this.error(me.message),null}}return _t}return this.error('Unknown expression "'+lt+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof m>"u"?this.error("'undefined' value invalid. Use null instead."):typeof m=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof m+" instead.")},Yo.prototype.concat=function(m,D,j){var lt=typeof m=="number"?this.path.concat(m):this.path,dt=j?this.scope.concat(j):this.scope;return new Yo(this.registry,lt,D||null,dt,this.errors)},Yo.prototype.error=function(m){for(var D=[],j=arguments.length-1;j-- >0;)D[j]=arguments[j+1];var lt=""+this.key+D.map(function(dt){return"["+dt+"]"}).join("");this.errors.push(new gn(lt,m))},Yo.prototype.checkSubtype=function(m,D){var j=Za(m,D);return j&&this.error(j),j};function Jl(m){if(m instanceof Do)return Jl(m.boundExpression);if(m instanceof za&&m.name==="error"||m instanceof Go||m instanceof ho)return!1;var D=m instanceof Ia||m instanceof qa,j=!0;return m.eachChild(function(lt){D?j=j&&Jl(lt):j=j&&lt instanceof io}),j?xs(m)&&zs(m,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function Ds(m,D){for(var j=m.length-1,lt=0,dt=j,_t=0,Lt,Kt;lt<=dt;)if(_t=Math.floor((lt+dt)/2),Lt=m[_t],Kt=m[_t+1],Lt<=D){if(_t===j||D<Kt)return _t;lt=_t+1}else if(Lt>D)dt=_t-1;else throw new Ma("Input is not a number.");return 0}var as=function(m,D,j){this.type=m,this.input=D,this.labels=[],this.outputs=[];for(var lt=0,dt=j;lt<dt.length;lt+=1){var _t=dt[lt],Lt=_t[0],Kt=_t[1];this.labels.push(Lt),this.outputs.push(Kt)}};as.parse=function(m,D){if(m.length-1<4)return D.error("Expected at least 4 arguments, but found only "+(m.length-1)+".");if((m.length-1)%2!==0)return D.error("Expected an even number of arguments.");var j=D.parse(m[1],1,mr);if(!j)return null;var lt=[],dt=null;D.expectedType&&D.expectedType.kind!=="value"&&(dt=D.expectedType);for(var _t=1;_t<m.length;_t+=2){var Lt=_t===1?-1/0:m[_t],Kt=m[_t+1],oe=_t,me=_t+1;if(typeof Lt!="number")return D.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',oe);if(lt.length&&lt[lt.length-1][0]>=Lt)return D.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',oe);var Ee=D.parse(Kt,me,dt);if(!Ee)return null;dt=dt||Ee.type,lt.push([Lt,Ee])}return new as(dt,j,lt)},as.prototype.evaluate=function(m){var D=this.labels,j=this.outputs;if(D.length===1)return j[0].evaluate(m);var lt=this.input.evaluate(m);if(lt<=D[0])return j[0].evaluate(m);var dt=D.length;if(lt>=D[dt-1])return j[dt-1].evaluate(m);var _t=Ds(D,lt);return j[_t].evaluate(m)},as.prototype.eachChild=function(m){m(this.input);for(var D=0,j=this.outputs;D<j.length;D+=1){var lt=j[D];m(lt)}},as.prototype.outputDefined=function(){return this.outputs.every(function(m){return m.outputDefined()})},as.prototype.serialize=function(){for(var m=["step",this.input.serialize()],D=0;D<this.labels.length;D++)D>0&&m.push(this.labels[D]),m.push(this.outputs[D].serialize());return m};function xa(m,D,j){return m*(1-j)+D*j}function Ql(m,D,j){return new Hi(xa(m.r,D.r,j),xa(m.g,D.g,j),xa(m.b,D.b,j),xa(m.a,D.a,j))}function xl(m,D,j){return m.map(function(lt,dt){return xa(lt,D[dt],j)})}var Fs=Object.freeze({__proto__:null,number:xa,color:Ql,array:xl}),Au=.95047,Tu=1,Rs=1.08883,Bs=4/29,Ca=6/29,bl=3*Ca*Ca,lc=Ca*Ca*Ca,$l=Math.PI/180,uc=180/Math.PI;function _l(m){return m>lc?Math.pow(m,.3333333333333333):m/bl+Bs}function Js(m){return m>Ca?m*m*m:bl*(m-Bs)}function tu(m){return 255*(m<=.0031308?12.92*m:1.055*Math.pow(m,.4166666666666667)-.055)}function eu(m){return m/=255,m<=.04045?m/12.92:Math.pow((m+.055)/1.055,2.4)}function Qs(m){var D=eu(m.r),j=eu(m.g),lt=eu(m.b),dt=_l((.4124564*D+.3575761*j+.1804375*lt)/Au),_t=_l((.2126729*D+.7151522*j+.072175*lt)/Tu),Lt=_l((.0193339*D+.119192*j+.9503041*lt)/Rs);return{l:116*_t-16,a:500*(dt-_t),b:200*(_t-Lt),alpha:m.a}}function ru(m){var D=(m.l+16)/116,j=isNaN(m.a)?D:D+m.a/500,lt=isNaN(m.b)?D:D-m.b/200;return D=Tu*Js(D),j=Au*Js(j),lt=Rs*Js(lt),new Hi(tu(3.2404542*j-1.5371385*D-.4985314*lt),tu(-.969266*j+1.8760108*D+.041556*lt),tu(.0556434*j-.2040259*D+1.0572252*lt),m.alpha)}function wl(m,D,j){return{l:xa(m.l,D.l,j),a:xa(m.a,D.a,j),b:xa(m.b,D.b,j),alpha:xa(m.alpha,D.alpha,j)}}function nu(m){var D=Qs(m),j=D.l,lt=D.a,dt=D.b,_t=Math.atan2(dt,lt)*uc;return{h:_t<0?_t+360:_t,c:Math.sqrt(lt*lt+dt*dt),l:j,alpha:m.a}}function Qi(m){var D=m.h*$l,j=m.c,lt=m.l;return ru({l:lt,a:Math.cos(D)*j,b:Math.sin(D)*j,alpha:m.alpha})}function ku(m,D,j){var lt=D-m;return m+j*(lt>180||lt<-180?lt-360*Math.round(lt/360):lt)}function Ao(m,D,j){return{h:ku(m.h,D.h,j),c:xa(m.c,D.c,j),l:xa(m.l,D.l,j),alpha:xa(m.alpha,D.alpha,j)}}var Ns={forward:Qs,reverse:ru,interpolate:wl},bs={forward:nu,reverse:Qi,interpolate:Ao},iu=Object.freeze({__proto__:null,lab:Ns,hcl:bs}),_a=function(m,D,j,lt,dt){this.type=m,this.operator=D,this.interpolation=j,this.input=lt,this.labels=[],this.outputs=[];for(var _t=0,Lt=dt;_t<Lt.length;_t+=1){var Kt=Lt[_t],oe=Kt[0],me=Kt[1];this.labels.push(oe),this.outputs.push(me)}};_a.interpolationFactor=function(m,D,j,lt){var dt=0;if(m.name==="exponential")dt=$s(D,m.base,j,lt);else if(m.name==="linear")dt=$s(D,1,j,lt);else if(m.name==="cubic-bezier"){var _t=m.controlPoints,Lt=new g(_t[0],_t[1],_t[2],_t[3]);dt=Lt.solve($s(D,1,j,lt))}return dt},_a.parse=function(m,D){var j=m[0],lt=m[1],dt=m[2],_t=m.slice(3);if(!Array.isArray(lt)||lt.length===0)return D.error("Expected an interpolation type expression.",1);if(lt[0]==="linear")lt={name:"linear"};else if(lt[0]==="exponential"){var Lt=lt[1];if(typeof Lt!="number")return D.error("Exponential interpolation requires a numeric base.",1,1);lt={name:"exponential",base:Lt}}else if(lt[0]==="cubic-bezier"){var Kt=lt.slice(1);if(Kt.length!==4||Kt.some(function(un){return typeof un!="number"||un<0||un>1}))return D.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);lt={name:"cubic-bezier",controlPoints:Kt}}else return D.error("Unknown interpolation type "+String(lt[0]),1,0);if(m.length-1<4)return D.error("Expected at least 4 arguments, but found only "+(m.length-1)+".");if((m.length-1)%2!==0)return D.error("Expected an even number of arguments.");if(dt=D.parse(dt,2,mr),!dt)return null;var oe=[],me=null;j==="interpolate-hcl"||j==="interpolate-lab"?me=kn:D.expectedType&&D.expectedType.kind!=="value"&&(me=D.expectedType);for(var Ee=0;Ee<_t.length;Ee+=2){var Ne=_t[Ee],He=_t[Ee+1],er=Ee+3,yr=Ee+4;if(typeof Ne!="number")return D.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',er);if(oe.length&&oe[oe.length-1][0]>=Ne)return D.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',er);var zr=D.parse(He,yr,me);if(!zr)return null;me=me||zr.type,oe.push([Ne,zr])}return me.kind!=="number"&&me.kind!=="color"&&!(me.kind==="array"&&me.itemType.kind==="number"&&typeof me.N=="number")?D.error("Type "+ii(me)+" is not interpolatable."):new _a(me,j,lt,dt,oe)},_a.prototype.evaluate=function(m){var D=this.labels,j=this.outputs;if(D.length===1)return j[0].evaluate(m);var lt=this.input.evaluate(m);if(lt<=D[0])return j[0].evaluate(m);var dt=D.length;if(lt>=D[dt-1])return j[dt-1].evaluate(m);var _t=Ds(D,lt),Lt=D[_t],Kt=D[_t+1],oe=_a.interpolationFactor(this.interpolation,lt,Lt,Kt),me=j[_t].evaluate(m),Ee=j[_t+1].evaluate(m);return this.operator==="interpolate"?Fs[this.type.kind.toLowerCase()](me,Ee,oe):this.operator==="interpolate-hcl"?bs.reverse(bs.interpolate(bs.forward(me),bs.forward(Ee),oe)):Ns.reverse(Ns.interpolate(Ns.forward(me),Ns.forward(Ee),oe))},_a.prototype.eachChild=function(m){m(this.input);for(var D=0,j=this.outputs;D<j.length;D+=1){var lt=j[D];m(lt)}},_a.prototype.outputDefined=function(){return this.outputs.every(function(m){return m.outputDefined()})},_a.prototype.serialize=function(){var m;this.interpolation.name==="linear"?m=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?m=["linear"]:m=["exponential",this.interpolation.base]:m=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var D=[this.operator,m,this.input.serialize()],j=0;j<this.labels.length;j++)D.push(this.labels[j],this.outputs[j].serialize());return D};function $s(m,D,j,lt){var dt=lt-j,_t=m-j;return dt===0?0:D===1?_t/dt:(Math.pow(D,_t)-1)/(Math.pow(D,dt)-1)}var $a=function(m,D){this.type=m,this.args=D};$a.parse=function(m,D){if(m.length<2)return D.error("Expectected at least one argument.");var j=null,lt=D.expectedType;lt&&lt.kind!=="value"&&(j=lt);for(var dt=[],_t=0,Lt=m.slice(1);_t<Lt.length;_t+=1){var Kt=Lt[_t],oe=D.parse(Kt,1+dt.length,j,void 0,{typeAnnotation:"omit"});if(!oe)return null;j=j||oe.type,dt.push(oe)}var me=lt&&dt.some(function(Ee){return Za(lt,Ee.type)});return me?new $a(fn,dt):new $a(j,dt)},$a.prototype.evaluate=function(m){for(var D=null,j=0,lt,dt=0,_t=this.args;dt<_t.length;dt+=1){var Lt=_t[dt];if(j++,D=Lt.evaluate(m),D&&D instanceof Qa&&!D.available&&(lt||(lt=D.name),D=null,j===this.args.length&&(D=lt)),D!==null)break}return D},$a.prototype.eachChild=function(m){this.args.forEach(m)},$a.prototype.outputDefined=function(){return this.args.every(function(m){return m.outputDefined()})},$a.prototype.serialize=function(){var m=["coalesce"];return this.eachChild(function(D){m.push(D.serialize())}),m};var Xo=function(m,D){this.type=D.type,this.bindings=[].concat(m),this.result=D};Xo.prototype.evaluate=function(m){return this.result.evaluate(m)},Xo.prototype.eachChild=function(m){for(var D=0,j=this.bindings;D<j.length;D+=1){var lt=j[D];m(lt[1])}m(this.result)},Xo.parse=function(m,D){if(m.length<4)return D.error("Expected at least 3 arguments, but found "+(m.length-1)+" instead.");for(var j=[],lt=1;lt<m.length-1;lt+=2){var dt=m[lt];if(typeof dt!="string")return D.error("Expected string, but found "+typeof dt+" instead.",lt);if(/[^a-zA-Z0-9_]/.test(dt))return D.error("Variable names must contain only alphanumeric characters or '_'.",lt);var _t=D.parse(m[lt+1],lt+1);if(!_t)return null;j.push([dt,_t])}var Lt=D.parse(m[m.length-1],m.length-1,D.expectedType,j);return Lt?new Xo(j,Lt):null},Xo.prototype.outputDefined=function(){return this.result.outputDefined()},Xo.prototype.serialize=function(){for(var m=["let"],D=0,j=this.bindings;D<j.length;D+=1){var lt=j[D],dt=lt[0],_t=lt[1];m.push(dt,_t.serialize())}return m.push(this.result.serialize()),m};var Ko=function(m,D,j){this.type=m,this.index=D,this.input=j};Ko.parse=function(m,D){if(m.length!==3)return D.error("Expected 2 arguments, but found "+(m.length-1)+" instead.");var j=D.parse(m[1],1,mr),lt=D.parse(m[2],2,Jn(D.expectedType||fn));if(!j||!lt)return null;var dt=lt.type;return new Ko(dt.itemType,j,lt)},Ko.prototype.evaluate=function(m){var D=this.index.evaluate(m),j=this.input.evaluate(m);if(D<0)throw new Ma("Array index out of bounds: "+D+" < 0.");if(D>=j.length)throw new Ma("Array index out of bounds: "+D+" > "+(j.length-1)+".");if(D!==Math.floor(D))throw new Ma("Array index must be an integer, but found "+D+" instead.");return j[D]},Ko.prototype.eachChild=function(m){m(this.index),m(this.input)},Ko.prototype.outputDefined=function(){return!1},Ko.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var os=function(m,D){this.type=an,this.needle=m,this.haystack=D};os.parse=function(m,D){if(m.length!==3)return D.error("Expected 2 arguments, but found "+(m.length-1)+" instead.");var j=D.parse(m[1],1,fn),lt=D.parse(m[2],2,fn);return!j||!lt?null:Ga(j.type,[an,Mr,mr,wr,fn])?new os(j,lt):D.error("Expected first argument to be of type boolean, string, number or null, but found "+ii(j.type)+" instead")},os.prototype.evaluate=function(m){var D=this.needle.evaluate(m),j=this.haystack.evaluate(m);if(!j)return!1;if(!Ja(D,["boolean","string","number","null"]))throw new Ma("Expected first argument to be of type boolean, string, number or null, but found "+ii(va(D))+" instead.");if(!Ja(j,["string","array"]))throw new Ma("Expected second argument to be of type array or string, but found "+ii(va(j))+" instead.");return j.indexOf(D)>=0},os.prototype.eachChild=function(m){m(this.needle),m(this.haystack)},os.prototype.outputDefined=function(){return!0},os.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ss=function(m,D,j){this.type=mr,this.needle=m,this.haystack=D,this.fromIndex=j};ss.parse=function(m,D){if(m.length<=2||m.length>=5)return D.error("Expected 3 or 4 arguments, but found "+(m.length-1)+" instead.");var j=D.parse(m[1],1,fn),lt=D.parse(m[2],2,fn);if(!j||!lt)return null;if(!Ga(j.type,[an,Mr,mr,wr,fn]))return D.error("Expected first argument to be of type boolean, string, number or null, but found "+ii(j.type)+" instead");if(m.length===4){var dt=D.parse(m[3],3,mr);return dt?new ss(j,lt,dt):null}else return new ss(j,lt)},ss.prototype.evaluate=function(m){var D=this.needle.evaluate(m),j=this.haystack.evaluate(m);if(!Ja(D,["boolean","string","number","null"]))throw new Ma("Expected first argument to be of type boolean, string, number or null, but found "+ii(va(D))+" instead.");if(!Ja(j,["string","array"]))throw new Ma("Expected second argument to be of type array or string, but found "+ii(va(j))+" instead.");if(this.fromIndex){var lt=this.fromIndex.evaluate(m);return j.indexOf(D,lt)}return j.indexOf(D)},ss.prototype.eachChild=function(m){m(this.needle),m(this.haystack),this.fromIndex&&m(this.fromIndex)},ss.prototype.outputDefined=function(){return!1},ss.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var m=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),m]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var ls=function(m,D,j,lt,dt,_t){this.inputType=m,this.type=D,this.input=j,this.cases=lt,this.outputs=dt,this.otherwise=_t};ls.parse=function(m,D){if(m.length<5)return D.error("Expected at least 4 arguments, but found only "+(m.length-1)+".");if(m.length%2!==1)return D.error("Expected an even number of arguments.");var j,lt;D.expectedType&&D.expectedType.kind!=="value"&&(lt=D.expectedType);for(var dt={},_t=[],Lt=2;Lt<m.length-1;Lt+=2){var Kt=m[Lt],oe=m[Lt+1];Array.isArray(Kt)||(Kt=[Kt]);var me=D.concat(Lt);if(Kt.length===0)return me.error("Expected at least one branch label.");for(var Ee=0,Ne=Kt;Ee<Ne.length;Ee+=1){var He=Ne[Ee];if(typeof He!="number"&&typeof He!="string")return me.error("Branch labels must be numbers or strings.");if(typeof He=="number"&&Math.abs(He)>Number.MAX_SAFE_INTEGER)return me.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof He=="number"&&Math.floor(He)!==He)return me.error("Numeric branch labels must be integer values.");if(!j)j=va(He);else if(me.checkSubtype(j,va(He)))return null;if(typeof dt[String(He)]<"u")return me.error("Branch labels must be unique.");dt[String(He)]=_t.length}var er=D.parse(oe,Lt,lt);if(!er)return null;lt=lt||er.type,_t.push(er)}var yr=D.parse(m[1],1,fn);if(!yr)return null;var zr=D.parse(m[m.length-1],m.length-1,lt);return!zr||yr.type.kind!=="value"&&D.concat(1).checkSubtype(j,yr.type)?null:new ls(j,lt,yr,dt,_t,zr)},ls.prototype.evaluate=function(m){var D=this.input.evaluate(m),j=va(D)===this.inputType&&this.outputs[this.cases[D]]||this.otherwise;return j.evaluate(m)},ls.prototype.eachChild=function(m){m(this.input),this.outputs.forEach(m),m(this.otherwise)},ls.prototype.outputDefined=function(){return this.outputs.every(function(m){return m.outputDefined()})&&this.otherwise.outputDefined()},ls.prototype.serialize=function(){for(var m=this,D=["match",this.input.serialize()],j=Object.keys(this.cases).sort(),lt=[],dt={},_t=0,Lt=j;_t<Lt.length;_t+=1){var Kt=Lt[_t],oe=dt[this.cases[Kt]];oe===void 0?(dt[this.cases[Kt]]=lt.length,lt.push([this.cases[Kt],[Kt]])):lt[oe][1].push(Kt)}for(var me=function(yr){return m.inputType.kind==="number"?Number(yr):yr},Ee=0,Ne=lt;Ee<Ne.length;Ee+=1){var He=Ne[Ee],oe=He[0],er=He[1];er.length===1?D.push(me(er[0])):D.push(er.map(me)),D.push(this.outputs[outputIndex$1].serialize())}return D.push(this.otherwise.serialize()),D};var To=function(m,D,j){this.type=m,this.branches=D,this.otherwise=j};To.parse=function(m,D){if(m.length<4)return D.error("Expected at least 3 arguments, but found only "+(m.length-1)+".");if(m.length%2!==0)return D.error("Expected an odd number of arguments.");var j;D.expectedType&&D.expectedType.kind!=="value"&&(j=D.expectedType);for(var lt=[],dt=1;dt<m.length-1;dt+=2){var _t=D.parse(m[dt],dt,an);if(!_t)return null;var Lt=D.parse(m[dt+1],dt+1,j);if(!Lt)return null;lt.push([_t,Lt]),j=j||Lt.type}var Kt=D.parse(m[m.length-1],m.length-1,j);return Kt?new To(j,lt,Kt):null},To.prototype.evaluate=function(m){for(var D=0,j=this.branches;D<j.length;D+=1){var lt=j[D],dt=lt[0],_t=lt[1];if(dt.evaluate(m))return _t.evaluate(m)}return this.otherwise.evaluate(m)},To.prototype.eachChild=function(m){for(var D=0,j=this.branches;D<j.length;D+=1){var lt=j[D],dt=lt[0],_t=lt[1];m(dt),m(_t)}m(this.otherwise)},To.prototype.outputDefined=function(){return this.branches.every(function(m){m[0];var D=m[1];return D.outputDefined()})&&this.otherwise.outputDefined()},To.prototype.serialize=function(){var m=["case"];return this.eachChild(function(D){m.push(D.serialize())}),m};var Fo=function(m,D,j,lt){this.type=m,this.input=D,this.beginIndex=j,this.endIndex=lt};Fo.parse=function(m,D){if(m.length<=2||m.length>=5)return D.error("Expected 3 or 4 arguments, but found "+(m.length-1)+" instead.");var j=D.parse(m[1],1,fn),lt=D.parse(m[2],2,mr);if(!j||!lt)return null;if(!Ga(j.type,[Jn(fn),Mr,fn]))return D.error("Expected first argument to be of type array or string, but found "+ii(j.type)+" instead");if(m.length===4){var dt=D.parse(m[3],3,mr);return dt?new Fo(j.type,j,lt,dt):null}else return new Fo(j.type,j,lt)},Fo.prototype.evaluate=function(m){var D=this.input.evaluate(m),j=this.beginIndex.evaluate(m);if(!Ja(D,["string","array"]))throw new Ma("Expected first argument to be of type array or string, but found "+ii(va(D))+" instead.");if(this.endIndex){var lt=this.endIndex.evaluate(m);return D.slice(j,lt)}return D.slice(j)},Fo.prototype.eachChild=function(m){m(this.input),m(this.beginIndex),this.endIndex&&m(this.endIndex)},Fo.prototype.outputDefined=function(){return!1},Fo.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var m=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),m]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function tl(m,D){return m==="=="||m==="!="?D.kind==="boolean"||D.kind==="string"||D.kind==="number"||D.kind==="null"||D.kind==="value":D.kind==="string"||D.kind==="number"||D.kind==="value"}function el(m,D,j){return D===j}function Al(m,D,j){return D!==j}function cc(m,D,j){return D<j}function fc(m,D,j){return D>j}function hc(m,D,j){return D<=j}function pc(m,D,j){return D>=j}function Tl(m,D,j,lt){return lt.compare(D,j)===0}function Mu(m,D,j,lt){return!Tl(m,D,j,lt)}function js(m,D,j,lt){return lt.compare(D,j)<0}function Da(m,D,j,lt){return lt.compare(D,j)>0}function to(m,D,j,lt){return lt.compare(D,j)<=0}function rl(m,D,j,lt){return lt.compare(D,j)>=0}function _s(m,D,j){var lt=m!=="=="&&m!=="!=";return function(){function dt(_t,Lt,Kt){this.type=an,this.lhs=_t,this.rhs=Lt,this.collator=Kt,this.hasUntypedArgument=_t.type.kind==="value"||Lt.type.kind==="value"}return dt.parse=function(_t,Lt){if(_t.length!==3&&_t.length!==4)return Lt.error("Expected two or three arguments.");var Kt=_t[0],oe=Lt.parse(_t[1],1,fn);if(!oe)return null;if(!tl(Kt,oe.type))return Lt.concat(1).error('"'+Kt+`" comparisons are not supported for type '`+ii(oe.type)+"'.");var me=Lt.parse(_t[2],2,fn);if(!me)return null;if(!tl(Kt,me.type))return Lt.concat(2).error('"'+Kt+`" comparisons are not supported for type '`+ii(me.type)+"'.");if(oe.type.kind!==me.type.kind&&oe.type.kind!=="value"&&me.type.kind!=="value")return Lt.error("Cannot compare types '"+ii(oe.type)+"' and '"+ii(me.type)+"'.");lt&&(oe.type.kind==="value"&&me.type.kind!=="value"?oe=new qa(me.type,[oe]):oe.type.kind!=="value"&&me.type.kind==="value"&&(me=new qa(oe.type,[me])));var Ee=null;if(_t.length===4){if(oe.type.kind!=="string"&&me.type.kind!=="string"&&oe.type.kind!=="value"&&me.type.kind!=="value")return Lt.error("Cannot use collator to compare non-string types.");if(Ee=Lt.parse(_t[3],3,Vn),!Ee)return null}return new dt(oe,me,Ee)},dt.prototype.evaluate=function(_t){var Lt=this.lhs.evaluate(_t),Kt=this.rhs.evaluate(_t);if(lt&&this.hasUntypedArgument){var oe=va(Lt),me=va(Kt);if(oe.kind!==me.kind||!(oe.kind==="string"||oe.kind==="number"))throw new Ma('Expected arguments for "'+m+'" to be (string, string) or (number, number), but found ('+oe.kind+", "+me.kind+") instead.")}if(this.collator&&!lt&&this.hasUntypedArgument){var Ee=va(Lt),Ne=va(Kt);if(Ee.kind!=="string"||Ne.kind!=="string")return D(_t,Lt,Kt)}return this.collator?j(_t,Lt,Kt,this.collator.evaluate(_t)):D(_t,Lt,Kt)},dt.prototype.eachChild=function(_t){_t(this.lhs),_t(this.rhs),this.collator&&_t(this.collator)},dt.prototype.outputDefined=function(){return!0},dt.prototype.serialize=function(){var _t=[m];return this.eachChild(function(Lt){_t.push(Lt.serialize())}),_t},dt}()}var nl=_s("==",el,Tl),kl=_s("!=",Al,Mu),dc=_s("<",cc,js),Su=_s(">",fc,Da),Lu=_s("<=",hc,to),au=_s(">=",pc,rl),us=function(m,D,j,lt,dt){this.type=Mr,this.number=m,this.locale=D,this.currency=j,this.minFractionDigits=lt,this.maxFractionDigits=dt};us.parse=function(m,D){if(m.length!==3)return D.error("Expected two arguments.");var j=D.parse(m[1],1,mr);if(!j)return null;var lt=m[2];if(typeof lt!="object"||Array.isArray(lt))return D.error("NumberFormat options argument must be an object.");var dt=null;if(lt.locale&&(dt=D.parse(lt.locale,1,Mr),!dt))return null;var _t=null;if(lt.currency&&(_t=D.parse(lt.currency,1,Mr),!_t))return null;var Lt=null;if(lt["min-fraction-digits"]&&(Lt=D.parse(lt["min-fraction-digits"],1,mr),!Lt))return null;var Kt=null;return lt["max-fraction-digits"]&&(Kt=D.parse(lt["max-fraction-digits"],1,mr),!Kt)?null:new us(j,dt,_t,Lt,Kt)},us.prototype.evaluate=function(m){return new Intl.NumberFormat(this.locale?this.locale.evaluate(m):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(m):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(m):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(m):void 0}).format(this.number.evaluate(m))},us.prototype.eachChild=function(m){m(this.number),this.locale&&m(this.locale),this.currency&&m(this.currency),this.minFractionDigits&&m(this.minFractionDigits),this.maxFractionDigits&&m(this.maxFractionDigits)},us.prototype.outputDefined=function(){return!1},us.prototype.serialize=function(){var m={};return this.locale&&(m.locale=this.locale.serialize()),this.currency&&(m.currency=this.currency.serialize()),this.minFractionDigits&&(m["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(m["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),m]};var wa=function(m){this.type=mr,this.input=m};wa.parse=function(m,D){if(m.length!==2)return D.error("Expected 1 argument, but found "+(m.length-1)+" instead.");var j=D.parse(m[1],1);return j?j.type.kind!=="array"&&j.type.kind!=="string"&&j.type.kind!=="value"?D.error("Expected argument of type string or array, but found "+ii(j.type)+" instead."):new wa(j):null},wa.prototype.evaluate=function(m){var D=this.input.evaluate(m);if(typeof D=="string"||Array.isArray(D))return D.length;throw new Ma("Expected value to be of type string or array, but found "+ii(va(D))+" instead.")},wa.prototype.eachChild=function(m){m(this.input)},wa.prototype.outputDefined=function(){return!1},wa.prototype.serialize=function(){var m=["length"];return this.eachChild(function(D){m.push(D.serialize())}),m};var Ro={"==":nl,"!=":kl,">":Su,"<":dc,">=":au,"<=":Lu,array:qa,at:Ko,boolean:qa,case:To,coalesce:$a,collator:Go,format:fo,image:Oo,in:os,"index-of":ss,interpolate:_a,"interpolate-hcl":_a,"interpolate-lab":_a,length:wa,let:Xo,literal:io,match:ls,number:qa,"number-format":us,object:qa,slice:Fo,step:as,string:qa,"to-boolean":Ia,"to-color":Ia,"to-number":Ia,"to-string":Ia,var:Do,within:ho};function ou(m,D){var j=D[0],lt=D[1],dt=D[2],_t=D[3];j=j.evaluate(m),lt=lt.evaluate(m),dt=dt.evaluate(m);var Lt=_t?_t.evaluate(m):1,Kt=xu(j,lt,dt,Lt);if(Kt)throw new Ma(Kt);return new Hi(j/255*Lt,lt/255*Lt,dt/255*Lt,Lt)}function Pu(m,D){return m in D}function ws(m,D){var j=D[m];return typeof j>"u"?null:j}function Ml(m,D,j,lt){for(;j<=lt;){var dt=j+lt>>1;if(D[dt]===m)return!0;D[dt]>m?lt=dt-1:j=dt+1}return!1}function ko(m){return{type:m}}za.register(Ro,{error:[Sn,[Mr],function(m,D){var j=D[0];throw new Ma(j.evaluate(m))}],typeof:[Mr,[fn],function(m,D){var j=D[0];return ii(va(j.evaluate(m)))}],"to-rgba":[Jn(mr,4),[kn],function(m,D){var j=D[0];return j.evaluate(m).toArray()}],rgb:[kn,[mr,mr,mr],ou],rgba:[kn,[mr,mr,mr,mr],ou],has:{type:an,overloads:[[[Mr],function(m,D){var j=D[0];return Pu(j.evaluate(m),m.properties())}],[[Mr,Rn],function(m,D){var j=D[0],lt=D[1];return Pu(j.evaluate(m),lt.evaluate(m))}]]},get:{type:fn,overloads:[[[Mr],function(m,D){var j=D[0];return ws(j.evaluate(m),m.properties())}],[[Mr,Rn],function(m,D){var j=D[0],lt=D[1];return ws(j.evaluate(m),lt.evaluate(m))}]]},"feature-state":[fn,[Mr],function(m,D){var j=D[0];return ws(j.evaluate(m),m.featureState||{})}],properties:[Rn,[],function(m){return m.properties()}],"geometry-type":[Mr,[],function(m){return m.geometryType()}],id:[fn,[],function(m){return m.id()}],zoom:[mr,[],function(m){return m.globals.zoom}],"heatmap-density":[mr,[],function(m){return m.globals.heatmapDensity||0}],"line-progress":[mr,[],function(m){return m.globals.lineProgress||0}],accumulated:[fn,[],function(m){return m.globals.accumulated===void 0?null:m.globals.accumulated}],"+":[mr,ko(mr),function(m,D){for(var j=0,lt=0,dt=D;lt<dt.length;lt+=1){var _t=dt[lt];j+=_t.evaluate(m)}return j}],"*":[mr,ko(mr),function(m,D){for(var j=1,lt=0,dt=D;lt<dt.length;lt+=1){var _t=dt[lt];j*=_t.evaluate(m)}return j}],"-":{type:mr,overloads:[[[mr,mr],function(m,D){var j=D[0],lt=D[1];return j.evaluate(m)-lt.evaluate(m)}],[[mr],function(m,D){var j=D[0];return-j.evaluate(m)}]]},"/":[mr,[mr,mr],function(m,D){var j=D[0],lt=D[1];return j.evaluate(m)/lt.evaluate(m)}],"%":[mr,[mr,mr],function(m,D){var j=D[0],lt=D[1];return j.evaluate(m)%lt.evaluate(m)}],ln2:[mr,[],function(){return Math.LN2}],pi:[mr,[],function(){return Math.PI}],e:[mr,[],function(){return Math.E}],"^":[mr,[mr,mr],function(m,D){var j=D[0],lt=D[1];return Math.pow(j.evaluate(m),lt.evaluate(m))}],sqrt:[mr,[mr],function(m,D){var j=D[0];return Math.sqrt(j.evaluate(m))}],log10:[mr,[mr],function(m,D){var j=D[0];return Math.log(j.evaluate(m))/Math.LN10}],ln:[mr,[mr],function(m,D){var j=D[0];return Math.log(j.evaluate(m))}],log2:[mr,[mr],function(m,D){var j=D[0];return Math.log(j.evaluate(m))/Math.LN2}],sin:[mr,[mr],function(m,D){var j=D[0];return Math.sin(j.evaluate(m))}],cos:[mr,[mr],function(m,D){var j=D[0];return Math.cos(j.evaluate(m))}],tan:[mr,[mr],function(m,D){var j=D[0];return Math.tan(j.evaluate(m))}],asin:[mr,[mr],function(m,D){var j=D[0];return Math.asin(j.evaluate(m))}],acos:[mr,[mr],function(m,D){var j=D[0];return Math.acos(j.evaluate(m))}],atan:[mr,[mr],function(m,D){var j=D[0];return Math.atan(j.evaluate(m))}],min:[mr,ko(mr),function(m,D){return Math.min.apply(Math,D.map(function(j){return j.evaluate(m)}))}],max:[mr,ko(mr),function(m,D){return Math.max.apply(Math,D.map(function(j){return j.evaluate(m)}))}],abs:[mr,[mr],function(m,D){var j=D[0];return Math.abs(j.evaluate(m))}],round:[mr,[mr],function(m,D){var j=D[0],lt=j.evaluate(m);return lt<0?-Math.round(-lt):Math.round(lt)}],floor:[mr,[mr],function(m,D){var j=D[0];return Math.floor(j.evaluate(m))}],ceil:[mr,[mr],function(m,D){var j=D[0];return Math.ceil(j.evaluate(m))}],"filter-==":[an,[Mr,fn],function(m,D){var j=D[0],lt=D[1];return m.properties()[j.value]===lt.value}],"filter-id-==":[an,[fn],function(m,D){var j=D[0];return m.id()===j.value}],"filter-type-==":[an,[Mr],function(m,D){var j=D[0];return m.geometryType()===j.value}],"filter-<":[an,[Mr,fn],function(m,D){var j=D[0],lt=D[1],dt=m.properties()[j.value],_t=lt.value;return typeof dt==typeof _t&&dt<_t}],"filter-id-<":[an,[fn],function(m,D){var j=D[0],lt=m.id(),dt=j.value;return typeof lt==typeof dt&&lt<dt}],"filter->":[an,[Mr,fn],function(m,D){var j=D[0],lt=D[1],dt=m.properties()[j.value],_t=lt.value;return typeof dt==typeof _t&&dt>_t}],"filter-id->":[an,[fn],function(m,D){var j=D[0],lt=m.id(),dt=j.value;return typeof lt==typeof dt&&lt>dt}],"filter-<=":[an,[Mr,fn],function(m,D){var j=D[0],lt=D[1],dt=m.properties()[j.value],_t=lt.value;return typeof dt==typeof _t&&dt<=_t}],"filter-id-<=":[an,[fn],function(m,D){var j=D[0],lt=m.id(),dt=j.value;return typeof lt==typeof dt&&lt<=dt}],"filter->=":[an,[Mr,fn],function(m,D){var j=D[0],lt=D[1],dt=m.properties()[j.value],_t=lt.value;return typeof dt==typeof _t&&dt>=_t}],"filter-id->=":[an,[fn],function(m,D){var j=D[0],lt=m.id(),dt=j.value;return typeof lt==typeof dt&&lt>=dt}],"filter-has":[an,[fn],function(m,D){var j=D[0];return j.value in m.properties()}],"filter-has-id":[an,[],function(m){return m.id()!==null&&m.id()!==void 0}],"filter-type-in":[an,[Jn(Mr)],function(m,D){var j=D[0];return j.value.indexOf(m.geometryType())>=0}],"filter-id-in":[an,[Jn(fn)],function(m,D){var j=D[0];return j.value.indexOf(m.id())>=0}],"filter-in-small":[an,[Mr,Jn(fn)],function(m,D){var j=D[0],lt=D[1];return lt.value.indexOf(m.properties()[j.value])>=0}],"filter-in-large":[an,[Mr,Jn(fn)],function(m,D){var j=D[0],lt=D[1];return Ml(m.properties()[j.value],lt.value,0,lt.value.length-1)}],all:{type:an,overloads:[[[an,an],function(m,D){var j=D[0],lt=D[1];return j.evaluate(m)&&lt.evaluate(m)}],[ko(an),function(m,D){for(var j=0,lt=D;j<lt.length;j+=1){var dt=lt[j];if(!dt.evaluate(m))return!1}return!0}]]},any:{type:an,overloads:[[[an,an],function(m,D){var j=D[0],lt=D[1];return j.evaluate(m)||lt.evaluate(m)}],[ko(an),function(m,D){for(var j=0,lt=D;j<lt.length;j+=1){var dt=lt[j];if(dt.evaluate(m))return!0}return!1}]]},"!":[an,[an],function(m,D){var j=D[0];return!j.evaluate(m)}],"is-supported-script":[an,[Mr],function(m,D){var j=D[0],lt=m.globals&&m.globals.isSupportedScript;return lt?lt(j.evaluate(m)):!0}],upcase:[Mr,[Mr],function(m,D){var j=D[0];return j.evaluate(m).toUpperCase()}],downcase:[Mr,[Mr],function(m,D){var j=D[0];return j.evaluate(m).toLowerCase()}],concat:[Mr,ko(fn),function(m,D){return D.map(function(j){return Ys(j.evaluate(m))}).join("")}],"resolved-locale":[Mr,[Vn],function(m,D){var j=D[0];return j.evaluate(m).resolvedLocale()}]});function Sl(m){return{result:"success",value:m}}function Jo(m){return{result:"error",value:m}}function Qo(m){return m["property-type"]==="data-driven"||m["property-type"]==="cross-faded-data-driven"}function su(m){return!!m.expression&&m.expression.parameters.indexOf("zoom")>-1}function Us(m){return!!m.expression&&m.expression.interpolated}function Yi(m){return m instanceof Number?"number":m instanceof String?"string":m instanceof Boolean?"boolean":Array.isArray(m)?"array":m===null?"null":typeof m}function As(m){return typeof m=="object"&&m!==null&&!Array.isArray(m)}function Ll(m){return m}function Pl(m,D){var j=D.type==="color",lt=m.stops&&typeof m.stops[0][0]=="object",dt=lt||m.property!==void 0,_t=lt||!dt,Lt=m.type||(Us(D)?"exponential":"interval");if(j&&(m=cn({},m),m.stops&&(m.stops=m.stops.map(function(Qn){return[Qn[0],Hi.parse(Qn[1])]})),m.default?m.default=Hi.parse(m.default):m.default=Hi.parse(D.default)),m.colorSpace&&m.colorSpace!=="rgb"&&!iu[m.colorSpace])throw new Error("Unknown color space: "+m.colorSpace);var Kt,oe,me;if(Lt==="exponential")Kt=Zs;else if(Lt==="interval")Kt=lu;else if(Lt==="categorical"){Kt=vc,oe=Object.create(null);for(var Ee=0,Ne=m.stops;Ee<Ne.length;Ee+=1){var He=Ne[Ee];oe[He[0]]=He[1]}me=typeof m.stops[0][0]}else if(Lt==="identity")Kt=uu;else throw new Error('Unknown function type "'+Lt+'"');if(lt){for(var er={},yr=[],zr=0;zr<m.stops.length;zr++){var un=m.stops[zr],Kr=un[0].zoom;er[Kr]===void 0&&(er[Kr]={zoom:Kr,type:m.type,property:m.property,default:m.default,stops:[]},yr.push(Kr)),er[Kr].stops.push([un[0].value,un[1]])}for(var vn=[],bn=0,pn=yr;bn<pn.length;bn+=1){var Ln=pn[bn];vn.push([er[Ln].zoom,Pl(er[Ln],D)])}var Bn={name:"linear"};return{kind:"composite",interpolationType:Bn,interpolationFactor:_a.interpolationFactor.bind(void 0,Bn),zoomStops:vn.map(function(Qn){return Qn[0]}),evaluate:function(Qn,ui){var ci=Qn.zoom;return Zs({stops:vn,base:m.base},D,ci).evaluate(ci,ui)}}}else if(_t){var Wn=Lt==="exponential"?{name:"exponential",base:m.base!==void 0?m.base:1}:null;return{kind:"camera",interpolationType:Wn,interpolationFactor:_a.interpolationFactor.bind(void 0,Wn),zoomStops:m.stops.map(function(Qn){return Qn[0]}),evaluate:function(Qn){var ui=Qn.zoom;return Kt(m,D,ui,oe,me)}}}else return{kind:"source",evaluate:function(Qn,ui){var ci=ui&&ui.properties?ui.properties[m.property]:void 0;return ci===void 0?cs(m.default,D.default):Kt(m,D,ci,oe,me)}}}function cs(m,D,j){if(m!==void 0)return m;if(D!==void 0)return D;if(j!==void 0)return j}function vc(m,D,j,lt,dt){var _t=typeof j===dt?lt[j]:void 0;return cs(_t,m.default,D.default)}function lu(m,D,j){if(Yi(j)!=="number")return cs(m.default,D.default);var lt=m.stops.length;if(lt===1||j<=m.stops[0][0])return m.stops[0][1];if(j>=m.stops[lt-1][0])return m.stops[lt-1][1];var dt=Ds(m.stops.map(function(_t){return _t[0]}),j);return m.stops[dt][1]}function Zs(m,D,j){var lt=m.base!==void 0?m.base:1;if(Yi(j)!=="number")return cs(m.default,D.default);var dt=m.stops.length;if(dt===1||j<=m.stops[0][0])return m.stops[0][1];if(j>=m.stops[dt-1][0])return m.stops[dt-1][1];var _t=Ds(m.stops.map(function(Ne){return Ne[0]}),j),Lt=Eu(j,lt,m.stops[_t][0],m.stops[_t+1][0]),Kt=m.stops[_t][1],oe=m.stops[_t+1][1],me=Fs[D.type]||Ll;if(m.colorSpace&&m.colorSpace!=="rgb"){var Ee=iu[m.colorSpace];me=function(Ne,He){return Ee.reverse(Ee.interpolate(Ee.forward(Ne),Ee.forward(He),Lt))}}return typeof Kt.evaluate=="function"?{evaluate:function(){for(var Ne=[],He=arguments.length;He--;)Ne[He]=arguments[He];var er=Kt.evaluate.apply(void 0,Ne),yr=oe.evaluate.apply(void 0,Ne);if(!(er===void 0||yr===void 0))return me(er,yr,Lt)}}:me(Kt,oe,Lt)}function uu(m,D,j){return D.type==="color"?j=Hi.parse(j):D.type==="formatted"?j=Ea.fromString(j.toString()):D.type==="resolvedImage"?j=Qa.fromString(j.toString()):Yi(j)!==D.type&&(D.type!=="enum"||!D.values[j])&&(j=void 0),cs(j,m.default,D.default)}function Eu(m,D,j,lt){var dt=lt-j,_t=m-j;return dt===0?0:D===1?_t/dt:(Math.pow(D,_t)-1)/(Math.pow(D,dt)-1)}var $o=function(m,D){this.expression=m,this._warningHistory={},this._evaluator=new Io,this._defaultValue=D?Ou(D):null,this._enumValues=D&&D.type==="enum"?D.values:null};$o.prototype.evaluateWithoutErrorHandling=function(m,D,j,lt,dt,_t){return this._evaluator.globals=m,this._evaluator.feature=D,this._evaluator.featureState=j,this._evaluator.canonical=lt,this._evaluator.availableImages=dt||null,this._evaluator.formattedSection=_t,this.expression.evaluate(this._evaluator)},$o.prototype.evaluate=function(m,D,j,lt,dt,_t){this._evaluator.globals=m,this._evaluator.feature=D||null,this._evaluator.featureState=j||null,this._evaluator.canonical=lt,this._evaluator.availableImages=dt||null,this._evaluator.formattedSection=_t||null;try{var Lt=this.expression.evaluate(this._evaluator);if(Lt==null||typeof Lt=="number"&&Lt!==Lt)return this._defaultValue;if(this._enumValues&&!(Lt in this._enumValues))throw new Ma("Expected value to be one of "+Object.keys(this._enumValues).map(function(Kt){return JSON.stringify(Kt)}).join(", ")+", but found "+JSON.stringify(Lt)+" instead.");return Lt}catch(Kt){return this._warningHistory[Kt.message]||(this._warningHistory[Kt.message]=!0,typeof console<"u"&&console.warn(Kt.message)),this._defaultValue}};function fs(m){return Array.isArray(m)&&m.length>0&&typeof m[0]=="string"&&m[0]in Ro}function Ts(m,D){var j=new Yo(Ro,[],D?El(D):void 0),lt=j.parse(m,void 0,void 0,void 0,D&&D.type==="string"?{typeAnnotation:"coerce"}:void 0);return lt?Sl(new $o(lt,D)):Jo(j.errors)}var ks=function(m,D){this.kind=m,this._styleExpression=D,this.isStateDependent=m!=="constant"&&!Ks(D.expression)};ks.prototype.evaluateWithoutErrorHandling=function(m,D,j,lt,dt,_t){return this._styleExpression.evaluateWithoutErrorHandling(m,D,j,lt,dt,_t)},ks.prototype.evaluate=function(m,D,j,lt,dt,_t){return this._styleExpression.evaluate(m,D,j,lt,dt,_t)};var eo=function(m,D,j,lt){this.kind=m,this.zoomStops=j,this._styleExpression=D,this.isStateDependent=m!=="camera"&&!Ks(D.expression),this.interpolationType=lt};eo.prototype.evaluateWithoutErrorHandling=function(m,D,j,lt,dt,_t){return this._styleExpression.evaluateWithoutErrorHandling(m,D,j,lt,dt,_t)},eo.prototype.evaluate=function(m,D,j,lt,dt,_t){return this._styleExpression.evaluate(m,D,j,lt,dt,_t)},eo.prototype.interpolationFactor=function(m,D,j){return this.interpolationType?_a.interpolationFactor(this.interpolationType,m,D,j):0};function oo(m,D){if(m=Ts(m,D),m.result==="error")return m;var j=m.value.expression,lt=xs(j);if(!lt&&!Qo(D))return Jo([new gn("","data expressions not supported")]);var dt=zs(j,["zoom"]);if(!dt&&!su(D))return Jo([new gn("","zoom expressions not supported")]);var _t=qs(j);if(!_t&&!dt)return Jo([new gn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(_t instanceof gn)return Jo([_t]);if(_t instanceof _a&&!Us(D))return Jo([new gn("",'"interpolate" expressions cannot be used with this property')]);if(!_t)return Sl(lt?new ks("constant",m.value):new ks("source",m.value));var Lt=_t instanceof _a?_t.interpolation:void 0;return Sl(lt?new eo("camera",m.value,_t.labels,Lt):new eo("composite",m.value,_t.labels,Lt))}var Ms=function(m,D){this._parameters=m,this._specification=D,cn(this,Pl(this._parameters,this._specification))};Ms.deserialize=function(m){return new Ms(m._parameters,m._specification)},Ms.serialize=function(m){return{_parameters:m._parameters,_specification:m._specification}};function Cu(m,D){if(As(m))return new Ms(m,D);if(fs(m)){var j=oo(m,D);if(j.result==="error")throw new Error(j.value.map(function(dt){return dt.key+": "+dt.message}).join(", "));return j.value}else{var lt=m;return typeof m=="string"&&D.type==="color"&&(lt=Hi.parse(m)),{kind:"constant",evaluate:function(){return lt}}}}function qs(m){var D=null;if(m instanceof Xo)D=qs(m.result);else if(m instanceof $a)for(var j=0,lt=m.args;j<lt.length;j+=1){var dt=lt[j];if(D=qs(dt),D)break}else(m instanceof as||m instanceof _a)&&m.input instanceof za&&m.input.name==="zoom"&&(D=m);return D instanceof gn||m.eachChild(function(_t){var Lt=qs(_t);Lt instanceof gn?D=Lt:!D&&Lt?D=new gn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):D&&Lt&&D!==Lt&&(D=new gn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),D}function El(m){var D={color:kn,string:Mr,number:mr,enum:Mr,boolean:an,formatted:$n,resolvedImage:Kn};return m.type==="array"?Jn(D[m.value]||fn,m.length):D[m.type]}function Ou(m){return m.type==="color"&&As(m.default)?new Hi(0,0,0,0):m.type==="color"?Hi.parse(m.default)||null:m.default===void 0?null:m.default}function Mo(m){var D=m.key,j=m.value,lt=m.valueSpec||{},dt=m.objectElementValidators||{},_t=m.style,Lt=m.styleSpec,Kt=[],oe=Yi(j);if(oe!=="object")return[new fr(D,j,"object expected, "+oe+" found")];for(var me in j){var Ee=me.split(".")[0],Ne=lt[Ee]||lt["*"],He=void 0;if(dt[Ee])He=dt[Ee];else if(lt[Ee])He=Ke;else if(dt["*"])He=dt["*"];else if(lt["*"])He=Ke;else{Kt.push(new fr(D,j[me],'unknown property "'+me+'"'));continue}Kt=Kt.concat(He({key:(D&&D+".")+me,value:j[me],valueSpec:Ne,style:_t,styleSpec:Lt,object:j,objectKey:me},j))}for(var er in lt)dt[er]||lt[er].required&&lt[er].default===void 0&&j[er]===void 0&&Kt.push(new fr(D,j,'missing required property "'+er+'"'));return Kt}function cu(m){var D=m.value,j=m.valueSpec,lt=m.style,dt=m.styleSpec,_t=m.key,Lt=m.arrayElementValidator||Ke;if(Yi(D)!=="array")return[new fr(_t,D,"array expected, "+Yi(D)+" found")];if(j.length&&D.length!==j.length)return[new fr(_t,D,"array length "+j.length+" expected, length "+D.length+" found")];if(j["min-length"]&&D.length<j["min-length"])return[new fr(_t,D,"array length at least "+j["min-length"]+" expected, length "+D.length+" found")];var Kt={type:j.value,values:j.values};dt.$version<7&&(Kt.function=j.function),Yi(j.value)==="object"&&(Kt=j.value);for(var oe=[],me=0;me<D.length;me++)oe=oe.concat(Lt({array:D,arrayIndex:me,value:D[me],valueSpec:Kt,style:lt,styleSpec:dt,key:_t+"["+me+"]"}));return oe}function hs(m){var D=m.key,j=m.value,lt=m.valueSpec,dt=Yi(j);return dt==="number"&&j!==j&&(dt="NaN"),dt!=="number"?[new fr(D,j,"number expected, "+dt+" found")]:"minimum"in lt&&j<lt.minimum?[new fr(D,j,j+" is less than the minimum value "+lt.minimum)]:"maximum"in lt&&j>lt.maximum?[new fr(D,j,j+" is greater than the maximum value "+lt.maximum)]:[]}function il(m){var D=m.valueSpec,j=nn(m.value.type),lt,dt={},_t,Lt,Kt=j!=="categorical"&&m.value.property===void 0,oe=!Kt,me=Yi(m.value.stops)==="array"&&Yi(m.value.stops[0])==="array"&&Yi(m.value.stops[0][0])==="object",Ee=Mo({key:m.key,value:m.value,valueSpec:m.styleSpec.function,style:m.style,styleSpec:m.styleSpec,objectElementValidators:{stops:Ne,default:yr}});return j==="identity"&&Kt&&Ee.push(new fr(m.key,m.value,'missing required property "property"')),j!=="identity"&&!m.value.stops&&Ee.push(new fr(m.key,m.value,'missing required property "stops"')),j==="exponential"&&m.valueSpec.expression&&!Us(m.valueSpec)&&Ee.push(new fr(m.key,m.value,"exponential functions not supported")),m.styleSpec.$version>=8&&(oe&&!Qo(m.valueSpec)?Ee.push(new fr(m.key,m.value,"property functions not supported")):Kt&&!su(m.valueSpec)&&Ee.push(new fr(m.key,m.value,"zoom functions not supported"))),(j==="categorical"||me)&&m.value.property===void 0&&Ee.push(new fr(m.key,m.value,'"property" property is required')),Ee;function Ne(zr){if(j==="identity")return[new fr(zr.key,zr.value,'identity function may not have a "stops" property')];var un=[],Kr=zr.value;return un=un.concat(cu({key:zr.key,value:Kr,valueSpec:zr.valueSpec,style:zr.style,styleSpec:zr.styleSpec,arrayElementValidator:He})),Yi(Kr)==="array"&&Kr.length===0&&un.push(new fr(zr.key,Kr,"array must have at least one stop")),un}function He(zr){var un=[],Kr=zr.value,vn=zr.key;if(Yi(Kr)!=="array")return[new fr(vn,Kr,"array expected, "+Yi(Kr)+" found")];if(Kr.length!==2)return[new fr(vn,Kr,"array length 2 expected, length "+Kr.length+" found")];if(me){if(Yi(Kr[0])!=="object")return[new fr(vn,Kr,"object expected, "+Yi(Kr[0])+" found")];if(Kr[0].zoom===void 0)return[new fr(vn,Kr,"object stop key must have zoom")];if(Kr[0].value===void 0)return[new fr(vn,Kr,"object stop key must have value")];if(Lt&&Lt>nn(Kr[0].zoom))return[new fr(vn,Kr[0].zoom,"stop zoom values must appear in ascending order")];nn(Kr[0].zoom)!==Lt&&(Lt=nn(Kr[0].zoom),_t=void 0,dt={}),un=un.concat(Mo({key:vn+"[0]",value:Kr[0],valueSpec:{zoom:{}},style:zr.style,styleSpec:zr.styleSpec,objectElementValidators:{zoom:hs,value:er}}))}else un=un.concat(er({key:vn+"[0]",value:Kr[0],valueSpec:{},style:zr.style,styleSpec:zr.styleSpec},Kr));return fs(_n(Kr[1]))?un.concat([new fr(vn+"[1]",Kr[1],"expressions are not allowed in function stops.")]):un.concat(Ke({key:vn+"[1]",value:Kr[1],valueSpec:D,style:zr.style,styleSpec:zr.styleSpec}))}function er(zr,un){var Kr=Yi(zr.value),vn=nn(zr.value),bn=zr.value!==null?zr.value:un;if(!lt)lt=Kr;else if(Kr!==lt)return[new fr(zr.key,bn,Kr+" stop domain type must match previous stop domain type "+lt)];if(Kr!=="number"&&Kr!=="string"&&Kr!=="boolean")return[new fr(zr.key,bn,"stop domain value must be a number, string, or boolean")];if(Kr!=="number"&&j!=="categorical"){var pn="number expected, "+Kr+" found";return Qo(D)&&j===void 0&&(pn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new fr(zr.key,bn,pn)]}return j==="categorical"&&Kr==="number"&&(!isFinite(vn)||Math.floor(vn)!==vn)?[new fr(zr.key,bn,"integer expected, found "+vn)]:j!=="categorical"&&Kr==="number"&&_t!==void 0&&vn<_t?[new fr(zr.key,bn,"stop domain values must appear in ascending order")]:(_t=vn,j==="categorical"&&vn in dt?[new fr(zr.key,bn,"stop domain values must be unique")]:(dt[vn]=!0,[]))}function yr(zr){return Ke({key:zr.key,value:zr.value,valueSpec:D,style:zr.style,styleSpec:zr.styleSpec})}}function ts(m){var D=(m.expressionContext==="property"?oo:Ts)(_n(m.value),m.valueSpec);if(D.result==="error")return D.value.map(function(lt){return new fr(""+m.key+lt.key,m.value,lt.message)});var j=D.value.expression||D.value._styleExpression.expression;if(m.expressionContext==="property"&&m.propertyKey==="text-font"&&!j.outputDefined())return[new fr(m.key,m.value,'Invalid data expression for "'+m.propertyKey+'". Output values must be contained as literals within the expression.')];if(m.expressionContext==="property"&&m.propertyType==="layout"&&!Ks(j))return[new fr(m.key,m.value,'"feature-state" data expressions are not supported with layout properties.')];if(m.expressionContext==="filter"&&!Ks(j))return[new fr(m.key,m.value,'"feature-state" data expressions are not supported with filters.')];if(m.expressionContext&&m.expressionContext.indexOf("cluster")===0){if(!zs(j,["zoom","feature-state"]))return[new fr(m.key,m.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(m.expressionContext==="cluster-initial"&&!xs(j))return[new fr(m.key,m.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function gc(m){var D=m.value,j=m.key,lt=Yi(D);return lt!=="boolean"?[new fr(j,D,"boolean expected, "+lt+" found")]:[]}function fu(m){var D=m.key,j=m.value,lt=Yi(j);return lt!=="string"?[new fr(D,j,"color expected, "+lt+" found")]:Vl(j)===null?[new fr(D,j,'color expected, "'+j+'" found')]:[]}function Cl(m){var D=m.key,j=m.value,lt=m.valueSpec,dt=[];return Array.isArray(lt.values)?lt.values.indexOf(nn(j))===-1&&dt.push(new fr(D,j,"expected one of ["+lt.values.join(", ")+"], "+JSON.stringify(j)+" found")):Object.keys(lt.values).indexOf(nn(j))===-1&&dt.push(new fr(D,j,"expected one of ["+Object.keys(lt.values).join(", ")+"], "+JSON.stringify(j)+" found")),dt}function Va(m){if(m===!0||m===!1)return!0;if(!Array.isArray(m)||m.length===0)return!1;switch(m[0]){case"has":return m.length>=2&&m[1]!=="$id"&&m[1]!=="$type";case"in":return m.length>=3&&(typeof m[1]!="string"||Array.isArray(m[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return m.length!==3||Array.isArray(m[1])||Array.isArray(m[2]);case"any":case"all":for(var D=0,j=m.slice(1);D<j.length;D+=1){var lt=j[D];if(!Va(lt)&&typeof lt!="boolean")return!1}return!0;default:return!0}}var Iu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function al(m){if(m==null)return{filter:function(){return!0},needGeometry:!1};Va(m)||(m=ps(m));var D=Ts(m,Iu);if(D.result==="error")throw new Error(D.value.map(function(lt){return lt.key+": "+lt.message}).join(", "));var j=ol(m);return{filter:function(lt,dt,_t){return D.value.evaluate(lt,dt,{},_t)},needGeometry:j}}function Bo(m,D){return m<D?-1:m>D?1:0}function ol(m){if(!Array.isArray(m))return!1;if(m[0]==="within")return!0;for(var D=1;D<m.length;D++)if(ol(m[D]))return!0;return!1}function ps(m){if(!m)return!0;var D=m[0];if(m.length<=1)return D!=="any";var j=D==="=="?Ol(m[1],m[2],"=="):D==="!="?Ss(Ol(m[1],m[2],"==")):D==="<"||D===">"||D==="<="||D===">="?Ol(m[1],m[2],D):D==="any"?zu(m.slice(1)):D==="all"?["all"].concat(m.slice(1).map(ps)):D==="none"?["all"].concat(m.slice(1).map(ps).map(Ss)):D==="in"?hu(m[1],m.slice(2)):D==="!in"?Ss(hu(m[1],m.slice(2))):D==="has"?pu(m[1]):D==="!has"?Ss(pu(m[1])):D==="within"?m:!0;return j}function Ol(m,D,j){switch(m){case"$type":return["filter-type-"+j,D];case"$id":return["filter-id-"+j,D];default:return["filter-"+j,m,D]}}function zu(m){return["any"].concat(m.map(ps))}function hu(m,D){if(D.length===0)return!1;switch(m){case"$type":return["filter-type-in",["literal",D]];case"$id":return["filter-id-in",["literal",D]];default:return D.length>200&&!D.some(function(j){return typeof j!=typeof D[0]})?["filter-in-large",m,["literal",D.sort(Bo)]]:["filter-in-small",m,["literal",D]]}}function pu(m){switch(m){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",m]}}function Ss(m){return["!",m]}function Il(m){return Va(_n(m.value))?ts(cn({},m,{expressionContext:"filter",valueSpec:{value:"boolean"}})):sl(m)}function sl(m){var D=m.value,j=m.key;if(Yi(D)!=="array")return[new fr(j,D,"array expected, "+Yi(D)+" found")];var lt=m.styleSpec,dt,_t=[];if(D.length<1)return[new fr(j,D,"filter array must have at least 1 element")];switch(_t=_t.concat(Cl({key:j+"[0]",value:D[0],valueSpec:lt.filter_operator,style:m.style,styleSpec:m.styleSpec})),nn(D[0])){case"<":case"<=":case">":case">=":D.length>=2&&nn(D[1])==="$type"&&_t.push(new fr(j,D,'"$type" cannot be use with operator "'+D[0]+'"'));case"==":case"!=":D.length!==3&&_t.push(new fr(j,D,'filter array for operator "'+D[0]+'" must have 3 elements'));case"in":case"!in":D.length>=2&&(dt=Yi(D[1]),dt!=="string"&&_t.push(new fr(j+"[1]",D[1],"string expected, "+dt+" found")));for(var Lt=2;Lt<D.length;Lt++)dt=Yi(D[Lt]),nn(D[1])==="$type"?_t=_t.concat(Cl({key:j+"["+Lt+"]",value:D[Lt],valueSpec:lt.geometry_type,style:m.style,styleSpec:m.styleSpec})):dt!=="string"&&dt!=="number"&&dt!=="boolean"&&_t.push(new fr(j+"["+Lt+"]",D[Lt],"string, number, or boolean expected, "+dt+" found"));break;case"any":case"all":case"none":for(var Kt=1;Kt<D.length;Kt++)_t=_t.concat(sl({key:j+"["+Kt+"]",value:D[Kt],style:m.style,styleSpec:m.styleSpec}));break;case"has":case"!has":dt=Yi(D[1]),D.length!==2?_t.push(new fr(j,D,'filter array for "'+D[0]+'" operator must have 2 elements')):dt!=="string"&&_t.push(new fr(j+"[1]",D[1],"string expected, "+dt+" found"));break;case"within":dt=Yi(D[1]),D.length!==2?_t.push(new fr(j,D,'filter array for "'+D[0]+'" operator must have 2 elements')):dt!=="object"&&_t.push(new fr(j+"[1]",D[1],"object expected, "+dt+" found"));break}return _t}function Du(m,D){var j=m.key,lt=m.style,dt=m.styleSpec,_t=m.value,Lt=m.objectKey,Kt=dt[D+"_"+m.layerType];if(!Kt)return[];var oe=Lt.match(/^(.*)-transition$/);if(D==="paint"&&oe&&Kt[oe[1]]&&Kt[oe[1]].transition)return Ke({key:j,value:_t,valueSpec:dt.transition,style:lt,styleSpec:dt});var me=m.valueSpec||Kt[Lt];if(!me)return[new fr(j,_t,'unknown property "'+Lt+'"')];var Ee;if(Yi(_t)==="string"&&Qo(me)&&!me.tokens&&(Ee=/^{([^}]+)}$/.exec(_t)))return[new fr(j,_t,'"'+Lt+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Ee[1])+" }`.")];var Ne=[];return m.layerType==="symbol"&&(Lt==="text-field"&&lt&&!lt.glyphs&&Ne.push(new fr(j,_t,'use of "text-field" requires a style "glyphs" property')),Lt==="text-font"&&As(_n(_t))&&nn(_t.type)==="identity"&&Ne.push(new fr(j,_t,'"text-font" does not support identity functions'))),Ne.concat(Ke({key:m.key,value:_t,valueSpec:me,style:lt,styleSpec:dt,expressionContext:"property",propertyType:D,propertyKey:Lt}))}function ll(m){return Du(m,"paint")}function Fu(m){return Du(m,"layout")}function Zt(m){var D=[],j=m.value,lt=m.key,dt=m.style,_t=m.styleSpec;!j.type&&!j.ref&&D.push(new fr(lt,j,'either "type" or "ref" is required'));var Lt=nn(j.type),Kt=nn(j.ref);if(j.id)for(var oe=nn(j.id),me=0;me<m.arrayIndex;me++){var Ee=dt.layers[me];nn(Ee.id)===oe&&D.push(new fr(lt,j.id,'duplicate layer id "'+j.id+'", previously used at line '+Ee.id.__line__))}if("ref"in j){["type","source","source-layer","filter","layout"].forEach(function(yr){yr in j&&D.push(new fr(lt,j[yr],'"'+yr+'" is prohibited for ref layers'))});var Ne;dt.layers.forEach(function(yr){nn(yr.id)===Kt&&(Ne=yr)}),Ne?Ne.ref?D.push(new fr(lt,j.ref,"ref cannot reference another ref layer")):Lt=nn(Ne.type):D.push(new fr(lt,j.ref,'ref layer "'+Kt+'" not found'))}else if(Lt!=="background")if(!j.source)D.push(new fr(lt,j,'missing required property "source"'));else{var He=dt.sources&&dt.sources[j.source],er=He&&nn(He.type);He?er==="vector"&&Lt==="raster"?D.push(new fr(lt,j.source,'layer "'+j.id+'" requires a raster source')):er==="raster"&&Lt!=="raster"?D.push(new fr(lt,j.source,'layer "'+j.id+'" requires a vector source')):er==="vector"&&!j["source-layer"]?D.push(new fr(lt,j,'layer "'+j.id+'" must specify a "source-layer"')):er==="raster-dem"&&Lt!=="hillshade"?D.push(new fr(lt,j.source,"raster-dem source can only be used with layer type 'hillshade'.")):Lt==="line"&&j.paint&&j.paint["line-gradient"]&&(er!=="geojson"||!He.lineMetrics)&&D.push(new fr(lt,j,'layer "'+j.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):D.push(new fr(lt,j.source,'source "'+j.source+'" not found'))}return D=D.concat(Mo({key:lt,value:j,valueSpec:_t.layer,style:m.style,styleSpec:m.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Ke({key:lt+".type",value:j.type,valueSpec:_t.layer.type,style:m.style,styleSpec:m.styleSpec,object:j,objectKey:"type"})},filter:Il,layout:function(yr){return Mo({layer:j,key:yr.key,value:yr.value,style:yr.style,styleSpec:yr.styleSpec,objectElementValidators:{"*":function(zr){return Fu(cn({layerType:Lt},zr))}}})},paint:function(yr){return Mo({layer:j,key:yr.key,value:yr.value,style:yr.style,styleSpec:yr.styleSpec,objectElementValidators:{"*":function(zr){return ll(cn({layerType:Lt},zr))}}})}}})),D}function Yt(m){var D=m.value,j=m.key,lt=Yi(D);return lt!=="string"?[new fr(j,D,"string expected, "+lt+" found")]:[]}var ie={promoteId:ke};function ue(m){var D=m.value,j=m.key,lt=m.styleSpec,dt=m.style;if(!D.type)return[new fr(j,D,'"type" is required')];var _t=nn(D.type),Lt;switch(_t){case"vector":case"raster":case"raster-dem":return Lt=Mo({key:j,value:D,valueSpec:lt["source_"+_t.replace("-","_")],style:m.style,styleSpec:lt,objectElementValidators:ie}),Lt;case"geojson":if(Lt=Mo({key:j,value:D,valueSpec:lt.source_geojson,style:dt,styleSpec:lt,objectElementValidators:ie}),D.cluster)for(var Kt in D.clusterProperties){var oe=D.clusterProperties[Kt],me=oe[0],Ee=oe[1],Ne=typeof me=="string"?[me,["accumulated"],["get",Kt]]:me;Lt.push.apply(Lt,ts({key:j+"."+Kt+".map",value:Ee,expressionContext:"cluster-map"})),Lt.push.apply(Lt,ts({key:j+"."+Kt+".reduce",value:Ne,expressionContext:"cluster-reduce"}))}return Lt;case"video":return Mo({key:j,value:D,valueSpec:lt.source_video,style:dt,styleSpec:lt});case"image":return Mo({key:j,value:D,valueSpec:lt.source_image,style:dt,styleSpec:lt});case"canvas":return[new fr(j,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Cl({key:j+".type",value:D.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:dt,styleSpec:lt})}}function ke(m){var D=m.key,j=m.value;if(Yi(j)==="string")return Yt({key:D,value:j});var lt=[];for(var dt in j)lt.push.apply(lt,Yt({key:D+"."+dt,value:j[dt]}));return lt}function xe(m){var D=m.value,j=m.styleSpec,lt=j.light,dt=m.style,_t=[],Lt=Yi(D);if(D===void 0)return _t;if(Lt!=="object")return _t=_t.concat([new fr("light",D,"object expected, "+Lt+" found")]),_t;for(var Kt in D){var oe=Kt.match(/^(.*)-transition$/);oe&&lt[oe[1]]&&lt[oe[1]].transition?_t=_t.concat(Ke({key:Kt,value:D[Kt],valueSpec:j.transition,style:dt,styleSpec:j})):lt[Kt]?_t=_t.concat(Ke({key:Kt,value:D[Kt],valueSpec:lt[Kt],style:dt,styleSpec:j})):_t=_t.concat([new fr(Kt,D[Kt],'unknown property "'+Kt+'"')])}return _t}function Pe(m){return Yt(m).length===0?[]:ts(m)}function rr(m){return Yt(m).length===0?[]:ts(m)}var ur={"*":function(){return[]},array:cu,boolean:gc,number:hs,color:fu,constants:Qr,enum:Cl,filter:Il,function:il,layer:Zt,object:Mo,source:ue,light:xe,string:Yt,formatted:Pe,resolvedImage:rr};function Ke(m){var D=m.value,j=m.valueSpec,lt=m.styleSpec;if(j.expression&&As(nn(D)))return il(m);if(j.expression&&fs(_n(D)))return ts(m);if(j.type&&ur[j.type])return ur[j.type](m);var dt=Mo(cn({},m,{valueSpec:j.type?lt[j.type]:j}));return dt}function pr(m){var D=m.value,j=m.key,lt=Yt(m);return lt.length||(D.indexOf("{fontstack}")===-1&&lt.push(new fr(j,D,'"glyphs" url must include a "{fontstack}" token')),D.indexOf("{range}")===-1&&lt.push(new fr(j,D,'"glyphs" url must include a "{range}" token'))),lt}function br(m,D){D===void 0&&(D=Ue);var j=[];return j=j.concat(Ke({key:"",value:m,valueSpec:D.$root,styleSpec:D,style:m,objectElementValidators:{glyphs:pr,"*":function(){return[]}}})),m.constants&&(j=j.concat(Qr({key:"constants",value:m.constants,style:m,styleSpec:D}))),Br(j)}br.source=Vr(ue),br.light=Vr(xe),br.layer=Vr(Zt),br.filter=Vr(Il),br.paintProperty=Vr(ll),br.layoutProperty=Vr(Fu);function Br(m){return[].concat(m).sort(function(D,j){return D.line-j.line})}function Vr(m){return function(){for(var D=[],j=arguments.length;j--;)D[j]=arguments[j];return Br(m.apply(this,D))}}var hn=br,dn=hn.light,An=hn.paintProperty,ri=hn.layoutProperty;function vi(m,D){var j=!1;if(D&&D.length)for(var lt=0,dt=D;lt<dt.length;lt+=1){var _t=dt[lt];m.fire(new Je(new Error(_t.message))),j=!0}return j}var bi=Ti,wi=3;function Ti(m,D,j){var lt=this.cells=[];if(m instanceof ArrayBuffer){this.arrayBuffer=m;var dt=new Int32Array(this.arrayBuffer);m=dt[0],D=dt[1],j=dt[2],this.d=D+2*j;for(var _t=0;_t<this.d*this.d;_t++){var Lt=dt[wi+_t],Kt=dt[wi+_t+1];lt.push(Lt===Kt?null:dt.subarray(Lt,Kt))}var oe=dt[wi+lt.length],me=dt[wi+lt.length+1];this.keys=dt.subarray(oe,me),this.bboxes=dt.subarray(me),this.insert=this._insertReadonly}else{this.d=D+2*j;for(var Ee=0;Ee<this.d*this.d;Ee++)lt.push([]);this.keys=[],this.bboxes=[]}this.n=D,this.extent=m,this.padding=j,this.scale=D/m,this.uid=0;var Ne=j/D*m;this.min=-Ne,this.max=m+Ne}Ti.prototype.insert=function(m,D,j,lt,dt){this._forEachCell(D,j,lt,dt,this._insertCell,this.uid++),this.keys.push(m),this.bboxes.push(D),this.bboxes.push(j),this.bboxes.push(lt),this.bboxes.push(dt)},Ti.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ti.prototype._insertCell=function(m,D,j,lt,dt,_t){this.cells[dt].push(_t)},Ti.prototype.query=function(m,D,j,lt,dt){var _t=this.min,Lt=this.max;if(m<=_t&&D<=_t&&Lt<=j&&Lt<=lt&&!dt)return Array.prototype.slice.call(this.keys);var Kt=[],oe={};return this._forEachCell(m,D,j,lt,this._queryCell,Kt,oe,dt),Kt},Ti.prototype._queryCell=function(m,D,j,lt,dt,_t,Lt,Kt){var oe=this.cells[dt];if(oe!==null)for(var me=this.keys,Ee=this.bboxes,Ne=0;Ne<oe.length;Ne++){var He=oe[Ne];if(Lt[He]===void 0){var er=He*4;(Kt?Kt(Ee[er+0],Ee[er+1],Ee[er+2],Ee[er+3]):m<=Ee[er+2]&&D<=Ee[er+3]&&j>=Ee[er+0]&&lt>=Ee[er+1])?(Lt[He]=!0,_t.push(me[He])):Lt[He]=!1}}},Ti.prototype._forEachCell=function(m,D,j,lt,dt,_t,Lt,Kt){for(var oe=this._convertToCellCoord(m),me=this._convertToCellCoord(D),Ee=this._convertToCellCoord(j),Ne=this._convertToCellCoord(lt),He=oe;He<=Ee;He++)for(var er=me;er<=Ne;er++){var yr=this.d*er+He;if(!(Kt&&!Kt(this._convertFromCellCoord(He),this._convertFromCellCoord(er),this._convertFromCellCoord(He+1),this._convertFromCellCoord(er+1)))&&dt.call(this,m,D,j,lt,yr,_t,Lt,Kt))return}},Ti.prototype._convertFromCellCoord=function(m){return(m-this.padding)/this.scale},Ti.prototype._convertToCellCoord=function(m){return Math.max(0,Math.min(this.d-1,Math.floor(m*this.scale)+this.padding))},Ti.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var m=this.cells,D=wi+this.cells.length+1+1,j=0,lt=0;lt<this.cells.length;lt++)j+=this.cells[lt].length;var dt=new Int32Array(D+j+this.keys.length+this.bboxes.length);dt[0]=this.extent,dt[1]=this.n,dt[2]=this.padding;for(var _t=D,Lt=0;Lt<m.length;Lt++){var Kt=m[Lt];dt[wi+Lt]=_t,dt.set(Kt,_t),_t+=Kt.length}return dt[wi+m.length]=_t,dt.set(this.keys,_t),_t+=this.keys.length,dt[wi+m.length+1]=_t,dt.set(this.bboxes,_t),_t+=this.bboxes.length,dt.buffer};var Wi=self.ImageData,ga=self.ImageBitmap,$i={};function st(m,D,j){j===void 0&&(j={}),Object.defineProperty(D,"_classRegistryKey",{value:m,writeable:!1}),$i[m]={klass:D,omit:j.omit||[],shallow:j.shallow||[]}}st("Object",Object),bi.serialize=function(m,D){var j=m.toArrayBuffer();return D&&D.push(j),{buffer:j}},bi.deserialize=function(m){return new bi(m.buffer)},st("Grid",bi),st("Color",Hi),st("Error",Error),st("ResolvedImage",Qa),st("StylePropertyFunction",Ms),st("StyleExpression",$o,{omit:["_evaluator"]}),st("ZoomDependentExpression",eo),st("ZoomConstantExpression",ks),st("CompoundExpression",za,{omit:["_evaluate"]});for(var bt in Ro)Ro[bt]._classRegistryKey||st("Expression_"+bt,Ro[bt]);function Ct(m){return m&&typeof ArrayBuffer<"u"&&(m instanceof ArrayBuffer||m.constructor&&m.constructor.name==="ArrayBuffer")}function qt(m){return ga&&m instanceof ga}function Wt(m,D){if(m==null||typeof m=="boolean"||typeof m=="number"||typeof m=="string"||m instanceof Boolean||m instanceof Number||m instanceof String||m instanceof Date||m instanceof RegExp)return m;if(Ct(m)||qt(m))return D&&D.push(m),m;if(ArrayBuffer.isView(m)){var j=m;return D&&D.push(j.buffer),j}if(m instanceof Wi)return D&&D.push(m.data.buffer),m;if(Array.isArray(m)){for(var lt=[],dt=0,_t=m;dt<_t.length;dt+=1){var Lt=_t[dt];lt.push(Wt(Lt,D))}return lt}if(typeof m=="object"){var Kt=m.constructor,oe=Kt._classRegistryKey;if(!oe)throw new Error("can't serialize object of unregistered class");var me=Kt.serialize?Kt.serialize(m,D):{};if(!Kt.serialize){for(var Ee in m)if(m.hasOwnProperty(Ee)&&!($i[oe].omit.indexOf(Ee)>=0)){var Ne=m[Ee];me[Ee]=$i[oe].shallow.indexOf(Ee)>=0?Ne:Wt(Ne,D)}m instanceof Error&&(me.message=m.message)}if(me.$name)throw new Error("$name property is reserved for worker serialization logic.");return oe!=="Object"&&(me.$name=oe),me}throw new Error("can't serialize object of type "+typeof m)}function Jt(m){if(m==null||typeof m=="boolean"||typeof m=="number"||typeof m=="string"||m instanceof Boolean||m instanceof Number||m instanceof String||m instanceof Date||m instanceof RegExp||Ct(m)||qt(m)||ArrayBuffer.isView(m)||m instanceof Wi)return m;if(Array.isArray(m))return m.map(Jt);if(typeof m=="object"){var D=m.$name||"Object",j=$i[D],lt=j.klass;if(!lt)throw new Error("can't deserialize unregistered class "+D);if(lt.deserialize)return lt.deserialize(m);for(var dt=Object.create(lt.prototype),_t=0,Lt=Object.keys(m);_t<Lt.length;_t+=1){var Kt=Lt[_t];if(Kt!=="$name"){var oe=m[Kt];dt[Kt]=$i[D].shallow.indexOf(Kt)>=0?oe:Jt(oe)}}return dt}throw new Error("can't deserialize object of type "+typeof m)}var ge=function(){this.first=!0};ge.prototype.update=function(m,D){var j=Math.floor(m);return this.first?(this.first=!1,this.lastIntegerZoom=j,this.lastIntegerZoomTime=0,this.lastZoom=m,this.lastFloorZoom=j,!0):(this.lastFloorZoom>j?(this.lastIntegerZoom=j+1,this.lastIntegerZoomTime=D):this.lastFloorZoom<j&&(this.lastIntegerZoom=j,this.lastIntegerZoomTime=D),m!==this.lastZoom?(this.lastZoom=m,this.lastFloorZoom=j,!0):!1)};var ne={"Latin-1 Supplement":function(m){return m>=128&&m<=255},Arabic:function(m){return m>=1536&&m<=1791},"Arabic Supplement":function(m){return m>=1872&&m<=1919},"Arabic Extended-A":function(m){return m>=2208&&m<=2303},"Hangul Jamo":function(m){return m>=4352&&m<=4607},"Unified Canadian Aboriginal Syllabics":function(m){return m>=5120&&m<=5759},Khmer:function(m){return m>=6016&&m<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(m){return m>=6320&&m<=6399},"General Punctuation":function(m){return m>=8192&&m<=8303},"Letterlike Symbols":function(m){return m>=8448&&m<=8527},"Number Forms":function(m){return m>=8528&&m<=8591},"Miscellaneous Technical":function(m){return m>=8960&&m<=9215},"Control Pictures":function(m){return m>=9216&&m<=9279},"Optical Character Recognition":function(m){return m>=9280&&m<=9311},"Enclosed Alphanumerics":function(m){return m>=9312&&m<=9471},"Geometric Shapes":function(m){return m>=9632&&m<=9727},"Miscellaneous Symbols":function(m){return m>=9728&&m<=9983},"Miscellaneous Symbols and Arrows":function(m){return m>=11008&&m<=11263},"CJK Radicals Supplement":function(m){return m>=11904&&m<=12031},"Kangxi Radicals":function(m){return m>=12032&&m<=12255},"Ideographic Description Characters":function(m){return m>=12272&&m<=12287},"CJK Symbols and Punctuation":function(m){return m>=12288&&m<=12351},Hiragana:function(m){return m>=12352&&m<=12447},Katakana:function(m){return m>=12448&&m<=12543},Bopomofo:function(m){return m>=12544&&m<=12591},"Hangul Compatibility Jamo":function(m){return m>=12592&&m<=12687},Kanbun:function(m){return m>=12688&&m<=12703},"Bopomofo Extended":function(m){return m>=12704&&m<=12735},"CJK Strokes":function(m){return m>=12736&&m<=12783},"Katakana Phonetic Extensions":function(m){return m>=12784&&m<=12799},"Enclosed CJK Letters and Months":function(m){return m>=12800&&m<=13055},"CJK Compatibility":function(m){return m>=13056&&m<=13311},"CJK Unified Ideographs Extension A":function(m){return m>=13312&&m<=19903},"Yijing Hexagram Symbols":function(m){return m>=19904&&m<=19967},"CJK Unified Ideographs":function(m){return m>=19968&&m<=40959},"Yi Syllables":function(m){return m>=40960&&m<=42127},"Yi Radicals":function(m){return m>=42128&&m<=42191},"Hangul Jamo Extended-A":function(m){return m>=43360&&m<=43391},"Hangul Syllables":function(m){return m>=44032&&m<=55215},"Hangul Jamo Extended-B":function(m){return m>=55216&&m<=55295},"Private Use Area":function(m){return m>=57344&&m<=63743},"CJK Compatibility Ideographs":function(m){return m>=63744&&m<=64255},"Arabic Presentation Forms-A":function(m){return m>=64336&&m<=65023},"Vertical Forms":function(m){return m>=65040&&m<=65055},"CJK Compatibility Forms":function(m){return m>=65072&&m<=65103},"Small Form Variants":function(m){return m>=65104&&m<=65135},"Arabic Presentation Forms-B":function(m){return m>=65136&&m<=65279},"Halfwidth and Fullwidth Forms":function(m){return m>=65280&&m<=65519}};function Ie(m){for(var D=0,j=m;D<j.length;D+=1){var lt=j[D];if(Ar(lt.charCodeAt(0)))return!0}return!1}function Ge(m){for(var D=0,j=m;D<j.length;D+=1){var lt=j[D];if(!Ye(lt.charCodeAt(0)))return!1}return!0}function Ye(m){return!(ne.Arabic(m)||ne["Arabic Supplement"](m)||ne["Arabic Extended-A"](m)||ne["Arabic Presentation Forms-A"](m)||ne["Arabic Presentation Forms-B"](m))}function vr(m){return m<11904?!1:!!(ne["Bopomofo Extended"](m)||ne.Bopomofo(m)||ne["CJK Compatibility Forms"](m)||ne["CJK Compatibility Ideographs"](m)||ne["CJK Compatibility"](m)||ne["CJK Radicals Supplement"](m)||ne["CJK Strokes"](m)||ne["CJK Symbols and Punctuation"](m)||ne["CJK Unified Ideographs Extension A"](m)||ne["CJK Unified Ideographs"](m)||ne["Enclosed CJK Letters and Months"](m)||ne["Halfwidth and Fullwidth Forms"](m)||ne.Hiragana(m)||ne["Ideographic Description Characters"](m)||ne["Kangxi Radicals"](m)||ne["Katakana Phonetic Extensions"](m)||ne.Katakana(m)||ne["Vertical Forms"](m)||ne["Yi Radicals"](m)||ne["Yi Syllables"](m))}function Ar(m){return m===746||m===747?!0:m<4352?!1:!!(ne["Bopomofo Extended"](m)||ne.Bopomofo(m)||ne["CJK Compatibility Forms"](m)&&!(m>=65097&&m<=65103)||ne["CJK Compatibility Ideographs"](m)||ne["CJK Compatibility"](m)||ne["CJK Radicals Supplement"](m)||ne["CJK Strokes"](m)||ne["CJK Symbols and Punctuation"](m)&&!(m>=12296&&m<=12305)&&!(m>=12308&&m<=12319)&&m!==12336||ne["CJK Unified Ideographs Extension A"](m)||ne["CJK Unified Ideographs"](m)||ne["Enclosed CJK Letters and Months"](m)||ne["Hangul Compatibility Jamo"](m)||ne["Hangul Jamo Extended-A"](m)||ne["Hangul Jamo Extended-B"](m)||ne["Hangul Jamo"](m)||ne["Hangul Syllables"](m)||ne.Hiragana(m)||ne["Ideographic Description Characters"](m)||ne.Kanbun(m)||ne["Kangxi Radicals"](m)||ne["Katakana Phonetic Extensions"](m)||ne.Katakana(m)&&m!==12540||ne["Halfwidth and Fullwidth Forms"](m)&&m!==65288&&m!==65289&&m!==65293&&!(m>=65306&&m<=65310)&&m!==65339&&m!==65341&&m!==65343&&!(m>=65371&&m<=65503)&&m!==65507&&!(m>=65512&&m<=65519)||ne["Small Form Variants"](m)&&!(m>=65112&&m<=65118)&&!(m>=65123&&m<=65126)||ne["Unified Canadian Aboriginal Syllabics"](m)||ne["Unified Canadian Aboriginal Syllabics Extended"](m)||ne["Vertical Forms"](m)||ne["Yijing Hexagram Symbols"](m)||ne["Yi Syllables"](m)||ne["Yi Radicals"](m))}function jr(m){return!!(ne["Latin-1 Supplement"](m)&&(m===167||m===169||m===174||m===177||m===188||m===189||m===190||m===215||m===247)||ne["General Punctuation"](m)&&(m===8214||m===8224||m===8225||m===8240||m===8241||m===8251||m===8252||m===8258||m===8263||m===8264||m===8265||m===8273)||ne["Letterlike Symbols"](m)||ne["Number Forms"](m)||ne["Miscellaneous Technical"](m)&&(m>=8960&&m<=8967||m>=8972&&m<=8991||m>=8996&&m<=9e3||m===9003||m>=9085&&m<=9114||m>=9150&&m<=9165||m===9167||m>=9169&&m<=9179||m>=9186&&m<=9215)||ne["Control Pictures"](m)&&m!==9251||ne["Optical Character Recognition"](m)||ne["Enclosed Alphanumerics"](m)||ne["Geometric Shapes"](m)||ne["Miscellaneous Symbols"](m)&&!(m>=9754&&m<=9759)||ne["Miscellaneous Symbols and Arrows"](m)&&(m>=11026&&m<=11055||m>=11088&&m<=11097||m>=11192&&m<=11243)||ne["CJK Symbols and Punctuation"](m)||ne.Katakana(m)||ne["Private Use Area"](m)||ne["CJK Compatibility Forms"](m)||ne["Small Form Variants"](m)||ne["Halfwidth and Fullwidth Forms"](m)||m===8734||m===8756||m===8757||m>=9984&&m<=10087||m>=10102&&m<=10131||m===65532||m===65533)}function Gr(m){return!(Ar(m)||jr(m))}function Tr(m){return ne.Arabic(m)||ne["Arabic Supplement"](m)||ne["Arabic Extended-A"](m)||ne["Arabic Presentation Forms-A"](m)||ne["Arabic Presentation Forms-B"](m)}function Dr(m){return m>=1424&&m<=2303||ne["Arabic Presentation Forms-A"](m)||ne["Arabic Presentation Forms-B"](m)}function Ur(m,D){return!(!D&&Dr(m)||m>=2304&&m<=3583||m>=3840&&m<=4255||ne.Khmer(m))}function Wr(m){for(var D=0,j=m;D<j.length;D+=1){var lt=j[D];if(Dr(lt.charCodeAt(0)))return!0}return!1}function tn(m,D){for(var j=0,lt=m;j<lt.length;j+=1){var dt=lt[j];if(!Ur(dt.charCodeAt(0),D))return!1}return!0}var Nr={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},Pn=null,Dn=Nr.unavailable,Zn=null,Yn=function(m){m&&typeof m=="string"&&m.indexOf("NetworkError")>-1&&(Dn=Nr.error),Pn&&Pn(m)};function li(){si.fire(new Be("pluginStateChange",{pluginStatus:Dn,pluginURL:Zn}))}var si=new $e,Ei=function(){return Dn},di=function(m){return m({pluginStatus:Dn,pluginURL:Zn}),si.on("pluginStateChange",m),m},Li=function(m,D,j){if(j===void 0&&(j=!1),Dn===Nr.deferred||Dn===Nr.loading||Dn===Nr.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");Zn=nt.resolveURL(m),Dn=Nr.deferred,Pn=D,li(),j||Zi()},Zi=function(){if(Dn!==Nr.deferred||!Zn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Dn=Nr.loading,li(),Zn&&ye({url:Zn},function(m){m?Yn(m):(Dn=Nr.loaded,li())})},Gi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Dn===Nr.loaded||Gi.applyArabicShaping!=null},isLoading:function(){return Dn===Nr.loading},setState:function(m){Dn=m.pluginStatus,Zn=m.pluginURL},isParsed:function(){return Gi.applyArabicShaping!=null&&Gi.processBidirectionalText!=null&&Gi.processStyledBidirectionalText!=null},getPluginURL:function(){return Zn}},Xi=function(){!Gi.isLoading()&&!Gi.isLoaded()&&Ei()==="deferred"&&Zi()},In=function(m,D){this.zoom=m,D?(this.now=D.now,this.fadeDuration=D.fadeDuration,this.zoomHistory=D.zoomHistory,this.transition=D.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ge,this.transition={})};In.prototype.isSupportedScript=function(m){return tn(m,Gi.isLoaded())},In.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},In.prototype.getCrossfadeParameters=function(){var m=this.zoom,D=m-Math.floor(m),j=this.crossFadingFactor();return m>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:D+(1-D)*j}:{fromScale:.5,toScale:1,t:1-(1-j)*D}};var Pi=function(m,D){this.property=m,this.value=D,this.expression=Cu(D===void 0?m.specification.default:D,m.specification)};Pi.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Pi.prototype.possiblyEvaluate=function(m,D,j){return this.property.possiblyEvaluate(this,m,D,j)};var Si=function(m){this.property=m,this.value=new Pi(m,void 0)};Si.prototype.transitioned=function(m,D){return new ua(this.property,this.value,D,u({},m.transition,this.transition),m.now)},Si.prototype.untransitioned=function(){return new ua(this.property,this.value,null,{},0)};var zi=function(m){this._properties=m,this._values=Object.create(m.defaultTransitionablePropertyValues)};zi.prototype.getValue=function(m){return w(this._values[m].value.value)},zi.prototype.setValue=function(m,D){this._values.hasOwnProperty(m)||(this._values[m]=new Si(this._values[m].property)),this._values[m].value=new Pi(this._values[m].property,D===null?void 0:w(D))},zi.prototype.getTransition=function(m){return w(this._values[m].transition)},zi.prototype.setTransition=function(m,D){this._values.hasOwnProperty(m)||(this._values[m]=new Si(this._values[m].property)),this._values[m].transition=w(D)||void 0},zi.prototype.serialize=function(){for(var m={},D=0,j=Object.keys(this._values);D<j.length;D+=1){var lt=j[D],dt=this.getValue(lt);dt!==void 0&&(m[lt]=dt);var _t=this.getTransition(lt);_t!==void 0&&(m[lt+"-transition"]=_t)}return m},zi.prototype.transitioned=function(m,D){for(var j=new ba(this._properties),lt=0,dt=Object.keys(this._values);lt<dt.length;lt+=1){var _t=dt[lt];j._values[_t]=this._values[_t].transitioned(m,D._values[_t])}return j},zi.prototype.untransitioned=function(){for(var m=new ba(this._properties),D=0,j=Object.keys(this._values);D<j.length;D+=1){var lt=j[D];m._values[lt]=this._values[lt].untransitioned()}return m};var ua=function(m,D,j,lt,dt){this.property=m,this.value=D,this.begin=dt+lt.delay||0,this.end=this.begin+lt.duration||0,m.specification.transition&&(lt.delay||lt.duration)&&(this.prior=j)};ua.prototype.possiblyEvaluate=function(m,D,j){var lt=m.now||0,dt=this.value.possiblyEvaluate(m,D,j),_t=this.prior;if(_t){if(lt>this.end)return this.prior=null,dt;if(this.value.isDataDriven())return this.prior=null,dt;if(lt<this.begin)return _t.possiblyEvaluate(m,D,j);var Lt=(lt-this.begin)/(this.end-this.begin);return this.property.interpolate(_t.possiblyEvaluate(m,D,j),dt,n(Lt))}else return dt};var ba=function(m){this._properties=m,this._values=Object.create(m.defaultTransitioningPropertyValues)};ba.prototype.possiblyEvaluate=function(m,D,j){for(var lt=new Ki(this._properties),dt=0,_t=Object.keys(this._values);dt<_t.length;dt+=1){var Lt=_t[dt];lt._values[Lt]=this._values[Lt].possiblyEvaluate(m,D,j)}return lt},ba.prototype.hasTransition=function(){for(var m=0,D=Object.keys(this._values);m<D.length;m+=1){var j=D[m];if(this._values[j].prior)return!0}return!1};var Ta=function(m){this._properties=m,this._values=Object.create(m.defaultPropertyValues)};Ta.prototype.getValue=function(m){return w(this._values[m].value)},Ta.prototype.setValue=function(m,D){this._values[m]=new Pi(this._values[m].property,D===null?void 0:w(D))},Ta.prototype.serialize=function(){for(var m={},D=0,j=Object.keys(this._values);D<j.length;D+=1){var lt=j[D],dt=this.getValue(lt);dt!==void 0&&(m[lt]=dt)}return m},Ta.prototype.possiblyEvaluate=function(m,D,j){for(var lt=new Ki(this._properties),dt=0,_t=Object.keys(this._values);dt<_t.length;dt+=1){var Lt=_t[dt];lt._values[Lt]=this._values[Lt].possiblyEvaluate(m,D,j)}return lt};var aa=function(m,D,j){this.property=m,this.value=D,this.parameters=j};aa.prototype.isConstant=function(){return this.value.kind==="constant"},aa.prototype.constantOr=function(m){return this.value.kind==="constant"?this.value.value:m},aa.prototype.evaluate=function(m,D,j,lt){return this.property.evaluate(this.value,this.parameters,m,D,j,lt)};var Ki=function(m){this._properties=m,this._values=Object.create(m.defaultPossiblyEvaluatedValues)};Ki.prototype.get=function(m){return this._values[m]};var oi=function(m){this.specification=m};oi.prototype.possiblyEvaluate=function(m,D){return m.expression.evaluate(D)},oi.prototype.interpolate=function(m,D,j){var lt=Fs[this.specification.type];return lt?lt(m,D,j):m};var pi=function(m,D){this.specification=m,this.overrides=D};pi.prototype.possiblyEvaluate=function(m,D,j,lt){return m.expression.kind==="constant"||m.expression.kind==="camera"?new aa(this,{kind:"constant",value:m.expression.evaluate(D,null,{},j,lt)},D):new aa(this,m.expression,D)},pi.prototype.interpolate=function(m,D,j){if(m.value.kind!=="constant"||D.value.kind!=="constant")return m;if(m.value.value===void 0||D.value.value===void 0)return new aa(this,{kind:"constant",value:void 0},m.parameters);var lt=Fs[this.specification.type];return lt?new aa(this,{kind:"constant",value:lt(m.value.value,D.value.value,j)},m.parameters):m},pi.prototype.evaluate=function(m,D,j,lt,dt,_t){return m.kind==="constant"?m.value:m.evaluate(D,j,lt,dt,_t)};var oa=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.possiblyEvaluate=function(j,lt,dt,_t){if(j.value===void 0)return new aa(this,{kind:"constant",value:void 0},lt);if(j.expression.kind==="constant"){var Lt=j.expression.evaluate(lt,null,{},dt,_t),Kt=j.property.specification.type==="resolvedImage",oe=Kt&&typeof Lt!="string"?Lt.name:Lt,me=this._calculate(oe,oe,oe,lt);return new aa(this,{kind:"constant",value:me},lt)}else if(j.expression.kind==="camera"){var Ee=this._calculate(j.expression.evaluate({zoom:lt.zoom-1}),j.expression.evaluate({zoom:lt.zoom}),j.expression.evaluate({zoom:lt.zoom+1}),lt);return new aa(this,{kind:"constant",value:Ee},lt)}else return new aa(this,j.expression,lt)},D.prototype.evaluate=function(j,lt,dt,_t,Lt,Kt){if(j.kind==="source"){var oe=j.evaluate(lt,dt,_t,Lt,Kt);return this._calculate(oe,oe,oe,lt)}else return j.kind==="composite"?this._calculate(j.evaluate({zoom:Math.floor(lt.zoom)-1},dt,_t),j.evaluate({zoom:Math.floor(lt.zoom)},dt,_t),j.evaluate({zoom:Math.floor(lt.zoom)+1},dt,_t),lt):j.value},D.prototype._calculate=function(j,lt,dt,_t){var Lt=_t.zoom;return Lt>_t.zoomHistory.lastIntegerZoom?{from:j,to:lt}:{from:dt,to:lt}},D.prototype.interpolate=function(j){return j},D}(pi),Aa=function(m){this.specification=m};Aa.prototype.possiblyEvaluate=function(m,D,j,lt){if(m.value!==void 0)if(m.expression.kind==="constant"){var dt=m.expression.evaluate(D,null,{},j,lt);return this._calculate(dt,dt,dt,D)}else return this._calculate(m.expression.evaluate(new In(Math.floor(D.zoom-1),D)),m.expression.evaluate(new In(Math.floor(D.zoom),D)),m.expression.evaluate(new In(Math.floor(D.zoom+1),D)),D)},Aa.prototype._calculate=function(m,D,j,lt){var dt=lt.zoom;return dt>lt.zoomHistory.lastIntegerZoom?{from:m,to:D}:{from:j,to:D}},Aa.prototype.interpolate=function(m){return m};var so=function(m){this.specification=m};so.prototype.possiblyEvaluate=function(m,D,j,lt){return!!m.expression.evaluate(D,null,{},j,lt)},so.prototype.interpolate=function(){return!1};var Oa=function(m){this.properties=m,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var D in m){var j=m[D];j.specification.overridable&&this.overridableProperties.push(D);var lt=this.defaultPropertyValues[D]=new Pi(j,void 0),dt=this.defaultTransitionablePropertyValues[D]=new Si(j);this.defaultTransitioningPropertyValues[D]=dt.untransitioned(),this.defaultPossiblyEvaluatedValues[D]=lt.possiblyEvaluate({})}};st("DataDrivenProperty",pi),st("DataConstantProperty",oi),st("CrossFadedDataDrivenProperty",oa),st("CrossFadedProperty",Aa),st("ColorRampProperty",so);var Ya="-transition",pa=function(m){function D(j,lt){if(m.call(this),this.id=j.id,this.type=j.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},j.type!=="custom"&&(j=j,this.metadata=j.metadata,this.minzoom=j.minzoom,this.maxzoom=j.maxzoom,j.type!=="background"&&(this.source=j.source,this.sourceLayer=j["source-layer"],this.filter=j.filter),lt.layout&&(this._unevaluatedLayout=new Ta(lt.layout)),lt.paint)){this._transitionablePaint=new zi(lt.paint);for(var dt in j.paint)this.setPaintProperty(dt,j.paint[dt],{validate:!1});for(var _t in j.layout)this.setLayoutProperty(_t,j.layout[_t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ki(lt.paint)}}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},D.prototype.getLayoutProperty=function(j){return j==="visibility"?this.visibility:this._unevaluatedLayout.getValue(j)},D.prototype.setLayoutProperty=function(j,lt,dt){if(dt===void 0&&(dt={}),lt!=null){var _t="layers."+this.id+".layout."+j;if(this._validate(ri,_t,j,lt,dt))return}if(j==="visibility"){this.visibility=lt;return}this._unevaluatedLayout.setValue(j,lt)},D.prototype.getPaintProperty=function(j){return l(j,Ya)?this._transitionablePaint.getTransition(j.slice(0,-Ya.length)):this._transitionablePaint.getValue(j)},D.prototype.setPaintProperty=function(j,lt,dt){if(dt===void 0&&(dt={}),lt!=null){var _t="layers."+this.id+".paint."+j;if(this._validate(An,_t,j,lt,dt))return!1}if(l(j,Ya))return this._transitionablePaint.setTransition(j.slice(0,-Ya.length),lt||void 0),!1;var Lt=this._transitionablePaint._values[j],Kt=Lt.property.specification["property-type"]==="cross-faded-data-driven",oe=Lt.value.isDataDriven(),me=Lt.value;this._transitionablePaint.setValue(j,lt),this._handleSpecialPaintPropertyUpdate(j);var Ee=this._transitionablePaint._values[j].value,Ne=Ee.isDataDriven();return Ne||oe||Kt||this._handleOverridablePaintPropertyUpdate(j,me,Ee)},D.prototype._handleSpecialPaintPropertyUpdate=function(j){},D.prototype._handleOverridablePaintPropertyUpdate=function(j,lt,dt){return!1},D.prototype.isHidden=function(j){return this.minzoom&&j<this.minzoom||this.maxzoom&&j>=this.maxzoom?!0:this.visibility==="none"},D.prototype.updateTransitions=function(j){this._transitioningPaint=this._transitionablePaint.transitioned(j,this._transitioningPaint)},D.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},D.prototype.recalculate=function(j,lt){j.getCrossfadeParameters&&(this._crossfadeParameters=j.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(j,void 0,lt)),this.paint=this._transitioningPaint.possiblyEvaluate(j,void 0,lt)},D.prototype.serialize=function(){var j={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(j.layout=j.layout||{},j.layout.visibility=this.visibility),L(j,function(lt,dt){return lt!==void 0&&!(dt==="layout"&&!Object.keys(lt).length)&&!(dt==="paint"&&!Object.keys(lt).length)})},D.prototype._validate=function(j,lt,dt,_t,Lt){return Lt===void 0&&(Lt={}),Lt&&Lt.validate===!1?!1:vi(this,j.call(hn,{key:lt,layerType:this.type,objectKey:dt,value:_t,styleSpec:Ue,style:{glyphs:!0,sprite:!0}}))},D.prototype.is3D=function(){return!1},D.prototype.isTileClipped=function(){return!1},D.prototype.hasOffscreenPass=function(){return!1},D.prototype.resize=function(){},D.prototype.isStateDependent=function(){for(var j in this.paint._values){var lt=this.paint.get(j);if(!(!(lt instanceof aa)||!Qo(lt.property.specification))&&(lt.value.kind==="source"||lt.value.kind==="composite")&&lt.value.isStateDependent)return!0}return!1},D}($e),po={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ta=function(m,D){this._structArray=m,this._pos1=D*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},No=128,vo=5,Bi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Bi.serialize=function(m,D){return m._trim(),D&&(m.isTransferred=!0,D.push(m.arrayBuffer)),{length:m.length,arrayBuffer:m.arrayBuffer}},Bi.deserialize=function(m){var D=Object.create(this.prototype);return D.arrayBuffer=m.arrayBuffer,D.length=m.length,D.capacity=m.arrayBuffer.byteLength/D.bytesPerElement,D._refreshViews(),D},Bi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Bi.prototype.clear=function(){this.length=0},Bi.prototype.resize=function(m){this.reserve(m),this.length=m},Bi.prototype.reserve=function(m){if(m>this.capacity){this.capacity=Math.max(m,Math.floor(this.capacity*vo),No),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var D=this.uint8;this._refreshViews(),D&&this.uint8.set(D)}},Bi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function sa(m,D){D===void 0&&(D=1);var j=0,lt=0,dt=m.map(function(Lt){var Kt=Ru(Lt.type),oe=j=du(j,Math.max(D,Kt)),me=Lt.components||1;return lt=Math.max(lt,Kt),j+=Kt*me,{name:Lt.name,type:Lt.type,components:me,offset:oe}}),_t=du(j,Math.max(lt,D));return{members:dt,size:_t,alignment:D}}function Ru(m){return po[m].BYTES_PER_ELEMENT}function du(m,D){return Math.ceil(m/D)*D}var mc=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(j,lt){var dt=this.length;return this.resize(dt+1),this.emplace(dt,j,lt)},D.prototype.emplace=function(j,lt,dt){var _t=j*2;return this.int16[_t+0]=lt,this.int16[_t+1]=dt,j},D}(Bi);mc.prototype.bytesPerElement=4,st("StructArrayLayout2i4",mc);var zl=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(j,lt,dt,_t){var Lt=this.length;return this.resize(Lt+1),this.emplace(Lt,j,lt,dt,_t)},D.prototype.emplace=function(j,lt,dt,_t,Lt){var Kt=j*4;return this.int16[Kt+0]=lt,this.int16[Kt+1]=dt,this.int16[Kt+2]=_t,this.int16[Kt+3]=Lt,j},D}(Bi);zl.prototype.bytesPerElement=8,st("StructArrayLayout4i8",zl);var Bu=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(j,lt,dt,_t,Lt,Kt){var oe=this.length;return this.resize(oe+1),this.emplace(oe,j,lt,dt,_t,Lt,Kt)},D.prototype.emplace=function(j,lt,dt,_t,Lt,Kt,oe){var me=j*6;return this.int16[me+0]=lt,this.int16[me+1]=dt,this.int16[me+2]=_t,this.int16[me+3]=Lt,this.int16[me+4]=Kt,this.int16[me+5]=oe,j},D}(Bi);Bu.prototype.bytesPerElement=12,st("StructArrayLayout2i4i12",Bu);var Pc=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(j,lt,dt,_t,Lt,Kt){var oe=this.length;return this.resize(oe+1),this.emplace(oe,j,lt,dt,_t,Lt,Kt)},D.prototype.emplace=function(j,lt,dt,_t,Lt,Kt,oe){var me=j*4,Ee=j*8;return this.int16[me+0]=lt,this.int16[me+1]=dt,this.uint8[Ee+4]=_t,this.uint8[Ee+5]=Lt,this.uint8[Ee+6]=Kt,this.uint8[Ee+7]=oe,j},D}(Bi);Pc.prototype.bytesPerElement=8,st("StructArrayLayout2i4ub8",Pc);var So=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(j,lt,dt,_t,Lt,Kt,oe,me,Ee,Ne){var He=this.length;return this.resize(He+1),this.emplace(He,j,lt,dt,_t,Lt,Kt,oe,me,Ee,Ne)},D.prototype.emplace=function(j,lt,dt,_t,Lt,Kt,oe,me,Ee,Ne,He){var er=j*9,yr=j*18;return this.uint16[er+0]=lt,this.uint16[er+1]=dt,this.uint16[er+2]=_t,this.uint16[er+3]=Lt,this.uint16[er+4]=Kt,this.uint16[er+5]=oe,this.uint16[er+6]=me,this.uint16[er+7]=Ee,this.uint8[yr+16]=Ne,this.uint8[yr+17]=He,j},D}(Bi);So.prototype.bytesPerElement=18,st("StructArrayLayout8ui2ub18",So);var Dl=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(j,lt,dt,_t,Lt,Kt,oe,me,Ee,Ne,He,er){var yr=this.length;return this.resize(yr+1),this.emplace(yr,j,lt,dt,_t,Lt,Kt,oe,me,Ee,Ne,He,er)},D.prototype.emplace=function(j,lt,dt,_t,Lt,Kt,oe,me,Ee,Ne,He,er,yr){var zr=j*12;return this.int16[zr+0]=lt,this.int16[zr+1]=dt,this.int16[zr+2]=_t,this.int16[zr+3]=Lt,this.uint16[zr+4]=Kt,this.uint16[zr+5]=oe,this.uint16[zr+6]=me,this.uint16[zr+7]=Ee,this.int16[zr+8]=Ne,this.int16[zr+9]=He,this.int16[zr+10]=er,this.int16[zr+11]=yr,j},D}(Bi);Dl.prototype.bytesPerElement=24,st("StructArrayLayout4i4ui4i24",Dl);var tf=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(j,lt,dt){var _t=this.length;return this.resize(_t+1),this.emplace(_t,j,lt,dt)},D.prototype.emplace=function(j,lt,dt,_t){var Lt=j*3;return this.float32[Lt+0]=lt,this.float32[Lt+1]=dt,this.float32[Lt+2]=_t,j},D}(Bi);tf.prototype.bytesPerElement=12,st("StructArrayLayout3f12",tf);var ef=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(j){var lt=this.length;return this.resize(lt+1),this.emplace(lt,j)},D.prototype.emplace=function(j,lt){var dt=j*1;return this.uint32[dt+0]=lt,j},D}(Bi);ef.prototype.bytesPerElement=4,st("StructArrayLayout1ul4",ef);var yc=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(j,lt,dt,_t,Lt,Kt,oe,me,Ee){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,j,lt,dt,_t,Lt,Kt,oe,me,Ee)},D.prototype.emplace=function(j,lt,dt,_t,Lt,Kt,oe,me,Ee,Ne){var He=j*10,er=j*5;return this.int16[He+0]=lt,this.int16[He+1]=dt,this.int16[He+2]=_t,this.int16[He+3]=Lt,this.int16[He+4]=Kt,this.int16[He+5]=oe,this.uint32[er+3]=me,this.uint16[He+8]=Ee,this.uint16[He+9]=Ne,j},D}(Bi);yc.prototype.bytesPerElement=20,st("StructArrayLayout6i1ul2ui20",yc);var Ec=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(j,lt,dt,_t,Lt,Kt){var oe=this.length;return this.resize(oe+1),this.emplace(oe,j,lt,dt,_t,Lt,Kt)},D.prototype.emplace=function(j,lt,dt,_t,Lt,Kt,oe){var me=j*6;return this.int16[me+0]=lt,this.int16[me+1]=dt,this.int16[me+2]=_t,this.int16[me+3]=Lt,this.int16[me+4]=Kt,this.int16[me+5]=oe,j},D}(Bi);Ec.prototype.bytesPerElement=12,st("StructArrayLayout2i2i2i12",Ec);var ul=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(j,lt,dt,_t,Lt){var Kt=this.length;return this.resize(Kt+1),this.emplace(Kt,j,lt,dt,_t,Lt)},D.prototype.emplace=function(j,lt,dt,_t,Lt,Kt){var oe=j*4,me=j*8;return this.float32[oe+0]=lt,this.float32[oe+1]=dt,this.float32[oe+2]=_t,this.int16[me+6]=Lt,this.int16[me+7]=Kt,j},D}(Bi);ul.prototype.bytesPerElement=16,st("StructArrayLayout2f1f2i16",ul);var jo=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(j,lt,dt,_t){var Lt=this.length;return this.resize(Lt+1),this.emplace(Lt,j,lt,dt,_t)},D.prototype.emplace=function(j,lt,dt,_t,Lt){var Kt=j*12,oe=j*3;return this.uint8[Kt+0]=lt,this.uint8[Kt+1]=dt,this.float32[oe+1]=_t,this.float32[oe+2]=Lt,j},D}(Bi);jo.prototype.bytesPerElement=12,st("StructArrayLayout2ub2f12",jo);var cl=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(j,lt,dt){var _t=this.length;return this.resize(_t+1),this.emplace(_t,j,lt,dt)},D.prototype.emplace=function(j,lt,dt,_t){var Lt=j*3;return this.uint16[Lt+0]=lt,this.uint16[Lt+1]=dt,this.uint16[Lt+2]=_t,j},D}(Bi);cl.prototype.bytesPerElement=6,st("StructArrayLayout3ui6",cl);var xc=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(j,lt,dt,_t,Lt,Kt,oe,me,Ee,Ne,He,er,yr,zr,un,Kr,vn){var bn=this.length;return this.resize(bn+1),this.emplace(bn,j,lt,dt,_t,Lt,Kt,oe,me,Ee,Ne,He,er,yr,zr,un,Kr,vn)},D.prototype.emplace=function(j,lt,dt,_t,Lt,Kt,oe,me,Ee,Ne,He,er,yr,zr,un,Kr,vn,bn){var pn=j*24,Ln=j*12,Bn=j*48;return this.int16[pn+0]=lt,this.int16[pn+1]=dt,this.uint16[pn+2]=_t,this.uint16[pn+3]=Lt,this.uint32[Ln+2]=Kt,this.uint32[Ln+3]=oe,this.uint32[Ln+4]=me,this.uint16[pn+10]=Ee,this.uint16[pn+11]=Ne,this.uint16[pn+12]=He,this.float32[Ln+7]=er,this.float32[Ln+8]=yr,this.uint8[Bn+36]=zr,this.uint8[Bn+37]=un,this.uint8[Bn+38]=Kr,this.uint32[Ln+10]=vn,this.int16[pn+22]=bn,j},D}(Bi);xc.prototype.bytesPerElement=48,st("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",xc);var Cc=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(j,lt,dt,_t,Lt,Kt,oe,me,Ee,Ne,He,er,yr,zr,un,Kr,vn,bn,pn,Ln,Bn,Wn,Qn,ui,ci,mi,_i,ki){var yi=this.length;return this.resize(yi+1),this.emplace(yi,j,lt,dt,_t,Lt,Kt,oe,me,Ee,Ne,He,er,yr,zr,un,Kr,vn,bn,pn,Ln,Bn,Wn,Qn,ui,ci,mi,_i,ki)},D.prototype.emplace=function(j,lt,dt,_t,Lt,Kt,oe,me,Ee,Ne,He,er,yr,zr,un,Kr,vn,bn,pn,Ln,Bn,Wn,Qn,ui,ci,mi,_i,ki,yi){var xi=j*34,ji=j*17;return this.int16[xi+0]=lt,this.int16[xi+1]=dt,this.int16[xi+2]=_t,this.int16[xi+3]=Lt,this.int16[xi+4]=Kt,this.int16[xi+5]=oe,this.int16[xi+6]=me,this.int16[xi+7]=Ee,this.uint16[xi+8]=Ne,this.uint16[xi+9]=He,this.uint16[xi+10]=er,this.uint16[xi+11]=yr,this.uint16[xi+12]=zr,this.uint16[xi+13]=un,this.uint16[xi+14]=Kr,this.uint16[xi+15]=vn,this.uint16[xi+16]=bn,this.uint16[xi+17]=pn,this.uint16[xi+18]=Ln,this.uint16[xi+19]=Bn,this.uint16[xi+20]=Wn,this.uint16[xi+21]=Qn,this.uint16[xi+22]=ui,this.uint32[ji+12]=ci,this.float32[ji+13]=mi,this.float32[ji+14]=_i,this.float32[ji+15]=ki,this.float32[ji+16]=yi,j},D}(Bi);Cc.prototype.bytesPerElement=68,st("StructArrayLayout8i15ui1ul4f68",Cc);var Nu=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(j){var lt=this.length;return this.resize(lt+1),this.emplace(lt,j)},D.prototype.emplace=function(j,lt){var dt=j*1;return this.float32[dt+0]=lt,j},D}(Bi);Nu.prototype.bytesPerElement=4,st("StructArrayLayout1f4",Nu);var rf=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(j,lt,dt){var _t=this.length;return this.resize(_t+1),this.emplace(_t,j,lt,dt)},D.prototype.emplace=function(j,lt,dt,_t){var Lt=j*3;return this.int16[Lt+0]=lt,this.int16[Lt+1]=dt,this.int16[Lt+2]=_t,j},D}(Bi);rf.prototype.bytesPerElement=6,st("StructArrayLayout3i6",rf);var Fl=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(j,lt,dt){var _t=this.length;return this.resize(_t+1),this.emplace(_t,j,lt,dt)},D.prototype.emplace=function(j,lt,dt,_t){var Lt=j*2,Kt=j*4;return this.uint32[Lt+0]=lt,this.uint16[Kt+2]=dt,this.uint16[Kt+3]=_t,j},D}(Bi);Fl.prototype.bytesPerElement=8,st("StructArrayLayout1ul2ui8",Fl);var bc=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(j,lt){var dt=this.length;return this.resize(dt+1),this.emplace(dt,j,lt)},D.prototype.emplace=function(j,lt,dt){var _t=j*2;return this.uint16[_t+0]=lt,this.uint16[_t+1]=dt,j},D}(Bi);bc.prototype.bytesPerElement=4,st("StructArrayLayout2ui4",bc);var ju=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(j){var lt=this.length;return this.resize(lt+1),this.emplace(lt,j)},D.prototype.emplace=function(j,lt){var dt=j*1;return this.uint16[dt+0]=lt,j},D}(Bi);ju.prototype.bytesPerElement=2,st("StructArrayLayout1ui2",ju);var Rl=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(j,lt){var dt=this.length;return this.resize(dt+1),this.emplace(dt,j,lt)},D.prototype.emplace=function(j,lt,dt){var _t=j*2;return this.float32[_t+0]=lt,this.float32[_t+1]=dt,j},D}(Bi);Rl.prototype.bytesPerElement=8,st("StructArrayLayout2f8",Rl);var nf=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(j,lt,dt,_t){var Lt=this.length;return this.resize(Lt+1),this.emplace(Lt,j,lt,dt,_t)},D.prototype.emplace=function(j,lt,dt,_t,Lt){var Kt=j*4;return this.float32[Kt+0]=lt,this.float32[Kt+1]=dt,this.float32[Kt+2]=_t,this.float32[Kt+3]=Lt,j},D}(Bi);nf.prototype.bytesPerElement=16,st("StructArrayLayout4f16",nf);var Af=function(m){function D(){m.apply(this,arguments)}m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D;var j={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return j.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},j.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},j.x1.get=function(){return this._structArray.int16[this._pos2+2]},j.y1.get=function(){return this._structArray.int16[this._pos2+3]},j.x2.get=function(){return this._structArray.int16[this._pos2+4]},j.y2.get=function(){return this._structArray.int16[this._pos2+5]},j.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},j.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},j.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},j.anchorPoint.get=function(){return new e(this.anchorPointX,this.anchorPointY)},Object.defineProperties(D.prototype,j),D}(ta);Af.prototype.size=20;var Bl=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.get=function(j){return new Af(this,j)},D}(yc);st("CollisionBoxArray",Bl);var af=function(m){function D(){m.apply(this,arguments)}m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D;var j={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return j.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},j.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},j.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},j.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},j.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},j.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},j.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},j.segment.get=function(){return this._structArray.uint16[this._pos2+10]},j.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},j.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},j.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},j.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},j.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},j.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},j.placedOrientation.set=function(lt){this._structArray.uint8[this._pos1+37]=lt},j.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},j.hidden.set=function(lt){this._structArray.uint8[this._pos1+38]=lt},j.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},j.crossTileID.set=function(lt){this._structArray.uint32[this._pos4+10]=lt},j.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(D.prototype,j),D}(ta);af.prototype.size=48;var Uu=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.get=function(j){return new af(this,j)},D}(xc);st("PlacedSymbolArray",Uu);var Tf=function(m){function D(){m.apply(this,arguments)}m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D;var j={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return j.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},j.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},j.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},j.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},j.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},j.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},j.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},j.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},j.key.get=function(){return this._structArray.uint16[this._pos2+8]},j.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},j.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},j.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},j.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},j.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},j.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},j.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},j.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},j.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},j.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},j.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},j.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},j.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},j.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},j.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},j.crossTileID.set=function(lt){this._structArray.uint32[this._pos4+12]=lt},j.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},j.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},j.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},j.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(D.prototype,j),D}(ta);Tf.prototype.size=68;var kf=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.get=function(j){return new Tf(this,j)},D}(Cc);st("SymbolInstanceArray",kf);var Ls=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.getoffsetX=function(j){return this.float32[j*1+0]},D}(Nu);st("GlyphOffsetArray",Ls);var Mf=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.getx=function(j){return this.int16[j*3+0]},D.prototype.gety=function(j){return this.int16[j*3+1]},D.prototype.gettileUnitDistanceFromAnchor=function(j){return this.int16[j*3+2]},D}(rf);st("SymbolLineVertexArray",Mf);var Sf=function(m){function D(){m.apply(this,arguments)}m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D;var j={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return j.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},j.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},j.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(D.prototype,j),D}(ta);Sf.prototype.size=8;var of=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.get=function(j){return new Sf(this,j)},D}(Fl);st("FeatureIndexArray",of);var Lf=sa([{name:"a_pos",components:2,type:"Int16"}],4),H=Lf.members,tt=function(m){m===void 0&&(m=[]),this.segments=m};tt.prototype.prepareSegment=function(m,D,j,lt){var dt=this.segments[this.segments.length-1];return m>tt.MAX_VERTEX_ARRAY_LENGTH&&B("Max vertices per segment is "+tt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+m),(!dt||dt.vertexLength+m>tt.MAX_VERTEX_ARRAY_LENGTH||dt.sortKey!==lt)&&(dt={vertexOffset:D.length,primitiveOffset:j.length,vertexLength:0,primitiveLength:0},lt!==void 0&&(dt.sortKey=lt),this.segments.push(dt)),dt},tt.prototype.get=function(){return this.segments},tt.prototype.destroy=function(){for(var m=0,D=this.segments;m<D.length;m+=1){var j=D[m];for(var lt in j.vaos)j.vaos[lt].destroy()}},tt.simpleSegment=function(m,D,j,lt){return new tt([{vertexOffset:m,primitiveOffset:D,vertexLength:j,primitiveLength:lt,vaos:{},sortKey:0}])},tt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,st("SegmentVector",tt);function J(m,D){return m=h(Math.floor(m),0,255),D=h(Math.floor(D),0,255),256*m+D}var ct=sa([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),At=S(function(m){function D(j,lt){var dt,_t,Lt,Kt,oe,me,Ee,Ne;for(dt=j.length&3,_t=j.length-dt,Lt=lt,oe=3432918353,me=461845907,Ne=0;Ne<_t;)Ee=j.charCodeAt(Ne)&255|(j.charCodeAt(++Ne)&255)<<8|(j.charCodeAt(++Ne)&255)<<16|(j.charCodeAt(++Ne)&255)<<24,++Ne,Ee=(Ee&65535)*oe+(((Ee>>>16)*oe&65535)<<16)&4294967295,Ee=Ee<<15|Ee>>>17,Ee=(Ee&65535)*me+(((Ee>>>16)*me&65535)<<16)&4294967295,Lt^=Ee,Lt=Lt<<13|Lt>>>19,Kt=(Lt&65535)*5+(((Lt>>>16)*5&65535)<<16)&4294967295,Lt=(Kt&65535)+27492+(((Kt>>>16)+58964&65535)<<16);switch(Ee=0,dt){case 3:Ee^=(j.charCodeAt(Ne+2)&255)<<16;case 2:Ee^=(j.charCodeAt(Ne+1)&255)<<8;case 1:Ee^=j.charCodeAt(Ne)&255,Ee=(Ee&65535)*oe+(((Ee>>>16)*oe&65535)<<16)&4294967295,Ee=Ee<<15|Ee>>>17,Ee=(Ee&65535)*me+(((Ee>>>16)*me&65535)<<16)&4294967295,Lt^=Ee}return Lt^=j.length,Lt^=Lt>>>16,Lt=(Lt&65535)*2246822507+(((Lt>>>16)*2246822507&65535)<<16)&4294967295,Lt^=Lt>>>13,Lt=(Lt&65535)*3266489909+(((Lt>>>16)*3266489909&65535)<<16)&4294967295,Lt^=Lt>>>16,Lt>>>0}m.exports=D}),Nt=S(function(m){function D(j,lt){for(var dt=j.length,_t=lt^dt,Lt=0,Kt;dt>=4;)Kt=j.charCodeAt(Lt)&255|(j.charCodeAt(++Lt)&255)<<8|(j.charCodeAt(++Lt)&255)<<16|(j.charCodeAt(++Lt)&255)<<24,Kt=(Kt&65535)*1540483477+(((Kt>>>16)*1540483477&65535)<<16),Kt^=Kt>>>24,Kt=(Kt&65535)*1540483477+(((Kt>>>16)*1540483477&65535)<<16),_t=(_t&65535)*1540483477+(((_t>>>16)*1540483477&65535)<<16)^Kt,dt-=4,++Lt;switch(dt){case 3:_t^=(j.charCodeAt(Lt+2)&255)<<16;case 2:_t^=(j.charCodeAt(Lt+1)&255)<<8;case 1:_t^=j.charCodeAt(Lt)&255,_t=(_t&65535)*1540483477+(((_t>>>16)*1540483477&65535)<<16)}return _t^=_t>>>13,_t=(_t&65535)*1540483477+(((_t>>>16)*1540483477&65535)<<16),_t^=_t>>>15,_t>>>0}m.exports=D}),Qt=At,se=At,be=Nt;Qt.murmur3=se,Qt.murmur2=be;var Ze=function(){this.ids=[],this.positions=[],this.indexed=!1};Ze.prototype.add=function(m,D,j,lt){this.ids.push(nr(m)),this.positions.push(D,j,lt)},Ze.prototype.getPositions=function(m){for(var D=nr(m),j=0,lt=this.ids.length-1;j<lt;){var dt=j+lt>>1;this.ids[dt]>=D?lt=dt:j=dt+1}for(var _t=[];this.ids[j]===D;){var Lt=this.positions[3*j],Kt=this.positions[3*j+1],oe=this.positions[3*j+2];_t.push({index:Lt,start:Kt,end:oe}),j++}return _t},Ze.serialize=function(m,D){var j=new Float64Array(m.ids),lt=new Uint32Array(m.positions);return kr(j,lt,0,j.length-1),D&&D.push(j.buffer,lt.buffer),{ids:j,positions:lt}},Ze.deserialize=function(m){var D=new Ze;return D.ids=m.ids,D.positions=m.positions,D.indexed=!0,D};var or=Math.pow(2,53)-1;function nr(m){var D=+m;return!isNaN(D)&&D<=or?D:Qt(String(m))}function kr(m,D,j,lt){for(;j<lt;){for(var dt=m[j+lt>>1],_t=j-1,Lt=lt+1;;){do _t++;while(m[_t]<dt);do Lt--;while(m[Lt]>dt);if(_t>=Lt)break;Er(m,_t,Lt),Er(D,3*_t,3*Lt),Er(D,3*_t+1,3*Lt+1),Er(D,3*_t+2,3*Lt+2)}Lt-j<lt-Lt?(kr(m,D,j,Lt),j=Lt+1):(kr(m,D,Lt+1,lt),lt=Lt)}}function Er(m,D,j){var lt=m[D];m[D]=m[j],m[j]=lt}st("FeaturePositionMap",Ze);var qr=function(m,D){this.gl=m.gl,this.location=D},Fr=function(m){function D(j,lt){m.call(this,j,lt),this.current=0}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.set=function(j){this.current!==j&&(this.current=j,this.gl.uniform1i(this.location,j))},D}(qr),Rr=function(m){function D(j,lt){m.call(this,j,lt),this.current=0}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.set=function(j){this.current!==j&&(this.current=j,this.gl.uniform1f(this.location,j))},D}(qr),Xr=function(m){function D(j,lt){m.call(this,j,lt),this.current=[0,0]}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.set=function(j){(j[0]!==this.current[0]||j[1]!==this.current[1])&&(this.current=j,this.gl.uniform2f(this.location,j[0],j[1]))},D}(qr),on=function(m){function D(j,lt){m.call(this,j,lt),this.current=[0,0,0]}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.set=function(j){(j[0]!==this.current[0]||j[1]!==this.current[1]||j[2]!==this.current[2])&&(this.current=j,this.gl.uniform3f(this.location,j[0],j[1],j[2]))},D}(qr),Cn=function(m){function D(j,lt){m.call(this,j,lt),this.current=[0,0,0,0]}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.set=function(j){(j[0]!==this.current[0]||j[1]!==this.current[1]||j[2]!==this.current[2]||j[3]!==this.current[3])&&(this.current=j,this.gl.uniform4f(this.location,j[0],j[1],j[2],j[3]))},D}(qr),En=function(m){function D(j,lt){m.call(this,j,lt),this.current=Hi.transparent}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.set=function(j){(j.r!==this.current.r||j.g!==this.current.g||j.b!==this.current.b||j.a!==this.current.a)&&(this.current=j,this.gl.uniform4f(this.location,j.r,j.g,j.b,j.a))},D}(qr),Fn=new Float32Array(16),Nn=function(m){function D(j,lt){m.call(this,j,lt),this.current=Fn}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.set=function(j){if(j[12]!==this.current[12]||j[0]!==this.current[0]){this.current=j,this.gl.uniformMatrix4fv(this.location,!1,j);return}for(var lt=1;lt<16;lt++)if(j[lt]!==this.current[lt]){this.current=j,this.gl.uniformMatrix4fv(this.location,!1,j);break}},D}(qr);function jn(m){return[J(255*m.r,255*m.g),J(255*m.b,255*m.a)]}var ai=function(m,D,j){this.value=m,this.uniformNames=D.map(function(lt){return"u_"+lt}),this.type=j};ai.prototype.setUniform=function(m,D,j){m.set(j.constantOr(this.value))},ai.prototype.getBinding=function(m,D,j){return this.type==="color"?new En(m,D):new Rr(m,D)};var ni=function(m,D){this.uniformNames=D.map(function(j){return"u_"+j}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};ni.prototype.setConstantPatternPositions=function(m,D){this.pixelRatioFrom=D.pixelRatio,this.pixelRatioTo=m.pixelRatio,this.patternFrom=D.tlbr,this.patternTo=m.tlbr},ni.prototype.setUniform=function(m,D,j,lt){var dt=lt==="u_pattern_to"?this.patternTo:lt==="u_pattern_from"?this.patternFrom:lt==="u_pixel_ratio_to"?this.pixelRatioTo:lt==="u_pixel_ratio_from"?this.pixelRatioFrom:null;dt&&m.set(dt)},ni.prototype.getBinding=function(m,D,j){return j.substr(0,9)==="u_pattern"?new Cn(m,D):new Rr(m,D)};var hi=function(m,D,j,lt){this.expression=m,this.type=j,this.maxValue=0,this.paintVertexAttributes=D.map(function(dt){return{name:"a_"+dt,type:"Float32",components:j==="color"?2:1,offset:0}}),this.paintVertexArray=new lt};hi.prototype.populatePaintArray=function(m,D,j,lt,dt){var _t=this.paintVertexArray.length,Lt=this.expression.evaluate(new In(0),D,{},lt,[],dt);this.paintVertexArray.resize(m),this._setPaintValue(_t,m,Lt)},hi.prototype.updatePaintArray=function(m,D,j,lt){var dt=this.expression.evaluate({zoom:0},j,lt);this._setPaintValue(m,D,dt)},hi.prototype._setPaintValue=function(m,D,j){if(this.type==="color")for(var lt=jn(j),dt=m;dt<D;dt++)this.paintVertexArray.emplace(dt,lt[0],lt[1]);else{for(var _t=m;_t<D;_t++)this.paintVertexArray.emplace(_t,j);this.maxValue=Math.max(this.maxValue,Math.abs(j))}},hi.prototype.upload=function(m){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=m.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},hi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var ti=function(m,D,j,lt,dt,_t){this.expression=m,this.uniformNames=D.map(function(Lt){return"u_"+Lt+"_t"}),this.type=j,this.useIntegerZoom=lt,this.zoom=dt,this.maxValue=0,this.paintVertexAttributes=D.map(function(Lt){return{name:"a_"+Lt,type:"Float32",components:j==="color"?4:2,offset:0}}),this.paintVertexArray=new _t};ti.prototype.populatePaintArray=function(m,D,j,lt,dt){var _t=this.expression.evaluate(new In(this.zoom),D,{},lt,[],dt),Lt=this.expression.evaluate(new In(this.zoom+1),D,{},lt,[],dt),Kt=this.paintVertexArray.length;this.paintVertexArray.resize(m),this._setPaintValue(Kt,m,_t,Lt)},ti.prototype.updatePaintArray=function(m,D,j,lt){var dt=this.expression.evaluate({zoom:this.zoom},j,lt),_t=this.expression.evaluate({zoom:this.zoom+1},j,lt);this._setPaintValue(m,D,dt,_t)},ti.prototype._setPaintValue=function(m,D,j,lt){if(this.type==="color")for(var dt=jn(j),_t=jn(lt),Lt=m;Lt<D;Lt++)this.paintVertexArray.emplace(Lt,dt[0],dt[1],_t[0],_t[1]);else{for(var Kt=m;Kt<D;Kt++)this.paintVertexArray.emplace(Kt,j,lt);this.maxValue=Math.max(this.maxValue,Math.abs(j),Math.abs(lt))}},ti.prototype.upload=function(m){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=m.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ti.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ti.prototype.setUniform=function(m,D){var j=this.useIntegerZoom?Math.floor(D.zoom):D.zoom,lt=h(this.expression.interpolationFactor(j,this.zoom,this.zoom+1),0,1);m.set(lt)},ti.prototype.getBinding=function(m,D,j){return new Rr(m,D)};var fi=function(m,D,j,lt,dt,_t){this.expression=m,this.type=D,this.useIntegerZoom=j,this.zoom=lt,this.layerId=_t,this.zoomInPaintVertexArray=new dt,this.zoomOutPaintVertexArray=new dt};fi.prototype.populatePaintArray=function(m,D,j){var lt=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(m),this.zoomOutPaintVertexArray.resize(m),this._setPaintValues(lt,m,D.patterns&&D.patterns[this.layerId],j)},fi.prototype.updatePaintArray=function(m,D,j,lt,dt){this._setPaintValues(m,D,j.patterns&&j.patterns[this.layerId],dt)},fi.prototype._setPaintValues=function(m,D,j,lt){if(!(!lt||!j)){var dt=j.min,_t=j.mid,Lt=j.max,Kt=lt[dt],oe=lt[_t],me=lt[Lt];if(!(!Kt||!oe||!me))for(var Ee=m;Ee<D;Ee++)this.zoomInPaintVertexArray.emplace(Ee,oe.tl[0],oe.tl[1],oe.br[0],oe.br[1],Kt.tl[0],Kt.tl[1],Kt.br[0],Kt.br[1],oe.pixelRatio,Kt.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ee,oe.tl[0],oe.tl[1],oe.br[0],oe.br[1],me.tl[0],me.tl[1],me.br[0],me.br[1],oe.pixelRatio,me.pixelRatio)}},fi.prototype.upload=function(m){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=m.createVertexBuffer(this.zoomInPaintVertexArray,ct.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=m.createVertexBuffer(this.zoomOutPaintVertexArray,ct.members,this.expression.isStateDependent))},fi.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ci=function(m,D,j,lt){this.binders={},this.layoutAttributes=lt,this._buffers=[];var dt=[];for(var _t in m.paint._values)if(j(_t)){var Lt=m.paint.get(_t);if(!(!(Lt instanceof aa)||!Qo(Lt.property.specification))){var Kt=Mi(_t,m.type),oe=Lt.value,me=Lt.property.specification.type,Ee=Lt.property.useIntegerZoom,Ne=Lt.property.specification["property-type"],He=Ne==="cross-faded"||Ne==="cross-faded-data-driven";if(oe.kind==="constant")this.binders[_t]=He?new ni(oe.value,Kt):new ai(oe.value,Kt,me),dt.push("/u_"+_t);else if(oe.kind==="source"||He){var er=Oi(_t,me,"source");this.binders[_t]=He?new fi(oe,me,Ee,D,er,m.id):new hi(oe,Kt,me,er),dt.push("/a_"+_t)}else{var yr=Oi(_t,me,"composite");this.binders[_t]=new ti(oe,Kt,me,Ee,D,yr),dt.push("/z_"+_t)}}}this.cacheKey=dt.sort().join("")};Ci.prototype.getMaxValue=function(m){var D=this.binders[m];return D instanceof hi||D instanceof ti?D.maxValue:0},Ci.prototype.populatePaintArrays=function(m,D,j,lt,dt){for(var _t in this.binders){var Lt=this.binders[_t];(Lt instanceof hi||Lt instanceof ti||Lt instanceof fi)&&Lt.populatePaintArray(m,D,j,lt,dt)}},Ci.prototype.setConstantPatternPositions=function(m,D){for(var j in this.binders){var lt=this.binders[j];lt instanceof ni&&lt.setConstantPatternPositions(m,D)}},Ci.prototype.updatePaintArrays=function(m,D,j,lt,dt){var _t=!1;for(var Lt in m)for(var Kt=D.getPositions(Lt),oe=0,me=Kt;oe<me.length;oe+=1){var Ee=me[oe],Ne=j.feature(Ee.index);for(var He in this.binders){var er=this.binders[He];if((er instanceof hi||er instanceof ti||er instanceof fi)&&er.expression.isStateDependent===!0){var yr=lt.paint.get(He);er.expression=yr.value,er.updatePaintArray(Ee.start,Ee.end,Ne,m[Lt],dt),_t=!0}}}return _t},Ci.prototype.defines=function(){var m=[];for(var D in this.binders){var j=this.binders[D];(j instanceof ai||j instanceof ni)&&m.push.apply(m,j.uniformNames.map(function(lt){return"#define HAS_UNIFORM_"+lt}))}return m},Ci.prototype.getPaintVertexBuffers=function(){return this._buffers},Ci.prototype.getUniforms=function(m,D){var j=[];for(var lt in this.binders){var dt=this.binders[lt];if(dt instanceof ai||dt instanceof ni||dt instanceof ti)for(var _t=0,Lt=dt.uniformNames;_t<Lt.length;_t+=1){var Kt=Lt[_t];if(D[Kt]){var oe=dt.getBinding(m,D[Kt],Kt);j.push({name:Kt,property:lt,binding:oe})}}}return j},Ci.prototype.setUniforms=function(m,D,j,lt){for(var dt=0,_t=D;dt<_t.length;dt+=1){var Lt=_t[dt],Kt=Lt.name,oe=Lt.property,me=Lt.binding;this.binders[oe].setUniform(me,lt,j.get(oe),Kt)}},Ci.prototype.updatePaintBuffers=function(m){this._buffers=[];for(var D in this.binders){var j=this.binders[D];if(m&&j instanceof fi){var lt=m.fromScale===2?j.zoomInPaintVertexBuffer:j.zoomOutPaintVertexBuffer;lt&&this._buffers.push(lt)}else(j instanceof hi||j instanceof ti)&&j.paintVertexBuffer&&this._buffers.push(j.paintVertexBuffer)}},Ci.prototype.upload=function(m){for(var D in this.binders){var j=this.binders[D];(j instanceof hi||j instanceof ti||j instanceof fi)&&j.upload(m)}this.updatePaintBuffers()},Ci.prototype.destroy=function(){for(var m in this.binders){var D=this.binders[m];(D instanceof hi||D instanceof ti||D instanceof fi)&&D.destroy()}};var Di=function(m,D,j,lt){lt===void 0&&(lt=function(){return!0}),this.programConfigurations={};for(var dt=0,_t=D;dt<_t.length;dt+=1){var Lt=_t[dt];this.programConfigurations[Lt.id]=new Ci(Lt,j,lt,m)}this.needsUpload=!1,this._featureMap=new Ze,this._bufferOffset=0};Di.prototype.populatePaintArrays=function(m,D,j,lt,dt,_t){for(var Lt in this.programConfigurations)this.programConfigurations[Lt].populatePaintArrays(m,D,lt,dt,_t);D.id!==void 0&&this._featureMap.add(D.id,j,this._bufferOffset,m),this._bufferOffset=m,this.needsUpload=!0},Di.prototype.updatePaintArrays=function(m,D,j,lt){for(var dt=0,_t=j;dt<_t.length;dt+=1){var Lt=_t[dt];this.needsUpload=this.programConfigurations[Lt.id].updatePaintArrays(m,this._featureMap,D,Lt,lt)||this.needsUpload}},Di.prototype.get=function(m){return this.programConfigurations[m]},Di.prototype.upload=function(m){if(this.needsUpload){for(var D in this.programConfigurations)this.programConfigurations[D].upload(m);this.needsUpload=!1}},Di.prototype.destroy=function(){for(var m in this.programConfigurations)this.programConfigurations[m].destroy()};function Mi(m,D){var j={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return j[m]||[m.replace(D+"-","").replace(/-/g,"_")]}function qi(m){var D={"line-pattern":{source:So,composite:So},"fill-pattern":{source:So,composite:So},"fill-extrusion-pattern":{source:So,composite:So}};return D[m]}function Oi(m,D,j){var lt={color:{source:Rl,composite:nf},number:{source:Nu,composite:Rl}},dt=qi(m);return dt&&dt[j]||lt[D][j]}st("ConstantBinder",ai),st("CrossFadedConstantBinder",ni),st("SourceExpressionBinder",hi),st("CrossFadedCompositeBinder",fi),st("CompositeExpressionBinder",ti),st("ProgramConfiguration",Ci,{omit:["_buffers"]}),st("ProgramConfigurationSet",Di);var Ii=8192;function Ji(m){return{min:-1*Math.pow(2,m-1),max:Math.pow(2,m-1)-1}}var ea=Ji(15);function Fi(m){for(var D=Ii/m.extent,j=m.loadGeometry(),lt=0;lt<j.length;lt++)for(var dt=j[lt],_t=0;_t<dt.length;_t++){var Lt=dt[_t];Lt.x=Math.round(Lt.x*D),Lt.y=Math.round(Lt.y*D),(Lt.x<ea.min||Lt.x>ea.max||Lt.y<ea.min||Lt.y>ea.max)&&(B("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Lt.x=h(Lt.x,ea.min,ea.max),Lt.y=h(Lt.y,ea.min,ea.max))}return j}function ca(m,D,j,lt,dt){m.emplaceBack(D*2+(lt+1)/2,j*2+(dt+1)/2)}var Ai=function(m){this.zoom=m.zoom,this.overscaling=m.overscaling,this.layers=m.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=m.index,this.hasPattern=!1,this.layoutVertexArray=new mc,this.indexArray=new cl,this.segments=new tt,this.programConfigurations=new Di(H,m.layers,m.zoom),this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};Ai.prototype.populate=function(m,D,j){var lt=this.layers[0],dt=[],_t=null;lt.type==="circle"&&(_t=lt.layout.get("circle-sort-key"));for(var Lt=0,Kt=m;Lt<Kt.length;Lt+=1){var oe=Kt[Lt],me=oe.feature,Ee=oe.id,Ne=oe.index,He=oe.sourceLayerIndex,er=this.layers[0]._featureFilter.needGeometry,yr={type:me.type,id:Ee,properties:me.properties,geometry:er?Fi(me):[]};if(this.layers[0]._featureFilter.filter(new In(this.zoom),yr,j)){er||(yr.geometry=Fi(me));var zr=_t?_t.evaluate(yr,{},j):void 0,un={id:Ee,properties:me.properties,type:me.type,sourceLayerIndex:He,index:Ne,geometry:yr.geometry,patterns:{},sortKey:zr};dt.push(un)}}_t&&dt.sort(function(ui,ci){return ui.sortKey-ci.sortKey});for(var Kr=0,vn=dt;Kr<vn.length;Kr+=1){var bn=vn[Kr],pn=bn,Ln=pn.geometry,Bn=pn.index,Wn=pn.sourceLayerIndex,Qn=m[Bn].feature;this.addFeature(bn,Ln,Bn,j),D.featureIndex.insert(Qn,Ln,Bn,Wn,this.index)}},Ai.prototype.update=function(m,D,j){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(m,D,this.stateDependentLayers,j)},Ai.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ai.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ai.prototype.upload=function(m){this.uploaded||(this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,H),this.indexBuffer=m.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(m),this.uploaded=!0},Ai.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ai.prototype.addFeature=function(m,D,j,lt){for(var dt=0,_t=D;dt<_t.length;dt+=1)for(var Lt=_t[dt],Kt=0,oe=Lt;Kt<oe.length;Kt+=1){var me=oe[Kt],Ee=me.x,Ne=me.y;if(!(Ee<0||Ee>=Ii||Ne<0||Ne>=Ii)){var He=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,m.sortKey),er=He.vertexLength;ca(this.layoutVertexArray,Ee,Ne,-1,-1),ca(this.layoutVertexArray,Ee,Ne,1,-1),ca(this.layoutVertexArray,Ee,Ne,1,1),ca(this.layoutVertexArray,Ee,Ne,-1,1),this.indexArray.emplaceBack(er,er+1,er+2),this.indexArray.emplaceBack(er,er+3,er+2),He.vertexLength+=4,He.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,m,j,{},lt)},st("CircleBucket",Ai,{omit:["layers"]});function Ni(m,D){for(var j=0;j<m.length;j++)if(go(D,m[j]))return!0;for(var lt=0;lt<D.length;lt++)if(go(m,D[lt]))return!0;return!!es(m,D)}function Sa(m,D,j){return!!(go(m,D)||jl(D,m,j))}function Fa(m,D){if(m.length===1)return rs(D,m[0]);for(var j=0;j<D.length;j++)for(var lt=D[j],dt=0;dt<lt.length;dt++)if(go(m,lt[dt]))return!0;for(var _t=0;_t<m.length;_t++)if(rs(D,m[_t]))return!0;for(var Lt=0;Lt<D.length;Lt++)if(es(m,D[Lt]))return!0;return!1}function ds(m,D,j){for(var lt=0;lt<D.length;lt++){var dt=D[lt];if(m.length>=3){for(var _t=0;_t<dt.length;_t++)if(go(m,dt[_t]))return!0}if(Vs(m,dt,j))return!0}return!1}function Vs(m,D,j){if(m.length>1){if(es(m,D))return!0;for(var lt=0;lt<D.length;lt++)if(jl(D[lt],m,j))return!0}for(var dt=0;dt<m.length;dt++)if(jl(m[dt],D,j))return!0;return!1}function es(m,D){if(m.length===0||D.length===0)return!1;for(var j=0;j<m.length-1;j++)for(var lt=m[j],dt=m[j+1],_t=0;_t<D.length-1;_t++){var Lt=D[_t],Kt=D[_t+1];if(Nl(lt,dt,Lt,Kt))return!0}return!1}function Nl(m,D,j,lt){return O(m,j,lt)!==O(D,j,lt)&&O(m,D,j)!==O(m,D,lt)}function jl(m,D,j){var lt=j*j;if(D.length===1)return m.distSqr(D[0])<lt;for(var dt=1;dt<D.length;dt++){var _t=D[dt-1],Lt=D[dt];if(lo(m,_t,Lt)<lt)return!0}return!1}function lo(m,D,j){var lt=D.distSqr(j);if(lt===0)return m.distSqr(D);var dt=((m.x-D.x)*(j.x-D.x)+(m.y-D.y)*(j.y-D.y))/lt;return dt<0?m.distSqr(D):dt>1?m.distSqr(j):m.distSqr(j.sub(D)._mult(dt)._add(D))}function rs(m,D){for(var j=!1,lt,dt,_t,Lt=0;Lt<m.length;Lt++){lt=m[Lt];for(var Kt=0,oe=lt.length-1;Kt<lt.length;oe=Kt++)dt=lt[Kt],_t=lt[oe],dt.y>D.y!=_t.y>D.y&&D.x<(_t.x-dt.x)*(D.y-dt.y)/(_t.y-dt.y)+dt.x&&(j=!j)}return j}function go(m,D){for(var j=!1,lt=0,dt=m.length-1;lt<m.length;dt=lt++){var _t=m[lt],Lt=m[dt];_t.y>D.y!=Lt.y>D.y&&D.x<(Lt.x-_t.x)*(D.y-_t.y)/(Lt.y-_t.y)+_t.x&&(j=!j)}return j}function Zu(m,D,j,lt,dt){for(var _t=0,Lt=m;_t<Lt.length;_t+=1){var Kt=Lt[_t];if(D<=Kt.x&&j<=Kt.y&&lt>=Kt.x&&dt>=Kt.y)return!0}var oe=[new e(D,j),new e(D,dt),new e(lt,dt),new e(lt,j)];if(m.length>2)for(var me=0,Ee=oe;me<Ee.length;me+=1){var Ne=Ee[me];if(go(m,Ne))return!0}for(var He=0;He<m.length-1;He++){var er=m[He],yr=m[He+1];if(fl(er,yr,oe))return!0}return!1}function fl(m,D,j){var lt=j[0],dt=j[2];if(m.x<lt.x&&D.x<lt.x||m.x>dt.x&&D.x>dt.x||m.y<lt.y&&D.y<lt.y||m.y>dt.y&&D.y>dt.y)return!1;var _t=O(m,D,j[0]);return _t!==O(m,D,j[1])||_t!==O(m,D,j[2])||_t!==O(m,D,j[3])}function Ps(m,D,j){var lt=D.paint.get(m).value;return lt.kind==="constant"?lt.value:j.programConfigurations.get(D.id).getMaxValue(m)}function Es(m){return Math.sqrt(m[0]*m[0]+m[1]*m[1])}function Lo(m,D,j,lt,dt){if(!D[0]&&!D[1])return m;var _t=e.convert(D)._mult(dt);j==="viewport"&&_t._rotate(-lt);for(var Lt=[],Kt=0;Kt<m.length;Kt++){var oe=m[Kt];Lt.push(oe.sub(_t))}return Lt}var Oc=new Oa({"circle-sort-key":new pi(Ue.layout_circle["circle-sort-key"])}),Ic=new Oa({"circle-radius":new pi(Ue.paint_circle["circle-radius"]),"circle-color":new pi(Ue.paint_circle["circle-color"]),"circle-blur":new pi(Ue.paint_circle["circle-blur"]),"circle-opacity":new pi(Ue.paint_circle["circle-opacity"]),"circle-translate":new oi(Ue.paint_circle["circle-translate"]),"circle-translate-anchor":new oi(Ue.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new oi(Ue.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new oi(Ue.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new pi(Ue.paint_circle["circle-stroke-width"]),"circle-stroke-color":new pi(Ue.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new pi(Ue.paint_circle["circle-stroke-opacity"])}),qu={paint:Ic,layout:Oc},uo=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var m=arguments,D=0,j=arguments.length;j--;)D+=m[j]*m[j];return Math.sqrt(D)});function _c(){var m=new uo(4);return uo!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m}function mo(m,D,j){var lt=D[0],dt=D[1],_t=D[2],Lt=D[3],Kt=Math.sin(j),oe=Math.cos(j);return m[0]=lt*oe+_t*Kt,m[1]=dt*oe+Lt*Kt,m[2]=lt*-Kt+_t*oe,m[3]=dt*-Kt+Lt*oe,m}function Vu(){var m=new uo(9);return uo!=Float32Array&&(m[1]=0,m[2]=0,m[3]=0,m[5]=0,m[6]=0,m[7]=0),m[0]=1,m[4]=1,m[8]=1,m}function zc(m,D){var j=Math.sin(D),lt=Math.cos(D);return m[0]=lt,m[1]=j,m[2]=0,m[3]=-j,m[4]=lt,m[5]=0,m[6]=0,m[7]=0,m[8]=1,m}function Dc(){var m=new uo(16);return uo!=Float32Array&&(m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[11]=0,m[12]=0,m[13]=0,m[14]=0),m[0]=1,m[5]=1,m[10]=1,m[15]=1,m}function Pf(m){var D=new uo(16);return D[0]=m[0],D[1]=m[1],D[2]=m[2],D[3]=m[3],D[4]=m[4],D[5]=m[5],D[6]=m[6],D[7]=m[7],D[8]=m[8],D[9]=m[9],D[10]=m[10],D[11]=m[11],D[12]=m[12],D[13]=m[13],D[14]=m[14],D[15]=m[15],D}function Ul(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}function wc(m,D){var j=D[0],lt=D[1],dt=D[2],_t=D[3],Lt=D[4],Kt=D[5],oe=D[6],me=D[7],Ee=D[8],Ne=D[9],He=D[10],er=D[11],yr=D[12],zr=D[13],un=D[14],Kr=D[15],vn=j*Kt-lt*Lt,bn=j*oe-dt*Lt,pn=j*me-_t*Lt,Ln=lt*oe-dt*Kt,Bn=lt*me-_t*Kt,Wn=dt*me-_t*oe,Qn=Ee*zr-Ne*yr,ui=Ee*un-He*yr,ci=Ee*Kr-er*yr,mi=Ne*un-He*zr,_i=Ne*Kr-er*zr,ki=He*Kr-er*un,yi=vn*ki-bn*_i+pn*mi+Ln*ci-Bn*ui+Wn*Qn;return yi?(yi=1/yi,m[0]=(Kt*ki-oe*_i+me*mi)*yi,m[1]=(dt*_i-lt*ki-_t*mi)*yi,m[2]=(zr*Wn-un*Bn+Kr*Ln)*yi,m[3]=(He*Bn-Ne*Wn-er*Ln)*yi,m[4]=(oe*ci-Lt*ki-me*ui)*yi,m[5]=(j*ki-dt*ci+_t*ui)*yi,m[6]=(un*pn-yr*Wn-Kr*bn)*yi,m[7]=(Ee*Wn-He*pn+er*bn)*yi,m[8]=(Lt*_i-Kt*ci+me*Qn)*yi,m[9]=(lt*ci-j*_i-_t*Qn)*yi,m[10]=(yr*Bn-zr*pn+Kr*vn)*yi,m[11]=(Ne*pn-Ee*Bn-er*vn)*yi,m[12]=(Kt*ui-Lt*mi-oe*Qn)*yi,m[13]=(j*mi-lt*ui+dt*Qn)*yi,m[14]=(zr*bn-yr*Ln-un*vn)*yi,m[15]=(Ee*Ln-Ne*bn+He*vn)*yi,m):null}function ka(m,D,j){var lt=D[0],dt=D[1],_t=D[2],Lt=D[3],Kt=D[4],oe=D[5],me=D[6],Ee=D[7],Ne=D[8],He=D[9],er=D[10],yr=D[11],zr=D[12],un=D[13],Kr=D[14],vn=D[15],bn=j[0],pn=j[1],Ln=j[2],Bn=j[3];return m[0]=bn*lt+pn*Kt+Ln*Ne+Bn*zr,m[1]=bn*dt+pn*oe+Ln*He+Bn*un,m[2]=bn*_t+pn*me+Ln*er+Bn*Kr,m[3]=bn*Lt+pn*Ee+Ln*yr+Bn*vn,bn=j[4],pn=j[5],Ln=j[6],Bn=j[7],m[4]=bn*lt+pn*Kt+Ln*Ne+Bn*zr,m[5]=bn*dt+pn*oe+Ln*He+Bn*un,m[6]=bn*_t+pn*me+Ln*er+Bn*Kr,m[7]=bn*Lt+pn*Ee+Ln*yr+Bn*vn,bn=j[8],pn=j[9],Ln=j[10],Bn=j[11],m[8]=bn*lt+pn*Kt+Ln*Ne+Bn*zr,m[9]=bn*dt+pn*oe+Ln*He+Bn*un,m[10]=bn*_t+pn*me+Ln*er+Bn*Kr,m[11]=bn*Lt+pn*Ee+Ln*yr+Bn*vn,bn=j[12],pn=j[13],Ln=j[14],Bn=j[15],m[12]=bn*lt+pn*Kt+Ln*Ne+Bn*zr,m[13]=bn*dt+pn*oe+Ln*He+Bn*un,m[14]=bn*_t+pn*me+Ln*er+Bn*Kr,m[15]=bn*Lt+pn*Ee+Ln*yr+Bn*vn,m}function Uo(m,D,j){var lt=j[0],dt=j[1],_t=j[2],Lt,Kt,oe,me,Ee,Ne,He,er,yr,zr,un,Kr;return D===m?(m[12]=D[0]*lt+D[4]*dt+D[8]*_t+D[12],m[13]=D[1]*lt+D[5]*dt+D[9]*_t+D[13],m[14]=D[2]*lt+D[6]*dt+D[10]*_t+D[14],m[15]=D[3]*lt+D[7]*dt+D[11]*_t+D[15]):(Lt=D[0],Kt=D[1],oe=D[2],me=D[3],Ee=D[4],Ne=D[5],He=D[6],er=D[7],yr=D[8],zr=D[9],un=D[10],Kr=D[11],m[0]=Lt,m[1]=Kt,m[2]=oe,m[3]=me,m[4]=Ee,m[5]=Ne,m[6]=He,m[7]=er,m[8]=yr,m[9]=zr,m[10]=un,m[11]=Kr,m[12]=Lt*lt+Ee*dt+yr*_t+D[12],m[13]=Kt*lt+Ne*dt+zr*_t+D[13],m[14]=oe*lt+He*dt+un*_t+D[14],m[15]=me*lt+er*dt+Kr*_t+D[15]),m}function Zo(m,D,j){var lt=j[0],dt=j[1],_t=j[2];return m[0]=D[0]*lt,m[1]=D[1]*lt,m[2]=D[2]*lt,m[3]=D[3]*lt,m[4]=D[4]*dt,m[5]=D[5]*dt,m[6]=D[6]*dt,m[7]=D[7]*dt,m[8]=D[8]*_t,m[9]=D[9]*_t,m[10]=D[10]*_t,m[11]=D[11]*_t,m[12]=D[12],m[13]=D[13],m[14]=D[14],m[15]=D[15],m}function Fc(m,D,j){var lt=Math.sin(j),dt=Math.cos(j),_t=D[4],Lt=D[5],Kt=D[6],oe=D[7],me=D[8],Ee=D[9],Ne=D[10],He=D[11];return D!==m&&(m[0]=D[0],m[1]=D[1],m[2]=D[2],m[3]=D[3],m[12]=D[12],m[13]=D[13],m[14]=D[14],m[15]=D[15]),m[4]=_t*dt+me*lt,m[5]=Lt*dt+Ee*lt,m[6]=Kt*dt+Ne*lt,m[7]=oe*dt+He*lt,m[8]=me*dt-_t*lt,m[9]=Ee*dt-Lt*lt,m[10]=Ne*dt-Kt*lt,m[11]=He*dt-oe*lt,m}function sf(m,D,j){var lt=Math.sin(j),dt=Math.cos(j),_t=D[0],Lt=D[1],Kt=D[2],oe=D[3],me=D[4],Ee=D[5],Ne=D[6],He=D[7];return D!==m&&(m[8]=D[8],m[9]=D[9],m[10]=D[10],m[11]=D[11],m[12]=D[12],m[13]=D[13],m[14]=D[14],m[15]=D[15]),m[0]=_t*dt+me*lt,m[1]=Lt*dt+Ee*lt,m[2]=Kt*dt+Ne*lt,m[3]=oe*dt+He*lt,m[4]=me*dt-_t*lt,m[5]=Ee*dt-Lt*lt,m[6]=Ne*dt-Kt*lt,m[7]=He*dt-oe*lt,m}function Qf(m,D,j,lt,dt){var _t=1/Math.tan(D/2),Lt;return m[0]=_t/j,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=_t,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[11]=-1,m[12]=0,m[13]=0,m[15]=0,dt!=null&&dt!==1/0?(Lt=1/(lt-dt),m[10]=(dt+lt)*Lt,m[14]=2*dt*lt*Lt):(m[10]=-1,m[14]=-2*lt),m}function $f(m,D,j,lt,dt,_t,Lt){var Kt=1/(D-j),oe=1/(lt-dt),me=1/(_t-Lt);return m[0]=-2*Kt,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=-2*oe,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=2*me,m[11]=0,m[12]=(D+j)*Kt,m[13]=(dt+lt)*oe,m[14]=(Lt+_t)*me,m[15]=1,m}var Ac=ka;function th(){var m=new uo(3);return uo!=Float32Array&&(m[0]=0,m[1]=0,m[2]=0),m}function Rc(m){var D=new uo(3);return D[0]=m[0],D[1]=m[1],D[2]=m[2],D}function eh(m,D,j){return m[0]=D[0]+j[0],m[1]=D[1]+j[1],m[2]=D[2]+j[2],m}function rh(m,D,j){return m[0]=D[0]-j[0],m[1]=D[1]-j[1],m[2]=D[2]-j[2],m}function lf(m,D,j){return m[0]=D[0]*j,m[1]=D[1]*j,m[2]=D[2]*j,m}function cd(m,D){var j=D[0],lt=D[1],dt=D[2],_t=j*j+lt*lt+dt*dt;return _t>0&&(_t=1/Math.sqrt(_t)),m[0]=D[0]*_t,m[1]=D[1]*_t,m[2]=D[2]*_t,m}function fd(m,D){return m[0]*D[0]+m[1]*D[1]+m[2]*D[2]}function hd(m,D,j){var lt=D[0],dt=D[1],_t=D[2],Lt=j[0],Kt=j[1],oe=j[2];return m[0]=dt*oe-_t*Kt,m[1]=_t*Lt-lt*oe,m[2]=lt*Kt-dt*Lt,m}function pd(m,D,j){var lt=D[0],dt=D[1],_t=D[2];return m[0]=lt*j[0]+dt*j[3]+_t*j[6],m[1]=lt*j[1]+dt*j[4]+_t*j[7],m[2]=lt*j[2]+dt*j[5]+_t*j[8],m}var dd=rh;(function(){var m=th();return function(D,j,lt,dt,_t,Lt){var Kt,oe;for(j||(j=3),lt||(lt=0),dt?oe=Math.min(dt*j+lt,D.length):oe=D.length,Kt=lt;Kt<oe;Kt+=j)m[0]=D[Kt],m[1]=D[Kt+1],m[2]=D[Kt+2],_t(m,m,Lt),D[Kt]=m[0],D[Kt+1]=m[1],D[Kt+2]=m[2];return D}})();function vd(){var m=new uo(4);return uo!=Float32Array&&(m[0]=0,m[1]=0,m[2]=0,m[3]=0),m}function gd(m,D,j){return m[0]=D[0]*j,m[1]=D[1]*j,m[2]=D[2]*j,m[3]=D[3]*j,m}function md(m,D){return m[0]*D[0]+m[1]*D[1]+m[2]*D[2]+m[3]*D[3]}function Ef(m,D,j){var lt=D[0],dt=D[1],_t=D[2],Lt=D[3];return m[0]=j[0]*lt+j[4]*dt+j[8]*_t+j[12]*Lt,m[1]=j[1]*lt+j[5]*dt+j[9]*_t+j[13]*Lt,m[2]=j[2]*lt+j[6]*dt+j[10]*_t+j[14]*Lt,m[3]=j[3]*lt+j[7]*dt+j[11]*_t+j[15]*Lt,m}(function(){var m=vd();return function(D,j,lt,dt,_t,Lt){var Kt,oe;for(j||(j=4),lt||(lt=0),dt?oe=Math.min(dt*j+lt,D.length):oe=D.length,Kt=lt;Kt<oe;Kt+=j)m[0]=D[Kt],m[1]=D[Kt+1],m[2]=D[Kt+2],m[3]=D[Kt+3],_t(m,m,Lt),D[Kt]=m[0],D[Kt+1]=m[1],D[Kt+2]=m[2],D[Kt+3]=m[3];return D}})();function yd(){var m=new uo(2);return uo!=Float32Array&&(m[0]=0,m[1]=0),m}function xd(m){var D=m[0],j=m[1];return D*D+j*j}var bd=xd;(function(){var m=yd();return function(D,j,lt,dt,_t,Lt){var Kt,oe;for(j||(j=2),lt||(lt=0),dt?oe=Math.min(dt*j+lt,D.length):oe=D.length,Kt=lt;Kt<oe;Kt+=j)m[0]=D[Kt],m[1]=D[Kt+1],_t(m,m,Lt),D[Kt]=m[0],D[Kt+1]=m[1];return D}})();var _d=function(m){function D(j){m.call(this,j,qu)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.createBucket=function(j){return new Ai(j)},D.prototype.queryRadius=function(j){var lt=j;return Ps("circle-radius",this,lt)+Ps("circle-stroke-width",this,lt)+Es(this.paint.get("circle-translate"))},D.prototype.queryIntersectsFeature=function(j,lt,dt,_t,Lt,Kt,oe,me){for(var Ee=Lo(j,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Kt.angle,oe),Ne=this.paint.get("circle-radius").evaluate(lt,dt),He=this.paint.get("circle-stroke-width").evaluate(lt,dt),er=Ne+He,yr=this.paint.get("circle-pitch-alignment")==="map",zr=yr?Ee:wd(Ee,me),un=yr?er*oe:er,Kr=0,vn=_t;Kr<vn.length;Kr+=1)for(var bn=vn[Kr],pn=0,Ln=bn;pn<Ln.length;pn+=1){var Bn=Ln[pn],Wn=yr?Bn:zh(Bn,me),Qn=un,ui=Ef([],[Bn.x,Bn.y,0,1],me);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Qn*=ui[3]/Kt.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Qn*=Kt.cameraToCenterDistance/ui[3]),Sa(zr,Wn,Qn))return!0}return!1},D}(pa);function zh(m,D){var j=Ef([],[m.x,m.y,0,1],D);return new e(j[0]/j[3],j[1]/j[3])}function wd(m,D){return m.map(function(j){return zh(j,D)})}var Dh=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D}(Ai);st("HeatmapBucket",Dh,{omit:["layers"]});function nh(m,D,j,lt){var dt=D.width,_t=D.height;if(!lt)lt=new Uint8Array(dt*_t*j);else if(lt instanceof Uint8ClampedArray)lt=new Uint8Array(lt.buffer);else if(lt.length!==dt*_t*j)throw new RangeError("mismatched image size");return m.width=dt,m.height=_t,m.data=lt,m}function Fh(m,D,j){var lt=D.width,dt=D.height;if(!(lt===m.width&&dt===m.height)){var _t=nh({},{width:lt,height:dt},j);ih(m,_t,{x:0,y:0},{x:0,y:0},{width:Math.min(m.width,lt),height:Math.min(m.height,dt)},j),m.width=lt,m.height=dt,m.data=_t.data}}function ih(m,D,j,lt,dt,_t){if(dt.width===0||dt.height===0)return D;if(dt.width>m.width||dt.height>m.height||j.x>m.width-dt.width||j.y>m.height-dt.height)throw new RangeError("out of range source coordinates for image copy");if(dt.width>D.width||dt.height>D.height||lt.x>D.width-dt.width||lt.y>D.height-dt.height)throw new RangeError("out of range destination coordinates for image copy");for(var Lt=m.data,Kt=D.data,oe=0;oe<dt.height;oe++)for(var me=((j.y+oe)*m.width+j.x)*_t,Ee=((lt.y+oe)*D.width+lt.x)*_t,Ne=0;Ne<dt.width*_t;Ne++)Kt[Ee+Ne]=Lt[me+Ne];return D}var Tc=function(m,D){nh(this,m,1,D)};Tc.prototype.resize=function(m){Fh(this,m,1)},Tc.prototype.clone=function(){return new Tc({width:this.width,height:this.height},new Uint8Array(this.data))},Tc.copy=function(m,D,j,lt,dt){ih(m,D,j,lt,dt,1)};var qo=function(m,D){nh(this,m,4,D)};qo.prototype.resize=function(m){Fh(this,m,4)},qo.prototype.replace=function(m,D){D?this.data.set(m):m instanceof Uint8ClampedArray?this.data=new Uint8Array(m.buffer):this.data=m},qo.prototype.clone=function(){return new qo({width:this.width,height:this.height},new Uint8Array(this.data))},qo.copy=function(m,D,j,lt,dt){ih(m,D,j,lt,dt,4)},st("AlphaImage",Tc),st("RGBAImage",qo);var Ad=new Oa({"heatmap-radius":new pi(Ue.paint_heatmap["heatmap-radius"]),"heatmap-weight":new pi(Ue.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new oi(Ue.paint_heatmap["heatmap-intensity"]),"heatmap-color":new so(Ue.paint_heatmap["heatmap-color"]),"heatmap-opacity":new oi(Ue.paint_heatmap["heatmap-opacity"])}),Td={paint:Ad};function Rh(m,D){for(var j=new Uint8Array(1024),lt={},dt=0,_t=0;dt<256;dt++,_t+=4){lt[D]=dt/255;var Lt=m.evaluate(lt);j[_t+0]=Math.floor(Lt.r*255/Lt.a),j[_t+1]=Math.floor(Lt.g*255/Lt.a),j[_t+2]=Math.floor(Lt.b*255/Lt.a),j[_t+3]=Math.floor(Lt.a*255)}return new qo({width:256,height:1},j)}var kd=function(m){function D(j){m.call(this,j,Td),this._updateColorRamp()}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.createBucket=function(j){return new Dh(j)},D.prototype._handleSpecialPaintPropertyUpdate=function(j){j==="heatmap-color"&&this._updateColorRamp()},D.prototype._updateColorRamp=function(){var j=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Rh(j,"heatmapDensity"),this.colorRampTexture=null},D.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},D.prototype.queryRadius=function(){return 0},D.prototype.queryIntersectsFeature=function(){return!1},D.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},D}(pa),Md=new Oa({"hillshade-illumination-direction":new oi(Ue.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new oi(Ue.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new oi(Ue.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new oi(Ue.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new oi(Ue.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new oi(Ue.paint_hillshade["hillshade-accent-color"])}),Sd={paint:Md},Ld=function(m){function D(j){m.call(this,j,Sd)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},D}(pa),Pd=sa([{name:"a_pos",components:2,type:"Int16"}],4),Bh=Pd.members,ah=Cf,Ed=Cf;function Cf(m,D,j){j=j||2;var lt=D&&D.length,dt=lt?D[0]*j:m.length,_t=Nh(m,0,dt,j,!0),Lt=[];if(!_t||_t.next===_t.prev)return Lt;var Kt,oe,me,Ee,Ne,He,er;if(lt&&(_t=Dd(m,D,_t,j)),m.length>80*j){Kt=me=m[0],oe=Ee=m[1];for(var yr=j;yr<dt;yr+=j)Ne=m[yr],He=m[yr+1],Ne<Kt&&(Kt=Ne),He<oe&&(oe=He),Ne>me&&(me=Ne),He>Ee&&(Ee=He);er=Math.max(me-Kt,Ee-oe),er=er!==0?1/er:0}return uf(_t,Lt,j,Kt,oe,er),Lt}function Nh(m,D,j,lt,dt){var _t,Lt;if(dt===lh(m,D,j,lt)>0)for(_t=D;_t<j;_t+=lt)Lt=Zh(_t,m[_t],m[_t+1],Lt);else for(_t=j-lt;_t>=D;_t-=lt)Lt=Zh(_t,m[_t],m[_t+1],Lt);return Lt&&Of(Lt,Lt.next)&&(ff(Lt),Lt=Lt.next),Lt}function Hu(m,D){if(!m)return m;D||(D=m);var j=m,lt;do if(lt=!1,!j.steiner&&(Of(j,j.next)||Ra(j.prev,j,j.next)===0)){if(ff(j),j=D=j.prev,j===j.next)break;lt=!0}else j=j.next;while(lt||j!==D);return D}function uf(m,D,j,lt,dt,_t,Lt){if(m){!Lt&&_t&&jd(m,lt,dt,_t);for(var Kt=m,oe,me;m.prev!==m.next;){if(oe=m.prev,me=m.next,_t?Od(m,lt,dt,_t):Cd(m)){D.push(oe.i/j),D.push(m.i/j),D.push(me.i/j),ff(m),m=me.next,Kt=me.next;continue}if(m=me,m===Kt){Lt?Lt===1?(m=Id(Hu(m),D,j),uf(m,D,j,lt,dt,_t,2)):Lt===2&&zd(m,D,j,lt,dt,_t):uf(Hu(m),D,j,lt,dt,_t,1);break}}}}function Cd(m){var D=m.prev,j=m,lt=m.next;if(Ra(D,j,lt)>=0)return!1;for(var dt=m.next.next;dt!==m.prev;){if(Bc(D.x,D.y,j.x,j.y,lt.x,lt.y,dt.x,dt.y)&&Ra(dt.prev,dt,dt.next)>=0)return!1;dt=dt.next}return!0}function Od(m,D,j,lt){var dt=m.prev,_t=m,Lt=m.next;if(Ra(dt,_t,Lt)>=0)return!1;for(var Kt=dt.x<_t.x?dt.x<Lt.x?dt.x:Lt.x:_t.x<Lt.x?_t.x:Lt.x,oe=dt.y<_t.y?dt.y<Lt.y?dt.y:Lt.y:_t.y<Lt.y?_t.y:Lt.y,me=dt.x>_t.x?dt.x>Lt.x?dt.x:Lt.x:_t.x>Lt.x?_t.x:Lt.x,Ee=dt.y>_t.y?dt.y>Lt.y?dt.y:Lt.y:_t.y>Lt.y?_t.y:Lt.y,Ne=oh(Kt,oe,D,j,lt),He=oh(me,Ee,D,j,lt),er=m.prevZ,yr=m.nextZ;er&&er.z>=Ne&&yr&&yr.z<=He;){if(er!==m.prev&&er!==m.next&&Bc(dt.x,dt.y,_t.x,_t.y,Lt.x,Lt.y,er.x,er.y)&&Ra(er.prev,er,er.next)>=0||(er=er.prevZ,yr!==m.prev&&yr!==m.next&&Bc(dt.x,dt.y,_t.x,_t.y,Lt.x,Lt.y,yr.x,yr.y)&&Ra(yr.prev,yr,yr.next)>=0))return!1;yr=yr.nextZ}for(;er&&er.z>=Ne;){if(er!==m.prev&&er!==m.next&&Bc(dt.x,dt.y,_t.x,_t.y,Lt.x,Lt.y,er.x,er.y)&&Ra(er.prev,er,er.next)>=0)return!1;er=er.prevZ}for(;yr&&yr.z<=He;){if(yr!==m.prev&&yr!==m.next&&Bc(dt.x,dt.y,_t.x,_t.y,Lt.x,Lt.y,yr.x,yr.y)&&Ra(yr.prev,yr,yr.next)>=0)return!1;yr=yr.nextZ}return!0}function Id(m,D,j){var lt=m;do{var dt=lt.prev,_t=lt.next.next;!Of(dt,_t)&&jh(dt,lt,lt.next,_t)&&cf(dt,_t)&&cf(_t,dt)&&(D.push(dt.i/j),D.push(lt.i/j),D.push(_t.i/j),ff(lt),ff(lt.next),lt=m=_t),lt=lt.next}while(lt!==m);return Hu(lt)}function zd(m,D,j,lt,dt,_t){var Lt=m;do{for(var Kt=Lt.next.next;Kt!==Lt.prev;){if(Lt.i!==Kt.i&&qd(Lt,Kt)){var oe=Uh(Lt,Kt);Lt=Hu(Lt,Lt.next),oe=Hu(oe,oe.next),uf(Lt,D,j,lt,dt,_t),uf(oe,D,j,lt,dt,_t);return}Kt=Kt.next}Lt=Lt.next}while(Lt!==m)}function Dd(m,D,j,lt){var dt=[],_t,Lt,Kt,oe,me;for(_t=0,Lt=D.length;_t<Lt;_t++)Kt=D[_t]*lt,oe=_t<Lt-1?D[_t+1]*lt:m.length,me=Nh(m,Kt,oe,lt,!1),me===me.next&&(me.steiner=!0),dt.push(Zd(me));for(dt.sort(Fd),_t=0;_t<dt.length;_t++)Rd(dt[_t],j),j=Hu(j,j.next);return j}function Fd(m,D){return m.x-D.x}function Rd(m,D){if(D=Bd(m,D),D){var j=Uh(D,m);Hu(D,D.next),Hu(j,j.next)}}function Bd(m,D){var j=D,lt=m.x,dt=m.y,_t=-1/0,Lt;do{if(dt<=j.y&&dt>=j.next.y&&j.next.y!==j.y){var Kt=j.x+(dt-j.y)*(j.next.x-j.x)/(j.next.y-j.y);if(Kt<=lt&&Kt>_t){if(_t=Kt,Kt===lt){if(dt===j.y)return j;if(dt===j.next.y)return j.next}Lt=j.x<j.next.x?j:j.next}}j=j.next}while(j!==D);if(!Lt)return null;if(lt===_t)return Lt;var oe=Lt,me=Lt.x,Ee=Lt.y,Ne=1/0,He;j=Lt;do lt>=j.x&&j.x>=me&&lt!==j.x&&Bc(dt<Ee?lt:_t,dt,me,Ee,dt<Ee?_t:lt,dt,j.x,j.y)&&(He=Math.abs(dt-j.y)/(lt-j.x),cf(j,m)&&(He<Ne||He===Ne&&(j.x>Lt.x||j.x===Lt.x&&Nd(Lt,j)))&&(Lt=j,Ne=He)),j=j.next;while(j!==oe);return Lt}function Nd(m,D){return Ra(m.prev,m,D.prev)<0&&Ra(D.next,m,m.next)<0}function jd(m,D,j,lt){var dt=m;do dt.z===null&&(dt.z=oh(dt.x,dt.y,D,j,lt)),dt.prevZ=dt.prev,dt.nextZ=dt.next,dt=dt.next;while(dt!==m);dt.prevZ.nextZ=null,dt.prevZ=null,Ud(dt)}function Ud(m){var D,j,lt,dt,_t,Lt,Kt,oe,me=1;do{for(j=m,m=null,_t=null,Lt=0;j;){for(Lt++,lt=j,Kt=0,D=0;D<me&&(Kt++,lt=lt.nextZ,!!lt);D++);for(oe=me;Kt>0||oe>0&&lt;)Kt!==0&&(oe===0||!lt||j.z<=lt.z)?(dt=j,j=j.nextZ,Kt--):(dt=lt,lt=lt.nextZ,oe--),_t?_t.nextZ=dt:m=dt,dt.prevZ=_t,_t=dt;j=lt}_t.nextZ=null,me*=2}while(Lt>1);return m}function oh(m,D,j,lt,dt){return m=32767*(m-j)*dt,D=32767*(D-lt)*dt,m=(m|m<<8)&16711935,m=(m|m<<4)&252645135,m=(m|m<<2)&858993459,m=(m|m<<1)&1431655765,D=(D|D<<8)&16711935,D=(D|D<<4)&252645135,D=(D|D<<2)&858993459,D=(D|D<<1)&1431655765,m|D<<1}function Zd(m){var D=m,j=m;do(D.x<j.x||D.x===j.x&&D.y<j.y)&&(j=D),D=D.next;while(D!==m);return j}function Bc(m,D,j,lt,dt,_t,Lt,Kt){return(dt-Lt)*(D-Kt)-(m-Lt)*(_t-Kt)>=0&&(m-Lt)*(lt-Kt)-(j-Lt)*(D-Kt)>=0&&(j-Lt)*(_t-Kt)-(dt-Lt)*(lt-Kt)>=0}function qd(m,D){return m.next.i!==D.i&&m.prev.i!==D.i&&!Vd(m,D)&&(cf(m,D)&&cf(D,m)&&Hd(m,D)&&(Ra(m.prev,m,D.prev)||Ra(m,D.prev,D))||Of(m,D)&&Ra(m.prev,m,m.next)>0&&Ra(D.prev,D,D.next)>0)}function Ra(m,D,j){return(D.y-m.y)*(j.x-D.x)-(D.x-m.x)*(j.y-D.y)}function Of(m,D){return m.x===D.x&&m.y===D.y}function jh(m,D,j,lt){var dt=zf(Ra(m,D,j)),_t=zf(Ra(m,D,lt)),Lt=zf(Ra(j,lt,m)),Kt=zf(Ra(j,lt,D));return!!(dt!==_t&&Lt!==Kt||dt===0&&If(m,j,D)||_t===0&&If(m,lt,D)||Lt===0&&If(j,m,lt)||Kt===0&&If(j,D,lt))}function If(m,D,j){return D.x<=Math.max(m.x,j.x)&&D.x>=Math.min(m.x,j.x)&&D.y<=Math.max(m.y,j.y)&&D.y>=Math.min(m.y,j.y)}function zf(m){return m>0?1:m<0?-1:0}function Vd(m,D){var j=m;do{if(j.i!==m.i&&j.next.i!==m.i&&j.i!==D.i&&j.next.i!==D.i&&jh(j,j.next,m,D))return!0;j=j.next}while(j!==m);return!1}function cf(m,D){return Ra(m.prev,m,m.next)<0?Ra(m,D,m.next)>=0&&Ra(m,m.prev,D)>=0:Ra(m,D,m.prev)<0||Ra(m,m.next,D)<0}function Hd(m,D){var j=m,lt=!1,dt=(m.x+D.x)/2,_t=(m.y+D.y)/2;do j.y>_t!=j.next.y>_t&&j.next.y!==j.y&&dt<(j.next.x-j.x)*(_t-j.y)/(j.next.y-j.y)+j.x&&(lt=!lt),j=j.next;while(j!==m);return lt}function Uh(m,D){var j=new sh(m.i,m.x,m.y),lt=new sh(D.i,D.x,D.y),dt=m.next,_t=D.prev;return m.next=D,D.prev=m,j.next=dt,dt.prev=j,lt.next=j,j.prev=lt,_t.next=lt,lt.prev=_t,lt}function Zh(m,D,j,lt){var dt=new sh(m,D,j);return lt?(dt.next=lt.next,dt.prev=lt,lt.next.prev=dt,lt.next=dt):(dt.prev=dt,dt.next=dt),dt}function ff(m){m.next.prev=m.prev,m.prev.next=m.next,m.prevZ&&(m.prevZ.nextZ=m.nextZ),m.nextZ&&(m.nextZ.prevZ=m.prevZ)}function sh(m,D,j){this.i=m,this.x=D,this.y=j,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}Cf.deviation=function(m,D,j,lt){var dt=D&&D.length,_t=dt?D[0]*j:m.length,Lt=Math.abs(lh(m,0,_t,j));if(dt)for(var Kt=0,oe=D.length;Kt<oe;Kt++){var me=D[Kt]*j,Ee=Kt<oe-1?D[Kt+1]*j:m.length;Lt-=Math.abs(lh(m,me,Ee,j))}var Ne=0;for(Kt=0;Kt<lt.length;Kt+=3){var He=lt[Kt]*j,er=lt[Kt+1]*j,yr=lt[Kt+2]*j;Ne+=Math.abs((m[He]-m[yr])*(m[er+1]-m[He+1])-(m[He]-m[er])*(m[yr+1]-m[He+1]))}return Lt===0&&Ne===0?0:Math.abs((Ne-Lt)/Lt)};function lh(m,D,j,lt){for(var dt=0,_t=D,Lt=j-lt;_t<j;_t+=lt)dt+=(m[Lt]-m[_t])*(m[_t+1]+m[Lt+1]),Lt=_t;return dt}Cf.flatten=function(m){for(var D=m[0][0].length,j={vertices:[],holes:[],dimensions:D},lt=0,dt=0;dt<m.length;dt++){for(var _t=0;_t<m[dt].length;_t++)for(var Lt=0;Lt<D;Lt++)j.vertices.push(m[dt][_t][Lt]);dt>0&&(lt+=m[dt-1].length,j.holes.push(lt))}return j},ah.default=Ed;function Gd(m,D,j,lt,dt){qh(m,D,j||0,lt||m.length-1,dt||Wd)}function qh(m,D,j,lt,dt){for(;lt>j;){if(lt-j>600){var _t=lt-j+1,Lt=D-j+1,Kt=Math.log(_t),oe=.5*Math.exp(2*Kt/3),me=.5*Math.sqrt(Kt*oe*(_t-oe)/_t)*(Lt-_t/2<0?-1:1),Ee=Math.max(j,Math.floor(D-Lt*oe/_t+me)),Ne=Math.min(lt,Math.floor(D+(_t-Lt)*oe/_t+me));qh(m,D,Ee,Ne,dt)}var He=m[D],er=j,yr=lt;for(hf(m,j,D),dt(m[lt],He)>0&&hf(m,j,lt);er<yr;){for(hf(m,er,yr),er++,yr--;dt(m[er],He)<0;)er++;for(;dt(m[yr],He)>0;)yr--}dt(m[j],He)===0?hf(m,j,yr):(yr++,hf(m,yr,lt)),yr<=D&&(j=yr+1),D<=yr&&(lt=yr-1)}}function hf(m,D,j){var lt=m[D];m[D]=m[j],m[j]=lt}function Wd(m,D){return m<D?-1:m>D?1:0}function uh(m,D){var j=m.length;if(j<=1)return[m];for(var lt=[],dt,_t,Lt=0;Lt<j;Lt++){var Kt=R(m[Lt]);Kt!==0&&(m[Lt].area=Math.abs(Kt),_t===void 0&&(_t=Kt<0),_t===Kt<0?(dt&&lt.push(dt),dt=[m[Lt]]):dt.push(m[Lt]))}if(dt&&lt.push(dt),D>1)for(var oe=0;oe<lt.length;oe++)lt[oe].length<=D||(Gd(lt[oe],D,1,lt[oe].length-1,Yd),lt[oe]=lt[oe].slice(0,D));return lt}function Yd(m,D){return D.area-m.area}function ch(m,D,j){for(var lt=j.patternDependencies,dt=!1,_t=0,Lt=D;_t<Lt.length;_t+=1){var Kt=Lt[_t],oe=Kt.paint.get(m+"-pattern");oe.isConstant()||(dt=!0);var me=oe.constantOr(null);me&&(dt=!0,lt[me.to]=!0,lt[me.from]=!0)}return dt}function fh(m,D,j,lt,dt){for(var _t=dt.patternDependencies,Lt=0,Kt=D;Lt<Kt.length;Lt+=1){var oe=Kt[Lt],me=oe.paint.get(m+"-pattern"),Ee=me.value;if(Ee.kind!=="constant"){var Ne=Ee.evaluate({zoom:lt-1},j,{},dt.availableImages),He=Ee.evaluate({zoom:lt},j,{},dt.availableImages),er=Ee.evaluate({zoom:lt+1},j,{},dt.availableImages);Ne=Ne&&Ne.name?Ne.name:Ne,He=He&&He.name?He.name:He,er=er&&er.name?er.name:er,_t[Ne]=!0,_t[He]=!0,_t[er]=!0,j.patterns[oe.id]={min:Ne,mid:He,max:er}}}return j}var Xd=500,hl=function(m){this.zoom=m.zoom,this.overscaling=m.overscaling,this.layers=m.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=m.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new mc,this.indexArray=new cl,this.indexArray2=new bc,this.programConfigurations=new Di(Bh,m.layers,m.zoom),this.segments=new tt,this.segments2=new tt,this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};hl.prototype.populate=function(m,D,j){this.hasPattern=ch("fill",this.layers,D);for(var lt=this.layers[0].layout.get("fill-sort-key"),dt=[],_t=0,Lt=m;_t<Lt.length;_t+=1){var Kt=Lt[_t],oe=Kt.feature,me=Kt.id,Ee=Kt.index,Ne=Kt.sourceLayerIndex,He=this.layers[0]._featureFilter.needGeometry,er={type:oe.type,id:me,properties:oe.properties,geometry:He?Fi(oe):[]};if(this.layers[0]._featureFilter.filter(new In(this.zoom),er,j)){He||(er.geometry=Fi(oe));var yr=lt?lt.evaluate(er,{},j,D.availableImages):void 0,zr={id:me,properties:oe.properties,type:oe.type,sourceLayerIndex:Ne,index:Ee,geometry:er.geometry,patterns:{},sortKey:yr};dt.push(zr)}}lt&&dt.sort(function(ui,ci){return ui.sortKey-ci.sortKey});for(var un=0,Kr=dt;un<Kr.length;un+=1){var vn=Kr[un],bn=vn,pn=bn.geometry,Ln=bn.index,Bn=bn.sourceLayerIndex;if(this.hasPattern){var Wn=fh("fill",this.layers,vn,this.zoom,D);this.patternFeatures.push(Wn)}else this.addFeature(vn,pn,Ln,j,{});var Qn=m[Ln].feature;D.featureIndex.insert(Qn,pn,Ln,Bn,this.index)}},hl.prototype.update=function(m,D,j){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(m,D,this.stateDependentLayers,j)},hl.prototype.addFeatures=function(m,D,j){for(var lt=0,dt=this.patternFeatures;lt<dt.length;lt+=1){var _t=dt[lt];this.addFeature(_t,_t.geometry,_t.index,D,j)}},hl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},hl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},hl.prototype.upload=function(m){this.uploaded||(this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,Bh),this.indexBuffer=m.createIndexBuffer(this.indexArray),this.indexBuffer2=m.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(m),this.uploaded=!0},hl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},hl.prototype.addFeature=function(m,D,j,lt,dt){for(var _t=0,Lt=uh(D,Xd);_t<Lt.length;_t+=1){for(var Kt=Lt[_t],oe=0,me=0,Ee=Kt;me<Ee.length;me+=1){var Ne=Ee[me];oe+=Ne.length}for(var He=this.segments.prepareSegment(oe,this.layoutVertexArray,this.indexArray),er=He.vertexLength,yr=[],zr=[],un=0,Kr=Kt;un<Kr.length;un+=1){var vn=Kr[un];if(vn.length!==0){vn!==Kt[0]&&zr.push(yr.length/2);var bn=this.segments2.prepareSegment(vn.length,this.layoutVertexArray,this.indexArray2),pn=bn.vertexLength;this.layoutVertexArray.emplaceBack(vn[0].x,vn[0].y),this.indexArray2.emplaceBack(pn+vn.length-1,pn),yr.push(vn[0].x),yr.push(vn[0].y);for(var Ln=1;Ln<vn.length;Ln++)this.layoutVertexArray.emplaceBack(vn[Ln].x,vn[Ln].y),this.indexArray2.emplaceBack(pn+Ln-1,pn+Ln),yr.push(vn[Ln].x),yr.push(vn[Ln].y);bn.vertexLength+=vn.length,bn.primitiveLength+=vn.length}}for(var Bn=ah(yr,zr),Wn=0;Wn<Bn.length;Wn+=3)this.indexArray.emplaceBack(er+Bn[Wn],er+Bn[Wn+1],er+Bn[Wn+2]);He.vertexLength+=oe,He.primitiveLength+=Bn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,m,j,dt,lt)},st("FillBucket",hl,{omit:["layers","patternFeatures"]});var Kd=new Oa({"fill-sort-key":new pi(Ue.layout_fill["fill-sort-key"])}),Jd=new Oa({"fill-antialias":new oi(Ue.paint_fill["fill-antialias"]),"fill-opacity":new pi(Ue.paint_fill["fill-opacity"]),"fill-color":new pi(Ue.paint_fill["fill-color"]),"fill-outline-color":new pi(Ue.paint_fill["fill-outline-color"]),"fill-translate":new oi(Ue.paint_fill["fill-translate"]),"fill-translate-anchor":new oi(Ue.paint_fill["fill-translate-anchor"]),"fill-pattern":new oa(Ue.paint_fill["fill-pattern"])}),Qd={paint:Jd,layout:Kd},$d=function(m){function D(j){m.call(this,j,Qd)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.recalculate=function(j,lt){m.prototype.recalculate.call(this,j,lt);var dt=this.paint._values["fill-outline-color"];dt.value.kind==="constant"&&dt.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},D.prototype.createBucket=function(j){return new hl(j)},D.prototype.queryRadius=function(){return Es(this.paint.get("fill-translate"))},D.prototype.queryIntersectsFeature=function(j,lt,dt,_t,Lt,Kt,oe){var me=Lo(j,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Kt.angle,oe);return Fa(me,_t)},D.prototype.isTileClipped=function(){return!0},D}(pa),t0=sa([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Vh=t0.members,Hh=Nc;function Nc(m,D,j,lt,dt){this.properties={},this.extent=j,this.type=0,this._pbf=m,this._geometry=-1,this._keys=lt,this._values=dt,m.readFields(e0,this,D)}function e0(m,D,j){m==1?D.id=j.readVarint():m==2?r0(j,D):m==3?D.type=j.readVarint():m==4&&(D._geometry=j.pos)}function r0(m,D){for(var j=m.readVarint()+m.pos;m.pos<j;){var lt=D._keys[m.readVarint()],dt=D._values[m.readVarint()];D.properties[lt]=dt}}Nc.types=["Unknown","Point","LineString","Polygon"],Nc.prototype.loadGeometry=function(){var m=this._pbf;m.pos=this._geometry;for(var D=m.readVarint()+m.pos,j=1,lt=0,dt=0,_t=0,Lt=[],Kt;m.pos<D;){if(lt<=0){var oe=m.readVarint();j=oe&7,lt=oe>>3}if(lt--,j===1||j===2)dt+=m.readSVarint(),_t+=m.readSVarint(),j===1&&(Kt&&Lt.push(Kt),Kt=[]),Kt.push(new e(dt,_t));else if(j===7)Kt&&Kt.push(Kt[0].clone());else throw new Error("unknown command "+j)}return Kt&&Lt.push(Kt),Lt},Nc.prototype.bbox=function(){var m=this._pbf;m.pos=this._geometry;for(var D=m.readVarint()+m.pos,j=1,lt=0,dt=0,_t=0,Lt=1/0,Kt=-1/0,oe=1/0,me=-1/0;m.pos<D;){if(lt<=0){var Ee=m.readVarint();j=Ee&7,lt=Ee>>3}if(lt--,j===1||j===2)dt+=m.readSVarint(),_t+=m.readSVarint(),dt<Lt&&(Lt=dt),dt>Kt&&(Kt=dt),_t<oe&&(oe=_t),_t>me&&(me=_t);else if(j!==7)throw new Error("unknown command "+j)}return[Lt,oe,Kt,me]},Nc.prototype.toGeoJSON=function(m,D,j){var lt=this.extent*Math.pow(2,j),dt=this.extent*m,_t=this.extent*D,Lt=this.loadGeometry(),Kt=Nc.types[this.type],oe,me;function Ee(er){for(var yr=0;yr<er.length;yr++){var zr=er[yr],un=180-(zr.y+_t)*360/lt;er[yr]=[(zr.x+dt)*360/lt-180,360/Math.PI*Math.atan(Math.exp(un*Math.PI/180))-90]}}switch(this.type){case 1:var Ne=[];for(oe=0;oe<Lt.length;oe++)Ne[oe]=Lt[oe][0];Lt=Ne,Ee(Lt);break;case 2:for(oe=0;oe<Lt.length;oe++)Ee(Lt[oe]);break;case 3:for(Lt=n0(Lt),oe=0;oe<Lt.length;oe++)for(me=0;me<Lt[oe].length;me++)Ee(Lt[oe][me]);break}Lt.length===1?Lt=Lt[0]:Kt="Multi"+Kt;var He={type:"Feature",geometry:{type:Kt,coordinates:Lt},properties:this.properties};return"id"in this&&(He.id=this.id),He};function n0(m){var D=m.length;if(D<=1)return[m];for(var j=[],lt,dt,_t=0;_t<D;_t++){var Lt=i0(m[_t]);Lt!==0&&(dt===void 0&&(dt=Lt<0),dt===Lt<0?(lt&&j.push(lt),lt=[m[_t]]):lt.push(m[_t]))}return lt&&j.push(lt),j}function i0(m){for(var D=0,j=0,lt=m.length,dt=lt-1,_t,Lt;j<lt;dt=j++)_t=m[j],Lt=m[dt],D+=(Lt.x-_t.x)*(_t.y+Lt.y);return D}var Gh=Wh;function Wh(m,D){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=m,this._keys=[],this._values=[],this._features=[],m.readFields(a0,this,D),this.length=this._features.length}function a0(m,D,j){m===15?D.version=j.readVarint():m===1?D.name=j.readString():m===5?D.extent=j.readVarint():m===2?D._features.push(j.pos):m===3?D._keys.push(j.readString()):m===4&&D._values.push(o0(j))}function o0(m){for(var D=null,j=m.readVarint()+m.pos;m.pos<j;){var lt=m.readVarint()>>3;D=lt===1?m.readString():lt===2?m.readFloat():lt===3?m.readDouble():lt===4?m.readVarint64():lt===5?m.readVarint():lt===6?m.readSVarint():lt===7?m.readBoolean():null}return D}Wh.prototype.feature=function(m){if(m<0||m>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[m];var D=this._pbf.readVarint()+this._pbf.pos;return new Hh(this._pbf,D,this.extent,this._keys,this._values)};var s0=l0;function l0(m,D){this.layers=m.readFields(u0,{},D)}function u0(m,D,j){if(m===3){var lt=new Gh(j,j.readVarint()+j.pos);lt.length&&(D[lt.name]=lt)}}var c0=s0,f0=Hh,h0=Gh,jc={VectorTile:c0,VectorTileFeature:f0,VectorTileLayer:h0},p0=jc.VectorTileFeature.types,d0=500,hh=Math.pow(2,13);function pf(m,D,j,lt,dt,_t,Lt,Kt){m.emplaceBack(D,j,Math.floor(lt*hh)*2+Lt,dt*hh*2,_t*hh*2,Math.round(Kt))}var pl=function(m){this.zoom=m.zoom,this.overscaling=m.overscaling,this.layers=m.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=m.index,this.hasPattern=!1,this.layoutVertexArray=new Bu,this.indexArray=new cl,this.programConfigurations=new Di(Vh,m.layers,m.zoom),this.segments=new tt,this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};pl.prototype.populate=function(m,D,j){this.features=[],this.hasPattern=ch("fill-extrusion",this.layers,D);for(var lt=0,dt=m;lt<dt.length;lt+=1){var _t=dt[lt],Lt=_t.feature,Kt=_t.id,oe=_t.index,me=_t.sourceLayerIndex,Ee=this.layers[0]._featureFilter.needGeometry,Ne={type:Lt.type,id:Kt,properties:Lt.properties,geometry:Ee?Fi(Lt):[]};if(this.layers[0]._featureFilter.filter(new In(this.zoom),Ne,j)){var He={id:Kt,sourceLayerIndex:me,index:oe,geometry:Ee?Ne.geometry:Fi(Lt),properties:Lt.properties,type:Lt.type,patterns:{}};typeof Lt.id<"u"&&(He.id=Lt.id),this.hasPattern?this.features.push(fh("fill-extrusion",this.layers,He,this.zoom,D)):this.addFeature(He,He.geometry,oe,j,{}),D.featureIndex.insert(Lt,He.geometry,oe,me,this.index,!0)}}},pl.prototype.addFeatures=function(m,D,j){for(var lt=0,dt=this.features;lt<dt.length;lt+=1){var _t=dt[lt],Lt=_t.geometry;this.addFeature(_t,Lt,_t.index,D,j)}},pl.prototype.update=function(m,D,j){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(m,D,this.stateDependentLayers,j)},pl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},pl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},pl.prototype.upload=function(m){this.uploaded||(this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,Vh),this.indexBuffer=m.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(m),this.uploaded=!0},pl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},pl.prototype.addFeature=function(m,D,j,lt,dt){for(var _t=0,Lt=uh(D,d0);_t<Lt.length;_t+=1){for(var Kt=Lt[_t],oe=0,me=0,Ee=Kt;me<Ee.length;me+=1){var Ne=Ee[me];oe+=Ne.length}for(var He=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),er=0,yr=Kt;er<yr.length;er+=1){var zr=yr[er];if(zr.length!==0&&!g0(zr))for(var un=0,Kr=0;Kr<zr.length;Kr++){var vn=zr[Kr];if(Kr>=1){var bn=zr[Kr-1];if(!v0(vn,bn)){He.vertexLength+4>tt.MAX_VERTEX_ARRAY_LENGTH&&(He=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var pn=vn.sub(bn)._perp()._unit(),Ln=bn.dist(vn);un+Ln>32768&&(un=0),pf(this.layoutVertexArray,vn.x,vn.y,pn.x,pn.y,0,0,un),pf(this.layoutVertexArray,vn.x,vn.y,pn.x,pn.y,0,1,un),un+=Ln,pf(this.layoutVertexArray,bn.x,bn.y,pn.x,pn.y,0,0,un),pf(this.layoutVertexArray,bn.x,bn.y,pn.x,pn.y,0,1,un);var Bn=He.vertexLength;this.indexArray.emplaceBack(Bn,Bn+2,Bn+1),this.indexArray.emplaceBack(Bn+1,Bn+2,Bn+3),He.vertexLength+=4,He.primitiveLength+=2}}}}if(He.vertexLength+oe>tt.MAX_VERTEX_ARRAY_LENGTH&&(He=this.segments.prepareSegment(oe,this.layoutVertexArray,this.indexArray)),p0[m.type]==="Polygon"){for(var Wn=[],Qn=[],ui=He.vertexLength,ci=0,mi=Kt;ci<mi.length;ci+=1){var _i=mi[ci];if(_i.length!==0){_i!==Kt[0]&&Qn.push(Wn.length/2);for(var ki=0;ki<_i.length;ki++){var yi=_i[ki];pf(this.layoutVertexArray,yi.x,yi.y,0,0,1,1,0),Wn.push(yi.x),Wn.push(yi.y)}}}for(var xi=ah(Wn,Qn),ji=0;ji<xi.length;ji+=3)this.indexArray.emplaceBack(ui+xi[ji],ui+xi[ji+2],ui+xi[ji+1]);He.primitiveLength+=xi.length/3,He.vertexLength+=oe}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,m,j,dt,lt)},st("FillExtrusionBucket",pl,{omit:["layers","features"]});function v0(m,D){return m.x===D.x&&(m.x<0||m.x>Ii)||m.y===D.y&&(m.y<0||m.y>Ii)}function g0(m){return m.every(function(D){return D.x<0})||m.every(function(D){return D.x>Ii})||m.every(function(D){return D.y<0})||m.every(function(D){return D.y>Ii})}var m0=new Oa({"fill-extrusion-opacity":new oi(Ue["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new pi(Ue["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new oi(Ue["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new oi(Ue["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new oa(Ue["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new pi(Ue["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new pi(Ue["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new oi(Ue["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),y0={paint:m0},x0=function(m){function D(j){m.call(this,j,y0)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.createBucket=function(j){return new pl(j)},D.prototype.queryRadius=function(){return Es(this.paint.get("fill-extrusion-translate"))},D.prototype.is3D=function(){return!0},D.prototype.queryIntersectsFeature=function(j,lt,dt,_t,Lt,Kt,oe,me){var Ee=Lo(j,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Kt.angle,oe),Ne=this.paint.get("fill-extrusion-height").evaluate(lt,dt),He=this.paint.get("fill-extrusion-base").evaluate(lt,dt),er=w0(Ee,me,Kt,0),yr=_0(_t,He,Ne,me),zr=yr[0],un=yr[1];return b0(zr,un,er)},D}(pa);function df(m,D){return m.x*D.x+m.y*D.y}function Yh(m,D){if(m.length===1){for(var j=0,lt=D[j++],dt;!dt||lt.equals(dt);)if(dt=D[j++],!dt)return 1/0;for(;j<D.length;j++){var _t=D[j],Lt=m[0],Kt=dt.sub(lt),oe=_t.sub(lt),me=Lt.sub(lt),Ee=df(Kt,Kt),Ne=df(Kt,oe),He=df(oe,oe),er=df(me,Kt),yr=df(me,oe),zr=Ee*He-Ne*Ne,un=(He*er-Ne*yr)/zr,Kr=(Ee*yr-Ne*er)/zr,vn=1-un-Kr,bn=lt.z*vn+dt.z*un+_t.z*Kr;if(isFinite(bn))return bn}return 1/0}else{for(var pn=1/0,Ln=0,Bn=D;Ln<Bn.length;Ln+=1){var Wn=Bn[Ln];pn=Math.min(pn,Wn.z)}return pn}}function b0(m,D,j){var lt=1/0;Fa(j,D)&&(lt=Yh(j,D[0]));for(var dt=0;dt<D.length;dt++)for(var _t=D[dt],Lt=m[dt],Kt=0;Kt<_t.length-1;Kt++){var oe=_t[Kt],me=_t[Kt+1],Ee=Lt[Kt],Ne=Lt[Kt+1],He=[oe,me,Ne,Ee,oe];Ni(j,He)&&(lt=Math.min(lt,Yh(j,He)))}return lt===1/0?!1:lt}function _0(m,D,j,lt){for(var dt=[],_t=[],Lt=lt[8]*D,Kt=lt[9]*D,oe=lt[10]*D,me=lt[11]*D,Ee=lt[8]*j,Ne=lt[9]*j,He=lt[10]*j,er=lt[11]*j,yr=0,zr=m;yr<zr.length;yr+=1){for(var un=zr[yr],Kr=[],vn=[],bn=0,pn=un;bn<pn.length;bn+=1){var Ln=pn[bn],Bn=Ln.x,Wn=Ln.y,Qn=lt[0]*Bn+lt[4]*Wn+lt[12],ui=lt[1]*Bn+lt[5]*Wn+lt[13],ci=lt[2]*Bn+lt[6]*Wn+lt[14],mi=lt[3]*Bn+lt[7]*Wn+lt[15],_i=Qn+Lt,ki=ui+Kt,yi=ci+oe,xi=mi+me,ji=Qn+Ee,ra=ui+Ne,fa=ci+He,Vi=mi+er,na=new e(_i/xi,ki/xi);na.z=yi/xi,Kr.push(na);var Ui=new e(ji/Vi,ra/Vi);Ui.z=fa/Vi,vn.push(Ui)}dt.push(Kr),_t.push(vn)}return[dt,_t]}function w0(m,D,j,lt){for(var dt=[],_t=0,Lt=m;_t<Lt.length;_t+=1){var Kt=Lt[_t],oe=[Kt.x,Kt.y,lt,1];Ef(oe,oe,D),dt.push(new e(oe[0]/oe[3],oe[1]/oe[3]))}return dt}var A0=sa([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),Xh=A0.members,T0=jc.VectorTileFeature.types,Kh=63,k0=Math.cos(75/2*(Math.PI/180)),M0=15,S0=20,L0=15,Jh=1/2,Qh=Math.pow(2,L0-1)/Jh,Vo=function(m){this.zoom=m.zoom,this.overscaling=m.overscaling,this.layers=m.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=m.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Pc,this.indexArray=new cl,this.programConfigurations=new Di(Xh,m.layers,m.zoom),this.segments=new tt,this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};Vo.prototype.populate=function(m,D,j){this.hasPattern=ch("line",this.layers,D);for(var lt=this.layers[0].layout.get("line-sort-key"),dt=[],_t=0,Lt=m;_t<Lt.length;_t+=1){var Kt=Lt[_t],oe=Kt.feature,me=Kt.id,Ee=Kt.index,Ne=Kt.sourceLayerIndex,He=this.layers[0]._featureFilter.needGeometry,er={type:oe.type,id:me,properties:oe.properties,geometry:He?Fi(oe):[]};if(this.layers[0]._featureFilter.filter(new In(this.zoom),er,j)){He||(er.geometry=Fi(oe));var yr=lt?lt.evaluate(er,{},j):void 0,zr={id:me,properties:oe.properties,type:oe.type,sourceLayerIndex:Ne,index:Ee,geometry:er.geometry,patterns:{},sortKey:yr};dt.push(zr)}}lt&&dt.sort(function(ui,ci){return ui.sortKey-ci.sortKey});for(var un=0,Kr=dt;un<Kr.length;un+=1){var vn=Kr[un],bn=vn,pn=bn.geometry,Ln=bn.index,Bn=bn.sourceLayerIndex;if(this.hasPattern){var Wn=fh("line",this.layers,vn,this.zoom,D);this.patternFeatures.push(Wn)}else this.addFeature(vn,pn,Ln,j,{});var Qn=m[Ln].feature;D.featureIndex.insert(Qn,pn,Ln,Bn,this.index)}},Vo.prototype.update=function(m,D,j){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(m,D,this.stateDependentLayers,j)},Vo.prototype.addFeatures=function(m,D,j){for(var lt=0,dt=this.patternFeatures;lt<dt.length;lt+=1){var _t=dt[lt];this.addFeature(_t,_t.geometry,_t.index,D,j)}},Vo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Vo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Vo.prototype.upload=function(m){this.uploaded||(this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,Xh),this.indexBuffer=m.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(m),this.uploaded=!0},Vo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Vo.prototype.addFeature=function(m,D,j,lt,dt){for(var _t=this.layers[0].layout,Lt=_t.get("line-join").evaluate(m,{}),Kt=_t.get("line-cap"),oe=_t.get("line-miter-limit"),me=_t.get("line-round-limit"),Ee=0,Ne=D;Ee<Ne.length;Ee+=1){var He=Ne[Ee];this.addLine(He,m,Lt,Kt,oe,me)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,m,j,dt,lt)},Vo.prototype.addLine=function(m,D,j,lt,dt,_t){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,D.properties&&D.properties.hasOwnProperty("mapbox_clip_start")&&D.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+D.properties.mapbox_clip_start,this.clipEnd=+D.properties.mapbox_clip_end;for(var Lt=0;Lt<m.length-1;Lt++)this.totalDistance+=m[Lt].dist(m[Lt+1]);this.updateScaledDistance()}for(var Kt=T0[D.type]==="Polygon",oe=m.length;oe>=2&&m[oe-1].equals(m[oe-2]);)oe--;for(var me=0;me<oe-1&&m[me].equals(m[me+1]);)me++;if(!(oe<(Kt?3:2))){j==="bevel"&&(dt=1.05);var Ee=this.overscaling<=16?M0*Ii/(512*this.overscaling):0,Ne=this.segments.prepareSegment(oe*10,this.layoutVertexArray,this.indexArray),He,er=void 0,yr=void 0,zr=void 0,un=void 0;this.e1=this.e2=-1,Kt&&(He=m[oe-2],un=m[me].sub(He)._unit()._perp());for(var Kr=me;Kr<oe;Kr++)if(yr=Kr===oe-1?Kt?m[me+1]:void 0:m[Kr+1],!(yr&&m[Kr].equals(yr))){un&&(zr=un),He&&(er=He),He=m[Kr],un=yr?yr.sub(He)._unit()._perp():zr,zr=zr||un;var vn=zr.add(un);(vn.x!==0||vn.y!==0)&&vn._unit();var bn=zr.x*un.x+zr.y*un.y,pn=vn.x*un.x+vn.y*un.y,Ln=pn!==0?1/pn:1/0,Bn=2*Math.sqrt(2-2*pn),Wn=pn<k0&&er&&yr,Qn=zr.x*un.y-zr.y*un.x>0;if(Wn&&Kr>me){var ui=He.dist(er);if(ui>2*Ee){var ci=He.sub(He.sub(er)._mult(Ee/ui)._round());this.updateDistance(er,ci),this.addCurrentVertex(ci,zr,0,0,Ne),er=ci}}var mi=er&&yr,_i=mi?j:Kt?"butt":lt;if(mi&&_i==="round"&&(Ln<_t?_i="miter":Ln<=2&&(_i="fakeround")),_i==="miter"&&Ln>dt&&(_i="bevel"),_i==="bevel"&&(Ln>2&&(_i="flipbevel"),Ln<dt&&(_i="miter")),er&&this.updateDistance(er,He),_i==="miter")vn._mult(Ln),this.addCurrentVertex(He,vn,0,0,Ne);else if(_i==="flipbevel"){if(Ln>100)vn=un.mult(-1);else{var ki=Ln*zr.add(un).mag()/zr.sub(un).mag();vn._perp()._mult(ki*(Qn?-1:1))}this.addCurrentVertex(He,vn,0,0,Ne),this.addCurrentVertex(He,vn.mult(-1),0,0,Ne)}else if(_i==="bevel"||_i==="fakeround"){var yi=-Math.sqrt(Ln*Ln-1),xi=Qn?yi:0,ji=Qn?0:yi;if(er&&this.addCurrentVertex(He,zr,xi,ji,Ne),_i==="fakeround")for(var ra=Math.round(Bn*180/Math.PI/S0),fa=1;fa<ra;fa++){var Vi=fa/ra;if(Vi!==.5){var na=Vi-.5,Ui=1.0904+bn*(-3.2452+bn*(3.55645-bn*1.43519)),ma=.848013+bn*(-1.06021+bn*.215638);Vi=Vi+Vi*na*(Vi-1)*(Ui*na*na+ma)}var la=un.sub(zr)._mult(Vi)._add(zr)._unit()._mult(Qn?-1:1);this.addHalfVertex(He,la.x,la.y,!1,Qn,0,Ne)}yr&&this.addCurrentVertex(He,un,-xi,-ji,Ne)}else if(_i==="butt")this.addCurrentVertex(He,vn,0,0,Ne);else if(_i==="square"){var La=er?1:-1;this.addCurrentVertex(He,vn,La,La,Ne)}else _i==="round"&&(er&&(this.addCurrentVertex(He,zr,0,0,Ne),this.addCurrentVertex(He,zr,1,1,Ne,!0)),yr&&(this.addCurrentVertex(He,un,-1,-1,Ne,!0),this.addCurrentVertex(He,un,0,0,Ne)));if(Wn&&Kr<oe-1){var no=He.dist(yr);if(no>2*Ee){var ja=He.add(yr.sub(He)._mult(Ee/no)._round());this.updateDistance(He,ja),this.addCurrentVertex(ja,un,0,0,Ne),He=ja}}}}},Vo.prototype.addCurrentVertex=function(m,D,j,lt,dt,_t){_t===void 0&&(_t=!1);var Lt=D.x+D.y*j,Kt=D.y-D.x*j,oe=-D.x+D.y*lt,me=-D.y-D.x*lt;this.addHalfVertex(m,Lt,Kt,_t,!1,j,dt),this.addHalfVertex(m,oe,me,_t,!0,-lt,dt),this.distance>Qh/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(m,D,j,lt,dt,_t))},Vo.prototype.addHalfVertex=function(m,D,j,lt,dt,_t,Lt){var Kt=m.x,oe=m.y,me=this.scaledDistance*Jh;this.layoutVertexArray.emplaceBack((Kt<<1)+(lt?1:0),(oe<<1)+(dt?1:0),Math.round(Kh*D)+128,Math.round(Kh*j)+128,(_t===0?0:_t<0?-1:1)+1|(me&63)<<2,me>>6);var Ee=Lt.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ee),Lt.primitiveLength++),dt?this.e2=Ee:this.e1=Ee},Vo.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Qh-1):this.distance},Vo.prototype.updateDistance=function(m,D){this.distance+=m.dist(D),this.updateScaledDistance()},st("LineBucket",Vo,{omit:["layers","patternFeatures"]});var P0=new Oa({"line-cap":new oi(Ue.layout_line["line-cap"]),"line-join":new pi(Ue.layout_line["line-join"]),"line-miter-limit":new oi(Ue.layout_line["line-miter-limit"]),"line-round-limit":new oi(Ue.layout_line["line-round-limit"]),"line-sort-key":new pi(Ue.layout_line["line-sort-key"])}),E0=new Oa({"line-opacity":new pi(Ue.paint_line["line-opacity"]),"line-color":new pi(Ue.paint_line["line-color"]),"line-translate":new oi(Ue.paint_line["line-translate"]),"line-translate-anchor":new oi(Ue.paint_line["line-translate-anchor"]),"line-width":new pi(Ue.paint_line["line-width"]),"line-gap-width":new pi(Ue.paint_line["line-gap-width"]),"line-offset":new pi(Ue.paint_line["line-offset"]),"line-blur":new pi(Ue.paint_line["line-blur"]),"line-dasharray":new Aa(Ue.paint_line["line-dasharray"]),"line-pattern":new oa(Ue.paint_line["line-pattern"]),"line-gradient":new so(Ue.paint_line["line-gradient"])}),$h={paint:E0,layout:P0},C0=function(m){function D(){m.apply(this,arguments)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.possiblyEvaluate=function(j,lt){return lt=new In(Math.floor(lt.zoom),{now:lt.now,fadeDuration:lt.fadeDuration,zoomHistory:lt.zoomHistory,transition:lt.transition}),m.prototype.possiblyEvaluate.call(this,j,lt)},D.prototype.evaluate=function(j,lt,dt,_t){return lt=u({},lt,{zoom:Math.floor(lt.zoom)}),m.prototype.evaluate.call(this,j,lt,dt,_t)},D}(pi),tp=new C0($h.paint.properties["line-width"].specification);tp.useIntegerZoom=!0;var O0=function(m){function D(j){m.call(this,j,$h)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype._handleSpecialPaintPropertyUpdate=function(j){j==="line-gradient"&&this._updateGradient()},D.prototype._updateGradient=function(){var j=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Rh(j,"lineProgress"),this.gradientTexture=null},D.prototype.recalculate=function(j,lt){m.prototype.recalculate.call(this,j,lt),this.paint._values["line-floorwidth"]=tp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,j)},D.prototype.createBucket=function(j){return new Vo(j)},D.prototype.queryRadius=function(j){var lt=j,dt=ep(Ps("line-width",this,lt),Ps("line-gap-width",this,lt)),_t=Ps("line-offset",this,lt);return dt/2+Math.abs(_t)+Es(this.paint.get("line-translate"))},D.prototype.queryIntersectsFeature=function(j,lt,dt,_t,Lt,Kt,oe){var me=Lo(j,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Kt.angle,oe),Ee=oe/2*ep(this.paint.get("line-width").evaluate(lt,dt),this.paint.get("line-gap-width").evaluate(lt,dt)),Ne=this.paint.get("line-offset").evaluate(lt,dt);return Ne&&(_t=I0(_t,Ne*oe)),ds(me,_t,Ee)},D.prototype.isTileClipped=function(){return!0},D}(pa);function ep(m,D){return D>0?D+2*m:m}function I0(m,D){for(var j=[],lt=new e(0,0),dt=0;dt<m.length;dt++){for(var _t=m[dt],Lt=[],Kt=0;Kt<_t.length;Kt++){var oe=_t[Kt-1],me=_t[Kt],Ee=_t[Kt+1],Ne=Kt===0?lt:me.sub(oe)._unit()._perp(),He=Kt===_t.length-1?lt:Ee.sub(me)._unit()._perp(),er=Ne._add(He)._unit(),yr=er.x*He.x+er.y*He.y;er._mult(1/yr),Lt.push(er._mult(D)._add(me))}j.push(Lt)}return j}var ph=sa([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),z0=sa([{name:"a_projected_pos",components:3,type:"Float32"}],4);sa([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var D0=sa([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);sa([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var rp=sa([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),F0=sa([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);sa([{name:"triangle",components:3,type:"Uint16"}]),sa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),sa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),sa([{type:"Float32",name:"offsetX"}]),sa([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function R0(m,D,j){var lt=D.layout.get("text-transform").evaluate(j,{});return lt==="uppercase"?m=m.toLocaleUpperCase():lt==="lowercase"&&(m=m.toLocaleLowerCase()),Gi.applyArabicShaping&&(m=Gi.applyArabicShaping(m)),m}function B0(m,D,j){return m.sections.forEach(function(lt){lt.text=R0(lt.text,D,j)}),m}function N0(m){var D={},j={},lt=[],dt=0;function _t(Kr){lt.push(m[Kr]),dt++}function Lt(Kr,vn,bn){var pn=j[Kr];return delete j[Kr],j[vn]=pn,lt[pn].geometry[0].pop(),lt[pn].geometry[0]=lt[pn].geometry[0].concat(bn[0]),pn}function Kt(Kr,vn,bn){var pn=D[vn];return delete D[vn],D[Kr]=pn,lt[pn].geometry[0].shift(),lt[pn].geometry[0]=bn[0].concat(lt[pn].geometry[0]),pn}function oe(Kr,vn,bn){var pn=bn?vn[0][vn[0].length-1]:vn[0][0];return Kr+":"+pn.x+":"+pn.y}for(var me=0;me<m.length;me++){var Ee=m[me],Ne=Ee.geometry,He=Ee.text?Ee.text.toString():null;if(!He){_t(me);continue}var er=oe(He,Ne),yr=oe(He,Ne,!0);if(er in j&&yr in D&&j[er]!==D[yr]){var zr=Kt(er,yr,Ne),un=Lt(er,yr,lt[zr].geometry);delete D[er],delete j[yr],j[oe(He,lt[un].geometry,!0)]=un,lt[zr].geometry=null}else er in j?Lt(er,yr,Ne):yr in D?Kt(er,yr,Ne):(_t(me),D[er]=dt-1,j[yr]=dt-1)}return lt.filter(function(Kr){return Kr.geometry})}var vf={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function j0(m){for(var D="",j=0;j<m.length;j++){var lt=m.charCodeAt(j+1)||null,dt=m.charCodeAt(j-1)||null,_t=(!lt||!Gr(lt)||vf[m[j+1]])&&(!dt||!Gr(dt)||vf[m[j-1]]);_t&&vf[m[j]]?D+=vf[m[j]]:D+=m[j]}return D}var ro=24,U0=function(m,D,j,lt,dt){var _t,Lt,Kt=dt*8-lt-1,oe=(1<<Kt)-1,me=oe>>1,Ee=-7,Ne=j?dt-1:0,He=j?-1:1,er=m[D+Ne];for(Ne+=He,_t=er&(1<<-Ee)-1,er>>=-Ee,Ee+=Kt;Ee>0;_t=_t*256+m[D+Ne],Ne+=He,Ee-=8);for(Lt=_t&(1<<-Ee)-1,_t>>=-Ee,Ee+=lt;Ee>0;Lt=Lt*256+m[D+Ne],Ne+=He,Ee-=8);if(_t===0)_t=1-me;else{if(_t===oe)return Lt?NaN:(er?-1:1)*(1/0);Lt=Lt+Math.pow(2,lt),_t=_t-me}return(er?-1:1)*Lt*Math.pow(2,_t-lt)},Z0=function(m,D,j,lt,dt,_t){var Lt,Kt,oe,me=_t*8-dt-1,Ee=(1<<me)-1,Ne=Ee>>1,He=dt===23?Math.pow(2,-24)-Math.pow(2,-77):0,er=lt?0:_t-1,yr=lt?1:-1,zr=D<0||D===0&&1/D<0?1:0;for(D=Math.abs(D),isNaN(D)||D===1/0?(Kt=isNaN(D)?1:0,Lt=Ee):(Lt=Math.floor(Math.log(D)/Math.LN2),D*(oe=Math.pow(2,-Lt))<1&&(Lt--,oe*=2),Lt+Ne>=1?D+=He/oe:D+=He*Math.pow(2,1-Ne),D*oe>=2&&(Lt++,oe/=2),Lt+Ne>=Ee?(Kt=0,Lt=Ee):Lt+Ne>=1?(Kt=(D*oe-1)*Math.pow(2,dt),Lt=Lt+Ne):(Kt=D*Math.pow(2,Ne-1)*Math.pow(2,dt),Lt=0));dt>=8;m[j+er]=Kt&255,er+=yr,Kt/=256,dt-=8);for(Lt=Lt<<dt|Kt,me+=dt;me>0;m[j+er]=Lt&255,er+=yr,Lt/=256,me-=8);m[j+er-yr]|=zr*128},Df={read:U0,write:Z0},Ff=da;function da(m){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(m)?m:new Uint8Array(m||0),this.pos=0,this.type=0,this.length=this.buf.length}da.Varint=0,da.Fixed64=1,da.Bytes=2,da.Fixed32=5;var dh=65536*65536,np=1/dh,q0=12,ip=typeof TextDecoder>"u"?null:new TextDecoder("utf8");da.prototype={destroy:function(){this.buf=null},readFields:function(m,D,j){for(j=j||this.length;this.pos<j;){var lt=this.readVarint(),dt=lt>>3,_t=this.pos;this.type=lt&7,m(dt,D,this),this.pos===_t&&this.skip(lt)}return D},readMessage:function(m,D){return this.readFields(m,D,this.readVarint()+this.pos)},readFixed32:function(){var m=Rf(this.buf,this.pos);return this.pos+=4,m},readSFixed32:function(){var m=op(this.buf,this.pos);return this.pos+=4,m},readFixed64:function(){var m=Rf(this.buf,this.pos)+Rf(this.buf,this.pos+4)*dh;return this.pos+=8,m},readSFixed64:function(){var m=Rf(this.buf,this.pos)+op(this.buf,this.pos+4)*dh;return this.pos+=8,m},readFloat:function(){var m=Df.read(this.buf,this.pos,!0,23,4);return this.pos+=4,m},readDouble:function(){var m=Df.read(this.buf,this.pos,!0,52,8);return this.pos+=8,m},readVarint:function(m){var D=this.buf,j,lt;return lt=D[this.pos++],j=lt&127,lt<128||(lt=D[this.pos++],j|=(lt&127)<<7,lt<128)||(lt=D[this.pos++],j|=(lt&127)<<14,lt<128)||(lt=D[this.pos++],j|=(lt&127)<<21,lt<128)?j:(lt=D[this.pos],j|=(lt&15)<<28,V0(j,m,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var m=this.readVarint();return m%2===1?(m+1)/-2:m/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var m=this.readVarint()+this.pos,D=this.pos;return this.pos=m,m-D>=q0&&ip?a1(this.buf,D,m):i1(this.buf,D,m)},readBytes:function(){var m=this.readVarint()+this.pos,D=this.buf.subarray(this.pos,m);return this.pos=m,D},readPackedVarint:function(m,D){if(this.type!==da.Bytes)return m.push(this.readVarint(D));var j=vu(this);for(m=m||[];this.pos<j;)m.push(this.readVarint(D));return m},readPackedSVarint:function(m){if(this.type!==da.Bytes)return m.push(this.readSVarint());var D=vu(this);for(m=m||[];this.pos<D;)m.push(this.readSVarint());return m},readPackedBoolean:function(m){if(this.type!==da.Bytes)return m.push(this.readBoolean());var D=vu(this);for(m=m||[];this.pos<D;)m.push(this.readBoolean());return m},readPackedFloat:function(m){if(this.type!==da.Bytes)return m.push(this.readFloat());var D=vu(this);for(m=m||[];this.pos<D;)m.push(this.readFloat());return m},readPackedDouble:function(m){if(this.type!==da.Bytes)return m.push(this.readDouble());var D=vu(this);for(m=m||[];this.pos<D;)m.push(this.readDouble());return m},readPackedFixed32:function(m){if(this.type!==da.Bytes)return m.push(this.readFixed32());var D=vu(this);for(m=m||[];this.pos<D;)m.push(this.readFixed32());return m},readPackedSFixed32:function(m){if(this.type!==da.Bytes)return m.push(this.readSFixed32());var D=vu(this);for(m=m||[];this.pos<D;)m.push(this.readSFixed32());return m},readPackedFixed64:function(m){if(this.type!==da.Bytes)return m.push(this.readFixed64());var D=vu(this);for(m=m||[];this.pos<D;)m.push(this.readFixed64());return m},readPackedSFixed64:function(m){if(this.type!==da.Bytes)return m.push(this.readSFixed64());var D=vu(this);for(m=m||[];this.pos<D;)m.push(this.readSFixed64());return m},skip:function(m){var D=m&7;if(D===da.Varint)for(;this.buf[this.pos++]>127;);else if(D===da.Bytes)this.pos=this.readVarint()+this.pos;else if(D===da.Fixed32)this.pos+=4;else if(D===da.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+D)},writeTag:function(m,D){this.writeVarint(m<<3|D)},realloc:function(m){for(var D=this.length||16;D<this.pos+m;)D*=2;if(D!==this.length){var j=new Uint8Array(D);j.set(this.buf),this.buf=j,this.length=D}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(m){this.realloc(4),Uc(this.buf,m,this.pos),this.pos+=4},writeSFixed32:function(m){this.realloc(4),Uc(this.buf,m,this.pos),this.pos+=4},writeFixed64:function(m){this.realloc(8),Uc(this.buf,m&-1,this.pos),Uc(this.buf,Math.floor(m*np),this.pos+4),this.pos+=8},writeSFixed64:function(m){this.realloc(8),Uc(this.buf,m&-1,this.pos),Uc(this.buf,Math.floor(m*np),this.pos+4),this.pos+=8},writeVarint:function(m){if(m=+m||0,m>268435455||m<0){G0(m,this);return}this.realloc(4),this.buf[this.pos++]=m&127|(m>127?128:0),!(m<=127)&&(this.buf[this.pos++]=(m>>>=7)&127|(m>127?128:0),!(m<=127)&&(this.buf[this.pos++]=(m>>>=7)&127|(m>127?128:0),!(m<=127)&&(this.buf[this.pos++]=m>>>7&127)))},writeSVarint:function(m){this.writeVarint(m<0?-m*2-1:m*2)},writeBoolean:function(m){this.writeVarint(!!m)},writeString:function(m){m=String(m),this.realloc(m.length*4),this.pos++;var D=this.pos;this.pos=o1(this.buf,m,this.pos);var j=this.pos-D;j>=128&&ap(D,j,this),this.pos=D-1,this.writeVarint(j),this.pos+=j},writeFloat:function(m){this.realloc(4),Df.write(this.buf,m,this.pos,!0,23,4),this.pos+=4},writeDouble:function(m){this.realloc(8),Df.write(this.buf,m,this.pos,!0,52,8),this.pos+=8},writeBytes:function(m){var D=m.length;this.writeVarint(D),this.realloc(D);for(var j=0;j<D;j++)this.buf[this.pos++]=m[j]},writeRawMessage:function(m,D){this.pos++;var j=this.pos;m(D,this);var lt=this.pos-j;lt>=128&&ap(j,lt,this),this.pos=j-1,this.writeVarint(lt),this.pos+=lt},writeMessage:function(m,D,j){this.writeTag(m,da.Bytes),this.writeRawMessage(D,j)},writePackedVarint:function(m,D){D.length&&this.writeMessage(m,X0,D)},writePackedSVarint:function(m,D){D.length&&this.writeMessage(m,K0,D)},writePackedBoolean:function(m,D){D.length&&this.writeMessage(m,$0,D)},writePackedFloat:function(m,D){D.length&&this.writeMessage(m,J0,D)},writePackedDouble:function(m,D){D.length&&this.writeMessage(m,Q0,D)},writePackedFixed32:function(m,D){D.length&&this.writeMessage(m,t1,D)},writePackedSFixed32:function(m,D){D.length&&this.writeMessage(m,e1,D)},writePackedFixed64:function(m,D){D.length&&this.writeMessage(m,r1,D)},writePackedSFixed64:function(m,D){D.length&&this.writeMessage(m,n1,D)},writeBytesField:function(m,D){this.writeTag(m,da.Bytes),this.writeBytes(D)},writeFixed32Field:function(m,D){this.writeTag(m,da.Fixed32),this.writeFixed32(D)},writeSFixed32Field:function(m,D){this.writeTag(m,da.Fixed32),this.writeSFixed32(D)},writeFixed64Field:function(m,D){this.writeTag(m,da.Fixed64),this.writeFixed64(D)},writeSFixed64Field:function(m,D){this.writeTag(m,da.Fixed64),this.writeSFixed64(D)},writeVarintField:function(m,D){this.writeTag(m,da.Varint),this.writeVarint(D)},writeSVarintField:function(m,D){this.writeTag(m,da.Varint),this.writeSVarint(D)},writeStringField:function(m,D){this.writeTag(m,da.Bytes),this.writeString(D)},writeFloatField:function(m,D){this.writeTag(m,da.Fixed32),this.writeFloat(D)},writeDoubleField:function(m,D){this.writeTag(m,da.Fixed64),this.writeDouble(D)},writeBooleanField:function(m,D){this.writeVarintField(m,!!D)}};function V0(m,D,j){var lt=j.buf,dt,_t;if(_t=lt[j.pos++],dt=(_t&112)>>4,_t<128||(_t=lt[j.pos++],dt|=(_t&127)<<3,_t<128)||(_t=lt[j.pos++],dt|=(_t&127)<<10,_t<128)||(_t=lt[j.pos++],dt|=(_t&127)<<17,_t<128)||(_t=lt[j.pos++],dt|=(_t&127)<<24,_t<128)||(_t=lt[j.pos++],dt|=(_t&1)<<31,_t<128))return H0(m,dt,D);throw new Error("Expected varint not more than 10 bytes")}function vu(m){return m.type===da.Bytes?m.readVarint()+m.pos:m.pos+1}function H0(m,D,j){return j?D*4294967296+(m>>>0):(D>>>0)*4294967296+(m>>>0)}function G0(m,D){var j,lt;if(m>=0?(j=m%4294967296|0,lt=m/4294967296|0):(j=~(-m%4294967296),lt=~(-m/4294967296),j^4294967295?j=j+1|0:(j=0,lt=lt+1|0)),m>=18446744073709552e3||m<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");D.realloc(10),W0(j,lt,D),Y0(lt,D)}function W0(m,D,j){j.buf[j.pos++]=m&127|128,m>>>=7,j.buf[j.pos++]=m&127|128,m>>>=7,j.buf[j.pos++]=m&127|128,m>>>=7,j.buf[j.pos++]=m&127|128,m>>>=7,j.buf[j.pos]=m&127}function Y0(m,D){var j=(m&7)<<4;D.buf[D.pos++]|=j|((m>>>=3)?128:0),m&&(D.buf[D.pos++]=m&127|((m>>>=7)?128:0),m&&(D.buf[D.pos++]=m&127|((m>>>=7)?128:0),m&&(D.buf[D.pos++]=m&127|((m>>>=7)?128:0),m&&(D.buf[D.pos++]=m&127|((m>>>=7)?128:0),m&&(D.buf[D.pos++]=m&127)))))}function ap(m,D,j){var lt=D<=16383?1:D<=2097151?2:D<=268435455?3:Math.floor(Math.log(D)/(Math.LN2*7));j.realloc(lt);for(var dt=j.pos-1;dt>=m;dt--)j.buf[dt+lt]=j.buf[dt]}function X0(m,D){for(var j=0;j<m.length;j++)D.writeVarint(m[j])}function K0(m,D){for(var j=0;j<m.length;j++)D.writeSVarint(m[j])}function J0(m,D){for(var j=0;j<m.length;j++)D.writeFloat(m[j])}function Q0(m,D){for(var j=0;j<m.length;j++)D.writeDouble(m[j])}function $0(m,D){for(var j=0;j<m.length;j++)D.writeBoolean(m[j])}function t1(m,D){for(var j=0;j<m.length;j++)D.writeFixed32(m[j])}function e1(m,D){for(var j=0;j<m.length;j++)D.writeSFixed32(m[j])}function r1(m,D){for(var j=0;j<m.length;j++)D.writeFixed64(m[j])}function n1(m,D){for(var j=0;j<m.length;j++)D.writeSFixed64(m[j])}function Rf(m,D){return(m[D]|m[D+1]<<8|m[D+2]<<16)+m[D+3]*16777216}function Uc(m,D,j){m[j]=D,m[j+1]=D>>>8,m[j+2]=D>>>16,m[j+3]=D>>>24}function op(m,D){return(m[D]|m[D+1]<<8|m[D+2]<<16)+(m[D+3]<<24)}function i1(m,D,j){for(var lt="",dt=D;dt<j;){var _t=m[dt],Lt=null,Kt=_t>239?4:_t>223?3:_t>191?2:1;if(dt+Kt>j)break;var oe,me,Ee;Kt===1?_t<128&&(Lt=_t):Kt===2?(oe=m[dt+1],(oe&192)===128&&(Lt=(_t&31)<<6|oe&63,Lt<=127&&(Lt=null))):Kt===3?(oe=m[dt+1],me=m[dt+2],(oe&192)===128&&(me&192)===128&&(Lt=(_t&15)<<12|(oe&63)<<6|me&63,(Lt<=2047||Lt>=55296&&Lt<=57343)&&(Lt=null))):Kt===4&&(oe=m[dt+1],me=m[dt+2],Ee=m[dt+3],(oe&192)===128&&(me&192)===128&&(Ee&192)===128&&(Lt=(_t&15)<<18|(oe&63)<<12|(me&63)<<6|Ee&63,(Lt<=65535||Lt>=1114112)&&(Lt=null))),Lt===null?(Lt=65533,Kt=1):Lt>65535&&(Lt-=65536,lt+=String.fromCharCode(Lt>>>10&1023|55296),Lt=56320|Lt&1023),lt+=String.fromCharCode(Lt),dt+=Kt}return lt}function a1(m,D,j){return ip.decode(m.subarray(D,j))}function o1(m,D,j){for(var lt=0,dt,_t;lt<D.length;lt++){if(dt=D.charCodeAt(lt),dt>55295&&dt<57344)if(_t)if(dt<56320){m[j++]=239,m[j++]=191,m[j++]=189,_t=dt;continue}else dt=_t-55296<<10|dt-56320|65536,_t=null;else{dt>56319||lt+1===D.length?(m[j++]=239,m[j++]=191,m[j++]=189):_t=dt;continue}else _t&&(m[j++]=239,m[j++]=191,m[j++]=189,_t=null);dt<128?m[j++]=dt:(dt<2048?m[j++]=dt>>6|192:(dt<65536?m[j++]=dt>>12|224:(m[j++]=dt>>18|240,m[j++]=dt>>12&63|128),m[j++]=dt>>6&63|128),m[j++]=dt&63|128)}return j}var vh=3;function s1(m,D,j){m===1&&j.readMessage(l1,D)}function l1(m,D,j){if(m===3){var lt=j.readMessage(u1,{}),dt=lt.id,_t=lt.bitmap,Lt=lt.width,Kt=lt.height,oe=lt.left,me=lt.top,Ee=lt.advance;D.push({id:dt,bitmap:new Tc({width:Lt+2*vh,height:Kt+2*vh},_t),metrics:{width:Lt,height:Kt,left:oe,top:me,advance:Ee}})}}function u1(m,D,j){m===1?D.id=j.readVarint():m===2?D.bitmap=j.readBytes():m===3?D.width=j.readVarint():m===4?D.height=j.readVarint():m===5?D.left=j.readSVarint():m===6?D.top=j.readSVarint():m===7&&(D.advance=j.readVarint())}function c1(m){return new Ff(m).readFields(s1,[])}var sp=vh;function lp(m){for(var D=0,j=0,lt=0,dt=m;lt<dt.length;lt+=1){var _t=dt[lt];D+=_t.w*_t.h,j=Math.max(j,_t.w)}m.sort(function(un,Kr){return Kr.h-un.h});for(var Lt=Math.max(Math.ceil(Math.sqrt(D/.95)),j),Kt=[{x:0,y:0,w:Lt,h:1/0}],oe=0,me=0,Ee=0,Ne=m;Ee<Ne.length;Ee+=1)for(var He=Ne[Ee],er=Kt.length-1;er>=0;er--){var yr=Kt[er];if(!(He.w>yr.w||He.h>yr.h)){if(He.x=yr.x,He.y=yr.y,me=Math.max(me,He.y+He.h),oe=Math.max(oe,He.x+He.w),He.w===yr.w&&He.h===yr.h){var zr=Kt.pop();er<Kt.length&&(Kt[er]=zr)}else He.h===yr.h?(yr.x+=He.w,yr.w-=He.w):He.w===yr.w?(yr.y+=He.h,yr.h-=He.h):(Kt.push({x:yr.x+He.w,y:yr.y,w:yr.w-He.w,h:He.h}),yr.y+=He.h,yr.h-=He.h);break}}return{w:oe,h:me,fill:D/(oe*me)||0}}var ns=1,Bf=function(m,D){var j=D.pixelRatio,lt=D.version,dt=D.stretchX,_t=D.stretchY,Lt=D.content;this.paddedRect=m,this.pixelRatio=j,this.stretchX=dt,this.stretchY=_t,this.content=Lt,this.version=lt},gf={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};gf.tl.get=function(){return[this.paddedRect.x+ns,this.paddedRect.y+ns]},gf.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-ns,this.paddedRect.y+this.paddedRect.h-ns]},gf.tlbr.get=function(){return this.tl.concat(this.br)},gf.displaySize.get=function(){return[(this.paddedRect.w-ns*2)/this.pixelRatio,(this.paddedRect.h-ns*2)/this.pixelRatio]},Object.defineProperties(Bf.prototype,gf);var mf=function(m,D){var j={},lt={};this.haveRenderCallbacks=[];var dt=[];this.addImages(m,j,dt),this.addImages(D,lt,dt);var _t=lp(dt),Lt=_t.w,Kt=_t.h,oe=new qo({width:Lt||1,height:Kt||1});for(var me in m){var Ee=m[me],Ne=j[me].paddedRect;qo.copy(Ee.data,oe,{x:0,y:0},{x:Ne.x+ns,y:Ne.y+ns},Ee.data)}for(var He in D){var er=D[He],yr=lt[He].paddedRect,zr=yr.x+ns,un=yr.y+ns,Kr=er.data.width,vn=er.data.height;qo.copy(er.data,oe,{x:0,y:0},{x:zr,y:un},er.data),qo.copy(er.data,oe,{x:0,y:vn-1},{x:zr,y:un-1},{width:Kr,height:1}),qo.copy(er.data,oe,{x:0,y:0},{x:zr,y:un+vn},{width:Kr,height:1}),qo.copy(er.data,oe,{x:Kr-1,y:0},{x:zr-1,y:un},{width:1,height:vn}),qo.copy(er.data,oe,{x:0,y:0},{x:zr+Kr,y:un},{width:1,height:vn})}this.image=oe,this.iconPositions=j,this.patternPositions=lt};mf.prototype.addImages=function(m,D,j){for(var lt in m){var dt=m[lt],_t={x:0,y:0,w:dt.data.width+2*ns,h:dt.data.height+2*ns};j.push(_t),D[lt]=new Bf(_t,dt),dt.hasRenderCallback&&this.haveRenderCallbacks.push(lt)}},mf.prototype.patchUpdatedImages=function(m,D){m.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var j in m.updatedImages)this.patchUpdatedImage(this.iconPositions[j],m.getImage(j),D),this.patchUpdatedImage(this.patternPositions[j],m.getImage(j),D)},mf.prototype.patchUpdatedImage=function(m,D,j){if(!(!m||!D)&&m.version!==D.version){m.version=D.version;var lt=m.tl,dt=lt[0],_t=lt[1];j.update(D.data,void 0,{x:dt,y:_t})}},st("ImagePosition",Bf),st("ImageAtlas",mf);var vs={horizontal:1,vertical:2,horizontalOnly:3},yf=-17;function f1(m){for(var D=0,j=m;D<j.length;D+=1){var lt=j[D];if(lt.positionedGlyphs.length!==0)return!1}return!0}var up=57344,cp=63743,Zc=function(){this.scale=1,this.fontStack="",this.imageName=null};Zc.forText=function(m,D){var j=new Zc;return j.scale=m||1,j.fontStack=D,j},Zc.forImage=function(m){var D=new Zc;return D.imageName=m,D};var yo=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};yo.fromFeature=function(m,D){for(var j=new yo,lt=0;lt<m.sections.length;lt++){var dt=m.sections[lt];dt.image?j.addImageSection(dt):j.addTextSection(dt,D)}return j},yo.prototype.length=function(){return this.text.length},yo.prototype.getSection=function(m){return this.sections[this.sectionIndex[m]]},yo.prototype.getSectionIndex=function(m){return this.sectionIndex[m]},yo.prototype.getCharCode=function(m){return this.text.charCodeAt(m)},yo.prototype.verticalizePunctuation=function(){this.text=j0(this.text)},yo.prototype.trim=function(){for(var m=0,D=0;D<this.text.length&&Zl[this.text.charCodeAt(D)];D++)m++;for(var j=this.text.length,lt=this.text.length-1;lt>=0&&lt>=m&&Zl[this.text.charCodeAt(lt)];lt--)j--;this.text=this.text.substring(m,j),this.sectionIndex=this.sectionIndex.slice(m,j)},yo.prototype.substring=function(m,D){var j=new yo;return j.text=this.text.substring(m,D),j.sectionIndex=this.sectionIndex.slice(m,D),j.sections=this.sections,j},yo.prototype.toString=function(){return this.text},yo.prototype.getMaxScale=function(){var m=this;return this.sectionIndex.reduce(function(D,j){return Math.max(D,m.sections[j].scale)},0)},yo.prototype.addTextSection=function(m,D){this.text+=m.text,this.sections.push(Zc.forText(m.scale,m.fontStack||D));for(var j=this.sections.length-1,lt=0;lt<m.text.length;++lt)this.sectionIndex.push(j)},yo.prototype.addImageSection=function(m){var D=m.image?m.image.name:"";if(D.length===0){B("Can't add FormattedSection with an empty image.");return}var j=this.getNextImageSectionCharCode();if(!j){B("Reached maximum number of images "+(cp-up+2));return}this.text+=String.fromCharCode(j),this.sections.push(Zc.forImage(D)),this.sectionIndex.push(this.sections.length-1)},yo.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=cp?null:++this.imageSectionID:(this.imageSectionID=up,this.imageSectionID)};function h1(m,D){for(var j=[],lt=m.text,dt=0,_t=0,Lt=D;_t<Lt.length;_t+=1){var Kt=Lt[_t];j.push(m.substring(dt,Kt)),dt=Kt}return dt<lt.length&&j.push(m.substring(dt,lt.length)),j}function Nf(m,D,j,lt,dt,_t,Lt,Kt,oe,me,Ee,Ne,He,er,yr,zr){var un=yo.fromFeature(m,dt);Ne===vs.vertical&&un.verticalizePunctuation();var Kr,vn=Gi.processBidirectionalText,bn=Gi.processStyledBidirectionalText;if(vn&&un.sections.length===1){Kr=[];for(var pn=vn(un.toString(),gh(un,me,_t,D,lt,er,yr)),Ln=0,Bn=pn;Ln<Bn.length;Ln+=1){var Wn=Bn[Ln],Qn=new yo;Qn.text=Wn,Qn.sections=un.sections;for(var ui=0;ui<Wn.length;ui++)Qn.sectionIndex.push(0);Kr.push(Qn)}}else if(bn){Kr=[];for(var ci=bn(un.text,un.sectionIndex,gh(un,me,_t,D,lt,er,yr)),mi=0,_i=ci;mi<_i.length;mi+=1){var ki=_i[mi],yi=new yo;yi.text=ki[0],yi.sectionIndex=ki[1],yi.sections=un.sections,Kr.push(yi)}}else Kr=h1(un,gh(un,me,_t,D,lt,er,yr));var xi=[],ji={positionedLines:xi,text:un.toString(),top:Ee[1],bottom:Ee[1],left:Ee[0],right:Ee[0],writingMode:Ne,iconsInText:!1,verticalizable:!1};return v1(ji,D,j,lt,Kr,Lt,Kt,oe,Ne,me,He,zr),f1(xi)?!1:ji}var Zl={};Zl[9]=!0,Zl[10]=!0,Zl[11]=!0,Zl[12]=!0,Zl[13]=!0,Zl[32]=!0;var is={};is[10]=!0,is[32]=!0,is[38]=!0,is[40]=!0,is[41]=!0,is[43]=!0,is[45]=!0,is[47]=!0,is[173]=!0,is[183]=!0,is[8203]=!0,is[8208]=!0,is[8211]=!0,is[8231]=!0;function fp(m,D,j,lt,dt,_t){if(D.imageName){var Lt=lt[D.imageName];return Lt?Lt.displaySize[0]*D.scale*ro/_t+dt:0}else{var Kt=j[D.fontStack],oe=Kt&&Kt[m];return oe?oe.metrics.advance*D.scale+dt:0}}function p1(m,D,j,lt,dt,_t){for(var Lt=0,Kt=0;Kt<m.length();Kt++){var oe=m.getSection(Kt);Lt+=fp(m.getCharCode(Kt),oe,lt,dt,D,_t)}var me=Math.max(1,Math.ceil(Lt/j));return Lt/me}function hp(m,D,j,lt){var dt=Math.pow(m-D,2);return lt?m<D?dt/2:dt*2:dt+Math.abs(j)*j}function d1(m,D,j){var lt=0;return m===10&&(lt-=1e4),j&&(lt+=150),(m===40||m===65288)&&(lt+=50),(D===41||D===65289)&&(lt+=50),lt}function pp(m,D,j,lt,dt,_t){for(var Lt=null,Kt=hp(D,j,dt,_t),oe=0,me=lt;oe<me.length;oe+=1){var Ee=me[oe],Ne=D-Ee.x,He=hp(Ne,j,dt,_t)+Ee.badness;He<=Kt&&(Lt=Ee,Kt=He)}return{index:m,x:D,priorBreak:Lt,badness:Kt}}function dp(m){return m?dp(m.priorBreak).concat(m.index):[]}function gh(m,D,j,lt,dt,_t,Lt){if(_t!=="point")return[];if(!m)return[];for(var Kt=[],oe=p1(m,D,j,lt,dt,Lt),me=m.text.indexOf("\u200B")>=0,Ee=0,Ne=0;Ne<m.length();Ne++){var He=m.getSection(Ne),er=m.getCharCode(Ne);if(Zl[er]||(Ee+=fp(er,He,lt,dt,D,Lt)),Ne<m.length()-1){var yr=vr(er);(is[er]||yr||He.imageName)&&Kt.push(pp(Ne+1,Ee,oe,Kt,d1(er,m.getCharCode(Ne+1),yr&&me),!1))}}return dp(pp(m.length(),Ee,oe,Kt,0,!0))}function mh(m){var D=.5,j=.5;switch(m){case"right":case"top-right":case"bottom-right":D=1;break;case"left":case"top-left":case"bottom-left":D=0;break}switch(m){case"bottom":case"bottom-right":case"bottom-left":j=1;break;case"top":case"top-right":case"top-left":j=0;break}return{horizontalAlign:D,verticalAlign:j}}function v1(m,D,j,lt,dt,_t,Lt,Kt,oe,me,Ee,Ne){for(var He=0,er=yf,yr=0,zr=0,un=Kt==="right"?1:Kt==="left"?0:.5,Kr=0,vn=0,bn=dt;vn<bn.length;vn+=1){var pn=bn[vn];pn.trim();var Ln=pn.getMaxScale(),Bn=(Ln-1)*ro,Wn={positionedGlyphs:[],lineOffset:0};m.positionedLines[Kr]=Wn;var Qn=Wn.positionedGlyphs,ui=0;if(!pn.length()){er+=_t,++Kr;continue}for(var ci=0;ci<pn.length();ci++){var mi=pn.getSection(ci),_i=pn.getSectionIndex(ci),ki=pn.getCharCode(ci),yi=0,xi=null,ji=null,ra=null,fa=ro,Vi=!(oe===vs.horizontal||!Ee&&!Ar(ki)||Ee&&(Zl[ki]||Tr(ki)));if(mi.imageName){var na=lt[mi.imageName];if(!na)continue;ra=mi.imageName,m.iconsInText=m.iconsInText||!0,ji=na.paddedRect;var Ui=na.displaySize;mi.scale=mi.scale*ro/Ne,xi={width:Ui[0],height:Ui[1],left:ns,top:-sp,advance:Vi?Ui[1]:Ui[0]};var ma=ro-Ui[1]*mi.scale;yi=Bn+ma,fa=xi.advance;var la=Vi?Ui[0]*mi.scale-ro*Ln:Ui[1]*mi.scale-ro*Ln;la>0&&la>ui&&(ui=la)}else{var La=j[mi.fontStack],no=La&&La[ki];if(no&&no.rect)ji=no.rect,xi=no.metrics;else{var ja=D[mi.fontStack],xo=ja&&ja[ki];if(!xo)continue;xi=xo.metrics}yi=(Ln-mi.scale)*ro}Vi?(m.verticalizable=!0,Qn.push({glyph:ki,imageName:ra,x:He,y:er+yi,vertical:Vi,scale:mi.scale,fontStack:mi.fontStack,sectionIndex:_i,metrics:xi,rect:ji}),He+=fa*mi.scale+me):(Qn.push({glyph:ki,imageName:ra,x:He,y:er+yi,vertical:Vi,scale:mi.scale,fontStack:mi.fontStack,sectionIndex:_i,metrics:xi,rect:ji}),He+=xi.advance*mi.scale+me)}if(Qn.length!==0){var bo=He-me;yr=Math.max(bo,yr),g1(Qn,0,Qn.length-1,un,ui)}He=0;var _o=_t*Ln+ui;Wn.lineOffset=Math.max(ui,Bn),er+=_o,zr=Math.max(_o,zr),++Kr}var Ka=er-yf,Po=mh(Lt),Eo=Po.horizontalAlign,Ha=Po.verticalAlign;m1(m.positionedLines,un,Eo,Ha,yr,zr,_t,Ka,dt.length),m.top+=-Ha*Ka,m.bottom=m.top+Ka,m.left+=-Eo*yr,m.right=m.left+yr}function g1(m,D,j,lt,dt){if(!(!lt&&!dt))for(var _t=m[j],Lt=_t.metrics.advance*_t.scale,Kt=(m[j].x+Lt)*lt,oe=D;oe<=j;oe++)m[oe].x-=Kt,m[oe].y+=dt}function m1(m,D,j,lt,dt,_t,Lt,Kt,oe){var me=(D-j)*dt,Ee=0;_t!==Lt?Ee=-Kt*lt-yf:Ee=(-lt*oe+.5)*Lt;for(var Ne=0,He=m;Ne<He.length;Ne+=1)for(var er=He[Ne],yr=0,zr=er.positionedGlyphs;yr<zr.length;yr+=1){var un=zr[yr];un.x+=me,un.y+=Ee}}function y1(m,D,j){var lt=mh(j),dt=lt.horizontalAlign,_t=lt.verticalAlign,Lt=D[0],Kt=D[1],oe=Lt-m.displaySize[0]*dt,me=oe+m.displaySize[0],Ee=Kt-m.displaySize[1]*_t,Ne=Ee+m.displaySize[1];return{image:m,top:Ee,bottom:Ne,left:oe,right:me}}function vp(m,D,j,lt,dt,_t){var Lt=m.image,Kt;if(Lt.content){var oe=Lt.content,me=Lt.pixelRatio||1;Kt=[oe[0]/me,oe[1]/me,Lt.displaySize[0]-oe[2]/me,Lt.displaySize[1]-oe[3]/me]}var Ee=D.left*_t,Ne=D.right*_t,He,er,yr,zr;j==="width"||j==="both"?(zr=dt[0]+Ee-lt[3],er=dt[0]+Ne+lt[1]):(zr=dt[0]+(Ee+Ne-Lt.displaySize[0])/2,er=zr+Lt.displaySize[0]);var un=D.top*_t,Kr=D.bottom*_t;return j==="height"||j==="both"?(He=dt[1]+un-lt[0],yr=dt[1]+Kr+lt[2]):(He=dt[1]+(un+Kr-Lt.displaySize[1])/2,yr=He+Lt.displaySize[1]),{image:Lt,top:He,right:er,bottom:yr,left:zr,collisionPadding:Kt}}var qc=function(m){function D(j,lt,dt,_t){m.call(this,j,lt),this.angle=dt,_t!==void 0&&(this.segment=_t)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.clone=function(){return new D(this.x,this.y,this.angle,this.segment)},D}(e);st("Anchor",qc);var dl=128;function yh(m,D){var j=D.expression;if(j.kind==="constant"){var lt=j.evaluate(new In(m+1));return{kind:"constant",layoutSize:lt}}else{if(j.kind==="source")return{kind:"source"};for(var dt=j.zoomStops,_t=j.interpolationType,Lt=0;Lt<dt.length&&dt[Lt]<=m;)Lt++;Lt=Math.max(0,Lt-1);for(var Kt=Lt;Kt<dt.length&&dt[Kt]<m+1;)Kt++;Kt=Math.min(dt.length-1,Kt);var oe=dt[Lt],me=dt[Kt];if(j.kind==="composite")return{kind:"composite",minZoom:oe,maxZoom:me,interpolationType:_t};var Ee=j.evaluate(new In(oe)),Ne=j.evaluate(new In(me));return{kind:"camera",minZoom:oe,maxZoom:me,minSize:Ee,maxSize:Ne,interpolationType:_t}}}function gp(m,D,j){var lt=D.uSize,dt=D.uSizeT,_t=j.lowerSize,Lt=j.upperSize;return m.kind==="source"?_t/dl:m.kind==="composite"?xa(_t/dl,Lt/dl,dt):lt}function mp(m,D){var j=0,lt=0;if(m.kind==="constant")lt=m.layoutSize;else if(m.kind!=="source"){var dt=m.interpolationType,_t=m.minZoom,Lt=m.maxZoom,Kt=dt?h(_a.interpolationFactor(dt,D,_t,Lt),0,1):0;m.kind==="camera"?lt=xa(m.minSize,m.maxSize,Kt):j=Kt}return{uSizeT:j,uSize:lt}}var x1=Object.freeze({__proto__:null,getSizeData:yh,evaluateSizeForFeature:gp,evaluateSizeForZoom:mp,SIZE_PACK_FACTOR:dl});function yp(m,D,j,lt,dt){if(D.segment===void 0)return!0;for(var _t=D,Lt=D.segment+1,Kt=0;Kt>-j/2;){if(Lt--,Lt<0)return!1;Kt-=m[Lt].dist(_t),_t=m[Lt]}Kt+=m[Lt].dist(m[Lt+1]),Lt++;for(var oe=[],me=0;Kt<j/2;){var Ee=m[Lt-1],Ne=m[Lt],He=m[Lt+1];if(!He)return!1;var er=Ee.angleTo(Ne)-Ne.angleTo(He);for(er=Math.abs((er+3*Math.PI)%(Math.PI*2)-Math.PI),oe.push({distance:Kt,angleDelta:er}),me+=er;Kt-oe[0].distance>lt;)me-=oe.shift().angleDelta;if(me>dt)return!1;Lt++,Kt+=Ne.dist(He)}return!0}function xp(m){for(var D=0,j=0;j<m.length-1;j++)D+=m[j].dist(m[j+1]);return D}function bp(m,D,j){return m?.6*D*j:0}function _p(m,D){return Math.max(m?m.right-m.left:0,D?D.right-D.left:0)}function b1(m,D,j,lt,dt,_t){for(var Lt=bp(j,dt,_t),Kt=_p(j,lt)*_t,oe=0,me=xp(m)/2,Ee=0;Ee<m.length-1;Ee++){var Ne=m[Ee],He=m[Ee+1],er=Ne.dist(He);if(oe+er>me){var yr=(me-oe)/er,zr=xa(Ne.x,He.x,yr),un=xa(Ne.y,He.y,yr),Kr=new qc(zr,un,He.angleTo(Ne),Ee);return Kr._round(),!Lt||yp(m,Kr,Kt,Lt,D)?Kr:void 0}oe+=er}}function _1(m,D,j,lt,dt,_t,Lt,Kt,oe){var me=bp(lt,_t,Lt),Ee=_p(lt,dt),Ne=Ee*Lt,He=m[0].x===0||m[0].x===oe||m[0].y===0||m[0].y===oe;D-Ne<D/4&&(D=Ne+D/4);var er=_t*2,yr=He?D/2*Kt%D:(Ee/2+er)*Lt*Kt%D;return wp(m,yr,D,me,j,Ne,He,!1,oe)}function wp(m,D,j,lt,dt,_t,Lt,Kt,oe){for(var me=_t/2,Ee=xp(m),Ne=0,He=D-j,er=[],yr=0;yr<m.length-1;yr++){for(var zr=m[yr],un=m[yr+1],Kr=zr.dist(un),vn=un.angleTo(zr);He+j<Ne+Kr;){He+=j;var bn=(He-Ne)/Kr,pn=xa(zr.x,un.x,bn),Ln=xa(zr.y,un.y,bn);if(pn>=0&&pn<oe&&Ln>=0&&Ln<oe&&He-me>=0&&He+me<=Ee){var Bn=new qc(pn,Ln,vn,yr);Bn._round(),(!lt||yp(m,Bn,_t,lt,dt))&&er.push(Bn)}}Ne+=Kr}return!Kt&&!er.length&&!Lt&&(er=wp(m,Ne/2,j,lt,dt,_t,Lt,!0,oe)),er}function Ap(m,D,j,lt,dt){for(var _t=[],Lt=0;Lt<m.length;Lt++)for(var Kt=m[Lt],oe=void 0,me=0;me<Kt.length-1;me++){var Ee=Kt[me],Ne=Kt[me+1];Ee.x<D&&Ne.x<D||(Ee.x<D?Ee=new e(D,Ee.y+(Ne.y-Ee.y)*((D-Ee.x)/(Ne.x-Ee.x)))._round():Ne.x<D&&(Ne=new e(D,Ee.y+(Ne.y-Ee.y)*((D-Ee.x)/(Ne.x-Ee.x)))._round()),!(Ee.y<j&&Ne.y<j)&&(Ee.y<j?Ee=new e(Ee.x+(Ne.x-Ee.x)*((j-Ee.y)/(Ne.y-Ee.y)),j)._round():Ne.y<j&&(Ne=new e(Ee.x+(Ne.x-Ee.x)*((j-Ee.y)/(Ne.y-Ee.y)),j)._round()),!(Ee.x>=lt&&Ne.x>=lt)&&(Ee.x>=lt?Ee=new e(lt,Ee.y+(Ne.y-Ee.y)*((lt-Ee.x)/(Ne.x-Ee.x)))._round():Ne.x>=lt&&(Ne=new e(lt,Ee.y+(Ne.y-Ee.y)*((lt-Ee.x)/(Ne.x-Ee.x)))._round()),!(Ee.y>=dt&&Ne.y>=dt)&&(Ee.y>=dt?Ee=new e(Ee.x+(Ne.x-Ee.x)*((dt-Ee.y)/(Ne.y-Ee.y)),dt)._round():Ne.y>=dt&&(Ne=new e(Ee.x+(Ne.x-Ee.x)*((dt-Ee.y)/(Ne.y-Ee.y)),dt)._round()),(!oe||!Ee.equals(oe[oe.length-1]))&&(oe=[Ee],_t.push(oe)),oe.push(Ne)))))}return _t}var Vc=ns;function Tp(m,D,j,lt){var dt=[],_t=m.image,Lt=_t.pixelRatio,Kt=_t.paddedRect.w-2*Vc,oe=_t.paddedRect.h-2*Vc,me=m.right-m.left,Ee=m.bottom-m.top,Ne=_t.stretchX||[[0,Kt]],He=_t.stretchY||[[0,oe]],er=function(na,Ui){return na+Ui[1]-Ui[0]},yr=Ne.reduce(er,0),zr=He.reduce(er,0),un=Kt-yr,Kr=oe-zr,vn=0,bn=yr,pn=0,Ln=zr,Bn=0,Wn=un,Qn=0,ui=Kr;if(_t.content&&lt){var ci=_t.content;vn=jf(Ne,0,ci[0]),pn=jf(He,0,ci[1]),bn=jf(Ne,ci[0],ci[2]),Ln=jf(He,ci[1],ci[3]),Bn=ci[0]-vn,Qn=ci[1]-pn,Wn=ci[2]-ci[0]-bn,ui=ci[3]-ci[1]-Ln}var mi=function(na,Ui,ma,la){var La=Uf(na.stretch-vn,bn,me,m.left),no=Zf(na.fixed-Bn,Wn,na.stretch,yr),ja=Uf(Ui.stretch-pn,Ln,Ee,m.top),xo=Zf(Ui.fixed-Qn,ui,Ui.stretch,zr),bo=Uf(ma.stretch-vn,bn,me,m.left),_o=Zf(ma.fixed-Bn,Wn,ma.stretch,yr),Ka=Uf(la.stretch-pn,Ln,Ee,m.top),Po=Zf(la.fixed-Qn,ui,la.stretch,zr),Eo=new e(La,ja),Ha=new e(bo,ja),Co=new e(bo,Ka),gs=new e(La,Ka),yu=new e(no/Lt,xo/Lt),Yu=new e(_o/Lt,Po/Lt),Xu=D*Math.PI/180;if(Xu){var Ku=Math.sin(Xu),Qc=Math.cos(Xu),Hs=[Qc,-Ku,Ku,Qc];Eo._matMult(Hs),Ha._matMult(Hs),gs._matMult(Hs),Co._matMult(Hs)}var Yf=na.stretch+na.fixed,Mh=ma.stretch+ma.fixed,Xf=Ui.stretch+Ui.fixed,Sh=la.stretch+la.fixed,Cs={x:_t.paddedRect.x+Vc+Yf,y:_t.paddedRect.y+Vc+Xf,w:Mh-Yf,h:Sh-Xf},$c=Wn/Lt/me,Kf=ui/Lt/Ee;return{tl:Eo,tr:Ha,bl:gs,br:Co,tex:Cs,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:yu,pixelOffsetBR:Yu,minFontScaleX:$c,minFontScaleY:Kf,isSDF:j}};if(!lt||!_t.stretchX&&!_t.stretchY)dt.push(mi({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Kt+1},{fixed:0,stretch:oe+1}));else for(var _i=kp(Ne,un,yr),ki=kp(He,Kr,zr),yi=0;yi<_i.length-1;yi++)for(var xi=_i[yi],ji=_i[yi+1],ra=0;ra<ki.length-1;ra++){var fa=ki[ra],Vi=ki[ra+1];dt.push(mi(xi,fa,ji,Vi))}return dt}function jf(m,D,j){for(var lt=0,dt=0,_t=m;dt<_t.length;dt+=1){var Lt=_t[dt];lt+=Math.max(D,Math.min(j,Lt[1]))-Math.max(D,Math.min(j,Lt[0]))}return lt}function kp(m,D,j){for(var lt=[{fixed:-Vc,stretch:0}],dt=0,_t=m;dt<_t.length;dt+=1){var Lt=_t[dt],Kt=Lt[0],oe=Lt[1],me=lt[lt.length-1];lt.push({fixed:Kt-me.stretch,stretch:me.stretch}),lt.push({fixed:Kt-me.stretch,stretch:me.stretch+(oe-Kt)})}return lt.push({fixed:D+Vc,stretch:j}),lt}function Uf(m,D,j,lt){return m/D*j+lt}function Zf(m,D,j,lt){return m-D*j/lt}function w1(m,D,j,lt,dt,_t,Lt,Kt){for(var oe=lt.layout.get("text-rotate").evaluate(_t,{})*Math.PI/180,me=[],Ee=0,Ne=D.positionedLines;Ee<Ne.length;Ee+=1)for(var He=Ne[Ee],er=0,yr=He.positionedGlyphs;er<yr.length;er+=1){var zr=yr[er];if(zr.rect){var un=zr.rect||{},Kr=1,vn=sp+Kr,bn=!0,pn=1,Ln=0,Bn=(dt||Kt)&&zr.vertical,Wn=zr.metrics.advance*zr.scale/2;if(Kt&&D.verticalizable){var Qn=(zr.scale-1)*ro,ui=(ro-zr.metrics.width*zr.scale)/2;Ln=He.lineOffset/2-(zr.imageName?-ui:Qn)}if(zr.imageName){var ci=Lt[zr.imageName];bn=ci.sdf,pn=ci.pixelRatio,vn=ns/pn}var mi=dt?[zr.x+Wn,zr.y]:[0,0],_i=dt?[0,0]:[zr.x+Wn+j[0],zr.y+j[1]-Ln],ki=[0,0];Bn&&(ki=_i,_i=[0,0]);var yi=(zr.metrics.left-vn)*zr.scale-Wn+_i[0],xi=(-zr.metrics.top-vn)*zr.scale+_i[1],ji=yi+un.w*zr.scale/pn,ra=xi+un.h*zr.scale/pn,fa=new e(yi,xi),Vi=new e(ji,xi),na=new e(yi,ra),Ui=new e(ji,ra);if(Bn){var ma=new e(-Wn,Wn-yf),la=-Math.PI/2,La=ro/2-Wn,no=zr.imageName?La:0,ja=new e(5-yf-La,-no),xo=new(Function.prototype.bind.apply(e,[null].concat(ki)));fa._rotateAround(la,ma)._add(ja)._add(xo),Vi._rotateAround(la,ma)._add(ja)._add(xo),na._rotateAround(la,ma)._add(ja)._add(xo),Ui._rotateAround(la,ma)._add(ja)._add(xo)}if(oe){var bo=Math.sin(oe),_o=Math.cos(oe),Ka=[_o,-bo,bo,_o];fa._matMult(Ka),Vi._matMult(Ka),na._matMult(Ka),Ui._matMult(Ka)}var Po=new e(0,0),Eo=new e(0,0),Ha=0,Co=0;me.push({tl:fa,tr:Vi,bl:na,br:Ui,tex:un,writingMode:D.writingMode,glyphOffset:mi,sectionIndex:zr.sectionIndex,isSDF:bn,pixelOffsetTL:Po,pixelOffsetBR:Eo,minFontScaleX:Ha,minFontScaleY:Co})}}return me}var qf=function(m,D,j,lt,dt,_t,Lt,Kt,oe,me){if(this.boxStartIndex=m.length,oe){var Ee=_t.top,Ne=_t.bottom,He=_t.collisionPadding;He&&(Ee-=He[1],Ne+=He[3]);var er=Ne-Ee;er>0&&(er=Math.max(10,er),this.circleDiameter=er)}else{var yr=_t.top*Lt-Kt,zr=_t.bottom*Lt+Kt,un=_t.left*Lt-Kt,Kr=_t.right*Lt+Kt,vn=_t.collisionPadding;if(vn&&(un-=vn[0]*Lt,yr-=vn[1]*Lt,Kr+=vn[2]*Lt,zr+=vn[3]*Lt),me){var bn=new e(un,yr),pn=new e(Kr,yr),Ln=new e(un,zr),Bn=new e(Kr,zr),Wn=me*Math.PI/180;bn._rotate(Wn),pn._rotate(Wn),Ln._rotate(Wn),Bn._rotate(Wn),un=Math.min(bn.x,pn.x,Ln.x,Bn.x),Kr=Math.max(bn.x,pn.x,Ln.x,Bn.x),yr=Math.min(bn.y,pn.y,Ln.y,Bn.y),zr=Math.max(bn.y,pn.y,Ln.y,Bn.y)}m.emplaceBack(D.x,D.y,un,yr,Kr,zr,j,lt,dt)}this.boxEndIndex=m.length},Hc=function(m,D){if(m===void 0&&(m=[]),D===void 0&&(D=A1),this.data=m,this.length=this.data.length,this.compare=D,this.length>0)for(var j=(this.length>>1)-1;j>=0;j--)this._down(j)};Hc.prototype.push=function(m){this.data.push(m),this.length++,this._up(this.length-1)},Hc.prototype.pop=function(){if(this.length!==0){var m=this.data[0],D=this.data.pop();return this.length--,this.length>0&&(this.data[0]=D,this._down(0)),m}},Hc.prototype.peek=function(){return this.data[0]},Hc.prototype._up=function(m){for(var D=this,j=D.data,lt=D.compare,dt=j[m];m>0;){var _t=m-1>>1,Lt=j[_t];if(lt(dt,Lt)>=0)break;j[m]=Lt,m=_t}j[m]=dt},Hc.prototype._down=function(m){for(var D=this,j=D.data,lt=D.compare,dt=this.length>>1,_t=j[m];m<dt;){var Lt=(m<<1)+1,Kt=j[Lt],oe=Lt+1;if(oe<this.length&&lt(j[oe],Kt)<0&&(Lt=oe,Kt=j[oe]),lt(Kt,_t)>=0)break;j[m]=Kt,m=Lt}j[m]=_t};function A1(m,D){return m<D?-1:m>D?1:0}function T1(m,D,j){D===void 0&&(D=1),j===void 0&&(j=!1);for(var lt=1/0,dt=1/0,_t=-1/0,Lt=-1/0,Kt=m[0],oe=0;oe<Kt.length;oe++){var me=Kt[oe];(!oe||me.x<lt)&&(lt=me.x),(!oe||me.y<dt)&&(dt=me.y),(!oe||me.x>_t)&&(_t=me.x),(!oe||me.y>Lt)&&(Lt=me.y)}var Ee=_t-lt,Ne=Lt-dt,He=Math.min(Ee,Ne),er=He/2,yr=new Hc([],k1);if(He===0)return new e(lt,dt);for(var zr=lt;zr<_t;zr+=He)for(var un=dt;un<Lt;un+=He)yr.push(new Gc(zr+er,un+er,er,m));for(var Kr=S1(m),vn=yr.length;yr.length;){var bn=yr.pop();(bn.d>Kr.d||!Kr.d)&&(Kr=bn,j&&console.log("found best %d after %d probes",Math.round(1e4*bn.d)/1e4,vn)),!(bn.max-Kr.d<=D)&&(er=bn.h/2,yr.push(new Gc(bn.p.x-er,bn.p.y-er,er,m)),yr.push(new Gc(bn.p.x+er,bn.p.y-er,er,m)),yr.push(new Gc(bn.p.x-er,bn.p.y+er,er,m)),yr.push(new Gc(bn.p.x+er,bn.p.y+er,er,m)),vn+=4)}return j&&(console.log("num probes: "+vn),console.log("best distance: "+Kr.d)),Kr.p}function k1(m,D){return D.max-m.max}function Gc(m,D,j,lt){this.p=new e(m,D),this.h=j,this.d=M1(this.p,lt),this.max=this.d+this.h*Math.SQRT2}function M1(m,D){for(var j=!1,lt=1/0,dt=0;dt<D.length;dt++)for(var _t=D[dt],Lt=0,Kt=_t.length,oe=Kt-1;Lt<Kt;oe=Lt++){var me=_t[Lt],Ee=_t[oe];me.y>m.y!=Ee.y>m.y&&m.x<(Ee.x-me.x)*(m.y-me.y)/(Ee.y-me.y)+me.x&&(j=!j),lt=Math.min(lt,lo(m,me,Ee))}return(j?1:-1)*Math.sqrt(lt)}function S1(m){for(var D=0,j=0,lt=0,dt=m[0],_t=0,Lt=dt.length,Kt=Lt-1;_t<Lt;Kt=_t++){var oe=dt[_t],me=dt[Kt],Ee=oe.x*me.y-me.x*oe.y;j+=(oe.x+me.x)*Ee,lt+=(oe.y+me.y)*Ee,D+=Ee*3}return new Gc(j/D,lt/D,0,m)}var Wc=7,xh=Number.POSITIVE_INFINITY;function Mp(m,D){function j(dt,_t){var Lt=0,Kt=0;_t<0&&(_t=0);var oe=_t/Math.sqrt(2);switch(dt){case"top-right":case"top-left":Kt=oe-Wc;break;case"bottom-right":case"bottom-left":Kt=-oe+Wc;break;case"bottom":Kt=-_t+Wc;break;case"top":Kt=_t-Wc;break}switch(dt){case"top-right":case"bottom-right":Lt=-oe;break;case"top-left":case"bottom-left":Lt=oe;break;case"left":Lt=_t;break;case"right":Lt=-_t;break}return[Lt,Kt]}function lt(dt,_t,Lt){var Kt=0,oe=0;switch(_t=Math.abs(_t),Lt=Math.abs(Lt),dt){case"top-right":case"top-left":case"top":oe=Lt-Wc;break;case"bottom-right":case"bottom-left":case"bottom":oe=-Lt+Wc;break}switch(dt){case"top-right":case"bottom-right":case"right":Kt=-_t;break;case"top-left":case"bottom-left":case"left":Kt=_t;break}return[Kt,oe]}return D[1]!==xh?lt(m,D[0],D[1]):j(m,D[0])}function L1(m,D,j,lt,dt,_t,Lt){m.createArrays();var Kt=512*m.overscaling;m.tilePixelRatio=Ii/Kt,m.compareText={},m.iconsNeedLinear=!1;var oe=m.layers[0].layout,me=m.layers[0]._unevaluatedLayout._values,Ee={};if(m.textSizeData.kind==="composite"){var Ne=m.textSizeData,He=Ne.minZoom,er=Ne.maxZoom;Ee.compositeTextSizes=[me["text-size"].possiblyEvaluate(new In(He),Lt),me["text-size"].possiblyEvaluate(new In(er),Lt)]}if(m.iconSizeData.kind==="composite"){var yr=m.iconSizeData,zr=yr.minZoom,un=yr.maxZoom;Ee.compositeIconSizes=[me["icon-size"].possiblyEvaluate(new In(zr),Lt),me["icon-size"].possiblyEvaluate(new In(un),Lt)]}Ee.layoutTextSize=me["text-size"].possiblyEvaluate(new In(m.zoom+1),Lt),Ee.layoutIconSize=me["icon-size"].possiblyEvaluate(new In(m.zoom+1),Lt),Ee.textMaxSize=me["text-size"].possiblyEvaluate(new In(18));for(var Kr=oe.get("text-line-height")*ro,vn=oe.get("text-rotation-alignment")==="map"&&oe.get("symbol-placement")!=="point",bn=oe.get("text-keep-upright"),pn=oe.get("text-size"),Ln=function(){var Qn=Wn[Bn],ui=oe.get("text-font").evaluate(Qn,{},Lt).join(","),ci=pn.evaluate(Qn,{},Lt),mi=Ee.layoutTextSize.evaluate(Qn,{},Lt),_i=Ee.layoutIconSize.evaluate(Qn,{},Lt),ki={horizontal:{},vertical:void 0},yi=Qn.text,xi=[0,0];if(yi){var ji=yi.toString(),ra=oe.get("text-letter-spacing").evaluate(Qn,{},Lt)*ro,fa=Ge(ji)?ra:0,Vi=oe.get("text-anchor").evaluate(Qn,{},Lt),na=oe.get("text-variable-anchor");if(!na){var Ui=oe.get("text-radial-offset").evaluate(Qn,{},Lt);Ui?xi=Mp(Vi,[Ui*ro,xh]):xi=oe.get("text-offset").evaluate(Qn,{},Lt).map(function(yu){return yu*ro})}var ma=vn?"center":oe.get("text-justify").evaluate(Qn,{},Lt),la=oe.get("symbol-placement"),La=la==="point"?oe.get("text-max-width").evaluate(Qn,{},Lt)*ro:0,no=function(){m.allowVerticalPlacement&&Ie(ji)&&(ki.vertical=Nf(yi,D,j,dt,ui,La,Kr,Vi,"left",fa,xi,vs.vertical,!0,la,mi,ci))};if(!vn&&na){for(var ja=ma==="auto"?na.map(function(yu){return bh(yu)}):[ma],xo=!1,bo=0;bo<ja.length;bo++){var _o=ja[bo];if(!ki.horizontal[_o])if(xo)ki.horizontal[_o]=ki.horizontal[0];else{var Ka=Nf(yi,D,j,dt,ui,La,Kr,"center",_o,fa,xi,vs.horizontal,!1,la,mi,ci);Ka&&(ki.horizontal[_o]=Ka,xo=Ka.positionedLines.length===1)}}no()}else{ma==="auto"&&(ma=bh(Vi));var Po=Nf(yi,D,j,dt,ui,La,Kr,Vi,ma,fa,xi,vs.horizontal,!1,la,mi,ci);Po&&(ki.horizontal[ma]=Po),no(),Ie(ji)&&vn&&bn&&(ki.vertical=Nf(yi,D,j,dt,ui,La,Kr,Vi,ma,fa,xi,vs.vertical,!1,la,mi,ci))}}var Eo=void 0,Ha=!1;if(Qn.icon&&Qn.icon.name){var Co=lt[Qn.icon.name];Co&&(Eo=y1(dt[Qn.icon.name],oe.get("icon-offset").evaluate(Qn,{},Lt),oe.get("icon-anchor").evaluate(Qn,{},Lt)),Ha=Co.sdf,m.sdfIcons===void 0?m.sdfIcons=Co.sdf:m.sdfIcons!==Co.sdf&&B("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Co.pixelRatio!==m.pixelRatio||oe.get("icon-rotate").constantOr(1)!==0)&&(m.iconsNeedLinear=!0))}var gs=Lp(ki.horizontal)||ki.vertical;m.iconsInText=gs?gs.iconsInText:!1,(gs||Eo)&&P1(m,Qn,ki,Eo,lt,Ee,mi,_i,xi,Ha,Lt)},Bn=0,Wn=m.features;Bn<Wn.length;Bn+=1)Ln();_t&&m.generateCollisionDebugBuffers()}function bh(m){switch(m){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function P1(m,D,j,lt,dt,_t,Lt,Kt,oe,me,Ee){var Ne=_t.textMaxSize.evaluate(D,{});Ne===void 0&&(Ne=Lt);var He=m.layers[0].layout,er=He.get("icon-offset").evaluate(D,{},Ee),yr=Lp(j.horizontal),zr=24,un=Lt/zr,Kr=m.tilePixelRatio*un,vn=m.tilePixelRatio*Ne/zr,bn=m.tilePixelRatio*Kt,pn=m.tilePixelRatio*He.get("symbol-spacing"),Ln=He.get("text-padding")*m.tilePixelRatio,Bn=He.get("icon-padding")*m.tilePixelRatio,Wn=He.get("text-max-angle")/180*Math.PI,Qn=He.get("text-rotation-alignment")==="map"&&He.get("symbol-placement")!=="point",ui=He.get("icon-rotation-alignment")==="map"&&He.get("symbol-placement")!=="point",ci=He.get("symbol-placement"),mi=pn/2,_i=He.get("icon-text-fit"),ki;lt&&_i!=="none"&&(m.allowVerticalPlacement&&j.vertical&&(ki=vp(lt,j.vertical,_i,He.get("icon-text-fit-padding"),er,un)),yr&&(lt=vp(lt,yr,_i,He.get("icon-text-fit-padding"),er,un)));var yi=function(Qc,Hs){Hs.x<0||Hs.x>=Ii||Hs.y<0||Hs.y>=Ii||E1(m,Hs,Qc,j,lt,dt,ki,m.layers[0],m.collisionBoxArray,D.index,D.sourceLayerIndex,m.index,Kr,Ln,Qn,oe,bn,Bn,ui,er,D,_t,me,Ee,Lt)};if(ci==="line")for(var xi=0,ji=Ap(D.geometry,0,0,Ii,Ii);xi<ji.length;xi+=1)for(var ra=ji[xi],fa=_1(ra,pn,Wn,j.vertical||yr,lt,zr,vn,m.overscaling,Ii),Vi=0,na=fa;Vi<na.length;Vi+=1){var Ui=na[Vi],ma=yr;(!ma||!C1(m,ma.text,mi,Ui))&&yi(ra,Ui)}else if(ci==="line-center")for(var la=0,La=D.geometry;la<La.length;la+=1){var no=La[la];if(no.length>1){var ja=b1(no,Wn,j.vertical||yr,lt,zr,vn);ja&&yi(no,ja)}}else if(D.type==="Polygon")for(var xo=0,bo=uh(D.geometry,0);xo<bo.length;xo+=1){var _o=bo[xo],Ka=T1(_o,16);yi(_o[0],new qc(Ka.x,Ka.y,0))}else if(D.type==="LineString")for(var Po=0,Eo=D.geometry;Po<Eo.length;Po+=1){var Ha=Eo[Po];yi(Ha,new qc(Ha[0].x,Ha[0].y,0))}else if(D.type==="Point")for(var Co=0,gs=D.geometry;Co<gs.length;Co+=1)for(var yu=gs[Co],Yu=0,Xu=yu;Yu<Xu.length;Yu+=1){var Ku=Xu[Yu];yi([Ku],new qc(Ku.x,Ku.y,0))}}var xf=255,Gu=xf*dl;function Sp(m,D,j,lt,dt,_t,Lt,Kt,oe,me,Ee,Ne,He,er,yr){var zr=w1(D,j,Kt,dt,_t,Lt,lt,m.allowVerticalPlacement),un=m.textSizeData,Kr=null;un.kind==="source"?(Kr=[dl*dt.layout.get("text-size").evaluate(Lt,{})],Kr[0]>Gu&&B(m.layerIds[0]+': Value for "text-size" is >= '+xf+'. Reduce your "text-size".')):un.kind==="composite"&&(Kr=[dl*er.compositeTextSizes[0].evaluate(Lt,{},yr),dl*er.compositeTextSizes[1].evaluate(Lt,{},yr)],(Kr[0]>Gu||Kr[1]>Gu)&&B(m.layerIds[0]+': Value for "text-size" is >= '+xf+'. Reduce your "text-size".')),m.addSymbols(m.text,zr,Kr,Kt,_t,Lt,me,D,oe.lineStartIndex,oe.lineLength,He,yr);for(var vn=0,bn=Ee;vn<bn.length;vn+=1){var pn=bn[vn];Ne[pn]=m.text.placedSymbolArray.length-1}return zr.length*4}function Lp(m){for(var D in m)return m[D];return null}function E1(m,D,j,lt,dt,_t,Lt,Kt,oe,me,Ee,Ne,He,er,yr,zr,un,Kr,vn,bn,pn,Ln,Bn,Wn,Qn){var ui,ci=m.addToLineVertexArray(D,j),mi,_i,ki,yi,xi=0,ji=0,ra=0,fa=0,Vi=-1,na=-1,Ui={},ma=Qt(""),la=0,La=0;if(Kt._unevaluatedLayout.getValue("text-radial-offset")===void 0?(ui=Kt.layout.get("text-offset").evaluate(pn,{},Wn).map(function(wf){return wf*ro}),la=ui[0],La=ui[1]):(la=Kt.layout.get("text-radial-offset").evaluate(pn,{},Wn)*ro,La=xh),m.allowVerticalPlacement&&lt.vertical){var no=Kt.layout.get("text-rotate").evaluate(pn,{},Wn),ja=no+90,xo=lt.vertical;ki=new qf(oe,D,me,Ee,Ne,xo,He,er,yr,ja),Lt&&(yi=new qf(oe,D,me,Ee,Ne,Lt,un,Kr,yr,ja))}if(dt){var bo=Kt.layout.get("icon-rotate").evaluate(pn,{}),_o=Kt.layout.get("icon-text-fit")!=="none",Ka=Tp(dt,bo,Bn,_o),Po=Lt?Tp(Lt,bo,Bn,_o):void 0;_i=new qf(oe,D,me,Ee,Ne,dt,un,Kr,!1,bo),xi=Ka.length*4;var Eo=m.iconSizeData,Ha=null;Eo.kind==="source"?(Ha=[dl*Kt.layout.get("icon-size").evaluate(pn,{})],Ha[0]>Gu&&B(m.layerIds[0]+': Value for "icon-size" is >= '+xf+'. Reduce your "icon-size".')):Eo.kind==="composite"&&(Ha=[dl*Ln.compositeIconSizes[0].evaluate(pn,{},Wn),dl*Ln.compositeIconSizes[1].evaluate(pn,{},Wn)],(Ha[0]>Gu||Ha[1]>Gu)&&B(m.layerIds[0]+': Value for "icon-size" is >= '+xf+'. Reduce your "icon-size".')),m.addSymbols(m.icon,Ka,Ha,bn,vn,pn,!1,D,ci.lineStartIndex,ci.lineLength,-1,Wn),Vi=m.icon.placedSymbolArray.length-1,Po&&(ji=Po.length*4,m.addSymbols(m.icon,Po,Ha,bn,vn,pn,vs.vertical,D,ci.lineStartIndex,ci.lineLength,-1,Wn),na=m.icon.placedSymbolArray.length-1)}for(var Co in lt.horizontal){var gs=lt.horizontal[Co];if(!mi){ma=Qt(gs.text);var yu=Kt.layout.get("text-rotate").evaluate(pn,{},Wn);mi=new qf(oe,D,me,Ee,Ne,gs,He,er,yr,yu)}var Yu=gs.positionedLines.length===1;if(ra+=Sp(m,D,gs,_t,Kt,yr,pn,zr,ci,lt.vertical?vs.horizontal:vs.horizontalOnly,Yu?Object.keys(lt.horizontal):[Co],Ui,Vi,Ln,Wn),Yu)break}lt.vertical&&(fa+=Sp(m,D,lt.vertical,_t,Kt,yr,pn,zr,ci,vs.vertical,["vertical"],Ui,na,Ln,Wn));var Xu=mi?mi.boxStartIndex:m.collisionBoxArray.length,Ku=mi?mi.boxEndIndex:m.collisionBoxArray.length,Qc=ki?ki.boxStartIndex:m.collisionBoxArray.length,Hs=ki?ki.boxEndIndex:m.collisionBoxArray.length,Yf=_i?_i.boxStartIndex:m.collisionBoxArray.length,Mh=_i?_i.boxEndIndex:m.collisionBoxArray.length,Xf=yi?yi.boxStartIndex:m.collisionBoxArray.length,Sh=yi?yi.boxEndIndex:m.collisionBoxArray.length,Cs=-1,$c=function(wf,Vp){return wf&&wf.circleDiameter?Math.max(wf.circleDiameter,Vp):Vp};Cs=$c(mi,Cs),Cs=$c(ki,Cs),Cs=$c(_i,Cs),Cs=$c(yi,Cs);var Kf=Cs>-1?1:0;Kf&&(Cs*=Qn/ro),m.glyphOffsetArray.length>=ia.MAX_GLYPHS&&B("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),pn.sortKey!==void 0&&m.addToSortKeyRanges(m.symbolInstances.length,pn.sortKey),m.symbolInstances.emplaceBack(D.x,D.y,Ui.right>=0?Ui.right:-1,Ui.center>=0?Ui.center:-1,Ui.left>=0?Ui.left:-1,Ui.vertical||-1,Vi,na,ma,Xu,Ku,Qc,Hs,Yf,Mh,Xf,Sh,me,ra,fa,xi,ji,Kf,0,He,la,La,Cs)}function C1(m,D,j,lt){var dt=m.compareText;if(!(D in dt))dt[D]=[];else for(var _t=dt[D],Lt=_t.length-1;Lt>=0;Lt--)if(lt.dist(_t[Lt])<j)return!0;return dt[D].push(lt),!1}var O1=jc.VectorTileFeature.types,I1=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Vf(m,D,j,lt,dt,_t,Lt,Kt,oe,me,Ee,Ne,He){var er=Kt?Math.min(Gu,Math.round(Kt[0])):0,yr=Kt?Math.min(Gu,Math.round(Kt[1])):0;m.emplaceBack(D,j,Math.round(lt*32),Math.round(dt*32),_t,Lt,(er<<1)+(oe?1:0),yr,me*16,Ee*16,Ne*256,He*256)}function _h(m,D,j){m.emplaceBack(D.x,D.y,j),m.emplaceBack(D.x,D.y,j),m.emplaceBack(D.x,D.y,j),m.emplaceBack(D.x,D.y,j)}function z1(m){for(var D=0,j=m.sections;D<j.length;D+=1){var lt=j[D];if(Wr(lt.text))return!0}return!1}var Yc=function(m){this.layoutVertexArray=new Dl,this.indexArray=new cl,this.programConfigurations=m,this.segments=new tt,this.dynamicLayoutVertexArray=new tf,this.opacityVertexArray=new ef,this.placedSymbolArray=new Uu};Yc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Yc.prototype.upload=function(m,D,j,lt){this.isEmpty()||(j&&(this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,ph.members),this.indexBuffer=m.createIndexBuffer(this.indexArray,D),this.dynamicLayoutVertexBuffer=m.createVertexBuffer(this.dynamicLayoutVertexArray,z0.members,!0),this.opacityVertexBuffer=m.createVertexBuffer(this.opacityVertexArray,I1,!0),this.opacityVertexBuffer.itemSize=1),(j||lt)&&this.programConfigurations.upload(m))},Yc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},st("SymbolBuffers",Yc);var bf=function(m,D,j){this.layoutVertexArray=new m,this.layoutAttributes=D,this.indexArray=new j,this.segments=new tt,this.collisionVertexArray=new jo};bf.prototype.upload=function(m){this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=m.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=m.createVertexBuffer(this.collisionVertexArray,D0.members,!0)},bf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},st("CollisionBuffers",bf);var ia=function(m){this.collisionBoxArray=m.collisionBoxArray,this.zoom=m.zoom,this.overscaling=m.overscaling,this.layers=m.layers,this.layerIds=this.layers.map(function(Kt){return Kt.id}),this.index=m.index,this.pixelRatio=m.pixelRatio,this.sourceLayerIndex=m.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ul([]),this.placementViewportMatrix=Ul([]);var D=this.layers[0],j=D._unevaluatedLayout._values;this.textSizeData=yh(this.zoom,j["text-size"]),this.iconSizeData=yh(this.zoom,j["icon-size"]);var lt=this.layers[0].layout,dt=lt.get("symbol-sort-key"),_t=lt.get("symbol-z-order");this.sortFeaturesByKey=_t!=="viewport-y"&&dt.constantOr(1)!==void 0;var Lt=_t==="viewport-y"||_t==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Lt&&(lt.get("text-allow-overlap")||lt.get("icon-allow-overlap")||lt.get("text-ignore-placement")||lt.get("icon-ignore-placement")),lt.get("symbol-placement")==="point"&&(this.writingModes=lt.get("text-writing-mode").map(function(Kt){return vs[Kt]})),this.stateDependentLayerIds=this.layers.filter(function(Kt){return Kt.isStateDependent()}).map(function(Kt){return Kt.id}),this.sourceID=m.sourceID};ia.prototype.createArrays=function(){this.text=new Yc(new Di(ph.members,this.layers,this.zoom,function(m){return/^text/.test(m)})),this.icon=new Yc(new Di(ph.members,this.layers,this.zoom,function(m){return/^icon/.test(m)})),this.glyphOffsetArray=new Ls,this.lineVertexArray=new Mf,this.symbolInstances=new kf},ia.prototype.calculateGlyphDependencies=function(m,D,j,lt,dt){for(var _t=0;_t<m.length;_t++)if(D[m.charCodeAt(_t)]=!0,(j||lt)&&dt){var Lt=vf[m.charAt(_t)];Lt&&(D[Lt.charCodeAt(0)]=!0)}},ia.prototype.populate=function(m,D,j){var lt=this.layers[0],dt=lt.layout,_t=dt.get("text-font"),Lt=dt.get("text-field"),Kt=dt.get("icon-image"),oe=(Lt.value.kind!=="constant"||Lt.value.value instanceof Ea&&!Lt.value.value.isEmpty()||Lt.value.value.toString().length>0)&&(_t.value.kind!=="constant"||_t.value.value.length>0),me=Kt.value.kind!=="constant"||!!Kt.value.value||Object.keys(Kt.parameters).length>0,Ee=dt.get("symbol-sort-key");if(this.features=[],!(!oe&&!me)){for(var Ne=D.iconDependencies,He=D.glyphDependencies,er=D.availableImages,yr=new In(this.zoom),zr=0,un=m;zr<un.length;zr+=1){var Kr=un[zr],vn=Kr.feature,bn=Kr.id,pn=Kr.index,Ln=Kr.sourceLayerIndex,Bn=lt._featureFilter.needGeometry,Wn={type:vn.type,id:bn,properties:vn.properties,geometry:Bn?Fi(vn):[]};if(lt._featureFilter.filter(yr,Wn,j)){Bn||(Wn.geometry=Fi(vn));var Qn=void 0;if(oe){var ui=lt.getValueAndResolveTokens("text-field",Wn,j,er),ci=Ea.factory(ui);z1(ci)&&(this.hasRTLText=!0),(!this.hasRTLText||Ei()==="unavailable"||this.hasRTLText&&Gi.isParsed())&&(Qn=B0(ci,lt,Wn))}var mi=void 0;if(me){var _i=lt.getValueAndResolveTokens("icon-image",Wn,j,er);_i instanceof Qa?mi=_i:mi=Qa.fromString(_i)}if(!(!Qn&&!mi)){var ki=this.sortFeaturesByKey?Ee.evaluate(Wn,{},j):void 0,yi={id:bn,text:Qn,icon:mi,index:pn,sourceLayerIndex:Ln,geometry:Fi(vn),properties:vn.properties,type:O1[vn.type],sortKey:ki};if(this.features.push(yi),mi&&(Ne[mi.name]=!0),Qn){var xi=_t.evaluate(Wn,{},j).join(","),ji=dt.get("text-rotation-alignment")==="map"&&dt.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(vs.vertical)>=0;for(var ra=0,fa=Qn.sections;ra<fa.length;ra+=1){var Vi=fa[ra];if(Vi.image)Ne[Vi.image.name]=!0;else{var na=Ie(Qn.toString()),Ui=Vi.fontStack||xi,ma=He[Ui]=He[Ui]||{};this.calculateGlyphDependencies(Vi.text,ma,ji,this.allowVerticalPlacement,na)}}}}}}dt.get("symbol-placement")==="line"&&(this.features=N0(this.features)),this.sortFeaturesByKey&&this.features.sort(function(la,La){return la.sortKey-La.sortKey})}},ia.prototype.update=function(m,D,j){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(m,D,this.layers,j),this.icon.programConfigurations.updatePaintArrays(m,D,this.layers,j))},ia.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},ia.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ia.prototype.upload=function(m){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(m),this.iconCollisionBox.upload(m)),this.text.upload(m,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(m,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ia.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},ia.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},ia.prototype.addToLineVertexArray=function(m,D){var j=this.lineVertexArray.length;if(m.segment!==void 0){for(var lt=m.dist(D[m.segment+1]),dt=m.dist(D[m.segment]),_t={},Lt=m.segment+1;Lt<D.length;Lt++)_t[Lt]={x:D[Lt].x,y:D[Lt].y,tileUnitDistanceFromAnchor:lt},Lt<D.length-1&&(lt+=D[Lt+1].dist(D[Lt]));for(var Kt=m.segment||0;Kt>=0;Kt--)_t[Kt]={x:D[Kt].x,y:D[Kt].y,tileUnitDistanceFromAnchor:dt},Kt>0&&(dt+=D[Kt-1].dist(D[Kt]));for(var oe=0;oe<D.length;oe++){var me=_t[oe];this.lineVertexArray.emplaceBack(me.x,me.y,me.tileUnitDistanceFromAnchor)}}return{lineStartIndex:j,lineLength:this.lineVertexArray.length-j}},ia.prototype.addSymbols=function(m,D,j,lt,dt,_t,Lt,Kt,oe,me,Ee,Ne){for(var He=m.indexArray,er=m.layoutVertexArray,yr=m.segments.prepareSegment(4*D.length,er,He,_t.sortKey),zr=this.glyphOffsetArray.length,un=yr.vertexLength,Kr=this.allowVerticalPlacement&&Lt===vs.vertical?Math.PI/2:0,vn=_t.text&&_t.text.sections,bn=0;bn<D.length;bn++){var pn=D[bn],Ln=pn.tl,Bn=pn.tr,Wn=pn.bl,Qn=pn.br,ui=pn.tex,ci=pn.pixelOffsetTL,mi=pn.pixelOffsetBR,_i=pn.minFontScaleX,ki=pn.minFontScaleY,yi=pn.glyphOffset,xi=pn.isSDF,ji=pn.sectionIndex,ra=yr.vertexLength,fa=yi[1];Vf(er,Kt.x,Kt.y,Ln.x,fa+Ln.y,ui.x,ui.y,j,xi,ci.x,ci.y,_i,ki),Vf(er,Kt.x,Kt.y,Bn.x,fa+Bn.y,ui.x+ui.w,ui.y,j,xi,mi.x,ci.y,_i,ki),Vf(er,Kt.x,Kt.y,Wn.x,fa+Wn.y,ui.x,ui.y+ui.h,j,xi,ci.x,mi.y,_i,ki),Vf(er,Kt.x,Kt.y,Qn.x,fa+Qn.y,ui.x+ui.w,ui.y+ui.h,j,xi,mi.x,mi.y,_i,ki),_h(m.dynamicLayoutVertexArray,Kt,Kr),He.emplaceBack(ra,ra+1,ra+2),He.emplaceBack(ra+1,ra+2,ra+3),yr.vertexLength+=4,yr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(yi[0]),(bn===D.length-1||ji!==D[bn+1].sectionIndex)&&m.programConfigurations.populatePaintArrays(er.length,_t,_t.index,{},Ne,vn&&vn[ji])}m.placedSymbolArray.emplaceBack(Kt.x,Kt.y,zr,this.glyphOffsetArray.length-zr,un,oe,me,Kt.segment,j?j[0]:0,j?j[1]:0,lt[0],lt[1],Lt,0,!1,0,Ee)},ia.prototype._addCollisionDebugVertex=function(m,D,j,lt,dt,_t){return D.emplaceBack(0,0),m.emplaceBack(j.x,j.y,lt,dt,Math.round(_t.x),Math.round(_t.y))},ia.prototype.addCollisionDebugVertices=function(m,D,j,lt,dt,_t,Lt){var Kt=dt.segments.prepareSegment(4,dt.layoutVertexArray,dt.indexArray),oe=Kt.vertexLength,me=dt.layoutVertexArray,Ee=dt.collisionVertexArray,Ne=Lt.anchorX,He=Lt.anchorY;this._addCollisionDebugVertex(me,Ee,_t,Ne,He,new e(m,D)),this._addCollisionDebugVertex(me,Ee,_t,Ne,He,new e(j,D)),this._addCollisionDebugVertex(me,Ee,_t,Ne,He,new e(j,lt)),this._addCollisionDebugVertex(me,Ee,_t,Ne,He,new e(m,lt)),Kt.vertexLength+=4;var er=dt.indexArray;er.emplaceBack(oe,oe+1),er.emplaceBack(oe+1,oe+2),er.emplaceBack(oe+2,oe+3),er.emplaceBack(oe+3,oe),Kt.primitiveLength+=4},ia.prototype.addDebugCollisionBoxes=function(m,D,j,lt){for(var dt=m;dt<D;dt++){var _t=this.collisionBoxArray.get(dt),Lt=_t.x1,Kt=_t.y1,oe=_t.x2,me=_t.y2;this.addCollisionDebugVertices(Lt,Kt,oe,me,lt?this.textCollisionBox:this.iconCollisionBox,_t.anchorPoint,j)}},ia.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new bf(Ec,rp.members,bc),this.iconCollisionBox=new bf(Ec,rp.members,bc);for(var m=0;m<this.symbolInstances.length;m++){var D=this.symbolInstances.get(m);this.addDebugCollisionBoxes(D.textBoxStartIndex,D.textBoxEndIndex,D,!0),this.addDebugCollisionBoxes(D.verticalTextBoxStartIndex,D.verticalTextBoxEndIndex,D,!0),this.addDebugCollisionBoxes(D.iconBoxStartIndex,D.iconBoxEndIndex,D,!1),this.addDebugCollisionBoxes(D.verticalIconBoxStartIndex,D.verticalIconBoxEndIndex,D,!1)}},ia.prototype._deserializeCollisionBoxesForSymbol=function(m,D,j,lt,dt,_t,Lt,Kt,oe){for(var me={},Ee=D;Ee<j;Ee++){var Ne=m.get(Ee);me.textBox={x1:Ne.x1,y1:Ne.y1,x2:Ne.x2,y2:Ne.y2,anchorPointX:Ne.anchorPointX,anchorPointY:Ne.anchorPointY},me.textFeatureIndex=Ne.featureIndex;break}for(var He=lt;He<dt;He++){var er=m.get(He);me.verticalTextBox={x1:er.x1,y1:er.y1,x2:er.x2,y2:er.y2,anchorPointX:er.anchorPointX,anchorPointY:er.anchorPointY},me.verticalTextFeatureIndex=er.featureIndex;break}for(var yr=_t;yr<Lt;yr++){var zr=m.get(yr);me.iconBox={x1:zr.x1,y1:zr.y1,x2:zr.x2,y2:zr.y2,anchorPointX:zr.anchorPointX,anchorPointY:zr.anchorPointY},me.iconFeatureIndex=zr.featureIndex;break}for(var un=Kt;un<oe;un++){var Kr=m.get(un);me.verticalIconBox={x1:Kr.x1,y1:Kr.y1,x2:Kr.x2,y2:Kr.y2,anchorPointX:Kr.anchorPointX,anchorPointY:Kr.anchorPointY},me.verticalIconFeatureIndex=Kr.featureIndex;break}return me},ia.prototype.deserializeCollisionBoxes=function(m){this.collisionArrays=[];for(var D=0;D<this.symbolInstances.length;D++){var j=this.symbolInstances.get(D);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(m,j.textBoxStartIndex,j.textBoxEndIndex,j.verticalTextBoxStartIndex,j.verticalTextBoxEndIndex,j.iconBoxStartIndex,j.iconBoxEndIndex,j.verticalIconBoxStartIndex,j.verticalIconBoxEndIndex))}},ia.prototype.hasTextData=function(){return this.text.segments.get().length>0},ia.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ia.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},ia.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},ia.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},ia.prototype.addIndicesForPlacedSymbol=function(m,D){for(var j=m.placedSymbolArray.get(D),lt=j.vertexStartIndex+j.numGlyphs*4,dt=j.vertexStartIndex;dt<lt;dt+=4)m.indexArray.emplaceBack(dt,dt+1,dt+2),m.indexArray.emplaceBack(dt+1,dt+2,dt+3)},ia.prototype.getSortedSymbolIndexes=function(m){if(this.sortedAngle===m&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var D=Math.sin(m),j=Math.cos(m),lt=[],dt=[],_t=[],Lt=0;Lt<this.symbolInstances.length;++Lt){_t.push(Lt);var Kt=this.symbolInstances.get(Lt);lt.push(Math.round(D*Kt.anchorX+j*Kt.anchorY)|0),dt.push(Kt.featureIndex)}return _t.sort(function(oe,me){return lt[oe]-lt[me]||dt[me]-dt[oe]}),_t},ia.prototype.addToSortKeyRanges=function(m,D){var j=this.sortKeyRanges[this.sortKeyRanges.length-1];j&&j.sortKey===D?j.symbolInstanceEnd=m+1:this.sortKeyRanges.push({sortKey:D,symbolInstanceStart:m,symbolInstanceEnd:m+1})},ia.prototype.sortFeatures=function(m){var D=this;if(this.sortFeaturesByY&&this.sortedAngle!==m&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(m),this.sortedAngle=m,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var j=0,lt=this.symbolInstanceIndexes;j<lt.length;j+=1){var dt=lt[j],_t=this.symbolInstances.get(dt);this.featureSortOrder.push(_t.featureIndex),[_t.rightJustifiedTextSymbolIndex,_t.centerJustifiedTextSymbolIndex,_t.leftJustifiedTextSymbolIndex].forEach(function(Lt,Kt,oe){Lt>=0&&oe.indexOf(Lt)===Kt&&D.addIndicesForPlacedSymbol(D.text,Lt)}),_t.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,_t.verticalPlacedTextSymbolIndex),_t.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,_t.placedIconSymbolIndex),_t.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,_t.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},st("SymbolBucket",ia,{omit:["layers","collisionBoxArray","features","compareText"]}),ia.MAX_GLYPHS=65535,ia.addDynamicAttributes=_h;function D1(m,D){return D.replace(/{([^{}]+)}/g,function(j,lt){return lt in m?String(m[lt]):""})}var F1=new Oa({"symbol-placement":new oi(Ue.layout_symbol["symbol-placement"]),"symbol-spacing":new oi(Ue.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new oi(Ue.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new pi(Ue.layout_symbol["symbol-sort-key"]),"symbol-z-order":new oi(Ue.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new oi(Ue.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new oi(Ue.layout_symbol["icon-ignore-placement"]),"icon-optional":new oi(Ue.layout_symbol["icon-optional"]),"icon-rotation-alignment":new oi(Ue.layout_symbol["icon-rotation-alignment"]),"icon-size":new pi(Ue.layout_symbol["icon-size"]),"icon-text-fit":new oi(Ue.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new oi(Ue.layout_symbol["icon-text-fit-padding"]),"icon-image":new pi(Ue.layout_symbol["icon-image"]),"icon-rotate":new pi(Ue.layout_symbol["icon-rotate"]),"icon-padding":new oi(Ue.layout_symbol["icon-padding"]),"icon-keep-upright":new oi(Ue.layout_symbol["icon-keep-upright"]),"icon-offset":new pi(Ue.layout_symbol["icon-offset"]),"icon-anchor":new pi(Ue.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new oi(Ue.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new oi(Ue.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new oi(Ue.layout_symbol["text-rotation-alignment"]),"text-field":new pi(Ue.layout_symbol["text-field"]),"text-font":new pi(Ue.layout_symbol["text-font"]),"text-size":new pi(Ue.layout_symbol["text-size"]),"text-max-width":new pi(Ue.layout_symbol["text-max-width"]),"text-line-height":new oi(Ue.layout_symbol["text-line-height"]),"text-letter-spacing":new pi(Ue.layout_symbol["text-letter-spacing"]),"text-justify":new pi(Ue.layout_symbol["text-justify"]),"text-radial-offset":new pi(Ue.layout_symbol["text-radial-offset"]),"text-variable-anchor":new oi(Ue.layout_symbol["text-variable-anchor"]),"text-anchor":new pi(Ue.layout_symbol["text-anchor"]),"text-max-angle":new oi(Ue.layout_symbol["text-max-angle"]),"text-writing-mode":new oi(Ue.layout_symbol["text-writing-mode"]),"text-rotate":new pi(Ue.layout_symbol["text-rotate"]),"text-padding":new oi(Ue.layout_symbol["text-padding"]),"text-keep-upright":new oi(Ue.layout_symbol["text-keep-upright"]),"text-transform":new pi(Ue.layout_symbol["text-transform"]),"text-offset":new pi(Ue.layout_symbol["text-offset"]),"text-allow-overlap":new oi(Ue.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new oi(Ue.layout_symbol["text-ignore-placement"]),"text-optional":new oi(Ue.layout_symbol["text-optional"])}),R1=new Oa({"icon-opacity":new pi(Ue.paint_symbol["icon-opacity"]),"icon-color":new pi(Ue.paint_symbol["icon-color"]),"icon-halo-color":new pi(Ue.paint_symbol["icon-halo-color"]),"icon-halo-width":new pi(Ue.paint_symbol["icon-halo-width"]),"icon-halo-blur":new pi(Ue.paint_symbol["icon-halo-blur"]),"icon-translate":new oi(Ue.paint_symbol["icon-translate"]),"icon-translate-anchor":new oi(Ue.paint_symbol["icon-translate-anchor"]),"text-opacity":new pi(Ue.paint_symbol["text-opacity"]),"text-color":new pi(Ue.paint_symbol["text-color"],{runtimeType:kn,getOverride:function(m){return m.textColor},hasOverride:function(m){return!!m.textColor}}),"text-halo-color":new pi(Ue.paint_symbol["text-halo-color"]),"text-halo-width":new pi(Ue.paint_symbol["text-halo-width"]),"text-halo-blur":new pi(Ue.paint_symbol["text-halo-blur"]),"text-translate":new oi(Ue.paint_symbol["text-translate"]),"text-translate-anchor":new oi(Ue.paint_symbol["text-translate-anchor"])}),wh={paint:R1,layout:F1},Xc=function(m){this.type=m.property.overrides?m.property.overrides.runtimeType:wr,this.defaultValue=m};Xc.prototype.evaluate=function(m){if(m.formattedSection){var D=this.defaultValue.property.overrides;if(D&&D.hasOverride(m.formattedSection))return D.getOverride(m.formattedSection)}return m.feature&&m.featureState?this.defaultValue.evaluate(m.feature,m.featureState):this.defaultValue.property.specification.default},Xc.prototype.eachChild=function(m){if(!this.defaultValue.isConstant()){var D=this.defaultValue.value;m(D._styleExpression.expression)}},Xc.prototype.outputDefined=function(){return!1},Xc.prototype.serialize=function(){return null},st("FormatSectionOverride",Xc,{omit:["defaultValue"]});var B1=function(m){function D(j){m.call(this,j,wh)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.recalculate=function(j,lt){if(m.prototype.recalculate.call(this,j,lt),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var dt=this.layout.get("text-writing-mode");if(dt){for(var _t=[],Lt=0,Kt=dt;Lt<Kt.length;Lt+=1){var oe=Kt[Lt];_t.indexOf(oe)<0&&_t.push(oe)}this.layout._values["text-writing-mode"]=_t}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},D.prototype.getValueAndResolveTokens=function(j,lt,dt,_t){var Lt=this.layout.get(j).evaluate(lt,{},dt,_t),Kt=this._unevaluatedLayout._values[j];return!Kt.isDataDriven()&&!fs(Kt.value)&&Lt?D1(lt.properties,Lt):Lt},D.prototype.createBucket=function(j){return new ia(j)},D.prototype.queryRadius=function(){return 0},D.prototype.queryIntersectsFeature=function(){return!1},D.prototype._setPaintOverrides=function(){for(var j=0,lt=wh.paint.overridableProperties;j<lt.length;j+=1){var dt=lt[j];if(D.hasPaintOverride(this.layout,dt)){var _t=this.paint.get(dt),Lt=new Xc(_t),Kt=new $o(Lt,_t.property.specification),oe=null;_t.value.kind==="constant"||_t.value.kind==="source"?oe=new ks("source",Kt):oe=new eo("composite",Kt,_t.value.zoomStops,_t.value._interpolationType),this.paint._values[dt]=new aa(_t.property,oe,_t.parameters)}}},D.prototype._handleOverridablePaintPropertyUpdate=function(j,lt,dt){return!this.layout||lt.isDataDriven()||dt.isDataDriven()?!1:D.hasPaintOverride(this.layout,j)},D.hasPaintOverride=function(j,lt){var dt=j.get("text-field"),_t=wh.paint.properties[lt],Lt=!1,Kt=function(Ee){for(var Ne=0,He=Ee;Ne<He.length;Ne+=1){var er=He[Ne];if(_t.overrides&&_t.overrides.hasOverride(er)){Lt=!0;return}}};if(dt.value.kind==="constant"&&dt.value.value instanceof Ea)Kt(dt.value.value.sections);else if(dt.value.kind==="source"){var oe=function(Ee){if(!Lt)if(Ee instanceof io&&va(Ee.value)===$n){var Ne=Ee.value;Kt(Ne.sections)}else Ee instanceof fo?Kt(Ee.sections):Ee.eachChild(oe)},me=dt.value;me._styleExpression&&oe(me._styleExpression.expression)}return Lt},D}(pa),N1=new Oa({"background-color":new oi(Ue.paint_background["background-color"]),"background-pattern":new Aa(Ue.paint_background["background-pattern"]),"background-opacity":new oi(Ue.paint_background["background-opacity"])}),j1={paint:N1},U1=function(m){function D(j){m.call(this,j,j1)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D}(pa),Z1=new Oa({"raster-opacity":new oi(Ue.paint_raster["raster-opacity"]),"raster-hue-rotate":new oi(Ue.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new oi(Ue.paint_raster["raster-brightness-min"]),"raster-brightness-max":new oi(Ue.paint_raster["raster-brightness-max"]),"raster-saturation":new oi(Ue.paint_raster["raster-saturation"]),"raster-contrast":new oi(Ue.paint_raster["raster-contrast"]),"raster-resampling":new oi(Ue.paint_raster["raster-resampling"]),"raster-fade-duration":new oi(Ue.paint_raster["raster-fade-duration"])}),q1={paint:Z1},V1=function(m){function D(j){m.call(this,j,q1)}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D}(pa);function H1(m){var D=[],j=m.id;return j===void 0&&D.push({message:"layers."+j+': missing required property "id"'}),m.render===void 0&&D.push({message:"layers."+j+': missing required method "render"'}),m.renderingMode&&m.renderingMode!=="2d"&&m.renderingMode!=="3d"&&D.push({message:"layers."+j+': property "renderingMode" must be either "2d" or "3d"'}),D}var G1=function(m){function D(j){m.call(this,j,{}),this.implementation=j}return m&&(D.__proto__=m),D.prototype=Object.create(m&&m.prototype),D.prototype.constructor=D,D.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},D.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},D.prototype.recalculate=function(){},D.prototype.updateTransitions=function(){},D.prototype.hasTransition=function(){},D.prototype.serialize=function(){},D.prototype.onAdd=function(j){this.implementation.onAdd&&this.implementation.onAdd(j,j.painter.context.gl)},D.prototype.onRemove=function(j){this.implementation.onRemove&&this.implementation.onRemove(j,j.painter.context.gl)},D}(pa),W1={circle:_d,heatmap:kd,hillshade:Ld,fill:$d,"fill-extrusion":x0,line:O0,symbol:B1,background:U1,raster:V1};function Y1(m){return m.type==="custom"?new G1(m):new W1[m.type](m)}var Pp=self.HTMLImageElement,Ep=self.HTMLCanvasElement,Cp=self.HTMLVideoElement,Op=self.ImageData,Hf=self.ImageBitmap,kc=function(m,D,j,lt){this.context=m,this.format=j,this.texture=m.gl.createTexture(),this.update(D,lt)};kc.prototype.update=function(m,D,j){var lt=m.width,dt=m.height,_t=(!this.size||this.size[0]!==lt||this.size[1]!==dt)&&!j,Lt=this,Kt=Lt.context,oe=Kt.gl;if(this.useMipmap=!!(D&&D.useMipmap),oe.bindTexture(oe.TEXTURE_2D,this.texture),Kt.pixelStoreUnpackFlipY.set(!1),Kt.pixelStoreUnpack.set(1),Kt.pixelStoreUnpackPremultiplyAlpha.set(this.format===oe.RGBA&&(!D||D.premultiply!==!1)),_t)this.size=[lt,dt],m instanceof Pp||m instanceof Ep||m instanceof Cp||m instanceof Op||Hf&&m instanceof Hf?oe.texImage2D(oe.TEXTURE_2D,0,this.format,this.format,oe.UNSIGNED_BYTE,m):oe.texImage2D(oe.TEXTURE_2D,0,this.format,lt,dt,0,this.format,oe.UNSIGNED_BYTE,m.data);else{var me=j||{x:0,y:0},Ee=me.x,Ne=me.y;m instanceof Pp||m instanceof Ep||m instanceof Cp||m instanceof Op||Hf&&m instanceof Hf?oe.texSubImage2D(oe.TEXTURE_2D,0,Ee,Ne,oe.RGBA,oe.UNSIGNED_BYTE,m):oe.texSubImage2D(oe.TEXTURE_2D,0,Ee,Ne,lt,dt,oe.RGBA,oe.UNSIGNED_BYTE,m.data)}this.useMipmap&&this.isSizePowerOfTwo()&&oe.generateMipmap(oe.TEXTURE_2D)},kc.prototype.bind=function(m,D,j){var lt=this,dt=lt.context,_t=dt.gl;_t.bindTexture(_t.TEXTURE_2D,this.texture),j===_t.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(j=_t.LINEAR),m!==this.filter&&(_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_MAG_FILTER,m),_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_MIN_FILTER,j||m),this.filter=m),D!==this.wrap&&(_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_WRAP_S,D),_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_WRAP_T,D),this.wrap=D)},kc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0},kc.prototype.destroy=function(){var m=this.context,D=m.gl;D.deleteTexture(this.texture),this.texture=null};var Ah=function(m){var D=this;this._callback=m,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){D._triggered=!1,D._callback()})};Ah.prototype.trigger=function(){var m=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){m._triggered=!1,m._callback()},0))},Ah.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Kc=function(m,D,j){this.target=m,this.parent=D,this.mapId=j,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},P(["receive","process"],this),this.invoker=new Ah(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=F()?m:self};Kc.prototype.send=function(m,D,j,lt,dt){var _t=this;dt===void 0&&(dt=!1);var Lt=Math.round(Math.random()*1e18).toString(36).substring(0,10);j&&(this.callbacks[Lt]=j);var Kt=K(this.globalScope)?void 0:[];return this.target.postMessage({id:Lt,type:m,hasCallback:!!j,targetMapId:lt,mustQueue:dt,sourceMapId:this.mapId,data:Wt(D,Kt)},Kt),{cancel:function(){j&&delete _t.callbacks[Lt],_t.target.postMessage({id:Lt,type:"<cancel>",targetMapId:lt,sourceMapId:_t.mapId})}}},Kc.prototype.receive=function(m){var D=m.data,j=D.id;if(j&&!(D.targetMapId&&this.mapId!==D.targetMapId))if(D.type==="<cancel>"){delete this.tasks[j];var lt=this.cancelCallbacks[j];delete this.cancelCallbacks[j],lt&&lt()}else F()||D.mustQueue?(this.tasks[j]=D,this.taskQueue.push(j),this.invoker.trigger()):this.processTask(j,D)},Kc.prototype.process=function(){if(this.taskQueue.length){var m=this.taskQueue.shift(),D=this.tasks[m];delete this.tasks[m],this.taskQueue.length&&this.invoker.trigger(),D&&this.processTask(m,D)}},Kc.prototype.processTask=function(m,D){var j=this;if(D.type==="<response>"){var lt=this.callbacks[m];delete this.callbacks[m],lt&&(D.error?lt(Jt(D.error)):lt(null,Jt(D.data)))}else{var dt=!1,_t=K(this.globalScope)?void 0:[],Lt=D.hasCallback?function(Ne,He){dt=!0,delete j.cancelCallbacks[m],j.target.postMessage({id:m,type:"<response>",sourceMapId:j.mapId,error:Ne?Wt(Ne):null,data:Wt(He,_t)},_t)}:function(Ne){dt=!0},Kt=null,oe=Jt(D.data);if(this.parent[D.type])Kt=this.parent[D.type](D.sourceMapId,oe,Lt);else if(this.parent.getWorkerSource){var me=D.type.split("."),Ee=this.parent.getWorkerSource(D.sourceMapId,me[0],oe.source);Kt=Ee[me[1]](oe,Lt)}else Lt(new Error("Could not find function "+D.type));!dt&&Kt&&Kt.cancel&&(this.cancelCallbacks[m]=Kt.cancel)}},Kc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function X1(m,D,j){D=Math.pow(2,j)-D-1;var lt=Ip(m*256,D*256,j),dt=Ip((m+1)*256,(D+1)*256,j);return lt[0]+","+lt[1]+","+dt[0]+","+dt[1]}function Ip(m,D,j){var lt=2*Math.PI*6378137/256/Math.pow(2,j),dt=m*lt-2*Math.PI*6378137/2,_t=D*lt-2*Math.PI*6378137/2;return[dt,_t]}var Ba=function(m,D){m&&(D?this.setSouthWest(m).setNorthEast(D):m.length===4?this.setSouthWest([m[0],m[1]]).setNorthEast([m[2],m[3]]):this.setSouthWest(m[0]).setNorthEast(m[1]))};Ba.prototype.setNorthEast=function(m){return this._ne=m instanceof ya?new ya(m.lng,m.lat):ya.convert(m),this},Ba.prototype.setSouthWest=function(m){return this._sw=m instanceof ya?new ya(m.lng,m.lat):ya.convert(m),this},Ba.prototype.extend=function(m){var D=this._sw,j=this._ne,lt,dt;if(m instanceof ya)lt=m,dt=m;else if(m instanceof Ba){if(lt=m._sw,dt=m._ne,!lt||!dt)return this}else{if(Array.isArray(m))if(m.length===4||m.every(Array.isArray)){var _t=m;return this.extend(Ba.convert(_t))}else{var Lt=m;return this.extend(ya.convert(Lt))}return this}return!D&&!j?(this._sw=new ya(lt.lng,lt.lat),this._ne=new ya(dt.lng,dt.lat)):(D.lng=Math.min(lt.lng,D.lng),D.lat=Math.min(lt.lat,D.lat),j.lng=Math.max(dt.lng,j.lng),j.lat=Math.max(dt.lat,j.lat)),this},Ba.prototype.getCenter=function(){return new ya((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Ba.prototype.getSouthWest=function(){return this._sw},Ba.prototype.getNorthEast=function(){return this._ne},Ba.prototype.getNorthWest=function(){return new ya(this.getWest(),this.getNorth())},Ba.prototype.getSouthEast=function(){return new ya(this.getEast(),this.getSouth())},Ba.prototype.getWest=function(){return this._sw.lng},Ba.prototype.getSouth=function(){return this._sw.lat},Ba.prototype.getEast=function(){return this._ne.lng},Ba.prototype.getNorth=function(){return this._ne.lat},Ba.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Ba.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Ba.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Ba.prototype.contains=function(m){var D=ya.convert(m),j=D.lng,lt=D.lat,dt=this._sw.lat<=lt&&lt<=this._ne.lat,_t=this._sw.lng<=j&&j<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_t=this._sw.lng>=j&&j>=this._ne.lng),dt&&_t},Ba.convert=function(m){return!m||m instanceof Ba?m:new Ba(m)};var zp=63710088e-1,ya=function(m,D){if(isNaN(m)||isNaN(D))throw new Error("Invalid LngLat object: ("+m+", "+D+")");if(this.lng=+m,this.lat=+D,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};ya.prototype.wrap=function(){return new ya(y(this.lng,-180,180),this.lat)},ya.prototype.toArray=function(){return[this.lng,this.lat]},ya.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},ya.prototype.distanceTo=function(m){var D=Math.PI/180,j=this.lat*D,lt=m.lat*D,dt=Math.sin(j)*Math.sin(lt)+Math.cos(j)*Math.cos(lt)*Math.cos((m.lng-this.lng)*D),_t=zp*Math.acos(Math.min(dt,1));return _t},ya.prototype.toBounds=function(m){m===void 0&&(m=0);var D=40075017,j=360*m/D,lt=j/Math.cos(Math.PI/180*this.lat);return new Ba(new ya(this.lng-lt,this.lat-j),new ya(this.lng+lt,this.lat+j))},ya.convert=function(m){if(m instanceof ya)return m;if(Array.isArray(m)&&(m.length===2||m.length===3))return new ya(Number(m[0]),Number(m[1]));if(!Array.isArray(m)&&typeof m=="object"&&m!==null)return new ya(Number("lng"in m?m.lng:m.lon),Number(m.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Dp=2*Math.PI*zp;function Fp(m){return Dp*Math.cos(m*Math.PI/180)}function Rp(m){return(180+m)/360}function Bp(m){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+m*Math.PI/360)))/360}function Np(m,D){return m/Fp(D)}function K1(m){return m*360-180}function Th(m){var D=180-m*360;return 360/Math.PI*Math.atan(Math.exp(D*Math.PI/180))-90}function J1(m,D){return m*Fp(Th(D))}function Q1(m){return 1/Math.cos(m*Math.PI/180)}var Mc=function(m,D,j){j===void 0&&(j=0),this.x=+m,this.y=+D,this.z=+j};Mc.fromLngLat=function(m,D){D===void 0&&(D=0);var j=ya.convert(m);return new Mc(Rp(j.lng),Bp(j.lat),Np(D,j.lat))},Mc.prototype.toLngLat=function(){return new ya(K1(this.x),Th(this.y))},Mc.prototype.toAltitude=function(){return J1(this.z,this.y)},Mc.prototype.meterInMercatorCoordinateUnits=function(){return 1/Dp*Q1(Th(this.y))};var Sc=function(m,D,j){this.z=m,this.x=D,this.y=j,this.key=_f(0,m,m,D,j)};Sc.prototype.equals=function(m){return this.z===m.z&&this.x===m.x&&this.y===m.y},Sc.prototype.url=function(m,D){var j=X1(this.x,this.y,this.z),lt=$1(this.z,this.x,this.y);return m[(this.x+this.y)%m.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(D==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",lt).replace("{bbox-epsg-3857}",j)},Sc.prototype.getTilePoint=function(m){var D=Math.pow(2,this.z);return new e((m.x*D-this.x)*Ii,(m.y*D-this.y)*Ii)},Sc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var jp=function(m,D){this.wrap=m,this.canonical=D,this.key=_f(m,D.z,D.z,D.x,D.y)},Na=function(m,D,j,lt,dt){this.overscaledZ=m,this.wrap=D,this.canonical=new Sc(j,+lt,+dt),this.key=_f(D,m,j,lt,dt)};Na.prototype.equals=function(m){return this.overscaledZ===m.overscaledZ&&this.wrap===m.wrap&&this.canonical.equals(m.canonical)},Na.prototype.scaledTo=function(m){var D=this.canonical.z-m;return m>this.canonical.z?new Na(m,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Na(m,this.wrap,m,this.canonical.x>>D,this.canonical.y>>D)},Na.prototype.calculateScaledKey=function(m,D){var j=this.canonical.z-m;return m>this.canonical.z?_f(this.wrap*+D,m,this.canonical.z,this.canonical.x,this.canonical.y):_f(this.wrap*+D,m,m,this.canonical.x>>j,this.canonical.y>>j)},Na.prototype.isChildOf=function(m){if(m.wrap!==this.wrap)return!1;var D=this.canonical.z-m.canonical.z;return m.overscaledZ===0||m.overscaledZ<this.overscaledZ&&m.canonical.x===this.canonical.x>>D&&m.canonical.y===this.canonical.y>>D},Na.prototype.children=function(m){if(this.overscaledZ>=m)return[new Na(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var D=this.canonical.z+1,j=this.canonical.x*2,lt=this.canonical.y*2;return[new Na(D,this.wrap,D,j,lt),new Na(D,this.wrap,D,j+1,lt),new Na(D,this.wrap,D,j,lt+1),new Na(D,this.wrap,D,j+1,lt+1)]},Na.prototype.isLessThan=function(m){return this.wrap<m.wrap?!0:this.wrap>m.wrap?!1:this.overscaledZ<m.overscaledZ?!0:this.overscaledZ>m.overscaledZ?!1:this.canonical.x<m.canonical.x?!0:this.canonical.x>m.canonical.x?!1:this.canonical.y<m.canonical.y},Na.prototype.wrapped=function(){return new Na(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Na.prototype.unwrapTo=function(m){return new Na(this.overscaledZ,m,this.canonical.z,this.canonical.x,this.canonical.y)},Na.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Na.prototype.toUnwrapped=function(){return new jp(this.wrap,this.canonical)},Na.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Na.prototype.getTilePoint=function(m){return this.canonical.getTilePoint(new Mc(m.x-this.wrap,m.y))};function _f(m,D,j,lt,dt){m*=2,m<0&&(m=m*-1-1);var _t=1<<j;return(_t*_t*m+_t*dt+lt).toString(36)+j.toString(36)+D.toString(36)}function $1(m,D,j){for(var lt="",dt,_t=m;_t>0;_t--)dt=1<<_t-1,lt+=(D&dt?1:0)+(j&dt?2:0);return lt}st("CanonicalTileID",Sc),st("OverscaledTileID",Na,{omit:["posMatrix"]});var gu=function(m,D,j){if(this.uid=m,D.height!==D.width)throw new RangeError("DEM tiles must be square");if(j&&j!=="mapbox"&&j!=="terrarium")return B('"'+j+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=D.height;var lt=this.dim=D.height-2;this.data=new Uint32Array(D.data.buffer),this.encoding=j||"mapbox";for(var dt=0;dt<lt;dt++)this.data[this._idx(-1,dt)]=this.data[this._idx(0,dt)],this.data[this._idx(lt,dt)]=this.data[this._idx(lt-1,dt)],this.data[this._idx(dt,-1)]=this.data[this._idx(dt,0)],this.data[this._idx(dt,lt)]=this.data[this._idx(dt,lt-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(lt,-1)]=this.data[this._idx(lt-1,0)],this.data[this._idx(-1,lt)]=this.data[this._idx(0,lt-1)],this.data[this._idx(lt,lt)]=this.data[this._idx(lt-1,lt-1)]};gu.prototype.get=function(m,D){var j=new Uint8Array(this.data.buffer),lt=this._idx(m,D)*4,dt=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return dt(j[lt],j[lt+1],j[lt+2])},gu.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},gu.prototype._idx=function(m,D){if(m<-1||m>=this.dim+1||D<-1||D>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(D+1)*this.stride+(m+1)},gu.prototype._unpackMapbox=function(m,D,j){return(m*256*256+D*256+j)/10-1e4},gu.prototype._unpackTerrarium=function(m,D,j){return m*256+D+j/256-32768},gu.prototype.getPixels=function(){return new qo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},gu.prototype.backfillBorder=function(m,D,j){if(this.dim!==m.dim)throw new Error("dem dimension mismatch");var lt=D*this.dim,dt=D*this.dim+this.dim,_t=j*this.dim,Lt=j*this.dim+this.dim;switch(D){case-1:lt=dt-1;break;case 1:dt=lt+1;break}switch(j){case-1:_t=Lt-1;break;case 1:Lt=_t+1;break}for(var Kt=-D*this.dim,oe=-j*this.dim,me=_t;me<Lt;me++)for(var Ee=lt;Ee<dt;Ee++)this.data[this._idx(Ee,me)]=m.data[this._idx(Ee+Kt,me+oe)]},st("DEMData",gu);function tv(m,D){var j={};if(!D)return j;for(var lt=function(){var Lt=_t[dt],Kt=Lt.layerIds.map(function(Ne){return D.getLayer(Ne)}).filter(Boolean);if(Kt.length!==0){Lt.layers=Kt,Lt.stateDependentLayerIds&&(Lt.stateDependentLayers=Lt.stateDependentLayerIds.map(function(Ne){return Kt.filter(function(He){return He.id===Ne})[0]}));for(var oe=0,me=Kt;oe<me.length;oe+=1){var Ee=me[oe];j[Ee.id]=Lt}}},dt=0,_t=m;dt<_t.length;dt+=1)lt();return j}var Gf=function(m){this._stringToNumber={},this._numberToString=[];for(var D=0;D<m.length;D++){var j=m[D];this._stringToNumber[j]=D,this._numberToString[D]=j}};Gf.prototype.encode=function(m){return this._stringToNumber[m]},Gf.prototype.decode=function(m){return this._numberToString[m]};var Wf=function(m,D,j,lt,dt){this.type="Feature",this._vectorTileFeature=m,m._z=D,m._x=j,m._y=lt,this.properties=m.properties,this.id=dt},kh={geometry:{configurable:!0}};kh.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},kh.geometry.set=function(m){this._geometry=m},Wf.prototype.toJSON=function(){var m={geometry:this.geometry};for(var D in this)D==="_geometry"||D==="_vectorTileFeature"||(m[D]=this[D]);return m},Object.defineProperties(Wf.prototype,kh);var Jc=function(){this.state={},this.stateChanges={},this.deletedStates={}};Jc.prototype.updateState=function(m,D,j){var lt=String(D);if(this.stateChanges[m]=this.stateChanges[m]||{},this.stateChanges[m][lt]=this.stateChanges[m][lt]||{},u(this.stateChanges[m][lt],j),this.deletedStates[m]===null){this.deletedStates[m]={};for(var dt in this.state[m])dt!==lt&&(this.deletedStates[m][dt]=null)}else{var _t=this.deletedStates[m]&&this.deletedStates[m][lt]===null;if(_t){this.deletedStates[m][lt]={};for(var Lt in this.state[m][lt])j[Lt]||(this.deletedStates[m][lt][Lt]=null)}else for(var Kt in j){var oe=this.deletedStates[m]&&this.deletedStates[m][lt]&&this.deletedStates[m][lt][Kt]===null;oe&&delete this.deletedStates[m][lt][Kt]}}},Jc.prototype.removeFeatureState=function(m,D,j){var lt=this.deletedStates[m]===null;if(!lt){var dt=String(D);if(this.deletedStates[m]=this.deletedStates[m]||{},j&&D!==void 0)this.deletedStates[m][dt]!==null&&(this.deletedStates[m][dt]=this.deletedStates[m][dt]||{},this.deletedStates[m][dt][j]=null);else if(D!==void 0){var _t=this.stateChanges[m]&&this.stateChanges[m][dt];if(_t){this.deletedStates[m][dt]={};for(j in this.stateChanges[m][dt])this.deletedStates[m][dt][j]=null}else this.deletedStates[m][dt]=null}else this.deletedStates[m]=null}},Jc.prototype.getState=function(m,D){var j=String(D),lt=this.state[m]||{},dt=this.stateChanges[m]||{},_t=u({},lt[j],dt[j]);if(this.deletedStates[m]===null)return{};if(this.deletedStates[m]){var Lt=this.deletedStates[m][D];if(Lt===null)return{};for(var Kt in Lt)delete _t[Kt]}return _t},Jc.prototype.initializeTileState=function(m,D){m.setFeatureState(this.state,D)},Jc.prototype.coalesceChanges=function(m,D){var j={};for(var lt in this.stateChanges){this.state[lt]=this.state[lt]||{};var dt={};for(var _t in this.stateChanges[lt])this.state[lt][_t]||(this.state[lt][_t]={}),u(this.state[lt][_t],this.stateChanges[lt][_t]),dt[_t]=this.state[lt][_t];j[lt]=dt}for(var Lt in this.deletedStates){this.state[Lt]=this.state[Lt]||{};var Kt={};if(this.deletedStates[Lt]===null)for(var oe in this.state[Lt])Kt[oe]={},this.state[Lt][oe]={};else for(var me in this.deletedStates[Lt]){var Ee=this.deletedStates[Lt][me]===null;if(Ee)this.state[Lt][me]={};else for(var Ne=0,He=Object.keys(this.deletedStates[Lt][me]);Ne<He.length;Ne+=1){var er=He[Ne];delete this.state[Lt][me][er]}Kt[me]=this.state[Lt][me]}j[Lt]=j[Lt]||{},u(j[Lt],Kt)}if(this.stateChanges={},this.deletedStates={},Object.keys(j).length!==0)for(var yr in m){var zr=m[yr];zr.setFeatureState(j,D)}};var mu=function(m,D){this.tileID=m,this.x=m.canonical.x,this.y=m.canonical.y,this.z=m.canonical.z,this.grid=new bi(Ii,16,0),this.grid3D=new bi(Ii,16,0),this.featureIndexArray=new of,this.promoteId=D};mu.prototype.insert=function(m,D,j,lt,dt,_t){var Lt=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(j,lt,dt);for(var Kt=_t?this.grid3D:this.grid,oe=0;oe<D.length;oe++){for(var me=D[oe],Ee=[1/0,1/0,-1/0,-1/0],Ne=0;Ne<me.length;Ne++){var He=me[Ne];Ee[0]=Math.min(Ee[0],He.x),Ee[1]=Math.min(Ee[1],He.y),Ee[2]=Math.max(Ee[2],He.x),Ee[3]=Math.max(Ee[3],He.y)}Ee[0]<Ii&&Ee[1]<Ii&&Ee[2]>=0&&Ee[3]>=0&&Kt.insert(Lt,Ee[0],Ee[1],Ee[2],Ee[3])}},mu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new jc.VectorTile(new Ff(this.rawTileData)).layers,this.sourceLayerCoder=new Gf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},mu.prototype.query=function(m,D,j,lt){var dt=this;this.loadVTLayers();for(var _t=m.params||{},Lt=Ii/m.tileSize/m.scale,Kt=al(_t.filter),oe=m.queryGeometry,me=m.queryPadding*Lt,Ee=Zp(oe),Ne=this.grid.query(Ee.minX-me,Ee.minY-me,Ee.maxX+me,Ee.maxY+me),He=Zp(m.cameraQueryGeometry),er=this.grid3D.query(He.minX-me,He.minY-me,He.maxX+me,He.maxY+me,function(Ln,Bn,Wn,Qn){return Zu(m.cameraQueryGeometry,Ln-me,Bn-me,Wn+me,Qn+me)}),yr=0,zr=er;yr<zr.length;yr+=1){var un=zr[yr];Ne.push(un)}Ne.sort(ev);for(var Kr={},vn,bn=function(Ln){var Bn=Ne[Ln];if(Bn!==vn){vn=Bn;var Wn=dt.featureIndexArray.get(Bn),Qn=null;dt.loadMatchingFeature(Kr,Wn.bucketIndex,Wn.sourceLayerIndex,Wn.featureIndex,Kt,_t.layers,_t.availableImages,D,j,lt,function(ui,ci,mi){return Qn||(Qn=Fi(ui)),ci.queryIntersectsFeature(oe,ui,mi,Qn,dt.z,m.transform,Lt,m.pixelPosMatrix)})}},pn=0;pn<Ne.length;pn++)bn(pn);return Kr},mu.prototype.loadMatchingFeature=function(m,D,j,lt,dt,_t,Lt,Kt,oe,me,Ee){var Ne=this.bucketLayerIDs[D];if(!(_t&&!I(_t,Ne))){var He=this.sourceLayerCoder.decode(j),er=this.vtLayers[He],yr=er.feature(lt);if(dt.filter(new In(this.tileID.overscaledZ),yr))for(var zr=this.getId(yr,He),un=0;un<Ne.length;un++){var Kr=Ne[un];if(!(_t&&_t.indexOf(Kr)<0)){var vn=Kt[Kr];if(vn){var bn={};zr!==void 0&&me&&(bn=me.getState(vn.sourceLayer||"_geojsonTileLayer",zr));var pn=oe[Kr];pn.paint=Up(pn.paint,vn.paint,yr,bn,Lt),pn.layout=Up(pn.layout,vn.layout,yr,bn,Lt);var Ln=!Ee||Ee(yr,vn,bn);if(Ln){var Bn=new Wf(yr,this.z,this.x,this.y,zr);Bn.layer=pn;var Wn=m[Kr];Wn===void 0&&(Wn=m[Kr]=[]),Wn.push({featureIndex:lt,feature:Bn,intersectionZ:Ln})}}}}}},mu.prototype.lookupSymbolFeatures=function(m,D,j,lt,dt,_t,Lt,Kt){var oe={};this.loadVTLayers();for(var me=al(dt),Ee=0,Ne=m;Ee<Ne.length;Ee+=1){var He=Ne[Ee];this.loadMatchingFeature(oe,j,lt,He,me,_t,Lt,Kt,D)}return oe},mu.prototype.hasLayer=function(m){for(var D=0,j=this.bucketLayerIDs;D<j.length;D+=1)for(var lt=j[D],dt=0,_t=lt;dt<_t.length;dt+=1){var Lt=_t[dt];if(m===Lt)return!0}return!1},mu.prototype.getId=function(m,D){var j=m.id;if(this.promoteId){var lt=typeof this.promoteId=="string"?this.promoteId:this.promoteId[D];j=m.properties[lt],typeof j=="boolean"&&(j=Number(j))}return j},st("FeatureIndex",mu,{omit:["rawTileData","sourceLayerCoder"]});function Up(m,D,j,lt,dt){return d(m,function(_t,Lt){var Kt=D instanceof Ki?D.get(Lt):null;return Kt&&Kt.evaluate?Kt.evaluate(j,lt,dt):Kt})}function Zp(m){for(var D=1/0,j=1/0,lt=-1/0,dt=-1/0,_t=0,Lt=m;_t<Lt.length;_t+=1){var Kt=Lt[_t];D=Math.min(D,Kt.x),j=Math.min(j,Kt.y),lt=Math.max(lt,Kt.x),dt=Math.max(dt,Kt.y)}return{minX:D,minY:j,maxX:lt,maxY:dt}}function ev(m,D){return D-m}var rv=3e4,Xa=function(m,D){this.tileID=m,this.uid=k(),this.uses=0,this.tileSize=D,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Xa.prototype.registerFadeDuration=function(m){var D=m+this.timeAdded;D<nt.now()||this.fadeEndTime&&D<this.fadeEndTime||(this.fadeEndTime=D)},Xa.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Xa.prototype.loadVectorData=function(m,D,j){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!m){this.collisionBoxArray=new Bl;return}m.featureIndex&&(this.latestFeatureIndex=m.featureIndex,m.rawTileData?(this.latestRawTileData=m.rawTileData,this.latestFeatureIndex.rawTileData=m.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=m.collisionBoxArray,this.buckets=tv(m.buckets,D.style),this.hasSymbolBuckets=!1;for(var lt in this.buckets){var dt=this.buckets[lt];if(dt instanceof ia)if(this.hasSymbolBuckets=!0,j)dt.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var _t in this.buckets){var Lt=this.buckets[_t];if(Lt instanceof ia&&Lt.hasRTLText){this.hasRTLText=!0,Xi();break}}this.queryPadding=0;for(var Kt in this.buckets){var oe=this.buckets[Kt];this.queryPadding=Math.max(this.queryPadding,D.style.getLayer(Kt).queryRadius(oe))}m.imageAtlas&&(this.imageAtlas=m.imageAtlas),m.glyphAtlasImage&&(this.glyphAtlasImage=m.glyphAtlasImage)},Xa.prototype.unloadVectorData=function(){for(var m in this.buckets)this.buckets[m].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Xa.prototype.getBucket=function(m){return this.buckets[m.id]},Xa.prototype.upload=function(m){for(var D in this.buckets){var j=this.buckets[D];j.uploadPending()&&j.upload(m)}var lt=m.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new kc(m,this.imageAtlas.image,lt.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new kc(m,this.glyphAtlasImage,lt.ALPHA),this.glyphAtlasImage=null)},Xa.prototype.prepare=function(m){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(m,this.imageAtlasTexture)},Xa.prototype.queryRenderedFeatures=function(m,D,j,lt,dt,_t,Lt,Kt,oe,me){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:lt,cameraQueryGeometry:dt,scale:_t,tileSize:this.tileSize,pixelPosMatrix:me,transform:Kt,params:Lt,queryPadding:this.queryPadding*oe},m,D,j)},Xa.prototype.querySourceFeatures=function(m,D){var j=this.latestFeatureIndex;if(!(!j||!j.rawTileData)){var lt=j.loadVTLayers(),dt=D?D.sourceLayer:"",_t=lt._geojsonTileLayer||lt[dt];if(_t)for(var Lt=al(D&&D.filter),Kt=this.tileID.canonical,oe=Kt.z,me=Kt.x,Ee=Kt.y,Ne={z:oe,x:me,y:Ee},He=0;He<_t.length;He++){var er=_t.feature(He);if(Lt.filter(new In(this.tileID.overscaledZ),er)){var yr=j.getId(er,dt),zr=new Wf(er,oe,me,Ee,yr);zr.tile=Ne,m.push(zr)}}}},Xa.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Xa.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Xa.prototype.setExpiryData=function(m){var D=this.expirationTime;if(m.cacheControl){var j=N(m.cacheControl);j["max-age"]&&(this.expirationTime=Date.now()+j["max-age"]*1e3)}else m.expires&&(this.expirationTime=new Date(m.expires).getTime());if(this.expirationTime){var lt=Date.now(),dt=!1;if(this.expirationTime>lt)dt=!1;else if(!D)dt=!0;else if(this.expirationTime<D)dt=!0;else{var _t=this.expirationTime-D;_t?this.expirationTime=lt+Math.max(_t,rv):dt=!0}dt?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Xa.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Xa.prototype.setFeatureState=function(m,D){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(m).length===0)){var j=this.latestFeatureIndex.loadVTLayers();for(var lt in this.buckets)if(D.style.hasLayer(lt)){var dt=this.buckets[lt],_t=dt.layers[0].sourceLayer||"_geojsonTileLayer",Lt=j[_t],Kt=m[_t];if(!(!Lt||!Kt||Object.keys(Kt).length===0)){dt.update(Kt,Lt,this.imageAtlas&&this.imageAtlas.patternPositions||{});var oe=D&&D.style&&D.style.getLayer(lt);oe&&(this.queryPadding=Math.max(this.queryPadding,oe.queryRadius(dt)))}}}},Xa.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Xa.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<nt.now()},Xa.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Xa.prototype.setHoldDuration=function(m){this.symbolFadeHoldUntil=nt.now()+m},Xa.prototype.setDependencies=function(m,D){for(var j={},lt=0,dt=D;lt<dt.length;lt+=1){var _t=dt[lt];j[_t]=!0}this.dependencies[m]=j},Xa.prototype.hasDependency=function(m,D){for(var j=0,lt=m;j<lt.length;j+=1){var dt=lt[j],_t=this.dependencies[dt];if(_t)for(var Lt=0,Kt=D;Lt<Kt.length;Lt+=1){var oe=Kt[Lt];if(_t[oe])return!0}}return!1};var nv=["type","source","source-layer","minzoom","maxzoom","filter","layout"],Wu=self.performance,qp=function(m){this._marks={start:[m.url,"start"].join("#"),end:[m.url,"end"].join("#"),measure:m.url.toString()},Wu.mark(this._marks.start)};qp.prototype.finish=function(){Wu.mark(this._marks.end);var m=Wu.getEntriesByName(this._marks.measure);return m.length===0&&(Wu.measure(this._marks.measure,this._marks.start,this._marks.end),m=Wu.getEntriesByName(this._marks.measure),Wu.clearMarks(this._marks.start),Wu.clearMarks(this._marks.end),Wu.clearMeasures(this._marks.measure)),m},i.Actor=Kc,i.AlphaImage=Tc,i.CanonicalTileID=Sc,i.CollisionBoxArray=Bl,i.Color=Hi,i.DEMData=gu,i.DataConstantProperty=oi,i.DictionaryCoder=Gf,i.EXTENT=Ii,i.ErrorEvent=Je,i.EvaluationParameters=In,i.Event=Be,i.Evented=$e,i.FeatureIndex=mu,i.FillBucket=hl,i.FillExtrusionBucket=pl,i.ImageAtlas=mf,i.ImagePosition=Bf,i.LineBucket=Vo,i.LngLat=ya,i.LngLatBounds=Ba,i.MercatorCoordinate=Mc,i.ONE_EM=ro,i.OverscaledTileID=Na,i.Point=e,i.Point$1=e,i.Properties=Oa,i.Protobuf=Ff,i.RGBAImage=qo,i.RequestManager=mt,i.RequestPerformance=qp,i.ResourceType=he,i.SegmentVector=tt,i.SourceFeatureState=Jc,i.StructArrayLayout1ui2=ju,i.StructArrayLayout2f1f2i16=ul,i.StructArrayLayout2i4=mc,i.StructArrayLayout3ui6=cl,i.StructArrayLayout4i8=zl,i.SymbolBucket=ia,i.Texture=kc,i.Tile=Xa,i.Transitionable=zi,i.Uniform1f=Rr,i.Uniform1i=Fr,i.Uniform2f=Xr,i.Uniform3f=on,i.Uniform4f=Cn,i.UniformColor=En,i.UniformMatrix4f=Nn,i.UnwrappedTileID=jp,i.ValidationError=fr,i.WritingMode=vs,i.ZoomHistory=ge,i.add=eh,i.addDynamicAttributes=_h,i.asyncAll=p,i.bezier=a,i.bindAll=P,i.browser=nt,i.cacheEntryPossiblyAdded=Fe,i.clamp=h,i.clearTileCache=Ae,i.clipLine=Ap,i.clone=Pf,i.clone$1=w,i.clone$2=Rc,i.collisionCircleLayout=F0,i.config=X,i.create=Dc,i.create$1=Vu,i.create$2=_c,i.createCommonjsModule=S,i.createExpression=Ts,i.createLayout=sa,i.createStyleLayer=Y1,i.cross=hd,i.deepEqual=f,i.dot=fd,i.dot$1=md,i.ease=o,i.emitValidationErrors=vi,i.endsWith=l,i.enforceCacheSizeLimit=De,i.evaluateSizeForFeature=gp,i.evaluateSizeForZoom=mp,i.evaluateVariableOffset=Mp,i.evented=si,i.extend=u,i.featureFilter=al,i.filterObject=L,i.fromRotation=zc,i.getAnchorAlignment=mh,i.getAnchorJustification=bh,i.getArrayBuffer=ye,i.getImage=Dt,i.getJSON=fe,i.getRTLTextPluginStatus=Ei,i.getReferrer=Re,i.getVideo=Ut,i.identity=Ul,i.invert=wc,i.isChar=ne,i.isMapboxURL=gt,i.keysDifference=s,i.makeRequest=re,i.mapObject=d,i.mercatorXfromLng=Rp,i.mercatorYfromLat=Bp,i.mercatorZfromAltitude=Np,i.mul=Ac,i.multiply=ka,i.mvt=jc,i.normalize=cd,i.number=xa,i.offscreenCanvasSupported=Sr,i.ortho=$f,i.parseGlyphPBF=c1,i.pbf=Ff,i.performSymbolLayout=L1,i.perspective=Qf,i.pick=c,i.plugin=Gi,i.polygonIntersectsPolygon=Ni,i.postMapLoadEvent=Mt,i.postTurnstileEvent=we,i.potpack=lp,i.refProperties=nv,i.register=st,i.registerForPluginStateChange=di,i.rotate=mo,i.rotateX=Fc,i.rotateZ=sf,i.scale=Zo,i.scale$1=gd,i.scale$2=lf,i.setCacheLimits=Ve,i.setRTLTextPlugin=Li,i.sphericalToCartesian=C,i.sqrLen=bd,i.styleSpec=Ue,i.sub=dd,i.symbolSize=x1,i.transformMat3=pd,i.transformMat4=Ef,i.translate=Uo,i.triggerPluginCompletionEvent=Yn,i.uniqueId=k,i.validateCustomStyleLayer=H1,i.validateLight=dn,i.validateStyle=hn,i.values=x,i.vectorTile=jc,i.version=A,i.warnOnce=B,i.webpSupported=Y,i.window=self,i.wrap=y}),E(["./shared"],function(i){function S(Gt){var re=typeof Gt;if(re==="number"||re==="boolean"||re==="string"||Gt===void 0||Gt===null)return JSON.stringify(Gt);if(Array.isArray(Gt)){for(var fe="[",ye=0,Le=Gt;ye<Le.length;ye+=1){var _e=Le[ye];fe+=S(_e)+","}return fe+"]"}for(var Ce=Object.keys(Gt).sort(),ze="{",We=0;We<Ce.length;We++)ze+=JSON.stringify(Ce[We])+":"+S(Gt[Ce[We]])+",";return ze+"}"}function A(Gt){for(var re="",fe=0,ye=i.refProperties;fe<ye.length;fe+=1){var Le=ye[fe];re+="/"+S(Gt[Le])}return re}function g(Gt,re){for(var fe={},ye=0;ye<Gt.length;ye++){var Le=re&&re[Gt[ye].id]||A(Gt[ye]);re&&(re[Gt[ye].id]=Le);var _e=fe[Le];_e||(_e=fe[Le]=[]),_e.push(Gt[ye])}var Ce=[];for(var ze in fe)Ce.push(fe[ze]);return Ce}var v=function(Gt){this.keyCache={},Gt&&this.replace(Gt)};v.prototype.replace=function(Gt){this._layerConfigs={},this._layers={},this.update(Gt,[])},v.prototype.update=function(Gt,re){for(var fe=this,ye=0,Le=Gt;ye<Le.length;ye+=1){var _e=Le[ye];this._layerConfigs[_e.id]=_e;var Ce=this._layers[_e.id]=i.createStyleLayer(_e);Ce._featureFilter=i.featureFilter(Ce.filter),this.keyCache[_e.id]&&delete this.keyCache[_e.id]}for(var ze=0,We=re;ze<We.length;ze+=1){var qe=We[ze];delete this.keyCache[qe],delete this._layerConfigs[qe],delete this._layers[qe]}this.familiesBySource={};for(var ir=g(i.values(this._layerConfigs),this.keyCache),xr=0,Dt=ir;xr<Dt.length;xr+=1){var Ut=Dt[xr],Te=Ut.map(function(Oe){return fe._layers[Oe.id]}),Se=Te[0];if(Se.visibility!=="none"){var Be=Se.source||"",Je=this.familiesBySource[Be];Je||(Je=this.familiesBySource[Be]={});var $e=Se.sourceLayer||"_geojsonTileLayer",Xe=Je[$e];Xe||(Xe=Je[$e]=[]),Xe.push(Te)}}};var e=1,r=function(Gt){var re={},fe=[];for(var ye in Gt){var Le=Gt[ye],_e=re[ye]={};for(var Ce in Le){var ze=Le[+Ce];if(!(!ze||ze.bitmap.width===0||ze.bitmap.height===0)){var We={x:0,y:0,w:ze.bitmap.width+2*e,h:ze.bitmap.height+2*e};fe.push(We),_e[Ce]={rect:We,metrics:ze.metrics}}}}var qe=i.potpack(fe),ir=qe.w,xr=qe.h,Dt=new i.AlphaImage({width:ir||1,height:xr||1});for(var Ut in Gt){var Te=Gt[Ut];for(var Se in Te){var Be=Te[+Se];if(!(!Be||Be.bitmap.width===0||Be.bitmap.height===0)){var Je=re[Ut][Se].rect;i.AlphaImage.copy(Be.bitmap,Dt,{x:0,y:0},{x:Je.x+e,y:Je.y+e},Be.bitmap)}}}this.image=Dt,this.positions=re};i.register("GlyphAtlas",r);var f=function(Gt){this.tileID=new i.OverscaledTileID(Gt.tileID.overscaledZ,Gt.tileID.wrap,Gt.tileID.canonical.z,Gt.tileID.canonical.x,Gt.tileID.canonical.y),this.uid=Gt.uid,this.zoom=Gt.zoom,this.pixelRatio=Gt.pixelRatio,this.tileSize=Gt.tileSize,this.source=Gt.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Gt.showCollisionBoxes,this.collectResourceTiming=!!Gt.collectResourceTiming,this.returnDependencies=!!Gt.returnDependencies,this.promoteId=Gt.promoteId};f.prototype.parse=function(Gt,re,fe,ye,Le){var _e=this;this.status="parsing",this.data=Gt,this.collisionBoxArray=new i.CollisionBoxArray;var Ce=new i.DictionaryCoder(Object.keys(Gt.layers).sort()),ze=new i.FeatureIndex(this.tileID,this.promoteId);ze.bucketLayerIDs=[];var We={},qe={featureIndex:ze,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:fe},ir=re.familiesBySource[this.source];for(var xr in ir){var Dt=Gt.layers[xr];if(Dt){Dt.version===1&&i.warnOnce('Vector tile source "'+this.source+'" layer "'+xr+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ut=Ce.encode(xr),Te=[],Se=0;Se<Dt.length;Se++){var Be=Dt.feature(Se),Je=ze.getId(Be,xr);Te.push({feature:Be,id:Je,index:Se,sourceLayerIndex:Ut})}for(var $e=0,Xe=ir[xr];$e<Xe.length;$e+=1){var Oe=Xe[$e],ar=Oe[0];if(!(ar.minzoom&&this.zoom<Math.floor(ar.minzoom))&&!(ar.maxzoom&&this.zoom>=ar.maxzoom)&&ar.visibility!=="none"){n(Oe,this.zoom,fe);var cr=We[ar.id]=ar.createBucket({index:ze.bucketLayerIDs.length,layers:Oe,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ut,sourceID:this.source});cr.populate(Te,qe,this.tileID.canonical),ze.bucketLayerIDs.push(Oe.map(function(Tn){return Tn.id}))}}}}var sr,lr,Or,Ir,Pr=i.mapObject(qe.glyphDependencies,function(Tn){return Object.keys(Tn).map(Number)});Object.keys(Pr).length?ye.send("getGlyphs",{uid:this.uid,stacks:Pr},function(Tn,hr){sr||(sr=Tn,lr=hr,yn.call(_e))}):lr={};var rn=Object.keys(qe.iconDependencies);rn.length?ye.send("getImages",{icons:rn,source:this.source,tileID:this.tileID,type:"icons"},function(Tn,hr){sr||(sr=Tn,Or=hr,yn.call(_e))}):Or={};var Zr=Object.keys(qe.patternDependencies);Zr.length?ye.send("getImages",{icons:Zr,source:this.source,tileID:this.tileID,type:"patterns"},function(Tn,hr){sr||(sr=Tn,Ir=hr,yn.call(_e))}):Ir={},yn.call(this);function yn(){if(sr)return Le(sr);if(lr&&Or&&Ir){var Tn=new r(lr),hr=new i.ImageAtlas(Or,Ir);for(var dr in We){var Lr=We[dr];Lr instanceof i.SymbolBucket?(n(Lr.layers,this.zoom,fe),i.performSymbolLayout(Lr,lr,Tn.positions,Or,hr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Lr.hasPattern&&(Lr instanceof i.LineBucket||Lr instanceof i.FillBucket||Lr instanceof i.FillExtrusionBucket)&&(n(Lr.layers,this.zoom,fe),Lr.addFeatures(qe,this.tileID.canonical,hr.patternPositions))}this.status="done",Le(null,{buckets:i.values(We).filter(function(Cr){return!Cr.isEmpty()}),featureIndex:ze,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Tn.image,imageAtlas:hr,glyphMap:this.returnDependencies?lr:null,iconMap:this.returnDependencies?Or:null,glyphPositions:this.returnDependencies?Tn.positions:null})}}};function n(Gt,re,fe){for(var ye=new i.EvaluationParameters(re),Le=0,_e=Gt;Le<_e.length;Le+=1){var Ce=_e[Le];Ce.recalculate(ye,fe)}}function a(Gt,re){var fe=i.getArrayBuffer(Gt.request,function(ye,Le,_e,Ce){ye?re(ye):Le&&re(null,{vectorTile:new i.vectorTile.VectorTile(new i.pbf(Le)),rawData:Le,cacheControl:_e,expires:Ce})});return function(){fe.cancel(),re()}}var o=function(Gt,re,fe,ye){this.actor=Gt,this.layerIndex=re,this.availableImages=fe,this.loadVectorData=ye||a,this.loading={},this.loaded={}};o.prototype.loadTile=function(Gt,re){var fe=this,ye=Gt.uid;this.loading||(this.loading={});var Le=Gt&&Gt.request&&Gt.request.collectResourceTiming?new i.RequestPerformance(Gt.request):!1,_e=this.loading[ye]=new f(Gt);_e.abort=this.loadVectorData(Gt,function(Ce,ze){if(delete fe.loading[ye],Ce||!ze)return _e.status="done",fe.loaded[ye]=_e,re(Ce);var We=ze.rawData,qe={};ze.expires&&(qe.expires=ze.expires),ze.cacheControl&&(qe.cacheControl=ze.cacheControl);var ir={};if(Le){var xr=Le.finish();xr&&(ir.resourceTiming=JSON.parse(JSON.stringify(xr)))}_e.vectorTile=ze.vectorTile,_e.parse(ze.vectorTile,fe.layerIndex,fe.availableImages,fe.actor,function(Dt,Ut){if(Dt||!Ut)return re(Dt);re(null,i.extend({rawTileData:We.slice(0)},Ut,qe,ir))}),fe.loaded=fe.loaded||{},fe.loaded[ye]=_e})},o.prototype.reloadTile=function(Gt,re){var fe=this,ye=this.loaded,Le=Gt.uid,_e=this;if(ye&&ye[Le]){var Ce=ye[Le];Ce.showCollisionBoxes=Gt.showCollisionBoxes;var ze=function(We,qe){var ir=Ce.reloadCallback;ir&&(delete Ce.reloadCallback,Ce.parse(Ce.vectorTile,_e.layerIndex,fe.availableImages,_e.actor,ir)),re(We,qe)};Ce.status==="parsing"?Ce.reloadCallback=ze:Ce.status==="done"&&(Ce.vectorTile?Ce.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor,ze):ze())}},o.prototype.abortTile=function(Gt,re){var fe=this.loading,ye=Gt.uid;fe&&fe[ye]&&fe[ye].abort&&(fe[ye].abort(),delete fe[ye]),re()},o.prototype.removeTile=function(Gt,re){var fe=this.loaded,ye=Gt.uid;fe&&fe[ye]&&delete fe[ye],re()};var h=i.window.ImageBitmap,y=function(){this.loaded={}};y.prototype.loadTile=function(Gt,re){var fe=Gt.uid,ye=Gt.encoding,Le=Gt.rawImageData,_e=h&&Le instanceof h?this.getImageData(Le):Le,Ce=new i.DEMData(fe,_e,ye);this.loaded=this.loaded||{},this.loaded[fe]=Ce,re(null,Ce)},y.prototype.getImageData=function(Gt){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(Gt.width,Gt.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Gt.width,this.offscreenCanvas.height=Gt.height,this.offscreenCanvasContext.drawImage(Gt,0,0,Gt.width,Gt.height);var re=this.offscreenCanvasContext.getImageData(-1,-1,Gt.width+2,Gt.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new i.RGBAImage({width:re.width,height:re.height},re.data)},y.prototype.removeTile=function(Gt){var re=this.loaded,fe=Gt.uid;re&&re[fe]&&delete re[fe]};var p=x;function x(Gt,re){var fe=Gt&&Gt.type,ye;if(fe==="FeatureCollection")for(ye=0;ye<Gt.features.length;ye++)x(Gt.features[ye],re);else if(fe==="GeometryCollection")for(ye=0;ye<Gt.geometries.length;ye++)x(Gt.geometries[ye],re);else if(fe==="Feature")x(Gt.geometry,re);else if(fe==="Polygon")s(Gt.coordinates,re);else if(fe==="MultiPolygon")for(ye=0;ye<Gt.coordinates.length;ye++)s(Gt.coordinates[ye],re);return Gt}function s(Gt,re){if(Gt.length!==0){u(Gt[0],re);for(var fe=1;fe<Gt.length;fe++)u(Gt[fe],!re)}}function u(Gt,re){for(var fe=0,ye=0,Le=Gt.length,_e=Le-1;ye<Le;_e=ye++)fe+=(Gt[ye][0]-Gt[_e][0])*(Gt[_e][1]+Gt[ye][1]);fe>=0!=!!re&&Gt.reverse()}var c=i.vectorTile.VectorTileFeature.prototype.toGeoJSON,T=function(Gt){this._feature=Gt,this.extent=i.EXTENT,this.type=Gt.type,this.properties=Gt.tags,"id"in Gt&&!isNaN(Gt.id)&&(this.id=parseInt(Gt.id,10))};T.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Gt=[],re=0,fe=this._feature.geometry;re<fe.length;re+=1){var ye=fe[re];Gt.push([new i.Point$1(ye[0],ye[1])])}return Gt}else{for(var Le=[],_e=0,Ce=this._feature.geometry;_e<Ce.length;_e+=1){for(var ze=Ce[_e],We=[],qe=0,ir=ze;qe<ir.length;qe+=1){var xr=ir[qe];We.push(new i.Point$1(xr[0],xr[1]))}Le.push(We)}return Le}},T.prototype.toGeoJSON=function(Gt,re,fe){return c.call(this,Gt,re,fe)};var k=function(Gt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.EXTENT,this.length=Gt.length,this._features=Gt};k.prototype.feature=function(Gt){return new T(this._features[Gt])};var _=i.vectorTile.VectorTileFeature,b=P;function P(Gt,re){this.options=re||{},this.features=Gt,this.length=Gt.length}P.prototype.feature=function(Gt){return new l(this.features[Gt],this.options.extent)};function l(Gt,re){this.id=typeof Gt.id=="number"?Gt.id:void 0,this.type=Gt.type,this.rawGeometry=Gt.type===1?[Gt.geometry]:Gt.geometry,this.properties=Gt.tags,this.extent=re||4096}l.prototype.loadGeometry=function(){var Gt=this.rawGeometry;this.geometry=[];for(var re=0;re<Gt.length;re++){for(var fe=Gt[re],ye=[],Le=0;Le<fe.length;Le++)ye.push(new i.Point$1(fe[Le][0],fe[Le][1]));this.geometry.push(ye)}return this.geometry},l.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Gt=this.geometry,re=1/0,fe=-1/0,ye=1/0,Le=-1/0,_e=0;_e<Gt.length;_e++)for(var Ce=Gt[_e],ze=0;ze<Ce.length;ze++){var We=Ce[ze];re=Math.min(re,We.x),fe=Math.max(fe,We.x),ye=Math.min(ye,We.y),Le=Math.max(Le,We.y)}return[re,ye,fe,Le]},l.prototype.toGeoJSON=_.prototype.toGeoJSON;var d=z,L=z,w=B,I=b;function z(Gt){var re=new i.pbf;return O(Gt,re),re.finish()}function B(Gt,re){re=re||{};var fe={};for(var ye in Gt)fe[ye]=new b(Gt[ye].features,re),fe[ye].name=ye,fe[ye].version=re.version,fe[ye].extent=re.extent;return z({layers:fe})}function O(Gt,re){for(var fe in Gt.layers)re.writeMessage(3,R,Gt.layers[fe])}function R(Gt,re){re.writeVarintField(15,Gt.version||1),re.writeStringField(1,Gt.name||""),re.writeVarintField(5,Gt.extent||4096);var fe,ye={keys:[],values:[],keycache:{},valuecache:{}};for(fe=0;fe<Gt.length;fe++)ye.feature=Gt.feature(fe),re.writeMessage(2,C,ye);var Le=ye.keys;for(fe=0;fe<Le.length;fe++)re.writeStringField(3,Le[fe]);var _e=ye.values;for(fe=0;fe<_e.length;fe++)re.writeMessage(4,Q,_e[fe])}function C(Gt,re){var fe=Gt.feature;fe.id!==void 0&&re.writeVarintField(1,fe.id),re.writeMessage(2,F,Gt),re.writeVarintField(3,fe.type),re.writeMessage(4,K,fe)}function F(Gt,re){var fe=Gt.feature,ye=Gt.keys,Le=Gt.values,_e=Gt.keycache,Ce=Gt.valuecache;for(var ze in fe.properties){var We=_e[ze];typeof We>"u"&&(ye.push(ze),We=ye.length-1,_e[ze]=We),re.writeVarint(We);var qe=fe.properties[ze],ir=typeof qe;ir!=="string"&&ir!=="boolean"&&ir!=="number"&&(qe=JSON.stringify(qe));var xr=ir+":"+qe,Dt=Ce[xr];typeof Dt>"u"&&(Le.push(qe),Dt=Le.length-1,Ce[xr]=Dt),re.writeVarint(Dt)}}function N(Gt,re){return(re<<3)+(Gt&7)}function V(Gt){return Gt<<1^Gt>>31}function K(Gt,re){for(var fe=Gt.loadGeometry(),ye=Gt.type,Le=0,_e=0,Ce=fe.length,ze=0;ze<Ce;ze++){var We=fe[ze],qe=1;ye===1&&(qe=We.length),re.writeVarint(N(1,qe));for(var ir=ye===3?We.length-1:We.length,xr=0;xr<ir;xr++){xr===1&&ye!==1&&re.writeVarint(N(2,ir-1));var Dt=We[xr].x-Le,Ut=We[xr].y-_e;re.writeVarint(V(Dt)),re.writeVarint(V(Ut)),Le+=Dt,_e+=Ut}ye===3&&re.writeVarint(N(7,1))}}function Q(Gt,re){var fe=typeof Gt;fe==="string"?re.writeStringField(1,Gt):fe==="boolean"?re.writeBooleanField(7,Gt):fe==="number"&&(Gt%1!==0?re.writeDoubleField(3,Gt):Gt<0?re.writeSVarintField(6,Gt):re.writeVarintField(5,Gt))}d.fromVectorTileJs=L,d.fromGeojsonVt=w,d.GeoJSONWrapper=I;function at(Gt,re,fe,ye,Le,_e){if(!(Le-ye<=fe)){var Ce=ye+Le>>1;it(Gt,re,Ce,ye,Le,_e%2),at(Gt,re,fe,ye,Ce-1,_e+1),at(Gt,re,fe,Ce+1,Le,_e+1)}}function it(Gt,re,fe,ye,Le,_e){for(;Le>ye;){if(Le-ye>600){var Ce=Le-ye+1,ze=fe-ye+1,We=Math.log(Ce),qe=.5*Math.exp(2*We/3),ir=.5*Math.sqrt(We*qe*(Ce-qe)/Ce)*(ze-Ce/2<0?-1:1),xr=Math.max(ye,Math.floor(fe-ze*qe/Ce+ir)),Dt=Math.min(Le,Math.floor(fe+(Ce-ze)*qe/Ce+ir));it(Gt,re,fe,xr,Dt,_e)}var Ut=re[2*fe+_e],Te=ye,Se=Le;for(q(Gt,re,ye,fe),re[2*Le+_e]>Ut&&q(Gt,re,ye,Le);Te<Se;){for(q(Gt,re,Te,Se),Te++,Se--;re[2*Te+_e]<Ut;)Te++;for(;re[2*Se+_e]>Ut;)Se--}re[2*ye+_e]===Ut?q(Gt,re,ye,Se):(Se++,q(Gt,re,Se,Le)),Se<=fe&&(ye=Se+1),fe<=Se&&(Le=Se-1)}}function q(Gt,re,fe,ye){W(Gt,fe,ye),W(re,2*fe,2*ye),W(re,2*fe+1,2*ye+1)}function W(Gt,re,fe){var ye=Gt[re];Gt[re]=Gt[fe],Gt[fe]=ye}function Z(Gt,re,fe,ye,Le,_e,Ce){for(var ze=[0,Gt.length-1,0],We=[],qe,ir;ze.length;){var xr=ze.pop(),Dt=ze.pop(),Ut=ze.pop();if(Dt-Ut<=Ce){for(var Te=Ut;Te<=Dt;Te++)qe=re[2*Te],ir=re[2*Te+1],qe>=fe&&qe<=Le&&ir>=ye&&ir<=_e&&We.push(Gt[Te]);continue}var Se=Math.floor((Ut+Dt)/2);qe=re[2*Se],ir=re[2*Se+1],qe>=fe&&qe<=Le&&ir>=ye&&ir<=_e&&We.push(Gt[Se]);var Be=(xr+1)%2;(xr===0?fe<=qe:ye<=ir)&&(ze.push(Ut),ze.push(Se-1),ze.push(Be)),(xr===0?Le>=qe:_e>=ir)&&(ze.push(Se+1),ze.push(Dt),ze.push(Be))}return We}function G(Gt,re,fe,ye,Le,_e){for(var Ce=[0,Gt.length-1,0],ze=[],We=Le*Le;Ce.length;){var qe=Ce.pop(),ir=Ce.pop(),xr=Ce.pop();if(ir-xr<=_e){for(var Dt=xr;Dt<=ir;Dt++)et(re[2*Dt],re[2*Dt+1],fe,ye)<=We&&ze.push(Gt[Dt]);continue}var Ut=Math.floor((xr+ir)/2),Te=re[2*Ut],Se=re[2*Ut+1];et(Te,Se,fe,ye)<=We&&ze.push(Gt[Ut]);var Be=(qe+1)%2;(qe===0?fe-Le<=Te:ye-Le<=Se)&&(Ce.push(xr),Ce.push(Ut-1),Ce.push(Be)),(qe===0?fe+Le>=Te:ye+Le>=Se)&&(Ce.push(Ut+1),Ce.push(ir),Ce.push(Be))}return ze}function et(Gt,re,fe,ye){var Le=Gt-fe,_e=re-ye;return Le*Le+_e*_e}var nt=function(Gt){return Gt[0]},X=function(Gt){return Gt[1]},Y=function(Gt,re,fe,ye,Le){re===void 0&&(re=nt),fe===void 0&&(fe=X),ye===void 0&&(ye=64),Le===void 0&&(Le=Float64Array),this.nodeSize=ye,this.points=Gt;for(var _e=Gt.length<65536?Uint16Array:Uint32Array,Ce=this.ids=new _e(Gt.length),ze=this.coords=new Le(Gt.length*2),We=0;We<Gt.length;We++)Ce[We]=We,ze[2*We]=re(Gt[We]),ze[2*We+1]=fe(Gt[We]);at(Ce,ze,ye,0,Ce.length-1,0)};Y.prototype.range=function(Gt,re,fe,ye){return Z(this.ids,this.coords,Gt,re,fe,ye,this.nodeSize)},Y.prototype.within=function(Gt,re,fe){return G(this.ids,this.coords,Gt,re,fe,this.nodeSize)};var ot={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Gt){return Gt}},rt=function(Gt){this.options=wt(Object.create(ot),Gt),this.trees=new Array(this.options.maxZoom+1)};rt.prototype.load=function(Gt){var re=this.options,fe=re.log,ye=re.minZoom,Le=re.maxZoom,_e=re.nodeSize;fe&&console.time("total time");var Ce="prepare "+Gt.length+" points";fe&&console.time(Ce),this.points=Gt;for(var ze=[],We=0;We<Gt.length;We++)Gt[We].geometry&&ze.push(pt(Gt[We],We));this.trees[Le+1]=new Y(ze,Pt,Bt,_e,Float32Array),fe&&console.timeEnd(Ce);for(var qe=Le;qe>=ye;qe--){var ir=+Date.now();ze=this._cluster(ze,qe),this.trees[qe]=new Y(ze,Pt,Bt,_e,Float32Array),fe&&console.log("z%d: %d clusters in %dms",qe,ze.length,+Date.now()-ir)}return fe&&console.timeEnd("total time"),this},rt.prototype.getClusters=function(Gt,re){var fe=((Gt[0]+180)%360+360)%360-180,ye=Math.max(-90,Math.min(90,Gt[1])),Le=Gt[2]===180?180:((Gt[2]+180)%360+360)%360-180,_e=Math.max(-90,Math.min(90,Gt[3]));if(Gt[2]-Gt[0]>=360)fe=-180,Le=180;else if(fe>Le){var Ce=this.getClusters([fe,ye,180,_e],re),ze=this.getClusters([-180,ye,Le,_e],re);return Ce.concat(ze)}for(var We=this.trees[this._limitZoom(re)],qe=We.range(Ft(fe),Et(_e),Ft(Le),Et(ye)),ir=[],xr=0,Dt=qe;xr<Dt.length;xr+=1){var Ut=Dt[xr],Te=We.points[Ut];ir.push(Te.numPoints?yt(Te):this.points[Te.index])}return ir},rt.prototype.getChildren=function(Gt){var re=this._getOriginId(Gt),fe=this._getOriginZoom(Gt),ye="No cluster with the specified id.",Le=this.trees[fe];if(!Le)throw new Error(ye);var _e=Le.points[re];if(!_e)throw new Error(ye);for(var Ce=this.options.radius/(this.options.extent*Math.pow(2,fe-1)),ze=Le.within(_e.x,_e.y,Ce),We=[],qe=0,ir=ze;qe<ir.length;qe+=1){var xr=ir[qe],Dt=Le.points[xr];Dt.parentId===Gt&&We.push(Dt.numPoints?yt(Dt):this.points[Dt.index])}if(We.length===0)throw new Error(ye);return We},rt.prototype.getLeaves=function(Gt,re,fe){re=re||10,fe=fe||0;var ye=[];return this._appendLeaves(ye,Gt,re,fe,0),ye},rt.prototype.getTile=function(Gt,re,fe){var ye=this.trees[this._limitZoom(Gt)],Le=Math.pow(2,Gt),_e=this.options,Ce=_e.extent,ze=_e.radius,We=ze/Ce,qe=(fe-We)/Le,ir=(fe+1+We)/Le,xr={features:[]};return this._addTileFeatures(ye.range((re-We)/Le,qe,(re+1+We)/Le,ir),ye.points,re,fe,Le,xr),re===0&&this._addTileFeatures(ye.range(1-We/Le,qe,1,ir),ye.points,Le,fe,Le,xr),re===Le-1&&this._addTileFeatures(ye.range(0,qe,We/Le,ir),ye.points,-1,fe,Le,xr),xr.features.length?xr:null},rt.prototype.getClusterExpansionZoom=function(Gt){for(var re=this._getOriginZoom(Gt)-1;re<=this.options.maxZoom;){var fe=this.getChildren(Gt);if(re++,fe.length!==1)break;Gt=fe[0].properties.cluster_id}return re},rt.prototype._appendLeaves=function(Gt,re,fe,ye,Le){for(var _e=this.getChildren(re),Ce=0,ze=_e;Ce<ze.length;Ce+=1){var We=ze[Ce],qe=We.properties;if(qe&&qe.cluster?Le+qe.point_count<=ye?Le+=qe.point_count:Le=this._appendLeaves(Gt,qe.cluster_id,fe,ye,Le):Le<ye?Le++:Gt.push(We),Gt.length===fe)break}return Le},rt.prototype._addTileFeatures=function(Gt,re,fe,ye,Le,_e){for(var Ce=0,ze=Gt;Ce<ze.length;Ce+=1){var We=ze[Ce],qe=re[We],ir=qe.numPoints,xr={type:1,geometry:[[Math.round(this.options.extent*(qe.x*Le-fe)),Math.round(this.options.extent*(qe.y*Le-ye))]],tags:ir?xt(qe):this.points[qe.index].properties},Dt=void 0;ir?Dt=qe.id:this.options.generateId?Dt=qe.index:this.points[qe.index].id&&(Dt=this.points[qe.index].id),Dt!==void 0&&(xr.id=Dt),_e.features.push(xr)}},rt.prototype._limitZoom=function(Gt){return Math.max(this.options.minZoom,Math.min(Gt,this.options.maxZoom+1))},rt.prototype._cluster=function(Gt,re){for(var fe=[],ye=this.options,Le=ye.radius,_e=ye.extent,Ce=ye.reduce,ze=Le/(_e*Math.pow(2,re)),We=0;We<Gt.length;We++){var qe=Gt[We];if(!(qe.zoom<=re)){qe.zoom=re;for(var ir=this.trees[re+1],xr=ir.within(qe.x,qe.y,ze),Dt=qe.numPoints||1,Ut=qe.x*Dt,Te=qe.y*Dt,Se=Ce&&Dt>1?this._map(qe,!0):null,Be=(We<<5)+(re+1)+this.points.length,Je=0,$e=xr;Je<$e.length;Je+=1){var Xe=$e[Je],Oe=ir.points[Xe];if(!(Oe.zoom<=re)){Oe.zoom=re;var ar=Oe.numPoints||1;Ut+=Oe.x*ar,Te+=Oe.y*ar,Dt+=ar,Oe.parentId=Be,Ce&&(Se||(Se=this._map(qe,!0)),Ce(Se,this._map(Oe)))}}Dt===1?fe.push(qe):(qe.parentId=Be,fe.push(ht(Ut/Dt,Te/Dt,Be,Dt,Se)))}}return fe},rt.prototype._getOriginId=function(Gt){return Gt-this.points.length>>5},rt.prototype._getOriginZoom=function(Gt){return(Gt-this.points.length)%32},rt.prototype._map=function(Gt,re){if(Gt.numPoints)return re?wt({},Gt.properties):Gt.properties;var fe=this.points[Gt.index].properties,ye=this.options.map(fe);return re&&ye===fe?wt({},ye):ye};function ht(Gt,re,fe,ye,Le){return{x:Gt,y:re,zoom:1/0,id:fe,parentId:-1,numPoints:ye,properties:Le}}function pt(Gt,re){var fe=Gt.geometry.coordinates,ye=fe[0],Le=fe[1];return{x:Ft(ye),y:Et(Le),zoom:1/0,index:re,parentId:-1}}function yt(Gt){return{type:"Feature",id:Gt.id,properties:xt(Gt),geometry:{type:"Point",coordinates:[mt(Gt.x),gt(Gt.y)]}}}function xt(Gt){var re=Gt.numPoints,fe=re>=1e4?Math.round(re/1e3)+"k":re>=1e3?Math.round(re/100)/10+"k":re;return wt(wt({},Gt.properties),{cluster:!0,cluster_id:Gt.id,point_count:re,point_count_abbreviated:fe})}function Ft(Gt){return Gt/360+.5}function Et(Gt){var re=Math.sin(Gt*Math.PI/180),fe=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return fe<0?0:fe>1?1:fe}function mt(Gt){return(Gt-.5)*360}function gt(Gt){var re=(180-Gt*360)*Math.PI/180;return 360*Math.atan(Math.exp(re))/Math.PI-90}function wt(Gt,re){for(var fe in re)Gt[fe]=re[fe];return Gt}function Pt(Gt){return Gt.x}function Bt(Gt){return Gt.y}function kt(Gt,re,fe,ye){for(var Le=ye,_e=fe-re>>1,Ce=fe-re,ze,We=Gt[re],qe=Gt[re+1],ir=Gt[fe],xr=Gt[fe+1],Dt=re+3;Dt<fe;Dt+=3){var Ut=jt(Gt[Dt],Gt[Dt+1],We,qe,ir,xr);if(Ut>Le)ze=Dt,Le=Ut;else if(Ut===Le){var Te=Math.abs(Dt-_e);Te<Ce&&(ze=Dt,Ce=Te)}}Le>ye&&(ze-re>3&&kt(Gt,re,ze,ye),Gt[ze+2]=Le,fe-ze>3&&kt(Gt,ze,fe,ye))}function jt(Gt,re,fe,ye,Le,_e){var Ce=Le-fe,ze=_e-ye;if(Ce!==0||ze!==0){var We=((Gt-fe)*Ce+(re-ye)*ze)/(Ce*Ce+ze*ze);We>1?(fe=Le,ye=_e):We>0&&(fe+=Ce*We,ye+=ze*We)}return Ce=Gt-fe,ze=re-ye,Ce*Ce+ze*ze}function Ht(Gt,re,fe,ye){var Le={id:typeof Gt>"u"?null:Gt,type:re,geometry:fe,tags:ye,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return Vt(Le),Le}function Vt(Gt){var re=Gt.geometry,fe=Gt.type;if(fe==="Point"||fe==="MultiPoint"||fe==="LineString")ee(Gt,re);else if(fe==="Polygon"||fe==="MultiLineString")for(var ye=0;ye<re.length;ye++)ee(Gt,re[ye]);else if(fe==="MultiPolygon")for(ye=0;ye<re.length;ye++)for(var Le=0;Le<re[ye].length;Le++)ee(Gt,re[ye][Le])}function ee(Gt,re){for(var fe=0;fe<re.length;fe+=3)Gt.minX=Math.min(Gt.minX,re[fe]),Gt.minY=Math.min(Gt.minY,re[fe+1]),Gt.maxX=Math.max(Gt.maxX,re[fe]),Gt.maxY=Math.max(Gt.maxY,re[fe+1])}function te(Gt,re){var fe=[];if(Gt.type==="FeatureCollection")for(var ye=0;ye<Gt.features.length;ye++)ae(fe,Gt.features[ye],re,ye);else Gt.type==="Feature"?ae(fe,Gt,re):ae(fe,{geometry:Gt},re);return fe}function ae(Gt,re,fe,ye){if(re.geometry){var Le=re.geometry.coordinates,_e=re.geometry.type,Ce=Math.pow(fe.tolerance/((1<<fe.maxZoom)*fe.extent),2),ze=[],We=re.id;if(fe.promoteId?We=re.properties[fe.promoteId]:fe.generateId&&(We=ye||0),_e==="Point")le(Le,ze);else if(_e==="MultiPoint")for(var qe=0;qe<Le.length;qe++)le(Le[qe],ze);else if(_e==="LineString")ce(Le,ze,Ce,!1);else if(_e==="MultiLineString")if(fe.lineMetrics){for(qe=0;qe<Le.length;qe++)ze=[],ce(Le[qe],ze,Ce,!1),Gt.push(Ht(We,"LineString",ze,re.properties));return}else pe(Le,ze,Ce,!1);else if(_e==="Polygon")pe(Le,ze,Ce,!0);else if(_e==="MultiPolygon")for(qe=0;qe<Le.length;qe++){var ir=[];pe(Le[qe],ir,Ce,!0),ze.push(ir)}else if(_e==="GeometryCollection"){for(qe=0;qe<re.geometry.geometries.length;qe++)ae(Gt,{id:We,geometry:re.geometry.geometries[qe],properties:re.properties},fe,ye);return}else throw new Error("Input data is not a valid GeoJSON object.");Gt.push(Ht(We,_e,ze,re.properties))}}function le(Gt,re){re.push(we(Gt[0])),re.push(ve(Gt[1])),re.push(0)}function ce(Gt,re,fe,ye){for(var Le,_e,Ce=0,ze=0;ze<Gt.length;ze++){var We=we(Gt[ze][0]),qe=ve(Gt[ze][1]);re.push(We),re.push(qe),re.push(0),ze>0&&(ye?Ce+=(Le*qe-We*_e)/2:Ce+=Math.sqrt(Math.pow(We-Le,2)+Math.pow(qe-_e,2))),Le=We,_e=qe}var ir=re.length-3;re[2]=1,kt(re,0,ir,fe),re[ir+2]=1,re.size=Math.abs(Ce),re.start=0,re.end=re.size}function pe(Gt,re,fe,ye){for(var Le=0;Le<Gt.length;Le++){var _e=[];ce(Gt[Le],_e,fe,ye),re.push(_e)}}function we(Gt){return Gt/360+.5}function ve(Gt){var re=Math.sin(Gt*Math.PI/180),fe=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return fe<0?0:fe>1?1:fe}function Mt(Gt,re,fe,ye,Le,_e,Ce,ze){if(fe/=re,ye/=re,_e>=fe&&Ce<ye)return Gt;if(Ce<fe||_e>=ye)return null;for(var We=[],qe=0;qe<Gt.length;qe++){var ir=Gt[qe],xr=ir.geometry,Dt=ir.type,Ut=Le===0?ir.minX:ir.minY,Te=Le===0?ir.maxX:ir.maxY;if(Ut>=fe&&Te<ye){We.push(ir);continue}else if(Te<fe||Ut>=ye)continue;var Se=[];if(Dt==="Point"||Dt==="MultiPoint")It(xr,Se,fe,ye,Le);else if(Dt==="LineString")Rt(xr,Se,fe,ye,Le,!1,ze.lineMetrics);else if(Dt==="MultiLineString")Tt(xr,Se,fe,ye,Le,!1);else if(Dt==="Polygon")Tt(xr,Se,fe,ye,Le,!0);else if(Dt==="MultiPolygon")for(var Be=0;Be<xr.length;Be++){var Je=[];Tt(xr[Be],Je,fe,ye,Le,!0),Je.length&&Se.push(Je)}if(Se.length){if(ze.lineMetrics&&Dt==="LineString"){for(Be=0;Be<Se.length;Be++)We.push(Ht(ir.id,Dt,Se[Be],ir.tags));continue}(Dt==="LineString"||Dt==="MultiLineString")&&(Se.length===1?(Dt="LineString",Se=Se[0]):Dt="MultiLineString"),(Dt==="Point"||Dt==="MultiPoint")&&(Dt=Se.length===3?"Point":"MultiPoint"),We.push(Ht(ir.id,Dt,Se,ir.tags))}}return We.length?We:null}function It(Gt,re,fe,ye,Le){for(var _e=0;_e<Gt.length;_e+=3){var Ce=Gt[_e+Le];Ce>=fe&&Ce<=ye&&(re.push(Gt[_e]),re.push(Gt[_e+1]),re.push(Gt[_e+2]))}}function Rt(Gt,re,fe,ye,Le,_e,Ce){for(var ze=zt(Gt),We=Le===0?ut:vt,qe=Gt.start,ir,xr,Dt=0;Dt<Gt.length-3;Dt+=3){var Ut=Gt[Dt],Te=Gt[Dt+1],Se=Gt[Dt+2],Be=Gt[Dt+3],Je=Gt[Dt+4],$e=Le===0?Ut:Te,Xe=Le===0?Be:Je,Oe=!1;Ce&&(ir=Math.sqrt(Math.pow(Ut-Be,2)+Math.pow(Te-Je,2))),$e<fe?Xe>fe&&(xr=We(ze,Ut,Te,Be,Je,fe),Ce&&(ze.start=qe+ir*xr)):$e>ye?Xe<ye&&(xr=We(ze,Ut,Te,Be,Je,ye),Ce&&(ze.start=qe+ir*xr)):ft(ze,Ut,Te,Se),Xe<fe&&$e>=fe&&(xr=We(ze,Ut,Te,Be,Je,fe),Oe=!0),Xe>ye&&$e<=ye&&(xr=We(ze,Ut,Te,Be,Je,ye),Oe=!0),!_e&&Oe&&(Ce&&(ze.end=qe+ir*xr),re.push(ze),ze=zt(Gt)),Ce&&(qe+=ir)}var ar=Gt.length-3;Ut=Gt[ar],Te=Gt[ar+1],Se=Gt[ar+2],$e=Le===0?Ut:Te,$e>=fe&&$e<=ye&&ft(ze,Ut,Te,Se),ar=ze.length-3,_e&&ar>=3&&(ze[ar]!==ze[0]||ze[ar+1]!==ze[1])&&ft(ze,ze[0],ze[1],ze[2]),ze.length&&re.push(ze)}function zt(Gt){var re=[];return re.size=Gt.size,re.start=Gt.start,re.end=Gt.end,re}function Tt(Gt,re,fe,ye,Le,_e){for(var Ce=0;Ce<Gt.length;Ce++)Rt(Gt[Ce],re,fe,ye,Le,_e,!1)}function ft(Gt,re,fe,ye){Gt.push(re),Gt.push(fe),Gt.push(ye)}function ut(Gt,re,fe,ye,Le,_e){var Ce=(_e-re)/(ye-re);return Gt.push(_e),Gt.push(fe+(Le-fe)*Ce),Gt.push(1),Ce}function vt(Gt,re,fe,ye,Le,_e){var Ce=(_e-fe)/(Le-fe);return Gt.push(re+(ye-re)*Ce),Gt.push(_e),Gt.push(1),Ce}function St(Gt,re){var fe=re.buffer/re.extent,ye=Gt,Le=Mt(Gt,1,-1-fe,fe,0,-1,2,re),_e=Mt(Gt,1,1-fe,2+fe,0,-1,2,re);return(Le||_e)&&(ye=Mt(Gt,1,-fe,1+fe,0,-1,2,re)||[],Le&&(ye=Ot(Le,1).concat(ye)),_e&&(ye=ye.concat(Ot(_e,-1)))),ye}function Ot(Gt,re){for(var fe=[],ye=0;ye<Gt.length;ye++){var Le=Gt[ye],_e=Le.type,Ce;if(_e==="Point"||_e==="MultiPoint"||_e==="LineString")Ce=Xt(Le.geometry,re);else if(_e==="MultiLineString"||_e==="Polygon"){Ce=[];for(var ze=0;ze<Le.geometry.length;ze++)Ce.push(Xt(Le.geometry[ze],re))}else if(_e==="MultiPolygon")for(Ce=[],ze=0;ze<Le.geometry.length;ze++){for(var We=[],qe=0;qe<Le.geometry[ze].length;qe++)We.push(Xt(Le.geometry[ze][qe],re));Ce.push(We)}fe.push(Ht(Le.id,_e,Ce,Le.tags))}return fe}function Xt(Gt,re){var fe=[];fe.size=Gt.size,Gt.start!==void 0&&(fe.start=Gt.start,fe.end=Gt.end);for(var ye=0;ye<Gt.length;ye+=3)fe.push(Gt[ye]+re,Gt[ye+1],Gt[ye+2]);return fe}function $t(Gt,re){if(Gt.transformed)return Gt;var fe=1<<Gt.z,ye=Gt.x,Le=Gt.y,_e,Ce,ze;for(_e=0;_e<Gt.features.length;_e++){var We=Gt.features[_e],qe=We.geometry,ir=We.type;if(We.geometry=[],ir===1)for(Ce=0;Ce<qe.length;Ce+=2)We.geometry.push(de(qe[Ce],qe[Ce+1],re,fe,ye,Le));else for(Ce=0;Ce<qe.length;Ce++){var xr=[];for(ze=0;ze<qe[Ce].length;ze+=2)xr.push(de(qe[Ce][ze],qe[Ce][ze+1],re,fe,ye,Le));We.geometry.push(xr)}}return Gt.transformed=!0,Gt}function de(Gt,re,fe,ye,Le,_e){return[Math.round(fe*(Gt*ye-Le)),Math.round(fe*(re*ye-_e))]}function Me(Gt,re,fe,ye,Le){for(var _e=re===Le.maxZoom?0:Le.tolerance/((1<<re)*Le.extent),Ce={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:fe,y:ye,z:re,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ze=0;ze<Gt.length;ze++){Ce.numFeatures++,Fe(Ce,Gt[ze],_e,Le);var We=Gt[ze].minX,qe=Gt[ze].minY,ir=Gt[ze].maxX,xr=Gt[ze].maxY;We<Ce.minX&&(Ce.minX=We),qe<Ce.minY&&(Ce.minY=qe),ir>Ce.maxX&&(Ce.maxX=ir),xr>Ce.maxY&&(Ce.maxY=xr)}return Ce}function Fe(Gt,re,fe,ye){var Le=re.geometry,_e=re.type,Ce=[];if(_e==="Point"||_e==="MultiPoint")for(var ze=0;ze<Le.length;ze+=3)Ce.push(Le[ze]),Ce.push(Le[ze+1]),Gt.numPoints++,Gt.numSimplified++;else if(_e==="LineString")De(Ce,Le,Gt,fe,!1,!1);else if(_e==="MultiLineString"||_e==="Polygon")for(ze=0;ze<Le.length;ze++)De(Ce,Le[ze],Gt,fe,_e==="Polygon",ze===0);else if(_e==="MultiPolygon")for(var We=0;We<Le.length;We++){var qe=Le[We];for(ze=0;ze<qe.length;ze++)De(Ce,qe[ze],Gt,fe,!0,ze===0)}if(Ce.length){var ir=re.tags||null;if(_e==="LineString"&&ye.lineMetrics){ir={};for(var xr in re.tags)ir[xr]=re.tags[xr];ir.mapbox_clip_start=Le.start/Le.size,ir.mapbox_clip_end=Le.end/Le.size}var Dt={geometry:Ce,type:_e==="Polygon"||_e==="MultiPolygon"?3:_e==="LineString"||_e==="MultiLineString"?2:1,tags:ir};re.id!==null&&(Dt.id=re.id),Gt.features.push(Dt)}}function De(Gt,re,fe,ye,Le,_e){var Ce=ye*ye;if(ye>0&&re.size<(Le?Ce:ye)){fe.numPoints+=re.length/3;return}for(var ze=[],We=0;We<re.length;We+=3)(ye===0||re[We+2]>Ce)&&(fe.numSimplified++,ze.push(re[We]),ze.push(re[We+1])),fe.numPoints++;Le&&Ae(ze,_e),Gt.push(ze)}function Ae(Gt,re){for(var fe=0,ye=0,Le=Gt.length,_e=Le-2;ye<Le;_e=ye,ye+=2)fe+=(Gt[ye]-Gt[_e])*(Gt[ye+1]+Gt[_e+1]);if(fe>0===re)for(ye=0,Le=Gt.length;ye<Le/2;ye+=2){var Ce=Gt[ye],ze=Gt[ye+1];Gt[ye]=Gt[Le-2-ye],Gt[ye+1]=Gt[Le-1-ye],Gt[Le-2-ye]=Ce,Gt[Le-1-ye]=ze}}function Ve(Gt,re){return new Qe(Gt,re)}function Qe(Gt,re){re=this.options=he(Object.create(this.options),re);var fe=re.debug;if(fe&&console.time("preprocess data"),re.maxZoom<0||re.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(re.promoteId&&re.generateId)throw new Error("promoteId and generateId cannot be used together.");var ye=te(Gt,re);this.tiles={},this.tileCoords=[],fe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",re.indexMaxZoom,re.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ye=St(ye,re),ye.length&&this.splitTile(ye,0,0,0),fe&&(ye.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}Qe.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Qe.prototype.splitTile=function(Gt,re,fe,ye,Le,_e,Ce){for(var ze=[Gt,re,fe,ye],We=this.options,qe=We.debug;ze.length;){ye=ze.pop(),fe=ze.pop(),re=ze.pop(),Gt=ze.pop();var ir=1<<re,xr=Sr(re,fe,ye),Dt=this.tiles[xr];if(!Dt&&(qe>1&&console.time("creation"),Dt=this.tiles[xr]=Me(Gt,re,fe,ye,We),this.tileCoords.push({z:re,x:fe,y:ye}),qe)){qe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",re,fe,ye,Dt.numFeatures,Dt.numPoints,Dt.numSimplified),console.timeEnd("creation"));var Ut="z"+re;this.stats[Ut]=(this.stats[Ut]||0)+1,this.total++}if(Dt.source=Gt,Le){if(re===We.maxZoom||re===Le)continue;var Te=1<<Le-re;if(fe!==Math.floor(_e/Te)||ye!==Math.floor(Ce/Te))continue}else if(re===We.indexMaxZoom||Dt.numPoints<=We.indexMaxPoints)continue;if(Dt.source=null,Gt.length!==0){qe>1&&console.time("clipping");var Se=.5*We.buffer/We.extent,Be=.5-Se,Je=.5+Se,$e=1+Se,Xe,Oe,ar,cr,sr,lr;Xe=Oe=ar=cr=null,sr=Mt(Gt,ir,fe-Se,fe+Je,0,Dt.minX,Dt.maxX,We),lr=Mt(Gt,ir,fe+Be,fe+$e,0,Dt.minX,Dt.maxX,We),Gt=null,sr&&(Xe=Mt(sr,ir,ye-Se,ye+Je,1,Dt.minY,Dt.maxY,We),Oe=Mt(sr,ir,ye+Be,ye+$e,1,Dt.minY,Dt.maxY,We),sr=null),lr&&(ar=Mt(lr,ir,ye-Se,ye+Je,1,Dt.minY,Dt.maxY,We),cr=Mt(lr,ir,ye+Be,ye+$e,1,Dt.minY,Dt.maxY,We),lr=null),qe>1&&console.timeEnd("clipping"),ze.push(Xe||[],re+1,fe*2,ye*2),ze.push(Oe||[],re+1,fe*2,ye*2+1),ze.push(ar||[],re+1,fe*2+1,ye*2),ze.push(cr||[],re+1,fe*2+1,ye*2+1)}}},Qe.prototype.getTile=function(Gt,re,fe){var ye=this.options,Le=ye.extent,_e=ye.debug;if(Gt<0||Gt>24)return null;var Ce=1<<Gt;re=(re%Ce+Ce)%Ce;var ze=Sr(Gt,re,fe);if(this.tiles[ze])return $t(this.tiles[ze],Le);_e>1&&console.log("drilling down to z%d-%d-%d",Gt,re,fe);for(var We=Gt,qe=re,ir=fe,xr;!xr&&We>0;)We--,qe=Math.floor(qe/2),ir=Math.floor(ir/2),xr=this.tiles[Sr(We,qe,ir)];return!xr||!xr.source?null:(_e>1&&console.log("found parent tile z%d-%d-%d",We,qe,ir),_e>1&&console.time("drilling down"),this.splitTile(xr.source,We,qe,ir,Gt,re,fe),_e>1&&console.timeEnd("drilling down"),this.tiles[ze]?$t(this.tiles[ze],Le):null)};function Sr(Gt,re,fe){return((1<<Gt)*fe+re)*32+Gt}function he(Gt,re){for(var fe in re)Gt[fe]=re[fe];return Gt}function je(Gt,re){var fe=Gt.tileID.canonical;if(!this._geoJSONIndex)return re(null,null);var ye=this._geoJSONIndex.getTile(fe.z,fe.x,fe.y);if(!ye)return re(null,null);var Le=new k(ye.features),_e=d(Le);(_e.byteOffset!==0||_e.byteLength!==_e.buffer.byteLength)&&(_e=new Uint8Array(_e)),re(null,{vectorTile:Le,rawData:_e.buffer})}var Re=function(Gt){function re(fe,ye,Le,_e){Gt.call(this,fe,ye,Le,je),_e&&(this.loadGeoJSON=_e)}return Gt&&(re.__proto__=Gt),re.prototype=Object.create(Gt&&Gt.prototype),re.prototype.constructor=re,re.prototype.loadData=function(fe,ye){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=ye,this._pendingLoadDataParams=fe,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},re.prototype._loadData=function(){var fe=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var ye=this._pendingCallback,Le=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var _e=Le&&Le.request&&Le.request.collectResourceTiming?new i.RequestPerformance(Le.request):!1;this.loadGeoJSON(Le,function(Ce,ze){if(Ce||!ze)return ye(Ce);if(typeof ze!="object")return ye(new Error("Input data given to '"+Le.source+"' is not a valid GeoJSON object."));p(ze,!0);try{fe._geoJSONIndex=Le.cluster?new rt(_r(Le)).load(ze.features):Ve(ze,Le.geojsonVtOptions)}catch(ir){return ye(ir)}fe.loaded={};var We={};if(_e){var qe=_e.finish();qe&&(We.resourceTiming={},We.resourceTiming[Le.source]=JSON.parse(JSON.stringify(qe)))}ye(null,We)})}},re.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},re.prototype.reloadTile=function(fe,ye){var Le=this.loaded,_e=fe.uid;return Le&&Le[_e]?Gt.prototype.reloadTile.call(this,fe,ye):this.loadTile(fe,ye)},re.prototype.loadGeoJSON=function(fe,ye){if(fe.request)i.getJSON(fe.request,ye);else if(typeof fe.data=="string")try{return ye(null,JSON.parse(fe.data))}catch{return ye(new Error("Input data given to '"+fe.source+"' is not a valid GeoJSON object."))}else return ye(new Error("Input data given to '"+fe.source+"' is not a valid GeoJSON object."))},re.prototype.removeSource=function(fe,ye){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ye()},re.prototype.getClusterExpansionZoom=function(fe,ye){try{ye(null,this._geoJSONIndex.getClusterExpansionZoom(fe.clusterId))}catch(Le){ye(Le)}},re.prototype.getClusterChildren=function(fe,ye){try{ye(null,this._geoJSONIndex.getChildren(fe.clusterId))}catch(Le){ye(Le)}},re.prototype.getClusterLeaves=function(fe,ye){try{ye(null,this._geoJSONIndex.getLeaves(fe.clusterId,fe.limit,fe.offset))}catch(Le){ye(Le)}},re}(o);function _r(Gt){var re=Gt.superclusterOptions,fe=Gt.clusterProperties;if(!fe||!re)return re;for(var ye={},Le={},_e={accumulated:null,zoom:0},Ce={properties:null},ze=Object.keys(fe),We=0,qe=ze;We<qe.length;We+=1){var ir=qe[We],xr=fe[ir],Dt=xr[0],Ut=xr[1],Te=i.createExpression(Ut),Se=i.createExpression(typeof Dt=="string"?[Dt,["accumulated"],["get",ir]]:Dt);ye[ir]=Te.value,Le[ir]=Se.value}return re.map=function(Be){Ce.properties=Be;for(var Je={},$e=0,Xe=ze;$e<Xe.length;$e+=1){var Oe=Xe[$e];Je[Oe]=ye[Oe].evaluate(_e,Ce)}return Je},re.reduce=function(Be,Je){Ce.properties=Je;for(var $e=0,Xe=ze;$e<Xe.length;$e+=1){var Oe=Xe[$e];_e.accumulated=Be[Oe],Be[Oe]=Le[Oe].evaluate(_e,Ce)}},re}var tr=function(Gt){var re=this;this.self=Gt,this.actor=new i.Actor(Gt,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:o,geojson:Re},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(fe,ye){if(re.workerSourceTypes[fe])throw new Error('Worker source with name "'+fe+'" already registered.');re.workerSourceTypes[fe]=ye},this.self.registerRTLTextPlugin=function(fe){if(i.plugin.isParsed())throw new Error("RTL text plugin already registered.");i.plugin.applyArabicShaping=fe.applyArabicShaping,i.plugin.processBidirectionalText=fe.processBidirectionalText,i.plugin.processStyledBidirectionalText=fe.processStyledBidirectionalText}};return tr.prototype.setReferrer=function(Gt,re){this.referrer=re},tr.prototype.setImages=function(Gt,re,fe){this.availableImages[Gt]=re;for(var ye in this.workerSources[Gt]){var Le=this.workerSources[Gt][ye];for(var _e in Le)Le[_e].availableImages=re}fe()},tr.prototype.setLayers=function(Gt,re,fe){this.getLayerIndex(Gt).replace(re),fe()},tr.prototype.updateLayers=function(Gt,re,fe){this.getLayerIndex(Gt).update(re.layers,re.removedIds),fe()},tr.prototype.loadTile=function(Gt,re,fe){this.getWorkerSource(Gt,re.type,re.source).loadTile(re,fe)},tr.prototype.loadDEMTile=function(Gt,re,fe){this.getDEMWorkerSource(Gt,re.source).loadTile(re,fe)},tr.prototype.reloadTile=function(Gt,re,fe){this.getWorkerSource(Gt,re.type,re.source).reloadTile(re,fe)},tr.prototype.abortTile=function(Gt,re,fe){this.getWorkerSource(Gt,re.type,re.source).abortTile(re,fe)},tr.prototype.removeTile=function(Gt,re,fe){this.getWorkerSource(Gt,re.type,re.source).removeTile(re,fe)},tr.prototype.removeDEMTile=function(Gt,re){this.getDEMWorkerSource(Gt,re.source).removeTile(re)},tr.prototype.removeSource=function(Gt,re,fe){if(!(!this.workerSources[Gt]||!this.workerSources[Gt][re.type]||!this.workerSources[Gt][re.type][re.source])){var ye=this.workerSources[Gt][re.type][re.source];delete this.workerSources[Gt][re.type][re.source],ye.removeSource!==void 0?ye.removeSource(re,fe):fe()}},tr.prototype.loadWorkerSource=function(Gt,re,fe){try{this.self.importScripts(re.url),fe()}catch(ye){fe(ye.toString())}},tr.prototype.syncRTLPluginState=function(Gt,re,fe){try{i.plugin.setState(re);var ye=i.plugin.getPluginURL();if(i.plugin.isLoaded()&&!i.plugin.isParsed()&&ye!=null){this.self.importScripts(ye);var Le=i.plugin.isParsed(),_e=Le?void 0:new Error("RTL Text Plugin failed to import scripts from "+ye);fe(_e,Le)}}catch(Ce){fe(Ce.toString())}},tr.prototype.getAvailableImages=function(Gt){var re=this.availableImages[Gt];return re||(re=[]),re},tr.prototype.getLayerIndex=function(Gt){var re=this.layerIndexes[Gt];return re||(re=this.layerIndexes[Gt]=new v),re},tr.prototype.getWorkerSource=function(Gt,re,fe){var ye=this;if(this.workerSources[Gt]||(this.workerSources[Gt]={}),this.workerSources[Gt][re]||(this.workerSources[Gt][re]={}),!this.workerSources[Gt][re][fe]){var Le={send:function(_e,Ce,ze){ye.actor.send(_e,Ce,ze,Gt)}};this.workerSources[Gt][re][fe]=new this.workerSourceTypes[re](Le,this.getLayerIndex(Gt),this.getAvailableImages(Gt))}return this.workerSources[Gt][re][fe]},tr.prototype.getDEMWorkerSource=function(Gt,re){return this.demWorkerSources[Gt]||(this.demWorkerSources[Gt]={}),this.demWorkerSources[Gt][re]||(this.demWorkerSources[Gt][re]=new y),this.demWorkerSources[Gt][re]},tr.prototype.enforceCacheSizeLimit=function(Gt,re){i.enforceCacheSizeLimit(re)},typeof WorkerGlobalScope<"u"&&typeof i.window<"u"&&i.window instanceof WorkerGlobalScope&&(i.window.worker=new tr(i.window)),tr}),E(["./shared"],function(i){var S=i.createCommonjsModule(function(H){H.exports?H.exports=tt:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=tt,window.mapboxgl.notSupportedReason=J);function tt(Rr){return!J(Rr)}function J(Rr){if(!ct())return"not a browser";if(!At())return"insufficent Array support";if(!Nt())return"insufficient Function support";if(!Qt())return"insufficient Object support";if(!se())return"insufficient JSON support";if(!be())return"insufficient worker support";if(!Ze())return"insufficient Uint8ClampedArray support";if(!or())return"insufficient ArrayBuffer support";if(!nr())return"insufficient Canvas/getImageData support";if(!Er(Rr&&Rr.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function ct(){return typeof window<"u"&&typeof document<"u"}function At(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function Nt(){return Function.prototype&&Function.prototype.bind}function Qt(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function se(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function be(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Rr=new Blob([""],{type:"text/javascript"}),Xr=URL.createObjectURL(Rr),on,Cn;try{Cn=new Worker(Xr),on=!0}catch{on=!1}return Cn&&Cn.terminate(),URL.revokeObjectURL(Xr),on}function Ze(){return"Uint8ClampedArray"in window}function or(){return ArrayBuffer.isView}function nr(){var Rr=document.createElement("canvas");Rr.width=Rr.height=1;var Xr=Rr.getContext("2d");if(!Xr)return!1;var on=Xr.getImageData(0,0,1,1);return on&&on.width===Rr.width}var kr={};function Er(Rr){return kr[Rr]===void 0&&(kr[Rr]=Fr(Rr)),kr[Rr]}tt.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function qr(Rr){var Xr=document.createElement("canvas"),on=Object.create(tt.webGLContextAttributes);return on.failIfMajorPerformanceCaveat=Rr,Xr.probablySupportsContext?Xr.probablySupportsContext("webgl",on)||Xr.probablySupportsContext("experimental-webgl",on):Xr.supportsContext?Xr.supportsContext("webgl",on)||Xr.supportsContext("experimental-webgl",on):Xr.getContext("webgl",on)||Xr.getContext("experimental-webgl",on)}function Fr(Rr){var Xr=qr(Rr);if(!Xr)return!1;var on=Xr.createShader(Xr.VERTEX_SHADER);return!on||Xr.isContextLost()?!1:(Xr.shaderSource(on,"void main() {}"),Xr.compileShader(on),Xr.getShaderParameter(on,Xr.COMPILE_STATUS)===!0)}}),A={};A.create=function(H,tt,J){var ct=i.window.document.createElement(H);return tt!==void 0&&(ct.className=tt),J&&J.appendChild(ct),ct},A.createNS=function(H,tt){var J=i.window.document.createElementNS(H,tt);return J};var g=i.window.document.documentElement.style;function v(H){if(!g)return H[0];for(var tt=0;tt<H.length;tt++)if(H[tt]in g)return H[tt];return H[0]}var e=v(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),r;A.disableDrag=function(){g&&e&&(r=g[e],g[e]="none")},A.enableDrag=function(){g&&e&&(g[e]=r)};var f=v(["transform","WebkitTransform"]);A.setTransform=function(H,tt){H.style[f]=tt};var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){n=!0}});i.window.addEventListener("test",a,a),i.window.removeEventListener("test",a,a)}catch{n=!1}A.addEventListener=function(H,tt,J,ct){ct===void 0&&(ct={}),"passive"in ct&&n?H.addEventListener(tt,J,ct):H.addEventListener(tt,J,ct.capture)},A.removeEventListener=function(H,tt,J,ct){ct===void 0&&(ct={}),"passive"in ct&&n?H.removeEventListener(tt,J,ct):H.removeEventListener(tt,J,ct.capture)};var o=function(H){H.preventDefault(),H.stopPropagation(),i.window.removeEventListener("click",o,!0)};A.suppressClick=function(){i.window.addEventListener("click",o,!0),i.window.setTimeout(function(){i.window.removeEventListener("click",o,!0)},0)},A.mousePos=function(H,tt){var J=H.getBoundingClientRect();return new i.Point(tt.clientX-J.left-H.clientLeft,tt.clientY-J.top-H.clientTop)},A.touchPos=function(H,tt){for(var J=H.getBoundingClientRect(),ct=[],At=0;At<tt.length;At++)ct.push(new i.Point(tt[At].clientX-J.left-H.clientLeft,tt[At].clientY-J.top-H.clientTop));return ct},A.mouseButton=function(H){return typeof i.window.InstallTrigger<"u"&&H.button===2&&H.ctrlKey&&i.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:H.button},A.remove=function(H){H.parentNode&&H.parentNode.removeChild(H)};function h(H,tt,J){var ct,At,Nt,Qt=i.browser.devicePixelRatio>1?"@2x":"",se=i.getJSON(tt.transformRequest(tt.normalizeSpriteURL(H,Qt,".json"),i.ResourceType.SpriteJSON),function(or,nr){se=null,Nt||(Nt=or,ct=nr,Ze())}),be=i.getImage(tt.transformRequest(tt.normalizeSpriteURL(H,Qt,".png"),i.ResourceType.SpriteImage),function(or,nr){be=null,Nt||(Nt=or,At=nr,Ze())});function Ze(){if(Nt)J(Nt);else if(ct&&At){var or=i.browser.getImageData(At),nr={};for(var kr in ct){var Er=ct[kr],qr=Er.width,Fr=Er.height,Rr=Er.x,Xr=Er.y,on=Er.sdf,Cn=Er.pixelRatio,En=Er.stretchX,Fn=Er.stretchY,Nn=Er.content,jn=new i.RGBAImage({width:qr,height:Fr});i.RGBAImage.copy(or,jn,{x:Rr,y:Xr},{x:0,y:0},{width:qr,height:Fr}),nr[kr]={data:jn,pixelRatio:Cn,sdf:on,stretchX:En,stretchY:Fn,content:Nn}}J(null,nr)}}return{cancel:function(){se&&(se.cancel(),se=null),be&&(be.cancel(),be=null)}}}function y(H){var tt=H.userImage;if(tt&&tt.render){var J=tt.render();if(J)return H.data.replace(new Uint8Array(tt.data.buffer)),!0}return!1}var p=1,x=function(H){function tt(){H.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new i.RGBAImage({width:1,height:1}),this.dirty=!0}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.isLoaded=function(){return this.loaded},tt.prototype.setLoaded=function(J){if(this.loaded!==J&&(this.loaded=J,J)){for(var ct=0,At=this.requestors;ct<At.length;ct+=1){var Nt=At[ct],Qt=Nt.ids,se=Nt.callback;this._notify(Qt,se)}this.requestors=[]}},tt.prototype.getImage=function(J){return this.images[J]},tt.prototype.addImage=function(J,ct){this._validate(J,ct)&&(this.images[J]=ct)},tt.prototype._validate=function(J,ct){var At=!0;return this._validateStretch(ct.stretchX,ct.data&&ct.data.width)||(this.fire(new i.ErrorEvent(new Error('Image "'+J+'" has invalid "stretchX" value'))),At=!1),this._validateStretch(ct.stretchY,ct.data&&ct.data.height)||(this.fire(new i.ErrorEvent(new Error('Image "'+J+'" has invalid "stretchY" value'))),At=!1),this._validateContent(ct.content,ct)||(this.fire(new i.ErrorEvent(new Error('Image "'+J+'" has invalid "content" value'))),At=!1),At},tt.prototype._validateStretch=function(J,ct){if(!J)return!0;for(var At=0,Nt=0,Qt=J;Nt<Qt.length;Nt+=1){var se=Qt[Nt];if(se[0]<At||se[1]<se[0]||ct<se[1])return!1;At=se[1]}return!0},tt.prototype._validateContent=function(J,ct){return J?!(J.length!==4||J[0]<0||ct.data.width<J[0]||J[1]<0||ct.data.height<J[1]||J[2]<0||ct.data.width<J[2]||J[3]<0||ct.data.height<J[3]||J[2]<J[0]||J[3]<J[1]):!0},tt.prototype.updateImage=function(J,ct){var At=this.images[J];ct.version=At.version+1,this.images[J]=ct,this.updatedImages[J]=!0},tt.prototype.removeImage=function(J){var ct=this.images[J];delete this.images[J],delete this.patterns[J],ct.userImage&&ct.userImage.onRemove&&ct.userImage.onRemove()},tt.prototype.listImages=function(){return Object.keys(this.images)},tt.prototype.getImages=function(J,ct){var At=!0;if(!this.isLoaded())for(var Nt=0,Qt=J;Nt<Qt.length;Nt+=1){var se=Qt[Nt];this.images[se]||(At=!1)}this.isLoaded()||At?this._notify(J,ct):this.requestors.push({ids:J,callback:ct})},tt.prototype._notify=function(J,ct){for(var At={},Nt=0,Qt=J;Nt<Qt.length;Nt+=1){var se=Qt[Nt];this.images[se]||this.fire(new i.Event("styleimagemissing",{id:se}));var be=this.images[se];be?At[se]={data:be.data.clone(),pixelRatio:be.pixelRatio,sdf:be.sdf,version:be.version,stretchX:be.stretchX,stretchY:be.stretchY,content:be.content,hasRenderCallback:!!(be.userImage&&be.userImage.render)}:i.warnOnce('Image "'+se+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}ct(null,At)},tt.prototype.getPixelSize=function(){var J=this.atlasImage,ct=J.width,At=J.height;return{width:ct,height:At}},tt.prototype.getPattern=function(J){var ct=this.patterns[J],At=this.getImage(J);if(!At)return null;if(ct&&ct.position.version===At.version)return ct.position;if(ct)ct.position.version=At.version;else{var Nt=At.data.width+p*2,Qt=At.data.height+p*2,se={w:Nt,h:Qt,x:0,y:0},be=new i.ImagePosition(se,At);this.patterns[J]={bin:se,position:be}}return this._updatePatternAtlas(),this.patterns[J].position},tt.prototype.bind=function(J){var ct=J.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new i.Texture(J,this.atlasImage,ct.RGBA),this.atlasTexture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE)},tt.prototype._updatePatternAtlas=function(){var J=[];for(var ct in this.patterns)J.push(this.patterns[ct].bin);var At=i.potpack(J),Nt=At.w,Qt=At.h,se=this.atlasImage;se.resize({width:Nt||1,height:Qt||1});for(var be in this.patterns){var Ze=this.patterns[be],or=Ze.bin,nr=or.x+p,kr=or.y+p,Er=this.images[be].data,qr=Er.width,Fr=Er.height;i.RGBAImage.copy(Er,se,{x:0,y:0},{x:nr,y:kr},{width:qr,height:Fr}),i.RGBAImage.copy(Er,se,{x:0,y:Fr-1},{x:nr,y:kr-1},{width:qr,height:1}),i.RGBAImage.copy(Er,se,{x:0,y:0},{x:nr,y:kr+Fr},{width:qr,height:1}),i.RGBAImage.copy(Er,se,{x:qr-1,y:0},{x:nr-1,y:kr},{width:1,height:Fr}),i.RGBAImage.copy(Er,se,{x:0,y:0},{x:nr+qr,y:kr},{width:1,height:Fr})}this.dirty=!0},tt.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},tt.prototype.dispatchRenderCallbacks=function(J){for(var ct=0,At=J;ct<At.length;ct+=1){var Nt=At[ct];if(!this.callbackDispatchedThisFrame[Nt]){this.callbackDispatchedThisFrame[Nt]=!0;var Qt=this.images[Nt],se=y(Qt);se&&this.updateImage(Nt,Qt)}}},tt}(i.Evented);function s(H,tt,J,ct,At){var Nt=tt*256,Qt=Nt+255,se=ct.transformRequest(ct.normalizeGlyphsURL(J).replace("{fontstack}",H).replace("{range}",Nt+"-"+Qt),i.ResourceType.Glyphs);i.getArrayBuffer(se,function(be,Ze){if(be)At(be);else if(Ze){for(var or={},nr=0,kr=i.parseGlyphPBF(Ze);nr<kr.length;nr+=1){var Er=kr[nr];or[Er.id]=Er}At(null,or)}})}var u=k,c=k,T=1e20;function k(H,tt,J,ct,At,Nt){this.fontSize=H||24,this.buffer=tt===void 0?3:tt,this.cutoff=ct||.25,this.fontFamily=At||"sans-serif",this.fontWeight=Nt||"normal",this.radius=J||8;var Qt=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Qt,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Qt*Qt),this.gridInner=new Float64Array(Qt*Qt),this.f=new Float64Array(Qt),this.d=new Float64Array(Qt),this.z=new Float64Array(Qt+1),this.v=new Int16Array(Qt),this.middle=Math.round(Qt/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}k.prototype.draw=function(H){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(H,this.buffer,this.middle);for(var tt=this.ctx.getImageData(0,0,this.size,this.size),J=new Uint8ClampedArray(this.size*this.size),ct=0;ct<this.size*this.size;ct++){var At=tt.data[ct*4+3]/255;this.gridOuter[ct]=At===1?0:At===0?T:Math.pow(Math.max(0,.5-At),2),this.gridInner[ct]=At===1?T:At===0?0:Math.pow(Math.max(0,At-.5),2)}for(_(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),_(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),ct=0;ct<this.size*this.size;ct++){var Nt=this.gridOuter[ct]-this.gridInner[ct];J[ct]=Math.max(0,Math.min(255,Math.round(255-255*(Nt/this.radius+this.cutoff))))}return J};function _(H,tt,J,ct,At,Nt,Qt){for(var se=0;se<tt;se++){for(var be=0;be<J;be++)ct[be]=H[be*tt+se];for(b(ct,At,Nt,Qt,J),be=0;be<J;be++)H[be*tt+se]=At[be]}for(be=0;be<J;be++){for(se=0;se<tt;se++)ct[se]=H[be*tt+se];for(b(ct,At,Nt,Qt,tt),se=0;se<tt;se++)H[be*tt+se]=Math.sqrt(At[se])}}function b(H,tt,J,ct,At){J[0]=0,ct[0]=-T,ct[1]=+T;for(var Nt=1,Qt=0;Nt<At;Nt++){for(var se=(H[Nt]+Nt*Nt-(H[J[Qt]]+J[Qt]*J[Qt]))/(2*Nt-2*J[Qt]);se<=ct[Qt];)Qt--,se=(H[Nt]+Nt*Nt-(H[J[Qt]]+J[Qt]*J[Qt]))/(2*Nt-2*J[Qt]);Qt++,J[Qt]=Nt,ct[Qt]=se,ct[Qt+1]=+T}for(Nt=0,Qt=0;Nt<At;Nt++){for(;ct[Qt+1]<Nt;)Qt++;tt[Nt]=(Nt-J[Qt])*(Nt-J[Qt])+H[J[Qt]]}}u.default=c;var P=function(H,tt){this.requestManager=H,this.localIdeographFontFamily=tt,this.entries={}};P.prototype.setURL=function(H){this.url=H},P.prototype.getGlyphs=function(H,tt){var J=this,ct=[];for(var At in H)for(var Nt=0,Qt=H[At];Nt<Qt.length;Nt+=1){var se=Qt[Nt];ct.push({stack:At,id:se})}i.asyncAll(ct,function(be,Ze){var or=be.stack,nr=be.id,kr=J.entries[or];kr||(kr=J.entries[or]={glyphs:{},requests:{},ranges:{}});var Er=kr.glyphs[nr];if(Er!==void 0){Ze(null,{stack:or,id:nr,glyph:Er});return}if(Er=J._tinySDF(kr,or,nr),Er){kr.glyphs[nr]=Er,Ze(null,{stack:or,id:nr,glyph:Er});return}var qr=Math.floor(nr/256);if(qr*256>65535){Ze(new Error("glyphs > 65535 not supported"));return}if(kr.ranges[qr]){Ze(null,{stack:or,id:nr,glyph:Er});return}var Fr=kr.requests[qr];Fr||(Fr=kr.requests[qr]=[],P.loadGlyphRange(or,qr,J.url,J.requestManager,function(Rr,Xr){if(Xr){for(var on in Xr)J._doesCharSupportLocalGlyph(+on)||(kr.glyphs[+on]=Xr[+on]);kr.ranges[qr]=!0}for(var Cn=0,En=Fr;Cn<En.length;Cn+=1){var Fn=En[Cn];Fn(Rr,Xr)}delete kr.requests[qr]})),Fr.push(function(Rr,Xr){Rr?Ze(Rr):Xr&&Ze(null,{stack:or,id:nr,glyph:Xr[nr]||null})})},function(be,Ze){if(be)tt(be);else if(Ze){for(var or={},nr=0,kr=Ze;nr<kr.length;nr+=1){var Er=kr[nr],qr=Er.stack,Fr=Er.id,Rr=Er.glyph;(or[qr]||(or[qr]={}))[Fr]=Rr&&{id:Rr.id,bitmap:Rr.bitmap.clone(),metrics:Rr.metrics}}tt(null,or)}})},P.prototype._doesCharSupportLocalGlyph=function(H){return!!this.localIdeographFontFamily&&(i.isChar["CJK Unified Ideographs"](H)||i.isChar["Hangul Syllables"](H)||i.isChar.Hiragana(H)||i.isChar.Katakana(H))},P.prototype._tinySDF=function(H,tt,J){var ct=this.localIdeographFontFamily;if(ct&&this._doesCharSupportLocalGlyph(J)){var At=H.tinySDF;if(!At){var Nt="400";/bold/i.test(tt)?Nt="900":/medium/i.test(tt)?Nt="500":/light/i.test(tt)&&(Nt="200"),At=H.tinySDF=new P.TinySDF(24,3,8,.25,ct,Nt)}return{id:J,bitmap:new i.AlphaImage({width:30,height:30},At.draw(String.fromCharCode(J))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},P.loadGlyphRange=s,P.TinySDF=u;var l=function(){this.specification=i.styleSpec.light.position};l.prototype.possiblyEvaluate=function(H,tt){return i.sphericalToCartesian(H.expression.evaluate(tt))},l.prototype.interpolate=function(H,tt,J){return{x:i.number(H.x,tt.x,J),y:i.number(H.y,tt.y,J),z:i.number(H.z,tt.z,J)}};var d=new i.Properties({anchor:new i.DataConstantProperty(i.styleSpec.light.anchor),position:new l,color:new i.DataConstantProperty(i.styleSpec.light.color),intensity:new i.DataConstantProperty(i.styleSpec.light.intensity)}),L="-transition",w=function(H){function tt(J){H.call(this),this._transitionable=new i.Transitionable(d),this.setLight(J),this._transitioning=this._transitionable.untransitioned()}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getLight=function(){return this._transitionable.serialize()},tt.prototype.setLight=function(J,ct){if(ct===void 0&&(ct={}),!this._validate(i.validateLight,J,ct))for(var At in J){var Nt=J[At];i.endsWith(At,L)?this._transitionable.setTransition(At.slice(0,-L.length),Nt):this._transitionable.setValue(At,Nt)}},tt.prototype.updateTransitions=function(J){this._transitioning=this._transitionable.transitioned(J,this._transitioning)},tt.prototype.hasTransition=function(){return this._transitioning.hasTransition()},tt.prototype.recalculate=function(J){this.properties=this._transitioning.possiblyEvaluate(J)},tt.prototype._validate=function(J,ct,At){return At&&At.validate===!1?!1:i.emitValidationErrors(this,J.call(i.validateStyle,i.extend({value:ct,style:{glyphs:!0,sprite:!0},styleSpec:i.styleSpec})))},tt}(i.Evented),I=function(H,tt){this.width=H,this.height=tt,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};I.prototype.getDash=function(H,tt){var J=H.join(",")+String(tt);return this.dashEntry[J]||(this.dashEntry[J]=this.addDash(H,tt)),this.dashEntry[J]},I.prototype.getDashRanges=function(H,tt,J){var ct=H.length%2===1,At=[],Nt=ct?-H[H.length-1]*J:0,Qt=H[0]*J,se=!0;At.push({left:Nt,right:Qt,isDash:se,zeroLength:H[0]===0});for(var be=H[0],Ze=1;Ze<H.length;Ze++){se=!se;var or=H[Ze];Nt=be*J,be+=or,Qt=be*J,At.push({left:Nt,right:Qt,isDash:se,zeroLength:or===0})}return At},I.prototype.addRoundDash=function(H,tt,J){for(var ct=tt/2,At=-J;At<=J;At++)for(var Nt=this.nextRow+J+At,Qt=this.width*Nt,se=0,be=H[se],Ze=0;Ze<this.width;Ze++){Ze/be.right>1&&(be=H[++se]);var or=Math.abs(Ze-be.left),nr=Math.abs(Ze-be.right),kr=Math.min(or,nr),Er=void 0,qr=At/J*(ct+1);if(be.isDash){var Fr=ct-Math.abs(qr);Er=Math.sqrt(kr*kr+Fr*Fr)}else Er=ct-Math.sqrt(kr*kr+qr*qr);this.data[Qt+Ze]=Math.max(0,Math.min(255,Er+128))}},I.prototype.addRegularDash=function(H){for(var tt=H.length-1;tt>=0;--tt){var J=H[tt],ct=H[tt+1];J.zeroLength?H.splice(tt,1):ct&&ct.isDash===J.isDash&&(ct.left=J.left,H.splice(tt,1))}var At=H[0],Nt=H[H.length-1];At.isDash===Nt.isDash&&(At.left=Nt.left-this.width,Nt.right=At.right+this.width);for(var Qt=this.width*this.nextRow,se=0,be=H[se],Ze=0;Ze<this.width;Ze++){Ze/be.right>1&&(be=H[++se]);var or=Math.abs(Ze-be.left),nr=Math.abs(Ze-be.right),kr=Math.min(or,nr),Er=be.isDash?kr:-kr;this.data[Qt+Ze]=Math.max(0,Math.min(255,Er+128))}},I.prototype.addDash=function(H,tt){var J=tt?7:0,ct=2*J+1;if(this.nextRow+ct>this.height)return i.warnOnce("LineAtlas out of space"),null;for(var At=0,Nt=0;Nt<H.length;Nt++)At+=H[Nt];if(At!==0){var Qt=this.width/At,se=this.getDashRanges(H,this.width,Qt);tt?this.addRoundDash(se,Qt,J):this.addRegularDash(se)}var be={y:(this.nextRow+J+.5)/this.height,height:2*J/this.height,width:At};return this.nextRow+=ct,this.dirty=!0,be},I.prototype.bind=function(H){var tt=H.gl;this.texture?(tt.bindTexture(tt.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,tt.texSubImage2D(tt.TEXTURE_2D,0,0,0,this.width,this.height,tt.ALPHA,tt.UNSIGNED_BYTE,this.data))):(this.texture=tt.createTexture(),tt.bindTexture(tt.TEXTURE_2D,this.texture),tt.texParameteri(tt.TEXTURE_2D,tt.TEXTURE_WRAP_S,tt.REPEAT),tt.texParameteri(tt.TEXTURE_2D,tt.TEXTURE_WRAP_T,tt.REPEAT),tt.texParameteri(tt.TEXTURE_2D,tt.TEXTURE_MIN_FILTER,tt.LINEAR),tt.texParameteri(tt.TEXTURE_2D,tt.TEXTURE_MAG_FILTER,tt.LINEAR),tt.texImage2D(tt.TEXTURE_2D,0,tt.ALPHA,this.width,this.height,0,tt.ALPHA,tt.UNSIGNED_BYTE,this.data))};var z=function H(tt,J){this.workerPool=tt,this.actors=[],this.currentActor=0,this.id=i.uniqueId();for(var ct=this.workerPool.acquire(this.id),At=0;At<ct.length;At++){var Nt=ct[At],Qt=new H.Actor(Nt,J,this.id);Qt.name="Worker "+At,this.actors.push(Qt)}};z.prototype.broadcast=function(H,tt,J){J=J||function(){},i.asyncAll(this.actors,function(ct,At){ct.send(H,tt,At)},J)},z.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},z.prototype.remove=function(){this.actors.forEach(function(H){H.remove()}),this.actors=[],this.workerPool.release(this.id)},z.Actor=i.Actor;function B(H,tt,J){var ct=function(At,Nt){if(At)return J(At);if(Nt){var Qt=i.pick(i.extend(Nt,H),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Nt.vector_layers&&(Qt.vectorLayers=Nt.vector_layers,Qt.vectorLayerIds=Qt.vectorLayers.map(function(se){return se.id})),Qt.tiles=tt.canonicalizeTileset(Qt,H.url),J(null,Qt)}};return H.url?i.getJSON(tt.transformRequest(tt.normalizeSourceURL(H.url),i.ResourceType.Source),ct):i.browser.frame(function(){return ct(null,H)})}var O=function(H,tt,J){this.bounds=i.LngLatBounds.convert(this.validateBounds(H)),this.minzoom=tt||0,this.maxzoom=J||24};O.prototype.validateBounds=function(H){return!Array.isArray(H)||H.length!==4?[-180,-90,180,90]:[Math.max(-180,H[0]),Math.max(-90,H[1]),Math.min(180,H[2]),Math.min(90,H[3])]},O.prototype.contains=function(H){var tt=Math.pow(2,H.z),J={minX:Math.floor(i.mercatorXfromLng(this.bounds.getWest())*tt),minY:Math.floor(i.mercatorYfromLat(this.bounds.getNorth())*tt),maxX:Math.ceil(i.mercatorXfromLng(this.bounds.getEast())*tt),maxY:Math.ceil(i.mercatorYfromLat(this.bounds.getSouth())*tt)},ct=H.x>=J.minX&&H.x<J.maxX&&H.y>=J.minY&&H.y<J.maxY;return ct};var R=function(H){function tt(J,ct,At,Nt){if(H.call(this),this.id=J,this.dispatcher=At,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.extend(this,i.pick(ct,["url","scheme","tileSize","promoteId"])),this._options=i.extend({type:"vector"},ct),this._collectResourceTiming=ct.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Nt)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.load=function(){var J=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=B(this._options,this.map._requestManager,function(ct,At){J._tileJSONRequest=null,J._loaded=!0,ct?J.fire(new i.ErrorEvent(ct)):At&&(i.extend(J,At),At.bounds&&(J.tileBounds=new O(At.bounds,J.minzoom,J.maxzoom)),i.postTurnstileEvent(At.tiles,J.map._requestManager._customAccessToken),i.postMapLoadEvent(At.tiles,J.map._getMapId(),J.map._requestManager._skuToken,J.map._requestManager._customAccessToken),J.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})),J.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})))})},tt.prototype.loaded=function(){return this._loaded},tt.prototype.hasTile=function(J){return!this.tileBounds||this.tileBounds.contains(J.canonical)},tt.prototype.onAdd=function(J){this.map=J,this.load()},tt.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},tt.prototype.serialize=function(){return i.extend({},this._options)},tt.prototype.loadTile=function(J,ct){var At=this.map._requestManager.normalizeTileURL(J.tileID.canonical.url(this.tiles,this.scheme)),Nt={request:this.map._requestManager.transformRequest(At,i.ResourceType.Tile),uid:J.uid,tileID:J.tileID,zoom:J.tileID.overscaledZ,tileSize:this.tileSize*J.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:i.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Nt.request.collectResourceTiming=this._collectResourceTiming,!J.actor||J.state==="expired"?(J.actor=this.dispatcher.getActor(),J.request=J.actor.send("loadTile",Nt,Qt.bind(this))):J.state==="loading"?J.reloadCallback=ct:J.request=J.actor.send("reloadTile",Nt,Qt.bind(this));function Qt(se,be){if(delete J.request,J.aborted)return ct(null);if(se&&se.status!==404)return ct(se);be&&be.resourceTiming&&(J.resourceTiming=be.resourceTiming),this.map._refreshExpiredTiles&&be&&J.setExpiryData(be),J.loadVectorData(be,this.map.painter),i.cacheEntryPossiblyAdded(this.dispatcher),ct(null),J.reloadCallback&&(this.loadTile(J,J.reloadCallback),J.reloadCallback=null)}},tt.prototype.abortTile=function(J){J.request&&(J.request.cancel(),delete J.request),J.actor&&J.actor.send("abortTile",{uid:J.uid,type:this.type,source:this.id},void 0)},tt.prototype.unloadTile=function(J){J.unloadVectorData(),J.actor&&J.actor.send("removeTile",{uid:J.uid,type:this.type,source:this.id},void 0)},tt.prototype.hasTransition=function(){return!1},tt}(i.Evented),C=function(H){function tt(J,ct,At,Nt){H.call(this),this.id=J,this.dispatcher=At,this.setEventedParent(Nt),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.extend({type:"raster"},ct),i.extend(this,i.pick(ct,["url","scheme","tileSize"]))}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.load=function(){var J=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=B(this._options,this.map._requestManager,function(ct,At){J._tileJSONRequest=null,J._loaded=!0,ct?J.fire(new i.ErrorEvent(ct)):At&&(i.extend(J,At),At.bounds&&(J.tileBounds=new O(At.bounds,J.minzoom,J.maxzoom)),i.postTurnstileEvent(At.tiles),i.postMapLoadEvent(At.tiles,J.map._getMapId(),J.map._requestManager._skuToken),J.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})),J.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})))})},tt.prototype.loaded=function(){return this._loaded},tt.prototype.onAdd=function(J){this.map=J,this.load()},tt.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},tt.prototype.serialize=function(){return i.extend({},this._options)},tt.prototype.hasTile=function(J){return!this.tileBounds||this.tileBounds.contains(J.canonical)},tt.prototype.loadTile=function(J,ct){var At=this,Nt=this.map._requestManager.normalizeTileURL(J.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);J.request=i.getImage(this.map._requestManager.transformRequest(Nt,i.ResourceType.Tile),function(Qt,se){if(delete J.request,J.aborted)J.state="unloaded",ct(null);else if(Qt)J.state="errored",ct(Qt);else if(se){At.map._refreshExpiredTiles&&J.setExpiryData(se),delete se.cacheControl,delete se.expires;var be=At.map.painter.context,Ze=be.gl;J.texture=At.map.painter.getTileTexture(se.width),J.texture?J.texture.update(se,{useMipmap:!0}):(J.texture=new i.Texture(be,se,Ze.RGBA,{useMipmap:!0}),J.texture.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE,Ze.LINEAR_MIPMAP_NEAREST),be.extTextureFilterAnisotropic&&Ze.texParameterf(Ze.TEXTURE_2D,be.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,be.extTextureFilterAnisotropicMax)),J.state="loaded",i.cacheEntryPossiblyAdded(At.dispatcher),ct(null)}})},tt.prototype.abortTile=function(J,ct){J.request&&(J.request.cancel(),delete J.request),ct()},tt.prototype.unloadTile=function(J,ct){J.texture&&this.map.painter.saveTileTexture(J.texture),ct()},tt.prototype.hasTransition=function(){return!1},tt}(i.Evented),F=function(H){function tt(J,ct,At,Nt){H.call(this,J,ct,At,Nt),this.type="raster-dem",this.maxzoom=22,this._options=i.extend({type:"raster-dem"},ct),this.encoding=ct.encoding||"mapbox"}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},tt.prototype.loadTile=function(J,ct){var At=this.map._requestManager.normalizeTileURL(J.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);J.request=i.getImage(this.map._requestManager.transformRequest(At,i.ResourceType.Tile),Nt.bind(this)),J.neighboringTiles=this._getNeighboringTiles(J.tileID);function Nt(se,be){if(delete J.request,J.aborted)J.state="unloaded",ct(null);else if(se)J.state="errored",ct(se);else if(be){this.map._refreshExpiredTiles&&J.setExpiryData(be),delete be.cacheControl,delete be.expires;var Ze=i.window.ImageBitmap&&be instanceof i.window.ImageBitmap&&i.offscreenCanvasSupported(),or=Ze?be:i.browser.getImageData(be,1),nr={uid:J.uid,coord:J.tileID,source:this.id,rawImageData:or,encoding:this.encoding};(!J.actor||J.state==="expired")&&(J.actor=this.dispatcher.getActor(),J.actor.send("loadDEMTile",nr,Qt.bind(this)))}}function Qt(se,be){se&&(J.state="errored",ct(se)),be&&(J.dem=be,J.needsHillshadePrepare=!0,J.state="loaded",ct(null))}},tt.prototype._getNeighboringTiles=function(J){var ct=J.canonical,At=Math.pow(2,ct.z),Nt=(ct.x-1+At)%At,Qt=ct.x===0?J.wrap-1:J.wrap,se=(ct.x+1+At)%At,be=ct.x+1===At?J.wrap+1:J.wrap,Ze={};return Ze[new i.OverscaledTileID(J.overscaledZ,Qt,ct.z,Nt,ct.y).key]={backfilled:!1},Ze[new i.OverscaledTileID(J.overscaledZ,be,ct.z,se,ct.y).key]={backfilled:!1},ct.y>0&&(Ze[new i.OverscaledTileID(J.overscaledZ,Qt,ct.z,Nt,ct.y-1).key]={backfilled:!1},Ze[new i.OverscaledTileID(J.overscaledZ,J.wrap,ct.z,ct.x,ct.y-1).key]={backfilled:!1},Ze[new i.OverscaledTileID(J.overscaledZ,be,ct.z,se,ct.y-1).key]={backfilled:!1}),ct.y+1<At&&(Ze[new i.OverscaledTileID(J.overscaledZ,Qt,ct.z,Nt,ct.y+1).key]={backfilled:!1},Ze[new i.OverscaledTileID(J.overscaledZ,J.wrap,ct.z,ct.x,ct.y+1).key]={backfilled:!1},Ze[new i.OverscaledTileID(J.overscaledZ,be,ct.z,se,ct.y+1).key]={backfilled:!1}),Ze},tt.prototype.unloadTile=function(J){J.demTexture&&this.map.painter.saveTileTexture(J.demTexture),J.fbo&&(J.fbo.destroy(),delete J.fbo),J.dem&&delete J.dem,delete J.neighboringTiles,J.state="unloaded",J.actor&&J.actor.send("removeDEMTile",{uid:J.uid,source:this.id})},tt}(C),N=function(H){function tt(J,ct,At,Nt){H.call(this),this.id=J,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=At.getActor(),this.setEventedParent(Nt),this._data=ct.data,this._options=i.extend({},ct),this._collectResourceTiming=ct.collectResourceTiming,this._resourceTiming=[],ct.maxzoom!==void 0&&(this.maxzoom=ct.maxzoom),ct.type&&(this.type=ct.type),ct.attribution&&(this.attribution=ct.attribution),this.promoteId=ct.promoteId;var Qt=i.EXTENT/this.tileSize;this.workerOptions=i.extend({source:this.id,cluster:ct.cluster||!1,geojsonVtOptions:{buffer:(ct.buffer!==void 0?ct.buffer:128)*Qt,tolerance:(ct.tolerance!==void 0?ct.tolerance:.375)*Qt,extent:i.EXTENT,maxZoom:this.maxzoom,lineMetrics:ct.lineMetrics||!1,generateId:ct.generateId||!1},superclusterOptions:{maxZoom:ct.clusterMaxZoom!==void 0?Math.min(ct.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:i.EXTENT,radius:(ct.clusterRadius||50)*Qt,log:!1,generateId:ct.generateId||!1},clusterProperties:ct.clusterProperties},ct.workerOptions)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.load=function(){var J=this;this.fire(new i.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ct){if(ct){J.fire(new i.ErrorEvent(ct));return}var At={dataType:"source",sourceDataType:"metadata"};J._collectResourceTiming&&J._resourceTiming&&J._resourceTiming.length>0&&(At.resourceTiming=J._resourceTiming,J._resourceTiming=[]),J.fire(new i.Event("data",At))})},tt.prototype.onAdd=function(J){this.map=J,this.load()},tt.prototype.setData=function(J){var ct=this;return this._data=J,this.fire(new i.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(At){if(At){ct.fire(new i.ErrorEvent(At));return}var Nt={dataType:"source",sourceDataType:"content"};ct._collectResourceTiming&&ct._resourceTiming&&ct._resourceTiming.length>0&&(Nt.resourceTiming=ct._resourceTiming,ct._resourceTiming=[]),ct.fire(new i.Event("data",Nt))}),this},tt.prototype.getClusterExpansionZoom=function(J,ct){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:J,source:this.id},ct),this},tt.prototype.getClusterChildren=function(J,ct){return this.actor.send("geojson.getClusterChildren",{clusterId:J,source:this.id},ct),this},tt.prototype.getClusterLeaves=function(J,ct,At,Nt){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:J,limit:ct,offset:At},Nt),this},tt.prototype._updateWorkerData=function(J){var ct=this;this._loaded=!1;var At=i.extend({},this.workerOptions),Nt=this._data;typeof Nt=="string"?(At.request=this.map._requestManager.transformRequest(i.browser.resolveURL(Nt),i.ResourceType.Source),At.request.collectResourceTiming=this._collectResourceTiming):At.data=JSON.stringify(Nt),this.actor.send(this.type+".loadData",At,function(Qt,se){ct._removed||se&&se.abandoned||(ct._loaded=!0,se&&se.resourceTiming&&se.resourceTiming[ct.id]&&(ct._resourceTiming=se.resourceTiming[ct.id].slice(0)),ct.actor.send(ct.type+".coalesce",{source:At.source},null),J(Qt))})},tt.prototype.loaded=function(){return this._loaded},tt.prototype.loadTile=function(J,ct){var At=this,Nt=J.actor?"reloadTile":"loadTile";J.actor=this.actor;var Qt={type:this.type,uid:J.uid,tileID:J.tileID,zoom:J.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:i.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};J.request=this.actor.send(Nt,Qt,function(se,be){return delete J.request,J.unloadVectorData(),J.aborted?ct(null):se?ct(se):(J.loadVectorData(be,At.map.painter,Nt==="reloadTile"),ct(null))})},tt.prototype.abortTile=function(J){J.request&&(J.request.cancel(),delete J.request),J.aborted=!0},tt.prototype.unloadTile=function(J){J.unloadVectorData(),this.actor.send("removeTile",{uid:J.uid,type:this.type,source:this.id})},tt.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},tt.prototype.serialize=function(){return i.extend({},this._options,{type:this.type,data:this._data})},tt.prototype.hasTransition=function(){return!1},tt}(i.Evented),V=i.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),K=function(H){function tt(J,ct,At,Nt){H.call(this),this.id=J,this.dispatcher=At,this.coordinates=ct.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Nt),this.options=ct}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.load=function(J,ct){var At=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this.url=this.options.url,i.getImage(this.map._requestManager.transformRequest(this.url,i.ResourceType.Image),function(Nt,Qt){At._loaded=!0,Nt?At.fire(new i.ErrorEvent(Nt)):Qt&&(At.image=Qt,J&&(At.coordinates=J),ct&&ct(),At._finishLoading())})},tt.prototype.loaded=function(){return this._loaded},tt.prototype.updateImage=function(J){var ct=this;return!this.image||!J.url?this:(this.options.url=J.url,this.load(J.coordinates,function(){ct.texture=null}),this)},tt.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})))},tt.prototype.onAdd=function(J){this.map=J,this.load()},tt.prototype.setCoordinates=function(J){var ct=this;this.coordinates=J;var At=J.map(i.MercatorCoordinate.fromLngLat);this.tileID=Q(At),this.minzoom=this.maxzoom=this.tileID.z;var Nt=At.map(function(Qt){return ct.tileID.getTilePoint(Qt)._round()});return this._boundsArray=new i.StructArrayLayout4i8,this._boundsArray.emplaceBack(Nt[0].x,Nt[0].y,0,0),this._boundsArray.emplaceBack(Nt[1].x,Nt[1].y,i.EXTENT,0),this._boundsArray.emplaceBack(Nt[3].x,Nt[3].y,0,i.EXTENT),this._boundsArray.emplaceBack(Nt[2].x,Nt[2].y,i.EXTENT,i.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})),this},tt.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var J=this.map.painter.context,ct=J.gl;this.boundsBuffer||(this.boundsBuffer=J.createVertexBuffer(this._boundsArray,V.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new i.Texture(J,this.image,ct.RGBA),this.texture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE));for(var At in this.tiles){var Nt=this.tiles[At];Nt.state!=="loaded"&&(Nt.state="loaded",Nt.texture=this.texture)}}},tt.prototype.loadTile=function(J,ct){this.tileID&&this.tileID.equals(J.tileID.canonical)?(this.tiles[String(J.tileID.wrap)]=J,J.buckets={},ct(null)):(J.state="errored",ct(null))},tt.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},tt.prototype.hasTransition=function(){return!1},tt}(i.Evented);function Q(H){for(var tt=1/0,J=1/0,ct=-1/0,At=-1/0,Nt=0,Qt=H;Nt<Qt.length;Nt+=1){var se=Qt[Nt];tt=Math.min(tt,se.x),J=Math.min(J,se.y),ct=Math.max(ct,se.x),At=Math.max(At,se.y)}var be=ct-tt,Ze=At-J,or=Math.max(be,Ze),nr=Math.max(0,Math.floor(-Math.log(or)/Math.LN2)),kr=Math.pow(2,nr);return new i.CanonicalTileID(nr,Math.floor((tt+ct)/2*kr),Math.floor((J+At)/2*kr))}var at=function(H){function tt(J,ct,At,Nt){H.call(this,J,ct,At,Nt),this.roundZoom=!0,this.type="video",this.options=ct}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.load=function(){var J=this;this._loaded=!1;var ct=this.options;this.urls=[];for(var At=0,Nt=ct.urls;At<Nt.length;At+=1){var Qt=Nt[At];this.urls.push(this.map._requestManager.transformRequest(Qt,i.ResourceType.Source).url)}i.getVideo(this.urls,function(se,be){J._loaded=!0,se?J.fire(new i.ErrorEvent(se)):be&&(J.video=be,J.video.loop=!0,J.video.addEventListener("playing",function(){J.map.triggerRepaint()}),J.map&&J.video.play(),J._finishLoading())})},tt.prototype.pause=function(){this.video&&this.video.pause()},tt.prototype.play=function(){this.video&&this.video.play()},tt.prototype.seek=function(J){if(this.video){var ct=this.video.seekable;J<ct.start(0)||J>ct.end(0)?this.fire(new i.ErrorEvent(new i.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+ct.start(0)+" and "+ct.end(0)+"-second mark."))):this.video.currentTime=J}},tt.prototype.getVideo=function(){return this.video},tt.prototype.onAdd=function(J){this.map||(this.map=J,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},tt.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var J=this.map.painter.context,ct=J.gl;this.boundsBuffer||(this.boundsBuffer=J.createVertexBuffer(this._boundsArray,V.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE),ct.texSubImage2D(ct.TEXTURE_2D,0,0,0,ct.RGBA,ct.UNSIGNED_BYTE,this.video)):(this.texture=new i.Texture(J,this.video,ct.RGBA),this.texture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE));for(var At in this.tiles){var Nt=this.tiles[At];Nt.state!=="loaded"&&(Nt.state="loaded",Nt.texture=this.texture)}}},tt.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},tt.prototype.hasTransition=function(){return this.video&&!this.video.paused},tt}(K),it=function(H){function tt(J,ct,At,Nt){H.call(this,J,ct,At,Nt),ct.coordinates?(!Array.isArray(ct.coordinates)||ct.coordinates.length!==4||ct.coordinates.some(function(Qt){return!Array.isArray(Qt)||Qt.length!==2||Qt.some(function(se){return typeof se!="number"})}))&&this.fire(new i.ErrorEvent(new i.ValidationError("sources."+J,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new i.ErrorEvent(new i.ValidationError("sources."+J,null,'missing required property "coordinates"'))),ct.animate&&typeof ct.animate!="boolean"&&this.fire(new i.ErrorEvent(new i.ValidationError("sources."+J,null,'optional "animate" property must be a boolean value'))),ct.canvas?typeof ct.canvas!="string"&&!(ct.canvas instanceof i.window.HTMLCanvasElement)&&this.fire(new i.ErrorEvent(new i.ValidationError("sources."+J,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new i.ErrorEvent(new i.ValidationError("sources."+J,null,'missing required property "canvas"'))),this.options=ct,this.animate=ct.animate!==void 0?ct.animate:!0}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof i.window.HTMLCanvasElement?this.options.canvas:i.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new i.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},tt.prototype.getCanvas=function(){return this.canvas},tt.prototype.onAdd=function(J){this.map=J,this.load(),this.canvas&&this.animate&&this.play()},tt.prototype.onRemove=function(){this.pause()},tt.prototype.prepare=function(){var J=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,J=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,J=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var ct=this.map.painter.context,At=ct.gl;this.boundsBuffer||(this.boundsBuffer=ct.createVertexBuffer(this._boundsArray,V.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(J||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new i.Texture(ct,this.canvas,At.RGBA,{premultiply:!0});for(var Nt in this.tiles){var Qt=this.tiles[Nt];Qt.state!=="loaded"&&(Qt.state="loaded",Qt.texture=this.texture)}}},tt.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},tt.prototype.hasTransition=function(){return this._playing},tt.prototype._hasInvalidDimensions=function(){for(var J=0,ct=[this.canvas.width,this.canvas.height];J<ct.length;J+=1){var At=ct[J];if(isNaN(At)||At<=0)return!0}return!1},tt}(K),q={vector:R,raster:C,"raster-dem":F,geojson:N,video:at,image:K,canvas:it},W=function(H,tt,J,ct){var At=new q[tt.type](H,tt,J,ct);if(At.id!==H)throw new Error("Expected Source id to be "+H+" instead of "+At.id);return i.bindAll(["load","abort","unload","serialize","prepare"],At),At},Z=function(H){return q[H]},G=function(H,tt){q[H]=tt};function et(H,tt){var J=i.identity([]);return i.translate(J,J,[1,1,0]),i.scale(J,J,[H.width*.5,H.height*.5,1]),i.multiply(J,J,H.calculatePosMatrix(tt.toUnwrapped()))}function nt(H,tt,J){if(H)for(var ct=0,At=H;ct<At.length;ct+=1){var Nt=At[ct],Qt=tt[Nt];if(Qt&&Qt.source===J&&Qt.type==="fill-extrusion")return!0}else for(var se in tt){var be=tt[se];if(be.source===J&&be.type==="fill-extrusion")return!0}return!1}function X(H,tt,J,ct,At,Nt){var Qt=nt(At&&At.layers,tt,H.id),se=Nt.maxPitchScaleFactor(),be=H.tilesIn(ct,se,Qt);be.sort(rt);for(var Ze=[],or=0,nr=be;or<nr.length;or+=1){var kr=nr[or];Ze.push({wrappedTileID:kr.tileID.wrapped().key,queryResults:kr.tile.queryRenderedFeatures(tt,J,H._state,kr.queryGeometry,kr.cameraQueryGeometry,kr.scale,At,Nt,se,et(H.transform,kr.tileID))})}var Er=ht(Ze);for(var qr in Er)Er[qr].forEach(function(Fr){var Rr=Fr.feature,Xr=H.getFeatureState(Rr.layer["source-layer"],Rr.id);Rr.source=Rr.layer.source,Rr.layer["source-layer"]&&(Rr.sourceLayer=Rr.layer["source-layer"]),Rr.state=Xr});return Er}function Y(H,tt,J,ct,At,Nt,Qt){for(var se={},be=Nt.queryRenderedSymbols(ct),Ze=[],or=0,nr=Object.keys(be).map(Number);or<nr.length;or+=1){var kr=nr[or];Ze.push(Qt[kr])}Ze.sort(rt);for(var Er=function(){var on=Fr[qr],Cn=on.featureIndex.lookupSymbolFeatures(be[on.bucketInstanceId],tt,on.bucketIndex,on.sourceLayerIndex,At.filter,At.layers,At.availableImages,H);for(var En in Cn){var Fn=se[En]=se[En]||[],Nn=Cn[En];Nn.sort(function(hi,ti){var fi=on.featureSortOrder;if(fi){var Ci=fi.indexOf(hi.featureIndex),Di=fi.indexOf(ti.featureIndex);return Di-Ci}else return ti.featureIndex-hi.featureIndex});for(var jn=0,ai=Nn;jn<ai.length;jn+=1){var ni=ai[jn];Fn.push(ni)}}},qr=0,Fr=Ze;qr<Fr.length;qr+=1)Er();var Rr=function(on){se[on].forEach(function(Cn){var En=Cn.feature,Fn=H[on],Nn=J[Fn.source],jn=Nn.getFeatureState(En.layer["source-layer"],En.id);En.source=En.layer.source,En.layer["source-layer"]&&(En.sourceLayer=En.layer["source-layer"]),En.state=jn})};for(var Xr in se)Rr(Xr);return se}function ot(H,tt){for(var J=H.getRenderableIds().map(function(be){return H.getTileByID(be)}),ct=[],At={},Nt=0;Nt<J.length;Nt++){var Qt=J[Nt],se=Qt.tileID.canonical.key;At[se]||(At[se]=!0,Qt.querySourceFeatures(ct,tt))}return ct}function rt(H,tt){var J=H.tileID,ct=tt.tileID;return J.overscaledZ-ct.overscaledZ||J.canonical.y-ct.canonical.y||J.wrap-ct.wrap||J.canonical.x-ct.canonical.x}function ht(H){for(var tt={},J={},ct=0,At=H;ct<At.length;ct+=1){var Nt=At[ct],Qt=Nt.queryResults,se=Nt.wrappedTileID,be=J[se]=J[se]||{};for(var Ze in Qt)for(var or=Qt[Ze],nr=be[Ze]=be[Ze]||{},kr=tt[Ze]=tt[Ze]||[],Er=0,qr=or;Er<qr.length;Er+=1){var Fr=qr[Er];nr[Fr.featureIndex]||(nr[Fr.featureIndex]=!0,kr.push(Fr))}}return tt}var pt=function(H,tt){this.max=H,this.onRemove=tt,this.reset()};pt.prototype.reset=function(){for(var H in this.data)for(var tt=0,J=this.data[H];tt<J.length;tt+=1){var ct=J[tt];ct.timeout&&clearTimeout(ct.timeout),this.onRemove(ct.value)}return this.data={},this.order=[],this},pt.prototype.add=function(H,tt,J){var ct=this,At=H.wrapped().key;this.data[At]===void 0&&(this.data[At]=[]);var Nt={value:tt,timeout:void 0};if(J!==void 0&&(Nt.timeout=setTimeout(function(){ct.remove(H,Nt)},J)),this.data[At].push(Nt),this.order.push(At),this.order.length>this.max){var Qt=this._getAndRemoveByKey(this.order[0]);Qt&&this.onRemove(Qt)}return this},pt.prototype.has=function(H){return H.wrapped().key in this.data},pt.prototype.getAndRemove=function(H){return this.has(H)?this._getAndRemoveByKey(H.wrapped().key):null},pt.prototype._getAndRemoveByKey=function(H){var tt=this.data[H].shift();return tt.timeout&&clearTimeout(tt.timeout),this.data[H].length===0&&delete this.data[H],this.order.splice(this.order.indexOf(H),1),tt.value},pt.prototype.getByKey=function(H){var tt=this.data[H];return tt?tt[0].value:null},pt.prototype.get=function(H){if(!this.has(H))return null;var tt=this.data[H.wrapped().key][0];return tt.value},pt.prototype.remove=function(H,tt){if(!this.has(H))return this;var J=H.wrapped().key,ct=tt===void 0?0:this.data[J].indexOf(tt),At=this.data[J][ct];return this.data[J].splice(ct,1),At.timeout&&clearTimeout(At.timeout),this.data[J].length===0&&delete this.data[J],this.onRemove(At.value),this.order.splice(this.order.indexOf(J),1),this},pt.prototype.setMaxSize=function(H){for(this.max=H;this.order.length>this.max;){var tt=this._getAndRemoveByKey(this.order[0]);tt&&this.onRemove(tt)}return this},pt.prototype.filter=function(H){var tt=[];for(var J in this.data)for(var ct=0,At=this.data[J];ct<At.length;ct+=1){var Nt=At[ct];H(Nt.value)||tt.push(Nt)}for(var Qt=0,se=tt;Qt<se.length;Qt+=1){var be=se[Qt];this.remove(be.value.tileID,be)}};var yt=function(H,tt,J){this.context=H;var ct=H.gl;this.buffer=ct.createBuffer(),this.dynamicDraw=!!J,this.context.unbindVAO(),H.bindElementBuffer.set(this.buffer),ct.bufferData(ct.ELEMENT_ARRAY_BUFFER,tt.arrayBuffer,this.dynamicDraw?ct.DYNAMIC_DRAW:ct.STATIC_DRAW),this.dynamicDraw||delete tt.arrayBuffer};yt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},yt.prototype.updateData=function(H){var tt=this.context.gl;this.context.unbindVAO(),this.bind(),tt.bufferSubData(tt.ELEMENT_ARRAY_BUFFER,0,H.arrayBuffer)},yt.prototype.destroy=function(){var H=this.context.gl;this.buffer&&(H.deleteBuffer(this.buffer),delete this.buffer)};var xt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Ft=function(H,tt,J,ct){this.length=tt.length,this.attributes=J,this.itemSize=tt.bytesPerElement,this.dynamicDraw=ct,this.context=H;var At=H.gl;this.buffer=At.createBuffer(),H.bindVertexBuffer.set(this.buffer),At.bufferData(At.ARRAY_BUFFER,tt.arrayBuffer,this.dynamicDraw?At.DYNAMIC_DRAW:At.STATIC_DRAW),this.dynamicDraw||delete tt.arrayBuffer};Ft.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Ft.prototype.updateData=function(H){var tt=this.context.gl;this.bind(),tt.bufferSubData(tt.ARRAY_BUFFER,0,H.arrayBuffer)},Ft.prototype.enableAttributes=function(H,tt){for(var J=0;J<this.attributes.length;J++){var ct=this.attributes[J],At=tt.attributes[ct.name];At!==void 0&&H.enableVertexAttribArray(At)}},Ft.prototype.setVertexAttribPointers=function(H,tt,J){for(var ct=0;ct<this.attributes.length;ct++){var At=this.attributes[ct],Nt=tt.attributes[At.name];Nt!==void 0&&H.vertexAttribPointer(Nt,At.components,H[xt[At.type]],!1,this.itemSize,At.offset+this.itemSize*(J||0))}},Ft.prototype.destroy=function(){var H=this.context.gl;this.buffer&&(H.deleteBuffer(this.buffer),delete this.buffer)};var Et=function(H){this.gl=H.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Et.prototype.get=function(){return this.current},Et.prototype.set=function(H){},Et.prototype.getDefault=function(){return this.default},Et.prototype.setDefault=function(){this.set(this.default)};var mt=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return i.Color.transparent},tt.prototype.set=function(J){var ct=this.current;J.r===ct.r&&J.g===ct.g&&J.b===ct.b&&J.a===ct.a&&!this.dirty||(this.gl.clearColor(J.r,J.g,J.b,J.a),this.current=J,this.dirty=!1)},tt}(Et),gt=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return 1},tt.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.clearDepth(J),this.current=J,this.dirty=!1)},tt}(Et),wt=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return 0},tt.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.clearStencil(J),this.current=J,this.dirty=!1)},tt}(Et),Pt=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return[!0,!0,!0,!0]},tt.prototype.set=function(J){var ct=this.current;J[0]===ct[0]&&J[1]===ct[1]&&J[2]===ct[2]&&J[3]===ct[3]&&!this.dirty||(this.gl.colorMask(J[0],J[1],J[2],J[3]),this.current=J,this.dirty=!1)},tt}(Et),Bt=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return!0},tt.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.depthMask(J),this.current=J,this.dirty=!1)},tt}(Et),kt=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return 255},tt.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.stencilMask(J),this.current=J,this.dirty=!1)},tt}(Et),jt=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},tt.prototype.set=function(J){var ct=this.current;J.func===ct.func&&J.ref===ct.ref&&J.mask===ct.mask&&!this.dirty||(this.gl.stencilFunc(J.func,J.ref,J.mask),this.current=J,this.dirty=!1)},tt}(Et),Ht=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){var J=this.gl;return[J.KEEP,J.KEEP,J.KEEP]},tt.prototype.set=function(J){var ct=this.current;J[0]===ct[0]&&J[1]===ct[1]&&J[2]===ct[2]&&!this.dirty||(this.gl.stencilOp(J[0],J[1],J[2]),this.current=J,this.dirty=!1)},tt}(Et),Vt=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return!1},tt.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ct=this.gl;J?ct.enable(ct.STENCIL_TEST):ct.disable(ct.STENCIL_TEST),this.current=J,this.dirty=!1}},tt}(Et),ee=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return[0,1]},tt.prototype.set=function(J){var ct=this.current;J[0]===ct[0]&&J[1]===ct[1]&&!this.dirty||(this.gl.depthRange(J[0],J[1]),this.current=J,this.dirty=!1)},tt}(Et),te=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return!1},tt.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ct=this.gl;J?ct.enable(ct.DEPTH_TEST):ct.disable(ct.DEPTH_TEST),this.current=J,this.dirty=!1}},tt}(Et),ae=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return this.gl.LESS},tt.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.depthFunc(J),this.current=J,this.dirty=!1)},tt}(Et),le=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return!1},tt.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ct=this.gl;J?ct.enable(ct.BLEND):ct.disable(ct.BLEND),this.current=J,this.dirty=!1}},tt}(Et),ce=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){var J=this.gl;return[J.ONE,J.ZERO]},tt.prototype.set=function(J){var ct=this.current;J[0]===ct[0]&&J[1]===ct[1]&&!this.dirty||(this.gl.blendFunc(J[0],J[1]),this.current=J,this.dirty=!1)},tt}(Et),pe=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return i.Color.transparent},tt.prototype.set=function(J){var ct=this.current;J.r===ct.r&&J.g===ct.g&&J.b===ct.b&&J.a===ct.a&&!this.dirty||(this.gl.blendColor(J.r,J.g,J.b,J.a),this.current=J,this.dirty=!1)},tt}(Et),we=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return this.gl.FUNC_ADD},tt.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.blendEquation(J),this.current=J,this.dirty=!1)},tt}(Et),ve=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return!1},tt.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ct=this.gl;J?ct.enable(ct.CULL_FACE):ct.disable(ct.CULL_FACE),this.current=J,this.dirty=!1}},tt}(Et),Mt=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return this.gl.BACK},tt.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.cullFace(J),this.current=J,this.dirty=!1)},tt}(Et),It=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return this.gl.CCW},tt.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.frontFace(J),this.current=J,this.dirty=!1)},tt}(Et),Rt=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return null},tt.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.useProgram(J),this.current=J,this.dirty=!1)},tt}(Et),zt=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return this.gl.TEXTURE0},tt.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.activeTexture(J),this.current=J,this.dirty=!1)},tt}(Et),Tt=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){var J=this.gl;return[0,0,J.drawingBufferWidth,J.drawingBufferHeight]},tt.prototype.set=function(J){var ct=this.current;J[0]===ct[0]&&J[1]===ct[1]&&J[2]===ct[2]&&J[3]===ct[3]&&!this.dirty||(this.gl.viewport(J[0],J[1],J[2],J[3]),this.current=J,this.dirty=!1)},tt}(Et),ft=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return null},tt.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ct=this.gl;ct.bindFramebuffer(ct.FRAMEBUFFER,J),this.current=J,this.dirty=!1}},tt}(Et),ut=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return null},tt.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ct=this.gl;ct.bindRenderbuffer(ct.RENDERBUFFER,J),this.current=J,this.dirty=!1}},tt}(Et),vt=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return null},tt.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ct=this.gl;ct.bindTexture(ct.TEXTURE_2D,J),this.current=J,this.dirty=!1}},tt}(Et),St=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return null},tt.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ct=this.gl;ct.bindBuffer(ct.ARRAY_BUFFER,J),this.current=J,this.dirty=!1}},tt}(Et),Ot=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return null},tt.prototype.set=function(J){var ct=this.gl;ct.bindBuffer(ct.ELEMENT_ARRAY_BUFFER,J),this.current=J,this.dirty=!1},tt}(Et),Xt=function(H){function tt(J){H.call(this,J),this.vao=J.extVertexArrayObject}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return null},tt.prototype.set=function(J){!this.vao||J===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(J),this.current=J,this.dirty=!1)},tt}(Et),$t=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return 4},tt.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ct=this.gl;ct.pixelStorei(ct.UNPACK_ALIGNMENT,J),this.current=J,this.dirty=!1}},tt}(Et),de=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return!1},tt.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ct=this.gl;ct.pixelStorei(ct.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J),this.current=J,this.dirty=!1}},tt}(Et),Me=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return!1},tt.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ct=this.gl;ct.pixelStorei(ct.UNPACK_FLIP_Y_WEBGL,J),this.current=J,this.dirty=!1}},tt}(Et),Fe=function(H){function tt(J,ct){H.call(this,J),this.context=J,this.parent=ct}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return null},tt}(Et),De=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.setDirty=function(){this.dirty=!0},tt.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var ct=this.gl;ct.framebufferTexture2D(ct.FRAMEBUFFER,ct.COLOR_ATTACHMENT0,ct.TEXTURE_2D,J,0),this.current=J,this.dirty=!1}},tt}(Fe),Ae=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var ct=this.gl;ct.framebufferRenderbuffer(ct.FRAMEBUFFER,ct.DEPTH_ATTACHMENT,ct.RENDERBUFFER,J),this.current=J,this.dirty=!1}},tt}(Fe),Ve=function(H,tt,J,ct){this.context=H,this.width=tt,this.height=J;var At=H.gl,Nt=this.framebuffer=At.createFramebuffer();this.colorAttachment=new De(H,Nt),ct&&(this.depthAttachment=new Ae(H,Nt))};Ve.prototype.destroy=function(){var H=this.context.gl,tt=this.colorAttachment.get();if(tt&&H.deleteTexture(tt),this.depthAttachment){var J=this.depthAttachment.get();J&&H.deleteRenderbuffer(J)}H.deleteFramebuffer(this.framebuffer)};var Qe=519,Sr=function(H,tt,J){this.func=H,this.mask=tt,this.range=J};Sr.ReadOnly=!1,Sr.ReadWrite=!0,Sr.disabled=new Sr(Qe,Sr.ReadOnly,[0,1]);var he=519,je=7680,Re=function(H,tt,J,ct,At,Nt){this.test=H,this.ref=tt,this.mask=J,this.fail=ct,this.depthFail=At,this.pass=Nt};Re.disabled=new Re({func:he,mask:0},0,0,je,je,je);var _r=0,tr=1,Gt=771,re=function(H,tt,J){this.blendFunction=H,this.blendColor=tt,this.mask=J};re.Replace=[tr,_r],re.disabled=new re(re.Replace,i.Color.transparent,[!1,!1,!1,!1]),re.unblended=new re(re.Replace,i.Color.transparent,[!0,!0,!0,!0]),re.alphaBlended=new re([tr,Gt],i.Color.transparent,[!0,!0,!0,!0]);var fe=1029,ye=2305,Le=function(H,tt,J){this.enable=H,this.mode=tt,this.frontFace=J};Le.disabled=new Le(!1,fe,ye),Le.backCCW=new Le(!0,fe,ye);var _e=function(H){this.gl=H,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new mt(this),this.clearDepth=new gt(this),this.clearStencil=new wt(this),this.colorMask=new Pt(this),this.depthMask=new Bt(this),this.stencilMask=new kt(this),this.stencilFunc=new jt(this),this.stencilOp=new Ht(this),this.stencilTest=new Vt(this),this.depthRange=new ee(this),this.depthTest=new te(this),this.depthFunc=new ae(this),this.blend=new le(this),this.blendFunc=new ce(this),this.blendColor=new pe(this),this.blendEquation=new we(this),this.cullFace=new ve(this),this.cullFaceSide=new Mt(this),this.frontFace=new It(this),this.program=new Rt(this),this.activeTexture=new zt(this),this.viewport=new Tt(this),this.bindFramebuffer=new ft(this),this.bindRenderbuffer=new ut(this),this.bindTexture=new vt(this),this.bindVertexBuffer=new St(this),this.bindElementBuffer=new Ot(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Xt(this),this.pixelStoreUnpack=new $t(this),this.pixelStoreUnpackPremultiplyAlpha=new de(this),this.pixelStoreUnpackFlipY=new Me(this),this.extTextureFilterAnisotropic=H.getExtension("EXT_texture_filter_anisotropic")||H.getExtension("MOZ_EXT_texture_filter_anisotropic")||H.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=H.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=H.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(H.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=H.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=H.getExtension("EXT_disjoint_timer_query")};_e.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},_e.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},_e.prototype.createIndexBuffer=function(H,tt){return new yt(this,H,tt)},_e.prototype.createVertexBuffer=function(H,tt,J){return new Ft(this,H,tt,J)},_e.prototype.createRenderbuffer=function(H,tt,J){var ct=this.gl,At=ct.createRenderbuffer();return this.bindRenderbuffer.set(At),ct.renderbufferStorage(ct.RENDERBUFFER,H,tt,J),this.bindRenderbuffer.set(null),At},_e.prototype.createFramebuffer=function(H,tt,J){return new Ve(this,H,tt,J)},_e.prototype.clear=function(H){var tt=H.color,J=H.depth,ct=this.gl,At=0;tt&&(At|=ct.COLOR_BUFFER_BIT,this.clearColor.set(tt),this.colorMask.set([!0,!0,!0,!0])),typeof J<"u"&&(At|=ct.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(J),this.depthMask.set(!0)),ct.clear(At)},_e.prototype.setCullFace=function(H){H.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(H.mode),this.frontFace.set(H.frontFace))},_e.prototype.setDepthMode=function(H){H.func===this.gl.ALWAYS&&!H.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(H.func),this.depthMask.set(H.mask),this.depthRange.set(H.range))},_e.prototype.setStencilMode=function(H){H.test.func===this.gl.ALWAYS&&!H.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(H.mask),this.stencilOp.set([H.fail,H.depthFail,H.pass]),this.stencilFunc.set({func:H.test.func,ref:H.ref,mask:H.test.mask}))},_e.prototype.setColorMode=function(H){i.deepEqual(H.blendFunction,re.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(H.blendFunction),this.blendColor.set(H.blendColor)),this.colorMask.set(H.mask)},_e.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ce=function(H){function tt(J,ct,At){var Nt=this;H.call(this),this.id=J,this.dispatcher=At,this.on("data",function(Qt){Qt.dataType==="source"&&Qt.sourceDataType==="metadata"&&(Nt._sourceLoaded=!0),Nt._sourceLoaded&&!Nt._paused&&Qt.dataType==="source"&&Qt.sourceDataType==="content"&&(Nt.reload(),Nt.transform&&Nt.update(Nt.transform))}),this.on("error",function(){Nt._sourceErrored=!0}),this._source=W(J,ct,At,this),this._tiles={},this._cache=new pt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new i.SourceFeatureState}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.onAdd=function(J){this.map=J,this._maxTileCacheSize=J?J._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(J)},tt.prototype.onRemove=function(J){this._source&&this._source.onRemove&&this._source.onRemove(J)},tt.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var J in this._tiles){var ct=this._tiles[J];if(ct.state!=="loaded"&&ct.state!=="errored")return!1}return!0},tt.prototype.getSource=function(){return this._source},tt.prototype.pause=function(){this._paused=!0},tt.prototype.resume=function(){if(this._paused){var J=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,J&&this.reload(),this.transform&&this.update(this.transform)}},tt.prototype._loadTile=function(J,ct){return this._source.loadTile(J,ct)},tt.prototype._unloadTile=function(J){if(this._source.unloadTile)return this._source.unloadTile(J,function(){})},tt.prototype._abortTile=function(J){if(this._source.abortTile)return this._source.abortTile(J,function(){})},tt.prototype.serialize=function(){return this._source.serialize()},tt.prototype.prepare=function(J){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var ct in this._tiles){var At=this._tiles[ct];At.upload(J),At.prepare(this.map.style.imageManager)}},tt.prototype.getIds=function(){return i.values(this._tiles).map(function(J){return J.tileID}).sort(ze).map(function(J){return J.key})},tt.prototype.getRenderableIds=function(J){var ct=this,At=[];for(var Nt in this._tiles)this._isIdRenderable(Nt,J)&&At.push(this._tiles[Nt]);return J?At.sort(function(Qt,se){var be=Qt.tileID,Ze=se.tileID,or=new i.Point(be.canonical.x,be.canonical.y)._rotate(ct.transform.angle),nr=new i.Point(Ze.canonical.x,Ze.canonical.y)._rotate(ct.transform.angle);return be.overscaledZ-Ze.overscaledZ||nr.y-or.y||nr.x-or.x}).map(function(Qt){return Qt.tileID.key}):At.map(function(Qt){return Qt.tileID}).sort(ze).map(function(Qt){return Qt.key})},tt.prototype.hasRenderableParent=function(J){var ct=this.findLoadedParent(J,0);return ct?this._isIdRenderable(ct.tileID.key):!1},tt.prototype._isIdRenderable=function(J,ct){return this._tiles[J]&&this._tiles[J].hasData()&&!this._coveredTiles[J]&&(ct||!this._tiles[J].holdingForFade())},tt.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var J in this._tiles)this._tiles[J].state!=="errored"&&this._reloadTile(J,"reloading")},tt.prototype._reloadTile=function(J,ct){var At=this._tiles[J];At&&(At.state!=="loading"&&(At.state=ct),this._loadTile(At,this._tileLoaded.bind(this,At,J,ct)))},tt.prototype._tileLoaded=function(J,ct,At,Nt){if(Nt){J.state="errored",Nt.status!==404?this._source.fire(new i.ErrorEvent(Nt,{tile:J})):this.update(this.transform);return}J.timeAdded=i.browser.now(),At==="expired"&&(J.refreshedUponExpiration=!0),this._setTileReloadTimer(ct,J),this.getSource().type==="raster-dem"&&J.dem&&this._backfillDEM(J),this._state.initializeTileState(J,this.map?this.map.painter:null),this._source.fire(new i.Event("data",{dataType:"source",tile:J,coord:J.tileID}))},tt.prototype._backfillDEM=function(J){for(var ct=this.getRenderableIds(),At=0;At<ct.length;At++){var Nt=ct[At];if(J.neighboringTiles&&J.neighboringTiles[Nt]){var Qt=this.getTileByID(Nt);se(J,Qt),se(Qt,J)}}function se(be,Ze){be.needsHillshadePrepare=!0;var or=Ze.tileID.canonical.x-be.tileID.canonical.x,nr=Ze.tileID.canonical.y-be.tileID.canonical.y,kr=Math.pow(2,be.tileID.canonical.z),Er=Ze.tileID.key;or===0&&nr===0||Math.abs(nr)>1||(Math.abs(or)>1&&(Math.abs(or+kr)===1?or+=kr:Math.abs(or-kr)===1&&(or-=kr)),!(!Ze.dem||!be.dem)&&(be.dem.backfillBorder(Ze.dem,or,nr),be.neighboringTiles&&be.neighboringTiles[Er]&&(be.neighboringTiles[Er].backfilled=!0)))}},tt.prototype.getTile=function(J){return this.getTileByID(J.key)},tt.prototype.getTileByID=function(J){return this._tiles[J]},tt.prototype._retainLoadedChildren=function(J,ct,At,Nt){for(var Qt in this._tiles){var se=this._tiles[Qt];if(!(Nt[Qt]||!se.hasData()||se.tileID.overscaledZ<=ct||se.tileID.overscaledZ>At)){for(var be=se.tileID;se&&se.tileID.overscaledZ>ct+1;){var Ze=se.tileID.scaledTo(se.tileID.overscaledZ-1);se=this._tiles[Ze.key],se&&se.hasData()&&(be=Ze)}for(var or=be;or.overscaledZ>ct;)if(or=or.scaledTo(or.overscaledZ-1),J[or.key]){Nt[be.key]=be;break}}}},tt.prototype.findLoadedParent=function(J,ct){if(J.key in this._loadedParentTiles){var At=this._loadedParentTiles[J.key];return At&&At.tileID.overscaledZ>=ct?At:null}for(var Nt=J.overscaledZ-1;Nt>=ct;Nt--){var Qt=J.scaledTo(Nt),se=this._getLoadedTile(Qt);if(se)return se}},tt.prototype._getLoadedTile=function(J){var ct=this._tiles[J.key];if(ct&&ct.hasData())return ct;var At=this._cache.getByKey(J.wrapped().key);return At},tt.prototype.updateCacheSize=function(J){var ct=Math.ceil(J.width/this._source.tileSize)+1,At=Math.ceil(J.height/this._source.tileSize)+1,Nt=ct*At,Qt=5,se=Math.floor(Nt*Qt),be=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,se):se;this._cache.setMaxSize(be)},tt.prototype.handleWrapJump=function(J){var ct=this._prevLng===void 0?J:this._prevLng,At=J-ct,Nt=At/360,Qt=Math.round(Nt);if(this._prevLng=J,Qt){var se={};for(var be in this._tiles){var Ze=this._tiles[be];Ze.tileID=Ze.tileID.unwrapTo(Ze.tileID.wrap+Qt),se[Ze.tileID.key]=Ze}this._tiles=se;for(var or in this._timers)clearTimeout(this._timers[or]),delete this._timers[or];for(var nr in this._tiles){var kr=this._tiles[nr];this._setTileReloadTimer(nr,kr)}}},tt.prototype.update=function(J){var ct=this;if(this.transform=J,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(J),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var At;this.used?this._source.tileID?At=J.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(ni){return new i.OverscaledTileID(ni.canonical.z,ni.wrap,ni.canonical.z,ni.canonical.x,ni.canonical.y)}):(At=J.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(At=At.filter(function(ni){return ct._source.hasTile(ni)}))):At=[];var Nt=J.coveringZoomLevel(this._source),Qt=Math.max(Nt-tt.maxOverzooming,this._source.minzoom),se=Math.max(Nt+tt.maxUnderzooming,this._source.minzoom),be=this._updateRetainedTiles(At,Nt);if(We(this._source.type)){for(var Ze={},or={},nr=Object.keys(be),kr=0,Er=nr;kr<Er.length;kr+=1){var qr=Er[kr],Fr=be[qr],Rr=this._tiles[qr];if(!(!Rr||Rr.fadeEndTime&&Rr.fadeEndTime<=i.browser.now())){var Xr=this.findLoadedParent(Fr,Qt);Xr&&(this._addTile(Xr.tileID),Ze[Xr.tileID.key]=Xr.tileID),or[qr]=Fr}}this._retainLoadedChildren(or,Nt,se,be);for(var on in Ze)be[on]||(this._coveredTiles[on]=!0,be[on]=Ze[on])}for(var Cn in be)this._tiles[Cn].clearFadeHold();for(var En=i.keysDifference(this._tiles,be),Fn=0,Nn=En;Fn<Nn.length;Fn+=1){var jn=Nn[Fn],ai=this._tiles[jn];ai.hasSymbolBuckets&&!ai.holdingForFade()?ai.setHoldDuration(this.map._fadeDuration):(!ai.hasSymbolBuckets||ai.symbolFadeFinished())&&this._removeTile(jn)}this._updateLoadedParentTileCache()}},tt.prototype.releaseSymbolFadeTiles=function(){for(var J in this._tiles)this._tiles[J].holdingForFade()&&this._removeTile(J)},tt.prototype._updateRetainedTiles=function(J,ct){for(var At={},Nt={},Qt=Math.max(ct-tt.maxOverzooming,this._source.minzoom),se=Math.max(ct+tt.maxUnderzooming,this._source.minzoom),be={},Ze=0,or=J;Ze<or.length;Ze+=1){var nr=or[Ze],kr=this._addTile(nr);At[nr.key]=nr,!kr.hasData()&&ct<this._source.maxzoom&&(be[nr.key]=nr)}this._retainLoadedChildren(be,ct,se,At);for(var Er=0,qr=J;Er<qr.length;Er+=1){var Fr=qr[Er],Rr=this._tiles[Fr.key];if(!Rr.hasData()){if(ct+1>this._source.maxzoom){var Xr=Fr.children(this._source.maxzoom)[0],on=this.getTile(Xr);if(on&&on.hasData()){At[Xr.key]=Xr;continue}}else{var Cn=Fr.children(this._source.maxzoom);if(At[Cn[0].key]&&At[Cn[1].key]&&At[Cn[2].key]&&At[Cn[3].key])continue}for(var En=Rr.wasRequested(),Fn=Fr.overscaledZ-1;Fn>=Qt;--Fn){var Nn=Fr.scaledTo(Fn);if(Nt[Nn.key]||(Nt[Nn.key]=!0,Rr=this.getTile(Nn),!Rr&&En&&(Rr=this._addTile(Nn)),Rr&&(At[Nn.key]=Nn,En=Rr.wasRequested(),Rr.hasData())))break}}}return At},tt.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var J in this._tiles){for(var ct=[],At=void 0,Nt=this._tiles[J].tileID;Nt.overscaledZ>0;){if(Nt.key in this._loadedParentTiles){At=this._loadedParentTiles[Nt.key];break}ct.push(Nt.key);var Qt=Nt.scaledTo(Nt.overscaledZ-1);if(At=this._getLoadedTile(Qt),At)break;Nt=Qt}for(var se=0,be=ct;se<be.length;se+=1){var Ze=be[se];this._loadedParentTiles[Ze]=At}}},tt.prototype._addTile=function(J){var ct=this._tiles[J.key];if(ct)return ct;ct=this._cache.getAndRemove(J),ct&&(this._setTileReloadTimer(J.key,ct),ct.tileID=J,this._state.initializeTileState(ct,this.map?this.map.painter:null),this._cacheTimers[J.key]&&(clearTimeout(this._cacheTimers[J.key]),delete this._cacheTimers[J.key],this._setTileReloadTimer(J.key,ct)));var At=!!ct;return At||(ct=new i.Tile(J,this._source.tileSize*J.overscaleFactor()),this._loadTile(ct,this._tileLoaded.bind(this,ct,J.key,ct.state))),ct?(ct.uses++,this._tiles[J.key]=ct,At||this._source.fire(new i.Event("dataloading",{tile:ct,coord:ct.tileID,dataType:"source"})),ct):null},tt.prototype._setTileReloadTimer=function(J,ct){var At=this;J in this._timers&&(clearTimeout(this._timers[J]),delete this._timers[J]);var Nt=ct.getExpiryTimeout();Nt&&(this._timers[J]=setTimeout(function(){At._reloadTile(J,"expired"),delete At._timers[J]},Nt))},tt.prototype._removeTile=function(J){var ct=this._tiles[J];ct&&(ct.uses--,delete this._tiles[J],this._timers[J]&&(clearTimeout(this._timers[J]),delete this._timers[J]),!(ct.uses>0)&&(ct.hasData()&&ct.state!=="reloading"?this._cache.add(ct.tileID,ct,ct.getExpiryTimeout()):(ct.aborted=!0,this._abortTile(ct),this._unloadTile(ct))))},tt.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var J in this._tiles)this._removeTile(J);this._cache.reset()},tt.prototype.tilesIn=function(J,ct,At){var Nt=this,Qt=[],se=this.transform;if(!se)return Qt;for(var be=At?se.getCameraQueryGeometry(J):J,Ze=J.map(function(Fn){return se.pointCoordinate(Fn)}),or=be.map(function(Fn){return se.pointCoordinate(Fn)}),nr=this.getIds(),kr=1/0,Er=1/0,qr=-1/0,Fr=-1/0,Rr=0,Xr=or;Rr<Xr.length;Rr+=1){var on=Xr[Rr];kr=Math.min(kr,on.x),Er=Math.min(Er,on.y),qr=Math.max(qr,on.x),Fr=Math.max(Fr,on.y)}for(var Cn=function(Fn){var Nn=Nt._tiles[nr[Fn]];if(!Nn.holdingForFade()){var jn=Nn.tileID,ai=Math.pow(2,se.zoom-Nn.tileID.overscaledZ),ni=ct*Nn.queryPadding*i.EXTENT/Nn.tileSize/ai,hi=[jn.getTilePoint(new i.MercatorCoordinate(kr,Er)),jn.getTilePoint(new i.MercatorCoordinate(qr,Fr))];if(hi[0].x-ni<i.EXTENT&&hi[0].y-ni<i.EXTENT&&hi[1].x+ni>=0&&hi[1].y+ni>=0){var ti=Ze.map(function(Ci){return jn.getTilePoint(Ci)}),fi=or.map(function(Ci){return jn.getTilePoint(Ci)});Qt.push({tile:Nn,tileID:jn,queryGeometry:ti,cameraQueryGeometry:fi,scale:ai})}}},En=0;En<nr.length;En++)Cn(En);return Qt},tt.prototype.getVisibleCoordinates=function(J){for(var ct=this,At=this.getRenderableIds(J).map(function(be){return ct._tiles[be].tileID}),Nt=0,Qt=At;Nt<Qt.length;Nt+=1){var se=Qt[Nt];se.posMatrix=this.transform.calculatePosMatrix(se.toUnwrapped())}return At},tt.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(We(this._source.type))for(var J in this._tiles){var ct=this._tiles[J];if(ct.fadeEndTime!==void 0&&ct.fadeEndTime>=i.browser.now())return!0}return!1},tt.prototype.setFeatureState=function(J,ct,At){J=J||"_geojsonTileLayer",this._state.updateState(J,ct,At)},tt.prototype.removeFeatureState=function(J,ct,At){J=J||"_geojsonTileLayer",this._state.removeFeatureState(J,ct,At)},tt.prototype.getFeatureState=function(J,ct){return J=J||"_geojsonTileLayer",this._state.getState(J,ct)},tt.prototype.setDependencies=function(J,ct,At){var Nt=this._tiles[J];Nt&&Nt.setDependencies(ct,At)},tt.prototype.reloadTilesForDependencies=function(J,ct){for(var At in this._tiles){var Nt=this._tiles[At];Nt.hasDependency(J,ct)&&this._reloadTile(At,"reloading")}this._cache.filter(function(Qt){return!Qt.hasDependency(J,ct)})},tt}(i.Evented);Ce.maxOverzooming=10,Ce.maxUnderzooming=3;function ze(H,tt){var J=Math.abs(H.wrap*2)-+(H.wrap<0),ct=Math.abs(tt.wrap*2)-+(tt.wrap<0);return H.overscaledZ-tt.overscaledZ||ct-J||tt.canonical.y-H.canonical.y||tt.canonical.x-H.canonical.x}function We(H){return H==="raster"||H==="image"||H==="video"}function qe(){return new i.window.Worker(Lf.workerUrl)}var ir="mapboxgl_preloaded_worker_pool",xr=function(){this.active={}};xr.prototype.acquire=function(H){if(!this.workers)for(this.workers=[];this.workers.length<xr.workerCount;)this.workers.push(new qe);return this.active[H]=!0,this.workers.slice()},xr.prototype.release=function(H){delete this.active[H],this.numActive()===0&&(this.workers.forEach(function(tt){tt.terminate()}),this.workers=null)},xr.prototype.isPreloaded=function(){return!!this.active[ir]},xr.prototype.numActive=function(){return Object.keys(this.active).length};var Dt=Math.floor(i.browser.hardwareConcurrency/2);xr.workerCount=Math.max(Math.min(Dt,6),1);var Ut;function Te(){return Ut||(Ut=new xr),Ut}function Se(){var H=Te();H.acquire(ir)}function Be(){var H=Ut;H&&(H.isPreloaded()&&H.numActive()===1?(H.release(ir),Ut=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function Je(H,tt){var J={};for(var ct in H)ct!=="ref"&&(J[ct]=H[ct]);return i.refProperties.forEach(function(At){At in tt&&(J[At]=tt[At])}),J}function $e(H){H=H.slice();for(var tt=Object.create(null),J=0;J<H.length;J++)tt[H[J].id]=H[J];for(var ct=0;ct<H.length;ct++)"ref"in H[ct]&&(H[ct]=Je(H[ct],tt[H[ct].ref]));return H}function Xe(){var H={},tt=i.styleSpec.$version;for(var J in i.styleSpec.$root){var ct=i.styleSpec.$root[J];if(ct.required){var At=null;J==="version"?At=tt:ct.type==="array"?At=[]:At={},At!=null&&(H[J]=At)}}return H}var Oe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ar(H,tt,J){J.push({command:Oe.addSource,args:[H,tt[H]]})}function cr(H,tt,J){tt.push({command:Oe.removeSource,args:[H]}),J[H]=!0}function sr(H,tt,J,ct){cr(H,J,ct),ar(H,tt,J)}function lr(H,tt,J){var ct;for(ct in H[J])if(H[J].hasOwnProperty(ct)&&ct!=="data"&&!i.deepEqual(H[J][ct],tt[J][ct]))return!1;for(ct in tt[J])if(tt[J].hasOwnProperty(ct)&&ct!=="data"&&!i.deepEqual(H[J][ct],tt[J][ct]))return!1;return!0}function Or(H,tt,J,ct){H=H||{},tt=tt||{};var At;for(At in H)H.hasOwnProperty(At)&&(tt.hasOwnProperty(At)||cr(At,J,ct));for(At in tt)tt.hasOwnProperty(At)&&(H.hasOwnProperty(At)?i.deepEqual(H[At],tt[At])||(H[At].type==="geojson"&&tt[At].type==="geojson"&&lr(H,tt,At)?J.push({command:Oe.setGeoJSONSourceData,args:[At,tt[At].data]}):sr(At,tt,J,ct)):ar(At,tt,J))}function Ir(H,tt,J,ct,At,Nt){H=H||{},tt=tt||{};var Qt;for(Qt in H)H.hasOwnProperty(Qt)&&(i.deepEqual(H[Qt],tt[Qt])||J.push({command:Nt,args:[ct,Qt,tt[Qt],At]}));for(Qt in tt)!tt.hasOwnProperty(Qt)||H.hasOwnProperty(Qt)||i.deepEqual(H[Qt],tt[Qt])||J.push({command:Nt,args:[ct,Qt,tt[Qt],At]})}function Pr(H){return H.id}function rn(H,tt){return H[tt.id]=tt,H}function Zr(H,tt,J){H=H||[],tt=tt||[];var ct=H.map(Pr),At=tt.map(Pr),Nt=H.reduce(rn,{}),Qt=tt.reduce(rn,{}),se=ct.slice(),be=Object.create(null),Ze,or,nr,kr,Er,qr,Fr;for(Ze=0,or=0;Ze<ct.length;Ze++)nr=ct[Ze],Qt.hasOwnProperty(nr)?or++:(J.push({command:Oe.removeLayer,args:[nr]}),se.splice(se.indexOf(nr,or),1));for(Ze=0,or=0;Ze<At.length;Ze++)nr=At[At.length-1-Ze],se[se.length-1-Ze]!==nr&&(Nt.hasOwnProperty(nr)?(J.push({command:Oe.removeLayer,args:[nr]}),se.splice(se.lastIndexOf(nr,se.length-or),1)):or++,qr=se[se.length-Ze],J.push({command:Oe.addLayer,args:[Qt[nr],qr]}),se.splice(se.length-Ze,0,nr),be[nr]=!0);for(Ze=0;Ze<At.length;Ze++)if(nr=At[Ze],kr=Nt[nr],Er=Qt[nr],!(be[nr]||i.deepEqual(kr,Er))){if(!i.deepEqual(kr.source,Er.source)||!i.deepEqual(kr["source-layer"],Er["source-layer"])||!i.deepEqual(kr.type,Er.type)){J.push({command:Oe.removeLayer,args:[nr]}),qr=se[se.lastIndexOf(nr)+1],J.push({command:Oe.addLayer,args:[Er,qr]});continue}Ir(kr.layout,Er.layout,J,nr,null,Oe.setLayoutProperty),Ir(kr.paint,Er.paint,J,nr,null,Oe.setPaintProperty),i.deepEqual(kr.filter,Er.filter)||J.push({command:Oe.setFilter,args:[nr,Er.filter]}),(!i.deepEqual(kr.minzoom,Er.minzoom)||!i.deepEqual(kr.maxzoom,Er.maxzoom))&&J.push({command:Oe.setLayerZoomRange,args:[nr,Er.minzoom,Er.maxzoom]});for(Fr in kr)kr.hasOwnProperty(Fr)&&(Fr==="layout"||Fr==="paint"||Fr==="filter"||Fr==="metadata"||Fr==="minzoom"||Fr==="maxzoom"||(Fr.indexOf("paint.")===0?Ir(kr[Fr],Er[Fr],J,nr,Fr.slice(6),Oe.setPaintProperty):i.deepEqual(kr[Fr],Er[Fr])||J.push({command:Oe.setLayerProperty,args:[nr,Fr,Er[Fr]]})));for(Fr in Er)!Er.hasOwnProperty(Fr)||kr.hasOwnProperty(Fr)||Fr==="layout"||Fr==="paint"||Fr==="filter"||Fr==="metadata"||Fr==="minzoom"||Fr==="maxzoom"||(Fr.indexOf("paint.")===0?Ir(kr[Fr],Er[Fr],J,nr,Fr.slice(6),Oe.setPaintProperty):i.deepEqual(kr[Fr],Er[Fr])||J.push({command:Oe.setLayerProperty,args:[nr,Fr,Er[Fr]]}))}}function yn(H,tt){if(!H)return[{command:Oe.setStyle,args:[tt]}];var J=[];try{if(!i.deepEqual(H.version,tt.version))return[{command:Oe.setStyle,args:[tt]}];i.deepEqual(H.center,tt.center)||J.push({command:Oe.setCenter,args:[tt.center]}),i.deepEqual(H.zoom,tt.zoom)||J.push({command:Oe.setZoom,args:[tt.zoom]}),i.deepEqual(H.bearing,tt.bearing)||J.push({command:Oe.setBearing,args:[tt.bearing]}),i.deepEqual(H.pitch,tt.pitch)||J.push({command:Oe.setPitch,args:[tt.pitch]}),i.deepEqual(H.sprite,tt.sprite)||J.push({command:Oe.setSprite,args:[tt.sprite]}),i.deepEqual(H.glyphs,tt.glyphs)||J.push({command:Oe.setGlyphs,args:[tt.glyphs]}),i.deepEqual(H.transition,tt.transition)||J.push({command:Oe.setTransition,args:[tt.transition]}),i.deepEqual(H.light,tt.light)||J.push({command:Oe.setLight,args:[tt.light]});var ct={},At=[];Or(H.sources,tt.sources,At,ct);var Nt=[];H.layers&&H.layers.forEach(function(Qt){ct[Qt.source]?J.push({command:Oe.removeLayer,args:[Qt.id]}):Nt.push(Qt)}),J=J.concat(At),Zr(Nt,tt.layers,J)}catch(Qt){console.warn("Unable to compute style diff:",Qt),J=[{command:Oe.setStyle,args:[tt]}]}return J}var Tn=function(H,tt){this.reset(H,tt)};Tn.prototype.reset=function(H,tt){this.points=H||[],this._distances=[0];for(var J=1;J<this.points.length;J++)this._distances[J]=this._distances[J-1]+this.points[J].dist(this.points[J-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(tt||0,this.length*.5),this.paddedLength=this.length-this.padding*2},Tn.prototype.lerp=function(H){if(this.points.length===1)return this.points[0];H=i.clamp(H,0,1);for(var tt=1,J=this._distances[tt],ct=H*this.paddedLength+this.padding;J<ct&&tt<this._distances.length;)J=this._distances[++tt];var At=tt-1,Nt=this._distances[At],Qt=J-Nt,se=Qt>0?(ct-Nt)/Qt:0;return this.points[At].mult(1-se).add(this.points[tt].mult(se))};var hr=function(H,tt,J){var ct=this.boxCells=[],At=this.circleCells=[];this.xCellCount=Math.ceil(H/J),this.yCellCount=Math.ceil(tt/J);for(var Nt=0;Nt<this.xCellCount*this.yCellCount;Nt++)ct.push([]),At.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=H,this.height=tt,this.xScale=this.xCellCount/H,this.yScale=this.yCellCount/tt,this.boxUid=0,this.circleUid=0};hr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},hr.prototype.insert=function(H,tt,J,ct,At){this._forEachCell(tt,J,ct,At,this._insertBoxCell,this.boxUid++),this.boxKeys.push(H),this.bboxes.push(tt),this.bboxes.push(J),this.bboxes.push(ct),this.bboxes.push(At)},hr.prototype.insertCircle=function(H,tt,J,ct){this._forEachCell(tt-ct,J-ct,tt+ct,J+ct,this._insertCircleCell,this.circleUid++),this.circleKeys.push(H),this.circles.push(tt),this.circles.push(J),this.circles.push(ct)},hr.prototype._insertBoxCell=function(H,tt,J,ct,At,Nt){this.boxCells[At].push(Nt)},hr.prototype._insertCircleCell=function(H,tt,J,ct,At,Nt){this.circleCells[At].push(Nt)},hr.prototype._query=function(H,tt,J,ct,At,Nt){if(J<0||H>this.width||ct<0||tt>this.height)return At?!1:[];var Qt=[];if(H<=0&&tt<=0&&this.width<=J&&this.height<=ct){if(At)return!0;for(var se=0;se<this.boxKeys.length;se++)Qt.push({key:this.boxKeys[se],x1:this.bboxes[se*4],y1:this.bboxes[se*4+1],x2:this.bboxes[se*4+2],y2:this.bboxes[se*4+3]});for(var be=0;be<this.circleKeys.length;be++){var Ze=this.circles[be*3],or=this.circles[be*3+1],nr=this.circles[be*3+2];Qt.push({key:this.circleKeys[be],x1:Ze-nr,y1:or-nr,x2:Ze+nr,y2:or+nr})}return Nt?Qt.filter(Nt):Qt}else{var kr={hitTest:At,seenUids:{box:{},circle:{}}};return this._forEachCell(H,tt,J,ct,this._queryCell,Qt,kr,Nt),At?Qt.length>0:Qt}},hr.prototype._queryCircle=function(H,tt,J,ct,At){var Nt=H-J,Qt=H+J,se=tt-J,be=tt+J;if(Qt<0||Nt>this.width||be<0||se>this.height)return ct?!1:[];var Ze=[],or={hitTest:ct,circle:{x:H,y:tt,radius:J},seenUids:{box:{},circle:{}}};return this._forEachCell(Nt,se,Qt,be,this._queryCellCircle,Ze,or,At),ct?Ze.length>0:Ze},hr.prototype.query=function(H,tt,J,ct,At){return this._query(H,tt,J,ct,!1,At)},hr.prototype.hitTest=function(H,tt,J,ct,At){return this._query(H,tt,J,ct,!0,At)},hr.prototype.hitTestCircle=function(H,tt,J,ct){return this._queryCircle(H,tt,J,!0,ct)},hr.prototype._queryCell=function(H,tt,J,ct,At,Nt,Qt,se){var be=Qt.seenUids,Ze=this.boxCells[At];if(Ze!==null)for(var or=this.bboxes,nr=0,kr=Ze;nr<kr.length;nr+=1){var Er=kr[nr];if(!be.box[Er]){be.box[Er]=!0;var qr=Er*4;if(H<=or[qr+2]&&tt<=or[qr+3]&&J>=or[qr+0]&&ct>=or[qr+1]&&(!se||se(this.boxKeys[Er]))){if(Qt.hitTest)return Nt.push(!0),!0;Nt.push({key:this.boxKeys[Er],x1:or[qr],y1:or[qr+1],x2:or[qr+2],y2:or[qr+3]})}}}var Fr=this.circleCells[At];if(Fr!==null)for(var Rr=this.circles,Xr=0,on=Fr;Xr<on.length;Xr+=1){var Cn=on[Xr];if(!be.circle[Cn]){be.circle[Cn]=!0;var En=Cn*3;if(this._circleAndRectCollide(Rr[En],Rr[En+1],Rr[En+2],H,tt,J,ct)&&(!se||se(this.circleKeys[Cn]))){if(Qt.hitTest)return Nt.push(!0),!0;var Fn=Rr[En],Nn=Rr[En+1],jn=Rr[En+2];Nt.push({key:this.circleKeys[Cn],x1:Fn-jn,y1:Nn-jn,x2:Fn+jn,y2:Nn+jn})}}}},hr.prototype._queryCellCircle=function(H,tt,J,ct,At,Nt,Qt,se){var be=Qt.circle,Ze=Qt.seenUids,or=this.boxCells[At];if(or!==null)for(var nr=this.bboxes,kr=0,Er=or;kr<Er.length;kr+=1){var qr=Er[kr];if(!Ze.box[qr]){Ze.box[qr]=!0;var Fr=qr*4;if(this._circleAndRectCollide(be.x,be.y,be.radius,nr[Fr+0],nr[Fr+1],nr[Fr+2],nr[Fr+3])&&(!se||se(this.boxKeys[qr])))return Nt.push(!0),!0}}var Rr=this.circleCells[At];if(Rr!==null)for(var Xr=this.circles,on=0,Cn=Rr;on<Cn.length;on+=1){var En=Cn[on];if(!Ze.circle[En]){Ze.circle[En]=!0;var Fn=En*3;if(this._circlesCollide(Xr[Fn],Xr[Fn+1],Xr[Fn+2],be.x,be.y,be.radius)&&(!se||se(this.circleKeys[En])))return Nt.push(!0),!0}}},hr.prototype._forEachCell=function(H,tt,J,ct,At,Nt,Qt,se){for(var be=this._convertToXCellCoord(H),Ze=this._convertToYCellCoord(tt),or=this._convertToXCellCoord(J),nr=this._convertToYCellCoord(ct),kr=be;kr<=or;kr++)for(var Er=Ze;Er<=nr;Er++){var qr=this.xCellCount*Er+kr;if(At.call(this,H,tt,J,ct,qr,Nt,Qt,se))return}},hr.prototype._convertToXCellCoord=function(H){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(H*this.xScale)))},hr.prototype._convertToYCellCoord=function(H){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(H*this.yScale)))},hr.prototype._circlesCollide=function(H,tt,J,ct,At,Nt){var Qt=ct-H,se=At-tt,be=J+Nt;return be*be>Qt*Qt+se*se},hr.prototype._circleAndRectCollide=function(H,tt,J,ct,At,Nt,Qt){var se=(Nt-ct)/2,be=Math.abs(H-(ct+se));if(be>se+J)return!1;var Ze=(Qt-At)/2,or=Math.abs(tt-(At+Ze));if(or>Ze+J)return!1;if(be<=se||or<=Ze)return!0;var nr=be-se,kr=or-Ze;return nr*nr+kr*kr<=J*J};function dr(H,tt,J,ct,At){var Nt=i.create();return tt?(i.scale(Nt,Nt,[1/At,1/At,1]),J||i.rotateZ(Nt,Nt,ct.angle)):i.multiply(Nt,ct.labelPlaneMatrix,H),Nt}function Lr(H,tt,J,ct,At){if(tt){var Nt=i.clone(H);return i.scale(Nt,Nt,[At,At,1]),J||i.rotateZ(Nt,Nt,-ct.angle),Nt}else return ct.glCoordMatrix}function Cr(H,tt){var J=[H.x,H.y,0,1];gr(J,J,tt);var ct=J[3];return{point:new i.Point(J[0]/ct,J[1]/ct),signedDistanceFromCamera:ct}}function Hr(H,tt){return .5+.5*(H/tt)}function sn(H,tt){var J=H[0]/H[3],ct=H[1]/H[3],At=J>=-tt[0]&&J<=tt[0]&&ct>=-tt[1]&&ct<=tt[1];return At}function Yr(H,tt,J,ct,At,Nt,Qt,se){var be=ct?H.textSizeData:H.iconSizeData,Ze=i.evaluateSizeForZoom(be,J.transform.zoom),or=[256/J.width*2+1,256/J.height*2+1],nr=ct?H.text.dynamicLayoutVertexArray:H.icon.dynamicLayoutVertexArray;nr.clear();for(var kr=H.lineVertexArray,Er=ct?H.text.placedSymbolArray:H.icon.placedSymbolArray,qr=J.transform.width/J.transform.height,Fr=!1,Rr=0;Rr<Er.length;Rr++){var Xr=Er.get(Rr);if(Xr.hidden||Xr.writingMode===i.WritingMode.vertical&&!Fr){Hn(Xr.numGlyphs,nr);continue}Fr=!1;var on=[Xr.anchorX,Xr.anchorY,0,1];if(i.transformMat4(on,on,tt),!sn(on,or)){Hn(Xr.numGlyphs,nr);continue}var Cn=on[3],En=Hr(J.transform.cameraToCenterDistance,Cn),Fn=i.evaluateSizeForFeature(be,Ze,Xr),Nn=Qt?Fn/En:Fn*En,jn=new i.Point(Xr.anchorX,Xr.anchorY),ai=Cr(jn,At).point,ni={},hi=Un(Xr,Nn,!1,se,tt,At,Nt,H.glyphOffsetArray,kr,nr,ai,jn,ni,qr);Fr=hi.useVertical,(hi.notEnoughRoom||Fr||hi.needsFlipping&&Un(Xr,Nn,!0,se,tt,At,Nt,H.glyphOffsetArray,kr,nr,ai,jn,ni,qr).notEnoughRoom)&&Hn(Xr.numGlyphs,nr)}ct?H.text.dynamicLayoutVertexBuffer.updateData(nr):H.icon.dynamicLayoutVertexBuffer.updateData(nr)}function xn(H,tt,J,ct,At,Nt,Qt,se,be,Ze,or){var nr=se.glyphStartIndex+se.numGlyphs,kr=se.lineStartIndex,Er=se.lineStartIndex+se.lineLength,qr=tt.getoffsetX(se.glyphStartIndex),Fr=tt.getoffsetX(nr-1),Rr=ei(H*qr,J,ct,At,Nt,Qt,se.segment,kr,Er,be,Ze,or);if(!Rr)return null;var Xr=ei(H*Fr,J,ct,At,Nt,Qt,se.segment,kr,Er,be,Ze,or);return Xr?{first:Rr,last:Xr}:null}function wn(H,tt,J,ct){if(H===i.WritingMode.horizontal){var At=Math.abs(J.y-tt.y),Nt=Math.abs(J.x-tt.x)*ct;if(At>Nt)return{useVertical:!0}}return(H===i.WritingMode.vertical?tt.y<J.y:tt.x>J.x)?{needsFlipping:!0}:null}function Un(H,tt,J,ct,At,Nt,Qt,se,be,Ze,or,nr,kr,Er){var qr=tt/24,Fr=H.lineOffsetX*qr,Rr=H.lineOffsetY*qr,Xr;if(H.numGlyphs>1){var on=H.glyphStartIndex+H.numGlyphs,Cn=H.lineStartIndex,En=H.lineStartIndex+H.lineLength,Fn=xn(qr,se,Fr,Rr,J,or,nr,H,be,Nt,kr);if(!Fn)return{notEnoughRoom:!0};var Nn=Cr(Fn.first.point,Qt).point,jn=Cr(Fn.last.point,Qt).point;if(ct&&!J){var ai=wn(H.writingMode,Nn,jn,Er);if(ai)return ai}Xr=[Fn.first];for(var ni=H.glyphStartIndex+1;ni<on-1;ni++)Xr.push(ei(qr*se.getoffsetX(ni),Fr,Rr,J,or,nr,H.segment,Cn,En,be,Nt,kr));Xr.push(Fn.last)}else{if(ct&&!J){var hi=Cr(nr,At).point,ti=H.lineStartIndex+H.segment+1,fi=new i.Point(be.getx(ti),be.gety(ti)),Ci=Cr(fi,At),Di=Ci.signedDistanceFromCamera>0?Ci.point:qn(nr,fi,hi,1,At),Mi=wn(H.writingMode,hi,Di,Er);if(Mi)return Mi}var qi=ei(qr*se.getoffsetX(H.glyphStartIndex),Fr,Rr,J,or,nr,H.segment,H.lineStartIndex,H.lineStartIndex+H.lineLength,be,Nt,kr);if(!qi)return{notEnoughRoom:!0};Xr=[qi]}for(var Oi=0,Ii=Xr;Oi<Ii.length;Oi+=1){var Ji=Ii[Oi];i.addDynamicAttributes(Ze,Ji.point,Ji.angle)}return{}}function qn(H,tt,J,ct,At){var Nt=Cr(H.add(H.sub(tt)._unit()),At).point,Qt=J.sub(Nt);return J.add(Qt._mult(ct/Qt.mag()))}function ei(H,tt,J,ct,At,Nt,Qt,se,be,Ze,or,nr){var kr=ct?H-tt:H+tt,Er=kr>0?1:-1,qr=0;ct&&(Er*=-1,qr=Math.PI),Er<0&&(qr+=Math.PI);for(var Fr=Er>0?se+Qt:se+Qt+1,Rr=At,Xr=At,on=0,Cn=0,En=Math.abs(kr),Fn=[];on+Cn<=En;){if(Fr+=Er,Fr<se||Fr>=be)return null;if(Xr=Rr,Fn.push(Rr),Rr=nr[Fr],Rr===void 0){var Nn=new i.Point(Ze.getx(Fr),Ze.gety(Fr)),jn=Cr(Nn,or);if(jn.signedDistanceFromCamera>0)Rr=nr[Fr]=jn.point;else{var ai=Fr-Er,ni=on===0?Nt:new i.Point(Ze.getx(ai),Ze.gety(ai));Rr=qn(ni,Nn,Xr,En-on+1,or)}}on+=Cn,Cn=Xr.dist(Rr)}var hi=(En-on)/Cn,ti=Rr.sub(Xr),fi=ti.mult(hi)._add(Xr);fi._add(ti._unit()._perp()._mult(J*Er));var Ci=qr+Math.atan2(Rr.y-Xr.y,Rr.x-Xr.x);return Fn.push(fi),{point:fi,angle:Ci,path:Fn}}var Gn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Hn(H,tt){for(var J=0;J<H;J++){var ct=tt.length;tt.resize(ct+4),tt.float32.set(Gn,ct*3)}}function gr(H,tt,J){var ct=tt[0],At=tt[1];return H[0]=J[0]*ct+J[4]*At+J[12],H[1]=J[1]*ct+J[5]*At+J[13],H[3]=J[3]*ct+J[7]*At+J[15],H}var $r=100,Jr=function(H,tt,J){tt===void 0&&(tt=new hr(H.width+2*$r,H.height+2*$r,25)),J===void 0&&(J=new hr(H.width+2*$r,H.height+2*$r,25)),this.transform=H,this.grid=tt,this.ignoredGrid=J,this.pitchfactor=Math.cos(H._pitch)*H.cameraToCenterDistance,this.screenRightBoundary=H.width+$r,this.screenBottomBoundary=H.height+$r,this.gridRightBoundary=H.width+2*$r,this.gridBottomBoundary=H.height+2*$r};Jr.prototype.placeCollisionBox=function(H,tt,J,ct,At){var Nt=this.projectAndGetPerspectiveRatio(ct,H.anchorPointX,H.anchorPointY),Qt=J*Nt.perspectiveRatio,se=H.x1*Qt+Nt.point.x,be=H.y1*Qt+Nt.point.y,Ze=H.x2*Qt+Nt.point.x,or=H.y2*Qt+Nt.point.y;return!this.isInsideGrid(se,be,Ze,or)||!tt&&this.grid.hitTest(se,be,Ze,or,At)?{box:[],offscreen:!1}:{box:[se,be,Ze,or],offscreen:this.isOffscreen(se,be,Ze,or)}},Jr.prototype.placeCollisionCircles=function(H,tt,J,ct,At,Nt,Qt,se,be,Ze,or,nr,kr){var Er=[],qr=new i.Point(tt.anchorX,tt.anchorY),Fr=Cr(qr,Nt),Rr=Hr(this.transform.cameraToCenterDistance,Fr.signedDistanceFromCamera),Xr=Ze?At/Rr:At*Rr,on=Xr/i.ONE_EM,Cn=Cr(qr,Qt).point,En={},Fn=tt.lineOffsetX*on,Nn=tt.lineOffsetY*on,jn=xn(on,ct,Fn,Nn,!1,Cn,qr,tt,J,Qt,En),ai=!1,ni=!1,hi=!0;if(jn){for(var ti=nr*.5*Rr+kr,fi=new i.Point(-$r,-$r),Ci=new i.Point(this.screenRightBoundary,this.screenBottomBoundary),Di=new Tn,Mi=jn.first,qi=jn.last,Oi=[],Ii=Mi.path.length-1;Ii>=1;Ii--)Oi.push(Mi.path[Ii]);for(var Ji=1;Ji<qi.path.length;Ji++)Oi.push(qi.path[Ji]);var ea=ti*2.5;if(se){var Fi=Oi.map(function(Lo){return Cr(Lo,se)});Fi.some(function(Lo){return Lo.signedDistanceFromCamera<=0})?Oi=[]:Oi=Fi.map(function(Lo){return Lo.point})}var ca=[];if(Oi.length>0){for(var Ai=Oi[0].clone(),Ni=Oi[0].clone(),Sa=1;Sa<Oi.length;Sa++)Ai.x=Math.min(Ai.x,Oi[Sa].x),Ai.y=Math.min(Ai.y,Oi[Sa].y),Ni.x=Math.max(Ni.x,Oi[Sa].x),Ni.y=Math.max(Ni.y,Oi[Sa].y);Ai.x>=fi.x&&Ni.x<=Ci.x&&Ai.y>=fi.y&&Ni.y<=Ci.y?ca=[Oi]:Ni.x<fi.x||Ai.x>Ci.x||Ni.y<fi.y||Ai.y>Ci.y?ca=[]:ca=i.clipLine([Oi],fi.x,fi.y,Ci.x,Ci.y)}for(var Fa=0,ds=ca;Fa<ds.length;Fa+=1){var Vs=ds[Fa];Di.reset(Vs,ti*.25);var es=0;Di.length<=.5*ti?es=1:es=Math.ceil(Di.paddedLength/ea)+1;for(var Nl=0;Nl<es;Nl++){var jl=Nl/Math.max(es-1,1),lo=Di.lerp(jl),rs=lo.x+$r,go=lo.y+$r;Er.push(rs,go,ti,0);var Zu=rs-ti,fl=go-ti,Ps=rs+ti,Es=go+ti;if(hi=hi&&this.isOffscreen(Zu,fl,Ps,Es),ni=ni||this.isInsideGrid(Zu,fl,Ps,Es),!H&&this.grid.hitTestCircle(rs,go,ti,or)&&(ai=!0,!be))return{circles:[],offscreen:!1,collisionDetected:ai}}}}return{circles:!be&&ai||!ni?[]:Er,offscreen:hi,collisionDetected:ai}},Jr.prototype.queryRenderedSymbols=function(H){if(H.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var tt=[],J=1/0,ct=1/0,At=-1/0,Nt=-1/0,Qt=0,se=H;Qt<se.length;Qt+=1){var be=se[Qt],Ze=new i.Point(be.x+$r,be.y+$r);J=Math.min(J,Ze.x),ct=Math.min(ct,Ze.y),At=Math.max(At,Ze.x),Nt=Math.max(Nt,Ze.y),tt.push(Ze)}for(var or=this.grid.query(J,ct,At,Nt).concat(this.ignoredGrid.query(J,ct,At,Nt)),nr={},kr={},Er=0,qr=or;Er<qr.length;Er+=1){var Fr=qr[Er],Rr=Fr.key;if(nr[Rr.bucketInstanceId]===void 0&&(nr[Rr.bucketInstanceId]={}),!nr[Rr.bucketInstanceId][Rr.featureIndex]){var Xr=[new i.Point(Fr.x1,Fr.y1),new i.Point(Fr.x2,Fr.y1),new i.Point(Fr.x2,Fr.y2),new i.Point(Fr.x1,Fr.y2)];i.polygonIntersectsPolygon(tt,Xr)&&(nr[Rr.bucketInstanceId][Rr.featureIndex]=!0,kr[Rr.bucketInstanceId]===void 0&&(kr[Rr.bucketInstanceId]=[]),kr[Rr.bucketInstanceId].push(Rr.featureIndex))}}return kr},Jr.prototype.insertCollisionBox=function(H,tt,J,ct,At){var Nt=tt?this.ignoredGrid:this.grid,Qt={bucketInstanceId:J,featureIndex:ct,collisionGroupID:At};Nt.insert(Qt,H[0],H[1],H[2],H[3])},Jr.prototype.insertCollisionCircles=function(H,tt,J,ct,At){for(var Nt=tt?this.ignoredGrid:this.grid,Qt={bucketInstanceId:J,featureIndex:ct,collisionGroupID:At},se=0;se<H.length;se+=4)Nt.insertCircle(Qt,H[se],H[se+1],H[se+2])},Jr.prototype.projectAndGetPerspectiveRatio=function(H,tt,J){var ct=[tt,J,0,1];gr(ct,ct,H);var At=new i.Point((ct[0]/ct[3]+1)/2*this.transform.width+$r,(-ct[1]/ct[3]+1)/2*this.transform.height+$r);return{point:At,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/ct[3])}},Jr.prototype.isOffscreen=function(H,tt,J,ct){return J<$r||H>=this.screenRightBoundary||ct<$r||tt>this.screenBottomBoundary},Jr.prototype.isInsideGrid=function(H,tt,J,ct){return J>=0&&H<this.gridRightBoundary&&ct>=0&&tt<this.gridBottomBoundary},Jr.prototype.getViewportMatrix=function(){var H=i.identity([]);return i.translate(H,H,[-$r,-$r,0]),H};function ln(H,tt,J){return tt*(i.EXTENT/(H.tileSize*Math.pow(2,J-H.tileID.overscaledZ)))}var zn=function(H,tt,J,ct){H?this.opacity=Math.max(0,Math.min(1,H.opacity+(H.placed?tt:-tt))):this.opacity=ct&&J?1:0,this.placed=J};zn.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var mn=function(H,tt,J,ct,At){this.text=new zn(H?H.text:null,tt,J,At),this.icon=new zn(H?H.icon:null,tt,ct,At)};mn.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Mn=function(H,tt,J){this.text=H,this.icon=tt,this.skipFade=J},On=function(){this.invProjMatrix=i.create(),this.viewportMatrix=i.create(),this.circles=[]},Xn=function(H,tt,J,ct,At){this.bucketInstanceId=H,this.featureIndex=tt,this.sourceLayerIndex=J,this.bucketIndex=ct,this.tileID=At},gi=function(H){this.crossSourceCollisions=H,this.maxGroupID=0,this.collisionGroups={}};gi.prototype.get=function(H){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[H]){var tt=++this.maxGroupID;this.collisionGroups[H]={ID:tt,predicate:function(J){return J.collisionGroupID===tt}}}return this.collisionGroups[H]};function Ri(H,tt,J,ct,At){var Nt=i.getAnchorAlignment(H),Qt=Nt.horizontalAlign,se=Nt.verticalAlign,be=-(Qt-.5)*tt,Ze=-(se-.5)*J,or=i.evaluateVariableOffset(H,ct);return new i.Point(be+or[0]*At,Ze+or[1]*At)}function Ue(H,tt,J,ct,At,Nt){var Qt=H.x1,se=H.x2,be=H.y1,Ze=H.y2,or=H.anchorPointX,nr=H.anchorPointY,kr=new i.Point(tt,J);return ct&&kr._rotate(At?Nt:-Nt),{x1:Qt+kr.x,y1:be+kr.y,x2:se+kr.x,y2:Ze+kr.y,anchorPointX:or,anchorPointY:nr}}var fr=function(H,tt,J,ct){this.transform=H.clone(),this.collisionIndex=new Jr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=tt,this.retainedQueryData={},this.collisionGroups=new gi(J),this.collisionCircleArrays={},this.prevPlacement=ct,ct&&(ct.prevPlacement=void 0),this.placedOrientations={}};fr.prototype.getBucketParts=function(H,tt,J,ct){var At=J.getBucket(tt),Nt=J.latestFeatureIndex;if(!(!At||!Nt||tt.id!==At.layerIds[0])){var Qt=J.collisionBoxArray,se=At.layers[0].layout,be=Math.pow(2,this.transform.zoom-J.tileID.overscaledZ),Ze=J.tileSize/i.EXTENT,or=this.transform.calculatePosMatrix(J.tileID.toUnwrapped()),nr=se.get("text-pitch-alignment")==="map",kr=se.get("text-rotation-alignment")==="map",Er=ln(J,1,this.transform.zoom),qr=dr(or,nr,kr,this.transform,Er),Fr=null;if(nr){var Rr=Lr(or,nr,kr,this.transform,Er);Fr=i.multiply([],this.transform.labelPlaneMatrix,Rr)}this.retainedQueryData[At.bucketInstanceId]=new Xn(At.bucketInstanceId,Nt,At.sourceLayerIndex,At.index,J.tileID);var Xr={bucket:At,layout:se,posMatrix:or,textLabelPlaneMatrix:qr,labelToScreenMatrix:Fr,scale:be,textPixelRatio:Ze,holdingForFade:J.holdingForFade(),collisionBoxArray:Qt,partiallyEvaluatedTextSize:i.evaluateSizeForZoom(At.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(At.sourceID)};if(ct)for(var on=0,Cn=At.sortKeyRanges;on<Cn.length;on+=1){var En=Cn[on],Fn=En.sortKey,Nn=En.symbolInstanceStart,jn=En.symbolInstanceEnd;H.push({sortKey:Fn,symbolInstanceStart:Nn,symbolInstanceEnd:jn,parameters:Xr})}else H.push({symbolInstanceStart:0,symbolInstanceEnd:At.symbolInstances.length,parameters:Xr})}},fr.prototype.attemptAnchorPlacement=function(H,tt,J,ct,At,Nt,Qt,se,be,Ze,or,nr,kr,Er,qr){var Fr=[nr.textOffset0,nr.textOffset1],Rr=Ri(H,J,ct,Fr,At),Xr=this.collisionIndex.placeCollisionBox(Ue(tt,Rr.x,Rr.y,Nt,Qt,this.transform.angle),or,se,be,Ze.predicate);if(qr){var on=this.collisionIndex.placeCollisionBox(Ue(qr,Rr.x,Rr.y,Nt,Qt,this.transform.angle),or,se,be,Ze.predicate);if(on.box.length===0)return}if(Xr.box.length>0){var Cn;return this.prevPlacement&&this.prevPlacement.variableOffsets[nr.crossTileID]&&this.prevPlacement.placements[nr.crossTileID]&&this.prevPlacement.placements[nr.crossTileID].text&&(Cn=this.prevPlacement.variableOffsets[nr.crossTileID].anchor),this.variableOffsets[nr.crossTileID]={textOffset:Fr,width:J,height:ct,anchor:H,textBoxScale:At,prevAnchor:Cn},this.markUsedJustification(kr,H,nr,Er),kr.allowVerticalPlacement&&(this.markUsedOrientation(kr,Er,nr),this.placedOrientations[nr.crossTileID]=Er),{shift:Rr,placedGlyphBoxes:Xr}}},fr.prototype.placeLayerBucketPart=function(H,tt,J){var ct=this,At=H.parameters,Nt=At.bucket,Qt=At.layout,se=At.posMatrix,be=At.textLabelPlaneMatrix,Ze=At.labelToScreenMatrix,or=At.textPixelRatio,nr=At.holdingForFade,kr=At.collisionBoxArray,Er=At.partiallyEvaluatedTextSize,qr=At.collisionGroup,Fr=Qt.get("text-optional"),Rr=Qt.get("icon-optional"),Xr=Qt.get("text-allow-overlap"),on=Qt.get("icon-allow-overlap"),Cn=Qt.get("text-rotation-alignment")==="map",En=Qt.get("text-pitch-alignment")==="map",Fn=Qt.get("icon-text-fit")!=="none",Nn=Qt.get("symbol-z-order")==="viewport-y",jn=Xr&&(on||!Nt.hasIconData()||Rr),ai=on&&(Xr||!Nt.hasTextData()||Fr);!Nt.collisionArrays&&kr&&Nt.deserializeCollisionBoxes(kr);var ni=function(Mi,qi){if(!tt[Mi.crossTileID]){if(nr){ct.placements[Mi.crossTileID]=new Mn(!1,!1,!1);return}var Oi=!1,Ii=!1,Ji=!0,ea=null,Fi={box:null,offscreen:null},ca={box:null,offscreen:null},Ai=null,Ni=null,Sa=null,Fa=0,ds=0,Vs=0;qi.textFeatureIndex?Fa=qi.textFeatureIndex:Mi.useRuntimeCollisionCircles&&(Fa=Mi.featureIndex),qi.verticalTextFeatureIndex&&(ds=qi.verticalTextFeatureIndex);var es=qi.textBox;if(es){var Nl=function(ka){var Uo=i.WritingMode.horizontal;if(Nt.allowVerticalPlacement&&!ka&&ct.prevPlacement){var Zo=ct.prevPlacement.placedOrientations[Mi.crossTileID];Zo&&(ct.placedOrientations[Mi.crossTileID]=Zo,Uo=Zo,ct.markUsedOrientation(Nt,Uo,Mi))}return Uo},jl=function(ka,Uo){if(Nt.allowVerticalPlacement&&Mi.numVerticalGlyphVertices>0&&qi.verticalTextBox)for(var Zo=0,Fc=Nt.writingModes;Zo<Fc.length;Zo+=1){var sf=Fc[Zo];if(sf===i.WritingMode.vertical?(Fi=Uo(),ca=Fi):Fi=ka(),Fi&&Fi.box&&Fi.box.length)break}else Fi=ka()};if(Qt.get("text-variable-anchor")){var lo=Qt.get("text-variable-anchor");if(ct.prevPlacement&&ct.prevPlacement.variableOffsets[Mi.crossTileID]){var rs=ct.prevPlacement.variableOffsets[Mi.crossTileID];lo.indexOf(rs.anchor)>0&&(lo=lo.filter(function(ka){return ka!==rs.anchor}),lo.unshift(rs.anchor))}var go=function(ka,Uo,Zo){for(var Fc=ka.x2-ka.x1,sf=ka.y2-ka.y1,Qf=Mi.textBoxScale,$f=Fn&&!on?Uo:null,Ac={box:[],offscreen:!1},th=Xr?lo.length*2:lo.length,Rc=0;Rc<th;++Rc){var eh=lo[Rc%lo.length],rh=Rc>=lo.length,lf=ct.attemptAnchorPlacement(eh,ka,Fc,sf,Qf,Cn,En,or,se,qr,rh,Mi,Nt,Zo,$f);if(lf&&(Ac=lf.placedGlyphBoxes,Ac&&Ac.box&&Ac.box.length)){Oi=!0,ea=lf.shift;break}}return Ac},Zu=function(){return go(es,qi.iconBox,i.WritingMode.horizontal)},fl=function(){var ka=qi.verticalTextBox,Uo=Fi&&Fi.box&&Fi.box.length;return Nt.allowVerticalPlacement&&!Uo&&Mi.numVerticalGlyphVertices>0&&ka?go(ka,qi.verticalIconBox,i.WritingMode.vertical):{box:null,offscreen:null}};jl(Zu,fl),Fi&&(Oi=Fi.box,Ji=Fi.offscreen);var Ps=Nl(Fi&&Fi.box);if(!Oi&&ct.prevPlacement){var Es=ct.prevPlacement.variableOffsets[Mi.crossTileID];Es&&(ct.variableOffsets[Mi.crossTileID]=Es,ct.markUsedJustification(Nt,Es.anchor,Mi,Ps))}}else{var Lo=function(ka,Uo){var Zo=ct.collisionIndex.placeCollisionBox(ka,Xr,or,se,qr.predicate);return Zo&&Zo.box&&Zo.box.length&&(ct.markUsedOrientation(Nt,Uo,Mi),ct.placedOrientations[Mi.crossTileID]=Uo),Zo},Oc=function(){return Lo(es,i.WritingMode.horizontal)},Ic=function(){var ka=qi.verticalTextBox;return Nt.allowVerticalPlacement&&Mi.numVerticalGlyphVertices>0&&ka?Lo(ka,i.WritingMode.vertical):{box:null,offscreen:null}};jl(Oc,Ic),Nl(Fi&&Fi.box&&Fi.box.length)}}if(Ai=Fi,Oi=Ai&&Ai.box&&Ai.box.length>0,Ji=Ai&&Ai.offscreen,Mi.useRuntimeCollisionCircles){var qu=Nt.text.placedSymbolArray.get(Mi.centerJustifiedTextSymbolIndex),uo=i.evaluateSizeForFeature(Nt.textSizeData,Er,qu),_c=Qt.get("text-padding"),mo=Mi.collisionCircleDiameter;Ni=ct.collisionIndex.placeCollisionCircles(Xr,qu,Nt.lineVertexArray,Nt.glyphOffsetArray,uo,se,be,Ze,J,En,qr.predicate,mo,_c),Oi=Xr||Ni.circles.length>0&&!Ni.collisionDetected,Ji=Ji&&Ni.offscreen}if(qi.iconFeatureIndex&&(Vs=qi.iconFeatureIndex),qi.iconBox){var Vu=function(ka){var Uo=Fn&&ea?Ue(ka,ea.x,ea.y,Cn,En,ct.transform.angle):ka;return ct.collisionIndex.placeCollisionBox(Uo,on,or,se,qr.predicate)};ca&&ca.box&&ca.box.length&&qi.verticalIconBox?(Sa=Vu(qi.verticalIconBox),Ii=Sa.box.length>0):(Sa=Vu(qi.iconBox),Ii=Sa.box.length>0),Ji=Ji&&Sa.offscreen}var zc=Fr||Mi.numHorizontalGlyphVertices===0&&Mi.numVerticalGlyphVertices===0,Dc=Rr||Mi.numIconVertices===0;if(!zc&&!Dc?Ii=Oi=Ii&&Oi:Dc?zc||(Ii=Ii&&Oi):Oi=Ii&&Oi,Oi&&Ai&&Ai.box&&(ca&&ca.box&&ds?ct.collisionIndex.insertCollisionBox(Ai.box,Qt.get("text-ignore-placement"),Nt.bucketInstanceId,ds,qr.ID):ct.collisionIndex.insertCollisionBox(Ai.box,Qt.get("text-ignore-placement"),Nt.bucketInstanceId,Fa,qr.ID)),Ii&&Sa&&ct.collisionIndex.insertCollisionBox(Sa.box,Qt.get("icon-ignore-placement"),Nt.bucketInstanceId,Vs,qr.ID),Ni&&(Oi&&ct.collisionIndex.insertCollisionCircles(Ni.circles,Qt.get("text-ignore-placement"),Nt.bucketInstanceId,Fa,qr.ID),J)){var Pf=Nt.bucketInstanceId,Ul=ct.collisionCircleArrays[Pf];Ul===void 0&&(Ul=ct.collisionCircleArrays[Pf]=new On);for(var wc=0;wc<Ni.circles.length;wc+=4)Ul.circles.push(Ni.circles[wc+0]),Ul.circles.push(Ni.circles[wc+1]),Ul.circles.push(Ni.circles[wc+2]),Ul.circles.push(Ni.collisionDetected?1:0)}ct.placements[Mi.crossTileID]=new Mn(Oi||jn,Ii||ai,Ji||Nt.justReloaded),tt[Mi.crossTileID]=!0}};if(Nn)for(var hi=Nt.getSortedSymbolIndexes(this.transform.angle),ti=hi.length-1;ti>=0;--ti){var fi=hi[ti];ni(Nt.symbolInstances.get(fi),Nt.collisionArrays[fi])}else for(var Ci=H.symbolInstanceStart;Ci<H.symbolInstanceEnd;Ci++)ni(Nt.symbolInstances.get(Ci),Nt.collisionArrays[Ci]);if(J&&Nt.bucketInstanceId in this.collisionCircleArrays){var Di=this.collisionCircleArrays[Nt.bucketInstanceId];i.invert(Di.invProjMatrix,se),Di.viewportMatrix=this.collisionIndex.getViewportMatrix()}Nt.justReloaded=!1},fr.prototype.markUsedJustification=function(H,tt,J,ct){var At={left:J.leftJustifiedTextSymbolIndex,center:J.centerJustifiedTextSymbolIndex,right:J.rightJustifiedTextSymbolIndex},Nt;ct===i.WritingMode.vertical?Nt=J.verticalPlacedTextSymbolIndex:Nt=At[i.getAnchorJustification(tt)];for(var Qt=[J.leftJustifiedTextSymbolIndex,J.centerJustifiedTextSymbolIndex,J.rightJustifiedTextSymbolIndex,J.verticalPlacedTextSymbolIndex],se=0,be=Qt;se<be.length;se+=1){var Ze=be[se];Ze>=0&&(Nt>=0&&Ze!==Nt?H.text.placedSymbolArray.get(Ze).crossTileID=0:H.text.placedSymbolArray.get(Ze).crossTileID=J.crossTileID)}},fr.prototype.markUsedOrientation=function(H,tt,J){for(var ct=tt===i.WritingMode.horizontal||tt===i.WritingMode.horizontalOnly?tt:0,At=tt===i.WritingMode.vertical?tt:0,Nt=[J.leftJustifiedTextSymbolIndex,J.centerJustifiedTextSymbolIndex,J.rightJustifiedTextSymbolIndex],Qt=0,se=Nt;Qt<se.length;Qt+=1){var be=se[Qt];H.text.placedSymbolArray.get(be).placedOrientation=ct}J.verticalPlacedTextSymbolIndex&&(H.text.placedSymbolArray.get(J.verticalPlacedTextSymbolIndex).placedOrientation=At)},fr.prototype.commit=function(H){this.commitTime=H,this.zoomAtLastRecencyCheck=this.transform.zoom;var tt=this.prevPlacement,J=!1;this.prevZoomAdjustment=tt?tt.zoomAdjustment(this.transform.zoom):0;var ct=tt?tt.symbolFadeChange(H):1,At=tt?tt.opacities:{},Nt=tt?tt.variableOffsets:{},Qt=tt?tt.placedOrientations:{};for(var se in this.placements){var be=this.placements[se],Ze=At[se];Ze?(this.opacities[se]=new mn(Ze,ct,be.text,be.icon),J=J||be.text!==Ze.text.placed||be.icon!==Ze.icon.placed):(this.opacities[se]=new mn(null,ct,be.text,be.icon,be.skipFade),J=J||be.text||be.icon)}for(var or in At){var nr=At[or];if(!this.opacities[or]){var kr=new mn(nr,ct,!1,!1);kr.isHidden()||(this.opacities[or]=kr,J=J||nr.text.placed||nr.icon.placed)}}for(var Er in Nt)!this.variableOffsets[Er]&&this.opacities[Er]&&!this.opacities[Er].isHidden()&&(this.variableOffsets[Er]=Nt[Er]);for(var qr in Qt)!this.placedOrientations[qr]&&this.opacities[qr]&&!this.opacities[qr].isHidden()&&(this.placedOrientations[qr]=Qt[qr]);J?this.lastPlacementChangeTime=H:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=tt?tt.lastPlacementChangeTime:H)},fr.prototype.updateLayerOpacities=function(H,tt){for(var J={},ct=0,At=tt;ct<At.length;ct+=1){var Nt=At[ct],Qt=Nt.getBucket(H);Qt&&Nt.latestFeatureIndex&&H.id===Qt.layerIds[0]&&this.updateBucketOpacities(Qt,J,Nt.collisionBoxArray)}},fr.prototype.updateBucketOpacities=function(H,tt,J){var ct=this;H.hasTextData()&&H.text.opacityVertexArray.clear(),H.hasIconData()&&H.icon.opacityVertexArray.clear(),H.hasIconCollisionBoxData()&&H.iconCollisionBox.collisionVertexArray.clear(),H.hasTextCollisionBoxData()&&H.textCollisionBox.collisionVertexArray.clear();var At=H.layers[0].layout,Nt=new mn(null,0,!1,!1,!0),Qt=At.get("text-allow-overlap"),se=At.get("icon-allow-overlap"),be=At.get("text-variable-anchor"),Ze=At.get("text-rotation-alignment")==="map",or=At.get("text-pitch-alignment")==="map",nr=At.get("icon-text-fit")!=="none",kr=new mn(null,0,Qt&&(se||!H.hasIconData()||At.get("icon-optional")),se&&(Qt||!H.hasTextData()||At.get("text-optional")),!0);!H.collisionArrays&&J&&(H.hasIconCollisionBoxData()||H.hasTextCollisionBoxData())&&H.deserializeCollisionBoxes(J);for(var Er=function(Xr,on,Cn){for(var En=0;En<on/4;En++)Xr.opacityVertexArray.emplaceBack(Cn)},qr=function(Xr){var on=H.symbolInstances.get(Xr),Cn=on.numHorizontalGlyphVertices,En=on.numVerticalGlyphVertices,Fn=on.crossTileID,Nn=tt[Fn],jn=ct.opacities[Fn];Nn?jn=Nt:jn||(jn=kr,ct.opacities[Fn]=jn),tt[Fn]=!0;var ai=Cn>0||En>0,ni=on.numIconVertices>0,hi=ct.placedOrientations[on.crossTileID],ti=hi===i.WritingMode.vertical,fi=hi===i.WritingMode.horizontal||hi===i.WritingMode.horizontalOnly;if(ai){var Ci=Mr(jn.text),Di=ti?an:Ci;Er(H.text,Cn,Di);var Mi=fi?an:Ci;Er(H.text,En,Mi);var qi=jn.text.isHidden();[on.rightJustifiedTextSymbolIndex,on.centerJustifiedTextSymbolIndex,on.leftJustifiedTextSymbolIndex].forEach(function(Vs){Vs>=0&&(H.text.placedSymbolArray.get(Vs).hidden=qi||ti?1:0)}),on.verticalPlacedTextSymbolIndex>=0&&(H.text.placedSymbolArray.get(on.verticalPlacedTextSymbolIndex).hidden=qi||fi?1:0);var Oi=ct.variableOffsets[on.crossTileID];Oi&&ct.markUsedJustification(H,Oi.anchor,on,hi);var Ii=ct.placedOrientations[on.crossTileID];Ii&&(ct.markUsedJustification(H,"left",on,Ii),ct.markUsedOrientation(H,Ii,on))}if(ni){var Ji=Mr(jn.icon),ea=!(nr&&on.verticalPlacedIconSymbolIndex&&ti);if(on.placedIconSymbolIndex>=0){var Fi=ea?Ji:an;Er(H.icon,on.numIconVertices,Fi),H.icon.placedSymbolArray.get(on.placedIconSymbolIndex).hidden=jn.icon.isHidden()}if(on.verticalPlacedIconSymbolIndex>=0){var ca=ea?an:Ji;Er(H.icon,on.numVerticalIconVertices,ca),H.icon.placedSymbolArray.get(on.verticalPlacedIconSymbolIndex).hidden=jn.icon.isHidden()}}if(H.hasIconCollisionBoxData()||H.hasTextCollisionBoxData()){var Ai=H.collisionArrays[Xr];if(Ai){var Ni=new i.Point(0,0);if(Ai.textBox||Ai.verticalTextBox){var Sa=!0;if(be){var Fa=ct.variableOffsets[Fn];Fa?(Ni=Ri(Fa.anchor,Fa.width,Fa.height,Fa.textOffset,Fa.textBoxScale),Ze&&Ni._rotate(or?ct.transform.angle:-ct.transform.angle)):Sa=!1}Ai.textBox&&Qr(H.textCollisionBox.collisionVertexArray,jn.text.placed,!Sa||ti,Ni.x,Ni.y),Ai.verticalTextBox&&Qr(H.textCollisionBox.collisionVertexArray,jn.text.placed,!Sa||fi,Ni.x,Ni.y)}var ds=!!(!fi&&Ai.verticalIconBox);Ai.iconBox&&Qr(H.iconCollisionBox.collisionVertexArray,jn.icon.placed,ds,nr?Ni.x:0,nr?Ni.y:0),Ai.verticalIconBox&&Qr(H.iconCollisionBox.collisionVertexArray,jn.icon.placed,!ds,nr?Ni.x:0,nr?Ni.y:0)}}},Fr=0;Fr<H.symbolInstances.length;Fr++)qr(Fr);if(H.sortFeatures(this.transform.angle),this.retainedQueryData[H.bucketInstanceId]&&(this.retainedQueryData[H.bucketInstanceId].featureSortOrder=H.featureSortOrder),H.hasTextData()&&H.text.opacityVertexBuffer&&H.text.opacityVertexBuffer.updateData(H.text.opacityVertexArray),H.hasIconData()&&H.icon.opacityVertexBuffer&&H.icon.opacityVertexBuffer.updateData(H.icon.opacityVertexArray),H.hasIconCollisionBoxData()&&H.iconCollisionBox.collisionVertexBuffer&&H.iconCollisionBox.collisionVertexBuffer.updateData(H.iconCollisionBox.collisionVertexArray),H.hasTextCollisionBoxData()&&H.textCollisionBox.collisionVertexBuffer&&H.textCollisionBox.collisionVertexBuffer.updateData(H.textCollisionBox.collisionVertexArray),H.bucketInstanceId in this.collisionCircleArrays){var Rr=this.collisionCircleArrays[H.bucketInstanceId];H.placementInvProjMatrix=Rr.invProjMatrix,H.placementViewportMatrix=Rr.viewportMatrix,H.collisionCircleArray=Rr.circles,delete this.collisionCircleArrays[H.bucketInstanceId]}},fr.prototype.symbolFadeChange=function(H){return this.fadeDuration===0?1:(H-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},fr.prototype.zoomAdjustment=function(H){return Math.max(0,(this.transform.zoom-H)/1.5)},fr.prototype.hasTransitions=function(H){return this.stale||H-this.lastPlacementChangeTime<this.fadeDuration},fr.prototype.stillRecent=function(H,tt){var J=this.zoomAtLastRecencyCheck===tt?1-this.zoomAdjustment(tt):1;return this.zoomAtLastRecencyCheck=tt,this.commitTime+this.fadeDuration*J>H},fr.prototype.setStale=function(){this.stale=!0};function Qr(H,tt,J,ct,At){H.emplaceBack(tt?1:0,J?1:0,ct||0,At||0),H.emplaceBack(tt?1:0,J?1:0,ct||0,At||0),H.emplaceBack(tt?1:0,J?1:0,ct||0,At||0),H.emplaceBack(tt?1:0,J?1:0,ct||0,At||0)}var cn=Math.pow(2,25),nn=Math.pow(2,24),_n=Math.pow(2,17),gn=Math.pow(2,16),en=Math.pow(2,9),wr=Math.pow(2,8),mr=Math.pow(2,1);function Mr(H){if(H.opacity===0&&!H.placed)return 0;if(H.opacity===1&&H.placed)return 4294967295;var tt=H.placed?1:0,J=Math.floor(H.opacity*127);return J*cn+tt*nn+J*_n+tt*gn+J*en+tt*wr+J*mr+tt}var an=0,kn=function(H){this._sortAcrossTiles=H.layout.get("symbol-z-order")!=="viewport-y"&&H.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};kn.prototype.continuePlacement=function(H,tt,J,ct,At){for(var Nt=this._bucketParts;this._currentTileIndex<H.length;){var Qt=H[this._currentTileIndex];if(tt.getBucketParts(Nt,ct,Qt,this._sortAcrossTiles),this._currentTileIndex++,At())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Nt.sort(function(be,Ze){return be.sortKey-Ze.sortKey}));this._currentPartIndex<Nt.length;){var se=Nt[this._currentPartIndex];if(tt.placeLayerBucketPart(se,this._seenCrossTileIDs,J),this._currentPartIndex++,At())return!0}return!1};var Rn=function(H,tt,J,ct,At,Nt,Qt){this.placement=new fr(H,At,Nt,Qt),this._currentPlacementIndex=tt.length-1,this._forceFullPlacement=J,this._showCollisionBoxes=ct,this._done=!1};Rn.prototype.isDone=function(){return this._done},Rn.prototype.continuePlacement=function(H,tt,J){for(var ct=this,At=i.browser.now(),Nt=function(){var or=i.browser.now()-At;return ct._forceFullPlacement?!1:or>2};this._currentPlacementIndex>=0;){var Qt=H[this._currentPlacementIndex],se=tt[Qt],be=this.placement.collisionIndex.transform.zoom;if(se.type==="symbol"&&(!se.minzoom||se.minzoom<=be)&&(!se.maxzoom||se.maxzoom>be)){this._inProgressLayer||(this._inProgressLayer=new kn(se));var Ze=this._inProgressLayer.continuePlacement(J[se.source],this.placement,this._showCollisionBoxes,se,Nt);if(Ze)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Rn.prototype.commit=function(H){return this.placement.commit(H),this.placement};var fn=512/i.EXTENT/2,Sn=function(H,tt,J){this.tileID=H,this.indexedSymbolInstances={},this.bucketInstanceId=J;for(var ct=0;ct<tt.length;ct++){var At=tt.get(ct),Nt=At.key;this.indexedSymbolInstances[Nt]||(this.indexedSymbolInstances[Nt]=[]),this.indexedSymbolInstances[Nt].push({crossTileID:At.crossTileID,coord:this.getScaledCoordinates(At,H)})}};Sn.prototype.getScaledCoordinates=function(H,tt){var J=tt.canonical.z-this.tileID.canonical.z,ct=fn/Math.pow(2,J);return{x:Math.floor((tt.canonical.x*i.EXTENT+H.anchorX)*ct),y:Math.floor((tt.canonical.y*i.EXTENT+H.anchorY)*ct)}},Sn.prototype.findMatches=function(H,tt,J){for(var ct=this.tileID.canonical.z<tt.canonical.z?1:Math.pow(2,this.tileID.canonical.z-tt.canonical.z),At=0;At<H.length;At++){var Nt=H.get(At);if(!Nt.crossTileID){var Qt=this.indexedSymbolInstances[Nt.key];if(Qt)for(var se=this.getScaledCoordinates(Nt,tt),be=0,Ze=Qt;be<Ze.length;be+=1){var or=Ze[be];if(Math.abs(or.coord.x-se.x)<=ct&&Math.abs(or.coord.y-se.y)<=ct&&!J[or.crossTileID]){J[or.crossTileID]=!0,Nt.crossTileID=or.crossTileID;break}}}}};var Vn=function(){this.maxCrossTileID=0};Vn.prototype.generate=function(){return++this.maxCrossTileID};var $n=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};$n.prototype.handleWrapJump=function(H){var tt=Math.round((H-this.lng)/360);if(tt!==0)for(var J in this.indexes){var ct=this.indexes[J],At={};for(var Nt in ct){var Qt=ct[Nt];Qt.tileID=Qt.tileID.unwrapTo(Qt.tileID.wrap+tt),At[Qt.tileID.key]=Qt}this.indexes[J]=At}this.lng=H},$n.prototype.addBucket=function(H,tt,J){if(this.indexes[H.overscaledZ]&&this.indexes[H.overscaledZ][H.key]){if(this.indexes[H.overscaledZ][H.key].bucketInstanceId===tt.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(H.overscaledZ,this.indexes[H.overscaledZ][H.key])}for(var ct=0;ct<tt.symbolInstances.length;ct++){var At=tt.symbolInstances.get(ct);At.crossTileID=0}this.usedCrossTileIDs[H.overscaledZ]||(this.usedCrossTileIDs[H.overscaledZ]={});var Nt=this.usedCrossTileIDs[H.overscaledZ];for(var Qt in this.indexes){var se=this.indexes[Qt];if(Number(Qt)>H.overscaledZ)for(var be in se){var Ze=se[be];Ze.tileID.isChildOf(H)&&Ze.findMatches(tt.symbolInstances,H,Nt)}else{var or=H.scaledTo(Number(Qt)),nr=se[or.key];nr&&nr.findMatches(tt.symbolInstances,H,Nt)}}for(var kr=0;kr<tt.symbolInstances.length;kr++){var Er=tt.symbolInstances.get(kr);Er.crossTileID||(Er.crossTileID=J.generate(),Nt[Er.crossTileID]=!0)}return this.indexes[H.overscaledZ]===void 0&&(this.indexes[H.overscaledZ]={}),this.indexes[H.overscaledZ][H.key]=new Sn(H,tt.symbolInstances,tt.bucketInstanceId),!0},$n.prototype.removeBucketCrossTileIDs=function(H,tt){for(var J in tt.indexedSymbolInstances)for(var ct=0,At=tt.indexedSymbolInstances[J];ct<At.length;ct+=1){var Nt=At[ct];delete this.usedCrossTileIDs[H][Nt.crossTileID]}},$n.prototype.removeStaleBuckets=function(H){var tt=!1;for(var J in this.indexes){var ct=this.indexes[J];for(var At in ct)H[ct[At].bucketInstanceId]||(this.removeBucketCrossTileIDs(J,ct[At]),delete ct[At],tt=!0)}return tt};var Kn=function(){this.layerIndexes={},this.crossTileIDs=new Vn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Kn.prototype.addLayer=function(H,tt,J){var ct=this.layerIndexes[H.id];ct===void 0&&(ct=this.layerIndexes[H.id]=new $n);var At=!1,Nt={};ct.handleWrapJump(J);for(var Qt=0,se=tt;Qt<se.length;Qt+=1){var be=se[Qt],Ze=be.getBucket(H);!Ze||H.id!==Ze.layerIds[0]||(Ze.bucketInstanceId||(Ze.bucketInstanceId=++this.maxBucketInstanceId),ct.addBucket(be.tileID,Ze,this.crossTileIDs)&&(At=!0),Nt[Ze.bucketInstanceId]=!0)}return ct.removeStaleBuckets(Nt)&&(At=!0),At},Kn.prototype.pruneUnusedLayers=function(H){var tt={};H.forEach(function(ct){tt[ct]=!0});for(var J in this.layerIndexes)tt[J]||delete this.layerIndexes[J]};var Jn=function(H,tt){return i.emitValidationErrors(H,tt&&tt.filter(function(J){return J.identifier!=="source.canvas"}))},ii=i.pick(Oe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Pa=i.pick(Oe,["setCenter","setZoom","setBearing","setPitch"]),Za=Xe(),Ga=function(H){function tt(J,ct){var At=this;ct===void 0&&(ct={}),H.call(this),this.map=J,this.dispatcher=new z(Te(),this),this.imageManager=new x,this.imageManager.setEventedParent(this),this.glyphManager=new P(J._requestManager,ct.localIdeographFontFamily),this.lineAtlas=new I(256,512),this.crossTileSymbolIndex=new Kn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new i.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",i.getReferrer());var Nt=this;this._rtlTextPluginCallback=tt.registerForPluginStateChange(function(Qt){var se={pluginStatus:Qt.pluginStatus,pluginURL:Qt.pluginURL};Nt.dispatcher.broadcast("syncRTLPluginState",se,function(be,Ze){if(i.triggerPluginCompletionEvent(be),Ze){var or=Ze.every(function(kr){return kr});if(or)for(var nr in Nt.sourceCaches)Nt.sourceCaches[nr].reload()}})}),this.on("data",function(Qt){if(!(Qt.dataType!=="source"||Qt.sourceDataType!=="metadata")){var se=At.sourceCaches[Qt.sourceId];if(se){var be=se.getSource();if(!(!be||!be.vectorLayerIds))for(var Ze in At._layers){var or=At._layers[Ze];or.source===be.id&&At._validateLayer(or)}}}})}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.loadURL=function(J,ct){var At=this;ct===void 0&&(ct={}),this.fire(new i.Event("dataloading",{dataType:"style"}));var Nt=typeof ct.validate=="boolean"?ct.validate:!i.isMapboxURL(J);J=this.map._requestManager.normalizeStyleURL(J,ct.accessToken);var Qt=this.map._requestManager.transformRequest(J,i.ResourceType.Style);this._request=i.getJSON(Qt,function(se,be){At._request=null,se?At.fire(new i.ErrorEvent(se)):be&&At._load(be,Nt)})},tt.prototype.loadJSON=function(J,ct){var At=this;ct===void 0&&(ct={}),this.fire(new i.Event("dataloading",{dataType:"style"})),this._request=i.browser.frame(function(){At._request=null,At._load(J,ct.validate!==!1)})},tt.prototype.loadEmpty=function(){this.fire(new i.Event("dataloading",{dataType:"style"})),this._load(Za,!1)},tt.prototype._load=function(J,ct){if(!(ct&&Jn(this,i.validateStyle(J)))){this._loaded=!0,this.stylesheet=J;for(var At in J.sources)this.addSource(At,J.sources[At],{validate:!1});J.sprite?this._loadSprite(J.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(J.glyphs);var Nt=$e(this.stylesheet.layers);this._order=Nt.map(function(Ze){return Ze.id}),this._layers={},this._serializedLayers={};for(var Qt=0,se=Nt;Qt<se.length;Qt+=1){var be=se[Qt];be=i.createStyleLayer(be),be.setEventedParent(this,{layer:{id:be.id}}),this._layers[be.id]=be,this._serializedLayers[be.id]=be.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new i.Event("data",{dataType:"style"})),this.fire(new i.Event("style.load"))}},tt.prototype._loadSprite=function(J){var ct=this;this._spriteRequest=h(J,this.map._requestManager,function(At,Nt){if(ct._spriteRequest=null,At)ct.fire(new i.ErrorEvent(At));else if(Nt)for(var Qt in Nt)ct.imageManager.addImage(Qt,Nt[Qt]);ct.imageManager.setLoaded(!0),ct._availableImages=ct.imageManager.listImages(),ct.dispatcher.broadcast("setImages",ct._availableImages),ct.fire(new i.Event("data",{dataType:"style"}))})},tt.prototype._validateLayer=function(J){var ct=this.sourceCaches[J.source];if(ct){var At=J.sourceLayer;if(At){var Nt=ct.getSource();(Nt.type==="geojson"||Nt.vectorLayerIds&&Nt.vectorLayerIds.indexOf(At)===-1)&&this.fire(new i.ErrorEvent(new Error('Source layer "'+At+'" does not exist on source "'+Nt.id+'" as specified by style layer "'+J.id+'"')))}}},tt.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var J in this.sourceCaches)if(!this.sourceCaches[J].loaded())return!1;return!!this.imageManager.isLoaded()},tt.prototype._serializeLayers=function(J){for(var ct=[],At=0,Nt=J;At<Nt.length;At+=1){var Qt=Nt[At],se=this._layers[Qt];se.type!=="custom"&&ct.push(se.serialize())}return ct},tt.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var J in this.sourceCaches)if(this.sourceCaches[J].hasTransition())return!0;for(var ct in this._layers)if(this._layers[ct].hasTransition())return!0;return!1},tt.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},tt.prototype.update=function(J){if(this._loaded){var ct=this._changed;if(this._changed){var At=Object.keys(this._updatedLayers),Nt=Object.keys(this._removedLayers);(At.length||Nt.length)&&this._updateWorkerLayers(At,Nt);for(var Qt in this._updatedSources){var se=this._updatedSources[Qt];se==="reload"?this._reloadSource(Qt):se==="clear"&&this._clearSource(Qt)}this._updateTilesForChangedImages();for(var be in this._updatedPaintProps)this._layers[be].updateTransitions(J);this.light.updateTransitions(J),this._resetUpdates()}for(var Ze in this.sourceCaches)this.sourceCaches[Ze].used=!1;for(var or=0,nr=this._order;or<nr.length;or+=1){var kr=nr[or],Er=this._layers[kr];Er.recalculate(J,this._availableImages),!Er.isHidden(J.zoom)&&Er.source&&(this.sourceCaches[Er.source].used=!0)}this.light.recalculate(J),this.z=J.zoom,ct&&this.fire(new i.Event("data",{dataType:"style"}))}},tt.prototype._updateTilesForChangedImages=function(){var J=Object.keys(this._changedImages);if(J.length){for(var ct in this.sourceCaches)this.sourceCaches[ct].reloadTilesForDependencies(["icons","patterns"],J);this._changedImages={}}},tt.prototype._updateWorkerLayers=function(J,ct){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(J),removedIds:ct})},tt.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},tt.prototype.setState=function(J){var ct=this;if(this._checkLoaded(),Jn(this,i.validateStyle(J)))return!1;J=i.clone$1(J),J.layers=$e(J.layers);var At=yn(this.serialize(),J).filter(function(Qt){return!(Qt.command in Pa)});if(At.length===0)return!1;var Nt=At.filter(function(Qt){return!(Qt.command in ii)});if(Nt.length>0)throw new Error("Unimplemented: "+Nt.map(function(Qt){return Qt.command}).join(", ")+".");return At.forEach(function(Qt){Qt.command!=="setTransition"&&ct[Qt.command].apply(ct,Qt.args)}),this.stylesheet=J,!0},tt.prototype.addImage=function(J,ct){if(this.getImage(J))return this.fire(new i.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(J,ct),this._availableImages=this.imageManager.listImages(),this._changedImages[J]=!0,this._changed=!0,this.fire(new i.Event("data",{dataType:"style"}))},tt.prototype.updateImage=function(J,ct){this.imageManager.updateImage(J,ct)},tt.prototype.getImage=function(J){return this.imageManager.getImage(J)},tt.prototype.removeImage=function(J){if(!this.getImage(J))return this.fire(new i.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(J),this._availableImages=this.imageManager.listImages(),this._changedImages[J]=!0,this._changed=!0,this.fire(new i.Event("data",{dataType:"style"}))},tt.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},tt.prototype.addSource=function(J,ct,At){var Nt=this;if(At===void 0&&(At={}),this._checkLoaded(),this.sourceCaches[J]!==void 0)throw new Error("There is already a source with this ID");if(!ct.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(ct).join(", ")+".");var Qt=["vector","raster","geojson","video","image"],se=Qt.indexOf(ct.type)>=0;if(!(se&&this._validate(i.validateStyle.source,"sources."+J,ct,null,At))){this.map&&this.map._collectResourceTiming&&(ct.collectResourceTiming=!0);var be=this.sourceCaches[J]=new Ce(J,ct,this.dispatcher);be.style=this,be.setEventedParent(this,function(){return{isSourceLoaded:Nt.loaded(),source:be.serialize(),sourceId:J}}),be.onAdd(this.map),this._changed=!0}},tt.prototype.removeSource=function(J){if(this._checkLoaded(),this.sourceCaches[J]===void 0)throw new Error("There is no source with this ID");for(var ct in this._layers)if(this._layers[ct].source===J)return this.fire(new i.ErrorEvent(new Error('Source "'+J+'" cannot be removed while layer "'+ct+'" is using it.')));var At=this.sourceCaches[J];delete this.sourceCaches[J],delete this._updatedSources[J],At.fire(new i.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:J})),At.setEventedParent(null),At.clearTiles(),At.onRemove&&At.onRemove(this.map),this._changed=!0},tt.prototype.setGeoJSONSourceData=function(J,ct){this._checkLoaded();var At=this.sourceCaches[J].getSource();At.setData(ct),this._changed=!0},tt.prototype.getSource=function(J){return this.sourceCaches[J]&&this.sourceCaches[J].getSource()},tt.prototype.addLayer=function(J,ct,At){At===void 0&&(At={}),this._checkLoaded();var Nt=J.id;if(this.getLayer(Nt)){this.fire(new i.ErrorEvent(new Error('Layer with id "'+Nt+'" already exists on this map')));return}var Qt;if(J.type==="custom"){if(Jn(this,i.validateCustomStyleLayer(J)))return;Qt=i.createStyleLayer(J)}else{if(typeof J.source=="object"&&(this.addSource(Nt,J.source),J=i.clone$1(J),J=i.extend(J,{source:Nt})),this._validate(i.validateStyle.layer,"layers."+Nt,J,{arrayIndex:-1},At))return;Qt=i.createStyleLayer(J),this._validateLayer(Qt),Qt.setEventedParent(this,{layer:{id:Nt}}),this._serializedLayers[Qt.id]=Qt.serialize()}var se=ct?this._order.indexOf(ct):this._order.length;if(ct&&se===-1){this.fire(new i.ErrorEvent(new Error('Layer with id "'+ct+'" does not exist on this map.')));return}if(this._order.splice(se,0,Nt),this._layerOrderChanged=!0,this._layers[Nt]=Qt,this._removedLayers[Nt]&&Qt.source&&Qt.type!=="custom"){var be=this._removedLayers[Nt];delete this._removedLayers[Nt],be.type!==Qt.type?this._updatedSources[Qt.source]="clear":(this._updatedSources[Qt.source]="reload",this.sourceCaches[Qt.source].pause())}this._updateLayer(Qt),Qt.onAdd&&Qt.onAdd(this.map)},tt.prototype.moveLayer=function(J,ct){this._checkLoaded(),this._changed=!0;var At=this._layers[J];if(!At){this.fire(new i.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be moved.")));return}if(J!==ct){var Nt=this._order.indexOf(J);this._order.splice(Nt,1);var Qt=ct?this._order.indexOf(ct):this._order.length;if(ct&&Qt===-1){this.fire(new i.ErrorEvent(new Error('Layer with id "'+ct+'" does not exist on this map.')));return}this._order.splice(Qt,0,J),this._layerOrderChanged=!0}},tt.prototype.removeLayer=function(J){this._checkLoaded();var ct=this._layers[J];if(!ct){this.fire(new i.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be removed.")));return}ct.setEventedParent(null);var At=this._order.indexOf(J);this._order.splice(At,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[J]=ct,delete this._layers[J],delete this._serializedLayers[J],delete this._updatedLayers[J],delete this._updatedPaintProps[J],ct.onRemove&&ct.onRemove(this.map)},tt.prototype.getLayer=function(J){return this._layers[J]},tt.prototype.hasLayer=function(J){return J in this._layers},tt.prototype.setLayerZoomRange=function(J,ct,At){this._checkLoaded();var Nt=this.getLayer(J);if(!Nt){this.fire(new i.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot have zoom extent.")));return}Nt.minzoom===ct&&Nt.maxzoom===At||(ct!=null&&(Nt.minzoom=ct),At!=null&&(Nt.maxzoom=At),this._updateLayer(Nt))},tt.prototype.setFilter=function(J,ct,At){At===void 0&&(At={}),this._checkLoaded();var Nt=this.getLayer(J);if(!Nt){this.fire(new i.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be filtered.")));return}if(!i.deepEqual(Nt.filter,ct)){if(ct==null){Nt.filter=void 0,this._updateLayer(Nt);return}this._validate(i.validateStyle.filter,"layers."+Nt.id+".filter",ct,null,At)||(Nt.filter=i.clone$1(ct),this._updateLayer(Nt))}},tt.prototype.getFilter=function(J){return i.clone$1(this.getLayer(J).filter)},tt.prototype.setLayoutProperty=function(J,ct,At,Nt){Nt===void 0&&(Nt={}),this._checkLoaded();var Qt=this.getLayer(J);if(!Qt){this.fire(new i.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be styled.")));return}i.deepEqual(Qt.getLayoutProperty(ct),At)||(Qt.setLayoutProperty(ct,At,Nt),this._updateLayer(Qt))},tt.prototype.getLayoutProperty=function(J,ct){var At=this.getLayer(J);if(!At){this.fire(new i.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style.")));return}return At.getLayoutProperty(ct)},tt.prototype.setPaintProperty=function(J,ct,At,Nt){Nt===void 0&&(Nt={}),this._checkLoaded();var Qt=this.getLayer(J);if(!Qt){this.fire(new i.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be styled.")));return}if(!i.deepEqual(Qt.getPaintProperty(ct),At)){var se=Qt.setPaintProperty(ct,At,Nt);se&&this._updateLayer(Qt),this._changed=!0,this._updatedPaintProps[J]=!0}},tt.prototype.getPaintProperty=function(J,ct){return this.getLayer(J).getPaintProperty(ct)},tt.prototype.setFeatureState=function(J,ct){this._checkLoaded();var At=J.source,Nt=J.sourceLayer,Qt=this.sourceCaches[At];if(Qt===void 0){this.fire(new i.ErrorEvent(new Error("The source '"+At+"' does not exist in the map's style.")));return}var se=Qt.getSource().type;if(se==="geojson"&&Nt){this.fire(new i.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(se==="vector"&&!Nt){this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}J.id===void 0&&this.fire(new i.ErrorEvent(new Error("The feature id parameter must be provided."))),Qt.setFeatureState(Nt,J.id,ct)},tt.prototype.removeFeatureState=function(J,ct){this._checkLoaded();var At=J.source,Nt=this.sourceCaches[At];if(Nt===void 0){this.fire(new i.ErrorEvent(new Error("The source '"+At+"' does not exist in the map's style.")));return}var Qt=Nt.getSource().type,se=Qt==="vector"?J.sourceLayer:void 0;if(Qt==="vector"&&!se){this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(ct&&typeof J.id!="string"&&typeof J.id!="number"){this.fire(new i.ErrorEvent(new Error("A feature id is requred to remove its specific state property.")));return}Nt.removeFeatureState(se,J.id,ct)},tt.prototype.getFeatureState=function(J){this._checkLoaded();var ct=J.source,At=J.sourceLayer,Nt=this.sourceCaches[ct];if(Nt===void 0){this.fire(new i.ErrorEvent(new Error("The source '"+ct+"' does not exist in the map's style.")));return}var Qt=Nt.getSource().type;if(Qt==="vector"&&!At){this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return J.id===void 0&&this.fire(new i.ErrorEvent(new Error("The feature id parameter must be provided."))),Nt.getFeatureState(At,J.id)},tt.prototype.getTransition=function(){return i.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},tt.prototype.serialize=function(){return i.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:i.mapObject(this.sourceCaches,function(J){return J.serialize()}),layers:this._serializeLayers(this._order)},function(J){return J!==void 0})},tt.prototype._updateLayer=function(J){this._updatedLayers[J.id]=!0,J.source&&!this._updatedSources[J.source]&&this.sourceCaches[J.source].getSource().type!=="raster"&&(this._updatedSources[J.source]="reload",this.sourceCaches[J.source].pause()),this._changed=!0},tt.prototype._flattenAndSortRenderedFeatures=function(J){for(var ct=this,At=function(fi){return ct._layers[fi].type==="fill-extrusion"},Nt={},Qt=[],se=this._order.length-1;se>=0;se--){var be=this._order[se];if(At(be)){Nt[be]=se;for(var Ze=0,or=J;Ze<or.length;Ze+=1){var nr=or[Ze],kr=nr[be];if(kr)for(var Er=0,qr=kr;Er<qr.length;Er+=1){var Fr=qr[Er];Qt.push(Fr)}}}}Qt.sort(function(fi,Ci){return Ci.intersectionZ-fi.intersectionZ});for(var Rr=[],Xr=this._order.length-1;Xr>=0;Xr--){var on=this._order[Xr];if(At(on))for(var Cn=Qt.length-1;Cn>=0;Cn--){var En=Qt[Cn].feature;if(Nt[En.layer.id]<Xr)break;Rr.push(En),Qt.pop()}else for(var Fn=0,Nn=J;Fn<Nn.length;Fn+=1){var jn=Nn[Fn],ai=jn[on];if(ai)for(var ni=0,hi=ai;ni<hi.length;ni+=1){var ti=hi[ni];Rr.push(ti.feature)}}}return Rr},tt.prototype.queryRenderedFeatures=function(J,ct,At){ct&&ct.filter&&this._validate(i.validateStyle.filter,"queryRenderedFeatures.filter",ct.filter,null,ct);var Nt={};if(ct&&ct.layers){if(!Array.isArray(ct.layers))return this.fire(new i.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Qt=0,se=ct.layers;Qt<se.length;Qt+=1){var be=se[Qt],Ze=this._layers[be];if(!Ze)return this.fire(new i.ErrorEvent(new Error("The layer '"+be+"' does not exist in the map's style and cannot be queried for features."))),[];Nt[Ze.source]=!0}}var or=[];ct.availableImages=this._availableImages;for(var nr in this.sourceCaches)ct.layers&&!Nt[nr]||or.push(X(this.sourceCaches[nr],this._layers,this._serializedLayers,J,ct,At));return this.placement&&or.push(Y(this._layers,this._serializedLayers,this.sourceCaches,J,ct,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(or)},tt.prototype.querySourceFeatures=function(J,ct){ct&&ct.filter&&this._validate(i.validateStyle.filter,"querySourceFeatures.filter",ct.filter,null,ct);var At=this.sourceCaches[J];return At?ot(At,ct):[]},tt.prototype.addSourceType=function(J,ct,At){if(tt.getSourceType(J))return At(new Error('A source type called "'+J+'" already exists.'));if(tt.setSourceType(J,ct),!ct.workerSourceURL)return At(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:J,url:ct.workerSourceURL},At)},tt.prototype.getLight=function(){return this.light.getLight()},tt.prototype.setLight=function(J,ct){ct===void 0&&(ct={}),this._checkLoaded();var At=this.light.getLight(),Nt=!1;for(var Qt in J)if(!i.deepEqual(J[Qt],At[Qt])){Nt=!0;break}if(Nt){var se={now:i.browser.now(),transition:i.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(J,ct),this.light.updateTransitions(se)}},tt.prototype._validate=function(J,ct,At,Nt,Qt){return Qt===void 0&&(Qt={}),Qt&&Qt.validate===!1?!1:Jn(this,J.call(i.validateStyle,i.extend({key:ct,style:this.serialize(),value:At,styleSpec:i.styleSpec},Nt)))},tt.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),i.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var J in this._layers){var ct=this._layers[J];ct.setEventedParent(null)}for(var At in this.sourceCaches)this.sourceCaches[At].clearTiles(),this.sourceCaches[At].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},tt.prototype._clearSource=function(J){this.sourceCaches[J].clearTiles()},tt.prototype._reloadSource=function(J){this.sourceCaches[J].resume(),this.sourceCaches[J].reload()},tt.prototype._updateSources=function(J){for(var ct in this.sourceCaches)this.sourceCaches[ct].update(J)},tt.prototype._generateCollisionBoxes=function(){for(var J in this.sourceCaches)this._reloadSource(J)},tt.prototype._updatePlacement=function(J,ct,At,Nt,Qt){Qt===void 0&&(Qt=!1);for(var se=!1,be=!1,Ze={},or=0,nr=this._order;or<nr.length;or+=1){var kr=nr[or],Er=this._layers[kr];if(Er.type==="symbol"){if(!Ze[Er.source]){var qr=this.sourceCaches[Er.source];Ze[Er.source]=qr.getRenderableIds(!0).map(function(Fn){return qr.getTileByID(Fn)}).sort(function(Fn,Nn){return Nn.tileID.overscaledZ-Fn.tileID.overscaledZ||(Fn.tileID.isLessThan(Nn.tileID)?-1:1)})}var Fr=this.crossTileSymbolIndex.addLayer(Er,Ze[Er.source],J.center.lng);se=se||Fr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),Qt=Qt||this._layerOrderChanged||At===0,(Qt||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(i.browser.now(),J.zoom))&&(this.pauseablePlacement=new Rn(J,this._order,Qt,ct,At,Nt,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ze),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(i.browser.now()),be=!0),se&&this.pauseablePlacement.placement.setStale()),be||se)for(var Rr=0,Xr=this._order;Rr<Xr.length;Rr+=1){var on=Xr[Rr],Cn=this._layers[on];Cn.type==="symbol"&&this.placement.updateLayerOpacities(Cn,Ze[Cn.source])}var En=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(i.browser.now());return En},tt.prototype._releaseSymbolFadeTiles=function(){for(var J in this.sourceCaches)this.sourceCaches[J].releaseSymbolFadeTiles()},tt.prototype.getImages=function(J,ct,At){this.imageManager.getImages(ct.icons,At),this._updateTilesForChangedImages();var Nt=this.sourceCaches[ct.source];Nt&&Nt.setDependencies(ct.tileID.key,ct.type,ct.icons)},tt.prototype.getGlyphs=function(J,ct,At){this.glyphManager.getGlyphs(ct.stacks,At)},tt.prototype.getResource=function(J,ct,At){return i.makeRequest(ct,At)},tt}(i.Evented);Ga.getSourceType=Z,Ga.setSourceType=G,Ga.registerForPluginStateChange=i.registerForPluginStateChange;var Ja=i.createLayout([{name:"a_pos",type:"Int16",components:2}]),Wa=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,Vl=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,Hi=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Gs="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",Os=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ea="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",Qa=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,xu=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,Ws="void main() {gl_FragColor=vec4(1.0);}",va="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",Ys=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,io=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,Ma=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,ao="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",qa="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",fo="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",Oo="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",Ho="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",Ia="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",bu="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",Io=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,za=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,Hl=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Go=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,zo=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Gl=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Wl=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Qu=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,Xs=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,$u=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,tc=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ec=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,Yl=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,rc="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",nc=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,_u="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",ic=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ac=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Xl=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ms=`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,ys=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Is=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,yl=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,oc=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,Wo=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,wu="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",Kl=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,sc=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,ho=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,xs=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,Ks=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,zs=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,Do=Qi(Wa,Vl),Yo=Qi(Hi,Gs),Jl=Qi(Os,Ea),Ds=Qi(Qa,xu),as=Qi(Ws,va),xa=Qi(Ys,io),Ql=Qi(Ma,ao),xl=Qi(qa,fo),Fs=Qi(Oo,Ho),Au=Qi(Ia,bu),Tu=Qi(Io,za),Rs=Qi(Hl,Go),Bs=Qi(zo,Gl),Ca=Qi(Wl,Qu),bl=Qi(Xs,$u),lc=Qi(tc,ec),$l=Qi(Yl,rc),uc=Qi(nc,_u),_l=Qi(ic,ac),Js=Qi(Xl,ms),tu=Qi(ys,Is),eu=Qi(yl,oc),Qs=Qi(Wo,wu),ru=Qi(Kl,sc),wl=Qi(ho,xs),nu=Qi(Ks,zs);function Qi(H,tt){var J=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,ct={};return H=H.replace(J,function(At,Nt,Qt,se,be){return ct[be]=!0,Nt==="define"?`
#ifndef HAS_UNIFORM_u_`+be+`
varying `+Qt+" "+se+" "+be+`;
#else
uniform `+Qt+" "+se+" u_"+be+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+be+`
    `+Qt+" "+se+" "+be+" = u_"+be+`;
#endif
`}),tt=tt.replace(J,function(At,Nt,Qt,se,be){var Ze=se==="float"?"vec2":"vec4",or=be.match(/color/)?"color":Ze;return ct[be]?Nt==="define"?`
#ifndef HAS_UNIFORM_u_`+be+`
uniform lowp float u_`+be+`_t;
attribute `+Qt+" "+Ze+" a_"+be+`;
varying `+Qt+" "+se+" "+be+`;
#else
uniform `+Qt+" "+se+" u_"+be+`;
#endif
`:or==="vec4"?`
#ifndef HAS_UNIFORM_u_`+be+`
    `+be+" = a_"+be+`;
#else
    `+Qt+" "+se+" "+be+" = u_"+be+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+be+`
    `+be+" = unpack_mix_"+or+"(a_"+be+", u_"+be+`_t);
#else
    `+Qt+" "+se+" "+be+" = u_"+be+`;
#endif
`:Nt==="define"?`
#ifndef HAS_UNIFORM_u_`+be+`
uniform lowp float u_`+be+`_t;
attribute `+Qt+" "+Ze+" a_"+be+`;
#else
uniform `+Qt+" "+se+" u_"+be+`;
#endif
`:or==="vec4"?`
#ifndef HAS_UNIFORM_u_`+be+`
    `+Qt+" "+se+" "+be+" = a_"+be+`;
#else
    `+Qt+" "+se+" "+be+" = u_"+be+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+be+`
    `+Qt+" "+se+" "+be+" = unpack_mix_"+or+"(a_"+be+", u_"+be+`_t);
#else
    `+Qt+" "+se+" "+be+" = u_"+be+`;
#endif
`}),{fragmentSource:H,vertexSource:tt}}var ku=Object.freeze({__proto__:null,prelude:Do,background:Yo,backgroundPattern:Jl,circle:Ds,clippingMask:as,heatmap:xa,heatmapTexture:Ql,collisionBox:xl,collisionCircle:Fs,debug:Au,fill:Tu,fillOutline:Rs,fillOutlinePattern:Bs,fillPattern:Ca,fillExtrusion:bl,fillExtrusionPattern:lc,hillshadePrepare:$l,hillshade:uc,line:_l,lineGradient:Js,linePattern:tu,lineSDF:eu,raster:Qs,symbolIcon:ru,symbolSDF:wl,symbolTextAndIcon:nu}),Ao=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Ao.prototype.bind=function(H,tt,J,ct,At,Nt,Qt,se){this.context=H;for(var be=this.boundPaintVertexBuffers.length!==ct.length,Ze=0;!be&&Ze<ct.length;Ze++)this.boundPaintVertexBuffers[Ze]!==ct[Ze]&&(be=!0);var or=!this.vao||this.boundProgram!==tt||this.boundLayoutVertexBuffer!==J||be||this.boundIndexBuffer!==At||this.boundVertexOffset!==Nt||this.boundDynamicVertexBuffer!==Qt||this.boundDynamicVertexBuffer2!==se;!H.extVertexArrayObject||or?this.freshBind(tt,J,ct,At,Nt,Qt,se):(H.bindVertexArrayOES.set(this.vao),Qt&&Qt.bind(),At&&At.dynamicDraw&&At.bind(),se&&se.bind())},Ao.prototype.freshBind=function(H,tt,J,ct,At,Nt,Qt){var se,be=H.numAttributes,Ze=this.context,or=Ze.gl;if(Ze.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ze.extVertexArrayObject.createVertexArrayOES(),Ze.bindVertexArrayOES.set(this.vao),se=0,this.boundProgram=H,this.boundLayoutVertexBuffer=tt,this.boundPaintVertexBuffers=J,this.boundIndexBuffer=ct,this.boundVertexOffset=At,this.boundDynamicVertexBuffer=Nt,this.boundDynamicVertexBuffer2=Qt;else{se=Ze.currentNumAttributes||0;for(var nr=be;nr<se;nr++)or.disableVertexAttribArray(nr)}tt.enableAttributes(or,H);for(var kr=0,Er=J;kr<Er.length;kr+=1){var qr=Er[kr];qr.enableAttributes(or,H)}Nt&&Nt.enableAttributes(or,H),Qt&&Qt.enableAttributes(or,H),tt.bind(),tt.setVertexAttribPointers(or,H,At);for(var Fr=0,Rr=J;Fr<Rr.length;Fr+=1){var Xr=Rr[Fr];Xr.bind(),Xr.setVertexAttribPointers(or,H,At)}Nt&&(Nt.bind(),Nt.setVertexAttribPointers(or,H,At)),ct&&ct.bind(),Qt&&(Qt.bind(),Qt.setVertexAttribPointers(or,H,At)),Ze.currentNumAttributes=be},Ao.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Ns=function(H,tt,J,ct,At){var Nt=H.gl;this.program=Nt.createProgram();var Qt=J?J.defines():[];At&&Qt.push("#define OVERDRAW_INSPECTOR;");var se=Qt.concat(Do.fragmentSource,tt.fragmentSource).join(`
`),be=Qt.concat(Do.vertexSource,tt.vertexSource).join(`
`),Ze=Nt.createShader(Nt.FRAGMENT_SHADER);if(Nt.isContextLost()){this.failedToCreate=!0;return}Nt.shaderSource(Ze,se),Nt.compileShader(Ze),Nt.attachShader(this.program,Ze);var or=Nt.createShader(Nt.VERTEX_SHADER);if(Nt.isContextLost()){this.failedToCreate=!0;return}Nt.shaderSource(or,be),Nt.compileShader(or),Nt.attachShader(this.program,or);for(var nr=J?J.layoutAttributes:[],kr=0;kr<nr.length;kr++)Nt.bindAttribLocation(this.program,kr,nr[kr].name);Nt.linkProgram(this.program),Nt.deleteShader(or),Nt.deleteShader(Ze),this.numAttributes=Nt.getProgramParameter(this.program,Nt.ACTIVE_ATTRIBUTES),this.attributes={};for(var Er={},qr=0;qr<this.numAttributes;qr++){var Fr=Nt.getActiveAttrib(this.program,qr);Fr&&(this.attributes[Fr.name]=Nt.getAttribLocation(this.program,Fr.name))}for(var Rr=Nt.getProgramParameter(this.program,Nt.ACTIVE_UNIFORMS),Xr=0;Xr<Rr;Xr++){var on=Nt.getActiveUniform(this.program,Xr);on&&(Er[on.name]=Nt.getUniformLocation(this.program,on.name))}this.fixedUniforms=ct(H,Er),this.binderUniforms=J?J.getUniforms(H,Er):[]};Ns.prototype.draw=function(H,tt,J,ct,At,Nt,Qt,se,be,Ze,or,nr,kr,Er,qr,Fr){var Rr,Xr=H.gl;if(!this.failedToCreate){H.program.set(this.program),H.setDepthMode(J),H.setStencilMode(ct),H.setColorMode(At),H.setCullFace(Nt);for(var on in this.fixedUniforms)this.fixedUniforms[on].set(Qt[on]);Er&&Er.setUniforms(H,this.binderUniforms,nr,{zoom:kr});for(var Cn=(Rr={},Rr[Xr.LINES]=2,Rr[Xr.TRIANGLES]=3,Rr[Xr.LINE_STRIP]=1,Rr)[tt],En=0,Fn=or.get();En<Fn.length;En+=1){var Nn=Fn[En],jn=Nn.vaos||(Nn.vaos={}),ai=jn[se]||(jn[se]=new Ao);ai.bind(H,this,be,Er?Er.getPaintVertexBuffers():[],Ze,Nn.vertexOffset,qr,Fr),Xr.drawElements(tt,Nn.primitiveLength*Cn,Xr.UNSIGNED_SHORT,Nn.primitiveOffset*Cn*2)}}};function bs(H,tt,J){var ct=1/ln(J,1,tt.transform.tileZoom),At=Math.pow(2,J.tileID.overscaledZ),Nt=J.tileSize*Math.pow(2,tt.transform.tileZoom)/At,Qt=Nt*(J.tileID.canonical.x+J.tileID.wrap*At),se=Nt*J.tileID.canonical.y;return{u_image:0,u_texsize:J.imageAtlasTexture.size,u_scale:[ct,H.fromScale,H.toScale],u_fade:H.t,u_pixel_coord_upper:[Qt>>16,se>>16],u_pixel_coord_lower:[Qt&65535,se&65535]}}function iu(H,tt,J,ct){var At=J.imageManager.getPattern(H.from.toString()),Nt=J.imageManager.getPattern(H.to.toString()),Qt=J.imageManager.getPixelSize(),se=Qt.width,be=Qt.height,Ze=Math.pow(2,ct.tileID.overscaledZ),or=ct.tileSize*Math.pow(2,J.transform.tileZoom)/Ze,nr=or*(ct.tileID.canonical.x+ct.tileID.wrap*Ze),kr=or*ct.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:At.tl,u_pattern_br_a:At.br,u_pattern_tl_b:Nt.tl,u_pattern_br_b:Nt.br,u_texsize:[se,be],u_mix:tt.t,u_pattern_size_a:At.displaySize,u_pattern_size_b:Nt.displaySize,u_scale_a:tt.fromScale,u_scale_b:tt.toScale,u_tile_units_to_pixels:1/ln(ct,1,J.transform.tileZoom),u_pixel_coord_upper:[nr>>16,kr>>16],u_pixel_coord_lower:[nr&65535,kr&65535]}}var _a=function(H,tt){return{u_matrix:new i.UniformMatrix4f(H,tt.u_matrix),u_lightpos:new i.Uniform3f(H,tt.u_lightpos),u_lightintensity:new i.Uniform1f(H,tt.u_lightintensity),u_lightcolor:new i.Uniform3f(H,tt.u_lightcolor),u_vertical_gradient:new i.Uniform1f(H,tt.u_vertical_gradient),u_opacity:new i.Uniform1f(H,tt.u_opacity)}},$s=function(H,tt){return{u_matrix:new i.UniformMatrix4f(H,tt.u_matrix),u_lightpos:new i.Uniform3f(H,tt.u_lightpos),u_lightintensity:new i.Uniform1f(H,tt.u_lightintensity),u_lightcolor:new i.Uniform3f(H,tt.u_lightcolor),u_vertical_gradient:new i.Uniform1f(H,tt.u_vertical_gradient),u_height_factor:new i.Uniform1f(H,tt.u_height_factor),u_image:new i.Uniform1i(H,tt.u_image),u_texsize:new i.Uniform2f(H,tt.u_texsize),u_pixel_coord_upper:new i.Uniform2f(H,tt.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(H,tt.u_pixel_coord_lower),u_scale:new i.Uniform3f(H,tt.u_scale),u_fade:new i.Uniform1f(H,tt.u_fade),u_opacity:new i.Uniform1f(H,tt.u_opacity)}},$a=function(H,tt,J,ct){var At=tt.style.light,Nt=At.properties.get("position"),Qt=[Nt.x,Nt.y,Nt.z],se=i.create$1();At.properties.get("anchor")==="viewport"&&i.fromRotation(se,-tt.transform.angle),i.transformMat3(Qt,Qt,se);var be=At.properties.get("color");return{u_matrix:H,u_lightpos:Qt,u_lightintensity:At.properties.get("intensity"),u_lightcolor:[be.r,be.g,be.b],u_vertical_gradient:+J,u_opacity:ct}},Xo=function(H,tt,J,ct,At,Nt,Qt){return i.extend($a(H,tt,J,ct),bs(Nt,tt,Qt),{u_height_factor:-Math.pow(2,At.overscaledZ)/Qt.tileSize/8})},Ko=function(H,tt){return{u_matrix:new i.UniformMatrix4f(H,tt.u_matrix)}},os=function(H,tt){return{u_matrix:new i.UniformMatrix4f(H,tt.u_matrix),u_image:new i.Uniform1i(H,tt.u_image),u_texsize:new i.Uniform2f(H,tt.u_texsize),u_pixel_coord_upper:new i.Uniform2f(H,tt.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(H,tt.u_pixel_coord_lower),u_scale:new i.Uniform3f(H,tt.u_scale),u_fade:new i.Uniform1f(H,tt.u_fade)}},ss=function(H,tt){return{u_matrix:new i.UniformMatrix4f(H,tt.u_matrix),u_world:new i.Uniform2f(H,tt.u_world)}},ls=function(H,tt){return{u_matrix:new i.UniformMatrix4f(H,tt.u_matrix),u_world:new i.Uniform2f(H,tt.u_world),u_image:new i.Uniform1i(H,tt.u_image),u_texsize:new i.Uniform2f(H,tt.u_texsize),u_pixel_coord_upper:new i.Uniform2f(H,tt.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(H,tt.u_pixel_coord_lower),u_scale:new i.Uniform3f(H,tt.u_scale),u_fade:new i.Uniform1f(H,tt.u_fade)}},To=function(H){return{u_matrix:H}},Fo=function(H,tt,J,ct){return i.extend(To(H),bs(J,tt,ct))},tl=function(H,tt){return{u_matrix:H,u_world:tt}},el=function(H,tt,J,ct,At){return i.extend(Fo(H,tt,J,ct),{u_world:At})},Al=function(H,tt){return{u_camera_to_center_distance:new i.Uniform1f(H,tt.u_camera_to_center_distance),u_scale_with_map:new i.Uniform1i(H,tt.u_scale_with_map),u_pitch_with_map:new i.Uniform1i(H,tt.u_pitch_with_map),u_extrude_scale:new i.Uniform2f(H,tt.u_extrude_scale),u_device_pixel_ratio:new i.Uniform1f(H,tt.u_device_pixel_ratio),u_matrix:new i.UniformMatrix4f(H,tt.u_matrix)}},cc=function(H,tt,J,ct){var At=H.transform,Nt,Qt;if(ct.paint.get("circle-pitch-alignment")==="map"){var se=ln(J,1,At.zoom);Nt=!0,Qt=[se,se]}else Nt=!1,Qt=At.pixelsToGLUnits;return{u_camera_to_center_distance:At.cameraToCenterDistance,u_scale_with_map:+(ct.paint.get("circle-pitch-scale")==="map"),u_matrix:H.translatePosMatrix(tt.posMatrix,J,ct.paint.get("circle-translate"),ct.paint.get("circle-translate-anchor")),u_pitch_with_map:+Nt,u_device_pixel_ratio:i.browser.devicePixelRatio,u_extrude_scale:Qt}},fc=function(H,tt){return{u_matrix:new i.UniformMatrix4f(H,tt.u_matrix),u_camera_to_center_distance:new i.Uniform1f(H,tt.u_camera_to_center_distance),u_pixels_to_tile_units:new i.Uniform1f(H,tt.u_pixels_to_tile_units),u_extrude_scale:new i.Uniform2f(H,tt.u_extrude_scale),u_overscale_factor:new i.Uniform1f(H,tt.u_overscale_factor)}},hc=function(H,tt){return{u_matrix:new i.UniformMatrix4f(H,tt.u_matrix),u_inv_matrix:new i.UniformMatrix4f(H,tt.u_inv_matrix),u_camera_to_center_distance:new i.Uniform1f(H,tt.u_camera_to_center_distance),u_viewport_size:new i.Uniform2f(H,tt.u_viewport_size)}},pc=function(H,tt,J){var ct=ln(J,1,tt.zoom),At=Math.pow(2,tt.zoom-J.tileID.overscaledZ),Nt=J.tileID.overscaleFactor();return{u_matrix:H,u_camera_to_center_distance:tt.cameraToCenterDistance,u_pixels_to_tile_units:ct,u_extrude_scale:[tt.pixelsToGLUnits[0]/(ct*At),tt.pixelsToGLUnits[1]/(ct*At)],u_overscale_factor:Nt}},Tl=function(H,tt,J){return{u_matrix:H,u_inv_matrix:tt,u_camera_to_center_distance:J.cameraToCenterDistance,u_viewport_size:[J.width,J.height]}},Mu=function(H,tt){return{u_color:new i.UniformColor(H,tt.u_color),u_matrix:new i.UniformMatrix4f(H,tt.u_matrix),u_overlay:new i.Uniform1i(H,tt.u_overlay),u_overlay_scale:new i.Uniform1f(H,tt.u_overlay_scale)}},js=function(H,tt,J){return J===void 0&&(J=1),{u_matrix:H,u_color:tt,u_overlay:0,u_overlay_scale:J}},Da=function(H,tt){return{u_matrix:new i.UniformMatrix4f(H,tt.u_matrix)}},to=function(H){return{u_matrix:H}},rl=function(H,tt){return{u_extrude_scale:new i.Uniform1f(H,tt.u_extrude_scale),u_intensity:new i.Uniform1f(H,tt.u_intensity),u_matrix:new i.UniformMatrix4f(H,tt.u_matrix)}},_s=function(H,tt){return{u_matrix:new i.UniformMatrix4f(H,tt.u_matrix),u_world:new i.Uniform2f(H,tt.u_world),u_image:new i.Uniform1i(H,tt.u_image),u_color_ramp:new i.Uniform1i(H,tt.u_color_ramp),u_opacity:new i.Uniform1f(H,tt.u_opacity)}},nl=function(H,tt,J,ct){return{u_matrix:H,u_extrude_scale:ln(tt,1,J),u_intensity:ct}},kl=function(H,tt,J,ct){var At=i.create();i.ortho(At,0,H.width,H.height,0,0,1);var Nt=H.context.gl;return{u_matrix:At,u_world:[Nt.drawingBufferWidth,Nt.drawingBufferHeight],u_image:J,u_color_ramp:ct,u_opacity:tt.paint.get("heatmap-opacity")}},dc=function(H,tt){return{u_matrix:new i.UniformMatrix4f(H,tt.u_matrix),u_image:new i.Uniform1i(H,tt.u_image),u_latrange:new i.Uniform2f(H,tt.u_latrange),u_light:new i.Uniform2f(H,tt.u_light),u_shadow:new i.UniformColor(H,tt.u_shadow),u_highlight:new i.UniformColor(H,tt.u_highlight),u_accent:new i.UniformColor(H,tt.u_accent)}},Su=function(H,tt){return{u_matrix:new i.UniformMatrix4f(H,tt.u_matrix),u_image:new i.Uniform1i(H,tt.u_image),u_dimension:new i.Uniform2f(H,tt.u_dimension),u_zoom:new i.Uniform1f(H,tt.u_zoom),u_maxzoom:new i.Uniform1f(H,tt.u_maxzoom),u_unpack:new i.Uniform4f(H,tt.u_unpack)}},Lu=function(H,tt,J){var ct=J.paint.get("hillshade-shadow-color"),At=J.paint.get("hillshade-highlight-color"),Nt=J.paint.get("hillshade-accent-color"),Qt=J.paint.get("hillshade-illumination-direction")*(Math.PI/180);J.paint.get("hillshade-illumination-anchor")==="viewport"&&(Qt-=H.transform.angle);var se=!H.options.moving;return{u_matrix:H.transform.calculatePosMatrix(tt.tileID.toUnwrapped(),se),u_image:0,u_latrange:us(H,tt.tileID),u_light:[J.paint.get("hillshade-exaggeration"),Qt],u_shadow:ct,u_highlight:At,u_accent:Nt}},au=function(H,tt,J){var ct=tt.stride,At=i.create();return i.ortho(At,0,i.EXTENT,-i.EXTENT,0,0,1),i.translate(At,At,[0,-i.EXTENT,0]),{u_matrix:At,u_image:1,u_dimension:[ct,ct],u_zoom:H.overscaledZ,u_maxzoom:J,u_unpack:tt.getUnpackVector()}};function us(H,tt){var J=Math.pow(2,tt.canonical.z),ct=tt.canonical.y;return[new i.MercatorCoordinate(0,ct/J).toLngLat().lat,new i.MercatorCoordinate(0,(ct+1)/J).toLngLat().lat]}var wa=function(H,tt){return{u_matrix:new i.UniformMatrix4f(H,tt.u_matrix),u_ratio:new i.Uniform1f(H,tt.u_ratio),u_device_pixel_ratio:new i.Uniform1f(H,tt.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(H,tt.u_units_to_pixels)}},Ro=function(H,tt){return{u_matrix:new i.UniformMatrix4f(H,tt.u_matrix),u_ratio:new i.Uniform1f(H,tt.u_ratio),u_device_pixel_ratio:new i.Uniform1f(H,tt.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(H,tt.u_units_to_pixels),u_image:new i.Uniform1i(H,tt.u_image)}},ou=function(H,tt){return{u_matrix:new i.UniformMatrix4f(H,tt.u_matrix),u_texsize:new i.Uniform2f(H,tt.u_texsize),u_ratio:new i.Uniform1f(H,tt.u_ratio),u_device_pixel_ratio:new i.Uniform1f(H,tt.u_device_pixel_ratio),u_image:new i.Uniform1i(H,tt.u_image),u_units_to_pixels:new i.Uniform2f(H,tt.u_units_to_pixels),u_scale:new i.Uniform3f(H,tt.u_scale),u_fade:new i.Uniform1f(H,tt.u_fade)}},Pu=function(H,tt){return{u_matrix:new i.UniformMatrix4f(H,tt.u_matrix),u_ratio:new i.Uniform1f(H,tt.u_ratio),u_device_pixel_ratio:new i.Uniform1f(H,tt.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(H,tt.u_units_to_pixels),u_patternscale_a:new i.Uniform2f(H,tt.u_patternscale_a),u_patternscale_b:new i.Uniform2f(H,tt.u_patternscale_b),u_sdfgamma:new i.Uniform1f(H,tt.u_sdfgamma),u_image:new i.Uniform1i(H,tt.u_image),u_tex_y_a:new i.Uniform1f(H,tt.u_tex_y_a),u_tex_y_b:new i.Uniform1f(H,tt.u_tex_y_b),u_mix:new i.Uniform1f(H,tt.u_mix)}},ws=function(H,tt,J){var ct=H.transform;return{u_matrix:Qo(H,tt,J),u_ratio:1/ln(tt,1,ct.zoom),u_device_pixel_ratio:i.browser.devicePixelRatio,u_units_to_pixels:[1/ct.pixelsToGLUnits[0],1/ct.pixelsToGLUnits[1]]}},Ml=function(H,tt,J){return i.extend(ws(H,tt,J),{u_image:0})},ko=function(H,tt,J,ct){var At=H.transform,Nt=Jo(tt,At);return{u_matrix:Qo(H,tt,J),u_texsize:tt.imageAtlasTexture.size,u_ratio:1/ln(tt,1,At.zoom),u_device_pixel_ratio:i.browser.devicePixelRatio,u_image:0,u_scale:[Nt,ct.fromScale,ct.toScale],u_fade:ct.t,u_units_to_pixels:[1/At.pixelsToGLUnits[0],1/At.pixelsToGLUnits[1]]}},Sl=function(H,tt,J,ct,At){var Nt=H.transform,Qt=H.lineAtlas,se=Jo(tt,Nt),be=J.layout.get("line-cap")==="round",Ze=Qt.getDash(ct.from,be),or=Qt.getDash(ct.to,be),nr=Ze.width*At.fromScale,kr=or.width*At.toScale;return i.extend(ws(H,tt,J),{u_patternscale_a:[se/nr,-Ze.height/2],u_patternscale_b:[se/kr,-or.height/2],u_sdfgamma:Qt.width/(Math.min(nr,kr)*256*i.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ze.y,u_tex_y_b:or.y,u_mix:At.t})};function Jo(H,tt){return 1/ln(H,1,tt.tileZoom)}function Qo(H,tt,J){return H.translatePosMatrix(tt.tileID.posMatrix,tt,J.paint.get("line-translate"),J.paint.get("line-translate-anchor"))}var su=function(H,tt){return{u_matrix:new i.UniformMatrix4f(H,tt.u_matrix),u_tl_parent:new i.Uniform2f(H,tt.u_tl_parent),u_scale_parent:new i.Uniform1f(H,tt.u_scale_parent),u_buffer_scale:new i.Uniform1f(H,tt.u_buffer_scale),u_fade_t:new i.Uniform1f(H,tt.u_fade_t),u_opacity:new i.Uniform1f(H,tt.u_opacity),u_image0:new i.Uniform1i(H,tt.u_image0),u_image1:new i.Uniform1i(H,tt.u_image1),u_brightness_low:new i.Uniform1f(H,tt.u_brightness_low),u_brightness_high:new i.Uniform1f(H,tt.u_brightness_high),u_saturation_factor:new i.Uniform1f(H,tt.u_saturation_factor),u_contrast_factor:new i.Uniform1f(H,tt.u_contrast_factor),u_spin_weights:new i.Uniform3f(H,tt.u_spin_weights)}},Us=function(H,tt,J,ct,At){return{u_matrix:H,u_tl_parent:tt,u_scale_parent:J,u_buffer_scale:1,u_fade_t:ct.mix,u_opacity:ct.opacity*At.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:At.paint.get("raster-brightness-min"),u_brightness_high:At.paint.get("raster-brightness-max"),u_saturation_factor:Ll(At.paint.get("raster-saturation")),u_contrast_factor:As(At.paint.get("raster-contrast")),u_spin_weights:Yi(At.paint.get("raster-hue-rotate"))}};function Yi(H){H*=Math.PI/180;var tt=Math.sin(H),J=Math.cos(H);return[(2*J+1)/3,(-Math.sqrt(3)*tt-J+1)/3,(Math.sqrt(3)*tt-J+1)/3]}function As(H){return H>0?1/(1-H):1+H}function Ll(H){return H>0?1-1/(1.001-H):-H}var Pl=function(H,tt){return{u_is_size_zoom_constant:new i.Uniform1i(H,tt.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(H,tt.u_is_size_feature_constant),u_size_t:new i.Uniform1f(H,tt.u_size_t),u_size:new i.Uniform1f(H,tt.u_size),u_camera_to_center_distance:new i.Uniform1f(H,tt.u_camera_to_center_distance),u_pitch:new i.Uniform1f(H,tt.u_pitch),u_rotate_symbol:new i.Uniform1i(H,tt.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(H,tt.u_aspect_ratio),u_fade_change:new i.Uniform1f(H,tt.u_fade_change),u_matrix:new i.UniformMatrix4f(H,tt.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(H,tt.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(H,tt.u_coord_matrix),u_is_text:new i.Uniform1i(H,tt.u_is_text),u_pitch_with_map:new i.Uniform1i(H,tt.u_pitch_with_map),u_texsize:new i.Uniform2f(H,tt.u_texsize),u_texture:new i.Uniform1i(H,tt.u_texture)}},cs=function(H,tt){return{u_is_size_zoom_constant:new i.Uniform1i(H,tt.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(H,tt.u_is_size_feature_constant),u_size_t:new i.Uniform1f(H,tt.u_size_t),u_size:new i.Uniform1f(H,tt.u_size),u_camera_to_center_distance:new i.Uniform1f(H,tt.u_camera_to_center_distance),u_pitch:new i.Uniform1f(H,tt.u_pitch),u_rotate_symbol:new i.Uniform1i(H,tt.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(H,tt.u_aspect_ratio),u_fade_change:new i.Uniform1f(H,tt.u_fade_change),u_matrix:new i.UniformMatrix4f(H,tt.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(H,tt.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(H,tt.u_coord_matrix),u_is_text:new i.Uniform1i(H,tt.u_is_text),u_pitch_with_map:new i.Uniform1i(H,tt.u_pitch_with_map),u_texsize:new i.Uniform2f(H,tt.u_texsize),u_texture:new i.Uniform1i(H,tt.u_texture),u_gamma_scale:new i.Uniform1f(H,tt.u_gamma_scale),u_device_pixel_ratio:new i.Uniform1f(H,tt.u_device_pixel_ratio),u_is_halo:new i.Uniform1i(H,tt.u_is_halo)}},vc=function(H,tt){return{u_is_size_zoom_constant:new i.Uniform1i(H,tt.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(H,tt.u_is_size_feature_constant),u_size_t:new i.Uniform1f(H,tt.u_size_t),u_size:new i.Uniform1f(H,tt.u_size),u_camera_to_center_distance:new i.Uniform1f(H,tt.u_camera_to_center_distance),u_pitch:new i.Uniform1f(H,tt.u_pitch),u_rotate_symbol:new i.Uniform1i(H,tt.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(H,tt.u_aspect_ratio),u_fade_change:new i.Uniform1f(H,tt.u_fade_change),u_matrix:new i.UniformMatrix4f(H,tt.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(H,tt.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(H,tt.u_coord_matrix),u_is_text:new i.Uniform1i(H,tt.u_is_text),u_pitch_with_map:new i.Uniform1i(H,tt.u_pitch_with_map),u_texsize:new i.Uniform2f(H,tt.u_texsize),u_texsize_icon:new i.Uniform2f(H,tt.u_texsize_icon),u_texture:new i.Uniform1i(H,tt.u_texture),u_texture_icon:new i.Uniform1i(H,tt.u_texture_icon),u_gamma_scale:new i.Uniform1f(H,tt.u_gamma_scale),u_device_pixel_ratio:new i.Uniform1f(H,tt.u_device_pixel_ratio),u_is_halo:new i.Uniform1i(H,tt.u_is_halo)}},lu=function(H,tt,J,ct,At,Nt,Qt,se,be,Ze){var or=At.transform;return{u_is_size_zoom_constant:+(H==="constant"||H==="source"),u_is_size_feature_constant:+(H==="constant"||H==="camera"),u_size_t:tt?tt.uSizeT:0,u_size:tt?tt.uSize:0,u_camera_to_center_distance:or.cameraToCenterDistance,u_pitch:or.pitch/360*2*Math.PI,u_rotate_symbol:+J,u_aspect_ratio:or.width/or.height,u_fade_change:At.options.fadeDuration?At.symbolFadeChange:1,u_matrix:Nt,u_label_plane_matrix:Qt,u_coord_matrix:se,u_is_text:+be,u_pitch_with_map:+ct,u_texsize:Ze,u_texture:0}},Zs=function(H,tt,J,ct,At,Nt,Qt,se,be,Ze,or){var nr=At.transform;return i.extend(lu(H,tt,J,ct,At,Nt,Qt,se,be,Ze),{u_gamma_scale:ct?Math.cos(nr._pitch)*nr.cameraToCenterDistance:1,u_device_pixel_ratio:i.browser.devicePixelRatio,u_is_halo:+or})},uu=function(H,tt,J,ct,At,Nt,Qt,se,be,Ze){return i.extend(Zs(H,tt,J,ct,At,Nt,Qt,se,!0,be,!0),{u_texsize_icon:Ze,u_texture_icon:1})},Eu=function(H,tt){return{u_matrix:new i.UniformMatrix4f(H,tt.u_matrix),u_opacity:new i.Uniform1f(H,tt.u_opacity),u_color:new i.UniformColor(H,tt.u_color)}},$o=function(H,tt){return{u_matrix:new i.UniformMatrix4f(H,tt.u_matrix),u_opacity:new i.Uniform1f(H,tt.u_opacity),u_image:new i.Uniform1i(H,tt.u_image),u_pattern_tl_a:new i.Uniform2f(H,tt.u_pattern_tl_a),u_pattern_br_a:new i.Uniform2f(H,tt.u_pattern_br_a),u_pattern_tl_b:new i.Uniform2f(H,tt.u_pattern_tl_b),u_pattern_br_b:new i.Uniform2f(H,tt.u_pattern_br_b),u_texsize:new i.Uniform2f(H,tt.u_texsize),u_mix:new i.Uniform1f(H,tt.u_mix),u_pattern_size_a:new i.Uniform2f(H,tt.u_pattern_size_a),u_pattern_size_b:new i.Uniform2f(H,tt.u_pattern_size_b),u_scale_a:new i.Uniform1f(H,tt.u_scale_a),u_scale_b:new i.Uniform1f(H,tt.u_scale_b),u_pixel_coord_upper:new i.Uniform2f(H,tt.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(H,tt.u_pixel_coord_lower),u_tile_units_to_pixels:new i.Uniform1f(H,tt.u_tile_units_to_pixels)}},fs=function(H,tt,J){return{u_matrix:H,u_opacity:tt,u_color:J}},Ts=function(H,tt,J,ct,At,Nt){return i.extend(iu(ct,Nt,J,At),{u_matrix:H,u_opacity:tt})},ks={fillExtrusion:_a,fillExtrusionPattern:$s,fill:Ko,fillPattern:os,fillOutline:ss,fillOutlinePattern:ls,circle:Al,collisionBox:fc,collisionCircle:hc,debug:Mu,clippingMask:Da,heatmap:rl,heatmapTexture:_s,hillshade:dc,hillshadePrepare:Su,line:wa,lineGradient:Ro,linePattern:ou,lineSDF:Pu,raster:su,symbolIcon:Pl,symbolSDF:cs,symbolTextAndIcon:vc,background:Eu,backgroundPattern:$o},eo;function oo(H,tt,J,ct,At,Nt,Qt){for(var se=H.context,be=se.gl,Ze=H.useProgram("collisionBox"),or=[],nr=0,kr=0,Er=0;Er<ct.length;Er++){var qr=ct[Er],Fr=tt.getTile(qr),Rr=Fr.getBucket(J);if(Rr){var Xr=qr.posMatrix;(At[0]!==0||At[1]!==0)&&(Xr=H.translatePosMatrix(qr.posMatrix,Fr,At,Nt));var on=Qt?Rr.textCollisionBox:Rr.iconCollisionBox,Cn=Rr.collisionCircleArray;if(Cn.length>0){var En=i.create(),Fn=Xr;i.mul(En,Rr.placementInvProjMatrix,H.transform.glCoordMatrix),i.mul(En,En,Rr.placementViewportMatrix),or.push({circleArray:Cn,circleOffset:kr,transform:Fn,invTransform:En}),nr+=Cn.length/4,kr=nr}on&&Ze.draw(se,be.LINES,Sr.disabled,Re.disabled,H.colorModeForRenderPass(),Le.disabled,pc(Xr,H.transform,Fr),J.id,on.layoutVertexBuffer,on.indexBuffer,on.segments,null,H.transform.zoom,null,null,on.collisionVertexBuffer)}}if(!(!Qt||!or.length)){var Nn=H.useProgram("collisionCircle"),jn=new i.StructArrayLayout2f1f2i16;jn.resize(nr*4),jn._trim();for(var ai=0,ni=0,hi=or;ni<hi.length;ni+=1)for(var ti=hi[ni],fi=0;fi<ti.circleArray.length/4;fi++){var Ci=fi*4,Di=ti.circleArray[Ci+0],Mi=ti.circleArray[Ci+1],qi=ti.circleArray[Ci+2],Oi=ti.circleArray[Ci+3];jn.emplace(ai++,Di,Mi,qi,Oi,0),jn.emplace(ai++,Di,Mi,qi,Oi,1),jn.emplace(ai++,Di,Mi,qi,Oi,2),jn.emplace(ai++,Di,Mi,qi,Oi,3)}(!eo||eo.length<nr*2)&&(eo=Ms(nr));for(var Ii=se.createIndexBuffer(eo,!0),Ji=se.createVertexBuffer(jn,i.collisionCircleLayout.members,!0),ea=0,Fi=or;ea<Fi.length;ea+=1){var ca=Fi[ea],Ai=Tl(ca.transform,ca.invTransform,H.transform);Nn.draw(se,be.TRIANGLES,Sr.disabled,Re.disabled,H.colorModeForRenderPass(),Le.disabled,Ai,J.id,Ji,Ii,i.SegmentVector.simpleSegment(0,ca.circleOffset*2,ca.circleArray.length,ca.circleArray.length/2),null,H.transform.zoom,null,null,null)}Ji.destroy(),Ii.destroy()}}function Ms(H){var tt=H*2,J=new i.StructArrayLayout3ui6;J.resize(tt),J._trim();for(var ct=0;ct<tt;ct++){var At=ct*6;J.uint16[At+0]=ct*4+0,J.uint16[At+1]=ct*4+1,J.uint16[At+2]=ct*4+2,J.uint16[At+3]=ct*4+2,J.uint16[At+4]=ct*4+3,J.uint16[At+5]=ct*4+0}return J}var Cu=i.identity(new Float32Array(16));function qs(H,tt,J,ct,At){if(H.renderPass==="translucent"){var Nt=Re.disabled,Qt=H.colorModeForRenderPass(),se=J.layout.get("text-variable-anchor");se&&Ou(ct,H,J,tt,J.layout.get("text-rotation-alignment"),J.layout.get("text-pitch-alignment"),At),J.paint.get("icon-opacity").constantOr(1)!==0&&hs(H,tt,J,ct,!1,J.paint.get("icon-translate"),J.paint.get("icon-translate-anchor"),J.layout.get("icon-rotation-alignment"),J.layout.get("icon-pitch-alignment"),J.layout.get("icon-keep-upright"),Nt,Qt),J.paint.get("text-opacity").constantOr(1)!==0&&hs(H,tt,J,ct,!0,J.paint.get("text-translate"),J.paint.get("text-translate-anchor"),J.layout.get("text-rotation-alignment"),J.layout.get("text-pitch-alignment"),J.layout.get("text-keep-upright"),Nt,Qt),tt.map.showCollisionBoxes&&(oo(H,tt,J,ct,J.paint.get("text-translate"),J.paint.get("text-translate-anchor"),!0),oo(H,tt,J,ct,J.paint.get("icon-translate"),J.paint.get("icon-translate-anchor"),!1))}}function El(H,tt,J,ct,At,Nt){var Qt=i.getAnchorAlignment(H),se=Qt.horizontalAlign,be=Qt.verticalAlign,Ze=-(se-.5)*tt,or=-(be-.5)*J,nr=i.evaluateVariableOffset(H,ct);return new i.Point((Ze/At+nr[0])*Nt,(or/At+nr[1])*Nt)}function Ou(H,tt,J,ct,At,Nt,Qt){for(var se=tt.transform,be=At==="map",Ze=Nt==="map",or=0,nr=H;or<nr.length;or+=1){var kr=nr[or],Er=ct.getTile(kr),qr=Er.getBucket(J);if(!(!qr||!qr.text||!qr.text.segments.get().length)){var Fr=qr.textSizeData,Rr=i.evaluateSizeForZoom(Fr,se.zoom),Xr=ln(Er,1,tt.transform.zoom),on=dr(kr.posMatrix,Ze,be,tt.transform,Xr),Cn=J.layout.get("icon-text-fit")!=="none"&&qr.hasIconData();if(Rr){var En=Math.pow(2,se.zoom-Er.tileID.overscaledZ);Mo(qr,be,Ze,Qt,i.symbolSize,se,on,kr.posMatrix,En,Rr,Cn)}}}}function Mo(H,tt,J,ct,At,Nt,Qt,se,be,Ze,or){var nr=H.text.placedSymbolArray,kr=H.text.dynamicLayoutVertexArray,Er=H.icon.dynamicLayoutVertexArray,qr={};kr.clear();for(var Fr=0;Fr<nr.length;Fr++){var Rr=nr.get(Fr),Xr=H.allowVerticalPlacement&&!Rr.placedOrientation,on=!Rr.hidden&&Rr.crossTileID&&!Xr?ct[Rr.crossTileID]:null;if(!on)Hn(Rr.numGlyphs,kr);else{var Cn=new i.Point(Rr.anchorX,Rr.anchorY),En=Cr(Cn,J?se:Qt),Fn=Hr(Nt.cameraToCenterDistance,En.signedDistanceFromCamera),Nn=At.evaluateSizeForFeature(H.textSizeData,Ze,Rr)*Fn/i.ONE_EM;J&&(Nn*=H.tilePixelRatio/be);for(var jn=on.width,ai=on.height,ni=on.anchor,hi=on.textOffset,ti=on.textBoxScale,fi=El(ni,jn,ai,hi,ti,Nn),Ci=J?Cr(Cn.add(fi),Qt).point:En.point.add(tt?fi.rotate(-Nt.angle):fi),Di=H.allowVerticalPlacement&&Rr.placedOrientation===i.WritingMode.vertical?Math.PI/2:0,Mi=0;Mi<Rr.numGlyphs;Mi++)i.addDynamicAttributes(kr,Ci,Di);or&&Rr.associatedIconIndex>=0&&(qr[Rr.associatedIconIndex]={shiftedAnchor:Ci,angle:Di})}}if(or){Er.clear();for(var qi=H.icon.placedSymbolArray,Oi=0;Oi<qi.length;Oi++){var Ii=qi.get(Oi);if(Ii.hidden)Hn(Ii.numGlyphs,Er);else{var Ji=qr[Oi];if(!Ji)Hn(Ii.numGlyphs,Er);else for(var ea=0;ea<Ii.numGlyphs;ea++)i.addDynamicAttributes(Er,Ji.shiftedAnchor,Ji.angle)}}H.icon.dynamicLayoutVertexBuffer.updateData(Er)}H.text.dynamicLayoutVertexBuffer.updateData(kr)}function cu(H,tt,J){return J.iconsInText&&tt?"symbolTextAndIcon":H?"symbolSDF":"symbolIcon"}function hs(H,tt,J,ct,At,Nt,Qt,se,be,Ze,or,nr){for(var kr=H.context,Er=kr.gl,qr=H.transform,Fr=se==="map",Rr=be==="map",Xr=Fr&&J.layout.get("symbol-placement")!=="point",on=Fr&&!Rr&&!Xr,Cn=J.layout.get("symbol-sort-key").constantOr(1)!==void 0,En=H.depthModeForSublayer(0,Sr.ReadOnly),Fn=J.layout.get("text-variable-anchor"),Nn=[],jn=0,ai=ct;jn<ai.length;jn+=1){var ni=ai[jn],hi=tt.getTile(ni),ti=hi.getBucket(J);if(ti){var fi=At?ti.text:ti.icon;if(!(!fi||!fi.segments.get().length)){var Ci=fi.programConfigurations.get(J.id),Di=At||ti.sdfIcons,Mi=At?ti.textSizeData:ti.iconSizeData,qi=Rr||qr.pitch!==0,Oi=H.useProgram(cu(Di,At,ti),Ci),Ii=i.evaluateSizeForZoom(Mi,qr.zoom),Ji=void 0,ea=[0,0],Fi=void 0,ca=void 0,Ai=null,Ni=void 0;if(At){if(Fi=hi.glyphAtlasTexture,ca=Er.LINEAR,Ji=hi.glyphAtlasTexture.size,ti.iconsInText){ea=hi.imageAtlasTexture.size,Ai=hi.imageAtlasTexture;var Sa=Mi.kind==="composite"||Mi.kind==="camera";Ni=qi||H.options.rotating||H.options.zooming||Sa?Er.LINEAR:Er.NEAREST}}else{var Fa=J.layout.get("icon-size").constantOr(0)!==1||ti.iconsNeedLinear;Fi=hi.imageAtlasTexture,ca=Di||H.options.rotating||H.options.zooming||Fa||qi?Er.LINEAR:Er.NEAREST,Ji=hi.imageAtlasTexture.size}var ds=ln(hi,1,H.transform.zoom),Vs=dr(ni.posMatrix,Rr,Fr,H.transform,ds),es=Lr(ni.posMatrix,Rr,Fr,H.transform,ds),Nl=Fn&&ti.hasTextData(),jl=J.layout.get("icon-text-fit")!=="none"&&Nl&&ti.hasIconData();Xr&&Yr(ti,ni.posMatrix,H,At,Vs,es,Rr,Ze);var lo=H.translatePosMatrix(ni.posMatrix,hi,Nt,Qt),rs=Xr||At&&Fn||jl?Cu:Vs,go=H.translatePosMatrix(es,hi,Nt,Qt,!0),Zu=Di&&J.paint.get(At?"text-halo-width":"icon-halo-width").constantOr(1)!==0,fl=void 0;Di?ti.iconsInText?fl=uu(Mi.kind,Ii,on,Rr,H,lo,rs,go,Ji,ea):fl=Zs(Mi.kind,Ii,on,Rr,H,lo,rs,go,At,Ji,!0):fl=lu(Mi.kind,Ii,on,Rr,H,lo,rs,go,At,Ji);var Ps={program:Oi,buffers:fi,uniformValues:fl,atlasTexture:Fi,atlasTextureIcon:Ai,atlasInterpolation:ca,atlasInterpolationIcon:Ni,isSDF:Di,hasHalo:Zu};if(Cn)for(var Es=fi.segments.get(),Lo=0,Oc=Es;Lo<Oc.length;Lo+=1){var Ic=Oc[Lo];Nn.push({segments:new i.SegmentVector([Ic]),sortKey:Ic.sortKey,state:Ps})}else Nn.push({segments:fi.segments,sortKey:0,state:Ps})}}}Cn&&Nn.sort(function(zc,Dc){return zc.sortKey-Dc.sortKey});for(var qu=0,uo=Nn;qu<uo.length;qu+=1){var _c=uo[qu],mo=_c.state;if(kr.activeTexture.set(Er.TEXTURE0),mo.atlasTexture.bind(mo.atlasInterpolation,Er.CLAMP_TO_EDGE),mo.atlasTextureIcon&&(kr.activeTexture.set(Er.TEXTURE1),mo.atlasTextureIcon&&mo.atlasTextureIcon.bind(mo.atlasInterpolationIcon,Er.CLAMP_TO_EDGE)),mo.isSDF){var Vu=mo.uniformValues;mo.hasHalo&&(Vu.u_is_halo=1,il(mo.buffers,_c.segments,J,H,mo.program,En,or,nr,Vu)),Vu.u_is_halo=0}il(mo.buffers,_c.segments,J,H,mo.program,En,or,nr,mo.uniformValues)}}function il(H,tt,J,ct,At,Nt,Qt,se,be){var Ze=ct.context,or=Ze.gl;At.draw(Ze,or.TRIANGLES,Nt,Qt,se,Le.disabled,be,J.id,H.layoutVertexBuffer,H.indexBuffer,tt,J.paint,ct.transform.zoom,H.programConfigurations.get(J.id),H.dynamicLayoutVertexBuffer,H.opacityVertexBuffer)}function ts(H,tt,J,ct){if(H.renderPass==="translucent"){var At=J.paint.get("circle-opacity"),Nt=J.paint.get("circle-stroke-width"),Qt=J.paint.get("circle-stroke-opacity"),se=J.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(At.constantOr(1)===0&&(Nt.constantOr(1)===0||Qt.constantOr(1)===0))){for(var be=H.context,Ze=be.gl,or=H.depthModeForSublayer(0,Sr.ReadOnly),nr=Re.disabled,kr=H.colorModeForRenderPass(),Er=[],qr=0;qr<ct.length;qr++){var Fr=ct[qr],Rr=tt.getTile(Fr),Xr=Rr.getBucket(J);if(Xr){var on=Xr.programConfigurations.get(J.id),Cn=H.useProgram("circle",on),En=Xr.layoutVertexBuffer,Fn=Xr.indexBuffer,Nn=cc(H,Fr,Rr,J),jn={programConfiguration:on,program:Cn,layoutVertexBuffer:En,indexBuffer:Fn,uniformValues:Nn};if(se)for(var ai=Xr.segments.get(),ni=0,hi=ai;ni<hi.length;ni+=1){var ti=hi[ni];Er.push({segments:new i.SegmentVector([ti]),sortKey:ti.sortKey,state:jn})}else Er.push({segments:Xr.segments,sortKey:0,state:jn})}}se&&Er.sort(function(ca,Ai){return ca.sortKey-Ai.sortKey});for(var fi=0,Ci=Er;fi<Ci.length;fi+=1){var Di=Ci[fi],Mi=Di.state,qi=Mi.programConfiguration,Oi=Mi.program,Ii=Mi.layoutVertexBuffer,Ji=Mi.indexBuffer,ea=Mi.uniformValues,Fi=Di.segments;Oi.draw(be,Ze.TRIANGLES,or,nr,kr,Le.disabled,ea,J.id,Ii,Ji,Fi,J.paint,H.transform.zoom,qi)}}}}function gc(H,tt,J,ct){if(J.paint.get("heatmap-opacity")!==0)if(H.renderPass==="offscreen"){var At=H.context,Nt=At.gl,Qt=Re.disabled,se=new re([Nt.ONE,Nt.ONE],i.Color.transparent,[!0,!0,!0,!0]);fu(At,H,J),At.clear({color:i.Color.transparent});for(var be=0;be<ct.length;be++){var Ze=ct[be];if(!tt.hasRenderableParent(Ze)){var or=tt.getTile(Ze),nr=or.getBucket(J);if(nr){var kr=nr.programConfigurations.get(J.id),Er=H.useProgram("heatmap",kr),qr=H.transform,Fr=qr.zoom;Er.draw(At,Nt.TRIANGLES,Sr.disabled,Qt,se,Le.disabled,nl(Ze.posMatrix,or,Fr,J.paint.get("heatmap-intensity")),J.id,nr.layoutVertexBuffer,nr.indexBuffer,nr.segments,J.paint,H.transform.zoom,kr)}}}At.viewport.set([0,0,H.width,H.height])}else H.renderPass==="translucent"&&(H.context.setColorMode(H.colorModeForRenderPass()),Va(H,J))}function fu(H,tt,J){var ct=H.gl;H.activeTexture.set(ct.TEXTURE1),H.viewport.set([0,0,tt.width/4,tt.height/4]);var At=J.heatmapFbo;if(At)ct.bindTexture(ct.TEXTURE_2D,At.colorAttachment.get()),H.bindFramebuffer.set(At.framebuffer);else{var Nt=ct.createTexture();ct.bindTexture(ct.TEXTURE_2D,Nt),ct.texParameteri(ct.TEXTURE_2D,ct.TEXTURE_WRAP_S,ct.CLAMP_TO_EDGE),ct.texParameteri(ct.TEXTURE_2D,ct.TEXTURE_WRAP_T,ct.CLAMP_TO_EDGE),ct.texParameteri(ct.TEXTURE_2D,ct.TEXTURE_MIN_FILTER,ct.LINEAR),ct.texParameteri(ct.TEXTURE_2D,ct.TEXTURE_MAG_FILTER,ct.LINEAR),At=J.heatmapFbo=H.createFramebuffer(tt.width/4,tt.height/4,!1),Cl(H,tt,Nt,At)}}function Cl(H,tt,J,ct){var At=H.gl,Nt=H.extRenderToTextureHalfFloat?H.extTextureHalfFloat.HALF_FLOAT_OES:At.UNSIGNED_BYTE;At.texImage2D(At.TEXTURE_2D,0,At.RGBA,tt.width/4,tt.height/4,0,At.RGBA,Nt,null),ct.colorAttachment.set(J)}function Va(H,tt){var J=H.context,ct=J.gl,At=tt.heatmapFbo;if(At){J.activeTexture.set(ct.TEXTURE0),ct.bindTexture(ct.TEXTURE_2D,At.colorAttachment.get()),J.activeTexture.set(ct.TEXTURE1);var Nt=tt.colorRampTexture;Nt||(Nt=tt.colorRampTexture=new i.Texture(J,tt.colorRamp,ct.RGBA)),Nt.bind(ct.LINEAR,ct.CLAMP_TO_EDGE),H.useProgram("heatmapTexture").draw(J,ct.TRIANGLES,Sr.disabled,Re.disabled,H.colorModeForRenderPass(),Le.disabled,kl(H,tt,0,1),tt.id,H.viewportBuffer,H.quadTriangleIndexBuffer,H.viewportSegments,tt.paint,H.transform.zoom)}}function Iu(H,tt,J,ct){if(H.renderPass==="translucent"){var At=J.paint.get("line-opacity"),Nt=J.paint.get("line-width");if(!(At.constantOr(1)===0||Nt.constantOr(1)===0)){var Qt=H.depthModeForSublayer(0,Sr.ReadOnly),se=H.colorModeForRenderPass(),be=J.paint.get("line-dasharray"),Ze=J.paint.get("line-pattern"),or=Ze.constantOr(1),nr=J.paint.get("line-gradient"),kr=J.getCrossfadeParameters(),Er=or?"linePattern":be?"lineSDF":nr?"lineGradient":"line",qr=H.context,Fr=qr.gl,Rr=!0;if(nr){qr.activeTexture.set(Fr.TEXTURE0);var Xr=J.gradientTexture;if(!J.gradient)return;Xr||(Xr=J.gradientTexture=new i.Texture(qr,J.gradient,Fr.RGBA)),Xr.bind(Fr.LINEAR,Fr.CLAMP_TO_EDGE)}for(var on=0,Cn=ct;on<Cn.length;on+=1){var En=Cn[on],Fn=tt.getTile(En);if(!(or&&!Fn.patternsLoaded())){var Nn=Fn.getBucket(J);if(Nn){var jn=Nn.programConfigurations.get(J.id),ai=H.context.program.get(),ni=H.useProgram(Er,jn),hi=Rr||ni.program!==ai,ti=Ze.constantOr(null);if(ti&&Fn.imageAtlas){var fi=Fn.imageAtlas,Ci=fi.patternPositions[ti.to.toString()],Di=fi.patternPositions[ti.from.toString()];Ci&&Di&&jn.setConstantPatternPositions(Ci,Di)}var Mi=or?ko(H,Fn,J,kr):be?Sl(H,Fn,J,be,kr):nr?Ml(H,Fn,J):ws(H,Fn,J);or?(qr.activeTexture.set(Fr.TEXTURE0),Fn.imageAtlasTexture.bind(Fr.LINEAR,Fr.CLAMP_TO_EDGE),jn.updatePaintBuffers(kr)):be&&(hi||H.lineAtlas.dirty)&&(qr.activeTexture.set(Fr.TEXTURE0),H.lineAtlas.bind(qr)),ni.draw(qr,Fr.TRIANGLES,Qt,H.stencilModeForClipping(En),se,Le.disabled,Mi,J.id,Nn.layoutVertexBuffer,Nn.indexBuffer,Nn.segments,J.paint,H.transform.zoom,jn),Rr=!1}}}}}}function al(H,tt,J,ct){var At=J.paint.get("fill-color"),Nt=J.paint.get("fill-opacity");if(Nt.constantOr(1)!==0){var Qt=H.colorModeForRenderPass(),se=J.paint.get("fill-pattern"),be=H.opaquePassEnabledForLayer()&&!se.constantOr(1)&&At.constantOr(i.Color.transparent).a===1&&Nt.constantOr(0)===1?"opaque":"translucent";if(H.renderPass===be){var Ze=H.depthModeForSublayer(1,H.renderPass==="opaque"?Sr.ReadWrite:Sr.ReadOnly);Bo(H,tt,J,ct,Ze,Qt,!1)}if(H.renderPass==="translucent"&&J.paint.get("fill-antialias")){var or=H.depthModeForSublayer(J.getPaintProperty("fill-outline-color")?2:0,Sr.ReadOnly);Bo(H,tt,J,ct,or,Qt,!0)}}}function Bo(H,tt,J,ct,At,Nt,Qt){var se=H.context.gl,be=J.paint.get("fill-pattern"),Ze=be&&be.constantOr(1),or=J.getCrossfadeParameters(),nr,kr,Er,qr,Fr;Qt?(kr=Ze&&!J.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",nr=se.LINES):(kr=Ze?"fillPattern":"fill",nr=se.TRIANGLES);for(var Rr=0,Xr=ct;Rr<Xr.length;Rr+=1){var on=Xr[Rr],Cn=tt.getTile(on);if(!(Ze&&!Cn.patternsLoaded())){var En=Cn.getBucket(J);if(En){var Fn=En.programConfigurations.get(J.id),Nn=H.useProgram(kr,Fn);Ze&&(H.context.activeTexture.set(se.TEXTURE0),Cn.imageAtlasTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE),Fn.updatePaintBuffers(or));var jn=be.constantOr(null);if(jn&&Cn.imageAtlas){var ai=Cn.imageAtlas,ni=ai.patternPositions[jn.to.toString()],hi=ai.patternPositions[jn.from.toString()];ni&&hi&&Fn.setConstantPatternPositions(ni,hi)}var ti=H.translatePosMatrix(on.posMatrix,Cn,J.paint.get("fill-translate"),J.paint.get("fill-translate-anchor"));if(!Qt)qr=En.indexBuffer,Fr=En.segments,Er=Ze?Fo(ti,H,or,Cn):To(ti);else{qr=En.indexBuffer2,Fr=En.segments2;var fi=[se.drawingBufferWidth,se.drawingBufferHeight];Er=kr==="fillOutlinePattern"&&Ze?el(ti,H,or,Cn,fi):tl(ti,fi)}Nn.draw(H.context,nr,At,H.stencilModeForClipping(on),Nt,Le.disabled,Er,J.id,En.layoutVertexBuffer,qr,Fr,J.paint,H.transform.zoom,Fn)}}}}function ol(H,tt,J,ct){var At=J.paint.get("fill-extrusion-opacity");if(At!==0&&H.renderPass==="translucent"){var Nt=new Sr(H.context.gl.LEQUAL,Sr.ReadWrite,H.depthRangeFor3D);if(At===1&&!J.paint.get("fill-extrusion-pattern").constantOr(1)){var Qt=H.colorModeForRenderPass();ps(H,tt,J,ct,Nt,Re.disabled,Qt)}else ps(H,tt,J,ct,Nt,Re.disabled,re.disabled),ps(H,tt,J,ct,Nt,H.stencilModeFor3D(),H.colorModeForRenderPass())}}function ps(H,tt,J,ct,At,Nt,Qt){for(var se=H.context,be=se.gl,Ze=J.paint.get("fill-extrusion-pattern"),or=Ze.constantOr(1),nr=J.getCrossfadeParameters(),kr=J.paint.get("fill-extrusion-opacity"),Er=0,qr=ct;Er<qr.length;Er+=1){var Fr=qr[Er],Rr=tt.getTile(Fr),Xr=Rr.getBucket(J);if(Xr){var on=Xr.programConfigurations.get(J.id),Cn=H.useProgram(or?"fillExtrusionPattern":"fillExtrusion",on);or&&(H.context.activeTexture.set(be.TEXTURE0),Rr.imageAtlasTexture.bind(be.LINEAR,be.CLAMP_TO_EDGE),on.updatePaintBuffers(nr));var En=Ze.constantOr(null);if(En&&Rr.imageAtlas){var Fn=Rr.imageAtlas,Nn=Fn.patternPositions[En.to.toString()],jn=Fn.patternPositions[En.from.toString()];Nn&&jn&&on.setConstantPatternPositions(Nn,jn)}var ai=H.translatePosMatrix(Fr.posMatrix,Rr,J.paint.get("fill-extrusion-translate"),J.paint.get("fill-extrusion-translate-anchor")),ni=J.paint.get("fill-extrusion-vertical-gradient"),hi=or?Xo(ai,H,ni,kr,Fr,nr,Rr):$a(ai,H,ni,kr);Cn.draw(se,se.gl.TRIANGLES,At,Nt,Qt,Le.backCCW,hi,J.id,Xr.layoutVertexBuffer,Xr.indexBuffer,Xr.segments,J.paint,H.transform.zoom,on)}}}function Ol(H,tt,J,ct){if(!(H.renderPass!=="offscreen"&&H.renderPass!=="translucent")){for(var At=H.context,Nt=tt.getSource().maxzoom,Qt=H.depthModeForSublayer(0,Sr.ReadOnly),se=H.colorModeForRenderPass(),be=H.renderPass==="translucent"?H.stencilConfigForOverlap(ct):[{},ct],Ze=be[0],or=be[1],nr=0,kr=or;nr<kr.length;nr+=1){var Er=kr[nr],qr=tt.getTile(Er);qr.needsHillshadePrepare&&H.renderPass==="offscreen"?hu(H,qr,J,Nt,Qt,Re.disabled,se):H.renderPass==="translucent"&&zu(H,qr,J,Qt,Ze[Er.overscaledZ],se)}At.viewport.set([0,0,H.width,H.height])}}function zu(H,tt,J,ct,At,Nt){var Qt=H.context,se=Qt.gl,be=tt.fbo;if(be){var Ze=H.useProgram("hillshade");Qt.activeTexture.set(se.TEXTURE0),se.bindTexture(se.TEXTURE_2D,be.colorAttachment.get());var or=Lu(H,tt,J);Ze.draw(Qt,se.TRIANGLES,ct,At,Nt,Le.disabled,or,J.id,H.rasterBoundsBuffer,H.quadTriangleIndexBuffer,H.rasterBoundsSegments)}}function hu(H,tt,J,ct,At,Nt,Qt){var se=H.context,be=se.gl,Ze=tt.dem;if(Ze&&Ze.data){var or=Ze.dim,nr=Ze.stride,kr=Ze.getPixels();if(se.activeTexture.set(be.TEXTURE1),se.pixelStoreUnpackPremultiplyAlpha.set(!1),tt.demTexture=tt.demTexture||H.getTileTexture(nr),tt.demTexture){var Er=tt.demTexture;Er.update(kr,{premultiply:!1}),Er.bind(be.NEAREST,be.CLAMP_TO_EDGE)}else tt.demTexture=new i.Texture(se,kr,be.RGBA,{premultiply:!1}),tt.demTexture.bind(be.NEAREST,be.CLAMP_TO_EDGE);se.activeTexture.set(be.TEXTURE0);var qr=tt.fbo;if(!qr){var Fr=new i.Texture(se,{width:or,height:or,data:null},be.RGBA);Fr.bind(be.LINEAR,be.CLAMP_TO_EDGE),qr=tt.fbo=se.createFramebuffer(or,or,!0),qr.colorAttachment.set(Fr.texture)}se.bindFramebuffer.set(qr.framebuffer),se.viewport.set([0,0,or,or]),H.useProgram("hillshadePrepare").draw(se,be.TRIANGLES,At,Nt,Qt,Le.disabled,au(tt.tileID,Ze,ct),J.id,H.rasterBoundsBuffer,H.quadTriangleIndexBuffer,H.rasterBoundsSegments),tt.needsHillshadePrepare=!1}}function pu(H,tt,J,ct){if(H.renderPass==="translucent"&&J.paint.get("raster-opacity")!==0&&ct.length)for(var At=H.context,Nt=At.gl,Qt=tt.getSource(),se=H.useProgram("raster"),be=H.colorModeForRenderPass(),Ze=Qt instanceof K?[{},ct]:H.stencilConfigForOverlap(ct),or=Ze[0],nr=Ze[1],kr=nr[nr.length-1].overscaledZ,Er=!H.options.moving,qr=0,Fr=nr;qr<Fr.length;qr+=1){var Rr=Fr[qr],Xr=H.depthModeForSublayer(Rr.overscaledZ-kr,J.paint.get("raster-opacity")===1?Sr.ReadWrite:Sr.ReadOnly,Nt.LESS),on=tt.getTile(Rr),Cn=H.transform.calculatePosMatrix(Rr.toUnwrapped(),Er);on.registerFadeDuration(J.paint.get("raster-fade-duration"));var En=tt.findLoadedParent(Rr,0),Fn=Ss(on,En,tt,J,H.transform),Nn=void 0,jn=void 0,ai=J.paint.get("raster-resampling")==="nearest"?Nt.NEAREST:Nt.LINEAR;At.activeTexture.set(Nt.TEXTURE0),on.texture.bind(ai,Nt.CLAMP_TO_EDGE,Nt.LINEAR_MIPMAP_NEAREST),At.activeTexture.set(Nt.TEXTURE1),En?(En.texture.bind(ai,Nt.CLAMP_TO_EDGE,Nt.LINEAR_MIPMAP_NEAREST),Nn=Math.pow(2,En.tileID.overscaledZ-on.tileID.overscaledZ),jn=[on.tileID.canonical.x*Nn%1,on.tileID.canonical.y*Nn%1]):on.texture.bind(ai,Nt.CLAMP_TO_EDGE,Nt.LINEAR_MIPMAP_NEAREST);var ni=Us(Cn,jn||[0,0],Nn||1,Fn,J);Qt instanceof K?se.draw(At,Nt.TRIANGLES,Xr,Re.disabled,be,Le.disabled,ni,J.id,Qt.boundsBuffer,H.quadTriangleIndexBuffer,Qt.boundsSegments):se.draw(At,Nt.TRIANGLES,Xr,or[Rr.overscaledZ],be,Le.disabled,ni,J.id,H.rasterBoundsBuffer,H.quadTriangleIndexBuffer,H.rasterBoundsSegments)}}function Ss(H,tt,J,ct,At){var Nt=ct.paint.get("raster-fade-duration");if(Nt>0){var Qt=i.browser.now(),se=(Qt-H.timeAdded)/Nt,be=tt?(Qt-tt.timeAdded)/Nt:-1,Ze=J.getSource(),or=At.coveringZoomLevel({tileSize:Ze.tileSize,roundZoom:Ze.roundZoom}),nr=!tt||Math.abs(tt.tileID.overscaledZ-or)>Math.abs(H.tileID.overscaledZ-or),kr=nr&&H.refreshedUponExpiration?1:i.clamp(nr?se:1-be,0,1);return H.refreshedUponExpiration&&se>=1&&(H.refreshedUponExpiration=!1),tt?{opacity:1,mix:1-kr}:{opacity:kr,mix:0}}else return{opacity:1,mix:0}}function Il(H,tt,J){var ct=J.paint.get("background-color"),At=J.paint.get("background-opacity");if(At!==0){var Nt=H.context,Qt=Nt.gl,se=H.transform,be=se.tileSize,Ze=J.paint.get("background-pattern");if(!H.isPatternMissing(Ze)){var or=!Ze&&ct.a===1&&At===1&&H.opaquePassEnabledForLayer()?"opaque":"translucent";if(H.renderPass===or){var nr=Re.disabled,kr=H.depthModeForSublayer(0,or==="opaque"?Sr.ReadWrite:Sr.ReadOnly),Er=H.colorModeForRenderPass(),qr=H.useProgram(Ze?"backgroundPattern":"background"),Fr=se.coveringTiles({tileSize:be});Ze&&(Nt.activeTexture.set(Qt.TEXTURE0),H.imageManager.bind(H.context));for(var Rr=J.getCrossfadeParameters(),Xr=0,on=Fr;Xr<on.length;Xr+=1){var Cn=on[Xr],En=H.transform.calculatePosMatrix(Cn.toUnwrapped()),Fn=Ze?Ts(En,At,H,Ze,{tileID:Cn,tileSize:be},Rr):fs(En,At,ct);qr.draw(Nt,Qt.TRIANGLES,kr,nr,Er,Le.disabled,Fn,J.id,H.tileExtentBuffer,H.quadTriangleIndexBuffer,H.tileExtentSegments)}}}}}var sl=new i.Color(1,0,0,1),Du=new i.Color(0,1,0,1),ll=new i.Color(0,0,1,1),Fu=new i.Color(1,0,1,1),Zt=new i.Color(0,1,1,1);function Yt(H){var tt=H.transform.padding,J=3;ue(H,H.transform.height-(tt.top||0),J,sl),ue(H,tt.bottom||0,J,Du),ke(H,tt.left||0,J,ll),ke(H,H.transform.width-(tt.right||0),J,Fu);var ct=H.transform.centerPoint;ie(H,ct.x,H.transform.height-ct.y,Zt)}function ie(H,tt,J,ct){var At=20,Nt=2;xe(H,tt-Nt/2,J-At/2,Nt,At,ct),xe(H,tt-At/2,J-Nt/2,At,Nt,ct)}function ue(H,tt,J,ct){xe(H,0,tt+J/2,H.transform.width,J,ct)}function ke(H,tt,J,ct){xe(H,tt-J/2,0,J,H.transform.height,ct)}function xe(H,tt,J,ct,At,Nt){var Qt=H.context,se=Qt.gl;se.enable(se.SCISSOR_TEST),se.scissor(tt*i.browser.devicePixelRatio,J*i.browser.devicePixelRatio,ct*i.browser.devicePixelRatio,At*i.browser.devicePixelRatio),Qt.clear({color:Nt}),se.disable(se.SCISSOR_TEST)}function Pe(H,tt,J){for(var ct=0;ct<J.length;ct++)rr(H,tt,J[ct])}function rr(H,tt,J){var ct=H.context,At=ct.gl,Nt=J.posMatrix,Qt=H.useProgram("debug"),se=Sr.disabled,be=Re.disabled,Ze=H.colorModeForRenderPass(),or="$debug";ct.activeTexture.set(At.TEXTURE0),H.emptyTexture.bind(At.LINEAR,At.CLAMP_TO_EDGE),Qt.draw(ct,At.LINE_STRIP,se,be,Ze,Le.disabled,js(Nt,i.Color.red),or,H.debugBuffer,H.tileBorderIndexBuffer,H.debugSegments);var nr=tt.getTileByID(J.key).latestRawTileData,kr=nr&&nr.byteLength||0,Er=Math.floor(kr/1024),qr=tt.getTile(J).tileSize,Fr=512/Math.min(qr,512)*(J.overscaledZ/H.transform.zoom)*.5,Rr=J.canonical.toString();J.overscaledZ!==J.canonical.z&&(Rr+=" => "+J.overscaledZ);var Xr=Rr+" "+Er+"kb";ur(H,Xr),Qt.draw(ct,At.TRIANGLES,se,be,re.alphaBlended,Le.disabled,js(Nt,i.Color.transparent,Fr),or,H.debugBuffer,H.quadTriangleIndexBuffer,H.debugSegments)}function ur(H,tt){H.initDebugOverlayCanvas();var J=H.debugOverlayCanvas,ct=H.context.gl,At=H.debugOverlayCanvas.getContext("2d");At.clearRect(0,0,J.width,J.height),At.shadowColor="white",At.shadowBlur=2,At.lineWidth=1.5,At.strokeStyle="white",At.textBaseline="top",At.font="bold 36px Open Sans, sans-serif",At.fillText(tt,5,5),At.strokeText(tt,5,5),H.debugOverlayTexture.update(J),H.debugOverlayTexture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE)}function Ke(H,tt,J){var ct=H.context,At=J.implementation;if(H.renderPass==="offscreen"){var Nt=At.prerender;Nt&&(H.setCustomLayerDefaults(),ct.setColorMode(H.colorModeForRenderPass()),Nt.call(At,ct.gl,H.transform.customLayerMatrix()),ct.setDirty(),H.setBaseState())}else if(H.renderPass==="translucent"){H.setCustomLayerDefaults(),ct.setColorMode(H.colorModeForRenderPass()),ct.setStencilMode(Re.disabled);var Qt=At.renderingMode==="3d"?new Sr(H.context.gl.LEQUAL,Sr.ReadWrite,H.depthRangeFor3D):H.depthModeForSublayer(0,Sr.ReadOnly);ct.setDepthMode(Qt),At.render(ct.gl,H.transform.customLayerMatrix()),ct.setDirty(),H.setBaseState(),ct.bindFramebuffer.set(null)}}var pr={symbol:qs,circle:ts,heatmap:gc,line:Iu,fill:al,"fill-extrusion":ol,hillshade:Ol,raster:pu,background:Il,debug:Pe,custom:Ke},br=function(H,tt){this.context=new _e(H),this.transform=tt,this._tileTextures={},this.setup(),this.numSublayers=Ce.maxUnderzooming+Ce.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Kn,this.gpuTimers={}};br.prototype.resize=function(H,tt){if(this.width=H*i.browser.devicePixelRatio,this.height=tt*i.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var J=0,ct=this.style._order;J<ct.length;J+=1){var At=ct[J];this.style._layers[At].resize()}},br.prototype.setup=function(){var H=this.context,tt=new i.StructArrayLayout2i4;tt.emplaceBack(0,0),tt.emplaceBack(i.EXTENT,0),tt.emplaceBack(0,i.EXTENT),tt.emplaceBack(i.EXTENT,i.EXTENT),this.tileExtentBuffer=H.createVertexBuffer(tt,Ja.members),this.tileExtentSegments=i.SegmentVector.simpleSegment(0,0,4,2);var J=new i.StructArrayLayout2i4;J.emplaceBack(0,0),J.emplaceBack(i.EXTENT,0),J.emplaceBack(0,i.EXTENT),J.emplaceBack(i.EXTENT,i.EXTENT),this.debugBuffer=H.createVertexBuffer(J,Ja.members),this.debugSegments=i.SegmentVector.simpleSegment(0,0,4,5);var ct=new i.StructArrayLayout4i8;ct.emplaceBack(0,0,0,0),ct.emplaceBack(i.EXTENT,0,i.EXTENT,0),ct.emplaceBack(0,i.EXTENT,0,i.EXTENT),ct.emplaceBack(i.EXTENT,i.EXTENT,i.EXTENT,i.EXTENT),this.rasterBoundsBuffer=H.createVertexBuffer(ct,V.members),this.rasterBoundsSegments=i.SegmentVector.simpleSegment(0,0,4,2);var At=new i.StructArrayLayout2i4;At.emplaceBack(0,0),At.emplaceBack(1,0),At.emplaceBack(0,1),At.emplaceBack(1,1),this.viewportBuffer=H.createVertexBuffer(At,Ja.members),this.viewportSegments=i.SegmentVector.simpleSegment(0,0,4,2);var Nt=new i.StructArrayLayout1ui2;Nt.emplaceBack(0),Nt.emplaceBack(1),Nt.emplaceBack(3),Nt.emplaceBack(2),Nt.emplaceBack(0),this.tileBorderIndexBuffer=H.createIndexBuffer(Nt);var Qt=new i.StructArrayLayout3ui6;Qt.emplaceBack(0,1,2),Qt.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=H.createIndexBuffer(Qt),this.emptyTexture=new i.Texture(H,{width:1,height:1,data:new Uint8Array([0,0,0,0])},H.gl.RGBA);var se=this.context.gl;this.stencilClearMode=new Re({func:se.ALWAYS,mask:0},0,255,se.ZERO,se.ZERO,se.ZERO)},br.prototype.clearStencil=function(){var H=this.context,tt=H.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var J=i.create();i.ortho(J,0,this.width,this.height,0,0,1),i.scale(J,J,[tt.drawingBufferWidth,tt.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(H,tt.TRIANGLES,Sr.disabled,this.stencilClearMode,re.disabled,Le.disabled,to(J),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},br.prototype._renderTileClippingMasks=function(H,tt){if(!(this.currentStencilSource===H.source||!H.isTileClipped()||!tt||!tt.length)){this.currentStencilSource=H.source;var J=this.context,ct=J.gl;this.nextStencilID+tt.length>256&&this.clearStencil(),J.setColorMode(re.disabled),J.setDepthMode(Sr.disabled);var At=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Nt=0,Qt=tt;Nt<Qt.length;Nt+=1){var se=Qt[Nt],be=this._tileClippingMaskIDs[se.key]=this.nextStencilID++;At.draw(J,ct.TRIANGLES,Sr.disabled,new Re({func:ct.ALWAYS,mask:0},be,255,ct.KEEP,ct.KEEP,ct.REPLACE),re.disabled,Le.disabled,to(se.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},br.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var H=this.nextStencilID++,tt=this.context.gl;return new Re({func:tt.NOTEQUAL,mask:255},H,255,tt.KEEP,tt.KEEP,tt.REPLACE)},br.prototype.stencilModeForClipping=function(H){var tt=this.context.gl;return new Re({func:tt.EQUAL,mask:255},this._tileClippingMaskIDs[H.key],0,tt.KEEP,tt.KEEP,tt.REPLACE)},br.prototype.stencilConfigForOverlap=function(H){var tt,J=this.context.gl,ct=H.sort(function(be,Ze){return Ze.overscaledZ-be.overscaledZ}),At=ct[ct.length-1].overscaledZ,Nt=ct[0].overscaledZ-At+1;if(Nt>1){this.currentStencilSource=void 0,this.nextStencilID+Nt>256&&this.clearStencil();for(var Qt={},se=0;se<Nt;se++)Qt[se+At]=new Re({func:J.GEQUAL,mask:255},se+this.nextStencilID,255,J.KEEP,J.KEEP,J.REPLACE);return this.nextStencilID+=Nt,[Qt,ct]}return[(tt={},tt[At]=Re.disabled,tt),ct]},br.prototype.colorModeForRenderPass=function(){var H=this.context.gl;if(this._showOverdrawInspector){var tt=8,J=1/tt;return new re([H.CONSTANT_COLOR,H.ONE],new i.Color(J,J,J,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?re.unblended:re.alphaBlended},br.prototype.depthModeForSublayer=function(H,tt,J){if(!this.opaquePassEnabledForLayer())return Sr.disabled;var ct=1-((1+this.currentLayer)*this.numSublayers+H)*this.depthEpsilon;return new Sr(J||this.context.gl.LEQUAL,tt,[ct,ct])},br.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},br.prototype.render=function(H,tt){var J=this;this.style=H,this.options=tt,this.lineAtlas=H.lineAtlas,this.imageManager=H.imageManager,this.glyphManager=H.glyphManager,this.symbolFadeChange=H.placement.symbolFadeChange(i.browser.now()),this.imageManager.beginFrame();var ct=this.style._order,At=this.style.sourceCaches;for(var Nt in At){var Qt=At[Nt];Qt.used&&Qt.prepare(this.context)}var se={},be={},Ze={};for(var or in At){var nr=At[or];se[or]=nr.getVisibleCoordinates(),be[or]=se[or].slice().reverse(),Ze[or]=nr.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var kr=0;kr<ct.length;kr++){var Er=ct[kr];if(this.style._layers[Er].is3D()){this.opaquePassCutoff=kr;break}}this.renderPass="offscreen";for(var qr=0,Fr=ct;qr<Fr.length;qr+=1){var Rr=Fr[qr],Xr=this.style._layers[Rr];if(!(!Xr.hasOffscreenPass()||Xr.isHidden(this.transform.zoom))){var on=be[Xr.source];Xr.type!=="custom"&&!on.length||this.renderLayer(this,At[Xr.source],Xr,on)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:tt.showOverdrawInspector?i.Color.black:i.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=tt.showOverdrawInspector,this.depthRangeFor3D=[0,1-(H._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=ct.length-1;this.currentLayer>=0;this.currentLayer--){var Cn=this.style._layers[ct[this.currentLayer]],En=At[Cn.source],Fn=se[Cn.source];this._renderTileClippingMasks(Cn,Fn),this.renderLayer(this,En,Cn,Fn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<ct.length;this.currentLayer++){var Nn=this.style._layers[ct[this.currentLayer]],jn=At[Nn.source],ai=(Nn.type==="symbol"?Ze:be)[Nn.source];this._renderTileClippingMasks(Nn,se[Nn.source]),this.renderLayer(this,jn,Nn,ai)}if(this.options.showTileBoundaries){var ni,hi,ti=i.values(this.style._layers);ti.forEach(function(fi){fi.source&&!fi.isHidden(J.transform.zoom)&&(fi.source!==(hi&&hi.id)&&(hi=J.style.sourceCaches[fi.source]),(!ni||ni.getSource().maxzoom<hi.getSource().maxzoom)&&(ni=hi))}),ni&&pr.debug(this,ni,ni.getVisibleCoordinates())}this.options.showPadding&&Yt(this),this.context.setDefault()},br.prototype.renderLayer=function(H,tt,J,ct){J.isHidden(this.transform.zoom)||J.type!=="background"&&J.type!=="custom"&&!ct.length||(this.id=J.id,this.gpuTimingStart(J),pr[J.type](H,tt,J,ct,this.style.placement.variableOffsets),this.gpuTimingEnd())},br.prototype.gpuTimingStart=function(H){if(this.options.gpuTiming){var tt=this.context.extTimerQuery,J=this.gpuTimers[H.id];J||(J=this.gpuTimers[H.id]={calls:0,cpuTime:0,query:tt.createQueryEXT()}),J.calls++,tt.beginQueryEXT(tt.TIME_ELAPSED_EXT,J.query)}},br.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var H=this.context.extTimerQuery;H.endQueryEXT(H.TIME_ELAPSED_EXT)}},br.prototype.collectGpuTimers=function(){var H=this.gpuTimers;return this.gpuTimers={},H},br.prototype.queryGpuTimers=function(H){var tt={};for(var J in H){var ct=H[J],At=this.context.extTimerQuery,Nt=At.getQueryObjectEXT(ct.query,At.QUERY_RESULT_EXT)/(1e3*1e3);At.deleteQueryEXT(ct.query),tt[J]=Nt}return tt},br.prototype.translatePosMatrix=function(H,tt,J,ct,At){if(!J[0]&&!J[1])return H;var Nt=At?ct==="map"?this.transform.angle:0:ct==="viewport"?-this.transform.angle:0;if(Nt){var Qt=Math.sin(Nt),se=Math.cos(Nt);J=[J[0]*se-J[1]*Qt,J[0]*Qt+J[1]*se]}var be=[At?J[0]:ln(tt,J[0],this.transform.zoom),At?J[1]:ln(tt,J[1],this.transform.zoom),0],Ze=new Float32Array(16);return i.translate(Ze,H,be),Ze},br.prototype.saveTileTexture=function(H){var tt=this._tileTextures[H.size[0]];tt?tt.push(H):this._tileTextures[H.size[0]]=[H]},br.prototype.getTileTexture=function(H){var tt=this._tileTextures[H];return tt&&tt.length>0?tt.pop():null},br.prototype.isPatternMissing=function(H){if(!H)return!1;if(!H.from||!H.to)return!0;var tt=this.imageManager.getPattern(H.from.toString()),J=this.imageManager.getPattern(H.to.toString());return!tt||!J},br.prototype.useProgram=function(H,tt){this.cache=this.cache||{};var J=""+H+(tt?tt.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[J]||(this.cache[J]=new Ns(this.context,ku[H],tt,ks[H],this._showOverdrawInspector)),this.cache[J]},br.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},br.prototype.setBaseState=function(){var H=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(H.FUNC_ADD)},br.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=i.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var H=this.context.gl;this.debugOverlayTexture=new i.Texture(this.context,this.debugOverlayCanvas,H.RGBA)}},br.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Br=function(H,tt){this.points=H,this.planes=tt};Br.fromInvProjectionMatrix=function(H,tt,J){var ct=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],At=Math.pow(2,J),Nt=ct.map(function(be){return i.transformMat4([],be,H)}).map(function(be){return i.scale$1([],be,1/be[3]/tt*At)}),Qt=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],se=Qt.map(function(be){var Ze=i.sub([],Nt[be[0]],Nt[be[1]]),or=i.sub([],Nt[be[2]],Nt[be[1]]),nr=i.normalize([],i.cross([],Ze,or)),kr=-i.dot(nr,Nt[be[1]]);return nr.concat(kr)});return new Br(Nt,se)};var Vr=function(H,tt){this.min=H,this.max=tt,this.center=i.scale$2([],i.add([],this.min,this.max),.5)};Vr.prototype.quadrant=function(H){for(var tt=[H%2===0,H<2],J=i.clone$2(this.min),ct=i.clone$2(this.max),At=0;At<tt.length;At++)J[At]=tt[At]?this.min[At]:this.center[At],ct[At]=tt[At]?this.center[At]:this.max[At];return ct[2]=this.max[2],new Vr(J,ct)},Vr.prototype.distanceX=function(H){var tt=Math.max(Math.min(this.max[0],H[0]),this.min[0]);return tt-H[0]},Vr.prototype.distanceY=function(H){var tt=Math.max(Math.min(this.max[1],H[1]),this.min[1]);return tt-H[1]},Vr.prototype.intersects=function(H){for(var tt=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],J=!0,ct=0;ct<H.planes.length;ct++){for(var At=H.planes[ct],Nt=0,Qt=0;Qt<tt.length;Qt++)Nt+=i.dot$1(At,tt[Qt])>=0;if(Nt===0)return 0;Nt!==tt.length&&(J=!1)}if(J)return 2;for(var se=0;se<3;se++){for(var be=Number.MAX_VALUE,Ze=-Number.MAX_VALUE,or=0;or<H.points.length;or++){var nr=H.points[or][se]-this.min[se];be=Math.min(be,nr),Ze=Math.max(Ze,nr)}if(Ze<0||be>this.max[se]-this.min[se])return 0}return 1};var hn=function(H,tt,J,ct){if(H===void 0&&(H=0),tt===void 0&&(tt=0),J===void 0&&(J=0),ct===void 0&&(ct=0),isNaN(H)||H<0||isNaN(tt)||tt<0||isNaN(J)||J<0||isNaN(ct)||ct<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=H,this.bottom=tt,this.left=J,this.right=ct};hn.prototype.interpolate=function(H,tt,J){return tt.top!=null&&H.top!=null&&(this.top=i.number(H.top,tt.top,J)),tt.bottom!=null&&H.bottom!=null&&(this.bottom=i.number(H.bottom,tt.bottom,J)),tt.left!=null&&H.left!=null&&(this.left=i.number(H.left,tt.left,J)),tt.right!=null&&H.right!=null&&(this.right=i.number(H.right,tt.right,J)),this},hn.prototype.getCenter=function(H,tt){var J=i.clamp((this.left+H-this.right)/2,0,H),ct=i.clamp((this.top+tt-this.bottom)/2,0,tt);return new i.Point(J,ct)},hn.prototype.equals=function(H){return this.top===H.top&&this.bottom===H.bottom&&this.left===H.left&&this.right===H.right},hn.prototype.clone=function(){return new hn(this.top,this.bottom,this.left,this.right)},hn.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var dn=function(H,tt,J,ct,At){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=At===void 0?!0:At,this._minZoom=H||0,this._maxZoom=tt||22,this._minPitch=J??0,this._maxPitch=ct??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new i.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new hn,this._posMatrixCache={},this._alignedPosMatrixCache={}},An={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};dn.prototype.clone=function(){var H=new dn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return H.tileSize=this.tileSize,H.latRange=this.latRange,H.width=this.width,H.height=this.height,H._center=this._center,H.zoom=this.zoom,H.angle=this.angle,H._fov=this._fov,H._pitch=this._pitch,H._unmodified=this._unmodified,H._edgeInsets=this._edgeInsets.clone(),H._calcMatrices(),H},An.minZoom.get=function(){return this._minZoom},An.minZoom.set=function(H){this._minZoom!==H&&(this._minZoom=H,this.zoom=Math.max(this.zoom,H))},An.maxZoom.get=function(){return this._maxZoom},An.maxZoom.set=function(H){this._maxZoom!==H&&(this._maxZoom=H,this.zoom=Math.min(this.zoom,H))},An.minPitch.get=function(){return this._minPitch},An.minPitch.set=function(H){this._minPitch!==H&&(this._minPitch=H,this.pitch=Math.max(this.pitch,H))},An.maxPitch.get=function(){return this._maxPitch},An.maxPitch.set=function(H){this._maxPitch!==H&&(this._maxPitch=H,this.pitch=Math.min(this.pitch,H))},An.renderWorldCopies.get=function(){return this._renderWorldCopies},An.renderWorldCopies.set=function(H){H===void 0?H=!0:H===null&&(H=!1),this._renderWorldCopies=H},An.worldSize.get=function(){return this.tileSize*this.scale},An.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},An.size.get=function(){return new i.Point(this.width,this.height)},An.bearing.get=function(){return-this.angle/Math.PI*180},An.bearing.set=function(H){var tt=-i.wrap(H,-180,180)*Math.PI/180;this.angle!==tt&&(this._unmodified=!1,this.angle=tt,this._calcMatrices(),this.rotationMatrix=i.create$2(),i.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},An.pitch.get=function(){return this._pitch/Math.PI*180},An.pitch.set=function(H){var tt=i.clamp(H,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==tt&&(this._unmodified=!1,this._pitch=tt,this._calcMatrices())},An.fov.get=function(){return this._fov/Math.PI*180},An.fov.set=function(H){H=Math.max(.01,Math.min(60,H)),this._fov!==H&&(this._unmodified=!1,this._fov=H/180*Math.PI,this._calcMatrices())},An.zoom.get=function(){return this._zoom},An.zoom.set=function(H){var tt=Math.min(Math.max(H,this.minZoom),this.maxZoom);this._zoom!==tt&&(this._unmodified=!1,this._zoom=tt,this.scale=this.zoomScale(tt),this.tileZoom=Math.floor(tt),this.zoomFraction=tt-this.tileZoom,this._constrain(),this._calcMatrices())},An.center.get=function(){return this._center},An.center.set=function(H){H.lat===this._center.lat&&H.lng===this._center.lng||(this._unmodified=!1,this._center=H,this._constrain(),this._calcMatrices())},An.padding.get=function(){return this._edgeInsets.toJSON()},An.padding.set=function(H){this._edgeInsets.equals(H)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,H,1),this._calcMatrices())},An.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},dn.prototype.isPaddingEqual=function(H){return this._edgeInsets.equals(H)},dn.prototype.interpolatePadding=function(H,tt,J){this._unmodified=!1,this._edgeInsets.interpolate(H,tt,J),this._constrain(),this._calcMatrices()},dn.prototype.coveringZoomLevel=function(H){var tt=(H.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/H.tileSize));return Math.max(0,tt)},dn.prototype.getVisibleUnwrappedCoordinates=function(H){var tt=[new i.UnwrappedTileID(0,H)];if(this._renderWorldCopies)for(var J=this.pointCoordinate(new i.Point(0,0)),ct=this.pointCoordinate(new i.Point(this.width,0)),At=this.pointCoordinate(new i.Point(this.width,this.height)),Nt=this.pointCoordinate(new i.Point(0,this.height)),Qt=Math.floor(Math.min(J.x,ct.x,At.x,Nt.x)),se=Math.floor(Math.max(J.x,ct.x,At.x,Nt.x)),be=1,Ze=Qt-be;Ze<=se+be;Ze++)Ze!==0&&tt.push(new i.UnwrappedTileID(Ze,H));return tt},dn.prototype.coveringTiles=function(H){var tt=this.coveringZoomLevel(H),J=tt;if(H.minzoom!==void 0&&tt<H.minzoom)return[];H.maxzoom!==void 0&&tt>H.maxzoom&&(tt=H.maxzoom);var ct=i.MercatorCoordinate.fromLngLat(this.center),At=Math.pow(2,tt),Nt=[At*ct.x,At*ct.y,0],Qt=Br.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,tt),se=H.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(se=tt);var be=3,Ze=function(ti){return{aabb:new Vr([ti*At,0,0],[(ti+1)*At,At,0]),zoom:0,x:0,y:0,wrap:ti,fullyVisible:!1}},or=[],nr=[],kr=tt,Er=H.reparseOverscaled?J:tt;if(this._renderWorldCopies)for(var qr=1;qr<=3;qr++)or.push(Ze(-qr)),or.push(Ze(qr));for(or.push(Ze(0));or.length>0;){var Fr=or.pop(),Rr=Fr.x,Xr=Fr.y,on=Fr.fullyVisible;if(!on){var Cn=Fr.aabb.intersects(Qt);if(Cn===0)continue;on=Cn===2}var En=Fr.aabb.distanceX(Nt),Fn=Fr.aabb.distanceY(Nt),Nn=Math.max(Math.abs(En),Math.abs(Fn)),jn=be+(1<<kr-Fr.zoom)-2;if(Fr.zoom===kr||Nn>jn&&Fr.zoom>=se){nr.push({tileID:new i.OverscaledTileID(Fr.zoom===kr?Er:Fr.zoom,Fr.wrap,Fr.zoom,Rr,Xr),distanceSq:i.sqrLen([Nt[0]-.5-Rr,Nt[1]-.5-Xr])});continue}for(var ai=0;ai<4;ai++){var ni=(Rr<<1)+ai%2,hi=(Xr<<1)+(ai>>1);or.push({aabb:Fr.aabb.quadrant(ai),zoom:Fr.zoom+1,x:ni,y:hi,wrap:Fr.wrap,fullyVisible:on})}}return nr.sort(function(ti,fi){return ti.distanceSq-fi.distanceSq}).map(function(ti){return ti.tileID})},dn.prototype.resize=function(H,tt){this.width=H,this.height=tt,this.pixelsToGLUnits=[2/H,-2/tt],this._constrain(),this._calcMatrices()},An.unmodified.get=function(){return this._unmodified},dn.prototype.zoomScale=function(H){return Math.pow(2,H)},dn.prototype.scaleZoom=function(H){return Math.log(H)/Math.LN2},dn.prototype.project=function(H){var tt=i.clamp(H.lat,-this.maxValidLatitude,this.maxValidLatitude);return new i.Point(i.mercatorXfromLng(H.lng)*this.worldSize,i.mercatorYfromLat(tt)*this.worldSize)},dn.prototype.unproject=function(H){return new i.MercatorCoordinate(H.x/this.worldSize,H.y/this.worldSize).toLngLat()},An.point.get=function(){return this.project(this.center)},dn.prototype.setLocationAtPoint=function(H,tt){var J=this.pointCoordinate(tt),ct=this.pointCoordinate(this.centerPoint),At=this.locationCoordinate(H),Nt=new i.MercatorCoordinate(At.x-(J.x-ct.x),At.y-(J.y-ct.y));this.center=this.coordinateLocation(Nt),this._renderWorldCopies&&(this.center=this.center.wrap())},dn.prototype.locationPoint=function(H){return this.coordinatePoint(this.locationCoordinate(H))},dn.prototype.pointLocation=function(H){return this.coordinateLocation(this.pointCoordinate(H))},dn.prototype.locationCoordinate=function(H){return i.MercatorCoordinate.fromLngLat(H)},dn.prototype.coordinateLocation=function(H){return H.toLngLat()},dn.prototype.pointCoordinate=function(H){var tt=0,J=[H.x,H.y,0,1],ct=[H.x,H.y,1,1];i.transformMat4(J,J,this.pixelMatrixInverse),i.transformMat4(ct,ct,this.pixelMatrixInverse);var At=J[3],Nt=ct[3],Qt=J[0]/At,se=ct[0]/Nt,be=J[1]/At,Ze=ct[1]/Nt,or=J[2]/At,nr=ct[2]/Nt,kr=or===nr?0:(tt-or)/(nr-or);return new i.MercatorCoordinate(i.number(Qt,se,kr)/this.worldSize,i.number(be,Ze,kr)/this.worldSize)},dn.prototype.coordinatePoint=function(H){var tt=[H.x*this.worldSize,H.y*this.worldSize,0,1];return i.transformMat4(tt,tt,this.pixelMatrix),new i.Point(tt[0]/tt[3],tt[1]/tt[3])},dn.prototype.getBounds=function(){return new i.LngLatBounds().extend(this.pointLocation(new i.Point(0,0))).extend(this.pointLocation(new i.Point(this.width,0))).extend(this.pointLocation(new i.Point(this.width,this.height))).extend(this.pointLocation(new i.Point(0,this.height)))},dn.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new i.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},dn.prototype.setMaxBounds=function(H){H?(this.lngRange=[H.getWest(),H.getEast()],this.latRange=[H.getSouth(),H.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},dn.prototype.calculatePosMatrix=function(H,tt){tt===void 0&&(tt=!1);var J=H.key,ct=tt?this._alignedPosMatrixCache:this._posMatrixCache;if(ct[J])return ct[J];var At=H.canonical,Nt=this.worldSize/this.zoomScale(At.z),Qt=At.x+Math.pow(2,At.z)*H.wrap,se=i.identity(new Float64Array(16));return i.translate(se,se,[Qt*Nt,At.y*Nt,0]),i.scale(se,se,[Nt/i.EXTENT,Nt/i.EXTENT,1]),i.multiply(se,tt?this.alignedProjMatrix:this.projMatrix,se),ct[J]=new Float32Array(se),ct[J]},dn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},dn.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var H=-90,tt=90,J=-180,ct=180,At,Nt,Qt,se,be=this.size,Ze=this._unmodified;if(this.latRange){var or=this.latRange;H=i.mercatorYfromLat(or[1])*this.worldSize,tt=i.mercatorYfromLat(or[0])*this.worldSize,At=tt-H<be.y?be.y/(tt-H):0}if(this.lngRange){var nr=this.lngRange;J=i.mercatorXfromLng(nr[0])*this.worldSize,ct=i.mercatorXfromLng(nr[1])*this.worldSize,Nt=ct-J<be.x?be.x/(ct-J):0}var kr=this.point,Er=Math.max(Nt||0,At||0);if(Er){this.center=this.unproject(new i.Point(Nt?(ct+J)/2:kr.x,At?(tt+H)/2:kr.y)),this.zoom+=this.scaleZoom(Er),this._unmodified=Ze,this._constraining=!1;return}if(this.latRange){var qr=kr.y,Fr=be.y/2;qr-Fr<H&&(se=H+Fr),qr+Fr>tt&&(se=tt-Fr)}if(this.lngRange){var Rr=kr.x,Xr=be.x/2;Rr-Xr<J&&(Qt=J+Xr),Rr+Xr>ct&&(Qt=ct-Xr)}(Qt!==void 0||se!==void 0)&&(this.center=this.unproject(new i.Point(Qt!==void 0?Qt:kr.x,se!==void 0?se:kr.y))),this._unmodified=Ze,this._constraining=!1}},dn.prototype._calcMatrices=function(){if(this.height){var H=this._fov/2,tt=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(H)*this.height;var J=Math.PI/2+this._pitch,ct=this._fov*(.5+tt.y/this.height),At=Math.sin(ct)*this.cameraToCenterDistance/Math.sin(i.clamp(Math.PI-J-ct,.01,Math.PI-.01)),Nt=this.point,Qt=Nt.x,se=Nt.y,be=Math.cos(Math.PI/2-this._pitch)*At+this.cameraToCenterDistance,Ze=be*1.01,or=this.height/50,nr=new Float64Array(16);i.perspective(nr,this._fov,this.width/this.height,or,Ze),nr[8]=-tt.x*2/this.width,nr[9]=tt.y*2/this.height,i.scale(nr,nr,[1,-1,1]),i.translate(nr,nr,[0,0,-this.cameraToCenterDistance]),i.rotateX(nr,nr,this._pitch),i.rotateZ(nr,nr,this.angle),i.translate(nr,nr,[-Qt,-se,0]),this.mercatorMatrix=i.scale([],nr,[this.worldSize,this.worldSize,this.worldSize]),i.scale(nr,nr,[1,1,i.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=nr,this.invProjMatrix=i.invert([],this.projMatrix);var kr=this.width%2/2,Er=this.height%2/2,qr=Math.cos(this.angle),Fr=Math.sin(this.angle),Rr=Qt-Math.round(Qt)+qr*kr+Fr*Er,Xr=se-Math.round(se)+qr*Er+Fr*kr,on=new Float64Array(nr);if(i.translate(on,on,[Rr>.5?Rr-1:Rr,Xr>.5?Xr-1:Xr,0]),this.alignedProjMatrix=on,nr=i.create(),i.scale(nr,nr,[this.width/2,-this.height/2,1]),i.translate(nr,nr,[1,-1,0]),this.labelPlaneMatrix=nr,nr=i.create(),i.scale(nr,nr,[1,-1,1]),i.translate(nr,nr,[-1,-1,0]),i.scale(nr,nr,[2/this.width,2/this.height,1]),this.glCoordMatrix=nr,this.pixelMatrix=i.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),nr=i.invert(new Float64Array(16),this.pixelMatrix),!nr)throw new Error("failed to invert matrix");this.pixelMatrixInverse=nr,this._posMatrixCache={},this._alignedPosMatrixCache={}}},dn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var H=this.pointCoordinate(new i.Point(0,0)),tt=[H.x*this.worldSize,H.y*this.worldSize,0,1],J=i.transformMat4(tt,tt,this.pixelMatrix);return J[3]/this.cameraToCenterDistance},dn.prototype.getCameraPoint=function(){var H=this._pitch,tt=Math.tan(H)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.Point(0,tt))},dn.prototype.getCameraQueryGeometry=function(H){var tt=this.getCameraPoint();if(H.length===1)return[H[0],tt];for(var J=tt.x,ct=tt.y,At=tt.x,Nt=tt.y,Qt=0,se=H;Qt<se.length;Qt+=1){var be=se[Qt];J=Math.min(J,be.x),ct=Math.min(ct,be.y),At=Math.max(At,be.x),Nt=Math.max(Nt,be.y)}return[new i.Point(J,ct),new i.Point(At,ct),new i.Point(At,Nt),new i.Point(J,Nt),new i.Point(J,ct)]},Object.defineProperties(dn.prototype,An);function ri(H,tt){var J=!1,ct=null,At=function(){ct=null,J&&(H(),ct=setTimeout(At,tt),J=!1)};return function(){return J=!0,ct||At(),ct}}var vi=function(H){this._hashName=H&&encodeURIComponent(H),i.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=ri(this._updateHashUnthrottled.bind(this),30*1e3/100)};vi.prototype.addTo=function(H){return this._map=H,i.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},vi.prototype.remove=function(){return i.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},vi.prototype.getHashString=function(H){var tt=this._map.getCenter(),J=Math.round(this._map.getZoom()*100)/100,ct=Math.ceil((J*Math.LN2+Math.log(512/360/.5))/Math.LN10),At=Math.pow(10,ct),Nt=Math.round(tt.lng*At)/At,Qt=Math.round(tt.lat*At)/At,se=this._map.getBearing(),be=this._map.getPitch(),Ze="";if(H?Ze+="/"+Nt+"/"+Qt+"/"+J:Ze+=J+"/"+Qt+"/"+Nt,(se||be)&&(Ze+="/"+Math.round(se*10)/10),be&&(Ze+="/"+Math.round(be)),this._hashName){var or=this._hashName,nr=!1,kr=i.window.location.hash.slice(1).split("&").map(function(Er){var qr=Er.split("=")[0];return qr===or?(nr=!0,qr+"="+Ze):Er}).filter(function(Er){return Er});return nr||kr.push(or+"="+Ze),"#"+kr.join("&")}return"#"+Ze},vi.prototype._getCurrentHash=function(){var H=this,tt=i.window.location.hash.replace("#","");if(this._hashName){var J;return tt.split("&").map(function(ct){return ct.split("=")}).forEach(function(ct){ct[0]===H._hashName&&(J=ct)}),(J&&J[1]||"").split("/")}return tt.split("/")},vi.prototype._onHashChange=function(){var H=this._getCurrentHash();if(H.length>=3&&!H.some(function(J){return isNaN(J)})){var tt=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(H[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+H[2],+H[1]],zoom:+H[0],bearing:tt,pitch:+(H[4]||0)}),!0}return!1},vi.prototype._updateHashUnthrottled=function(){var H=this.getHashString();try{i.window.history.replaceState(i.window.history.state,"",H)}catch{}};var bi={linearity:.3,easing:i.bezier(0,0,.3,1)},wi=i.extend({deceleration:2500,maxSpeed:1400},bi),Ti=i.extend({deceleration:20,maxSpeed:1400},bi),Wi=i.extend({deceleration:1e3,maxSpeed:360},bi),ga=i.extend({deceleration:1e3,maxSpeed:90},bi),$i=function(H){this._map=H,this.clear()};$i.prototype.clear=function(){this._inertiaBuffer=[]},$i.prototype.record=function(H){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:i.browser.now(),settings:H})},$i.prototype._drainInertiaBuffer=function(){for(var H=this._inertiaBuffer,tt=i.browser.now(),J=160;H.length>0&&tt-H[0].time>J;)H.shift()},$i.prototype._onMoveEnd=function(H){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var tt={zoom:0,bearing:0,pitch:0,pan:new i.Point(0,0),pinchAround:void 0,around:void 0},J=0,ct=this._inertiaBuffer;J<ct.length;J+=1){var At=ct[J],Nt=At.settings;tt.zoom+=Nt.zoomDelta||0,tt.bearing+=Nt.bearingDelta||0,tt.pitch+=Nt.pitchDelta||0,Nt.panDelta&&tt.pan._add(Nt.panDelta),Nt.around&&(tt.around=Nt.around),Nt.pinchAround&&(tt.pinchAround=Nt.pinchAround)}var Qt=this._inertiaBuffer[this._inertiaBuffer.length-1],se=Qt.time-this._inertiaBuffer[0].time,be={};if(tt.pan.mag()){var Ze=bt(tt.pan.mag(),se,i.extend({},wi,H||{}));be.offset=tt.pan.mult(Ze.amount/tt.pan.mag()),be.center=this._map.transform.center,st(be,Ze)}if(tt.zoom){var or=bt(tt.zoom,se,Ti);be.zoom=this._map.transform.zoom+or.amount,st(be,or)}if(tt.bearing){var nr=bt(tt.bearing,se,Wi);be.bearing=this._map.transform.bearing+i.clamp(nr.amount,-179,179),st(be,nr)}if(tt.pitch){var kr=bt(tt.pitch,se,ga);be.pitch=this._map.transform.pitch+kr.amount,st(be,kr)}if(be.zoom||be.bearing){var Er=tt.pinchAround===void 0?tt.around:tt.pinchAround;be.around=Er?this._map.unproject(Er):this._map.getCenter()}return this.clear(),i.extend(be,{noMoveStart:!0})}};function st(H,tt){(!H.duration||H.duration<tt.duration)&&(H.duration=tt.duration,H.easing=tt.easing)}function bt(H,tt,J){var ct=J.maxSpeed,At=J.linearity,Nt=J.deceleration,Qt=i.clamp(H*At/(tt/1e3),-ct,ct),se=Math.abs(Qt)/(Nt*At);return{easing:J.easing,duration:se*1e3,amount:Qt*(se/2)}}var Ct=function(H){function tt(ct,At,Nt,Qt){Qt===void 0&&(Qt={});var se=A.mousePos(At.getCanvasContainer(),Nt),be=At.unproject(se);H.call(this,ct,i.extend({point:se,lngLat:be,originalEvent:Nt},Qt)),this._defaultPrevented=!1,this.target=At}H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt;var J={defaultPrevented:{configurable:!0}};return tt.prototype.preventDefault=function(){this._defaultPrevented=!0},J.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(tt.prototype,J),tt}(i.Event),qt=function(H){function tt(ct,At,Nt){var Qt=ct==="touchend"?Nt.changedTouches:Nt.touches,se=A.touchPos(At.getCanvasContainer(),Qt),be=se.map(function(nr){return At.unproject(nr)}),Ze=se.reduce(function(nr,kr,Er,qr){return nr.add(kr.div(qr.length))},new i.Point(0,0)),or=At.unproject(Ze);H.call(this,ct,{points:se,point:Ze,lngLats:be,lngLat:or,originalEvent:Nt}),this._defaultPrevented=!1}H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt;var J={defaultPrevented:{configurable:!0}};return tt.prototype.preventDefault=function(){this._defaultPrevented=!0},J.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(tt.prototype,J),tt}(i.Event),Wt=function(H){function tt(ct,At,Nt){H.call(this,ct,{originalEvent:Nt}),this._defaultPrevented=!1}H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt;var J={defaultPrevented:{configurable:!0}};return tt.prototype.preventDefault=function(){this._defaultPrevented=!0},J.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(tt.prototype,J),tt}(i.Event),Jt=function(H,tt){this._map=H,this._clickTolerance=tt.clickTolerance};Jt.prototype.reset=function(){delete this._mousedownPos},Jt.prototype.wheel=function(H){return this._firePreventable(new Wt(H.type,this._map,H))},Jt.prototype.mousedown=function(H,tt){return this._mousedownPos=tt,this._firePreventable(new Ct(H.type,this._map,H))},Jt.prototype.mouseup=function(H){this._map.fire(new Ct(H.type,this._map,H))},Jt.prototype.click=function(H,tt){this._mousedownPos&&this._mousedownPos.dist(tt)>=this._clickTolerance||this._map.fire(new Ct(H.type,this._map,H))},Jt.prototype.dblclick=function(H){return this._firePreventable(new Ct(H.type,this._map,H))},Jt.prototype.mouseover=function(H){this._map.fire(new Ct(H.type,this._map,H))},Jt.prototype.mouseout=function(H){this._map.fire(new Ct(H.type,this._map,H))},Jt.prototype.touchstart=function(H){return this._firePreventable(new qt(H.type,this._map,H))},Jt.prototype.touchmove=function(H){this._map.fire(new qt(H.type,this._map,H))},Jt.prototype.touchend=function(H){this._map.fire(new qt(H.type,this._map,H))},Jt.prototype.touchcancel=function(H){this._map.fire(new qt(H.type,this._map,H))},Jt.prototype._firePreventable=function(H){if(this._map.fire(H),H.defaultPrevented)return{}},Jt.prototype.isEnabled=function(){return!0},Jt.prototype.isActive=function(){return!1},Jt.prototype.enable=function(){},Jt.prototype.disable=function(){};var ge=function(H){this._map=H};ge.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ge.prototype.mousemove=function(H){this._map.fire(new Ct(H.type,this._map,H))},ge.prototype.mousedown=function(){this._delayContextMenu=!0},ge.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ct("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ge.prototype.contextmenu=function(H){this._delayContextMenu?this._contextMenuEvent=H:this._map.fire(new Ct(H.type,this._map,H)),this._map.listens("contextmenu")&&H.preventDefault()},ge.prototype.isEnabled=function(){return!0},ge.prototype.isActive=function(){return!1},ge.prototype.enable=function(){},ge.prototype.disable=function(){};var ne=function(H,tt){this._map=H,this._el=H.getCanvasContainer(),this._container=H.getContainer(),this._clickTolerance=tt.clickTolerance||1};ne.prototype.isEnabled=function(){return!!this._enabled},ne.prototype.isActive=function(){return!!this._active},ne.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ne.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ne.prototype.mousedown=function(H,tt){this.isEnabled()&&H.shiftKey&&H.button===0&&(A.disableDrag(),this._startPos=this._lastPos=tt,this._active=!0)},ne.prototype.mousemoveWindow=function(H,tt){if(this._active){var J=tt;if(!(this._lastPos.equals(J)||!this._box&&J.dist(this._startPos)<this._clickTolerance)){var ct=this._startPos;this._lastPos=J,this._box||(this._box=A.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",H));var At=Math.min(ct.x,J.x),Nt=Math.max(ct.x,J.x),Qt=Math.min(ct.y,J.y),se=Math.max(ct.y,J.y);A.setTransform(this._box,"translate("+At+"px,"+Qt+"px)"),this._box.style.width=Nt-At+"px",this._box.style.height=se-Qt+"px"}}},ne.prototype.mouseupWindow=function(H,tt){var J=this;if(this._active&&H.button===0){var ct=this._startPos,At=tt;if(this.reset(),A.suppressClick(),ct.x===At.x&&ct.y===At.y)this._fireEvent("boxzoomcancel",H);else return this._map.fire(new i.Event("boxzoomend",{originalEvent:H})),{cameraAnimation:function(Nt){return Nt.fitScreenCoordinates(ct,At,J._map.getBearing(),{linear:!0})}}}},ne.prototype.keydown=function(H){this._active&&H.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",H))},ne.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(A.remove(this._box),this._box=null),A.enableDrag(),delete this._startPos,delete this._lastPos},ne.prototype._fireEvent=function(H,tt){return this._map.fire(new i.Event(H,{originalEvent:tt}))};function Ie(H,tt){for(var J={},ct=0;ct<H.length;ct++)J[H[ct].identifier]=tt[ct];return J}function Ge(H){for(var tt=new i.Point(0,0),J=0,ct=H;J<ct.length;J+=1){var At=ct[J];tt._add(At)}return tt.div(H.length)}var Ye=500,vr=500,Ar=30,jr=function(H){this.reset(),this.numTouches=H.numTouches};jr.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},jr.prototype.touchstart=function(H,tt,J){(this.centroid||J.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=H.timeStamp),J.length===this.numTouches&&(this.centroid=Ge(tt),this.touches=Ie(J,tt)))},jr.prototype.touchmove=function(H,tt,J){if(!(this.aborted||!this.centroid)){var ct=Ie(J,tt);for(var At in this.touches){var Nt=this.touches[At],Qt=ct[At];(!Qt||Qt.dist(Nt)>Ar)&&(this.aborted=!0)}}},jr.prototype.touchend=function(H,tt,J){if((!this.centroid||H.timeStamp-this.startTime>vr)&&(this.aborted=!0),J.length===0){var ct=!this.aborted&&this.centroid;if(this.reset(),ct)return ct}};var Gr=function(H){this.singleTap=new jr(H),this.numTaps=H.numTaps,this.reset()};Gr.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Gr.prototype.touchstart=function(H,tt,J){this.singleTap.touchstart(H,tt,J)},Gr.prototype.touchmove=function(H,tt,J){this.singleTap.touchmove(H,tt,J)},Gr.prototype.touchend=function(H,tt,J){var ct=this.singleTap.touchend(H,tt,J);if(ct){var At=H.timeStamp-this.lastTime<Ye,Nt=!this.lastTap||this.lastTap.dist(ct)<Ar;if((!At||!Nt)&&this.reset(),this.count++,this.lastTime=H.timeStamp,this.lastTap=ct,this.count===this.numTaps)return this.reset(),ct}};var Tr=function(){this._zoomIn=new Gr({numTouches:1,numTaps:2}),this._zoomOut=new Gr({numTouches:2,numTaps:1}),this.reset()};Tr.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Tr.prototype.touchstart=function(H,tt,J){this._zoomIn.touchstart(H,tt,J),this._zoomOut.touchstart(H,tt,J)},Tr.prototype.touchmove=function(H,tt,J){this._zoomIn.touchmove(H,tt,J),this._zoomOut.touchmove(H,tt,J)},Tr.prototype.touchend=function(H,tt,J){var ct=this,At=this._zoomIn.touchend(H,tt,J),Nt=this._zoomOut.touchend(H,tt,J);if(At)return this._active=!0,H.preventDefault(),setTimeout(function(){return ct.reset()},0),{cameraAnimation:function(Qt){return Qt.easeTo({duration:300,zoom:Qt.getZoom()+1,around:Qt.unproject(At)},{originalEvent:H})}};if(Nt)return this._active=!0,H.preventDefault(),setTimeout(function(){return ct.reset()},0),{cameraAnimation:function(Qt){return Qt.easeTo({duration:300,zoom:Qt.getZoom()-1,around:Qt.unproject(Nt)},{originalEvent:H})}}},Tr.prototype.touchcancel=function(){this.reset()},Tr.prototype.enable=function(){this._enabled=!0},Tr.prototype.disable=function(){this._enabled=!1,this.reset()},Tr.prototype.isEnabled=function(){return this._enabled},Tr.prototype.isActive=function(){return this._active};var Dr=0,Ur=2,Wr=function(H){this.reset(),this._clickTolerance=H.clickTolerance||1};Wr.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Wr.prototype._correctButton=function(H,tt){return!1},Wr.prototype._move=function(H,tt){return{}},Wr.prototype.mousedown=function(H,tt){if(!this._lastPoint){var J=A.mouseButton(H);this._correctButton(H,J)&&(this._lastPoint=tt,this._eventButton=J)}},Wr.prototype.mousemoveWindow=function(H,tt){var J=this._lastPoint;if(J&&(H.preventDefault(),!(!this._moved&&tt.dist(J)<this._clickTolerance)))return this._moved=!0,this._lastPoint=tt,this._move(J,tt)},Wr.prototype.mouseupWindow=function(H){var tt=A.mouseButton(H);tt===this._eventButton&&(this._moved&&A.suppressClick(),this.reset())},Wr.prototype.enable=function(){this._enabled=!0},Wr.prototype.disable=function(){this._enabled=!1,this.reset()},Wr.prototype.isEnabled=function(){return this._enabled},Wr.prototype.isActive=function(){return this._active};var tn=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.mousedown=function(J,ct){H.prototype.mousedown.call(this,J,ct),this._lastPoint&&(this._active=!0)},tt.prototype._correctButton=function(J,ct){return ct===Dr&&!J.ctrlKey},tt.prototype._move=function(J,ct){return{around:ct,panDelta:ct.sub(J)}},tt}(Wr),Nr=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype._correctButton=function(J,ct){return ct===Dr&&J.ctrlKey||ct===Ur},tt.prototype._move=function(J,ct){var At=.8,Nt=(ct.x-J.x)*At;if(Nt)return this._active=!0,{bearingDelta:Nt}},tt.prototype.contextmenu=function(J){J.preventDefault()},tt}(Wr),Pn=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype._correctButton=function(J,ct){return ct===Dr&&J.ctrlKey||ct===Ur},tt.prototype._move=function(J,ct){var At=-.5,Nt=(ct.y-J.y)*At;if(Nt)return this._active=!0,{pitchDelta:Nt}},tt.prototype.contextmenu=function(J){J.preventDefault()},tt}(Wr),Dn=function(H){this._minTouches=1,this._clickTolerance=H.clickTolerance||1,this.reset()};Dn.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new i.Point(0,0)},Dn.prototype.touchstart=function(H,tt,J){return this._calculateTransform(H,tt,J)},Dn.prototype.touchmove=function(H,tt,J){if(this._active)return H.preventDefault(),this._calculateTransform(H,tt,J)},Dn.prototype.touchend=function(H,tt,J){this._calculateTransform(H,tt,J),this._active&&J.length<this._minTouches&&this.reset()},Dn.prototype.touchcancel=function(){this.reset()},Dn.prototype._calculateTransform=function(H,tt,J){J.length>0&&(this._active=!0);var ct=Ie(J,tt),At=new i.Point(0,0),Nt=new i.Point(0,0),Qt=0;for(var se in ct){var be=ct[se],Ze=this._touches[se];Ze&&(At._add(be),Nt._add(be.sub(Ze)),Qt++,ct[se]=be)}if(this._touches=ct,!(Qt<this._minTouches||!Nt.mag())){var or=Nt.div(Qt);if(this._sum._add(or),!(this._sum.mag()<this._clickTolerance)){var nr=At.div(Qt);return{around:nr,panDelta:or}}}},Dn.prototype.enable=function(){this._enabled=!0},Dn.prototype.disable=function(){this._enabled=!1,this.reset()},Dn.prototype.isEnabled=function(){return this._enabled},Dn.prototype.isActive=function(){return this._active};var Zn=function(){this.reset()};Zn.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Zn.prototype._start=function(H){},Zn.prototype._move=function(H,tt,J){return{}},Zn.prototype.touchstart=function(H,tt,J){this._firstTwoTouches||J.length<2||(this._firstTwoTouches=[J[0].identifier,J[1].identifier],this._start([tt[0],tt[1]]))},Zn.prototype.touchmove=function(H,tt,J){if(this._firstTwoTouches){H.preventDefault();var ct=this._firstTwoTouches,At=ct[0],Nt=ct[1],Qt=Yn(J,tt,At),se=Yn(J,tt,Nt);if(!(!Qt||!se)){var be=this._aroundCenter?null:Qt.add(se).div(2);return this._move([Qt,se],be,H)}}},Zn.prototype.touchend=function(H,tt,J){if(this._firstTwoTouches){var ct=this._firstTwoTouches,At=ct[0],Nt=ct[1],Qt=Yn(J,tt,At),se=Yn(J,tt,Nt);Qt&&se||(this._active&&A.suppressClick(),this.reset())}},Zn.prototype.touchcancel=function(){this.reset()},Zn.prototype.enable=function(H){this._enabled=!0,this._aroundCenter=!!H&&H.around==="center"},Zn.prototype.disable=function(){this._enabled=!1,this.reset()},Zn.prototype.isEnabled=function(){return this._enabled},Zn.prototype.isActive=function(){return this._active};function Yn(H,tt,J){for(var ct=0;ct<H.length;ct++)if(H[ct].identifier===J)return tt[ct]}var li=.1;function si(H,tt){return Math.log(H/tt)/Math.LN2}var Ei=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.reset=function(){H.prototype.reset.call(this),delete this._distance,delete this._startDistance},tt.prototype._start=function(J){this._startDistance=this._distance=J[0].dist(J[1])},tt.prototype._move=function(J,ct){var At=this._distance;if(this._distance=J[0].dist(J[1]),!(!this._active&&Math.abs(si(this._distance,this._startDistance))<li))return this._active=!0,{zoomDelta:si(this._distance,At),pinchAround:ct}},tt}(Zn),di=25;function Li(H,tt){return H.angleWith(tt)*180/Math.PI}var Zi=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.reset=function(){H.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},tt.prototype._start=function(J){this._startVector=this._vector=J[0].sub(J[1]),this._minDiameter=J[0].dist(J[1])},tt.prototype._move=function(J,ct){var At=this._vector;if(this._vector=J[0].sub(J[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Li(this._vector,At),pinchAround:ct}},tt.prototype._isBelowThreshold=function(J){this._minDiameter=Math.min(this._minDiameter,J.mag());var ct=Math.PI*this._minDiameter,At=di/ct*360,Nt=Li(J,this._startVector);return Math.abs(Nt)<At},tt}(Zn);function Gi(H){return Math.abs(H.y)>Math.abs(H.x)}var Xi=100,In=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.reset=function(){H.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},tt.prototype._start=function(J){this._lastPoints=J,Gi(J[0].sub(J[1]))&&(this._valid=!1)},tt.prototype._move=function(J,ct,At){var Nt=J[0].sub(this._lastPoints[0]),Qt=J[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Nt,Qt,At.timeStamp),!!this._valid){this._lastPoints=J,this._active=!0;var se=(Nt.y+Qt.y)/2,be=-.5;return{pitchDelta:se*be}}},tt.prototype.gestureBeginsVertically=function(J,ct,At){if(this._valid!==void 0)return this._valid;var Nt=2,Qt=J.mag()>=Nt,se=ct.mag()>=Nt;if(!(!Qt&&!se)){if(!Qt||!se)return this._firstMove===void 0&&(this._firstMove=At),At-this._firstMove<Xi?void 0:!1;var be=J.y>0==ct.y>0;return Gi(J)&&Gi(ct)&&be}},tt}(Zn),Pi={panStep:100,bearingStep:15,pitchStep:10},Si=function(){var H=Pi;this._panStep=H.panStep,this._bearingStep=H.bearingStep,this._pitchStep=H.pitchStep};Si.prototype.reset=function(){this._active=!1},Si.prototype.keydown=function(H){var tt=this;if(!(H.altKey||H.ctrlKey||H.metaKey)){var J=0,ct=0,At=0,Nt=0,Qt=0;switch(H.keyCode){case 61:case 107:case 171:case 187:J=1;break;case 189:case 109:case 173:J=-1;break;case 37:H.shiftKey?ct=-1:(H.preventDefault(),Nt=-1);break;case 39:H.shiftKey?ct=1:(H.preventDefault(),Nt=1);break;case 38:H.shiftKey?At=1:(H.preventDefault(),Qt=-1);break;case 40:H.shiftKey?At=-1:(H.preventDefault(),Qt=1);break;default:return}return{cameraAnimation:function(se){var be=se.getZoom();se.easeTo({duration:300,easeId:"keyboardHandler",easing:zi,zoom:J?Math.round(be)+J*(H.shiftKey?2:1):be,bearing:se.getBearing()+ct*tt._bearingStep,pitch:se.getPitch()+At*tt._pitchStep,offset:[-Nt*tt._panStep,-Qt*tt._panStep],center:se.getCenter()},{originalEvent:H})}}}},Si.prototype.enable=function(){this._enabled=!0},Si.prototype.disable=function(){this._enabled=!1,this.reset()},Si.prototype.isEnabled=function(){return this._enabled},Si.prototype.isActive=function(){return this._active};function zi(H){return H*(2-H)}var ua=4.000244140625,ba=1/100,Ta=1/450,aa=2,Ki=function(H,tt){this._map=H,this._el=H.getCanvasContainer(),this._handler=tt,this._delta=0,this._defaultZoomRate=ba,this._wheelZoomRate=Ta,i.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Ki.prototype.setZoomRate=function(H){this._defaultZoomRate=H},Ki.prototype.setWheelZoomRate=function(H){this._wheelZoomRate=H},Ki.prototype.isEnabled=function(){return!!this._enabled},Ki.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Ki.prototype.isZooming=function(){return!!this._zooming},Ki.prototype.enable=function(H){this.isEnabled()||(this._enabled=!0,this._aroundCenter=H&&H.around==="center")},Ki.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ki.prototype.wheel=function(H){if(this.isEnabled()){var tt=H.deltaMode===i.window.WheelEvent.DOM_DELTA_LINE?H.deltaY*40:H.deltaY,J=i.browser.now(),ct=J-(this._lastWheelEventTime||0);this._lastWheelEventTime=J,tt!==0&&tt%ua===0?this._type="wheel":tt!==0&&Math.abs(tt)<4?this._type="trackpad":ct>400?(this._type=null,this._lastValue=tt,this._timeout=setTimeout(this._onTimeout,40,H)):this._type||(this._type=Math.abs(ct*tt)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,tt+=this._lastValue)),H.shiftKey&&tt&&(tt=tt/4),this._type&&(this._lastWheelEvent=H,this._delta-=tt,this._active||this._start(H)),H.preventDefault()}},Ki.prototype._onTimeout=function(H){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(H)},Ki.prototype._start=function(H){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var tt=A.mousePos(this._el,H);this._around=i.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(tt)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Ki.prototype.renderFrame=function(){return this._onScrollFrame()},Ki.prototype._onScrollFrame=function(){var H=this;if(this._frameId&&(this._frameId=null,!!this.isActive())){var tt=this._map.transform;if(this._delta!==0){var J=this._type==="wheel"&&Math.abs(this._delta)>ua?this._wheelZoomRate:this._defaultZoomRate,ct=aa/(1+Math.exp(-Math.abs(this._delta*J)));this._delta<0&&ct!==0&&(ct=1/ct);var At=typeof this._targetZoom=="number"?tt.zoomScale(this._targetZoom):tt.scale;this._targetZoom=Math.min(tt.maxZoom,Math.max(tt.minZoom,tt.scaleZoom(At*ct))),this._type==="wheel"&&(this._startZoom=tt.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Nt=typeof this._targetZoom=="number"?this._targetZoom:tt.zoom,Qt=this._startZoom,se=this._easing,be=!1,Ze;if(this._type==="wheel"&&Qt&&se){var or=Math.min((i.browser.now()-this._lastWheelEventTime)/200,1),nr=se(or);Ze=i.number(Qt,Nt,nr),or<1?this._frameId||(this._frameId=!0):be=!0}else Ze=Nt,be=!0;return this._active=!0,be&&(this._active=!1,this._finishTimeout=setTimeout(function(){H._zooming=!1,H._handler._triggerRenderFrame(),delete H._targetZoom,delete H._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!be,zoomDelta:Ze-tt.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Ki.prototype._smoothOutEasing=function(H){var tt=i.ease;if(this._prevEase){var J=this._prevEase,ct=(i.browser.now()-J.start)/J.duration,At=J.easing(ct+.01)-J.easing(ct),Nt=.27/Math.sqrt(At*At+1e-4)*.01,Qt=Math.sqrt(.27*.27-Nt*Nt);tt=i.bezier(Nt,Qt,.25,1)}return this._prevEase={start:i.browser.now(),duration:H,easing:tt},tt},Ki.prototype.reset=function(){this._active=!1};var oi=function(H,tt){this._clickZoom=H,this._tapZoom=tt};oi.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},oi.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},oi.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},oi.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var pi=function(){this.reset()};pi.prototype.reset=function(){this._active=!1},pi.prototype.dblclick=function(H,tt){return H.preventDefault(),{cameraAnimation:function(J){J.easeTo({duration:300,zoom:J.getZoom()+(H.shiftKey?-1:1),around:J.unproject(tt)},{originalEvent:H})}}},pi.prototype.enable=function(){this._enabled=!0},pi.prototype.disable=function(){this._enabled=!1,this.reset()},pi.prototype.isEnabled=function(){return this._enabled},pi.prototype.isActive=function(){return this._active};var oa=function(){this._tap=new Gr({numTouches:1,numTaps:1}),this.reset()};oa.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},oa.prototype.touchstart=function(H,tt,J){this._swipePoint||(this._tapTime&&H.timeStamp-this._tapTime>Ye&&this.reset(),this._tapTime?J.length>0&&(this._swipePoint=tt[0],this._swipeTouch=J[0].identifier):this._tap.touchstart(H,tt,J))},oa.prototype.touchmove=function(H,tt,J){if(!this._tapTime)this._tap.touchmove(H,tt,J);else if(this._swipePoint){if(J[0].identifier!==this._swipeTouch)return;var ct=tt[0],At=ct.y-this._swipePoint.y;return this._swipePoint=ct,H.preventDefault(),this._active=!0,{zoomDelta:At/128}}},oa.prototype.touchend=function(H,tt,J){if(this._tapTime)this._swipePoint&&J.length===0&&this.reset();else{var ct=this._tap.touchend(H,tt,J);ct&&(this._tapTime=H.timeStamp)}},oa.prototype.touchcancel=function(){this.reset()},oa.prototype.enable=function(){this._enabled=!0},oa.prototype.disable=function(){this._enabled=!1,this.reset()},oa.prototype.isEnabled=function(){return this._enabled},oa.prototype.isActive=function(){return this._active};var Aa=function(H,tt,J){this._el=H,this._mousePan=tt,this._touchPan=J};Aa.prototype.enable=function(H){this._inertiaOptions=H||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Aa.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Aa.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Aa.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var so=function(H,tt,J){this._pitchWithRotate=H.pitchWithRotate,this._mouseRotate=tt,this._mousePitch=J};so.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},so.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},so.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},so.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Oa=function(H,tt,J,ct){this._el=H,this._touchZoom=tt,this._touchRotate=J,this._tapDragZoom=ct,this._rotationDisabled=!1,this._enabled=!0};Oa.prototype.enable=function(H){this._touchZoom.enable(H),this._rotationDisabled||this._touchRotate.enable(H),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Oa.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Oa.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Oa.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Oa.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Oa.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Ya=function(H){return H.zoom||H.drag||H.pitch||H.rotate},pa=function(H){function tt(){H.apply(this,arguments)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt}(i.Event);function po(H){return H.panDelta&&H.panDelta.mag()||H.zoomDelta||H.bearingDelta||H.pitchDelta}var ta=function(H,tt){this._map=H,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new $i(H),this._bearingSnap=tt.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(tt),i.bindAll(["handleEvent","handleWindowEvent"],this);var J=this._el;this._listeners=[[J,"touchstart",{passive:!1}],[J,"touchmove",{passive:!1}],[J,"touchend",void 0],[J,"touchcancel",void 0],[J,"mousedown",void 0],[J,"mousemove",void 0],[J,"mouseup",void 0],[i.window.document,"mousemove",{capture:!0}],[i.window.document,"mouseup",void 0],[J,"mouseover",void 0],[J,"mouseout",void 0],[J,"dblclick",void 0],[J,"click",void 0],[J,"keydown",{capture:!1}],[J,"keyup",void 0],[J,"wheel",{passive:!1}],[J,"contextmenu",void 0],[i.window,"blur",void 0]];for(var ct=0,At=this._listeners;ct<At.length;ct+=1){var Nt=At[ct],Qt=Nt[0],se=Nt[1],be=Nt[2];A.addEventListener(Qt,se,Qt===i.window.document?this.handleWindowEvent:this.handleEvent,be)}};ta.prototype.destroy=function(){for(var H=0,tt=this._listeners;H<tt.length;H+=1){var J=tt[H],ct=J[0],At=J[1],Nt=J[2];A.removeEventListener(ct,At,ct===i.window.document?this.handleWindowEvent:this.handleEvent,Nt)}},ta.prototype._addDefaultHandlers=function(H){var tt=this._map,J=tt.getCanvasContainer();this._add("mapEvent",new Jt(tt,H));var ct=tt.boxZoom=new ne(tt,H);this._add("boxZoom",ct);var At=new Tr,Nt=new pi;tt.doubleClickZoom=new oi(Nt,At),this._add("tapZoom",At),this._add("clickZoom",Nt);var Qt=new oa;this._add("tapDragZoom",Qt);var se=tt.touchPitch=new In;this._add("touchPitch",se);var be=new Nr(H),Ze=new Pn(H);tt.dragRotate=new so(H,be,Ze),this._add("mouseRotate",be,["mousePitch"]),this._add("mousePitch",Ze,["mouseRotate"]);var or=new tn(H),nr=new Dn(H);tt.dragPan=new Aa(J,or,nr),this._add("mousePan",or),this._add("touchPan",nr,["touchZoom","touchRotate"]);var kr=new Zi,Er=new Ei;tt.touchZoomRotate=new Oa(J,Er,kr,Qt),this._add("touchRotate",kr,["touchPan","touchZoom"]),this._add("touchZoom",Er,["touchPan","touchRotate"]);var qr=tt.scrollZoom=new Ki(tt,this);this._add("scrollZoom",qr,["mousePan"]);var Fr=tt.keyboard=new Si;this._add("keyboard",Fr),this._add("blockableMapEvent",new ge(tt));for(var Rr=0,Xr=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Rr<Xr.length;Rr+=1){var on=Xr[Rr];H.interactive&&H[on]&&tt[on].enable(H[on])}},ta.prototype._add=function(H,tt,J){this._handlers.push({handlerName:H,handler:tt,allowed:J}),this._handlersById[H]=tt},ta.prototype.stop=function(){if(!this._updatingCamera){for(var H=0,tt=this._handlers;H<tt.length;H+=1){var J=tt[H],ct=J.handler;ct.reset()}this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},ta.prototype.isActive=function(){for(var H=0,tt=this._handlers;H<tt.length;H+=1){var J=tt[H],ct=J.handler;if(ct.isActive())return!0}return!1},ta.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ta.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ta.prototype.isMoving=function(){return!!Ya(this._eventsInProgress)||this.isZooming()},ta.prototype._blockedByActive=function(H,tt,J){for(var ct in H)if(ct!==J&&(!tt||tt.indexOf(ct)<0))return!0;return!1},ta.prototype.handleWindowEvent=function(H){this.handleEvent(H,H.type+"Window")},ta.prototype._getMapTouches=function(H){for(var tt=[],J=0,ct=H;J<ct.length;J+=1){var At=ct[J],Nt=At.target;this._el.contains(Nt)&&tt.push(At)}return tt},ta.prototype.handleEvent=function(H,tt){if(H.type==="blur"){this.stop();return}this._updatingCamera=!0;for(var J=H.type==="renderFrame"?void 0:H,ct={needsRenderFrame:!1},At={},Nt={},Qt=H.touches?this._getMapTouches(H.touches):void 0,se=Qt?A.touchPos(this._el,Qt):A.mousePos(this._el,H),be=0,Ze=this._handlers;be<Ze.length;be+=1){var or=Ze[be],nr=or.handlerName,kr=or.handler,Er=or.allowed;if(kr.isEnabled()){var qr=void 0;this._blockedByActive(Nt,Er,nr)?kr.reset():kr[tt||H.type]&&(qr=kr[tt||H.type](H,se,Qt),this.mergeHandlerResult(ct,At,qr,nr,J),qr&&qr.needsRenderFrame&&this._triggerRenderFrame()),(qr||kr.isActive())&&(Nt[nr]=kr)}}var Fr={};for(var Rr in this._previousActiveHandlers)Nt[Rr]||(Fr[Rr]=J);this._previousActiveHandlers=Nt,(Object.keys(Fr).length||po(ct))&&(this._changes.push([ct,At,Fr]),this._triggerRenderFrame()),(Object.keys(Nt).length||po(ct))&&this._map._stop(!0),this._updatingCamera=!1;var Xr=ct.cameraAnimation;Xr&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Xr(this._map))},ta.prototype.mergeHandlerResult=function(H,tt,J,ct,At){if(J){i.extend(H,J);var Nt={handlerName:ct,originalEvent:J.originalEvent||At};J.zoomDelta!==void 0&&(tt.zoom=Nt),J.panDelta!==void 0&&(tt.drag=Nt),J.pitchDelta!==void 0&&(tt.pitch=Nt),J.bearingDelta!==void 0&&(tt.rotate=Nt)}},ta.prototype._applyChanges=function(){for(var H={},tt={},J={},ct=0,At=this._changes;ct<At.length;ct+=1){var Nt=At[ct],Qt=Nt[0],se=Nt[1],be=Nt[2];Qt.panDelta&&(H.panDelta=(H.panDelta||new i.Point(0,0))._add(Qt.panDelta)),Qt.zoomDelta&&(H.zoomDelta=(H.zoomDelta||0)+Qt.zoomDelta),Qt.bearingDelta&&(H.bearingDelta=(H.bearingDelta||0)+Qt.bearingDelta),Qt.pitchDelta&&(H.pitchDelta=(H.pitchDelta||0)+Qt.pitchDelta),Qt.around!==void 0&&(H.around=Qt.around),Qt.pinchAround!==void 0&&(H.pinchAround=Qt.pinchAround),Qt.noInertia&&(H.noInertia=Qt.noInertia),i.extend(tt,se),i.extend(J,be)}this._updateMapTransform(H,tt,J),this._changes=[]},ta.prototype._updateMapTransform=function(H,tt,J){var ct=this._map,At=ct.transform;if(!po(H))return this._fireEvents(tt,J);var Nt=H.panDelta,Qt=H.zoomDelta,se=H.bearingDelta,be=H.pitchDelta,Ze=H.around,or=H.pinchAround;or!==void 0&&(Ze=or),ct._stop(!0),Ze=Ze||ct.transform.centerPoint;var nr=At.pointLocation(Nt?Ze.sub(Nt):Ze);se&&(At.bearing+=se),be&&(At.pitch+=be),Qt&&(At.zoom+=Qt),At.setLocationAtPoint(nr,Ze),this._map._update(),H.noInertia||this._inertia.record(H),this._fireEvents(tt,J)},ta.prototype._fireEvents=function(H,tt){var J=this,ct=Ya(this._eventsInProgress),At=Ya(H),Nt={};for(var Qt in H){var se=H[Qt],be=se.originalEvent;this._eventsInProgress[Qt]||(Nt[Qt+"start"]=be),this._eventsInProgress[Qt]=H[Qt]}!ct&&At&&this._fireEvent("movestart",At.originalEvent);for(var Ze in Nt)this._fireEvent(Ze,Nt[Ze]);H.rotate&&(this._bearingChanged=!0),At&&this._fireEvent("move",At.originalEvent);for(var or in H){var nr=H[or],kr=nr.originalEvent;this._fireEvent(or,kr)}var Er={},qr;for(var Fr in this._eventsInProgress){var Rr=this._eventsInProgress[Fr],Xr=Rr.handlerName,on=Rr.originalEvent;this._handlersById[Xr].isActive()||(delete this._eventsInProgress[Fr],qr=tt[Xr]||on,Er[Fr+"end"]=qr)}for(var Cn in Er)this._fireEvent(Cn,Er[Cn]);var En=Ya(this._eventsInProgress);if((ct||At)&&!En){this._updatingCamera=!0;var Fn=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Nn=function(jn){return jn!==0&&-J._bearingSnap<jn&&jn<J._bearingSnap};Fn?(Nn(Fn.bearing||this._map.getBearing())&&(Fn.bearing=0),this._map.easeTo(Fn,{originalEvent:qr})):(this._map.fire(new i.Event("moveend",{originalEvent:qr})),Nn(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},ta.prototype._fireEvent=function(H,tt){this._map.fire(new i.Event(H,tt?{originalEvent:tt}:{}))},ta.prototype._triggerRenderFrame=function(){var H=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(tt){delete H._frameId,H.handleEvent(new pa("renderFrame",{timeStamp:tt})),H._applyChanges()}))};var No=function(H){function tt(J,ct){H.call(this),this._moving=!1,this._zooming=!1,this.transform=J,this._bearingSnap=ct.bearingSnap,i.bindAll(["_renderFrameCallback"],this)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.getCenter=function(){return new i.LngLat(this.transform.center.lng,this.transform.center.lat)},tt.prototype.setCenter=function(J,ct){return this.jumpTo({center:J},ct)},tt.prototype.panBy=function(J,ct,At){return J=i.Point.convert(J).mult(-1),this.panTo(this.transform.center,i.extend({offset:J},ct),At)},tt.prototype.panTo=function(J,ct,At){return this.easeTo(i.extend({center:J},ct),At)},tt.prototype.getZoom=function(){return this.transform.zoom},tt.prototype.setZoom=function(J,ct){return this.jumpTo({zoom:J},ct),this},tt.prototype.zoomTo=function(J,ct,At){return this.easeTo(i.extend({zoom:J},ct),At)},tt.prototype.zoomIn=function(J,ct){return this.zoomTo(this.getZoom()+1,J,ct),this},tt.prototype.zoomOut=function(J,ct){return this.zoomTo(this.getZoom()-1,J,ct),this},tt.prototype.getBearing=function(){return this.transform.bearing},tt.prototype.setBearing=function(J,ct){return this.jumpTo({bearing:J},ct),this},tt.prototype.getPadding=function(){return this.transform.padding},tt.prototype.setPadding=function(J,ct){return this.jumpTo({padding:J},ct),this},tt.prototype.rotateTo=function(J,ct,At){return this.easeTo(i.extend({bearing:J},ct),At)},tt.prototype.resetNorth=function(J,ct){return this.rotateTo(0,i.extend({duration:1e3},J),ct),this},tt.prototype.resetNorthPitch=function(J,ct){return this.easeTo(i.extend({bearing:0,pitch:0,duration:1e3},J),ct),this},tt.prototype.snapToNorth=function(J,ct){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(J,ct):this},tt.prototype.getPitch=function(){return this.transform.pitch},tt.prototype.setPitch=function(J,ct){return this.jumpTo({pitch:J},ct),this},tt.prototype.cameraForBounds=function(J,ct){return J=i.LngLatBounds.convert(J),this._cameraForBoxAndBearing(J.getNorthWest(),J.getSouthEast(),0,ct)},tt.prototype._cameraForBoxAndBearing=function(J,ct,At,Nt){var Qt={top:0,bottom:0,right:0,left:0};if(Nt=i.extend({padding:Qt,offset:[0,0],maxZoom:this.transform.maxZoom},Nt),typeof Nt.padding=="number"){var se=Nt.padding;Nt.padding={top:se,bottom:se,right:se,left:se}}Nt.padding=i.extend(Qt,Nt.padding);var be=this.transform,Ze=be.padding,or=be.project(i.LngLat.convert(J)),nr=be.project(i.LngLat.convert(ct)),kr=or.rotate(-At*Math.PI/180),Er=nr.rotate(-At*Math.PI/180),qr=new i.Point(Math.max(kr.x,Er.x),Math.max(kr.y,Er.y)),Fr=new i.Point(Math.min(kr.x,Er.x),Math.min(kr.y,Er.y)),Rr=qr.sub(Fr),Xr=(be.width-(Ze.left+Ze.right+Nt.padding.left+Nt.padding.right))/Rr.x,on=(be.height-(Ze.top+Ze.bottom+Nt.padding.top+Nt.padding.bottom))/Rr.y;if(on<0||Xr<0){i.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var Cn=Math.min(be.scaleZoom(be.scale*Math.min(Xr,on)),Nt.maxZoom),En=i.Point.convert(Nt.offset),Fn=(Nt.padding.left-Nt.padding.right)/2,Nn=(Nt.padding.top-Nt.padding.bottom)/2,jn=new i.Point(En.x+Fn,En.y+Nn),ai=jn.mult(be.scale/be.zoomScale(Cn)),ni=be.unproject(or.add(nr).div(2).sub(ai));return{center:ni,zoom:Cn,bearing:At}},tt.prototype.fitBounds=function(J,ct,At){return this._fitInternal(this.cameraForBounds(J,ct),ct,At)},tt.prototype.fitScreenCoordinates=function(J,ct,At,Nt,Qt){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(i.Point.convert(J)),this.transform.pointLocation(i.Point.convert(ct)),At,Nt),Nt,Qt)},tt.prototype._fitInternal=function(J,ct,At){return J?(ct=i.extend(J,ct),delete ct.padding,ct.linear?this.easeTo(ct,At):this.flyTo(ct,At)):this},tt.prototype.jumpTo=function(J,ct){this.stop();var At=this.transform,Nt=!1,Qt=!1,se=!1;return"zoom"in J&&At.zoom!==+J.zoom&&(Nt=!0,At.zoom=+J.zoom),J.center!==void 0&&(At.center=i.LngLat.convert(J.center)),"bearing"in J&&At.bearing!==+J.bearing&&(Qt=!0,At.bearing=+J.bearing),"pitch"in J&&At.pitch!==+J.pitch&&(se=!0,At.pitch=+J.pitch),J.padding!=null&&!At.isPaddingEqual(J.padding)&&(At.padding=J.padding),this.fire(new i.Event("movestart",ct)).fire(new i.Event("move",ct)),Nt&&this.fire(new i.Event("zoomstart",ct)).fire(new i.Event("zoom",ct)).fire(new i.Event("zoomend",ct)),Qt&&this.fire(new i.Event("rotatestart",ct)).fire(new i.Event("rotate",ct)).fire(new i.Event("rotateend",ct)),se&&this.fire(new i.Event("pitchstart",ct)).fire(new i.Event("pitch",ct)).fire(new i.Event("pitchend",ct)),this.fire(new i.Event("moveend",ct))},tt.prototype.easeTo=function(J,ct){var At=this;this._stop(!1,J.easeId),J=i.extend({offset:[0,0],duration:500,easing:i.ease},J),(J.animate===!1||!J.essential&&i.browser.prefersReducedMotion)&&(J.duration=0);var Nt=this.transform,Qt=this.getZoom(),se=this.getBearing(),be=this.getPitch(),Ze=this.getPadding(),or="zoom"in J?+J.zoom:Qt,nr="bearing"in J?this._normalizeBearing(J.bearing,se):se,kr="pitch"in J?+J.pitch:be,Er="padding"in J?J.padding:Nt.padding,qr=i.Point.convert(J.offset),Fr=Nt.centerPoint.add(qr),Rr=Nt.pointLocation(Fr),Xr=i.LngLat.convert(J.center||Rr);this._normalizeCenter(Xr);var on=Nt.project(Rr),Cn=Nt.project(Xr).sub(on),En=Nt.zoomScale(or-Qt),Fn,Nn;J.around&&(Fn=i.LngLat.convert(J.around),Nn=Nt.locationPoint(Fn));var jn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||or!==Qt,this._rotating=this._rotating||se!==nr,this._pitching=this._pitching||kr!==be,this._padding=!Nt.isPaddingEqual(Er),this._easeId=J.easeId,this._prepareEase(ct,J.noMoveStart,jn),clearTimeout(this._easeEndTimeoutID),this._ease(function(ai){if(At._zooming&&(Nt.zoom=i.number(Qt,or,ai)),At._rotating&&(Nt.bearing=i.number(se,nr,ai)),At._pitching&&(Nt.pitch=i.number(be,kr,ai)),At._padding&&(Nt.interpolatePadding(Ze,Er,ai),Fr=Nt.centerPoint.add(qr)),Fn)Nt.setLocationAtPoint(Fn,Nn);else{var ni=Nt.zoomScale(Nt.zoom-Qt),hi=or>Qt?Math.min(2,En):Math.max(.5,En),ti=Math.pow(hi,1-ai),fi=Nt.unproject(on.add(Cn.mult(ai*ti)).mult(ni));Nt.setLocationAtPoint(Nt.renderWorldCopies?fi.wrap():fi,Fr)}At._fireMoveEvents(ct)},function(ai){At._afterEase(ct,ai)},J),this},tt.prototype._prepareEase=function(J,ct,At){At===void 0&&(At={}),this._moving=!0,!ct&&!At.moving&&this.fire(new i.Event("movestart",J)),this._zooming&&!At.zooming&&this.fire(new i.Event("zoomstart",J)),this._rotating&&!At.rotating&&this.fire(new i.Event("rotatestart",J)),this._pitching&&!At.pitching&&this.fire(new i.Event("pitchstart",J))},tt.prototype._fireMoveEvents=function(J){this.fire(new i.Event("move",J)),this._zooming&&this.fire(new i.Event("zoom",J)),this._rotating&&this.fire(new i.Event("rotate",J)),this._pitching&&this.fire(new i.Event("pitch",J))},tt.prototype._afterEase=function(J,ct){if(!(this._easeId&&ct&&this._easeId===ct)){delete this._easeId;var At=this._zooming,Nt=this._rotating,Qt=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,At&&this.fire(new i.Event("zoomend",J)),Nt&&this.fire(new i.Event("rotateend",J)),Qt&&this.fire(new i.Event("pitchend",J)),this.fire(new i.Event("moveend",J))}},tt.prototype.flyTo=function(J,ct){var At=this;if(!J.essential&&i.browser.prefersReducedMotion){var Nt=i.pick(J,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Nt,ct)}this.stop(),J=i.extend({offset:[0,0],speed:1.2,curve:1.42,easing:i.ease},J);var Qt=this.transform,se=this.getZoom(),be=this.getBearing(),Ze=this.getPitch(),or=this.getPadding(),nr="zoom"in J?i.clamp(+J.zoom,Qt.minZoom,Qt.maxZoom):se,kr="bearing"in J?this._normalizeBearing(J.bearing,be):be,Er="pitch"in J?+J.pitch:Ze,qr="padding"in J?J.padding:Qt.padding,Fr=Qt.zoomScale(nr-se),Rr=i.Point.convert(J.offset),Xr=Qt.centerPoint.add(Rr),on=Qt.pointLocation(Xr),Cn=i.LngLat.convert(J.center||on);this._normalizeCenter(Cn);var En=Qt.project(on),Fn=Qt.project(Cn).sub(En),Nn=J.curve,jn=Math.max(Qt.width,Qt.height),ai=jn/Fr,ni=Fn.mag();if("minZoom"in J){var hi=i.clamp(Math.min(J.minZoom,se,nr),Qt.minZoom,Qt.maxZoom),ti=jn/Qt.zoomScale(hi-se);Nn=Math.sqrt(ti/ni*2)}var fi=Nn*Nn;function Ci(Ai){var Ni=(ai*ai-jn*jn+(Ai?-1:1)*fi*fi*ni*ni)/(2*(Ai?ai:jn)*fi*ni);return Math.log(Math.sqrt(Ni*Ni+1)-Ni)}function Di(Ai){return(Math.exp(Ai)-Math.exp(-Ai))/2}function Mi(Ai){return(Math.exp(Ai)+Math.exp(-Ai))/2}function qi(Ai){return Di(Ai)/Mi(Ai)}var Oi=Ci(0),Ii=function(Ai){return Mi(Oi)/Mi(Oi+Nn*Ai)},Ji=function(Ai){return jn*((Mi(Oi)*qi(Oi+Nn*Ai)-Di(Oi))/fi)/ni},ea=(Ci(1)-Oi)/Nn;if(Math.abs(ni)<1e-6||!isFinite(ea)){if(Math.abs(jn-ai)<1e-6)return this.easeTo(J,ct);var Fi=ai<jn?-1:1;ea=Math.abs(Math.log(ai/jn))/Nn,Ji=function(){return 0},Ii=function(Ai){return Math.exp(Fi*Nn*Ai)}}if("duration"in J)J.duration=+J.duration;else{var ca="screenSpeed"in J?+J.screenSpeed/Nn:+J.speed;J.duration=1e3*ea/ca}return J.maxDuration&&J.duration>J.maxDuration&&(J.duration=0),this._zooming=!0,this._rotating=be!==kr,this._pitching=Er!==Ze,this._padding=!Qt.isPaddingEqual(qr),this._prepareEase(ct,!1),this._ease(function(Ai){var Ni=Ai*ea,Sa=1/Ii(Ni);Qt.zoom=Ai===1?nr:se+Qt.scaleZoom(Sa),At._rotating&&(Qt.bearing=i.number(be,kr,Ai)),At._pitching&&(Qt.pitch=i.number(Ze,Er,Ai)),At._padding&&(Qt.interpolatePadding(or,qr,Ai),Xr=Qt.centerPoint.add(Rr));var Fa=Ai===1?Cn:Qt.unproject(En.add(Fn.mult(Ji(Ni))).mult(Sa));Qt.setLocationAtPoint(Qt.renderWorldCopies?Fa.wrap():Fa,Xr),At._fireMoveEvents(ct)},function(){return At._afterEase(ct)},J),this},tt.prototype.isEasing=function(){return!!this._easeFrameId},tt.prototype.stop=function(){return this._stop()},tt.prototype._stop=function(J,ct){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var At=this._onEaseEnd;delete this._onEaseEnd,At.call(this,ct)}if(!J){var Nt=this.handlers;Nt&&Nt.stop()}return this},tt.prototype._ease=function(J,ct,At){At.animate===!1||At.duration===0?(J(1),ct()):(this._easeStart=i.browser.now(),this._easeOptions=At,this._onEaseFrame=J,this._onEaseEnd=ct,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},tt.prototype._renderFrameCallback=function(){var J=Math.min((i.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(J)),J<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},tt.prototype._normalizeBearing=function(J,ct){J=i.wrap(J,-180,180);var At=Math.abs(J-ct);return Math.abs(J-360-ct)<At&&(J-=360),Math.abs(J+360-ct)<At&&(J+=360),J},tt.prototype._normalizeCenter=function(J){var ct=this.transform;if(!(!ct.renderWorldCopies||ct.lngRange)){var At=J.lng-ct.center.lng;J.lng+=At>180?-360:At<-180?360:0}},tt}(i.Evented),vo=function(H){H===void 0&&(H={}),this.options=H,i.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};vo.prototype.getDefaultPosition=function(){return"bottom-right"},vo.prototype.onAdd=function(H){var tt=this.options&&this.options.compact;return this._map=H,this._container=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=A.create("div","mapboxgl-ctrl-attrib-inner",this._container),tt&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),tt===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},vo.prototype.onRemove=function(){A.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},vo.prototype._updateEditLink=function(){var H=this._editLink;H||(H=this._editLink=this._container.querySelector(".mapbox-improve-map"));var tt=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||i.config.ACCESS_TOKEN}];if(H){var J=tt.reduce(function(ct,At,Nt){return At.value&&(ct+=At.key+"="+At.value+(Nt<tt.length-1?"&":"")),ct},"?");H.href=i.config.FEEDBACK_URL+"/"+J+(this._map._hash?this._map._hash.getHashString(!0):""),H.rel="noopener nofollow"}},vo.prototype._updateData=function(H){H&&(H.sourceDataType==="metadata"||H.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},vo.prototype._updateAttributions=function(){if(this._map.style){var H=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?H=H.concat(this.options.customAttribution.map(function(se){return typeof se!="string"?"":se})):typeof this.options.customAttribution=="string"&&H.push(this.options.customAttribution)),this._map.style.stylesheet){var tt=this._map.style.stylesheet;this.styleOwner=tt.owner,this.styleId=tt.id}var J=this._map.style.sourceCaches;for(var ct in J){var At=J[ct];if(At.used){var Nt=At.getSource();Nt.attribution&&H.indexOf(Nt.attribution)<0&&H.push(Nt.attribution)}}H.sort(function(se,be){return se.length-be.length}),H=H.filter(function(se,be){for(var Ze=be+1;Ze<H.length;Ze++)if(H[Ze].indexOf(se)>=0)return!1;return!0});var Qt=H.join(" | ");Qt!==this._attribHTML&&(this._attribHTML=Qt,H.length?(this._innerContainer.innerHTML=Qt,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},vo.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Bi=function(){i.bindAll(["_updateLogo"],this),i.bindAll(["_updateCompact"],this)};Bi.prototype.onAdd=function(H){this._map=H,this._container=A.create("div","mapboxgl-ctrl");var tt=A.create("a","mapboxgl-ctrl-logo");return tt.target="_blank",tt.rel="noopener nofollow",tt.href="https://www.mapbox.com/",tt.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),tt.setAttribute("rel","noopener nofollow"),this._container.appendChild(tt),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Bi.prototype.onRemove=function(){A.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Bi.prototype.getDefaultPosition=function(){return"bottom-left"},Bi.prototype._updateLogo=function(H){(!H||H.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},Bi.prototype._logoRequired=function(){if(this._map.style){var H=this._map.style.sourceCaches;for(var tt in H){var J=H[tt].getSource();if(J.mapbox_logo)return!0}return!1}},Bi.prototype._updateCompact=function(){var H=this._container.children;if(H.length){var tt=H[0];this._map.getCanvasContainer().offsetWidth<250?tt.classList.add("mapboxgl-compact"):tt.classList.remove("mapboxgl-compact")}};var sa=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};sa.prototype.add=function(H){var tt=++this._id,J=this._queue;return J.push({callback:H,id:tt,cancelled:!1}),tt},sa.prototype.remove=function(H){for(var tt=this._currentlyRunning,J=tt?this._queue.concat(tt):this._queue,ct=0,At=J;ct<At.length;ct+=1){var Nt=At[ct];if(Nt.id===H){Nt.cancelled=!0;return}}},sa.prototype.run=function(H){H===void 0&&(H=0);var tt=this._currentlyRunning=this._queue;this._queue=[];for(var J=0,ct=tt;J<ct.length;J+=1){var At=ct[J];if(!At.cancelled&&(At.callback(H),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},sa.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Ru={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},du=i.window.HTMLImageElement,mc=i.window.HTMLElement,zl=i.window.ImageBitmap,Bu=-2,Pc=22,So=0,Dl=60,tf={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:Bu,maxZoom:Pc,minPitch:So,maxPitch:Dl,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},ef=function(H){function tt(ct){var At=this;if(ct=i.extend({},tf,ct),ct.minZoom!=null&&ct.maxZoom!=null&&ct.minZoom>ct.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(ct.minPitch!=null&&ct.maxPitch!=null&&ct.minPitch>ct.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(ct.minPitch!=null&&ct.minPitch<So)throw new Error("minPitch must be greater than or equal to "+So);if(ct.maxPitch!=null&&ct.maxPitch>Dl)throw new Error("maxPitch must be less than or equal to "+Dl);var Nt=new dn(ct.minZoom,ct.maxZoom,ct.minPitch,ct.maxPitch,ct.renderWorldCopies);if(H.call(this,Nt,ct),this._interactive=ct.interactive,this._maxTileCacheSize=ct.maxTileCacheSize,this._failIfMajorPerformanceCaveat=ct.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=ct.preserveDrawingBuffer,this._antialias=ct.antialias,this._trackResize=ct.trackResize,this._bearingSnap=ct.bearingSnap,this._refreshExpiredTiles=ct.refreshExpiredTiles,this._fadeDuration=ct.fadeDuration,this._crossSourceCollisions=ct.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=ct.collectResourceTiming,this._renderTaskQueue=new sa,this._controls=[],this._mapId=i.uniqueId(),this._locale=i.extend({},Ru,ct.locale),this._requestManager=new i.RequestManager(ct.transformRequest,ct.accessToken),typeof ct.container=="string"){if(this._container=i.window.document.getElementById(ct.container),!this._container)throw new Error("Container '"+ct.container+"' not found.")}else if(ct.container instanceof mc)this._container=ct.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(ct.maxBounds&&this.setMaxBounds(ct.maxBounds),i.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return At._update(!1)}),this.on("moveend",function(){return At._update(!1)}),this.on("zoom",function(){return At._update(!0)}),typeof i.window<"u"&&(i.window.addEventListener("online",this._onWindowOnline,!1),i.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new ta(this,ct);var Qt=typeof ct.hash=="string"&&ct.hash||void 0;this._hash=ct.hash&&new vi(Qt).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:ct.center,zoom:ct.zoom,bearing:ct.bearing,pitch:ct.pitch}),ct.bounds&&(this.resize(),this.fitBounds(ct.bounds,i.extend({},ct.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=ct.localIdeographFontFamily,ct.style&&this.setStyle(ct.style,{localIdeographFontFamily:ct.localIdeographFontFamily}),ct.attributionControl&&this.addControl(new vo({customAttribution:ct.customAttribution})),this.addControl(new Bi,ct.logoPosition),this.on("style.load",function(){At.transform.unmodified&&At.jumpTo(At.style.stylesheet)}),this.on("data",function(se){At._update(se.dataType==="style"),At.fire(new i.Event(se.dataType+"data",se))}),this.on("dataloading",function(se){At.fire(new i.Event(se.dataType+"dataloading",se))})}H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt;var J={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return tt.prototype._getMapId=function(){return this._mapId},tt.prototype.addControl=function(ct,At){if(At===void 0&&ct.getDefaultPosition&&(At=ct.getDefaultPosition()),At===void 0&&(At="top-right"),!ct||!ct.onAdd)return this.fire(new i.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Nt=ct.onAdd(this);this._controls.push(ct);var Qt=this._controlPositions[At];return At.indexOf("bottom")!==-1?Qt.insertBefore(Nt,Qt.firstChild):Qt.appendChild(Nt),this},tt.prototype.removeControl=function(ct){if(!ct||!ct.onRemove)return this.fire(new i.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var At=this._controls.indexOf(ct);return At>-1&&this._controls.splice(At,1),ct.onRemove(this),this},tt.prototype.resize=function(ct){var At=this._containerDimensions(),Nt=At[0],Qt=At[1];this._resizeCanvas(Nt,Qt),this.transform.resize(Nt,Qt),this.painter.resize(Nt,Qt);var se=!this._moving;return se&&(this.stop(),this.fire(new i.Event("movestart",ct)).fire(new i.Event("move",ct))),this.fire(new i.Event("resize",ct)),se&&this.fire(new i.Event("moveend",ct)),this},tt.prototype.getBounds=function(){return this.transform.getBounds()},tt.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},tt.prototype.setMaxBounds=function(ct){return this.transform.setMaxBounds(i.LngLatBounds.convert(ct)),this._update()},tt.prototype.setMinZoom=function(ct){if(ct=ct??Bu,ct>=Bu&&ct<=this.transform.maxZoom)return this.transform.minZoom=ct,this._update(),this.getZoom()<ct&&this.setZoom(ct),this;throw new Error("minZoom must be between "+Bu+" and the current maxZoom, inclusive")},tt.prototype.getMinZoom=function(){return this.transform.minZoom},tt.prototype.setMaxZoom=function(ct){if(ct=ct??Pc,ct>=this.transform.minZoom)return this.transform.maxZoom=ct,this._update(),this.getZoom()>ct&&this.setZoom(ct),this;throw new Error("maxZoom must be greater than the current minZoom")},tt.prototype.getMaxZoom=function(){return this.transform.maxZoom},tt.prototype.setMinPitch=function(ct){if(ct=ct??So,ct<So)throw new Error("minPitch must be greater than or equal to "+So);if(ct>=So&&ct<=this.transform.maxPitch)return this.transform.minPitch=ct,this._update(),this.getPitch()<ct&&this.setPitch(ct),this;throw new Error("minPitch must be between "+So+" and the current maxPitch, inclusive")},tt.prototype.getMinPitch=function(){return this.transform.minPitch},tt.prototype.setMaxPitch=function(ct){if(ct=ct??Dl,ct>Dl)throw new Error("maxPitch must be less than or equal to "+Dl);if(ct>=this.transform.minPitch)return this.transform.maxPitch=ct,this._update(),this.getPitch()>ct&&this.setPitch(ct),this;throw new Error("maxPitch must be greater than the current minPitch")},tt.prototype.getMaxPitch=function(){return this.transform.maxPitch},tt.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},tt.prototype.setRenderWorldCopies=function(ct){return this.transform.renderWorldCopies=ct,this._update()},tt.prototype.project=function(ct){return this.transform.locationPoint(i.LngLat.convert(ct))},tt.prototype.unproject=function(ct){return this.transform.pointLocation(i.Point.convert(ct))},tt.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},tt.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},tt.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},tt.prototype._createDelegatedListener=function(ct,At,Nt){var Qt=this,se;if(ct==="mouseenter"||ct==="mouseover"){var be=!1,Ze=function(Fr){var Rr=Qt.getLayer(At)?Qt.queryRenderedFeatures(Fr.point,{layers:[At]}):[];Rr.length?be||(be=!0,Nt.call(Qt,new Ct(ct,Qt,Fr.originalEvent,{features:Rr}))):be=!1},or=function(){be=!1};return{layer:At,listener:Nt,delegates:{mousemove:Ze,mouseout:or}}}else if(ct==="mouseleave"||ct==="mouseout"){var nr=!1,kr=function(Fr){var Rr=Qt.getLayer(At)?Qt.queryRenderedFeatures(Fr.point,{layers:[At]}):[];Rr.length?nr=!0:nr&&(nr=!1,Nt.call(Qt,new Ct(ct,Qt,Fr.originalEvent)))},Er=function(Fr){nr&&(nr=!1,Nt.call(Qt,new Ct(ct,Qt,Fr.originalEvent)))};return{layer:At,listener:Nt,delegates:{mousemove:kr,mouseout:Er}}}else{var qr=function(Fr){var Rr=Qt.getLayer(At)?Qt.queryRenderedFeatures(Fr.point,{layers:[At]}):[];Rr.length&&(Fr.features=Rr,Nt.call(Qt,Fr),delete Fr.features)};return{layer:At,listener:Nt,delegates:(se={},se[ct]=qr,se)}}},tt.prototype.on=function(ct,At,Nt){if(Nt===void 0)return H.prototype.on.call(this,ct,At);var Qt=this._createDelegatedListener(ct,At,Nt);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[ct]=this._delegatedListeners[ct]||[],this._delegatedListeners[ct].push(Qt);for(var se in Qt.delegates)this.on(se,Qt.delegates[se]);return this},tt.prototype.once=function(ct,At,Nt){if(Nt===void 0)return H.prototype.once.call(this,ct,At);var Qt=this._createDelegatedListener(ct,At,Nt);for(var se in Qt.delegates)this.once(se,Qt.delegates[se]);return this},tt.prototype.off=function(ct,At,Nt){var Qt=this;if(Nt===void 0)return H.prototype.off.call(this,ct,At);var se=function(be){for(var Ze=be[ct],or=0;or<Ze.length;or++){var nr=Ze[or];if(nr.layer===At&&nr.listener===Nt){for(var kr in nr.delegates)Qt.off(kr,nr.delegates[kr]);return Ze.splice(or,1),Qt}}};return this._delegatedListeners&&this._delegatedListeners[ct]&&se(this._delegatedListeners),this},tt.prototype.queryRenderedFeatures=function(ct,At){if(!this.style)return[];At===void 0&&ct!==void 0&&!(ct instanceof i.Point)&&!Array.isArray(ct)&&(At=ct,ct=void 0),At=At||{},ct=ct||[[0,0],[this.transform.width,this.transform.height]];var Nt;if(ct instanceof i.Point||typeof ct[0]=="number")Nt=[i.Point.convert(ct)];else{var Qt=i.Point.convert(ct[0]),se=i.Point.convert(ct[1]);Nt=[Qt,new i.Point(se.x,Qt.y),se,new i.Point(Qt.x,se.y),Qt]}return this.style.queryRenderedFeatures(Nt,At,this.transform)},tt.prototype.querySourceFeatures=function(ct,At){return this.style.querySourceFeatures(ct,At)},tt.prototype.setStyle=function(ct,At){return At=i.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},At),At.diff!==!1&&At.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&ct?(this._diffStyle(ct,At),this):(this._localIdeographFontFamily=At.localIdeographFontFamily,this._updateStyle(ct,At))},tt.prototype._getUIString=function(ct){var At=this._locale[ct];if(At==null)throw new Error("Missing UI string '"+ct+"'");return At},tt.prototype._updateStyle=function(ct,At){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),ct)this.style=new Ga(this,At||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof ct=="string"?this.style.loadURL(ct):this.style.loadJSON(ct),this},tt.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ga(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},tt.prototype._diffStyle=function(ct,At){var Nt=this;if(typeof ct=="string"){var Qt=this._requestManager.normalizeStyleURL(ct),se=this._requestManager.transformRequest(Qt,i.ResourceType.Style);i.getJSON(se,function(be,Ze){be?Nt.fire(new i.ErrorEvent(be)):Ze&&Nt._updateDiff(Ze,At)})}else typeof ct=="object"&&this._updateDiff(ct,At)},tt.prototype._updateDiff=function(ct,At){try{this.style.setState(ct)&&this._update(!0)}catch(Nt){i.warnOnce("Unable to perform style diff: "+(Nt.message||Nt.error||Nt)+".  Rebuilding the style from scratch."),this._updateStyle(ct,At)}},tt.prototype.getStyle=function(){if(this.style)return this.style.serialize()},tt.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():i.warnOnce("There is no style added to the map.")},tt.prototype.addSource=function(ct,At){return this._lazyInitEmptyStyle(),this.style.addSource(ct,At),this._update(!0)},tt.prototype.isSourceLoaded=function(ct){var At=this.style&&this.style.sourceCaches[ct];if(At===void 0){this.fire(new i.ErrorEvent(new Error("There is no source with ID '"+ct+"'")));return}return At.loaded()},tt.prototype.areTilesLoaded=function(){var ct=this.style&&this.style.sourceCaches;for(var At in ct){var Nt=ct[At],Qt=Nt._tiles;for(var se in Qt){var be=Qt[se];if(!(be.state==="loaded"||be.state==="errored"))return!1}}return!0},tt.prototype.addSourceType=function(ct,At,Nt){return this._lazyInitEmptyStyle(),this.style.addSourceType(ct,At,Nt)},tt.prototype.removeSource=function(ct){return this.style.removeSource(ct),this._update(!0)},tt.prototype.getSource=function(ct){return this.style.getSource(ct)},tt.prototype.addImage=function(ct,At,Nt){Nt===void 0&&(Nt={});var Qt=Nt.pixelRatio;Qt===void 0&&(Qt=1);var se=Nt.sdf;se===void 0&&(se=!1);var be=Nt.stretchX,Ze=Nt.stretchY,or=Nt.content;this._lazyInitEmptyStyle();var nr=0;if(At instanceof du||zl&&At instanceof zl){var kr=i.browser.getImageData(At),Er=kr.width,qr=kr.height,Fr=kr.data;this.style.addImage(ct,{data:new i.RGBAImage({width:Er,height:qr},Fr),pixelRatio:Qt,stretchX:be,stretchY:Ze,content:or,sdf:se,version:nr})}else{if(At.width===void 0||At.height===void 0)return this.fire(new i.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Rr=At.width,Xr=At.height,on=At.data,Cn=At;this.style.addImage(ct,{data:new i.RGBAImage({width:Rr,height:Xr},new Uint8Array(on)),pixelRatio:Qt,stretchX:be,stretchY:Ze,content:or,sdf:se,version:nr,userImage:Cn}),Cn.onAdd&&Cn.onAdd(this,ct)}},tt.prototype.updateImage=function(ct,At){var Nt=this.style.getImage(ct);if(!Nt)return this.fire(new i.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Qt=At instanceof du||zl&&At instanceof zl?i.browser.getImageData(At):At,se=Qt.width,be=Qt.height,Ze=Qt.data;if(se===void 0||be===void 0)return this.fire(new i.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(se!==Nt.data.width||be!==Nt.data.height)return this.fire(new i.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var or=!(At instanceof du||zl&&At instanceof zl);Nt.data.replace(Ze,or),this.style.updateImage(ct,Nt)},tt.prototype.hasImage=function(ct){return ct?!!this.style.getImage(ct):(this.fire(new i.ErrorEvent(new Error("Missing required image id"))),!1)},tt.prototype.removeImage=function(ct){this.style.removeImage(ct)},tt.prototype.loadImage=function(ct,At){i.getImage(this._requestManager.transformRequest(ct,i.ResourceType.Image),At)},tt.prototype.listImages=function(){return this.style.listImages()},tt.prototype.addLayer=function(ct,At){return this._lazyInitEmptyStyle(),this.style.addLayer(ct,At),this._update(!0)},tt.prototype.moveLayer=function(ct,At){return this.style.moveLayer(ct,At),this._update(!0)},tt.prototype.removeLayer=function(ct){return this.style.removeLayer(ct),this._update(!0)},tt.prototype.getLayer=function(ct){return this.style.getLayer(ct)},tt.prototype.setLayerZoomRange=function(ct,At,Nt){return this.style.setLayerZoomRange(ct,At,Nt),this._update(!0)},tt.prototype.setFilter=function(ct,At,Nt){return Nt===void 0&&(Nt={}),this.style.setFilter(ct,At,Nt),this._update(!0)},tt.prototype.getFilter=function(ct){return this.style.getFilter(ct)},tt.prototype.setPaintProperty=function(ct,At,Nt,Qt){return Qt===void 0&&(Qt={}),this.style.setPaintProperty(ct,At,Nt,Qt),this._update(!0)},tt.prototype.getPaintProperty=function(ct,At){return this.style.getPaintProperty(ct,At)},tt.prototype.setLayoutProperty=function(ct,At,Nt,Qt){return Qt===void 0&&(Qt={}),this.style.setLayoutProperty(ct,At,Nt,Qt),this._update(!0)},tt.prototype.getLayoutProperty=function(ct,At){return this.style.getLayoutProperty(ct,At)},tt.prototype.setLight=function(ct,At){return At===void 0&&(At={}),this._lazyInitEmptyStyle(),this.style.setLight(ct,At),this._update(!0)},tt.prototype.getLight=function(){return this.style.getLight()},tt.prototype.setFeatureState=function(ct,At){return this.style.setFeatureState(ct,At),this._update()},tt.prototype.removeFeatureState=function(ct,At){return this.style.removeFeatureState(ct,At),this._update()},tt.prototype.getFeatureState=function(ct){return this.style.getFeatureState(ct)},tt.prototype.getContainer=function(){return this._container},tt.prototype.getCanvasContainer=function(){return this._canvasContainer},tt.prototype.getCanvas=function(){return this._canvas},tt.prototype._containerDimensions=function(){var ct=0,At=0;return this._container&&(ct=this._container.clientWidth||400,At=this._container.clientHeight||300),[ct,At]},tt.prototype._detectMissingCSS=function(){var ct=i.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");ct!=="rgb(250, 128, 114)"&&i.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},tt.prototype._setupContainer=function(){var ct=this._container;ct.classList.add("mapboxgl-map");var At=this._missingCSSCanary=A.create("div","mapboxgl-canary",ct);At.style.visibility="hidden",this._detectMissingCSS();var Nt=this._canvasContainer=A.create("div","mapboxgl-canvas-container",ct);this._interactive&&Nt.classList.add("mapboxgl-interactive"),this._canvas=A.create("canvas","mapboxgl-canvas",Nt),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Qt=this._containerDimensions();this._resizeCanvas(Qt[0],Qt[1]);var se=this._controlContainer=A.create("div","mapboxgl-control-container",ct),be=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Ze){be[Ze]=A.create("div","mapboxgl-ctrl-"+Ze,se)})},tt.prototype._resizeCanvas=function(ct,At){var Nt=i.browser.devicePixelRatio||1;this._canvas.width=Nt*ct,this._canvas.height=Nt*At,this._canvas.style.width=ct+"px",this._canvas.style.height=At+"px"},tt.prototype._setupPainter=function(){var ct=i.extend({},S.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),At=this._canvas.getContext("webgl",ct)||this._canvas.getContext("experimental-webgl",ct);if(!At){this.fire(new i.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new br(At,this.transform),i.webpSupported.testSupport(At)},tt.prototype._contextLost=function(ct){ct.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new i.Event("webglcontextlost",{originalEvent:ct}))},tt.prototype._contextRestored=function(ct){this._setupPainter(),this.resize(),this._update(),this.fire(new i.Event("webglcontextrestored",{originalEvent:ct}))},tt.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},tt.prototype._update=function(ct){return this.style?(this._styleDirty=this._styleDirty||ct,this._sourcesDirty=!0,this.triggerRepaint(),this):this},tt.prototype._requestRenderFrame=function(ct){return this._update(),this._renderTaskQueue.add(ct)},tt.prototype._cancelRenderFrame=function(ct){this._renderTaskQueue.remove(ct)},tt.prototype._render=function(ct){var At=this,Nt,Qt=0,se=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Nt=se.createQueryEXT(),se.beginQueryEXT(se.TIME_ELAPSED_EXT,Nt),Qt=i.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(ct),!this._removed){var be=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Ze=this.transform.zoom,or=i.browser.now();this.style.zoomHistory.update(Ze,or);var nr=new i.EvaluationParameters(Ze,{now:or,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),kr=nr.crossFadingFactor();(kr!==1||kr!==this._crossFadingFactor)&&(be=!0,this._crossFadingFactor=kr),this.style.update(nr)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new i.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new i.Event("load"))),this.style&&(this.style.hasTransitions()||be)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Er=i.browser.now()-Qt;se.endQueryEXT(se.TIME_ELAPSED_EXT,Nt),setTimeout(function(){var Rr=se.getQueryObjectEXT(Nt,se.QUERY_RESULT_EXT)/1e6;se.deleteQueryEXT(Nt),At.fire(new i.Event("gpu-timing-frame",{cpuTime:Er,gpuTime:Rr}))},50)}if(this.listens("gpu-timing-layer")){var qr=this.painter.collectGpuTimers();setTimeout(function(){var Rr=At.painter.queryGpuTimers(qr);At.fire(new i.Event("gpu-timing-layer",{layerTimes:Rr}))},50)}var Fr=this._sourcesDirty||this._styleDirty||this._placementDirty;return Fr||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new i.Event("idle"))),this}},tt.prototype.remove=function(){this._hash&&this._hash.remove();for(var ct=0,At=this._controls;ct<At.length;ct+=1){var Nt=At[ct];Nt.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof i.window<"u"&&(i.window.removeEventListener("resize",this._onWindowResize,!1),i.window.removeEventListener("online",this._onWindowOnline,!1));var Qt=this.painter.context.gl.getExtension("WEBGL_lose_context");Qt&&Qt.loseContext(),yc(this._canvasContainer),yc(this._controlContainer),yc(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new i.Event("remove"))},tt.prototype.triggerRepaint=function(){var ct=this;this.style&&!this._frame&&(this._frame=i.browser.frame(function(At){ct._frame=null,ct._render(At)}))},tt.prototype._onWindowOnline=function(){this._update()},tt.prototype._onWindowResize=function(ct){this._trackResize&&this.resize({originalEvent:ct})._update()},J.showTileBoundaries.get=function(){return!!this._showTileBoundaries},J.showTileBoundaries.set=function(ct){this._showTileBoundaries!==ct&&(this._showTileBoundaries=ct,this._update())},J.showPadding.get=function(){return!!this._showPadding},J.showPadding.set=function(ct){this._showPadding!==ct&&(this._showPadding=ct,this._update())},J.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},J.showCollisionBoxes.set=function(ct){this._showCollisionBoxes!==ct&&(this._showCollisionBoxes=ct,ct?this.style._generateCollisionBoxes():this._update())},J.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},J.showOverdrawInspector.set=function(ct){this._showOverdrawInspector!==ct&&(this._showOverdrawInspector=ct,this._update())},J.repaint.get=function(){return!!this._repaint},J.repaint.set=function(ct){this._repaint!==ct&&(this._repaint=ct,this.triggerRepaint())},J.vertices.get=function(){return!!this._vertices},J.vertices.set=function(ct){this._vertices=ct,this._update()},tt.prototype._setCacheLimits=function(ct,At){i.setCacheLimits(ct,At)},J.version.get=function(){return i.version},Object.defineProperties(tt.prototype,J),tt}(No);function yc(H){H.parentNode&&H.parentNode.removeChild(H)}var Ec={showCompass:!0,showZoom:!0,visualizePitch:!1},ul=function(H){var tt=this;this.options=i.extend({},Ec,H),this._container=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(J){return J.preventDefault()}),this.options.showZoom&&(i.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(J){return tt._map.zoomIn({},{originalEvent:J})}),A.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(J){return tt._map.zoomOut({},{originalEvent:J})}),A.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(i.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(J){tt.options.visualizePitch?tt._map.resetNorthPitch({},{originalEvent:J}):tt._map.resetNorth({},{originalEvent:J})}),this._compassIcon=A.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ul.prototype._updateZoomButtons=function(){var H=this._map.getZoom();this._zoomInButton.disabled=H===this._map.getMaxZoom(),this._zoomOutButton.disabled=H===this._map.getMinZoom()},ul.prototype._rotateCompassArrow=function(){var H=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=H},ul.prototype.onAdd=function(H){return this._map=H,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new jo(this._map,this._compass,this.options.visualizePitch)),this._container},ul.prototype.onRemove=function(){A.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ul.prototype._createButton=function(H,tt){var J=A.create("button",H,this._container);return J.type="button",J.addEventListener("click",tt),J},ul.prototype._setButtonTitle=function(H,tt){var J=this._map._getUIString("NavigationControl."+tt);H.title=J,H.setAttribute("aria-label",J)};var jo=function(H,tt,J){J===void 0&&(J=!1),this._clickTolerance=10,this.element=tt,this.mouseRotate=new Nr({clickTolerance:H.dragRotate._mouseRotate._clickTolerance}),this.map=H,J&&(this.mousePitch=new Pn({clickTolerance:H.dragRotate._mousePitch._clickTolerance})),i.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),A.addEventListener(tt,"mousedown",this.mousedown),A.addEventListener(tt,"touchstart",this.touchstart,{passive:!1}),A.addEventListener(tt,"touchmove",this.touchmove),A.addEventListener(tt,"touchend",this.touchend),A.addEventListener(tt,"touchcancel",this.reset)};jo.prototype.down=function(H,tt){this.mouseRotate.mousedown(H,tt),this.mousePitch&&this.mousePitch.mousedown(H,tt),A.disableDrag()},jo.prototype.move=function(H,tt){var J=this.map,ct=this.mouseRotate.mousemoveWindow(H,tt);if(ct&&ct.bearingDelta&&J.setBearing(J.getBearing()+ct.bearingDelta),this.mousePitch){var At=this.mousePitch.mousemoveWindow(H,tt);At&&At.pitchDelta&&J.setPitch(J.getPitch()+At.pitchDelta)}},jo.prototype.off=function(){var H=this.element;A.removeEventListener(H,"mousedown",this.mousedown),A.removeEventListener(H,"touchstart",this.touchstart,{passive:!1}),A.removeEventListener(H,"touchmove",this.touchmove),A.removeEventListener(H,"touchend",this.touchend),A.removeEventListener(H,"touchcancel",this.reset),this.offTemp()},jo.prototype.offTemp=function(){A.enableDrag(),A.removeEventListener(i.window,"mousemove",this.mousemove),A.removeEventListener(i.window,"mouseup",this.mouseup)},jo.prototype.mousedown=function(H){this.down(i.extend({},H,{ctrlKey:!0,preventDefault:function(){return H.preventDefault()}}),A.mousePos(this.element,H)),A.addEventListener(i.window,"mousemove",this.mousemove),A.addEventListener(i.window,"mouseup",this.mouseup)},jo.prototype.mousemove=function(H){this.move(H,A.mousePos(this.element,H))},jo.prototype.mouseup=function(H){this.mouseRotate.mouseupWindow(H),this.mousePitch&&this.mousePitch.mouseupWindow(H),this.offTemp()},jo.prototype.touchstart=function(H){H.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=A.touchPos(this.element,H.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return H.preventDefault()}},this._startPos))},jo.prototype.touchmove=function(H){H.targetTouches.length!==1?this.reset():(this._lastPos=A.touchPos(this.element,H.targetTouches)[0],this.move({preventDefault:function(){return H.preventDefault()}},this._lastPos))},jo.prototype.touchend=function(H){H.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},jo.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function cl(H,tt,J){if(H=new i.LngLat(H.lng,H.lat),tt){var ct=new i.LngLat(H.lng-360,H.lat),At=new i.LngLat(H.lng+360,H.lat),Nt=J.locationPoint(H).distSqr(tt);J.locationPoint(ct).distSqr(tt)<Nt?H=ct:J.locationPoint(At).distSqr(tt)<Nt&&(H=At)}for(;Math.abs(H.lng-J.center.lng)>180;){var Qt=J.locationPoint(H);if(Qt.x>=0&&Qt.y>=0&&Qt.x<=J.width&&Qt.y<=J.height)break;H.lng>J.center.lng?H.lng-=360:H.lng+=360}return H}var xc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Cc(H,tt,J){var ct=H.classList;for(var At in xc)ct.remove("mapboxgl-"+J+"-anchor-"+At);ct.add("mapboxgl-"+J+"-anchor-"+tt)}var Nu=function(H){function tt(J,ct){var At=this;if(H.call(this),(J instanceof i.window.HTMLElement||ct)&&(J=i.extend({element:J},ct)),i.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=J&&J.anchor||"center",this._color=J&&J.color||"#3FB1CE",this._draggable=J&&J.draggable||!1,this._state="inactive",this._rotation=J&&J.rotation||0,this._rotationAlignment=J&&J.rotationAlignment||"auto",this._pitchAlignment=J&&J.pitchAlignment&&J.pitchAlignment!=="auto"?J.pitchAlignment:this._rotationAlignment,!J||!J.element){this._defaultMarker=!0,this._element=A.create("div"),this._element.setAttribute("aria-label","Map marker");var Nt=A.createNS("http://www.w3.org/2000/svg","svg");Nt.setAttributeNS(null,"display","block"),Nt.setAttributeNS(null,"height","41px"),Nt.setAttributeNS(null,"width","27px"),Nt.setAttributeNS(null,"viewBox","0 0 27 41");var Qt=A.createNS("http://www.w3.org/2000/svg","g");Qt.setAttributeNS(null,"stroke","none"),Qt.setAttributeNS(null,"stroke-width","1"),Qt.setAttributeNS(null,"fill","none"),Qt.setAttributeNS(null,"fill-rule","evenodd");var se=A.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"fill-rule","nonzero");var be=A.createNS("http://www.w3.org/2000/svg","g");be.setAttributeNS(null,"transform","translate(3.0, 29.0)"),be.setAttributeNS(null,"fill","#000000");for(var Ze=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],or=0,nr=Ze;or<nr.length;or+=1){var kr=nr[or],Er=A.createNS("http://www.w3.org/2000/svg","ellipse");Er.setAttributeNS(null,"opacity","0.04"),Er.setAttributeNS(null,"cx","10.5"),Er.setAttributeNS(null,"cy","5.80029008"),Er.setAttributeNS(null,"rx",kr.rx),Er.setAttributeNS(null,"ry",kr.ry),be.appendChild(Er)}var qr=A.createNS("http://www.w3.org/2000/svg","g");qr.setAttributeNS(null,"fill",this._color);var Fr=A.createNS("http://www.w3.org/2000/svg","path");Fr.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),qr.appendChild(Fr);var Rr=A.createNS("http://www.w3.org/2000/svg","g");Rr.setAttributeNS(null,"opacity","0.25"),Rr.setAttributeNS(null,"fill","#000000");var Xr=A.createNS("http://www.w3.org/2000/svg","path");Xr.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Rr.appendChild(Xr);var on=A.createNS("http://www.w3.org/2000/svg","g");on.setAttributeNS(null,"transform","translate(6.0, 7.0)"),on.setAttributeNS(null,"fill","#FFFFFF");var Cn=A.createNS("http://www.w3.org/2000/svg","g");Cn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var En=A.createNS("http://www.w3.org/2000/svg","circle");En.setAttributeNS(null,"fill","#000000"),En.setAttributeNS(null,"opacity","0.25"),En.setAttributeNS(null,"cx","5.5"),En.setAttributeNS(null,"cy","5.5"),En.setAttributeNS(null,"r","5.4999962");var Fn=A.createNS("http://www.w3.org/2000/svg","circle");Fn.setAttributeNS(null,"fill","#FFFFFF"),Fn.setAttributeNS(null,"cx","5.5"),Fn.setAttributeNS(null,"cy","5.5"),Fn.setAttributeNS(null,"r","5.4999962"),Cn.appendChild(En),Cn.appendChild(Fn),se.appendChild(be),se.appendChild(qr),se.appendChild(Rr),se.appendChild(on),se.appendChild(Cn),Nt.appendChild(se),this._element.appendChild(Nt),this._offset=i.Point.convert(J&&J.offset||[0,-14])}else this._element=J.element,this._offset=i.Point.convert(J&&J.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Nn){Nn.preventDefault()}),this._element.addEventListener("mousedown",function(Nn){Nn.preventDefault()}),this._element.addEventListener("focus",function(){var Nn=At._map.getContainer();Nn.scrollTop=0,Nn.scrollLeft=0}),Cc(this._element,this._anchor,"marker"),this._popup=null}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.addTo=function(J){return this.remove(),this._map=J,J.getCanvasContainer().appendChild(this._element),J.on("move",this._update),J.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},tt.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),A.remove(this._element),this._popup&&this._popup.remove(),this},tt.prototype.getLngLat=function(){return this._lngLat},tt.prototype.setLngLat=function(J){return this._lngLat=i.LngLat.convert(J),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},tt.prototype.getElement=function(){return this._element},tt.prototype.setPopup=function(J){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),J){if(!("offset"in J.options)){var ct=38.1,At=13.5,Nt=Math.sqrt(Math.pow(At,2)/2);J.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-ct],"bottom-left":[Nt,(ct-At+Nt)*-1],"bottom-right":[-Nt,(ct-At+Nt)*-1],left:[At,(ct-At)*-1],right:[-At,(ct-At)*-1]}:this._offset}this._popup=J,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},tt.prototype._onKeyPress=function(J){var ct=J.code,At=J.charCode||J.keyCode;(ct==="Space"||ct==="Enter"||At===32||At===13)&&this.togglePopup()},tt.prototype._onMapClick=function(J){var ct=J.originalEvent.target,At=this._element;this._popup&&(ct===At||At.contains(ct))&&this.togglePopup()},tt.prototype.getPopup=function(){return this._popup},tt.prototype.togglePopup=function(){var J=this._popup;if(J)J.isOpen()?J.remove():J.addTo(this._map);else return this;return this},tt.prototype._update=function(J){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=cl(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var ct="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?ct="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(ct="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var At="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?At="rotateX(0deg)":this._pitchAlignment==="map"&&(At="rotateX("+this._map.getPitch()+"deg)"),(!J||J.type==="moveend")&&(this._pos=this._pos.round()),A.setTransform(this._element,xc[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+At+" "+ct)}},tt.prototype.getOffset=function(){return this._offset},tt.prototype.setOffset=function(J){return this._offset=i.Point.convert(J),this._update(),this},tt.prototype._onMove=function(J){this._pos=J.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new i.Event("dragstart"))),this.fire(new i.Event("drag"))},tt.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new i.Event("dragend")),this._state="inactive"},tt.prototype._addDragHandler=function(J){this._element.contains(J.originalEvent.target)&&(J.preventDefault(),this._positionDelta=J.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},tt.prototype.setDraggable=function(J){return this._draggable=!!J,this._map&&(J?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},tt.prototype.isDraggable=function(){return this._draggable},tt.prototype.setRotation=function(J){return this._rotation=J||0,this._update(),this},tt.prototype.getRotation=function(){return this._rotation},tt.prototype.setRotationAlignment=function(J){return this._rotationAlignment=J||"auto",this._update(),this},tt.prototype.getRotationAlignment=function(){return this._rotationAlignment},tt.prototype.setPitchAlignment=function(J){return this._pitchAlignment=J&&J!=="auto"?J:this._rotationAlignment,this._update(),this},tt.prototype.getPitchAlignment=function(){return this._pitchAlignment},tt}(i.Evented),rf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Fl;function bc(H){Fl!==void 0?H(Fl):i.window.navigator.permissions!==void 0?i.window.navigator.permissions.query({name:"geolocation"}).then(function(tt){Fl=tt.state!=="denied",H(Fl)}):(Fl=!!i.window.navigator.geolocation,H(Fl))}var ju=0,Rl=!1,nf=function(H){function tt(J){H.call(this),this.options=i.extend({},rf,J),i.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.onAdd=function(J){return this._map=J,this._container=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),bc(this._setupUI),this._container},tt.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(i.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),A.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ju=0,Rl=!1},tt.prototype._isOutOfMapMaxBounds=function(J){var ct=this._map.getMaxBounds(),At=J.coords;return ct&&(At.longitude<ct.getWest()||At.longitude>ct.getEast()||At.latitude<ct.getSouth()||At.latitude>ct.getNorth())},tt.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},tt.prototype._onSuccess=function(J){if(this._map){if(this._isOutOfMapMaxBounds(J)){this._setErrorState(),this.fire(new i.Event("outofmaxbounds",J)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=J,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(J),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(J),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new i.Event("geolocate",J)),this._finish()}},tt.prototype._updateCamera=function(J){var ct=new i.LngLat(J.coords.longitude,J.coords.latitude),At=J.coords.accuracy,Nt=this._map.getBearing(),Qt=i.extend({bearing:Nt},this.options.fitBoundsOptions);this._map.fitBounds(ct.toBounds(At),Qt,{geolocateSource:!0})},tt.prototype._updateMarker=function(J){if(J){var ct=new i.LngLat(J.coords.longitude,J.coords.latitude);this._accuracyCircleMarker.setLngLat(ct).addTo(this._map),this._userLocationDotMarker.setLngLat(ct).addTo(this._map),this._accuracy=J.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},tt.prototype._updateCircleRadius=function(){var J=this._map._container.clientHeight/2,ct=this._map.unproject([0,J]),At=this._map.unproject([1,J]),Nt=ct.distanceTo(At),Qt=Math.ceil(2*this._accuracy/Nt);this._circleElement.style.width=Qt+"px",this._circleElement.style.height=Qt+"px"},tt.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},tt.prototype._onError=function(J){if(this._map){if(this.options.trackUserLocation)if(J.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var ct=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=ct,this._geolocateButton.setAttribute("aria-label",ct),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(J.code===3&&Rl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new i.Event("error",J)),this._finish()}},tt.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},tt.prototype._setupUI=function(J){var ct=this;if(this._container.addEventListener("contextmenu",function(Qt){return Qt.preventDefault()}),this._geolocateButton=A.create("button","mapboxgl-ctrl-geolocate",this._container),A.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",J===!1){i.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var At=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=At,this._geolocateButton.setAttribute("aria-label",At)}else{var Nt=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Nt,this._geolocateButton.setAttribute("aria-label",Nt)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=A.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Nu(this._dotElement),this._circleElement=A.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Nu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Qt){var se=Qt.originalEvent&&Qt.originalEvent.type==="resize";!Qt.geolocateSource&&ct._watchState==="ACTIVE_LOCK"&&!se&&(ct._watchState="BACKGROUND",ct._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),ct._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),ct.fire(new i.Event("trackuserlocationend")))})},tt.prototype.trigger=function(){if(!this._setup)return i.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ju--,Rl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new i.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ju++;var J;ju>1?(J={maximumAge:6e5,timeout:0},Rl=!0):(J=this.options.positionOptions,Rl=!1),this._geolocationWatchID=i.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,J)}}else i.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},tt.prototype._clearWatch=function(){i.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},tt}(i.Evented),Af={maxWidth:100,unit:"metric"},Bl=function(H){this.options=i.extend({},Af,H),i.bindAll(["_onMove","setUnit"],this)};Bl.prototype.getDefaultPosition=function(){return"bottom-left"},Bl.prototype._onMove=function(){af(this._map,this._container,this.options)},Bl.prototype.onAdd=function(H){return this._map=H,this._container=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",H.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Bl.prototype.onRemove=function(){A.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Bl.prototype.setUnit=function(H){this.options.unit=H,af(this._map,this._container,this.options)};function af(H,tt,J){var ct=J&&J.maxWidth||100,At=H._container.clientHeight/2,Nt=H.unproject([0,At]),Qt=H.unproject([ct,At]),se=Nt.distanceTo(Qt);if(J&&J.unit==="imperial"){var be=3.2808*se;if(be>5280){var Ze=be/5280;Uu(tt,ct,Ze,H._getUIString("ScaleControl.Miles"))}else Uu(tt,ct,be,H._getUIString("ScaleControl.Feet"))}else if(J&&J.unit==="nautical"){var or=se/1852;Uu(tt,ct,or,H._getUIString("ScaleControl.NauticalMiles"))}else se>=1e3?Uu(tt,ct,se/1e3,H._getUIString("ScaleControl.Kilometers")):Uu(tt,ct,se,H._getUIString("ScaleControl.Meters"))}function Uu(H,tt,J,ct){var At=kf(J),Nt=At/J;H.style.width=tt*Nt+"px",H.innerHTML=At+"&nbsp;"+ct}function Tf(H){var tt=Math.pow(10,Math.ceil(-Math.log(H)/Math.LN10));return Math.round(H*tt)/tt}function kf(H){var tt=Math.pow(10,(""+Math.floor(H)).length-1),J=H/tt;return J=J>=10?10:J>=5?5:J>=3?3:J>=2?2:J>=1?1:Tf(J),tt*J}var Ls=function(H){this._fullscreen=!1,H&&H.container&&(H.container instanceof i.window.HTMLElement?this._container=H.container:i.warnOnce("Full screen control 'container' must be a DOM element.")),i.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in i.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in i.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in i.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in i.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ls.prototype.onAdd=function(H){return this._map=H,this._container||(this._container=this._map.getContainer()),this._controlContainer=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",i.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ls.prototype.onRemove=function(){A.remove(this._controlContainer),this._map=null,i.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ls.prototype._checkFullscreenSupport=function(){return!!(i.window.document.fullscreenEnabled||i.window.document.mozFullScreenEnabled||i.window.document.msFullscreenEnabled||i.window.document.webkitFullscreenEnabled)},Ls.prototype._setupUI=function(){var H=this._fullscreenButton=A.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);A.create("span","mapboxgl-ctrl-icon",H).setAttribute("aria-hidden",!0),H.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),i.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ls.prototype._updateTitle=function(){var H=this._getTitle();this._fullscreenButton.setAttribute("aria-label",H),this._fullscreenButton.title=H},Ls.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ls.prototype._isFullscreen=function(){return this._fullscreen},Ls.prototype._changeIcon=function(){var H=i.window.document.fullscreenElement||i.window.document.mozFullScreenElement||i.window.document.webkitFullscreenElement||i.window.document.msFullscreenElement;H===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ls.prototype._onClickFullscreen=function(){this._isFullscreen()?i.window.document.exitFullscreen?i.window.document.exitFullscreen():i.window.document.mozCancelFullScreen?i.window.document.mozCancelFullScreen():i.window.document.msExitFullscreen?i.window.document.msExitFullscreen():i.window.document.webkitCancelFullScreen&&i.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Mf={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Sf=function(H){function tt(J){H.call(this),this.options=i.extend(Object.create(Mf),J),i.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return H&&(tt.__proto__=H),tt.prototype=Object.create(H&&H.prototype),tt.prototype.constructor=tt,tt.prototype.addTo=function(J){return this._map&&this.remove(),this._map=J,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new i.Event("open")),this},tt.prototype.isOpen=function(){return!!this._map},tt.prototype.remove=function(){return this._content&&A.remove(this._content),this._container&&(A.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new i.Event("close")),this},tt.prototype.getLngLat=function(){return this._lngLat},tt.prototype.setLngLat=function(J){return this._lngLat=i.LngLat.convert(J),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},tt.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},tt.prototype.getElement=function(){return this._container},tt.prototype.setText=function(J){return this.setDOMContent(i.window.document.createTextNode(J))},tt.prototype.setHTML=function(J){var ct=i.window.document.createDocumentFragment(),At=i.window.document.createElement("body"),Nt;for(At.innerHTML=J;Nt=At.firstChild,!!Nt;)ct.appendChild(Nt);return this.setDOMContent(ct)},tt.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},tt.prototype.setMaxWidth=function(J){return this.options.maxWidth=J,this._update(),this},tt.prototype.setDOMContent=function(J){return this._createContent(),this._content.appendChild(J),this._update(),this},tt.prototype.addClassName=function(J){this._container&&this._container.classList.add(J)},tt.prototype.removeClassName=function(J){this._container&&this._container.classList.remove(J)},tt.prototype.toggleClassName=function(J){if(this._container)return this._container.classList.toggle(J)},tt.prototype._createContent=function(){this._content&&A.remove(this._content),this._content=A.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=A.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},tt.prototype._onMouseUp=function(J){this._update(J.point)},tt.prototype._onMouseMove=function(J){this._update(J.point)},tt.prototype._onDrag=function(J){this._update(J.point)},tt.prototype._update=function(J){var ct=this,At=this._lngLat||this._trackPointer;if(!(!this._map||!At||!this._content)&&(this._container||(this._container=A.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=A.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(kr){return ct._container.classList.add(kr)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=cl(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!J))){var Nt=this._pos=this._trackPointer&&J?J:this._map.project(this._lngLat),Qt=this.options.anchor,se=of(this.options.offset);if(!Qt){var be=this._container.offsetWidth,Ze=this._container.offsetHeight,or;Nt.y+se.bottom.y<Ze?or=["top"]:Nt.y>this._map.transform.height-Ze?or=["bottom"]:or=[],Nt.x<be/2?or.push("left"):Nt.x>this._map.transform.width-be/2&&or.push("right"),or.length===0?Qt="bottom":Qt=or.join("-")}var nr=Nt.add(se[Qt]).round();A.setTransform(this._container,xc[Qt]+" translate("+nr.x+"px,"+nr.y+"px)"),Cc(this._container,Qt,"popup")}},tt.prototype._onClose=function(){this.remove()},tt}(i.Evented);function of(H){if(H)if(typeof H=="number"){var tt=Math.round(Math.sqrt(.5*Math.pow(H,2)));return{center:new i.Point(0,0),top:new i.Point(0,H),"top-left":new i.Point(tt,tt),"top-right":new i.Point(-tt,tt),bottom:new i.Point(0,-H),"bottom-left":new i.Point(tt,-tt),"bottom-right":new i.Point(-tt,-tt),left:new i.Point(H,0),right:new i.Point(-H,0)}}else if(H instanceof i.Point||Array.isArray(H)){var J=i.Point.convert(H);return{center:J,top:J,"top-left":J,"top-right":J,bottom:J,"bottom-left":J,"bottom-right":J,left:J,right:J}}else return{center:i.Point.convert(H.center||[0,0]),top:i.Point.convert(H.top||[0,0]),"top-left":i.Point.convert(H["top-left"]||[0,0]),"top-right":i.Point.convert(H["top-right"]||[0,0]),bottom:i.Point.convert(H.bottom||[0,0]),"bottom-left":i.Point.convert(H["bottom-left"]||[0,0]),"bottom-right":i.Point.convert(H["bottom-right"]||[0,0]),left:i.Point.convert(H.left||[0,0]),right:i.Point.convert(H.right||[0,0])};else return of(new i.Point(0,0))}var Lf={version:i.version,supported:S,setRTLTextPlugin:i.setRTLTextPlugin,getRTLTextPluginStatus:i.getRTLTextPluginStatus,Map:ef,NavigationControl:ul,GeolocateControl:nf,AttributionControl:vo,ScaleControl:Bl,FullscreenControl:Ls,Popup:Sf,Marker:Nu,Style:Ga,LngLat:i.LngLat,LngLatBounds:i.LngLatBounds,Point:i.Point,MercatorCoordinate:i.MercatorCoordinate,Evented:i.Evented,config:i.config,prewarm:Se,clearPrewarmedResources:Be,get accessToken(){return i.config.ACCESS_TOKEN},set accessToken(H){i.config.ACCESS_TOKEN=H},get baseApiUrl(){return i.config.API_URL},set baseApiUrl(H){i.config.API_URL=H},get workerCount(){return xr.workerCount},set workerCount(H){xr.workerCount=H},get maxParallelImageRequests(){return i.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(H){i.config.MAX_PARALLEL_IMAGE_REQUESTS=H},clearStorage:function(H){i.clearTileCache(H)},workerUrl:""};return Lf}),M})},27084:function($){$.exports=Math.log2||function(U){return Math.log(U)*Math.LOG2E}},16825:function($,U,t){$.exports=E;var M=t(74311);function E(i,S){S||(S=i,i=window);var A=0,g=0,v=0,e={shift:!1,alt:!1,control:!1,meta:!1},r=!1;function f(T){var k=!1;return"altKey"in T&&(k=k||T.altKey!==e.alt,e.alt=!!T.altKey),"shiftKey"in T&&(k=k||T.shiftKey!==e.shift,e.shift=!!T.shiftKey),"ctrlKey"in T&&(k=k||T.ctrlKey!==e.control,e.control=!!T.ctrlKey),"metaKey"in T&&(k=k||T.metaKey!==e.meta,e.meta=!!T.metaKey),k}function n(T,k){var _=M.x(k),b=M.y(k);"buttons"in k&&(T=k.buttons|0),(T!==A||_!==g||b!==v||f(k))&&(A=T|0,g=_||0,v=b||0,S&&S(A,g,v,e))}function a(T){n(0,T)}function o(){(A||g||v||e.shift||e.alt||e.meta||e.control)&&(g=v=0,A=0,e.shift=e.alt=e.control=e.meta=!1,S&&S(0,0,0,e))}function h(T){f(T)&&S&&S(A,g,v,e)}function y(T){M.buttons(T)===0?n(0,T):n(A,T)}function p(T){n(A|M.buttons(T),T)}function x(T){n(A&~M.buttons(T),T)}function s(){r||(r=!0,i.addEventListener("mousemove",y),i.addEventListener("mousedown",p),i.addEventListener("mouseup",x),i.addEventListener("mouseleave",a),i.addEventListener("mouseenter",a),i.addEventListener("mouseout",a),i.addEventListener("mouseover",a),i.addEventListener("blur",o),i.addEventListener("keyup",h),i.addEventListener("keydown",h),i.addEventListener("keypress",h),i!==window&&(window.addEventListener("blur",o),window.addEventListener("keyup",h),window.addEventListener("keydown",h),window.addEventListener("keypress",h)))}function u(){r&&(r=!1,i.removeEventListener("mousemove",y),i.removeEventListener("mousedown",p),i.removeEventListener("mouseup",x),i.removeEventListener("mouseleave",a),i.removeEventListener("mouseenter",a),i.removeEventListener("mouseout",a),i.removeEventListener("mouseover",a),i.removeEventListener("blur",o),i.removeEventListener("keyup",h),i.removeEventListener("keydown",h),i.removeEventListener("keypress",h),i!==window&&(window.removeEventListener("blur",o),window.removeEventListener("keyup",h),window.removeEventListener("keydown",h),window.removeEventListener("keypress",h)))}s();var c={element:i};return Object.defineProperties(c,{enabled:{get:function(){return r},set:function(T){T?s():u()},enumerable:!0},buttons:{get:function(){return A},enumerable:!0},x:{get:function(){return g},enumerable:!0},y:{get:function(){return v},enumerable:!0},mods:{get:function(){return e},enumerable:!0}}),c}},48956:function($){var U={left:0,top:0};$.exports=t;function t(E,i,S){i=i||E.currentTarget||E.srcElement,Array.isArray(S)||(S=[0,0]);var A=E.clientX||0,g=E.clientY||0,v=M(i);return S[0]=A-v.left,S[1]=g-v.top,S}function M(E){return E===window||E===document||E===document.body?U:E.getBoundingClientRect()}},74311:function($,U){function t(S){if(typeof S=="object"){if("buttons"in S)return S.buttons;if("which"in S){var A=S.which;if(A===2)return 4;if(A===3)return 2;if(A>0)return 1<<A-1}else if("button"in S){var A=S.button;if(A===1)return 4;if(A===2)return 2;if(A>=0)return 1<<A}}return 0}U.buttons=t;function M(S){return S.target||S.srcElement||window}U.element=M;function E(S){if(typeof S=="object"){if("offsetX"in S)return S.offsetX;var A=M(S),g=A.getBoundingClientRect();return S.clientX-g.left}return 0}U.x=E;function i(S){if(typeof S=="object"){if("offsetY"in S)return S.offsetY;var A=M(S),g=A.getBoundingClientRect();return S.clientY-g.top}return 0}U.y=i},1195:function($,U,t){var M=t(75686);$.exports=E;function E(i,S,A){typeof i=="function"&&(A=!!S,S=i,i=window);var g=M("ex",i),v=function(e){A&&e.preventDefault();var r=e.deltaX||0,f=e.deltaY||0,n=e.deltaZ||0,a=e.deltaMode,o=1;switch(a){case 1:o=g;break;case 2:o=window.innerHeight;break}if(r*=o,f*=o,n*=o,r||f||n)return S(r,f,n,e)};return i.addEventListener("wheel",v),v}},7417:function($,U,t){var M;(function(E,i,S){i[E]=i[E]||S(),$.exports?$.exports=i[E]:(M=(function(){return i[E]}).call(U,t,U,$),M!==void 0&&($.exports=M))})("Promise",typeof t.g<"u"?t.g:this,function(){var E,i,S,A=Object.prototype.toString,g=typeof setImmediate<"u"?function(s){return setImmediate(s)}:setTimeout;try{Object.defineProperty({},"x",{}),E=function(s,u,c,T){return Object.defineProperty(s,u,{value:c,writable:!0,configurable:T!==!1})}}catch{E=function(s,u,c){return s[u]=c,s}}S=function(){var s,u,c;function T(k,_){this.fn=k,this.self=_,this.next=void 0}return{add:function(k,_){c=new T(k,_),u?u.next=c:s=c,u=c,c=void 0},drain:function(){var k=s;for(s=u=i=void 0;k;)k.fn.call(k.self),k=k.next}}}();function v(s,u){S.add(s,u),i||(i=g(S.drain))}function e(s){var u,c=typeof s;return s!=null&&(c=="object"||c=="function")&&(u=s.then),typeof u=="function"?u:!1}function r(){for(var s=0;s<this.chain.length;s++)f(this,this.state===1?this.chain[s].success:this.chain[s].failure,this.chain[s]);this.chain.length=0}function f(s,u,c){var T,k;try{u===!1?c.reject(s.msg):(u===!0?T=s.msg:T=u.call(void 0,s.msg),T===c.promise?c.reject(TypeError("Promise-chain cycle")):(k=e(T))?k.call(T,c.resolve,c.reject):c.resolve(T))}catch(_){c.reject(_)}}function n(s){var u,c=this;if(!c.triggered){c.triggered=!0,c.def&&(c=c.def);try{(u=e(s))?v(function(){var T=new h(c);try{u.call(s,function(){n.apply(T,arguments)},function(){a.apply(T,arguments)})}catch(k){a.call(T,k)}}):(c.msg=s,c.state=1,c.chain.length>0&&v(r,c))}catch(T){a.call(new h(c),T)}}}function a(s){var u=this;u.triggered||(u.triggered=!0,u.def&&(u=u.def),u.msg=s,u.state=2,u.chain.length>0&&v(r,u))}function o(s,u,c,T){for(var k=0;k<u.length;k++)(function(_){s.resolve(u[_]).then(function(b){c(_,b)},T)})(k)}function h(s){this.def=s,this.triggered=!1}function y(s){this.promise=s,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function p(s){if(typeof s!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var u=new y(this);this.then=function(c,T){var k={success:typeof c=="function"?c:!0,failure:typeof T=="function"?T:!1};return k.promise=new this.constructor(function(_,b){if(typeof _!="function"||typeof b!="function")throw TypeError("Not a function");k.resolve=_,k.reject=b}),u.chain.push(k),u.state!==0&&v(r,u),k.promise},this.catch=function(c){return this.then(void 0,c)};try{s.call(void 0,function(c){n.call(u,c)},function(c){a.call(u,c)})}catch(c){a.call(u,c)}}var x=E({},"constructor",p,!1);return p.prototype=x,E(x,"__NPO__",0,!1),E(p,"resolve",function(s){var u=this;return s&&typeof s=="object"&&s.__NPO__===1?s:new u(function(c,T){if(typeof c!="function"||typeof T!="function")throw TypeError("Not a function");c(s)})}),E(p,"reject",function(s){return new this(function(u,c){if(typeof u!="function"||typeof c!="function")throw TypeError("Not a function");c(s)})}),E(p,"all",function(s){var u=this;return A.call(s)!="[object Array]"?u.reject(TypeError("Not an array")):s.length===0?u.resolve([]):new u(function(c,T){if(typeof c!="function"||typeof T!="function")throw TypeError("Not a function");var k=s.length,_=Array(k),b=0;o(u,s,function(P,l){_[P]=l,++b===k&&c(_)},T)})}),E(p,"race",function(s){var u=this;return A.call(s)!="[object Array]"?u.reject(TypeError("Not an array")):new u(function(c,T){if(typeof c!="function"||typeof T!="function")throw TypeError("Not a function");o(u,s,function(k,_){c(_)},T)})}),p})},18625:function($){var U=Math.PI,t=g(120);$.exports=M;function M(v){for(var e,r=[],f=0,n=0,a=0,o=0,h=null,y=null,p=0,x=0,s=0,u=v.length;s<u;s++){var c=v[s],T=c[0];switch(T){case"M":a=c[1],o=c[2];break;case"A":c=S(p,x,c[1],c[2],g(c[3]),c[4],c[5],c[6],c[7]),c.unshift("C"),c.length>7&&(r.push(c.splice(0,7)),c.unshift("C"));break;case"S":var k=p,_=x;(e=="C"||e=="S")&&(k+=k-f,_+=_-n),c=["C",k,_,c[1],c[2],c[3],c[4]];break;case"T":e=="Q"||e=="T"?(h=p*2-h,y=x*2-y):(h=p,y=x),c=i(p,x,h,y,c[1],c[2]);break;case"Q":h=c[1],y=c[2],c=i(p,x,c[1],c[2],c[3],c[4]);break;case"L":c=E(p,x,c[1],c[2]);break;case"H":c=E(p,x,c[1],x);break;case"V":c=E(p,x,p,c[1]);break;case"Z":c=E(p,x,a,o);break}e=T,p=c[c.length-2],x=c[c.length-1],c.length>4?(f=c[c.length-4],n=c[c.length-3]):(f=p,n=x),r.push(c)}return r}function E(v,e,r,f){return["C",v,e,r,f,r,f]}function i(v,e,r,f,n,a){return["C",v/3+.6666666666666666*r,e/3+.6666666666666666*f,n/3+.6666666666666666*r,a/3+.6666666666666666*f,n,a]}function S(v,e,r,f,n,a,o,h,y,p){if(p)l=p[0],d=p[1],b=p[2],P=p[3];else{var x=A(v,e,-n);v=x.x,e=x.y,x=A(h,y,-n),h=x.x,y=x.y;var s=(v-h)/2,u=(e-y)/2,c=s*s/(r*r)+u*u/(f*f);c>1&&(c=Math.sqrt(c),r=c*r,f=c*f);var T=r*r,k=f*f,_=(a==o?-1:1)*Math.sqrt(Math.abs((T*k-T*u*u-k*s*s)/(T*u*u+k*s*s)));_==1/0&&(_=1);var b=_*r*u/f+(v+h)/2,P=_*-f*s/r+(e+y)/2,l=Math.asin(((e-P)/f).toFixed(9)),d=Math.asin(((y-P)/f).toFixed(9));l=v<b?U-l:l,d=h<b?U-d:d,l<0&&(l=U*2+l),d<0&&(d=U*2+d),o&&l>d&&(l=l-U*2),!o&&d>l&&(d=d-U*2)}if(Math.abs(d-l)>t){var L=d,w=h,I=y;d=l+t*(o&&d>l?1:-1),h=b+r*Math.cos(d),y=P+f*Math.sin(d);var z=S(h,y,r,f,n,0,o,w,I,[d,L,b,P])}var B=Math.tan((d-l)/4),O=4/3*r*B,R=4/3*f*B,C=[2*v-(v+O*Math.sin(l)),2*e-(e-R*Math.cos(l)),h+O*Math.sin(d),y-R*Math.cos(d),h,y];if(p)return C;z&&(C=C.concat(z));for(var F=0;F<C.length;){var N=A(C[F],C[F+1],n);C[F++]=N.x,C[F++]=N.y}return C}function A(v,e,r){return{x:v*Math.cos(r)-e*Math.sin(r),y:v*Math.sin(r)+e*Math.cos(r)}}function g(v){return v*(U/180)}},56131:function($){var U=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;function E(S){if(S==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(S)}function i(){try{if(!Object.assign)return!1;var S=new String("abc");if(S[5]="de",Object.getOwnPropertyNames(S)[0]==="5")return!1;for(var A={},g=0;g<10;g++)A["_"+String.fromCharCode(g)]=g;var v=Object.getOwnPropertyNames(A).map(function(r){return A[r]});if(v.join("")!=="0123456789")return!1;var e={};return"abcdefghijklmnopqrst".split("").forEach(function(r){e[r]=r}),Object.keys(Object.assign({},e)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}$.exports=i()?Object.assign:function(S,A){for(var g,v=E(S),e,r=1;r<arguments.length;r++){g=Object(arguments[r]);for(var f in g)t.call(g,f)&&(v[f]=g[f]);if(U){e=U(g);for(var n=0;n<e.length;n++)M.call(g,e[n])&&(v[e[n]]=g[e[n]])}}return v}},65848:function($){var U=function(t){return t!==t};$.exports=function(t,M){return t===0&&M===0?1/t===1/M:!!(t===M||U(t)&&U(M))}},64003:function($,U,t){var M=t(17045),E=t(68222),i=t(65848),S=t(27015),A=t(55572),g=E(S(),Object);M(g,{getPolyfill:S,implementation:i,shim:A}),$.exports=g},27015:function($,U,t){var M=t(65848);$.exports=function(){return typeof Object.is=="function"?Object.is:M}},55572:function($,U,t){var M=t(27015),E=t(17045);$.exports=function(){var i=M();return E(Object,{is:i},{is:function(){return Object.is!==i}}),i}},99019:function($,U,t){var M;if(!Object.keys){var E=Object.prototype.hasOwnProperty,i=Object.prototype.toString,S=t(64178),A=Object.prototype.propertyIsEnumerable,g=!A.call({toString:null},"toString"),v=A.call(function(){},"prototype"),e=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=function(o){var h=o.constructor;return h&&h.prototype===o},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},n=function(){if(typeof window>"u")return!1;for(var o in window)try{if(!f["$"+o]&&E.call(window,o)&&window[o]!==null&&typeof window[o]=="object")try{r(window[o])}catch{return!0}}catch{return!0}return!1}(),a=function(o){if(typeof window>"u"||!n)return r(o);try{return r(o)}catch{return!1}};M=function(o){var h=o!==null&&typeof o=="object",y=i.call(o)==="[object Function]",p=S(o),x=h&&i.call(o)==="[object String]",s=[];if(!h&&!y&&!p)throw new TypeError("Object.keys called on a non-object");var u=v&&y;if(x&&o.length>0&&!E.call(o,0))for(var c=0;c<o.length;++c)s.push(String(c));if(p&&o.length>0)for(var T=0;T<o.length;++T)s.push(String(T));else for(var k in o)!(u&&k==="prototype")&&E.call(o,k)&&s.push(String(k));if(g)for(var _=a(o),b=0;b<e.length;++b)!(_&&e[b]==="constructor")&&E.call(o,e[b])&&s.push(e[b]);return s}}$.exports=M},8709:function($,U,t){var M=Array.prototype.slice,E=t(64178),i=Object.keys,S=i?function(g){return i(g)}:t(99019),A=Object.keys;S.shim=function(){if(Object.keys){var g=function(){var v=Object.keys(arguments);return v&&v.length===arguments.length}(1,2);g||(Object.keys=function(v){return E(v)?A(M.call(v)):A(v)})}else Object.keys=S;return Object.keys||S},$.exports=S},64178:function($){var U=Object.prototype.toString;$.exports=function(t){var M=U.call(t),E=M==="[object Arguments]";return E||(E=M!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&U.call(t.callee)==="[object Function]"),E}},88641:function($){function U(E,i){if(typeof E!="string")return[E];var S=[E];typeof i=="string"||Array.isArray(i)?i={brackets:i}:i||(i={});var A=i.brackets?Array.isArray(i.brackets)?i.brackets:[i.brackets]:["{}","[]","()"],g=i.escape||"___",v=!!i.flat;A.forEach(function(f){var n=new RegExp(["\\",f[0],"[^\\",f[0],"\\",f[1],"]*\\",f[1]].join("")),a=[];function o(h,y,p){var x=S.push(h.slice(f[0].length,-f[1].length))-1;return a.push(x),g+x+g}S.forEach(function(h,y){for(var p,x=0;h!=p;)if(p=h,h=h.replace(n,o),x++>1e4)throw Error("References have circular dependency. Please, check them.");S[y]=h}),a=a.reverse(),S=S.map(function(h){return a.forEach(function(y){h=h.replace(new RegExp("(\\"+g+y+"\\"+g+")","g"),f[0]+"$1"+f[1])}),h})});var e=new RegExp("\\"+g+"([0-9]+)\\"+g);function r(f,n,a){for(var o=[],h,y=0;h=e.exec(f);){if(y++>1e4)throw Error("Circular references in parenthesis");o.push(f.slice(0,h.index)),o.push(r(n[h[1]],n)),f=f.slice(h.index+h[0].length)}return o.push(f),o}return v?S:r(S[0],S)}function t(E,i){if(i&&i.flat){var S=i&&i.escape||"___",A=E[0],g;if(!A)return"";for(var v=new RegExp("\\"+S+"([0-9]+)\\"+S),e=0;A!=g;){if(e++>1e4)throw Error("Circular references in "+E);g=A,A=A.replace(v,r)}return A}return E.reduce(function f(n,a){return Array.isArray(a)&&(a=a.reduce(f,"")),n+a},"");function r(f,n){if(E[n]==null)throw Error("Reference "+n+"is undefined");return E[n]}}function M(E,i){return Array.isArray(E)?t(E,i):U(E,i)}M.parse=U,M.stringify=t,$.exports=M},18863:function($,U,t){var M=t(71299);$.exports=E;function E(i){var S;return arguments.length>1&&(i=arguments),typeof i=="string"?i=i.split(/\s/).map(parseFloat):typeof i=="number"&&(i=[i]),i.length&&typeof i[0]=="number"?i.length===1?S={width:i[0],height:i[0],x:0,y:0}:i.length===2?S={width:i[0],height:i[1],x:0,y:0}:S={x:i[0],y:i[1],width:i[2]-i[0]||0,height:i[3]-i[1]||0}:i&&(i=M(i,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),S={x:i.left||0,y:i.top||0},i.width==null?i.right?S.width=i.right-S.x:S.width=0:S.width=i.width,i.height==null?i.bottom?S.height=i.bottom-S.y:S.height=0:S.height=i.height),S}},95616:function($){$.exports=M;var U={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function M(S){var A=[];return S.replace(t,function(g,v,e){var r=v.toLowerCase();for(e=i(e),r=="m"&&e.length>2&&(A.push([v].concat(e.splice(0,2))),r="l",v=v=="m"?"l":"L");;){if(e.length==U[r])return e.unshift(v),A.push(e);if(e.length<U[r])throw new Error("malformed path data");A.push([v].concat(e.splice(0,U[r])))}}),A}var E=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function i(S){var A=S.match(E);return A?A.map(Number):[]}},25677:function($){$.exports=function(U,t){t||(t=[0,""]),U=String(U);var M=parseFloat(U,10);return t[0]=M,t[1]=U.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},9748:function($,U,t){var M=t(90386);(function(){var E,i,S,A,g,v;typeof performance<"u"&&performance!==null&&performance.now?$.exports=function(){return performance.now()}:typeof M<"u"&&M!==null&&M.hrtime?($.exports=function(){return(E()-g)/1e6},i=M.hrtime,E=function(){var e;return e=i(),e[0]*1e9+e[1]},A=E(),v=M.uptime()*1e9,g=A-v):Date.now?($.exports=function(){return Date.now()-S},S=Date.now()):($.exports=function(){return new Date().getTime()-S},S=new Date().getTime())}).call(this)},71299:function($){$.exports=function(M,E,i){var S={},A,g;if(typeof E=="string"&&(E=t(E)),Array.isArray(E)){var v={};for(g=0;g<E.length;g++)v[E[g]]=!0;E=v}for(A in E)E[A]=t(E[A]);var e={};for(A in E){var r=E[A];if(Array.isArray(r))for(g=0;g<r.length;g++){var f=r[g];if(i&&(e[f]=!0),f in M){if(S[A]=M[f],i)for(var n=g;n<r.length;n++)e[r[n]]=!0;break}}else A in M&&(E[A]&&(S[A]=M[A]),i&&(e[A]=!0))}if(i)for(A in M)e[A]||(S[A]=M[A]);return S};var U={};function t(M){return U[M]?U[M]:(typeof M=="string"&&(M=U[M]=M.split(/\s*,\s*|\s+/)),M)}},38258:function($){$.exports=function(U,t,M,E){var i=U[0],S=U[1],A=!1;M===void 0&&(M=0),E===void 0&&(E=t.length);for(var g=E-M,v=0,e=g-1;v<g;e=v++){var r=t[v+M][0],f=t[v+M][1],n=t[e+M][0],a=t[e+M][1],o=f>S!=a>S&&i<(n-r)*(S-f)/(a-f)+r;o&&(A=!A)}return A}},52142:function($,U,t){var M=t(69444),E=t(29023),i=t(87263),S=t(11328),A=t(55968),g=t(10670),v=!1,e=E(),r;r={buildLog:function(n){return n===!0?v=M():n===!1&&(v=!1),v===!1?!1:v.list},epsilon:function(n){return e.epsilon(n)},segments:function(n){var a=i(!0,e,v);return n.regions.forEach(a.addRegion),{segments:a.calculate(n.inverted),inverted:n.inverted}},combine:function(n,a){var o=i(!1,e,v);return{combined:o.calculate(n.segments,n.inverted,a.segments,a.inverted),inverted1:n.inverted,inverted2:a.inverted}},selectUnion:function(n){return{segments:A.union(n.combined,v),inverted:n.inverted1||n.inverted2}},selectIntersect:function(n){return{segments:A.intersect(n.combined,v),inverted:n.inverted1&&n.inverted2}},selectDifference:function(n){return{segments:A.difference(n.combined,v),inverted:n.inverted1&&!n.inverted2}},selectDifferenceRev:function(n){return{segments:A.differenceRev(n.combined,v),inverted:!n.inverted1&&n.inverted2}},selectXor:function(n){return{segments:A.xor(n.combined,v),inverted:n.inverted1!==n.inverted2}},polygon:function(n){return{regions:S(n.segments,e,v),inverted:n.inverted}},polygonFromGeoJSON:function(n){return g.toPolygon(r,n)},polygonToGeoJSON:function(n){return g.fromPolygon(r,e,n)},union:function(n,a){return f(n,a,r.selectUnion)},intersect:function(n,a){return f(n,a,r.selectIntersect)},difference:function(n,a){return f(n,a,r.selectDifference)},differenceRev:function(n,a){return f(n,a,r.selectDifferenceRev)},xor:function(n,a){return f(n,a,r.selectXor)}};function f(n,a,o){var h=r.segments(n),y=r.segments(a),p=r.combine(h,y),x=o(p);return r.polygon(x)}typeof window=="object"&&(window.PolyBool=r),$.exports=r},69444:function($){function U(){var t,M=0,E=!1;function i(S,A){return t.list.push({type:S,data:A?JSON.parse(JSON.stringify(A)):void 0}),t}return t={list:[],segmentId:function(){return M++},checkIntersection:function(S,A){return i("check",{seg1:S,seg2:A})},segmentChop:function(S,A){return i("div_seg",{seg:S,pt:A}),i("chop",{seg:S,pt:A})},statusRemove:function(S){return i("pop_seg",{seg:S})},segmentUpdate:function(S){return i("seg_update",{seg:S})},segmentNew:function(S,A){return i("new_seg",{seg:S,primary:A})},segmentRemove:function(S){return i("rem_seg",{seg:S})},tempStatus:function(S,A,g){return i("temp_status",{seg:S,above:A,below:g})},rewind:function(S){return i("rewind",{seg:S})},status:function(S,A,g){return i("status",{seg:S,above:A,below:g})},vert:function(S){return S===E?t:(E=S,i("vert",{x:S}))},log:function(S){return typeof S!="string"&&(S=JSON.stringify(S,!1,"  ")),i("log",{txt:S})},reset:function(){return i("reset")},selected:function(S){return i("selected",{segs:S})},chainStart:function(S){return i("chain_start",{seg:S})},chainRemoveHead:function(S,A){return i("chain_rem_head",{index:S,pt:A})},chainRemoveTail:function(S,A){return i("chain_rem_tail",{index:S,pt:A})},chainNew:function(S,A){return i("chain_new",{pt1:S,pt2:A})},chainMatch:function(S){return i("chain_match",{index:S})},chainClose:function(S){return i("chain_close",{index:S})},chainAddHead:function(S,A){return i("chain_add_head",{index:S,pt:A})},chainAddTail:function(S,A){return i("chain_add_tail",{index:S,pt:A})},chainConnect:function(S,A){return i("chain_con",{index1:S,index2:A})},chainReverse:function(S){return i("chain_rev",{index:S})},chainJoin:function(S,A){return i("chain_join",{index1:S,index2:A})},done:function(){return i("done")}},t}$.exports=U},29023:function($){function U(t){typeof t!="number"&&(t=1e-10);var M={epsilon:function(E){return typeof E=="number"&&(t=E),t},pointAboveOrOnLine:function(E,i,S){var A=i[0],g=i[1],v=S[0],e=S[1],r=E[0],f=E[1];return(v-A)*(f-g)-(e-g)*(r-A)>=-t},pointBetween:function(E,i,S){var A=E[1]-i[1],g=S[0]-i[0],v=E[0]-i[0],e=S[1]-i[1],r=v*g+A*e;if(r<t)return!1;var f=g*g+e*e;return!(r-f>-t)},pointsSameX:function(E,i){return Math.abs(E[0]-i[0])<t},pointsSameY:function(E,i){return Math.abs(E[1]-i[1])<t},pointsSame:function(E,i){return M.pointsSameX(E,i)&&M.pointsSameY(E,i)},pointsCompare:function(E,i){return M.pointsSameX(E,i)?M.pointsSameY(E,i)?0:E[1]<i[1]?-1:1:E[0]<i[0]?-1:1},pointsCollinear:function(E,i,S){var A=E[0]-i[0],g=E[1]-i[1],v=i[0]-S[0],e=i[1]-S[1];return Math.abs(A*e-v*g)<t},linesIntersect:function(E,i,S,A){var g=i[0]-E[0],v=i[1]-E[1],e=A[0]-S[0],r=A[1]-S[1],f=g*r-v*e;if(Math.abs(f)<t)return!1;var n=E[0]-S[0],a=E[1]-S[1],o=(e*a-r*n)/f,h=(g*a-v*n)/f,y={alongA:0,alongB:0,pt:[E[0]+o*g,E[1]+o*v]};return o<=-t?y.alongA=-2:o<t?y.alongA=-1:o-1<=-t?y.alongA=0:o-1<t?y.alongA=1:y.alongA=2,h<=-t?y.alongB=-2:h<t?y.alongB=-1:h-1<=-t?y.alongB=0:h-1<t?y.alongB=1:y.alongB=2,y},pointInsideRegion:function(E,i){for(var S=E[0],A=E[1],g=i[i.length-1][0],v=i[i.length-1][1],e=!1,r=0;r<i.length;r++){var f=i[r][0],n=i[r][1];n-A>t!=v-A>t&&(g-f)*(A-n)/(v-n)+f-S>t&&(e=!e),g=f,v=n}return e}};return M}$.exports=U},10670:function($){var U={toPolygon:function(t,M){function E(A){if(A.length<=0)return t.segments({inverted:!1,regions:[]});function g(r){var f=r.slice(0,r.length-1);return t.segments({inverted:!1,regions:[f]})}for(var v=g(A[0]),e=1;e<A.length;e++)v=t.selectDifference(t.combine(v,g(A[e])));return v}if(M.type==="Polygon")return t.polygon(E(M.coordinates));if(M.type==="MultiPolygon"){for(var i=t.segments({inverted:!1,regions:[]}),S=0;S<M.coordinates.length;S++)i=t.selectUnion(t.combine(i,E(M.coordinates[S])));return t.polygon(i)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(t,M,E){E=t.polygon(t.segments(E));function i(o,h){return M.pointInsideRegion([(o[0][0]+o[1][0])*.5,(o[0][1]+o[1][1])*.5],h)}function S(o){return{region:o,children:[]}}var A=S(null);function g(o,h){for(var y=0;y<o.children.length;y++){var p=o.children[y];if(i(h,p.region)){g(p,h);return}}for(var x=S(h),y=0;y<o.children.length;y++){var p=o.children[y];i(p.region,h)&&(x.children.push(p),o.children.splice(y,1),y--)}o.children.push(x)}for(var v=0;v<E.regions.length;v++){var e=E.regions[v];e.length<3||g(A,e)}function r(o,h){for(var y=0,p=o[o.length-1][0],x=o[o.length-1][1],s=[],u=0;u<o.length;u++){var c=o[u][0],T=o[u][1];s.push([c,T]),y+=T*p-c*x,p=c,x=T}var k=y<0;return k!==h&&s.reverse(),s.push([s[0][0],s[0][1]]),s}var f=[];function n(o){var h=[r(o.region,!1)];f.push(h);for(var y=0;y<o.children.length;y++)h.push(a(o.children[y]))}function a(o){for(var h=0;h<o.children.length;h++)n(o.children[h]);return r(o.region,!0)}for(var v=0;v<A.children.length;v++)n(A.children[v]);return f.length<=0?{type:"Polygon",coordinates:[]}:f.length==1?{type:"Polygon",coordinates:f[0]}:{type:"MultiPolygon",coordinates:f}}};$.exports=U},87263:function($,U,t){var M=t(26859);function E(i,S,A){function g(x,s){return{id:A?A.segmentId():-1,start:x,end:s,myFill:{above:null,below:null},otherFill:null}}function v(x,s,u){return{id:A?A.segmentId():-1,start:x,end:s,myFill:{above:u.myFill.above,below:u.myFill.below},otherFill:null}}var e=M.create();function r(x,s,u,c,T,k){var _=S.pointsCompare(s,T);return _!==0?_:S.pointsSame(u,k)?0:x!==c?x?1:-1:S.pointAboveOrOnLine(u,c?T:k,c?k:T)?1:-1}function f(x,s){e.insertBefore(x,function(u){var c=r(x.isStart,x.pt,s,u.isStart,u.pt,u.other.pt);return c<0})}function n(x,s){var u=M.node({isStart:!0,pt:x.start,seg:x,primary:s,other:null,status:null});return f(u,x.end),u}function a(x,s,u){var c=M.node({isStart:!1,pt:s.end,seg:s,primary:u,other:x,status:null});x.other=c,f(c,x.pt)}function o(x,s){var u=n(x,s);return a(u,x,s),u}function h(x,s){A&&A.segmentChop(x.seg,s),x.other.remove(),x.seg.end=s,x.other.pt=s,f(x.other,x.pt)}function y(x,s){var u=v(s,x.seg.end,x.seg);return h(x,s),o(u,x.primary)}function p(x,s){var u=M.create();function c(O,R){var C=O.seg.start,F=O.seg.end,N=R.seg.start,V=R.seg.end;return S.pointsCollinear(C,N,V)?S.pointsCollinear(F,N,V)||S.pointAboveOrOnLine(F,N,V)?1:-1:S.pointAboveOrOnLine(C,N,V)?1:-1}function T(O){return u.findTransition(function(R){var C=c(O,R.ev);return C>0})}function k(O,R){var C=O.seg,F=R.seg,N=C.start,V=C.end,K=F.start,Q=F.end;A&&A.checkIntersection(C,F);var at=S.linesIntersect(N,V,K,Q);if(at===!1){if(!S.pointsCollinear(N,V,K)||S.pointsSame(N,Q)||S.pointsSame(V,K))return!1;var it=S.pointsSame(N,K),q=S.pointsSame(V,Q);if(it&&q)return R;var W=!it&&S.pointBetween(N,K,Q),Z=!q&&S.pointBetween(V,K,Q);if(it)return Z?y(R,V):y(O,Q),R;W&&(q||(Z?y(R,V):y(O,Q)),y(R,N))}else at.alongA===0&&(at.alongB===-1?y(O,K):at.alongB===0?y(O,at.pt):at.alongB===1&&y(O,Q)),at.alongB===0&&(at.alongA===-1?y(R,N):at.alongA===0?y(R,at.pt):at.alongA===1&&y(R,V));return!1}for(var _=[];!e.isEmpty();){var b=e.getHead();if(A&&A.vert(b.pt[0]),b.isStart){let O=function(){if(l){var R=k(b,l);if(R)return R}return d?k(b,d):!1};A&&A.segmentNew(b.seg,b.primary);var P=T(b),l=P.before?P.before.ev:null,d=P.after?P.after.ev:null;A&&A.tempStatus(b.seg,l?l.seg:!1,d?d.seg:!1);var L=O();if(L){if(i){var w;b.seg.myFill.below===null?w=!0:w=b.seg.myFill.above!==b.seg.myFill.below,w&&(L.seg.myFill.above=!L.seg.myFill.above)}else L.seg.otherFill=b.seg.myFill;A&&A.segmentUpdate(L.seg),b.other.remove(),b.remove()}if(e.getHead()!==b){A&&A.rewind(b.seg);continue}if(i){var w;b.seg.myFill.below===null?w=!0:w=b.seg.myFill.above!==b.seg.myFill.below,d?b.seg.myFill.below=d.seg.myFill.above:b.seg.myFill.below=x,w?b.seg.myFill.above=!b.seg.myFill.below:b.seg.myFill.above=b.seg.myFill.below}else if(b.seg.otherFill===null){var I;d?b.primary===d.primary?I=d.seg.otherFill.above:I=d.seg.myFill.above:I=b.primary?s:x,b.seg.otherFill={above:I,below:I}}A&&A.status(b.seg,l?l.seg:!1,d?d.seg:!1),b.other.status=P.insert(M.node({ev:b}))}else{var z=b.status;if(z===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(u.exists(z.prev)&&u.exists(z.next)&&k(z.prev.ev,z.next.ev),A&&A.statusRemove(z.ev.seg),z.remove(),!b.primary){var B=b.seg.myFill;b.seg.myFill=b.seg.otherFill,b.seg.otherFill=B}_.push(b.seg)}e.getHead().remove()}return A&&A.done(),_}return i?{addRegion:function(x){for(var s,u=x[x.length-1],c=0;c<x.length;c++){s=u,u=x[c];var T=S.pointsCompare(s,u);T!==0&&o(g(T<0?s:u,T<0?u:s),!0)}},calculate:function(x){return p(x,!1)}}:{calculate:function(x,s,u,c){return x.forEach(function(T){o(v(T.start,T.end,T),!0)}),u.forEach(function(T){o(v(T.start,T.end,T),!1)}),p(s,c)}}}$.exports=E},26859:function($){var U={create:function(){var t={root:{root:!0,next:null},exists:function(M){return!(M===null||M===t.root)},isEmpty:function(){return t.root.next===null},getHead:function(){return t.root.next},insertBefore:function(M,E){for(var i=t.root,S=t.root.next;S!==null;){if(E(S)){M.prev=S.prev,M.next=S,S.prev.next=M,S.prev=M;return}i=S,S=S.next}i.next=M,M.prev=i,M.next=null},findTransition:function(M){for(var E=t.root,i=t.root.next;i!==null&&!M(i);)E=i,i=i.next;return{before:E===t.root?null:E,after:i,insert:function(S){return S.prev=E,S.next=i,E.next=S,i!==null&&(i.prev=S),S}}}};return t},node:function(t){return t.prev=null,t.next=null,t.remove=function(){t.prev.next=t.next,t.next&&(t.next.prev=t.prev),t.prev=null,t.next=null},t}};$.exports=U},11328:function($){function U(t,M,E){var i=[],S=[];return t.forEach(function(A){var g=A.start,v=A.end;if(M.pointsSame(g,v)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}E&&E.chainStart(A);var e={index:0,matches_head:!1,matches_pt1:!1},r={index:0,matches_head:!1,matches_pt1:!1},f=e;function n(L,w,I){return f.index=L,f.matches_head=w,f.matches_pt1=I,f===e?(f=r,!1):(f=null,!0)}for(var a=0;a<i.length;a++){var o=i[a],h=o[0];o[1];var y=o[o.length-1];if(o[o.length-2],M.pointsSame(h,g)){if(n(a,!0,!0))break}else if(M.pointsSame(h,v)){if(n(a,!0,!1))break}else if(M.pointsSame(y,g)){if(n(a,!1,!0))break}else if(M.pointsSame(y,v)&&n(a,!1,!1))break}if(f===e){i.push([g,v]),E&&E.chainNew(g,v);return}if(f===r){E&&E.chainMatch(e.index);var p=e.index,x=e.matches_pt1?v:g,s=e.matches_head,o=i[p],u=s?o[0]:o[o.length-1],c=s?o[1]:o[o.length-2],T=s?o[o.length-1]:o[0],k=s?o[o.length-2]:o[1];if(M.pointsCollinear(c,u,x)&&(s?(E&&E.chainRemoveHead(e.index,x),o.shift()):(E&&E.chainRemoveTail(e.index,x),o.pop()),u=c),M.pointsSame(T,x)){i.splice(p,1),M.pointsCollinear(k,T,u)&&(s?(E&&E.chainRemoveTail(e.index,u),o.pop()):(E&&E.chainRemoveHead(e.index,u),o.shift())),E&&E.chainClose(e.index),S.push(o);return}s?(E&&E.chainAddHead(e.index,x),o.unshift(x)):(E&&E.chainAddTail(e.index,x),o.push(x));return}function _(L){E&&E.chainReverse(L),i[L].reverse()}function b(L,w){var I=i[L],z=i[w],B=I[I.length-1],O=I[I.length-2],R=z[0],C=z[1];M.pointsCollinear(O,B,R)&&(E&&E.chainRemoveTail(L,B),I.pop(),B=O),M.pointsCollinear(B,R,C)&&(E&&E.chainRemoveHead(w,R),z.shift()),E&&E.chainJoin(L,w),i[L]=I.concat(z),i.splice(w,1)}var P=e.index,l=r.index;E&&E.chainConnect(P,l);var d=i[P].length<i[l].length;e.matches_head?r.matches_head?d?(_(P),b(P,l)):(_(l),b(l,P)):b(l,P):r.matches_head?b(P,l):d?(_(P),b(l,P)):(_(l),b(P,l))}),S}$.exports=U},55968:function($){function U(M,E,i){var S=[];return M.forEach(function(A){var g=(A.myFill.above?8:0)+(A.myFill.below?4:0)+(A.otherFill&&A.otherFill.above?2:0)+(A.otherFill&&A.otherFill.below?1:0);E[g]!==0&&S.push({id:i?i.segmentId():-1,start:A.start,end:A.end,myFill:{above:E[g]===1,below:E[g]===2},otherFill:null})}),i&&i.selected(S),S}var t={union:function(M,E){return U(M,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],E)},intersect:function(M,E){return U(M,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],E)},difference:function(M,E){return U(M,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],E)},differenceRev:function(M,E){return U(M,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],E)},xor:function(M,E){return U(M,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],E)}};$.exports=t},14847:function($,U,t){var M=t(21630).Transform,E=t(90715);function i(){M.call(this,{readableObjectMode:!0})}i.prototype=Object.create(M.prototype),i.prototype.constructor=i,E(i.prototype),U.OF=function(A,g,v){for(var e=g,r=0;r<v.length;)if(A[e++]!==v[r++])return!1;return!0},U.eG=function(A,g){var v=[],e=0;if(g&&g==="hex")for(;e<A.length;)v.push(parseInt(A.slice(e,e+2),16)),e+=2;else for(;e<A.length;e++)v.push(A.charCodeAt(e)&255);return v},U.mP=function(A,g){return A[g]|A[g+1]<<8},U.n8=function(A,g){return A[g+1]|A[g]<<8},U.nm=function(A,g){return A[g]|A[g+1]<<8|A[g+2]<<16|A[g+3]*16777216},U.Ag=function(A,g){return A[g+3]|A[g+2]<<8|A[g+1]<<16|A[g]*16777216};function S(A,g,v){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=A,g&&(this.code=g),v&&(this.statusCode=v)}S.prototype=Object.create(Error.prototype),S.prototype.constructor=S},71371:function($){function U(E,i){var S=new Error(E);return S.code=i,S}function t(E){try{return decodeURIComponent(escape(E))}catch{return E}}function M(E,i,S){this.input=E.subarray(i,S),this.start=i;var A=String.fromCharCode.apply(null,this.input.subarray(0,4));if(A!=="II*\0"&&A!=="MM\0*")throw U("invalid TIFF signature","EBADDATA");this.big_endian=A[0]==="M"}M.prototype.each=function(E){this.aborted=!1;var i=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:i}];this.ifds_to_read.length>0&&!this.aborted;){var S=this.ifds_to_read.shift();S.offset&&this.scan_ifd(S.id,S.offset,E)}},M.prototype.read_uint16=function(E){var i=this.input;if(E+2>i.length)throw U("unexpected EOF","EBADDATA");return this.big_endian?i[E]*256+i[E+1]:i[E]+i[E+1]*256},M.prototype.read_uint32=function(E){var i=this.input;if(E+4>i.length)throw U("unexpected EOF","EBADDATA");return this.big_endian?i[E]*16777216+i[E+1]*65536+i[E+2]*256+i[E+3]:i[E]+i[E+1]*256+i[E+2]*65536+i[E+3]*16777216},M.prototype.is_subifd_link=function(E,i){return E===0&&i===34665||E===0&&i===34853||E===34665&&i===40965},M.prototype.exif_format_length=function(E){switch(E){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},M.prototype.exif_format_read=function(E,i){var S;switch(E){case 1:case 2:return S=this.input[i],S;case 6:return S=this.input[i],S|(S&128)*33554430;case 3:return S=this.read_uint16(i),S;case 8:return S=this.read_uint16(i),S|(S&32768)*131070;case 4:return S=this.read_uint32(i),S;case 9:return S=this.read_uint32(i),S|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}},M.prototype.scan_ifd=function(E,i,S){var A=this.read_uint16(i);i+=2;for(var g=0;g<A;g++){var v=this.read_uint16(i),e=this.read_uint16(i+2),r=this.read_uint32(i+4),f=this.exif_format_length(e),n=r*f,a=n<=4?i+8:this.read_uint32(i+8),o=!1;if(a+n>this.input.length)throw U("unexpected EOF","EBADDATA");for(var h=[],y=a,p=0;p<r;p++,y+=f){var x=this.exif_format_read(e,y);if(x===null){h=null;break}h.push(x)}Array.isArray(h)&&e===2&&(h=t(String.fromCharCode.apply(null,h)),h&&h[h.length-1]==="\0"&&(h=h.slice(0,-1))),this.is_subifd_link(E,v)&&Array.isArray(h)&&Number.isInteger(h[0])&&h[0]>0&&(this.ifds_to_read.push({id:v,offset:h[0]}),o=!0);var s={is_big_endian:this.big_endian,ifd:E,tag:v,format:e,count:r,entry_offset:i+this.start,data_length:n,data_offset:a+this.start,value:h,is_subifd_link:o};if(S(s)===!1){this.aborted=!0;return}i+=12}E===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(i)})},$.exports.ExifParser=M,$.exports.get_orientation=function(E){var i=0;try{return new M(E,0,E.length).each(function(S){if(S.ifd===0&&S.tag===274&&Array.isArray(S.value))return i=S.value[0],!1}),i}catch{return-1}}},76767:function($,U,t){var M=t(14847).n8,E=t(14847).Ag;function i(n,a){if(n.length<4+a)return null;var o=E(n,a);return n.length<o+a||o<8?null:{boxtype:String.fromCharCode.apply(null,n.slice(a+4,a+8)),data:n.slice(a+8,a+o),end:a+o}}$.exports.unbox=i;function S(n,a){for(var o=0;;){var h=i(n,o);if(!h)break;switch(h.boxtype){case"ispe":a.sizes.push({width:E(h.data,4),height:E(h.data,8)});break;case"irot":a.transforms.push({type:"irot",value:h.data[0]&3});break;case"imir":a.transforms.push({type:"imir",value:h.data[0]&1});break}o=h.end}}function A(n,a,o){for(var h=0,y=0;y<o;y++)h=h*256+(n[a+y]||0);return h}function g(n,a){for(var o=n[4]>>4&15,h=n[4]&15,y=n[5]>>4&15,p=M(n,6),x=8,s=0;s<p;s++){var u=M(n,x);x+=2;var c=M(n,x);x+=2;var T=A(n,x,y);x+=y;var k=M(n,x);if(x+=2,c===0&&k===1){var _=A(n,x,o),b=A(n,x+o,h);a.item_loc[u]={length:b,offset:_+T}}x+=k*(o+h)}}function v(n,a){for(var o=M(n,4),h=6,y=0;y<o;y++){var p=i(n,h);if(!p)break;if(p.boxtype==="infe"){for(var x=M(p.data,4),s="",u=8;u<p.data.length&&p.data[u];u++)s+=String.fromCharCode(p.data[u]);a.item_inf[s]=x}h=p.end}}function e(n,a){for(var o=0;;){var h=i(n,o);if(!h)break;h.boxtype==="ipco"&&S(h.data,a),o=h.end}}function r(n,a){for(var o=4;;){var h=i(n,o);if(!h)break;h.boxtype==="iprp"&&e(h.data,a),h.boxtype==="iloc"&&g(h.data,a),h.boxtype==="iinf"&&v(h.data,a),o=h.end}}function f(n){var a=n.reduce(function(y,p){return y.width>p.width||y.width===p.width&&y.height>p.height?y:p}),o=n.reduce(function(y,p){return y.height>p.height||y.height===p.height&&y.width>p.width?y:p}),h;return a.width>o.height||a.width===o.height&&a.height>o.width?h=a:h=o,h}$.exports.readSizeFromMeta=function(n){var a={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(r(n,a),!!a.sizes.length){var o=f(a.sizes),h=1;a.transforms.forEach(function(p){var x={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},s={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(p.type==="imir"&&(p.value===0?h=s[h]:(h=s[h],h=x[h],h=x[h])),p.type==="irot")for(var u=0;u<p.value;u++)h=x[h]});var y=null;return a.item_inf.Exif&&(y=a.item_loc[a.item_inf.Exif]),{width:o.width,height:o.height,orientation:a.transforms.length?h:null,variants:a.sizes,exif_location:y}}},$.exports.getMimeType=function(n){var a=String.fromCharCode.apply(null,n.slice(0,4)),o={};o[a]=!0;for(var h=8;h<n.length;h+=4)o[String.fromCharCode.apply(null,n.slice(h,h+4))]=!0;if(!(!o.mif1&&!o.msf1&&!o.miaf))return a==="avif"||a==="avis"||a==="avio"?{type:"avif",mime:"image/avif"}:a==="heic"||a==="heix"?{type:"heic",mime:"image/heic"}:a==="hevc"||a==="hevx"?{type:"heic",mime:"image/heic-sequence"}:o.avif||o.avis?{type:"avif",mime:"image/avif"}:o.heic||o.heix||o.hevc||o.hevx||o.heis?o.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},24461:function($,U,t){var M=t(14847).eG,E=t(14847).OF,i=t(14847).Ag,S=t(76767),A=t(71371),g=M("ftyp");$.exports=function(v){if(E(v,4,g)){var e=S.unbox(v,0);if(e){var r=S.getMimeType(e.data);if(r){for(var f,n=e.end;;){var a=S.unbox(v,n);if(!a)break;if(n=a.end,a.boxtype==="mdat")return;if(a.boxtype==="meta"){f=a.data;break}}if(f){var o=S.readSizeFromMeta(f);if(o){var h={width:o.width,height:o.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"};if(o.variants.length>1&&(h.variants=o.variants),o.orientation&&(h.orientation=o.orientation),o.exif_location&&o.exif_location.offset+o.exif_location.length<=v.length){var y=i(v,o.exif_location.offset),p=v.slice(o.exif_location.offset+y+4,o.exif_location.offset+o.exif_location.length),x=A.get_orientation(p);x>0&&(h.orientation=x)}return h}}}}}}},2504:function($,U,t){var M=t(14847).eG,E=t(14847).OF,i=t(14847).mP,S=M("BM");$.exports=function(A){if(!(A.length<26)&&E(A,0,S))return{width:i(A,18),height:i(A,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},47342:function($,U,t){var M=t(14847).eG,E=t(14847).OF,i=t(14847).mP,S=M("GIF87a"),A=M("GIF89a");$.exports=function(g){if(!(g.length<10)&&!(!E(g,0,S)&&!E(g,0,A)))return{width:i(g,6),height:i(g,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},31355:function($,U,t){var M=t(14847).mP,E=0,i=1,S=16;$.exports=function(A){var g=M(A,0),v=M(A,2),e=M(A,4);if(!(g!==E||v!==i||!e)){for(var r=[],f={width:0,height:0},n=0;n<e;n++){var a=A[6+S*n]||256,o=A[6+S*n+1]||256,h={width:a,height:o};r.push(h),(a>f.width||o>f.height)&&(f=h)}return{width:f.width,height:f.height,variants:r,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},54261:function($,U,t){var M=t(14847).n8,E=t(14847).eG,i=t(14847).OF,S=t(71371),A=E("Exif\0\0");$.exports=function(g){if(!(g.length<2)&&!(g[0]!==255||g[1]!==216||g[2]!==255))for(var v=2;;){for(;;){if(g.length-v<2)return;if(g[v++]===255)break}for(var e=g[v++],r;e===255;)e=g[v++];if(208<=e&&e<=217||e===1)r=0;else if(192<=e&&e<=254){if(g.length-v<2)return;r=M(g,v)-2,v+=2}else return;if(e===217||e===218)return;var f;if(e===225&&r>=10&&i(g,v,A)&&(f=S.get_orientation(g.slice(v+6,v+r))),r>=5&&192<=e&&e<=207&&e!==196&&e!==200&&e!==204){if(g.length-v<r)return;var n={width:M(g,v+3),height:M(g,v+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return f>0&&(n.orientation=f),n}v+=r}}},6303:function($,U,t){var M=t(14847).eG,E=t(14847).OF,i=t(14847).Ag,S=M(`\x89PNG\r

`),A=M("IHDR");$.exports=function(g){if(!(g.length<24)&&E(g,0,S)&&E(g,12,A))return{width:i(g,16),height:i(g,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},38689:function($,U,t){var M=t(14847).eG,E=t(14847).OF,i=t(14847).Ag,S=M("8BPS\0");$.exports=function(A){if(!(A.length<22)&&E(A,0,S))return{width:i(A,18),height:i(A,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},6881:function($){function U(f){return f===32||f===9||f===13||f===10}function t(f){return typeof f=="number"&&isFinite(f)&&f>0}function M(f){var n=0,a=f.length;for(f[0]===239&&f[1]===187&&f[2]===191&&(n=3);n<a&&U(f[n]);)n++;return n===a?!1:f[n]===60}var E=/<[-_.:a-zA-Z0-9][^>]*>/,i=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,S=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,A=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,g=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,v=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function e(f){var n=f.match(S),a=f.match(A),o=f.match(g);return{width:n&&(n[1]||n[2]),height:a&&(a[1]||a[2]),viewbox:o&&(o[1]||o[2])}}function r(f){return v.test(f)?f.match(v)[0]:"px"}$.exports=function(f){if(M(f)){for(var n="",a=0;a<f.length;a++)n+=String.fromCharCode(f[a]);var o=(n.match(E)||[""])[0];if(i.test(o)){var h=e(o),y=parseFloat(h.width),p=parseFloat(h.height);if(h.width&&h.height)return!t(y)||!t(p)?void 0:{width:y,height:p,type:"svg",mime:"image/svg+xml",wUnits:r(h.width),hUnits:r(h.height)};var x=(h.viewbox||"").split(" "),s={width:x[2],height:x[3]},u=parseFloat(s.width),c=parseFloat(s.height);if(!(!t(u)||!t(c))&&r(s.width)===r(s.height)){var T=u/c;return h.width?t(y)?{width:y,height:y/T,type:"svg",mime:"image/svg+xml",wUnits:r(h.width),hUnits:r(h.width)}:void 0:h.height?t(p)?{width:p*T,height:p,type:"svg",mime:"image/svg+xml",wUnits:r(h.height),hUnits:r(h.height)}:void 0:{width:u,height:c,type:"svg",mime:"image/svg+xml",wUnits:r(s.width),hUnits:r(s.height)}}}}}},66278:function($,U,t){var M=t(14847).eG,E=t(14847).OF,i=t(14847).mP,S=t(14847).n8,A=t(14847).nm,g=t(14847).Ag,v=M("II*\0"),e=M("MM\0*");function r(a,o,h){return h?S(a,o):i(a,o)}function f(a,o,h){return h?g(a,o):A(a,o)}function n(a,o,h){var y=r(a,o+2,h),p=f(a,o+4,h);return p!==1||y!==3&&y!==4?null:y===3?r(a,o+8,h):f(a,o+8,h)}$.exports=function(a){if(!(a.length<8)&&!(!E(a,0,v)&&!E(a,0,e))){var o=a[0]===77,h=f(a,4,o)-8;if(!(h<0)){var y=h+8;if(!(a.length-y<2)){var p=r(a,y+0,o)*12;if(!(p<=0)&&(y+=2,!(a.length-y<p))){var x,s,u,c;for(x=0;x<p;x+=12)c=r(a,y+x,o),c===256?s=n(a,y+x,o):c===257&&(u=n(a,y+x,o));if(s&&u)return{width:s,height:u,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},90784:function($,U,t){var M=t(14847).eG,E=t(14847).OF,i=t(14847).mP,S=t(14847).nm,A=t(71371),g=M("RIFF"),v=M("WEBP");function e(n,a){if(!(n[a+3]!==157||n[a+4]!==1||n[a+5]!==42))return{width:i(n,a+6)&16383,height:i(n,a+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function r(n,a){if(n[a]===47){var o=S(n,a+1);return{width:(o&16383)+1,height:(o>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function f(n,a){return{width:(n[a+6]<<16|n[a+5]<<8|n[a+4])+1,height:(n[a+9]<<a|n[a+8]<<8|n[a+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}$.exports=function(n){if(!(n.length<16)&&!(!E(n,0,g)&&!E(n,8,v))){var a=12,o=null,h=0,y=S(n,4)+8;if(!(y>n.length)){for(;a+8<y;){if(n[a]===0){a++;continue}var p=String.fromCharCode.apply(null,n.slice(a,a+4)),x=S(n,a+4);p==="VP8 "&&x>=10?o=o||e(n,a+8):p==="VP8L"&&x>=9?o=o||r(n,a+8):p==="VP8X"&&x>=10?o=o||f(n,a+8):p==="EXIF"&&(h=A.get_orientation(n.slice(a+8,a+8+x)),a=1/0),a+=8+x}if(o)return h>0&&(o.orientation=h),o}}}},91497:function($,U,t){$.exports={avif:t(24461),bmp:t(2504),gif:t(47342),ico:t(31355),jpeg:t(54261),png:t(6303),psd:t(38689),svg:t(6881),tiff:t(66278),webp:t(90784)}},33575:function($,U,t){var M=t(91497);function E(i){for(var S=Object.keys(M),A=0;A<S.length;A++){var g=M[S[A]](i);if(g)return g}return null}$.exports=function(i){return E(i)},$.exports.parsers=M},90386:function($){var U=$.exports={},t,M;function E(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=E}catch{t=E}try{typeof clearTimeout=="function"?M=clearTimeout:M=i}catch{M=i}})();function S(h){if(t===setTimeout)return setTimeout(h,0);if((t===E||!t)&&setTimeout)return t=setTimeout,setTimeout(h,0);try{return t(h,0)}catch{try{return t.call(null,h,0)}catch{return t.call(this,h,0)}}}function A(h){if(M===clearTimeout)return clearTimeout(h);if((M===i||!M)&&clearTimeout)return M=clearTimeout,clearTimeout(h);try{return M(h)}catch{try{return M.call(null,h)}catch{return M.call(this,h)}}}var g=[],v=!1,e,r=-1;function f(){!v||!e||(v=!1,e.length?g=e.concat(g):r=-1,g.length&&n())}function n(){if(!v){var h=S(f);v=!0;for(var y=g.length;y;){for(e=g,g=[];++r<y;)e&&e[r].run();r=-1,y=g.length}e=null,v=!1,A(h)}}U.nextTick=function(h){var y=new Array(arguments.length-1);if(arguments.length>1)for(var p=1;p<arguments.length;p++)y[p-1]=arguments[p];g.push(new a(h,y)),g.length===1&&!v&&S(n)};function a(h,y){this.fun=h,this.array=y}a.prototype.run=function(){this.fun.apply(null,this.array)},U.title="browser",U.browser=!0,U.env={},U.argv=[],U.version="",U.versions={};function o(){}U.on=o,U.addListener=o,U.once=o,U.off=o,U.removeListener=o,U.removeAllListeners=o,U.emit=o,U.prependListener=o,U.prependOnceListener=o,U.listeners=function(h){return[]},U.binding=function(h){throw new Error("process.binding is not supported")},U.cwd=function(){return"/"},U.chdir=function(h){throw new Error("process.chdir is not supported")},U.umask=function(){return 0}},5877:function($,U,t){for(var M=t(9748),E=typeof window>"u"?t.g:window,i=["moz","webkit"],S="AnimationFrame",A=E["request"+S],g=E["cancel"+S]||E["cancelRequest"+S],v=0;!A&&v<i.length;v++)A=E[i[v]+"Request"+S],g=E[i[v]+"Cancel"+S]||E[i[v]+"CancelRequest"+S];if(!A||!g){var e=0,r=0,f=[],n=1e3/60;A=function(a){if(f.length===0){var o=M(),h=Math.max(0,n-(o-e));e=h+o,setTimeout(function(){var y=f.slice(0);f.length=0;for(var p=0;p<y.length;p++)if(!y[p].cancelled)try{y[p].callback(e)}catch(x){setTimeout(function(){throw x},0)}},Math.round(h))}return f.push({handle:++r,callback:a,cancelled:!1}),r},g=function(a){for(var o=0;o<f.length;o++)f[o].handle===a&&(f[o].cancelled=!0)}}$.exports=function(a){return A.call(E,a)},$.exports.cancel=function(){g.apply(E,arguments)},$.exports.polyfill=function(a){a||(a=E),a.requestAnimationFrame=A,a.cancelAnimationFrame=g}},3593:function($,U,t){var M=t(21527),E=t(25075),i=t(93447),S=t(71299),A=t(56131),g=t(30120),v=t(57060),e=v.float32,r=v.fract32;$.exports=n;var f=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function n(a,o){if(typeof a=="function"?(o||(o={}),o.regl=a):o=a,o.length&&(o.positions=o),a=o.regl,!a.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var h=a._gl,y,p,x,s,u,c,T={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},k=[];return s=a.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),p=a.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),x=a.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),u=a.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),c=a.buffer({usage:"static",type:"float",data:f}),l(o),y=a({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:a.prop("range"),lineWidth:a.prop("lineWidth"),capSize:a.prop("capSize"),opacity:a.prop("opacity"),scale:a.prop("scale"),translate:a.prop("translate"),scaleFract:a.prop("scaleFract"),translateFract:a.prop("translateFract"),viewport:function(L,w){return[w.viewport.x,w.viewport.y,L.viewportWidth,L.viewportHeight]}},attributes:{color:{buffer:s,offset:function(L,w){return w.offset*4},divisor:1},position:{buffer:p,offset:function(L,w){return w.offset*8},divisor:1},positionFract:{buffer:x,offset:function(L,w){return w.offset*8},divisor:1},error:{buffer:u,offset:function(L,w){return w.offset*16},divisor:1},direction:{buffer:c,stride:24,offset:0},lineOffset:{buffer:c,stride:24,offset:8},capOffset:{buffer:c,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:a.prop("viewport")},viewport:a.prop("viewport"),stencil:!1,instances:a.prop("count"),count:f.length}),A(_,{update:l,draw:b,destroy:d,regl:a,gl:h,canvas:h.canvas,groups:k}),_;function _(L){L?l(L):L===null&&d(),b()}function b(L){if(typeof L=="number")return P(L);L&&!Array.isArray(L)&&(L=[L]),a._refresh(),k.forEach(function(w,I){if(w){if(L&&(L[I]?w.draw=!0:w.draw=!1),!w.draw){w.draw=!0;return}P(I)}})}function P(L){typeof L=="number"&&(L=k[L]),L!=null&&L&&L.count&&L.color&&L.opacity&&L.positions&&L.positions.length>1&&(L.scaleRatio=[L.scale[0]*L.viewport.width,L.scale[1]*L.viewport.height],y(L),L.after&&L.after(L))}function l(L){if(L){L.length!=null?typeof L[0]=="number"&&(L=[{positions:L}]):Array.isArray(L)||(L=[L]);var w=0,I=0;if(_.groups=k=L.map(function(N,V){var K=k[V];if(N)typeof N=="function"?N={after:N}:typeof N[0]=="number"&&(N={positions:N});else return K;return N=S(N,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),K||(k[V]=K={id:V,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},N=A({},T,N)),i(K,N,[{lineWidth:function(Q){return+Q*.5},capSize:function(Q){return+Q*.5},opacity:parseFloat,errors:function(Q){return Q=g(Q),I+=Q.length,Q},positions:function(Q,at){return Q=g(Q,"float64"),at.count=Math.floor(Q.length/2),at.bounds=M(Q,2),at.offset=w,w+=at.count,Q}},{color:function(Q,at){var it=at.count;if(Q||(Q="transparent"),!Array.isArray(Q)||typeof Q[0]=="number"){var q=Q;Q=Array(it);for(var W=0;W<it;W++)Q[W]=q}if(Q.length<it)throw Error("Not enough colors");for(var Z=new Uint8Array(it*4),G=0;G<it;G++){var et=E(Q[G],"uint8");Z.set(et,G*4)}return Z},range:function(Q,at,it){var q=at.bounds;return Q||(Q=q),at.scale=[1/(Q[2]-Q[0]),1/(Q[3]-Q[1])],at.translate=[-Q[0],-Q[1]],at.scaleFract=r(at.scale),at.translateFract=r(at.translate),Q},viewport:function(Q){var at;return Array.isArray(Q)?at={x:Q[0],y:Q[1],width:Q[2]-Q[0],height:Q[3]-Q[1]}:Q?(at={x:Q.x||Q.left||0,y:Q.y||Q.top||0},Q.right?at.width=Q.right-at.x:at.width=Q.w||Q.width||0,Q.bottom?at.height=Q.bottom-at.y:at.height=Q.h||Q.height||0):at={x:0,y:0,width:h.drawingBufferWidth,height:h.drawingBufferHeight},at}}]),K}),w||I){var z=k.reduce(function(N,V,K){return N+(V?V.count:0)},0),B=new Float64Array(z*2),O=new Uint8Array(z*4),R=new Float32Array(z*4);k.forEach(function(N,V){if(N){var K=N.positions,Q=N.count,at=N.offset,it=N.color,q=N.errors;Q&&(O.set(it,at*4),R.set(q,at*4),B.set(K,at*2))}});var C=e(B);p(C);var F=r(B,C);x(F),s(O),u(R)}}}function d(){p.destroy(),x.destroy(),s.destroy(),u.destroy(),c.destroy()}}},46075:function($,U,t){var M=t(25075),E=t(21527),i=t(56131),S=t(56068),A=t(71299),g=t(30120),v=t(11474),e=t(54),r=t(57060),f=r.float32,n=r.fract32,a=t(83522),o=t(18863),h=t(6851);$.exports=y;function y(p,x){if(!(this instanceof y))return new y(p,x);if(typeof p=="function"?(x||(x={}),x.regl=p):x=p,x.length&&(x.positions=x),p=x.regl,!p.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=p._gl,this.regl=p,this.passes=[],this.shaders=y.shaders.has(p)?y.shaders.get(p):y.shaders.set(p,y.createShaders(p)).get(p),this.update(x)}y.dashMult=2,y.maxPatternLength=256,y.precisionThreshold=3e6,y.maxPoints=1e4,y.maxLines=2048,y.shaders=new a,y.createShaders=function(p){var x=p.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),s={primitive:"triangle strip",instances:p.prop("count"),count:4,offset:0,uniforms:{miterMode:function(k,_){return _.join==="round"?2:1},miterLimit:p.prop("miterLimit"),scale:p.prop("scale"),scaleFract:p.prop("scaleFract"),translateFract:p.prop("translateFract"),translate:p.prop("translate"),thickness:p.prop("thickness"),dashTexture:p.prop("dashTexture"),opacity:p.prop("opacity"),pixelRatio:p.context("pixelRatio"),id:p.prop("id"),dashLength:p.prop("dashLength"),viewport:function(k,_){return[_.viewport.x,_.viewport.y,k.viewportWidth,k.viewportHeight]},depth:p.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(k,_){return!_.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:p.prop("viewport")},viewport:p.prop("viewport")},u=p(i({vert:S([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:S([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:x,divisor:0,stride:8,offset:0},lineTop:{buffer:x,divisor:0,stride:8,offset:4},aCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:p.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},s)),c;try{c=p(i({cull:{enable:!0,face:"back"},vert:S([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:S([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:x,divisor:0,stride:8,offset:0},lineTop:{buffer:x,divisor:0,stride:8,offset:4},aColor:{buffer:p.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:p.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},s))}catch{c=u}var T=p({primitive:"triangle",elements:function(k,_){return _.triangles},offset:0,vert:S([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:S([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:p.prop("scale"),color:p.prop("fill"),scaleFract:p.prop("scaleFract"),translateFract:p.prop("translateFract"),translate:p.prop("translate"),opacity:p.prop("opacity"),pixelRatio:p.context("pixelRatio"),id:p.prop("id"),viewport:function(k,_){return[_.viewport.x,_.viewport.y,k.viewportWidth,k.viewportHeight]}},attributes:{position:{buffer:p.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:8}},blend:s.blend,depth:{enable:!1},scissor:s.scissor,stencil:s.stencil,viewport:s.viewport});return{fill:T,rect:u,miter:c}},y.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},y.prototype.render=function(){for(var p,x=[],s=arguments.length;s--;)x[s]=arguments[s];x.length&&(p=this).update.apply(p,x),this.draw()},y.prototype.draw=function(){for(var p=this,x=[],s=arguments.length;s--;)x[s]=arguments[s];return(x.length?x:this.passes).forEach(function(u,c){var T;if(u&&Array.isArray(u))return(T=p).draw.apply(T,u);typeof u=="number"&&(u=p.passes[u]),u&&u.count>1&&u.opacity&&(p.regl._refresh(),u.fill&&u.triangles&&u.triangles.length>2&&p.shaders.fill(u),u.thickness&&(u.scale[0]*u.viewport.width>y.precisionThreshold||u.scale[1]*u.viewport.height>y.precisionThreshold||u.join==="rect"||!u.join&&(u.thickness<=2||u.count>=y.maxPoints)?p.shaders.rect(u):p.shaders.miter(u)))}),this},y.prototype.update=function(p){var x=this;if(p){p.length!=null?typeof p[0]=="number"&&(p=[{positions:p}]):Array.isArray(p)||(p=[p]);var s=this,u=s.regl,c=s.gl;if(p.forEach(function(P,l){var d=x.passes[l];if(P!==void 0){if(P===null){x.passes[l]=null;return}if(typeof P[0]=="number"&&(P={positions:P}),P=A(P,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),d||(x.passes[l]=d={id:l,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:u.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:u.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},P=i({},y.defaults,P)),P.thickness!=null&&(d.thickness=parseFloat(P.thickness)),P.opacity!=null&&(d.opacity=parseFloat(P.opacity)),P.miterLimit!=null&&(d.miterLimit=parseFloat(P.miterLimit)),P.overlay!=null&&(d.overlay=!!P.overlay,l<y.maxLines&&(d.depth=2*(y.maxLines-1-l%y.maxLines)/y.maxLines-1)),P.join!=null&&(d.join=P.join),P.hole!=null&&(d.hole=P.hole),P.fill!=null&&(d.fill=P.fill?M(P.fill,"uint8"):null),P.viewport!=null&&(d.viewport=o(P.viewport)),d.viewport||(d.viewport=o([c.drawingBufferWidth,c.drawingBufferHeight])),P.close!=null&&(d.close=P.close),P.positions===null&&(P.positions=[]),P.positions){var L,w;if(P.positions.x&&P.positions.y){var I=P.positions.x,z=P.positions.y;w=d.count=Math.max(I.length,z.length),L=new Float64Array(w*2);for(var B=0;B<w;B++)L[B*2]=I[B],L[B*2+1]=z[B]}else L=g(P.positions,"float64"),w=d.count=Math.floor(L.length/2);var O=d.bounds=E(L,2);if(d.fill){for(var R=[],C={},F=0,N=0,V=0,K=d.count;N<K;N++){var Q=L[N*2],at=L[N*2+1];isNaN(Q)||isNaN(at)||Q==null||at==null?(Q=L[F*2],at=L[F*2+1],C[N]=F):F=N,R[V++]=Q,R[V++]=at}if(P.splitNull){d.count-1 in C||(C[d.count]=d.count-1);var it=Object.keys(C).map(Number).sort(function(zt,Tt){return zt-Tt}),q=[],W=0,Z=d.hole!=null?d.hole[0]:null;if(Z!=null){var G=h(it,function(zt){return zt>=Z});it=it.slice(0,G),it.push(Z)}for(var et=function(zt){var Tt=R.slice(W*2,it[zt]*2).concat(Z?R.slice(Z*2):[]),ft=(d.hole||[]).map(function(vt){return vt-Z+(it[zt]-W)}),ut=v(Tt,ft);ut=ut.map(function(vt){return vt+W+(vt+W<it[zt]?0:Z-it[zt])}),q.push.apply(q,ut),W=it[zt]+1},nt=0;nt<it.length;nt++)et(nt);for(var X=0,Y=q.length;X<Y;X++)C[q[X]]!=null&&(q[X]=C[q[X]]);d.triangles=q}else{for(var ot=v(R,d.hole||[]),rt=0,ht=ot.length;rt<ht;rt++)C[ot[rt]]!=null&&(ot[rt]=C[ot[rt]]);d.triangles=ot}}var pt=new Float64Array(L);e(pt,2,O);var yt=new Float64Array(w*2+6);d.close?L[0]===L[w*2-2]&&L[1]===L[w*2-1]?(yt[0]=pt[w*2-4],yt[1]=pt[w*2-3]):(yt[0]=pt[w*2-2],yt[1]=pt[w*2-1]):(yt[0]=pt[0],yt[1]=pt[1]),yt.set(pt,2),d.close?L[0]===L[w*2-2]&&L[1]===L[w*2-1]?(yt[w*2+2]=pt[2],yt[w*2+3]=pt[3],d.count-=1):(yt[w*2+2]=pt[0],yt[w*2+3]=pt[1],yt[w*2+4]=pt[2],yt[w*2+5]=pt[3]):(yt[w*2+2]=pt[w*2-2],yt[w*2+3]=pt[w*2-1],yt[w*2+4]=pt[w*2-2],yt[w*2+5]=pt[w*2-1]);var xt=f(yt);d.positionBuffer(xt);var Ft=n(yt,xt);d.positionFractBuffer(Ft)}if(P.range?d.range=P.range:d.range||(d.range=d.bounds),(P.range||P.positions)&&d.count){var Et=d.bounds,mt=Et[2]-Et[0],gt=Et[3]-Et[1],wt=d.range[2]-d.range[0],Pt=d.range[3]-d.range[1];d.scale=[mt/wt,gt/Pt],d.translate=[-d.range[0]/wt+Et[0]/wt||0,-d.range[1]/Pt+Et[1]/Pt||0],d.scaleFract=n(d.scale),d.translateFract=n(d.translate)}if(P.dashes){var Bt=0,kt;if(!P.dashes||P.dashes.length<2)Bt=1,kt=new Uint8Array([255,255,255,255,255,255,255,255]);else{Bt=0;for(var jt=0;jt<P.dashes.length;++jt)Bt+=P.dashes[jt];kt=new Uint8Array(Bt*y.dashMult);for(var Ht=0,Vt=255,ee=0;ee<2;ee++)for(var te=0;te<P.dashes.length;++te){for(var ae=0,le=P.dashes[te]*y.dashMult*.5;ae<le;++ae)kt[Ht++]=Vt;Vt^=255}}d.dashLength=Bt,d.dashTexture({channels:1,data:kt,width:kt.length,height:1,mag:"linear",min:"linear"},0,0)}if(P.color){var ce=d.count,pe=P.color;pe||(pe="transparent");var we=new Uint8Array(ce*4+4);if(!Array.isArray(pe)||typeof pe[0]=="number")for(var ve=M(pe,"uint8"),Mt=0;Mt<ce+1;Mt++)we.set(ve,Mt*4);else{for(var It=0;It<ce;It++){var Rt=M(pe[It],"uint8");we.set(Rt,It*4)}we.set(M(pe[0],"uint8"),ce*4)}d.colorBuffer({usage:"dynamic",type:"uint8",data:we})}}}),p.length<this.passes.length){for(var T=p.length;T<this.passes.length;T++){var k=this.passes[T];k&&(k.colorBuffer.destroy(),k.positionBuffer.destroy(),k.dashTexture.destroy())}this.passes.length=p.length}for(var _=[],b=0;b<this.passes.length;b++)this.passes[b]!==null&&_.push(this.passes[b]);return this.passes=_,this}},y.prototype.destroy=function(){return this.passes.forEach(function(p){p.colorBuffer.destroy(),p.positionBuffer.destroy(),p.dashTexture.destroy()}),this.passes.length=0,this}},11870:function($,U,t){function M(d,L){var w=d==null?null:typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(w!=null){var I,z,B,O,R=[],C=!0,F=!1;try{if(B=(w=w.call(d)).next,L===0){if(Object(w)!==w)return;C=!1}else for(;!(C=(I=B.call(w)).done)&&(R.push(I.value),R.length!==L);C=!0);}catch(N){F=!0,z=N}finally{try{if(!C&&w.return!=null&&(O=w.return(),Object(O)!==O))return}finally{if(F)throw z}}return R}}function E(d,L){return A(d)||M(d,L)||v(d,L)||f()}function i(d){return S(d)||g(d)||v(d)||r()}function S(d){if(Array.isArray(d))return e(d)}function A(d){if(Array.isArray(d))return d}function g(d){if(typeof Symbol<"u"&&d[Symbol.iterator]!=null||d["@@iterator"]!=null)return Array.from(d)}function v(d,L){if(d){if(typeof d=="string")return e(d,L);var w=Object.prototype.toString.call(d).slice(8,-1);if(w==="Object"&&d.constructor&&(w=d.constructor.name),w==="Map"||w==="Set")return Array.from(d);if(w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w))return e(d,L)}}function e(d,L){(L==null||L>d.length)&&(L=d.length);for(var w=0,I=new Array(L);w<L;w++)I[w]=d[w];return I}function r(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n=t(25075),a=t(21527),o=t(6475),h=t(88294),y=t(56131),p=t(56068),x=t(71299),s=t(93447),u=t(30120),c=t(62683),T=t(57060),k=t(18863),_=b;function b(d,L){var w=this;if(!(this instanceof b))return new b(d,L);typeof d=="function"?(L||(L={}),L.regl=d):(L=d,d=null),L&&L.length&&(L.positions=L),d=L.regl;var I=d._gl,z,B=[],O={},R=[],C=[null],F=[null],N=255,V=100;this.tooManyColors=c,z=d.texture({data:new Uint8Array(N*4),width:N,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),y(this,{regl:d,gl:I,groups:R,markerCache:F,markerTextures:C,palette:B,paletteIds:O,paletteTexture:z,maxColors:N,maxSize:V,canvas:I.canvas}),this.update(L);var K={uniforms:{constPointSize:!!L.constPointSize,opacity:d.prop("opacity"),paletteSize:function(it,q){return[w.tooManyColors?0:N,z.height]},pixelRatio:d.context("pixelRatio"),scale:d.prop("scale"),scaleFract:d.prop("scaleFract"),translate:d.prop("translate"),translateFract:d.prop("translateFract"),markerTexture:d.prop("markerTexture"),paletteTexture:z},attributes:{x:function(it,q){return q.xAttr||{buffer:q.positionBuffer,stride:8,offset:0}},y:function(it,q){return q.yAttr||{buffer:q.positionBuffer,stride:8,offset:4}},xFract:function(it,q){return q.xAttr?{constant:[0,0]}:{buffer:q.positionFractBuffer,stride:8,offset:0}},yFract:function(it,q){return q.yAttr?{constant:[0,0]}:{buffer:q.positionFractBuffer,stride:8,offset:4}},size:function(it,q){return q.size.length?{buffer:q.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(q.size*255/w.maxSize)]}},borderSize:function(it,q){return q.borderSize.length?{buffer:q.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(q.borderSize*255/w.maxSize)]}},colorId:function(it,q){return q.color.length?{buffer:q.colorBuffer,stride:w.tooManyColors?8:4,offset:0}:{constant:w.tooManyColors?B.slice(q.color*4,q.color*4+4):[q.color]}},borderColorId:function(it,q){return q.borderColor.length?{buffer:q.colorBuffer,stride:w.tooManyColors?8:4,offset:w.tooManyColors?4:2}:{constant:w.tooManyColors?B.slice(q.borderColor*4,q.borderColor*4+4):[q.borderColor]}},isActive:function(it,q){return q.activation===!0?{constant:[1]}:q.activation?q.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:d.prop("viewport")},viewport:d.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:d.prop("elements"),count:d.prop("count"),offset:d.prop("offset"),primitive:"points"},Q=y({},K);Q.frag=p([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),Q.vert=p([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=d(Q);var at=y({},K);at.frag=p([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),at.vert=p([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),c&&(at.frag=at.frag.replace("smoothstep","smoothStep"),Q.frag=Q.frag.replace("smoothstep","smoothStep")),this.drawCircle=d(at)}b.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},b.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},b.prototype.draw=function(){for(var d=this,L=arguments.length,w=new Array(L),I=0;I<L;I++)w[I]=arguments[I];var z=this.groups;if(w.length===1&&Array.isArray(w[0])&&(w[0][0]===null||Array.isArray(w[0][0]))&&(w=w[0]),this.regl._refresh(),w.length)for(var B=0;B<w.length;B++)this.drawItem(B,w[B]);else z.forEach(function(O,R){d.drawItem(R)});return this},b.prototype.drawItem=function(d,L){var w=this.groups,I=w[d];if(typeof L=="number"&&(d=L,I=w[L],L=null),!!(I&&I.count&&I.opacity)){I.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,I,L));for(var z=[],B=1;B<I.activation.length;B++)!I.activation[B]||I.activation[B]!==!0&&!I.activation[B].data.length||z.push.apply(z,i(this.getMarkerDrawOptions(B,I,L)));z.length&&this.drawMarker(z)}},b.prototype.getMarkerDrawOptions=function(d,L,w){var I=L.range,z=L.tree,B=L.viewport,O=L.activation,R=L.selectionBuffer,C=L.count;if(this.regl,!z)return w?[y({},L,{markerTexture:this.markerTextures[d],activation:O[d],count:w.length,elements:w,offset:0})]:[y({},L,{markerTexture:this.markerTextures[d],activation:O[d],offset:0})];var F=[],N=z.range(I,{lod:!0,px:[(I[2]-I[0])/B.width,(I[3]-I[1])/B.height]});if(w){for(var V=O[d],K=V.data,Q=new Uint8Array(C),at=0;at<w.length;at++){var it=w[at];Q[it]=K?K[it]:1}R.subdata(Q)}for(var q=N.length;q--;){var W=E(N[q],2),Z=W[0],G=W[1];F.push(y({},L,{markerTexture:this.markerTextures[d],activation:w?R:O[d],offset:Z,count:G-Z}))}return F},b.prototype.update=function(){for(var d=this,L=arguments.length,w=new Array(L),I=0;I<L;I++)w[I]=arguments[I];if(w.length){w.length===1&&Array.isArray(w[0])&&(w=w[0]);var z=this.groups,B=this.gl,O=this.regl,R=this.maxSize,C=this.maxColors,F=this.palette;this.groups=z=w.map(function(N,V){var K=z[V];if(N===void 0)return K;N===null?N={positions:null}:typeof N=="function"?N={ondraw:N}:typeof N[0]=="number"&&(N={positions:N}),N=x(N,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),N.positions===null&&(N.positions=[]),N.tooManyColors!=null&&(d.tooManyColors=N.tooManyColors),K||(z[V]=K={id:V,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:O.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:O.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:O.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:O.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:O.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},N=y({},b.defaults,N)),N.positions&&!("marker"in N)&&(N.marker=K.marker,delete K.marker),N.marker&&!("positions"in N)&&(N.positions=K.positions,delete K.positions);var Q=0,at=0;if(s(K,N,[{snap:!0,size:function(mt,gt){return mt==null&&(mt=b.defaults.size),Q+=mt&&mt.length?1:0,mt},borderSize:function(mt,gt){return mt==null&&(mt=b.defaults.borderSize),Q+=mt&&mt.length?1:0,mt},opacity:parseFloat,color:function(mt,gt){return mt==null&&(mt=b.defaults.color),mt=d.updateColor(mt),at++,mt},borderColor:function(mt,gt){return mt==null&&(mt=b.defaults.borderColor),mt=d.updateColor(mt),at++,mt},bounds:function(mt,gt,wt){return"range"in wt||(wt.range=null),mt},positions:function(mt,gt,wt){var Pt=gt.snap,Bt=gt.positionBuffer,kt=gt.positionFractBuffer,jt=gt.selectionBuffer;if(mt.x||mt.y)return mt.x.length?gt.xAttr={buffer:O.buffer(mt.x),offset:0,stride:4,count:mt.x.length}:gt.xAttr={buffer:mt.x.buffer,offset:mt.x.offset*4||0,stride:(mt.x.stride||1)*4,count:mt.x.count},mt.y.length?gt.yAttr={buffer:O.buffer(mt.y),offset:0,stride:4,count:mt.y.length}:gt.yAttr={buffer:mt.y.buffer,offset:mt.y.offset*4||0,stride:(mt.y.stride||1)*4,count:mt.y.count},gt.count=Math.max(gt.xAttr.count,gt.yAttr.count),mt;mt=u(mt,"float64");var Ht=gt.count=Math.floor(mt.length/2),Vt=gt.bounds=Ht?a(mt,2):null;if(!wt.range&&!gt.range&&(delete gt.range,wt.range=Vt),!wt.marker&&!gt.marker&&(delete gt.marker,wt.marker=null),Pt&&(Pt===!0||Ht>Pt)?gt.tree=h(mt,{bounds:Vt}):Pt&&Pt.length&&(gt.tree=Pt),gt.tree){var ee={primitive:"points",usage:"static",data:gt.tree,type:"uint32"};gt.elements?gt.elements(ee):gt.elements=O.elements(ee)}var te=T.float32(mt);Bt({data:te,usage:"dynamic"});var ae=T.fract32(mt,te);return kt({data:ae,usage:"dynamic"}),jt({data:new Uint8Array(Ht),type:"uint8",usage:"stream"}),mt}},{marker:function(mt,gt,wt){var Pt=gt.activation;if(Pt.forEach(function(ae){return ae&&ae.destroy&&ae.destroy()}),Pt.length=0,!mt||typeof mt[0]=="number"){var Bt=d.addMarker(mt);Pt[Bt]=!0}else{for(var kt=[],jt=0,Ht=Math.min(mt.length,gt.count);jt<Ht;jt++){var Vt=d.addMarker(mt[jt]);kt[Vt]||(kt[Vt]=new Uint8Array(gt.count)),kt[Vt][jt]=1}for(var ee=0;ee<kt.length;ee++)if(kt[ee]){var te={data:kt[ee],type:"uint8",usage:"static"};Pt[ee]?Pt[ee](te):Pt[ee]=O.buffer(te),Pt[ee].data=kt[ee]}}return mt},range:function(mt,gt,wt){var Pt=gt.bounds;if(Pt)return mt||(mt=Pt),gt.scale=[1/(mt[2]-mt[0]),1/(mt[3]-mt[1])],gt.translate=[-mt[0],-mt[1]],gt.scaleFract=T.fract(gt.scale),gt.translateFract=T.fract(gt.translate),mt},viewport:function(mt){var gt=k(mt||[B.drawingBufferWidth,B.drawingBufferHeight]);return gt}}]),Q){var it=K,q=it.count,W=it.size,Z=it.borderSize,G=it.sizeBuffer,et=new Uint8Array(q*2);if(W.length||Z.length)for(var nt=0;nt<q;nt++)et[nt*2]=Math.round((W[nt]==null?W:W[nt])*255/R),et[nt*2+1]=Math.round((Z[nt]==null?Z:Z[nt])*255/R);G({data:et,usage:"dynamic"})}if(at){var X=K,Y=X.count,ot=X.color,rt=X.borderColor,ht=X.colorBuffer,pt;if(d.tooManyColors){if(ot.length||rt.length){pt=new Uint8Array(Y*8);for(var yt=0;yt<Y;yt++){var xt=ot[yt];pt[yt*8]=F[xt*4],pt[yt*8+1]=F[xt*4+1],pt[yt*8+2]=F[xt*4+2],pt[yt*8+3]=F[xt*4+3];var Ft=rt[yt];pt[yt*8+4]=F[Ft*4],pt[yt*8+5]=F[Ft*4+1],pt[yt*8+6]=F[Ft*4+2],pt[yt*8+7]=F[Ft*4+3]}}}else if(ot.length||rt.length){pt=new Uint8Array(Y*4+2);for(var Et=0;Et<Y;Et++)ot[Et]!=null&&(pt[Et*4]=ot[Et]%C,pt[Et*4+1]=Math.floor(ot[Et]/C)),rt[Et]!=null&&(pt[Et*4+2]=rt[Et]%C,pt[Et*4+3]=Math.floor(rt[Et]/C))}ht({data:pt||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return K})}},b.prototype.addMarker=function(d){var L=this.markerTextures,w=this.regl,I=this.markerCache,z=d==null?0:I.indexOf(d);if(z>=0)return z;var B;if(d instanceof Uint8Array||d instanceof Uint8ClampedArray)B=d;else{B=new Uint8Array(d.length);for(var O=0,R=d.length;O<R;O++)B[O]=d[O]*255}var C=Math.floor(Math.sqrt(B.length));return z=L.length,I.push(d),L.push(w.texture({channels:1,data:B,radius:C,mag:"linear",min:"linear"})),z},b.prototype.updateColor=function(d){var L=this.paletteIds,w=this.palette,I=this.maxColors;Array.isArray(d)||(d=[d]);var z=[];if(typeof d[0]=="number"){var B=[];if(Array.isArray(d))for(var O=0;O<d.length;O+=4)B.push(d.slice(O,O+4));else for(var R=0;R<d.length;R+=4)B.push(d.subarray(R,R+4));d=B}for(var C=0;C<d.length;C++){var F=d[C];F=n(F,"uint8");var N=o(F,!1);if(L[N]==null){var V=w.length;L[N]=Math.floor(V/4),w[V]=F[0],w[V+1]=F[1],w[V+2]=F[2],w[V+3]=F[3]}z[C]=L[N]}return!this.tooManyColors&&w.length>I*4&&(this.tooManyColors=!0),this.updatePalette(w),z.length===1?z[0]:z},b.prototype.updatePalette=function(d){if(!this.tooManyColors){var L=this.maxColors,w=this.paletteTexture,I=Math.ceil(d.length*.25/L);if(I>1){d=d.slice();for(var z=d.length*.25%L;z<I*L;z++)d.push(0,0,0,0)}w.height<I&&w.resize(L,I),w.subimage({width:Math.min(d.length*.25,L),height:I,data:d},0,0)}},b.prototype.destroy=function(){return this.groups.forEach(function(d){d.sizeBuffer.destroy(),d.positionBuffer.destroy(),d.positionFractBuffer.destroy(),d.colorBuffer.destroy(),d.activation.forEach(function(L){return L&&L.destroy&&L.destroy()}),d.selectionBuffer.destroy(),d.elements&&d.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(d){return d&&d.destroy&&d.destroy()}),this};var P=t(56131),l=function(d,L){var w=new _(d,L),I=w.render.bind(w);return P(I,{render:I,update:w.update.bind(w),draw:w.draw.bind(w),destroy:w.destroy.bind(w),regl:w.regl,gl:w.gl,canvas:w.gl.canvas,groups:w.groups,markers:w.markerCache,palette:w.palette}),I};$.exports=l},60487:function($,U,t){var M=t(11870),E=t(71299),i=t(21527),S=t(5877),A=t(57471),g=t(18863),v=t(30120);$.exports=e;function e(a,o){if(!(this instanceof e))return new e(a);this.traces=[],this.passes={},this.regl=a,this.scatter=M(a),this.canvas=this.scatter.canvas}e.prototype.render=function(){for(var a=this,o,h=[],y=arguments.length;y--;)h[y]=arguments[y];return h.length&&(o=this).update.apply(o,h),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=S(function(){a.draw(),a.dirty=!0,a.planned=null})):(this.draw(),this.dirty=!0,S(function(){a.dirty=!1})),this)},e.prototype.update=function(){for(var a,o=[],h=arguments.length;h--;)o[h]=arguments[h];if(o.length){for(var y=0;y<o.length;y++)this.updateItem(y,o[y]);this.traces=this.traces.filter(Boolean);for(var p=[],x=0,s=0;s<this.traces.length;s++){for(var u=this.traces[s],c=this.traces[s].passes,T=0;T<c.length;T++)p.push(this.passes[c[T]]);u.passOffset=x,x+=u.passes.length}return(a=this.scatter).update.apply(a,p),this}},e.prototype.updateItem=function(a,o){var h=this,y=h.regl;if(o===null)return this.traces[a]=null,this;if(!o)return this;var p=E(o,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),x=this.traces[a]||(this.traces[a]={id:a,buffer:y.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:g([y._gl.drawingBufferWidth,y._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(p.color!=null&&(x.color=p.color),p.size!=null&&(x.size=p.size),p.marker!=null&&(x.marker=p.marker),p.borderColor!=null&&(x.borderColor=p.borderColor),p.borderSize!=null&&(x.borderSize=p.borderSize),p.opacity!=null&&(x.opacity=p.opacity),p.viewport&&(x.viewport=g(p.viewport)),p.diagonal!=null&&(x.diagonal=p.diagonal),p.upper!=null&&(x.upper=p.upper),p.lower!=null&&(x.lower=p.lower),p.data){x.buffer(v(p.data)),x.columns=p.data.length,x.count=p.data[0].length,x.bounds=[];for(var s=0;s<x.columns;s++)x.bounds[s]=i(p.data[s],1)}var u;p.range&&(x.range=p.range,u=x.range&&typeof x.range[0]!="number"),p.domain&&(x.domain=p.domain);var c=!1;p.padding!=null&&(Array.isArray(p.padding)&&p.padding.length===x.columns&&typeof p.padding[p.padding.length-1]=="number"?(x.padding=p.padding.map(n),c=!0):x.padding=n(p.padding));var T=x.columns,k=x.count,_=x.viewport.width,b=x.viewport.height,P=x.viewport.x,l=x.viewport.y,d=_/T,L=b/T;x.passes=[];for(var w=0;w<T;w++)for(var I=0;I<T;I++)if(!(!x.diagonal&&I===w)&&!(!x.upper&&w>I)&&!(!x.lower&&w<I)){var z=r(x.id,w,I),B=this.passes[z]||(this.passes[z]={});if(p.data&&(p.transpose?B.positions={x:{buffer:x.buffer,offset:I,count:k,stride:T},y:{buffer:x.buffer,offset:w,count:k,stride:T}}:B.positions={x:{buffer:x.buffer,offset:I*k,count:k},y:{buffer:x.buffer,offset:w*k,count:k}},B.bounds=f(x.bounds,w,I)),p.domain||p.viewport||p.data){var O=c?f(x.padding,w,I):x.padding;if(x.domain){var R=f(x.domain,w,I),C=R[0],F=R[1],N=R[2],V=R[3];B.viewport=[P+C*_+O[0],l+F*b+O[1],P+N*_-O[2],l+V*b-O[3]]}else B.viewport=[P+I*d+d*O[0],l+w*L+L*O[1],P+(I+1)*d-d*O[2],l+(w+1)*L-L*O[3]]}p.color&&(B.color=x.color),p.size&&(B.size=x.size),p.marker&&(B.marker=x.marker),p.borderSize&&(B.borderSize=x.borderSize),p.borderColor&&(B.borderColor=x.borderColor),p.opacity&&(B.opacity=x.opacity),p.range&&(B.range=u?f(x.range,w,I):x.range||B.bounds),x.passes.push(z)}return this},e.prototype.draw=function(){for(var a,o=[],h=arguments.length;h--;)o[h]=arguments[h];if(!o.length)this.scatter.draw();else{for(var y=[],p=0;p<o.length;p++)if(typeof o[p]=="number"){var x=this.traces[o[p]],s=x.passes,u=x.passOffset;y.push.apply(y,A(u,u+s.length))}else if(o[p].length){var c=o[p],T=this.traces[p],k=T.passes,_=T.passOffset;k=k.map(function(b,P){y[_+P]=c})}(a=this.scatter).draw.apply(a,y)}return this},e.prototype.destroy=function(){return this.traces.forEach(function(a){a.buffer&&a.buffer.destroy&&a.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function r(a,o,h){var y=a.id!=null?a.id:a,p=o,x=h,s=y<<16|(p&255)<<8|x&255;return s}function f(a,o,h){var y,p,x,s,u=a[o],c=a[h];return u.length>2?(u[0],u[2],y=u[1],p=u[3]):u.length?(y=u[0],p=u[1]):(u.x,y=u.y,u.x+u.width,p=u.y+u.height),c.length>2?(x=c[0],s=c[2],c[1],c[3]):c.length?(x=c[0],s=c[1]):(x=c.x,c.y,s=c.x+c.width,c.y+c.height),[x,y,s,p]}function n(a){if(typeof a=="number")return[a,a,a,a];if(a.length===2)return[a[0],a[1],a[0],a[1]];var o=g(a);return[o.x,o.y,o.x+o.width,o.y+o.height]}},98580:function($){(function(U,t){$.exports=t()})(this,function(){function U(he,je){this.id=ht++,this.type=he,this.data=je}function t(he){if(he.length===0)return[];var je=he.charAt(0),Re=he.charAt(he.length-1);if(1<he.length&&je===Re&&(je==='"'||je==="'"))return['"'+he.substr(1,he.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(je=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(he))return t(he.substr(0,je.index)).concat(t(je[1])).concat(t(he.substr(je.index+je[0].length)));if(je=he.split("."),je.length===1)return['"'+he.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(he=[],Re=0;Re<je.length;++Re)he=he.concat(t(je[Re]));return he}function M(he){return"["+t(he).join("][")+"]"}function E(he,je){if(typeof he=="function")return new U(0,he);if(typeof he=="number"||typeof he=="boolean")return new U(5,he);if(Array.isArray(he))return new U(6,he.map(function(Re,_r){return E(Re)}));if(he instanceof U)return he}function i(){var he={"":0},je=[""];return{id:function(Re){var _r=he[Re];return _r||(_r=he[Re]=je.length,je.push(Re),_r)},str:function(Re){return je[Re]}}}function S(he,je,Re){function _r(){var re=window.innerWidth,fe=window.innerHeight;he!==document.body&&(fe=tr.getBoundingClientRect(),re=fe.right-fe.left,fe=fe.bottom-fe.top),tr.width=Re*re,tr.height=Re*fe}var tr=document.createElement("canvas");rt(tr.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),he.appendChild(tr),he===document.body&&(tr.style.position="absolute",rt(he.style,{margin:0,padding:0}));var Gt;return he!==document.body&&typeof ResizeObserver=="function"?(Gt=new ResizeObserver(function(){setTimeout(_r)}),Gt.observe(he)):window.addEventListener("resize",_r,!1),_r(),{canvas:tr,onDestroy:function(){Gt?Gt.disconnect():window.removeEventListener("resize",_r),he.removeChild(tr)}}}function A(he,je){function Re(_r){try{return he.getContext(_r,je)}catch{return null}}return Re("webgl")||Re("experimental-webgl")||Re("webgl-experimental")}function g(he){return typeof he=="string"?he.split():he}function v(he){return typeof he=="string"?document.querySelector(he):he}function e(he){var je=he||{},Re,_r,tr,Gt;he={};var re=[],fe=[],ye=typeof window>"u"?1:window.devicePixelRatio,Le=!1,_e={},Ce=function(We){},ze=function(){};if(typeof je=="string"?Re=document.querySelector(je):typeof je=="object"&&(typeof je.nodeName=="string"&&typeof je.appendChild=="function"&&typeof je.getBoundingClientRect=="function"?Re=je:typeof je.drawArrays=="function"||typeof je.drawElements=="function"?(Gt=je,tr=Gt.canvas):("gl"in je?Gt=je.gl:"canvas"in je?tr=v(je.canvas):"container"in je&&(_r=v(je.container)),"attributes"in je&&(he=je.attributes),"extensions"in je&&(re=g(je.extensions)),"optionalExtensions"in je&&(fe=g(je.optionalExtensions)),"onDone"in je&&(Ce=je.onDone),"profile"in je&&(Le=!!je.profile),"pixelRatio"in je&&(ye=+je.pixelRatio),"cachedCode"in je&&(_e=je.cachedCode))),Re&&(Re.nodeName.toLowerCase()==="canvas"?tr=Re:_r=Re),!Gt){if(!tr){if(Re=S(_r||document.body,Ce,ye),!Re)return null;tr=Re.canvas,ze=Re.onDestroy}he.premultipliedAlpha===void 0&&(he.premultipliedAlpha=!0),Gt=A(tr,he)}return Gt?{gl:Gt,canvas:tr,container:_r,extensions:re,optionalExtensions:fe,pixelRatio:ye,profile:Le,cachedCode:_e,onDone:Ce,onDestroy:ze}:(ze(),Ce("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function r(he,je){function Re(re){re=re.toLowerCase();var fe;try{fe=_r[re]=he.getExtension(re)}catch{}return!!fe}for(var _r={},tr=0;tr<je.extensions.length;++tr){var Gt=je.extensions[tr];if(!Re(Gt))return je.onDestroy(),je.onDone('"'+Gt+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return je.optionalExtensions.forEach(Re),{extensions:_r,restore:function(){Object.keys(_r).forEach(function(re){if(_r[re]&&!Re(re))throw Error("(regl): error restoring extension "+re)})}}}function f(he,je){for(var Re=Array(he),_r=0;_r<he;++_r)Re[_r]=je(_r);return Re}function n(he){var je,Re;return je=(65535<he)<<4,he>>>=je,Re=(255<he)<<3,he>>>=Re,je|=Re,Re=(15<he)<<2,he>>>=Re,je|=Re,Re=(3<he)<<1,je|Re|he>>>Re>>1}function a(){function he(_r){t:{for(var tr=16;268435456>=tr;tr*=16)if(_r<=tr){_r=tr;break t}_r=0}return tr=Re[n(_r)>>2],0<tr.length?tr.pop():new ArrayBuffer(_r)}function je(_r){Re[n(_r.byteLength)>>2].push(_r)}var Re=f(8,function(){return[]});return{alloc:he,free:je,allocType:function(_r,tr){var Gt=null;switch(_r){case 5120:Gt=new Int8Array(he(tr),0,tr);break;case 5121:Gt=new Uint8Array(he(tr),0,tr);break;case 5122:Gt=new Int16Array(he(2*tr),0,tr);break;case 5123:Gt=new Uint16Array(he(2*tr),0,tr);break;case 5124:Gt=new Int32Array(he(4*tr),0,tr);break;case 5125:Gt=new Uint32Array(he(4*tr),0,tr);break;case 5126:Gt=new Float32Array(he(4*tr),0,tr);break;default:return null}return Gt.length!==tr?Gt.subarray(0,tr):Gt},freeType:function(_r){je(_r.buffer)}}}function o(he){return!!he&&typeof he=="object"&&Array.isArray(he.shape)&&Array.isArray(he.stride)&&typeof he.offset=="number"&&he.shape.length===he.stride.length&&(Array.isArray(he.data)||mt(he.data))}function h(he,je,Re,_r,tr,Gt){for(var re=0;re<je;++re)for(var fe=he[re],ye=0;ye<Re;++ye)for(var Le=fe[ye],_e=0;_e<_r;++_e)tr[Gt++]=Le[_e]}function y(he,je,Re,_r,tr){for(var Gt=1,re=Re+1;re<je.length;++re)Gt*=je[re];var fe=je[Re];if(je.length-Re===4){var ye=je[Re+1],Le=je[Re+2];for(je=je[Re+3],re=0;re<fe;++re)h(he[re],ye,Le,je,_r,tr),tr+=Gt}else for(re=0;re<fe;++re)y(he[re],je,Re+1,_r,tr),tr+=Gt}function p(he){return Pt[Object.prototype.toString.call(he)]|0}function x(he,je){for(var Re=0;Re<je.length;++Re)he[Re]=je[Re]}function s(he,je,Re,_r,tr,Gt,re){for(var fe=0,ye=0;ye<Re;++ye)for(var Le=0;Le<_r;++Le)he[fe++]=je[tr*ye+Gt*Le+re]}function u(he,je,Re,_r){function tr(Ce){this.id=ye++,this.buffer=he.createBuffer(),this.type=Ce,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Re.profile&&(this.stats={size:0})}function Gt(Ce,ze,We){Ce.byteLength=ze.byteLength,he.bufferData(Ce.type,ze,We)}function re(Ce,ze,We,qe,ir,xr){if(Ce.usage=We,Array.isArray(ze)){if(Ce.dtype=qe||5126,0<ze.length)if(Array.isArray(ze[0])){ir=Ht(ze);for(var Dt=qe=1;Dt<ir.length;++Dt)qe*=ir[Dt];Ce.dimension=qe,ze=jt(ze,ir,Ce.dtype),Gt(Ce,ze,We),xr?Ce.persistentData=ze:Ft.freeType(ze)}else typeof ze[0]=="number"?(Ce.dimension=ir,ir=Ft.allocType(Ce.dtype,ze.length),x(ir,ze),Gt(Ce,ir,We),xr?Ce.persistentData=ir:Ft.freeType(ir)):mt(ze[0])&&(Ce.dimension=ze[0].length,Ce.dtype=qe||p(ze[0])||5126,ze=jt(ze,[ze.length,ze[0].length],Ce.dtype),Gt(Ce,ze,We),xr?Ce.persistentData=ze:Ft.freeType(ze))}else if(mt(ze))Ce.dtype=qe||p(ze),Ce.dimension=ir,Gt(Ce,ze,We),xr&&(Ce.persistentData=new Uint8Array(new Uint8Array(ze.buffer)));else if(o(ze)){ir=ze.shape;var Ut=ze.stride,Dt=ze.offset,Te=0,Se=0,Be=0,Je=0;ir.length===1?(Te=ir[0],Se=1,Be=Ut[0],Je=0):ir.length===2&&(Te=ir[0],Se=ir[1],Be=Ut[0],Je=Ut[1]),Ce.dtype=qe||p(ze.data)||5126,Ce.dimension=Se,ir=Ft.allocType(Ce.dtype,Te*Se),s(ir,ze.data,Te,Se,Be,Je,Dt),Gt(Ce,ir,We),xr?Ce.persistentData=ir:Ft.freeType(ir)}else ze instanceof ArrayBuffer&&(Ce.dtype=5121,Ce.dimension=ir,Gt(Ce,ze,We),xr&&(Ce.persistentData=new Uint8Array(new Uint8Array(ze))))}function fe(Ce){je.bufferCount--,_r(Ce),he.deleteBuffer(Ce.buffer),Ce.buffer=null,delete Le[Ce.id]}var ye=0,Le={};tr.prototype.bind=function(){he.bindBuffer(this.type,this.buffer)},tr.prototype.destroy=function(){fe(this)};var _e=[];return Re.profile&&(je.getTotalBufferSize=function(){var Ce=0;return Object.keys(Le).forEach(function(ze){Ce+=Le[ze].stats.size}),Ce}),{create:function(Ce,ze,We,qe){function ir(Dt){var Ut=35044,Te=null,Se=0,Be=0,Je=1;return Array.isArray(Dt)||mt(Dt)||o(Dt)||Dt instanceof ArrayBuffer?Te=Dt:typeof Dt=="number"?Se=Dt|0:Dt&&("data"in Dt&&(Te=Dt.data),"usage"in Dt&&(Ut=kt[Dt.usage]),"type"in Dt&&(Be=Bt[Dt.type]),"dimension"in Dt&&(Je=Dt.dimension|0),"length"in Dt&&(Se=Dt.length|0)),xr.bind(),Te?re(xr,Te,Ut,Be,Je,qe):(Se&&he.bufferData(xr.type,Se,Ut),xr.dtype=Be||5121,xr.usage=Ut,xr.dimension=Je,xr.byteLength=Se),Re.profile&&(xr.stats.size=xr.byteLength*Vt[xr.dtype]),ir}je.bufferCount++;var xr=new tr(ze);return Le[xr.id]=xr,We||ir(Ce),ir._reglType="buffer",ir._buffer=xr,ir.subdata=function(Dt,Ut){var Te=(Ut||0)|0,Se;if(xr.bind(),mt(Dt)||Dt instanceof ArrayBuffer)he.bufferSubData(xr.type,Te,Dt);else if(Array.isArray(Dt)){if(0<Dt.length)if(typeof Dt[0]=="number"){var Be=Ft.allocType(xr.dtype,Dt.length);x(Be,Dt),he.bufferSubData(xr.type,Te,Be),Ft.freeType(Be)}else(Array.isArray(Dt[0])||mt(Dt[0]))&&(Se=Ht(Dt),Be=jt(Dt,Se,xr.dtype),he.bufferSubData(xr.type,Te,Be),Ft.freeType(Be))}else if(o(Dt)){Se=Dt.shape;var Je=Dt.stride,$e=Be=0,Xe=0,Oe=0;Se.length===1?(Be=Se[0],$e=1,Xe=Je[0],Oe=0):Se.length===2&&(Be=Se[0],$e=Se[1],Xe=Je[0],Oe=Je[1]),Se=Array.isArray(Dt.data)?xr.dtype:p(Dt.data),Se=Ft.allocType(Se,Be*$e),s(Se,Dt.data,Be,$e,Xe,Oe,Dt.offset),he.bufferSubData(xr.type,Te,Se),Ft.freeType(Se)}return ir},Re.profile&&(ir.stats=xr.stats),ir.destroy=function(){fe(xr)},ir},createStream:function(Ce,ze){var We=_e.pop();return We||(We=new tr(Ce)),We.bind(),re(We,ze,35040,0,1,!1),We},destroyStream:function(Ce){_e.push(Ce)},clear:function(){gt(Le).forEach(fe),_e.forEach(fe)},getBuffer:function(Ce){return Ce&&Ce._buffer instanceof tr?Ce._buffer:null},restore:function(){gt(Le).forEach(function(Ce){Ce.buffer=he.createBuffer(),he.bindBuffer(Ce.type,Ce.buffer),he.bufferData(Ce.type,Ce.persistentData||Ce.byteLength,Ce.usage)})},_initBuffer:re}}function c(he,je,Re,_r){function tr(Ce){this.id=ye++,fe[this.id]=this,this.buffer=Ce,this.primType=4,this.type=this.vertCount=0}function Gt(Ce,ze,We,qe,ir,xr,Dt){Ce.buffer.bind();var Ut;if(ze?((Ut=Dt)||mt(ze)&&(!o(ze)||mt(ze.data))||(Ut=je.oes_element_index_uint?5125:5123),Re._initBuffer(Ce.buffer,ze,We,Ut,3)):(he.bufferData(34963,xr,We),Ce.buffer.dtype=Ut||5121,Ce.buffer.usage=We,Ce.buffer.dimension=3,Ce.buffer.byteLength=xr),Ut=Dt,!Dt){switch(Ce.buffer.dtype){case 5121:case 5120:Ut=5121;break;case 5123:case 5122:Ut=5123;break;case 5125:case 5124:Ut=5125}Ce.buffer.dtype=Ut}Ce.type=Ut,ze=ir,0>ze&&(ze=Ce.buffer.byteLength,Ut===5123?ze>>=1:Ut===5125&&(ze>>=2)),Ce.vertCount=ze,ze=qe,0>qe&&(ze=4,qe=Ce.buffer.dimension,qe===1&&(ze=0),qe===2&&(ze=1),qe===3&&(ze=4)),Ce.primType=ze}function re(Ce){_r.elementsCount--,delete fe[Ce.id],Ce.buffer.destroy(),Ce.buffer=null}var fe={},ye=0,Le={uint8:5121,uint16:5123};je.oes_element_index_uint&&(Le.uint32=5125),tr.prototype.bind=function(){this.buffer.bind()};var _e=[];return{create:function(Ce,ze){function We(xr){if(xr)if(typeof xr=="number")qe(xr),ir.primType=4,ir.vertCount=xr|0,ir.type=5121;else{var Dt=null,Ut=35044,Te=-1,Se=-1,Be=0,Je=0;Array.isArray(xr)||mt(xr)||o(xr)?Dt=xr:("data"in xr&&(Dt=xr.data),"usage"in xr&&(Ut=kt[xr.usage]),"primitive"in xr&&(Te=ee[xr.primitive]),"count"in xr&&(Se=xr.count|0),"type"in xr&&(Je=Le[xr.type]),"length"in xr?Be=xr.length|0:(Be=Se,Je===5123||Je===5122?Be*=2:(Je===5125||Je===5124)&&(Be*=4))),Gt(ir,Dt,Ut,Te,Se,Be,Je)}else qe(),ir.primType=4,ir.vertCount=0,ir.type=5121;return We}var qe=Re.create(null,34963,!0),ir=new tr(qe._buffer);return _r.elementsCount++,We(Ce),We._reglType="elements",We._elements=ir,We.subdata=function(xr,Dt){return qe.subdata(xr,Dt),We},We.destroy=function(){re(ir)},We},createStream:function(Ce){var ze=_e.pop();return ze||(ze=new tr(Re.create(null,34963,!0,!1)._buffer)),Gt(ze,Ce,35040,-1,-1,0,0),ze},destroyStream:function(Ce){_e.push(Ce)},getElements:function(Ce){return typeof Ce=="function"&&Ce._elements instanceof tr?Ce._elements:null},clear:function(){gt(fe).forEach(re)}}}function T(he){for(var je=Ft.allocType(5123,he.length),Re=0;Re<he.length;++Re)if(isNaN(he[Re]))je[Re]=65535;else if(he[Re]===1/0)je[Re]=31744;else if(he[Re]===-1/0)je[Re]=64512;else{te[0]=he[Re];var Gt=ae[0],_r=Gt>>>31<<15,tr=(Gt<<1>>>24)-127,Gt=Gt>>13&1023;je[Re]=-24>tr?_r:-14>tr?_r+(Gt+1024>>-14-tr):15<tr?_r+31744:_r+(tr+15<<10)+Gt}return je}function k(he){return Array.isArray(he)||mt(he)}function _(he){return"[object "+he+"]"}function b(he){return Array.isArray(he)&&(he.length===0||typeof he[0]=="number")}function P(he){return!!(Array.isArray(he)&&he.length!==0&&k(he[0]))}function l(he){return Object.prototype.toString.call(he)}function d(he){if(!he)return!1;var je=l(he);return 0<=Tt.indexOf(je)?!0:b(he)||P(he)||o(he)}function L(he,je){he.type===36193?(he.data=T(je),Ft.freeType(je)):he.data=je}function w(he,je,Re,_r,tr,Gt){if(he=typeof ut[he]<"u"?ut[he]:pe[he]*ft[je],Gt&&(he*=6),tr){for(_r=0;1<=Re;)_r+=he*Re*Re,Re/=2;return _r}return he*Re*_r}function I(he,je,Re,_r,tr,Gt,re){function fe(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function ye(gr,$r){gr.internalformat=$r.internalformat,gr.format=$r.format,gr.type=$r.type,gr.compressed=$r.compressed,gr.premultiplyAlpha=$r.premultiplyAlpha,gr.flipY=$r.flipY,gr.unpackAlignment=$r.unpackAlignment,gr.colorSpace=$r.colorSpace,gr.width=$r.width,gr.height=$r.height,gr.channels=$r.channels}function Le(gr,$r){if(typeof $r=="object"&&$r){"premultiplyAlpha"in $r&&(gr.premultiplyAlpha=$r.premultiplyAlpha),"flipY"in $r&&(gr.flipY=$r.flipY),"alignment"in $r&&(gr.unpackAlignment=$r.alignment),"colorSpace"in $r&&(gr.colorSpace=rn[$r.colorSpace]),"type"in $r&&(gr.type=Zr[$r.type]);var Jr=gr.width,ln=gr.height,zn=gr.channels,mn=!1;"shape"in $r?(Jr=$r.shape[0],ln=$r.shape[1],$r.shape.length===3&&(zn=$r.shape[2],mn=!0)):("radius"in $r&&(Jr=ln=$r.radius),"width"in $r&&(Jr=$r.width),"height"in $r&&(ln=$r.height),"channels"in $r&&(zn=$r.channels,mn=!0)),gr.width=Jr|0,gr.height=ln|0,gr.channels=zn|0,Jr=!1,"format"in $r&&(Jr=$r.format,ln=gr.internalformat=yn[Jr],gr.format=xn[ln],Jr in Zr&&!("type"in $r)&&(gr.type=Zr[Jr]),Jr in Tn&&(gr.compressed=!0),Jr=!0),!mn&&Jr?gr.channels=pe[gr.format]:mn&&!Jr&&gr.channels!==ce[gr.format]&&(gr.format=gr.internalformat=ce[gr.channels])}}function _e(gr){he.pixelStorei(37440,gr.flipY),he.pixelStorei(37441,gr.premultiplyAlpha),he.pixelStorei(37443,gr.colorSpace),he.pixelStorei(3317,gr.unpackAlignment)}function Ce(){fe.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function ze(gr,$r){var Jr=null;if(d($r)?Jr=$r:$r&&(Le(gr,$r),"x"in $r&&(gr.xOffset=$r.x|0),"y"in $r&&(gr.yOffset=$r.y|0),d($r.data)&&(Jr=$r.data)),$r.copy){var ln=tr.viewportWidth,zn=tr.viewportHeight;gr.width=gr.width||ln-gr.xOffset,gr.height=gr.height||zn-gr.yOffset,gr.needsCopy=!0}else if(!Jr)gr.width=gr.width||1,gr.height=gr.height||1,gr.channels=gr.channels||4;else if(mt(Jr))gr.channels=gr.channels||4,gr.data=Jr,"type"in $r||gr.type!==5121||(gr.type=Pt[Object.prototype.toString.call(Jr)]|0);else if(b(Jr)){switch(gr.channels=gr.channels||4,ln=Jr,zn=ln.length,gr.type){case 5121:case 5123:case 5125:case 5126:zn=Ft.allocType(gr.type,zn),zn.set(ln),gr.data=zn;break;case 36193:gr.data=T(ln)}gr.alignment=1,gr.needsFree=!0}else if(o(Jr)){ln=Jr.data,Array.isArray(ln)||gr.type!==5121||(gr.type=Pt[Object.prototype.toString.call(ln)]|0);var zn=Jr.shape,mn=Jr.stride,Mn,On,Xn,gi;zn.length===3?(Xn=zn[2],gi=mn[2]):gi=Xn=1,Mn=zn[0],On=zn[1],zn=mn[0],mn=mn[1],gr.alignment=1,gr.width=Mn,gr.height=On,gr.channels=Xn,gr.format=gr.internalformat=ce[Xn],gr.needsFree=!0,Mn=gi,Jr=Jr.offset,Xn=gr.width,gi=gr.height,On=gr.channels;for(var Ri=Ft.allocType(gr.type===36193?5126:gr.type,Xn*gi*On),Ue=0,fr=0;fr<gi;++fr)for(var Qr=0;Qr<Xn;++Qr)for(var cn=0;cn<On;++cn)Ri[Ue++]=ln[zn*Qr+mn*fr+Mn*cn+Jr];L(gr,Ri)}else if(l(Jr)===we||l(Jr)===ve||l(Jr)===Mt)l(Jr)===we||l(Jr)===ve?gr.element=Jr:gr.element=Jr.canvas,gr.width=gr.element.width,gr.height=gr.element.height,gr.channels=4;else if(l(Jr)===It)gr.element=Jr,gr.width=Jr.width,gr.height=Jr.height,gr.channels=4;else if(l(Jr)===Rt)gr.element=Jr,gr.width=Jr.naturalWidth,gr.height=Jr.naturalHeight,gr.channels=4;else if(l(Jr)===zt)gr.element=Jr,gr.width=Jr.videoWidth,gr.height=Jr.videoHeight,gr.channels=4;else if(P(Jr)){for(ln=gr.width||Jr[0].length,zn=gr.height||Jr.length,mn=gr.channels,mn=k(Jr[0][0])?mn||Jr[0][0].length:mn||1,Mn=wt.shape(Jr),Xn=1,gi=0;gi<Mn.length;++gi)Xn*=Mn[gi];Xn=Ft.allocType(gr.type===36193?5126:gr.type,Xn),wt.flatten(Jr,Mn,"",Xn),L(gr,Xn),gr.alignment=1,gr.width=ln,gr.height=zn,gr.channels=mn,gr.format=gr.internalformat=ce[mn],gr.needsFree=!0}}function We(gr,$r,Jr,ln,zn){var mn=gr.element,Mn=gr.data,On=gr.internalformat,Xn=gr.format,gi=gr.type,Ri=gr.width,Ue=gr.height;_e(gr),mn?he.texSubImage2D($r,zn,Jr,ln,Xn,gi,mn):gr.compressed?he.compressedTexSubImage2D($r,zn,Jr,ln,On,Ri,Ue,Mn):gr.needsCopy?(_r(),he.copyTexSubImage2D($r,zn,Jr,ln,gr.xOffset,gr.yOffset,Ri,Ue)):he.texSubImage2D($r,zn,Jr,ln,Ri,Ue,Xn,gi,Mn)}function qe(){return wn.pop()||new Ce}function ir(gr){gr.needsFree&&Ft.freeType(gr.data),Ce.call(gr),wn.push(gr)}function xr(){fe.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Dt(gr,$r,Jr){var ln=gr.images[0]=qe();gr.mipmask=1,ln.width=gr.width=$r,ln.height=gr.height=Jr,ln.channels=gr.channels=4}function Ut(gr,$r){var Jr=null;if(d($r))Jr=gr.images[0]=qe(),ye(Jr,gr),ze(Jr,$r),gr.mipmask=1;else if(Le(gr,$r),Array.isArray($r.mipmap))for(var ln=$r.mipmap,zn=0;zn<ln.length;++zn)Jr=gr.images[zn]=qe(),ye(Jr,gr),Jr.width>>=zn,Jr.height>>=zn,ze(Jr,ln[zn]),gr.mipmask|=1<<zn;else Jr=gr.images[0]=qe(),ye(Jr,gr),ze(Jr,$r),gr.mipmask=1;ye(gr,gr.images[0])}function Te(gr,$r){for(var Jr=gr.images,ln=0;ln<Jr.length&&Jr[ln];++ln){var zn=Jr[ln],mn=$r,Mn=ln,On=zn.element,Xn=zn.data,gi=zn.internalformat,Ri=zn.format,Ue=zn.type,fr=zn.width,Qr=zn.height;_e(zn),On?he.texImage2D(mn,Mn,Ri,Ri,Ue,On):zn.compressed?he.compressedTexImage2D(mn,Mn,gi,fr,Qr,0,Xn):zn.needsCopy?(_r(),he.copyTexImage2D(mn,Mn,Ri,zn.xOffset,zn.yOffset,fr,Qr,0)):he.texImage2D(mn,Mn,Ri,fr,Qr,0,Ri,Ue,Xn||null)}}function Se(){var gr=Un.pop()||new xr;fe.call(gr);for(var $r=gr.mipmask=0;16>$r;++$r)gr.images[$r]=null;return gr}function Be(gr){for(var $r=gr.images,Jr=0;Jr<$r.length;++Jr)$r[Jr]&&ir($r[Jr]),$r[Jr]=null;Un.push(gr)}function Je(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function $e(gr,$r){"min"in $r&&(gr.minFilter=Pr[$r.min],0<=le.indexOf(gr.minFilter)&&!("faces"in $r)&&(gr.genMipmaps=!0)),"mag"in $r&&(gr.magFilter=Ir[$r.mag]);var Jr=gr.wrapS,ln=gr.wrapT;if("wrap"in $r){var zn=$r.wrap;typeof zn=="string"?Jr=ln=Or[zn]:Array.isArray(zn)&&(Jr=Or[zn[0]],ln=Or[zn[1]])}else"wrapS"in $r&&(Jr=Or[$r.wrapS]),"wrapT"in $r&&(ln=Or[$r.wrapT]);if(gr.wrapS=Jr,gr.wrapT=ln,"anisotropic"in $r&&(gr.anisotropic=$r.anisotropic),"mipmap"in $r){switch(Jr=!1,typeof $r.mipmap){case"string":gr.mipmapHint=lr[$r.mipmap],Jr=gr.genMipmaps=!0;break;case"boolean":Jr=gr.genMipmaps=$r.mipmap;break;case"object":gr.genMipmaps=!1,Jr=!0}!Jr||"min"in $r||(gr.minFilter=9984)}}function Xe(gr,$r){he.texParameteri($r,10241,gr.minFilter),he.texParameteri($r,10240,gr.magFilter),he.texParameteri($r,10242,gr.wrapS),he.texParameteri($r,10243,gr.wrapT),je.ext_texture_filter_anisotropic&&he.texParameteri($r,34046,gr.anisotropic),gr.genMipmaps&&(he.hint(33170,gr.mipmapHint),he.generateMipmap($r))}function Oe(gr){fe.call(this),this.mipmask=0,this.internalformat=6408,this.id=qn++,this.refCount=1,this.target=gr,this.texture=he.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Je,re.profile&&(this.stats={size:0})}function ar(gr){he.activeTexture(33984),he.bindTexture(gr.target,gr.texture)}function cr(){var gr=Hn[0];gr?he.bindTexture(gr.target,gr.texture):he.bindTexture(3553,null)}function sr(gr){var $r=gr.texture,Jr=gr.unit,ln=gr.target;0<=Jr&&(he.activeTexture(33984+Jr),he.bindTexture(ln,null),Hn[Jr]=null),he.deleteTexture($r),gr.texture=null,gr.params=null,gr.pixels=null,gr.refCount=0,delete ei[gr.id],Gt.textureCount--}var lr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Or={repeat:10497,clamp:33071,mirror:33648},Ir={nearest:9728,linear:9729},Pr=rt({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Ir),rn={none:0,browser:37444},Zr={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},yn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Tn={};je.ext_srgb&&(yn.srgb=35904,yn.srgba=35906),je.oes_texture_float&&(Zr.float32=Zr.float=5126),je.oes_texture_half_float&&(Zr.float16=Zr["half float"]=36193),je.webgl_depth_texture&&(rt(yn,{depth:6402,"depth stencil":34041}),rt(Zr,{uint16:5123,uint32:5125,"depth stencil":34042})),je.webgl_compressed_texture_s3tc&&rt(Tn,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),je.webgl_compressed_texture_atc&&rt(Tn,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),je.webgl_compressed_texture_pvrtc&&rt(Tn,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),je.webgl_compressed_texture_etc1&&(Tn["rgb etc1"]=36196);var hr=Array.prototype.slice.call(he.getParameter(34467));Object.keys(Tn).forEach(function(gr){var $r=Tn[gr];0<=hr.indexOf($r)&&(yn[gr]=$r)});var dr=Object.keys(yn);Re.textureFormats=dr;var Lr=[];Object.keys(yn).forEach(function(gr){Lr[yn[gr]]=gr});var Cr=[];Object.keys(Zr).forEach(function(gr){Cr[Zr[gr]]=gr});var Hr=[];Object.keys(Ir).forEach(function(gr){Hr[Ir[gr]]=gr});var sn=[];Object.keys(Pr).forEach(function(gr){sn[Pr[gr]]=gr});var Yr=[];Object.keys(Or).forEach(function(gr){Yr[Or[gr]]=gr});var xn=dr.reduce(function(gr,$r){var Jr=yn[$r];return Jr===6409||Jr===6406||Jr===6409||Jr===6410||Jr===6402||Jr===34041||je.ext_srgb&&(Jr===35904||Jr===35906)?gr[Jr]=Jr:Jr===32855||0<=$r.indexOf("rgba")?gr[Jr]=6408:gr[Jr]=6407,gr},{}),wn=[],Un=[],qn=0,ei={},Gn=Re.maxTextureUnits,Hn=Array(Gn).map(function(){return null});return rt(Oe.prototype,{bind:function(){this.bindCount+=1;var gr=this.unit;if(0>gr){for(var $r=0;$r<Gn;++$r){var Jr=Hn[$r];if(Jr){if(0<Jr.bindCount)continue;Jr.unit=-1}Hn[$r]=this,gr=$r;break}re.profile&&Gt.maxTextureUnits<gr+1&&(Gt.maxTextureUnits=gr+1),this.unit=gr,he.activeTexture(33984+gr),he.bindTexture(this.target,this.texture)}return gr},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&sr(this)}}),re.profile&&(Gt.getTotalTextureSize=function(){var gr=0;return Object.keys(ei).forEach(function($r){gr+=ei[$r].stats.size}),gr}),{create2D:function(gr,$r){function Jr(zn,mn){var Mn=ln.texInfo;Je.call(Mn);var On=Se();return typeof zn=="number"?typeof mn=="number"?Dt(On,zn|0,mn|0):Dt(On,zn|0,zn|0):zn?($e(Mn,zn),Ut(On,zn)):Dt(On,1,1),Mn.genMipmaps&&(On.mipmask=(On.width<<1)-1),ln.mipmask=On.mipmask,ye(ln,On),ln.internalformat=On.internalformat,Jr.width=On.width,Jr.height=On.height,ar(ln),Te(On,3553),Xe(Mn,3553),cr(),Be(On),re.profile&&(ln.stats.size=w(ln.internalformat,ln.type,On.width,On.height,Mn.genMipmaps,!1)),Jr.format=Lr[ln.internalformat],Jr.type=Cr[ln.type],Jr.mag=Hr[Mn.magFilter],Jr.min=sn[Mn.minFilter],Jr.wrapS=Yr[Mn.wrapS],Jr.wrapT=Yr[Mn.wrapT],Jr}var ln=new Oe(3553);return ei[ln.id]=ln,Gt.textureCount++,Jr(gr,$r),Jr.subimage=function(zn,mn,Mn,On){mn|=0,Mn|=0,On|=0;var Xn=qe();return ye(Xn,ln),Xn.width=0,Xn.height=0,ze(Xn,zn),Xn.width=Xn.width||(ln.width>>On)-mn,Xn.height=Xn.height||(ln.height>>On)-Mn,ar(ln),We(Xn,3553,mn,Mn,On),cr(),ir(Xn),Jr},Jr.resize=function(zn,mn){var Mn=zn|0,On=mn|0||Mn;if(Mn===ln.width&&On===ln.height)return Jr;Jr.width=ln.width=Mn,Jr.height=ln.height=On,ar(ln);for(var Xn=0;ln.mipmask>>Xn;++Xn){var gi=Mn>>Xn,Ri=On>>Xn;if(!gi||!Ri)break;he.texImage2D(3553,Xn,ln.format,gi,Ri,0,ln.format,ln.type,null)}return cr(),re.profile&&(ln.stats.size=w(ln.internalformat,ln.type,Mn,On,!1,!1)),Jr},Jr._reglType="texture2d",Jr._texture=ln,re.profile&&(Jr.stats=ln.stats),Jr.destroy=function(){ln.decRef()},Jr},createCube:function(gr,$r,Jr,ln,zn,mn){function Mn(gi,Ri,Ue,fr,Qr,cn){var nn,_n=On.texInfo;for(Je.call(_n),nn=0;6>nn;++nn)Xn[nn]=Se();if(typeof gi=="number"||!gi)for(gi=gi|0||1,nn=0;6>nn;++nn)Dt(Xn[nn],gi,gi);else if(typeof gi=="object")if(Ri)Ut(Xn[0],gi),Ut(Xn[1],Ri),Ut(Xn[2],Ue),Ut(Xn[3],fr),Ut(Xn[4],Qr),Ut(Xn[5],cn);else if($e(_n,gi),Le(On,gi),"faces"in gi)for(gi=gi.faces,nn=0;6>nn;++nn)ye(Xn[nn],On),Ut(Xn[nn],gi[nn]);else for(nn=0;6>nn;++nn)Ut(Xn[nn],gi);for(ye(On,Xn[0]),On.mipmask=_n.genMipmaps?(Xn[0].width<<1)-1:Xn[0].mipmask,On.internalformat=Xn[0].internalformat,Mn.width=Xn[0].width,Mn.height=Xn[0].height,ar(On),nn=0;6>nn;++nn)Te(Xn[nn],34069+nn);for(Xe(_n,34067),cr(),re.profile&&(On.stats.size=w(On.internalformat,On.type,Mn.width,Mn.height,_n.genMipmaps,!0)),Mn.format=Lr[On.internalformat],Mn.type=Cr[On.type],Mn.mag=Hr[_n.magFilter],Mn.min=sn[_n.minFilter],Mn.wrapS=Yr[_n.wrapS],Mn.wrapT=Yr[_n.wrapT],nn=0;6>nn;++nn)Be(Xn[nn]);return Mn}var On=new Oe(34067);ei[On.id]=On,Gt.cubeCount++;var Xn=Array(6);return Mn(gr,$r,Jr,ln,zn,mn),Mn.subimage=function(gi,Ri,Ue,fr,Qr){Ue|=0,fr|=0,Qr|=0;var cn=qe();return ye(cn,On),cn.width=0,cn.height=0,ze(cn,Ri),cn.width=cn.width||(On.width>>Qr)-Ue,cn.height=cn.height||(On.height>>Qr)-fr,ar(On),We(cn,34069+gi,Ue,fr,Qr),cr(),ir(cn),Mn},Mn.resize=function(gi){if(gi|=0,gi!==On.width){Mn.width=On.width=gi,Mn.height=On.height=gi,ar(On);for(var Ri=0;6>Ri;++Ri)for(var Ue=0;On.mipmask>>Ue;++Ue)he.texImage2D(34069+Ri,Ue,On.format,gi>>Ue,gi>>Ue,0,On.format,On.type,null);return cr(),re.profile&&(On.stats.size=w(On.internalformat,On.type,Mn.width,Mn.height,!1,!0)),Mn}},Mn._reglType="textureCube",Mn._texture=On,re.profile&&(Mn.stats=On.stats),Mn.destroy=function(){On.decRef()},Mn},clear:function(){for(var gr=0;gr<Gn;++gr)he.activeTexture(33984+gr),he.bindTexture(3553,null),Hn[gr]=null;gt(ei).forEach(sr),Gt.cubeCount=0,Gt.textureCount=0},getTexture:function(gr){return null},restore:function(){for(var gr=0;gr<Gn;++gr){var $r=Hn[gr];$r&&($r.bindCount=0,$r.unit=-1,Hn[gr]=null)}gt(ei).forEach(function(Jr){Jr.texture=he.createTexture(),he.bindTexture(Jr.target,Jr.texture);for(var ln=0;32>ln;++ln)if(Jr.mipmask&1<<ln)if(Jr.target===3553)he.texImage2D(3553,ln,Jr.internalformat,Jr.width>>ln,Jr.height>>ln,0,Jr.internalformat,Jr.type,null);else for(var zn=0;6>zn;++zn)he.texImage2D(34069+zn,ln,Jr.internalformat,Jr.width>>ln,Jr.height>>ln,0,Jr.internalformat,Jr.type,null);Xe(Jr.texInfo,Jr.target)})},refresh:function(){for(var gr=0;gr<Gn;++gr){var $r=Hn[gr];$r&&($r.bindCount=0,$r.unit=-1,Hn[gr]=null),he.activeTexture(33984+gr),he.bindTexture(3553,null),he.bindTexture(34067,null)}}}}function z(he,je,Re,_r,tr,Gt){function re(Oe,ar,cr){this.target=Oe,this.texture=ar,this.renderbuffer=cr;var sr=Oe=0;ar?(Oe=ar.width,sr=ar.height):cr&&(Oe=cr.width,sr=cr.height),this.width=Oe,this.height=sr}function fe(Oe){Oe&&(Oe.texture&&Oe.texture._texture.decRef(),Oe.renderbuffer&&Oe.renderbuffer._renderbuffer.decRef())}function ye(Oe,ar,cr){Oe&&(Oe.texture?Oe.texture._texture.refCount+=1:Oe.renderbuffer._renderbuffer.refCount+=1)}function Le(Oe,ar){ar&&(ar.texture?he.framebufferTexture2D(36160,Oe,ar.target,ar.texture._texture.texture,0):he.framebufferRenderbuffer(36160,Oe,36161,ar.renderbuffer._renderbuffer.renderbuffer))}function _e(Oe){var ar=3553,cr=null,sr=null,lr=Oe;return typeof Oe=="object"&&(lr=Oe.data,"target"in Oe&&(ar=Oe.target|0)),Oe=lr._reglType,Oe==="texture2d"||Oe==="textureCube"?cr=lr:Oe==="renderbuffer"&&(sr=lr,ar=36161),new re(ar,cr,sr)}function Ce(Oe,ar,cr,sr,lr){return cr?(Oe=_r.create2D({width:Oe,height:ar,format:sr,type:lr}),Oe._texture.refCount=0,new re(3553,Oe,null)):(Oe=tr.create({width:Oe,height:ar,format:sr}),Oe._renderbuffer.refCount=0,new re(36161,null,Oe))}function ze(Oe){return Oe&&(Oe.texture||Oe.renderbuffer)}function We(Oe,ar,cr){Oe&&(Oe.texture?Oe.texture.resize(ar,cr):Oe.renderbuffer&&Oe.renderbuffer.resize(ar,cr),Oe.width=ar,Oe.height=cr)}function qe(){this.id=$e++,Xe[this.id]=this,this.framebuffer=he.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function ir(Oe){Oe.colorAttachments.forEach(fe),fe(Oe.depthAttachment),fe(Oe.stencilAttachment),fe(Oe.depthStencilAttachment)}function xr(Oe){he.deleteFramebuffer(Oe.framebuffer),Oe.framebuffer=null,Gt.framebufferCount--,delete Xe[Oe.id]}function Dt(Oe){var ar;he.bindFramebuffer(36160,Oe.framebuffer);var cr=Oe.colorAttachments;for(ar=0;ar<cr.length;++ar)Le(36064+ar,cr[ar]);for(ar=cr.length;ar<Re.maxColorAttachments;++ar)he.framebufferTexture2D(36160,36064+ar,3553,null,0);he.framebufferTexture2D(36160,33306,3553,null,0),he.framebufferTexture2D(36160,36096,3553,null,0),he.framebufferTexture2D(36160,36128,3553,null,0),Le(36096,Oe.depthAttachment),Le(36128,Oe.stencilAttachment),Le(33306,Oe.depthStencilAttachment),he.checkFramebufferStatus(36160),he.isContextLost(),he.bindFramebuffer(36160,Te.next?Te.next.framebuffer:null),Te.cur=Te.next,he.getError()}function Ut(Oe,ar){function cr(lr,Or){var Ir,Pr=0,rn=0,Zr=!0,yn=!0;Ir=null;var Tn=!0,hr="rgba",dr="uint8",Lr=1,Cr=null,Hr=null,sn=null,Yr=!1;typeof lr=="number"?(Pr=lr|0,rn=Or|0||Pr):lr?("shape"in lr?(rn=lr.shape,Pr=rn[0],rn=rn[1]):("radius"in lr&&(Pr=rn=lr.radius),"width"in lr&&(Pr=lr.width),"height"in lr&&(rn=lr.height)),("color"in lr||"colors"in lr)&&(Ir=lr.color||lr.colors),Ir||("colorCount"in lr&&(Lr=lr.colorCount|0),"colorTexture"in lr&&(Tn=!!lr.colorTexture,hr="rgba4"),"colorType"in lr&&(dr=lr.colorType,!Tn)&&(dr==="half float"||dr==="float16"?hr="rgba16f":(dr==="float"||dr==="float32")&&(hr="rgba32f")),"colorFormat"in lr&&(hr=lr.colorFormat,0<=Se.indexOf(hr)?Tn=!0:0<=Be.indexOf(hr)&&(Tn=!1))),("depthTexture"in lr||"depthStencilTexture"in lr)&&(Yr=!(!lr.depthTexture&&!lr.depthStencilTexture)),"depth"in lr&&(typeof lr.depth=="boolean"?Zr=lr.depth:(Cr=lr.depth,yn=!1)),"stencil"in lr&&(typeof lr.stencil=="boolean"?yn=lr.stencil:(Hr=lr.stencil,Zr=!1)),"depthStencil"in lr&&(typeof lr.depthStencil=="boolean"?Zr=yn=lr.depthStencil:(sn=lr.depthStencil,yn=Zr=!1))):Pr=rn=1;var xn=null,wn=null,Un=null,qn=null;if(Array.isArray(Ir))xn=Ir.map(_e);else if(Ir)xn=[_e(Ir)];else for(xn=Array(Lr),Ir=0;Ir<Lr;++Ir)xn[Ir]=Ce(Pr,rn,Tn,hr,dr);for(Pr=Pr||xn[0].width,rn=rn||xn[0].height,Cr?wn=_e(Cr):Zr&&!yn&&(wn=Ce(Pr,rn,Yr,"depth","uint32")),Hr?Un=_e(Hr):yn&&!Zr&&(Un=Ce(Pr,rn,!1,"stencil","uint8")),sn?qn=_e(sn):!Cr&&!Hr&&yn&&Zr&&(qn=Ce(Pr,rn,Yr,"depth stencil","depth stencil")),Zr=null,Ir=0;Ir<xn.length;++Ir)ye(xn[Ir]),xn[Ir]&&xn[Ir].texture&&(yn=Ot[xn[Ir].texture._texture.format]*Xt[xn[Ir].texture._texture.type],Zr===null&&(Zr=yn));return ye(wn),ye(Un),ye(qn),ir(sr),sr.width=Pr,sr.height=rn,sr.colorAttachments=xn,sr.depthAttachment=wn,sr.stencilAttachment=Un,sr.depthStencilAttachment=qn,cr.color=xn.map(ze),cr.depth=ze(wn),cr.stencil=ze(Un),cr.depthStencil=ze(qn),cr.width=sr.width,cr.height=sr.height,Dt(sr),cr}var sr=new qe;return Gt.framebufferCount++,cr(Oe,ar),rt(cr,{resize:function(lr,Or){var Ir=Math.max(lr|0,1),Pr=Math.max(Or|0||Ir,1);if(Ir===sr.width&&Pr===sr.height)return cr;for(var rn=sr.colorAttachments,Zr=0;Zr<rn.length;++Zr)We(rn[Zr],Ir,Pr);return We(sr.depthAttachment,Ir,Pr),We(sr.stencilAttachment,Ir,Pr),We(sr.depthStencilAttachment,Ir,Pr),sr.width=cr.width=Ir,sr.height=cr.height=Pr,Dt(sr),cr},_reglType:"framebuffer",_framebuffer:sr,destroy:function(){xr(sr),ir(sr)},use:function(lr){Te.setFBO({framebuffer:cr},lr)}})}var Te={cur:null,next:null,dirty:!1,setFBO:null},Se=["rgba"],Be=["rgba4","rgb565","rgb5 a1"];je.ext_srgb&&Be.push("srgba"),je.ext_color_buffer_half_float&&Be.push("rgba16f","rgb16f"),je.webgl_color_buffer_float&&Be.push("rgba32f");var Je=["uint8"];je.oes_texture_half_float&&Je.push("half float","float16"),je.oes_texture_float&&Je.push("float","float32");var $e=0,Xe={};return rt(Te,{getFramebuffer:function(Oe){return typeof Oe=="function"&&Oe._reglType==="framebuffer"&&(Oe=Oe._framebuffer,Oe instanceof qe)?Oe:null},create:Ut,createCube:function(Oe){function ar(sr){var lr,Or={color:null},Ir=0,Pr=null;lr="rgba";var rn="uint8",Zr=1;if(typeof sr=="number"?Ir=sr|0:sr?("shape"in sr?Ir=sr.shape[0]:("radius"in sr&&(Ir=sr.radius|0),"width"in sr?Ir=sr.width|0:"height"in sr&&(Ir=sr.height|0)),("color"in sr||"colors"in sr)&&(Pr=sr.color||sr.colors),Pr||("colorCount"in sr&&(Zr=sr.colorCount|0),"colorType"in sr&&(rn=sr.colorType),"colorFormat"in sr&&(lr=sr.colorFormat)),"depth"in sr&&(Or.depth=sr.depth),"stencil"in sr&&(Or.stencil=sr.stencil),"depthStencil"in sr&&(Or.depthStencil=sr.depthStencil)):Ir=1,Pr)if(Array.isArray(Pr))for(sr=[],lr=0;lr<Pr.length;++lr)sr[lr]=Pr[lr];else sr=[Pr];else for(sr=Array(Zr),Pr={radius:Ir,format:lr,type:rn},lr=0;lr<Zr;++lr)sr[lr]=_r.createCube(Pr);for(Or.color=Array(sr.length),lr=0;lr<sr.length;++lr)Zr=sr[lr],Ir=Ir||Zr.width,Or.color[lr]={target:34069,data:sr[lr]};for(lr=0;6>lr;++lr){for(Zr=0;Zr<sr.length;++Zr)Or.color[Zr].target=34069+lr;0<lr&&(Or.depth=cr[0].depth,Or.stencil=cr[0].stencil,Or.depthStencil=cr[0].depthStencil),cr[lr]?cr[lr](Or):cr[lr]=Ut(Or)}return rt(ar,{width:Ir,height:Ir,color:sr})}var cr=Array(6);return ar(Oe),rt(ar,{faces:cr,resize:function(sr){var lr=sr|0;if(lr===ar.width)return ar;var Or=ar.color;for(sr=0;sr<Or.length;++sr)Or[sr].resize(lr);for(sr=0;6>sr;++sr)cr[sr].resize(lr);return ar.width=ar.height=lr,ar},_reglType:"framebufferCube",destroy:function(){cr.forEach(function(sr){sr.destroy()})}})},clear:function(){gt(Xe).forEach(xr)},restore:function(){Te.cur=null,Te.next=null,Te.dirty=!0,gt(Xe).forEach(function(Oe){Oe.framebuffer=he.createFramebuffer(),Dt(Oe)})}})}function B(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function O(he,je,Re,_r,tr,Gt,re){function fe(Dt){if(Dt!==xr.currentVAO){var Ut=je.oes_vertex_array_object;Dt?Ut.bindVertexArrayOES(Dt.vao):Ut.bindVertexArrayOES(null),xr.currentVAO=Dt}}function ye(Dt){if(Dt!==xr.currentVAO){if(Dt)Dt.bindAttrs();else{for(var Ut=je.angle_instanced_arrays,Te=0;Te<We.length;++Te){var Se=We[Te];Se.buffer?(he.enableVertexAttribArray(Te),Se.buffer.bind(),he.vertexAttribPointer(Te,Se.size,Se.type,Se.normalized,Se.stride,Se.offfset),Ut&&Se.divisor&&Ut.vertexAttribDivisorANGLE(Te,Se.divisor)):(he.disableVertexAttribArray(Te),he.vertexAttrib4f(Te,Se.x,Se.y,Se.z,Se.w))}re.elements?he.bindBuffer(34963,re.elements.buffer.buffer):he.bindBuffer(34963,null)}xr.currentVAO=Dt}}function Le(){gt(ir).forEach(function(Dt){Dt.destroy()})}function _e(){this.id=++qe,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var Dt=je.oes_vertex_array_object;this.vao=Dt?Dt.createVertexArrayOES():null,ir[this.id]=this,this.buffers=[]}function Ce(){je.oes_vertex_array_object&&gt(ir).forEach(function(Dt){Dt.refresh()})}var ze=Re.maxAttributes,We=Array(ze);for(Re=0;Re<ze;++Re)We[Re]=new B;var qe=0,ir={},xr={Record:B,scope:{},state:We,currentVAO:null,targetVAO:null,restore:je.oes_vertex_array_object?Ce:function(){},createVAO:function(Dt){function Ut(Se){var Be;Array.isArray(Se)?(Be=Se,Te.elements&&Te.ownsElements&&Te.elements.destroy(),Te.elements=null,Te.ownsElements=!1,Te.offset=0,Te.count=0,Te.instances=-1,Te.primitive=4):(Se.elements?(Be=Se.elements,Te.ownsElements?(typeof Be=="function"&&Be._reglType==="elements"?Te.elements.destroy():Te.elements(Be),Te.ownsElements=!1):Gt.getElements(Se.elements)?(Te.elements=Se.elements,Te.ownsElements=!1):(Te.elements=Gt.create(Se.elements),Te.ownsElements=!0)):(Te.elements=null,Te.ownsElements=!1),Be=Se.attributes,Te.offset=0,Te.count=-1,Te.instances=-1,Te.primitive=4,Te.elements&&(Te.count=Te.elements._elements.vertCount,Te.primitive=Te.elements._elements.primType),"offset"in Se&&(Te.offset=Se.offset|0),"count"in Se&&(Te.count=Se.count|0),"instances"in Se&&(Te.instances=Se.instances|0),"primitive"in Se&&(Te.primitive=ee[Se.primitive])),Se={};var Je=Te.attributes;Je.length=Be.length;for(var $e=0;$e<Be.length;++$e){var Xe=Be[$e],Oe=Je[$e]=new B,ar=Xe.data||Xe;if(Array.isArray(ar)||mt(ar)||o(ar)){var cr;Te.buffers[$e]&&(cr=Te.buffers[$e],mt(ar)&&cr._buffer.byteLength>=ar.byteLength?cr.subdata(ar):(cr.destroy(),Te.buffers[$e]=null)),Te.buffers[$e]||(cr=Te.buffers[$e]=tr.create(Xe,34962,!1,!0)),Oe.buffer=tr.getBuffer(cr),Oe.size=Oe.buffer.dimension|0,Oe.normalized=!1,Oe.type=Oe.buffer.dtype,Oe.offset=0,Oe.stride=0,Oe.divisor=0,Oe.state=1,Se[$e]=1}else tr.getBuffer(Xe)?(Oe.buffer=tr.getBuffer(Xe),Oe.size=Oe.buffer.dimension|0,Oe.normalized=!1,Oe.type=Oe.buffer.dtype,Oe.offset=0,Oe.stride=0,Oe.divisor=0,Oe.state=1):tr.getBuffer(Xe.buffer)?(Oe.buffer=tr.getBuffer(Xe.buffer),Oe.size=(+Xe.size||Oe.buffer.dimension)|0,Oe.normalized=!!Xe.normalized||!1,Oe.type="type"in Xe?Bt[Xe.type]:Oe.buffer.dtype,Oe.offset=(Xe.offset||0)|0,Oe.stride=(Xe.stride||0)|0,Oe.divisor=(Xe.divisor||0)|0,Oe.state=1):"x"in Xe&&(Oe.x=+Xe.x||0,Oe.y=+Xe.y||0,Oe.z=+Xe.z||0,Oe.w=+Xe.w||0,Oe.state=2)}for(cr=0;cr<Te.buffers.length;++cr)!Se[cr]&&Te.buffers[cr]&&(Te.buffers[cr].destroy(),Te.buffers[cr]=null);return Te.refresh(),Ut}var Te=new _e;return _r.vaoCount+=1,Ut.destroy=function(){for(var Se=0;Se<Te.buffers.length;++Se)Te.buffers[Se]&&Te.buffers[Se].destroy();Te.buffers.length=0,Te.ownsElements&&(Te.elements.destroy(),Te.elements=null,Te.ownsElements=!1),Te.destroy()},Ut._vao=Te,Ut._reglType="vao",Ut(Dt)},getVAO:function(Dt){return typeof Dt=="function"&&Dt._vao?Dt._vao:null},destroyBuffer:function(Dt){for(var Ut=0;Ut<We.length;++Ut){var Te=We[Ut];Te.buffer===Dt&&(he.disableVertexAttribArray(Ut),Te.buffer=null)}},setVAO:je.oes_vertex_array_object?fe:ye,clear:je.oes_vertex_array_object?Le:function(){}};return _e.prototype.bindAttrs=function(){for(var Dt=je.angle_instanced_arrays,Ut=this.attributes,Te=0;Te<Ut.length;++Te){var Se=Ut[Te];Se.buffer?(he.enableVertexAttribArray(Te),he.bindBuffer(34962,Se.buffer.buffer),he.vertexAttribPointer(Te,Se.size,Se.type,Se.normalized,Se.stride,Se.offset),Dt&&Se.divisor&&Dt.vertexAttribDivisorANGLE(Te,Se.divisor)):(he.disableVertexAttribArray(Te),he.vertexAttrib4f(Te,Se.x,Se.y,Se.z,Se.w))}for(Dt=Ut.length;Dt<ze;++Dt)he.disableVertexAttribArray(Dt);(Dt=Gt.getElements(this.elements))?he.bindBuffer(34963,Dt.buffer.buffer):he.bindBuffer(34963,null)},_e.prototype.refresh=function(){var Dt=je.oes_vertex_array_object;Dt&&(Dt.bindVertexArrayOES(this.vao),this.bindAttrs(),xr.currentVAO=null,Dt.bindVertexArrayOES(null))},_e.prototype.destroy=function(){if(this.vao){var Dt=je.oes_vertex_array_object;this===xr.currentVAO&&(xr.currentVAO=null,Dt.bindVertexArrayOES(null)),Dt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ir[this.id]&&(delete ir[this.id],--_r.vaoCount)},xr}function R(he,je,Re,_r){function tr(qe,ir,xr,Dt){this.name=qe,this.id=ir,this.location=xr,this.info=Dt}function Gt(qe,ir){for(var xr=0;xr<qe.length;++xr)if(qe[xr].id===ir.id){qe[xr].location=ir.location;return}qe.push(ir)}function re(qe,ir,xr){xr=qe===35632?Le:_e;var Dt=xr[ir];if(!Dt){var Ut=je.str(ir),Dt=he.createShader(qe);he.shaderSource(Dt,Ut),he.compileShader(Dt),xr[ir]=Dt}return Dt}function fe(qe,ir){this.id=We++,this.fragId=qe,this.vertId=ir,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,_r.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ye(qe,ir,xr){var Dt;Dt=re(35632,qe.fragId);var Ut=re(35633,qe.vertId);if(ir=qe.program=he.createProgram(),he.attachShader(ir,Dt),he.attachShader(ir,Ut),xr)for(Dt=0;Dt<xr.length;++Dt)Ut=xr[Dt],he.bindAttribLocation(ir,Ut[0],Ut[1]);he.linkProgram(ir),Ut=he.getProgramParameter(ir,35718),_r.profile&&(qe.stats.uniformsCount=Ut);var Te=qe.uniforms;for(Dt=0;Dt<Ut;++Dt)if(xr=he.getActiveUniform(ir,Dt))if(1<xr.size)for(var Se=0;Se<xr.size;++Se){var Be=xr.name.replace("[0]","["+Se+"]");Gt(Te,new tr(Be,je.id(Be),he.getUniformLocation(ir,Be),xr))}else Gt(Te,new tr(xr.name,je.id(xr.name),he.getUniformLocation(ir,xr.name),xr));for(Ut=he.getProgramParameter(ir,35721),_r.profile&&(qe.stats.attributesCount=Ut),qe=qe.attributes,Dt=0;Dt<Ut;++Dt)(xr=he.getActiveAttrib(ir,Dt))&&Gt(qe,new tr(xr.name,je.id(xr.name),he.getAttribLocation(ir,xr.name),xr))}var Le={},_e={},Ce={},ze=[],We=0;return _r.profile&&(Re.getMaxUniformsCount=function(){var qe=0;return ze.forEach(function(ir){ir.stats.uniformsCount>qe&&(qe=ir.stats.uniformsCount)}),qe},Re.getMaxAttributesCount=function(){var qe=0;return ze.forEach(function(ir){ir.stats.attributesCount>qe&&(qe=ir.stats.attributesCount)}),qe}),{clear:function(){var qe=he.deleteShader.bind(he);gt(Le).forEach(qe),Le={},gt(_e).forEach(qe),_e={},ze.forEach(function(ir){he.deleteProgram(ir.program)}),ze.length=0,Ce={},Re.shaderCount=0},program:function(qe,ir,xr,Dt){var Ut=Ce[ir];Ut||(Ut=Ce[ir]={});var Te=Ut[qe];if(Te&&(Te.refCount++,!Dt))return Te;var Se=new fe(ir,qe);return Re.shaderCount++,ye(Se,xr,Dt),Te||(Ut[qe]=Se),ze.push(Se),rt(Se,{destroy:function(){if(Se.refCount--,0>=Se.refCount){he.deleteProgram(Se.program);var Be=ze.indexOf(Se);ze.splice(Be,1),Re.shaderCount--}0>=Ut[Se.vertId].refCount&&(he.deleteShader(_e[Se.vertId]),delete _e[Se.vertId],delete Ce[Se.fragId][Se.vertId]),Object.keys(Ce[Se.fragId]).length||(he.deleteShader(Le[Se.fragId]),delete Le[Se.fragId],delete Ce[Se.fragId])}})},restore:function(){Le={},_e={};for(var qe=0;qe<ze.length;++qe)ye(ze[qe],null,ze[qe].attributes.map(function(ir){return[ir.location,ir.name]}))},shader:re,frag:-1,vert:-1}}function C(he,je,Re,_r,tr,Gt,re){function fe(Le){var _e;_e=je.next===null?5121:je.next.colorAttachments[0].texture._texture.type;var Ce=0,ze=0,We=_r.framebufferWidth,qe=_r.framebufferHeight,ir=null;return mt(Le)?ir=Le:Le&&(Ce=Le.x|0,ze=Le.y|0,We=(Le.width||_r.framebufferWidth-Ce)|0,qe=(Le.height||_r.framebufferHeight-ze)|0,ir=Le.data||null),Re(),Le=We*qe*4,ir||(_e===5121?ir=new Uint8Array(Le):_e===5126&&(ir=ir||new Float32Array(Le))),he.pixelStorei(3333,4),he.readPixels(Ce,ze,We,qe,6408,_e,ir),ir}function ye(Le){var _e;return je.setFBO({framebuffer:Le.framebuffer},function(){_e=fe(Le)}),_e}return function(Le){return Le&&"framebuffer"in Le?ye(Le):fe(Le)}}function F(he){for(var je=Array(he.length>>2),_r=0;_r<je.length;_r++)je[_r]=0;for(_r=0;_r<8*he.length;_r+=8)je[_r>>5]|=(he.charCodeAt(_r/8)&255)<<24-_r%32;var Re=8*he.length;he=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225];var _r=Array(64),tr,Gt,re,fe,ye,Le,_e,Ce,ze,We,qe;for(je[Re>>5]|=128<<24-Re%32,je[(Re+64>>9<<4)+15]=Re,Ce=0;Ce<je.length;Ce+=16){for(Re=he[0],tr=he[1],Gt=he[2],re=he[3],fe=he[4],ye=he[5],Le=he[6],_e=he[7],ze=0;64>ze;ze++){if(16>ze)_r[ze]=je[ze+Ce];else{We=ze,qe=_r[ze-2],qe=K(qe,17)^K(qe,19)^qe>>>10,qe=Q(qe,_r[ze-7]);var ir;ir=_r[ze-15],ir=K(ir,7)^K(ir,18)^ir>>>3,_r[We]=Q(Q(qe,ir),_r[ze-16])}We=fe,We=K(We,6)^K(We,11)^K(We,25),We=Q(Q(Q(Q(_e,We),fe&ye^~fe&Le),$t[ze]),_r[ze]),_e=Re,_e=K(_e,2)^K(_e,13)^K(_e,22),qe=Q(_e,Re&tr^Re&Gt^tr&Gt),_e=Le,Le=ye,ye=fe,fe=Q(re,We),re=Gt,Gt=tr,tr=Re,Re=Q(We,qe)}he[0]=Q(Re,he[0]),he[1]=Q(tr,he[1]),he[2]=Q(Gt,he[2]),he[3]=Q(re,he[3]),he[4]=Q(fe,he[4]),he[5]=Q(ye,he[5]),he[6]=Q(Le,he[6]),he[7]=Q(_e,he[7])}for(je="",_r=0;_r<32*he.length;_r+=8)je+=String.fromCharCode(he[_r>>5]>>>24-_r%32&255);return je}function N(he){for(var je="",Re,_r=0;_r<he.length;_r++)Re=he.charCodeAt(_r),je+="0123456789abcdef".charAt(Re>>>4&15)+"0123456789abcdef".charAt(Re&15);return je}function V(he){for(var je="",Re=-1,_r,tr;++Re<he.length;)_r=he.charCodeAt(Re),tr=Re+1<he.length?he.charCodeAt(Re+1):0,55296<=_r&&56319>=_r&&56320<=tr&&57343>=tr&&(_r=65536+((_r&1023)<<10)+(tr&1023),Re++),127>=_r?je+=String.fromCharCode(_r):2047>=_r?je+=String.fromCharCode(192|_r>>>6&31,128|_r&63):65535>=_r?je+=String.fromCharCode(224|_r>>>12&15,128|_r>>>6&63,128|_r&63):2097151>=_r&&(je+=String.fromCharCode(240|_r>>>18&7,128|_r>>>12&63,128|_r>>>6&63,128|_r&63));return je}function K(he,je){return he>>>je|he<<32-je}function Q(he,je){var Re=(he&65535)+(je&65535);return(he>>16)+(je>>16)+(Re>>16)<<16|Re&65535}function at(he){return Array.prototype.slice.call(he)}function it(he){return at(he).join("")}function q(he){function je(){var _e=[],Ce=[];return rt(function(){_e.push.apply(_e,at(arguments))},{def:function(){var ze="v"+tr++;return Ce.push(ze),0<arguments.length&&(_e.push(ze,"="),_e.push.apply(_e,at(arguments)),_e.push(";")),ze},toString:function(){return it([0<Ce.length?"var "+Ce.join(",")+";":"",it(_e)])}})}function Re(){function _e(ir,xr){ze(ir,xr,"=",Ce.def(ir,xr),";")}var Ce=je(),ze=je(),We=Ce.toString,qe=ze.toString;return rt(function(){Ce.apply(Ce,at(arguments))},{def:Ce.def,entry:Ce,exit:ze,save:_e,set:function(ir,xr,Dt){_e(ir,xr),Ce(ir,xr,"=",Dt,";")},toString:function(){return We()+qe()}})}var _r=he&&he.cache,tr=0,Gt=[],re=[],fe=[],ye=je(),Le={};return{global:ye,link:function(_e,Ce){var ze=Ce&&Ce.stable;if(!ze){for(var We=0;We<re.length;++We)if(re[We]===_e&&!fe[We])return Gt[We]}return We="g"+tr++,Gt.push(We),re.push(_e),fe.push(ze),We},block:je,proc:function(_e,Ce){function ze(){var xr="a"+We.length;return We.push(xr),xr}var We=[];Ce=Ce||0;for(var qe=0;qe<Ce;++qe)ze();var qe=Re(),ir=qe.toString;return Le[_e]=rt(qe,{arg:ze,toString:function(){return it(["function(",We.join(),"){",ir(),"}"])}})},scope:Re,cond:function(){var _e=it(arguments),Ce=Re(),ze=Re(),We=Ce.toString,qe=ze.toString;return rt(Ce,{then:function(){return Ce.apply(Ce,at(arguments)),this},else:function(){return ze.apply(ze,at(arguments)),this},toString:function(){var ir=qe();return ir&&(ir="else{"+ir+"}"),it(["if(",_e,"){",We(),"}",ir])}})},compile:function(){var _e=['"use strict";',ye,"return {"];Object.keys(Le).forEach(function(We){_e.push('"',We,'":',Le[We].toString(),",")}),_e.push("}");var Ce=it(_e).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),ze;return _r&&(ze=N(F(V(Ce))),_r[ze])?_r[ze].apply(null,re):(Ce=Function.apply(null,Gt.concat(Ce)),_r&&(_r[ze]=Ce),Ce.apply(null,re))}}}function W(he){return Array.isArray(he)||mt(he)||o(he)}function Z(he){return he.sort(function(je,Re){return je==="viewport"?-1:Re==="viewport"?1:je<Re?-1:1})}function G(he,je,Re,_r){this.thisDep=he,this.contextDep=je,this.propDep=Re,this.append=_r}function et(he){return he&&!(he.thisDep||he.contextDep||he.propDep)}function nt(he){return new G(!1,!1,!1,he)}function X(he,je){var Re=he.type;if(Re===0)return Re=he.data.length,new G(!0,1<=Re,2<=Re,je);if(Re===4)return Re=he.data,new G(Re.thisDep,Re.contextDep,Re.propDep,je);if(Re===5)return new G(!1,!1,!1,je);if(Re===6){for(var _r=Re=!1,tr=!1,Gt=0;Gt<he.data.length;++Gt){var re=he.data[Gt];re.type===1?tr=!0:re.type===2?_r=!0:re.type===3?Re=!0:re.type===0?(Re=!0,re=re.data,1<=re&&(_r=!0),2<=re&&(tr=!0)):re.type===4&&(Re=Re||re.data.thisDep,_r=_r||re.data.contextDep,tr=tr||re.data.propDep)}return new G(Re,_r,tr,je)}return new G(Re===3,Re===2,Re===1,je)}function Y(he,je,Re,_r,tr,Gt,re,fe,ye,Le,_e,Ce,ze,We,qe,ir){function xr(Ue){return Ue.replace(".","_")}function Dt(Ue,fr,Qr){var cn=xr(Ue);mn.push(Ue),zn[cn]=ln[cn]=!!Qr,Mn[cn]=fr}function Ut(Ue,fr,Qr){var cn=xr(Ue);mn.push(Ue),Array.isArray(Qr)?(ln[cn]=Qr.slice(),zn[cn]=Qr.slice()):ln[cn]=zn[cn]=Qr,On[cn]=fr}function Te(){var Ue=q({cache:qe}),fr=Ue.link,Qr=Ue.global;Ue.id=Ri++,Ue.batchId="0";var cn=fr(Xn),nn=Ue.shared={props:"a0"};Object.keys(Xn).forEach(function(mr){nn[mr]=Qr.def(cn,".",mr)});var _n=Ue.next={},gn=Ue.current={};Object.keys(On).forEach(function(mr){Array.isArray(ln[mr])&&(_n[mr]=Qr.def(nn.next,".",mr),gn[mr]=Qr.def(nn.current,".",mr))});var en=Ue.constants={};Object.keys(gi).forEach(function(mr){en[mr]=Qr.def(JSON.stringify(gi[mr]))}),Ue.invoke=function(mr,Mr){switch(Mr.type){case 0:var an=["this",nn.context,nn.props,Ue.batchId];return mr.def(fr(Mr.data),".call(",an.slice(0,Math.max(Mr.data.length+1,4)),")");case 1:return mr.def(nn.props,Mr.data);case 2:return mr.def(nn.context,Mr.data);case 3:return mr.def("this",Mr.data);case 4:return Mr.data.append(Ue,mr),Mr.data.ref;case 5:return Mr.data.toString();case 6:return Mr.data.map(function(kn){return Ue.invoke(mr,kn)})}},Ue.attribCache={};var wr={};return Ue.scopeAttrib=function(mr){if(mr=je.id(mr),mr in wr)return wr[mr];var Mr=Le.scope[mr];return Mr||(Mr=Le.scope[mr]=new Gn),wr[mr]=fr(Mr)},Ue}function Se(Ue){var fr=Ue.static;Ue=Ue.dynamic;var Qr;if("profile"in fr){var cn=!!fr.profile;Qr=nt(function(_n,gn){return cn}),Qr.enable=cn}else if("profile"in Ue){var nn=Ue.profile;Qr=X(nn,function(_n,gn){return _n.invoke(gn,nn)})}return Qr}function Be(Ue,fr){var Qr=Ue.static,cn=Ue.dynamic;if("framebuffer"in Qr){var nn=Qr.framebuffer;return nn?(nn=fe.getFramebuffer(nn),nt(function(gn,en){var wr=gn.link(nn),mr=gn.shared;return en.set(mr.framebuffer,".next",wr),mr=mr.context,en.set(mr,".framebufferWidth",wr+".width"),en.set(mr,".framebufferHeight",wr+".height"),wr})):nt(function(gn,en){var wr=gn.shared;return en.set(wr.framebuffer,".next","null"),wr=wr.context,en.set(wr,".framebufferWidth",wr+".drawingBufferWidth"),en.set(wr,".framebufferHeight",wr+".drawingBufferHeight"),"null"})}if("framebuffer"in cn){var _n=cn.framebuffer;return X(_n,function(gn,en){var Mr=gn.invoke(en,_n),wr=gn.shared,mr=wr.framebuffer,Mr=en.def(mr,".getFramebuffer(",Mr,")");return en.set(mr,".next",Mr),wr=wr.context,en.set(wr,".framebufferWidth",Mr+"?"+Mr+".width:"+wr+".drawingBufferWidth"),en.set(wr,".framebufferHeight",Mr+"?"+Mr+".height:"+wr+".drawingBufferHeight"),Mr})}return null}function Je(Ue,fr,Qr){function cn(en){if(en in nn){var wr=nn[en];en=!0;var mr=wr.x|0,Mr=wr.y|0,an,kn;return"width"in wr?an=wr.width|0:en=!1,"height"in wr?kn=wr.height|0:en=!1,new G(!en&&fr&&fr.thisDep,!en&&fr&&fr.contextDep,!en&&fr&&fr.propDep,function(fn,Sn){var Vn=fn.shared.context,$n=an;"width"in wr||($n=Sn.def(Vn,".","framebufferWidth","-",mr));var Kn=kn;return"height"in wr||(Kn=Sn.def(Vn,".","framebufferHeight","-",Mr)),[mr,Mr,$n,Kn]})}if(en in _n){var Rn=_n[en];return en=X(Rn,function(fn,Sn){var ii=fn.invoke(Sn,Rn),Vn=fn.shared.context,$n=Sn.def(ii,".x|0"),Kn=Sn.def(ii,".y|0"),Jn=Sn.def('"width" in ',ii,"?",ii,".width|0:","(",Vn,".","framebufferWidth","-",$n,")"),ii=Sn.def('"height" in ',ii,"?",ii,".height|0:","(",Vn,".","framebufferHeight","-",Kn,")");return[$n,Kn,Jn,ii]}),fr&&(en.thisDep=en.thisDep||fr.thisDep,en.contextDep=en.contextDep||fr.contextDep,en.propDep=en.propDep||fr.propDep),en}return fr?new G(fr.thisDep,fr.contextDep,fr.propDep,function(fn,Sn){var Vn=fn.shared.context;return[0,0,Sn.def(Vn,".","framebufferWidth"),Sn.def(Vn,".","framebufferHeight")]}):null}var nn=Ue.static,_n=Ue.dynamic;if(Ue=cn("viewport")){var gn=Ue;Ue=new G(Ue.thisDep,Ue.contextDep,Ue.propDep,function(en,wr){var mr=gn.append(en,wr),Mr=en.shared.context;return wr.set(Mr,".viewportWidth",mr[2]),wr.set(Mr,".viewportHeight",mr[3]),mr})}return{viewport:Ue,scissor_box:cn("scissor.box")}}function $e(Ue,fr){var Qr=Ue.static;if(typeof Qr.frag=="string"&&typeof Qr.vert=="string"){if(0<Object.keys(fr.dynamic).length)return null;var Qr=fr.static,cn=Object.keys(Qr);if(0<cn.length&&typeof Qr[cn[0]]=="number"){for(var nn=[],_n=0;_n<cn.length;++_n)nn.push([Qr[cn[_n]]|0,cn[_n]]);return nn}}return null}function Xe(Ue,fr,Qr){function cn(mr){if(mr in nn){var Mr=je.id(nn[mr]);return mr=nt(function(){return Mr}),mr.id=Mr,mr}if(mr in _n){var an=_n[mr];return X(an,function(kn,Rn){var fn=kn.invoke(Rn,an);return Rn.def(kn.shared.strings,".id(",fn,")")})}return null}var nn=Ue.static,_n=Ue.dynamic,gn=cn("frag"),en=cn("vert"),wr=null;return et(gn)&&et(en)?(wr=_e.program(en.id,gn.id,null,Qr),Ue=nt(function(mr,Mr){return mr.link(wr)})):Ue=new G(gn&&gn.thisDep||en&&en.thisDep,gn&&gn.contextDep||en&&en.contextDep,gn&&gn.propDep||en&&en.propDep,function(mr,Mr){var an=mr.shared.shader,kn;kn=gn?gn.append(mr,Mr):Mr.def(an,".","frag");var Rn;return Rn=en?en.append(mr,Mr):Mr.def(an,".","vert"),Mr.def(an+".program("+Rn+","+kn+")")}),{frag:gn,vert:en,progVar:Ue,program:wr}}function Oe(Ue,fr){function Qr(fn,Sn){if(fn in cn){var Vn=cn[fn]|0;return Sn?_n.offset=Vn:_n.instances=Vn,nt(function(Kn,Jn){return Sn&&(Kn.OFFSET=Vn),Vn})}if(fn in nn){var $n=nn[fn];return X($n,function(Kn,Jn){var ii=Kn.invoke(Jn,$n);return Sn&&(Kn.OFFSET=ii),ii})}if(Sn){if(wr)return nt(function(Kn,Jn){return Kn.OFFSET=0});if(gn)return new G(en.thisDep,en.contextDep,en.propDep,function(Kn,Jn){return Jn.def(Kn.shared.vao+".currentVAO?"+Kn.shared.vao+".currentVAO.offset:0")})}else if(gn)return new G(en.thisDep,en.contextDep,en.propDep,function(Kn,Jn){return Jn.def(Kn.shared.vao+".currentVAO?"+Kn.shared.vao+".currentVAO.instances:-1")});return null}var cn=Ue.static,nn=Ue.dynamic,_n={},gn=!1,en=function(){if("vao"in cn){var fn=cn.vao;return fn!==null&&Le.getVAO(fn)===null&&(fn=Le.createVAO(fn)),gn=!0,_n.vao=fn,nt(function(Vn){var $n=Le.getVAO(fn);return $n?Vn.link($n):"null"})}if("vao"in nn){gn=!0;var Sn=nn.vao;return X(Sn,function(Vn,$n){var Kn=Vn.invoke($n,Sn);return $n.def(Vn.shared.vao+".getVAO("+Kn+")")})}return null}(),wr=!1,mr=function(){if("elements"in cn){var fn=cn.elements;if(_n.elements=fn,W(fn)){var Sn=_n.elements=Gt.create(fn,!0),fn=Gt.getElements(Sn);wr=!0}else fn&&(fn=Gt.getElements(fn),wr=!0);return Sn=nt(function($n,Kn){if(fn){var Jn=$n.link(fn);return $n.ELEMENTS=Jn}return $n.ELEMENTS=null}),Sn.value=fn,Sn}if("elements"in nn){wr=!0;var Vn=nn.elements;return X(Vn,function($n,Kn){var Jn=$n.shared,Pa=Jn.isBufferArgs,Jn=Jn.elements,Za=$n.invoke(Kn,Vn),ii=Kn.def("null"),Pa=Kn.def(Pa,"(",Za,")"),Za=$n.cond(Pa).then(ii,"=",Jn,".createStream(",Za,");").else(ii,"=",Jn,".getElements(",Za,");");return Kn.entry(Za),Kn.exit($n.cond(Pa).then(Jn,".destroyStream(",ii,");")),$n.ELEMENTS=ii})}return gn?new G(en.thisDep,en.contextDep,en.propDep,function($n,Kn){return Kn.def($n.shared.vao+".currentVAO?"+$n.shared.elements+".getElements("+$n.shared.vao+".currentVAO.elements):null")}):null}(),Mr=Qr("offset",!0),an=function(){if("primitive"in cn){var fn=cn.primitive;return _n.primitive=fn,nt(function(Vn,$n){return ee[fn]})}if("primitive"in nn){var Sn=nn.primitive;return X(Sn,function(Vn,$n){var Kn=Vn.constants.primTypes,Jn=Vn.invoke($n,Sn);return $n.def(Kn,"[",Jn,"]")})}return wr?et(mr)?mr.value?nt(function(Vn,$n){return $n.def(Vn.ELEMENTS,".primType")}):nt(function(){return 4}):new G(mr.thisDep,mr.contextDep,mr.propDep,function(Vn,$n){var Kn=Vn.ELEMENTS;return $n.def(Kn,"?",Kn,".primType:",4)}):gn?new G(en.thisDep,en.contextDep,en.propDep,function(Vn,$n){return $n.def(Vn.shared.vao+".currentVAO?"+Vn.shared.vao+".currentVAO.primitive:4")}):null}(),kn=function(){if("count"in cn){var fn=cn.count|0;return _n.count=fn,nt(function(){return fn})}if("count"in nn){var Sn=nn.count;return X(Sn,function(Vn,$n){return Vn.invoke($n,Sn)})}return wr?et(mr)?mr?Mr?new G(Mr.thisDep,Mr.contextDep,Mr.propDep,function(Vn,$n){return $n.def(Vn.ELEMENTS,".vertCount-",Vn.OFFSET)}):nt(function(Vn,$n){return $n.def(Vn.ELEMENTS,".vertCount")}):nt(function(){return-1}):new G(mr.thisDep||Mr.thisDep,mr.contextDep||Mr.contextDep,mr.propDep||Mr.propDep,function(Vn,$n){var Kn=Vn.ELEMENTS;return Vn.OFFSET?$n.def(Kn,"?",Kn,".vertCount-",Vn.OFFSET,":-1"):$n.def(Kn,"?",Kn,".vertCount:-1")}):gn?new G(en.thisDep,en.contextDep,en.propDep,function(Vn,$n){return $n.def(Vn.shared.vao,".currentVAO?",Vn.shared.vao,".currentVAO.count:-1")}):null}(),Rn=Qr("instances",!1);return{elements:mr,primitive:an,count:kn,instances:Rn,offset:Mr,vao:en,vaoActive:gn,elementsActive:wr,static:_n}}function ar(Ue,fr){var Qr=Ue.static,cn=Ue.dynamic,nn={};return mn.forEach(function(_n){function gn(wr,mr){if(_n in Qr){var Mr=wr(Qr[_n]);nn[en]=nt(function(){return Mr})}else if(_n in cn){var an=cn[_n];nn[en]=X(an,function(kn,Rn){return mr(kn,Rn,kn.invoke(Rn,an))})}}var en=xr(_n);switch(_n){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return gn(function(wr){return wr},function(wr,mr,Mr){return Mr});case"depth.func":return gn(function(wr){return De[wr]},function(wr,mr,Mr){return mr.def(wr.constants.compareFuncs,"[",Mr,"]")});case"depth.range":return gn(function(wr){return wr},function(wr,mr,Mr){return wr=mr.def("+",Mr,"[0]"),mr=mr.def("+",Mr,"[1]"),[wr,mr]});case"blend.func":return gn(function(wr){return[Fe["srcRGB"in wr?wr.srcRGB:wr.src],Fe["dstRGB"in wr?wr.dstRGB:wr.dst],Fe["srcAlpha"in wr?wr.srcAlpha:wr.src],Fe["dstAlpha"in wr?wr.dstAlpha:wr.dst]]},function(wr,mr,Mr){function an(Sn,Vn){return mr.def('"',Sn,Vn,'" in ',Mr,"?",Mr,".",Sn,Vn,":",Mr,".",Sn)}wr=wr.constants.blendFuncs;var kn=an("src","RGB"),fn=an("dst","RGB"),kn=mr.def(wr,"[",kn,"]"),Rn=mr.def(wr,"[",an("src","Alpha"),"]"),fn=mr.def(wr,"[",fn,"]");return wr=mr.def(wr,"[",an("dst","Alpha"),"]"),[kn,fn,Rn,wr]});case"blend.equation":return gn(function(wr){if(typeof wr=="string")return[Hn[wr],Hn[wr]];if(typeof wr=="object")return[Hn[wr.rgb],Hn[wr.alpha]]},function(wr,mr,Mr){var an=wr.constants.blendEquations,kn=mr.def(),Rn=mr.def();return wr=wr.cond("typeof ",Mr,'==="string"'),wr.then(kn,"=",Rn,"=",an,"[",Mr,"];"),wr.else(kn,"=",an,"[",Mr,".rgb];",Rn,"=",an,"[",Mr,".alpha];"),mr(wr),[kn,Rn]});case"blend.color":return gn(function(wr){return f(4,function(mr){return+wr[mr]})},function(wr,mr,Mr){return f(4,function(an){return mr.def("+",Mr,"[",an,"]")})});case"stencil.mask":return gn(function(wr){return wr|0},function(wr,mr,Mr){return mr.def(Mr,"|0")});case"stencil.func":return gn(function(wr){return[De[wr.cmp||"keep"],wr.ref||0,"mask"in wr?wr.mask:-1]},function(wr,mr,Mr){wr=mr.def('"cmp" in ',Mr,"?",wr.constants.compareFuncs,"[",Mr,".cmp]",":",7680);var an=mr.def(Mr,".ref|0");return mr=mr.def('"mask" in ',Mr,"?",Mr,".mask|0:-1"),[wr,an,mr]});case"stencil.opFront":case"stencil.opBack":return gn(function(wr){return[_n==="stencil.opBack"?1029:1028,Ae[wr.fail||"keep"],Ae[wr.zfail||"keep"],Ae[wr.zpass||"keep"]]},function(wr,mr,Mr){function an(Rn){return mr.def('"',Rn,'" in ',Mr,"?",kn,"[",Mr,".",Rn,"]:",7680)}var kn=wr.constants.stencilOps;return[_n==="stencil.opBack"?1029:1028,an("fail"),an("zfail"),an("zpass")]});case"polygonOffset.offset":return gn(function(wr){return[wr.factor|0,wr.units|0]},function(wr,mr,Mr){return wr=mr.def(Mr,".factor|0"),mr=mr.def(Mr,".units|0"),[wr,mr]});case"cull.face":return gn(function(wr){var mr=0;return wr==="front"?mr=1028:wr==="back"&&(mr=1029),mr},function(wr,mr,Mr){return mr.def(Mr,'==="front"?',1028,":",1029)});case"lineWidth":return gn(function(wr){return wr},function(wr,mr,Mr){return Mr});case"frontFace":return gn(function(wr){return Ve[wr]},function(wr,mr,Mr){return mr.def(Mr+'==="cw"?2304:2305')});case"colorMask":return gn(function(wr){return wr.map(function(mr){return!!mr})},function(wr,mr,Mr){return f(4,function(an){return"!!"+Mr+"["+an+"]"})});case"sample.coverage":return gn(function(wr){return["value"in wr?wr.value:1,!!wr.invert]},function(wr,mr,Mr){return wr=mr.def('"value" in ',Mr,"?+",Mr,".value:1"),mr=mr.def("!!",Mr,".invert"),[wr,mr]})}}),nn}function cr(Ue,fr){var Qr=Ue.static,cn=Ue.dynamic,nn={};return Object.keys(Qr).forEach(function(_n){var gn=Qr[_n],en;if(typeof gn=="number"||typeof gn=="boolean")en=nt(function(){return gn});else if(typeof gn=="function"){var wr=gn._reglType;wr==="texture2d"||wr==="textureCube"?en=nt(function(mr){return mr.link(gn)}):(wr==="framebuffer"||wr==="framebufferCube")&&(en=nt(function(mr){return mr.link(gn.color[0])}))}else k(gn)&&(en=nt(function(mr){return mr.global.def("[",f(gn.length,function(Mr){return gn[Mr]}),"]")}));en.value=gn,nn[_n]=en}),Object.keys(cn).forEach(function(_n){var gn=cn[_n];nn[_n]=X(gn,function(en,wr){return en.invoke(wr,gn)})}),nn}function sr(Ue,fr){var Qr=Ue.static,cn=Ue.dynamic,nn={};return Object.keys(Qr).forEach(function(_n){var gn=Qr[_n],en=je.id(_n),wr=new Gn;if(W(gn))wr.state=1,wr.buffer=tr.getBuffer(tr.create(gn,34962,!1,!0)),wr.type=0;else{var mr=tr.getBuffer(gn);if(mr)wr.state=1,wr.buffer=mr,wr.type=0;else if("constant"in gn){var Mr=gn.constant;wr.buffer="null",wr.state=2,typeof Mr=="number"?wr.x=Mr:de.forEach(function(Vn,$n){$n<Mr.length&&(wr[Vn]=Mr[$n])})}else{var mr=W(gn.buffer)?tr.getBuffer(tr.create(gn.buffer,34962,!1,!0)):tr.getBuffer(gn.buffer),an=gn.offset|0,kn=gn.stride|0,Rn=gn.size|0,fn=!!gn.normalized,Sn=0;"type"in gn&&(Sn=Bt[gn.type]),gn=gn.divisor|0,wr.buffer=mr,wr.state=1,wr.size=Rn,wr.normalized=fn,wr.type=Sn||mr.dtype,wr.offset=an,wr.stride=kn,wr.divisor=gn}}nn[_n]=nt(function(Vn,$n){var Kn=Vn.attribCache;if(en in Kn)return Kn[en];var Jn={isStream:!1};return Object.keys(wr).forEach(function(ii){Jn[ii]=wr[ii]}),wr.buffer&&(Jn.buffer=Vn.link(wr.buffer),Jn.type=Jn.type||Jn.buffer+".dtype"),Kn[en]=Jn})}),Object.keys(cn).forEach(function(_n){var gn=cn[_n];nn[_n]=X(gn,function(en,wr){function mr(Kn){wr(fn[Kn],"=",Mr,".",Kn,"|0;")}var Mr=en.invoke(wr,gn),Rn=en.shared,an=en.constants,kn=Rn.isBufferArgs,Rn=Rn.buffer,fn={isStream:wr.def(!1)},Sn=new Gn;Sn.state=1,Object.keys(Sn).forEach(function(Kn){fn[Kn]=wr.def(""+Sn[Kn])});var Vn=fn.buffer,$n=fn.type;return wr("if(",kn,"(",Mr,")){",fn.isStream,"=true;",Vn,"=",Rn,".createStream(",34962,",",Mr,");",$n,"=",Vn,".dtype;","}else{",Vn,"=",Rn,".getBuffer(",Mr,");","if(",Vn,"){",$n,"=",Vn,".dtype;",'}else if("constant" in ',Mr,"){",fn.state,"=",2,";","if(typeof "+Mr+'.constant === "number"){',fn[de[0]],"=",Mr,".constant;",de.slice(1).map(function(Kn){return fn[Kn]}).join("="),"=0;","}else{",de.map(function(Kn,Jn){return fn[Kn]+"="+Mr+".constant.length>"+Jn+"?"+Mr+".constant["+Jn+"]:0;"}).join(""),"}}else{","if(",kn,"(",Mr,".buffer)){",Vn,"=",Rn,".createStream(",34962,",",Mr,".buffer);","}else{",Vn,"=",Rn,".getBuffer(",Mr,".buffer);","}",$n,'="type" in ',Mr,"?",an.glTypes,"[",Mr,".type]:",Vn,".dtype;",fn.normalized,"=!!",Mr,".normalized;"),mr("size"),mr("offset"),mr("stride"),mr("divisor"),wr("}}"),wr.exit("if(",fn.isStream,"){",Rn,".destroyStream(",Vn,");","}"),fn})}),nn}function lr(Ue){var fr=Ue.static,Qr=Ue.dynamic,cn={};return Object.keys(fr).forEach(function(nn){var _n=fr[nn];cn[nn]=nt(function(gn,en){return typeof _n=="number"||typeof _n=="boolean"?""+_n:gn.link(_n)})}),Object.keys(Qr).forEach(function(nn){var _n=Qr[nn];cn[nn]=X(_n,function(gn,en){return gn.invoke(en,_n)})}),cn}function Or(Ue,fr,Qr,cn,nn){function _n(Sn){var Vn=en[Sn];Vn&&(mr[Sn]=Vn)}var gn=$e(Ue,fr),kn=Be(Ue),en=Je(Ue,kn),wr=Oe(Ue),mr=ar(Ue),Mr=Xe(Ue,nn,gn);_n("viewport"),_n(xr("scissor.box"));var an=0<Object.keys(mr).length,kn={framebuffer:kn,draw:wr,shader:Mr,state:mr,dirty:an,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(kn.profile=Se(Ue),kn.uniforms=cr(Qr),kn.drawVAO=kn.scopeVAO=wr.vao,!kn.drawVAO&&Mr.program&&!gn&&Re.angle_instanced_arrays&&wr.static.elements){var Rn=!0;if(Ue=Mr.program.attributes.map(function(Sn){return Sn=fr.static[Sn],Rn=Rn&&!!Sn,Sn}),Rn&&0<Ue.length){var fn=Le.getVAO(Le.createVAO({attributes:Ue,elements:wr.static.elements}));kn.drawVAO=new G(null,null,null,function(Sn,Vn){return Sn.link(fn)}),kn.useVAO=!0}}return gn?kn.useVAO=!0:kn.attributes=sr(fr),kn.context=lr(cn),kn}function Ir(Ue,fr,Qr){var cn=Ue.shared.context,nn=Ue.scope();Object.keys(Qr).forEach(function(_n){fr.save(cn,"."+_n);var gn=Qr[_n].append(Ue,fr);Array.isArray(gn)?nn(cn,".",_n,"=[",gn.join(),"];"):nn(cn,".",_n,"=",gn,";")}),fr(nn)}function Pr(Ue,fr,Qr,cn){var en=Ue.shared,nn=en.gl,_n=en.framebuffer,gn;$r&&(gn=fr.def(en.extensions,".webgl_draw_buffers"));var wr=Ue.constants,en=wr.drawBuffer,wr=wr.backBuffer;Ue=Qr?Qr.append(Ue,fr):fr.def(_n,".next"),cn||fr("if(",Ue,"!==",_n,".cur){"),fr("if(",Ue,"){",nn,".bindFramebuffer(",36160,",",Ue,".framebuffer);"),$r&&fr(gn,".drawBuffersWEBGL(",en,"[",Ue,".colorAttachments.length]);"),fr("}else{",nn,".bindFramebuffer(",36160,",null);"),$r&&fr(gn,".drawBuffersWEBGL(",wr,");"),fr("}",_n,".cur=",Ue,";"),cn||fr("}")}function rn(Ue,fr,Qr){var cn=Ue.shared,nn=cn.gl,_n=Ue.current,gn=Ue.next,en=cn.current,wr=cn.next,mr=Ue.cond(en,".dirty");mn.forEach(function(Mr){if(Mr=xr(Mr),!(Mr in Qr.state)){var an,kn;if(Mr in gn){an=gn[Mr],kn=_n[Mr];var Rn=f(ln[Mr].length,function(fn){return mr.def(an,"[",fn,"]")});mr(Ue.cond(Rn.map(function(fn,Sn){return fn+"!=="+kn+"["+Sn+"]"}).join("||")).then(nn,".",On[Mr],"(",Rn,");",Rn.map(function(fn,Sn){return kn+"["+Sn+"]="+fn}).join(";"),";"))}else an=mr.def(wr,".",Mr),Rn=Ue.cond(an,"!==",en,".",Mr),mr(Rn),Mr in Mn?Rn(Ue.cond(an).then(nn,".enable(",Mn[Mr],");").else(nn,".disable(",Mn[Mr],");"),en,".",Mr,"=",an,";"):Rn(nn,".",On[Mr],"(",an,");",en,".",Mr,"=",an,";")}}),Object.keys(Qr.state).length===0&&mr(en,".dirty=false;"),fr(mr)}function Zr(Ue,fr,Qr,cn){var nn=Ue.shared,_n=Ue.current,gn=nn.current,en=nn.gl,wr;Z(Object.keys(Qr)).forEach(function(mr){var Mr=Qr[mr];if(!cn||cn(Mr)){var an=Mr.append(Ue,fr);if(Mn[mr]){var kn=Mn[mr];et(Mr)?(wr=Ue.link(an,{stable:!0}),fr(Ue.cond(wr).then(en,".enable(",kn,");").else(en,".disable(",kn,");")),fr(gn,".",mr,"=",wr,";")):(fr(Ue.cond(an).then(en,".enable(",kn,");").else(en,".disable(",kn,");")),fr(gn,".",mr,"=",an,";"))}else if(k(an)){var Rn=_n[mr];fr(en,".",On[mr],"(",an,");",an.map(function(fn,Sn){return Rn+"["+Sn+"]="+fn}).join(";"),";")}else et(Mr)?(wr=Ue.link(an,{stable:!0}),fr(en,".",On[mr],"(",wr,");",gn,".",mr,"=",wr,";")):fr(en,".",On[mr],"(",an,");",gn,".",mr,"=",an,";")}})}function yn(Ue,fr){gr&&(Ue.instancing=fr.def(Ue.shared.extensions,".angle_instanced_arrays"))}function Tn(Ue,fr,Qr,cn,nn){function _n(){return typeof performance>"u"?"Date.now()":"performance.now()"}function gn(Sn){Rn=fr.def(),Sn(Rn,"=",_n(),";"),typeof nn=="string"?Sn(Mr,".count+=",nn,";"):Sn(Mr,".count++;"),We&&(cn?(fn=fr.def(),Sn(fn,"=",kn,".getNumPendingQueries();")):Sn(kn,".beginQuery(",Mr,");"))}function en(Sn){Sn(Mr,".cpuTime+=",_n(),"-",Rn,";"),We&&(cn?Sn(kn,".pushScopeStats(",fn,",",kn,".getNumPendingQueries(),",Mr,");"):Sn(kn,".endQuery();"))}function wr(Sn){var Vn=fr.def(an,".profile");fr(an,".profile=",Sn,";"),fr.exit(an,".profile=",Vn,";")}var mr=Ue.shared,Mr=Ue.stats,an=mr.current,kn=mr.timer;Qr=Qr.profile;var Rn,fn;if(Qr){if(et(Qr)){Qr.enable?(gn(fr),en(fr.exit),wr("true")):wr("false");return}Qr=Qr.append(Ue,fr),wr(Qr)}else Qr=fr.def(an,".profile");mr=Ue.block(),gn(mr),fr("if(",Qr,"){",mr,"}"),Ue=Ue.block(),en(Ue),fr.exit("if(",Qr,"){",Ue,"}")}function hr(Ue,fr,Qr,cn,nn){function _n(wr){switch(wr){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function gn(wr,mr,Mr){function an(){fr("if(!",Sn,".buffer){",Rn,".enableVertexAttribArray(",fn,");}");var Jn=Mr.type,ii;ii=Mr.size?fr.def(Mr.size,"||",mr):mr,fr("if(",Sn,".type!==",Jn,"||",Sn,".size!==",ii,"||",Kn.map(function(Pa){return Sn+"."+Pa+"!=="+Mr[Pa]}).join("||"),"){",Rn,".bindBuffer(",34962,",",Vn,".buffer);",Rn,".vertexAttribPointer(",[fn,ii,Jn,Mr.normalized,Mr.stride,Mr.offset],");",Sn,".type=",Jn,";",Sn,".size=",ii,";",Kn.map(function(Pa){return Sn+"."+Pa+"="+Mr[Pa]+";"}).join(""),"}"),gr&&(Jn=Mr.divisor,fr("if(",Sn,".divisor!==",Jn,"){",Ue.instancing,".vertexAttribDivisorANGLE(",[fn,Jn],");",Sn,".divisor=",Jn,";}"))}function kn(){fr("if(",Sn,".buffer){",Rn,".disableVertexAttribArray(",fn,");",Sn,".buffer=null;","}if(",de.map(function(Jn,ii){return Sn+"."+Jn+"!=="+$n[ii]}).join("||"),"){",Rn,".vertexAttrib4f(",fn,",",$n,");",de.map(function(Jn,ii){return Sn+"."+Jn+"="+$n[ii]+";"}).join(""),"}")}var Rn=en.gl,fn=fr.def(wr,".location"),Sn=fr.def(en.attributes,"[",fn,"]");wr=Mr.state;var Vn=Mr.buffer,$n=[Mr.x,Mr.y,Mr.z,Mr.w],Kn=["buffer","normalized","offset","stride"];wr===1?an():wr===2?kn():(fr("if(",wr,"===",1,"){"),an(),fr("}else{"),kn(),fr("}"))}var en=Ue.shared;cn.forEach(function(wr){var mr=wr.name,Mr=Qr.attributes[mr],an;if(Mr){if(!nn(Mr))return;an=Mr.append(Ue,fr)}else{if(!nn(Qe))return;var kn=Ue.scopeAttrib(mr);an={},Object.keys(new Gn).forEach(function(Rn){an[Rn]=fr.def(kn,".",Rn)})}gn(Ue.link(wr),_n(wr.info.type),an)})}function dr(Ue,fr,Qr,cn,nn,_n){for(var gn=Ue.shared,en=gn.gl,wr,mr=0;mr<cn.length;++mr){var Rn=cn[mr],Mr=Rn.name,an=Rn.info.type,kn=Qr.uniforms[Mr],Rn=Ue.link(Rn)+".location",fn;if(kn){if(!nn(kn))continue;if(et(kn)){if(Mr=kn.value,an===35678||an===35680)an=Ue.link(Mr._texture||Mr.color[0]._texture),fr(en,".uniform1i(",Rn,",",an+".bind());"),fr.exit(an,".unbind();");else if(an===35674||an===35675||an===35676)Mr=Ue.global.def("new Float32Array(["+Array.prototype.slice.call(Mr)+"])"),kn=2,an===35675?kn=3:an===35676&&(kn=4),fr(en,".uniformMatrix",kn,"fv(",Rn,",false,",Mr,");");else{switch(an){case 5126:wr="1f";break;case 35664:wr="2f";break;case 35665:wr="3f";break;case 35666:wr="4f";break;case 35670:wr="1i";break;case 5124:wr="1i";break;case 35671:wr="2i";break;case 35667:wr="2i";break;case 35672:wr="3i";break;case 35668:wr="3i";break;case 35673:wr="4i";break;case 35669:wr="4i"}fr(en,".uniform",wr,"(",Rn,",",k(Mr)?Array.prototype.slice.call(Mr):Mr,");")}continue}else fn=kn.append(Ue,fr)}else{if(!nn(Qe))continue;fn=fr.def(gn.uniforms,"[",je.id(Mr),"]")}switch(an===35678?fr("if(",fn,"&&",fn,'._reglType==="framebuffer"){',fn,"=",fn,".color[0];","}"):an===35680&&fr("if(",fn,"&&",fn,'._reglType==="framebufferCube"){',fn,"=",fn,".color[0];","}"),Mr=1,an){case 35678:case 35680:an=fr.def(fn,"._texture"),fr(en,".uniform1i(",Rn,",",an,".bind());"),fr.exit(an,".unbind();");continue;case 5124:case 35670:wr="1i";break;case 35667:case 35671:wr="2i",Mr=2;break;case 35668:case 35672:wr="3i",Mr=3;break;case 35669:case 35673:wr="4i",Mr=4;break;case 5126:wr="1f";break;case 35664:wr="2f",Mr=2;break;case 35665:wr="3f",Mr=3;break;case 35666:wr="4f",Mr=4;break;case 35674:wr="Matrix2fv";break;case 35675:wr="Matrix3fv";break;case 35676:wr="Matrix4fv"}if(wr.charAt(0)==="M"){fr(en,".uniform",wr,"(",Rn,",");var Rn=Math.pow(an-35674+2,2),Sn=Ue.global.def("new Float32Array(",Rn,")");Array.isArray(fn)?fr("false,(",f(Rn,function(Kn){return Sn+"["+Kn+"]="+fn[Kn]}),",",Sn,")"):fr("false,(Array.isArray(",fn,")||",fn," instanceof Float32Array)?",fn,":(",f(Rn,function(Kn){return Sn+"["+Kn+"]="+fn+"["+Kn+"]"}),",",Sn,")"),fr(");")}else{if(1<Mr){for(var an=[],Vn=[],kn=0;kn<Mr;++kn)Array.isArray(fn)?Vn.push(fn[kn]):Vn.push(fr.def(fn+"["+kn+"]")),_n&&an.push(fr.def());_n&&fr("if(!",Ue.batchId,"||",an.map(function($n,Kn){return $n+"!=="+Vn[Kn]}).join("||"),"){",an.map(function($n,Kn){return $n+"="+Vn[Kn]+";"}).join("")),fr(en,".uniform",wr,"(",Rn,",",Vn.join(","),");")}else _n&&(an=fr.def(),fr("if(!",Ue.batchId,"||",an,"!==",fn,"){",an,"=",fn,";")),fr(en,".uniform",wr,"(",Rn,",",fn,");");_n&&fr("}")}}}function Lr(Ue,fr,Qr,cn){function nn(Jn){var ii=Mr[Jn];return ii?ii.contextDep&&cn.contextDynamic||ii.propDep?ii.append(Ue,Qr):ii.append(Ue,fr):fr.def(mr,".",Jn)}function _n(){function Jn(){Qr(Vn,".drawElementsInstancedANGLE(",[kn,fn,$n,Rn+"<<(("+$n+"-5121)>>1)",Sn],");")}function ii(){Qr(Vn,".drawArraysInstancedANGLE(",[kn,Rn,fn,Sn],");")}an&&an!=="null"?Kn?Jn():(Qr("if(",an,"){"),Jn(),Qr("}else{"),ii(),Qr("}")):ii()}function gn(){function Jn(){Qr(wr+".drawElements("+[kn,fn,$n,Rn+"<<(("+$n+"-5121)>>1)"]+");")}function ii(){Qr(wr+".drawArrays("+[kn,Rn,fn]+");")}an&&an!=="null"?Kn?Jn():(Qr("if(",an,"){"),Jn(),Qr("}else{"),ii(),Qr("}")):ii()}var en=Ue.shared,wr=en.gl,mr=en.draw,Mr=cn.draw,an=function(){var Jn=Mr.elements,ii=fr;return Jn?((Jn.contextDep&&cn.contextDynamic||Jn.propDep)&&(ii=Qr),Jn=Jn.append(Ue,ii),Mr.elementsActive&&ii("if("+Jn+")"+wr+".bindBuffer(34963,"+Jn+".buffer.buffer);")):(Jn=ii.def(),ii(Jn,"=",mr,".","elements",";","if(",Jn,"){",wr,".bindBuffer(",34963,",",Jn,".buffer.buffer);}","else if(",en.vao,".currentVAO){",Jn,"=",Ue.shared.elements+".getElements("+en.vao,".currentVAO.elements);",Jr?"":"if("+Jn+")"+wr+".bindBuffer(34963,"+Jn+".buffer.buffer);","}")),Jn}(),kn=nn("primitive"),Rn=nn("offset"),fn=function(){var Jn=Mr.count,ii=fr;return Jn?((Jn.contextDep&&cn.contextDynamic||Jn.propDep)&&(ii=Qr),Jn=Jn.append(Ue,ii)):Jn=ii.def(mr,".","count"),Jn}();if(typeof fn=="number"){if(fn===0)return}else Qr("if(",fn,"){"),Qr.exit("}");var Sn,Vn;gr&&(Sn=nn("instances"),Vn=Ue.instancing);var $n=an+".type",Kn=Mr.elements&&et(Mr.elements)&&!Mr.vaoActive;gr&&(typeof Sn!="number"||0<=Sn)?typeof Sn=="string"?(Qr("if(",Sn,">0){"),_n(),Qr("}else if(",Sn,"<0){"),gn(),Qr("}")):_n():gn()}function Cr(Ue,fr,Qr,cn,nn){return fr=Te(),nn=fr.proc("body",nn),gr&&(fr.instancing=nn.def(fr.shared.extensions,".angle_instanced_arrays")),Ue(fr,nn,Qr,cn),fr.compile().body}function Hr(Ue,fr,Qr,cn){yn(Ue,fr),Qr.useVAO?Qr.drawVAO?fr(Ue.shared.vao,".setVAO(",Qr.drawVAO.append(Ue,fr),");"):fr(Ue.shared.vao,".setVAO(",Ue.shared.vao,".targetVAO);"):(fr(Ue.shared.vao,".setVAO(null);"),hr(Ue,fr,Qr,cn.attributes,function(){return!0})),dr(Ue,fr,Qr,cn.uniforms,function(){return!0},!1),Lr(Ue,fr,fr,Qr)}function sn(Ue,fr){var Qr=Ue.proc("draw",1);yn(Ue,Qr),Ir(Ue,Qr,fr.context),Pr(Ue,Qr,fr.framebuffer),rn(Ue,Qr,fr),Zr(Ue,Qr,fr.state),Tn(Ue,Qr,fr,!1,!0);var cn=fr.shader.progVar.append(Ue,Qr);if(Qr(Ue.shared.gl,".useProgram(",cn,".program);"),fr.shader.program)Hr(Ue,Qr,fr,fr.shader.program);else{Qr(Ue.shared.vao,".setVAO(null);");var nn=Ue.global.def("{}"),_n=Qr.def(cn,".id"),gn=Qr.def(nn,"[",_n,"]");Qr(Ue.cond(gn).then(gn,".call(this,a0);").else(gn,"=",nn,"[",_n,"]=",Ue.link(function(en){return Cr(Hr,Ue,fr,en,1)}),"(",cn,");",gn,".call(this,a0);"))}0<Object.keys(fr.state).length&&Qr(Ue.shared.current,".dirty=true;"),Ue.shared.vao&&Qr(Ue.shared.vao,".setVAO(null);")}function Yr(Ue,fr,Qr,cn){function nn(){return!0}Ue.batchId="a1",yn(Ue,fr),hr(Ue,fr,Qr,cn.attributes,nn),dr(Ue,fr,Qr,cn.uniforms,nn,!1),Lr(Ue,fr,fr,Qr)}function xn(Ue,fr,Qr,cn){function nn(an){return an.contextDep&&gn||an.propDep}function _n(an){return!nn(an)}yn(Ue,fr);var gn=Qr.contextDep,en=fr.def(),wr=fr.def();Ue.shared.props=wr,Ue.batchId=en;var mr=Ue.scope(),Mr=Ue.scope();fr(mr.entry,"for(",en,"=0;",en,"<","a1",";++",en,"){",wr,"=","a0","[",en,"];",Mr,"}",mr.exit),Qr.needsContext&&Ir(Ue,Mr,Qr.context),Qr.needsFramebuffer&&Pr(Ue,Mr,Qr.framebuffer),Zr(Ue,Mr,Qr.state,nn),Qr.profile&&nn(Qr.profile)&&Tn(Ue,Mr,Qr,!1,!0),cn?(Qr.useVAO?Qr.drawVAO?nn(Qr.drawVAO)?Mr(Ue.shared.vao,".setVAO(",Qr.drawVAO.append(Ue,Mr),");"):mr(Ue.shared.vao,".setVAO(",Qr.drawVAO.append(Ue,mr),");"):mr(Ue.shared.vao,".setVAO(",Ue.shared.vao,".targetVAO);"):(mr(Ue.shared.vao,".setVAO(null);"),hr(Ue,mr,Qr,cn.attributes,_n),hr(Ue,Mr,Qr,cn.attributes,nn)),dr(Ue,mr,Qr,cn.uniforms,_n,!1),dr(Ue,Mr,Qr,cn.uniforms,nn,!0),Lr(Ue,mr,Mr,Qr)):(fr=Ue.global.def("{}"),cn=Qr.shader.progVar.append(Ue,Mr),wr=Mr.def(cn,".id"),mr=Mr.def(fr,"[",wr,"]"),Mr(Ue.shared.gl,".useProgram(",cn,".program);","if(!",mr,"){",mr,"=",fr,"[",wr,"]=",Ue.link(function(an){return Cr(Yr,Ue,Qr,an,2)}),"(",cn,");}",mr,".call(this,a0[",en,"],",en,");"))}function wn(Ue,fr){function Qr(mr){return mr.contextDep&&nn||mr.propDep}var cn=Ue.proc("batch",2);Ue.batchId="0",yn(Ue,cn);var nn=!1,_n=!0;Object.keys(fr.context).forEach(function(mr){nn=nn||fr.context[mr].propDep}),nn||(Ir(Ue,cn,fr.context),_n=!1);var gn=fr.framebuffer,en=!1;if(gn?(gn.propDep?nn=en=!0:gn.contextDep&&nn&&(en=!0),en||Pr(Ue,cn,gn)):Pr(Ue,cn,null),fr.state.viewport&&fr.state.viewport.propDep&&(nn=!0),rn(Ue,cn,fr),Zr(Ue,cn,fr.state,function(mr){return!Qr(mr)}),fr.profile&&Qr(fr.profile)||Tn(Ue,cn,fr,!1,"a1"),fr.contextDep=nn,fr.needsContext=_n,fr.needsFramebuffer=en,_n=fr.shader.progVar,_n.contextDep&&nn||_n.propDep)xn(Ue,cn,fr,null);else if(_n=_n.append(Ue,cn),cn(Ue.shared.gl,".useProgram(",_n,".program);"),fr.shader.program)xn(Ue,cn,fr,fr.shader.program);else{cn(Ue.shared.vao,".setVAO(null);");var gn=Ue.global.def("{}"),en=cn.def(_n,".id"),wr=cn.def(gn,"[",en,"]");cn(Ue.cond(wr).then(wr,".call(this,a0,a1);").else(wr,"=",gn,"[",en,"]=",Ue.link(function(an){return Cr(xn,Ue,fr,an,2)}),"(",_n,");",wr,".call(this,a0,a1);"))}0<Object.keys(fr.state).length&&cn(Ue.shared.current,".dirty=true;"),Ue.shared.vao&&cn(Ue.shared.vao,".setVAO(null);")}function Un(Ue,fr){function Qr(en){var wr=fr.shader[en];wr&&(wr=wr.append(Ue,cn),isNaN(wr)?cn.set(nn.shader,"."+en,wr):cn.set(nn.shader,"."+en,Ue.link(wr,{stable:!0})))}var cn=Ue.proc("scope",3);Ue.batchId="a2";var nn=Ue.shared,_n=nn.current;if(Ir(Ue,cn,fr.context),fr.framebuffer&&fr.framebuffer.append(Ue,cn),Z(Object.keys(fr.state)).forEach(function(en){var wr=fr.state[en],mr=wr.append(Ue,cn);k(mr)?mr.forEach(function(Mr,an){isNaN(Mr)?cn.set(Ue.next[en],"["+an+"]",Mr):cn.set(Ue.next[en],"["+an+"]",Ue.link(Mr,{stable:!0}))}):et(wr)?cn.set(nn.next,"."+en,Ue.link(mr,{stable:!0})):cn.set(nn.next,"."+en,mr)}),Tn(Ue,cn,fr,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(en){var wr=fr.draw[en];wr&&(wr=wr.append(Ue,cn),isNaN(wr)?cn.set(nn.draw,"."+en,wr):cn.set(nn.draw,"."+en,Ue.link(wr),{stable:!0}))}),Object.keys(fr.uniforms).forEach(function(en){var wr=fr.uniforms[en].append(Ue,cn);Array.isArray(wr)&&(wr="["+wr.map(function(mr){return isNaN(mr)?mr:Ue.link(mr,{stable:!0})})+"]"),cn.set(nn.uniforms,"["+Ue.link(je.id(en),{stable:!0})+"]",wr)}),Object.keys(fr.attributes).forEach(function(en){var wr=fr.attributes[en].append(Ue,cn),mr=Ue.scopeAttrib(en);Object.keys(new Gn).forEach(function(Mr){cn.set(mr,"."+Mr,wr[Mr])})}),fr.scopeVAO){var gn=fr.scopeVAO.append(Ue,cn);isNaN(gn)?cn.set(nn.vao,".targetVAO",gn):cn.set(nn.vao,".targetVAO",Ue.link(gn,{stable:!0}))}Qr("vert"),Qr("frag"),0<Object.keys(fr.state).length&&(cn(_n,".dirty=true;"),cn.exit(_n,".dirty=true;")),cn("a1(",Ue.shared.context,",a0,",Ue.batchId,");")}function qn(Ue){if(typeof Ue=="object"&&!k(Ue)){for(var fr=Object.keys(Ue),Qr=0;Qr<fr.length;++Qr)if(pt.isDynamic(Ue[fr[Qr]]))return!0;return!1}}function ei(Ue,fr,Qr){function cn(an,kn){gn.forEach(function(Rn){var fn=nn[Rn];pt.isDynamic(fn)&&(fn=an.invoke(kn,fn),kn(Mr,".",Rn,"=",fn,";"))})}var nn=fr.static[Qr];if(nn&&qn(nn)){var _n=Ue.global,gn=Object.keys(nn),en=!1,wr=!1,mr=!1,Mr=Ue.global.def("{}");gn.forEach(function(an){var kn=nn[an];if(pt.isDynamic(kn))typeof kn=="function"&&(kn=nn[an]=pt.unbox(kn)),an=X(kn,null),en=en||an.thisDep,mr=mr||an.propDep,wr=wr||an.contextDep;else{switch(_n(Mr,".",an,"="),typeof kn){case"number":_n(kn);break;case"string":_n('"',kn,'"');break;case"object":Array.isArray(kn)&&_n("[",kn.join(),"]");break;default:_n(Ue.link(kn))}_n(";")}}),fr.dynamic[Qr]=new pt.DynamicVariable(4,{thisDep:en,contextDep:wr,propDep:mr,ref:Mr,append:cn}),delete fr.static[Qr]}}var Gn=Le.Record,Hn={add:32774,subtract:32778,"reverse subtract":32779};Re.ext_blend_minmax&&(Hn.min=32775,Hn.max=32776);var gr=Re.angle_instanced_arrays,$r=Re.webgl_draw_buffers,Jr=Re.oes_vertex_array_object,ln={dirty:!0,profile:ir.profile},zn={},mn=[],Mn={},On={};Dt("dither",3024),Dt("blend.enable",3042),Ut("blend.color","blendColor",[0,0,0,0]),Ut("blend.equation","blendEquationSeparate",[32774,32774]),Ut("blend.func","blendFuncSeparate",[1,0,1,0]),Dt("depth.enable",2929,!0),Ut("depth.func","depthFunc",513),Ut("depth.range","depthRange",[0,1]),Ut("depth.mask","depthMask",!0),Ut("colorMask","colorMask",[!0,!0,!0,!0]),Dt("cull.enable",2884),Ut("cull.face","cullFace",1029),Ut("frontFace","frontFace",2305),Ut("lineWidth","lineWidth",1),Dt("polygonOffset.enable",32823),Ut("polygonOffset.offset","polygonOffset",[0,0]),Dt("sample.alpha",32926),Dt("sample.enable",32928),Ut("sample.coverage","sampleCoverage",[1,!1]),Dt("stencil.enable",2960),Ut("stencil.mask","stencilMask",-1),Ut("stencil.func","stencilFunc",[519,0,-1]),Ut("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Ut("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),Dt("scissor.enable",3089),Ut("scissor.box","scissor",[0,0,he.drawingBufferWidth,he.drawingBufferHeight]),Ut("viewport","viewport",[0,0,he.drawingBufferWidth,he.drawingBufferHeight]);var Xn={gl:he,context:ze,strings:je,next:zn,current:ln,draw:Ce,elements:Gt,buffer:tr,shader:_e,attributes:Le.state,vao:Le,uniforms:ye,framebuffer:fe,extensions:Re,timer:We,isBufferArgs:W},gi={primTypes:ee,compareFuncs:De,blendFuncs:Fe,blendEquations:Hn,stencilOps:Ae,glTypes:Bt,orientationType:Ve};$r&&(gi.backBuffer=[1029],gi.drawBuffer=f(_r.maxDrawbuffers,function(Ue){return Ue===0?[0]:f(Ue,function(fr){return 36064+fr})}));var Ri=0;return{next:zn,current:ln,procs:function(){var Ue=Te(),fr=Ue.proc("poll"),Qr=Ue.proc("refresh"),cn=Ue.block();fr(cn),Qr(cn);var wr=Ue.shared,nn=wr.gl,_n=wr.next,gn=wr.current;cn(gn,".dirty=false;"),Pr(Ue,fr),Pr(Ue,Qr,null,!0);var en;gr&&(en=Ue.link(gr)),Re.oes_vertex_array_object&&Qr(Ue.link(Re.oes_vertex_array_object),".bindVertexArrayOES(null);");var wr=Qr.def(wr.attributes),mr=Qr.def(0),Mr=Ue.cond(mr,".buffer");Mr.then(nn,".enableVertexAttribArray(i);",nn,".bindBuffer(",34962,",",mr,".buffer.buffer);",nn,".vertexAttribPointer(i,",mr,".size,",mr,".type,",mr,".normalized,",mr,".stride,",mr,".offset);").else(nn,".disableVertexAttribArray(i);",nn,".vertexAttrib4f(i,",mr,".x,",mr,".y,",mr,".z,",mr,".w);",mr,".buffer=null;");var an=Ue.link(_r.maxAttributes,{stable:!0});return Qr("for(var i=0;i<",an,";++i){",mr,"=",wr,"[i];",Mr,"}"),gr&&Qr("for(var i=0;i<",an,";++i){",en,".vertexAttribDivisorANGLE(i,",wr,"[i].divisor);","}"),Qr(Ue.shared.vao,".currentVAO=null;",Ue.shared.vao,".setVAO(",Ue.shared.vao,".targetVAO);"),Object.keys(Mn).forEach(function(kn){var Rn=Mn[kn],fn=cn.def(_n,".",kn),Sn=Ue.block();Sn("if(",fn,"){",nn,".enable(",Rn,")}else{",nn,".disable(",Rn,")}",gn,".",kn,"=",fn,";"),Qr(Sn),fr("if(",fn,"!==",gn,".",kn,"){",Sn,"}")}),Object.keys(On).forEach(function(kn){var Rn=On[kn],fn=ln[kn],Sn,Vn,$n=Ue.block();$n(nn,".",Rn,"("),k(fn)?(Rn=fn.length,Sn=Ue.global.def(_n,".",kn),Vn=Ue.global.def(gn,".",kn),$n(f(Rn,function(Kn){return Sn+"["+Kn+"]"}),");",f(Rn,function(Kn){return Vn+"["+Kn+"]="+Sn+"["+Kn+"];"}).join("")),fr("if(",f(Rn,function(Kn){return Sn+"["+Kn+"]!=="+Vn+"["+Kn+"]"}).join("||"),"){",$n,"}")):(Sn=cn.def(_n,".",kn),Vn=cn.def(gn,".",kn),$n(Sn,");",gn,".",kn,"=",Sn,";"),fr("if(",Sn,"!==",Vn,"){",$n,"}")),Qr($n)}),Ue.compile()}(),compile:function(Ue,fr,Qr,cn,nn){var _n=Te();_n.stats=_n.link(nn),Object.keys(fr.static).forEach(function(en){ei(_n,fr,en)}),Me.forEach(function(en){ei(_n,Ue,en)});var gn=Or(Ue,fr,Qr,cn,_n);return gn.shader.program&&(gn.shader.program.attributes.sort(function(en,wr){return en.name<wr.name?-1:1}),gn.shader.program.uniforms.sort(function(en,wr){return en.name<wr.name?-1:1})),sn(_n,gn),Un(_n,gn),wn(_n,gn),rt(_n.compile(),{destroy:function(){gn.shader.program.destroy()}})}}}function ot(he,je){for(var Re=0;Re<he.length;++Re)if(he[Re]===je)return Re;return-1}var rt=function(he,je){for(var Re=Object.keys(je),_r=0;_r<Re.length;++_r)he[Re[_r]]=je[Re[_r]];return he},ht=0,pt={DynamicVariable:U,define:function(he,je){return new U(he,M(je+""))},isDynamic:function(he){return typeof he=="function"&&!he._reglType||he instanceof U},unbox:E,accessor:M},yt={next:typeof requestAnimationFrame=="function"?function(he){return requestAnimationFrame(he)}:function(he){return setTimeout(he,16)},cancel:typeof cancelAnimationFrame=="function"?function(he){return cancelAnimationFrame(he)}:clearTimeout},xt=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},Ft=a();Ft.zero=a();var Et=function(he,je){var Re=1;je.ext_texture_filter_anisotropic&&(Re=he.getParameter(34047));var _r=1,tr=1;je.webgl_draw_buffers&&(_r=he.getParameter(34852),tr=he.getParameter(36063));var Gt=!!je.oes_texture_float;if(Gt){Gt=he.createTexture(),he.bindTexture(3553,Gt),he.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var re=he.createFramebuffer();if(he.bindFramebuffer(36160,re),he.framebufferTexture2D(36160,36064,3553,Gt,0),he.bindTexture(3553,null),he.checkFramebufferStatus(36160)!==36053)Gt=!1;else{he.viewport(0,0,1,1),he.clearColor(1,0,0,1),he.clear(16384);var fe=Ft.allocType(5126,4);he.readPixels(0,0,1,1,6408,5126,fe),he.getError()?Gt=!1:(he.deleteFramebuffer(re),he.deleteTexture(Gt),Gt=fe[0]===1),Ft.freeType(fe)}}return fe=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(fe=he.createTexture(),re=Ft.allocType(5121,36),he.activeTexture(33984),he.bindTexture(34067,fe),he.texImage2D(34069,0,6408,3,3,0,6408,5121,re),Ft.freeType(re),he.bindTexture(34067,null),he.deleteTexture(fe),fe=!he.getError()),{colorBits:[he.getParameter(3410),he.getParameter(3411),he.getParameter(3412),he.getParameter(3413)],depthBits:he.getParameter(3414),stencilBits:he.getParameter(3415),subpixelBits:he.getParameter(3408),extensions:Object.keys(je).filter(function(ye){return!!je[ye]}),maxAnisotropic:Re,maxDrawbuffers:_r,maxColorAttachments:tr,pointSizeDims:he.getParameter(33901),lineWidthDims:he.getParameter(33902),maxViewportDims:he.getParameter(3386),maxCombinedTextureUnits:he.getParameter(35661),maxCubeMapSize:he.getParameter(34076),maxRenderbufferSize:he.getParameter(34024),maxTextureUnits:he.getParameter(34930),maxTextureSize:he.getParameter(3379),maxAttributes:he.getParameter(34921),maxVertexUniforms:he.getParameter(36347),maxVertexTextureUnits:he.getParameter(35660),maxVaryingVectors:he.getParameter(36348),maxFragmentUniforms:he.getParameter(36349),glsl:he.getParameter(35724),renderer:he.getParameter(7937),vendor:he.getParameter(7936),version:he.getParameter(7938),readFloat:Gt,npotTextureCube:fe}},mt=function(he){return he instanceof Uint8Array||he instanceof Uint16Array||he instanceof Uint32Array||he instanceof Int8Array||he instanceof Int16Array||he instanceof Int32Array||he instanceof Float32Array||he instanceof Float64Array||he instanceof Uint8ClampedArray},gt=function(he){return Object.keys(he).map(function(je){return he[je]})},wt={shape:function(he){for(var je=[];he.length;he=he[0])je.push(he.length);return je},flatten:function(he,je,Re,_r){var tr=1;if(je.length)for(var Gt=0;Gt<je.length;++Gt)tr*=je[Gt];else tr=0;switch(Re=_r||Ft.allocType(Re,tr),je.length){case 0:break;case 1:for(_r=je[0],je=0;je<_r;++je)Re[je]=he[je];break;case 2:for(_r=je[0],je=je[1],Gt=tr=0;Gt<_r;++Gt)for(var re=he[Gt],fe=0;fe<je;++fe)Re[tr++]=re[fe];break;case 3:h(he,je[0],je[1],je[2],Re,0);break;default:y(he,je,0,Re,0)}return Re}},Pt={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Bt={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},kt={dynamic:35048,stream:35040,static:35044},jt=wt.flatten,Ht=wt.shape,Vt=[];Vt[5120]=1,Vt[5122]=2,Vt[5124]=4,Vt[5121]=1,Vt[5123]=2,Vt[5125]=4,Vt[5126]=4;var ee={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},te=new Float32Array(1),ae=new Uint32Array(te.buffer),le=[9984,9986,9985,9987],ce=[0,6409,6410,6407,6408],pe={};pe[6409]=pe[6406]=pe[6402]=1,pe[34041]=pe[6410]=2,pe[6407]=pe[35904]=3,pe[6408]=pe[35906]=4;var we=_("HTMLCanvasElement"),ve=_("OffscreenCanvas"),Mt=_("CanvasRenderingContext2D"),It=_("ImageBitmap"),Rt=_("HTMLImageElement"),zt=_("HTMLVideoElement"),Tt=Object.keys(Pt).concat([we,ve,Mt,It,Rt,zt]),ft=[];ft[5121]=1,ft[5126]=4,ft[36193]=2,ft[5123]=2,ft[5125]=4;var ut=[];ut[32854]=2,ut[32855]=2,ut[36194]=2,ut[34041]=4,ut[33776]=.5,ut[33777]=.5,ut[33778]=1,ut[33779]=1,ut[35986]=.5,ut[35987]=1,ut[34798]=1,ut[35840]=.5,ut[35841]=.25,ut[35842]=.5,ut[35843]=.25,ut[36196]=.5;var vt=[];vt[32854]=2,vt[32855]=2,vt[36194]=2,vt[33189]=2,vt[36168]=1,vt[34041]=4,vt[35907]=4,vt[34836]=16,vt[34842]=8,vt[34843]=6;var St=function(he,je,Re,_r,tr){function Gt(Ce){this.id=Le++,this.refCount=1,this.renderbuffer=Ce,this.format=32854,this.height=this.width=0,tr.profile&&(this.stats={size:0})}function re(Ce){var ze=Ce.renderbuffer;he.bindRenderbuffer(36161,null),he.deleteRenderbuffer(ze),Ce.renderbuffer=null,Ce.refCount=0,delete _e[Ce.id],_r.renderbufferCount--}var fe={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};je.ext_srgb&&(fe.srgba=35907),je.ext_color_buffer_half_float&&(fe.rgba16f=34842,fe.rgb16f=34843),je.webgl_color_buffer_float&&(fe.rgba32f=34836);var ye=[];Object.keys(fe).forEach(function(Ce){ye[fe[Ce]]=Ce});var Le=0,_e={};return Gt.prototype.decRef=function(){0>=--this.refCount&&re(this)},tr.profile&&(_r.getTotalRenderbufferSize=function(){var Ce=0;return Object.keys(_e).forEach(function(ze){Ce+=_e[ze].stats.size}),Ce}),{create:function(Ce,ze){function We(ir,xr){var Dt=0,Ut=0,Te=32854;if(typeof ir=="object"&&ir?("shape"in ir?(Ut=ir.shape,Dt=Ut[0]|0,Ut=Ut[1]|0):("radius"in ir&&(Dt=Ut=ir.radius|0),"width"in ir&&(Dt=ir.width|0),"height"in ir&&(Ut=ir.height|0)),"format"in ir&&(Te=fe[ir.format])):typeof ir=="number"?(Dt=ir|0,Ut=typeof xr=="number"?xr|0:Dt):ir||(Dt=Ut=1),Dt!==qe.width||Ut!==qe.height||Te!==qe.format)return We.width=qe.width=Dt,We.height=qe.height=Ut,qe.format=Te,he.bindRenderbuffer(36161,qe.renderbuffer),he.renderbufferStorage(36161,Te,Dt,Ut),tr.profile&&(qe.stats.size=vt[qe.format]*qe.width*qe.height),We.format=ye[qe.format],We}var qe=new Gt(he.createRenderbuffer());return _e[qe.id]=qe,_r.renderbufferCount++,We(Ce,ze),We.resize=function(ir,xr){var Dt=ir|0,Ut=xr|0||Dt;return Dt===qe.width&&Ut===qe.height||(We.width=qe.width=Dt,We.height=qe.height=Ut,he.bindRenderbuffer(36161,qe.renderbuffer),he.renderbufferStorage(36161,qe.format,Dt,Ut),tr.profile&&(qe.stats.size=vt[qe.format]*qe.width*qe.height)),We},We._reglType="renderbuffer",We._renderbuffer=qe,tr.profile&&(We.stats=qe.stats),We.destroy=function(){qe.decRef()},We},clear:function(){gt(_e).forEach(re)},restore:function(){gt(_e).forEach(function(Ce){Ce.renderbuffer=he.createRenderbuffer(),he.bindRenderbuffer(36161,Ce.renderbuffer),he.renderbufferStorage(36161,Ce.format,Ce.width,Ce.height)}),he.bindRenderbuffer(36161,null)}}},Ot=[];Ot[6408]=4,Ot[6407]=3;var Xt=[];Xt[5121]=1,Xt[5126]=4,Xt[36193]=2;var $t=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],de=["x","y","z","w"],Me="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Fe={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},De={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ae={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ve={cw:2304,ccw:2305},Qe=new G(!1,!1,!1,function(){}),Sr=function(he,je){function Re(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function _r(_e,Ce,ze){var We=re.pop()||new Re;We.startQueryIndex=_e,We.endQueryIndex=Ce,We.sum=0,We.stats=ze,fe.push(We)}if(!je.ext_disjoint_timer_query)return null;var tr=[],Gt=[],re=[],fe=[],ye=[],Le=[];return{beginQuery:function(_e){var Ce=tr.pop()||je.ext_disjoint_timer_query.createQueryEXT();je.ext_disjoint_timer_query.beginQueryEXT(35007,Ce),Gt.push(Ce),_r(Gt.length-1,Gt.length,_e)},endQuery:function(){je.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:_r,update:function(){var _e,Ce;if(_e=Gt.length,_e!==0){Le.length=Math.max(Le.length,_e+1),ye.length=Math.max(ye.length,_e+1),ye[0]=0;var ze=Le[0]=0;for(Ce=_e=0;Ce<Gt.length;++Ce){var We=Gt[Ce];je.ext_disjoint_timer_query.getQueryObjectEXT(We,34919)?(ze+=je.ext_disjoint_timer_query.getQueryObjectEXT(We,34918),tr.push(We)):Gt[_e++]=We,ye[Ce+1]=ze,Le[Ce+1]=_e}for(Gt.length=_e,Ce=_e=0;Ce<fe.length;++Ce){var ze=fe[Ce],qe=ze.startQueryIndex,We=ze.endQueryIndex;ze.sum+=ye[We]-ye[qe],qe=Le[qe],We=Le[We],We===qe?(ze.stats.gpuTime+=ze.sum/1e6,re.push(ze)):(ze.startQueryIndex=qe,ze.endQueryIndex=We,fe[_e++]=ze)}fe.length=_e}},getNumPendingQueries:function(){return Gt.length},clear:function(){tr.push.apply(tr,Gt);for(var _e=0;_e<tr.length;_e++)je.ext_disjoint_timer_query.deleteQueryEXT(tr[_e]);Gt.length=0,tr.length=0},restore:function(){Gt.length=0,tr.length=0}}};return function(he){function je(){if(Tn.length===0)Te&&Te.update(),Cr=null;else{Cr=yt.next(je),_e();for(var sn=Tn.length-1;0<=sn;--sn){var Yr=Tn[sn];Yr&&Yr(Je,null,0)}We.flush(),Te&&Te.update()}}function Re(){!Cr&&0<Tn.length&&(Cr=yt.next(je))}function _r(){Cr&&(yt.cancel(je),Cr=null)}function tr(sn){sn.preventDefault(),_r(),hr.forEach(function(Yr){Yr()})}function Gt(sn){We.getError(),ir.restore(),sr.restore(),Oe.restore(),lr.restore(),Or.restore(),Ir.restore(),cr.restore(),Te&&Te.restore(),Pr.procs.refresh(),Re(),dr.forEach(function(Yr){Yr()})}function re(sn){function Yr(ln,zn){var mn={},Mn={};return Object.keys(ln).forEach(function(On){var Xn=ln[On];if(pt.isDynamic(Xn))Mn[On]=pt.unbox(Xn,On);else{if(zn&&Array.isArray(Xn)){for(var gi=0;gi<Xn.length;++gi)if(pt.isDynamic(Xn[gi])){Mn[On]=pt.unbox(Xn,On);return}}mn[On]=Xn}}),{dynamic:Mn,static:mn}}function xn(ln){for(;Jr.length<ln;)Jr.push(null);return Jr}var wn=Yr(sn.context||{},!0),Un=Yr(sn.uniforms||{},!0),qn=Yr(sn.attributes||{},!1);sn=Yr(function(ln){function zn(Mn){if(Mn in mn){var On=mn[Mn];delete mn[Mn],Object.keys(On).forEach(function(Xn){mn[Mn+"."+Xn]=On[Xn]})}}var mn=rt({},ln);return delete mn.uniforms,delete mn.attributes,delete mn.context,delete mn.vao,"stencil"in mn&&mn.stencil.op&&(mn.stencil.opBack=mn.stencil.opFront=mn.stencil.op,delete mn.stencil.op),zn("blend"),zn("depth"),zn("cull"),zn("stencil"),zn("polygonOffset"),zn("scissor"),zn("sample"),"vao"in ln&&(mn.vao=ln.vao),mn}(sn),!1);var ei={gpuTime:0,cpuTime:0,count:0},Gn=Pr.compile(sn,qn,Un,wn,ei),Hn=Gn.draw,gr=Gn.batch,$r=Gn.scope,Jr=[];return rt(function(ln,zn){var mn;if(typeof ln=="function")return $r.call(this,null,ln,0);if(typeof zn=="function")if(typeof ln=="number")for(mn=0;mn<ln;++mn)$r.call(this,null,zn,mn);else if(Array.isArray(ln))for(mn=0;mn<ln.length;++mn)$r.call(this,ln[mn],zn,mn);else return $r.call(this,ln,zn,0);else if(typeof ln=="number"){if(0<ln)return gr.call(this,xn(ln|0),ln|0)}else if(Array.isArray(ln)){if(ln.length)return gr.call(this,ln,ln.length)}else return Hn.call(this,ln)},{stats:ei,destroy:function(){Gn.destroy()}})}function fe(sn,Yr){var xn=0;Pr.procs.poll();var wn=Yr.color;wn&&(We.clearColor(+wn[0]||0,+wn[1]||0,+wn[2]||0,+wn[3]||0),xn|=16384),"depth"in Yr&&(We.clearDepth(+Yr.depth),xn|=256),"stencil"in Yr&&(We.clearStencil(Yr.stencil|0),xn|=1024),We.clear(xn)}function ye(sn){return Tn.push(sn),Re(),{cancel:function(){function Yr(){var wn=ot(Tn,Yr);Tn[wn]=Tn[Tn.length-1],--Tn.length,0>=Tn.length&&_r()}var xn=ot(Tn,sn);Tn[xn]=Yr}}}function Le(){var sn=Zr.viewport,Yr=Zr.scissor_box;sn[0]=sn[1]=Yr[0]=Yr[1]=0,Je.viewportWidth=Je.framebufferWidth=Je.drawingBufferWidth=sn[2]=Yr[2]=We.drawingBufferWidth,Je.viewportHeight=Je.framebufferHeight=Je.drawingBufferHeight=sn[3]=Yr[3]=We.drawingBufferHeight}function _e(){Je.tick+=1,Je.time=ze(),Le(),Pr.procs.poll()}function Ce(){lr.refresh(),Le(),Pr.procs.refresh(),Te&&Te.update()}function ze(){return(xt()-Se)/1e3}if(he=e(he),!he)return null;var We=he.gl,qe=We.getContextAttributes();We.isContextLost();var ir=r(We,he);if(!ir)return null;var rn=i(),xr={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Dt=he.cachedCode||{},Ut=ir.extensions,Te=Sr(We,Ut),Se=xt(),$e=We.drawingBufferWidth,Be=We.drawingBufferHeight,Je={tick:0,time:0,viewportWidth:$e,viewportHeight:Be,framebufferWidth:$e,framebufferHeight:Be,drawingBufferWidth:$e,drawingBufferHeight:Be,pixelRatio:he.pixelRatio},$e={elements:null,primitive:4,count:-1,offset:0,instances:-1},Xe=Et(We,Ut),Oe=u(We,xr,he,function(sn){return cr.destroyBuffer(sn)}),ar=c(We,Ut,Oe,xr),cr=O(We,Ut,Xe,xr,Oe,ar,$e),sr=R(We,rn,xr,he),lr=I(We,Ut,Xe,function(){Pr.procs.poll()},Je,xr,he),Or=St(We,Ut,Xe,xr,he),Ir=z(We,Ut,Xe,lr,Or,xr),Pr=Y(We,rn,Ut,Xe,Oe,ar,lr,Ir,{},cr,sr,$e,Je,Te,Dt,he),rn=C(We,Ir,Pr.procs.poll,Je),Zr=Pr.next,yn=We.canvas,Tn=[],hr=[],dr=[],Lr=[he.onDestroy],Cr=null;yn&&(yn.addEventListener("webglcontextlost",tr,!1),yn.addEventListener("webglcontextrestored",Gt,!1));var Hr=Ir.setFBO=re({framebuffer:pt.define.call(null,1,"framebuffer")});return Ce(),qe=rt(re,{clear:function(sn){if("framebuffer"in sn)if(sn.framebuffer&&sn.framebuffer_reglType==="framebufferCube")for(var Yr=0;6>Yr;++Yr)Hr(rt({framebuffer:sn.framebuffer.faces[Yr]},sn),fe);else Hr(sn,fe);else fe(null,sn)},prop:pt.define.bind(null,1),context:pt.define.bind(null,2),this:pt.define.bind(null,3),draw:re({}),buffer:function(sn){return Oe.create(sn,34962,!1,!1)},elements:function(sn){return ar.create(sn,!1)},texture:lr.create2D,cube:lr.createCube,renderbuffer:Or.create,framebuffer:Ir.create,framebufferCube:Ir.createCube,vao:cr.createVAO,attributes:qe,frame:ye,on:function(sn,Yr){var xn;switch(sn){case"frame":return ye(Yr);case"lost":xn=hr;break;case"restore":xn=dr;break;case"destroy":xn=Lr}return xn.push(Yr),{cancel:function(){for(var wn=0;wn<xn.length;++wn)if(xn[wn]===Yr){xn[wn]=xn[xn.length-1],xn.pop();break}}}},limits:Xe,hasExtension:function(sn){return 0<=Xe.extensions.indexOf(sn.toLowerCase())},read:rn,destroy:function(){Tn.length=0,_r(),yn&&(yn.removeEventListener("webglcontextlost",tr),yn.removeEventListener("webglcontextrestored",Gt)),sr.clear(),Ir.clear(),Or.clear(),cr.clear(),lr.clear(),ar.clear(),Oe.clear(),Te&&Te.clear(),Lr.forEach(function(sn){sn()})},_gl:We,_refresh:Ce,poll:function(){_e(),Te&&Te.update()},now:ze,stats:xr,getCachedCode:function(){return Dt},preloadCachedCode:function(sn){Object.entries(sn).forEach(function(Yr){Dt[Yr[0]]=Yr[1]})}}),he.onDone(null,qe),qe}})},71665:function($,U,t){var M=t(12856),E=M.Buffer;function i(A,g){for(var v in A)g[v]=A[v]}E.from&&E.alloc&&E.allocUnsafe&&E.allocUnsafeSlow?$.exports=M:(i(M,U),U.Buffer=S);function S(A,g,v){return E(A,g,v)}S.prototype=Object.create(E.prototype),i(E,S),S.from=function(A,g,v){if(typeof A=="number")throw new TypeError("Argument must not be a number");return E(A,g,v)},S.alloc=function(A,g,v){if(typeof A!="number")throw new TypeError("Argument must be a number");var e=E(A);return g!==void 0?typeof v=="string"?e.fill(g,v):e.fill(g):e.fill(0),e},S.allocUnsafe=function(A){if(typeof A!="number")throw new TypeError("Argument must be a number");return E(A)},S.allocUnsafeSlow=function(A){if(typeof A!="number")throw new TypeError("Argument must be a number");return M.SlowBuffer(A)}},21630:function($,U,t){$.exports=i;var M=t(15398).EventEmitter,E=t(42018);E(i,M),i.Readable=t(40410),i.Writable=t(37493),i.Duplex=t(37865),i.Transform=t(74308),i.PassThrough=t(66897),i.finished=t(12726),i.pipeline=t(10168),i.Stream=i;function i(){M.call(this)}i.prototype.pipe=function(S,A){var g=this;function v(h){S.writable&&S.write(h)===!1&&g.pause&&g.pause()}g.on("data",v);function e(){g.readable&&g.resume&&g.resume()}S.on("drain",e),!S._isStdio&&(!A||A.end!==!1)&&(g.on("end",f),g.on("close",n));var r=!1;function f(){r||(r=!0,S.end())}function n(){r||(r=!0,typeof S.destroy=="function"&&S.destroy())}function a(h){if(o(),M.listenerCount(this,"error")===0)throw h}g.on("error",a),S.on("error",a);function o(){g.removeListener("data",v),S.removeListener("drain",e),g.removeListener("end",f),g.removeListener("close",n),g.removeListener("error",a),S.removeListener("error",a),g.removeListener("end",o),g.removeListener("close",o),S.removeListener("close",o)}return g.on("end",o),g.on("close",o),S.on("close",o),S.emit("pipe",g),S}},74322:function($){function U(g,v){g.prototype=Object.create(v.prototype),g.prototype.constructor=g,g.__proto__=v}var t={};function M(g,v,e){e||(e=Error);function r(n,a,o){return typeof v=="string"?v:v(n,a,o)}var f=function(n){U(a,n);function a(o,h,y){return n.call(this,r(o,h,y))||this}return a}(e);f.prototype.name=e.name,f.prototype.code=g,t[g]=f}function E(g,v){if(Array.isArray(g)){var e=g.length;return g=g.map(function(r){return String(r)}),e>2?"one of ".concat(v," ").concat(g.slice(0,e-1).join(", "),", or ")+g[e-1]:e===2?"one of ".concat(v," ").concat(g[0]," or ").concat(g[1]):"of ".concat(v," ").concat(g[0])}else return"of ".concat(v," ").concat(String(g))}function i(g,v,e){return g.substr(!e||e<0?0:+e,v.length)===v}function S(g,v,e){return(e===void 0||e>g.length)&&(e=g.length),g.substring(e-v.length,e)===v}function A(g,v,e){return typeof e!="number"&&(e=0),e+v.length>g.length?!1:g.indexOf(v,e)!==-1}M("ERR_INVALID_OPT_VALUE",function(g,v){return'The value "'+v+'" is invalid for option "'+g+'"'},TypeError),M("ERR_INVALID_ARG_TYPE",function(g,v,e){var r;typeof v=="string"&&i(v,"not ")?(r="must not be",v=v.replace(/^not /,"")):r="must be";var f;if(S(g," argument"))f="The ".concat(g," ").concat(r," ").concat(E(v,"type"));else{var n=A(g,".")?"property":"argument";f='The "'.concat(g,'" ').concat(n," ").concat(r," ").concat(E(v,"type"))}return f+=". Received type ".concat(typeof e),f},TypeError),M("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),M("ERR_METHOD_NOT_IMPLEMENTED",function(g){return"The "+g+" method is not implemented"}),M("ERR_STREAM_PREMATURE_CLOSE","Premature close"),M("ERR_STREAM_DESTROYED",function(g){return"Cannot call "+g+" after a stream was destroyed"}),M("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),M("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),M("ERR_STREAM_WRITE_AFTER_END","write after end"),M("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),M("ERR_UNKNOWN_ENCODING",function(g){return"Unknown encoding: "+g},TypeError),M("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),$.exports.q=t},37865:function($,U,t){var M=t(90386),E=Object.keys||function(n){var a=[];for(var o in n)a.push(o);return a};$.exports=e;var i=t(40410),S=t(37493);t(42018)(e,i);for(var A=E(S.prototype),g=0;g<A.length;g++){var v=A[g];e.prototype[v]||(e.prototype[v]=S.prototype[v])}function e(n){if(!(this instanceof e))return new e(n);i.call(this,n),S.call(this,n),this.allowHalfOpen=!0,n&&(n.readable===!1&&(this.readable=!1),n.writable===!1&&(this.writable=!1),n.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",r)))}Object.defineProperty(e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function r(){this._writableState.ended||M.nextTick(f,this)}function f(n){n.end()}Object.defineProperty(e.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(n){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=n,this._writableState.destroyed=n)}})},66897:function($,U,t){$.exports=E;var M=t(74308);t(42018)(E,M);function E(i){if(!(this instanceof E))return new E(i);M.call(this,i)}E.prototype._transform=function(i,S,A){A(null,i)}},40410:function($,U,t){var M=t(90386);$.exports=d;var E;d.ReadableState=l,t(15398).EventEmitter;var i=function(X,Y){return X.listeners(Y).length},S=t(71405),A=t(12856).Buffer,g=t.g.Uint8Array||function(){};function v(X){return A.from(X)}function e(X){return A.isBuffer(X)||X instanceof g}var r=t(40964),f;r&&r.debuglog?f=r.debuglog("stream"):f=function(){};var n=t(31125),a=t(65756),o=t(56306),h=o.getHighWaterMark,y=t(74322).q,p=y.ERR_INVALID_ARG_TYPE,x=y.ERR_STREAM_PUSH_AFTER_EOF,s=y.ERR_METHOD_NOT_IMPLEMENTED,u=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,c,T,k;t(42018)(d,S);var _=a.errorOrDestroy,b=["error","close","destroy","pause","resume"];function P(X,Y,ot){if(typeof X.prependListener=="function")return X.prependListener(Y,ot);!X._events||!X._events[Y]?X.on(Y,ot):Array.isArray(X._events[Y])?X._events[Y].unshift(ot):X._events[Y]=[ot,X._events[Y]]}function l(X,Y,ot){E=E||t(37865),X=X||{},typeof ot!="boolean"&&(ot=Y instanceof E),this.objectMode=!!X.objectMode,ot&&(this.objectMode=this.objectMode||!!X.readableObjectMode),this.highWaterMark=h(this,X,"readableHighWaterMark",ot),this.buffer=new n,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=X.emitClose!==!1,this.autoDestroy=!!X.autoDestroy,this.destroyed=!1,this.defaultEncoding=X.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,X.encoding&&(c||(c=t(68019).s),this.decoder=new c(X.encoding),this.encoding=X.encoding)}function d(X){if(E=E||t(37865),!(this instanceof d))return new d(X);var Y=this instanceof E;this._readableState=new l(X,this,Y),this.readable=!0,X&&(typeof X.read=="function"&&(this._read=X.read),typeof X.destroy=="function"&&(this._destroy=X.destroy)),S.call(this)}Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(X){this._readableState&&(this._readableState.destroyed=X)}}),d.prototype.destroy=a.destroy,d.prototype._undestroy=a.undestroy,d.prototype._destroy=function(X,Y){Y(X)},d.prototype.push=function(X,Y){var ot=this._readableState,rt;return ot.objectMode?rt=!0:typeof X=="string"&&(Y=Y||ot.defaultEncoding,Y!==ot.encoding&&(X=A.from(X,Y),Y=""),rt=!0),L(this,X,Y,!1,rt)},d.prototype.unshift=function(X){return L(this,X,null,!0,!1)};function L(X,Y,ot,rt,ht){f("readableAddChunk",Y);var pt=X._readableState;if(Y===null)pt.reading=!1,R(X,pt);else{var yt;if(ht||(yt=I(pt,Y)),yt)_(X,yt);else if(pt.objectMode||Y&&Y.length>0)if(typeof Y!="string"&&!pt.objectMode&&Object.getPrototypeOf(Y)!==A.prototype&&(Y=v(Y)),rt)pt.endEmitted?_(X,new u):w(X,pt,Y,!0);else if(pt.ended)_(X,new x);else{if(pt.destroyed)return!1;pt.reading=!1,pt.decoder&&!ot?(Y=pt.decoder.write(Y),pt.objectMode||Y.length!==0?w(X,pt,Y,!1):N(X,pt)):w(X,pt,Y,!1)}else rt||(pt.reading=!1,N(X,pt))}return!pt.ended&&(pt.length<pt.highWaterMark||pt.length===0)}function w(X,Y,ot,rt){Y.flowing&&Y.length===0&&!Y.sync?(Y.awaitDrain=0,X.emit("data",ot)):(Y.length+=Y.objectMode?1:ot.length,rt?Y.buffer.unshift(ot):Y.buffer.push(ot),Y.needReadable&&C(X)),N(X,Y)}function I(X,Y){var ot;return!e(Y)&&typeof Y!="string"&&Y!==void 0&&!X.objectMode&&(ot=new p("chunk",["string","Buffer","Uint8Array"],Y)),ot}d.prototype.isPaused=function(){return this._readableState.flowing===!1},d.prototype.setEncoding=function(X){c||(c=t(68019).s);var Y=new c(X);this._readableState.decoder=Y,this._readableState.encoding=this._readableState.decoder.encoding;for(var ot=this._readableState.buffer.head,rt="";ot!==null;)rt+=Y.write(ot.data),ot=ot.next;return this._readableState.buffer.clear(),rt!==""&&this._readableState.buffer.push(rt),this._readableState.length=rt.length,this};var z=1073741824;function B(X){return X>=z?X=z:(X--,X|=X>>>1,X|=X>>>2,X|=X>>>4,X|=X>>>8,X|=X>>>16,X++),X}function O(X,Y){return X<=0||Y.length===0&&Y.ended?0:Y.objectMode?1:X!==X?Y.flowing&&Y.length?Y.buffer.head.data.length:Y.length:(X>Y.highWaterMark&&(Y.highWaterMark=B(X)),X<=Y.length?X:Y.ended?Y.length:(Y.needReadable=!0,0))}d.prototype.read=function(X){f("read",X),X=parseInt(X,10);var Y=this._readableState,ot=X;if(X!==0&&(Y.emittedReadable=!1),X===0&&Y.needReadable&&((Y.highWaterMark!==0?Y.length>=Y.highWaterMark:Y.length>0)||Y.ended))return f("read: emitReadable",Y.length,Y.ended),Y.length===0&&Y.ended?G(this):C(this),null;if(X=O(X,Y),X===0&&Y.ended)return Y.length===0&&G(this),null;var rt=Y.needReadable;f("need readable",rt),(Y.length===0||Y.length-X<Y.highWaterMark)&&(rt=!0,f("length less than watermark",rt)),Y.ended||Y.reading?(rt=!1,f("reading or ended",rt)):rt&&(f("do read"),Y.reading=!0,Y.sync=!0,Y.length===0&&(Y.needReadable=!0),this._read(Y.highWaterMark),Y.sync=!1,Y.reading||(X=O(ot,Y)));var ht;return X>0?ht=Z(X,Y):ht=null,ht===null?(Y.needReadable=Y.length<=Y.highWaterMark,X=0):(Y.length-=X,Y.awaitDrain=0),Y.length===0&&(Y.ended||(Y.needReadable=!0),ot!==X&&Y.ended&&G(this)),ht!==null&&this.emit("data",ht),ht};function R(X,Y){if(f("onEofChunk"),!Y.ended){if(Y.decoder){var ot=Y.decoder.end();ot&&ot.length&&(Y.buffer.push(ot),Y.length+=Y.objectMode?1:ot.length)}Y.ended=!0,Y.sync?C(X):(Y.needReadable=!1,Y.emittedReadable||(Y.emittedReadable=!0,F(X)))}}function C(X){var Y=X._readableState;f("emitReadable",Y.needReadable,Y.emittedReadable),Y.needReadable=!1,Y.emittedReadable||(f("emitReadable",Y.flowing),Y.emittedReadable=!0,M.nextTick(F,X))}function F(X){var Y=X._readableState;f("emitReadable_",Y.destroyed,Y.length,Y.ended),!Y.destroyed&&(Y.length||Y.ended)&&(X.emit("readable"),Y.emittedReadable=!1),Y.needReadable=!Y.flowing&&!Y.ended&&Y.length<=Y.highWaterMark,W(X)}function N(X,Y){Y.readingMore||(Y.readingMore=!0,M.nextTick(V,X,Y))}function V(X,Y){for(;!Y.reading&&!Y.ended&&(Y.length<Y.highWaterMark||Y.flowing&&Y.length===0);){var ot=Y.length;if(f("maybeReadMore read 0"),X.read(0),ot===Y.length)break}Y.readingMore=!1}d.prototype._read=function(X){_(this,new s("_read()"))},d.prototype.pipe=function(X,Y){var ot=this,rt=this._readableState;switch(rt.pipesCount){case 0:rt.pipes=X;break;case 1:rt.pipes=[rt.pipes,X];break;default:rt.pipes.push(X);break}rt.pipesCount+=1,f("pipe count=%d opts=%j",rt.pipesCount,Y);var ht=(!Y||Y.end!==!1)&&X!==M.stdout&&X!==M.stderr,pt=ht?xt:kt;rt.endEmitted?M.nextTick(pt):ot.once("end",pt),X.on("unpipe",yt);function yt(jt,Ht){f("onunpipe"),jt===ot&&Ht&&Ht.hasUnpiped===!1&&(Ht.hasUnpiped=!0,mt())}function xt(){f("onend"),X.end()}var Ft=K(ot);X.on("drain",Ft);var Et=!1;function mt(){f("cleanup"),X.removeListener("close",Pt),X.removeListener("finish",Bt),X.removeListener("drain",Ft),X.removeListener("error",wt),X.removeListener("unpipe",yt),ot.removeListener("end",xt),ot.removeListener("end",kt),ot.removeListener("data",gt),Et=!0,rt.awaitDrain&&(!X._writableState||X._writableState.needDrain)&&Ft()}ot.on("data",gt);function gt(jt){f("ondata");var Ht=X.write(jt);f("dest.write",Ht),Ht===!1&&((rt.pipesCount===1&&rt.pipes===X||rt.pipesCount>1&&nt(rt.pipes,X)!==-1)&&!Et&&(f("false write response, pause",rt.awaitDrain),rt.awaitDrain++),ot.pause())}function wt(jt){f("onerror",jt),kt(),X.removeListener("error",wt),i(X,"error")===0&&_(X,jt)}P(X,"error",wt);function Pt(){X.removeListener("finish",Bt),kt()}X.once("close",Pt);function Bt(){f("onfinish"),X.removeListener("close",Pt),kt()}X.once("finish",Bt);function kt(){f("unpipe"),ot.unpipe(X)}return X.emit("pipe",ot),rt.flowing||(f("pipe resume"),ot.resume()),X};function K(X){return function(){var Y=X._readableState;f("pipeOnDrain",Y.awaitDrain),Y.awaitDrain&&Y.awaitDrain--,Y.awaitDrain===0&&i(X,"data")&&(Y.flowing=!0,W(X))}}d.prototype.unpipe=function(X){var Y=this._readableState,ot={hasUnpiped:!1};if(Y.pipesCount===0)return this;if(Y.pipesCount===1)return X&&X!==Y.pipes?this:(X||(X=Y.pipes),Y.pipes=null,Y.pipesCount=0,Y.flowing=!1,X&&X.emit("unpipe",this,ot),this);if(!X){var rt=Y.pipes,ht=Y.pipesCount;Y.pipes=null,Y.pipesCount=0,Y.flowing=!1;for(var pt=0;pt<ht;pt++)rt[pt].emit("unpipe",this,{hasUnpiped:!1});return this}var yt=nt(Y.pipes,X);return yt===-1?this:(Y.pipes.splice(yt,1),Y.pipesCount-=1,Y.pipesCount===1&&(Y.pipes=Y.pipes[0]),X.emit("unpipe",this,ot),this)},d.prototype.on=function(X,Y){var ot=S.prototype.on.call(this,X,Y),rt=this._readableState;return X==="data"?(rt.readableListening=this.listenerCount("readable")>0,rt.flowing!==!1&&this.resume()):X==="readable"&&!rt.endEmitted&&!rt.readableListening&&(rt.readableListening=rt.needReadable=!0,rt.flowing=!1,rt.emittedReadable=!1,f("on readable",rt.length,rt.reading),rt.length?C(this):rt.reading||M.nextTick(at,this)),ot},d.prototype.addListener=d.prototype.on,d.prototype.removeListener=function(X,Y){var ot=S.prototype.removeListener.call(this,X,Y);return X==="readable"&&M.nextTick(Q,this),ot},d.prototype.removeAllListeners=function(X){var Y=S.prototype.removeAllListeners.apply(this,arguments);return(X==="readable"||X===void 0)&&M.nextTick(Q,this),Y};function Q(X){var Y=X._readableState;Y.readableListening=X.listenerCount("readable")>0,Y.resumeScheduled&&!Y.paused?Y.flowing=!0:X.listenerCount("data")>0&&X.resume()}function at(X){f("readable nexttick read 0"),X.read(0)}d.prototype.resume=function(){var X=this._readableState;return X.flowing||(f("resume"),X.flowing=!X.readableListening,it(this,X)),X.paused=!1,this};function it(X,Y){Y.resumeScheduled||(Y.resumeScheduled=!0,M.nextTick(q,X,Y))}function q(X,Y){f("resume",Y.reading),Y.reading||X.read(0),Y.resumeScheduled=!1,X.emit("resume"),W(X),Y.flowing&&!Y.reading&&X.read(0)}d.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function W(X){var Y=X._readableState;for(f("flow",Y.flowing);Y.flowing&&X.read()!==null;);}d.prototype.wrap=function(X){var Y=this,ot=this._readableState,rt=!1;X.on("end",function(){if(f("wrapped end"),ot.decoder&&!ot.ended){var yt=ot.decoder.end();yt&&yt.length&&Y.push(yt)}Y.push(null)}),X.on("data",function(yt){if(f("wrapped data"),ot.decoder&&(yt=ot.decoder.write(yt)),!(ot.objectMode&&yt==null)&&!(!ot.objectMode&&(!yt||!yt.length))){var xt=Y.push(yt);xt||(rt=!0,X.pause())}});for(var ht in X)this[ht]===void 0&&typeof X[ht]=="function"&&(this[ht]=function(yt){return function(){return X[yt].apply(X,arguments)}}(ht));for(var pt=0;pt<b.length;pt++)X.on(b[pt],this.emit.bind(this,b[pt]));return this._read=function(yt){f("wrapped _read",yt),rt&&(rt=!1,X.resume())},this},typeof Symbol=="function"&&(d.prototype[Symbol.asyncIterator]=function(){return T===void 0&&(T=t(68221)),T(this)}),Object.defineProperty(d.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(d.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(d.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(X){this._readableState&&(this._readableState.flowing=X)}}),d._fromList=Z,Object.defineProperty(d.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Z(X,Y){if(Y.length===0)return null;var ot;return Y.objectMode?ot=Y.buffer.shift():!X||X>=Y.length?(Y.decoder?ot=Y.buffer.join(""):Y.buffer.length===1?ot=Y.buffer.first():ot=Y.buffer.concat(Y.length),Y.buffer.clear()):ot=Y.buffer.consume(X,Y.decoder),ot}function G(X){var Y=X._readableState;f("endReadable",Y.endEmitted),Y.endEmitted||(Y.ended=!0,M.nextTick(et,Y,X))}function et(X,Y){if(f("endReadableNT",X.endEmitted,X.length),!X.endEmitted&&X.length===0&&(X.endEmitted=!0,Y.readable=!1,Y.emit("end"),X.autoDestroy)){var ot=Y._writableState;(!ot||ot.autoDestroy&&ot.finished)&&Y.destroy()}}typeof Symbol=="function"&&(d.from=function(X,Y){return k===void 0&&(k=t(31748)),k(d,X,Y)});function nt(X,Y){for(var ot=0,rt=X.length;ot<rt;ot++)if(X[ot]===Y)return ot;return-1}},74308:function($,U,t){$.exports=e;var M=t(74322).q,E=M.ERR_METHOD_NOT_IMPLEMENTED,i=M.ERR_MULTIPLE_CALLBACK,S=M.ERR_TRANSFORM_ALREADY_TRANSFORMING,A=M.ERR_TRANSFORM_WITH_LENGTH_0,g=t(37865);t(42018)(e,g);function v(n,a){var o=this._transformState;o.transforming=!1;var h=o.writecb;if(h===null)return this.emit("error",new i);o.writechunk=null,o.writecb=null,a!=null&&this.push(a),h(n);var y=this._readableState;y.reading=!1,(y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}function e(n){if(!(this instanceof e))return new e(n);g.call(this,n),this._transformState={afterTransform:v.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,n&&(typeof n.transform=="function"&&(this._transform=n.transform),typeof n.flush=="function"&&(this._flush=n.flush)),this.on("prefinish",r)}function r(){var n=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(a,o){f(n,a,o)}):f(this,null,null)}e.prototype.push=function(n,a){return this._transformState.needTransform=!1,g.prototype.push.call(this,n,a)},e.prototype._transform=function(n,a,o){o(new E("_transform()"))},e.prototype._write=function(n,a,o){var h=this._transformState;if(h.writecb=o,h.writechunk=n,h.writeencoding=a,!h.transforming){var y=this._readableState;(h.needTransform||y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}},e.prototype._read=function(n){var a=this._transformState;a.writechunk!==null&&!a.transforming?(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform)):a.needTransform=!0},e.prototype._destroy=function(n,a){g.prototype._destroy.call(this,n,function(o){a(o)})};function f(n,a,o){if(a)return n.emit("error",a);if(o!=null&&n.push(o),n._writableState.length)throw new A;if(n._transformState.transforming)throw new S;return n.push(null)}},37493:function($,U,t){var M=t(90386);$.exports=l;function E(W){var Z=this;this.next=null,this.entry=null,this.finish=function(){q(Z,W)}}var i;l.WritableState=b;var S={deprecate:t(20588)},A=t(71405),g=t(12856).Buffer,v=t.g.Uint8Array||function(){};function e(W){return g.from(W)}function r(W){return g.isBuffer(W)||W instanceof v}var f=t(65756),n=t(56306),a=n.getHighWaterMark,o=t(74322).q,h=o.ERR_INVALID_ARG_TYPE,y=o.ERR_METHOD_NOT_IMPLEMENTED,p=o.ERR_MULTIPLE_CALLBACK,x=o.ERR_STREAM_CANNOT_PIPE,s=o.ERR_STREAM_DESTROYED,u=o.ERR_STREAM_NULL_VALUES,c=o.ERR_STREAM_WRITE_AFTER_END,T=o.ERR_UNKNOWN_ENCODING,k=f.errorOrDestroy;t(42018)(l,A);function _(){}function b(W,Z,G){i=i||t(37865),W=W||{},typeof G!="boolean"&&(G=Z instanceof i),this.objectMode=!!W.objectMode,G&&(this.objectMode=this.objectMode||!!W.writableObjectMode),this.highWaterMark=a(this,W,"writableHighWaterMark",G),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var et=W.decodeStrings===!1;this.decodeStrings=!et,this.defaultEncoding=W.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(nt){R(Z,nt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=W.emitClose!==!1,this.autoDestroy=!!W.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new E(this)}b.prototype.getBuffer=function(){for(var W=this.bufferedRequest,Z=[];W;)Z.push(W),W=W.next;return Z},function(){try{Object.defineProperty(b.prototype,"buffer",{get:S.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var P;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(P=Function.prototype[Symbol.hasInstance],Object.defineProperty(l,Symbol.hasInstance,{value:function(W){return P.call(this,W)?!0:this!==l?!1:W&&W._writableState instanceof b}})):P=function(W){return W instanceof this};function l(W){i=i||t(37865);var Z=this instanceof i;if(!Z&&!P.call(l,this))return new l(W);this._writableState=new b(W,this,Z),this.writable=!0,W&&(typeof W.write=="function"&&(this._write=W.write),typeof W.writev=="function"&&(this._writev=W.writev),typeof W.destroy=="function"&&(this._destroy=W.destroy),typeof W.final=="function"&&(this._final=W.final)),A.call(this)}l.prototype.pipe=function(){k(this,new x)};function d(W,Z){var G=new c;k(W,G),M.nextTick(Z,G)}function L(W,Z,G,et){var nt;return G===null?nt=new u:typeof G!="string"&&!Z.objectMode&&(nt=new h("chunk",["string","Buffer"],G)),nt?(k(W,nt),M.nextTick(et,nt),!1):!0}l.prototype.write=function(W,Z,G){var et=this._writableState,nt=!1,X=!et.objectMode&&r(W);return X&&!g.isBuffer(W)&&(W=e(W)),typeof Z=="function"&&(G=Z,Z=null),X?Z="buffer":Z||(Z=et.defaultEncoding),typeof G!="function"&&(G=_),et.ending?d(this,G):(X||L(this,et,W,G))&&(et.pendingcb++,nt=I(this,et,X,W,Z,G)),nt},l.prototype.cork=function(){this._writableState.corked++},l.prototype.uncork=function(){var W=this._writableState;W.corked&&(W.corked--,!W.writing&&!W.corked&&!W.bufferProcessing&&W.bufferedRequest&&N(this,W))},l.prototype.setDefaultEncoding=function(W){if(typeof W=="string"&&(W=W.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((W+"").toLowerCase())>-1))throw new T(W);return this._writableState.defaultEncoding=W,this},Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function w(W,Z,G){return!W.objectMode&&W.decodeStrings!==!1&&typeof Z=="string"&&(Z=g.from(Z,G)),Z}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function I(W,Z,G,et,nt,X){if(!G){var Y=w(Z,et,nt);et!==Y&&(G=!0,nt="buffer",et=Y)}var ot=Z.objectMode?1:et.length;Z.length+=ot;var rt=Z.length<Z.highWaterMark;if(rt||(Z.needDrain=!0),Z.writing||Z.corked){var ht=Z.lastBufferedRequest;Z.lastBufferedRequest={chunk:et,encoding:nt,isBuf:G,callback:X,next:null},ht?ht.next=Z.lastBufferedRequest:Z.bufferedRequest=Z.lastBufferedRequest,Z.bufferedRequestCount+=1}else z(W,Z,!1,ot,et,nt,X);return rt}function z(W,Z,G,et,nt,X,Y){Z.writelen=et,Z.writecb=Y,Z.writing=!0,Z.sync=!0,Z.destroyed?Z.onwrite(new s("write")):G?W._writev(nt,Z.onwrite):W._write(nt,X,Z.onwrite),Z.sync=!1}function B(W,Z,G,et,nt){--Z.pendingcb,G?(M.nextTick(nt,et),M.nextTick(at,W,Z),W._writableState.errorEmitted=!0,k(W,et)):(nt(et),W._writableState.errorEmitted=!0,k(W,et),at(W,Z))}function O(W){W.writing=!1,W.writecb=null,W.length-=W.writelen,W.writelen=0}function R(W,Z){var G=W._writableState,et=G.sync,nt=G.writecb;if(typeof nt!="function")throw new p;if(O(G),Z)B(W,G,et,Z,nt);else{var X=V(G)||W.destroyed;!X&&!G.corked&&!G.bufferProcessing&&G.bufferedRequest&&N(W,G),et?M.nextTick(C,W,G,X,nt):C(W,G,X,nt)}}function C(W,Z,G,et){G||F(W,Z),Z.pendingcb--,et(),at(W,Z)}function F(W,Z){Z.length===0&&Z.needDrain&&(Z.needDrain=!1,W.emit("drain"))}function N(W,Z){Z.bufferProcessing=!0;var G=Z.bufferedRequest;if(W._writev&&G&&G.next){var et=Z.bufferedRequestCount,nt=new Array(et),X=Z.corkedRequestsFree;X.entry=G;for(var Y=0,ot=!0;G;)nt[Y]=G,G.isBuf||(ot=!1),G=G.next,Y+=1;nt.allBuffers=ot,z(W,Z,!0,Z.length,nt,"",X.finish),Z.pendingcb++,Z.lastBufferedRequest=null,X.next?(Z.corkedRequestsFree=X.next,X.next=null):Z.corkedRequestsFree=new E(Z),Z.bufferedRequestCount=0}else{for(;G;){var rt=G.chunk,ht=G.encoding,pt=G.callback,yt=Z.objectMode?1:rt.length;if(z(W,Z,!1,yt,rt,ht,pt),G=G.next,Z.bufferedRequestCount--,Z.writing)break}G===null&&(Z.lastBufferedRequest=null)}Z.bufferedRequest=G,Z.bufferProcessing=!1}l.prototype._write=function(W,Z,G){G(new y("_write()"))},l.prototype._writev=null,l.prototype.end=function(W,Z,G){var et=this._writableState;return typeof W=="function"?(G=W,W=null,Z=null):typeof Z=="function"&&(G=Z,Z=null),W!=null&&this.write(W,Z),et.corked&&(et.corked=1,this.uncork()),et.ending||it(this,et,G),this},Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function V(W){return W.ending&&W.length===0&&W.bufferedRequest===null&&!W.finished&&!W.writing}function K(W,Z){W._final(function(G){Z.pendingcb--,G&&k(W,G),Z.prefinished=!0,W.emit("prefinish"),at(W,Z)})}function Q(W,Z){!Z.prefinished&&!Z.finalCalled&&(typeof W._final=="function"&&!Z.destroyed?(Z.pendingcb++,Z.finalCalled=!0,M.nextTick(K,W,Z)):(Z.prefinished=!0,W.emit("prefinish")))}function at(W,Z){var G=V(Z);if(G&&(Q(W,Z),Z.pendingcb===0&&(Z.finished=!0,W.emit("finish"),Z.autoDestroy))){var et=W._readableState;(!et||et.autoDestroy&&et.endEmitted)&&W.destroy()}return G}function it(W,Z,G){Z.ending=!0,at(W,Z),G&&(Z.finished?M.nextTick(G):W.once("finish",G)),Z.ended=!0,W.writable=!1}function q(W,Z,G){var et=W.entry;for(W.entry=null;et;){var nt=et.callback;Z.pendingcb--,nt(G),et=et.next}Z.corkedRequestsFree.next=W}Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(W){this._writableState&&(this._writableState.destroyed=W)}}),l.prototype.destroy=f.destroy,l.prototype._undestroy=f.undestroy,l.prototype._destroy=function(W,Z){Z(W)}},68221:function($,U,t){var M=t(90386),E;function i(u,c,T){return c in u?Object.defineProperty(u,c,{value:T,enumerable:!0,configurable:!0,writable:!0}):u[c]=T,u}var S=t(12726),A=Symbol("lastResolve"),g=Symbol("lastReject"),v=Symbol("error"),e=Symbol("ended"),r=Symbol("lastPromise"),f=Symbol("handlePromise"),n=Symbol("stream");function a(u,c){return{value:u,done:c}}function o(u){var c=u[A];if(c!==null){var T=u[n].read();T!==null&&(u[r]=null,u[A]=null,u[g]=null,c(a(T,!1)))}}function h(u){M.nextTick(o,u)}function y(u,c){return function(T,k){u.then(function(){if(c[e]){T(a(void 0,!0));return}c[f](T,k)},k)}}var p=Object.getPrototypeOf(function(){}),x=Object.setPrototypeOf((E={get stream(){return this[n]},next:function(){var u=this,c=this[v];if(c!==null)return Promise.reject(c);if(this[e])return Promise.resolve(a(void 0,!0));if(this[n].destroyed)return new Promise(function(b,P){M.nextTick(function(){u[v]?P(u[v]):b(a(void 0,!0))})});var T=this[r],k;if(T)k=new Promise(y(T,this));else{var _=this[n].read();if(_!==null)return Promise.resolve(a(_,!1));k=new Promise(this[f])}return this[r]=k,k}},i(E,Symbol.asyncIterator,function(){return this}),i(E,"return",function(){var u=this;return new Promise(function(c,T){u[n].destroy(null,function(k){if(k){T(k);return}c(a(void 0,!0))})})}),E),p),s=function(u){var c,T=Object.create(x,(c={},i(c,n,{value:u,writable:!0}),i(c,A,{value:null,writable:!0}),i(c,g,{value:null,writable:!0}),i(c,v,{value:null,writable:!0}),i(c,e,{value:u._readableState.endEmitted,writable:!0}),i(c,f,{value:function(k,_){var b=T[n].read();b?(T[r]=null,T[A]=null,T[g]=null,k(a(b,!1))):(T[A]=k,T[g]=_)},writable:!0}),c));return T[r]=null,S(u,function(k){if(k&&k.code!=="ERR_STREAM_PREMATURE_CLOSE"){var _=T[g];_!==null&&(T[r]=null,T[A]=null,T[g]=null,_(k)),T[v]=k;return}var b=T[A];b!==null&&(T[r]=null,T[A]=null,T[g]=null,b(a(void 0,!0))),T[e]=!0}),u.on("readable",h.bind(null,T)),T};$.exports=s},31125:function($,U,t){function M(o,h){var y=Object.keys(o);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(o);h&&(p=p.filter(function(x){return Object.getOwnPropertyDescriptor(o,x).enumerable})),y.push.apply(y,p)}return y}function E(o){for(var h=1;h<arguments.length;h++){var y=arguments[h]!=null?arguments[h]:{};h%2?M(Object(y),!0).forEach(function(p){i(o,p,y[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(y)):M(Object(y)).forEach(function(p){Object.defineProperty(o,p,Object.getOwnPropertyDescriptor(y,p))})}return o}function i(o,h,y){return h in o?Object.defineProperty(o,h,{value:y,enumerable:!0,configurable:!0,writable:!0}):o[h]=y,o}function S(o,h){if(!(o instanceof h))throw new TypeError("Cannot call a class as a function")}function A(o,h){for(var y=0;y<h.length;y++){var p=h[y];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(o,p.key,p)}}function g(o,h,y){return h&&A(o.prototype,h),y&&A(o,y),o}var v=t(12856),e=v.Buffer,r=t(69862),f=r.inspect,n=f&&f.custom||"inspect";function a(o,h,y){e.prototype.copy.call(o,h,y)}$.exports=function(){function o(){S(this,o),this.head=null,this.tail=null,this.length=0}return g(o,[{key:"push",value:function(h){var y={data:h,next:null};this.length>0?this.tail.next=y:this.head=y,this.tail=y,++this.length}},{key:"unshift",value:function(h){var y={data:h,next:this.head};this.length===0&&(this.tail=y),this.head=y,++this.length}},{key:"shift",value:function(){if(this.length!==0){var h=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,h}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(h){if(this.length===0)return"";for(var y=this.head,p=""+y.data;y=y.next;)p+=h+y.data;return p}},{key:"concat",value:function(h){if(this.length===0)return e.alloc(0);for(var y=e.allocUnsafe(h>>>0),p=this.head,x=0;p;)a(p.data,y,x),x+=p.data.length,p=p.next;return y}},{key:"consume",value:function(h,y){var p;return h<this.head.data.length?(p=this.head.data.slice(0,h),this.head.data=this.head.data.slice(h)):h===this.head.data.length?p=this.shift():p=y?this._getString(h):this._getBuffer(h),p}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(h){var y=this.head,p=1,x=y.data;for(h-=x.length;y=y.next;){var s=y.data,u=h>s.length?s.length:h;if(u===s.length?x+=s:x+=s.slice(0,h),h-=u,h===0){u===s.length?(++p,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=s.slice(u));break}++p}return this.length-=p,x}},{key:"_getBuffer",value:function(h){var y=e.allocUnsafe(h),p=this.head,x=1;for(p.data.copy(y),h-=p.data.length;p=p.next;){var s=p.data,u=h>s.length?s.length:h;if(s.copy(y,y.length-h,0,u),h-=u,h===0){u===s.length?(++x,p.next?this.head=p.next:this.head=this.tail=null):(this.head=p,p.data=s.slice(u));break}++x}return this.length-=x,y}},{key:n,value:function(h,y){return f(this,E({},y,{depth:0,customInspect:!1}))}}]),o}()},65756:function($,U,t){var M=t(90386);function E(e,r){var f=this,n=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return n||a?(r?r(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,M.nextTick(g,this,e)):M.nextTick(g,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(o){!r&&o?f._writableState?f._writableState.errorEmitted?M.nextTick(S,f):(f._writableState.errorEmitted=!0,M.nextTick(i,f,o)):M.nextTick(i,f,o):r?(M.nextTick(S,f),r(o)):M.nextTick(S,f)}),this)}function i(e,r){g(e,r),S(e)}function S(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function A(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function g(e,r){e.emit("error",r)}function v(e,r){var f=e._readableState,n=e._writableState;f&&f.autoDestroy||n&&n.autoDestroy?e.destroy(r):e.emit("error",r)}$.exports={destroy:E,undestroy:A,errorOrDestroy:v}},12726:function($,U,t){var M=t(74322).q.ERR_STREAM_PREMATURE_CLOSE;function E(g){var v=!1;return function(){if(!v){v=!0;for(var e=arguments.length,r=new Array(e),f=0;f<e;f++)r[f]=arguments[f];g.apply(this,r)}}}function i(){}function S(g){return g.setHeader&&typeof g.abort=="function"}function A(g,v,e){if(typeof v=="function")return A(g,null,v);v||(v={}),e=E(e||i);var r=v.readable||v.readable!==!1&&g.readable,f=v.writable||v.writable!==!1&&g.writable,n=function(){g.writable||o()},a=g._writableState&&g._writableState.finished,o=function(){f=!1,a=!0,r||e.call(g)},h=g._readableState&&g._readableState.endEmitted,y=function(){r=!1,h=!0,f||e.call(g)},p=function(u){e.call(g,u)},x=function(){var u;if(r&&!h)return(!g._readableState||!g._readableState.ended)&&(u=new M),e.call(g,u);if(f&&!a)return(!g._writableState||!g._writableState.ended)&&(u=new M),e.call(g,u)},s=function(){g.req.on("finish",o)};return S(g)?(g.on("complete",o),g.on("abort",x),g.req?s():g.on("request",s)):f&&!g._writableState&&(g.on("end",n),g.on("close",n)),g.on("end",y),g.on("finish",o),v.error!==!1&&g.on("error",p),g.on("close",x),function(){g.removeListener("complete",o),g.removeListener("abort",x),g.removeListener("request",s),g.req&&g.req.removeListener("finish",o),g.removeListener("end",n),g.removeListener("close",n),g.removeListener("finish",o),g.removeListener("end",y),g.removeListener("error",p),g.removeListener("close",x)}}$.exports=A},31748:function($){$.exports=function(){throw new Error("Readable.from is not available in the browser")}},10168:function($,U,t){var M;function E(o){var h=!1;return function(){h||(h=!0,o.apply(void 0,arguments))}}var i=t(74322).q,S=i.ERR_MISSING_ARGS,A=i.ERR_STREAM_DESTROYED;function g(o){if(o)throw o}function v(o){return o.setHeader&&typeof o.abort=="function"}function e(o,h,y,p){p=E(p);var x=!1;o.on("close",function(){x=!0}),M===void 0&&(M=t(12726)),M(o,{readable:h,writable:y},function(u){if(u)return p(u);x=!0,p()});var s=!1;return function(u){if(!x&&!s){if(s=!0,v(o))return o.abort();if(typeof o.destroy=="function")return o.destroy();p(u||new A("pipe"))}}}function r(o){o()}function f(o,h){return o.pipe(h)}function n(o){return!o.length||typeof o[o.length-1]!="function"?g:o.pop()}function a(){for(var o=arguments.length,h=new Array(o),y=0;y<o;y++)h[y]=arguments[y];var p=n(h);if(Array.isArray(h[0])&&(h=h[0]),h.length<2)throw new S("streams");var x,s=h.map(function(u,c){var T=c<h.length-1,k=c>0;return e(u,T,k,function(_){x||(x=_),_&&s.forEach(r),!T&&(s.forEach(r),p(x))})});return h.reduce(f)}$.exports=a},56306:function($,U,t){var M=t(74322).q.ERR_INVALID_OPT_VALUE;function E(S,A,g){return S.highWaterMark!=null?S.highWaterMark:A?S[g]:null}function i(S,A,g,v){var e=E(A,v,g);if(e!=null){if(!(isFinite(e)&&Math.floor(e)===e)||e<0){var r=v?g:"highWaterMark";throw new M(r,e)}return Math.floor(e)}return S.objectMode?16:16384}$.exports={getHighWaterMark:i}},71405:function($,U,t){$.exports=t(15398).EventEmitter},68019:function($,U,t){var M=t(71665).Buffer,E=M.isEncoding||function(s){switch(s=""+s,s&&s.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(s){if(!s)return"utf8";for(var u;;)switch(s){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return s;default:if(u)return;s=(""+s).toLowerCase(),u=!0}}function S(s){var u=i(s);if(typeof u!="string"&&(M.isEncoding===E||!E(s)))throw new Error("Unknown encoding: "+s);return u||s}U.s=A;function A(s){this.encoding=S(s);var u;switch(this.encoding){case"utf16le":this.text=a,this.end=o,u=4;break;case"utf8":this.fillLast=r,u=4;break;case"base64":this.text=h,this.end=y,u=3;break;default:this.write=p,this.end=x;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=M.allocUnsafe(u)}A.prototype.write=function(s){if(s.length===0)return"";var u,c;if(this.lastNeed){if(u=this.fillLast(s),u===void 0)return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<s.length?u?u+this.text(s,c):this.text(s,c):u||""},A.prototype.end=n,A.prototype.text=f,A.prototype.fillLast=function(s){if(this.lastNeed<=s.length)return s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,s.length),this.lastNeed-=s.length};function g(s){return s<=127?0:s>>5===6?2:s>>4===14?3:s>>3===30?4:s>>6===2?-1:-2}function v(s,u,c){var T=u.length-1;if(T<c)return 0;var k=g(u[T]);return k>=0?(k>0&&(s.lastNeed=k-1),k):--T<c||k===-2?0:(k=g(u[T]),k>=0?(k>0&&(s.lastNeed=k-2),k):--T<c||k===-2?0:(k=g(u[T]),k>=0?(k>0&&(k===2?k=0:s.lastNeed=k-3),k):0))}function e(s,u,c){if((u[0]&192)!==128)return s.lastNeed=0,"\uFFFD";if(s.lastNeed>1&&u.length>1){if((u[1]&192)!==128)return s.lastNeed=1,"\uFFFD";if(s.lastNeed>2&&u.length>2&&(u[2]&192)!==128)return s.lastNeed=2,"\uFFFD"}}function r(s){var u=this.lastTotal-this.lastNeed,c=e(this,s);if(c!==void 0)return c;if(this.lastNeed<=s.length)return s.copy(this.lastChar,u,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,u,0,s.length),this.lastNeed-=s.length}function f(s,u){var c=v(this,s,u);if(!this.lastNeed)return s.toString("utf8",u);this.lastTotal=c;var T=s.length-(c-this.lastNeed);return s.copy(this.lastChar,0,T),s.toString("utf8",u,T)}function n(s){var u=s&&s.length?this.write(s):"";return this.lastNeed?u+"\uFFFD":u}function a(s,u){if((s.length-u)%2===0){var c=s.toString("utf16le",u);if(c){var T=c.charCodeAt(c.length-1);if(T>=55296&&T<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=s[s.length-1],s.toString("utf16le",u,s.length-1)}function o(s){var u=s&&s.length?this.write(s):"";if(this.lastNeed){var c=this.lastTotal-this.lastNeed;return u+this.lastChar.toString("utf16le",0,c)}return u}function h(s,u){var c=(s.length-u)%3;return c===0?s.toString("base64",u):(this.lastNeed=3-c,this.lastTotal=3,c===1?this.lastChar[0]=s[s.length-1]:(this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1]),s.toString("base64",u,s.length-c))}function y(s){var u=s&&s.length?this.write(s):"";return this.lastNeed?u+this.lastChar.toString("base64",0,3-this.lastNeed):u}function p(s){return s.toString(this.encoding)}function x(s){return s&&s.length?this.write(s):""}},90715:function($,U,t){var M=t(32791),E=t(41633)("stream-parser");$.exports=v;var i=-1,S=0,A=1,g=2;function v(s){var u=s&&typeof s._transform=="function",c=s&&typeof s._write=="function";if(!u&&!c)throw new Error("must pass a Writable or Transform stream in");E("extending Parser into stream"),s._bytes=r,s._skipBytes=f,u&&(s._passthrough=n),u?s._transform=o:s._write=a}function e(s){E("initializing parser stream"),s._parserBytesLeft=0,s._parserBuffers=[],s._parserBuffered=0,s._parserState=i,s._parserCallback=null,typeof s.push=="function"&&(s._parserOutput=s.push.bind(s)),s._parserInit=!0}function r(s,u){M(!this._parserCallback,'there is already a "callback" set!'),M(isFinite(s)&&s>0,'can only buffer a finite number of bytes > 0, got "'+s+'"'),this._parserInit||e(this),E("buffering %o bytes",s),this._parserBytesLeft=s,this._parserCallback=u,this._parserState=S}function f(s,u){M(!this._parserCallback,'there is already a "callback" set!'),M(s>0,'can only skip > 0 bytes, got "'+s+'"'),this._parserInit||e(this),E("skipping %o bytes",s),this._parserBytesLeft=s,this._parserCallback=u,this._parserState=A}function n(s,u){M(!this._parserCallback,'There is already a "callback" set!'),M(s>0,'can only pass through > 0 bytes, got "'+s+'"'),this._parserInit||e(this),E("passing through %o bytes",s),this._parserBytesLeft=s,this._parserCallback=u,this._parserState=g}function a(s,u,c){this._parserInit||e(this),E("write(%o bytes)",s.length),typeof u=="function"&&(c=u),p(this,s,null,c)}function o(s,u,c){this._parserInit||e(this),E("transform(%o bytes)",s.length),typeof u!="function"&&(u=this._parserOutput),p(this,s,u,c)}function h(s,u,c,T){return s._parserBytesLeft<=0?T(new Error("got data but not currently parsing anything")):u.length<=s._parserBytesLeft?function(){return y(s,u,c,T)}:function(){var k=u.slice(0,s._parserBytesLeft);return y(s,k,c,function(_){if(_)return T(_);if(u.length>k.length)return function(){return h(s,u.slice(k.length),c,T)}})}}function y(s,u,c,T){if(s._parserBytesLeft-=u.length,E("%o bytes left for stream piece",s._parserBytesLeft),s._parserState===S?(s._parserBuffers.push(u),s._parserBuffered+=u.length):s._parserState===g&&c(u),s._parserBytesLeft===0){var k=s._parserCallback;if(k&&s._parserState===S&&s._parserBuffers.length>1&&(u=Buffer.concat(s._parserBuffers,s._parserBuffered)),s._parserState!==S&&(u=null),s._parserCallback=null,s._parserBuffered=0,s._parserState=i,s._parserBuffers.splice(0),k){var _=[];u&&_.push(u),c&&_.push(c);var b=k.length>_.length;b&&_.push(x(T));var P=k.apply(s,_);if(!b||T===P)return T}}else return T}var p=x(h);function x(s){return function(){for(var u=s.apply(this,arguments);typeof u=="function";)u=u();return u}}},41633:function($,U,t){var M=t(90386);U=$.exports=t(74469),U.log=S,U.formatArgs=i,U.save=A,U.load=g,U.useColors=E,U.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:v(),U.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function E(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}U.formatters.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}};function i(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+U.humanize(this.diff),!!r){var f="color: "+this.color;e.splice(1,0,f,"color: inherit");var n=0,a=0;e[0].replace(/%[a-zA-Z%]/g,function(o){o!=="%%"&&(n++,o==="%c"&&(a=n))}),e.splice(a,0,f)}}function S(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function A(e){try{e==null?U.storage.removeItem("debug"):U.storage.debug=e}catch{}}function g(){var e;try{e=U.storage.debug}catch{}return!e&&typeof M<"u"&&"env"in M&&(e={}.DEBUG),e}U.enable(g());function v(){try{return window.localStorage}catch{}}},74469:function($,U,t){U=$.exports=i.debug=i.default=i,U.coerce=v,U.disable=A,U.enable=S,U.enabled=g,U.humanize=t(11375),U.names=[],U.skips=[],U.formatters={};var M;function E(e){var r=0,f;for(f in e)r=(r<<5)-r+e.charCodeAt(f),r|=0;return U.colors[Math.abs(r)%U.colors.length]}function i(e){function r(){if(r.enabled){var f=r,n=+new Date,a=n-(M||n);f.diff=a,f.prev=M,f.curr=n,M=n;for(var o=new Array(arguments.length),h=0;h<o.length;h++)o[h]=arguments[h];o[0]=U.coerce(o[0]),typeof o[0]!="string"&&o.unshift("%O");var y=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(x,s){if(x==="%%")return x;y++;var u=U.formatters[s];if(typeof u=="function"){var c=o[y];x=u.call(f,c),o.splice(y,1),y--}return x}),U.formatArgs.call(f,o);var p=r.log||U.log||console.log.bind(console);p.apply(f,o)}}return r.namespace=e,r.enabled=U.enabled(e),r.useColors=U.useColors(),r.color=E(e),typeof U.init=="function"&&U.init(r),r}function S(e){U.save(e),U.names=[],U.skips=[];for(var r=(typeof e=="string"?e:"").split(/[\s,]+/),f=r.length,n=0;n<f;n++)r[n]&&(e=r[n].replace(/\*/g,".*?"),e[0]==="-"?U.skips.push(new RegExp("^"+e.substr(1)+"$")):U.names.push(new RegExp("^"+e+"$")))}function A(){U.enable("")}function g(e){var r,f;for(r=0,f=U.skips.length;r<f;r++)if(U.skips[r].test(e))return!1;for(r=0,f=U.names.length;r<f;r++)if(U.names[r].test(e))return!0;return!1}function v(e){return e instanceof Error?e.stack||e.message:e}},11375:function($){var U=1e3,t=U*60,M=t*60,E=M*24,i=E*365.25;$.exports=function(e,r){r=r||{};var f=typeof e;if(f==="string"&&e.length>0)return S(e);if(f==="number"&&isNaN(e)===!1)return r.long?g(e):A(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function S(e){if(e=String(e),!(e.length>100)){var r=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(r){var f=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return f*i;case"days":case"day":case"d":return f*E;case"hours":case"hour":case"hrs":case"hr":case"h":return f*M;case"minutes":case"minute":case"mins":case"min":case"m":return f*t;case"seconds":case"second":case"secs":case"sec":case"s":return f*U;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function A(e){return e>=E?Math.round(e/E)+"d":e>=M?Math.round(e/M)+"h":e>=t?Math.round(e/t)+"m":e>=U?Math.round(e/U)+"s":e+"ms"}function g(e){return v(e,E,"day")||v(e,M,"hour")||v(e,t,"minute")||v(e,U,"second")||e+" ms"}function v(e,r,f){if(!(e<r))return e<r*1.5?Math.floor(e/r)+" "+f:Math.ceil(e/r)+" "+f+"s"}},99011:function($,U,t){var M=t(88641);$.exports=function(E,i,S){if(E==null)throw Error("First argument should be a string");if(i==null)throw Error("Separator should be a string or a RegExp");S?(typeof S=="string"||Array.isArray(S))&&(S={ignore:S}):S={},S.escape==null&&(S.escape=!0),S.ignore==null?S.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof S.ignore=="string"&&(S.ignore=[S.ignore]),S.ignore=S.ignore.map(function(a){return a.length===1&&(a=a+a),a}));var A=M.parse(E,{flat:!0,brackets:S.ignore}),g=A[0],v=g.split(i);if(S.escape){for(var e=[],r=0;r<v.length;r++){var f=v[r],n=v[r+1];f[f.length-1]==="\\"&&f[f.length-2]!=="\\"?(e.push(f+i+n),r++):e.push(f)}v=e}for(var r=0;r<v.length;r++)A[0]=v[r],v[r]=M.stringify(A,{flat:!0});return v}},68664:function($){$.exports=U;function U(t){for(var M=t.length,E=new Array(M),i=new Array(M),S=new Array(M),A=new Array(M),g=new Array(M),v=new Array(M),e=0;e<M;++e)E[e]=-1,i[e]=0,S[e]=!1,A[e]=0,g[e]=-1,v[e]=[];var r=0,f=[],n=[];function a(p){var x=[p],s=[p];for(E[p]=i[p]=r,S[p]=!0,r+=1;s.length>0;){p=s[s.length-1];var u=t[p];if(A[p]<u.length){for(var c=A[p];c<u.length;++c){var T=u[c];if(E[T]<0){E[T]=i[T]=r,S[T]=!0,r+=1,x.push(T),s.push(T);break}else S[T]&&(i[p]=Math.min(i[p],i[T])|0);g[T]>=0&&v[p].push(g[T])}A[p]=c}else{if(i[p]===E[p]){for(var k=[],_=[],b=0,c=x.length-1;c>=0;--c){var P=x[c];if(S[P]=!1,k.push(P),_.push(v[P]),b+=v[P].length,g[P]=f.length,P===p){x.length=c;break}}f.push(k);for(var l=new Array(b),c=0;c<_.length;c++)for(var d=0;d<_[c].length;d++)l[--b]=_[c][d];n.push(l)}s.pop()}}}for(var e=0;e<M;++e)E[e]<0&&a(e);for(var o,e=0;e<n.length;e++){var h=n[e];if(h.length!==0){h.sort(function(x,s){return x-s}),o=[h[0]];for(var y=1;y<h.length;y++)h[y]!==h[y-1]&&o.push(h[y]);n[e]=o}}return{components:f,adjacencyList:n}}},7095:function($,U,t){t.r(U);var M=function(){function e(r,f){var n=[],a=!0,o=!1,h=void 0;try{for(var y=r[Symbol.iterator](),p;!(a=(p=y.next()).done)&&(n.push(p.value),!(f&&n.length===f));a=!0);}catch(x){o=!0,h=x}finally{try{!a&&y.return&&y.return()}finally{if(o)throw h}}return n}return function(r,f){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,f);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),E=Math.PI*2,i=function(e,r,f,n,a,o,h){var y=e.x,p=e.y;y*=r,p*=f;var x=n*y-a*p,s=a*y+n*p;return{x:x+o,y:s+h}},S=function(e,r){var f=r===1.5707963267948966?.551915024494:r===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(r/4),n=Math.cos(e),a=Math.sin(e),o=Math.cos(e+r),h=Math.sin(e+r);return[{x:n-a*f,y:a+n*f},{x:o+h*f,y:h-o*f},{x:o,y:h}]},A=function(e,r,f,n){var a=e*n-r*f<0?-1:1,o=e*f+r*n;return o>1&&(o=1),o<-1&&(o=-1),a*Math.acos(o)},g=function(e,r,f,n,a,o,h,y,p,x,s,u){var c=Math.pow(a,2),T=Math.pow(o,2),k=Math.pow(s,2),_=Math.pow(u,2),b=c*T-c*_-T*k;b<0&&(b=0),b/=c*_+T*k,b=Math.sqrt(b)*(h===y?-1:1);var P=b*a/o*u,l=b*-o/a*s,d=x*P-p*l+(e+f)/2,L=p*P+x*l+(r+n)/2,w=(s-P)/a,I=(u-l)/o,z=(-s-P)/a,B=(-u-l)/o,O=A(1,0,w,I),R=A(w,I,z,B);return y===0&&R>0&&(R-=E),y===1&&R<0&&(R+=E),[d,L,O,R]},v=function(e){var r=e.px,f=e.py,n=e.cx,a=e.cy,o=e.rx,h=e.ry,y=e.xAxisRotation,p=y===void 0?0:y,x=e.largeArcFlag,s=x===void 0?0:x,u=e.sweepFlag,c=u===void 0?0:u,T=[];if(o===0||h===0)return[];var k=Math.sin(p*E/360),_=Math.cos(p*E/360),b=_*(r-n)/2+k*(f-a)/2,P=-k*(r-n)/2+_*(f-a)/2;if(b===0&&P===0)return[];o=Math.abs(o),h=Math.abs(h);var l=Math.pow(b,2)/Math.pow(o,2)+Math.pow(P,2)/Math.pow(h,2);l>1&&(o*=Math.sqrt(l),h*=Math.sqrt(l));var d=g(r,f,n,a,o,h,s,c,k,_,b,P),L=M(d,4),w=L[0],I=L[1],z=L[2],B=L[3],O=Math.abs(B)/(E/4);Math.abs(1-O)<1e-7&&(O=1);var R=Math.max(Math.ceil(O),1);B/=R;for(var C=0;C<R;C++)T.push(S(z,B)),z+=B;return T.map(function(F){var N=i(F[0],o,h,_,k,w,I),V=N.x,K=N.y,Q=i(F[1],o,h,_,k,w,I),at=Q.x,it=Q.y,q=i(F[2],o,h,_,k,w,I),W=q.x,Z=q.y;return{x1:V,y1:K,x2:at,y2:it,x:W,y:Z}})};U.default=v},1750:function($,U,t){var M=t(95616),E=t(65185),i=t(29988),S=t(89546),A=t(32791);$.exports=g;function g(v){if(Array.isArray(v)&&v.length===1&&typeof v[0]=="string"&&(v=v[0]),typeof v=="string"&&(A(S(v),"String is not an SVG path."),v=M(v)),A(Array.isArray(v),"Argument should be a string or an array of path segments."),v=E(v),v=i(v),!v.length)return[0,0,0,0];for(var e=[1/0,1/0,-1/0,-1/0],r=0,f=v.length;r<f;r++)for(var n=v[r].slice(1),a=0;a<n.length;a+=2)n[a+0]<e[0]&&(e[0]=n[a+0]),n[a+1]<e[1]&&(e[1]=n[a+1]),n[a+0]>e[2]&&(e[2]=n[a+0]),n[a+1]>e[3]&&(e[3]=n[a+1]);return e}},29988:function($,U,t){$.exports=E;var M=t(7095);function E(A){for(var g,v=[],e=0,r=0,f=0,n=0,a=null,o=null,h=0,y=0,p=0,x=A.length;p<x;p++){var s=A[p],u=s[0];switch(u){case"M":f=s[1],n=s[2];break;case"A":var c=M({px:h,py:y,cx:s[6],cy:s[7],rx:s[1],ry:s[2],xAxisRotation:s[3],largeArcFlag:s[4],sweepFlag:s[5]});if(!c.length)continue;for(var T=0,k;T<c.length;T++)k=c[T],s=["C",k.x1,k.y1,k.x2,k.y2,k.x,k.y],T<c.length-1&&v.push(s);break;case"S":var _=h,b=y;(g=="C"||g=="S")&&(_+=_-e,b+=b-r),s=["C",_,b,s[1],s[2],s[3],s[4]];break;case"T":g=="Q"||g=="T"?(a=h*2-a,o=y*2-o):(a=h,o=y),s=S(h,y,a,o,s[1],s[2]);break;case"Q":a=s[1],o=s[2],s=S(h,y,s[1],s[2],s[3],s[4]);break;case"L":s=i(h,y,s[1],s[2]);break;case"H":s=i(h,y,s[1],y);break;case"V":s=i(h,y,h,s[1]);break;case"Z":s=i(h,y,f,n);break}g=u,h=s[s.length-2],y=s[s.length-1],s.length>4?(e=s[s.length-4],r=s[s.length-3]):(e=h,r=y),v.push(s)}return v}function i(A,g,v,e){return["C",A,g,v,e,v,e]}function S(A,g,v,e,r,f){return["C",A/3+.6666666666666666*v,g/3+.6666666666666666*e,r/3+.6666666666666666*v,f/3+.6666666666666666*e,r,f]}},82019:function($,U,t){var M=t(1750),E=t(95616),i=t(31457),S=t(89546),A=t(44781),g=document.createElement("canvas"),v=g.getContext("2d");$.exports=e;function e(n,a){if(!S(n))throw Error("Argument should be valid svg path string");a||(a={});var o,h;a.shape?(o=a.shape[0],h=a.shape[1]):(o=g.width=a.w||a.width||200,h=g.height=a.h||a.height||200);var y=Math.min(o,h),p=a.stroke||0,x=a.viewbox||a.viewBox||M(n),s=[o/(x[2]-x[0]),h/(x[3]-x[1])],u=Math.min(s[0]||0,s[1]||0)/2;if(v.fillStyle="black",v.fillRect(0,0,o,h),v.fillStyle="white",p&&(typeof p!="number"&&(p=1),p>0?v.strokeStyle="white":v.strokeStyle="black",v.lineWidth=Math.abs(p)),v.translate(o*.5,h*.5),v.scale(u,u),f()){var c=new Path2D(n);v.fill(c),p&&v.stroke(c)}else{var T=E(n);i(v,T),v.fill(),p&&v.stroke()}v.setTransform(1,0,0,1,0,0);var k=A(v,{cutoff:a.cutoff!=null?a.cutoff:.5,radius:a.radius!=null?a.radius:y*.5});return k}var r;function f(){if(r!=null)return r;var n=document.createElement("canvas").getContext("2d");if(n.canvas.width=n.canvas.height=1,!window.Path2D)return r=!1;var a=new Path2D("M0,0h1v1h-1v-1Z");n.fillStyle="black",n.fill(a);var o=n.getImageData(0,0,1,1);return r=o&&o.data&&o.data[3]===255}},84267:function($,U,t){var M;(function(E){var i=/^\s+/,S=/\s+$/,A=0,g=E.round,v=E.min,e=E.max,r=E.random;function f(Y,ot){if(Y=Y||"",ot=ot||{},Y instanceof f)return Y;if(!(this instanceof f))return new f(Y,ot);var rt=n(Y);this._originalInput=Y,this._r=rt.r,this._g=rt.g,this._b=rt.b,this._a=rt.a,this._roundA=g(100*this._a)/100,this._format=ot.format||rt.format,this._gradientType=ot.gradientType,this._r<1&&(this._r=g(this._r)),this._g<1&&(this._g=g(this._g)),this._b<1&&(this._b=g(this._b)),this._ok=rt.ok,this._tc_id=A++}f.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Y=this.toRgb();return(Y.r*299+Y.g*587+Y.b*114)/1e3},getLuminance:function(){var Y=this.toRgb(),ot,rt,ht,pt,yt,xt;return ot=Y.r/255,rt=Y.g/255,ht=Y.b/255,ot<=.03928?pt=ot/12.92:pt=E.pow((ot+.055)/1.055,2.4),rt<=.03928?yt=rt/12.92:yt=E.pow((rt+.055)/1.055,2.4),ht<=.03928?xt=ht/12.92:xt=E.pow((ht+.055)/1.055,2.4),.2126*pt+.7152*yt+.0722*xt},setAlpha:function(Y){return this._a=F(Y),this._roundA=g(100*this._a)/100,this},toHsv:function(){var Y=y(this._r,this._g,this._b);return{h:Y.h*360,s:Y.s,v:Y.v,a:this._a}},toHsvString:function(){var Y=y(this._r,this._g,this._b),ot=g(Y.h*360),rt=g(Y.s*100),ht=g(Y.v*100);return this._a==1?"hsv("+ot+", "+rt+"%, "+ht+"%)":"hsva("+ot+", "+rt+"%, "+ht+"%, "+this._roundA+")"},toHsl:function(){var Y=o(this._r,this._g,this._b);return{h:Y.h*360,s:Y.s,l:Y.l,a:this._a}},toHslString:function(){var Y=o(this._r,this._g,this._b),ot=g(Y.h*360),rt=g(Y.s*100),ht=g(Y.l*100);return this._a==1?"hsl("+ot+", "+rt+"%, "+ht+"%)":"hsla("+ot+", "+rt+"%, "+ht+"%, "+this._roundA+")"},toHex:function(Y){return x(this._r,this._g,this._b,Y)},toHexString:function(Y){return"#"+this.toHex(Y)},toHex8:function(Y){return s(this._r,this._g,this._b,this._a,Y)},toHex8String:function(Y){return"#"+this.toHex8(Y)},toRgb:function(){return{r:g(this._r),g:g(this._g),b:g(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+g(this._r)+", "+g(this._g)+", "+g(this._b)+")":"rgba("+g(this._r)+", "+g(this._g)+", "+g(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:g(N(this._r,255)*100)+"%",g:g(N(this._g,255)*100)+"%",b:g(N(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+g(N(this._r,255)*100)+"%, "+g(N(this._g,255)*100)+"%, "+g(N(this._b,255)*100)+"%)":"rgba("+g(N(this._r,255)*100)+"%, "+g(N(this._g,255)*100)+"%, "+g(N(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:R[x(this._r,this._g,this._b,!0)]||!1},toFilter:function(Y){var ot="#"+u(this._r,this._g,this._b,this._a),rt=ot,ht=this._gradientType?"GradientType = 1, ":"";if(Y){var pt=f(Y);rt="#"+u(pt._r,pt._g,pt._b,pt._a)}return"progid:DXImageTransform.Microsoft.gradient("+ht+"startColorstr="+ot+",endColorstr="+rt+")"},toString:function(Y){var ot=!!Y;Y=Y||this._format;var rt=!1,ht=this._a<1&&this._a>=0,pt=!ot&&ht&&(Y==="hex"||Y==="hex6"||Y==="hex3"||Y==="hex4"||Y==="hex8"||Y==="name");return pt?Y==="name"&&this._a===0?this.toName():this.toRgbString():(Y==="rgb"&&(rt=this.toRgbString()),Y==="prgb"&&(rt=this.toPercentageRgbString()),(Y==="hex"||Y==="hex6")&&(rt=this.toHexString()),Y==="hex3"&&(rt=this.toHexString(!0)),Y==="hex4"&&(rt=this.toHex8String(!0)),Y==="hex8"&&(rt=this.toHex8String()),Y==="name"&&(rt=this.toName()),Y==="hsl"&&(rt=this.toHslString()),Y==="hsv"&&(rt=this.toHsvString()),rt||this.toHexString())},clone:function(){return f(this.toString())},_applyModification:function(Y,ot){var rt=Y.apply(null,[this].concat([].slice.call(ot)));return this._r=rt._r,this._g=rt._g,this._b=rt._b,this.setAlpha(rt._a),this},lighten:function(){return this._applyModification(_,arguments)},brighten:function(){return this._applyModification(b,arguments)},darken:function(){return this._applyModification(P,arguments)},desaturate:function(){return this._applyModification(c,arguments)},saturate:function(){return this._applyModification(T,arguments)},greyscale:function(){return this._applyModification(k,arguments)},spin:function(){return this._applyModification(l,arguments)},_applyCombination:function(Y,ot){return Y.apply(null,[this].concat([].slice.call(ot)))},analogous:function(){return this._applyCombination(z,arguments)},complement:function(){return this._applyCombination(d,arguments)},monochromatic:function(){return this._applyCombination(B,arguments)},splitcomplement:function(){return this._applyCombination(I,arguments)},triad:function(){return this._applyCombination(L,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},f.fromRatio=function(Y,ot){if(typeof Y=="object"){var rt={};for(var ht in Y)Y.hasOwnProperty(ht)&&(ht==="a"?rt[ht]=Y[ht]:rt[ht]=q(Y[ht]));Y=rt}return f(Y,ot)};function n(Y){var ot={r:0,g:0,b:0},rt=1,ht=null,pt=null,yt=null,xt=!1,Ft=!1;return typeof Y=="string"&&(Y=nt(Y)),typeof Y=="object"&&(et(Y.r)&&et(Y.g)&&et(Y.b)?(ot=a(Y.r,Y.g,Y.b),xt=!0,Ft=String(Y.r).substr(-1)==="%"?"prgb":"rgb"):et(Y.h)&&et(Y.s)&&et(Y.v)?(ht=q(Y.s),pt=q(Y.v),ot=p(Y.h,ht,pt),xt=!0,Ft="hsv"):et(Y.h)&&et(Y.s)&&et(Y.l)&&(ht=q(Y.s),yt=q(Y.l),ot=h(Y.h,ht,yt),xt=!0,Ft="hsl"),Y.hasOwnProperty("a")&&(rt=Y.a)),rt=F(rt),{ok:xt,format:Y.format||Ft,r:v(255,e(ot.r,0)),g:v(255,e(ot.g,0)),b:v(255,e(ot.b,0)),a:rt}}function a(Y,ot,rt){return{r:N(Y,255)*255,g:N(ot,255)*255,b:N(rt,255)*255}}function o(Y,ot,rt){Y=N(Y,255),ot=N(ot,255),rt=N(rt,255);var ht=e(Y,ot,rt),pt=v(Y,ot,rt),yt,xt,Ft=(ht+pt)/2;if(ht==pt)yt=xt=0;else{var Et=ht-pt;switch(xt=Ft>.5?Et/(2-ht-pt):Et/(ht+pt),ht){case Y:yt=(ot-rt)/Et+(ot<rt?6:0);break;case ot:yt=(rt-Y)/Et+2;break;case rt:yt=(Y-ot)/Et+4;break}yt/=6}return{h:yt,s:xt,l:Ft}}function h(Y,ot,rt){var ht,pt,yt;Y=N(Y,360),ot=N(ot,100),rt=N(rt,100);function xt(mt,gt,wt){return wt<0&&(wt+=1),wt>1&&(wt-=1),wt<.16666666666666666?mt+(gt-mt)*6*wt:wt<.5?gt:wt<.6666666666666666?mt+(gt-mt)*(.6666666666666666-wt)*6:mt}if(ot===0)ht=pt=yt=rt;else{var Ft=rt<.5?rt*(1+ot):rt+ot-rt*ot,Et=2*rt-Ft;ht=xt(Et,Ft,Y+.3333333333333333),pt=xt(Et,Ft,Y),yt=xt(Et,Ft,Y-.3333333333333333)}return{r:ht*255,g:pt*255,b:yt*255}}function y(Y,ot,rt){Y=N(Y,255),ot=N(ot,255),rt=N(rt,255);var ht=e(Y,ot,rt),pt=v(Y,ot,rt),yt,xt,Ft=ht,Et=ht-pt;if(xt=ht===0?0:Et/ht,ht==pt)yt=0;else{switch(ht){case Y:yt=(ot-rt)/Et+(ot<rt?6:0);break;case ot:yt=(rt-Y)/Et+2;break;case rt:yt=(Y-ot)/Et+4;break}yt/=6}return{h:yt,s:xt,v:Ft}}function p(Y,ot,rt){Y=N(Y,360)*6,ot=N(ot,100),rt=N(rt,100);var ht=E.floor(Y),pt=Y-ht,yt=rt*(1-ot),xt=rt*(1-pt*ot),Ft=rt*(1-(1-pt)*ot),Et=ht%6,mt=[rt,xt,yt,yt,Ft,rt][Et],gt=[Ft,rt,rt,xt,yt,yt][Et],wt=[yt,yt,Ft,rt,rt,xt][Et];return{r:mt*255,g:gt*255,b:wt*255}}function x(Y,ot,rt,ht){var pt=[it(g(Y).toString(16)),it(g(ot).toString(16)),it(g(rt).toString(16))];return ht&&pt[0].charAt(0)==pt[0].charAt(1)&&pt[1].charAt(0)==pt[1].charAt(1)&&pt[2].charAt(0)==pt[2].charAt(1)?pt[0].charAt(0)+pt[1].charAt(0)+pt[2].charAt(0):pt.join("")}function s(Y,ot,rt,ht,pt){var yt=[it(g(Y).toString(16)),it(g(ot).toString(16)),it(g(rt).toString(16)),it(W(ht))];return pt&&yt[0].charAt(0)==yt[0].charAt(1)&&yt[1].charAt(0)==yt[1].charAt(1)&&yt[2].charAt(0)==yt[2].charAt(1)&&yt[3].charAt(0)==yt[3].charAt(1)?yt[0].charAt(0)+yt[1].charAt(0)+yt[2].charAt(0)+yt[3].charAt(0):yt.join("")}function u(Y,ot,rt,ht){var pt=[it(W(ht)),it(g(Y).toString(16)),it(g(ot).toString(16)),it(g(rt).toString(16))];return pt.join("")}f.equals=function(Y,ot){return!Y||!ot?!1:f(Y).toRgbString()==f(ot).toRgbString()},f.random=function(){return f.fromRatio({r:r(),g:r(),b:r()})};function c(Y,ot){ot=ot===0?0:ot||10;var rt=f(Y).toHsl();return rt.s-=ot/100,rt.s=V(rt.s),f(rt)}function T(Y,ot){ot=ot===0?0:ot||10;var rt=f(Y).toHsl();return rt.s+=ot/100,rt.s=V(rt.s),f(rt)}function k(Y){return f(Y).desaturate(100)}function _(Y,ot){ot=ot===0?0:ot||10;var rt=f(Y).toHsl();return rt.l+=ot/100,rt.l=V(rt.l),f(rt)}function b(Y,ot){ot=ot===0?0:ot||10;var rt=f(Y).toRgb();return rt.r=e(0,v(255,rt.r-g(255*-(ot/100)))),rt.g=e(0,v(255,rt.g-g(255*-(ot/100)))),rt.b=e(0,v(255,rt.b-g(255*-(ot/100)))),f(rt)}function P(Y,ot){ot=ot===0?0:ot||10;var rt=f(Y).toHsl();return rt.l-=ot/100,rt.l=V(rt.l),f(rt)}function l(Y,ot){var rt=f(Y).toHsl(),ht=(rt.h+ot)%360;return rt.h=ht<0?360+ht:ht,f(rt)}function d(Y){var ot=f(Y).toHsl();return ot.h=(ot.h+180)%360,f(ot)}function L(Y){var ot=f(Y).toHsl(),rt=ot.h;return[f(Y),f({h:(rt+120)%360,s:ot.s,l:ot.l}),f({h:(rt+240)%360,s:ot.s,l:ot.l})]}function w(Y){var ot=f(Y).toHsl(),rt=ot.h;return[f(Y),f({h:(rt+90)%360,s:ot.s,l:ot.l}),f({h:(rt+180)%360,s:ot.s,l:ot.l}),f({h:(rt+270)%360,s:ot.s,l:ot.l})]}function I(Y){var ot=f(Y).toHsl(),rt=ot.h;return[f(Y),f({h:(rt+72)%360,s:ot.s,l:ot.l}),f({h:(rt+216)%360,s:ot.s,l:ot.l})]}function z(Y,ot,rt){ot=ot||6,rt=rt||30;var ht=f(Y).toHsl(),pt=360/rt,yt=[f(Y)];for(ht.h=(ht.h-(pt*ot>>1)+720)%360;--ot;)ht.h=(ht.h+pt)%360,yt.push(f(ht));return yt}function B(Y,ot){ot=ot||6;for(var rt=f(Y).toHsv(),ht=rt.h,pt=rt.s,yt=rt.v,xt=[],Ft=1/ot;ot--;)xt.push(f({h:ht,s:pt,v:yt})),yt=(yt+Ft)%1;return xt}f.mix=function(Y,ot,rt){rt=rt===0?0:rt||50;var ht=f(Y).toRgb(),pt=f(ot).toRgb(),yt=rt/100,xt={r:(pt.r-ht.r)*yt+ht.r,g:(pt.g-ht.g)*yt+ht.g,b:(pt.b-ht.b)*yt+ht.b,a:(pt.a-ht.a)*yt+ht.a};return f(xt)},f.readability=function(Y,ot){var rt=f(Y),ht=f(ot);return(E.max(rt.getLuminance(),ht.getLuminance())+.05)/(E.min(rt.getLuminance(),ht.getLuminance())+.05)},f.isReadable=function(Y,ot,rt){var ht=f.readability(Y,ot),pt,yt;switch(yt=!1,pt=X(rt),pt.level+pt.size){case"AAsmall":case"AAAlarge":yt=ht>=4.5;break;case"AAlarge":yt=ht>=3;break;case"AAAsmall":yt=ht>=7;break}return yt},f.mostReadable=function(Y,ot,rt){var ht=null,pt=0,yt,xt,Ft,Et;rt=rt||{},xt=rt.includeFallbackColors,Ft=rt.level,Et=rt.size;for(var mt=0;mt<ot.length;mt++)yt=f.readability(Y,ot[mt]),yt>pt&&(pt=yt,ht=f(ot[mt]));return f.isReadable(Y,ht,{level:Ft,size:Et})||!xt?ht:(rt.includeFallbackColors=!1,f.mostReadable(Y,["#fff","#000"],rt))};var O=f.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},R=f.hexNames=C(O);function C(Y){var ot={};for(var rt in Y)Y.hasOwnProperty(rt)&&(ot[Y[rt]]=rt);return ot}function F(Y){return Y=parseFloat(Y),(isNaN(Y)||Y<0||Y>1)&&(Y=1),Y}function N(Y,ot){Q(Y)&&(Y="100%");var rt=at(Y);return Y=v(ot,e(0,parseFloat(Y))),rt&&(Y=parseInt(Y*ot,10)/100),E.abs(Y-ot)<1e-6?1:Y%ot/parseFloat(ot)}function V(Y){return v(1,e(0,Y))}function K(Y){return parseInt(Y,16)}function Q(Y){return typeof Y=="string"&&Y.indexOf(".")!=-1&&parseFloat(Y)===1}function at(Y){return typeof Y=="string"&&Y.indexOf("%")!=-1}function it(Y){return Y.length==1?"0"+Y:""+Y}function q(Y){return Y<=1&&(Y=Y*100+"%"),Y}function W(Y){return E.round(parseFloat(Y)*255).toString(16)}function Z(Y){return K(Y)/255}var G=function(){var Y="[-\\+]?\\d+%?",ot="[-\\+]?\\d*\\.\\d+%?",rt="(?:"+ot+")|(?:"+Y+")",ht="[\\s|\\(]+("+rt+")[,|\\s]+("+rt+")[,|\\s]+("+rt+")\\s*\\)?",pt="[\\s|\\(]+("+rt+")[,|\\s]+("+rt+")[,|\\s]+("+rt+")[,|\\s]+("+rt+")\\s*\\)?";return{CSS_UNIT:new RegExp(rt),rgb:new RegExp("rgb"+ht),rgba:new RegExp("rgba"+pt),hsl:new RegExp("hsl"+ht),hsla:new RegExp("hsla"+pt),hsv:new RegExp("hsv"+ht),hsva:new RegExp("hsva"+pt),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function et(Y){return!!G.CSS_UNIT.exec(Y)}function nt(Y){Y=Y.replace(i,"").replace(S,"").toLowerCase();var ot=!1;if(O[Y])Y=O[Y],ot=!0;else if(Y=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var rt;return(rt=G.rgb.exec(Y))?{r:rt[1],g:rt[2],b:rt[3]}:(rt=G.rgba.exec(Y))?{r:rt[1],g:rt[2],b:rt[3],a:rt[4]}:(rt=G.hsl.exec(Y))?{h:rt[1],s:rt[2],l:rt[3]}:(rt=G.hsla.exec(Y))?{h:rt[1],s:rt[2],l:rt[3],a:rt[4]}:(rt=G.hsv.exec(Y))?{h:rt[1],s:rt[2],v:rt[3]}:(rt=G.hsva.exec(Y))?{h:rt[1],s:rt[2],v:rt[3],a:rt[4]}:(rt=G.hex8.exec(Y))?{r:K(rt[1]),g:K(rt[2]),b:K(rt[3]),a:Z(rt[4]),format:ot?"name":"hex8"}:(rt=G.hex6.exec(Y))?{r:K(rt[1]),g:K(rt[2]),b:K(rt[3]),format:ot?"name":"hex"}:(rt=G.hex4.exec(Y))?{r:K(rt[1]+""+rt[1]),g:K(rt[2]+""+rt[2]),b:K(rt[3]+""+rt[3]),a:Z(rt[4]+""+rt[4]),format:ot?"name":"hex8"}:(rt=G.hex3.exec(Y))?{r:K(rt[1]+""+rt[1]),g:K(rt[2]+""+rt[2]),b:K(rt[3]+""+rt[3]),format:ot?"name":"hex"}:!1}function X(Y){var ot,rt;return Y=Y||{level:"AA",size:"small"},ot=(Y.level||"AA").toUpperCase(),rt=(Y.size||"small").toLowerCase(),ot!=="AA"&&ot!=="AAA"&&(ot="AA"),rt!=="small"&&rt!=="large"&&(rt="small"),{level:ot,size:rt}}$.exports?$.exports=f:(M=(function(){return f}).call(U,t,U,$),M!==void 0&&($.exports=M))})(Math)},57060:function($){$.exports=M,$.exports.float32=$.exports.float=M,$.exports.fract32=$.exports.fract=t;var U=new Float32Array(1);function t(E,i){if(E.length){if(E instanceof Float32Array)return new Float32Array(E.length);i instanceof Float32Array||(i=M(E));for(var S=0,A=i.length;S<A;S++)i[S]=E[S]-i[S];return i}return M(E-M(E))}function M(E){return E.length?E instanceof Float32Array?E:new Float32Array(E):(U[0]=E,U[0])}},75686:function($,U,t){var M=t(25677);$.exports=A;var E=96;function i(g,v){var e=M(getComputedStyle(g).getPropertyValue(v));return e[0]*A(e[1],g)}function S(g,v){var e=document.createElement("div");e.style["font-size"]="128"+g,v.appendChild(e);var r=i(e,"font-size")/128;return v.removeChild(e),r}function A(g,v){switch(v=v||document.body,g=(g||"px").trim().toLowerCase(),(v===window||v===document)&&(v=document.body),g){case"%":return v.clientHeight/100;case"ch":case"ex":return S(g,v);case"em":return i(v,"font-size");case"rem":return i(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return E;case"cm":return E/2.54;case"mm":return E/25.4;case"pt":return E/72;case"pc":return E/6}return 1}},96892:function($,U,t){t.d(U,{zL:function(){return S}});function M(v,e){for(var r,f=v.length,n=f-e;n<--f;)r=v[n],v[n++]=v[f],v[f]=r}function E(v){return v}function i(v){if(v==null)return E;var e,r,f=v.scale[0],n=v.scale[1],a=v.translate[0],o=v.translate[1];return function(h,y){y||(e=r=0);var p=2,x=h.length,s=new Array(x);for(s[0]=(e+=h[0])*f+a,s[1]=(r+=h[1])*n+o;p<x;)s[p]=h[p],++p;return s}}function S(v,e){return typeof e=="string"&&(e=v.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(r){return A(v,r)})}:A(v,e)}function A(v,e){var r=e.id,f=e.bbox,n=e.properties==null?{}:e.properties,a=g(v,e);return r==null&&f==null?{type:"Feature",properties:n,geometry:a}:f==null?{type:"Feature",id:r,properties:n,geometry:a}:{type:"Feature",id:r,bbox:f,properties:n,geometry:a}}function g(v,e){var r=i(v.transform),f=v.arcs;function n(x,s){s.length&&s.pop();for(var u=f[x<0?~x:x],c=0,T=u.length;c<T;++c)s.push(r(u[c],c));x<0&&M(s,T)}function a(x){return r(x)}function o(x){for(var s=[],u=0,c=x.length;u<c;++u)n(x[u],s);return s.length<2&&s.push(s[0]),s}function h(x){for(var s=o(x);s.length<4;)s.push(s[0]);return s}function y(x){return x.map(h)}function p(x){var s=x.type,u;switch(s){case"GeometryCollection":return{type:s,geometries:x.geometries.map(p)};case"Point":u=a(x.coordinates);break;case"MultiPoint":u=x.coordinates.map(a);break;case"LineString":u=o(x.arcs);break;case"MultiLineString":u=x.arcs.map(o);break;case"Polygon":u=y(x.arcs);break;case"MultiPolygon":u=x.arcs.map(y);break;default:return null}return{type:s,coordinates:u}}return p(e)}},73116:function($,U,t){var M=t(24511);$.exports=function(E){if(typeof E!="function"||!hasOwnProperty.call(E,"length"))return!1;try{if(typeof E.length!="number"||typeof E.call!="function"||typeof E.apply!="function")return!1}catch{return!1}return!M(E)}},69190:function($,U,t){var M=t(24582),E=t(47403),i=t(9234),S=t(6048),A=function(g,v){return g.replace("%v",S(v))};$.exports=function(g,v,e){if(!E(e))throw new TypeError(A(v,g));if(!M(g)){if("default"in e)return e.default;if(e.isOptional)return null}var r=i(e.errorMessage);throw M(r)||(r=v),new TypeError(A(r,g))}},18497:function($){$.exports=function(U){try{return U.toString()}catch{try{return String(U)}catch{return null}}}},6048:function($,U,t){var M=t(18497),E=/[\n\r\u2028\u2029]/g;$.exports=function(i){var S=M(i);return S===null?"<Non-coercible to string value>":(S.length>100&&(S=S.slice(0,99)+"\u2026"),S=S.replace(E,function(A){switch(A){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),S)}},47403:function($,U,t){var M=t(24582),E={object:!0,function:!0,undefined:!0};$.exports=function(i){return M(i)?hasOwnProperty.call(E,typeof i):!1}},82527:function($,U,t){var M=t(69190),E=t(84985);$.exports=function(i){return E(i)?i:M(i,"%v is not a plain function",arguments[1])}},84985:function($,U,t){var M=t(73116),E=/^\s*class[\s{/}]/,i=Function.prototype.toString;$.exports=function(S){return!(!M(S)||E.test(i.call(S)))}},24511:function($,U,t){var M=t(47403);$.exports=function(E){if(!M(E))return!1;try{return E.constructor?E.constructor.prototype===E:!1}catch{return!1}}},9234:function($,U,t){var M=t(24582),E=t(47403),i=Object.prototype.toString;$.exports=function(S){if(!M(S))return null;if(E(S)){var A=S.toString;if(typeof A!="function"||A===i)return null}try{return""+S}catch{return null}}},10424:function($,U,t){var M=t(69190),E=t(24582);$.exports=function(i){return E(i)?i:M(i,"Cannot use %v",arguments[1])}},24582:function($){var U=void 0;$.exports=function(t){return t!==U&&t!==null}},58404:function($,U,t){var M=t(13547),E=t(12129),i=t(12856).Buffer;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:E([32,0]),UINT16:E([32,0]),UINT32:E([32,0]),BIGUINT64:E([32,0]),INT8:E([32,0]),INT16:E([32,0]),INT32:E([32,0]),BIGINT64:E([32,0]),FLOAT:E([32,0]),DOUBLE:E([32,0]),DATA:E([32,0]),UINT8C:E([32,0]),BUFFER:E([32,0])});var S=typeof Uint8ClampedArray<"u",A=typeof BigUint64Array<"u",g=typeof BigInt64Array<"u",v=t.g.__TYPEDARRAY_POOL;v.UINT8C||(v.UINT8C=E([32,0])),v.BIGUINT64||(v.BIGUINT64=E([32,0])),v.BIGINT64||(v.BIGINT64=E([32,0])),v.BUFFER||(v.BUFFER=E([32,0]));var e=v.DATA,r=v.BUFFER;U.free=function(l){if(i.isBuffer(l))r[M.log2(l.length)].push(l);else{if(Object.prototype.toString.call(l)!=="[object ArrayBuffer]"&&(l=l.buffer),!l)return;var d=l.length||l.byteLength,L=M.log2(d)|0;e[L].push(l)}};function f(l){if(l){var d=l.length||l.byteLength,L=M.log2(d);e[L].push(l)}}function n(l){f(l.buffer)}U.freeUint8=U.freeUint16=U.freeUint32=U.freeBigUint64=U.freeInt8=U.freeInt16=U.freeInt32=U.freeBigInt64=U.freeFloat32=U.freeFloat=U.freeFloat64=U.freeDouble=U.freeUint8Clamped=U.freeDataView=n,U.freeArrayBuffer=f,U.freeBuffer=function(l){r[M.log2(l.length)].push(l)},U.malloc=function(l,d){if(d===void 0||d==="arraybuffer")return a(l);switch(d){case"uint8":return o(l);case"uint16":return h(l);case"uint32":return y(l);case"int8":return p(l);case"int16":return x(l);case"int32":return s(l);case"float":case"float32":return u(l);case"double":case"float64":return c(l);case"uint8_clamped":return T(l);case"bigint64":return _(l);case"biguint64":return k(l);case"buffer":return P(l);case"data":case"dataview":return b(l);default:return null}return null};function a(d){var d=M.nextPow2(d),L=M.log2(d),w=e[L];return w.length>0?w.pop():new ArrayBuffer(d)}U.mallocArrayBuffer=a;function o(l){return new Uint8Array(a(l),0,l)}U.mallocUint8=o;function h(l){return new Uint16Array(a(2*l),0,l)}U.mallocUint16=h;function y(l){return new Uint32Array(a(4*l),0,l)}U.mallocUint32=y;function p(l){return new Int8Array(a(l),0,l)}U.mallocInt8=p;function x(l){return new Int16Array(a(2*l),0,l)}U.mallocInt16=x;function s(l){return new Int32Array(a(4*l),0,l)}U.mallocInt32=s;function u(l){return new Float32Array(a(4*l),0,l)}U.mallocFloat32=U.mallocFloat=u;function c(l){return new Float64Array(a(8*l),0,l)}U.mallocFloat64=U.mallocDouble=c;function T(l){return S?new Uint8ClampedArray(a(l),0,l):o(l)}U.mallocUint8Clamped=T;function k(l){return A?new BigUint64Array(a(8*l),0,l):null}U.mallocBigUint64=k;function _(l){return g?new BigInt64Array(a(8*l),0,l):null}U.mallocBigInt64=_;function b(l){return new DataView(a(l),0,l)}U.mallocDataView=b;function P(l){l=M.nextPow2(l);var d=M.log2(l),L=r[d];return L.length>0?L.pop():new i(l)}U.mallocBuffer=P,U.clearCache=function(){for(var l=0;l<32;++l)v.UINT8[l].length=0,v.UINT16[l].length=0,v.UINT32[l].length=0,v.INT8[l].length=0,v.INT16[l].length=0,v.INT32[l].length=0,v.FLOAT[l].length=0,v.DOUBLE[l].length=0,v.BIGUINT64[l].length=0,v.BIGINT64[l].length=0,v.UINT8C[l].length=0,e[l].length=0,r[l].length=0}},90448:function($){var U=/[\'\"]/;$.exports=function(t){return t?(U.test(t.charAt(0))&&(t=t.substr(1)),U.test(t.charAt(t.length-1))&&(t=t.substr(0,t.length-1)),t):""}},93447:function($){$.exports=function(U,t,M){Array.isArray(M)||(M=[].slice.call(arguments,2));for(var E=0,i=M.length;E<i;E++){var S=M[E];for(var A in S)if(!(t[A]!==void 0&&!Array.isArray(t[A])&&U[A]===t[A])&&A in t){var g;if(S[A]===!0)g=t[A];else if(S[A]===!1||typeof S[A]=="function"&&(g=S[A](t[A],U,t),g===void 0))continue;U[A]=g}}return U}},20588:function($,U,t){$.exports=M;function M(i,S){if(E("noDeprecation"))return i;var A=!1;function g(){if(!A){if(E("throwDeprecation"))throw new Error(S);E("traceDeprecation")?console.trace(S):console.warn(S),A=!0}return i.apply(this,arguments)}return g}function E(i){try{if(!t.g.localStorage)return!1}catch{return!1}var S=t.g.localStorage[i];return S==null?!1:String(S).toLowerCase()==="true"}},45920:function($){$.exports=function(U){return U&&typeof U=="object"&&typeof U.copy=="function"&&typeof U.fill=="function"&&typeof U.readUInt8=="function"}},4936:function($,U,t){var M=t(47216),E=t(65481),i=t(21099),S=t(9187);function A(yt){return yt.call.bind(yt)}var g=typeof BigInt<"u",v=typeof Symbol<"u",e=A(Object.prototype.toString),r=A(Number.prototype.valueOf),f=A(String.prototype.valueOf),n=A(Boolean.prototype.valueOf);if(g)var a=A(BigInt.prototype.valueOf);if(v)var o=A(Symbol.prototype.valueOf);function h(yt,xt){if(typeof yt!="object")return!1;try{return xt(yt),!0}catch{return!1}}U.isArgumentsObject=M,U.isGeneratorFunction=E,U.isTypedArray=S;function y(yt){return typeof Promise<"u"&&yt instanceof Promise||yt!==null&&typeof yt=="object"&&typeof yt.then=="function"&&typeof yt.catch=="function"}U.isPromise=y;function p(yt){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(yt):S(yt)||K(yt)}U.isArrayBufferView=p;function x(yt){return i(yt)==="Uint8Array"}U.isUint8Array=x;function s(yt){return i(yt)==="Uint8ClampedArray"}U.isUint8ClampedArray=s;function u(yt){return i(yt)==="Uint16Array"}U.isUint16Array=u;function c(yt){return i(yt)==="Uint32Array"}U.isUint32Array=c;function T(yt){return i(yt)==="Int8Array"}U.isInt8Array=T;function k(yt){return i(yt)==="Int16Array"}U.isInt16Array=k;function _(yt){return i(yt)==="Int32Array"}U.isInt32Array=_;function b(yt){return i(yt)==="Float32Array"}U.isFloat32Array=b;function P(yt){return i(yt)==="Float64Array"}U.isFloat64Array=P;function l(yt){return i(yt)==="BigInt64Array"}U.isBigInt64Array=l;function d(yt){return i(yt)==="BigUint64Array"}U.isBigUint64Array=d;function L(yt){return e(yt)==="[object Map]"}L.working=typeof Map<"u"&&L(new Map);function w(yt){return typeof Map>"u"?!1:L.working?L(yt):yt instanceof Map}U.isMap=w;function I(yt){return e(yt)==="[object Set]"}I.working=typeof Set<"u"&&I(new Set);function z(yt){return typeof Set>"u"?!1:I.working?I(yt):yt instanceof Set}U.isSet=z;function B(yt){return e(yt)==="[object WeakMap]"}B.working=typeof WeakMap<"u"&&B(new WeakMap);function O(yt){return typeof WeakMap>"u"?!1:B.working?B(yt):yt instanceof WeakMap}U.isWeakMap=O;function R(yt){return e(yt)==="[object WeakSet]"}R.working=typeof WeakSet<"u"&&R(new WeakSet);function C(yt){return R(yt)}U.isWeakSet=C;function F(yt){return e(yt)==="[object ArrayBuffer]"}F.working=typeof ArrayBuffer<"u"&&F(new ArrayBuffer);function N(yt){return typeof ArrayBuffer>"u"?!1:F.working?F(yt):yt instanceof ArrayBuffer}U.isArrayBuffer=N;function V(yt){return e(yt)==="[object DataView]"}V.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&V(new DataView(new ArrayBuffer(1),0,1));function K(yt){return typeof DataView>"u"?!1:V.working?V(yt):yt instanceof DataView}U.isDataView=K;var Q=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function at(yt){return e(yt)==="[object SharedArrayBuffer]"}function it(yt){return typeof Q>"u"?!1:(typeof at.working>"u"&&(at.working=at(new Q)),at.working?at(yt):yt instanceof Q)}U.isSharedArrayBuffer=it;function q(yt){return e(yt)==="[object AsyncFunction]"}U.isAsyncFunction=q;function W(yt){return e(yt)==="[object Map Iterator]"}U.isMapIterator=W;function Z(yt){return e(yt)==="[object Set Iterator]"}U.isSetIterator=Z;function G(yt){return e(yt)==="[object Generator]"}U.isGeneratorObject=G;function et(yt){return e(yt)==="[object WebAssembly.Module]"}U.isWebAssemblyCompiledModule=et;function nt(yt){return h(yt,r)}U.isNumberObject=nt;function X(yt){return h(yt,f)}U.isStringObject=X;function Y(yt){return h(yt,n)}U.isBooleanObject=Y;function ot(yt){return g&&h(yt,a)}U.isBigIntObject=ot;function rt(yt){return v&&h(yt,o)}U.isSymbolObject=rt;function ht(yt){return nt(yt)||X(yt)||Y(yt)||ot(yt)||rt(yt)}U.isBoxedPrimitive=ht;function pt(yt){return typeof Uint8Array<"u"&&(N(yt)||it(yt))}U.isAnyArrayBuffer=pt,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(yt){Object.defineProperty(U,yt,{enumerable:!1,value:function(){throw new Error(yt+" is not supported in userland")}})})},43827:function($,U,t){var M=t(90386),E=Object.getOwnPropertyDescriptors||function(K){for(var Q=Object.keys(K),at={},it=0;it<Q.length;it++)at[Q[it]]=Object.getOwnPropertyDescriptor(K,Q[it]);return at},i=/%[sdj%]/g;U.format=function(K){if(!k(K)){for(var Q=[],at=0;at<arguments.length;at++)Q.push(v(arguments[at]));return Q.join(" ")}for(var at=1,it=arguments,q=it.length,W=String(K).replace(i,function(et){if(et==="%%")return"%";if(at>=q)return et;switch(et){case"%s":return String(it[at++]);case"%d":return Number(it[at++]);case"%j":try{return JSON.stringify(it[at++])}catch{return"[Circular]"}default:return et}}),Z=it[at];at<q;Z=it[++at])u(Z)||!l(Z)?W+=" "+Z:W+=" "+v(Z);return W},U.deprecate=function(K,Q){if(typeof M<"u"&&M.noDeprecation===!0)return K;if(typeof M>"u")return function(){return U.deprecate(K,Q).apply(this,arguments)};var at=!1;function it(){if(!at){if(M.throwDeprecation)throw new Error(Q);M.traceDeprecation?console.trace(Q):console.error(Q),at=!0}return K.apply(this,arguments)}return it};var S={},A=/^$/;if({}.NODE_DEBUG){var g={}.NODE_DEBUG;g=g.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),A=new RegExp("^"+g+"$","i")}U.debuglog=function(K){if(K=K.toUpperCase(),!S[K])if(A.test(K)){var Q=M.pid;S[K]=function(){var at=U.format.apply(U,arguments);console.error("%s %d: %s",K,Q,at)}}else S[K]=function(){};return S[K]};function v(K,Q){var at={seen:[],stylize:r};return arguments.length>=3&&(at.depth=arguments[2]),arguments.length>=4&&(at.colors=arguments[3]),s(Q)?at.showHidden=Q:Q&&U._extend(at,Q),b(at.showHidden)&&(at.showHidden=!1),b(at.depth)&&(at.depth=2),b(at.colors)&&(at.colors=!1),b(at.customInspect)&&(at.customInspect=!0),at.colors&&(at.stylize=e),n(at,K,at.depth)}U.inspect=v,v.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},v.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function e(K,Q){var at=v.styles[Q];return at?"\x1B["+v.colors[at][0]+"m"+K+"\x1B["+v.colors[at][1]+"m":K}function r(K,Q){return K}function f(K){var Q={};return K.forEach(function(at,it){Q[at]=!0}),Q}function n(K,Q,at){if(K.customInspect&&Q&&w(Q.inspect)&&Q.inspect!==U.inspect&&!(Q.constructor&&Q.constructor.prototype===Q)){var it=Q.inspect(at,K);return k(it)||(it=n(K,it,at)),it}var q=a(K,Q);if(q)return q;var W=Object.keys(Q),Z=f(W);if(K.showHidden&&(W=Object.getOwnPropertyNames(Q)),L(Q)&&(W.indexOf("message")>=0||W.indexOf("description")>=0))return o(Q);if(W.length===0){if(w(Q)){var G=Q.name?": "+Q.name:"";return K.stylize("[Function"+G+"]","special")}if(P(Q))return K.stylize(RegExp.prototype.toString.call(Q),"regexp");if(d(Q))return K.stylize(Date.prototype.toString.call(Q),"date");if(L(Q))return o(Q)}var et="",nt=!1,X=["{","}"];if(x(Q)&&(nt=!0,X=["[","]"]),w(Q)){var Y=Q.name?": "+Q.name:"";et=" [Function"+Y+"]"}if(P(Q)&&(et=" "+RegExp.prototype.toString.call(Q)),d(Q)&&(et=" "+Date.prototype.toUTCString.call(Q)),L(Q)&&(et=" "+o(Q)),W.length===0&&(!nt||Q.length==0))return X[0]+et+X[1];if(at<0)return P(Q)?K.stylize(RegExp.prototype.toString.call(Q),"regexp"):K.stylize("[Object]","special");K.seen.push(Q);var ot;return nt?ot=h(K,Q,at,Z,W):ot=W.map(function(rt){return y(K,Q,at,Z,rt,nt)}),K.seen.pop(),p(ot,et,X)}function a(K,Q){if(b(Q))return K.stylize("undefined","undefined");if(k(Q)){var at="'"+JSON.stringify(Q).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return K.stylize(at,"string")}if(T(Q))return K.stylize(""+Q,"number");if(s(Q))return K.stylize(""+Q,"boolean");if(u(Q))return K.stylize("null","null")}function o(K){return"["+Error.prototype.toString.call(K)+"]"}function h(K,Q,at,it,q){for(var W=[],Z=0,G=Q.length;Z<G;++Z)C(Q,String(Z))?W.push(y(K,Q,at,it,String(Z),!0)):W.push("");return q.forEach(function(et){et.match(/^\d+$/)||W.push(y(K,Q,at,it,et,!0))}),W}function y(K,Q,at,it,q,W){var Z,G,et;if(et=Object.getOwnPropertyDescriptor(Q,q)||{value:Q[q]},et.get?et.set?G=K.stylize("[Getter/Setter]","special"):G=K.stylize("[Getter]","special"):et.set&&(G=K.stylize("[Setter]","special")),C(it,q)||(Z="["+q+"]"),G||(K.seen.indexOf(et.value)<0?(u(at)?G=n(K,et.value,null):G=n(K,et.value,at-1),G.indexOf(`
`)>-1&&(W?G=G.split(`
`).map(function(nt){return"  "+nt}).join(`
`).slice(2):G=`
`+G.split(`
`).map(function(nt){return"   "+nt}).join(`
`))):G=K.stylize("[Circular]","special")),b(Z)){if(W&&q.match(/^\d+$/))return G;Z=JSON.stringify(""+q),Z.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Z=Z.slice(1,-1),Z=K.stylize(Z,"name")):(Z=Z.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Z=K.stylize(Z,"string"))}return Z+": "+G}function p(K,Q,at){var it=K.reduce(function(q,W){return W.indexOf(`
`)>=0,q+W.replace(/\u001b\[\d\d?m/g,"").length+1},0);return it>60?at[0]+(Q===""?"":Q+`
 `)+" "+K.join(`,
  `)+" "+at[1]:at[0]+Q+" "+K.join(", ")+" "+at[1]}U.types=t(4936);function x(K){return Array.isArray(K)}U.isArray=x;function s(K){return typeof K=="boolean"}U.isBoolean=s;function u(K){return K===null}U.isNull=u;function c(K){return K==null}U.isNullOrUndefined=c;function T(K){return typeof K=="number"}U.isNumber=T;function k(K){return typeof K=="string"}U.isString=k;function _(K){return typeof K=="symbol"}U.isSymbol=_;function b(K){return K===void 0}U.isUndefined=b;function P(K){return l(K)&&z(K)==="[object RegExp]"}U.isRegExp=P,U.types.isRegExp=P;function l(K){return typeof K=="object"&&K!==null}U.isObject=l;function d(K){return l(K)&&z(K)==="[object Date]"}U.isDate=d,U.types.isDate=d;function L(K){return l(K)&&(z(K)==="[object Error]"||K instanceof Error)}U.isError=L,U.types.isNativeError=L;function w(K){return typeof K=="function"}U.isFunction=w;function I(K){return K===null||typeof K=="boolean"||typeof K=="number"||typeof K=="string"||typeof K=="symbol"||typeof K>"u"}U.isPrimitive=I,U.isBuffer=t(45920);function z(K){return Object.prototype.toString.call(K)}function B(K){return K<10?"0"+K.toString(10):K.toString(10)}var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(){var K=new Date,Q=[B(K.getHours()),B(K.getMinutes()),B(K.getSeconds())].join(":");return[K.getDate(),O[K.getMonth()],Q].join(" ")}U.log=function(){console.log("%s - %s",R(),U.format.apply(U,arguments))},U.inherits=t(42018),U._extend=function(K,Q){if(!Q||!l(Q))return K;for(var at=Object.keys(Q),it=at.length;it--;)K[at[it]]=Q[at[it]];return K};function C(K,Q){return Object.prototype.hasOwnProperty.call(K,Q)}var F=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;U.promisify=function(K){if(typeof K!="function")throw new TypeError('The "original" argument must be of type Function');if(F&&K[F]){var Q=K[F];if(typeof Q!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Q,F,{value:Q,enumerable:!1,writable:!1,configurable:!0}),Q}function Q(){for(var at,it,q=new Promise(function(G,et){at=G,it=et}),W=[],Z=0;Z<arguments.length;Z++)W.push(arguments[Z]);W.push(function(G,et){G?it(G):at(et)});try{K.apply(this,W)}catch(G){it(G)}return q}return Object.setPrototypeOf(Q,Object.getPrototypeOf(K)),F&&Object.defineProperty(Q,F,{value:Q,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Q,E(K))},U.promisify.custom=F;function N(K,Q){if(!K){var at=new Error("Promise was rejected with a falsy value");at.reason=K,K=at}return Q(K)}function V(K){if(typeof K!="function")throw new TypeError('The "original" argument must be of type Function');function Q(){for(var at=[],it=0;it<arguments.length;it++)at.push(arguments[it]);var q=at.pop();if(typeof q!="function")throw new TypeError("The last argument must be of type Function");var W=this,Z=function(){return q.apply(W,arguments)};K.apply(this,at).then(function(G){M.nextTick(Z.bind(null,null,G))},function(G){M.nextTick(N.bind(null,G,Z))})}return Object.setPrototypeOf(Q,Object.getPrototypeOf(K)),Object.defineProperties(Q,E(K)),Q}U.callbackify=V},40372:function($,U,t){var M=t(86249);$.exports=function(E){return M("webgl",E)}},21099:function($,U,t){var M=t(31353),E=t(72077),i=t(6614),S=t(40383),A=i("Object.prototype.toString"),g=t(84543)(),v=typeof globalThis>"u"?t.g:globalThis,e=E(),r=i("String.prototype.slice"),f={},n=Object.getPrototypeOf;g&&S&&n&&M(e,function(h){if(typeof v[h]=="function"){var y=new v[h];if(Symbol.toStringTag in y){var p=n(y),x=S(p,Symbol.toStringTag);if(!x){var s=n(p);x=S(s,Symbol.toStringTag)}f[h]=x.get}}});var a=function(h){var y=!1;return M(f,function(p,x){if(!y)try{var s=p.call(h);s===x&&(y=s)}catch{}}),y},o=t(9187);$.exports=function(h){return o(h)?!g||!(Symbol.toStringTag in h)?r(A(h),8,-1):a(h):!1}},3961:function($,U,t){var M=t(63489),E=t(56131),i=M.instance();function S(o){this.local=this.regionalOptions[o||""]||this.regionalOptions[""]}S.prototype=new M.baseCalendar,E(S.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(o,h){if(typeof o=="string"){var y=o.match(g);return y?y[0]:""}var p=this._validateYear(o),x=o.month(),s=""+this.toChineseMonth(p,x);return h&&s.length<2&&(s="0"+s),this.isIntercalaryMonth(p,x)&&(s+="i"),s},monthNames:function(o){if(typeof o=="string"){var h=o.match(v);return h?h[0]:""}var y=this._validateYear(o),p=o.month(),x=this.toChineseMonth(y,p),s=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][x-1];return this.isIntercalaryMonth(y,p)&&(s="\u95F0"+s),s},monthNamesShort:function(o){if(typeof o=="string"){var h=o.match(e);return h?h[0]:""}var y=this._validateYear(o),p=o.month(),x=this.toChineseMonth(y,p),s=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][x-1];return this.isIntercalaryMonth(y,p)&&(s="\u95F0"+s),s},parseMonth:function(o,h){o=this._validateYear(o);var y=parseInt(h),p;if(isNaN(y))h[0]==="\u95F0"&&(p=!0,h=h.substring(1)),h[h.length-1]==="\u6708"&&(h=h.substring(0,h.length-1)),y=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(h);else{var x=h[h.length-1];p=x==="i"||x==="I"}var s=this.toMonthIndex(o,y,p);return s},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(o,h){if(o.year&&(o=o.year()),typeof o!="number"||o<1888||o>2111)throw h.replace(/\{0\}/,this.local.name);return o},toMonthIndex:function(o,h,y){var p=this.intercalaryMonth(o),x=y&&h!==p;if(x||h<1||h>12)throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);var s;return p?!y&&h<=p?s=h-1:s=h:s=h-1,s},toChineseMonth:function(o,h){o.year&&(o=o.year(),h=o.month());var y=this.intercalaryMonth(o),p=y?12:11;if(h<0||h>p)throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);var x;return y?h<y?x=h+1:x=h:x=h+1,x},intercalaryMonth:function(o){o=this._validateYear(o);var h=r[o-r[0]],y=h>>13;return y},isIntercalaryMonth:function(o,h){o.year&&(o=o.year(),h=o.month());var y=this.intercalaryMonth(o);return!!y&&y===h},leapYear:function(o){return this.intercalaryMonth(o)!==0},weekOfYear:function(o,h,y){var p=this._validateYear(o,M.local.invalidyear),x=f[p-f[0]],s=x>>9&4095,u=x>>5&15,c=x&31,T;T=i.newDate(s,u,c),T.add(4-(T.dayOfWeek()||7),"d");var k=this.toJD(o,h,y)-T.toJD();return 1+Math.floor(k/7)},monthsInYear:function(o){return this.leapYear(o)?13:12},daysInMonth:function(o,h){o.year&&(h=o.month(),o=o.year()),o=this._validateYear(o);var y=r[o-r[0]],p=y>>13,x=p?12:11;if(h>x)throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);var s=y&1<<12-h?30:29;return s},weekDay:function(o,h,y){return(this.dayOfWeek(o,h,y)||7)<6},toJD:function(o,h,y){var p=this._validate(o,s,y,M.local.invalidDate);o=this._validateYear(p.year()),h=p.month(),y=p.day();var x=this.isIntercalaryMonth(o,h),s=this.toChineseMonth(o,h),u=a(o,s,y,x);return i.toJD(u.year,u.month,u.day)},fromJD:function(o){var h=i.fromJD(o),y=n(h.year(),h.month(),h.day()),p=this.toMonthIndex(y.year,y.month,y.isIntercalary);return this.newDate(y.year,p,y.day)},fromString:function(o){var h=o.match(A),y=this._validateYear(+h[1]),p=+h[2],x=!!h[3],s=this.toMonthIndex(y,p,x),u=+h[4];return this.newDate(y,s,u)},add:function(o,h,y){var p=o.year(),x=o.month(),s=this.isIntercalaryMonth(p,x),u=this.toChineseMonth(p,x),c=Object.getPrototypeOf(S.prototype).add.call(this,o,h,y);if(y==="y"){var T=c.year(),k=c.month(),_=this.isIntercalaryMonth(T,u),b=s&&_?this.toMonthIndex(T,u,!0):this.toMonthIndex(T,u,!1);b!==k&&c.month(b)}return c}});var A=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,g=/^\d?\d[iI]?/m,v=/^闰?十?[一二三四五六七八九]?月/m,e=/^闰?十?[一二三四五六七八九]?/m;M.calendars.chinese=S;var r=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],f=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function n(o,h,y,p){var x,s;if(typeof o=="object")x=o,s=h||{};else{var u=typeof o=="number"&&o>=1888&&o<=2111;if(!u)throw new Error("Solar year outside range 1888-2111");var c=typeof h=="number"&&h>=1&&h<=12;if(!c)throw new Error("Solar month outside range 1 - 12");var T=typeof y=="number"&&y>=1&&y<=31;if(!T)throw new Error("Solar day outside range 1 - 31");x={year:o,month:h,day:y},s=p||{}}var k=f[x.year-f[0]],_=x.year<<9|x.month<<5|x.day;s.year=_>=k?x.year:x.year-1,k=f[s.year-f[0]];var b=k>>9&4095,P=k>>5&15,l=k&31,d,L=new Date(b,P-1,l),w=new Date(x.year,x.month-1,x.day);d=Math.round((w-L)/864e5);var I=r[s.year-r[0]],z;for(z=0;z<13;z++){var B=I&1<<12-z?30:29;if(d<B)break;d-=B}var O=I>>13;return!O||z<O?(s.isIntercalary=!1,s.month=1+z):z===O?(s.isIntercalary=!0,s.month=z):(s.isIntercalary=!1,s.month=z),s.day=1+d,s}function a(o,h,y,p,x){var s,u;if(typeof o=="object")u=o,s=h||{};else{var c=typeof o=="number"&&o>=1888&&o<=2111;if(!c)throw new Error("Lunar year outside range 1888-2111");var T=typeof h=="number"&&h>=1&&h<=12;if(!T)throw new Error("Lunar month outside range 1 - 12");var k=typeof y=="number"&&y>=1&&y<=30;if(!k)throw new Error("Lunar day outside range 1 - 30");var _;typeof p=="object"?(_=!1,s=p):(_=!!p,s=x||{}),u={year:o,month:h,day:y,isIntercalary:_}}var b;b=u.day-1;var P=r[u.year-r[0]],l=P>>13,d;l&&(u.month>l||u.isIntercalary)?d=u.month:d=u.month-1;for(var L=0;L<d;L++){var w=P&1<<12-L?30:29;b+=w}var I=f[u.year-f[0]],z=I>>9&4095,B=I>>5&15,O=I&31,R=new Date(z,B-1,O+b);return s.year=R.getFullYear(),s.month=1+R.getMonth(),s.day=R.getDate(),s}},38751:function($,U,t){var M=t(63489),E=t(56131);function i(S){this.local=this.regionalOptions[S||""]||this.regionalOptions[""]}i.prototype=new M.baseCalendar,E(i.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(g){var A=this._validate(g,this.minMonth,this.minDay,M.local.invalidYear),g=A.year()+(A.year()<0?1:0);return g%4===3||g%4===-1},monthsInYear:function(S){return this._validate(S,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear),13},weekOfYear:function(S,A,g){var v=this.newDate(S,A,g);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInMonth:function(S,A){var g=this._validate(S,A,this.minDay,M.local.invalidMonth);return this.daysPerMonth[g.month()-1]+(g.month()===13&&this.leapYear(g.year())?1:0)},weekDay:function(S,A,g){return(this.dayOfWeek(S,A,g)||7)<6},toJD:function(S,A,g){var v=this._validate(S,A,g,M.local.invalidDate);return S=v.year(),S<0&&S++,v.day()+(v.month()-1)*30+(S-1)*365+Math.floor(S/4)+this.jdEpoch-1},fromJD:function(S){var A=Math.floor(S)+.5-this.jdEpoch,g=Math.floor((A-Math.floor((A+366)/1461))/365)+1;g<=0&&g--,A=Math.floor(S)+.5-this.newDate(g,1,1).toJD();var v=Math.floor(A/30)+1,e=A-(v-1)*30+1;return this.newDate(g,v,e)}}),M.calendars.coptic=i},86825:function($,U,t){var M=t(63489),E=t(56131);function i(A){this.local=this.regionalOptions[A||""]||this.regionalOptions[""]}i.prototype=new M.baseCalendar,E(i.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(A){return this._validate(A,this.minMonth,this.minDay,M.local.invalidYear),!1},monthsInYear:function(A){return this._validate(A,this.minMonth,this.minDay,M.local.invalidYear),13},daysInYear:function(A){return this._validate(A,this.minMonth,this.minDay,M.local.invalidYear),400},weekOfYear:function(A,g,v){var e=this.newDate(A,g,v);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/8)+1},daysInMonth:function(A,g){var v=this._validate(A,g,this.minDay,M.local.invalidMonth);return this.daysPerMonth[v.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(A,g,v){var e=this._validate(A,g,v,M.local.invalidDate);return(e.day()+1)%8},weekDay:function(A,g,v){var e=this.dayOfWeek(A,g,v);return e>=2&&e<=6},extraInfo:function(A,g,v){var e=this._validate(A,g,v,M.local.invalidDate);return{century:S[Math.floor((e.year()-1)/100)+1]||""}},toJD:function(A,g,v){var e=this._validate(A,g,v,M.local.invalidDate);return A=e.year()+(e.year()<0?1:0),g=e.month(),v=e.day(),v+(g>1?16:0)+(g>2?(g-2)*32:0)+(A-1)*400+this.jdEpoch-1},fromJD:function(A){A=Math.floor(A+.5)-Math.floor(this.jdEpoch)-1;var g=Math.floor(A/400)+1;A-=(g-1)*400,A+=A>15?16:0;var v=Math.floor(A/32)+1,e=A-(v-1)*32+1;return this.newDate(g<=0?g-1:g,v,e)}});var S={20:"Fruitbat",21:"Anchovy"};M.calendars.discworld=i},37715:function($,U,t){var M=t(63489),E=t(56131);function i(S){this.local=this.regionalOptions[S||""]||this.regionalOptions[""]}i.prototype=new M.baseCalendar,E(i.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(g){var A=this._validate(g,this.minMonth,this.minDay,M.local.invalidYear),g=A.year()+(A.year()<0?1:0);return g%4===3||g%4===-1},monthsInYear:function(S){return this._validate(S,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear),13},weekOfYear:function(S,A,g){var v=this.newDate(S,A,g);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInMonth:function(S,A){var g=this._validate(S,A,this.minDay,M.local.invalidMonth);return this.daysPerMonth[g.month()-1]+(g.month()===13&&this.leapYear(g.year())?1:0)},weekDay:function(S,A,g){return(this.dayOfWeek(S,A,g)||7)<6},toJD:function(S,A,g){var v=this._validate(S,A,g,M.local.invalidDate);return S=v.year(),S<0&&S++,v.day()+(v.month()-1)*30+(S-1)*365+Math.floor(S/4)+this.jdEpoch-1},fromJD:function(S){var A=Math.floor(S)+.5-this.jdEpoch,g=Math.floor((A-Math.floor((A+366)/1461))/365)+1;g<=0&&g--,A=Math.floor(S)+.5-this.newDate(g,1,1).toJD();var v=Math.floor(A/30)+1,e=A-(v-1)*30+1;return this.newDate(g,v,e)}}),M.calendars.ethiopian=i},99384:function($,U,t){var M=t(63489),E=t(56131);function i(A){this.local=this.regionalOptions[A||""]||this.regionalOptions[""]}i.prototype=new M.baseCalendar,E(i.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(A){var g=this._validate(A,this.minMonth,this.minDay,M.local.invalidYear);return this._leapYear(g.year())},_leapYear:function(A){return A=A<0?A+1:A,S(A*7+1,19)<7},monthsInYear:function(A){return this._validate(A,this.minMonth,this.minDay,M.local.invalidYear),this._leapYear(A.year?A.year():A)?13:12},weekOfYear:function(A,g,v){var e=this.newDate(A,g,v);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInYear:function(A){var g=this._validate(A,this.minMonth,this.minDay,M.local.invalidYear);return A=g.year(),this.toJD(A===-1?1:A+1,7,1)-this.toJD(A,7,1)},daysInMonth:function(A,g){return A.year&&(g=A.month(),A=A.year()),this._validate(A,g,this.minDay,M.local.invalidMonth),g===12&&this.leapYear(A)||g===8&&S(this.daysInYear(A),10)===5?30:g===9&&S(this.daysInYear(A),10)===3?29:this.daysPerMonth[g-1]},weekDay:function(A,g,v){return this.dayOfWeek(A,g,v)!==6},extraInfo:function(A,g,v){var e=this._validate(A,g,v,M.local.invalidDate);return{yearType:(this.leapYear(e)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(e)%10-3]}},toJD:function(A,g,v){var e=this._validate(A,g,v,M.local.invalidDate);A=e.year(),g=e.month(),v=e.day();var r=A<=0?A+1:A,f=this.jdEpoch+this._delay1(r)+this._delay2(r)+v+1;if(g<7){for(var n=7;n<=this.monthsInYear(A);n++)f+=this.daysInMonth(A,n);for(var n=1;n<g;n++)f+=this.daysInMonth(A,n)}else for(var n=7;n<g;n++)f+=this.daysInMonth(A,n);return f},_delay1:function(A){var g=Math.floor((235*A-234)/19),v=12084+13753*g,e=g*29+Math.floor(v/25920);return S(3*(e+1),7)<3&&e++,e},_delay2:function(A){var g=this._delay1(A-1),v=this._delay1(A),e=this._delay1(A+1);return e-v===356?2:v-g===382?1:0},fromJD:function(A){A=Math.floor(A)+.5;for(var g=Math.floor((A-this.jdEpoch)*98496/35975351)-1;A>=this.toJD(g===-1?1:g+1,7,1);)g++;for(var v=A<this.toJD(g,1,1)?7:1;A>this.toJD(g,v,this.daysInMonth(g,v));)v++;var e=A-this.toJD(g,v,1)+1;return this.newDate(g,v,e)}});function S(A,g){return A-g*Math.floor(A/g)}M.calendars.hebrew=i},43805:function($,U,t){var M=t(63489),E=t(56131);function i(S){this.local=this.regionalOptions[S||""]||this.regionalOptions[""]}i.prototype=new M.baseCalendar,E(i.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(S){var A=this._validate(S,this.minMonth,this.minDay,M.local.invalidYear);return(A.year()*11+14)%30<11},weekOfYear:function(S,A,g){var v=this.newDate(S,A,g);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInYear:function(S){return this.leapYear(S)?355:354},daysInMonth:function(S,A){var g=this._validate(S,A,this.minDay,M.local.invalidMonth);return this.daysPerMonth[g.month()-1]+(g.month()===12&&this.leapYear(g.year())?1:0)},weekDay:function(S,A,g){return this.dayOfWeek(S,A,g)!==5},toJD:function(S,A,g){var v=this._validate(S,A,g,M.local.invalidDate);return S=v.year(),A=v.month(),g=v.day(),S=S<=0?S+1:S,g+Math.ceil(29.5*(A-1))+(S-1)*354+Math.floor((3+11*S)/30)+this.jdEpoch-1},fromJD:function(S){S=Math.floor(S)+.5;var A=Math.floor((30*(S-this.jdEpoch)+10646)/10631);A=A<=0?A-1:A;var g=Math.min(12,Math.ceil((S-29-this.toJD(A,1,1))/29.5)+1),v=S-this.toJD(A,g,1)+1;return this.newDate(A,g,v)}}),M.calendars.islamic=i},88874:function($,U,t){var M=t(63489),E=t(56131);function i(S){this.local=this.regionalOptions[S||""]||this.regionalOptions[""]}i.prototype=new M.baseCalendar,E(i.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(g){var A=this._validate(g,this.minMonth,this.minDay,M.local.invalidYear),g=A.year()<0?A.year()+1:A.year();return g%4===0},weekOfYear:function(S,A,g){var v=this.newDate(S,A,g);return v.add(4-(v.dayOfWeek()||7),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInMonth:function(S,A){var g=this._validate(S,A,this.minDay,M.local.invalidMonth);return this.daysPerMonth[g.month()-1]+(g.month()===2&&this.leapYear(g.year())?1:0)},weekDay:function(S,A,g){return(this.dayOfWeek(S,A,g)||7)<6},toJD:function(S,A,g){var v=this._validate(S,A,g,M.local.invalidDate);return S=v.year(),A=v.month(),g=v.day(),S<0&&S++,A<=2&&(S--,A+=12),Math.floor(365.25*(S+4716))+Math.floor(30.6001*(A+1))+g-1524.5},fromJD:function(S){var A=Math.floor(S+.5),g=A+1524,v=Math.floor((g-122.1)/365.25),e=Math.floor(365.25*v),r=Math.floor((g-e)/30.6001),f=r-Math.floor(r<14?1:13),n=v-Math.floor(f>2?4716:4715),a=g-e-Math.floor(30.6001*r);return n<=0&&n--,this.newDate(n,f,a)}}),M.calendars.julian=i},83290:function($,U,t){var M=t(63489),E=t(56131);function i(g){this.local=this.regionalOptions[g||""]||this.regionalOptions[""]}i.prototype=new M.baseCalendar,E(i.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(g){return this._validate(g,this.minMonth,this.minDay,M.local.invalidYear),!1},formatYear:function(g){var v=this._validate(g,this.minMonth,this.minDay,M.local.invalidYear);g=v.year();var e=Math.floor(g/400);g=g%400,g+=g<0?400:0;var r=Math.floor(g/20);return e+"."+r+"."+g%20},forYear:function(g){if(g=g.split("."),g.length<3)throw"Invalid Mayan year";for(var v=0,e=0;e<g.length;e++){var r=parseInt(g[e],10);if(Math.abs(r)>19||e>0&&r<0)throw"Invalid Mayan year";v=v*20+r}return v},monthsInYear:function(g){return this._validate(g,this.minMonth,this.minDay,M.local.invalidYear),18},weekOfYear:function(g,v,e){return this._validate(g,v,e,M.local.invalidDate),0},daysInYear:function(g){return this._validate(g,this.minMonth,this.minDay,M.local.invalidYear),360},daysInMonth:function(g,v){return this._validate(g,v,this.minDay,M.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(g,v,e){var r=this._validate(g,v,e,M.local.invalidDate);return r.day()},weekDay:function(g,v,e){return this._validate(g,v,e,M.local.invalidDate),!0},extraInfo:function(g,v,e){var r=this._validate(g,v,e,M.local.invalidDate),f=r.toJD(),n=this._toHaab(f),a=this._toTzolkin(f);return{haabMonthName:this.local.haabMonths[n[0]-1],haabMonth:n[0],haabDay:n[1],tzolkinDayName:this.local.tzolkinMonths[a[0]-1],tzolkinDay:a[0],tzolkinTrecena:a[1]}},_toHaab:function(g){g-=this.jdEpoch;var v=S(g+8+(18-1)*20,365);return[Math.floor(v/20)+1,S(v,20)]},_toTzolkin:function(g){return g-=this.jdEpoch,[A(g+20,20),A(g+4,13)]},toJD:function(g,v,e){var r=this._validate(g,v,e,M.local.invalidDate);return r.day()+r.month()*20+r.year()*360+this.jdEpoch},fromJD:function(g){g=Math.floor(g)+.5-this.jdEpoch;var v=Math.floor(g/360);g=g%360,g+=g<0?360:0;var e=Math.floor(g/20),r=g%20;return this.newDate(v,e,r)}});function S(g,v){return g-v*Math.floor(g/v)}function A(g,v){return S(g-1,v)+1}M.calendars.mayan=i},29108:function($,U,t){var M=t(63489),E=t(56131);function i(A){this.local=this.regionalOptions[A||""]||this.regionalOptions[""]}i.prototype=new M.baseCalendar;var S=M.instance("gregorian");E(i.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(A){var g=this._validate(A,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear);return S.leapYear(g.year()+(g.year()<1?1:0)+1469)},weekOfYear:function(A,g,v){var e=this.newDate(A,g,v);return e.add(1-(e.dayOfWeek()||7),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInMonth:function(A,g){var v=this._validate(A,g,this.minDay,M.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===12&&this.leapYear(v.year())?1:0)},weekDay:function(A,g,v){return(this.dayOfWeek(A,g,v)||7)<6},toJD:function(r,g,v){var e=this._validate(r,g,v,M.local.invalidMonth),r=e.year();r<0&&r++;for(var f=e.day(),n=1;n<e.month();n++)f+=this.daysPerMonth[n-1];return f+S.toJD(r+1468,3,13)},fromJD:function(A){A=Math.floor(A+.5);for(var g=Math.floor((A-(this.jdEpoch-1))/366);A>=this.toJD(g+1,1,1);)g++;for(var v=A-Math.floor(this.toJD(g,1,1)+.5)+1,e=1;v>this.daysInMonth(g,e);)v-=this.daysInMonth(g,e),e++;return this.newDate(g,e,v)}}),M.calendars.nanakshahi=i},55422:function($,U,t){var M=t(63489),E=t(56131);function i(S){this.local=this.regionalOptions[S||""]||this.regionalOptions[""]}i.prototype=new M.baseCalendar,E(i.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(S){return this.daysInYear(S)!==this.daysPerYear},weekOfYear:function(S,A,g){var v=this.newDate(S,A,g);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInYear:function(S){var A=this._validate(S,this.minMonth,this.minDay,M.local.invalidYear);if(S=A.year(),typeof this.NEPALI_CALENDAR_DATA[S]>"u")return this.daysPerYear;for(var g=0,v=this.minMonth;v<=12;v++)g+=this.NEPALI_CALENDAR_DATA[S][v];return g},daysInMonth:function(S,A){return S.year&&(A=S.month(),S=S.year()),this._validate(S,A,this.minDay,M.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[S]>"u"?this.daysPerMonth[A-1]:this.NEPALI_CALENDAR_DATA[S][A]},weekDay:function(S,A,g){return this.dayOfWeek(S,A,g)!==6},toJD:function(S,A,g){var v=this._validate(S,A,g,M.local.invalidDate);S=v.year(),A=v.month(),g=v.day();var e=M.instance(),r=0,f=A,n=S;this._createMissingCalendarData(S);var a=S-(f>9||f===9&&g>=this.NEPALI_CALENDAR_DATA[n][0]?56:57);for(A!==9&&(r=g,f--);f!==9;)f<=0&&(f=12,n--),r+=this.NEPALI_CALENDAR_DATA[n][f],f--;return A===9?(r+=g-this.NEPALI_CALENDAR_DATA[n][0],r<0&&(r+=e.daysInYear(a))):r+=this.NEPALI_CALENDAR_DATA[n][9]-this.NEPALI_CALENDAR_DATA[n][0],e.newDate(a,1,1).add(r,"d").toJD()},fromJD:function(S){var A=M.instance(),g=A.fromJD(S),v=g.year(),e=g.dayOfYear(),r=v+56;this._createMissingCalendarData(r);for(var f=9,n=this.NEPALI_CALENDAR_DATA[r][0],a=this.NEPALI_CALENDAR_DATA[r][f]-n+1;e>a;)f++,f>12&&(f=1,r++),a+=this.NEPALI_CALENDAR_DATA[r][f];var o=this.NEPALI_CALENDAR_DATA[r][f]-(a-e);return this.newDate(r,f,o)},_createMissingCalendarData:function(S){var A=this.daysPerMonth.slice(0);A.unshift(17);for(var g=S-1;g<S+2;g++)typeof this.NEPALI_CALENDAR_DATA[g]>"u"&&(this.NEPALI_CALENDAR_DATA[g]=A)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),M.calendars.nepali=i},94320:function($,U,t){var M=t(63489),E=t(56131);function i(A){this.local=this.regionalOptions[A||""]||this.regionalOptions[""]}i.prototype=new M.baseCalendar,E(i.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(A){var g=this._validate(A,this.minMonth,this.minDay,M.local.invalidYear);return((g.year()-(g.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(A,g,v){var e=this.newDate(A,g,v);return e.add(-((e.dayOfWeek()+1)%7),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInMonth:function(A,g){var v=this._validate(A,g,this.minDay,M.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===12&&this.leapYear(v.year())?1:0)},weekDay:function(A,g,v){return this.dayOfWeek(A,g,v)!==5},toJD:function(A,g,v){var e=this._validate(A,g,v,M.local.invalidDate);A=e.year(),g=e.month(),v=e.day();var r=A-(A>=0?474:473),f=474+S(r,2820);return v+(g<=7?(g-1)*31:(g-1)*30+6)+Math.floor((f*682-110)/2816)+(f-1)*365+Math.floor(r/2820)*1029983+this.jdEpoch-1},fromJD:function(A){A=Math.floor(A)+.5;var g=A-this.toJD(475,1,1),v=Math.floor(g/1029983),e=S(g,1029983),r=2820;if(e!==1029982){var f=Math.floor(e/366),n=S(e,366);r=Math.floor((2134*f+2816*n+2815)/1028522)+f+1}var a=r+2820*v+474;a=a<=0?a-1:a;var o=A-this.toJD(a,1,1)+1,h=o<=186?Math.ceil(o/31):Math.ceil((o-6)/30),y=A-this.toJD(a,h,1)+1;return this.newDate(a,h,y)}});function S(A,g){return A-g*Math.floor(A/g)}M.calendars.persian=i,M.calendars.jalali=i},31320:function($,U,t){var M=t(63489),E=t(56131),i=M.instance();function S(A){this.local=this.regionalOptions[A||""]||this.regionalOptions[""]}S.prototype=new M.baseCalendar,E(S.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(v){var g=this._validate(v,this.minMonth,this.minDay,M.local.invalidYear),v=this._t2gYear(g.year());return i.leapYear(v)},weekOfYear:function(r,g,v){var e=this._validate(r,this.minMonth,this.minDay,M.local.invalidYear),r=this._t2gYear(e.year());return i.weekOfYear(r,e.month(),e.day())},daysInMonth:function(A,g){var v=this._validate(A,g,this.minDay,M.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===2&&this.leapYear(v.year())?1:0)},weekDay:function(A,g,v){return(this.dayOfWeek(A,g,v)||7)<6},toJD:function(r,g,v){var e=this._validate(r,g,v,M.local.invalidDate),r=this._t2gYear(e.year());return i.toJD(r,e.month(),e.day())},fromJD:function(A){var g=i.fromJD(A),v=this._g2tYear(g.year());return this.newDate(v,g.month(),g.day())},_t2gYear:function(A){return A+this.yearsOffset+(A>=-this.yearsOffset&&A<=-1?1:0)},_g2tYear:function(A){return A-this.yearsOffset-(A>=1&&A<=this.yearsOffset?1:0)}}),M.calendars.taiwan=S},51367:function($,U,t){var M=t(63489),E=t(56131),i=M.instance();function S(A){this.local=this.regionalOptions[A||""]||this.regionalOptions[""]}S.prototype=new M.baseCalendar,E(S.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var g=this._validate(v,this.minMonth,this.minDay,M.local.invalidYear),v=this._t2gYear(g.year());return i.leapYear(v)},weekOfYear:function(r,g,v){var e=this._validate(r,this.minMonth,this.minDay,M.local.invalidYear),r=this._t2gYear(e.year());return i.weekOfYear(r,e.month(),e.day())},daysInMonth:function(A,g){var v=this._validate(A,g,this.minDay,M.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===2&&this.leapYear(v.year())?1:0)},weekDay:function(A,g,v){return(this.dayOfWeek(A,g,v)||7)<6},toJD:function(r,g,v){var e=this._validate(r,g,v,M.local.invalidDate),r=this._t2gYear(e.year());return i.toJD(r,e.month(),e.day())},fromJD:function(A){var g=i.fromJD(A),v=this._g2tYear(g.year());return this.newDate(v,g.month(),g.day())},_t2gYear:function(A){return A-this.yearsOffset-(A>=1&&A<=this.yearsOffset?1:0)},_g2tYear:function(A){return A+this.yearsOffset+(A>=-this.yearsOffset&&A<=-1?1:0)}}),M.calendars.thai=S},21457:function($,U,t){var M=t(63489),E=t(56131);function i(A){this.local=this.regionalOptions[A||""]||this.regionalOptions[""]}i.prototype=new M.baseCalendar,E(i.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(A){var g=this._validate(A,this.minMonth,this.minDay,M.local.invalidYear);return this.daysInYear(g.year())===355},weekOfYear:function(A,g,v){var e=this.newDate(A,g,v);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInYear:function(A){for(var g=0,v=1;v<=12;v++)g+=this.daysInMonth(A,v);return g},daysInMonth:function(A,g){for(var v=this._validate(A,g,this.minDay,M.local.invalidMonth),e=v.toJD()-24e5+.5,r=0,f=0;f<S.length;f++){if(S[f]>e)return S[r]-S[r-1];r++}return 30},weekDay:function(A,g,v){return this.dayOfWeek(A,g,v)!==5},toJD:function(A,g,v){var e=this._validate(A,g,v,M.local.invalidDate),r=12*(e.year()-1)+e.month()-15292,f=e.day()+S[r-1]-1;return f+24e5-.5},fromJD:function(A){for(var g=A-24e5+.5,v=0,e=0;e<S.length&&!(S[e]>g);e++)v++;var r=v+15292,f=Math.floor((r-1)/12),n=f+1,a=r-12*f,o=g-S[v-1]+1;return this.newDate(n,a,o)},isValid:function(A,g,v){var e=M.baseCalendar.prototype.isValid.apply(this,arguments);return e&&(A=A.year!=null?A.year:A,e=A>=1276&&A<=1500),e},_validate:function(A,g,v,e){var r=M.baseCalendar.prototype._validate.apply(this,arguments);if(r.year<1276||r.year>1500)throw e.replace(/\{0\}/,this.local.name);return r}}),M.calendars.ummalqura=i;var S=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},63489:function($,U,t){var M=t(56131);function E(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}M(E.prototype,{instance:function(e,r){e=(e||"gregorian").toLowerCase(),r=r||"";var f=this._localCals[e+"-"+r];if(!f&&this.calendars[e]&&(f=new this.calendars[e](r),this._localCals[e+"-"+r]=f),!f)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return f},newDate:function(e,r,f,n,a){return n=(e!=null&&e.year?e.calendar():typeof n=="string"?this.instance(n,a):n)||this.instance(),n.newDate(e,r,f)},substituteDigits:function(e){return function(r){return(r+"").replace(/[0-9]/g,function(f){return e[f]})}},substituteChineseDigits:function(e,r){return function(f){for(var n="",a=0;f>0;){var o=f%10;n=(o===0?"":e[o]+r[a])+n,a++,f=Math.floor(f/10)}return n.indexOf(e[1]+r[1])===0&&(n=n.substr(1)),n||e[0]}}});function i(e,r,f,n){if(this._calendar=e,this._year=r,this._month=f,this._day=n,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(v.local.invalidDate||v.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function S(e,r){return e=""+e,"000000".substring(0,r-e.length)+e}M(i.prototype,{newDate:function(e,r,f){return this._calendar.newDate(e??this,r,f)},year:function(e){return arguments.length===0?this._year:this.set(e,"y")},month:function(e){return arguments.length===0?this._month:this.set(e,"m")},day:function(e){return arguments.length===0?this._day:this.set(e,"d")},date:function(e,r,f){if(!this._calendar.isValid(e,r,f))throw(v.local.invalidDate||v.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=e,this._month=r,this._day=f,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,r){return this._calendar.add(this,e,r)},set:function(e,r){return this._calendar.set(this,e,r)},compareTo:function(e){if(this._calendar.name!==e._calendar.name)throw(v.local.differentCalendars||v.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);var r=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return r===0?0:r<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+S(Math.abs(this.year()),4)+"-"+S(this.month(),2)+"-"+S(this.day(),2)}});function A(){this.shortYearCutoff="+10"}M(A.prototype,{_validateLevel:0,newDate:function(e,r,f){return e==null?this.today():(e.year&&(this._validate(e,r,f,v.local.invalidDate||v.regionalOptions[""].invalidDate),f=e.day(),r=e.month(),e=e.year()),new i(this,e,r,f))},today:function(){return this.fromJSDate(new Date)},epoch:function(e){var r=this._validate(e,this.minMonth,this.minDay,v.local.invalidYear||v.regionalOptions[""].invalidYear);return r.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,v.local.invalidYear||v.regionalOptions[""].invalidYear);return(r.year()<0?"-":"")+S(Math.abs(r.year()),4)},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,v.local.invalidYear||v.regionalOptions[""].invalidYear),12},monthOfYear:function(e,r){var f=this._validate(e,r,this.minDay,v.local.invalidMonth||v.regionalOptions[""].invalidMonth);return(f.month()+this.monthsInYear(f)-this.firstMonth)%this.monthsInYear(f)+this.minMonth},fromMonthOfYear:function(e,r){var f=(r+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;return this._validate(e,f,this.minDay,v.local.invalidMonth||v.regionalOptions[""].invalidMonth),f},daysInYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,v.local.invalidYear||v.regionalOptions[""].invalidYear);return this.leapYear(r)?366:365},dayOfYear:function(e,r,f){var n=this._validate(e,r,f,v.local.invalidDate||v.regionalOptions[""].invalidDate);return n.toJD()-this.newDate(n.year(),this.fromMonthOfYear(n.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,r,f){var n=this._validate(e,r,f,v.local.invalidDate||v.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(n))+2)%this.daysInWeek()},extraInfo:function(e,r,f){return this._validate(e,r,f,v.local.invalidDate||v.regionalOptions[""].invalidDate),{}},add:function(e,r,f){return this._validate(e,this.minMonth,this.minDay,v.local.invalidDate||v.regionalOptions[""].invalidDate),this._correctAdd(e,this._add(e,r,f),r,f)},_add:function(e,r,f){if(this._validateLevel++,f==="d"||f==="w"){var n=e.toJD()+r*(f==="w"?this.daysInWeek():1),a=e.calendar().fromJD(n);return this._validateLevel--,[a.year(),a.month(),a.day()]}try{var o=e.year()+(f==="y"?r:0),h=e.monthOfYear()+(f==="m"?r:0),a=e.day(),y=function(s){for(;h<s.minMonth;)o--,h+=s.monthsInYear(o);for(var u=s.monthsInYear(o);h>u-1+s.minMonth;)o++,h-=u,u=s.monthsInYear(o)};f==="y"?(e.month()!==this.fromMonthOfYear(o,h)&&(h=this.newDate(o,e.month(),this.minDay).monthOfYear()),h=Math.min(h,this.monthsInYear(o)),a=Math.min(a,this.daysInMonth(o,this.fromMonthOfYear(o,h)))):f==="m"&&(y(this),a=Math.min(a,this.daysInMonth(o,this.fromMonthOfYear(o,h))));var p=[o,this.fromMonthOfYear(o,h),a];return this._validateLevel--,p}catch(x){throw this._validateLevel--,x}},_correctAdd:function(e,r,f,n){if(!this.hasYearZero&&(n==="y"||n==="m")&&(r[0]===0||e.year()>0!=r[0]>0)){var a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[n],o=f<0?-1:1;r=this._add(e,f*a[0]+o*a[1],a[2])}return e.date(r[0],r[1],r[2])},set:function(e,r,f){this._validate(e,this.minMonth,this.minDay,v.local.invalidDate||v.regionalOptions[""].invalidDate);var n=f==="y"?r:e.year(),a=f==="m"?r:e.month(),o=f==="d"?r:e.day();return(f==="y"||f==="m")&&(o=Math.min(o,this.daysInMonth(n,a))),e.date(n,a,o)},isValid:function(e,r,f){this._validateLevel++;var n=this.hasYearZero||e!==0;if(n){var a=this.newDate(e,r,this.minDay);n=r>=this.minMonth&&r-this.minMonth<this.monthsInYear(a)&&f>=this.minDay&&f-this.minDay<this.daysInMonth(a)}return this._validateLevel--,n},toJSDate:function(e,r,f){var n=this._validate(e,r,f,v.local.invalidDate||v.regionalOptions[""].invalidDate);return v.instance().fromJD(this.toJD(n)).toJSDate()},fromJSDate:function(e){return this.fromJD(v.instance().fromJSDate(e).toJD())},_validate:function(e,r,f,n){if(e.year){if(this._validateLevel===0&&this.name!==e.calendar().name)throw(v.local.differentCalendars||v.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(e,r,f))throw n.replace(/\{0\}/,this.local.name);var a=this.newDate(e,r,f);return this._validateLevel--,a}catch(o){throw this._validateLevel--,o}}});function g(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}g.prototype=new A,M(g.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(f){var r=this._validate(f,this.minMonth,this.minDay,v.local.invalidYear||v.regionalOptions[""].invalidYear),f=r.year()+(r.year()<0?1:0);return f%4===0&&(f%100!==0||f%400===0)},weekOfYear:function(e,r,f){var n=this.newDate(e,r,f);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,r){var f=this._validate(e,r,this.minDay,v.local.invalidMonth||v.regionalOptions[""].invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===2&&this.leapYear(f.year())?1:0)},weekDay:function(e,r,f){return(this.dayOfWeek(e,r,f)||7)<6},toJD:function(e,r,f){var n=this._validate(e,r,f,v.local.invalidDate||v.regionalOptions[""].invalidDate);e=n.year(),r=n.month(),f=n.day(),e<0&&e++,r<3&&(r+=12,e--);var a=Math.floor(e/100),o=2-a+Math.floor(a/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(r+1))+f+o-1524.5},fromJD:function(e){var r=Math.floor(e+.5),f=Math.floor((r-186721625e-2)/36524.25);f=r+1+f-Math.floor(f/4);var n=f+1524,a=Math.floor((n-122.1)/365.25),o=Math.floor(365.25*a),h=Math.floor((n-o)/30.6001),y=n-o-Math.floor(h*30.6001),p=h-(h>13.5?13:1),x=a-(p>2.5?4716:4715);return x<=0&&x--,this.newDate(x,p,y)},toJSDate:function(e,r,f){var n=this._validate(e,r,f,v.local.invalidDate||v.regionalOptions[""].invalidDate),a=new Date(n.year(),n.month()-1,n.day());return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(a.getHours()>12?a.getHours()+2:0),a},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var v=$.exports=new E;v.cdate=i,v.baseCalendar=A,v.calendars.gregorian=g},94338:function($,U,t){var M=t(56131),E=t(63489);M(E.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),E.local=E.regionalOptions[""],M(E.cdate.prototype,{formatDate:function(i,S){return typeof i!="string"&&(S=i,i=""),this._calendar.formatDate(i||"",this,S)}}),M(E.baseCalendar.prototype,{UNIX_EPOCH:E.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:E.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(i,S,A){if(typeof i!="string"&&(A=S,S=i,i=""),!S)return"";if(S.calendar()!==this)throw E.local.invalidFormat||E.regionalOptions[""].invalidFormat;i=i||this.local.dateFormat,A=A||{};var g=A.dayNamesShort||this.local.dayNamesShort,v=A.dayNames||this.local.dayNames,e=A.monthNumbers||this.local.monthNumbers,r=A.monthNamesShort||this.local.monthNamesShort,f=A.monthNames||this.local.monthNames;A.calculateWeek||this.local.calculateWeek;for(var n=function(k,_){for(var b=1;T+b<i.length&&i.charAt(T+b)===k;)b++;return T+=b-1,Math.floor(b/(_||1))>1},a=function(k,_,b,P){var l=""+_;if(n(k,P))for(;l.length<b;)l="0"+l;return l},o=function(k,_,b,P){return n(k)?P[_]:b[_]},h=this,y=function(k){return typeof e=="function"?e.call(h,k,n("m")):s(a("m",k.month(),2))},p=function(k,_){return _?typeof f=="function"?f.call(h,k):f[k.month()-h.minMonth]:typeof r=="function"?r.call(h,k):r[k.month()-h.minMonth]},x=this.local.digits,s=function(k){return A.localNumbers&&x?x(k):k},u="",c=!1,T=0;T<i.length;T++)if(c)i.charAt(T)==="'"&&!n("'")?c=!1:u+=i.charAt(T);else switch(i.charAt(T)){case"d":u+=s(a("d",S.day(),2));break;case"D":u+=o("D",S.dayOfWeek(),g,v);break;case"o":u+=a("o",S.dayOfYear(),3);break;case"w":u+=a("w",S.weekOfYear(),2);break;case"m":u+=y(S);break;case"M":u+=p(S,n("M"));break;case"y":u+=n("y",2)?S.year():(S.year()%100<10?"0":"")+S.year()%100;break;case"Y":n("Y",2),u+=S.formatYear();break;case"J":u+=S.toJD();break;case"@":u+=(S.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":u+=(S.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":n("'")?u+="'":c=!0;break;default:u+=i.charAt(T)}return u},parseDate:function(i,S,A){if(S==null)throw E.local.invalidArguments||E.regionalOptions[""].invalidArguments;if(S=typeof S=="object"?S.toString():S+"",S==="")return null;i=i||this.local.dateFormat,A=A||{};var g=A.shortYearCutoff||this.shortYearCutoff;g=typeof g!="string"?g:this.today().year()%100+parseInt(g,10);for(var v=A.dayNamesShort||this.local.dayNamesShort,e=A.dayNames||this.local.dayNames,r=A.parseMonth||this.local.parseMonth,f=A.monthNumbers||this.local.monthNumbers,n=A.monthNamesShort||this.local.monthNamesShort,a=A.monthNames||this.local.monthNames,o=-1,h=-1,y=-1,p=-1,x=-1,s=!1,u=!1,c=function(z,B){for(var O=1;L+O<i.length&&i.charAt(L+O)===z;)O++;return L+=O-1,Math.floor(O/(B||1))>1},T=function(z,B){var O=c(z,B),R=[2,3,O?4:2,O?4:2,10,11,20]["oyYJ@!".indexOf(z)+1],C=new RegExp("^-?\\d{1,"+R+"}"),F=S.substring(d).match(C);if(!F)throw(E.local.missingNumberAt||E.regionalOptions[""].missingNumberAt).replace(/\{0\}/,d);return d+=F[0].length,parseInt(F[0],10)},k=this,_=function(){if(typeof f=="function"){c("m");var z=f.call(k,S.substring(d));return d+=z.length,z}return T("m")},b=function(z,B,O,R){for(var C=c(z,R)?O:B,F=0;F<C.length;F++)if(S.substr(d,C[F].length).toLowerCase()===C[F].toLowerCase())return d+=C[F].length,F+k.minMonth;throw(E.local.unknownNameAt||E.regionalOptions[""].unknownNameAt).replace(/\{0\}/,d)},P=function(){if(typeof a=="function"){var z=c("M")?a.call(k,S.substring(d)):n.call(k,S.substring(d));return d+=z.length,z}return b("M",n,a)},l=function(){if(S.charAt(d)!==i.charAt(L))throw(E.local.unexpectedLiteralAt||E.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,d);d++},d=0,L=0;L<i.length;L++)if(u)i.charAt(L)==="'"&&!c("'")?u=!1:l();else switch(i.charAt(L)){case"d":p=T("d");break;case"D":b("D",v,e);break;case"o":x=T("o");break;case"w":T("w");break;case"m":y=_();break;case"M":y=P();break;case"y":var w=L;s=!c("y",2),L=w,h=T("y",2);break;case"Y":h=T("Y",2);break;case"J":o=T("J")+.5,S.charAt(d)==="."&&(d++,T("J"));break;case"@":o=T("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":o=T("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":d=S.length;break;case"'":c("'")?l():u=!0;break;default:l()}if(d<S.length)throw E.local.unexpectedText||E.regionalOptions[""].unexpectedText;if(h===-1?h=this.today().year():h<100&&s&&(h+=g===-1?1900:this.today().year()-this.today().year()%100-(h<=g?0:100)),typeof y=="string"&&(y=r.call(this,h,y)),x>-1){y=1,p=x;for(var I=this.daysInMonth(h,y);p>I;I=this.daysInMonth(h,y))y++,p-=I}return o>-1?this.fromJD(o):this.newDate(h,y,p)},determineDate:function(i,S,A,g,v){A&&typeof A!="object"&&(v=g,g=A,A=null),typeof g!="string"&&(v=g,g="");var e=this,r=function(f){try{return e.parseDate(g,f,v)}catch{}f=f.toLowerCase();for(var n=(f.match(/^c/)&&A?A.newDate():null)||e.today(),a=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,o=a.exec(f);o;)n.add(parseInt(o[1],10),o[2]||"d"),o=a.exec(f);return n};return S=S?S.newDate():null,i=i==null?S:typeof i=="string"?r(i):typeof i=="number"?isNaN(i)||i===1/0||i===-1/0?S:e.today().add(i,"d"):e.newDate(i),i}})},69862:function(){},40964:function(){},72077:function($,U,t){var M=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],E=typeof globalThis>"u"?t.g:globalThis;$.exports=function(){for(var i=[],S=0;S<M.length;S++)typeof E[M[S]]=="function"&&(i[i.length]=M[S]);return i}},81684:function($,U,t){t.d(U,{sX:function(){return mt},k4:function(){return nt}});function M(gt,wt,Pt){gt.prototype=wt.prototype=Pt,Pt.constructor=gt}function E(gt,wt){var Pt=Object.create(gt.prototype);for(var Bt in wt)Pt[Bt]=wt[Bt];return Pt}function i(){}var S=.7,A=1/S,g="\\s*([+-]?\\d+)\\s*",v="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",r=/^#([0-9a-f]{3,8})$/,f=new RegExp("^rgb\\(".concat(g,",").concat(g,",").concat(g,"\\)$")),n=new RegExp("^rgb\\(".concat(e,",").concat(e,",").concat(e,"\\)$")),a=new RegExp("^rgba\\(".concat(g,",").concat(g,",").concat(g,",").concat(v,"\\)$")),o=new RegExp("^rgba\\(".concat(e,",").concat(e,",").concat(e,",").concat(v,"\\)$")),h=new RegExp("^hsl\\(".concat(v,",").concat(e,",").concat(e,"\\)$")),y=new RegExp("^hsla\\(".concat(v,",").concat(e,",").concat(e,",").concat(v,"\\)$")),p={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};M(i,T,{copy:function(gt){return Object.assign(new this.constructor,this,gt)},displayable:function(){return this.rgb().displayable()},hex:x,formatHex:x,formatHex8:s,formatHsl:u,formatRgb:c,toString:c});function x(){return this.rgb().formatHex()}function s(){return this.rgb().formatHex8()}function u(){return R(this).formatHsl()}function c(){return this.rgb().formatRgb()}function T(gt){var wt,Pt;return gt=(gt+"").trim().toLowerCase(),(wt=r.exec(gt))?(Pt=wt[1].length,wt=parseInt(wt[1],16),Pt===6?k(wt):Pt===3?new l(wt>>8&15|wt>>4&240,wt>>4&15|wt&240,(wt&15)<<4|wt&15,1):Pt===8?_(wt>>24&255,wt>>16&255,wt>>8&255,(wt&255)/255):Pt===4?_(wt>>12&15|wt>>8&240,wt>>8&15|wt>>4&240,wt>>4&15|wt&240,((wt&15)<<4|wt&15)/255):null):(wt=f.exec(gt))?new l(wt[1],wt[2],wt[3],1):(wt=n.exec(gt))?new l(wt[1]*255/100,wt[2]*255/100,wt[3]*255/100,1):(wt=a.exec(gt))?_(wt[1],wt[2],wt[3],wt[4]):(wt=o.exec(gt))?_(wt[1]*255/100,wt[2]*255/100,wt[3]*255/100,wt[4]):(wt=h.exec(gt))?O(wt[1],wt[2]/100,wt[3]/100,1):(wt=y.exec(gt))?O(wt[1],wt[2]/100,wt[3]/100,wt[4]):p.hasOwnProperty(gt)?k(p[gt]):gt==="transparent"?new l(NaN,NaN,NaN,0):null}function k(gt){return new l(gt>>16&255,gt>>8&255,gt&255,1)}function _(gt,wt,Pt,Bt){return Bt<=0&&(gt=wt=Pt=NaN),new l(gt,wt,Pt,Bt)}function b(gt){return gt instanceof i||(gt=T(gt)),gt?(gt=gt.rgb(),new l(gt.r,gt.g,gt.b,gt.opacity)):new l}function P(gt,wt,Pt,Bt){return arguments.length===1?b(gt):new l(gt,wt,Pt,Bt??1)}function l(gt,wt,Pt,Bt){this.r=+gt,this.g=+wt,this.b=+Pt,this.opacity=+Bt}M(l,P,E(i,{brighter:function(gt){return gt=gt==null?A:Math.pow(A,gt),new l(this.r*gt,this.g*gt,this.b*gt,this.opacity)},darker:function(gt){return gt=gt==null?S:Math.pow(S,gt),new l(this.r*gt,this.g*gt,this.b*gt,this.opacity)},rgb:function(){return this},clamp:function(){return new l(z(this.r),z(this.g),z(this.b),I(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:d,formatHex:d,formatHex8:L,formatRgb:w,toString:w}));function d(){return"#".concat(B(this.r)).concat(B(this.g)).concat(B(this.b))}function L(){return"#".concat(B(this.r)).concat(B(this.g)).concat(B(this.b)).concat(B((isNaN(this.opacity)?1:this.opacity)*255))}function w(){var gt=I(this.opacity);return"".concat(gt===1?"rgb(":"rgba(").concat(z(this.r),", ").concat(z(this.g),", ").concat(z(this.b)).concat(gt===1?")":", ".concat(gt,")"))}function I(gt){return isNaN(gt)?1:Math.max(0,Math.min(1,gt))}function z(gt){return Math.max(0,Math.min(255,Math.round(gt)||0))}function B(gt){return gt=z(gt),(gt<16?"0":"")+gt.toString(16)}function O(gt,wt,Pt,Bt){return Bt<=0?gt=wt=Pt=NaN:Pt<=0||Pt>=1?gt=wt=NaN:wt<=0&&(gt=NaN),new F(gt,wt,Pt,Bt)}function R(gt){if(gt instanceof F)return new F(gt.h,gt.s,gt.l,gt.opacity);if(gt instanceof i||(gt=T(gt)),!gt)return new F;if(gt instanceof F)return gt;gt=gt.rgb();var wt=gt.r/255,Pt=gt.g/255,Bt=gt.b/255,kt=Math.min(wt,Pt,Bt),jt=Math.max(wt,Pt,Bt),Ht=NaN,Vt=jt-kt,ee=(jt+kt)/2;return Vt?(wt===jt?Ht=(Pt-Bt)/Vt+(Pt<Bt)*6:Pt===jt?Ht=(Bt-wt)/Vt+2:Ht=(wt-Pt)/Vt+4,Vt/=ee<.5?jt+kt:2-jt-kt,Ht*=60):Vt=ee>0&&ee<1?0:Ht,new F(Ht,Vt,ee,gt.opacity)}function C(gt,wt,Pt,Bt){return arguments.length===1?R(gt):new F(gt,wt,Pt,Bt??1)}function F(gt,wt,Pt,Bt){this.h=+gt,this.s=+wt,this.l=+Pt,this.opacity=+Bt}M(F,C,E(i,{brighter:function(gt){return gt=gt==null?A:Math.pow(A,gt),new F(this.h,this.s,this.l*gt,this.opacity)},darker:function(gt){return gt=gt==null?S:Math.pow(S,gt),new F(this.h,this.s,this.l*gt,this.opacity)},rgb:function(){var gt=this.h%360+(this.h<0)*360,wt=isNaN(gt)||isNaN(this.s)?0:this.s,Pt=this.l,Bt=Pt+(Pt<.5?Pt:1-Pt)*wt,kt=2*Pt-Bt;return new l(K(gt>=240?gt-240:gt+120,kt,Bt),K(gt,kt,Bt),K(gt<120?gt+240:gt-120,kt,Bt),this.opacity)},clamp:function(){return new F(N(this.h),V(this.s),V(this.l),I(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var gt=I(this.opacity);return"".concat(gt===1?"hsl(":"hsla(").concat(N(this.h),", ").concat(V(this.s)*100,"%, ").concat(V(this.l)*100,"%").concat(gt===1?")":", ".concat(gt,")"))}}));function N(gt){return gt=(gt||0)%360,gt<0?gt+360:gt}function V(gt){return Math.max(0,Math.min(1,gt||0))}function K(gt,wt,Pt){return(gt<60?wt+(Pt-wt)*gt/60:gt<180?Pt:gt<240?wt+(Pt-wt)*(240-gt)/60:wt)*255}var Q=function(gt){return function(){return gt}};function at(gt,wt){return function(Pt){return gt+Pt*wt}}function it(gt,wt,Pt){return gt=Math.pow(gt,Pt),wt=Math.pow(wt,Pt)-gt,Pt=1/Pt,function(Bt){return Math.pow(gt+Bt*wt,Pt)}}function q(gt){return(gt=+gt)==1?W:function(wt,Pt){return Pt-wt?it(wt,Pt,gt):Q(isNaN(wt)?Pt:wt)}}function W(gt,wt){var Pt=wt-gt;return Pt?at(gt,Pt):Q(isNaN(gt)?wt:gt)}var Z=function gt(wt){var Pt=q(wt);function Bt(kt,jt){var Ht=Pt((kt=P(kt)).r,(jt=P(jt)).r),Vt=Pt(kt.g,jt.g),ee=Pt(kt.b,jt.b),te=W(kt.opacity,jt.opacity);return function(ae){return kt.r=Ht(ae),kt.g=Vt(ae),kt.b=ee(ae),kt.opacity=te(ae),kt+""}}return Bt.gamma=gt,Bt}(1);function G(gt,wt){var Pt=wt?wt.length:0,Bt=gt?Math.min(Pt,gt.length):0,kt=new Array(Bt),jt=new Array(Pt),Ht;for(Ht=0;Ht<Bt;++Ht)kt[Ht]=mt(gt[Ht],wt[Ht]);for(;Ht<Pt;++Ht)jt[Ht]=wt[Ht];return function(Vt){for(Ht=0;Ht<Bt;++Ht)jt[Ht]=kt[Ht](Vt);return jt}}function et(gt,wt){var Pt=new Date;return gt=+gt,wt=+wt,function(Bt){return Pt.setTime(gt*(1-Bt)+wt*Bt),Pt}}function nt(gt,wt){return gt=+gt,wt=+wt,function(Pt){return gt*(1-Pt)+wt*Pt}}function X(gt){"@babel/helpers - typeof";return X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(wt){return typeof wt}:function(wt){return wt&&typeof Symbol=="function"&&wt.constructor===Symbol&&wt!==Symbol.prototype?"symbol":typeof wt},X(gt)}function Y(gt,wt){var Pt={},Bt={},kt;(gt===null||X(gt)!=="object")&&(gt={}),(wt===null||X(wt)!=="object")&&(wt={});for(kt in wt)kt in gt?Pt[kt]=mt(gt[kt],wt[kt]):Bt[kt]=wt[kt];return function(jt){for(kt in Pt)Bt[kt]=Pt[kt](jt);return Bt}}var ot=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rt=new RegExp(ot.source,"g");function ht(gt){return function(){return gt}}function pt(gt){return function(wt){return gt(wt)+""}}function yt(gt,wt){var Pt=ot.lastIndex=rt.lastIndex=0,Bt,kt,jt,Ht=-1,Vt=[],ee=[];for(gt=gt+"",wt=wt+"";(Bt=ot.exec(gt))&&(kt=rt.exec(wt));)(jt=kt.index)>Pt&&(jt=wt.slice(Pt,jt),Vt[Ht]?Vt[Ht]+=jt:Vt[++Ht]=jt),(Bt=Bt[0])===(kt=kt[0])?Vt[Ht]?Vt[Ht]+=kt:Vt[++Ht]=kt:(Vt[++Ht]=null,ee.push({i:Ht,x:nt(Bt,kt)})),Pt=rt.lastIndex;return Pt<wt.length&&(jt=wt.slice(Pt),Vt[Ht]?Vt[Ht]+=jt:Vt[++Ht]=jt),Vt.length<2?ee[0]?pt(ee[0].x):ht(wt):(wt=ee.length,function(te){for(var ae=0,le;ae<wt;++ae)Vt[(le=ee[ae]).i]=le.x(te);return Vt.join("")})}function xt(gt,wt){wt||(wt=[]);var Pt=gt?Math.min(wt.length,gt.length):0,Bt=wt.slice(),kt;return function(jt){for(kt=0;kt<Pt;++kt)Bt[kt]=gt[kt]*(1-jt)+wt[kt]*jt;return Bt}}function Ft(gt){return ArrayBuffer.isView(gt)&&!(gt instanceof DataView)}function Et(gt){"@babel/helpers - typeof";return Et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(wt){return typeof wt}:function(wt){return wt&&typeof Symbol=="function"&&wt.constructor===Symbol&&wt!==Symbol.prototype?"symbol":typeof wt},Et(gt)}function mt(gt,wt){var Pt=Et(wt),Bt;return wt==null||Pt==="boolean"?Q(wt):(Pt==="number"?nt:Pt==="string"?(Bt=T(wt))?(wt=Bt,Z):yt:wt instanceof T?Z:wt instanceof Date?et:Ft(wt)?xt:Array.isArray(wt)?G:typeof wt.valueOf!="function"&&typeof wt.toString!="function"||isNaN(wt)?Y:nt)(gt,wt)}},40402:function($){$.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},83794:function($){$.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},96209:function($){$.exports=JSON.parse('["normal","italic","oblique"]')},15659:function($){$.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},38732:function($){$.exports=JSON.parse('["inherit","initial","unset"]')},41901:function($){$.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},vl={};function ha($){var U=vl[$];if(U!==void 0)return U.exports;var t=vl[$]={exports:{}};return ql[$].call(t.exports,t,t.exports,ha),t.exports}(function(){ha.n=function($){var U=$&&$.__esModule?function(){return $.default}:function(){return $};return ha.d(U,{a:U}),U}})(),function(){ha.d=function($,U){for(var t in U)ha.o(U,t)&&!ha.o($,t)&&Object.defineProperty($,t,{enumerable:!0,get:U[t]})}}(),function(){ha.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){ha.o=function($,U){return Object.prototype.hasOwnProperty.call($,U)}}(),function(){ha.r=function($){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty($,Symbol.toStringTag,{value:"Module"}),Object.defineProperty($,"__esModule",{value:!0})}}();var ml=ha(27909);return ml}()})})(Oh);var Hp=Oh.exports;const Ju=iv(Hp),Gp="/SciVis23/",Wp={data(){return{ws:null,ws_open:!1,joined_room:!1,room_id:"",view_idx:0,timeline:null,sim_data:{},sim_data_ranges:{},sim_property:"area",property_names:{area:"Area",current_calcium:"Calcium",target_calcium:"Calcium to Target",fired:"Fired",fired_fraction:"Fired Rate",grown_axons:"Axons",grown_dendrites:"Dendrites",connected_acons:"Incoming Connections",connected_dendrites:"Outgoing Connections"},simulation_names:{"viz-no-network":"No Initial Connectivity","viz-stimulus":"Stimulation / Learning","viz-disable":"Disable Areas / Injury","viz-calcium":"Per-Neuron Calcium Targets"},neuron_areas:[],area_colors:["#808080","#2f4f4f","#556b2f","#6b8e23","#a0522d","#8b0000","#483d8b","#008000","#3cb371","#b8860b","#bdb76b","#008b8b","#4682b4","#000080","#d2691e","#9acd32","#32cd32","#8fbc8f","#8b008b","#b03060","#ff4500","#ffa500","#ffd700","#6a5acd","#ffff00","#0000cd","#00ff00","#ba55d3","#8a2be2","#00ff7f","#dc143c","#00ffff","#00bfff","#f4a460","#f08080","#adff2f","#ff6347","#b0c4de","#ff00ff","#6495ed","#dda0dd","#ff1493","#afeeee","#98fb98","#7fffd4","#ffe4b5","#ff69b4","#ffb6c1"]}},methods:{joinRoom(wo){if(this.room_id!==""&&this.ws_open){let Ua={type:"join",data:{id:this.room_id}};this.ws.send(JSON.stringify(Ua))}},createRoom(wo){if(this.room_id!==""&&this.ws_open){let Ua={type:"create",data:{id:this.room_id}};this.ws.send(JSON.stringify(Ua))}},leaveRoom(wo){let Ua={type:"leave",data:{id:this.room_id}};this.ws.send(JSON.stringify(Ua)),this.joined_room=!1,this.room_id=""},joinedRoom(wo,Ua){Ua?(this.joined_room=!0,this.ws.send(JSON.stringify({type:"getState"}))):wo==="create"?alert("Error: Could not create room. Try a different ID."):wo==="join"&&alert("Error: Could not join room. Try creating one or join using a different ID.")},generatePlotlyLayout(wo,Ua,ql,vl){return{paper_bgcolor:"rgba(0, 0, 0, 0.0)",plot_bgcolor:"rgba(0, 0, 0, 0.0)",title:{text:wo,font:{family:"Arial, Helvetica, sans-serif",size:24,color:"#FFFFFF"}},xaxis:{title:{text:Ua,font:{family:"Arial, Helvetica, sans-serif",size:16,color:"#FFFFFF"}},linecolor:"#FFFFFF",linewidth:1,minor:{tickcolor:"#FFFFFF"},tickfont:{family:"Arial, Helvetica, sans-serif",size:12,color:"#FFFFFF"}},yaxis:{title:{text:ql,font:{family:"Arial, Helvetica, sans-serif",size:16,color:"#FFFFFF"}},linecolor:"#FFFFFF",linewidth:1,tickcolor:"#FFFFFF",tickfont:{family:"Arial, Helvetica, sans-serif",size:12,color:"#FFFFFF"},range:vl}}}},mounted(){let wo=t=>{let M={},E=["current_calcium","target_calcium","fired","fired_fraction","grown_axons","grown_dendrites","connected_acons","connected_dendrites"];for(let S=0;S<t.schema.fields.length;S++)E.includes(t.schema.fields[S].name)&&(M[t.schema.fields[S].name]=t.data[0].children[S].values);let i={};for(let S in M)if(M.hasOwnProperty(S)){S==="target_calcium"&&(M[S]=M[S].map((v,e)=>M.current_calcium[e]-v));let A=M[S][0],g=M[S][0];for(let v=1;v<M[S].length;v++){let e=M[S][v];A=e<A?e:A,g=e>g?e:g}g+=.01*(g-A),i[S]={min:A,max:g}}this.sim_data=M,this.sim_data_ranges=i},Ua=()=>{let t,M,E=new Array(48);for(let S=0;S<48;S++)E[S]=[];let i=[0,0];if(this.sim_property==="area")t=["N/A"],M=[0];else if(this.sim_property==="fired"){t=["True","False"],M=[0,0];for(let S=0;S<this.sim_data.fired.length;S++)M[1-this.sim_data.fired[S]]++,E[this.neuron_areas[S]].push(this.sim_data.fired[S]);i[0]=0,i[1]=1}else{let S=5,A=this.sim_data_ranges[this.sim_property].min,g=this.sim_data_ranges[this.sim_property].max,v=(g-A)/S;t=["["+A.toFixed(3)+","+(A+v).toFixed(3)+"]","["+(A+v).toFixed(3)+","+(A+2*v).toFixed(3)+"]","["+(A+2*v).toFixed(3)+","+(A+3*v).toFixed(3)+"]","["+(A+3*v).toFixed(3)+","+(A+4*v).toFixed(3)+"]","["+(A+4*v).toFixed(3)+","+g.toFixed(3)+"]"],M=[0,0,0,0,0];for(let e=0;e<this.sim_data[this.sim_property].length;e++){let r=this.sim_data[this.sim_property][e],f=4;r<A+v?f=0:r<A+2*v?f=1:r<A+3*v?f=2:r<A+4*v&&(f=3),M[f]++,E[this.neuron_areas[e]].push(r)}i[0]=A,i[1]=g}ql[0].x=t,ql[0].y=M,vl.title.text="Histogram: "+this.property_names[this.sim_property],Ju.redraw("histogram"),ha[0].dimensions[1].values=this.sim_data.current_calcium,ha[0].dimensions[2].values=this.sim_data.fired_fraction,ha[0].dimensions[3].values=this.sim_data.grown_axons,ha[0].dimensions[4].values=this.sim_data.grown_dendrites,Ju.redraw("parallel");for(let S=0;S<48;S++)$[S].y=E[S];U.title.text=this.property_names[this.sim_property]+" per Area",U.yaxis.range=i,Ju.redraw("areas")};this.getCSV(Gp+"data/viz-no-network_positions.csv").then(t=>{console.log(t.length+" points"),t.forEach(M=>{this.neuron_areas.push(parseInt(M[3]))}),ha[0].dimensions[0].values=this.neuron_areas,Ju.redraw("parallel")}).catch(t=>{console.log(t)}),this.ws=new WebSocket("wss://scivis23-ws.onrender.com"),this.ws.onopen=t=>{console.log("WebSocket connected!"),this.ws_open=!0},this.ws.onclose=t=>{console.log("WebSocket closed"),this.ws_open=!1},this.ws.onerror=t=>{console.log("WebSocket error: could not connect")},this.ws.onmessage=t=>{let M=JSON.parse(t.data);M.type==="create"||M.type==="join"?this.joinedRoom(M.type,M.response==="success"):M.type==="updateState"?M.hasOwnProperty("data")&&M.data!==null&&(console.log(M.data),this.view_idx=M.data.view,this.sim_property=M.data.state.neuron_property,this.timeline.setTimestep(M.data.state.timestep),this.timeline.setSimulation(M.data.state.simulation),this.timeline.getData().then(E=>{wo(E.neurons),Ua()}).catch(E=>{console.error(E)})):console.log(M)};let ql=[{type:"bar",x:["N/A"],y:[0]}],vl=this.generatePlotlyLayout("Histogram: Area",null,"# Neurons"),ha=[{type:"parcoords",line:{color:"#E7462A"},labelfont:{family:"Arial, Helvetica, sans-serif",size:14,color:"#FFFFFF"},rangefont:{family:"Arial, Helvetica, sans-serif",size:12,color:"#FFFFFF"},tickfont:{family:"Arial, Helvetica, sans-serif",size:12,color:"#FFFFFF"},tickcolor:"#FFFFFF",dimensions:[{label:"Area",range:[0,47],values:[0]},{label:"Calcium",range:[0,.790452],values:[0]},{label:"Fired Rate",range:[0,.06],values:[0]},{label:"Axons",range:[0,27],values:[0]},{label:"Dendrites",range:[0,19],values:[0]}]}],ml=this.generatePlotlyLayout("Neuron Properties",null,null),$=[];for(let t=0;t<48;t++){let M=[0];$.push({type:"box",name:t.toString(),y:M,marker:{color:this.area_colors[t]},boxpoints:!1})}let U=this.generatePlotlyLayout("Area per Area","Area ID","Calcium",[0,1.01]);Ju.newPlot("histogram",ql,vl,{responsive:!0}),Ju.newPlot("parallel",ha,ml,{responsive:!0}),Ju.newPlot("areas",$,U,{responsive:!0}),this.timeline=new ov.Timeline,this.timeline.getData().then(t=>{wo(t.neurons),Ua()}).catch(t=>{console.error(t)})}},Lc=wo=>(uv("data-v-fe53cd21"),wo=wo(),cv(),wo),Yp={id:"main"},Xp={id:"gui",class:"row"},Kp=Lc(()=>co("div",{class:"col-12 col-4-m padding-top-0-25rem"},[co("h1",{id:"gui-title"},"Brain Plasticity")],-1)),Jp={key:0,class:"col-12 col-8-m padding-top-1rem padding-top-0-25rem-m"},Qp=Lc(()=>co("label",null,"Room:",-1)),$p={key:1,class:"col-12 col-8-m padding-top-1rem padding-top-0-25rem-m"},td={class:"text-display"},ed={id:"info-container",class:"row"},rd={class:"col-12"},nd={id:"info-bar"},id=Lc(()=>co("span",{class:"bold"},"View: ",-1)),ad=Lc(()=>co("span",{class:"bold"},"Simulation: ",-1)),od=Lc(()=>co("span",{class:"bold"},"Timestep: ",-1)),sd=Lc(()=>co("div",{id:"content",class:"row"},[co("div",{id:"histogram",class:"col-12 col-6-m no-padding"}),co("div",{id:"parallel",class:"col-12 col-6-m no-padding"}),co("div",{id:"areas",class:"col-12 no-padding"})],-1));function ld(wo,Ua,ql,vl,ha,ml){return Ch(),Lh("div",Yp,[co("div",Xp,[Kp,ha.joined_room?(Ch(),Lh("div",$p,[co("label",td,Jf(ha.room_id),1),co("button",{class:Ph("button-input "+(ha.ws_open?"leave-btn":"disable-btn")),type:"button",onClick:Ua[3]||(Ua[3]=(...$)=>ml.leaveRoom&&ml.leaveRoom(...$))},"Leave",2)])):(Ch(),Lh("div",Jp,[Qp,sv(co("input",{class:"text-input space-left space-right-half",type:"text",placeholder:"Enter ID","onUpdate:modelValue":Ua[0]||(Ua[0]=$=>ha.room_id=$)},null,512),[[lv,ha.room_id]]),co("button",{class:Ph("button-input "+(ha.ws_open?"join-btn":"disable-btn")),type:"button",onClick:Ua[1]||(Ua[1]=(...$)=>ml.joinRoom&&ml.joinRoom(...$))},"Join",2),co("button",{class:Ph("button-input "+(ha.ws_open?"create-btn":"disable-btn")),type:"button",onClick:Ua[2]||(Ua[2]=(...$)=>ml.createRoom&&ml.createRoom(...$))},"Create",2)]))]),co("div",ed,[co("div",rd,[co("h2",nd,[id,Eh(Jf(ha.view_idx)+", ",1),ad,Eh('"'+Jf(ha.timeline?ha.simulation_names[ha.timeline.simulation]:"--")+'", ',1),od,Eh(Jf(ha.timeline?ha.timeline.timestep/100:"--"),1)])])]),sd])}const ud=av(Wp,[["render",ld],["__scopeId","data-v-fe53cd21"]]);let Ih=fv(ud);Ih.use(hv,{}),Ih.mount("#app")});
